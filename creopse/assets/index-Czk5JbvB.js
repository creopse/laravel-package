const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as se}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Da,a as no,b as Ai}from"./index.vue_vue_type_script_setup_true_lang-CBF6U1jf.js";import{_ as Rd}from"./PageLayout.vue_vue_type_script_setup_true_lang-B0jZ4xJb.js";import{_ as $a}from"./I18nInput-US_Qa5oh.js";import{Q as Qs,e as Fe,t as _t,u as Ze,f as Bt,w as Qt,y as On,S as Jo,T as jd,U as md,v as za,V as oo,p as To,W as fd,x as Kd,J as Yd,X as _d,Y as Gd,Z as zi,_ as Aa,$ as Pi,a0 as Hd,d as Qd,a1 as Wd,a2 as Xd,R as vd,a3 as Jd,a4 as gd,A as Gi,a5 as Li,a6 as yd,a7 as Zd,a8 as eu,a9 as hd,aa as tu,ab as lu,ac as Bi,ad as bd,ae as au,af as nu,ag as ou,q as su,I as ru,ah as iu}from"./main-D6UvRL7q.js";import{I as ie}from"./iconify_vue-DXPEksg3.js";import{_ as Dr}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-BsktLLcM.js";import{u as ke}from"./vue-i18n-B92nPylK.js";import{u as qe,F as Wl,p as Ge,K as Xl,l as so,a0 as Ra,_ as yl,q as $l,H as Va,C as ja,B as Be,h as q,J as Pa,a as ga,d as ya,e as qn,c as Zt,Q as zr,R as Ar,b as ha,a1 as cu,X as es,P as Pr,o as en,S as kd,r as Ka,O as Ws,W as wd,L as Lr,k as ro,s as Fi,a2 as du,a3 as Br,a4 as Oi,a5 as xd,f as qi,D as Rn,E as jn,w as Xs,a6 as uu,a7 as pu,a8 as $d,t as Cd,I as No,y as Ri,a9 as mu,aa as Id,ab as Vd,m as ji,ac as Sd,ad as fu,T as _u,U as vu,V as gu}from"./naive-ui-BrWbllCz.js";import{_ as ne}from"./lodash-C_MgVQnG.js";import{_ as Kn}from"./fawmi_vue-google-maps-yyESU4s0.js";import{C as an,S as Hi,p as wn,d as yu,v as xn,V as Zs,w as $n,G as qr}from"./ngneat_falso-BQ8TvUKs.js";import{h as hu}from"./moment-Djc71hkG.js";import{_ as Ed}from"./index.vue_vue_type_style_index_0_lang-BlIy-Tkt.js";import{u as Ud,a as Md}from"./article-D2mVx1i7.js";import{v as El}from"./uuid-8I8R7izr.js";import{c as Ki,u as bu}from"./tanstack_vue-query-C9nQ2kf3.js";import{s as Td}from"./slugify-BFyLO-pG.js";import{_ as ku}from"./media-file-CYeHjkEn.js";import{r as wu}from"./vueuse_shared-CcT-C3Xm.js";import{_ as ts}from"./jsoneditor-BJ7iDtct.js";import{u as Nd}from"./vueuse_core-DLnQCT4A.js";import{_ as Dd}from"./UploadExcel-BWnBHVSg.js";import{_ as Zo}from"./validator-DC79P2ge.js";import{_ as xu}from"./VueTelInputWrapper-cPEnuzuM.js";import{i as $u}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{u as Cu}from"./email-CyVlT82A.js";import{u as Iu}from"./vue-shepherd-CZJ8KBfd.js";import{a as Vu}from"./vue-router-DjpI5axN.js";var Fn=(u=>(u.IMAGE="image",u.VIDEO="video",u))(Fn||{});const zd=(u,e)=>Qs(["ad-identifiers"],async()=>{const{request:n}=Fe(),l=await n({url:"/ad-identifiers"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Su=(u,e)=>Qs(["ads"],async()=>{const{request:n}=Fe(),l=await n({url:"/ads"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Eu=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe();return _t({queryKey:["ad-identifiers"],operation:"insert",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"post",url:"/ad-identifiers",data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Uu=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe();return _t({queryKey:["ad-identifiers"],operation:"update",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"put",url:`/ad-identifiers/${a.id}`,data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Mu=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe();return _t({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const a=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:o=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Tu,defineComponent:Nu}=await se("vue"),{unref:mt,resolveComponent:Vb,createVNode:Nt,toDisplayString:Do,createTextVNode:Rr,withCtx:Wt,renderList:Du,Fragment:Qi,openBlock:zo,createElementBlock:jr,createElementVNode:ls,createCommentVNode:zu,normalizeClass:Wi,createBlock:Kr,isRef:Au}=await se("vue"),Pu={class:"flex items-center justify-between"},Lu={class:"flex flex-col"},Bu={class:"text-sm font-bold"},Fu={class:"text-xs font-normal"},Ou={key:0,class:"text-xs font-bold"},{ref:as}=await se("vue"),qu=Nu({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,formatKey:l}=Ze(),o=Tu(u,"show"),{data:a,isPending:t}=zd(),{mutate:r}=Mu(),{mutate:j}=Eu(),{mutate:ae}=Uu(),ce=Wl(),O=Ge(),ge=as(!1),F=as(!1),I=as(null),d=as(null),V=as({id:"",reusable:!1,contentType:Fn.IMAGE,contentSize:"",params:[]}),le={id:[{required:!0,message:e("fillRequired")}]},i=X=>{I.value=ne.cloneDeep(X),V.value=ne.cloneDeep(X||{id:"",reusable:!1,contentType:Fn.IMAGE,contentSize:"",params:[]}),F.value=!0},fe=async()=>(d.value?.validate(async X=>{if(!X){O.start(),ge.value=!0;const E={id:V.value.id,reusable:V.value.reusable,contentType:V.value.contentType,contentSize:V.value.contentSize,params:V.value.params};I.value?ae(E,{onSuccess:()=>{F.value=!1}}):j(E,{onSuccess:()=>{F.value=!1}}),ge.value=!1,O.finish()}}),!1),P=async X=>{ce.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{r({id:X.id})}})};return(X,E)=>{const S=ie,M=Be,L=$l,D=Va,H=ja,f=q,T=yl,x=Ra,k=Pa,A=so,U=Xl,K=Zt,Q=qn,Y=ya,C=Ar,_=zr,B=cu,$e=ha,$=ga;return zo(),jr(Qi,null,[Nt(U,{show:o.value,"onUpdate:show":E[2]||(E[2]=m=>o.value=m),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:mt(e)("adIdentifiers")},{"header-extra":Wt(()=>[Nt(L,{align:"center"},{default:Wt(()=>[Nt(M,{secondary:"",size:"small",type:"primary",disabled:mt(t),onClick:E[0]||(E[0]=m=>i(null))},{default:Wt(()=>[Nt(S,{icon:"carbon:add-alt",class:"mr-1"}),Rr(" "+Do(mt(e)("add")),1)]),_:1},8,["disabled"]),Nt(M,{secondary:"",size:"small",type:"error",disabled:mt(t),onClick:E[1]||(E[1]=m=>o.value=!1)},{default:Wt(()=>[Nt(S,{icon:"carbon:close",class:"mr-1"}),Rr(" "+Do(mt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Wt(()=>[Nt(A,{show:mt(t)},{default:Wt(()=>[mt(a)?.length?(zo(),Kr(x,{key:0,style:{"max-height":"400px"}},{default:Wt(()=>[(zo(!0),jr(Qi,null,Du(mt(a),m=>(zo(),Kr(T,{key:m.id,embedded:"",size:"small",class:"mb-2"},{default:Wt(()=>[ls("div",Pu,[ls("div",Lu,[ls("span",Bu,Do(m.id),1),ls("div",null,[ls("span",Fu,Do(m.contentType===mt(Fn).IMAGE?mt(e)("image"):mt(e)("video")),1),m.contentSize?(zo(),jr("span",Ou," Â ("+Do(m.contentSize)+") ",1)):zu("",!0)])]),Nt(L,null,{default:Wt(()=>[Nt(D,{size:"medium",bordered:!1,type:m.reusable?"info":"warning"},{default:Wt(()=>[Rr(Do(m.reusable?mt(e)("reusable"):mt(e)("notReusable")),1)]),_:2},1032,["type"]),Nt(H,{vertical:"",class:Wi(["!mx-0",mt(n)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Nt(M,{size:"small",type:"warning",secondary:"",onClick:s=>i(m)},{default:Wt(()=>[Nt(f,null,{default:Wt(()=>[Nt(S,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Nt(M,{size:"small",type:"error",secondary:"",onClick:s=>P(m)},{default:Wt(()=>[Nt(f,null,{default:Wt(()=>[Nt(S,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(zo(),Kr(T,{key:1,size:"large",class:Wi(`mb-2 !border-dashed !border-2 ${mt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Wt(()=>[Nt(k,{description:mt(e)("noIdentifierAdded")},{icon:Wt(()=>[Nt(f,{size:"60"},{default:Wt(()=>[Nt(S,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Nt(U,{show:mt(F),"onUpdate:show":E[8]||(E[8]=m=>Au(F)?F.value=m:null),loading:mt(ge),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:mt(I)?mt(e)("editAdIdentifier"):mt(e)("addAdIdentifier"),"positive-text":mt(e)("validate"),"negative-text":mt(e)("cancel"),onPositiveClick:fe,onNegativeClick:E[9]||(E[9]=m=>F.value=!1)},{default:Wt(()=>[Nt($,{ref_key:"formRef",ref:d,model:mt(V),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Wt(()=>[Nt(Y,{span:24,"x-gap":"12"},{default:Wt(()=>[Nt(Q,{span:16,label:mt(e)("identifier"),path:"id"},{default:Wt(()=>[Nt(K,{value:mt(V).id,placeholder:mt(e)("identifier"),disabled:mt(I)!=null,class:"w-full","onUpdate:value":E[3]||(E[3]=m=>mt(V).id=mt(l)(m))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),Nt(Q,{span:8,label:mt(e)("contentSize"),path:"contentSize"},{default:Wt(()=>[Nt(K,{value:mt(V).contentSize,"onUpdate:value":E[4]||(E[4]=m=>mt(V).contentSize=m),placeholder:mt(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Nt(Y,{span:24,"x-gap":"12"},{default:Wt(()=>[Nt(Q,{span:12,label:mt(e)("status"),path:"reusable"},{default:Wt(()=>[Nt(_,{value:mt(V).reusable,"onUpdate:value":E[5]||(E[5]=m=>mt(V).reusable=m),name:"reusable",class:"w-full"},{default:Wt(()=>[Nt(C,{value:!1,label:mt(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),Nt(C,{value:!0,label:mt(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Nt(Q,{span:12,label:mt(e)("contentType"),path:"contentType"},{default:Wt(()=>[Nt(_,{value:mt(V).contentType,"onUpdate:value":E[6]||(E[6]=m=>mt(V).contentType=m),name:"contentType",class:"w-full"},{default:Wt(()=>[Nt(C,{value:mt(Fn).IMAGE,label:mt(e)("image"),class:"w-[50%]"},null,8,["value","label"]),Nt(C,{value:mt(Fn).VIDEO,label:mt(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Nt($e,{label:mt(e)("settings"),path:"params"},{default:Wt(()=>[Nt(B,{value:mt(V).params,"onUpdate:value":E[7]||(E[7]=m=>mt(V).params=m),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ru=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["ads"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/ads",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},ju=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["ads"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/ads/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ku=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["ads"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/ads/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:Yu}=await se("vue"),{unref:ve,createVNode:vt,withCtx:Dt,toDisplayString:co,createTextVNode:uo,openBlock:nn,createBlock:er,createCommentVNode:Yr,resolveComponent:Sb,isRef:Ao,Fragment:tr,createElementBlock:Po,normalizeStyle:Xi,createElementVNode:Gr,renderList:Gu}=await se("vue"),Hu={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Qu={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Wu=["src"],{inject:Xu,ref:Ca,h:bl,computed:Ji}=await se("vue"),Ju=Yu({__name:"index",setup(u){const e=qe(),n=Wl(),l=Xu("appConfig"),{data:o}=zd(),{data:a,isPending:t}=Su(),{mutate:r,isPending:j}=Ku(),{mutate:ae,isPending:ce}=Ru(),{mutate:O,isPending:ge}=ju(),{tr:F,fileUrl:I,pickByTheme:d,appSecondaryColor:V,isInDevMode:le}=Ze(),{t:i,locale:fe}=ke(),P=Ca(""),X=Ca(),E={pageSize:12,prefix:({itemCount:m})=>bl("div",{class:"font-bold"},{default:()=>`${i("total")}: ${m}`})},S=[{title:i("preview"),key:"image",width:200,fixed:"left",render(m){return m.adIdentifier?.contentType==Fn.IMAGE?bl(es,{src:m.contentUrl??"",objectFit:"cover",width:200,height:100}):bl("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[bl(q,{size:50,color:V.value},{default:()=>bl(ie,{icon:"carbon:document-video"})})])}},{title:i("identifier"),key:"pid",width:150,fixed:"left",render(m){return bl("small",{},{default:()=>m.pid})}},{title:i("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(m){return bl("div",{},{default:()=>F(m.title)})}},{title:i("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(m){return bl("small",{},{default:()=>F(m.description)})}},{title:i("status"),key:"isActive",width:100,render(m){return bl(Va,{type:m.display?"success":"warning",bordered:!1},{default:()=>m.display?i("visible"):i("hidden")})},sortOrder:!1,sorter:"default"},{title:i("updateAt"),key:"updatedAt",width:125,render(m){return bl("div",{},{default:()=>On(m.updatedAt,{locale:fe.value,outPattern:"DD MMMM YYYY"})})}},{title:i("createdAt"),key:"createdAt",width:125,render(m){return bl("div",{},{default:()=>On(m.createdAt,{locale:fe.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>bl(Zt,{ref:X,placeholder:i("search"),value:P.value,onInput:m=>{P.value=m}},{suffix:()=>bl(q,{},{default:()=>bl(ie,{icon:"carbon:search"})})}),key:"actions",width:150,render(m){return bl("div",{class:"flex justify-end items-center w-full"},[bl(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{K(m)},renderIcon:()=>bl(q,null,{default:()=>bl(ie,{icon:"carbon:edit"})})}),bl("div",{class:"w-2"}),bl(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:i("confirm"),content:i("confirmDeleteAd"),positiveText:i("yes"),negativeText:i("no"),onPositiveClick:async()=>{m.id&&r({id:m.id})}})},renderIcon:()=>bl(q,null,{default:()=>bl(ie,{icon:"carbon:trash-can"})})})])},fixed:"right"}],M=Ji(()=>{if(!P.value)return a.value;const m=a.value?.filter(s=>s.pid.toLowerCase().includes(P.value.toLowerCase())||s.title.toLowerCase().includes(P.value.toLowerCase())||s.description?.toLowerCase().includes(P.value.toLowerCase()));return X.value&&X.value.focus(),m}),L=Ca(!1),D=Ca(!1),H=Ca(Fn.IMAGE),f=Ca(),T=Ca(null),x=Ca(null),k=Ca({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),A={pid:[{required:!0,message:i("fillRequired")}],title:[{required:!0,message:i("fillRequired")}],content:[{required:!0,message:i("fillRequired")}]},U=Ji({get:()=>!k.value.broadcastStart||!k.value.broadcastEnd?null:[k.value.broadcastStart||"",k.value.broadcastEnd||""],set:m=>{m?(k.value.broadcastStart=m[0],k.value.broadcastEnd=m[1]):(k.value.broadcastStart=null,k.value.broadcastEnd=null)}}),K=m=>{T.value=ne.cloneDeep(m),m?(k.value=ne.cloneDeep(m),m.data||(k.value.data={})):k.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},f.value=o.value?.find(s=>s.id==k.value.pid)?.params,L.value=!0},Q=m=>bl("span",{},{default:()=>m.id+(m.contentSize?` (${m.contentSize})`:"")}),Y=async()=>(x.value?.validate(async m=>{if(!m){const s={pid:k.value.pid,title:k.value.title,display:k.value.display,content:k.value.content,description:k.value.description,data:k.value.data,broadcastStart:k.value.broadcastStart,broadcastEnd:k.value.broadcastEnd};T.value?T.value.title!==k.value.title&&(a.value||[]).findIndex(h=>h.title==k.value.title)>-1?e.error(i("sameAdTitleMessage")):O({id:T.value.id,...s},{onSuccess:()=>{}}):(a.value||[]).findIndex(h=>h.title==k.value.title)>-1?e.error(i("sameAdTitleMessage")):ae(s,{onSuccess:()=>{}}),L.value=!1}}),!1),C=Ca(!1),_=Ca(!1),B=Ca(!1),$e=Ca(""),$=Ca("");return(m,s)=>{const h=$l,Z=Da,z=Pr,ye=Dr,Ne=$a,oe=ha,ue=kd,$t=Ka,Vt=qn,xe=Ar,Ye=zr,Ve=ya,et=en,W=Ws,b=ga,p=Xl,rt=no;return nn(),Po(tr,null,[vt(Z,{to:"#alt-action"},{default:Dt(()=>[vt(h,null,{default:Dt(()=>[ve(le)?(nn(),er(ve(Be),{key:0,secondary:"",type:"warning",onClick:s[0]||(s[0]=Ce=>D.value=!0)},{default:Dt(()=>[vt(ve(q),{size:"26"},{default:Dt(()=>[vt(ve(ie),{icon:"carbon:id"})]),_:1}),uo(" "+co(ve(i)("identifiers")),1)]),_:1})):Yr("",!0),vt(ve(Be),{type:"primary",secondary:"",onClick:s[1]||(s[1]=Ce=>K(null))},{icon:Dt(()=>[vt(ve(q),{size:"18"},{default:Dt(()=>[vt(ve(ie),{icon:"carbon:add-alt"})]),_:1})]),default:Dt(()=>[uo(" "+co(ve(i)("addAd")),1)]),_:1})]),_:1})]),_:1}),vt(ye,null,{default:Dt(()=>[vt(z,{columns:S,data:ve(M),pagination:E,loading:ve(t),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),vt(p,{show:ve(L),"onUpdate:show":s[12]||(s[12]=Ce=>Ao(L)?L.value=Ce:null),loading:ve(ce)||ve(ge)||ve(j),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ve(T)?ve(i)("editAd"):ve(i)("addAd"),"positive-text":ve(i)("validate"),"negative-text":ve(i)("cancel"),onPositiveClick:Y,onNegativeClick:s[13]||(s[13]=Ce=>L.value=!1)},{default:Dt(()=>[vt(b,{ref_key:"formRef",ref:x,class:"mt-5",model:ve(k),rules:A,"show-require-mark":!1,size:"medium"},{default:Dt(()=>[vt(Ve,{cols:"24","x-gap":12},{default:Dt(()=>[vt(et,{span:"12"},{default:Dt(()=>[vt(oe,{"show-label":!1,path:"title"},{default:Dt(()=>[vt(Ne,{modelValue:ve(k).title,"onUpdate:modelValue":s[2]||(s[2]=Ce=>ve(k).title=Ce),placeholder:ve(i)("title"),class:"w-full",sync:""},{label:Dt(()=>[uo(co(ve(i)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),vt(oe,{"show-label":!1,path:"description"},{default:Dt(()=>[vt(Ne,{modelValue:ve(k).description,"onUpdate:modelValue":s[3]||(s[3]=Ce=>ve(k).description=Ce),placeholder:ve(i)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Dt(()=>[uo(co(ve(i)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),vt(oe,{label:ve(i)("broadcastPeriod"),path:"broadcastPeriod"},{default:Dt(()=>[vt(ue,{"formatted-value":ve(U),"onUpdate:formattedValue":s[4]||(s[4]=Ce=>Ao(U)?U.value=Ce:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),vt(Ve,{"x-gap":"12",span:24},{default:Dt(()=>[vt(Vt,{span:12,label:ve(i)("identifier"),path:"pid"},{default:Dt(()=>[vt($t,{value:ve(k).pid,"onUpdate:value":[s[5]||(s[5]=Ce=>ve(k).pid=Ce),s[6]||(s[6]=()=>{f.value=ve(o)?.find(Ce=>Ce.id==ve(k).pid)?.params})],"render-label":Q,options:ve(o)?.map(Ce=>({...Ce,disabled:!Ce.reusable&&(Ce.adsCount||0)>0})),placeholder:ve(i)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),vt(Vt,{span:12,label:ve(i)("status"),path:"display"},{default:Dt(()=>[vt(Ye,{value:ve(k).display,"onUpdate:value":s[7]||(s[7]=Ce=>ve(k).display=Ce),name:"display",class:"w-full"},{default:Dt(()=>[vt(xe,{value:!1,label:ve(i)("hidden"),class:"w-[50%]"},null,8,["label"]),vt(xe,{value:!0,label:ve(i)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),vt(et,{span:"12"},{default:Dt(()=>[vt(oe,{label:ve(i)("content"),path:"content"},{default:Dt(()=>[ve(H)==ve(Fn).VIDEO?(nn(),er(W,{key:0},{default:Dt(()=>[vt(ve(Be),{secondary:"",type:"primary",onClick:s[8]||(s[8]=()=>{_.value=!0})},{default:Dt(()=>[uo(co(ve(i)("select")),1)]),_:1}),vt(ve(Zt),{value:ve(k).content?ve(Jo)(ve(k).content):"",placeholder:ve(i)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),ve(k).content?(nn(),Po(tr,{key:0},[vt(ve(Be),{type:"primary",ghost:"",onClick:s[9]||(s[9]=()=>{$e.value=ve(i)("video"),$.value=ve(I)(ve(k).content),B.value=!0})},{icon:Dt(()=>[vt(ve(q),null,{default:Dt(()=>[vt(ve(ie),{icon:"carbon:play-filled"})]),_:1})]),default:Dt(()=>[uo(" "+co(ve(i)("play")),1)]),_:1}),vt(ve(Be),{type:"primary",ghost:"",onClick:s[10]||(s[10]=()=>{ve(k).content=""})},{icon:Dt(()=>[vt(ve(q),null,{default:Dt(()=>[vt(ve(ie),{icon:"carbon:trash-can"})]),_:1})]),default:Dt(()=>[uo(" "+co(ve(i)("clear")),1)]),_:1})],64)):Yr("",!0)]),_:1})):(nn(),Po("div",Hu,[Gr("div",{class:"cursor-pointer w-full h-[150px]",onClick:s[11]||(s[11]=()=>{C.value=!0})},[ve(k).content?(nn(),er(ve(es),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Xi("border: 1px dashed "+ve(d)("green","white")),src:ve(I)(ve(k).content||"")},null,8,["style","src"])):(nn(),Po("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Xi("border: 1px dashed "+ve(d)("green","white"))},[vt(ve(q),{size:64},{default:Dt(()=>[vt(ve(ie),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),ve(f)&&Array.isArray(ve(f))?(nn(),er(oe,{key:0,label:ve(i)("data"),path:"data"},{default:Dt(()=>[vt(Ve,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Dt(()=>[(nn(!0),Po(tr,null,Gu(ve(f),(Ce,nt)=>(nn(),Po(tr,{key:nt},[vt(et,{span:10},{default:Dt(()=>[vt(ve(Zt),{value:Ce,placeholder:Ce,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),vt(et,{span:14},{default:Dt(()=>[vt(ve(Zt),{value:ve(k).data[Ce],"onUpdate:value":ut=>ve(k).data[Ce]=ut,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):Yr("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),vt(p,{show:ve(B),"onUpdate:show":s[14]||(s[14]=Ce=>Ao(B)?B.value=Ce:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:ve($e)},{default:Dt(()=>[Gr("video",Qu,[Gr("source",{src:ve($)},null,8,Wu)])]),_:1},8,["show","title"]),vt(rt,{show:ve(C),"onUpdate:show":s[15]||(s[15]=Ce=>Ao(C)?C.value=Ce:null),title:ve(i)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:ve(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:s[16]||(s[16]=Ce=>{ve(k).content=Ce,C.value=!1})},null,8,["show","title","upload-config"]),vt(rt,{show:ve(_),"onUpdate:show":s[17]||(s[17]=Ce=>Ao(_)?_.value=Ce:null),title:ve(i)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:ve(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:s[18]||(s[18]=Ce=>{ve(k).content=Ce,_.value=!1})},null,8,["show","title","upload-config"]),vt(qu,{show:ve(D),"onUpdate:show":s[19]||(s[19]=Ce=>Ao(D)?D.value=Ce:null)},null,8,["show"])],64)}}}),Zu=Kn(Ju,[["__scopeId","data-v-d7bbc8c8"]]),Zi=u=>{const e=hu();switch(u){case"text":return qr({min:40,max:80});case"i18n-text":return`{ "fr": "${qr({min:40,max:80})}", "en": "${qr({min:40,max:80})}" }`;case"textarea":return $n();case"i18n-textarea":return`{ "fr": "${$n()}", "en": "${$n()}" }`;case"number":return an({min:10,max:1e4});case"checkbox":return Hi();case"single-select":return wn();case"multi-select":return[wn(),wn(),wn()];case"date":return e.format("YYYY-MM-DD");case"daterange":return[e.format("YYYY-MM-DD"),e.add(5,"years").format("YYYY-MM-DD")];case"datetime":return e.format("YYYY-MM-DD HH:mm:ss");case"datetimerange":return[e.format("YYYY-MM-DD HH:mm:ss"),e.clone().add(5,"years").format("YYYY-MM-DD HH:mm:ss")];case"year":return e.format("YYYY");case"yearrange":return[e.format("YYYY"),e.clone().add(5,"years").format("YYYY")];case"month":return e.format("YYYY-MM");case"monthrange":return[e.format("YYYY-MM"),e.clone().add(5,"years").format("YYYY-MM")];case"quarter":return`${e.format("YYYY")}-Q${e.quarter()}`;case"quarterrange":const n=e.clone().add(5,"years");return[`${e.format("YYYY")}-Q${e.quarter()}`,`${n.format("YYYY")}-Q${n.quarter()}`];case"week":return`${e.format("YYYY")}-${e.week()}`;case"editor":return`<p>${$n()}</p><p>${$n()}</p>`;case"i18n-editor":return`{ "fr": "<p>${$n()}</p><p>${$n()}</p>", "en": "<p>${$n()}</p><p>${$n()}</p>" }`;case"image":return xn({width:1200,height:800});case"gallery":return[xn({width:1200,height:800}),xn({width:1200,height:800}),xn({width:1200,height:800}),xn({width:1200,height:800})];case"news-article":return an({min:0,max:10});case"news-articles":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"news-category":return an({min:0,max:10});case"news-categories":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"news-tag":return an({min:0,max:10});case"news-tags":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"icon":return Zs();case"icons":return[Zs(),Zs(),Zs()];case"albums":return[{name:"album",medias:[xn(),xn(),xn(),xn()]}];case"audio":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/mp3/mp31mb.mp3";case"video":return"https://testfilehub.github.io/files/MP4/1mb.MP4";case"document":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/pdf/pdf1mb.pdf";case"file":return"https://testfilehub.github.io/files/TXT/1mb.TXT";case"color":return yu();case"content-model-item":return;case"content-model-items":return[];case"menu-item-link":return 0;case"list":return[{value:wn()},{value:wn()},{value:wn()}];case"i18n-list":return[{value:`{ "fr": "${wn()}", en: "${wn()}" }`}];case"switch":return Hi();case"slider":return an({min:0,max:100});case"range-slider":return[an({min:0,max:100}),an({min:0,max:100})];case"gradient":return"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)";default:return u}},{useModel:ep,mergeModels:tp,defineComponent:lp}=await se("vue"),{toDisplayString:lr,createElementVNode:Hr,resolveComponent:ap,createVNode:pa,withCtx:Tl,unref:oa,createTextVNode:Qr,openBlock:Ga,createBlock:ns,createCommentVNode:ar,renderList:ec,Fragment:tc,createElementBlock:Lo,createSlots:np,isRef:lc}=await se("vue"),{defineComponent:op,ref:nr,inject:sp}=await se("vue"),rp={class:"w-full"},ip={class:"mb-2"},cp={class:"text-base text-left"},dp=["src","onClick"],up=["src"],pp=op({name:"AlbumsPicker"}),mp=lp({...pp,props:tp({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=ep(u,"modelValue"),n=u,{t:l}=ke(),{fileUrl:o}=Ze(),a=nr(!1),t=nr(!1),r=nr(0),j=nr(""),ae=sp("appConfig"),ce=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},O=I=>{e.value&&Array.isArray(e.value)?e.value.splice(I,1):e.value=[]},ge=(I,d)=>{e.value&&Array.isArray(e.value[d].medias)?e.value[d].medias.splice(I,1):e.value&&(e.value[d].medias=[])},F=I=>{const d=I.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(d)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(d)?"video":"unknown"};return(I,d)=>{const V=ie,le=q,i=Be,fe=$a,P=es,X=ap("Draggable"),E=wd,S=Ra,M=yl,L=no,D=Xl;return Ga(),Lo("section",rp,[Hr("section",ip,[pa(M,{size:"small",segmented:e.value&&e.value.length>0},{header:Tl(()=>[Hr("div",cp,lr(n.title),1)]),"header-extra":Tl(()=>[n.readonly?ar("",!0):(Ga(),ns(i,{key:0,quaternary:"",onClick:ce},{icon:Tl(()=>[pa(le,{size:"18"},{default:Tl(()=>[pa(V,{icon:"carbon:folder-add"})]),_:1})]),default:Tl(()=>[Qr(" "+lr(oa(l)("addAlbum")),1)]),_:1}))]),default:Tl(()=>[(Ga(!0),Lo(tc,null,ec(e.value,(H,f)=>(Ga(),ns(M,{key:f,size:"small",embedded:"",hoverable:"",segmented:H.medias&&H.medias.length>0,class:"mb-4"},np({header:Tl(()=>[pa(fe,{modelValue:H.name,"onUpdate:modelValue":T=>H.name=T,placeholder:oa(l)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:Tl(()=>[pa(S,{style:{"max-height":"100%"}},{default:Tl(()=>[H.medias&&H.medias.length>0?(Ga(),ns(E,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Tl(()=>[pa(X,{list:H.medias,class:"w-full grid grid-cols-3 gap-4"},{default:Tl(()=>[(Ga(!0),Lo(tc,null,ec(H.medias,(T,x)=>(Ga(),Lo("div",{key:"img-"+x,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[F(T)==="image"?(Ga(),ns(P,{key:0,"object-fit":"cover",src:oa(o)(T)},null,8,["src"])):(Ga(),Lo("video",{key:1,muted:"",src:oa(o)(T),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{j.value=oa(o)(T),t.value=!0}},null,8,dp)),n.readonly?ar("",!0):(Ga(),ns(i,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:k=>ge(x,f)},{icon:Tl(()=>[pa(le,null,{default:Tl(()=>[pa(V,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):ar("",!0)]),_:2},1024)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:Tl(()=>[pa(i,{quaternary:"",class:"mr-2",onClick:()=>{r.value=f,a.value=!0}},{icon:Tl(()=>[pa(le,null,{default:Tl(()=>[pa(V,{icon:"carbon:add-alt"})]),_:1})]),default:Tl(()=>[Qr(" "+lr(oa(l)("add")),1)]),_:1},8,["onClick"]),d[3]||(d[3]=Hr("div",{class:"w-2"},null,-1)),pa(i,{quaternary:"",type:"error",onClick:T=>O(f)},{icon:Tl(()=>[pa(le,null,{default:Tl(()=>[pa(V,{icon:"carbon:trash-can"})]),_:1})]),default:Tl(()=>[Qr(" "+lr(oa(l)("delete")),1)]),_:1},8,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),pa(L,{show:oa(a),"onUpdate:show":d[0]||(d[0]=H=>lc(a)?a.value=H:null),title:oa(l)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:oa(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:d[1]||(d[1]=H=>{e.value&&Array.isArray(e.value[oa(r)].medias)?e.value[oa(r)].medias.push(H):e.value&&(e.value[oa(r)].medias=[H]),a.value=!1})},null,8,["show","title","upload-config"]),pa(D,{show:oa(t),"onUpdate:show":d[2]||(d[2]=H=>lc(t)?t.value=H:null),preset:"card",style:{width:"500px"},title:oa(l)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:Tl(()=>[oa(j)?(Ga(),Lo("video",{key:0,controls:"",autoplay:"",class:"w-full",src:oa(j)},null,8,up)):ar("",!0)]),_:1},8,["show","title"])])}}}),fp=Kn(mp,[["__scopeId","data-v-d07ac32a"]]),{useModel:_p,mergeModels:vp,defineComponent:gp}=await se("vue"),{toDisplayString:ac,createElementVNode:nc,resolveComponent:yp,createVNode:Cn,withCtx:Ha,unref:os,createTextVNode:hp,openBlock:Bo,createBlock:Wr,createCommentVNode:Xr,renderList:bp,Fragment:kp,createElementBlock:Jr,isRef:wp}=await se("vue"),{defineComponent:xp,inject:$p,ref:Cp}=await se("vue"),Ip={class:"w-full"},Vp={class:"mb-2"},Sp={class:"text-base text-left"},Ep=xp({name:"GridImagesPicker"}),Up=gp({...Ep,props:vp({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=_p(u,"modelValue"),n=$p("appConfig"),l=u,{t:o}=ke(),{fileUrl:a}=Ze(),t=Cp(!1),r=ae=>{Array.isArray(e.value)?e.value.splice(ae,1):e.value=[]},j=async ae=>{Array.isArray(e.value)?e.value.push(...ae):e.value=[...ae],t.value=!1};return(ae,ce)=>{const O=ie,ge=q,F=Be,I=es,d=yp("Draggable"),V=wd,le=Ra,i=yl,fe=no;return Bo(),Jr("section",Ip,[nc("section",Vp,[Cn(i,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:Ha(()=>[nc("div",Sp,ac(l.title),1)]),"header-extra":Ha(()=>[l.readonly?Xr("",!0):(Bo(),Wr(F,{key:0,quaternary:"",onClick:ce[0]||(ce[0]=P=>t.value=!0)},{icon:Ha(()=>[Cn(ge,{size:"18"},{default:Ha(()=>[Cn(O,{icon:"carbon:add-alt"})]),_:1})]),default:Ha(()=>[hp(" "+ac(os(o)("add")),1)]),_:1}))]),default:Ha(()=>[Cn(le,{style:{"max-height":"100%"}},{default:Ha(()=>[e.value&&e.value.length?(Bo(),Wr(V,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Ha(()=>[Cn(d,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:Ha(()=>[(Bo(!0),Jr(kp,null,bp(e.value,(P,X)=>(Bo(),Jr("div",{key:"img-"+X,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[Cn(I,{width:"100","object-fit":"cover",src:os(a)(P)},null,8,["src"]),l.readonly?Xr("",!0):(Bo(),Wr(F,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:E=>r(X)},{icon:Ha(()=>[Cn(ge,null,{default:Ha(()=>[Cn(O,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):Xr("",!0)]),_:1})]),_:1},8,["segmented"])]),Cn(fe,{show:os(t),"onUpdate:show":ce[1]||(ce[1]=P=>wp(t)?t.value=P:null),title:os(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:os(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:j},null,8,["show","title","upload-config"])])}}}),Mp=Kn(Up,[["__scopeId","data-v-721b1ffd"]]);var da=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(da||{}),Ql=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Ql||{});const Js=()=>{const{t:u}=ke(),{tr:e}=Ze(),n=(t,r)=>r&&r.titleFieldName?jd(t.contentModelData.index[r.titleFieldName])?e(t.contentModelData.index[r.titleFieldName]):t.contentModelData.index[r.titleFieldName]:md(t.contentModelData.index,e,e(t.title)),l=[{label:u("contentModel"),value:Ql.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:Ql.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:Ql.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:Ql.NEWS_TAG,tagType:"error"}];return{contentTypes:l,getContentTypeLabel:t=>l.find(r=>r.value===t)?.label,getContentTypeTagType:t=>l.find(r=>r.value===t)?.tagType||"default",extractItemTitle:n}};class Tp{id;contentModelId;title;contentModelData;data;isActive;createdAt;updatedAt;contentModel;relatedItems;relatedTo;constructor(e,n,l,o,a,t,r,j){this.id=t,this.contentModelId=a,this.title=e,this.data=o,this.contentModelData=n,this.isActive=l,this.createdAt=r,this.updatedAt=j}}const Np=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["content-model","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/content-model/items",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ad=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["content-model","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/content-model/items/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Dp=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["content-model","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-model/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},zp=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof Tp){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("ContentModelItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(r=>a[r]);try{for(const r of t)await e({method:"delete",url:`/content-model/items/${r}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Yi=()=>{const{request:u}=Fe();return za(async({query:e,contentModelId:n})=>{const l=await u({url:`/content-model-items/search/${e}/${n}`});return l.failure&&l.error?[]:l.result.data})},Pd=()=>{const{request:u}=Fe();return za(async e=>{const n=await u({url:"/content-model-items/list",method:"post",data:e});return n.failure&&n.error?[]:n.result.data})},{defineComponent:Ap}=await se("vue"),{unref:v,renderList:Pp,Fragment:ss,openBlock:ot,createElementBlock:on,resolveComponent:oc,createBlock:Ct,createCommentVNode:Fo,createVNode:bt,withCtx:St,normalizeStyle:Zr,createElementVNode:rs,toDisplayString:La,createTextVNode:Ba,isRef:po}=await se("vue"),Lp={key:4,class:"w-full"},Bp={key:5,class:"w-full"},Fp={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},Op=["onClick"],qp={key:0,class:"w-full"},Rp={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},jp=["src"],Kp={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Yp=["src"],{defineComponent:Gp,inject:Hp,ref:Ll,h:In,watch:sc,computed:is,onMounted:Qp}=await se("vue"),{storeToRefs:Wp}=await se("pinia"),Xp=Gp({name:"FormGenerator"}),Jp=Ap({...Xp,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const n=u,l=e,{t:o,locale:a}=ke(),{tr:t,pickByTheme:r,fileUrl:j,mergeArrays:ae}=Ze(),{extractItemTitle:ce}=Js(),{data:O}=oo(),ge=Hp("appConfig");let F=[];if(typeof n.items=="string")try{F=JSON.parse(n.items)}catch{F=[]}else F=ne.cloneDeep(n.items);let I={};if(n.useJson)try{I=JSON.parse(n.modelValue)}catch{I={}}const d=Ll(""),V=Ll(El()),le=Ll(null),i=Ll(n.useJson?I:n.modelValue),fe={};F.forEach(R=>{R.key in i.value||(R.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(R.type)?i.value[R.key]=JSON.parse(R.defaultValue):R.type=="number"||R.type=="slider"?i.value[R.key]=parseFloat(R.defaultValue):R.type=="content-model-item"?i.value[R.key]=void 0:R.type=="content-model-items"?i.value[R.key]=[]:R.type=="list"?i.value[R.key]=R.defaultValue.split(",").map(he=>({value:he})):R.type=="i18n-list"?i.value[R.key]=R.defaultValue.split(",").map(he=>({value:`{ "fr": "${he}", "en": "${he}" }`})):i.value[R.key]=R.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(R.type)?i.value[R.key]="":["number","slider"].includes(R.type)?i.value[R.key]=0:["checkbox","switch"].includes(R.type)?i.value[R.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(R.type)?i.value[R.key]=[]:["range-slider"].includes(R.type)?i.value[R.key]=[0,100]:i.value[R.key]=void 0),R.required&&(fe[R.key]=[{required:!0,message:o("fillRequired")}]),V.value=El()});const P=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],X=R=>In("span",{},{default:()=>t(R.label)});sc(()=>i.value,R=>{const he=n.useJson?JSON.stringify(R):R,pe=async()=>{if(F.length==0)return!0;let Ee=!1;try{await le.value?.validate(at=>{Ee=!at})}catch{Ee=!1}return Ee};l("update:modelValue",he),l("update",he,pe)},{immediate:!0,deep:!0});const{isLightTheme:E}=Wp(To()),S=Ll(!1),M=Ll(!1),L=Ll(!1),D=Ll(""),H=Ll(""),f=Ll(!1),T=Ll(!1),x=Ll(""),k=Ll(""),A=Ll(!1),U=R=>{window.open(R,"_blank")},K=Ll(!1),Q=Ll([]),{data:Y,isPending:C}=fd();sc(()=>Y.value,R=>{const he=ne.cloneDeep(R);if(he){Q.value=[];for(let pe=0;pe<he?.length;pe++)switch(he[pe].targetType){case da.EXTERNAL_LINK:Q.value.findIndex(Ee=>Ee.url===he[pe].url)===-1&&Q.value.push(he[pe]);break;case da.PAGE_LINK:Q.value.findIndex(Ee=>Ee.path===he[pe].path)===-1&&Q.value.push(he[pe]);break}}},{immediate:!0,deep:!0});const _=Ll([]),B=Ll([]),{mutateAsync:$e,isPending:$}=Yi(),{mutateAsync:m,isPending:s}=Pd(),h=is(()=>$.value||s.value),Z=async(R,he)=>{if(!R.length){B.value=[];return}B.value=await $e({query:R,contentModelId:he})},z=is(()=>ae(_.value,B.value,"id")),ye=Ll([]),Ne=Ll([]),{mutateAsync:oe,isPending:ue}=Ud(),{mutateAsync:$t,isPending:Vt}=Md(),xe=is(()=>Vt.value||ue.value),Ye=async R=>{if(!R.length){Ne.value=[];return}Ne.value=await $t(R)},Ve=is(()=>ae(ye.value,Ne.value,"id")),et=Kd({enabled:!1}),W=Yd({enabled:!1});Qp(async()=>{F.find(R=>R.type==="news-categories"||R.type==="news-category")&&(et.refetch(),W.refetch());for(let R=0;R<F.length;R++)if(F[R].type==="news-articles"||F[R].type==="news-article"){const he=i.value[F[R].key],pe=await oe({ids:F[R].type==="news-articles"?he:[he]});pe&&(ye.value=ae(ye.value,pe,"id"))}else if(F[R].type==="content-model-items"||F[R].type==="content-model-item"){const he=i.value[F[R].key],pe=await m({ids:F[R].type==="content-model-items"?he:[he]});pe&&(_.value=ae(_.value,pe,"id"))}});const b=R=>In("span",{},{default:()=>`${t(R.name)}`}),p=R=>In("span",{},{default:()=>`${t(R.title)}`}),rt=R=>In("span",{},{default:()=>`${t(R.name)}`}),Ce=R=>is(()=>In("span",{},{default:()=>ce(R,O.value?.find(he=>he.id===R.contentModelId))})),nt=({option:R})=>In("div",{style:{display:"flex",alignItems:"center"}},[`${t(R.title)}`]),ut=R=>In("div",{style:{marginLeft:"12px",padding:"4px 0"}},[In("div",{},{default:()=>`${t(R.title)}`}),In("small",{},{default:()=>`${R.targetType==da.EXTERNAL_LINK?R.url:R.path}`})]);return(R,he)=>{const pe=Zt,Ee=$a,at=Ed,Ul=Lr,Ya=ro,jl=Fi,ua=$l,_e=du,de=kd,He=Ka,Ie=es,Xe=ie,ht=q,Ut=Be,Re=Mp,Ml=oc("IconPicker"),tn=fp,aa=Ws,na=oc("color-picker"),bn=Br,N=ha,hl=ga,Kl=Xl,io=no;return ot(),on(ss,null,[(ot(),Ct(hl,{ref_key:"formRef",ref:le,key:v(V),model:v(i),rules:fe,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Zr(n.formStyle)},{default:St(()=>[(ot(!0),on(ss,null,Pp(v(F),(c,Fr)=>(ot(),Ct(N,{key:Fr,label:v(t)(c.label),path:c.key,"label-style":n.labelStyle,"show-require-mark":c.required,class:"w-full"},{default:St(()=>[c.type=="text"?(ot(),Ct(pe,{key:0,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),maxlength:c.settings?.maxLength||void 0,minlength:c.settings?.minLength||void 0,clearable:c.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):c.type=="i18n-text"?(ot(),Ct(Ee,{key:1,modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):c.type=="textarea"?(ot(),Ct(pe,{key:2,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),maxlength:c.settings?.maxLength||void 0,minlength:c.settings?.minLength||void 0,clearable:c.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):c.type=="i18n-textarea"?(ot(),Ct(Ee,{key:3,modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):c.type=="editor"?(ot(),on("div",Lp,[bt(at,{modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):c.type=="i18n-editor"?(ot(),on("div",Bp,[bt(Ee,{modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):c.type=="number"?(ot(),Ct(Ul,{key:6,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,max:c.settings?.max||void 0,min:c.settings?.min||void 0,step:c.settings?.step||1,clearable:c.settings?.clearable||!1,placeholder:v(t)(c.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):c.type=="checkbox"?(ot(),Ct(Ya,{key:7,checked:v(i)[c.key],"onUpdate:checked":te=>v(i)[c.key]=te,"checked-value":c.settings?.["checked-value"]||!0,"unchecked-value":c.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):c.type=="switch"?(ot(),Ct(ua,{key:8},{default:St(()=>[bt(jl,{value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,"checked-value":c.settings?.["checked-value"]||!0,"unchecked-value":c.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):c.type=="slider"?(ot(),Ct(_e,{key:9,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,min:c.settings?.min||0,max:c.settings?.max||100,step:c.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):c.type=="range-slider"?(ot(),Ct(_e,{key:10,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,min:c.settings?.min||0,max:c.settings?.max||100,step:c.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):c.type=="date"?(ot(),Ct(de,{key:11,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM-dd",format:c.settings?.format||"dd MMMM yyyy",type:"date",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="daterange"?(ot(),Ct(de,{key:12,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM-dd",format:c.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="datetime"?(ot(),Ct(de,{key:13,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM-dd HH:mm:ss",format:c.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="datetimerange"?(ot(),Ct(de,{key:14,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM-dd HH:mm:ss",format:c.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="year"?(ot(),Ct(de,{key:15,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy",type:"year",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="yearrange"?(ot(),Ct(de,{key:16,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy",type:"yearrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="month"?(ot(),Ct(de,{key:17,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM",type:"month",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="monthrange"?(ot(),Ct(de,{key:18,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-MM",type:"monthrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="quarter"?(ot(),Ct(de,{key:19,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-Q",type:"quarter",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="quarterrange"?(ot(),Ct(de,{key:20,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,"value-format":"yyyy-Q",type:"quarterrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="week"?(ot(),Ct(de,{key:21,"formatted-value":v(i)[c.key],"onUpdate:formattedValue":te=>v(i)[c.key]=te,type:"week",clearable:c.settings?.clearable||!0,placeholder:v(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):c.type=="single-select"||c.type=="multi-select"?(ot(),Ct(He,{key:22,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:(c.options||[])?.map(te=>{if(c.type=="multi-select"&&c.settings&&v(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:v(i)[c.key].length>=Jl&&!v(i)[c.key].includes(te.value)}}return te}),multiple:c.type=="multi-select",placeholder:v(t)(c.label),"render-label":X,"label-field":"label","value-field":"value",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="image"?(ot(),on("div",Fp,[rs("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{d.value=c.key,S.value=!0}},[v(i)[c.key]?(ot(),Ct(Ie,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Zr("border: 1px dashed "+v(r)("green","white")),src:v(j)(v(i)[c.key]||"")},null,8,["style","src"])):(ot(),on("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Zr("border: 1px dashed "+v(r)("green","white"))},[bt(ht,{size:64},{default:St(()=>[bt(Xe,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Op),v(i)[c.key]?(ot(),Ct(Ut,{key:0,quaternary:"",onClick:()=>{d.value=c.key,v(i)[v(d)]=""}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("clear")),1)]),_:1},8,["onClick"])):Fo("",!0)])):c.type=="gallery"?(ot(),Ct(Re,{key:24,modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,"upload-folder":"images",title:v(t)(c.label)},null,8,["modelValue","onUpdate:modelValue","title"])):c.type=="news-category"||c.type=="news-categories"?(ot(),Ct(He,{key:25,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:(v(et).data.value||[])?.map(te=>{if(c.type=="news-categories"&&c.settings&&v(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:v(i)[c.key].length>=Jl&&!v(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-categories",placeholder:v(t)(c.label),"render-label":b,"label-field":"name","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="news-tag"||c.type=="news-tags"?(ot(),Ct(He,{key:26,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:(v(W).data.value||[])?.map(te=>{if(c.type=="news-tags"&&c.settings&&v(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:v(i)[c.key].length>=Jl&&!v(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-tags",placeholder:v(t)(c.label),"render-label":rt,"label-field":"name","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="news-article"||c.type=="news-articles"?(ot(),Ct(He,{key:27,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:(v(Ve)||[])?.map(te=>{if(c.type=="news-articles"&&c.settings&&v(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:v(i)[c.key].length>=Jl&&!v(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-articles",placeholder:v(t)(c.label),"render-label":p,loading:v(xe),"value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:Ye},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):c.type=="icon"||c.type=="icons"?(ot(),Ct(Ml,{key:28,modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),multiple:c.type=="icons","icons-list-placeholder":v(o)("enterIconNameInSearchBar"),"search-placeholder":v(o)("search"),"empty-text":v(o)("noIconsFound"),"icon-library":c.settings?.library||"all",clearable:c.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):c.type=="albums"?(ot(),Ct(tn,{key:29,modelValue:v(i)[c.key],"onUpdate:modelValue":te=>v(i)[c.key]=te,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):c.type=="audio"?(ot(),Ct(aa,{key:30},{default:St(()=>[bt(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,f.value=!0}},{default:St(()=>[Ba(La(v(o)("select")),1)]),_:1},8,["onClick"]),bt(pe,{value:v(i)[c.key]?v(Jo)(v(i)[c.key]):"",placeholder:v(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(i)[c.key]?(ot(),on(ss,{key:0},[bt(Ut,{type:"primary",ghost:"",onClick:()=>{x.value=v(t)(c.label),k.value=v(j)(v(i)[c.key]),T.value=!0}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:play"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("play")),1)]),_:1},8,["onClick"]),bt(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,v(i)[v(d)]=""}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="video"?(ot(),Ct(aa,{key:31},{default:St(()=>[bt(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,M.value=!0}},{default:St(()=>[Ba(La(v(o)("select")),1)]),_:1},8,["onClick"]),bt(pe,{value:v(i)[c.key]?v(Jo)(v(i)[c.key]):"",placeholder:v(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(i)[c.key]?(ot(),on(ss,{key:0},[bt(Ut,{type:"primary",ghost:"",onClick:()=>{D.value=v(t)(c.label),H.value=v(j)(v(i)[c.key]),L.value=!0}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:play"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("play")),1)]),_:1},8,["onClick"]),bt(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,v(i)[v(d)]=""}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="document"?(ot(),Ct(aa,{key:32},{default:St(()=>[bt(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,A.value=!0}},{default:St(()=>[Ba(La(v(o)("select")),1)]),_:1},8,["onClick"]),bt(pe,{value:v(i)[c.key]?v(Jo)(v(i)[c.key]):"",placeholder:v(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(i)[c.key]?(ot(),on(ss,{key:0},[bt(Ut,{type:"primary",ghost:"",onClick:te=>U(v(j)(v(i)[c.key]))},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"mdi:open-in-new"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("open")),1)]),_:1},8,["onClick"]),bt(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,v(i)[v(d)]=""}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="file"?(ot(),Ct(aa,{key:33},{default:St(()=>[bt(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,K.value=!0}},{default:St(()=>[Ba(La(v(o)("select")),1)]),_:1},8,["onClick"]),bt(pe,{value:v(i)[c.key]?v(Jo)(v(i)[c.key]):"",placeholder:v(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(i)[c.key]?(ot(),Ct(Ut,{key:0,type:"primary",ghost:"",onClick:()=>{d.value=c.key,v(i)[v(d)]=""}},{icon:St(()=>[bt(ht,null,{default:St(()=>[bt(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[Ba(" "+La(v(o)("clear")),1)]),_:1},8,["onClick"])):Fo("",!0)]),_:2},1024)):c.type=="color"||c.type=="gradient"?(ot(),Ct(na,{key:34,"pure-color":v(i)[c.key],"onUpdate:pureColor":te=>v(i)[c.key]=te,"default-pure-color":"#00000000","picker-type":"chrome","use-type":c.type=="color"?"pure":"gradient",format:c.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:v(E)?"white":"black",lang:v(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):c.type=="content-model-item"||c.type=="content-model-items"?(ot(),Ct(He,{key:35,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:(v(z)||[])?.map(te=>{if(c.type=="content-model-items"&&c.settings&&v(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:v(i)[c.key].length>=Jl&&!v(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="content-model-items",placeholder:v(t)(c.label),"render-label":te=>Ce(te).value,loading:v(h),"value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:te=>Z(te,c.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):c.type=="menu-item-link"?(ot(),Ct(He,{key:36,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,options:v(Q)||[],placeholder:v(t)(c.label),"render-label":ut,"render-tag":nt,loading:v(C),"label-field":"title","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):c.type=="list"?(ot(),Ct(bn,{key:37,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),max:c.settings?.max||void 0,min:c.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:St(({value:te})=>[c.settings?.type=="editor"?(ot(),on("div",qp,[bt(at,{modelValue:te.value,"onUpdate:modelValue":Jl=>te.value=Jl,"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(ot(),Ct(pe,{key:1,value:te.value,"onUpdate:value":Jl=>te.value=Jl,type:c.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):c.type=="i18n-list"?(ot(),Ct(bn,{key:38,value:v(i)[c.key],"onUpdate:value":te=>v(i)[c.key]=te,placeholder:v(t)(c.label),max:c.settings?.max||void 0,min:c.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:St(({value:te})=>[bt(Ee,{modelValue:te.value,"onUpdate:modelValue":Jl=>te.value=Jl,type:c.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):Fo("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),bt(Kl,{show:v(T),"onUpdate:show":he[0]||(he[0]=c=>po(T)?T.value=c:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:v(x)},{default:St(()=>[rs("audio",Rp,[rs("source",{src:v(k)},null,8,jp)])]),_:1},8,["show","title"]),bt(Kl,{show:v(L),"onUpdate:show":he[1]||(he[1]=c=>po(L)?L.value=c:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:v(D)},{default:St(()=>[rs("video",Kp,[rs("source",{src:v(H)},null,8,Yp)])]),_:1},8,["show","title"]),bt(io,{show:v(S),"onUpdate:show":he[2]||(he[2]=c=>po(S)?S.value=c:null),title:v(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:v(ge)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[3]||(he[3]=c=>{v(i)[v(d)]=c,S.value=!1})},null,8,["show","title","upload-config"]),bt(io,{show:v(M),"onUpdate:show":he[4]||(he[4]=c=>po(M)?M.value=c:null),title:v(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:v(ge)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[5]||(he[5]=c=>{v(i)[v(d)]=c,M.value=!1})},null,8,["show","title","upload-config"]),bt(io,{show:v(f),"onUpdate:show":he[6]||(he[6]=c=>po(f)?f.value=c:null),title:v(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:v(ge)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[7]||(he[7]=c=>{v(i)[v(d)]=c,f.value=!1})},null,8,["show","title","upload-config"]),bt(io,{show:v(A),"onUpdate:show":he[8]||(he[8]=c=>po(A)?A.value=c:null),title:v(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:v(ge)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[9]||(he[9]=c=>{v(i)[v(d)]=c,A.value=!1})},null,8,["show","title","upload-config"]),bt(io,{show:v(K),"onUpdate:show":he[10]||(he[10]=c=>po(K)?K.value=c:null),title:v(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:v(ge)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[11]||(he[11]=c=>{v(i)[v(d)]=c,K.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Hs=Kn(Jp,[["__scopeId","data-v-3ffecd12"]]),{unref:ei}=await se("vue"),{defineComponent:Zp}=await se("vue"),{unref:it,resolveComponent:em,createVNode:ll,withCtx:zt,openBlock:il,createBlock:sa,createCommentVNode:or,toDisplayString:sn,createTextVNode:Vn,renderList:sr,Fragment:mo,createElementBlock:fo,normalizeClass:tm,isRef:lm,createSlots:am,createElementVNode:cs,vShow:ti,withDirectives:li,Transition:ai}=await se("vue"),nm={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},om={class:"flex items-center justify-start gap-2"},{storeToRefs:sm}=await se("pinia"),{ref:rr,inject:Yn,watch:ni,reactive:Sn,computed:rc}=await se("vue"),rm=Zp({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(u){const e=u,n=Wl(),{sectionsDataBackup:l,sectionsSettingsBackup:o}=sm(_d()),{t:a}=ke(),{tr:t,editKeysToCamelCase:r}=Ze(),j=rr("index"),ae=rr(!1),ce=Yn("formValueValidate1"),O=Yn("formValueValidate2"),ge=Yn("formValueValidate3"),F=Yn("initialSettings"),I=Yn("initialData"),d=Yn("settings"),V=Yn("data"),le=Yn("refreshKey"),{data:i,isPending:fe}=Gd({slug:e.slug,linkId:e.linkId,pageId:e.pageId});ni(()=>i?.value,L=>{const D=ne.cloneDeep(L),H=D?.pages?.length?D?.pages[0].pivot:null;if(D&&V&&H&&(ne.isObject(H?.data)&&zi(H?.data)?V.value=Sn(H?.data):V.value=Sn({}),ne.forIn(r(D.dataStructure),(f,T)=>{(!V.value[T]||Array.isArray(V.value[T])&&V.value[T].length==0)&&(T==="index"?V.value[T]=Sn({}):V.value[T]=Sn([]))})),I&&V&&setTimeout(()=>{I.value=ne.cloneDeep(V.value)},500),D&&d&&(ne.isObject(H?.settings)&&zi(H?.settings)?d.value=Sn(H?.settings):d.value=Sn({}),ne.forIn(r(D.settingsStructure),(f,T)=>{d.value[T]||(d.value[T]=Sn({}))})),F&&d&&setTimeout(()=>{F.value=ne.cloneDeep(d.value)},500),D)if(r(D.dataStructure)){const f=Object.keys(r(D.dataStructure));f.includes("index")?j.value="index":j.value=f.length>0?f[0]:"_settings"}else j.value="_settings";if(le&&(le.value=El()),!ae.value&&(l.value[`${e.slug}__${e.linkId}__${e.pageId}`]||o.value[`${e.slug}__${e.linkId}__${e.pageId}`])){ae.value=!0;const f=()=>{l.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,o.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,le&&(le.value=El())};n.warning({title:a("backup"),content:a("sectionDataOrSettingsAvailable"),positiveText:a("restore"),negativeText:a("drop"),onPositiveClick:async()=>{V?.value&&l.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(V.value=Sn(ne.cloneDeep(l.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),d?.value&&o.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(d.value=Sn(ne.cloneDeep(o.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),f()},onNegativeClick:async()=>{f()}})}},{immediate:!0,deep:!0});const P=rr(!1);setTimeout(()=>{P.value=!0},500);const X=rc(()=>!ne.isEqual(V?.value,I?.value)),E=rc(()=>!ne.isEqual(d?.value,F?.value));ni(()=>V?.value,L=>{X.value&&P.value&&(l.value={...l.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:ne.cloneDeep(L)})},{deep:!0}),ni(()=>d?.value,L=>{E.value&&P.value&&(o.value={...o.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:ne.cloneDeep(L)})},{deep:!0});const S=rr(!1),M=()=>{S.value=!0,setTimeout(()=>{S.value=!1},3e3)};return(L,D)=>{const H=so,f=$l,T=ie,x=q,k=xd,A=Be,U=Oi,K=qi,Q=yl,Y=Va,C=Xs,_=jn,B=Rn,$e=em("Draggable"),$=Aa;return it(fe)?(il(),sa(f,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:zt(()=>[ll(H)]),_:1})):(il(),fo(mo,{key:1},[cs("div",nm,[ll(U,{value:it(j),"onUpdate:value":D[1]||(D[1]=m=>lm(j)?j.value=m:null),type:"card",size:"small"},am({default:zt(()=>[it(r)(it(i)?.dataStructure)?(il(),fo(mo,{key:0},[it(r)(it(i)?.dataStructure).index?(il(),sa(k,{key:0,name:"index"},{default:zt(()=>[ll(x,{class:"mr-1"},{default:zt(()=>[ll(T,{icon:"carbon:types"})]),_:1}),Vn(" "+sn(it(a)("general")),1)]),_:1})):or("",!0),(il(!0),fo(mo,null,sr(it(Qt)(it(r)(it(i)?.dataStructure),["index"]),(m,s)=>(il(),sa(k,{key:s,name:String(s)},{default:zt(()=>[Vn(sn(it(t)(m.title)),1)]),_:2},1032,["name"]))),128))],64)):or("",!0),ll(k,{name:"_settings"},{default:zt(()=>[ll(x,{class:"mr-1"},{default:zt(()=>[ll(T,{icon:"carbon:settings"})]),_:1}),Vn(" "+sn(it(a)("settings")),1)]),_:1})]),_:2},[it(j)!=="index"&&it(j)!=="_settings"?{name:"suffix",fn:zt(()=>[ll(A,{quaternary:"",size:"small",class:tm({"btn-blink":it(S)}),onClick:D[0]||(D[0]=()=>{it(V)[it(j)].push({}),le.value=("uuidv4"in L?L.uuidv4:ei(El))()})},{icon:zt(()=>[ll(x,null,{default:zt(()=>[ll(T,{icon:"carbon:add-alt"})]),_:1})]),default:zt(()=>[Vn(" "+sn(it(a)("add")),1)]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["value"])]),ll($,{appear:"",name:"slide-fade"},{default:zt(()=>[cs("section",null,[(il(!0),fo(mo,null,sr(it(r)(it(i)?.dataStructure)||{},(m,s)=>(il(),fo(mo,{key:s},[String(s)==="index"?(il(),sa(ai,{key:0,name:"slide-fade",mode:"out-in"},{default:zt(()=>[li(ll(Q,{size:"small",class:"mb-2",embedded:""},{default:zt(()=>[it(r)(it(i)?.dataStructure).index?(il(),sa(Hs,{key:`${it(le)}-${s}-form-1`,modelValue:it(V)[s],"onUpdate:modelValue":h=>it(V)[s]=h,items:m,onUpdate:(h,Z)=>{ce.value=Z}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(il(),sa(K,{key:1,type:"warning","show-icon":""},{default:zt(()=>[Vn(sn(it(a)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[ti,it(j)==="index"]])]),_:2},1024)):(il(),sa(ai,{key:1,name:"slide-fade",mode:"out-in"},{default:zt(()=>[li(ll(Q,{size:"small",class:"mb-2",embedded:""},{default:zt(()=>[it(V)[s]&&Array.isArray(it(V)[s])&&it(V)[s].length?(il(),sa($e,{key:0,list:it(V)[s],onChange:D[2]||(D[2]=h=>{le.value=("uuidv4"in L?L.uuidv4:ei(El))()}),class:"w-full"},{default:zt(()=>[(il(!0),fo(mo,null,sr(it(V)[s],(h,Z)=>(il(),sa(Q,{key:Z,size:"small",class:"mb-2"},{default:zt(()=>[ll(B,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":zt(({collapsed:z})=>[ll(f,{align:"center",justify:"space-between"},{default:zt(()=>[ll(A,{secondary:"",type:"error",size:"small",onClick:()=>{it(V)[s].splice(Z,1),le.value=("uuidv4"in L?L.uuidv4:ei(El))()}},{icon:zt(()=>[ll(x,null,{default:zt(()=>[ll(T,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),ll(x,null,{default:zt(()=>[z?(il(),sa(T,{key:0,icon:"fa-solid:chevron-left"})):(il(),sa(T,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:zt(()=>[...D[4]||(D[4]=[cs("span",null,null,-1)])]),default:zt(()=>[ll(_,{name:"1"},{header:zt(({collapsed:z})=>[cs("div",om,[ll(x,{size:"18",class:"cursor-move mr-2"},{default:zt(()=>[ll(T,{icon:"fa-solid:grip-lines"})]),_:1}),ll(Y,{size:"medium",type:"info"},{default:zt(()=>[Vn(sn(String(Z+1)),1)]),_:2},1024),z?(il(),sa(C,{key:0,"line-clamp":1,"expand-trigger":"click",class:"text-base max-w-[80%]"},{default:zt(()=>[Vn(sn(it(md)(it(V)[s][Z],it(t),"")),1)]),_:2},1024)):or("",!0)])]),default:zt(()=>[(il(),sa(Hs,{key:`${it(le)}-${s}-${Z}-form-2`,modelValue:it(V)[s][Z],"onUpdate:modelValue":z=>it(V)[s][Z]=z,items:m.items,onUpdate:(z,ye)=>{O.value=ye}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list"])):(il(),sa(K,{key:1,type:"info",class:"cursor-pointer","show-icon":"",onClick:D[3]||(D[3]=h=>M())},{default:zt(()=>[Vn(sn(it(a)("emptyCollectionInfoMessage")),1)]),_:1}))]),_:2},1536),[[ti,it(j)===String(s)]])]),_:2},1024))],64))),128)),ll(ai,{name:"slide-fade",mode:"out-in"},{default:zt(()=>[li(ll(Q,{size:"small",class:"mb-2",embedded:""},{default:zt(()=>[it(i)?.settingsStructure?(il(!0),fo(mo,{key:0},sr(it(r)(it(i)?.settingsStructure),(m,s)=>(il(),sa(Q,{key:s,size:"small",class:"mb-2"},{header:zt(()=>[cs("span",null,sn(it(t)(m.title)),1)]),default:zt(()=>[it(d)[s]?(il(),sa(Hs,{key:`${it(le)}-${s}-form-3`,modelValue:it(d)[s],"onUpdate:modelValue":h=>it(d)[s]=h,items:m.items,onUpdate:(h,Z)=>{ge.value=Z}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):or("",!0)]),_:2},1024))),128)):(il(),sa(K,{key:1,type:"warning","show-icon":""},{default:zt(()=>[Vn(sn(it(a)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[ti,it(j)==="_settings"]])]),_:1})])]),_:1})],64))}}}),im=Kn(rm,[["__scopeId","data-v-3fc1fc92"]]),cm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["pages"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/pages",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ld=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["pages"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/pages/${t.slug}`,data:Qt(t,["id","slug","hideSuccessMessage"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:(t,r)=>{r.hideSuccessMessage||o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},dm=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["pages"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:a})=>{o.start();const t=await e({method:"delete",url:`/pages/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},um=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["sections"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/sections",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Bd=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["sections"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/sections/${t.slug}`,data:Qt(t,["id","slug"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},pm=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ki(),l=Ge(),o=qe();return za(async a=>{const t=await u({url:`/sections/${a.slug}/data-source-page`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},mm=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ki(),l=Ge(),o=qe();return za(async a=>{const t=await u({url:`/sections/${a.slug}/duplicate`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},fm=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ki(),l=Ge(),o=qe();return za(async a=>{const t=await u({url:`/sections/${a.slug}/copy-data`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},{defineComponent:_m}=await se("vue"),{unref:we,resolveComponent:vm,createVNode:Se,withCtx:De,toDisplayString:Cl,createTextVNode:ma,normalizeClass:_o,openBlock:cl,createBlock:Fa,createCommentVNode:ir,vShow:gm,withDirectives:ym,createElementVNode:Bl,normalizeStyle:hm,renderList:cr,Fragment:ds,createElementBlock:Oa,withModifiers:ic,isRef:dr}=await se("vue"),bm={class:"flex items-center justify-between ml-1 mr-2.5"},km={key:0},wm={key:1},xm={key:0},$m={class:"flex items-center"},Cm={class:"text-base"},Im={class:"absolute top-[-10px] right-[-10px] z-[10]"},Vm={class:"flex items-center justify-center cursor-pointer gap-2"},Sm={key:1},Em={class:"mt-4"},Um={key:2,class:"mt-2 text-xs"},Mm={class:"my-8"},Tm={class:"flex items-center justify-between"},Nm={class:"text-base"},Dm={class:"my-8"},zm={class:"flex items-center justify-between"},Am={class:"text-base"},Pm={class:"my-8"},{ref:Il,watch:Lm,computed:us,onMounted:Bm,provide:Gn}=await se("vue"),{storeToRefs:Fm}=await se("pinia"),Om=_m({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const n=Wl(),{t:l}=ke(),o=u,a=e,t=Il(El()),r=Il({}),j=Il({}),ae=Il({}),ce=Il({}),O=Il(),ge=Il(),F=Il(),I=Il([]),d=Il([]),V=Il({}),le=Il({}),{tr:i,pickByTheme:fe,editKeysToCamelCase:P}=Ze(),{sectionsDataBackup:X,sectionsSettingsBackup:E}=Fm(_d()),{data:S}=Pi(),{data:M,isPending:L}=Hd(o.slug),{mutate:D,isPending:H}=Ld(),{mutate:f,isPending:T}=dm(),{mutate:x,isPending:k}=pm(),{mutate:A,isPending:U}=Bd(),{mutate:K,isPending:Q}=mm(),{mutate:Y,isPending:C}=fm();Lm(()=>M.value,_e=>{const de=ne.cloneDeep(_e);if(de&&Array.isArray(de?.sections)){const He=de.sections;if(Array.isArray(de?.sectionsOrder)){I.value=[];for(const Ie of de.sectionsOrder)if(Ie){const Xe=He.find(ht=>`${ht.slug}__${ht.pivot?.linkId}`===Ie);Xe&&I.value.push(Xe)}for(const Ie of He)I.value.map(Xe=>`${Xe.slug}__${Xe.pivot?.linkId}`).includes(`${Ie.slug}__${Ie.pivot?.linkId}`)||I.value.push(Ie)}else I.value=ne.cloneDeep(He);if(Array.isArray(de.sectionsDisabled))for(const Ie of de.sections)Ie&&(V.value[`${Ie.slug}__${Ie.pivot?.linkId}`]=!de.sectionsDisabled.includes(`${Ie.slug}__${Ie.pivot?.linkId}`));else for(const Ie of de.sections)Ie&&(V.value[`${Ie.slug}__${Ie.pivot?.linkId}`]=!0)}le.value=ne.cloneDeep(V.value),d.value=ne.cloneDeep(I.value),t.value=El()},{immediate:!0,deep:!0});const _=us(()=>ne.isEqual(r.value,ae.value)&&ne.isEqual(j.value,ce.value)&&ne.isEqual(I.value,d.value)&&ne.isEqual(V.value,le.value)),B=async()=>{const _e=O.value&&await O.value(),de=ge.value&&await ge.value(),He=F.value&&await F.value(),Ie=async()=>{pe.value&&(A({slug:pe.value.slug,dataSourceLinkId:pe.value.pivot?.dataSourceLinkId,dataSourcePageId:pe.value.pivot?.dataSourcePageId,settings:j.value,data:r.value}),X.value[`${pe.value.slug}__${pe.value.pivot?.dataSourceLinkId}__${pe.value.pivot?.dataSourcePageId}`]=null,E.value[`${pe.value.slug}__${pe.value.pivot?.dataSourceLinkId}__${pe.value.pivot?.dataSourcePageId}`]=null),D({slug:o.slug,sectionsOrder:I.value.map(Xe=>`${Xe.slug}__${Xe.pivot?.linkId}`),sectionsDisabled:Object.keys(V.value).filter(Xe=>!V.value[Xe]),hideSuccessMessage:!!pe.value})};!pe.value||(!O.value||_e)&&(!ge.value||de)&&(!F.value||He)?await Ie():n.warning({title:l("confirm"),content:l("mandatoryFieldsNotFilledInConfirmation"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{await Ie()}})},$e=_e=>{const Ie=I.value.filter(Xe=>Xe.id===_e.id).map(Xe=>Xe.pivot?.createdAt||Xe.pivot?.updatedAt||"").sort((Xe,ht)=>new Date(Xe).getTime()-new Date(ht).getTime()).indexOf(_e.pivot?.createdAt||_e.pivot?.updatedAt||"");return _e.pivot?.linkId=="default"?i(_e.title):i(_e.title)+" ("+(Ie+1)+")"},$=async _e=>{n.warning({title:l("confirm"),content:l("confirmDeletePage"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{_e.id&&f({id:_e.id,slug:_e.slug},{onSuccess:()=>{a("delete",M.value)}})}})},m=Il([]),s=Il(!1),h=()=>{m.value=[],I.value.forEach(_e=>{_e.id&&m.value.push(_e.id)}),s.value=!0},Z=_e=>{_e.id&&(m.value.includes(_e.id)?m.value=m.value.filter(de=>de!==_e.id):m.value.push(_e.id))},z=_e=>us({get:()=>_e.id?m.value.includes(_e.id):!1,set:de=>{_e.id&&(de?m.value=m.value.filter(He=>He!==_e.id):m.value.includes(_e.id)||m.value.push(_e.id))}}),ye=async()=>{D({slug:o.slug,sectionsIds:m.value})},Ne=Il(0),oe=Il([]),ue=Il(!1),$t=_e=>{Ne.value=_e,oe.value=[],ue.value=!0},Vt=_e=>{_e.id&&(oe.value.includes(_e.id)?oe.value=oe.value.filter(de=>de!==_e.id):oe.value.push(_e.id))},xe=_e=>us({get:()=>_e.id?oe.value.includes(_e.id):!1,set:de=>{_e.id&&(de?oe.value=oe.value.filter(He=>He!==_e.id):oe.value.includes(_e.id)||oe.value.push(_e.id))}}),Ye=async()=>{if(!oe.value.length)return!1;const _e=I.value.map(Ie=>`${Ie.slug}__${Ie.pivot?.linkId}`),de=oe.value.map(Ie=>`${S.value?.find(ht=>ht.id===Ie)?.slug}__default`),He=[..._e.slice(0,Ne.value),...de,..._e.slice(Ne.value)];D({slug:o.slug,sectionsIds:[...I.value.map(Ie=>Ie.id),...oe.value],sectionsOrder:He})},Ve=us(()=>(S.value||[]).filter(_e=>!I.value.find(de=>de.id===_e.id))),et=(_e,de,He=!1)=>_e.map(Ie=>{const ht=_e.filter(aa=>aa.id===Ie.id).map(aa=>aa.pivot?.createdAt||aa.pivot?.updatedAt||"").sort((aa,na)=>new Date(aa).getTime()-new Date(na).getTime()),Ut=ht.indexOf(Ie.pivot?.createdAt||Ie.pivot?.updatedAt||""),Re=M.value?.id==Ie.id?l("currentPage"):i(Ie.title),Ml=ht.length>1?" - "+i(de?.title):"",tn=Ie.pivot?.linkId!="default"?" ("+(Ut+1)+")":"";return{label:Re+Ml+tn,value:Ie.id+"__"+Ie.pivot?.linkId,disabled:He?M.value?.id==Ie.id&&de?.id==Ie.pivot?.sectionId&&de?.pivot?.dataSourceLinkId==Ie.pivot?.linkId:!1}}),W=async(_e,de)=>{const He=de?.split("__")||[],Ie=He.length?He[0]:null,Xe=He.length>1?He[1]:null;_.value?x({slug:_e.slug,data:{pageId:M.value?.id,linkId:_e.pivot?.linkId,sourcePageId:Ie,sourceLinkId:Xe}}):n.warning({title:l("confirm"),content:l("confirmUpdateDataSourcePage"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:()=>x({slug:_e.slug,data:{pageId:M.value?.id,linkId:_e.pivot?.linkId,sourcePageId:Ie,sourceLinkId:Xe}})})},b=_e=>{n.warning({title:l("confirm"),content:l("confirmRemoveSection"),positiveText:l("remove"),negativeText:l("cancel"),onPositiveClick:()=>D({slug:o.slug,removedSectionsIds:[{id:_e.id,linkId:_e.pivot?.linkId}]})})},p=_e=>{n.warning({title:l("confirm"),content:l("confirmDuplicateSection"),positiveText:l("duplicate"),negativeText:l("cancel"),onPositiveClick:()=>K({slug:_e.slug,data:{pageId:M.value?.id,linkId:_e.pivot?.linkId}})})},rt=_e=>{n.warning({title:l("confirm"),content:l("confirmFillInFakeData"),positiveText:l("generate"),negativeText:l("cancel"),onPositiveClick:()=>{const de={};ne.forIn(P(_e?.dataStructure),(He,Ie)=>{if(Ie==="index"){de[Ie]={};for(const Xe of He)de.index[Xe.key]=Zi(Xe.type)}else{de[Ie]=[];for(let Xe=0;Xe<3;Xe++){const ht={};for(const Ut of He.items)ht[Ut.key]=Zi(Ut.type);de[Ie].push(ht)}}}),A({slug:_e.slug,dataSourceLinkId:_e.pivot?.dataSourceLinkId,dataSourcePageId:_e.pivot?.dataSourcePageId,data:de})}})},Ce=Il(!1),nt=Il(null),ut=Il(null),R=_e=>{nt.value=_e,ut.value=null,Ce.value=!0},he=async()=>{if(!ut.value)return!1;const _e=ut.value.split("__")||[],de=_e.length?_e[0]:null,He=_e.length>1?_e[1]:null;Y({slug:nt.value?.slug,data:{fromPageId:de,fromLinkId:He,toPageId:M.value?.id,toLinkId:nt.value?.pivot?.linkId}})},pe=Il(null),Ee=_e=>{pe.value=_e},at=()=>{pe.value&&(pe.value=null)},{getSettingValue:Ul}=Qd(),Ya=()=>{const _e=`${Wd(Xd())}/${(Ul("basePath")||"creopse")+vd.VISUAL_EDITOR.PATH}?page=${M.value?.slug}`;Jd(_e,[],{target:"_blank",method:"GET"})},jl=us(()=>H.value||T.value||U.value||k.value||Q.value),ua=Il(!1);return Bm(()=>{setTimeout(()=>{ua.value=!0},300)}),Gn("refreshKey",t),Gn("formValueValidate1",O),Gn("formValueValidate2",ge),Gn("formValueValidate3",F),Gn("initialSettings",ce),Gn("initialData",ae),Gn("settings",j),Gn("data",r),(_e,de)=>{const He=ie,Ie=q,Xe=Be,ht=ja,Ut=$l,Re=Da,Ml=pu,tn=Aa,aa=uu,na=yl,bn=$d,N=ro,hl=Va,Kl=Ka,io=jn,c=Rn,Fr=vm("Draggable"),te=Pa,Jl=Ra,Or=Xl;return cl(),Oa(ds,null,[Se(Re,{to:"#alt-action"},{default:De(()=>[Se(Ut,{align:"center"},{default:De(()=>[Se(Xe,{secondary:"",type:"error",disabled:we(jl),onClick:de[0]||(de[0]=pt=>we(M)?$(we(M)):null)},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:trash-can"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("delete")),1)]),_:1},8,["disabled"]),Se(Xe,{secondary:"",type:"info",disabled:we(jl),onClick:de[1]||(de[1]=pt=>we(M)?u.openFormModal(we(M)):null)},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:edit"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("editPage")),1)]),_:1},8,["disabled"]),Se(ht,{vertical:"",class:_o(we(fe)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Se(Xe,{secondary:"",type:"primary",loading:we(jl),disabled:we(_),onClick:de[2]||(de[2]=pt=>B())},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:save"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Bl("section",{class:_o(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",we(ua)?"opacity-100":"opacity-0"]),style:hm({visibility:we(ua)?"visible":"hidden"})},[Se(na,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:De(()=>[Bl("div",bm,[Se(aa,null,{default:De(()=>[Se(Ml,{onClick:de[3]||(de[3]=pt=>at())},{default:De(()=>[Se(Ie,{class:"mr-1"},{default:De(()=>[Se(He,{icon:"carbon:document"})]),_:1}),ma(" "+Cl(we(i)(we(M)?.title)),1)]),_:1}),Se(tn,{appear:"",name:"slide-fade"},{default:De(()=>[we(pe)?(cl(),Fa(Ml,{key:0},{default:De(()=>[ma(Cl($e(we(pe))),1)]),_:1})):ir("",!0)]),_:1})]),_:1}),Se(Ut,null,{default:De(()=>[ym(Se(Xe,{onClick:de[4]||(de[4]=pt=>Ya()),size:"small",secondary:"",type:"success"},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:view"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("openVisualEditor")),1)]),_:1},512),[[gm,!1]]),we(pe)?(cl(),Fa(Xe,{key:0,onClick:de[5]||(de[5]=pt=>at()),size:"small",secondary:"",type:"warning",title:we(l)("exit")},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):ir("",!0)]),_:1})])]),_:1})],6),Bl("div",{class:_o(`${we(pe)?"h-[90px]":"h-[50px]"}`)},null,2),we(pe)?(cl(),Fa(im,{key:0,slug:we(pe)?.slug,"link-id":we(pe)?.pivot?.dataSourceLinkId,"page-id":we(pe)?.pivot?.dataSourcePageId},null,8,["slug","link-id","page-id"])):(cl(),Fa(tn,{key:1,appear:"",name:"slide-fade"},{default:De(()=>[Bl("section",null,[we(L)?(cl(),Oa("section",km,[(cl(),Oa(ds,null,cr(7,pt=>Se(bn,{key:pt,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(cl(),Oa("section",wm,[we(M)&&Array.isArray(we(M).sections)&&we(M).sections.length?(cl(),Oa("section",xm,[Se(Fr,{list:we(I)},{default:De(()=>[(cl(!0),Oa(ds,null,cr(we(I),(pt,kn)=>(cl(),Oa("section",{key:pt.id},[Se(na,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:De(()=>[Se(c,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":De(({collapsed:ln})=>[Se(Ut,{align:"center",justify:"space-between"},{default:De(()=>[Se(Xe,{secondary:"",type:"primary",size:"small",onClick:ic(Wh=>Ee(pt),["stop"])},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:archive"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("dataAndSettings")),1)]),_:1},8,["onClick"]),Se(Ie,null,{default:De(()=>[ln?(cl(),Fa(He,{key:0,icon:"fa-solid:chevron-left"})):(cl(),Fa(He,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:De(()=>[...de[16]||(de[16]=[Bl("span",null,null,-1)])]),default:De(()=>[Se(io,{name:"1"},{header:De(()=>[Bl("div",$m,[Se(Ie,{size:"21",class:"cursor-move mr-4"},{default:De(()=>[Se(He,{icon:"fa-solid:grip-lines"})]),_:1}),Se(N,{checked:we(V)[`${pt.slug}__${pt.pivot?.linkId}`],"onUpdate:checked":ln=>we(V)[`${pt.slug}__${pt.pivot?.linkId}`]=ln,size:"small",class:"mr-4",onClick:de[6]||(de[6]=ic(()=>{},["stop"]))},{default:De(()=>[ma(Cl(we(l)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),Se(hl,{size:"small",type:"info"},{default:De(()=>[ma(Cl(kn+1),1)]),_:2},1024),Se(ht,{vertical:"",class:_o(we(fe)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Bl("span",Cm,Cl($e(pt)),1)])]),default:De(()=>[Se(Ut,null,{default:De(()=>[Se(Xe,{size:"small",type:"error",secondary:"",onClick:ln=>b(pt)},{default:De(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:De(()=>[Se(He,{icon:"carbon:close"})]),_:1}),ma(" "+Cl(we(l)("removeSection")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"warning",secondary:"",onClick:ln=>p(pt)},{default:De(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:De(()=>[Se(He,{icon:"carbon:partition-same"})]),_:1}),ma(" "+Cl(we(l)("duplicateSection")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"info",secondary:"",onClick:ln=>rt(pt)},{default:De(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:De(()=>[Se(He,{icon:"carbon:magic-wand"})]),_:1}),ma(" "+Cl(we(l)("fillInFakeData")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"info",secondary:"",onClick:ln=>R(pt)},{default:De(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:De(()=>[Se(He,{icon:"carbon:copy"})]),_:1}),ma(" "+Cl(we(l)("copyData")),1)]),_:1},8,["onClick"]),Se(ht,{vertical:"",class:_o(we(fe)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Se(Ut,{align:"center"},{default:De(()=>[Bl("span",null,Cl(we(l)("dataSource")),1),Se(Kl,{value:`${pt.pivot?.dataSourcePageId}__${pt.pivot?.dataSourceLinkId}`,options:et(pt.pages||[],pt),placeholder:we(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ln=>W(pt,ln)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),kn<we(I).length-1?(cl(),Oa("div",{key:0,class:_o(`relative border-dashed border-y-2 h-1.5  ${we(fe)("!border-zinc-300","!border-zinc-600")}`)},[Bl("div",Im,[Se(Xe,{size:"tiny",type:"info",title:we(l)("insertSections"),onClick:ln=>$t(kn+1)},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):ir("",!0)]))),128))]),_:1},8,["list"]),Se(na,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:de[7]||(de[7]=pt=>h())},{default:De(()=>[Bl("div",Vm,[Se(Ie,{size:"20"},{default:De(()=>[Se(He,{icon:"carbon:row"})]),_:1}),ma(" "+Cl(we(l)("insertOrRemoveSections")),1)])]),_:1})])):(cl(),Oa("section",Sm,[Se(na,{size:"large",class:_o(`mb-2 !border-dashed !border-2 ${we(fe)("!border-zinc-300","!border-zinc-600")}`)},{default:De(()=>[Se(te,{description:we(l)("noSectionOnThisPage")},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:page-break"})]),_:1})]),extra:De(()=>[Bl("div",Em,[Se(Xe,{size:"small",secondary:"",onClick:de[8]||(de[8]=pt=>h())},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:row"})]),_:1})]),default:De(()=>[ma(" "+Cl(we(l)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),we(M)?(cl(),Oa("div",Um,[ma(Cl(we(l)("dataRetrievalSlug"))+": ",1),Bl("b",null,Cl(we(M).slug),1)])):ir("",!0)]))])]),_:1})),Se(Or,{show:we(s),"onUpdate:show":de[9]||(de[9]=pt=>dr(s)?s.value=pt:null),loading:we(H)||we(k),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("insertOrRemoveSections"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:ye,onNegativeClick:de[10]||(de[10]=pt=>s.value=!1)},{default:De(()=>[Bl("section",Mm,[we(S)?.length?(cl(),Fa(Jl,{key:0,style:{"max-height":"400px"}},{default:De(()=>[(cl(!0),Oa(ds,null,cr(we(S),pt=>(cl(),Fa(na,{key:pt.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:kn=>Z(pt)},{default:De(()=>[Bl("div",Tm,[Bl("span",Nm,Cl(we(i)(pt.title)),1),Se(N,{checked:z(pt).value,"onUpdate:checked":kn=>z(pt).value=kn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(cl(),Fa(te,{key:1,description:we(l)("noAvailableSection")},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Se(Or,{show:we(ue),"onUpdate:show":de[11]||(de[11]=pt=>dr(ue)?ue.value=pt:null),loading:we(H)||we(k),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("insertSections"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:Ye,onNegativeClick:de[12]||(de[12]=pt=>ue.value=!1)},{default:De(()=>[Bl("section",Dm,[we(Ve)?.length?(cl(),Fa(Jl,{key:0,style:{"max-height":"400px"}},{default:De(()=>[(cl(!0),Oa(ds,null,cr(we(Ve),pt=>(cl(),Fa(na,{key:pt.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:kn=>Vt(pt)},{default:De(()=>[Bl("div",zm,[Bl("span",Am,Cl(we(i)(pt.title)),1),Se(N,{checked:xe(pt).value,"onUpdate:checked":kn=>xe(pt).value=kn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(cl(),Fa(te,{key:1,description:we(l)("noAvailableSection")},{icon:De(()=>[Se(Ie,null,{default:De(()=>[Se(He,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Se(Or,{show:we(Ce),"onUpdate:show":de[14]||(de[14]=pt=>dr(Ce)?Ce.value=pt:null),loading:we(H)||we(C),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("copyData"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:he,onNegativeClick:de[15]||(de[15]=pt=>Ce.value=!1)},{default:De(()=>[Bl("section",Pm,[Se(Ut,{align:"start",vertical:""},{default:De(()=>[Bl("span",null,Cl(we(l)("dataWillBeCopiedFrom"))+":",1),Se(Kl,{value:we(ut),"onUpdate:value":de[13]||(de[13]=pt=>dr(ut)?ut.value=pt:null),options:et(we(nt)?.pages||[],we(nt),!0),placeholder:we(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[300px]"},null,8,["value","options","placeholder"])]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),qm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu-item-groups"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/menu-item-groups",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Rm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu-item-groups"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/menu-item-groups/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},jm=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["menu-item-groups"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-item-groups/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Km,defineComponent:Ym}=await se("vue"),{unref:Gt,resolveComponent:Eb,createVNode:dl,toDisplayString:Oo,createTextVNode:ps,withCtx:kl,renderList:Gm,Fragment:cc,openBlock:ms,createElementBlock:dc,createElementVNode:oi,createBlock:si,normalizeClass:Hm,isRef:Qm}=await se("vue"),{ref:ur}=await se("vue"),Wm={class:"flex items-center justify-between"},Xm={class:"flex flex-col"},Jm={class:"text-sm font-bold"},Zm=Ym({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,tr:l}=Ze(),o=Km(u,"show"),{data:a,isPending:t}=gd(),{mutate:r,isPending:j}=qm(),{mutate:ae,isPending:ce}=Rm(),{mutate:O,isPending:ge}=jm(),F=Wl(),I=ur(!1),d=ur(null),V=ur(null),le=ur({name:"",description:""}),i={name:[{required:!0,message:e("fillRequired")}]},fe=E=>{d.value=ne.cloneDeep(E),le.value=ne.cloneDeep(E||{name:"",description:""}),I.value=!0},P=async()=>(V.value?.validate(async E=>{if(!E){const S={name:le.value.name,description:le.value.description};d.value?ae({id:d.value.id,...S},{onSuccess:()=>{I.value=!1}}):r(S,{onSuccess:()=>{I.value=!1}})}}),!1),X=async E=>{F.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{E.id&&O({id:E.id})}})};return(E,S)=>{const M=ie,L=Be,D=$l,H=Xs,f=q,T=yl,x=Ra,k=Pa,A=so,U=Xl,K=$a,Q=ha,Y=ga;return ms(),dc(cc,null,[dl(U,{show:o.value,"onUpdate:show":S[2]||(S[2]=C=>o.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Gt(e)("menuItemGroups")},{"header-extra":kl(()=>[dl(D,{align:"center"},{default:kl(()=>[dl(L,{secondary:"",size:"small",type:"primary",disabled:Gt(t),onClick:S[0]||(S[0]=C=>fe(null))},{default:kl(()=>[dl(M,{icon:"carbon:add-alt",class:"mr-1"}),ps(" "+Oo(Gt(e)("add")),1)]),_:1},8,["disabled"]),dl(L,{secondary:"",size:"small",type:"error",disabled:Gt(t),onClick:S[1]||(S[1]=C=>o.value=!1)},{default:kl(()=>[dl(M,{icon:"carbon:close",class:"mr-1"}),ps(" "+Oo(Gt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:kl(()=>[dl(A,{show:Gt(t)},{default:kl(()=>[Gt(a)?.length?(ms(),si(x,{key:0,style:{"max-height":"400px"}},{default:kl(()=>[(ms(!0),dc(cc,null,Gm(Gt(a),C=>(ms(),si(T,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:kl(()=>[oi("div",Wm,[oi("div",Xm,[oi("span",Jm,Oo(Gt(l)(C.name)),1),dl(H,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:kl(()=>[ps(Oo(Gt(l)(C.description)),1)]),_:2},1024)]),dl(D,null,{default:kl(()=>[dl(L,{size:"small",type:"warning",secondary:"",onClick:_=>fe(C)},{default:kl(()=>[dl(f,null,{default:kl(()=>[dl(M,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),dl(L,{size:"small",type:"error",secondary:"",onClick:_=>X(C)},{default:kl(()=>[dl(f,null,{default:kl(()=>[dl(M,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ms(),si(T,{key:1,size:"large",class:Hm(`mb-2 !border-dashed !border-2 ${Gt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:kl(()=>[dl(k,{description:Gt(e)("noMenuItemGroupAdded")},{icon:kl(()=>[dl(f,null,{default:kl(()=>[dl(M,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),dl(U,{show:Gt(I),"onUpdate:show":S[5]||(S[5]=C=>Qm(I)?I.value=C:null),loading:Gt(j)||Gt(ce)||Gt(ge),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Gt(d)?Gt(e)("editMenuItemGroup"):Gt(e)("addMenuItemGroup"),"positive-text":Gt(e)("validate"),"negative-text":Gt(e)("cancel"),onPositiveClick:P,onNegativeClick:S[6]||(S[6]=C=>I.value=!1)},{default:kl(()=>[dl(Y,{ref_key:"formRef",ref:V,model:Gt(le),rules:i,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kl(()=>[dl(Q,{"show-label":!1,path:"name"},{default:kl(()=>[dl(K,{modelValue:Gt(le).name,"onUpdate:modelValue":S[3]||(S[3]=C=>Gt(le).name=C),placeholder:Gt(e)("name"),class:"w-full",sync:""},{label:kl(()=>[ps(Oo(Gt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),dl(Q,{"show-label":!1,path:"description"},{default:kl(()=>[dl(K,{modelValue:Gt(le).description,"onUpdate:modelValue":S[4]||(S[4]=C=>Gt(le).description=C),placeholder:Gt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kl(()=>[ps(Oo(Gt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:uc,mergeModels:ef,defineComponent:tf}=await se("vue"),{unref:el,resolveComponent:Ub,createVNode:En,withCtx:vo,isRef:lf,Fragment:af,openBlock:fs,createElementBlock:nf,createCommentVNode:pr,createBlock:mr}=await se("vue"),{ref:_s,computed:vs,onMounted:of,h:gs}=await se("vue"),sf=tf({__name:"ContentFormItems",props:{"content-type":{default:Ql.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:ef(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:n}=ke(),{tr:l,mergeArrays:o}=Ze(),{contentTypes:a,extractItemTitle:t}=Js(),{data:r}=oo(),j=e,ae=uc(u,"content-type"),ce=uc(u,"content-id"),O=_s(),ge=_s([]),F=_s([]),{mutateAsync:I,isPending:d}=Yi(),{mutateAsync:V,isPending:le}=Pd(),i=vs(()=>d.value||le.value),fe=async(C,_)=>{if(!C.length){F.value=[];return}F.value=await I({query:C,contentModelId:_})},P=vs(()=>o(ge.value,F.value,"id")),X=_s([]),E=_s([]),{mutateAsync:S,isPending:M}=Ud(),{mutateAsync:L,isPending:D}=Md(),H=vs(()=>D.value||M.value),f=async C=>{if(!C.length){E.value=[];return}E.value=await L(C)},T=vs(()=>o(X.value,E.value,"id")),{categories:x}=Gi(),{tags:k}=Gi();of(async()=>{const C=await S({ids:ce.value?[ce.value]:[]});C&&(X.value=o(X.value,C,"id"));const _=await V({ids:ce.value?[ce.value]:[]});_&&(ge.value=o(ge.value,_,"id"),O.value=ge.value.find(B=>B.id===ce.value)?.contentModelId)});const A=C=>gs("span",{},{default:()=>`${l(C.name)}`}),U=C=>gs("span",{},{default:()=>`${l(C.title)}`}),K=C=>gs("span",{},{default:()=>`${l(C.name)}`}),Q=C=>gs("span",{},{default:()=>l(C.title)}),Y=C=>vs(()=>gs("span",{},{default:()=>t(C,r.value?.find(_=>_.id===C.contentModelId))}));return(C,_)=>{const B=Ka,$e=qn,$=ya;return fs(),mr($,{"x-gap":"12",span:24},{default:vo(()=>[En($e,{span:8,label:el(n)("contentType"),path:"contentType"},{default:vo(()=>[En(B,{value:ae.value,"onUpdate:value":[_[0]||(_[0]=m=>ae.value=m),_[1]||(_[1]=()=>ce.value=void 0)],options:el(a)||[],placeholder:el(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ae.value===el(Ql).CONTENT_MODEL?(fs(),nf(af,{key:0},[En($e,{span:8,label:el(n)("contentModel")},{default:vo(()=>[En(B,{value:el(O),"onUpdate:value":_[2]||(_[2]=m=>lf(O)?O.value=m:null),options:el(r),placeholder:el(n)("search"),"render-label":Q,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),En($e,{span:8,label:el(n)("item"),path:"contentId"},{default:vo(()=>[En(B,{value:ce.value,"onUpdate:value":[_[3]||(_[3]=m=>ce.value=m),_[5]||(_[5]=(m,s)=>j("update",m,s,ae.value))],options:el(P)||[],placeholder:el(n)("search"),"render-label":m=>Y(m).value,loading:el(i),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:_[4]||(_[4]=m=>fe(m,el(O)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):pr("",!0),ae.value===el(Ql).NEWS_ARTICLE?(fs(),mr($e,{key:1,span:16,label:el(n)("newsArticle"),path:"contentId"},{default:vo(()=>[En(B,{value:ce.value,"onUpdate:value":[_[6]||(_[6]=m=>ce.value=m),_[7]||(_[7]=(m,s)=>j("update",m,s,ae.value))],options:el(T)||[],placeholder:el(n)("search"),"render-label":U,loading:el(H),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):pr("",!0),ae.value===el(Ql).NEWS_CATEGORY?(fs(),mr($e,{key:2,span:16,label:el(n)("newsCategory"),path:"contentId"},{default:vo(()=>[En(B,{value:ce.value,"onUpdate:value":[_[8]||(_[8]=m=>ce.value=m),_[9]||(_[9]=(m,s)=>j("update",m,s,ae.value))],options:el(x)||[],placeholder:el(n)("select"),"render-label":A,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):pr("",!0),ae.value===el(Ql).NEWS_TAG?(fs(),mr($e,{key:3,span:16,label:el(n)("newsTag"),path:"contentId"},{default:vo(()=>[En(B,{value:ce.value,"onUpdate:value":[_[10]||(_[10]=m=>ce.value=m),_[11]||(_[11]=(m,s)=>j("update",m,s,ae.value))],options:el(k)||[],placeholder:el(n)("select"),"render-label":K,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):pr("",!0)]),_:1})}}}),rf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/menu/items",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},cf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/menu/items/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},df=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["menu","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},uf=()=>{const{request:u}=Fe(),e=Ge();return za(async n=>{const l=await u({method:"put",url:"/menu/items/position",data:n});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:pf,defineComponent:mf}=await se("vue"),{unref:y,resolveComponent:ri,createVNode:ee,withCtx:be,toDisplayString:ul,createTextVNode:fa,openBlock:al,createBlock:Un,createCommentVNode:go,isRef:fr,renderList:_r,Fragment:rn,createElementBlock:_a,normalizeClass:yo,withModifiers:ys,createElementVNode:Yl}=await se("vue"),ff={key:0},_f={class:"flex items-center"},vf={class:"flex flex-col"},gf={class:"text-sm font-bold"},yf={key:0,class:"text-sm"},hf={class:"text-xs font-normal"},bf={class:"text-xs my-1"},kf={class:"flex items-center"},wf={class:"flex flex-col"},xf={class:"text-sm font-bold"},$f={class:"text-xs font-normal"},Cf={key:0,class:"mt-4"},If={class:"my-8"},Vf={class:"flex items-center justify-between"},Sf={class:"flex flex-col"},Ef={class:"text-sm font-bold"},Uf={class:"text-xs font-normal"},Mf={class:"flex items-center"},Tf={key:0},Nf={key:1},Df={key:2},{storeToRefs:zf}=await se("pinia"),{ref:Sa,watch:Af,computed:hs,h:pc}=await se("vue"),Pf=mf({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:n}=ke(),{extractItemTitle:l}=Js(),{tr:o,pickByTheme:a}=Ze(),{isLightTheme:t}=zf(To()),{data:r,isPending:j}=Li(),{data:ae}=oo(),{data:ce,isPending:O}=gd(),{data:ge,isFetching:F,refetch:I}=fd({enabled:!1}),{mutate:d,isPending:V}=rf(),{mutate:le,isPending:i}=cf(),{mutate:fe,isPending:P}=df(),{mutate:X}=uf(),E=qe(),S=Wl(),M=pf(u,"modelValue"),L=Sa([]),D=Sa([]),H=Sa(""),f=Sa();let T=Sa(!0);Af(()=>F.value,W=>{W||(T.value=!1)});const x=hs(()=>{if(!H.value)return L.value;const W=L.value.filter(b=>b.title.toLowerCase().includes(H.value.toLowerCase())||b.description?.toLowerCase().includes(H.value.toLowerCase())||b.children.some(p=>p.title.toLowerCase().includes(H.value.toLowerCase())||p.description?.toLowerCase().includes(H.value.toLowerCase())));return f.value&&f.value.focus(),W}),k=async()=>{await I(),L.value=ge.value?.filter(W=>!W.parentId&&W.menuId===M.value?.id)||[];for(let W=0;W<L.value.length;W++)L.value[W].children=ge.value?.filter(b=>b.parentId===L.value[W].id&&b.menuId===M.value?.id)||[];D.value=ge.value?.filter(W=>W.menuId!==M.value?.id)||[]};k();const A=Sa(24),U=Sa(1),K=W=>{A.value=W},Q={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:da.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:Ql.CONTENT_MODEL,contentId:void 0},Y=Sa(null),C=Sa(!1),_=Sa(!1),B=Sa(null),$e=Sa(null),$=Sa(Q),m=hs(()=>{const W={title:[{required:!0,message:e("fillRequired")}]};return $.value.targetType===da.PAGE_LINK?(W.pageId=[{required:!0,message:e("fillRequired")}],W.path=[{required:!0,message:e("fillRequired")}]):$.value.targetType===da.EXTERNAL_LINK?W.url=[{required:!0,message:e("fillRequired")}]:$.value.targetType===da.CONTENT_LINK&&(W.contentId=[{required:!0,message:e("fillRequired")}],W.contentType=[{required:!0,message:e("fillRequired")}]),W}),s=hs(()=>r.value?.find(W=>W.id==$.value.pageId)?.slug||""),{data:h,isPending:Z}=bu({queryKey:["pages",s],queryFn:async()=>{const{request:W}=Fe(),b=await W({url:`/pages/${s.value}`});return b.success&&b.result.data?b.result.data:null},enabled:hs(()=>!!s.value)}),z=hs(()=>h.value?.sections?.map(W=>{const rt=(h.value?.sections?.filter(Ce=>Ce.id===W.id)?.map(Ce=>Ce.pivot?.createdAt||Ce.pivot?.updatedAt||"")?.sort((Ce,nt)=>new Date(Ce).getTime()-new Date(nt).getTime())||[]).indexOf(W.pivot?.createdAt||W.pivot?.updatedAt||"");return{label:W.pivot?.linkId=="default"?o(W.title):o(W.title)+" ("+(rt+1)+")",value:W.slug+"__"+W.pivot?.linkId}})||[]),ye=(W,b=null)=>{B.value=ne.cloneDeep(W),Y.value=b,W?($.value=ne.cloneDeep(W),C.value=!0):($.value=ne.cloneDeep(Q),D.value.length>0?_.value=!0:C.value=!0)},Ne=async W=>{S.warning({title:e("confirm"),content:W.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{W.id&&fe({id:W.id})}})},oe=async W=>{d({title:W.title,path:W.path,url:W.url,description:W.description,isActive:!0,isVisible:!0,color:W.color,icon:W.icon,position:W.position,targetType:W.targetType,parentId:Y.value,menuId:M.value?.id,sectionKey:W.sectionKey,menuItemGroupId:W.menuItemGroupId,pageId:W.pageId},{onSuccess(){k(),_.value=!1}})},ue=async()=>($e.value?.validate(async W=>{if(!W){const b={title:$.value.title,path:$.value.path,url:$.value.url,description:$.value.description,isActive:$.value.isActive,isVisible:$.value.isVisible,color:$.value.color,icon:$.value.icon,position:$.value.position,targetType:$.value.targetType,parentId:Y.value,menuId:M.value?.id,sectionKey:$.value.sectionKey,menuItemGroupId:$.value.menuItemGroupId,pageId:$.value.pageId,contentId:$.value.contentId,contentType:$.value.contentType};B.value?B.value.title!==$.value.title&&L.value.findIndex(p=>p.title==$.value.title)>-1?E.error(e("sameMenuItemTitleMessage")):le({id:B.value.id,...b},{onSuccess(){k()}}):L.value.findIndex(p=>p.title==$.value.title)>-1?E.error(e("sameMenuItemTitleMessage")):d(b,{onSuccess(){k()}}),C.value=!1}}),!1),$t=async(W,b)=>{X({items:b},{onSuccess(){k()}})},Vt=W=>pc("span",{},{default:()=>o(W.title)}),xe=W=>pc("span",{},{default:()=>o(W.name)}),Ye=W=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(W),Ve=W=>{if(W.targetType==da.EXTERNAL_LINK)return W.url;if(W.targetType==da.PAGE_LINK)return W.path;if(W.targetType==da.CONTENT_LINK)switch(W.contentType){case Ql.CONTENT_MODEL:return e("contentModel");case Ql.NEWS_CATEGORY:return e("newsCategory");case Ql.NEWS_ARTICLE:return e("newsArticle");case Ql.NEWS_TAG:return e("newsTag")}return""},et=async(W,b,p)=>{if(!o($.value.title))switch(p){case Ql.CONTENT_MODEL:$.value.title=l(b,ae.value?.find(rt=>rt.id===b.contentModelId));break;case Ql.NEWS_ARTICLE:$.value.title=b.title;break;case Ql.NEWS_CATEGORY:case Ql.NEWS_TAG:$.value.title=b.name;break}};return(W,b)=>{const p=ie,rt=$l,Ce=Da,nt=Cd,ut=$d,R=Va,he=ja,pe=yl,Ee=ri("Draggable"),at=jn,Ul=Rn,Ya=No,jl=Pa,ua=Aa,_e=Ra,de=Xl,He=$a,Ie=ha,Xe=Lr,ht=qn,Ut=Ar,Re=zr,Ml=ya,tn=ri("IconPicker"),aa=ri("color-picker"),na=Ka,bn=ga;return al(),_a(rn,null,[ee(Ce,{to:"#alt-action"},{default:be(()=>[ee(rt,{align:"center"},{default:be(()=>[y(x).length?(al(),Un(y(Be),{key:0,secondary:"",type:"primary",onClick:b[0]||(b[0]=N=>ye(null))},{icon:be(()=>[ee(y(q),{size:"18"},{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[fa(" "+ul(y(e)("addMenuItem")),1)]),_:1})):go("",!0)]),_:1})]),_:1}),ee(nt,{class:"mt-2 mb-5",onBack:b[2]||(b[2]=N=>M.value=null)},{title:be(()=>[fa(ul(y(o)(M.value?.title)),1)]),back:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:be(()=>[ee(y(Zt),{ref_key:"searchInputRef",ref:f,value:y(H),"onUpdate:value":b[1]||(b[1]=N=>fr(H)?H.value=N:null),clearable:!0,placeholder:y(e)("search")},{suffix:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),ee(ua,{appear:"",name:"slide-fade"},{default:be(()=>[Yl("section",null,[y(T)?(al(),_a("section",ff,[(al(),_a(rn,null,_r(7,N=>ee(ut,{key:N,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(al(),_a(rn,{key:1},[y(x)&&y(x).length?(al(),_a(rn,{key:0},[ee(Ee,{list:y(L),onChange:b[3]||(b[3]=N=>$t(N,y(L)))},{default:be(()=>[(al(!0),_a(rn,null,_r(y(x).slice((y(U)-1)*y(A),y(U)*y(A)),N=>(al(),Un(pe,{key:N.id,embedded:"",size:"small",class:"mb-1"},{default:be(()=>[ee(Ul,{"default-expanded-names":N.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":be(({collapsed:hl})=>[ee(rt,{align:"center"},{default:be(()=>[ee(R,{size:"small",bordered:!1,type:N.isActive?"success":"error"},{default:be(()=>[fa(ul(N.isActive?y(e)("published"):y(e)("unpublished")),1)]),_:2},1032,["type"]),ee(R,{size:"small",bordered:!1,type:N.isVisible?"info":"warning"},{default:be(()=>[fa(ul(N.isVisible?y(e)("visible"):y(e)("hidden")),1)]),_:2},1032,["type"]),ee(he,{vertical:"",class:yo(["!mx-0",y(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ee(y(Be),{size:"small",type:"primary",secondary:"",onClick:ys(Kl=>ye(N),["stop"])},{default:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ee(y(Be),{size:"small",type:"error",secondary:"",onClick:ys(Kl=>Ne(N),["stop"])},{default:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),ee(y(Be),{size:"small",type:"info",secondary:"",onClick:ys(Kl=>ye(null,N.id),["stop"])},{icon:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:category"})]),_:1})]),default:be(()=>[fa(" "+ul(y(e)("subMenuItem"))+" ",1),ee(R,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:be(()=>[fa(ul(N.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),b[27]||(b[27]=Yl("div",{class:"w-6"},null,-1)),ee(y(q),null,{default:be(()=>[hl?(al(),Un(p,{key:0,icon:"fa-solid:chevron-left"})):(al(),Un(p,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:be(()=>[...b[28]||(b[28]=[Yl("span",null,null,-1)])]),default:be(()=>[ee(at,{name:"1"},{header:be(()=>[Yl("div",_f,[ee(y(q),{size:"21",class:"cursor-move mr-4"},{default:be(()=>[ee(p,{icon:"fa-solid:grip-lines"})]),_:1}),ee(he,{vertical:"",class:yo(y(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Yl("div",vf,[Yl("div",null,[Yl("span",gf,ul(y(o)(N.title)),1),N.group?(al(),_a("span",yf," Â ("+ul(y(o)(N.group?.name))+") ",1)):go("",!0)]),Yl("small",hf,ul(Ve(N)),1)])])]),default:be(()=>[N.description?(al(),_a(rn,{key:0},[ee(he,{class:yo([y(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Yl("div",bf,ul(y(o)(N.description)),1)],64)):go("",!0),N.children.length?(al(),_a(rn,{key:1},[ee(he,{class:yo([y(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),ee(Ee,{list:N.children,onChange:hl=>$t(hl,N.children)},{default:be(()=>[(al(!0),_a(rn,null,_r(N.children,hl=>(al(),Un(pe,{key:hl.id,size:"small",class:"mb-1"},{header:be(()=>[Yl("div",kf,[ee(y(q),{size:"21",class:"cursor-move mr-4"},{default:be(()=>[ee(p,{icon:"fa-solid:grip-lines"})]),_:1}),ee(he,{vertical:"",class:yo(y(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Yl("div",wf,[Yl("span",xf,ul(y(o)(hl.title)),1),Yl("small",$f,ul(Ve(hl)),1)])])]),"header-extra":be(()=>[ee(rt,{align:"center"},{default:be(()=>[ee(R,{size:"small",bordered:!1,type:hl.isActive?"success":"error"},{default:be(()=>[fa(ul(hl.isActive?y(e)("published"):y(e)("unpublished")),1)]),_:2},1032,["type"]),ee(R,{size:"small",bordered:!1,type:hl.isVisible?"info":"warning"},{default:be(()=>[fa(ul(hl.isVisible?y(e)("visible"):y(e)("hidden")),1)]),_:2},1032,["type"]),ee(he,{vertical:"",class:yo(["!mx-0",y(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ee(y(Be),{size:"small",type:"primary",secondary:"",onClick:ys(Kl=>ye(hl,N.id),["stop"])},{default:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ee(y(Be),{size:"small",type:"error",secondary:"",onClick:ys(Kl=>Ne(hl),["stop"])},{default:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):go("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),ee(Ya,{page:y(U),"onUpdate:page":b[4]||(b[4]=N=>fr(U)?U.value=N:null),class:"mt-5 justify-end","show-size-picker":"","page-size":y(A),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(y(L).length/y(A)),"onUpdate:pageSize":K},{prefix:be(()=>[fa(ul(`${y(L).length} ${y(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(al(),Un(pe,{key:1,size:"large",class:yo(`mb-2 !border-dashed !border-2 ${y(a)("!border-zinc-300","!border-zinc-600")}`)},{default:be(()=>[ee(jl,{description:y(e)("noMenuItemAvailable")},{icon:be(()=>[ee(y(q),null,{default:be(()=>[y(H)?(al(),Un(p,{key:0,icon:"carbon:search"})):(al(),Un(p,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:be(()=>[y(H)?go("",!0):(al(),_a("div",Cf,[ee(y(Be),{size:"small",secondary:"",onClick:b[5]||(b[5]=N=>ye(null))},{icon:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[fa(" "+ul(y(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),ee(de,{show:y(_),"onUpdate:show":b[6]||(b[6]=N=>fr(_)?_.value=N:null),loading:y(V)||y(i)||y(P),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:y(e)("menuItems"),"positive-text":y(Y)?y(e)("createSubMenuItem"):y(e)("createMenuItem"),"negative-text":y(e)("cancel"),onPositiveClick:b[7]||(b[7]=()=>{_.value=!1,C.value=!0}),onNegativeClick:b[8]||(b[8]=N=>_.value=!1)},{default:be(()=>[Yl("section",If,[ee(_e,{style:{"max-height":"400px"}},{default:be(()=>[(al(!0),_a(rn,null,_r(y(D),N=>(al(),Un(pe,{key:N.id,embedded:"",size:"small",class:"mb-2"},{default:be(()=>[Yl("div",Vf,[Yl("div",Sf,[Yl("span",Ef,ul(y(o)(N.title)),1),Yl("small",Uf,ul(Ve(N)),1)]),ee(y(Be),{size:"small",type:"primary",secondary:"",onClick:hl=>oe(N)},{icon:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[fa(" "+ul(y(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ee(de,{show:y(C),"onUpdate:show":b[25]||(b[25]=N=>fr(C)?C.value=N:null),loading:y(V)||y(i)||y(P),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:y(B)?y(Y)?y(e)("editSubMenuItem"):y(e)("editMenuItem"):y(Y)?y(D).length?y(e)("createSubMenuItem"):y(e)("addSubMenuItem"):y(D).length?y(e)("createMenuItem"):y(e)("addMenuItem"),"positive-text":y(e)("validate"),"negative-text":y(e)("cancel"),onPositiveClick:ue,onNegativeClick:b[26]||(b[26]=N=>C.value=!1)},{default:be(()=>[ee(bn,{ref_key:"formRef",ref:$e,class:"mt-5",model:y($),rules:y(m),"show-require-mark":!1,size:"medium"},{default:be(()=>[ee(Ie,{"show-label":!1,path:"title"},{default:be(()=>[ee(He,{modelValue:y($).title,"onUpdate:modelValue":b[9]||(b[9]=N=>y($).title=N),placeholder:y(e)("title"),class:"w-full",sync:""},{label:be(()=>[fa(ul(y(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ee(Ie,{"show-label":!1,path:"description"},{default:be(()=>[ee(He,{modelValue:y($).description,"onUpdate:modelValue":b[10]||(b[10]=N=>y($).description=N),placeholder:y(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:be(()=>[fa(ul(y(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ee(Ml,{"x-gap":"12",span:24},{default:be(()=>[ee(ht,{span:5,label:y(e)("position"),path:"position"},{default:be(()=>[ee(Xe,{value:y($).position,"onUpdate:value":b[11]||(b[11]=N=>y($).position=N),placeholder:y(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),ee(ht,{span:10,label:y(e)("publication"),path:"isActive"},{default:be(()=>[ee(Re,{value:y($).isActive,"onUpdate:value":b[12]||(b[12]=N=>y($).isActive=N),name:"isActive",class:"w-full"},{default:be(()=>[ee(Ut,{value:!1,label:y(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),ee(Ut,{value:!0,label:y(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),ee(ht,{span:9,label:y(e)("visibility"),path:"isVisible"},{default:be(()=>[ee(Re,{value:y($).isVisible,"onUpdate:value":b[13]||(b[13]=N=>y($).isVisible=N),name:"isVisible",class:"w-full"},{default:be(()=>[ee(Ut,{value:!1,label:y(e)("hidden"),class:"w-[50%]"},null,8,["label"]),ee(Ut,{value:!0,label:y(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ee(he,{class:"!my-2"}),ee(Ml,{"x-gap":"12",span:24},{default:be(()=>[ee(ht,{span:10,label:y(e)("icon"),path:"icon"},{default:be(()=>[ee(tn,{modelValue:y($).icon,"onUpdate:modelValue":b[14]||(b[14]=N=>y($).icon=N),placeholder:y(e)("icon"),"icons-list-placeholder":y(e)("enterIconNameInSearchBar"),"search-placeholder":y(e)("search"),"empty-text":y(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),ee(ht,{span:4,label:y(e)("color"),path:"color"},{default:be(()=>[Yl("div",Mf,[y($).color?(al(),_a(rn,{key:0},[ee(y(Be),{text:"",type:"error",style:{"font-size":"21px"},onClick:b[15]||(b[15]=N=>y($).color="")},{default:be(()=>[ee(y(q),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1}),ee(he,{vertical:""})],64)):go("",!0),ee(aa,{"pure-color":y($).color,"onUpdate:pureColor":b[16]||(b[16]=N=>y($).color=N),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:y(t)?"white":"black",lang:y(n)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),ee(ht,{span:10,label:y(e)("group"),path:"menuItemGroupId"},{default:be(()=>[ee(na,{value:y($).menuItemGroupId,"onUpdate:value":b[17]||(b[17]=N=>y($).menuItemGroupId=N),options:y(ce),placeholder:y(e)("group"),"render-label":xe,loading:y(O),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ee(ht,{span:24,label:y(e)("targetType"),path:"targetType"},{default:be(()=>[ee(Re,{value:y($).targetType,"onUpdate:value":b[18]||(b[18]=N=>y($).targetType=N),class:"w-full",size:"small"},{default:be(()=>[ee(Ut,{value:y(da).PAGE_LINK,class:"w-[33.33%]"},{default:be(()=>[fa(ul(y(e)("pageLink")),1)]),_:1},8,["value"]),ee(Ut,{value:y(da).CONTENT_LINK,class:"w-[33.33%]"},{default:be(()=>[fa(ul(y(e)("contentLink")),1)]),_:1},8,["value"]),ee(Ut,{value:y(da).EXTERNAL_LINK,class:"w-[33.33%]"},{default:be(()=>[fa(ul(y(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ee(ua,{appear:"",name:"slide-fade"},{default:be(()=>[y($).targetType===y(da).PAGE_LINK?(al(),_a("section",Tf,[ee(Ml,{"x-gap":"12",span:24},{default:be(()=>[ee(ht,{span:12,label:y(e)("page"),path:"pageId"},{default:be(()=>[ee(na,{value:y($).pageId,"onUpdate:value":b[19]||(b[19]=N=>y($).pageId=N),options:y(r)||[],placeholder:y(e)("selectPage"),"render-label":Vt,loading:y(j),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ee(ht,{span:12,label:y(e)("section"),path:"sectionKey"},{default:be(()=>[ee(na,{value:y($).sectionKey,"onUpdate:value":b[20]||(b[20]=N=>y($).sectionKey=N),options:y(z),placeholder:y(e)("selectSection"),disabled:!y($).pageId,loading:y(Z),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),ee(Ie,{label:y(e)("path"),path:"path"},{default:be(()=>[ee(y(Zt),{value:y($).path,"onUpdate:value":b[21]||(b[21]=N=>y($).path=N),placeholder:y(e)("path"),"allow-input":Ye,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):y($).targetType===y(da).CONTENT_LINK?(al(),_a("section",Nf,[ee(sf,{"content-type":y($).contentType,"onUpdate:contentType":b[22]||(b[22]=N=>y($).contentType=N),"content-id":y($).contentId,"onUpdate:contentId":b[23]||(b[23]=N=>y($).contentId=N),onUpdate:et},null,8,["content-type","content-id"])])):y($).targetType===y(da).EXTERNAL_LINK?(al(),_a("section",Df,[ee(Ie,{label:y(e)("url"),path:"url"},{default:be(()=>[ee(y(Zt),{value:y($).url,"onUpdate:value":b[24]||(b[24]=N=>y($).url=N),placeholder:y(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):go("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Lf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu-locations"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/menu-locations",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Bf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menu-locations"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/menu-locations/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ff=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["menu-locations"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-locations/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Of,defineComponent:qf}=await se("vue"),{unref:Ht,resolveComponent:Mb,createVNode:tl,withCtx:pl,toDisplayString:bs,createTextVNode:vr,renderList:Rf,Fragment:mc,openBlock:ks,createElementBlock:fc,createElementVNode:ii,createBlock:ci,normalizeClass:jf,isRef:Kf}=await se("vue"),{ref:gr}=await se("vue"),Yf={class:"flex items-center justify-between"},Gf={class:"flex flex-col"},Hf={class:"text-sm font-bold"},Qf=qf({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,tr:l,formatKey:o}=Ze(),a=Of(u,"show"),{data:t,isPending:r}=yd(),{mutate:j,isPending:ae}=Lf(),{mutate:ce,isPending:O}=Bf(),{mutate:ge,isPending:F}=Ff(),I=Wl(),d=gr(!1),V=gr(null),le=gr(null),i=gr({name:"",description:""}),fe={name:[{required:!0,message:e("fillRequired")}]},P=S=>{V.value=ne.cloneDeep(S),i.value=ne.cloneDeep(S||{name:"",description:""}),d.value=!0},X=async()=>(le.value?.validate(async S=>{if(!S){const M={name:i.value.name,description:i.value.description};V.value?ce({id:V.value.id,data:M},{onSuccess:()=>{d.value=!1}}):j(M,{onSuccess:()=>{d.value=!1}})}}),!1),E=async S=>{I.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{S.id&&ge({id:S.id})}})};return(S,M)=>{const L=ie,D=q,H=Be,f=$l,T=Xs,x=yl,k=Ra,A=Pa,U=so,K=Xl,Q=Zt,Y=ha,C=$a,_=ga;return ks(),fc(mc,null,[tl(K,{show:a.value,"onUpdate:show":M[2]||(M[2]=B=>a.value=B),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Ht(e)("menuLocations")},{"header-extra":pl(()=>[tl(f,{align:"center"},{default:pl(()=>[tl(H,{secondary:"",size:"small",type:"primary",disabled:Ht(r),onClick:M[0]||(M[0]=B=>P(null))},{default:pl(()=>[tl(D,{class:"mr-1"},{default:pl(()=>[tl(L,{icon:"carbon:add-alt"})]),_:1}),vr(" "+bs(Ht(e)("add")),1)]),_:1},8,["disabled"]),tl(H,{secondary:"",size:"small",type:"error",disabled:Ht(r),onClick:M[1]||(M[1]=B=>a.value=!1)},{default:pl(()=>[tl(D,{class:"mr-1"},{default:pl(()=>[tl(L,{icon:"carbon:close"})]),_:1}),vr(" "+bs(Ht(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:pl(()=>[tl(U,{show:Ht(r)},{default:pl(()=>[Ht(t)?.length?(ks(),ci(k,{key:0,style:{"max-height":"400px"}},{default:pl(()=>[(ks(!0),fc(mc,null,Rf(Ht(t),B=>(ks(),ci(x,{key:B.id,embedded:"",size:"small",class:"mb-2"},{default:pl(()=>[ii("div",Yf,[ii("div",Gf,[ii("span",Hf,bs(B.name),1),tl(T,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:pl(()=>[vr(bs(Ht(l)(B.description)),1)]),_:2},1024)]),tl(f,null,{default:pl(()=>[tl(H,{size:"small",type:"warning",secondary:"",onClick:$e=>P(B)},{default:pl(()=>[tl(D,null,{default:pl(()=>[tl(L,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),tl(H,{size:"small",type:"error",secondary:"",onClick:$e=>E(B)},{default:pl(()=>[tl(D,null,{default:pl(()=>[tl(L,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ks(),ci(x,{key:1,size:"large",class:jf(`mb-2 !border-dashed !border-2 ${Ht(n)("!border-zinc-300","!border-zinc-600")}`)},{default:pl(()=>[tl(A,{description:Ht(e)("noMenuLocationAdded")},{icon:pl(()=>[tl(D,null,{default:pl(()=>[tl(L,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),tl(K,{show:Ht(d),"onUpdate:show":M[5]||(M[5]=B=>Kf(d)?d.value=B:null),loading:Ht(ae)||Ht(O)||Ht(F),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ht(V)?Ht(e)("editMenuLocation"):Ht(e)("addMenuLocation"),"positive-text":Ht(e)("validate"),"negative-text":Ht(e)("cancel"),onPositiveClick:X,onNegativeClick:M[6]||(M[6]=B=>d.value=!1)},{default:pl(()=>[tl(_,{ref_key:"formRef",ref:le,model:Ht(i),rules:fe,"show-require-mark":!1,size:"medium",class:"my-5"},{default:pl(()=>[tl(Y,{label:Ht(e)("key"),path:"name"},{default:pl(()=>[tl(Q,{value:Ht(i).name,placeholder:Ht(e)("key"),class:"w-full","onUpdate:value":M[3]||(M[3]=B=>Ht(i).name=Ht(o)(B))},null,8,["value","placeholder"])]),_:1},8,["label"]),tl(Y,{"show-label":!1,path:"description"},{default:pl(()=>[tl(C,{modelValue:Ht(i).description,"onUpdate:modelValue":M[4]||(M[4]=B=>Ht(i).description=B),placeholder:Ht(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:pl(()=>[vr(bs(Ht(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Wf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menus"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/menus",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Xf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["menus"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/menus/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Jf=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["menus"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menus/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:Zf}=await se("vue"),{unref:We,resolveComponent:Tb,createVNode:Et,withCtx:Mt,toDisplayString:cn,createTextVNode:Hn,openBlock:Qa,createBlock:qo,createCommentVNode:yr,renderList:e_,Fragment:di,createElementBlock:ws,withModifiers:ui,normalizeClass:pi,createElementVNode:xs,isRef:hr}=await se("vue"),t_={key:2},l_={class:"flex items-center"},a_={class:"flex flex-col"},n_={key:0,class:"text-xs font-normal"},o_={class:"mt-4"},{ref:Mn,watch:s_}=await se("vue"),{defineStore:r_}=await se("pinia"),i_=Zf({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,isInDevMode:o,formatKey:a}=Ze(),{data:t}=yd(),{data:r}=Zd(),{mutate:j,isPending:ae}=Jf(),{mutate:ce,isPending:O}=Wf(),{mutate:ge,isPending:F}=Xf(),I=Wl(),d=Mn(24),V=Mn(1),le=x=>{d.value=x},i={name:"",title:"",description:"",menuLocationId:void 0},fe=Mn(!1),P=Mn(!1),X=Mn(!1),E=Mn(null),S=Mn(i),M={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},L=Mn(null),D=x=>{L.value=ne.cloneDeep(x),S.value=ne.cloneDeep(x||i),fe.value=!0},H=async()=>(E.value?.validate(async x=>{if(!x){const k={name:S.value.name,title:S.value.title,description:S.value.description,menuLocationId:S.value.menuLocationId};L.value?ge({id:L.value.id,...k},{onSuccess:()=>{}}):ce(k,{onSuccess:()=>{}}),fe.value=!1}}),!1),f=async x=>{I.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{x.id&&j({id:x.id})}})},T=r_("menus-management",()=>({itemsMenu:Mn(null)}))();return s_(()=>S.value.title,x=>{L.value||S.value.name.length<=21&&(S.value.name=Td(n(x),{trim:!0,lower:!0,strict:!0}))}),(x,k)=>{const A=ie,U=q,K=Be,Q=$l,Y=Da,C=ja,_=yl,B=No,$e=Pa,$=Aa,m=$a,s=ha,h=Zt,Z=qn,z=Ka,ye=ya,Ne=ga,oe=Xl;return Qa(),ws(di,null,[We(T).itemsMenu?yr("",!0):(Qa(),qo(Y,{key:0,to:"#alt-action"},{default:Mt(()=>[Et(Q,{align:"center"},{default:Mt(()=>[We(o)?(Qa(),qo(K,{key:0,type:"success",secondary:"",onClick:k[0]||(k[0]=ue=>P.value=!0)},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(A,{icon:"carbon:template"})]),_:1})]),default:Mt(()=>[Hn(" "+cn(We(e)("locations")),1)]),_:1})):yr("",!0),Et(K,{type:"warning",secondary:"",onClick:k[1]||(k[1]=ue=>X.value=!0)},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(A,{icon:"carbon:tag-group"})]),_:1})]),default:Mt(()=>[Hn(" "+cn(We(e)("groups")),1)]),_:1}),We(r)&&We(r).length?(Qa(),qo(K,{key:1,type:"primary",secondary:"",onClick:k[2]||(k[2]=ue=>D(null))},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(A,{icon:"carbon:add-alt"})]),_:1})]),default:Mt(()=>[Hn(" "+cn(We(e)("addMenu")),1)]),_:1})):yr("",!0)]),_:1})]),_:1})),We(T).itemsMenu?(Qa(),qo(Pf,{key:1,modelValue:We(T).itemsMenu,"onUpdate:modelValue":k[3]||(k[3]=ue=>We(T).itemsMenu=ue)},null,8,["modelValue"])):(Qa(),ws("section",t_,[Et($,{appear:"",name:"slide-fade"},{default:Mt(()=>[xs("section",null,[We(r)&&We(r).length?(Qa(),ws(di,{key:0},[(Qa(!0),ws(di,null,e_(We(r).slice((We(V)-1)*We(d),We(V)*We(d)),ue=>(Qa(),qo(_,{key:ue.id,embedded:"",size:"small",class:"mb-2"},{header:Mt(()=>[xs("div",l_,[Et(Q,null,{default:Mt(()=>[Et(K,{size:"small",type:"primary",secondary:"",onClick:ui($t=>D(ue),["stop"])},{default:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(A,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Et(K,{size:"small",type:"error",secondary:"",onClick:ui($t=>f(ue),["stop"])},{default:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(A,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),Et(C,{vertical:"",class:pi(We(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),xs("div",a_,[xs("span",{class:pi(`${ue.location?"text-sm":"text-base"} font-bold`)},cn(We(n)(ue.title)),3),ue.location?(Qa(),ws("small",n_,cn(ue.location?.name),1)):yr("",!0)])])]),"header-extra":Mt(()=>[Et(K,{size:"small",type:"primary",secondary:"",onClick:ui($t=>We(T).itemsMenu=ue,["stop"])},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(A,{icon:"carbon:arrow-right"})]),_:1})]),default:Mt(()=>[Hn(" "+cn(We(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),Et(B,{page:We(V),"onUpdate:page":k[4]||(k[4]=ue=>hr(V)?V.value=ue:null),class:"mt-5 justify-end","show-size-picker":"","page-size":We(d),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(We(r).length/We(d)),"onUpdate:pageSize":le},{prefix:Mt(()=>[Hn(cn(`${We(r).length} ${We(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Qa(),qo(_,{key:1,size:"large",class:pi(`mb-2 !border-dashed !border-2 ${We(l)("!border-zinc-300","!border-zinc-600")}`)},{default:Mt(()=>[Et($e,{description:We(e)("noMenuAvailable")},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(A,{icon:"carbon:model-alt"})]),_:1})]),extra:Mt(()=>[xs("div",o_,[Et(K,{size:"small",onClick:k[5]||(k[5]=ue=>D(null))},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(A,{icon:"carbon:add-alt"})]),_:1})]),default:Mt(()=>[Hn(" "+cn(We(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Et(oe,{show:We(fe),"onUpdate:show":k[10]||(k[10]=ue=>hr(fe)?fe.value=ue:null),loading:We(O)||We(F)||We(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:We(L)?We(e)("editMenu"):We(e)("addMenu"),"positive-text":We(e)("validate"),"negative-text":We(e)("cancel"),onPositiveClick:H,onNegativeClick:k[11]||(k[11]=ue=>fe.value=!1)},{default:Mt(()=>[Et(Ne,{ref_key:"formRef",ref:E,model:We(S),rules:M,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Mt(()=>[Et(s,{"show-label":!1,path:"title"},{default:Mt(()=>[Et(m,{modelValue:We(S).title,"onUpdate:modelValue":k[6]||(k[6]=ue=>We(S).title=ue),placeholder:We(e)("title"),class:"w-full",sync:""},{label:Mt(()=>[Hn(cn(We(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Et(s,{"show-label":!1,path:"description"},{default:Mt(()=>[Et(m,{modelValue:We(S).description,"onUpdate:modelValue":k[7]||(k[7]=ue=>We(S).description=ue),placeholder:We(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Mt(()=>[Hn(cn(We(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Et(ye,{"x-gap":"12",span:24},{default:Mt(()=>[Et(Z,{span:12,label:We(e)("key"),path:"name"},{default:Mt(()=>[Et(h,{value:We(S).name,placeholder:We(e)("key"),class:"w-full","onUpdate:value":k[8]||(k[8]=ue=>We(S).name=We(a)(ue))},null,8,["value","placeholder"])]),_:1},8,["label"]),Et(Z,{span:12,label:We(e)("location"),path:"menuLocationId"},{default:Mt(()=>[Et(z,{value:We(S).menuLocationId,"onUpdate:value":k[9]||(k[9]=ue=>We(S).menuLocationId=ue),options:We(t),placeholder:We(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Et(Qf,{show:We(P),"onUpdate:show":k[12]||(k[12]=ue=>hr(P)?P.value=ue:null)},null,8,["show"]),Et(Zm,{show:We(X),"onUpdate:show":k[13]||(k[13]=ue=>hr(X)?X.value=ue:null)},null,8,["show"])]))],64)}}}),c_="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var ao=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(ao||{}),Na=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(Na||{});const d_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["video-categories"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/video-categories",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},u_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["video-categories"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/video-categories/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},p_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["video-categories"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/video-categories/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},m_=()=>{const{request:u}=Fe(),e=Ge();return za(async n=>{const l=await u({method:"put",url:"/video-categories/position",data:n});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:f_}=await se("vue"),{unref:G,isRef:br,createVNode:Ue,resolveComponent:_c,withCtx:Ae,toDisplayString:Gl,createTextVNode:qa,openBlock:Zl,createBlock:dn,createCommentVNode:ho,renderList:vc,Fragment:bo,createElementBlock:Qn,normalizeClass:ko,withModifiers:$s,createElementVNode:Ea,normalizeStyle:__}=await se("vue"),v_={class:"flex items-center"},g_={class:"flex flex-col"},y_={class:"text-sm font-bold"},h_={class:"text-xs font-normal"},b_={class:"text-xs my-1"},k_={class:"flex items-center"},w_={class:"flex flex-col"},x_={class:"text-sm font-bold"},$_={class:"text-xs font-normal"},C_={key:0,class:"mt-4"},I_={class:"flex items-center"},{storeToRefs:V_}=await se("pinia"),{inject:S_,ref:un,computed:gc,watch:E_}=await se("vue"),U_="categories",M_=f_({__name:"Categories",setup(u){const e=Ge(),n=qe(),l=Wl(),{tr:o,fileUrl:a,pickByTheme:t}=Ze(),{t:r,locale:j}=ke(),{data:ae,isPending:ce,refetch:O}=eu(),{mutate:ge,isPending:F}=p_(),{mutate:I,isPending:d}=u_(),{mutate:V,isPending:le}=d_(),{mutate:i}=m_(),{isLightTheme:fe}=V_(To()),P=S_("appConfig"),X=un(""),E=un(),S=gc(()=>{if(!X.value)return M.value;const $=M.value.filter(m=>m.name.toLowerCase().includes(X.value.toLowerCase())||m.description?.toLowerCase().includes(X.value.toLowerCase())||m.children?.some(s=>s.name.toLowerCase().includes(X.value.toLowerCase())||s.description?.toLowerCase().includes(X.value.toLowerCase())));return E.value&&E.value.focus(),$}),M=gc(()=>{const $=ae.value?.filter(m=>!m.parentId)||[];for(let m=0;m<$.length;m++)$[m].children=ae.value?.filter(s=>s.parentId===$[m].id);return $});E_(()=>ce.value||le.value||d.value||F.value,$=>{$?e.start():e.finish()});const L=un(24),D=un(1),H=$=>{L.value=$},f=un(null),T=un(!1),x=un(null),k=un(null),A=un({name:"",description:"",isActive:!0,position:0,image:"",color:""}),U={name:[{required:!0,message:r("fillRequired")}]},K=($,m=null)=>{x.value=ne.cloneDeep($),$?A.value=ne.cloneDeep($):A.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},f.value=m,T.value=!0},Q=async $=>{l.warning({title:r("confirm"),content:$.parentId?r("confirmDeleteSubCategory"):r("confirmDeleteCategory"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{$.id&&ge({id:$.id})}})},Y=async()=>(k.value?.validate(async $=>{if(!$){const m={name:A.value.name,description:A.value.description,isActive:A.value.isActive,position:A.value.position,image:A.value.image,color:A.value.color,parentId:f.value};x.value?x.value.name!==A.value.name&&(ae.value||[]).findIndex(s=>s.name==A.value.name)>-1?n.error(r("sameCategoryNameMessage")):I({id:x.value.id,...m}):(ae.value||[]).findIndex(s=>s.name==A.value.name)>-1?n.error(r("sameCategoryNameMessage")):V(m),T.value=!1}}),!1),C=async($,m)=>{i({items:m},{onSuccess(){O()}})},_=un(!1),B=async $=>{A.value.image=$,_.value=!1},$e=()=>{A.value.image=""};return($,m)=>{const s=ie,h=Ws,Z=Da,z=ja,ye=$l,Ne=yl,oe=_c("Draggable"),ue=jn,$t=Rn,Vt=No,xe=Pa,Ye=so,Ve=Aa,et=no,W=$a,b=ha,p=Lr,rt=qn,Ce=_c("color-picker"),nt=ya,ut=Ri,R=Fi,he=ga,pe=Xl;return Zl(),Qn(bo,null,[Ue(Z,{to:"#search-category-action"},{default:Ae(()=>[Ue(h,{class:"!w-[250px]"},{default:Ae(()=>[Ue(G(Zt),{ref_key:"searchInputRef",ref:E,value:G(X),"onUpdate:value":m[0]||(m[0]=Ee=>br(X)?X.value=Ee:null),clearable:!0,placeholder:G(r)("searchCategory")},null,8,["value","placeholder"]),Ue(G(Be),{type:"primary",secondary:""},{icon:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),Ue(Z,{to:"#add-category-action"},{default:Ae(()=>[G(S).length?(Zl(),dn(G(Be),{key:0,type:"primary",secondary:"",onClick:m[1]||(m[1]=Ee=>K(null))},{icon:Ae(()=>[Ue(G(q),{size:"18"},{default:Ae(()=>[Ue(s,{icon:"carbon:add-alt"})]),_:1})]),default:Ae(()=>[qa(" "+Gl(G(r)("addCategory")),1)]),_:1})):ho("",!0)]),_:1}),Ue(Ve,{name:"slide-fade",appear:""},{default:Ae(()=>[Ea("section",null,[Ue(Ye,{show:G(ce)},{default:Ae(()=>[G(S)&&G(S).length?(Zl(),Qn(bo,{key:0},[Ue(oe,{list:G(M),onChange:m[2]||(m[2]=Ee=>C(Ee,G(M)))},{default:Ae(()=>[(Zl(!0),Qn(bo,null,vc(G(S).slice((G(D)-1)*G(L),G(D)*G(L)),Ee=>(Zl(),dn(Ne,{key:Ee.id,embedded:"",size:"small",class:"mb-1"},{default:Ae(()=>[Ue($t,{"default-expanded-names":Ee.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":Ae(({collapsed:at})=>[Ue(ye,{align:"center"},{default:Ae(()=>[Ue(G(Va),{size:"small",bordered:!1,type:Ee.isActive?"success":"error"},{default:Ae(()=>[qa(Gl(Ee.isActive?G(r)("visible"):G(r)("hidden")),1)]),_:2},1032,["type"]),Ue(z,{vertical:"",class:ko(["!mx-0",G(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(G(Be),{size:"small",type:"primary",secondary:"",onClick:$s(Ul=>K(Ee),["stop"])},{default:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"error",secondary:"",onClick:$s(Ul=>Q(Ee),["stop"])},{default:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"info",secondary:"",onClick:$s(Ul=>K(null,Ee.id),["stop"])},{icon:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:category"})]),_:1})]),default:Ae(()=>[qa(" "+Gl(G(r)("subCategory"))+" ",1),Ue(G(Va),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:Ae(()=>[qa(Gl(Ee.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),m[16]||(m[16]=Ea("div",{class:"w-6"},null,-1)),Ue(G(q),null,{default:Ae(()=>[at?(Zl(),dn(s,{key:0,icon:"fa-solid:chevron-left"})):(Zl(),dn(s,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ae(()=>[...m[17]||(m[17]=[Ea("span",null,null,-1)])]),default:Ae(()=>[Ue(ue,{name:"1"},{header:Ae(()=>[Ea("div",v_,[Ue(G(q),{size:"21",class:"cursor-move mr-4"},{default:Ae(()=>[Ue(s,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(z,{vertical:"",class:ko(G(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ea("div",g_,[Ea("span",y_,Gl(G(o)(Ee.name))+"Â ("+Gl(Ee.itemsCount)+"Â "+Gl(G(r)("video_s"))+") ",1),Ea("small",h_,Gl(Ee.slug),1)])])]),default:Ae(()=>[Ee.description?(Zl(),Qn(bo,{key:0},[Ue(z,{class:ko([G(t)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Ea("div",b_,Gl(G(o)(Ee.description)),1)],64)):ho("",!0),Ee.children?.length?(Zl(),Qn(bo,{key:1},[Ue(z,{class:ko([G(t)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Ue(oe,{list:Ee.children,onChange:at=>C(at,Ee.children||[])},{default:Ae(()=>[(Zl(!0),Qn(bo,null,vc(Ee.children,at=>(Zl(),dn(Ne,{key:at.id,size:"small",class:"mb-1"},{header:Ae(()=>[Ea("div",k_,[Ue(G(q),{size:"21",class:"cursor-move mr-4"},{default:Ae(()=>[Ue(s,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(z,{vertical:"",class:ko(G(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ea("div",w_,[Ea("span",x_,Gl(G(o)(at.name)),1),Ea("small",$_,Gl(at.slug),1)])])]),"header-extra":Ae(()=>[Ue(ye,{align:"center"},{default:Ae(()=>[Ue(G(Va),{size:"small",bordered:!1,type:at.isActive?"success":"error"},{default:Ae(()=>[qa(Gl(at.isActive?G(r)("visible"):G(r)("hidden")),1)]),_:2},1032,["type"]),Ue(z,{vertical:"",class:ko(["!mx-0",G(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(G(Be),{size:"small",type:"primary",secondary:"",onClick:$s(Ul=>K(at,Ee.id),["stop"])},{default:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"error",secondary:"",onClick:$s(Ul=>Q(at),["stop"])},{default:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):ho("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Ue(Vt,{page:G(D),"onUpdate:page":m[3]||(m[3]=Ee=>br(D)?D.value=Ee:null),class:"mt-5 justify-end","show-size-picker":"","page-size":G(L),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(G(M).length/G(L)),"onUpdate:pageSize":H},{prefix:Ae(()=>[qa(Gl(`${G(M).length} ${G(r)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Zl(),dn(Ne,{key:1,size:"large",class:ko(`mb-2 !border-dashed !border-2 ${G(t)("!border-zinc-300","!border-zinc-600")}`)},{default:Ae(()=>[Ue(xe,{description:G(r)("noCategoryAvailable")},{icon:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[G(X)?(Zl(),dn(s,{key:0,icon:"carbon:search"})):(Zl(),dn(s,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:Ae(()=>[G(X)?ho("",!0):(Zl(),Qn("div",C_,[Ue(G(Be),{size:"small",secondary:"",onClick:m[4]||(m[4]=Ee=>K(null))},{icon:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:add-alt"})]),_:1})]),default:Ae(()=>[qa(" "+Gl(G(r)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),Ue(et,{show:G(_),"onUpdate:show":m[5]||(m[5]=Ee=>br(_)?_.value=Ee:null),title:G(r)("selectImage"),"upload-config":{folder:U_,limit:0,maxSize:0,baseUrl:G(P)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:B},null,8,["show","title","upload-config"]),Ue(pe,{show:G(T),"onUpdate:show":m[14]||(m[14]=Ee=>br(T)?T.value=Ee:null),loading:G(le)||G(d)||G(F),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:G(x)?G(f)?G(r)("editSubCategory"):G(r)("editCategory"):G(f)?G(r)("addSubCategory"):G(r)("addCategory"),"positive-text":G(r)("validate"),"negative-text":G(r)("cancel"),onPositiveClick:Y,onNegativeClick:m[15]||(m[15]=Ee=>T.value=!1)},{default:Ae(()=>[Ue(he,{ref_key:"formRef",ref:k,class:"mt-5",model:G(A),rules:U,"show-require-mark":!1,size:"medium"},{default:Ae(()=>[Ue(b,{"show-label":!1,path:"name"},{default:Ae(()=>[Ue(W,{modelValue:G(A).name,"onUpdate:modelValue":m[6]||(m[6]=Ee=>G(A).name=Ee),placeholder:G(r)("name"),class:"w-full",sync:""},{label:Ae(()=>[qa(Gl(G(r)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(b,{"show-label":!1,path:"description"},{default:Ae(()=>[Ue(W,{modelValue:G(A).description,"onUpdate:modelValue":m[7]||(m[7]=Ee=>G(A).description=Ee),placeholder:G(r)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ae(()=>[qa(Gl(G(r)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(nt,{"x-gap":"12",span:24},{default:Ae(()=>[Ue(rt,{span:12,label:G(r)("position"),path:"position"},{default:Ae(()=>[Ue(p,{value:G(A).position,"onUpdate:value":m[8]||(m[8]=Ee=>G(A).position=Ee),placeholder:G(r)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Ue(rt,{span:12,label:G(r)("color"),path:"color"},{default:Ae(()=>[Ea("div",I_,[G(A).color?(Zl(),Qn(bo,{key:0},[Ue(G(Be),{text:"",type:"error",style:{"font-size":"21px"},onClick:m[9]||(m[9]=Ee=>G(A).color="")},{default:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Ue(z,{vertical:""})],64)):ho("",!0),Ue(Ce,{"pure-color":G(A).color,"onUpdate:pureColor":m[10]||(m[10]=Ee=>G(A).color=Ee),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:G(fe)?"white":"black",lang:G(j)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),Ue(z,{dashed:"",class:"!my-2"}),Ue(nt,{"x-gap":"12",span:24},{default:Ae(()=>[Ue(rt,{span:12,label:G(r)("preview"),path:"image"},{default:Ae(()=>[Ue(ye,{align:"center",justify:"center",style:{height:"100%"}},{default:Ae(()=>[Ue(ut,{class:"cursor-pointer","object-fit":"cover",style:__("border: 1px dashed "+G(t)("green","white")),size:150,src:G(a)(G(A).image||""),onClick:m[11]||(m[11]=Ee=>_.value=!0)},{default:Ae(()=>[G(A).image?ho("",!0):(Zl(),dn(G(q),{key:0,size:64},{default:Ae(()=>[Ue(s,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),G(A).image?(Zl(),dn(G(Be),{key:0,quaternary:"",onClick:m[12]||(m[12]=Ee=>$e())},{icon:Ae(()=>[Ue(G(q),null,{default:Ae(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),default:Ae(()=>[qa(" "+Gl(G(r)("clear")),1)]),_:1})):ho("",!0)]),_:1})]),_:1},8,["label"]),Ue(rt,{span:12,label:G(r)("status"),path:"isActive"},{default:Ae(()=>[Ue(R,{value:G(A).isActive,"onUpdate:value":m[13]||(m[13]=Ee=>G(A).isActive=Ee),size:"small"},{checked:Ae(()=>[qa(Gl(G(r)("visible")),1)]),unchecked:Ae(()=>[qa(Gl(G(r)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),T_=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return za(async o=>{const a=await u({url:"/video-settings",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateSettings"))}})};class N_{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,n,l=Na.SELF_HOSTED,o=ao.HORIZONTAL,a,t,r,j,ae,ce,O,ge,F,I,d,V){this.id=t,this.foreignId=ce,this.publisherId=ae,this.title=e,this.slug=j,this.description=O,this.thumbnail=ge,this.thumbnailUrl=F,this.path=n,this.url=r,this.source=l,this.visible=a,this.displayType=o,this.publishedAt=I,this.createdAt=d,this.updatedAt=V}}const D_=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return za(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:()=>l.success(e("success")),onError:()=>l.error(e("unableToUpdateChannelVideos")),retry:1})},z_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=Ge(),a=qe();return _t({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:t=>"id"in t&&t.id?t.id:`temp-${crypto.randomUUID()}`,mutationFn:async t=>{o.start();try{const r=await n({method:"post",url:"/video-items",data:Qt(t,["id"])});if(!r.success)throw new Error(r.error||l("anErrorOccurred"));return r.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{a.success(l("success"))},onError:t=>{switch(t?.response?.data?.errorCode){case Bt.FORM_INVALID_DATA:e(t?.response?.data?.data);break;case Bt.REQUEST_PARAMS_MISSING:a.error(l("pleaseProvideApiKeyAndValidVideoUrl"));break;case Bt.REQUEST_DATA_RETRIEVAL_FAILED:a.error(l("videoDataCantBeRetrieve"));break;case Bt.REQUEST_DATA_ALREADY_EXISTS:a.error(l("videoAlreadyExists"));break;default:a.error(l("anErrorOccurred"))}},...u}})},A_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{l.start();try{const t=await e({method:"put",url:`/video-items/${a.id}`,data:Qt(a,["id"])});if(!t.success)throw new Error(t.error||n("anErrorOccurred"));return t.result.data}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},P_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{l.start();const t=await e({method:"delete",url:`/video-items/force/${a}`});if(l.finish(),!t.success)throw new Error(t.error);return t.result?.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},L_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof N_){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("VideoItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(r=>a[r]);try{for(const r of t)await e({method:"delete",url:`/video-items/force/${r}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},{defineComponent:B_}=await se("vue"),{unref:wl,resolveComponent:Nb,createVNode:nl,withCtx:ml,toDisplayString:wo,createTextVNode:yc,createElementVNode:xo,normalizeClass:F_,Fragment:hc,openBlock:bc,createElementBlock:kc,createCommentVNode:O_}=await se("vue"),{ref:wc,computed:xc}=await se("vue"),q_=B_({__name:"Settings",setup(u){const{t:e,locale:n}=ke(),l=hd({enabled:!1}),{mutate:o,isPending:a}=T_(),{mutate:t,isPending:r}=D_(),j=wc({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),ae=wc(j.value),ce=xc(()=>ne.isEqual(j.value,ae.value)),O=async()=>{o(j.value,{onSuccess:()=>ge()})},ge=async()=>{await l.refetch(),l.data.value?.forEach(d=>{j.value[d.key]!=null&&(j.value[d.key]=d.value)}),ae.value=ne.cloneDeep(j.value)};ge();const F=()=>{t(void 0,{onSuccess:()=>ge()})},I=xc(()=>!!(a.value||r.value||l.isPending.value));return(d,V)=>{const le=ie,i=q,fe=Be,P=Da,X=Zt,E=$l,S=yl,M=en,L=Fi,D=ya,H=Aa;return bc(),kc(hc,null,[nl(P,{to:"#save-settings-action"},{default:ml(()=>[nl(fe,{loading:wl(I),disabled:wl(ce),type:"primary",secondary:"",onClick:O},{icon:ml(()=>[nl(i,null,{default:ml(()=>[nl(le,{icon:"carbon:save"})]),_:1})]),default:ml(()=>[yc(" "+wo(wl(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),nl(H,{name:"slide-fade",appear:""},{default:ml(()=>[nl(S,{hoverable:"",embedded:""},{header:ml(()=>[yc(wo(wl(e)("youtube")),1)]),default:ml(()=>[nl(D,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ml(()=>[nl(M,null,{default:ml(()=>[nl(S,{class:"w-full h-full",size:"small"},{default:ml(()=>[nl(E,{align:"center",justify:"space-between"},{default:ml(()=>[xo("span",null,wo(wl(e)("apiKey")),1),nl(X,{value:wl(j).youtubeApiKey,"onUpdate:value":V[0]||(V[0]=f=>wl(j).youtubeApiKey=f),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),nl(M,null,{default:ml(()=>[nl(S,{class:"w-full h-full py-1.5",size:"small"},{default:ml(()=>[nl(E,{align:"center",justify:"space-between"},{default:ml(()=>[xo("span",null,wo(wl(e)("autoUpdateChannelVideos")),1),nl(L,{value:wl(j).youtubeChannelVideosAutoUpdate,"onUpdate:value":V[1]||(V[1]=f=>wl(j).youtubeChannelVideosAutoUpdate=f),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ml(()=>[...V[3]||(V[3]=[xo("div",{class:"w-6"},null,-1)])]),unchecked:ml(()=>[...V[4]||(V[4]=[xo("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),wl(j).youtubeChannelVideosAutoUpdate=="1"?(bc(),kc(hc,{key:0},[nl(M,null,{default:ml(()=>[nl(S,{class:"w-full h-full",size:"small"},{default:ml(()=>[nl(E,{align:"center",justify:"space-between"},{default:ml(()=>[xo("span",null,wo(wl(e)("channelId")),1),nl(X,{value:wl(j).youtubeChannelId,"onUpdate:value":V[2]||(V[2]=f=>wl(j).youtubeChannelId=f),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),nl(M,null,{default:ml(()=>[nl(S,{class:"w-full h-full",size:"small"},{default:ml(()=>[nl(E,{align:"center",justify:"space-between"},{default:ml(()=>[xo("span",null,wo(wl(e)("lastUpdate")),1),xo("b",null,wo(wl(j).youtubeLastChannelVideosUpdate?wl(On)(wl(j).youtubeLastChannelVideosUpdate,{locale:wl(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):wl(e)("never")),1),nl(fe,{strong:"",circle:"",secondary:"",type:"primary",title:wl(e)("refresh"),disabled:wl(I),onClick:F},{icon:ml(()=>[nl(i,null,{default:ml(()=>[nl(le,{icon:"carbon:restart",class:F_({"animate-spin":wl(I)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):O_("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),R_=()=>{const{t:u}=ke(),e=[{label:u("horizontal"),value:ao.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:ao.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(a=>a.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(a=>a.value===o)?.label,videoDisplayTypes:e}},{unref:j_}=await se("vue"),{defineComponent:K_}=await se("vue"),{unref:w,vShow:Cs,createElementVNode:va,withDirectives:Is,toDisplayString:Nl,createTextVNode:Fl,resolveComponent:Db,isRef:Tn,withCtx:Me,createVNode:me,openBlock:Dl,createElementBlock:ba,createCommentVNode:kr,normalizeClass:Y_,renderList:$c,Fragment:Ro,withModifiers:G_,createBlock:jo,normalizeStyle:Cc}=await se("vue"),H_={id:"save-settings-action"},Q_={id:"add-category-action"},W_={class:"flex items-center gap-3"},X_={id:"search-category-action"},J_={key:0,class:"w-full flex items-center justify-between mt-2"},Z_={class:"flex items-center gap-3"},ev={key:0,class:"mt-12"},tv={key:1,class:"mt-12"},lv={key:2},av={key:0},nv=["onClick"],ov={class:"absolute top-0 left-0 w-full h-full bg-black opacity-30 flex items-center justify-center"},sv={class:"absolute bottom-0 right-0 p-3 w-full"},rv={class:"text-center text-dimgray text-sm"},iv={key:1,class:"flex items-center justify-center"},cv={class:"mt-5"},dv={class:"w-full flex flex-gap-8 items-center justify-start"},uv=["src"],pv={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},mv=["src"],{inject:fv,ref:zl,computed:wr,watch:_v,h:Ic}=await se("vue"),{defineStore:vv}=await se("pinia"),gv=K_({__name:"index",setup(u){const{t:e}=ke(),{tr:n,fileUrl:l,pickByTheme:o,getVideoThumbnail:a}=Ze(),{videoDisplayTypes:t}=R_(),{orderedCategories:r}=tu(),j=hd(),{mutate:ae,isPending:ce}=P_(),{mutate:O,isPending:ge}=L_(),{mutate:F,isPending:I}=z_(),{mutate:d,isPending:V}=A_(),le=qe(),i=Wl(),fe=fv("appConfig"),P=zl(""),X=wu(P,500),E=zl(null),S=zl([]),M=zl([]),L=vv("videos-management-store",()=>({currentTab:zl("all")}))(),D=zl(0),H=zl(24),f=zl(1),T=wr(()=>({pageSize:H.value,query:X.value,source:L.currentTab,page:f.value})),x=b=>{f.value=b,U()},k=b=>{H.value=b,U()},{data:A,refetch:U,isPending:K}=lu(T);_v(()=>A.value,b=>{S.value=b?.videoItems||[],D.value=b?.meta?.total||0,f.value=b?.meta?.currentPage||1},{deep:!0,immediate:!0});const Q=zl(!1),Y=zl(null),C=zl(null),_=zl({title:"",description:"",visible:!0,source:Na.SELF_HOSTED,displayType:ao.HORIZONTAL,thumbnail:"",path:""}),B=wr(()=>({title:[{required:_.value.source==Na.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),$e=b=>{Y.value=ne.cloneDeep(b),b?(_.value=ne.cloneDeep(b),M.value=b.categories?.map(p=>p.id)??[]):(_.value={title:"",description:"",visible:!0,source:L.currentTab=="youtube"?Na.YOUTUBE:Na.SELF_HOSTED,displayType:ao.HORIZONTAL,thumbnail:"",path:""},M.value=[]),Q.value=!0},$=async b=>{i.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{ae(b)}})},m=async()=>(C.value?.validate(async b=>{if(!b){const p={title:_.value.title,description:_.value.description,visible:_.value.visible,source:_.value.source,displayType:_.value.displayType,thumbnail:_.value.thumbnail,path:_.value.path,categories:M.value};Y.value?(p.id=Y.value.id,d(p)):F(p),Q.value=!1}}),!1),s=zl(!1),h=zl(!1),Z=zl(""),z=zl(""),ye=zl("classic"),Ne=b=>{Z.value=n(b.title)??e("video"),z.value=l(b.path),ye.value=b.source==Na.YOUTUBE?"youtube":"classic",h.value=!0},oe=zl(!1),ue=zl(!1),$t=zl(El()),Vt=zl({}),xe=wr(()=>{let b=0;for(const p in Vt.value)Vt.value[p]&&b++;return b});function Ye(){Vt.value={},U()}const Ve=async()=>(xe.value?i.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[xe.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{O(Vt.value,{onSuccess:()=>{Vt.value={}}})}}):le.warning(e("noItemSelected")),!1),et=b=>[b.parentId?Ic(q,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>Ic(ie,{icon:"mdi:arrow-right"})}):null,`${n(b.name)}`],W=wr(()=>!!(I.value||V.value||ce.value||ge.value||j.isPending.value));return(b,p)=>{const rt=ro,Ce=Be,nt=Da,ut=xd,R=Zt,he=Ws,pe=Oi,Ee=ku,at=Va,Ul=$l,Ya=Xs,jl=yl,ua=Aa,_e=en,de=ya,He=No,Ie=so,Xe=Pa,ht=ha,Ut=qn,Re=Ka,Ml=$a,tn=es,aa=ga,na=Xl,bn=no;return Dl(),ba(Ro,null,[me(nt,{to:"#alt-action"},{default:Me(()=>[Is(va("div",H_,null,512),[[Cs,w(L).currentTab=="settings"]]),Is(va("div",Q_,null,512),[[Cs,w(L).currentTab=="categories"]]),Is(va("div",W_,[me(rt,{checked:w(ue),"onUpdate:checked":[p[0]||(p[0]=N=>Tn(ue)?ue.value=N:null),p[1]||(p[1]=N=>{for(const hl of w(S))hl.id&&(w(Vt)[hl.id]=N);$t.value=("uuidv4"in b?b.uuidv4:j_(El))()})]},{default:Me(()=>[Fl(Nl(w(e)("selectAll")),1)]),_:1},8,["checked"]),me(Ce,{type:"primary",secondary:"",loading:w(I),disabled:w(W),onClick:p[2]||(p[2]=N=>$e(null))},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:video-add"})]),_:1})]),default:Me(()=>[Fl(" "+Nl(w(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[Cs,["all","self-hosted","youtube"].includes(w(L).currentTab)]])]),_:1}),va("section",{class:Y_(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${w(o)("bg-white","bg-zinc-800")}`)},[me(pe,{value:w(L).currentTab,"onUpdate:value":[p[6]||(p[6]=N=>w(L).currentTab=N),p[7]||(p[7]=()=>w(U)())],type:"card",size:"medium"},{suffix:Me(()=>[Is(va("div",null,[me(he,{class:"!w-[250px]"},{default:Me(()=>[me(R,{ref_key:"searchInputRef",ref:E,value:w(P),"onUpdate:value":[p[3]||(p[3]=N=>Tn(P)?P.value=N:null),p[4]||(p[4]=N=>{N||w(U)()})],clearable:!0,placeholder:w(e)("searchVideo")},null,8,["value","placeholder"]),me(Ce,{type:"primary",secondary:"",onClick:p[5]||(p[5]=N=>w(U)())},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[Cs,["all","self-hosted","youtube"].includes(w(L).currentTab)]]),Is(va("div",X_,null,512),[[Cs,w(L).currentTab=="categories"]])]),default:Me(()=>[me(ut,{name:"all"},{default:Me(()=>[me(w(q),{size:"18",class:"mr-1"},{default:Me(()=>[me(w(ie),{icon:"carbon:collapse-all"})]),_:1}),Fl(" "+Nl(w(e)("all_")),1)]),_:1}),me(ut,{name:w(Na).SELF_HOSTED},{default:Me(()=>[me(w(q),{size:"18",class:"mr-1"},{default:Me(()=>[me(w(ie),{icon:"carbon:document-video"})]),_:1}),Fl(" "+Nl(w(e)("selfHosted")),1)]),_:1},8,["name"]),me(ut,{name:w(Na).YOUTUBE},{default:Me(()=>[me(w(q),{size:"18",class:"mr-1"},{default:Me(()=>[me(w(ie),{icon:"carbon:logo-youtube"})]),_:1}),Fl(" "+Nl(w(e)("youtube")),1)]),_:1},8,["name"]),me(ut,{name:"categories"},{default:Me(()=>[me(w(q),{size:"18",class:"mr-1"},{default:Me(()=>[me(w(ie),{icon:"carbon:categories"})]),_:1}),Fl(" "+Nl(w(e)("categories")),1)]),_:1}),me(ut,{name:"settings"},{default:Me(()=>[me(w(q),{size:"18",class:"mr-1"},{default:Me(()=>[me(w(ie),{icon:"carbon:settings-adjust"})]),_:1}),Fl(" "+Nl(w(e)("settings")),1)]),_:1})]),_:1},8,["value"]),w(xe)>0?(Dl(),ba("section",J_,[va("span",null,Nl(w(e)("nbItemsSelected",[w(xe)])),1),va("section",Z_,[me(Ce,{type:"error",size:"small",loading:w(ge),secondary:"",onClick:Ve},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Fl(" "+Nl(w(e)("delete")),1)]),_:1},8,["loading"]),me(Ce,{type:"warning",size:"small",secondary:"",onClick:Ye},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:close"})]),_:1})]),default:Me(()=>[Fl(" "+Nl(w(e)("cancelSelection")),1)]),_:1})])])):kr("",!0)],2),w(L).currentTab=="settings"?(Dl(),ba("section",ev,[me(q_)])):w(L).currentTab=="categories"?(Dl(),ba("section",tv,[me(M_)])):(Dl(),ba("section",lv,[me(ua,{name:"slide-fade",appear:""},{default:Me(()=>[me(jl,{embedded:"",class:"py-10 mt-6"},{default:Me(()=>[w(S).length&&!w(j).isPending.value?(Dl(),ba("section",av,[me(de,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Me(()=>[(Dl(!0),ba(Ro,null,$c(w(S),(N,hl)=>(Dl(),jo(_e,{key:hl},{default:Me(()=>[me(ua,{name:"slide-fade",appear:""},{default:Me(()=>[me(jl,{bordered:"",hoverable:""},{cover:Me(()=>[va("div",{class:"flex items-center justify-center h-full relative cursor-pointer",onClick:Kl=>Ne(N)},[me(Ee,{load:()=>w(a)(N.path),fallback:N.thumbnailUrl??w(c_),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),va("div",ov,[me(w(q),{size:72},{default:Me(()=>[me(w(ie),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),va("div",sv,[me(Ul,null,{default:Me(()=>[(Dl(!0),ba(Ro,null,$c(N.categories,Kl=>(Dl(),jo(at,{size:"small",bordered:!1,key:Kl.id,onClick:G_(()=>{},["stop"])},{default:Me(()=>[Fl(Nl(w(n)(Kl.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,nv)]),header:Me(()=>[va("div",rv,[me(Ya,{"line-clamp":1,"expand-trigger":"click"},{default:Me(()=>[N.id?(Dl(),jo(rt,{key:w($t),checked:w(Vt)[N.id],"onUpdate:checked":Kl=>w(Vt)[N.id]=Kl,class:"mr-1"},null,8,["checked","onUpdate:checked"])):kr("",!0),Fl(" "+Nl(w(n)(N.title)),1)]),_:2},1024)])]),action:Me(()=>[me(Ul,{justify:"space-between",align:"center"},{default:Me(()=>[me(Ul,null,{default:Me(()=>[me(at,{bordered:!1,type:N.visible?"success":"error"},{default:Me(()=>[Fl(Nl(N.visible?w(e)("visible"):w(e)("hidden")),1)]),_:2},1032,["type"]),me(at,{bordered:!1,type:N.displayType==w(ao).HORIZONTAL?"info":"warning"},{default:Me(()=>[Fl(Nl(N.displayType==w(ao).HORIZONTAL?w(e)("horizontal"):w(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),me(Ul,null,{default:Me(()=>[me(Ce,{ternary:"",circle:"",title:w(e)("play"),onClick:Kl=>Ne(N)},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),N.source!=w(Na).YOUTUBE?(Dl(),jo(Ce,{key:0,ternary:"",circle:"",title:w(e)("edit"),loading:w(V),onClick:Kl=>$e(N)},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","loading","onClick"])):kr("",!0),me(Ce,{ternary:"",circle:"",title:w(e)("delete"),loading:w(ce),onClick:Kl=>$(N)},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),me(He,{page:w(f),"onUpdate:page":[p[8]||(p[8]=N=>Tn(f)?f.value=N:null),x],class:"mt-10 justify-center","show-size-picker":"","page-size":w(H),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(w(D)/w(H)),"onUpdate:pageSize":k},{prefix:Me(()=>[Fl(Nl(`${w(D)} ${w(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):w(j).isPending.value?(Dl(),ba("section",iv,[me(Ie,{size:"medium"})])):(Dl(),jo(Xe,{key:2,description:w(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),me(na,{show:w(Q),"onUpdate:show":p[21]||(p[21]=N=>Tn(Q)?Q.value=N:null),loading:w(K),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:w(Y)?w(e)("editVideo"):w(e)("addVideo"),"positive-text":w(e)("validate"),"negative-text":w(e)("cancel"),onPositiveClick:m,onNegativeClick:p[22]||(p[22]=N=>Q.value=!1)},{default:Me(()=>[va("div",cv,[me(aa,{ref_key:"formRef",ref:C,model:w(_),rules:w(B),"show-require-mark":!1,size:"medium"},{default:Me(()=>[me(ht,{label:w(e)("source"),path:"source"},{default:Me(()=>[me(rt,{checked:w(_).source,"onUpdate:checked":p[9]||(p[9]=N=>w(_).source=N),"checked-value":w(Na).YOUTUBE,"unchecked-value":w(Na).SELF_HOSTED},{default:Me(()=>[Fl(Nl(w(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),w(_).source==w(Na).YOUTUBE?(Dl(),ba(Ro,{key:0},[me(de,{"x-gap":"12",span:24},{default:Me(()=>[me(Ut,{span:16,label:w(e)("videoShareLink"),path:"path"},{default:Me(()=>[me(R,{value:w(_).path,"onUpdate:value":p[10]||(p[10]=N=>w(_).path=N),placeholder:w(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),me(Ut,{span:8,label:w(e)("displayType"),path:"displayType"},{default:Me(()=>[me(Re,{value:w(_).displayType,"onUpdate:value":p[11]||(p[11]=N=>w(_).displayType=N),placeholder:w(e)("displayType"),options:w(t),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),me(ht,{label:w(e)("categories"),path:"categories"},{default:Me(()=>[me(Re,{value:w(M),"onUpdate:value":p[12]||(p[12]=N=>Tn(M)?M.value=N:null),"render-label":et,placeholder:w(e)("categories"),options:w(r),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])],64)):(Dl(),ba(Ro,{key:1},[me(ht,{"show-label":!1,path:"title"},{default:Me(()=>[me(Ml,{modelValue:w(_).title,"onUpdate:modelValue":p[13]||(p[13]=N=>w(_).title=N),placeholder:w(e)("title"),class:"w-full",sync:""},{label:Me(()=>[Fl(Nl(w(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),me(ht,{"show-label":!1,path:"description"},{default:Me(()=>[me(Ml,{modelValue:w(_).description,"onUpdate:modelValue":p[14]||(p[14]=N=>w(_).description=N),placeholder:w(e)("description"),class:"w-full",type:"textarea",sync:""},{label:Me(()=>[Fl(Nl(w(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),me(ht,{label:w(e)("categories"),path:"categories"},{default:Me(()=>[me(Re,{value:w(M),"onUpdate:value":p[15]||(p[15]=N=>Tn(M)?M.value=N:null),"render-label":et,placeholder:w(e)("categories"),options:w(r),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),me(de,{"x-gap":"12",span:24},{default:Me(()=>[me(Ut,{span:16,label:w(e)("content"),path:"path"},{default:Me(()=>[me(he,null,{default:Me(()=>[me(Ce,{type:"primary",secondary:"",onClick:p[16]||(p[16]=()=>{s.value=!0})},{default:Me(()=>[Fl(Nl(w(e)("select")),1)]),_:1}),me(R,{value:w(_).path?w(Jo)(w(_).path):"",placeholder:w(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),w(_).path?(Dl(),ba(Ro,{key:0},[me(Ce,{type:"primary",ghost:"",onClick:p[17]||(p[17]=()=>{Z.value=w(e)("video"),z.value=w(l)(w(_).path),ye.value="classic",h.value=!0})},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:play"})]),_:1})]),default:Me(()=>[Fl(" "+Nl(w(e)("play")),1)]),_:1}),me(Ce,{type:"primary",ghost:"",onClick:p[18]||(p[18]=()=>{w(_).path=""})},{icon:Me(()=>[me(w(q),null,{default:Me(()=>[me(w(ie),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Fl(" "+Nl(w(e)("clear")),1)]),_:1})],64)):kr("",!0)]),_:1})]),_:1},8,["label"]),me(Ut,{span:8,label:w(e)("displayType"),path:"displayType"},{default:Me(()=>[me(Re,{value:w(_).displayType,"onUpdate:value":p[19]||(p[19]=N=>w(_).displayType=N),placeholder:w(e)("displayType"),options:w(t),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),me(ht,{label:w(e)("thumbnail"),path:"thumbnail"},{default:Me(()=>[va("div",dv,[va("div",{class:"cursor-pointer w-full h-[150px]",onClick:p[20]||(p[20]=()=>{oe.value=!0})},[w(_).thumbnail?(Dl(),jo(tn,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Cc("border: 1px dashed "+w(o)("green","white")),src:w(l)(w(_).thumbnail||"")},null,8,["style","src"])):(Dl(),ba("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Cc("border: 1px dashed "+w(o)("green","white"))},[me(w(q),{size:64},{default:Me(()=>[me(w(ie),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),me(na,{show:w(h),"onUpdate:show":p[23]||(p[23]=N=>Tn(h)?h.value=N:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:w(Z)},{default:Me(()=>[w(ye)==="youtube"?(Dl(),ba("iframe",{key:0,width:"100%",height:"380",src:w(z),frameborder:"0",allowfullscreen:""},null,8,uv)):(Dl(),ba("video",pv,[va("source",{src:w(z)},null,8,mv)]))]),_:1},8,["show","title"]),me(bn,{show:w(s),"onUpdate:show":p[24]||(p[24]=N=>Tn(s)?s.value=N:null),title:w(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:w(fe)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:p[25]||(p[25]=N=>{w(_).path=N,s.value=!1})},null,8,["show","title","upload-config"]),me(bn,{show:w(oe),"onUpdate:show":p[26]||(p[26]=N=>Tn(oe)?oe.value=N:null),title:w(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:w(fe)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:p[27]||(p[27]=N=>{w(_).thumbnail=N,oe.value=!1})},null,8,["show","title","upload-config"])],64)}}}),yv=Kn(gv,[["__scopeId","data-v-a6ddb663"]]),{t:Qe}=Bi.global,Vc=[{key:"maxlength",defaultValue:"",placeholder:Qe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Qe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],hv={text:Vc,textarea:Vc,number:[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Qe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Qe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Qe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"library",defaultValue:"all",placeholder:Qe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Qe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Qe("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Qe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Qe("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Qe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Qe("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Qe("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Qe("sliderStep"),isNumber:!0}]},{t:lt}=Bi.global,mi=[{type:"group",label:lt("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:lt("text"),value:"text"},{label:lt("i18nText"),value:"i18n-text"},{label:lt("textarea"),value:"textarea"},{label:lt("i18nTextarea"),value:"i18n-textarea"},{label:lt("editor"),value:"editor"},{label:lt("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:lt("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:lt("number"),value:"number"},{label:lt("checkbox"),value:"checkbox"},{label:lt("switch"),value:"switch"},{label:lt("slider"),value:"slider"},{label:lt("rangeSlider"),value:"range-slider"}]},{type:"group",label:lt("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:lt("singleSelect"),value:"single-select"},{label:lt("multiSelect"),value:"multi-select"}]},{type:"group",label:lt("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:lt("date"),value:"date"},{label:lt("daterange"),value:"daterange"},{label:lt("datetime"),value:"datetime"},{label:lt("datetimerange"),value:"datetimerange"},{label:lt("year"),value:"year"},{label:lt("yearrange"),value:"yearrange"},{label:lt("month"),value:"month"},{label:lt("monthrange"),value:"monthrange"},{label:lt("quarter"),value:"quarter"},{label:lt("quarterrange"),value:"quarterrange"},{label:lt("week"),value:"week"}]},{type:"group",label:lt("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:lt("image"),value:"image"},{label:lt("gallery"),value:"gallery"},{label:lt("audio"),value:"audio"},{label:lt("video"),value:"video"},{label:lt("document"),value:"document"},{label:lt("file"),value:"file"}]},{type:"group",label:lt("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:lt("newsArticle"),value:"news-article"},{label:lt("newsArticles"),value:"news-articles"},{label:lt("newsCategory"),value:"news-category"},{label:lt("newsCategories"),value:"news-categories"},{label:lt("newsTag"),value:"news-tag"},{label:lt("newsTags"),value:"news-tags"}]},{type:"group",label:lt("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:lt("icon"),value:"icon"},{label:lt("icons"),value:"icons"},{label:lt("color"),value:"color"},{label:lt("gradient"),value:"gradient"}]},{type:"group",label:lt("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:lt("contentItem"),value:"content-model-item"},{label:lt("contentItems"),value:"content-model-items"},{label:lt("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:lt("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:lt("list"),value:"list"},{label:lt("i18nList"),value:"i18n-list"},{label:lt("albums"),value:"albums"}]}],{useModel:bv,mergeModels:kv,defineComponent:wv}=await se("vue"),{renderList:Vs,Fragment:Nn,openBlock:ol,createElementBlock:Ia,unref:Ke,createVNode:ct,withCtx:dt,resolveComponent:Sc,createElementVNode:ra,createBlock:Wa,createCommentVNode:fi,toDisplayString:ia,createTextVNode:$o,normalizeClass:xv,isRef:Ec}=await se("vue"),$v={class:"flex items-center"},Cv={class:"flex items-center justify-between w-full"},Iv={class:"flex items-center justify-between"},Vv={class:"text-base font-semibold ml-4"},Sv={class:"text-xs text-slate-400"},Ev={class:"text-xs text-slate-400"},Uv={class:"text-xs text-slate-400"},Mv={class:"text-xs text-slate-400"},Tv={key:0},Nv={class:"text-xs text-slate-400"},Dv={key:1},zv={class:"text-xs text-slate-400"},Av={key:2},Pv={class:"text-xs text-slate-400"},Lv={key:3},Bv={class:"text-xs text-slate-400"},Fv={key:0,class:"w-full flex items-center"},Ov={class:"w-full flex items-center"},qv={class:"w-full"},Rv={class:"text-sm"},{storeToRefs:jv}=await se("pinia"),{ref:Ko,computed:_i,h:Ss,inject:Es}=await se("vue"),Kv=wv({__name:"Fields",props:kv({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:n}=ke(),{tr:l,formatKey:o,pickByTheme:a}=Ze(),{isLightTheme:t}=jv(To()),{data:r}=oo(),j=u,ae=bv(u,"modelValue"),ce=H=>{for(const f of mi){const T=f.children.find(x=>x.value===H);if(T)return T.label}return null},O=Ko(!1),ge=Ko(null),F=Ko(null),I=Ko(null),d=Ko(),V=(H,f)=>{F.value=I.value=H,ge.value=f;for(const T of mi)T.children.find(k=>k.value===H)&&(d.value=T.key);O.value=!0},le=H=>{i(H).value=!i(H).value},i=H=>_i({get:()=>H.value===F.value,set:f=>{f?F.value=H.value:F.value=null}}),fe=_i(()=>!F.value||F.value===I.value),P=()=>{F.value&&ge.value!==null&&(ae.value[ge.value].type=F.value),O.value=!1},X=H=>Ss("div",{class:"flex items-center"},[Ss(q,{size:21,class:"text-gray-500"},{default:()=>Ss(ie,{icon:H.icon})}),Ss("span",{class:"font-normal ml-2 "},{default:()=>H.label}),Ss("span",{class:"text-gray-500 ml-1"},{default:()=>`(${H.children.length})`})]),E=Es("renderSelectLabel"),S=Es("removeCollectionField"),M=Es("removeSingleton"),L=Es("onCreateItemOption"),D=Es("expandedNames",()=>_i(()=>Ko([]).value));return(H,f)=>{const T=Be,x=Va,k=Zt,A=en,U=$a,K=Ws,Q=ya,Y=ja,C=ro,_=Ka,B=Sc("color-picker"),$e=Br,$=Aa,m=Lr,s=jn,h=Rn,Z=yl,z=Sc("Draggable"),ye=$l,Ne=Vd,oe=Id,ue=mu,$t=Oi,Vt=Xl;return ol(),Ia(Nn,null,[ct(z,{list:ae.value,class:"w-full"},{default:dt(()=>[(ol(!0),Ia(Nn,null,Vs(ae.value,(xe,Ye)=>(ol(),Wa(Z,{key:`field-${Ye}`,size:"small",class:"my-2",hoverable:""},{default:dt(()=>[ct(h,{"expanded-names":Ke(D)(j.type=="collection"?`c-${j.parentItemIndex}-f-${Ye}`:`s-${Ye}`).value,"onUpdate:expandedNames":Ve=>Ke(D)(j.type=="collection"?`c-${j.parentItemIndex}-f-${Ye}`:`s-${Ye}`).value=Ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":dt(({collapsed:Ve})=>[ra("div",$v,[ct(T,{size:"small",type:"error",secondary:"",onClick:()=>{j.type==="collection"?Ke(S)&&Ke(S)(j.collectionKey,Ye):Ke(M)&&Ke(M)(Ye)},title:Ke(e)("delete")},{default:dt(()=>[ct(Ke(q),null,{default:dt(()=>[ct(Ke(ie),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),f[3]||(f[3]=ra("div",{class:"w-4"},null,-1)),ct(Ke(q),null,{default:dt(()=>[Ve?(ol(),Wa(Ke(ie),{key:0,icon:"fa-solid:chevron-left"})):(ol(),Wa(Ke(ie),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:dt(()=>[...f[4]||(f[4]=[ra("span",null,null,-1)])]),default:dt(()=>[ct(s,{name:"1"},{header:dt(()=>[ra("div",Cv,[ra("div",Iv,[ct(Ke(q),{size:"18",class:"cursor-move mr-2"},{default:dt(()=>[ct(Ke(ie),{icon:"fa-solid:grip-lines"})]),_:1}),ct(x,{size:"small",type:"info"},{default:dt(()=>[$o(ia(Ye+1),1)]),_:2},1024),ra("span",Vv,ia(Ke(l)(xe.label)),1)])])]),default:dt(()=>[ct(Q,{span:24,"x-gap":"6"},{default:dt(()=>[ct(A,{span:6},{default:dt(()=>[ra("span",Sv,ia(Ke(e)("fieldKey")),1),ct(k,{value:xe.key,placeholder:Ke(e)("fieldKey"),class:"w-full","onUpdate:value":Ve=>xe.key=Ke(o)(Ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),ct(A,{span:10},{default:dt(()=>[ct(U,{modelValue:xe.label,"onUpdate:modelValue":Ve=>xe.label=Ve,placeholder:Ke(e)("title"),class:"w-full",sync:""},{label:dt(()=>[ra("span",Ev,ia(Ke(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),ct(A,{span:8},{default:dt(()=>[ra("span",Uv,ia(Ke(e)("type")),1),ct(K,null,{default:dt(()=>[ct(k,{value:ce(xe.type),placeholder:Ke(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ve=>V(xe.type,Ye)},null,8,["value","placeholder","onClick"]),ct(T,{secondary:"",onClick:Ve=>V(xe.type,Ye)},{icon:dt(()=>[ct(Ke(ie),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),ct(Y,{class:"!mt-4 !mb-2"}),ct(Q,{span:24,"x-gap":"6"},{default:dt(()=>[ct(A,{span:10,class:"flex items-center"},{default:dt(()=>[ct(C,{checked:xe.required,"onUpdate:checked":Ve=>xe.required=Ve,size:"medium"},{default:dt(()=>[$o(ia(Ke(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),ct(A,{span:14},{default:dt(()=>[["content-model-item","content-model-items"].includes(xe.type)?(ol(),Ia(Nn,{key:0},[ra("span",Mv,ia(Ke(e)("contentModel")),1),ct(_,{value:xe.defaultValue,"onUpdate:value":Ve=>xe.defaultValue=Ve,options:Ke(r),placeholder:Ke(e)("contentModel"),"render-label":Ke(E),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(ol(),Ia(Nn,{key:1},[xe.type==="color"||xe.type==="gradient"?(ol(),Ia("div",Tv,[ra("span",Nv,ia(Ke(e)("defaultValue")),1),ct(B,{"pure-color":xe.defaultValue,"onUpdate:pureColor":Ve=>xe.defaultValue=Ve,"default-pure-color":"#00000000","picker-type":"chrome","use-type":xe.type==="color"?"pure":"gradient",format:xe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Ke(t)?"white":"black",lang:Ke(n)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):xe.type==="i18n-text"?(ol(),Ia("div",Dv,[ct(U,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:dt(()=>[ra("span",zv,ia(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-textarea"?(ol(),Ia("div",Av,[ct(U,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:dt(()=>[ra("span",Pv,ia(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-editor"?(ol(),Ia("div",Lv,[ct(U,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:dt(()=>[ra("span",Bv,ia(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(ol(),Wa(k,{key:4,value:xe.defaultValue,"onUpdate:value":Ve=>xe.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),xe.type==="multi-select"||xe.type==="single-select"?(ol(),Wa(Y,{key:0,"title-placement":"left",class:"!my-4"},{default:dt(()=>[$o(ia(Ke(e)("options")),1)]),_:1})):fi("",!0),ct($,{name:"slide-fade",appear:""},{default:dt(()=>[xe.type==="multi-select"||xe.type==="single-select"?(ol(),Ia("div",Fv,[ct($e,{value:xe.options,"onUpdate:value":Ve=>xe.options=Ve,placeholder:Ke(e)("addOption"),"on-create":Ve=>Ke(L)?Ke(L)(Ve,Ye):null,"show-sort-button":"",class:"w-full"},{"create-button-default":dt(()=>[$o(ia(Ke(e)("addOption")),1)]),default:dt(({value:Ve})=>[ra("div",Ov,[ct(k,{value:Ve.value,placeholder:Ke(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":et=>Ve.value=Ke(o)(et)},null,8,["value","placeholder","onUpdate:value"]),ct(U,{modelValue:Ve.label,"onUpdate:modelValue":et=>Ve.label=et,placeholder:Ke(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):fi("",!0)]),_:2},1024),(ol(!0),Ia(Nn,null,Vs(Ke(hv),(Ve,et,W)=>(ol(),Ia(Nn,{key:W},[xe.type===et?(ol(),Wa(h,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:dt(()=>[ct(Ke(q),{size:"18"},{default:dt(()=>[ct(Ke(ie),{icon:"carbon:chevron-right"})]),_:1})]),default:dt(()=>[ct(s,{name:"1"},{header:dt(()=>[ct(Y,{"title-placement":"left",class:"!my-4"},{default:dt(()=>[$o(ia(Ke(e)("settings")),1)]),_:1})]),default:dt(()=>[ct($,{name:"slide-fade",appear:""},{default:dt(()=>[ra("div",qv,[(ol(!0),Ia(Nn,null,Vs(Ve,b=>(ol(),Wa(Q,{key:b.key,span:24,"x-gap":"12",class:"mb-2"},{default:dt(()=>[ct(A,{span:10},{default:dt(()=>[ct(k,{value:b.key,placeholder:Ke(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),ct(A,{span:14},{default:dt(()=>[b.isNumber?(ol(),Wa(m,{key:0,value:xe.settings[b.key],"onUpdate:value":p=>xe.settings[b.key]=p,"default-value":b.defaultValue?parseInt(b.defaultValue):void 0,placeholder:b.placeholder||Ke(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(ol(),Wa(k,{key:1,value:xe.settings[b.key],"onUpdate:value":p=>xe.settings[b.key]=p,"default-value":b.defaultValue,placeholder:b.placeholder||Ke(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):fi("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),ct(Vt,{show:Ke(O),"onUpdate:show":f[2]||(f[2]=xe=>Ec(O)?O.value=xe:null),preset:"card",size:"medium",style:{width:"650px"},title:Ke(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":dt(()=>[ct(ye,{align:"center"},{default:dt(()=>[ct(T,{secondary:"",size:"small",type:"success",disabled:Ke(fe),onClick:P},{default:dt(()=>[ct(Ke(ie),{icon:"carbon:checkmark",class:"mr-1"}),$o(" "+ia(Ke(e)("select")),1)]),_:1},8,["disabled"]),ct(T,{secondary:"",size:"small",type:"error",onClick:f[0]||(f[0]=xe=>O.value=!1)},{default:dt(()=>[ct(Ke(ie),{icon:"carbon:close",class:"mr-1"}),$o(" "+ia(Ke(e)("close")),1)]),_:1})]),_:1})]),default:dt(()=>[ct($t,{animated:"",type:"line",size:"medium",placement:"left",value:Ke(d),"onUpdate:value":f[1]||(f[1]=xe=>Ec(d)?d.value=xe:null),style:{height:"100%"}},{default:dt(()=>[(ol(!0),Ia(Nn,null,Vs(Ke(mi),(xe,Ye)=>(ol(),Wa(ue,{name:xe.key,tab:X(xe),key:Ye},{default:dt(()=>[ct(oe,{hoverable:"",clickable:"",bordered:""},{default:dt(()=>[(ol(!0),Ia(Nn,null,Vs(xe.children,Ve=>(ol(),Wa(Ne,{class:xv(i(Ve).value?`${Ke(a)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ve.value,onClick:et=>le(Ve)},{suffix:dt(()=>[ct(C,{checked:i(Ve).value,"onUpdate:checked":et=>i(Ve).value=et,size:"medium",onClick:et=>le(Ve)},null,8,["checked","onUpdate:checked","onClick"])]),default:dt(()=>[ra("span",Rv,ia(Ve.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Uc=Kn(Kv,[["__scopeId","data-v-f2dba27a"]]),{useModel:Yv,mergeModels:Gv,defineComponent:Hv}=await se("vue"),{unref:Pe,toDisplayString:ea,openBlock:sl,createElementBlock:Us,createCommentVNode:Yo,createTextVNode:Xa,resolveComponent:zb,withCtx:Je,createVNode:st,createElementVNode:pn,createBlock:Ol,normalizeStyle:vi,isRef:Qv,renderList:Wv,Fragment:Mc,normalizeClass:Xv}=await se("vue"),Jv={class:"text-base"},Zv={key:0},eg={key:0},tg={key:0},lg={class:"flex items-center"},ag={class:"flex items-center justify-between w-full"},ng={class:"text-base font-semibold"},og={class:"text-xs text-slate-400"},sg={class:"text-xs text-slate-400"},rg={class:"text-xs text-slate-400"},{defineAsyncComponent:ig,ref:mn,computed:xr,watch:$r,h:cg,provide:Wn}=await se("vue"),{storeToRefs:dg}=await se("pinia"),Fd=Hv({__name:"index",props:Gv({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=ig(()=>ts(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(s=>s.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:n}=ke(),{tr:l,pickByTheme:o,formatKey:a}=Ze(),{isLightTheme:t}=dg(To());oo();const r=u,j=Yv(u,"show"),ae=Ge(),ce=qe(),O=Wl(),ge=mn(!1),F=mn(null),I=mn({}),d=mn({}),V={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},le=mn(!1),i=mn(!1),fe=mn(!1),P=mn(!1),X=mn({}),E=s=>xr({get:()=>X.value[s]?["1"]:[],set:h=>{X.value[s]=h.length>0}}),S=xr({get:()=>ne.omit(I.value,["index"]),set:s=>{I.value=I.value.index!==void 0?{index:I.value.index,...s}:{...s}}});$r(()=>P.value,s=>{Object.entries(I.value).forEach(([h,Z],z)=>{h!=="index"&&(X.value[`c-${z}`]=s,Z?.items?.forEach((ye,Ne)=>{X.value[`c-${z}-f-${Ne}`]=s}))})}),$r(()=>fe.value,s=>{Object.entries(I.value).forEach(([h,Z],z)=>{h==="index"&&Z?.forEach((ye,Ne)=>{X.value[`s-${Ne}`]=s})})});const M=xr(()=>ne.isEqual(I.value,d.value)),L=()=>{I.value?I.value.index&&Array.isArray(I.value.index)?I.value.index.push(ne.cloneDeep(V)):I.value.index=[ne.cloneDeep(V)]:I.value={index:[ne.cloneDeep(V)]}},D=s=>{I.value&&Array.isArray(I.value.index)&&I.value.index.splice(s,1)},H=()=>{const s=El();I.value?I.value[s]={key:"",title:"",items:[]}:I.value={[s]:{key:"",title:"",items:[]}}},f=s=>{if(I.value){const{[s]:h,...Z}=I.value;I.value=Z}},T=s=>{I.value&&I.value[s].items.push(ne.cloneDeep(V))},x=(s,h)=>{if(I.value){const Z=I.value[s];Z&&Array.isArray(Z.items)&&Z.items.splice(h,1)}},k=s=>s.title&&s.key&&s.key!=="index",A=()=>I.value&&typeof I.value=="object"?Object.keys(I.value).filter(s=>s!=="index").length:0,U=xr(()=>I.value?Object.keys(I.value).filter(s=>s!=="index"):[]),K=s=>U.value.indexOf(s),Q=mn(!1),Y=async()=>{const s=ne.cloneDeep(I.value),h=ne.cloneDeep(I.value);Q.value=!1,ge.value=!0,ae.start();const Z=[];if(ne.forIn(s,(z,ye)=>{ye!=="index"&&Z.push(z.key)}),ne.forIn(s,(z,ye)=>{if(ye!=="index"){const Ne=ne.keys(s).filter(oe=>oe!=="index").indexOf(ye);if(z&&z.key){if(z.key==="index")return ce.error(n("keyIndexIsReservedInCollections")),Q.value=!0,!1;if(Z.filter(ue=>ue==z.key).length>1)return ce.error(n("collectionKeyIsNotUnique",[z.key])),Q.value=!0,!1;if(Array.isArray(z.items))for(const[ue,$t]of z.items.entries())if($t.key){if(z.items.filter(xe=>xe.key===$t.key).length>1)return ce.error(n("fieldKeyOfCollectionIsNotUnique",[$t.key,z.key])),Q.value=!0,!1}else return ce.error(n("fieldKeyOfCollectionIsRequired",[ue+1,z.key])),Q.value=!0,!1}else return ce.error(n("collectionKeyIsRequired",[Ne+1])),Q.value=!0,!1}else if(Array.isArray(z))for(const[Ne,oe]of z.entries())if(oe.key){if(z.filter($t=>$t.key===oe.key).length>1)return ce.error(n("singletonKeyIsNotUnique",[oe.key])),Q.value=!0,!1}else return ce.error(n("singletonKeyIsRequired",[Ne+1])),Q.value=!0,!1}),Q.value){ge.value=!1,ae.finish();return}ne.forIn(h,(z,ye)=>{ye!=="index"&&ye!==z.key&&bd(s,ye,z.key)}),await r.updateDataStructure(s),ge.value=!1,ae.finish()},C=()=>{ne.isEqual(I.value,d.value)?j.value=!1:O.warning({title:n("confirm"),content:n("confirmCloseDataStructure"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{j.value=!1}})};$r(()=>r.rawDataStructure,s=>{I.value=s?ne.cloneDeep(s):{},ne.forIn(s,(h,Z)=>{Z!=="index"?(I.value[Z].key=Z,h?.items?.forEach((z,ye)=>{I.value[Z].items[ye].settings||(I.value[Z].items[ye].settings={})})):h?.forEach((z,ye)=>{I.value[Z][ye].settings||(I.value[Z][ye].settings={})})}),d.value=ne.cloneDeep(I.value)},{immediate:!0,deep:!0});const _=s=>cg("span",{},{default:()=>l(s.title)}),B=(s,h)=>({value:`option_${h+1}${s+1}`,label:""}),{copy:$e,copied:$,isSupported:m}=Nd();return $r(()=>$.value,s=>{s&&ce.success(n("dataStructureCopied"))}),Wn("removeCollectionField",x),Wn("onCreateItemOption",B),Wn("renderSelectLabel",_),Wn("removeSingleton",D),Wn("addSingleton",L),Wn("expandCollections",P),Wn("expandSingletons",fe),Wn("expandedNames",E),(s,h)=>{const Z=ji,z=ie,ye=q,Ne=Be,oe=$l,ue=yl,$t=Ra,Vt=en,xe=Va,Ye=Zt,Ve=$a,et=ya,W=ja,b=qi,p=jn,rt=Rn,Ce=Ai;return sl(),Ol(Ce,{modelValue:j.value,"onUpdate:modelValue":h[13]||(h[13]=nt=>j.value=nt),"close-on-esc":!1,closable:!1,onOnSizeChange:h[14]||(h[14]=nt=>{F.value=nt})},{header:Je(()=>[pn("div",Jv,[st(Z,{depth:"1"},{default:Je(()=>[Xa(ea(Pe(n)("dataStructure"))+" ",1),u.title?(sl(),Us("span",Zv,"Â -Â "+ea(u.title),1)):Yo("",!0)]),_:1})])]),"header-extra":Je(()=>[st(oe,{align:"center"},{default:Je(()=>[st(Ne,{secondary:"",title:Pe(n)("save"),loading:Pe(ge),disabled:Pe(M),onClick:h[0]||(h[0]=nt=>Y())},{icon:Je(()=>[st(ye,null,{default:Je(()=>[st(z,{icon:"carbon:save"})]),_:1})]),default:Je(()=>[Xa(" "+ea(Pe(n)("save")),1)]),_:1},8,["title","loading","disabled"]),st(Ne,{secondary:"",type:"error",title:Pe(n)("close"),disabled:Pe(ge),onClick:h[1]||(h[1]=nt=>C())},{icon:Je(()=>[st(ye,null,{default:Je(()=>[st(z,{icon:"carbon:close"})]),_:1})]),default:Je(()=>[Xa(" "+ea(Pe(n)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Je(()=>[pn("section",{style:vi(`min-height: ${Pe(F)?.windowHeight-Pe(F)?.headerHeight-5}px`),class:Xv(`w-full h-full ${Pe(o)("bg-slate-200","bg-zinc-800")}`)},[st(et,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Je(()=>[st(Vt,{class:"mx-2 mt-2"},{default:Je(()=>[st(ue,{embedded:"",bordered:"",segmented:""},{header:Je(()=>[Xa(ea(Pe(n)("singletons"))+"Â  ",1),Pe(I).index?.length?(sl(),Us("span",eg," ("+ea(Pe(I).index?.length)+") ",1)):Yo("",!0)]),"header-extra":Je(()=>[st(oe,null,{default:Je(()=>[Pe(m)&&Pe(le)?(sl(),Ol(Ne,{key:0,size:"small",type:"warning",secondary:"",title:Pe(n)("copy"),onClick:h[2]||(h[2]=nt=>Pe($e)(JSON.stringify(Pe(I).index)))},{icon:Je(()=>[st(ye,null,{default:Je(()=>[st(z,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Yo("",!0),st(Ne,{size:"small",type:"warning",secondary:"",onClick:h[3]||(h[3]=()=>{le.value=!Pe(le),Pe(le)&&(i.value=!1)})},{default:Je(()=>[st(ye,null,{default:Je(()=>[Pe(le)?(sl(),Ol(z,{key:0,icon:"carbon:code"})):(sl(),Ol(z,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),st(Ne,{size:"small",type:"primary",secondary:"",onClick:h[4]||(h[4]=nt=>fe.value=!Pe(fe))},{default:Je(()=>[st(ye,null,{default:Je(()=>[Pe(fe)?(sl(),Ol(z,{key:0,icon:"carbon:collapse-categories"})):(sl(),Ol(z,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),st(Ne,{size:"small",type:"primary",secondary:"",onClick:h[5]||(h[5]=nt=>L())},{default:Je(()=>[st(ye,{class:"mr-1"},{default:Je(()=>[st(z,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Pe(le)?(sl(),Ol(Pe(e),{key:0,height:Pe(F)?.windowHeight-Pe(F)?.headerHeight-100,"dark-theme":!Pe(t),class:"creopse-json-editor",mode:"tree",json:Pe(I).index,"onUpdate:json":h[6]||(h[6]=nt=>Pe(I).index=nt)},null,8,["height","dark-theme","json"])):(sl(),Ol($t,{key:1,style:vi(`max-height: ${Pe(F)?.windowHeight-Pe(F)?.headerHeight-100}px`)},{default:Je(()=>[st(Uc,{modelValue:Pe(I).index,"onUpdate:modelValue":h[7]||(h[7]=nt=>Pe(I).index=nt),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),st(Vt,{class:"mx-2 mt-2"},{default:Je(()=>[st(ue,{embedded:"",bordered:"",segmented:""},{header:Je(()=>[Xa(ea(Pe(n)("collections"))+"Â  ",1),A()>0?(sl(),Us("span",tg," ("+ea(A())+") ",1)):Yo("",!0)]),"header-extra":Je(()=>[st(oe,null,{default:Je(()=>[Pe(m)&&Pe(i)?(sl(),Ol(Ne,{key:0,size:"small",type:"warning",secondary:"",title:Pe(n)("copy"),onClick:h[8]||(h[8]=nt=>Pe($e)(JSON.stringify(Pe(S))))},{icon:Je(()=>[st(ye,null,{default:Je(()=>[st(z,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Yo("",!0),st(Ne,{size:"small",type:"warning",secondary:"",onClick:h[9]||(h[9]=()=>{i.value=!Pe(i),Pe(i)&&(le.value=!1)})},{default:Je(()=>[st(ye,null,{default:Je(()=>[Pe(i)?(sl(),Ol(z,{key:0,icon:"carbon:code"})):(sl(),Ol(z,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),st(Ne,{size:"small",type:"primary",secondary:"",onClick:h[10]||(h[10]=nt=>P.value=!Pe(P))},{default:Je(()=>[st(ye,null,{default:Je(()=>[Pe(P)?(sl(),Ol(z,{key:0,icon:"carbon:collapse-categories"})):(sl(),Ol(z,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),st(Ne,{size:"small",type:"primary",secondary:"",onClick:h[11]||(h[11]=nt=>H())},{default:Je(()=>[st(ye,{class:"mr-1"},{default:Je(()=>[st(z,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Pe(i)?(sl(),Ol(Pe(e),{key:0,height:Pe(F)?.windowHeight-Pe(F)?.headerHeight-100,"dark-theme":!Pe(t),class:"creopse-json-editor",mode:"tree",json:Pe(S),"onUpdate:json":h[12]||(h[12]=nt=>Qv(S)?S.value=nt:null)},null,8,["height","dark-theme","json"])):(sl(),Ol($t,{key:1,style:vi(`max-height: ${Pe(F)?.windowHeight-Pe(F)?.headerHeight-100}px`)},{default:Je(()=>[(sl(!0),Us(Mc,null,Wv(Pe(I)||{},(nt,ut,R)=>(sl(),Us(Mc,{key:R},[ut!="index"?(sl(),Ol(ue,{key:0,size:"small",class:"my-2",embedded:""},{default:Je(()=>[st(rt,{"expanded-names":E(`c-${R}`).value,"onUpdate:expandedNames":he=>E(`c-${R}`).value=he,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Je(({collapsed:he})=>[pn("div",lg,[st(Ne,{size:"small",type:"error",secondary:"",onClick:pe=>f(ut)},{default:Je(()=>[st(ye,{class:"mr-1"},{default:Je(()=>[st(z,{icon:"carbon:trash-can"})]),_:1}),Xa(" "+ea(Pe(n)("delete")),1)]),_:1},8,["onClick"]),h[15]||(h[15]=pn("div",{class:"w-4"},null,-1)),st(ye,null,{default:Je(()=>[he?(sl(),Ol(z,{key:0,icon:"fa-solid:chevron-left"})):(sl(),Ol(z,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Je(()=>[...h[16]||(h[16]=[pn("span",null,null,-1)])]),default:Je(()=>[st(p,{name:"1"},{header:Je(()=>[pn("div",ag,[st(oe,null,{default:Je(()=>[st(xe,{size:"small",type:"success"},{default:Je(()=>[Xa(ea(K(ut)+1),1)]),_:2},1024),pn("span",ng,ea(Pe(l)(nt.title)),1)]),_:2},1024)])]),default:Je(()=>[st(et,{span:24,"x-gap":"6"},{default:Je(()=>[st(Vt,{span:6},{default:Je(()=>[pn("span",og,ea(Pe(n)("fieldKey")),1),st(Ye,{value:nt.key,placeholder:Pe(n)("collectionKey"),class:"w-full",size:"small","onUpdate:value":he=>nt.key=Pe(a)(he)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),st(Vt,{span:11},{default:Je(()=>[st(Ve,{modelValue:nt.title,"onUpdate:modelValue":he=>nt.title=he,placeholder:Pe(n)("title"),class:"w-full",size:"small",sync:""},{label:Je(()=>[pn("span",sg,ea(Pe(n)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),st(Vt,{span:7},{default:Je(()=>[pn("span",rg,ea(Pe(n)("actions")),1),st(Ne,{block:"",size:"small",type:"primary",disabled:!k(nt),secondary:"",class:"w-full",onClick:he=>T(ut)},{default:Je(()=>[st(ye,{class:"mr-1"},{default:Je(()=>[st(z,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),st(W,{class:"!my-4.75"}),k(nt)?(sl(),Ol(Uc,{key:0,modelValue:Pe(I)[ut].items,"onUpdate:modelValue":he=>Pe(I)[ut].items=he,"parent-item-index":R,"collection-key":ut,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(sl(),Ol(b,{key:1,bordered:"",type:"info"},{default:Je(()=>[Xa(ea(Pe(n)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):Yo("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:ka}=Bi.global,ug=[{label:ka("text"),value:"text"},{label:ka("textarea"),value:"textarea"},{label:ka("number"),value:"number"},{label:ka("switch"),value:"switch"},{label:ka("singleSelect"),value:"single-select"},{label:ka("multiSelect"),value:"multi-select"},{label:ka("slider"),value:"slider"},{label:ka("image"),value:"image"},{label:ka("icon"),value:"icon"},{label:ka("color"),value:"color"},{label:ka("gradient"),value:"gradient"},{label:ka("dimensions"),value:"dimensions"},{label:ka("background"),value:"background"},{label:ka("border"),value:"border"},{label:ka("shadow"),value:"shadow"}],{useModel:pg,mergeModels:mg,defineComponent:fg}=await se("vue"),{unref:je,toDisplayString:fl,openBlock:_l,createElementBlock:Go,createCommentVNode:Ms,createTextVNode:Ua,resolveComponent:Tc,withCtx:Le,createVNode:Oe,createElementVNode:Al,createBlock:ta,isRef:_g,renderList:Nc,Fragment:Dc,normalizeStyle:zc,normalizeClass:vg}=await se("vue"),gg={class:"text-base"},yg={key:0},hg={key:0},bg={class:"flex items-center"},kg={class:"flex items-center justify-between w-full"},wg={class:"text-base font-semibold"},xg={class:"text-xs text-slate-400"},$g={class:"text-xs text-slate-400"},Cg={class:"text-xs text-slate-400"},Ig={class:"flex items-center"},Vg={class:"flex items-center justify-between w-full"},Sg={class:"flex items-center justify-between"},Eg={class:"text-base font-semibold ml-4"},Ug={class:"text-xs text-slate-400"},Mg={class:"text-xs text-slate-400"},Tg={class:"text-xs text-slate-400"},Ng={key:0},Dg={class:"text-xs text-slate-400"},zg={key:0,class:"w-full flex items-center"},Ag={class:"w-full flex items-center"},{defineAsyncComponent:Pg,ref:Xn,computed:gi,watch:yi}=await se("vue"),{storeToRefs:Lg}=await se("pinia"),Bg=fg({__name:"index",props:mg({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=Pg(()=>ts(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(_=>_.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),n=Wl(),l=qe(),o=Ge(),{t:a,locale:t}=ke(),{pickByTheme:r,tr:j,formatKey:ae}=Ze(),{isLightTheme:ce}=Lg(To()),O=u,ge=pg(u,"show"),F=Xn(null),I=Xn(!1),d=Xn({}),V=Xn({}),le={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},i=Xn(!1),fe=Xn(!1),P=Xn({}),X=_=>gi({get:()=>P.value[_]?["1"]:[],set:B=>{P.value[_]=B.length>0}});yi(()=>O.settingsStructure,_=>{d.value=_?ne.cloneDeep(_):{},ne.forIn(_,(B,$e)=>{d.value[$e].key=$e}),V.value=ne.cloneDeep(d.value)},{immediate:!0,deep:!0});const E=gi(()=>ne.isEqual(d.value,V.value)),S=Xn(!1),M=async()=>{const _=ne.cloneDeep(d.value),B=ne.cloneDeep(d.value);S.value=!1,I.value=!0,o.start();const $e=Object.values(_).map($=>$.key);if(ne.forIn(_,($,m)=>{const s=ne.keys(_).indexOf(m);if($&&$.key){if($e.filter(Z=>Z==$.key).length>1)return l.error(a("groupKeyIsNotUnique",[$.key])),S.value=!0,!1;if(Array.isArray($.items))for(const[Z,z]of $.items.entries())if(z.key){if($.items.filter(Ne=>Ne.key===z.key).length>1)return l.error(a("fieldKeyOfGroupIsNotUnique",[z.key,$.key])),S.value=!0,!1}else return l.error(a("fieldKeyOfGroupIsRequired",[Z+1,$.key])),S.value=!0,!1}else return l.error(a("groupKeyIsRequired",[s+1])),S.value=!0,!1}),S.value){I.value=!1,o.finish();return}ne.forIn(B,($,m)=>{m!==$.key&&bd(_,m,$.key)}),await O.updateSettingsStructure(_),I.value=!1,o.finish()},L=()=>{ne.isEqual(d.value,V.value)?ge.value=!1:n.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{ge.value=!1}})},D=()=>d.value&&typeof d.value=="object"?Object.keys(d.value).length:0,H=gi(()=>d.value?Object.keys(d.value):[]),f=_=>H.value.indexOf(_),T=()=>{const _=El();d.value?d.value[_]={key:"",title:"",items:[]}:d.value={[_]:{key:"",title:"",items:[]}}},x=_=>{if(d.value){const{[_]:B,...$e}=d.value;d.value=$e}},k=_=>{d.value&&d.value[_].items.push(ne.cloneDeep(le))},A=(_,B)=>{if(d.value){const $e=d.value[_];$e&&Array.isArray($e.items)&&$e.items.splice(B,1)}},U=_=>_.title&&_.key,K=(_,B)=>({value:`option_${B+1}${_+1}`,label:""});yi(()=>fe.value,_=>{Object.entries(d.value).forEach(([B,$e],$)=>{P.value[`c-${$}`]=_,$e?.items?.forEach((m,s)=>{P.value[`c-${$}-f-${s}`]=_})})});const{copy:Q,copied:Y,isSupported:C}=Nd();return yi(()=>Y.value,_=>{_&&l.success(a("settingsStructureCopied"))}),(_,B)=>{const $e=ji,$=ie,m=q,s=Be,h=$l,Z=en,z=yl,ye=Va,Ne=Zt,oe=$a,ue=ya,$t=ja,Vt=Ka,xe=ro,Ye=Tc("color-picker"),Ve=Br,et=Aa,W=jn,b=Rn,p=Tc("Draggable"),rt=qi,Ce=Ra,nt=Ai;return _l(),ta(nt,{modelValue:ge.value,"onUpdate:modelValue":B[7]||(B[7]=ut=>ge.value=ut),"close-on-esc":!1,closable:!1,onOnSizeChange:B[8]||(B[8]=ut=>{F.value=ut})},{header:Le(()=>[Al("div",gg,[Oe($e,{depth:"1"},{default:Le(()=>[Ua(fl(je(a)("sectionSettings"))+" ",1),u.title?(_l(),Go("span",yg,"Â -Â "+fl(u.title),1)):Ms("",!0)]),_:1})])]),"header-extra":Le(()=>[Oe(h,{align:"center"},{default:Le(()=>[Oe(s,{secondary:"",title:je(a)("save"),loading:je(I),disabled:je(E),onClick:B[0]||(B[0]=ut=>M())},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:save"})]),_:1})]),default:Le(()=>[Ua(" "+fl(je(a)("save")),1)]),_:1},8,["title","loading","disabled"]),Oe(s,{secondary:"",type:"error",title:je(a)("close"),disabled:je(I),onClick:B[1]||(B[1]=ut=>L())},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:close"})]),_:1})]),default:Le(()=>[Ua(" "+fl(je(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Le(()=>[Al("section",{style:zc(`min-height: ${je(F)?.windowHeight-je(F)?.headerHeight-5}px`),class:vg(`w-full h-full ${je(r)("bg-slate-200","bg-zinc-800")}`)},[Oe(ue,{cols:"4","item-responsive":"",responsive:"screen"},{default:Le(()=>[Oe(Z,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Oe(Z,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:Le(()=>[Oe(z,{embedded:"",bordered:"",segmented:""},{header:Le(()=>[Ua(fl(je(a)("groups"))+"Â  ",1),D()>0?(_l(),Go("span",hg," ("+fl(D())+") ",1)):Ms("",!0)]),"header-extra":Le(()=>[Oe(h,null,{default:Le(()=>[je(C)&&je(i)?(_l(),ta(s,{key:0,size:"small",type:"warning",secondary:"",title:je(a)("copy"),onClick:B[2]||(B[2]=ut=>je(Q)(JSON.stringify(je(d))))},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Ms("",!0),Oe(s,{size:"small",type:"warning",secondary:"",onClick:B[3]||(B[3]=()=>{i.value=!je(i)})},{default:Le(()=>[Oe(m,null,{default:Le(()=>[je(i)?(_l(),ta($,{key:0,icon:"carbon:code"})):(_l(),ta($,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Oe(s,{size:"small",type:"primary",secondary:"",onClick:B[4]||(B[4]=ut=>fe.value=!je(fe))},{default:Le(()=>[Oe(m,null,{default:Le(()=>[je(fe)?(_l(),ta($,{key:0,icon:"carbon:collapse-categories"})):(_l(),ta($,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Oe(s,{size:"small",type:"primary",secondary:"",onClick:B[5]||(B[5]=ut=>T())},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:add-alt"})]),_:1}),Ua(" "+fl(je(a)("addGroup")),1)]),_:1})]),_:1})]),_:1}),je(i)?(_l(),ta(je(e),{key:0,height:je(F)?.windowHeight-je(F)?.headerHeight-100,"dark-theme":!je(ce),class:"creopse-json-editor",mode:"tree",json:je(d),"onUpdate:json":B[6]||(B[6]=ut=>_g(d)?d.value=ut:null)},null,8,["height","dark-theme","json"])):(_l(),ta(Ce,{key:1,style:zc(`max-height: ${je(F)?.windowHeight-je(F)?.headerHeight-100}px`)},{default:Le(()=>[(_l(!0),Go(Dc,null,Nc(je(d)||{},(ut,R,he)=>(_l(),ta(z,{key:he,size:"small",class:"my-2",embedded:""},{default:Le(()=>[Oe(b,{"expanded-names":X(`c-${he}`).value,"onUpdate:expandedNames":pe=>X(`c-${he}`).value=pe,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Le(({collapsed:pe})=>[Al("div",bg,[Oe(s,{size:"small",type:"error",secondary:"",onClick:Ee=>x(R)},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:trash-can"})]),_:1}),Ua(" "+fl(je(a)("delete")),1)]),_:1},8,["onClick"]),B[9]||(B[9]=Al("div",{class:"w-4"},null,-1)),Oe(m,null,{default:Le(()=>[pe?(_l(),ta($,{key:0,icon:"fa-solid:chevron-left"})):(_l(),ta($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Le(()=>[...B[10]||(B[10]=[Al("span",null,null,-1)])]),default:Le(()=>[Oe(W,{name:"1"},{header:Le(()=>[Al("div",kg,[Oe(h,null,{default:Le(()=>[Oe(ye,{size:"small",type:"success"},{default:Le(()=>[Ua(fl(f(R)+1),1)]),_:2},1024),Al("span",wg,fl(je(j)(ut.title)),1)]),_:2},1024)])]),default:Le(()=>[Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(Z,{span:6},{default:Le(()=>[Al("span",xg,fl(je(a)("fieldKey")),1),Oe(Ne,{value:ut.key,placeholder:je(a)("groupKey"),class:"w-full",size:"small","onUpdate:value":pe=>ut.key=je(ae)(pe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Oe(Z,{span:11},{default:Le(()=>[Oe(oe,{modelValue:ut.title,"onUpdate:modelValue":pe=>ut.title=pe,placeholder:je(a)("title"),class:"w-full",size:"small",sync:""},{label:Le(()=>[Al("span",$g,fl(je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Oe(Z,{span:7},{default:Le(()=>[Al("span",Cg,fl(je(a)("actions")),1),Oe(s,{block:"",size:"small",type:"primary",disabled:!U(ut),secondary:"",class:"w-full",onClick:pe=>k(R)},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:add-alt"})]),_:1}),Ua(" "+fl(je(a)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Oe($t,{class:"!my-4.75"}),U(ut)?(_l(),ta(p,{key:0,list:je(d)[R].items,class:"w-full"},{default:Le(()=>[(_l(!0),Go(Dc,null,Nc(je(d)[R].items,(pe,Ee)=>(_l(),ta(z,{key:`field-${Ee}`,size:"small",class:"my-2",hoverable:""},{default:Le(()=>[Oe(b,{"expanded-names":X(`c-${R}-f-${Ee}`).value,"onUpdate:expandedNames":at=>X(`c-${R}-f-${Ee}`).value=at,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":Le(({collapsed:at})=>[Al("div",Ig,[Oe(s,{size:"small",type:"error",secondary:"",onClick:()=>{A(R,Ee)},title:je(a)("delete")},{default:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),B[11]||(B[11]=Al("div",{class:"w-4"},null,-1)),Oe(m,null,{default:Le(()=>[at?(_l(),ta($,{key:0,icon:"fa-solid:chevron-left"})):(_l(),ta($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Le(()=>[...B[12]||(B[12]=[Al("span",null,null,-1)])]),default:Le(()=>[Oe(W,{name:"1"},{header:Le(()=>[Al("div",Vg,[Al("div",Sg,[Oe(m,{size:"18",class:"cursor-move mr-2"},{default:Le(()=>[Oe($,{icon:"fa-solid:grip-lines"})]),_:1}),Oe(ye,{size:"small",type:"info"},{default:Le(()=>[Ua(fl(Ee+1),1)]),_:2},1024),Al("span",Eg,fl(je(j)(pe.label)),1)])])]),default:Le(()=>[Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(Z,{span:6},{default:Le(()=>[Al("span",Ug,fl(je(a)("fieldKey")),1),Oe(Ne,{value:pe.key,placeholder:je(a)("fieldKey"),class:"w-full","onUpdate:value":at=>pe.key=je(ae)(at)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Oe(Z,{span:10},{default:Le(()=>[Oe(oe,{modelValue:pe.label,"onUpdate:modelValue":at=>pe.label=at,placeholder:je(a)("title"),class:"w-full",sync:""},{label:Le(()=>[Al("span",Mg,fl(je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Oe(Z,{span:8},{default:Le(()=>[Al("span",Tg,fl(je(a)("type")),1),Oe(Vt,{value:pe.type,"onUpdate:value":at=>pe.type=at,options:je(ug),placeholder:je(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Oe($t,{class:"!mt-4 !mb-2"}),Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(Z,{span:10,class:"flex items-center"},{default:Le(()=>[Oe(xe,{checked:pe.required,"onUpdate:checked":at=>pe.required=at,size:"medium"},{default:Le(()=>[Ua(fl(je(a)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),Oe(Z,{span:14},{default:Le(()=>[pe.type==="color"||pe.type==="gradient"?(_l(),Go("div",Ng,[Al("span",Dg,fl(je(a)("defaultValue")),1),Oe(Ye,{"pure-color":pe.defaultValue,"onUpdate:pureColor":at=>pe.defaultValue=at,"default-pure-color":"#00000000","picker-type":"chrome","use-type":pe.type==="color"?"pure":"gradient",format:pe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:je(ce)?"white":"black",lang:je(t)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(_l(),ta(Ne,{key:1,value:pe.defaultValue,"onUpdate:value":at=>pe.defaultValue=at,placeholder:je(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),pe.type==="multi-select"||pe.type==="single-select"?(_l(),ta($t,{key:0,"title-placement":"left",class:"!my-4"},{default:Le(()=>[Ua(fl(je(a)("options")),1)]),_:1})):Ms("",!0),Oe(et,{name:"slide-fade",appear:""},{default:Le(()=>[pe.type==="multi-select"||pe.type==="single-select"?(_l(),Go("div",zg,[Oe(Ve,{value:pe.options,"onUpdate:value":at=>pe.options=at,placeholder:je(a)("addOption"),"on-create":at=>K?K(at,Ee):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Le(()=>[Ua(fl(je(a)("addOption")),1)]),default:Le(({value:at})=>[Al("div",Ag,[Oe(Ne,{value:at.value,placeholder:je(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Ul=>at.value=je(ae)(Ul)},null,8,["value","placeholder","onUpdate:value"]),Oe(oe,{modelValue:at.label,"onUpdate:modelValue":Ul=>at.label=Ul,placeholder:je(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):Ms("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(_l(),ta(rt,{key:1,bordered:"",type:"info"},{default:Le(()=>[Ua(fl(je(a)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Oe(Z,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),Fg=Kn(Bg,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:Og}=await se("vue"),{unref:yt,renderList:Ac,Fragment:Ts,openBlock:fn,createElementBlock:Ns,resolveComponent:Ab,createBlock:Ds,createCommentVNode:Pc,withCtx:xl,createVNode:vl,createElementVNode:zs,toDisplayString:Co,createTextVNode:As,withModifiers:hi,normalizeClass:Lc,isRef:Cr}=await se("vue"),qg={class:"flex items-center"},Rg={class:"text-base"},jg={class:"mt-2"},{ref:_n}=await se("vue"),Kg=Og({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,isInDevMode:o}=Ze(),{data:a}=Pi(),{mutate:t,isPending:r}=um(),{mutate:j,isPending:ae}=Bd(),ce=_n(24),O=_n(1),ge=T=>{ce.value=T},F={name:"",title:"",content:"",slug:""},I=_n(!1),d=_n(null),V=_n(F),le={title:[{required:!0,message:e("fillRequired")}]},i=_n(null),fe=T=>{i.value=ne.cloneDeep(T),V.value=ne.cloneDeep(T||F),I.value=!0},P=async()=>(d.value?.validate(async T=>{if(!T){const x={title:V.value.title};i.value?j({slug:i.value.slug,...x},{onSuccess:()=>{}}):t({name:ne.startCase(ne.camelCase(n(V.value.title))).replace(/\s+/g,""),...x},{onSuccess:()=>{}}),I.value=!1}}),!1),X=_n(null),E=_n(!1),S=T=>{X.value=T,E.value=!0},M=async T=>{j({slug:X.value?.slug,dataStructure:T},{onSuccess:x=>{S(x)}})},L=_n(null),D=_n(!1),H=T=>{L.value=T,D.value=!0},f=async T=>{j({slug:L.value?.slug,settingsStructure:T},{onSuccess:x=>{H(x)}})};return(T,x)=>{const k=ie,A=q,U=Be,K=$l,Q=ja,Y=Va,C=jn,_=Rn,B=yl,$e=No,$=Pa,m=$a,s=ha,h=ga,Z=Xl;return fn(),Ns(Ts,null,[yt(a)&&yt(a).length?(fn(),Ns(Ts,{key:0},[(fn(!0),Ns(Ts,null,Ac(yt(a).slice((yt(O)-1)*yt(ce),yt(O)*yt(ce)),z=>(fn(),Ds(B,{key:z.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:xl(()=>[vl(_,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":xl(({collapsed:ye})=>[vl(A,null,{default:xl(()=>[ye?(fn(),Ds(k,{key:0,icon:"fa-solid:chevron-left"})):(fn(),Ds(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:xl(()=>[...x[6]||(x[6]=[zs("span",null,null,-1)])]),default:xl(()=>[vl(C,{name:"1"},{header:xl(()=>[zs("div",qg,[vl(K,null,{default:xl(()=>[yt(o)?(fn(),Ns(Ts,{key:0},[vl(U,{size:"small",type:"primary",secondary:"",onClick:hi(ye=>S(z),["stop"])},{default:xl(()=>[vl(A,{class:"mr-1"},{default:xl(()=>[vl(k,{icon:"carbon:data-1"})]),_:1}),As(" "+Co(yt(e)("dataStructure")),1)]),_:1},8,["onClick"]),vl(U,{size:"small",type:"info",secondary:"",title:yt(e)("sectionSettings"),onClick:hi(ye=>H(z),["stop"])},{default:xl(()=>[vl(A,{class:"mr-1"},{default:xl(()=>[vl(k,{icon:"carbon:settings-edit"})]),_:1}),As(" "+Co(yt(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Pc("",!0),vl(U,{size:"small",type:"primary",secondary:"",title:yt(e)("edit"),onClick:hi(ye=>fe(z),["stop"])},{default:xl(()=>[vl(A,null,{default:xl(()=>[vl(k,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),vl(Q,{vertical:"",class:Lc(yt(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),zs("span",Rg,Co(yt(n)(z.title)),1)])]),default:xl(()=>[zs("div",null,Co(yt(e)("sectionUsedXTimesOnPages",[z.pagesCount])),1),zs("section",jg,[(fn(!0),Ns(Ts,null,Ac(yt(au)(z.pages||[],"id"),ye=>(fn(),Ds(Y,{key:ye.id,size:"small",class:"mr-1",type:"success"},{default:xl(()=>[As(Co(yt(n)(ye.title)),1)]),_:2},1024))),128))]),Pc("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),vl($e,{page:yt(O),"onUpdate:page":x[0]||(x[0]=z=>Cr(O)?O.value=z:null),class:"mt-5 justify-end","show-size-picker":"","page-size":yt(ce),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(yt(a).length/yt(ce)),"onUpdate:pageSize":ge},{prefix:xl(()=>[As(Co(`${yt(a).length} ${yt(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(fn(),Ds(B,{key:1,size:"large",class:Lc(`mb-2 !border-dashed !border-2 ${yt(l)("!border-zinc-300","!border-zinc-600")}`)},{default:xl(()=>[vl($,{description:yt(e)("noSectionAvailable")},{icon:xl(()=>[vl(A,null,{default:xl(()=>[vl(k,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),vl(Z,{show:yt(I),"onUpdate:show":x[2]||(x[2]=z=>Cr(I)?I.value=z:null),loading:yt(r)||yt(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:yt(i)?yt(e)("editSection"):yt(e)("addSection"),"positive-text":yt(e)("validate"),"negative-text":yt(e)("cancel"),onPositiveClick:P,onNegativeClick:x[3]||(x[3]=z=>I.value=!1)},{default:xl(()=>[vl(h,{ref_key:"formRef",ref:d,model:yt(V),rules:le,"show-require-mark":!1,size:"medium"},{default:xl(()=>[vl(s,{"show-label":!1,path:"title",class:"mt-5"},{default:xl(()=>[vl(m,{modelValue:yt(V).title,"onUpdate:modelValue":x[1]||(x[1]=z=>yt(V).title=z),placeholder:yt(e)("title"),class:"w-full",sync:""},{label:xl(()=>[As(Co(yt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),vl(Fd,{show:yt(E),"onUpdate:show":x[4]||(x[4]=z=>Cr(E)?E.value=z:null),title:yt(n)(yt(X)?.title),"raw-data-structure":yt(X)?.dataStructure,"update-data-structure":M},null,8,["show","title","raw-data-structure"]),vl(Fg,{show:yt(D),"onUpdate:show":x[5]||(x[5]=z=>Cr(D)?D.value=z:null),title:yt(n)(yt(L)?.title),"settings-structure":yt(L)?.settingsStructure,"update-settings-structure":f},null,8,["show","title","settings-structure"])],64)}}}),Od=(u,e)=>Qs(["newsletter-emails"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/emails"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),qd=(u,e)=>Qs(["newsletter-phones"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/phones"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Yg=(u,e)=>Qs(["newsletter-campaigns"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/campaigns"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u});class Gg{id;email;createdAt;updatedAt;constructor(e,n,l,o){this.email=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const Hg=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-emails"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/newsletter/emails",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Qg=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-emails"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/newsletter/emails/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Wg=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["newsletter-emails"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/emails/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Xg=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["newsletter-emails"],operation:"batch",getItemId:a=>{if(a instanceof Gg){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterEmail ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/emails/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Jg=()=>{const{request:u}=Fe();return za(async e=>{const n=await u({method:"post",url:"/newsletter/emails",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Zg}=await se("vue"),{unref:ft,createVNode:Ot,withCtx:qt,toDisplayString:Jn,createTextVNode:Io,resolveComponent:Pb,createElementVNode:Bc,openBlock:bi,createBlock:Fc,createCommentVNode:ey,isRef:Oc,Fragment:ty,createElementBlock:ly}=await se("vue"),ay={class:"flex items-center justify-center"},{ref:vn,h:wa,computed:ny,onBeforeUnmount:oy}=await se("vue"),sy=Zg({__name:"Email",setup(u){const e=Ge(),n=qe(),l=Wl(),{data:o,refetch:a,isPending:t}=Od(),{mutate:r,isPending:j}=Xg(),{mutate:ae}=Wg(),{mutate:ce,isPending:O}=Hg(),{mutate:ge,isPending:F}=Qg(),{mutateAsync:I}=Jg(),{t:d,locale:V}=ke(),le=vn(""),i=vn(),fe={pageSize:12,prefix:({itemCount:s})=>wa("div",{class:"font-bold"},{default:()=>`${d("total")}: ${s}`})},P=[{type:"selection"},{title:d("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return wa("div",{},{default:()=>s.email})}},{title:d("updateAt"),key:"updatedAt",width:125,render(s){return wa("div",{},{default:()=>On(s.updatedAt,{locale:V.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(s){return wa("div",{},{default:()=>On(s.createdAt,{locale:V.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>wa(Zt,{ref:i,placeholder:d("search"),value:le.value,onInput:s=>{le.value=s}},{suffix:()=>wa(q,{},{default:()=>wa(ie,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return wa("div",{class:"flex justify-end items-center w-full"},[wa(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{f(s)},renderIcon:()=>wa(q,null,{default:()=>wa(ie,{icon:"carbon:edit"})})}),wa("div",{class:"w-2"}),wa(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeleteEmailAddress"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{s.id&&ae({id:s.id})}})},renderIcon:()=>wa(q,null,{default:()=>wa(ie,{icon:"carbon:trash-can"})})})])},fixed:"right"}],X=ny(()=>{if(!le.value)return o.value;const s=o.value?.filter(h=>h.email.toLowerCase().includes(le.value.toLowerCase()));return i.value&&i.value.focus(),s}),E=vn(!1),S=vn(!1),M=vn(null),L=vn(null),D=vn({email:""}),H={email:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(s,h){return h&&!Zo.isEmail(h)?new Error(d("invalidEmail")):!0}}]},f=s=>{M.value=ne.cloneDeep(s),s?D.value=ne.cloneDeep(s):D.value={email:""},S.value=!0},T=async()=>(L.value?.validate(async s=>{if(!s){const h={email:D.value.email};M.value?M.value.email!==D.value.email&&(o.value||[]).findIndex(Z=>Z.email==D.value.email)>-1?n.error(d("sameEmailAddressMessage")):ge({id:M.value.id,...h}):(o.value||[]).findIndex(Z=>Z.email==D.value.email)>-1?n.error(d("sameEmailAddressMessage")):ce(h),S.value=!1}}),!1);let x=null;const k=()=>{x&&(x.destroy(),x=null)};oy(k);const A=(s,h)=>h.map(Z=>s.map(z=>Z[z])),U=()=>{x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var h=["no","email","createdAt","updatedAt"];const Z=ne.sortBy(o.value?.map((ye,Ne)=>({no:Ne+1,...ye})),"email"),z=A(h,Z);try{s.export_json_to_excel({header:h,data:z,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),n.error(d("anErrorOccurred"))}})},K=()=>{x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var h=["email"];const Z=A(h,[{email:"adresse@email.com"}]);try{s.export_json_to_excel({header:h,data:Z,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),n.error(d("anErrorOccurred"))}})},Q=vn(!1),Y=async({results:s})=>{E.value=!0,e.start(),x||(x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let h=0;h<s.length;h++)s[h].email&&o.value?.findIndex(Z=>Z.email==s[h].email)==-1&&(x&&(x.content=`${d("pleaseBePatient")}: ${h} ${d("task_s")} / ${s.length}`),await I({email:s[h].email}));await a(),k(),e.finish(),E.value=!1,Q.value=!1},C=vn(El()),_=vn([]),B=s=>s.id,$e=s=>{_.value=s},$=()=>{_.value=[],C.value=El()},m=async()=>(_.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[_.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{r(_.value,{onSuccess:()=>{$()}})}}):n.warning(d("noItemSelected")),!1);return(s,h)=>{const Z=Sd,z=$l,ye=Da,Ne=yl,oe=Aa,ue=Pr,$t=Dr,Vt=ha,xe=ga,Ye=Xl,Ve=Dd;return bi(),ly(ty,null,[Ot(ye,{to:"#alt-action"},{default:qt(()=>[Ot(z,null,{default:qt(()=>[Ot(Z,{onPositiveClick:h[0]||(h[0]=et=>U())},{trigger:qt(()=>[Ot(ft(Be),{type:"success",secondary:""},{icon:qt(()=>[Ot(ft(q),{size:"18"},{default:qt(()=>[Ot(ft(ie),{icon:"carbon:upload"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("export")),1)]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("exportDataInExcelFile")),1)]),_:1}),Ot(ft(Be),{type:"info",secondary:"",onClick:h[1]||(h[1]=et=>Q.value=!0)},{icon:qt(()=>[Ot(ft(q),{size:"18"},{default:qt(()=>[Ot(ft(ie),{icon:"carbon:download"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("import")),1)]),_:1}),Ot(ft(Be),{type:"primary",secondary:"",onClick:h[2]||(h[2]=et=>f(null))},{icon:qt(()=>[Ot(ft(q),{size:"18"},{default:qt(()=>[Ot(ft(ie),{icon:"carbon:add-alt"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),Ot(oe,{name:"slide-fade",appear:""},{default:qt(()=>[ft(_).length?(bi(),Fc(Ne,{key:0,class:"my-2",size:"small",embedded:""},{default:qt(()=>[Ot(z,{align:"center",justify:"space-between"},{default:qt(()=>[Bc("span",null,Jn(ft(d)("nbItemsSelected",[ft(_).length])),1),Ot(z,{align:"center",justify:"space-between"},{default:qt(()=>[Ot(ft(Be),{type:"error",size:"small",secondary:"",onClick:m},{icon:qt(()=>[Ot(ft(q),null,{default:qt(()=>[Ot(ft(ie),{icon:"carbon:trash-can"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("delete")),1)]),_:1}),Ot(ft(Be),{type:"warning",size:"small",secondary:"",onClick:$},{icon:qt(()=>[Ot(ft(q),null,{default:qt(()=>[Ot(ft(ie),{icon:"carbon:close"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):ey("",!0)]),_:1}),Ot($t,null,{default:qt(()=>[(bi(),Fc(ue,{key:ft(C),columns:P,data:ft(X),pagination:fe,loading:ft(t)||ft(j),"single-line":!1,"scroll-x":800,"row-key":B,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),Ot(Ye,{show:ft(S),"onUpdate:show":h[4]||(h[4]=et=>Oc(S)?S.value=et:null),loading:ft(O)||ft(F),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:ft(M)?ft(d)("editEmailAddress"):ft(d)("addEmailAddress"),"positive-text":ft(d)("validate"),"negative-text":ft(d)("cancel"),onPositiveClick:T,onNegativeClick:h[5]||(h[5]=et=>S.value=!1)},{default:qt(()=>[Ot(xe,{ref_key:"formRef",ref:L,class:"mt-5",model:ft(D),rules:H,"show-require-mark":!1,size:"medium"},{default:qt(()=>[Ot(Vt,{label:ft(d)("emailAddress"),path:"email"},{default:qt(()=>[Ot(ft(Zt),{value:ft(D).email,"onUpdate:value":h[3]||(h[3]=et=>ft(D).email=et),placeholder:ft(d)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ot(Ye,{show:ft(Q),"onUpdate:show":h[7]||(h[7]=et=>Oc(Q)?Q.value=et:null),loading:ft(E),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:ft(d)("import")},{default:qt(()=>[Ot(Ve,{class:"my-5","on-success":Y}),Bc("div",ay,[Ot(ft(Be),{type:"info",size:"small",secondary:"",onClick:h[6]||(h[6]=et=>K())},{icon:qt(()=>[Ot(ft(q),null,{default:qt(()=>[Ot(ft(ie),{icon:"carbon:download"})]),_:1})]),default:qt(()=>[Io(" "+Jn(ft(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class ry{id;phone;createdAt;updatedAt;constructor(e,n,l,o){this.phone=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const iy=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-phones"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/newsletter/phones",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},cy=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-phones"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/newsletter/phones/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},dy=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["newsletter-phones"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/phones/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},uy=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return _t({queryKey:["newsletter-phones"],operation:"batch",getItemId:a=>{if(a instanceof ry){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterPhone ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/phones/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},py=()=>{const{request:u}=Fe();return za(async e=>{const n=await u({method:"post",url:"/newsletter/phones",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:my}=await se("vue"),{unref:gt,createVNode:Rt,withCtx:jt,toDisplayString:Zn,createTextVNode:Vo,resolveComponent:Lb,createElementVNode:qc,openBlock:ki,createBlock:Rc,createCommentVNode:fy,isRef:jc,Fragment:_y,createElementBlock:vy}=await se("vue"),gy={class:"flex items-center justify-center"},{ref:gn,h:xa,computed:yy,onBeforeUnmount:hy}=await se("vue"),by=my({__name:"Phone",setup(u){const e=Ge(),n=qe(),l=Wl(),{data:o,refetch:a,isPending:t}=qd(),{mutate:r,isPending:j}=uy(),{mutate:ae}=dy(),{mutate:ce,isPending:O}=iy(),{mutate:ge,isPending:F}=cy(),{mutateAsync:I}=py(),{t:d,locale:V}=ke(),le=gn(""),i=gn(),fe={pageSize:12,prefix:({itemCount:s})=>xa("div",{class:"font-bold"},{default:()=>`${d("total")}: ${s}`})},P=[{type:"selection"},{title:d("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return xa("div",{},{default:()=>s.phone})}},{title:d("updateAt"),key:"updatedAt",width:125,render(s){return xa("div",{},{default:()=>On(s.updatedAt,{locale:V.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(s){return xa("div",{},{default:()=>On(s.createdAt,{locale:V.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>xa(Zt,{ref:i,placeholder:d("search"),value:le.value,onInput:s=>{le.value=s}},{suffix:()=>xa(q,{},{default:()=>xa(ie,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return xa("div",{class:"flex justify-end items-center w-full"},[xa(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{f(s)},renderIcon:()=>xa(q,null,{default:()=>xa(ie,{icon:"carbon:edit"})})}),xa("div",{class:"w-2"}),xa(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeletePhoneNumber"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{s.id&&ae({id:s.id})}})},renderIcon:()=>xa(q,null,{default:()=>xa(ie,{icon:"carbon:trash-can"})})})])},fixed:"right"}],X=yy(()=>{if(!le.value)return o.value;const s=o.value?.filter(h=>h.phone.toLowerCase().includes(le.value.toLowerCase()));return i.value&&i.value.focus(),s}),E=gn(!1),S=gn(!1),M=gn(null),L=gn(null),D=gn({phone:""}),H={phone:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(s,h){return h&&!$u(h)?new Error(d("invalidNumber")):!0}}]},f=s=>{M.value=ne.cloneDeep(s),s?D.value=ne.cloneDeep(s):D.value={phone:""},S.value=!0},T=async()=>(L.value?.validate(async s=>{if(!s){const h={phone:D.value.phone.replace(/\s+/g,"")};M.value?M.value.phone!==D.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(Z=>Z.phone==D.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):ge({id:M.value.id,...h}):(o.value||[]).findIndex(Z=>Z.phone==D.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):ce(h),S.value=!1}}),!1);let x=null;const k=()=>{x&&(x.destroy(),x=null)};hy(k);const A=(s,h)=>h.map(Z=>s.map(z=>Z[z])),U=()=>{x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var h=["no","phone","createdAt","updatedAt"];const Z=ne.sortBy(o.value?.map((ye,Ne)=>({no:Ne+1,...ye})),"phone"),z=A(h,Z);try{s.export_json_to_excel({header:h,data:z,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),n.error(d("anErrorOccurred"))}})},K=()=>{x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var h=["phone"];const Z=A(h,[{phone:"+XXX XXX XXXXX"}]);try{s.export_json_to_excel({header:h,data:Z,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),n.error(d("anErrorOccurred"))}})},Q=gn(!1),Y=async({results:s})=>{E.value=!0,e.start(),x||(x=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let h=0;h<s.length;h++)s[h].phone&&o.value?.findIndex(Z=>Z.phone.replace(/\s+/g,"")==s[h].phone.replace(/\s+/g,""))==-1&&(x&&(x.content=`${d("pleaseBePatient")}: ${h} ${d("task_s")} / ${s.length}`),await I({phone:s[h].phone.replace(/\s+/g,"")}));await a(),k(),e.finish(),E.value=!1,Q.value=!1},C=gn(El()),_=gn([]),B=s=>s.id,$e=s=>{_.value=s},$=()=>{_.value=[],C.value=El()},m=async()=>(_.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[_.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{r(_.value,{onSuccess:()=>{$()}})}}):n.warning(d("noItemSelected")),!1);return(s,h)=>{const Z=Sd,z=$l,ye=Da,Ne=yl,oe=Aa,ue=Pr,$t=Dr,Vt=xu,xe=ha,Ye=ga,Ve=Xl,et=Dd;return ki(),vy(_y,null,[Rt(ye,{to:"#alt-action"},{default:jt(()=>[Rt(z,null,{default:jt(()=>[Rt(Z,{onPositiveClick:h[0]||(h[0]=W=>U())},{trigger:jt(()=>[Rt(gt(Be),{type:"success",secondary:""},{icon:jt(()=>[Rt(gt(q),{size:"18"},{default:jt(()=>[Rt(gt(ie),{icon:"carbon:upload"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("export")),1)]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("exportDataInExcelFile")),1)]),_:1}),Rt(gt(Be),{type:"info",secondary:"",onClick:h[1]||(h[1]=W=>Q.value=!0)},{icon:jt(()=>[Rt(gt(q),{size:"18"},{default:jt(()=>[Rt(gt(ie),{icon:"carbon:download"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("import")),1)]),_:1}),Rt(gt(Be),{type:"primary",secondary:"",onClick:h[2]||(h[2]=W=>f(null))},{icon:jt(()=>[Rt(gt(q),{size:"18"},{default:jt(()=>[Rt(gt(ie),{icon:"carbon:add-alt"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Rt(oe,{name:"slide-fade",appear:""},{default:jt(()=>[gt(_).length?(ki(),Rc(Ne,{key:0,class:"my-2",size:"small",embedded:""},{default:jt(()=>[Rt(z,{align:"center",justify:"space-between"},{default:jt(()=>[qc("span",null,Zn(gt(d)("nbItemsSelected",[gt(_).length])),1),Rt(z,{align:"center",justify:"space-between"},{default:jt(()=>[Rt(gt(Be),{type:"error",size:"small",secondary:"",onClick:m},{icon:jt(()=>[Rt(gt(q),null,{default:jt(()=>[Rt(gt(ie),{icon:"carbon:trash-can"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("delete")),1)]),_:1}),Rt(gt(Be),{type:"warning",size:"small",secondary:"",onClick:$},{icon:jt(()=>[Rt(gt(q),null,{default:jt(()=>[Rt(gt(ie),{icon:"carbon:close"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):fy("",!0)]),_:1}),Rt($t,null,{default:jt(()=>[(ki(),Rc(ue,{key:gt(C),columns:P,data:gt(X),pagination:fe,loading:gt(t)||gt(j),"single-line":!1,"scroll-x":800,"row-key":B,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),Rt(Ve,{show:gt(S),"onUpdate:show":h[4]||(h[4]=W=>jc(S)?S.value=W:null),loading:gt(O)||gt(F),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:gt(M)?gt(d)("editPhoneNumber"):gt(d)("addPhoneNumber"),"positive-text":gt(d)("validate"),"negative-text":gt(d)("cancel"),onPositiveClick:T,onNegativeClick:h[5]||(h[5]=W=>S.value=!1)},{default:jt(()=>[Rt(Ye,{ref_key:"formRef",ref:L,class:"mt-5",model:gt(D),rules:H,"show-require-mark":!1,size:"medium"},{default:jt(()=>[Rt(xe,{label:gt(d)("phone"),path:"phone"},{default:jt(()=>[Rt(Vt,{modelValue:gt(D).phone,"onUpdate:modelValue":h[3]||(h[3]=W=>gt(D).phone=W)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Rt(Ve,{show:gt(Q),"onUpdate:show":h[7]||(h[7]=W=>jc(Q)?Q.value=W:null),loading:gt(E),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:gt(d)("import")},{default:jt(()=>[Rt(et,{class:"my-5","on-success":Y}),qc("div",gy,[Rt(gt(Be),{type:"info",size:"small",secondary:"",onClick:h[6]||(h[6]=W=>K())},{icon:jt(()=>[Rt(gt(q),null,{default:jt(()=>[Rt(gt(ie),{icon:"carbon:download"})]),_:1})]),default:jt(()=>[Vo(" "+Zn(gt(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),ky="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:Kc,mergeModels:wy,defineComponent:xy}=await se("vue"),{unref:Lt,toDisplayString:Ho,createElementVNode:Ps,createTextVNode:Ir,resolveComponent:Bb,withCtx:Jt,createVNode:Vl,renderList:wi,Fragment:Ls,openBlock:Ja,createElementBlock:Bs,createBlock:Qo,createCommentVNode:Yc,normalizeStyle:xi,normalizeClass:$y}=await se("vue"),Cy={class:"text-base"},Iy={class:"text-base"},{ref:So,inject:Vy,computed:Sy,watch:Ey,reactive:Vr}=await se("vue"),Uy=xy({__name:"DataForm",props:wy({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,n=Kc(u,"show"),l=Kc(u,"data"),o=Ge(),a=qe(),{t}=ke(),{tr:r,pickByTheme:j,editKeysToCamelCase:ae}=Ze(),ce=So(null),O=So(!1),ge=Vy("currentEditItem"),F=Sy(()=>ne.isEqual(l.value,ge?.value)&&ne.isEqual(d.value,le.value)),I=()=>{n.value=!1,O.value=!1},d=So({}),V=So(El()),le=So({}),i=So(),fe=So();Ey(()=>n.value,X=>{X&&(zi(l.value.contentModelData)?d.value=Vr(l.value.contentModelData):d.value=Vr({}),ne.forIn(ae(e.contentModel?.dataStructure??{}),(E,S)=>{(!d.value[S]||Array.isArray(d.value[S])&&d.value[S].length==0)&&(S==="index"?d.value[S]=Vr({}):d.value[S]=Vr([]))}),le.value=ne.cloneDeep(d.value),V.value=El())},{immediate:!0});const P=async()=>{O.value=!0,o.start();const X=i.value&&await i.value(),E=fe.value&&await fe.value();(!i.value||X)&&(!fe.value||E)?await e.submitData(d.value):a.error(t("mandatoryFieldsNotFilledIn")),o.finish(),O.value=!1};return(X,E)=>{const S=ji,M=Ar,L=zr,D=ie,H=q,f=Be,T=$l,x=yl,k=Ra,A=en,U=ya,K=Ai;return Ja(),Qo(K,{modelValue:n.value,"onUpdate:modelValue":E[3]||(E[3]=Q=>n.value=Q),"close-on-esc":!1,closable:!1,onOnSizeChange:E[4]||(E[4]=Q=>{ce.value=Q})},{header:Jt(()=>[Ps("div",Cy,[Vl(S,{depth:"1"},{default:Jt(()=>[Ir(Ho(Lt(r)(e.contentModel?.title))+" ",1),Ps("span",null," Â -Â "+Ho(Lt(ge)?Lt(t)("editItem"):Lt(t)("addItem")),1)]),_:1})])]),"header-extra":Jt(()=>[Vl(T,{align:"center"},{default:Jt(()=>[Ps("span",Iy,Ho(Lt(t)("status"))+":",1),Vl(L,{value:l.value.isActive,"onUpdate:value":E[0]||(E[0]=Q=>l.value.isActive=Q),name:"isActive",class:"w-full"},{default:Jt(()=>[Vl(M,{value:!1,label:Lt(t)("hidden"),class:"w-[50%]"},null,8,["label"]),Vl(M,{value:!0,label:Lt(t)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),E[5]||(E[5]=Ps("div",{class:"w-4"},null,-1)),Vl(f,{secondary:"",type:"success",title:Lt(t)("save"),loading:Lt(O),disabled:Lt(F),onClick:E[1]||(E[1]=Q=>P())},{icon:Jt(()=>[Vl(H,null,{default:Jt(()=>[Vl(D,{icon:"carbon:save"})]),_:1})]),default:Jt(()=>[Ir(" "+Ho(Lt(t)("save")),1)]),_:1},8,["title","loading","disabled"]),Vl(f,{secondary:"",type:"error",title:Lt(t)("close"),disabled:Lt(O),onClick:E[2]||(E[2]=Q=>I())},{icon:Jt(()=>[Vl(H,null,{default:Jt(()=>[Vl(D,{icon:"carbon:close"})]),_:1})]),default:Jt(()=>[Ir(" "+Ho(Lt(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Jt(()=>[Ps("section",{style:xi(`min-height: ${Lt(ce)?.windowHeight-Lt(ce)?.headerHeight-5}px`),class:$y(`w-full h-full ${Lt(j)("bg-slate-200","bg-zinc-800")}`)},[Vl(U,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Jt(()=>[Vl(A,{class:"ml-4 mt-2"},{default:Jt(()=>[Vl(k,{style:xi(`height: ${Lt(ce)?.windowHeight-Lt(ce)?.headerHeight-50}px`)},{default:Jt(()=>[(Ja(!0),Bs(Ls,null,wi(Lt(ae)(u.contentModel?.dataStructure),(Q,Y)=>(Ja(),Bs(Ls,{key:Y},[String(Y)==="index"?(Ja(),Qo(x,{key:0,size:"small",class:"mb-2"},{default:Jt(()=>[(Ja(),Qo(Hs,{key:`${Lt(V)}-${Y}-form-1`,modelValue:Lt(d)[Y],"onUpdate:modelValue":C=>Lt(d)[Y]=C,items:Q,onUpdate:(C,_)=>{i.value=_}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):Yc("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),Vl(A,{class:"mr-4 mt-2"},{default:Jt(()=>[Vl(k,{style:xi(`height: ${Lt(ce)?.windowHeight-Lt(ce)?.headerHeight-50}px`)},{default:Jt(()=>[(Ja(!0),Bs(Ls,null,wi(Lt(ae)(u.contentModel?.dataStructure),(Q,Y)=>(Ja(),Bs(Ls,{key:Y},[String(Y)!=="index"?(Ja(),Qo(x,{key:0,title:Lt(r)(Q.title),size:"small",class:"mb-2"},{"header-extra":Jt(()=>[Vl(f,{quaternary:"",size:"small",onClick:()=>Lt(d)[Y].push({})},{icon:Jt(()=>[Vl(H,null,{default:Jt(()=>[Vl(D,{icon:"carbon:add-alt"})]),_:1})]),default:Jt(()=>[Ir(" "+Ho(Lt(t)("add")),1)]),_:1},8,["onClick"])]),default:Jt(()=>[(Ja(!0),Bs(Ls,null,wi(Lt(d)[Y],(C,_)=>(Ja(),Qo(x,{key:_,title:String(_+1),size:"small",class:"mb-2"},{"header-extra":Jt(()=>[Vl(f,{secondary:"",type:"error",size:"small",onClick:()=>Lt(d)[Y].splice(_,1)},{icon:Jt(()=>[Vl(H,null,{default:Jt(()=>[Vl(D,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),default:Jt(()=>[(Ja(),Qo(Hs,{key:`${Lt(V)}-${Y}-${_}-form-2`,modelValue:Lt(d)[Y][_],"onUpdate:modelValue":B=>Lt(d)[Y][_]=B,items:Q.items,onUpdate:(B,$e)=>{fe.value=$e}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):Yc("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:My,mergeModels:Ty,defineComponent:Ny}=await se("vue"),{unref:Kt,resolveComponent:Fb,createVNode:ql,toDisplayString:Sr,createTextVNode:Gc,withCtx:la,renderList:Dy,Fragment:Hc,openBlock:Fs,createElementBlock:Qc,createElementVNode:Er,createBlock:$i,normalizeClass:zy,isRef:Ay}=await se("vue"),{inject:Py,ref:Os,h:Wc,computed:Xc}=await se("vue"),Ly={class:"flex items-center justify-between"},By={class:"flex flex-col"},Fy={class:"text-sm font-bold"},Oy={class:"text-xs font-normal"},qy=Ny({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Ty(["update"],["update:show"]),setup(u,{emit:e}){const{t:n}=ke(),{pickByTheme:l,tr:o,mergeArrays:a}=Ze(),{extractItemTitle:t}=Js(),{data:r}=oo(),{mutate:j,isPending:ae}=Ad(),ce=Wl(),O=e,ge=My(u,"show"),F=Py("currentEditItem"),I=async T=>{ce.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{j({id:F?.value?.id,relatedItems:F?.value?.relatedItems?.filter(x=>x.id!==T.id)?.map(x=>x.id)},{onSuccess:()=>{O("update",F?.value?.id)}})}})},d=T=>r.value?.find(x=>x.id===T.contentModelId),V=Os(!1),le=Os(null),i=Os({contentModelId:null,itemId:null}),fe={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},P=async()=>(le.value?.validate(async T=>{if(!T){const x=F?.value?.relatedItems?.map(k=>k.id)||[];j({id:F?.value?.id,relatedItems:[...x,i.value.itemId]},{onSuccess:()=>{O("update",F?.value?.id),V.value=!1}})}}),!1),X=T=>Wc("span",{},{default:()=>o(T.title)}),E=T=>Xc(()=>Wc("span",{},{default:()=>t(T,d(T))})),S=Os([]),M=Os([]),{mutateAsync:L,isPending:D}=Yi(),H=async(T,x)=>{if(!T.length){M.value=[];return}M.value=await L({query:T,contentModelId:x})},f=Xc(()=>a(S.value,M.value,"id").filter(T=>T.id!==F?.value?.id));return(T,x)=>{const k=ie,A=Be,U=$l,K=q,Q=yl,Y=Ra,C=Pa,_=so,B=Xl,$e=Ka,$=ha,m=ga;return Fs(),Qc(Hc,null,[ql(B,{show:ge.value,"onUpdate:show":x[2]||(x[2]=s=>ge.value=s),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Kt(n)("linkContentModelItems")},{"header-extra":la(()=>[ql(U,{align:"center"},{default:la(()=>[ql(A,{secondary:"",size:"small",type:"primary",disabled:Kt(ae),onClick:x[0]||(x[0]=s=>V.value=!0)},{default:la(()=>[ql(k,{icon:"carbon:add-alt",class:"mr-1"}),Gc(" "+Sr(Kt(n)("add")),1)]),_:1},8,["disabled"]),ql(A,{secondary:"",size:"small",type:"error",disabled:Kt(ae),onClick:x[1]||(x[1]=s=>ge.value=!1)},{default:la(()=>[ql(k,{icon:"carbon:close",class:"mr-1"}),Gc(" "+Sr(Kt(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:la(()=>[ql(_,{show:Kt(ae)},{default:la(()=>[Kt(F)?.relatedItems?.length?(Fs(),$i(Y,{key:0,style:{"max-height":"400px"}},{default:la(()=>[(Fs(!0),Qc(Hc,null,Dy(Kt(F)?.relatedItems,s=>(Fs(),$i(Q,{key:s.id,embedded:"",size:"small",class:"mb-2"},{default:la(()=>[Er("div",Ly,[Er("div",By,[Er("span",Fy,Sr(Kt(t)(s,d(s))),1),Er("span",Oy,Sr(Kt(o)(d(s)?.title)),1)]),ql(U,null,{default:la(()=>[ql(A,{size:"small",type:"error",secondary:"",onClick:h=>I(s)},{default:la(()=>[ql(K,null,{default:la(()=>[ql(k,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Fs(),$i(Q,{key:1,size:"large",class:zy(`mb-2 !border-dashed !border-2 ${Kt(l)("!border-zinc-300","!border-zinc-600")}`)},{default:la(()=>[ql(C,{description:Kt(n)("noLinkAdded")},{icon:la(()=>[ql(K,null,{default:la(()=>[ql(k,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),ql(B,{show:Kt(V),"onUpdate:show":x[6]||(x[6]=s=>Ay(V)?V.value=s:null),loading:Kt(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Kt(n)("addLink"),"positive-text":Kt(n)("validate"),"negative-text":Kt(n)("cancel"),onPositiveClick:P,onNegativeClick:x[7]||(x[7]=s=>V.value=!1)},{default:la(()=>[ql(m,{ref_key:"formRef",ref:le,model:Kt(i),rules:fe,"show-require-mark":!1,size:"medium",class:"my-5"},{default:la(()=>[ql($,{label:Kt(n)("contentModel"),path:"contentModelId"},{default:la(()=>[ql($e,{value:Kt(i).contentModelId,"onUpdate:value":x[3]||(x[3]=s=>Kt(i).contentModelId=s),options:Kt(r),placeholder:Kt(n)("contentModel"),"render-label":X,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ql($,{label:Kt(n)("itemToLink"),path:"itemId"},{default:la(()=>[ql($e,{value:Kt(i).itemId,"onUpdate:value":x[4]||(x[4]=s=>Kt(i).itemId=s),options:Kt(f)||[],placeholder:Kt(n)("itemToLink"),"render-label":s=>E(s).value,loading:Kt(D),disabled:!Kt(i).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:x[5]||(x[5]=s=>H(s,Kt(i).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Ry}=await se("vue"),{useModel:jy,defineComponent:Ky}=await se("vue"),{unref:At,toDisplayString:Dn,createTextVNode:eo,resolveComponent:Ob,isRef:qs,withCtx:Ft,createVNode:Pt,createElementVNode:Rs,openBlock:to,createElementBlock:js,createCommentVNode:Jc,renderList:Yy,Fragment:Zc,createBlock:Ci}=await se("vue"),Gy={key:0,class:"w-full flex items-center justify-between gap-4"},Hy={class:"flex items-center gap-3"},Qy={key:0},Wy={class:"flex items-center justify-center h-full"},Xy=["src"],Jy={class:"text-center text-dimgray text-sm"},Zy={key:1,class:"flex items-center justify-center"},{ref:Za,computed:ed,watch:e1,provide:t1}=await se("vue"),l1=Ky({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=ke(),{extractItemTitle:n}=Js(),{tr:l}=Ze(),o=Wl(),a=qe(),t=jy(u,"modelValue"),r=Za(!1),j=Za(!1),ae=Za([]),{mutate:ce}=Dp(),{mutate:O}=Np(),{mutate:ge}=Ad(),{mutate:F}=zp(),I=Za(0),d=Za(24),V=Za(1),le=ed(()=>({contentModelId:t.value?.id,pageSize:d.value,page:V.value})),i=Y=>{V.value=Y,X()},fe=Y=>{d.value=Y,X()},{data:P,refetch:X,isPending:E}=nu(le);e1(()=>P.value,Y=>{ae.value=Y?.items||[],I.value=Y?.meta?.total||0,V.value=Y?.meta?.currentPage||1},{deep:!0,immediate:!0});const S=Za(null),M=Za({title:"",contentModelData:"",isActive:!0}),L=Y=>{S.value=ne.cloneDeep(Y),Y?M.value=ne.cloneDeep(Y):M.value={title:"",contentModelData:"",isActive:!0},r.value=!0},D=Y=>{S.value=ne.cloneDeep(Y),j.value=!0},H=async Y=>{await X();const C=ae.value.find(_=>_.id===Y);C&&D(C)},f=async Y=>{o.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{Y.id&&ce({id:Y.id})}})},T=async Y=>{const C={title:M.value.title,contentModelData:Y,isActive:M.value.isActive,contentModelId:t.value?.id};S.value?ge({id:S.value.id,...C}):O(C),r.value=!1},x=Za(!1),k=Za(El()),A=Za({}),U=ed(()=>{let Y=0;for(const C in A.value)A.value[C]&&Y++;return Y});function K(){A.value={},X()}const Q=async()=>(U.value?o.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[U.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{F(A.value,{onSuccess:()=>{A.value={}}})}}):a.warning(e("noItemSelected")),!1);return t1("currentEditItem",S),(Y,C)=>{const _=ro,B=ie,$e=q,$=Be,m=$l,s=Da,h=Cd,Z=Xs,z=Va,ye=yl,Ne=Aa,oe=en,ue=ya,$t=No,Vt=so,xe=Pa;return to(),js(Zc,null,[Pt(s,{to:"#alt-action"},{default:Ft(()=>[Pt(m,{align:"center"},{default:Ft(()=>[Pt(_,{checked:At(x),"onUpdate:checked":[C[0]||(C[0]=Ye=>qs(x)?x.value=Ye:null),C[1]||(C[1]=Ye=>{for(const Ve of At(ae))Ve.id&&(At(A)[Ve.id]=Ye);k.value=("uuidv4"in Y?Y.uuidv4:Ry(El))()})],disabled:!At(ae).length},{default:Ft(()=>[eo(Dn(At(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Pt($,{type:"primary",secondary:"",onClick:C[2]||(C[2]=Ye=>L(null))},{icon:Ft(()=>[Pt($e,{size:"18"},{default:Ft(()=>[Pt(B,{icon:"carbon:add-alt"})]),_:1})]),default:Ft(()=>[eo(" "+Dn(At(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Pt(h,{class:"mt-2 mb-5",onBack:C[3]||(C[3]=Ye=>t.value=null)},{title:Ft(()=>[eo(Dn(At(l)(t.value?.title)),1)]),back:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Ft(()=>[At(U)>0?(to(),js("section",Gy,[Rs("span",null,Dn(At(e)("nbItemsSelected",[At(U)])),1),Rs("section",Hy,[Pt($,{type:"error",secondary:"",size:"small",onClick:Q},{icon:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"carbon:trash-can"})]),_:1})]),default:Ft(()=>[eo(" "+Dn(At(e)("delete")),1)]),_:1}),Pt($,{type:"warning",secondary:"",size:"small",onClick:K},{icon:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"carbon:close-filled"})]),_:1})]),default:Ft(()=>[eo(" "+Dn(At(e)("cancelSelection")),1)]),_:1})])])):Jc("",!0)]),_:1}),At(ae).length&&!At(E)?(to(),js("section",Qy,[Pt(ue,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Ft(()=>[(to(!0),js(Zc,null,Yy(At(ae),(Ye,Ve)=>(to(),Ci(oe,{key:Ve},{default:Ft(()=>[Pt(Ne,{name:"slide-fade",appear:""},{default:Ft(()=>[Pt(ye,{size:"small",bordered:"",hoverable:""},{cover:Ft(()=>[Rs("div",Wy,[Rs("img",{src:t.value?.imageUrl??At(ky),class:"w-full h-[200px] object-cover"},null,8,Xy)])]),header:Ft(()=>[Rs("div",Jy,[Pt(Z,{"line-clamp":1,"expand-trigger":"click"},{default:Ft(()=>[Ye.id?(to(),Ci(_,{key:At(k),checked:At(A)[Ye.id],"onUpdate:checked":et=>At(A)[Ye.id]=et,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Jc("",!0),eo(" "+Dn(At(n)(Ye,t.value)),1)]),_:2},1024)])]),action:Ft(()=>[Pt(m,{justify:"space-between",align:"center"},{default:Ft(()=>[Pt(z,{bordered:!1,type:Ye.isActive?"success":"error"},{default:Ft(()=>[eo(Dn(Ye.isActive?At(e)("visible"):At(e)("hidden")),1)]),_:2},1032,["type"]),Pt(m,null,{default:Ft(()=>[Pt($,{ternary:"",circle:"",title:At(e)("edit"),onClick:et=>L(Ye)},{icon:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Pt($,{ternary:"",circle:"",title:At(e)("links"),onClick:et=>D(Ye)},{icon:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Pt($,{ternary:"",circle:"",title:At(e)("delete"),onClick:et=>f(Ye)},{icon:Ft(()=>[Pt($e,null,{default:Ft(()=>[Pt(B,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),Pt($t,{page:At(V),"onUpdate:page":[C[4]||(C[4]=Ye=>qs(V)?V.value=Ye:null),i],class:"mt-10 justify-center","show-size-picker":"","page-size":At(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(At(I)/At(d)),"onUpdate:pageSize":fe},{prefix:Ft(()=>[eo(Dn(`${At(I)} ${At(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):At(E)?(to(),js("section",Zy,[Pt(Vt,{size:"medium"})])):(to(),Ci(xe,{key:2,description:At(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Pt(Uy,{show:At(r),"onUpdate:show":C[5]||(C[5]=Ye=>qs(r)?r.value=Ye:null),data:At(M),"onUpdate:data":C[6]||(C[6]=Ye=>qs(M)?M.value=Ye:null),"content-model":t.value,"submit-data":T},null,8,["show","data","content-model"]),Pt(qy,{show:At(j),"onUpdate:show":C[7]||(C[7]=Ye=>qs(j)?j.value=Ye:null),onUpdate:H},null,8,["show"])],64)}}}),a1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["content-models"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/content-models",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},n1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["content-models"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/content-models/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},o1=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["content-models"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-models/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:s1}=await se("vue"),{unref:Te,resolveComponent:qb,createVNode:kt,withCtx:wt,toDisplayString:yn,createTextVNode:zn,openBlock:Ma,createBlock:An,createCommentVNode:Wo,renderList:r1,Fragment:Ii,createElementBlock:Ur,withModifiers:Mr,normalizeClass:td,createElementVNode:Tr,isRef:Nr,normalizeStyle:i1}=await se("vue"),c1={key:2},d1={class:"flex items-center"},u1={class:"text-base"},p1={class:"mt-4"},{inject:m1,ref:hn,watch:f1}=await se("vue"),{defineStore:_1}=await se("pinia"),v1="previews",g1=s1({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,fileUrl:o,isInDevMode:a,formatKey:t}=Ze(),{data:r}=oo(),{mutate:j,isPending:ae}=o1(),{mutate:ce,isPending:O}=a1(),{mutate:ge,isPending:F}=n1(),I=Wl(),d=m1("appConfig"),V=hn(24),le=hn(1),i=Y=>{V.value=Y},fe={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},P=hn(!1),X=hn(null),E=hn(fe),S={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},M=hn(null),L=Y=>{M.value=ne.cloneDeep(Y),E.value=ne.cloneDeep(Y||fe),P.value=!0},D=async()=>(X.value?.validate(async Y=>{if(!Y){const C={id:M.value?.id||0,name:E.value.name,title:E.value.title,image:E.value.image,description:E.value.description,titleFieldName:E.value.titleFieldName,hasPermalink:E.value.hasPermalink};M.value?ge(C,{onSuccess:()=>{}}):ce(C,{onSuccess:()=>{}}),P.value=!1}}),!1),H=async Y=>{I.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{j({id:Y.id||0})}})},f=hn(null),T=hn(!1),x=Y=>{f.value=Y,T.value=!0},k=async Y=>{ge({id:f.value?.id||0,hasPermalink:f.value?.hasPermalink,dataStructure:Y},{onSuccess:C=>{x(C)}})},A=hn(!1),U=async Y=>{E.value.image=Y,A.value=!1},K=()=>{E.value.image=""},Q=_1("content-models-management",()=>({itemsContentModel:hn(null)}))();return f1(()=>E.value.title,Y=>{M.value||E.value.name.length<=21&&(E.value.name=Td(n(Y),{trim:!0,lower:!0,strict:!0}))}),(Y,C)=>{const _=ie,B=q,$e=Be,$=Da,m=$l,s=ja,h=yl,Z=No,z=Pa,ye=Aa,Ne=$a,oe=ha,ue=Zt,$t=en,Vt=Ri,xe=qn,Ye=ya,Ve=ro,et=ga,W=Xl,b=no;return Ma(),Ur(Ii,null,[Te(Q).itemsContentModel?Wo("",!0):(Ma(),An($,{key:0,to:"#alt-action"},{default:wt(()=>[Te(r)&&Te(r).length?(Ma(),An($e,{key:0,type:"primary",secondary:"",onClick:C[0]||(C[0]=p=>L(null))},{icon:wt(()=>[kt(B,{size:"18"},{default:wt(()=>[kt(_,{icon:"carbon:add-alt"})]),_:1})]),default:wt(()=>[zn(" "+yn(Te(e)("addContentModel")),1)]),_:1})):Wo("",!0)]),_:1})),Te(Q).itemsContentModel?(Ma(),An(l1,{key:1,modelValue:Te(Q).itemsContentModel,"onUpdate:modelValue":C[1]||(C[1]=p=>Te(Q).itemsContentModel=p)},null,8,["modelValue"])):(Ma(),Ur("section",c1,[kt(ye,{appear:"",name:"slide-fade"},{default:wt(()=>[Tr("section",null,[Te(r)&&Te(r).length?(Ma(),Ur(Ii,{key:0},[(Ma(!0),Ur(Ii,null,r1(Te(r).slice((Te(le)-1)*Te(V),Te(le)*Te(V)),p=>(Ma(),An(h,{key:p.id,embedded:"",size:"small",class:"mb-2"},{header:wt(()=>[Tr("div",d1,[Te(a)?(Ma(),An(m,{key:0},{default:wt(()=>[kt($e,{size:"small",type:"primary",secondary:"",onClick:Mr(rt=>x(p),["stop"])},{default:wt(()=>[kt(B,{class:"mr-1"},{default:wt(()=>[kt(_,{icon:"carbon:data-1"})]),_:1}),zn(" "+yn(Te(e)("dataStructure")),1)]),_:1},8,["onClick"]),kt($e,{size:"small",type:"primary",secondary:"",onClick:Mr(rt=>L(p),["stop"])},{default:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),kt($e,{size:"small",type:"error",secondary:"",onClick:Mr(rt=>H(p),["stop"])},{default:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):Wo("",!0),Te(a)?(Ma(),An(s,{key:1,vertical:"",class:td(Te(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):Wo("",!0),Tr("span",u1,yn(Te(n)(p.title)),1)])]),"header-extra":wt(()=>[kt($e,{size:"small",type:"primary",secondary:"",onClick:Mr(rt=>Te(Q).itemsContentModel=p,["stop"])},{icon:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:arrow-right"})]),_:1})]),default:wt(()=>[zn(" "+yn(Te(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),kt(Z,{page:Te(le),"onUpdate:page":C[2]||(C[2]=p=>Nr(le)?le.value=p:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Te(V),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(Te(r).length/Te(V)),"onUpdate:pageSize":i},{prefix:wt(()=>[zn(yn(`${Te(r).length} ${Te(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Ma(),An(h,{key:1,size:"large",class:td(`mb-2 !border-dashed !border-2 ${Te(l)("!border-zinc-300","!border-zinc-600")}`)},{default:wt(()=>[kt(z,{description:Te(e)("noContentModelAvailable")},{icon:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:model-alt"})]),_:1})]),extra:wt(()=>[Tr("div",p1,[kt($e,{size:"small",secondary:"",onClick:C[3]||(C[3]=p=>L(null))},{icon:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:add-alt"})]),_:1})]),default:wt(()=>[zn(" "+yn(Te(e)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),kt(W,{show:Te(P),"onUpdate:show":C[11]||(C[11]=p=>Nr(P)?P.value=p:null),loading:Te(O)||Te(F)||Te(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Te(M)?Te(e)("editContentModel"):Te(e)("addContentModel"),"positive-text":Te(e)("validate"),"negative-text":Te(e)("cancel"),onPositiveClick:D,onNegativeClick:C[12]||(C[12]=p=>P.value=!1)},{default:wt(()=>[kt(et,{ref_key:"formRef",ref:X,model:Te(E),rules:S,"show-require-mark":!1,size:"medium",class:"my-5"},{default:wt(()=>[kt(oe,{"show-label":!1,path:"title"},{default:wt(()=>[kt(Ne,{modelValue:Te(E).title,"onUpdate:modelValue":C[4]||(C[4]=p=>Te(E).title=p),placeholder:Te(e)("title"),class:"w-full",sync:""},{label:wt(()=>[zn(yn(Te(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),kt(oe,{"show-label":!1,path:"description"},{default:wt(()=>[kt(Ne,{modelValue:Te(E).description,"onUpdate:modelValue":C[5]||(C[5]=p=>Te(E).description=p),placeholder:Te(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:wt(()=>[zn(yn(Te(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),kt(Ye,{"x-gap":"12",span:24},{default:wt(()=>[kt($t,{span:14},{default:wt(()=>[kt(oe,{label:Te(e)("contentModelKey"),path:"name"},{default:wt(()=>[kt(ue,{value:Te(E).name,placeholder:Te(e)("contentModelKey"),class:"w-full","onUpdate:value":C[6]||(C[6]=p=>Te(E).name=Te(t)(p))},null,8,["value","placeholder"])]),_:1},8,["label"]),kt(oe,{label:Te(e)("titleSingletonKey"),path:"titleFieldName"},{default:wt(()=>[kt(ue,{value:Te(E).titleFieldName,placeholder:Te(e)("titleSingletonKey"),class:"w-full","onUpdate:value":C[7]||(C[7]=p=>Te(E).titleFieldName=Te(t)(p))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),kt(xe,{span:10,label:Te(e)("itemsPreview"),path:"image"},{default:wt(()=>[kt(m,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:wt(()=>[kt(Vt,{class:"cursor-pointer","object-fit":"cover",style:i1("border: 1px dashed "+Te(l)("green","white")),size:150,src:Te(o)(Te(E).image||""),onClick:C[8]||(C[8]=p=>A.value=!0)},{default:wt(()=>[Te(E).image?Wo("",!0):(Ma(),An(B,{key:0,size:64},{default:wt(()=>[kt(_,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),Te(E).image?(Ma(),An($e,{key:0,quaternary:"",onClick:C[9]||(C[9]=p=>K())},{icon:wt(()=>[kt(B,null,{default:wt(()=>[kt(_,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[zn(" "+yn(Te(e)("clear")),1)]),_:1})):Wo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),kt(oe,{"show-label":!1,path:"hasPermalink"},{default:wt(()=>[kt(Ve,{checked:Te(E).hasPermalink,"onUpdate:checked":C[10]||(C[10]=p=>Te(E).hasPermalink=p)},{default:wt(()=>[zn(yn(Te(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),kt(b,{show:Te(A),"onUpdate:show":C[13]||(C[13]=p=>Nr(A)?A.value=p:null),title:Te(e)("selectImage"),"upload-config":{folder:v1,limit:0,maxSize:0,baseUrl:Te(d)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:U},null,8,["show","title","upload-config"]),kt(Fd,{show:Te(T),"onUpdate:show":C[14]||(C[14]=p=>Nr(T)?T.value=p:null),title:Te(n)(Te(f)?.title),"raw-data-structure":Te(f)?.dataStructure,"update-data-structure":k},null,8,["show","title","raw-data-structure"])]))],64)}}});var Bn=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Bn||{});const y1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["permalinks"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:"/permalinks",data:t});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},{defineComponent:h1}=await se("vue"),{unref:tt,resolveComponent:Rb,createVNode:xt,withCtx:It,toDisplayString:Hl,createTextVNode:b1,openBlock:lo,createBlock:Xo,createCommentVNode:k1,createElementVNode:Rl,renderList:w1,Fragment:ld,createElementBlock:ad}=await se("vue"),x1={class:"text-base font-bold"},$1={class:"text-sm"},C1={class:"text-xs text-slate-400"},I1={class:"text-xs text-slate-400"},V1={class:"text-xs text-slate-400"},S1={class:"text-sm"},E1={class:"text-xs text-slate-400"},U1={class:"text-xs text-slate-400"},M1={class:"text-xs text-slate-400"},T1={class:"text-sm"},N1={class:"text-xs text-slate-400"},D1={class:"text-xs text-slate-400"},z1={class:"text-xs text-slate-400"},A1={class:"text-base font-bold"},P1={class:"text-sm"},L1={class:"text-xs text-slate-400"},B1={class:"text-xs text-slate-400"},F1={class:"text-xs text-slate-400"},{ref:nd,computed:od,h:O1}=await se("vue"),q1=h1({__name:"index",setup(u){const{t:e}=ke(),{tr:n}=Ze(),{data:l}=Li(),{data:o,refetch:a}=oo({enabled:!1}),{data:t,refetch:r}=ou({enabled:!1}),{mutate:j,isPending:ae}=y1(),ce=[{pathPrefix:"/news/article",contentType:Bn.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Bn.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Bn.NEWS_TAG,contentParam:"slug",pageId:null}],O=nd(ce),ge=nd(),F=od(()=>o.value?.filter(fe=>fe.hasPermalink)),I=async(fe=!1)=>{fe&&await a(),await r(),O.value=ne.cloneDeep(ce);for(let P=0;P<(F.value?.length||0);P++)O.value.push({pathPrefix:`/${F.value?.[P].slug}`,contentType:Bn.CONTENT_MODEL,contentParam:"id",contentId:F.value?.[P].id,pageId:null});for(let P=0;P<O.value.length;P++)switch(O.value[P].contentType){case Bn.NEWS_ARTICLE:case Bn.NEWS_CATEGORY:case Bn.NEWS_TAG:{const X=t.value?.find(E=>E.contentType===O.value[P].contentType);X&&(O.value[P].pathPrefix=X.pathPrefix,O.value[P].contentParam=X.contentParam,O.value[P].pageId=X.pageId,O.value[P].permalinkId=X.id)}break;case Bn.CONTENT_MODEL:{const X=t.value?.find(E=>E.contentType===O.value[P].contentType&&E.contentId===O.value[P].contentId);X&&(O.value[P].pathPrefix=X.pathPrefix,O.value[P].contentParam=X.contentParam,O.value[P].pageId=X.pageId,O.value[P].permalinkId=X.id)}break}ge.value=ne.cloneDeep(O.value)};I(!0);const d=async()=>{j(O.value,{onSuccess:()=>{I()}})},V=od(()=>ne.isEqual(O.value,ge.value)),le=fe=>O1("span",{},{default:()=>n(fe.title)}),i=fe=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(fe);return(fe,P)=>{const X=ie,E=q,S=Be,M=Da,L=Zt,D=en,H=Ka,f=ya,T=yl,x=jn,k=Rn,A=ja;return lo(),ad(ld,null,[xt(M,{to:"#alt-action"},{default:It(()=>[xt(S,{secondary:"",type:"primary",loading:tt(ae),disabled:tt(V),onClick:P[0]||(P[0]=U=>d())},{icon:It(()=>[xt(E,null,{default:It(()=>[xt(X,{icon:"carbon:save"})]),_:1})]),default:It(()=>[b1(" "+Hl(tt(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),xt(T,{embedded:"",size:"small"},{default:It(()=>[xt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:U})=>[xt(E,null,{default:It(()=>[U?(lo(),Xo(X,{key:0,icon:"fa-solid:chevron-left"})):(lo(),Xo(X,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:It(()=>[...P[10]||(P[10]=[Rl("span",null,null,-1)])]),default:It(()=>[xt(x,{name:"1"},{header:It(()=>[Rl("span",x1,Hl(tt(e)("news")),1)]),default:It(()=>[xt(T,{size:"small"},{header:It(()=>[Rl("span",$1,Hl(tt(e)("articles")),1)]),default:It(()=>[xt(f,{cols:"24","x-gap":"12"},{default:It(()=>[xt(D,{span:"10"},{default:It(()=>[Rl("span",C1,Hl(tt(e)("pathPrefix")),1),xt(L,{value:tt(O)[0].pathPrefix,"onUpdate:value":P[1]||(P[1]=U=>tt(O)[0].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",I1,Hl(tt(e)("contentParam")),1),xt(L,{value:tt(O)[0].contentParam,"onUpdate:value":P[2]||(P[2]=U=>tt(O)[0].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",V1,Hl(tt(e)("contentPage")),1),xt(H,{value:tt(O)[0].pageId,"onUpdate:value":P[3]||(P[3]=U=>tt(O)[0].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),xt(T,{size:"small"},{header:It(()=>[Rl("span",S1,Hl(tt(e)("categories")),1)]),default:It(()=>[xt(f,{cols:"24","x-gap":"12"},{default:It(()=>[xt(D,{span:"10"},{default:It(()=>[Rl("span",E1,Hl(tt(e)("pathPrefix")),1),xt(L,{value:tt(O)[1].pathPrefix,"onUpdate:value":P[4]||(P[4]=U=>tt(O)[1].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",U1,Hl(tt(e)("contentParam")),1),xt(L,{value:tt(O)[1].contentParam,"onUpdate:value":P[5]||(P[5]=U=>tt(O)[1].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",M1,Hl(tt(e)("contentPage")),1),xt(H,{value:tt(O)[1].pageId,"onUpdate:value":P[6]||(P[6]=U=>tt(O)[1].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),xt(T,{size:"small"},{header:It(()=>[Rl("span",T1,Hl(tt(e)("tags")),1)]),default:It(()=>[xt(f,{cols:"24","x-gap":"12"},{default:It(()=>[xt(D,{span:"10"},{default:It(()=>[Rl("span",N1,Hl(tt(e)("pathPrefix")),1),xt(L,{value:tt(O)[2].pathPrefix,"onUpdate:value":P[7]||(P[7]=U=>tt(O)[2].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",D1,Hl(tt(e)("contentParam")),1),xt(L,{value:tt(O)[2].contentParam,"onUpdate:value":P[8]||(P[8]=U=>tt(O)[2].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),xt(D,{span:"7"},{default:It(()=>[Rl("span",z1,Hl(tt(e)("contentPage")),1),xt(H,{value:tt(O)[2].pageId,"onUpdate:value":P[9]||(P[9]=U=>tt(O)[2].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),xt(A,{class:"!my-2"}),tt(F)?.length&&tt(O).length>3?(lo(),Xo(T,{key:0,embedded:"",size:"small"},{default:It(()=>[xt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:U})=>[xt(E,null,{default:It(()=>[U?(lo(),Xo(X,{key:0,icon:"fa-solid:chevron-left"})):(lo(),Xo(X,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:It(()=>[...P[11]||(P[11]=[Rl("span",null,null,-1)])]),default:It(()=>[xt(x,{name:"1"},{header:It(()=>[Rl("span",A1,Hl(tt(e)("contentModels")),1)]),default:It(()=>[(lo(!0),ad(ld,null,w1(tt(F),(U,K)=>(lo(),Xo(T,{key:U.id,size:"small"},{header:It(()=>[Rl("span",P1,Hl(tt(n)(U.title)),1)]),default:It(()=>[xt(f,{cols:"24","x-gap":"12"},{default:It(()=>[xt(D,{span:"10"},{default:It(()=>[Rl("span",L1,Hl(tt(e)("pathPrefix")),1),xt(L,{value:tt(O)[K+3].pathPrefix,"onUpdate:value":Q=>tt(O)[K+3].pathPrefix=Q,"allow-input":i,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),xt(D,{span:"7"},{default:It(()=>[Rl("span",B1,Hl(tt(e)("contentParam")),1),xt(L,{value:tt(O)[K+3].contentParam,"onUpdate:value":Q=>tt(O)[K+3].contentParam=Q,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),xt(D,{span:"7"},{default:It(()=>[Rl("span",F1,Hl(tt(e)("contentPage")),1),xt(H,{value:tt(O)[K+3].pageId,"onUpdate:value":Q=>tt(O)[K+3].pageId=Q,options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):k1("",!0)],64)}}}),R1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"post",url:"/newsletter/campaigns",data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},j1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return _t({queryKey:["newsletter-campaigns"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const r=await n({method:"put",url:`/newsletter/campaigns/${t.id}`,data:Qt(t,["id"])});if(a.finish(),r.failure&&r.error)throw new Error(r.error);return r.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Bt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},K1=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return _t({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/campaigns/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Y1=()=>{const{displayFormErrors:u}=Ze(),{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return za(async a=>{const t=await e({url:"/sms",method:"post",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{t.onSuccess?t.onSuccess(a):o.success(n("success"))},onError:(a,t)=>{if(t.onError)t.onError(a);else switch(a?.response?.data?.errorCode){case Bt.FORM_INVALID_DATA:u(a?.response?.data?.data);break;default:o.error(n("sendingFailed"))}},retry:2})},{unref:sd}=await se("vue"),{defineComponent:G1}=await se("vue"),{unref:ze,createVNode:gl,withCtx:Pl,toDisplayString:Ks,createTextVNode:Ys,resolveComponent:jb,createElementVNode:Vi,isRef:rd,renderList:H1,Fragment:id,openBlock:Gs,createElementBlock:cd,createBlock:Si}=await se("vue"),Q1={class:"w-full"},{ref:Eo,h:rl,computed:dd}=await se("vue"),W1=G1({__name:"Campaign",setup(u){const e=qe(),n=Wl(),{getSettingValue:l}=su(),{ckEditorToolbarItems:o}=Ze(),{t:a,locale:t}=ke(),{data:r}=Od(),{data:j}=qd(),{data:ae,isPending:ce}=Yg(),{mutate:O,isPending:ge}=R1(),{mutate:F}=K1(),{mutate:I,isPending:d}=j1(),{mutate:V}=Cu(),{mutate:le}=Y1(),i=Eo(""),fe=Eo(),P={pageSize:12,prefix:({itemCount:U})=>rl("div",{class:"font-bold"},{default:()=>`${a("total")}: ${U}`})},X=[{title:a("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(U){return rl("div",{},{default:()=>U.title})}},{title:a("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(U){return rl("small",{},{default:()=>U.subject})}},{title:a("numberOfRecipients"),key:"recipients",width:200,render(U){return rl("div",{},{default:()=>U.recipients.length})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:150,render(U){return rl("div",{},{default:()=>On(U.updatedAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:150,render(U){return rl("div",{},{default:()=>On(U.createdAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>rl(Zt,{ref:fe,placeholder:a("search"),value:i.value,onInput:U=>{i.value=U}},{suffix:()=>rl(q,{},{default:()=>rl(ie,{icon:"carbon:search"})})}),key:"actions",width:175,render(U){return rl("div",{class:"flex justify-end items-center w-full"},[rl(Be,{size:"small",type:"primary",secondary:!0,title:a("history"),onClick:()=>{D.value=U,L.value=!0},renderIcon:()=>rl(q,null,{default:()=>rl(ie,{icon:"mdi:history"})})}),rl("div",{class:"w-2"}),rl(Be,{size:"small",type:"info",secondary:!0,title:a("launchCampaign"),onClick:()=>{const K=n.info({title:a("launchCampaign"),content:a("confirmLaunchCampaign",[U.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:a("yes"),negativeText:a("cancel"),onPositiveClick:async()=>{K.loading=!0,V({data:{title:U.title,subject:U.subject,content:U.content,recipients:U.recipients.filter(Q=>Zo.isEmail(Q)),tags:[]},onSuccess:Q=>{const Y=l("phone","string")?.split(",")[0];le({data:{from:Y.replace(/\s+/g,""),content:U.rawContent,recipients:U.recipients.filter(C=>!Zo.isEmail(C))},onSuccess:C=>{const _=U.history||[];_.push({id:El(),date:ru(new Date,{locale:t.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+Q.message+" Phone: "+C.message}),I({id:U.id,history:_}),K.loading=!1},onError:()=>{K.loading=!1}})},onError:()=>{K.loading=!1}})}})},renderIcon:()=>rl(q,null,{default:()=>rl(ie,{icon:"mdi:send"})})}),rl("div",{class:"w-2"}),rl(Be,{size:"small",type:"warning",secondary:!0,title:a("edit"),onClick:()=>{x(U)},renderIcon:()=>rl(q,null,{default:()=>rl(ie,{icon:"carbon:edit"})})}),rl("div",{class:"w-2"}),rl(Be,{size:"small",type:"error",secondary:!0,title:a("delete"),onClick:()=>{n.warning({title:a("confirm"),content:a("confirmDeleteCampaign"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{U.id&&F({id:U.id})}})},renderIcon:()=>rl(q,null,{default:()=>rl(ie,{icon:"carbon:trash-can"})})})])},fixed:"right"}],E=dd(()=>{if(!i.value)return ae.value;const U=ae.value?.filter(K=>K.title.toLowerCase().includes(i.value.toLowerCase())||K.subject.toLowerCase().includes(i.value.toLowerCase()));return fe.value&&fe.value.focus(),U}),S=dd(()=>[...(r.value||[]).map(U=>({recipient:U.email,type:"email"})),...(j.value||[]).map(U=>({recipient:U.phone,type:"phone"}))]),M=Eo(!1),L=Eo(!1),D=Eo(null),H=Eo(null),f=Eo({title:"",subject:"",content:"",rawContent:"",recipients:[]}),T={title:[{required:!0,message:a("fillRequired")}],subject:[{required:!0,message:a("fillRequired")}],content:[{required:!0,message:a("fillRequired")}],rawContent:[{required:!0,message:a("fillRequired")}],recipients:[{required:!0,message:a("fillRequired")}]},x=U=>{D.value=ne.cloneDeep(U),U?f.value=ne.cloneDeep(U):f.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},M.value=!0},k=async()=>(H.value?.validate(async U=>{if(!U){const K={title:f.value.title,subject:f.value.subject,content:f.value.content,rawContent:f.value.rawContent,recipients:f.value.recipients};D.value?D.value.title!==f.value.title&&(ae.value||[]).findIndex(Q=>Q.title==f.value.title)>-1?e.error(a("sameCampaignTitleMessage")):I({id:D.value.id,...K}):(ae.value||[]).findIndex(Q=>Q.title==f.value.title)>-1?e.error(a("sameCampaignTitleMessage")):O(K),M.value=!1}}),!1),A=(U,K)=>ne.isEqual(U.slice().sort(),K.slice().sort());return(U,K)=>{const Q=Da,Y=Pr,C=Dr,_=ha,B=Ed,$e=ro,$=Ka,m=ga,s=Xl,h=fu,Z=Vd,z=Id,ye=Ra,Ne=Pa;return Gs(),cd(id,null,[gl(Q,{to:"#alt-action"},{default:Pl(()=>[gl(ze(Be),{type:"primary",secondary:"",onClick:K[0]||(K[0]=oe=>x(null))},{icon:Pl(()=>[gl(ze(q),{size:"18"},{default:Pl(()=>[gl(ze(ie),{icon:"carbon:add-alt"})]),_:1})]),default:Pl(()=>[Ys(" "+Ks(ze(a)("addCampaign")),1)]),_:1})]),_:1}),gl(C,null,{default:Pl(()=>[gl(Y,{columns:X,data:ze(E),pagination:P,loading:ze(ce),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),gl(s,{show:ze(M),"onUpdate:show":K[9]||(K[9]=oe=>rd(M)?M.value=oe:null),loading:ze(ge)||ze(d),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ze(D)?ze(a)("editCampaign"):ze(a)("addCampaign"),"positive-text":ze(a)("validate"),"negative-text":ze(a)("cancel"),onPositiveClick:k,onNegativeClick:K[10]||(K[10]=oe=>M.value=!1)},{default:Pl(()=>[gl(m,{ref_key:"formRef",ref:H,class:"mt-5",model:ze(f),rules:T,"show-require-mark":!1,size:"medium"},{default:Pl(()=>[gl(_,{label:ze(a)("title"),path:"title"},{default:Pl(()=>[gl(ze(Zt),{value:ze(f).title,"onUpdate:value":K[1]||(K[1]=oe=>ze(f).title=oe),placeholder:ze(a)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),gl(_,{label:ze(a)("subject"),path:"subject"},{default:Pl(()=>[gl(ze(Zt),{value:ze(f).subject,"onUpdate:value":K[2]||(K[2]=oe=>ze(f).subject=oe),placeholder:ze(a)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),gl(_,{label:ze(a)("content"),path:"content"},{default:Pl(()=>[Vi("div",Q1,[gl(B,{modelValue:ze(f).content,"onUpdate:modelValue":K[3]||(K[3]=oe=>ze(f).content=oe),"toolbar-items":ze(o),placeholder:ze(a)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),gl(_,{label:ze(a)("rawContent"),path:"rawContent"},{default:Pl(()=>[gl(ze(Zt),{value:ze(f).rawContent,"onUpdate:value":K[4]||(K[4]=oe=>ze(f).rawContent=oe),placeholder:ze(a)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),gl(_,{label:ze(a)("recipients"),path:"recipients"},{default:Pl(()=>[gl($,{value:ze(f).recipients,"onUpdate:value":K[8]||(K[8]=oe=>ze(f).recipients=oe),options:ze(S),placeholder:ze(a)("recipients"),loading:ze(ce),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:Pl(()=>[gl($e,{size:"large",class:"w-full","default-checked":ze(S).length&&A(ze(f).recipients,ze(S).filter(oe=>oe.type=="email").map(oe=>oe.recipient)),"onUpdate:checked":K[5]||(K[5]=oe=>{oe?ze(f).recipients=ze(S).filter(ue=>ue.type=="email").map(ue=>ue.recipient):ze(f).recipients=ze(f).recipients.filter(ue=>!("_v"in U?U._v:sd(Zo)).isEmail(ue))})},{default:Pl(()=>[Ys(Ks(ze(a)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),K[12]||(K[12]=Vi("div",{class:"h-2"},null,-1)),gl($e,{size:"large",class:"w-full","default-checked":ze(S).length&&A(ze(f).recipients,ze(S).filter(oe=>oe.type=="phone").map(oe=>oe.recipient)),"onUpdate:checked":K[6]||(K[6]=oe=>{oe?ze(f).recipients=ze(S).filter(ue=>ue.type=="phone").map(ue=>ue.recipient):ze(f).recipients=ze(f).recipients.filter(ue=>("_v"in U?U._v:sd(Zo)).isEmail(ue))})},{default:Pl(()=>[Ys(Ks(ze(a)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),K[13]||(K[13]=Vi("div",{class:"h-2"},null,-1)),gl($e,{size:"large",class:"w-full","default-checked":ze(S).length&&ze(f).recipients.length===ze(S).length,"onUpdate:checked":K[7]||(K[7]=oe=>{oe?ze(f).recipients=ze(S).filter(ue=>ue.recipient).map(ue=>ue.recipient):ze(f).recipients=[]})},{default:Pl(()=>[Ys(Ks(ze(a)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),gl(s,{show:ze(L),"onUpdate:show":K[11]||(K[11]=oe=>rd(L)?L.value=oe:null),loading:ze(d),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ze(a)("history")},{default:Pl(()=>[ze(D)?.history?.length?(Gs(),Si(ye,{key:0,style:{"max-height":"400px"}},{default:Pl(()=>[gl(z,{hoverable:""},{default:Pl(()=>[(Gs(!0),cd(id,null,H1(ze(D)?.history.slice().reverse(),oe=>(Gs(),Si(Z,{key:oe.id},{default:Pl(()=>[gl(h,{title:oe.date,"content-style":"margin-top: 10px;"},{default:Pl(()=>[Ys(Ks(oe.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(Gs(),Si(Ne,{key:1,description:ze(a)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),X1=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return za(async o=>{const a=await u({url:"/app-information",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateAppInformation"))}})},{defineComponent:J1}=await se("vue"),{unref:g,createVNode:J,withCtx:re,toDisplayString:Xt,createTextVNode:Uo,resolveComponent:Z1,openBlock:Yt,createBlock:Pn,createCommentVNode:ca,createElementBlock:Sl,createElementVNode:Tt,isRef:Ei,vShow:Ui,withDirectives:Mi,normalizeStyle:Ln,Fragment:Mo,renderList:ud,TransitionGroup:eh,withKeys:th}=await se("vue"),lh={id:"header-btn"},ah={key:1,id:"alt-action"},nh={key:"basic-info"},oh={class:"text-xs"},sh={class:"text-xs"},rh={class:"text-xs"},ih={class:"text-xs"},ch={class:"text-xs"},dh={class:"text-xs"},uh={class:"text-xs"},ph={class:"flex items-center gap-2 w-full"},mh={key:"branding"},fh={class:"text-sm"},_h={class:"text-sm"},vh={class:"flex flex-col items-center justify-center text-gray-400"},gh={class:"text-sm"},yh={class:"flex flex-col items-center justify-center text-gray-400"},hh={class:"text-sm"},bh={class:"flex flex-col items-center justify-center text-gray-400"},kh={class:"text-sm"},wh={class:"flex flex-col items-center justify-center text-gray-400"},xh={class:"text-sm"},$h={class:"flex items-center justify-between"},Ch={class:"font-bold"},Ih={class:"flex items-center"},Vh={class:"flex items-center justify-between"},Sh={class:"font-bold"},Eh={class:"flex items-center"},Uh={class:"flex items-center justify-between"},Mh={class:"font-bold"},Th={class:"flex items-center"},Nh={key:"social-networks"},Dh={class:"text-xs"},zh={key:"newsletter-email"},Ah={key:"newsletter-phone"},Ph={key:"newsletter-campaign"},Lh={key:"ads"},Bh={key:"videos"},Fh={key:"content-models"},Oh={key:"menus"},qh={key:"content-permalinks"},Rh={key:"page-sections"},{defineComponent:jh,inject:Kh,ref:Ta,h:Ti,computed:Ni,watch:Di,onMounted:pd}=await se("vue"),{storeToRefs:Yh,defineStore:Gh}=await se("pinia"),Hh=jh({name:vd.CONTENT_MANAGEMENT.NAME}),Qh=J1({...Hh,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=b=>e.includes(b),{t:l,locale:o}=ke(),a=Vu(),t=Wl(),{appPrimaryColor:r,pickByTheme:j,fileUrl:ae,isLgScreen:ce,isMdScreen:O,isSmScreen:ge,isXlScreen:F,is2XlScreen:I,tr:d}=Ze(),V=iu({enabled:!1}),{isLightTheme:le,contentLayoutSize:i}=Yh(To());Pi();const{data:fe,refetch:P}=Li(),{mutate:X,isPending:E}=X1(),{mutate:S,isPending:M}=Ld(),{mutate:L,isPending:D}=cm(),H=Kh("appConfig"),f=Ta({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),T=Ta(f.value),x=Gh("content-management",()=>({currentMenuItemKey:Ta("basic-info")}))(),k=(b,p)=>()=>Ti(q,{},{default:()=>Ti(ie,{icon:b})}),A=(b,p,rt=!1)=>()=>Ti("span",{id:p,class:{"page-menu-item":rt}},{default:()=>b}),U=Ni(()=>{const b=[{label:A(l("basicInfo"),"basic-info"),key:"basic-info",icon:k("carbon:identification")},{label:A(l("branding"),"branding"),key:"branding",icon:k("carbon:color-palette")},{label:A(l("socialNetworks"),"social-networks"),key:"social-networks",icon:k("carbon:share")},{key:"divider",type:"divider"},{label:A(l("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:k("carbon:at")},{label:A(l("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:k("carbon:phone")},{label:A(l("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:k("carbon:bullhorn")},{key:"divider",type:"divider"},{label:A(l("ads"),"ads"),key:"ads",icon:k("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:A(l("videos"),"videos"),key:"videos",icon:k("carbon:video-player")},{key:"divider",type:"divider"},{label:A(l("menusManagement"),"menus"),key:"menus",icon:k("carbon:menu")},{label:A(l("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:k("carbon:link")},{key:"divider",type:"divider"},{label:A(l("contentModels"),"content-models"),key:"content-models",icon:k("carbon:model-alt")},{label:A(l("pageSections"),"page-sections"),key:"page-sections",icon:k("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const p of fe.value||[])b.push({label:A(d(p.title).startsWith(l("page"))?d(p.title):`${l("page")} ${d(p.title)}`,`${p.slug}-page`,!0),key:`${p.slug}-page`,icon:k("carbon:document",`${p.slug}-page`)});return fe.value&&fe.value.length>0&&b.push({key:"divider",type:"divider"}),b.push({label:A(l("addPage"),"add-new-page"),key:"add-new-page",icon:k("carbon:add-alt")}),b}),K=Ni(()=>ne.isEqual(f.value,T.value)),Q=Ni(()=>i.value.height-165),Y=Ta(null),C={email:[{required:!1,message:l("fillRequired")},{trigger:["input"],validator(b,p){return p&&!Zo.isEmail(p)?new Error(l("invalidEmail")):!0}}]},_=Ta();Di(()=>_.value,b=>{f.value.additionalInfo=JSON.stringify(b||"[]")},{deep:!0});const B=Ta(null),$e={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],m=Ta("logos"),s=Ta(!1),h=async b=>{switch(m.value){case"logos":f.value.logo=b;break;case"icons":f.value.icon=b;break;case"monochrome-logos":f.value.oneColorLogo=b;break;case"monochrome-icons":f.value.oneColorIcon=b;break}s.value=!1},Z={name:"",title:"",content:"",slug:""},z=Ta(!1),ye=Ta(null),Ne=Ta(Z),oe={title:[{required:!0,message:l("fillRequired")}]},ue=Ta(null),$t=b=>{ue.value=ne.cloneDeep(b),Ne.value=ne.cloneDeep(b||Z),z.value=!0},Vt=async()=>(ye.value?.validate(async b=>{if(!b){const p={title:Ne.value.title};ue.value?S({slug:ue.value.slug,...p},{onSuccess:rt=>{x.currentMenuItemKey=`${rt?.slug}-page`,z.value=!1}}):L({name:ne.startCase(ne.camelCase(d(Ne.value.title))).replace(/\s+/g,""),...p},{onSuccess:rt=>{x.currentMenuItemKey=`${rt?.slug}-page`,z.value=!1}})}}),!1),xe=async()=>{await V.refetch(),V.data.value?.forEach(b=>{f.value[b.key]!=null&&(f.value[b.key]=b.value)}),T.value=ne.cloneDeep(f.value);try{_.value=JSON.parse(f.value.additionalInfo||"[]")}catch{_.value=[]}};xe(),pd(()=>{setTimeout(()=>{a.params.key&&n(a.params.key)&&(x.currentMenuItemKey=a.params.key)},500)});const Ye=()=>{X(f.value,{onSuccess:()=>xe()})},Ve=["basic-info","branding","social-networks"];Di(()=>x.currentMenuItemKey,(b,p)=>{b==="add-new-page"?(x.currentMenuItemKey=p,$t(null)):Ve.includes(p)&&!Ve.includes(b)&&(K.value||t.warning({title:l("confirm"),content:l("marketInfoDiscardChangesConfirm"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{x.currentMenuItemKey=p}}))});const et=Ta();Di(()=>[O.value,ge.value,ce.value,F.value],([b,p,rt,Ce])=>{et.value=b||p||rt||Ce,setTimeout(()=>{et.value=void 0},500)},{immediate:!0});const W=Iu({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:l("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return pd(()=>{setTimeout(()=>{const b=document.getElementById("sidebar");W.addStep({attachTo:{element:b,on:"left"},title:l("contentManagementGuideTitle1"),text:l("contentManagementGuideText1"),buttons:[{text:l("pass"),label:l("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.cancel()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.next()}}]});const p=document.getElementsByClassName("page-menu-item");if(p&&p.length>0){const Ce=[];for(let nt=0;nt<p.length;nt++)Ce.push(p[nt]?.parentNode?.parentNode?.parentNode);W.addStep({attachTo:{element:Ce[0],on:"left"},title:l("contentManagementGuideTitle2"),text:l("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.back()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.next()}}]})}const rt=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;W.addStep({attachTo:{element:rt,on:"left"},title:l("contentManagementGuideTitle3"),text:l("contentManagementGuideText3"),buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.back()}},{text:l("ok"),label:l("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){W.next()}}]})},1e3)}),(b,p)=>{const rt=Be,Ce=$l,nt=gu,ut=vu,R=Zt,he=ha,pe=qn,Ee=ya,at=$a,Ul=Br,Ya=ga,jl=yl,ua=Ri,_e=en,de=ja,He=Z1("color-picker"),Ie=_u,Xe=Rd,ht=no,Ut=Xl;return Yt(),Sl(Mo,null,[J(Xe,null,{"header-extra":re(()=>[J(Ce,null,{default:re(()=>[Tt("div",lh,[Ve.includes(g(x).currentMenuItemKey)?(Yt(),Pn(rt,{key:0,loading:g(E)||g(V).isPending.value,disabled:g(K),type:"primary",secondary:"",onClick:Ye},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:save"})]),_:1})]),default:re(()=>[Uo(" "+Xt(g(l)("save")),1)]),_:1},8,["loading","disabled"])):(Yt(),Sl("div",ah))]),J(rt,{dashed:"",type:"primary",title:g(l)("help"),onClick:p[0]||(p[0]=Re=>g(W).start())},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:re(()=>[J(Ie,{style:Ln(`height: ${g(Q)}px`)},{default:re(()=>[J(Ie,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:re(()=>[J(ut,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:g(et),"default-collapsed":!g(I),"collapsed-width":64,"native-scrollbar":!1,width:g(I)?300:275},{default:re(()=>[J(nt,{value:g(x).currentMenuItemKey,"onUpdate:value":p[1]||(p[1]=Re=>g(x).currentMenuItemKey=Re),"collapsed-width":64,"collapsed-icon-size":22,options:g(U)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),J(Ie,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:re(()=>[J(eh,{name:"slide-fade"},{default:re(()=>[Mi(Tt("section",nh,[J(jl,{hoverable:""},{default:re(()=>[J(Ya,{ref_key:"basicInfoFormRef",ref:Y,model:g(f),rules:C,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:re(()=>[J(he,{path:"name"},{label:re(()=>[Tt("b",oh,Xt(g(l)("websiteName")),1)]),default:re(()=>[J(R,{value:g(f).name,"onUpdate:value":p[2]||(p[2]=Re=>g(f).name=Re),placeholder:g(l)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),J(Ee,{"x-gap":"12",span:24},{default:re(()=>[J(pe,{span:12,path:"email"},{label:re(()=>[Tt("b",sh,Xt(g(l)("email")),1)]),default:re(()=>[J(R,{value:g(f).email,"onUpdate:value":p[3]||(p[3]=Re=>g(f).email=Re),placeholder:g(l)("email"),class:"w-full"},{prefix:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),J(pe,{span:12,path:"phone"},{label:re(()=>[Tt("b",rh,Xt(g(l)("phone")),1)]),default:re(()=>[J(R,{value:g(f).phone,"onUpdate:value":p[4]||(p[4]=Re=>g(f).phone=Re),placeholder:g(l)("phone"),class:"w-full"},{prefix:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),J(he,{path:"address"},{label:re(()=>[Tt("span",ih,[Tt("b",null,Xt(g(l)("address")),1)])]),default:re(()=>[J(R,{value:g(f).address,"onUpdate:value":p[5]||(p[5]=Re=>g(f).address=Re),placeholder:g(l)("address"),class:"w-full"},{prefix:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),J(Ee,{"x-gap":"12",span:24},{default:re(()=>[J(pe,{span:12,path:"postalCode"},{label:re(()=>[Tt("b",ch,Xt(g(l)("postalCode")),1)]),default:re(()=>[J(R,{value:g(f).postalCode,"onUpdate:value":p[6]||(p[6]=Re=>g(f).postalCode=Re),placeholder:g(l)("postalCode"),class:"w-full"},{prefix:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),J(he,{"show-label":!1,path:"description"},{default:re(()=>[J(at,{modelValue:g(f).description,"onUpdate:modelValue":p[7]||(p[7]=Re=>g(f).description=Re),placeholder:g(l)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:re(()=>[Tt("b",dh,Xt(g(l)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(he,{path:"additionalInfo"},{label:re(()=>[Tt("b",uh,Xt(g(l)("additionalInfo")),1)]),default:re(()=>[J(Ul,{value:g(_),"onUpdate:value":p[8]||(p[8]=Re=>Ei(_)?_.value=Re:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":re(()=>[Uo(Xt(g(l)("add")),1)]),default:re(({value:Re})=>[Tt("div",ph,[J(R,{value:Re.name,"onUpdate:value":Ml=>Re.name=Ml,placeholder:g(l)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),J(R,{value:Re.content,"onUpdate:value":Ml=>Re.content=Ml,placeholder:g(l)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ui,g(x).currentMenuItemKey==="basic-info"]]),Mi(Tt("section",mh,[J(jl,{segmented:"",size:"small"},{header:re(()=>[Tt("span",fh,Xt(g(l)("graphicElements")),1)]),default:re(()=>[J(Ee,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:re(()=>[J(_e,null,{default:re(()=>[J(jl,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:re(()=>[Tt("span",_h,Xt(g(l)("logo")),1)]),default:re(()=>[J(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:re(()=>[g(f).logo?(Yt(),Pn(ua,{key:0,class:"cursor-pointer","object-fit":"contain",style:Ln("border: 1px dashed "+g(j)(g(r),"white")),size:125,src:g(ae)(g(f).logo),onClick:p[9]||(p[9]=()=>{m.value="logos",s.value=!0})},null,8,["style","src"])):(Yt(),Sl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Ln(`border: 1px dashed ${g(j)(g(r),"white")}; width: 125px; height: 125px`),onClick:p[10]||(p[10]=()=>{m.value="logos",s.value=!0})},[Tt("div",vh,[J(g(q),{size:"50"},{default:re(()=>[J(g(ie),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(g(l)("import")),1)])],4)),g(f).logo?(Yt(),Pn(rt,{key:2,quaternary:"",onClick:p[11]||(p[11]=()=>g(f).logo="")},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),default:re(()=>[Uo(" "+Xt(g(l)("clear")),1)]),_:1})):ca("",!0)]),_:1})]),_:1})]),_:1}),J(_e,null,{default:re(()=>[J(jl,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:re(()=>[Tt("span",gh,Xt(g(l)("icon")),1)]),default:re(()=>[J(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:re(()=>[g(f).icon?(Yt(),Pn(ua,{key:0,class:"cursor-pointer","object-fit":"contain",style:Ln("border: 1px dashed "+g(j)(g(r),"white")),size:125,src:g(ae)(g(f).icon),onClick:p[12]||(p[12]=()=>{m.value="icons",s.value=!0})},null,8,["style","src"])):(Yt(),Sl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Ln(`border: 1px dashed ${g(j)(g(r),"white")}; width: 125px; height: 125px`),onClick:p[13]||(p[13]=()=>{m.value="icons",s.value=!0})},[Tt("div",yh,[J(g(q),{size:"50"},{default:re(()=>[J(g(ie),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(g(l)("import")),1)])],4)),g(f).icon?(Yt(),Pn(rt,{key:2,quaternary:"",onClick:p[14]||(p[14]=()=>g(f).icon="")},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),default:re(()=>[Uo(" "+Xt(g(l)("clear")),1)]),_:1})):ca("",!0)]),_:1})]),_:1})]),_:1}),J(_e,null,{default:re(()=>[J(jl,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:re(()=>[Tt("span",hh,Xt(g(l)("logoMonochrome")),1)]),default:re(()=>[J(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:re(()=>[g(f).oneColorLogo?(Yt(),Pn(ua,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Ln("border: 1px dashed "+g(j)(g(r),"white")),size:125,src:g(ae)(g(f).oneColorLogo),onClick:p[15]||(p[15]=()=>{m.value="monochrome-logos",s.value=!0})},null,8,["style","src"])):(Yt(),Sl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Ln(`border: 1px dashed ${g(j)(g(r),"white")}; width: 125px; height: 125px`),onClick:p[16]||(p[16]=()=>{m.value="monochrome-logos",s.value=!0})},[Tt("div",bh,[J(g(q),{size:"50"},{default:re(()=>[J(g(ie),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(g(l)("import")),1)])],4)),g(f).oneColorLogo?(Yt(),Pn(rt,{key:2,quaternary:"",onClick:p[17]||(p[17]=()=>g(f).oneColorLogo="")},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),default:re(()=>[Uo(" "+Xt(g(l)("clear")),1)]),_:1})):ca("",!0)]),_:1})]),_:1})]),_:1}),J(_e,null,{default:re(()=>[J(jl,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:re(()=>[Tt("span",kh,Xt(g(l)("iconMonochrome")),1)]),default:re(()=>[J(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:re(()=>[g(f).oneColorIcon?(Yt(),Pn(ua,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Ln("border: 1px dashed "+g(j)(g(r),"white")),size:125,src:g(ae)(g(f).oneColorIcon),onClick:p[18]||(p[18]=()=>{m.value="monochrome-icons",s.value=!0})},null,8,["style","src"])):(Yt(),Sl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Ln(`border: 1px dashed ${g(j)(g(r),"white")}; width: 125px; height: 125px`),onClick:p[19]||(p[19]=()=>{m.value="monochrome-icons",s.value=!0})},[Tt("div",wh,[J(g(q),{size:"50"},{default:re(()=>[J(g(ie),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(g(l)("import")),1)])],4)),g(f).oneColorIcon?(Yt(),Pn(rt,{key:2,quaternary:"",onClick:p[20]||(p[20]=()=>g(f).oneColorIcon="")},{icon:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),default:re(()=>[Uo(" "+Xt(g(l)("clear")),1)]),_:1})):ca("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p[31]||(p[31]=Tt("br",null,null,-1)),J(jl,{hoverable:"",segmented:"",size:"small"},{header:re(()=>[Tt("span",xh,Xt(g(l)("websiteColors")),1)]),default:re(()=>[J(Ee,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:re(()=>[J(_e,null,{default:re(()=>[Tt("div",$h,[Tt("span",Ch,Xt(g(l)("baseColor")),1),Tt("div",Ih,[g(f).primaryColor?(Yt(),Sl(Mo,{key:0},[J(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[21]||(p[21]=Re=>g(f).primaryColor="")},{default:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),_:1}),J(de,{vertical:""})],64)):ca("",!0),J(He,{"pure-color":g(f).primaryColor,"onUpdate:pureColor":p[22]||(p[22]=Re=>g(f).primaryColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(le)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),J(_e,null,{default:re(()=>[Tt("div",Vh,[Tt("span",Sh,Xt(g(l)("secondaryColor")),1),Tt("div",Eh,[g(f).secondaryColor?(Yt(),Sl(Mo,{key:0},[J(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[23]||(p[23]=Re=>g(f).secondaryColor="")},{default:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),_:1}),J(de,{vertical:""})],64)):ca("",!0),J(He,{"pure-color":g(f).secondaryColor,"onUpdate:pureColor":p[24]||(p[24]=Re=>g(f).secondaryColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(le)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),J(_e,null,{default:re(()=>[Tt("div",Uh,[Tt("span",Mh,Xt(g(l)("tertiaryColor")),1),Tt("div",Th,[g(f).accentColor?(Yt(),Sl(Mo,{key:0},[J(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[25]||(p[25]=Re=>g(f).accentColor="")},{default:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:"carbon:trash-can"})]),_:1})]),_:1}),J(de,{vertical:""})],64)):ca("",!0),J(He,{"pure-color":g(f).accentColor,"onUpdate:pureColor":p[26]||(p[26]=Re=>g(f).accentColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(le)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Ui,g(x).currentMenuItemKey==="branding"]]),Mi(Tt("section",Nh,[J(jl,{hoverable:""},{default:re(()=>[J(Ya,{ref_key:"socialNetworksFormRef",ref:B,model:g(f),rules:$e,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:re(()=>[J(Ee,{"x-gap":"12",span:24},{default:re(()=>[(Yt(),Sl(Mo,null,ud($,Re=>J(pe,{key:Re.name,span:12,path:Re.name},{label:re(()=>[Tt("b",Dh,Xt(g(l)(Re.name)),1)]),default:re(()=>[J(R,{value:g(f)[Re.name],"onUpdate:value":Ml=>g(f)[Re.name]=Ml,placeholder:g(l)(Re.name),class:"w-full"},{prefix:re(()=>[J(g(q),null,{default:re(()=>[J(g(ie),{icon:Re.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ui,g(x).currentMenuItemKey==="social-networks"]]),g(x).currentMenuItemKey==="newsletter-email"?(Yt(),Sl("section",zh,[J(sy)])):ca("",!0),g(x).currentMenuItemKey==="newsletter-phone"?(Yt(),Sl("section",Ah,[J(by)])):ca("",!0),g(x).currentMenuItemKey==="newsletter-campaign"?(Yt(),Sl("section",Ph,[J(W1)])):ca("",!0),g(x).currentMenuItemKey==="ads"?(Yt(),Sl("section",Lh,[J(Zu)])):ca("",!0),g(x).currentMenuItemKey==="videos"?(Yt(),Sl("section",Bh,[J(yv)])):ca("",!0),g(x).currentMenuItemKey==="content-models"?(Yt(),Sl("section",Fh,[J(g1)])):ca("",!0),g(x).currentMenuItemKey==="menus"?(Yt(),Sl("section",Oh,[J(i_)])):ca("",!0),g(x).currentMenuItemKey==="content-permalinks"?(Yt(),Sl("section",qh,[J(q1)])):ca("",!0),g(x).currentMenuItemKey==="page-sections"?(Yt(),Sl("section",Rh,[J(Kg)])):ca("",!0),(Yt(!0),Sl(Mo,null,ud(g(fe),(Re,Ml)=>(Yt(),Sl(Mo,{key:`${Re.slug}-page`},[g(x).currentMenuItemKey===`${Re.slug}-page`?(Yt(),Sl("section",{key:`${Re.slug}-page`},[J(Om,{slug:Re.slug,"open-form-modal":$t,onDelete:()=>{g(x).currentMenuItemKey=(g(fe)?.length||0)>1?`${g(fe)?.[Ml-1].slug}-page`:e[0],g(P)()}},null,8,["slug","onDelete"])])):ca("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),J(ht,{show:g(s),"onUpdate:show":p[27]||(p[27]=Re=>Ei(s)?s.value=Re:null),title:g(l)("selectImage"),"upload-config":{folder:g(m),limit:0,maxSize:0,baseUrl:g(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:h},null,8,["show","title","upload-config"]),J(Ut,{show:g(z),"onUpdate:show":p[29]||(p[29]=Re=>Ei(z)?z.value=Re:null),loading:g(D)||g(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:g(ue)?g(l)("editPage"):g(l)("addPage"),"positive-text":g(l)("validate"),"negative-text":g(l)("cancel"),onPositiveClick:Vt,onNegativeClick:p[30]||(p[30]=Re=>z.value=!1)},{default:re(()=>[J(Ya,{ref_key:"addPageFormRef",ref:ye,model:g(Ne),rules:oe,"show-require-mark":!1,size:"medium"},{default:re(()=>[J(he,{"show-label":!1,path:"title",class:"mt-5"},{default:re(()=>[J(at,{modelValue:g(Ne).title,"onUpdate:modelValue":p[28]||(p[28]=Re=>g(Ne).title=Re),placeholder:g(l)("title"),class:"w-full",sync:"",onKeydown:th(Vt,["enter"])},{label:re(()=>[Uo(Xt(g(l)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Kb=Kn(Qh,[["__scopeId","data-v-eb0e0d24"]]);export{Kb as default};
