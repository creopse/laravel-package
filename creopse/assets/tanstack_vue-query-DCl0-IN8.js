import"./vue-demi-colorpicker-I3jxdRIm.js";import{Q as I,M as T,a as _,i as V,s as g,b as $,c as F,d as K}from"./tanstack_query-core-D1STKOyV.js";import{i as M,u as S,r as N,s as U,a as x,b as v,c as O,t as P,o as R,d as k}from"./vue_reactivity-BQ3ZeWNI.js";import{h as Y,i as B,n as W,c as w,w as d}from"./vue_runtime-core-Dg0D__bv.js";var H="VUE_QUERY_CLIENT";function A(e){const t=e?`:${e}`:"";return`${H}${t}`}function b(e,t){Object.keys(e).forEach(i=>{e[i]=t[i]})}function C(e,t,i="",s=0){if(t){const n=t(e,i,s);if(n===void 0&&M(e)||n!==void 0)return n}if(Array.isArray(e))return e.map((n,u)=>C(n,t,String(u),s+1));if(typeof e=="object"&&L(e)){const n=Object.entries(e).map(([u,o])=>[u,C(o,t,u,s+1)]);return Object.fromEntries(n)}return e}function J(e,t){return C(e,t)}function r(e,t=!1){return J(e,(i,s,n)=>{if(n===1&&s==="queryKey")return r(i,!0);if(t&&X(i))return r(i(),t);if(M(i))return r(S(i),t)})}function L(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function X(e){return typeof e=="function"}function D(e=""){if(!Y())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=A(e),i=B(t);if(!i)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return i}var Z=class extends I{find(e){return super.find(r(e))}findAll(e={}){return super.findAll(r(e))}},z=class extends T{find(e){return super.find(r(e))}findAll(e={}){return super.findAll(r(e))}},G=class extends _{constructor(e={}){const t={defaultOptions:e.defaultOptions,queryCache:e.queryCache||new Z,mutationCache:e.mutationCache||new z};super(t),this.isRestoring=N(!1)}isFetching(e={}){return super.isFetching(r(e))}isMutating(e={}){return super.isMutating(r(e))}getQueryData(e){return super.getQueryData(r(e))}ensureQueryData(e){return super.ensureQueryData(r(e))}getQueriesData(e){return super.getQueriesData(r(e))}setQueryData(e,t,i={}){return super.setQueryData(r(e),t,r(i))}setQueriesData(e,t,i={}){return super.setQueriesData(r(e),t,r(i))}getQueryState(e){return super.getQueryState(r(e))}removeQueries(e={}){return super.removeQueries(r(e))}resetQueries(e={},t={}){return super.resetQueries(r(e),r(t))}cancelQueries(e={},t={}){return super.cancelQueries(r(e),r(t))}invalidateQueries(e={},t={}){const i=r(e),s=r(t);if(super.invalidateQueries({...i,refetchType:"none"},s),i.refetchType==="none")return Promise.resolve();const n={...i,type:i.refetchType??i.type??"active"};return W().then(()=>super.refetchQueries(n,s))}refetchQueries(e={},t={}){return super.refetchQueries(r(e),r(t))}fetchQuery(e){return super.fetchQuery(r(e))}prefetchQuery(e){return super.prefetchQuery(r(e))}fetchInfiniteQuery(e){return super.fetchInfiniteQuery(r(e))}prefetchInfiniteQuery(e){return super.prefetchInfiniteQuery(r(e))}setDefaultOptions(e){super.setDefaultOptions(r(e))}setQueryDefaults(e,t){super.setQueryDefaults(r(e),r(t))}getQueryDefaults(e){return super.getQueryDefaults(r(e))}setMutationDefaults(e,t){super.setMutationDefaults(r(e),r(t))}getMutationDefaults(e){return super.getMutationDefaults(r(e))}},ue={install:(e,t={})=>{const i=A(t.queryClientKey);let s;if("queryClient"in t&&t.queryClient)s=t.queryClient;else{const o="queryClientConfig"in t?t.queryClientConfig:void 0;s=new G(o)}V||s.mount();let n=()=>{};if(t.clientPersister){s.isRestoring.value=!0;const[o,c]=t.clientPersister(s);n=o,c.then(()=>{s.isRestoring.value=!1,t.clientPersisterOnSuccess?.(s)})}const u=()=>{s.unmount(),n()};if(e.onUnmount)e.onUnmount(u);else{const o=e.unmount;e.unmount=function(){u(),o()}}e.provide(i,s)}};function ee(e,t,i){const s=D(),n=w(()=>{const a=r(t);typeof a.enabled=="function"&&(a.enabled=a.enabled());const Q=s.defaultQueryOptions(a);return Q._optimisticResults=s.isRestoring.value?"isRestoring":"optimistic",Q}),u=new e(s,n.value),o=n.value.shallow?U(u.getCurrentResult()):x(u.getCurrentResult());let c=()=>{};d(s.isRestoring,a=>{a||(c(),c=u.subscribe(Q=>{b(o,Q)}))},{immediate:!0});const h=()=>{u.setOptions(n.value),b(o,u.getCurrentResult())};d(n,h),R(()=>{c()});const f=(...a)=>(h(),o.refetch(...a)),l=()=>new Promise((a,Q)=>{let m=()=>{};const q=()=>{if(n.value.enabled!==!1){u.setOptions(n.value);const E=u.getOptimisticResult(n.value);E.isStale?(m(),u.fetchOptimistic(n.value).then(a,j=>{g(n.value.throwOnError,[j,u.getCurrentQuery()])?Q(j):a(u.getCurrentResult())})):(m(),a(E))}};q(),m=d(n,q)});d(()=>o.error,a=>{if(o.isError&&!o.isFetching&&g(n.value.throwOnError,[a,u.getCurrentQuery()]))throw a});const p=n.value.shallow?v(o):O(o),y=P(p);for(const a in o)typeof o[a]=="function"&&(y[a]=o[a]);return y.suspense=l,y.refetch=f,y}function ie(e,t){return ee($,e)}function oe({queries:e,...t},i){const s=D(),n=w(()=>S(e).map(l=>{const p=r(l);typeof p.enabled=="function"&&(p.enabled=l.enabled());const y=s.defaultQueryOptions(p);return y._optimisticResults=s.isRestoring.value?"isRestoring":"optimistic",y})),u=new F(s,n.value,t),o=()=>{const[f,l]=u.getOptimisticResult(n.value,t.combine);return l(f.map((p,y)=>({...p,refetch:async(...a)=>{const[{[y]:Q}]=u.getOptimisticResult(n.value,t.combine);return Q.refetch(...a)}})))},c=k(o());let h=()=>{};return d(s.isRestoring,f=>{f||(h(),h=u.subscribe(()=>{c.value=o()}),c.value=o())},{immediate:!0}),d(n,f=>{u.setQueries(f,t),c.value=o()}),R(()=>{h()}),t.shallow?v(c):O(c)}function ae(e,t){const i=D(),s=w(()=>i.defaultMutationOptions(r(e))),n=new K(i,s.value),u=s.value.shallow?U(n.getCurrentResult()):x(n.getCurrentResult()),o=n.subscribe(l=>{b(u,l)}),c=(l,p)=>{n.mutate(l,p).catch(()=>{})};d(s,()=>{n.setOptions(s.value)}),R(()=>{o()});const h=s.value.shallow?v(u):O(u),f=P(h);return d(()=>u.error,l=>{if(l&&g(s.value.throwOnError,[l]))throw l}),{...f,mutate:c,mutateAsync:u.mutate,reset:u.reset}}export{G as Q,ue as V,D as a,ae as b,oe as c,ie as u};
