import{i as l}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as d}from"./validator-DC79P2ge.js";import{_ as V}from"./AuthLayout.vue_vue_type_script_setup_true_lang-mdqk0YUy.js";import{I as A}from"./iconify_vue-DXPEksg3.js";import{c as L,d as B,m as T,R as i}from"./main-D6UvRL7q.js";import{u as D}from"./vue-router-DjpI5axN.js";import{a as q,b as H,c as O,B as M,h as U}from"./naive-ui-BrWbllCz.js";import{u as $}from"./vue-i18n-B92nPylK.js";const{unref:z}=await l("vue"),{defineComponent:G}=await l("vue"),{unref:e,resolveComponent:le,createVNode:r,withCtx:s,toDisplayString:f,createTextVNode:p,createElementVNode:b,openBlock:W,createBlock:j}=await l("vue"),F={class:"flex items-center my-4 before:flex-1 before:border-t before:border-gray-300 before:mt-0.5 after:flex-1 after:border-t after:border-gray-300 after:mt-0.5"},J={class:"w-full text-center font-semibold mx-4 mb-0"},{defineComponent:K,ref:v,watch:Q}=await l("vue"),X=K({name:i.RESET_PASSWORD.NAME}),ie=G({...X,setup(Y){const{t:o}=$(),m=D(),g=L(),{getSettingValue:w}=B(),{mutate:h,isPending:k}=T(),u=v(null),n=v({email:""}),y={email:[{required:!0,message:o("fillRequired")},{trigger:["input"],validator(a,t){return t&&!d.isEmail(t)?new Error(o("invalidEmail")):!0}}]},E=a=>{a.preventDefault(),u.value?.validate(async t=>{t||h({email:n.value.email},{onSuccess:()=>{n.value={email:""}}})})},S=w("disableInstaller","boolean");return Q(()=>g.isUserConnected,a=>{a&&m.replace(i.HOME.PATH)},{immediate:!0}),(a,t)=>{const x=O,C=H,R=A,N=U,c=M,P=q,I=V;return W(),j(I,{title:e(o)("forgotPassword"),subtitle:e(o)("enterEmailToReceiveResetLink"),"display-server-alerts":!e(S)},{default:s(()=>[r(P,{ref_key:"formRef",ref:u,model:e(n),rules:y,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:s(()=>[r(C,{label:e(o)("addressEmail"),path:"email"},{default:s(()=>[r(x,{value:e(n).email,"onUpdate:value":t[0]||(t[0]=_=>e(n).email=_),placeholder:e(o)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),r(c,{type:"primary",block:"",secondary:"",disabled:!e(n).email||!("_v"in a?a._v:z(d)).isEmail(e(n).email),loading:e(k),onClick:E},{icon:s(()=>[r(N,null,{default:s(()=>[r(R,{icon:"carbon:reset"})]),_:1})]),default:s(()=>[p(" "+f(e(o)("resetPassword")),1)]),_:1},8,["disabled","loading"]),b("div",F,[b("p",J,[r(c,{text:"",onClick:t[1]||(t[1]=_=>e(m).push(e(i).LOGIN.PATH))},{default:s(()=>[p(f(e(o)("toLogin")),1)]),_:1})])])]),_:1},8,["model"])]),_:1},8,["title","subtitle","display-server-alerts"])}}});export{ie as default};
