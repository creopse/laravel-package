import{i as w}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{_ as j}from"./index.vue_vue_type_style_index_0_lang-DrbEnv8N.js";import{I as G}from"./iconify_vue-BwapRRpV.js";import{d as M}from"./pinia-DbZVydD4.js";import{u as q,d as D}from"./index-B2LlKIv2.js";import{a as N}from"./axios-ChUjVlRB.js";import{B as H,j as P,F as Q}from"./naive-ui-CrTIpLJ9.js";import{u as X}from"./vue-i18n-CWrb4u3f.js";import{_ as Y}from"./fawmi_vue-google-maps-DHKJ2mA8.js";const{defineComponent:Z}=await w("vue"),{renderSlot:ee,createElementVNode:f,unref:o,resolveComponent:ye,createVNode:g,withCtx:I,openBlock:d,createBlock:y,createCommentVNode:S,Fragment:te,createElementBlock:E,isRef:v,normalizeStyle:V}=await w("vue"),{defineComponent:le,ref:x,computed:F,watch:T,h:_}=await w("vue"),ae={class:"flex justify-between gap-2"},oe={class:"flex gap-0.5"},ne=le({name:"I18nInput"}),se=Z({...ne,props:{type:{default:"text"},size:{default:"medium"},autosize:{type:[Boolean,Object],default:!1},placeholder:{default:""},inputStyles:{default:()=>({width:"100%"})},displayFlag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},rows:{default:2},contentEditorItems:{default:()=>["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo","|","sourceEditing"]},shouldNotGroupEditorWhenFull:{type:Boolean,default:!1},enableUpload:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue","codeChange"],setup(U,{emit:O}){const t=U,p=O,c=M("i18n-input",()=>({langCode:x("")}))(),a=x(""),u=F(()=>{let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e}),s=F({get(){let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e[a.value]||""},set(e){let l;try{l=JSON.parse(t.modelValue||"{}")}catch{l={}}l[a.value]=e,p("update:modelValue",JSON.stringify(l))}});T(()=>a.value,e=>{p("codeChange",e),c.langCode=e}),T(()=>c.langCode,e=>{t.sync&&(a.value=e)}),c.langCode&&(a.value=c.langCode);const{languages:h}=q();h.length&&!a.value&&(a.value=h[0].value);const A=e=>_("div",{class:"flex items-center"},[t.displayFlag?_("img",{src:e.flag,style:{width:"14px",marginRight:"4px"}}):_("span"),_("b",{},{default:()=>`${String(e.value).toUpperCase()}`})]),{t:k,locale:m}=X(),J=()=>{const e=u.value;e[a.value]=e[m.value],p("update:modelValue",JSON.stringify(e))},z=D(),b=z.getSettingValue("translation.googleTranslate.apiKey","string"),C=z.getSettingValue("translation.deeplTranslate.apiKey","string"),K=async(e,l)=>{const r="https://api-free.deepl.com/v2/translate";try{return(await N.post(r,new URLSearchParams({auth_key:C,text:e,target_lang:l.toUpperCase()}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.translations[0].text}catch(n){return console.error("Translation error:",n?.response?.data||n.message),""}},L=async(e,l)=>{const r=`https://translation.googleapis.com/language/translate/v2?key=${b}`;try{return(await N.post(r,{q:e,target:l,format:"text"})).data.data.translations[0].translatedText}catch(n){return console.error("Translation error:",n?.response?.data||n.message),""}},W=async()=>{const e=u.value;b?e[a.value]=await L(e[m.value],a.value):C&&(e[a.value]=await K(e[m.value],a.value)),p("update:modelValue",JSON.stringify(e))};return(e,l)=>{const r=G,n=H,$=P,R=j,B=Q;return d(),E("div",null,[f("div",ae,[f("div",null,[ee(e.$slots,"label",{},void 0,!0)]),f("div",oe,[o(u)&&o(u)[o(m)]&&!o(u)[o(a)]?(d(),E(te,{key:0},[o(b)||o(C)?(d(),y(n,{key:0,size:"tiny",title:o(k)("translate"),onClick:W},{icon:I(()=>[g(r,{icon:"carbon:translate"})]),_:1},8,["title"])):S("",!0),g(n,{title:o(k)("fillIn"),size:"tiny",onClick:J},{icon:I(()=>[g(r,{icon:"carbon:container-image-push"})]),_:1},8,["title"])],64)):S("",!0),g($,{value:o(a),"onUpdate:value":l[0]||(l[0]=i=>v(a)?a.value=i:null),disabled:t.disabled,options:o(h),"render-label":A,class:"!w-[80px] !border-t-0",filterable:"",size:"tiny"},null,8,["value","disabled","options"])])]),f("div",null,[t.type=="editor"?(d(),y(R,{key:0,modelValue:o(s),"onUpdate:modelValue":l[1]||(l[1]=i=>v(s)?s.value=i:null),style:V(e.inputStyles),disabled:t.disabled,placeholder:e.placeholder,"toolbar-items":e.contentEditorItems,"should-not-group-when-full":t.shouldNotGroupEditorWhenFull,"enable-upload":t.enableUpload},null,8,["modelValue","style","disabled","placeholder","toolbar-items","should-not-group-when-full","enable-upload"])):t.type=="text"?(d(),y(B,{key:1,value:o(s),"onUpdate:value":l[2]||(l[2]=i=>v(s)?s.value=i:null),size:t.size,type:t.type,style:V(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","size","type","style","placeholder","disabled"])):t.type=="textarea"?(d(),y(B,{key:2,value:o(s),"onUpdate:value":l[3]||(l[3]=i=>v(s)?s.value=i:null),autosize:t.autosize,size:t.size,type:t.type,rows:e.rows,style:V(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","autosize","size","type","rows","style","placeholder","disabled"])):S("",!0)])])}}}),ve=Y(se,[["__scopeId","data-v-2ec7e993"]]);export{ve as _};
