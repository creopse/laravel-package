import{i as C}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{aJ as oe,aK as ue,u as _e,aL as pe,p as fe,aM as G,R as me}from"./main-DH7x7JSJ.js";import{I as m}from"./iconify_vue-DXPEksg3.js";import{u as he}from"./vue-router-DS5MTONl.js";import{ac as ae,ag as le,q as ie,B as se,C as ce,h,aj as j,ad as ye,p as ge,Z as xe,ak as we,$ as be,a0 as ve,ab as ke,F as Ne}from"./naive-ui-dfg6Ko-R.js";import{u as re}from"./vue-i18n-B92nPylK.js";import{_ as Ce}from"./fawmi_vue-google-maps-yyESU4s0.js";const{defineComponent:$e}=await C("vue"),{unref:l,resolveComponent:Ke,createVNode:a,withCtx:o,openBlock:I,createBlock:M,createCommentVNode:q,toDisplayString:V,createElementVNode:W,createTextVNode:D,withModifiers:Be,normalizeStyle:Se}=await C("vue"),ze=["innerHTML"],{ref:X}=await C("vue"),Ie=$e({__name:"Item",props:{item:{}},emits:["closeBox"],setup(K,{emit:g}){const i=K,L=g,{t:_,locale:v}=re(),A=he(),{markAsRead:R,buildMessage:H,deleteNotification:U,isUnread:F}=oe(),k=x=>{if(x.data.target)try{R({id:x.id,refetch:!0}),A.push(x.data.target),L("closeBox")}catch{}},$=X({title:"",content:""}),B=X(!1);return(async()=>{B.value=!0,$.value=await H(i.item),B.value=!1})(),(x,u)=>{const s=ce,w=j,c=m,r=h,y=se,N=ie,S=le,z=ae,Q=ye;return l(B)?(I(),M(z,{key:0,class:"item w-full"},{default:o(()=>[a(S,null,{header:o(()=>[a(s,{text:"",style:{width:"150px"}})]),"header-extra":o(()=>[a(w,{color:"gray",dot:""})]),description:o(()=>[a(s,{text:"",style:{width:"100%"},repeat:2})]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1}),a(N,{align:"center"},{default:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(I(),M(z,{key:1,class:"item w-full",style:Se(`cursor: ${i.item.data.target?"pointer":"default"}`),onClick:u[3]||(u[3]=p=>k(i.item))},{default:o(()=>[a(S,null,{header:o(()=>[W("span",{class:"title",onClick:u[0]||(u[0]=p=>k(i.item))},V(l($).title),1)]),"header-extra":o(()=>[l(F)(i.item)?(I(),M(w,{key:0,dot:""})):q("",!0)]),description:o(()=>[W("span",{class:"content",innerHTML:l($).content},null,8,ze)]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[D(" "+V(l(ue)(i.item?.createdAt||"",{locale:l(v)})),1)]),_:1}),a(N,{align:"center"},{default:o(()=>[l(F)(i.item)?(I(),M(y,{key:0,text:"",onClick:u[1]||(u[1]=Be(p=>l(R)({id:i.item.id,refetch:!0}),["stop"]))},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:checkmark"})]),_:1})]),default:o(()=>[D(" "+V(l(_)("read")),1)]),_:1})):q("",!0),i.item.data.removable?(I(),M(Q,{key:1,"positive-text":l(_)("yes"),"negative-text":l(_)("no"),trigger:"hover",onPositiveClick:u[2]||(u[2]=p=>l(U)({id:i.item.id}))},{trigger:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[D(" "+V(l(_)("delete")),1)]),_:1})]),default:o(()=>[D(" "+V(l(_)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),{defineComponent:Me}=await C("vue"),{unref:n,createVNode:e,withCtx:t,toDisplayString:Y,createTextVNode:ee,resolveComponent:Pe,isRef:Ve,renderList:Te,Fragment:je,openBlock:b,createElementBlock:te,createBlock:T,normalizeStyle:ne}=await C("vue"),{defineComponent:Le,ref:Ae,computed:J,h:f,watch:Re}=await C("vue"),Fe=Le({name:me.NOTIFICATIONS.NAME}),Ee=Me({...Fe,setup(K){const{t:g}=re(),{isMdScreen:i,isSmScreen:L}=_e(),_=Ae("all"),v=ge(),{data:A,refetch:R,isLoading:H,isFetching:U}=pe(),F=fe(),{userUnreadNotifications:k,markAllAsRead:$}=oe(),B=J(()=>[{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>g("all")}),f(j,{value:G(A.value?.length||0),type:"info"})]),key:"all",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-multiple"})})},{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>g("unread")}),f(j,{value:G(k.value?.length||0),type:"error"})]),key:"unread",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-open-multiple"})})}]),O=J(()=>{let s;switch(_.value){case"all":s=A.value||[];break;case"unread":s=k.value||[];break;default:s=[];break}return s}),x=J(()=>F.contentLayoutSize.height-100),u=async()=>{v.start(),await R(),v.finish()};return Re(()=>U.value,s=>{s?v.start():v.finish()},{immediate:!0}),(s,w)=>{const c=se,r=ie,y=we,N=ve,S=be,z=ke,Q=Ne,p=xe,d=ce,P=le,Z=ae;return b(),te("section",null,[n(H)?(b(),T(p,{key:1,style:ne("height: "+n(x)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(d,{text:"",style:{width:"125px"}}),e(d,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:t(()=>[e(d,{height:"35px",width:"100%",class:"mb-1"}),e(d,{height:"35px",width:"100%"})]),_:1}),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[e(z,{hoverable:"",clickable:"",bordered:""},{default:t(()=>[e(Z,{class:"item w-full"},{default:t(()=>[e(P,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(j),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{class:"item w-full"},{default:t(()=>[e(P,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(j),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(b(),T(p,{key:0,style:ne("height: "+n(x)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(c,{text:"",onClick:u},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:restart"})]),_:1})]),default:t(()=>[ee(" "+Y(n(g)("refresh")),1)]),_:1}),e(c,{text:"",disabled:!n(k)?.length,onClick:w[0]||(w[0]=E=>n($)({refetch:!0}))},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:checkmark"})]),_:1})]),default:t(()=>[ee(" "+Y(n(g)("allMarkedAsRead")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:n(i)||n(L),width:260,bordered:""},{default:t(()=>[e(N,{value:n(_),"onUpdate:value":w[1]||(w[1]=E=>Ve(_)?_.value=E:null),collapsed:n(i)||n(L),"collapsed-width":64,"collapsed-icon-size":22,options:n(B)},null,8,["value","collapsed","options"])]),_:1},8,["collapsed"]),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[n(O).length?(b(),T(z,{key:0,hoverable:"",clickable:"",bordered:""},{default:t(()=>[(b(!0),te(je,null,Te(n(O),(E,de)=>(b(),T(Ie,{key:de,item:E},null,8,["item"]))),128))]),_:1})):(b(),T(Q,{key:1,description:n(g)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:t(()=>[e(n(h),{size:"56"},{default:t(()=>[e(n(m),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}}),Ze=Ce(Ee,[["__scopeId","data-v-52995372"]]);export{Ze as default};
