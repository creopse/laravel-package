import{_ as It,a as Kt,b as ya}from"./index.vue_vue_type_script_setup_true_lang-84b24b9e.js";import{_ as Da}from"./PageLayout.vue_vue_type_script_setup_true_lang-b8ee0a59.js";import{_ as bt}from"./I18nInput-2b965d94.js";import{f as $l,p as ot,o as La,v as ml,T as Pa,a as Na,w as Ra}from"./vue_runtime-dom-c0cb2070.js";import{e as Ze,u as We,f as yt,r as Lt,p as Xt,q as fa,s as He,i as Zt,t as ga,_ as Pt,v as ba,w as Oa,x as vl,h as ha,j as qa,R as Fa}from"./index-21fa1843.js";import{I as be}from"./iconify_vue-6750bec6.js";import{_ as gl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-9060f993.js";import{R as Qe}from"./response-error-code-87d1097e.js";import{d as ll,a as Fe}from"./pinia-5dd13ed8.js";import{_ as he}from"./lodash-a9971f22.js";import{c as ct,b as nt,a as st,_ as Te,g as it,Z as Nt,V as zt,N as ce,L as lt,ag as $t,a2 as wt,P as Yt,a4 as ut,E as Xe,H as Ft,I as ht,a8 as bl,a9 as hl,ah as ja,F as pt,G as ft,ab as tl,a7 as kl,aa as ka,j as Vt,R as Rt,a5 as Vl,ac as wa,a3 as Tl,M as Gt,ai as zl,aj as Ba,$ as al,a0 as nl,W as wl,U as xa,a1 as sl,ak as Ka,al as Ya,k as Ga,O as Ca,J as Ha,am as Ia,e as $a,an as Wa,ao as Ja,ap as Xa,h as Za,n as Qa,o as en}from"./naive-ui-0caedd43.js";import{d as je,aF as _t,o as n,c as E,Y as t,aO as l,l as L,P as z,F as me,ar as Pe,a as g,Q as _e,i as vt,h as re,p as De,ag as Ht,as as xl,W as Va,w as kt,aH as tn,v as dl,r as ln,b as Ul,s as At,e as Ta}from"./vue_runtime-core-4f5fb440.js";import{u as Ge}from"./vue-i18n-84a05dd5.js";import{r as i,u as e,c as Ie,a as qt}from"./vue_reactivity-852d8377.js";import{t as r,a as Ye,n as Oe}from"./vue_shared-7dcc3b7f.js";import{_ as Ut}from"./fawmi_vue-google-maps-52673af8.js";import{o as an,a as nn}from"./vueuse_core-e3c6c607.js";import{s as sn}from"./vue-virtual-scroller-50f85086.js";import{i as ma}from"./is-svg-36c6b3ab.js";import{_ as za}from"./index.vue_vue_type_style_index_0_lang-1419d88a.js";import{M as el}from"./vue-pick-colors-f58bc48b.js";import{v as dt}from"./uuid-cf522c50.js";import{s as Ua}from"./slugify-ce681755.js";import{r as on,u as fl}from"./xlsx-83e6f69b.js";import{_ as Qt}from"./validator-c0254ba9.js";import{_ as rn}from"./VueTelInputWrapper-967c8480.js";import{i as un}from"./libphonenumber-js-cdb4849e.js";import{a as dn}from"./vue-router-e670704e.js";import"./media-library-ab314cca.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-a3f3f4d5.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-d1f69174.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var Dt=(de=>(de.IMAGE="image",de.VIDEO="video",de))(Dt||{});const _l=ll("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:de}=Ze(),a=await de({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),cn={class:"flex items-center justify-between"},pn={class:"flex flex-col"},fn={class:"text-sm font-bold"},mn={class:"text-xs font-normal"},vn={key:0,class:"text-xs font-bold"},_n=je({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,displayFormErrors:Z,formatKey:ee}=We(),_=_t(de,"show"),{adIdentifiers:K}=Fe(_l()),{loadAdIdentifiers:$}=_l(),{isLightTheme:oe}=Fe(yt()),O=i(!1),Y=async()=>{O.value=!0,await $(),O.value=!1};Y();const G=ct(),U=nt(),v=st(),R=i(!1),M=i(!1),q=i(null),F=i(null),m=i({id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),le={id:[{required:!0,message:a("fillRequired")}]},P=W=>{q.value=he.cloneDeep(W),m.value=he.cloneDeep(W||{id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),M.value=!0},D=async()=>{var W;return(W=F.value)==null||W.validate(async S=>{var V,w,H,J,ne,o;if(!S){v.start(),R.value=!0;const A={id:m.value.id,reusable:m.value.reusable,contentType:m.value.contentType,contentSize:m.value.contentSize,params:m.value.params},T=await c({method:q.value?"put":"post",url:q.value?`/ad-identifiers/${q.value.id}`:"/ad-identifiers",data:A});if(T.failure&&T.error)switch((H=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:H.errorCode){case Qe.FORM_INVALID_DATA:Z((o=(ne=(J=T.error)==null?void 0:J.response)==null?void 0:ne.data)==null?void 0:o.data);break;default:U.error(a("anErrorOccurred"))}else U.success(a("success")),Y(),M.value=!1;R.value=!1,v.finish()}}),!1},te=async W=>{G.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/ad-identifiers/${W.id}`})).success?(U.success(a("success")),Y()):U.error(a("anErrorOccurred"))}})};return(W,S)=>{const V=be,w=Te,H=it,J=Nt,ne=zt,o=ce,A=lt,T=$t,p=wt,b=Yt,X=ut,d=Xe,u=Ft,C=ht,I=bl,x=hl,h=ja,k=pt,pe=ft;return n(),E(me,null,[t(X,{show:_.value,"onUpdate:show":S[2]||(S[2]=se=>_.value=se),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(O),onClick:S[0]||(S[0]=se=>P(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+r(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(O),onClick:S[1]||(S[1]=se=>_.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),L(" "+r(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(b,{show:e(O)},{default:l(()=>[e(K).length?(n(),z(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Pe(e(K),se=>(n(),z(A,{key:se.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",cn,[g("div",pn,[g("span",fn,r(se.id),1),g("div",null,[g("span",mn,r(se.contentType===e(Dt).IMAGE?e(a)("image"):e(a)("video")),1),se.contentSize?(n(),E("span",vn," Â ("+r(se.contentSize)+") ",1)):_e("",!0)])]),t(H,null,{default:l(()=>[t(J,{size:"medium",bordered:!1,type:se.reusable?"info":"warning"},{default:l(()=>[L(r(se.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ne,{vertical:"",class:Ye(["!mx-0",e(f)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(w,{size:"small",type:"warning",secondary:e(oe),onClick:Q=>P(se)},{default:l(()=>[t(o,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(oe),onClick:Q=>te(se)},{default:l(()=>[t(o,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),z(A,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(o,{size:"60"},{default:l(()=>[t(V,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(M),"onUpdate:show":S[8]||(S[8]=se=>Ie(M)?M.value=se:null),loading:e(R),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:S[9]||(S[9]=se=>M.value=!1)},{default:l(()=>[t(pe,{ref_key:"formRef",ref:F,model:e(m),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(d,{value:e(m).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":S[3]||(S[3]=se=>e(m).id=e(ee)(se))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(d,{value:e(m).contentSize,"onUpdate:value":S[4]||(S[4]=se=>e(m).contentSize=se),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(x,{value:e(m).reusable,"onUpdate:value":S[5]||(S[5]=se=>e(m).reusable=se),name:"reusable",class:"w-full"},{default:l(()=>[t(I,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(I,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(u,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(x,{value:e(m).contentType,"onUpdate:value":S[6]||(S[6]=se=>e(m).contentType=se),name:"contentType",class:"w-full"},{default:l(()=>[t(I,{value:e(Dt).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(I,{value:e(Dt).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(k,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(h,{value:e(m).params,"onUpdate:value":S[7]||(S[7]=se=>e(m).params=se),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),yn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},gn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},bn=["src"],hn=je({__name:"index",setup(de){const a=st(),c=nt(),f=ct(),Z=vt("appConfig"),{adIdentifiers:ee}=Fe(_l()),{loadAdIdentifiers:_}=_l(),{displayFormErrors:K,tr:$,fileUrl:oe,pickByTheme:O,appSecondaryColor:Y,isInDevMode:G}=We(),{request:U}=Ze(),{t:v,locale:R}=Ge(),M=i(!1),q=i([]),F=i(""),m=i(),le={pageSize:12,prefix:({itemCount:h})=>re("div",{class:"font-bold"},{default:()=>`${v("total")}: ${h}`})},P=[{title:v("preview"),key:"image",width:200,fixed:"left",render(h){var k;return((k=h.adIdentifier)==null?void 0:k.contentType)==Dt.IMAGE?re(tl,{src:h.contentUrl??"",objectFit:"cover",width:200,height:100}):re("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[re(ce,{size:50,color:Y.value},{default:()=>re(be,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(h){return re("small",{},{default:()=>h.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(h){return re("div",{},{default:()=>$(h.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(h){return re("small",{},{default:()=>$(h.description)})}},{title:v("status"),key:"isActive",width:100,render(h){return re(Nt,{type:h.display?"success":"warning",bordered:!1},{default:()=>h.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(h){return re("div",{},{default:()=>Lt(h.updatedAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(h){return re("div",{},{default:()=>Lt(h.createdAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:m,placeholder:v("search"),value:F.value,onInput:h=>{F.value=h}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(h){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{p(h)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await U({method:"delete",url:`/ads/${h.id}`})).success?(c.success(v("success")),te()):c.error(v("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],D=De(()=>{if(!F.value)return q.value;const h=q.value.filter(k=>{var pe;return k.pid.toLowerCase().includes(F.value.toLowerCase())||k.title.toLowerCase().includes(F.value.toLowerCase())||((pe=k.description)==null?void 0:pe.toLowerCase().includes(F.value.toLowerCase()))});return m.value&&m.value.focus(),h}),te=async()=>{M.value=!0;const h=await U({url:"/ads"});h.success&&h.result&&(q.value=h.result.data),await _(),M.value=!1};te();const W=i(!1),S=i(!1),V=i(!1),w=i(Dt.IMAGE),H=i(),J=i(null),ne=i(null),o=i({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),A={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},T=De({get:()=>!o.value.broadcastStart||!o.value.broadcastEnd?null:[o.value.broadcastStart||"",o.value.broadcastEnd||""],set:h=>{h?(o.value.broadcastStart=h[0],o.value.broadcastEnd=h[1]):(o.value.broadcastStart=null,o.value.broadcastEnd=null)}}),p=h=>{var k;J.value=he.cloneDeep(h),h?(o.value=he.cloneDeep(h),h.data||(o.value.data={})):o.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},H.value=(k=ee.value.find(pe=>pe.id==o.value.pid))==null?void 0:k.params,S.value=!0},b=h=>re("span",{},{default:()=>h.id+(h.contentSize?` (${h.contentSize})`:"")}),X=async()=>{var h;return(h=ne.value)==null||h.validate(async k=>{var pe,se,Q,y,j,we;if(!k)if(J.value)if(J.value.title!==o.value.title&&q.value.findIndex(ye=>ye.title==o.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),W.value=!0;const ye={pid:o.value.pid,title:o.value.title,display:o.value.display,content:o.value.content,description:o.value.description,data:o.value.data,broadcastStart:o.value.broadcastStart,broadcastEnd:o.value.broadcastEnd},Ve=await U({method:"put",url:`/ads/${J.value.id}`,data:ye});Ve.success&&Ve.result.data&&(c.success(v("success")),te()),W.value=!1,a.finish(),S.value=!1}else if(q.value.findIndex(ye=>ye.title==o.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),W.value=!0;const ye={pid:o.value.pid,title:o.value.title,display:o.value.display,content:o.value.content,description:o.value.description,data:o.value.data,broadcastStart:o.value.broadcastStart,broadcastEnd:o.value.broadcastEnd},Ve=await U({method:"post",url:"/ads",data:ye});if(Ve.failure&&Ve.error)switch((Q=(se=(pe=Ve.error)==null?void 0:pe.response)==null?void 0:se.data)==null?void 0:Q.errorCode){case Qe.FORM_INVALID_DATA:K((we=(j=(y=Ve.error)==null?void 0:y.response)==null?void 0:j.data)==null?void 0:we.data);break;default:c.error(v("anErrorOccurred"))}else c.success(v("success")),te();W.value=!1,a.finish(),S.value=!1}}),!1},d=i(!1),u=i(!1),C=i(!1),I=i(""),x=i("");return(h,k)=>{var ae,xe;const pe=it,se=It,Q=kl,y=gl,j=bt,we=pt,ye=ka,Ve=Vt,Me=Ft,fe=bl,Ne=hl,Ce=ht,ie=Rt,ge=Vl,N=ft,$e=ut,B=Kt;return n(),E(me,null,[t(se,{to:"#alt-action"},{default:l(()=>[t(pe,null,{default:l(()=>[e(G)?(n(),z(e(Te),{key:0,type:"warning",onClick:k[0]||(k[0]=ue=>V.value=!0)},{default:l(()=>[t(e(ce),{size:"26"},{default:l(()=>[t(e(be),{icon:"carbon:id"})]),_:1}),L(" "+r(e(v)("identifiers")),1)]),_:1})):_e("",!0),t(e(Te),{type:"primary",onClick:k[1]||(k[1]=ue=>p(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(y,null,{default:l(()=>[t(Q,{columns:P,data:e(D),pagination:le,loading:e(M),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t($e,{show:e(S),"onUpdate:show":k[12]||(k[12]=ue=>Ie(S)?S.value=ue:null),loading:e(W),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:X,onNegativeClick:k[13]||(k[13]=ue=>S.value=!1)},{default:l(()=>[t(N,{ref_key:"formRef",ref:ne,class:"mt-5",model:e(o),rules:A,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ce,{cols:"24","x-gap":12},{default:l(()=>[t(ie,{span:"12"},{default:l(()=>[t(we,{label:e(v)("title"),path:"title"},{default:l(()=>[t(j,{modelValue:e(o).title,"onUpdate:modelValue":k[2]||(k[2]=ue=>e(o).title=ue),placeholder:e(v)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(we,{label:e(v)("description"),path:"description"},{default:l(()=>[t(j,{modelValue:e(o).description,"onUpdate:modelValue":k[3]||(k[3]=ue=>e(o).description=ue),placeholder:e(v)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(we,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(ye,{"formatted-value":e(T),"onUpdate:formattedValue":k[4]||(k[4]=ue=>Ie(T)?T.value=ue:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Ce,{"x-gap":"12",span:24},{default:l(()=>[t(Me,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(Ve,{value:e(o).pid,"onUpdate:value":[k[5]||(k[5]=ue=>e(o).pid=ue),k[6]||(k[6]=()=>{var ue;H.value=(ue=e(ee).find(Se=>Se.id==e(o).pid))==null?void 0:ue.params})],"render-label":b,options:e(ee).map(ue=>({...ue,disabled:!ue.reusable&&(ue.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Me,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(Ne,{value:e(o).display,"onUpdate:value":k[7]||(k[7]=ue=>e(o).display=ue),name:"display",class:"w-full"},{default:l(()=>[t(fe,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(fe,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(ie,{span:"12"},{default:l(()=>[t(we,{label:e(v)("content"),path:"content"},{default:l(()=>[e(w)==e(Dt).VIDEO?(n(),z(ge,{key:0},{default:l(()=>[t(e(Te),{type:"primary",onClick:k[8]||(k[8]=()=>{u.value=!0})},{default:l(()=>[L(r(e(v)("select")),1)]),_:1}),t(e(Xe),{value:e(o).content?e(Xt)(e(o).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(o).content?(n(),E(me,{key:0},[t(e(Te),{type:"primary",ghost:"",onClick:k[9]||(k[9]=()=>{I.value=e(v)("video"),x.value=e(oe)(e(o).content),C.value=!0})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[L(" "+r(e(v)("play")),1)]),_:1}),t(e(Te),{type:"primary",ghost:"",onClick:k[10]||(k[10]=()=>{e(o).content=""})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(v)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})):(n(),E("div",yn,[g("div",{class:"cursor-pointer w-full h-[150px]",onClick:k[11]||(k[11]=()=>{d.value=!0})},[e(o).content?(n(),z(e(tl),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Oe("border: 1px dashed "+e(O)("green","white")),src:e(oe)(e(o).content||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(O)("green","white"))},[t(e(ce),{size:64},{default:l(()=>[t(e(be),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(H)&&Array.isArray(e(H))?(n(),z(we,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(Ce,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),E(me,null,Pe(e(H),(ue,Se)=>(n(),E(me,{key:Se},[t(ie,{span:10},{default:l(()=>[t(e(Xe),{value:ue,placeholder:ue,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(ie,{span:14},{default:l(()=>[t(e(Xe),{value:e(o).data[ue],"onUpdate:value":ze=>e(o).data[ue]=ze,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):_e("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t($e,{show:e(C),"onUpdate:show":k[14]||(k[14]=ue=>Ie(C)?C.value=ue:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(I)},{default:l(()=>[g("video",gn,[g("source",{src:e(x)},null,8,bn)])]),_:1},8,["show","title"]),t(B,{show:e(d),"onUpdate:show":k[15]||(k[15]=ue=>Ie(d)?d.value=ue:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ae=e(Z))==null?void 0:ae.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[16]||(k[16]=ue=>{e(o).content=ue,d.value=!1})},null,8,["show","title","upload-config"]),t(B,{show:e(u),"onUpdate:show":k[17]||(k[17]=ue=>Ie(u)?u.value=ue:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((xe=e(Z))==null?void 0:xe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[18]||(k[18]=ue=>{e(o).content=ue,u.value=!1})},null,8,["show","title","upload-config"]),t(_n,{show:e(V),"onUpdate:show":k[19]||(k[19]=ue=>Ie(V)?V.value=ue:null)},null,8,["show"])],64)}}});const kn=Ut(hn,[["__scopeId","data-v-7778d793"]]),wn={class:"w-full"},xn={class:"mb-2"},Cn={class:"text-base text-left"},In=["src","onClick"],$n=["src"],Vn=je({name:"AlbumsPicker"}),Tn=je({...Vn,props:Ht({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),c=de,{t:f}=Ge(),{fileUrl:Z}=We(),ee=i(!1),_=i(!1),K=i(0),$=i(""),oe=vt("appConfig"),O=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},Y=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},G=(v,R)=>{a.value&&Array.isArray(a.value[R].medias)?a.value[R].medias.splice(v,1):a.value&&(a.value[R].medias=[])},U=v=>{var M,q;const R=((q=(M=v.split("."))==null?void 0:M.pop())==null?void 0:q.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(R)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(R)?"video":"unknown"};return(v,R)=>{var w;const M=be,q=ce,F=Te,m=bt,le=tl,P=xl("Draggable"),D=wa,te=$t,W=lt,S=Kt,V=ut;return n(),E("section",wn,[g("section",xn,[t(W,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[g("div",Cn,r(c.title),1)]),"header-extra":l(()=>[c.readonly?_e("",!0):(n(),z(F,{key:0,quaternary:"",onClick:O},{icon:l(()=>[t(q,{size:"18"},{default:l(()=>[t(M,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),E(me,null,Pe(a.value,(H,J)=>(n(),z(W,{key:J,size:"small",embedded:"",hoverable:"",segmented:H.medias&&H.medias.length>0,class:"mb-4"},Va({header:l(()=>[t(m,{modelValue:H.name,"onUpdate:modelValue":ne=>H.name=ne,placeholder:e(f)("albumName"),"selector-span":5,disabled:c.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(te,{style:{"max-height":"100%"}},{default:l(()=>[H.medias&&H.medias.length>0?(n(),z(D,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(P,{list:H.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),E(me,null,Pe(H.medias,(ne,o)=>(n(),E("div",{key:"img-"+o,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[U(ne)==="image"?(n(),z(le,{key:0,"object-fit":"cover",src:e(Z)(ne)},null,8,["src"])):(n(),E("video",{key:1,muted:"",src:e(Z)(ne),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{$.value=e(Z)(ne),_.value=!0}},null,8,In)),c.readonly?_e("",!0):(n(),z(F,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:A=>G(o,J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):_e("",!0)]),_:2},1024)]),_:2},[c.readonly?void 0:{name:"header-extra",fn:l(()=>[t(F,{quaternary:"",class:"mr-2",onClick:()=>{K.value=J,ee.value=!0}},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("add")),1)]),_:2},1032,["onClick"]),R[3]||(R[3]=g("div",{class:"w-2"},null,-1)),t(F,{quaternary:"",type:"error",onClick:ne=>Y(J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(S,{show:e(ee),"onUpdate:show":R[0]||(R[0]=H=>Ie(ee)?ee.value=H:null),title:e(f)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((w=e(oe))==null?void 0:w.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:R[1]||(R[1]=H=>{a.value&&Array.isArray(a.value[e(K)].medias)?a.value[e(K)].medias.push(H):a.value&&(a.value[e(K)].medias=[H]),ee.value=!1})},null,8,["show","title","upload-config"]),t(V,{show:e(_),"onUpdate:show":R[2]||(R[2]=H=>Ie(_)?_.value=H:null),preset:"card",style:{width:"500px"},title:e(f)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e($)?(n(),E("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e($)},null,8,$n)):_e("",!0)]),_:1},8,["show","title"])])}}});const zn=Ut(Tn,[["__scopeId","data-v-338a28a2"]]);function Sa(){const{request:de}=Ze(),a=i([]),c=K=>{const $=K.split("_"),oe={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},O={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(G=>G.replace(/([A-Z])(?=\.\w+$)/,(U,v)=>O[v]||v))($[0]),$.length>1?oe[$[1]]:""]},f=()=>new Promise(K=>setTimeout(K)),Z=async K=>{a.value=[];let $=1;for(const[oe,O]of Object.entries(K)){$&&$%5e3===0&&await f();const[Y,G]=c(oe);a.value.push({id:$,name:Y,svgCode:O,library:G}),$+=1}return a.value},ee=i(!1);return{searchIcons:async K=>{let $={};ee.value=!0;const oe=await de({url:"/search-icons",method:"post",data:{query:K,decode:!1}});if(oe.success&&oe.result){try{$=JSON.parse(oe.result.data)}catch(O){$={},console.error(O)}$=await Z($)}return ee.value=!1,$},isSearching:ee,currentIconsList:a}}const Un=["innerHTML"],Sn=je({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(de){$l(ee=>({"95b6e21e":e(f),"22e3431a":e(c)}));const a=de,c=De(()=>a.color),f=De(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),Z=i();return kt(()=>a.data,async ee=>{var _,K;if(!ma(ee||"")){const{currentIconsList:$}=Sa();Z.value=((K=(_=$.value)==null?void 0:_.find(oe=>oe.name==ee))==null?void 0:K.svgCode)||""}},{immediate:!0}),(ee,_)=>(n(),E("i",{innerHTML:e(ma)(a.data||"")?a.data:e(Z)},null,8,Un))}});const Il=Ut(Sn,[["__scopeId","data-v-09747f05"]]),Mn={key:0,class:"multiple"},An={key:0,class:"item"},En={key:2,class:"flex items-center ml-2"},Dn={key:1,class:"placeholder"},Ln={class:"v3ip__search"},Pn=["placeholder"],Nn={key:0,class:"v3ip__loader"},Rn=["onClick"],On={key:1,class:"v3ip__empty"},qn={key:1,class:"default-text"},Fn={key:1,class:"default-text"},jn=je({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(de,{emit:a}){$l(P=>({86121764:e(f),24235862:e(ee)}));const c=de,f=De(()=>typeof c.selectorHeight=="number"?`${c.selectorHeight}px`:c.selectorHeight),Z=a,ee=i(c.selectedIconBgColor),_=i(""),K=i(!1),{currentIconsList:$,searchIcons:oe,isSearching:O}=Sa();kt(()=>_.value,P=>{oe(P)},{immediate:!0});const Y=De(()=>he.uniqBy(he.uniqBy($.value.filter(P=>{var w,H;const D=typeof c.iconLibrary=="string"&&P.library==c.iconLibrary||Array.isArray(c.iconLibrary)&&c.iconLibrary.includes(P.library)||c.iconLibrary=="all",te=!c.includeIcons||!c.includeIcons.length||c.includeIcons.includes(P.name),W=!c.includeSearch||((w=P.name)==null?void 0:w.toLocaleLowerCase().includes(c.includeSearch)),S=!c.excludeIcons||!c.excludeIcons.length||!c.excludeIcons.includes(P.name),V=!c.excludeSearch||!((H=P.name)!=null&&H.toLocaleLowerCase().includes(c.excludeSearch));return D&&te&&W&&S&&V}),"svgCode"),"name")),G=P=>c.valueType=="name"?P.name:P.svgCode,U=P=>{var D,te;return c.valueType=="name"?((te=(D=$.value)==null?void 0:D.find(W=>W.name==P))==null?void 0:te.svgCode)||"":P},v=P=>c.multiple?c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length?c.modelValue.findIndex(D=>D==G(P))>-1:!1:c.modelValue==G(P),R=P=>{if(P)if(c.multiple)if(c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length){const D=c.modelValue,te=c.modelValue.findIndex(W=>W==G(P));te>-1?D.splice(te,1):c.modelValue.length<c.multipleLimit&&typeof G(P)<"u"&&D.push(G(P)),Z("update:modelValue",D),Z("change",D,P)}else c.multipleLimit>0&&(Z("update:modelValue",[G(P)]),Z("change",[G(P)],P));else G(P)==c.modelValue?c.clearable&&Z("update:modelValue",null):Z("update:modelValue",G(P)),Z("change",P)},M=i();an(M,()=>K.value=!1);const q=i(),{width:F}=nn(q),m=tn(),le=P=>!!m[P];return(P,D)=>{var w,H,J,ne;const te=be,W=ce,S=Te,V=Yt;return n(),E("div",{ref_key:"picker",ref:M,class:"v3ip__custom-select",onBlur:D[4]||(D[4]=o=>K.value=!1)},[g("div",{class:Ye(["v3ip__selected",{open:e(K),disabled:c.disabled}]),onClick:D[2]||(D[2]=o=>K.value=c.disabled?!1:!e(K))},[!c.multiple&&c.modelValue||c.multiple&&Array.isArray(c.modelValue)&&((w=c.modelValue)!=null&&w.length)?(n(),E(me,{key:0},[c.multiple?(n(),E("div",Mn,[Array.isArray(c.modelValue)?(n(),E(me,{key:0},[(n(!0),E(me,null,Pe(c.modelValue||[],(o,A)=>(n(),E(me,{key:A},[A<c.selectedItemsToDisplay?(n(),z(Il,{key:0,class:"item",data:typeof U(o)=="string"?U(o):null,size:20,onClick:ot(T=>{var p;return R((p=e($))==null?void 0:p.find(b=>G(b)==o))},["stop"])},null,8,["data","onClick"])):_e("",!0)],64))),128)),((H=c.modelValue)==null?void 0:H.length)>c.selectedItemsToDisplay?(n(),E("div",An,[g("b",null," +"+r(((J=c.modelValue)==null?void 0:J.length)-c.selectedItemsToDisplay),1)])):_e("",!0)],64)):_e("",!0)])):(n(),z(Il,{key:1,data:typeof U(c.modelValue)=="string"?U(c.modelValue):null,size:20,onClick:D[0]||(D[0]=ot(o=>{var A;return R((A=e($))==null?void 0:A.find(T=>G(T)==c.modelValue))},["stop"]))},null,8,["data"])),(ne=c.modelValue)!=null&&ne.length&&c.clearable?(n(),E("div",En,[t(S,{type:"error",size:"tiny",secondary:"",onClick:D[1]||(D[1]=ot(()=>{Z("update:modelValue",c.multiple?[]:null)},["stop"]))},{default:l(()=>[t(W,null,{default:l(()=>[t(te,{icon:"mdi:close"})]),_:1})]),_:1})])):_e("",!0)],64)):(n(),E("span",Dn,r(c.placeholder),1))],2),t(Pa,{name:"fade"},{default:l(()=>[dl(g("div",null,[g("div",Ln,[dl(g("input",{"onUpdate:modelValue":D[3]||(D[3]=o=>Ie(_)?_.value=o:null),type:"text",name:"search",placeholder:c.searchPlaceholder},null,8,Pn),[[La,e(_)]])]),e(O)?(n(),E("div",Nn,[t(V,{size:"small"})])):(n(),E(me,{key:1},[e(Y)&&e(Y).length?(n(),z(e(sn),{key:0,ref_key:"scroller",ref:q,class:"v3ip__items",items:e(Y),"item-size":40,"grid-items":4,"item-secondary-size":e(F)/4},{default:l(({item:o})=>[g("div",{class:Ye({active:v(o)}),onClick:A=>R(o)},[t(Il,{data:typeof o.svgCode=="string"?o.svgCode:null,size:24,color:v(o)?c.selectedIconColor:void 0},null,8,["data","color"])],10,Rn)]),_:1},8,["items","item-secondary-size"])):(n(),E("div",On,[e(_)?(n(),E(me,{key:0},[le("empty")?ln(P.$slots,"empty",{key:0},void 0,!0):(n(),E("div",qn,[g("small",null,r(c.emptyText),1)]))],64)):(n(),E("div",Fn,[g("small",null,r(c.iconsListPlaceholder),1)]))]))],64))],512),[[ml,e(K)]])]),_:3})],544)}}});const Ma=Ut(jn,[["__scopeId","data-v-20cc11c7"]]),Bn={class:"w-full"},Kn={class:"mb-2"},Yn={class:"text-base text-left"},Gn=je({name:"GridImagesPicker"}),Hn=je({...Gn,props:Ht({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),c=vt("appConfig"),f=de,{t:Z}=Ge(),{fileUrl:ee}=We(),_=i(!1),K=oe=>{Array.isArray(a.value)?a.value.splice(oe,1):a.value=[]},$=async oe=>{Array.isArray(a.value)?a.value.push(...oe):a.value=[...oe],_.value=!1};return(oe,O)=>{var le;const Y=be,G=ce,U=Te,v=tl,R=xl("Draggable"),M=wa,q=$t,F=lt,m=Kt;return n(),E("section",Bn,[g("section",Kn,[t(F,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[g("div",Yn,r(f.title),1)]),"header-extra":l(()=>[f.readonly?_e("",!0):(n(),z(U,{key:0,quaternary:"",onClick:O[0]||(O[0]=P=>_.value=!0)},{icon:l(()=>[t(G,{size:"18"},{default:l(()=>[t(Y,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("add")),1)]),_:1}))]),default:l(()=>[t(q,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),z(M,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(R,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),E(me,null,Pe(a.value,(P,D)=>(n(),E("div",{key:"img-"+D,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(ee)(P)},null,8,["src"]),f.readonly?_e("",!0):(n(),z(U,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>K(D)},{icon:l(()=>[t(G,null,{default:l(()=>[t(Y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):_e("",!0)]),_:1})]),_:1},8,["segmented"])]),t(m,{show:e(_),"onUpdate:show":O[1]||(O[1]=P=>Ie(_)?_.value=P:null),title:e(Z)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((le=e(c))==null?void 0:le.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:$},null,8,["show","title","upload-config"])])}}});const Wn=Ut(Hn,[["__scopeId","data-v-12efa615"]]);var rt=(de=>(de.EXTERNAL_LINK="external-link",de.PAGE_LINK="page-link",de.CONTENT_LINK="content-link",de))(rt||{}),at=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(at||{});const cl=()=>{const{t:de}=Ge(),{tr:a}=We(),c=(_,K)=>{if(K&&K.titleFieldName)return fa(_.contentModelData.index[K.titleFieldName])?a(_.contentModelData.index[K.titleFieldName]):_.contentModelData.index[K.titleFieldName];if(_.contentModelData&&_.contentModelData.index){const $=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const oe of $)if(_.contentModelData.index[oe])return fa(_.contentModelData.index[oe])?a(_.contentModelData.index[oe]):_.contentModelData.index[oe]}return a(_.title)},f=[{label:de("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:de("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:de("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:de("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:f,getContentTypeLabel:_=>{var K;return(K=f.find($=>$.value===_))==null?void 0:K.label},getContentTypeTagType:_=>{var K;return((K=f.find($=>$.value===_))==null?void 0:K.tagType)||"default"},extractItemTitle:c}},Jn={key:4,class:"w-full"},Xn={key:5,class:"w-full"},Zn={key:11,class:"w-full flex flex-gap-8 items-center justify-start"},Qn=["onClick"],es={key:0,class:"w-full"},ts={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},ls=["src"],as={id:"video",autoplay:"",controls:"",style:{width:"100%"}},ns=["src"],ss=je({name:"FormGenerator"}),os=je({...ss,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(de,{emit:a}){const c=de,f=a,{t:Z}=Ge(),{tr:ee,pickByTheme:_,fileUrl:K,mergeArrays:$}=We(),{extractItemTitle:oe}=cl(),{request:O}=Ze(),{loadContentModels:Y}=He(),{contentModels:G}=Fe(He());Y();const U=vt("appConfig");let v=[];if(typeof c.items=="string")try{v=JSON.parse(c.items)}catch{v=[]}else v=he.cloneDeep(c.items);let R={};if(c.useJson)try{R=JSON.parse(c.modelValue)}catch{R={}}const M=i(""),q=i(dt()),F=i(null),m=i(c.useJson?R:c.modelValue),le={};v.forEach(B=>{B.key in m.value||(B.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(B.type)?m.value[B.key]=JSON.parse(B.defaultValue):B.type=="number"?m.value[B.key]=parseFloat(B.defaultValue):B.type=="content-model-item"?m.value[B.key]=void 0:B.type=="content-model-items"?m.value[B.key]=[]:B.type=="list"?m.value[B.key]=B.defaultValue.split(",").map(ae=>({value:ae})):B.type=="i18n-list"?m.value[B.key]=B.defaultValue.split(",").map(ae=>({value:`{ "fr": "${ae}", "en": "${ae}" }`})):m.value[B.key]=B.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(B.type)?m.value[B.key]="":["number"].includes(B.type)?m.value[B.key]=0:["checkbox"].includes(B.type)?m.value[B.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(B.type)?m.value[B.key]=[]:m.value[B.key]=void 0),B.required&&(le[B.key]=[{required:!0,message:Z("fillRequired")}]),q.value=dt()});const P=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],D=B=>re("span",{},{default:()=>ee(B.label)});kt(()=>m.value,B=>{const ae=c.useJson?JSON.stringify(B):B,xe=async()=>{var Se;if(v.length==0)return!0;let ue=!1;try{await((Se=F.value)==null?void 0:Se.validate(ze=>{ue=!ze}))}catch{ue=!1}return ue};f("update:modelValue",ae),f("update",ae,xe)},{immediate:!0,deep:!0});const te=yt(),W=De(()=>te.isLightTheme?"light":"dark"),S=i(!1),V=i(!1),w=i(!1),H=i(""),J=i(""),ne=i(!1),o=i(!1),A=i(""),T=i(""),p=i(!1),b=B=>{window.open(B,"_blank")},X=i(!1),d=i(!1),u=i([]);(async()=>{var ae;d.value=!0;const B=await O({url:"/menu/items"});if(B.success&&B.result)for(let xe=0;xe<((ae=B.result.data)==null?void 0:ae.length);xe++)switch(B.result.data[xe].targetType){case rt.EXTERNAL_LINK:u.value.findIndex(ue=>ue.url===B.result.data[xe].url)===-1&&u.value.push(B.result.data[xe]);break;case rt.PAGE_LINK:u.value.findIndex(ue=>ue.path===B.result.data[xe].path)===-1&&u.value.push(B.result.data[xe]);break}d.value=!1})();const I=i(!1),x=i([]),h=i([]),k=async(B,ae)=>{if(!B.length){h.value=[];return}I.value=!0;const xe=await O({url:`/content-model-items/search/${B}/${ae}`});xe.success&&xe.result&&(h.value=xe.result.data),I.value=!1},pe=De(()=>$(x.value,h.value,"id")),se=i(!1),Q=i([]),y=i([]),j=async B=>{if(!B.length){y.value=[];return}se.value=!0;const ae=await O({url:`/news-articles/search/${B}`});ae.success&&ae.result&&(y.value=ae.result.data),se.value=!1},we=De(()=>$(Q.value,y.value,"id")),{categories:ye,tags:Ve}=Fe(Zt()),{loadCategories:Me,loadTags:fe}=Zt();Ul(async()=>{v.find(B=>B.type==="news-categories"||B.type==="news-category")&&(Me(),fe());for(let B=0;B<v.length;B++)if(v[B].type==="news-articles"||v[B].type==="news-article"){se.value=!0;const ae=m.value[v[B].key],xe=await O({url:"/news-articles/list",method:"post",data:{ids:v[B].type==="news-articles"?ae:[ae]}});xe.success&&xe.result&&(Q.value=$(Q.value,xe.result.data,"id")),se.value=!1}else if(v[B].type==="content-model-items"||v[B].type==="content-model-item"){I.value=!0;const ae=m.value[v[B].key],xe=await O({url:"/content-model-items/list",method:"post",data:{ids:v[B].type==="content-model-items"?ae:[ae]}});xe.success&&xe.result&&(x.value=$(x.value,xe.result.data,"id")),I.value=!1}});const Ne=B=>re("span",{},{default:()=>`${ee(B.name)}`}),Ce=B=>re("span",{},{default:()=>`${ee(B.title)}`}),ie=B=>re("span",{},{default:()=>`${ee(B.name)}`}),ge=B=>De(()=>re("span",{},{default:()=>{var ae;return oe(B,(ae=G.value)==null?void 0:ae.find(xe=>xe.id===B.contentModelId))}})),N=({option:B})=>re("div",{style:{display:"flex",alignItems:"center"}},[`${ee(B.title)}`]),$e=B=>re("div",{style:{marginLeft:"12px",padding:"4px 0"}},[re("div",{},{default:()=>`${ee(B.title)}`}),re("small",{},{default:()=>`${B.targetType==rt.EXTERNAL_LINK?B.url:B.path}`})]);return(B,ae)=>{var pl,ol,il,rl,ul;const xe=Xe,ue=bt,Se=za,ze=Tl,Ae=Gt,qe=ka,et=Vt,xt=tl,Le=be,Je=ce,Be=Te,ve=Wn,Ke=Ma,Tt=zn,Ot=Vl,St=zl,Mt=pt,Ue=ft,gt=ut,jt=Kt;return n(),E(me,null,[(n(),z(Ue,{ref_key:"formRef",ref:F,key:e(q),model:e(m),rules:le,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Oe(c.formStyle)},{default:l(()=>[(n(!0),E(me,null,Pe(e(v),(s,Wt)=>(n(),z(Mt,{key:Wt,label:e(ee)(s.label),path:s.key,"label-style":c.labelStyle,"show-require-mark":s.required,class:"w-full"},{default:l(()=>{var Jt,Sl,Ml,Al,El,Dl,Ll,Pl,Nl,Rl,Ol,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa,oa,ia,ra,ua,da,ca,pa;return[s.type=="text"?(n(),z(xe,{key:0,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),maxlength:((Jt=s.settings)==null?void 0:Jt.maxLength)||void 0,minlength:((Sl=s.settings)==null?void 0:Sl.minLength)||void 0,clearable:((Ml=s.settings)==null?void 0:Ml.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-text"?(n(),z(ue,{key:1,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="textarea"?(n(),z(xe,{key:2,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),maxlength:((Al=s.settings)==null?void 0:Al.maxLength)||void 0,minlength:((El=s.settings)==null?void 0:El.minLength)||void 0,clearable:((Dl=s.settings)==null?void 0:Dl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-textarea"?(n(),z(ue,{key:3,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="editor"?(n(),E("div",Jn,[t(Se,{modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="i18n-editor"?(n(),E("div",Xn,[t(ue,{modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="number"?(n(),z(ze,{key:6,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,max:((Ll=s.settings)==null?void 0:Ll.max)||void 0,min:((Pl=s.settings)==null?void 0:Pl.min)||void 0,step:((Nl=s.settings)==null?void 0:Nl.step)||1,clearable:((Rl=s.settings)==null?void 0:Rl.clearable)||!1,placeholder:e(ee)(s.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):s.type=="checkbox"?(n(),z(Ae,{key:7,checked:e(m)[s.key],"onUpdate:checked":ke=>e(m)[s.key]=ke,"checked-value":((Ol=s.settings)==null?void 0:Ol["checked-value"])||!0,"unchecked-value":((ql=s.settings)==null?void 0:ql["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):s.type=="date"?(n(),z(qe,{key:8,"formatted-value":e(m)[s.key],"onUpdate:formattedValue":ke=>e(m)[s.key]=ke,"value-format":"yyyy-MM-dd",format:((Fl=s.settings)==null?void 0:Fl.format)||"dd MMMM yyyy",type:"date",clearable:((jl=s.settings)==null?void 0:jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="year"?(n(),z(qe,{key:9,"formatted-value":e(m)[s.key],"onUpdate:formattedValue":ke=>e(m)[s.key]=ke,"value-format":"yyyy",type:"year",clearable:((Bl=s.settings)==null?void 0:Bl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="single-select"||s.type=="multi-select"?(n(),z(et,{key:10,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Kl=s.options||[])==null?void 0:Kl.map(ke=>{var tt;if(s.type=="multi-select"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.value)}}return ke}),multiple:s.type=="multi-select",placeholder:e(ee)(s.label),"render-label":D,"label-field":"label","value-field":"value",filterable:"",clearable:((Yl=s.settings)==null?void 0:Yl.clearable)||!0,"max-tag-count":((Gl=s.settings)==null?void 0:Gl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="image"?(n(),E("div",Zn,[g("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{M.value=s.key,S.value=!0}},[e(m)[s.key]?(n(),z(xt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Oe("border: 1px dashed "+e(_)("green","white")),src:e(K)(e(m)[s.key]||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(_)("green","white"))},[t(Je,{size:64},{default:l(()=>[t(Le,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Qn),e(m)[s.key]?(n(),z(Be,{key:0,quaternary:"",onClick:()=>{M.value=s.key,e(m)[e(M)]=""}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)])):s.type=="gallery"?(n(),z(ve,{key:12,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,"upload-folder":"images",title:e(ee)(s.label)},null,8,["modelValue","onUpdate:modelValue","title"])):s.type=="news-category"||s.type=="news-categories"?(n(),z(et,{key:13,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Hl=e(ye)||[])==null?void 0:Hl.map(ke=>{var tt;if(s.type=="news-categories"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-categories",placeholder:e(ee)(s.label),"render-label":Ne,"label-field":"name","value-field":"id",filterable:"",clearable:((Wl=s.settings)==null?void 0:Wl.clearable)||!0,"max-tag-count":((Jl=s.settings)==null?void 0:Jl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-tag"||s.type=="news-tags"?(n(),z(et,{key:14,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Xl=e(Ve)||[])==null?void 0:Xl.map(ke=>{var tt;if(s.type=="news-tags"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-tags",placeholder:e(ee)(s.label),"render-label":ie,"label-field":"name","value-field":"id",filterable:"",clearable:((Zl=s.settings)==null?void 0:Zl.clearable)||!0,"max-tag-count":((Ql=s.settings)==null?void 0:Ql["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-article"||s.type=="news-articles"?(n(),z(et,{key:15,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(ea=e(we)||[])==null?void 0:ea.map(ke=>{var tt;if(s.type=="news-articles"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-articles",placeholder:e(ee)(s.label),"render-label":Ce,loading:e(se),"value-field":"id",filterable:"",clearable:((ta=s.settings)==null?void 0:ta.clearable)||!0,"max-tag-count":((la=s.settings)==null?void 0:la["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:j},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):s.type=="icon"||s.type=="icons"?(n(),z(Ke,{key:16,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),multiple:s.type=="icons","icons-list-placeholder":e(Z)("enterIconNameInSearchBar"),"search-placeholder":e(Z)("search"),"empty-text":e(Z)("noIconsFound"),"icon-library":((aa=s.settings)==null?void 0:aa.library)||"all",clearable:((na=s.settings)==null?void 0:na.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):s.type=="albums"?(n(),z(Tt,{key:17,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):s.type=="audio"?(n(),z(Ot,{key:18},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{M.value=s.key,ne.value=!0}},{default:l(()=>[L(r(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),E(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:()=>{A.value=e(ee)(s.label),T.value=e(K)(e(m)[s.key]),o.value=!0}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{M.value=s.key,e(m)[e(M)]=""}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):s.type=="video"?(n(),z(Ot,{key:19},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{M.value=s.key,V.value=!0}},{default:l(()=>[L(r(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),E(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:()=>{H.value=e(ee)(s.label),J.value=e(K)(e(m)[s.key]),w.value=!0}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{M.value=s.key,e(m)[e(M)]=""}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):s.type=="document"?(n(),z(Ot,{key:20},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{M.value=s.key,p.value=!0}},{default:l(()=>[L(r(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),E(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:ke=>b(e(K)(e(m)[s.key]))},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("open")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{M.value=s.key,e(m)[e(M)]=""}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):s.type=="file"?(n(),z(Ot,{key:21},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{M.value=s.key,X.value=!0}},{default:l(()=>[L(r(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),z(Be,{key:0,type:"primary",ghost:"",onClick:()=>{M.value=s.key,e(m)[e(M)]=""}},{icon:l(()=>[t(Je,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(Z)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)]),_:2},1024)):s.type=="color"?(n(),z(e(el),{key:22,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,class:"cursor-pointer",theme:e(W),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):s.type=="content-model-item"||s.type=="content-model-items"?(n(),z(et,{key:23,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(sa=e(pe)||[])==null?void 0:sa.map(ke=>{var tt;if(s.type=="content-model-items"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="content-model-items",placeholder:e(ee)(s.label),"render-label":ke=>ge(ke).value,loading:e(I),"value-field":"id",filterable:"",clearable:((oa=s.settings)==null?void 0:oa.clearable)||!0,"max-tag-count":((ia=s.settings)==null?void 0:ia["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:ke=>k(ke,s.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):s.type=="menu-item-link"?(n(),z(et,{key:24,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:e(u)||[],placeholder:e(ee)(s.label),"render-label":$e,"render-tag":N,loading:e(d),"label-field":"title","value-field":"id",filterable:"",clearable:((ra=s.settings)==null?void 0:ra.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):s.type=="list"?(n(),z(St,{key:25,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),max:((ua=s.settings)==null?void 0:ua.max)||void 0,min:((da=s.settings)==null?void 0:da.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ke})=>{var tt,mt;return[((tt=s.settings)==null?void 0:tt.type)=="editor"?(n(),E("div",es,[t(Se,{modelValue:ke.value,"onUpdate:modelValue":Cl=>ke.value=Cl,"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(n(),z(xe,{key:1,value:ke.value,"onUpdate:value":Cl=>ke.value=Cl,type:((mt=s.settings)==null?void 0:mt.type)||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):s.type=="i18n-list"?(n(),z(St,{key:26,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),max:((ca=s.settings)==null?void 0:ca.max)||void 0,min:((pa=s.settings)==null?void 0:pa.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ke})=>{var tt;return[t(ue,{modelValue:ke.value,"onUpdate:modelValue":mt=>ke.value=mt,type:((tt=s.settings)==null?void 0:tt.type)||"text","selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):_e("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(gt,{show:e(o),"onUpdate:show":ae[0]||(ae[0]=s=>Ie(o)?o.value=s:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(A)},{default:l(()=>[g("audio",ts,[g("source",{src:e(T)},null,8,ls)])]),_:1},8,["show","title"]),t(gt,{show:e(w),"onUpdate:show":ae[1]||(ae[1]=s=>Ie(w)?w.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(H)},{default:l(()=>[g("video",as,[g("source",{src:e(J)},null,8,ns)])]),_:1},8,["show","title"]),t(jt,{show:e(S),"onUpdate:show":ae[2]||(ae[2]=s=>Ie(S)?S.value=s:null),title:e(Z)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((pl=e(U))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[3]||(ae[3]=s=>{e(m)[e(M)]=s,S.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(V),"onUpdate:show":ae[4]||(ae[4]=s=>Ie(V)?V.value=s:null),title:e(Z)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(U))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[5]||(ae[5]=s=>{e(m)[e(M)]=s,V.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(ne),"onUpdate:show":ae[6]||(ae[6]=s=>Ie(ne)?ne.value=s:null),title:e(Z)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((il=e(U))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[7]||(ae[7]=s=>{e(m)[e(M)]=s,ne.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(p),"onUpdate:show":ae[8]||(ae[8]=s=>Ie(p)?p.value=s:null),title:e(Z)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((rl=e(U))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[9]||(ae[9]=s=>{e(m)[e(M)]=s,p.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(X),"onUpdate:show":ae[10]||(ae[10]=s=>Ie(X)?X.value=s:null),title:e(Z)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ul=e(U))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[11]||(ae[11]=s=>{e(m)[e(M)]=s,X.value=!1})},null,8,["show","title","upload-config"])],64)}}});const yl=Ut(os,[["__scopeId","data-v-5888e5a7"]]),is={key:0},rs={key:1},us={key:0},ds={class:"flex items-center"},cs={class:"text-base"},ps={class:"flex items-center justify-center cursor-pointer gap-2"},fs={key:1},ms={class:"mt-4"},vs={key:2,class:"mt-2 text-xs"},_s={class:"my-8"},ys={class:"flex items-center justify-between"},gs={class:"text-base"},bs=je({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(de,{emit:a}){const c=ct(),{t:f}=Ge(),Z=de,ee=a,_=i(dt()),K=i({}),$=i({}),oe=i(),O=i(),Y=i(),G=i([]),U=i([]),v=i({}),R=i({}),M=i(!1),q=i(!1),F=nt(),m=st(),{request:le}=Ze(),{tr:P,pickByTheme:D,editKeysToCamelCase:te}=We(),{sections:W}=Fe(He()),{isLightTheme:S}=Fe(yt()),V=async()=>{var k,pe,se,Q;q.value=M.value=!0,m.start();const x=await le({url:`/pages/${Z.slug}`});if(x.success&&x.result){if(Y.value=x.result.data,(k=Y.value)!=null&&k.sections&&Array.isArray((pe=Y.value)==null?void 0:pe.sections)){const y={};for(const j of Y.value.sections)j&&(y[j.slug]=j.dataSourcePageSectionsData??{});for(const j of Y.value.sections)j&&(he.isObject(y)&&he.has(y,j.slug)&&ga(y[j.slug])?K.value[j.slug]=qt(y[j.slug]):K.value[j.slug]=qt({}),he.forIn(te(j.dataStructure),(we,ye)=>{(!K.value[j.slug][ye]||Array.isArray(K.value[j.slug][ye])&&K.value[j.slug][ye].length==0)&&(ye==="index"?K.value[j.slug][ye]=qt({}):K.value[j.slug][ye]=qt([]))}))}if(Y.value&&Array.isArray((se=Y.value)==null?void 0:se.sections)){const y=Y.value.sections;if(Array.isArray((Q=Y.value)==null?void 0:Q.sectionsOrder)){G.value=[];for(const j of Y.value.sectionsOrder)if(j){const we=y.find(ye=>ye.slug===j);we&&G.value.push(we)}for(const j of y)G.value.map(we=>we.slug).includes(j.slug)||G.value.push(j)}else G.value=he.cloneDeep(y);if(Array.isArray(Y.value.sectionsDisabled))for(const j of Y.value.sections)j&&(v.value[j.slug]=!Y.value.sectionsDisabled.includes(j.slug));else for(const j of Y.value.sections)j&&(v.value[j.slug]=!0)}R.value=he.cloneDeep(v.value),U.value=he.cloneDeep(G.value),$.value=he.cloneDeep(K.value)}_.value=dt();function h(y){return new Promise(j=>setTimeout(j,y))}await h(5e3),m.finish(),q.value=M.value=!1};V();const w=x=>re("span",{},{default:()=>{var h;return x.id===((h=Y.value)==null?void 0:h.id)?f("currentPage"):P(x.title)}}),H=De(()=>he.isEqual(K.value,$.value)&&he.isEqual(G.value,U.value)&&he.isEqual(v.value,R.value)),J=async()=>{q.value=!0,m.start();const x=oe.value&&await oe.value(),h=O.value&&await O.value(),k=async()=>{const pe=await le({url:`/pages/${Z.slug}`,method:"put",data:{dispatchData:!0,sectionsData:K.value,sectionsOrder:G.value.map(se=>se.slug),sectionsDisabled:Object.keys(v.value).filter(se=>!v.value[se])}});pe.success&&pe.result?(F.success(f("success")),V()):F.error(f("anErrorOccurred"))};(!oe.value||x)&&(!O.value||h)?await k():c.warning({title:f("confirm"),content:f("mandatoryFieldsNotFilledInConfirmation"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{await k()}}),m.finish(),q.value=!1},ne=async x=>{c.warning({title:f("confirm"),content:f("confirmDeletePage"),positiveText:f("yes"),negativeText:f("no"),onPositiveClick:async()=>{(await le({method:"delete",url:`/pages/${x.slug}`})).success?(ee("delete",Y.value),F.success(f("success"))):F.error(f("anErrorOccurred"))}})},o=i(!1),A=i([]),T=i(!1),p=()=>{A.value=[],G.value.forEach(x=>{x.id&&A.value.push(x.id)}),T.value=!0},b=x=>{x.id&&(A.value.includes(x.id)?A.value=A.value.filter(h=>h!==x.id):A.value.push(x.id))},X=x=>De({get:()=>x.id?A.value.includes(x.id):!1,set:h=>{x.id&&(h?A.value=A.value.filter(k=>k!==x.id):A.value.includes(x.id)||A.value.push(x.id))}}),d=x=>{x.id&&(A.value=[],G.value.forEach(h=>{h.id&&h.id!==x.id&&A.value.push(h.id)}),u())},u=async()=>{o.value=!0,m.start();const x=await le({url:`/pages/${Z.slug}`,method:"put",data:{sectionsIds:A.value}});x.success&&x.result?(F.success(f("success")),V()):F.error(f("anErrorOccurred")),m.finish(),o.value=!1},C=async(x,h)=>{var pe;o.value=!0,m.start();const k=await le({url:`/sections/${x.slug}/data-source-page`,method:"put",data:{pageId:(pe=Y.value)==null?void 0:pe.id,sourcePageId:h}});k.success&&k.result?(F.success(f("success")),V()):F.error(f("anErrorOccurred")),m.finish(),o.value=!1},I=async(x,h)=>{H.value?C(x,h):c.warning({title:f("confirm"),content:f("confirmUpdateDataSourcePage"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:()=>C(x,h)})};return(x,h)=>{const k=be,pe=ce,se=Te,Q=zt,y=it,j=It,we=Ba,ye=Gt,Ve=Nt,Me=lt,fe=Vt,Ne=al,Ce=nl,ie=xl("Draggable"),ge=wt,N=Pt,$e=$t,B=ut;return n(),E(me,null,[t(j,{to:"#alt-action"},{default:l(()=>[t(y,{align:"center"},{default:l(()=>[t(se,{type:"error",disabled:e(q),onClick:h[0]||(h[0]=ae=>e(Y)?ne(e(Y)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("delete")),1)]),_:1},8,["disabled"]),t(se,{type:"info",disabled:e(q),onClick:h[1]||(h[1]=ae=>e(Y)?x.openFormModal(e(Y)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("editPage")),1)]),_:1},8,["disabled"]),t(Q,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(se,{type:"primary",loading:e(q),disabled:e(H),onClick:h[2]||(h[2]=ae=>J())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(N,{appear:"",name:"slide-fade"},{default:l(()=>[e(M)?(n(),E("section",is,[(n(),E(me,null,Pe(6,ae=>t(we,{key:ae,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),E("section",rs,[e(Y)&&Array.isArray(e(Y).sections)&&e(Y).sections.length?(n(),E("section",us,[t(ie,{list:e(G)},{default:l(()=>[(n(!0),E(me,null,Pe(e(G),(ae,xe)=>(n(),z(Me,{key:ae.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(Ce,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:ue})=>[t(pe,null,{default:l(()=>[ue?(n(),z(k,{key:0,icon:"fa-solid:chevron-left"})):(n(),z(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>h[8]||(h[8]=[g("span",null,null,-1)])),default:l(()=>[t(Ne,{name:"1"},{header:l(()=>[g("div",ds,[t(pe,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(k,{icon:"fa-solid:grip-lines"})]),_:1}),t(ye,{checked:e(v)[ae.slug],"onUpdate:checked":ue=>e(v)[ae.slug]=ue,size:"small",class:"mr-4",onClick:h[3]||(h[3]=ot(()=>{},["stop"]))},{default:l(()=>[L(r(e(f)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(Ve,{size:"small",type:"info"},{default:l(()=>[L(r(xe+1),1)]),_:2},1024),t(Q,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("span",cs,r(e(P)(ae.title)),1)])]),default:l(()=>[(n(!0),E(me,null,Pe(e(te)(ae.dataStructure),(ue,Se)=>(n(),E(me,{key:Se},[String(Se)==="index"?(n(),z(Me,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),z(yl,{key:`${e(_)}-${Se}-form-1`,modelValue:e(K)[ae.slug][Se],"onUpdate:modelValue":ze=>e(K)[ae.slug][Se]=ze,items:ue,onUpdate:(ze,Ae)=>{oe.value=Ae}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),z(Me,{key:1,title:e(P)(ue.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{quaternary:"",size:"small",onClick:()=>e(K)[ae.slug][Se].push({})},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),E(me,null,Pe(e(K)[ae.slug][Se],(ze,Ae)=>(n(),z(Me,{key:Ae,title:String(Ae+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{type:"error",size:"small",onClick:()=>e(K)[ae.slug][Se].splice(Ae,1)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),z(yl,{key:`${e(_)}-${Se}-${Ae}-form-2`,modelValue:e(K)[ae.slug][Se][Ae],"onUpdate:modelValue":qe=>e(K)[ae.slug][Se][Ae]=qe,items:ue.items,onUpdate:(qe,et)=>{O.value=et}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(y,null,{default:l(()=>[t(se,{size:"small",type:"error",secondary:e(S),onClick:ue=>d(ae)},{default:l(()=>[t(pe,{size:"21"},{default:l(()=>[t(k,{icon:"carbon:close"})]),_:1}),L(" "+r(e(f)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(Q,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(y,{align:"center"},{default:l(()=>[g("span",null,r(e(f)("dataSourcePage")),1),t(fe,{value:ae.dataSourcePageId,options:ae.pages||[],placeholder:e(f)("select"),"render-label":w,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ue=>I(ae,ue)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(Me,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:h[4]||(h[4]=ae=>p())},{default:l(()=>[g("div",ps,[t(pe,{size:"20"},{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1}),L(" "+r(e(f)("addSection")),1)])]),_:1})])):(n(),E("section",fs,[t(Me,{size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(D)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ge,{description:e(f)("noSectionOnThisPage")},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[g("div",ms,[t(se,{size:"small",onClick:h[5]||(h[5]=ae=>p())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(Y)?(n(),E("div",vs,[L(r(e(f)("dataRetrievalSlug"))+": ",1),g("b",null,r(e(Y).slug),1)])):_e("",!0)]))]),_:1}),t(B,{show:e(T),"onUpdate:show":h[6]||(h[6]=ae=>Ie(T)?T.value=ae:null),loading:e(o),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(f)("addSections"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:u,onNegativeClick:h[7]||(h[7]=ae=>T.value=!1)},{default:l(()=>[g("section",_s,[t($e,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Pe(e(W),ae=>(n(),z(Me,{key:ae.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:xe=>b(ae)},{default:l(()=>[g("div",ys,[g("span",gs,r(e(P)(ae.title)),1),t(ye,{checked:X(ae).value,"onUpdate:checked":xe=>X(ae).value=xe,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),hs={class:"flex items-center justify-between"},ks={class:"flex flex-col"},ws={class:"text-sm font-bold"},xs=je({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,tr:Z,displayFormErrors:ee}=We(),_=_t(de,"show"),{menuItemGroups:K}=Fe(He()),{loadMenuItemGroups:$}=He(),{isLightTheme:oe}=Fe(yt()),O=i(!1),Y=async()=>{O.value=!0,await $(),O.value=!1};Y();const G=ct(),U=nt(),v=st(),R=i(!1),M=i(!1),q=i(null),F=i(null),m=i({name:"",description:""}),le={name:[{required:!0,message:a("fillRequired")}]},P=W=>{q.value=he.cloneDeep(W),m.value=he.cloneDeep(W||{name:"",description:""}),M.value=!0},D=async()=>{var W;return(W=F.value)==null||W.validate(async S=>{var V,w,H,J,ne,o;if(!S){v.start(),R.value=!0;const A={name:m.value.name,description:m.value.description},T=await c({method:q.value?"put":"post",url:q.value?`/menu-item-groups/${q.value.id}`:"/menu-item-groups",data:A});if(T.failure&&T.error)switch((H=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:H.errorCode){case Qe.FORM_INVALID_DATA:ee((o=(ne=(J=T.error)==null?void 0:J.response)==null?void 0:ne.data)==null?void 0:o.data);break;default:U.error(a("anErrorOccurred"))}else U.success(a("success")),Y(),M.value=!1;R.value=!1,v.finish()}}),!1},te=async W=>{G.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-item-groups/${W.id}`})).success?(U.success(a("success")),Y()):U.error(a("anErrorOccurred"))}})};return(W,S)=>{const V=be,w=Te,H=it,J=wl,ne=ce,o=lt,A=$t,T=wt,p=Yt,b=ut,X=bt,d=pt,u=ft;return n(),E(me,null,[t(b,{show:_.value,"onUpdate:show":S[2]||(S[2]=C=>_.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(O),onClick:S[0]||(S[0]=C=>P(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+r(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(O),onClick:S[1]||(S[1]=C=>_.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),L(" "+r(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(p,{show:e(O)},{default:l(()=>[e(K).length?(n(),z(A,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Pe(e(K),C=>(n(),z(o,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",hs,[g("div",ks,[g("span",ws,r(e(Z)(C.name)),1),t(J,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[L(r(e(Z)(C.description)),1)]),_:2},1024)]),t(H,null,{default:l(()=>[t(w,{size:"small",type:"warning",secondary:e(oe),onClick:I=>P(C)},{default:l(()=>[t(ne,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(oe),onClick:I=>te(C)},{default:l(()=>[t(ne,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),z(o,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(T,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ne,null,{default:l(()=>[t(V,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(b,{show:e(M),"onUpdate:show":S[5]||(S[5]=C=>Ie(M)?M.value=C:null),loading:e(R),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:S[6]||(S[6]=C=>M.value=!1)},{default:l(()=>[t(u,{ref_key:"formRef",ref:F,model:e(m),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(d,{label:e(a)("name"),path:"name"},{default:l(()=>[t(X,{modelValue:e(m).name,"onUpdate:modelValue":S[3]||(S[3]=C=>e(m).name=C),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("description"),path:"description"},{default:l(()=>[t(X,{modelValue:e(m).description,"onUpdate:modelValue":S[4]||(S[4]=C=>e(m).description=C),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Cs=je({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Ht(["update"],["update:content-type","update:content-id"]),setup(de,{emit:a}){const{t:c}=Ge(),{tr:f,mergeArrays:Z}=We(),{request:ee}=Ze(),{contentTypes:_,extractItemTitle:K}=cl(),{loadContentModels:$}=He(),{contentModels:oe}=Fe(He()),O=a;$();const Y=_t(de,"content-type"),G=_t(de,"content-id"),U=i(),v=i(!1),R=i([]),M=i([]),q=async(T,p)=>{if(!T.length){M.value=[];return}v.value=!0;const b=await ee({url:`/content-model-items/search/${T}/${p}`});b.success&&b.result&&(M.value=b.result.data),v.value=!1},F=De(()=>Z(R.value,M.value,"id")),m=i(!1),le=i([]),P=i([]),D=async T=>{if(!T.length){P.value=[];return}m.value=!0;const p=await ee({url:`/news-articles/search/${T}`});p.success&&p.result&&(P.value=p.result.data),m.value=!1},te=De(()=>Z(le.value,P.value,"id")),{categories:W}=Fe(Zt()),{loadCategories:S}=Zt(),{tags:V}=Fe(Zt()),{loadTags:w}=Zt();Ul(async()=>{var b;S(),w(),m.value=!0;const T=await ee({url:"/news-articles/list",method:"post",data:{ids:G.value?[G.value]:[]}});T.success&&T.result&&(le.value=Z(le.value,T.result.data,"id")),m.value=!1,v.value=!0;const p=await ee({url:"/content-model-items/list",method:"post",data:{ids:G.value?[G.value]:[]}});p.success&&p.result&&(R.value=Z(R.value,p.result.data,"id"),U.value=(b=R.value.find(X=>X.id===G.value))==null?void 0:b.contentModelId),v.value=!1});const H=T=>re("span",{},{default:()=>`${f(T.name)}`}),J=T=>re("span",{},{default:()=>`${f(T.title)}`}),ne=T=>re("span",{},{default:()=>`${f(T.name)}`}),o=T=>re("span",{},{default:()=>f(T.title)}),A=T=>De(()=>re("span",{},{default:()=>{var p;return K(T,(p=oe.value)==null?void 0:p.find(b=>b.id===T.contentModelId))}}));return(T,p)=>{const b=Vt,X=Ft,d=ht;return n(),z(d,{"x-gap":"12",span:24},{default:l(()=>[t(X,{span:8,label:e(c)("contentType"),path:"contentType"},{default:l(()=>[t(b,{value:Y.value,"onUpdate:value":[p[0]||(p[0]=u=>Y.value=u),p[1]||(p[1]=()=>G.value=void 0)],options:e(_)||[],placeholder:e(c)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Y.value===e(at).CONTENT_MODEL?(n(),E(me,{key:0},[t(X,{span:8,label:e(c)("contentModel")},{default:l(()=>[t(b,{value:e(U),"onUpdate:value":p[2]||(p[2]=u=>Ie(U)?U.value=u:null),options:e(oe),placeholder:e(c)("search"),"render-label":o,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(X,{span:8,label:e(c)("item"),path:"contentId"},{default:l(()=>[t(b,{value:G.value,"onUpdate:value":[p[3]||(p[3]=u=>G.value=u),p[5]||(p[5]=(u,C)=>O("update",u,C,Y.value))],options:e(F)||[],placeholder:e(c)("search"),"render-label":u=>A(u).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[4]||(p[4]=u=>q(u,e(U)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):_e("",!0),Y.value===e(at).NEWS_ARTICLE?(n(),z(X,{key:1,span:16,label:e(c)("newsArticle"),path:"contentId"},{default:l(()=>[t(b,{value:G.value,"onUpdate:value":[p[6]||(p[6]=u=>G.value=u),p[7]||(p[7]=(u,C)=>O("update",u,C,Y.value))],options:e(te)||[],placeholder:e(c)("search"),"render-label":J,loading:e(m),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:D},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):_e("",!0),Y.value===e(at).NEWS_CATEGORY?(n(),z(X,{key:2,span:16,label:e(c)("newsCategory"),path:"contentId"},{default:l(()=>[t(b,{value:G.value,"onUpdate:value":[p[8]||(p[8]=u=>G.value=u),p[9]||(p[9]=(u,C)=>O("update",u,C,Y.value))],options:e(W)||[],placeholder:e(c)("select"),"render-label":H,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0),Y.value===e(at).NEWS_TAG?(n(),z(X,{key:3,span:16,label:e(c)("newsTag"),path:"contentId"},{default:l(()=>[t(b,{value:G.value,"onUpdate:value":[p[10]||(p[10]=u=>G.value=u),p[11]||(p[11]=(u,C)=>O("update",u,C,Y.value))],options:e(V)||[],placeholder:e(c)("select"),"render-label":ne,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0)]),_:1})}}}),Is={class:"flex items-center"},$s={class:"flex flex-col"},Vs={class:"text-sm font-bold"},Ts={key:0,class:"text-sm"},zs={class:"text-xs font-normal"},Us={class:"text-xs my-1"},Ss={class:"flex items-center"},Ms={class:"flex flex-col"},As={class:"text-sm font-bold"},Es={class:"text-xs font-normal"},Ds={key:0,class:"mt-4"},Ls={class:"my-8"},Ps={class:"flex items-center justify-between"},Ns={class:"flex flex-col"},Rs={class:"text-sm font-bold"},Os={class:"text-xs font-normal"},qs={class:"flex items-center"},Fs={key:0},js={key:1},Bs={key:2},Ks=je({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee,pickByTheme:_}=We(),{isLightTheme:K}=Fe(yt()),{pages:$,menuItemGroups:oe,contentModels:O}=Fe(He()),{loadPages:Y,loadMenuItemGroups:G}=He(),U=st(),v=nt(),R=ct(),M=_t(de,"modelValue"),q=i([]),F=i([]),m=i(!1),le=i(""),P=i(),D=De(()=>{if(!le.value)return q.value;const Q=q.value.filter(y=>{var j;return y.title.toLowerCase().includes(le.value.toLowerCase())||((j=y.description)==null?void 0:j.toLowerCase().includes(le.value.toLowerCase()))||y.children.some(we=>{var ye;return we.title.toLowerCase().includes(le.value.toLowerCase())||((ye=we.description)==null?void 0:ye.toLowerCase().includes(le.value.toLowerCase()))})});return P.value&&P.value.focus(),Q}),te=async(Q=!1)=>{U.start(),m.value=!0;const y=await c({url:"/menu/items"});if(y.success&&y.result){q.value=y.result.data.filter(j=>{var we;return!j.parentId&&j.menuId===((we=M.value)==null?void 0:we.id)});for(let j=0;j<q.value.length;j++)q.value[j].children=y.result.data.filter(we=>{var ye;return we.parentId===q.value[j].id&&we.menuId===((ye=M.value)==null?void 0:ye.id)});F.value=y.result.data.filter(j=>{var we;return j.menuId!==((we=M.value)==null?void 0:we.id)})}Q&&(Y(),await G()),m.value=!1,U.finish()};te(!0);const W=i(12),S=i(1),V=Q=>{W.value=Q},w={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:rt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},H=i(null),J=i(!1),ne=i(!1),o=i(!1),A=i(null),T=i(null),p=i(w),b=De(()=>{const Q={title:[{required:!0,message:a("fillRequired")}]};return p.value.targetType===rt.PAGE_LINK?(Q.pageId=[{required:!0,message:a("fillRequired")}],Q.path=[{required:!0,message:a("fillRequired")}]):p.value.targetType===rt.EXTERNAL_LINK?Q.url=[{required:!0,message:a("fillRequired")}]:p.value.targetType===rt.CONTENT_LINK&&(Q.contentId=[{required:!0,message:a("fillRequired")}],Q.contentType=[{required:!0,message:a("fillRequired")}]),Q}),X=(Q,y=null)=>{A.value=he.cloneDeep(Q),H.value=y,Q?(p.value=he.cloneDeep(Q),ne.value=!0):(p.value=he.cloneDeep(w),F.value.length>0?o.value=!0:ne.value=!0)},d=async Q=>{R.warning({title:a("confirm"),content:Q.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu/items/${Q.id}`})).success?(v.success(a("success")),te()):v.error(a("anErrorOccurred"))}})},u=async Q=>{var j,we,ye,Ve,Me,fe,Ne;U.start(),J.value=!0;const y=await c({method:"post",url:"/menu/items",data:{title:Q.title,path:Q.path,url:Q.url,description:Q.description,isActive:!0,isVisible:!0,color:Q.color,icon:Q.icon,position:Q.position,targetType:Q.targetType,parentId:H.value,menuId:(j=M.value)==null?void 0:j.id,sectionId:Q.sectionId,menuItemGroupId:Q.menuItemGroupId,pageId:Q.pageId}});if(y.failure&&y.error)switch((Ve=(ye=(we=y.error)==null?void 0:we.response)==null?void 0:ye.data)==null?void 0:Ve.errorCode){case Qe.FORM_INVALID_DATA:ee((Ne=(fe=(Me=y.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Ne.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();J.value=!1,U.finish(),o.value=!1},C=async()=>{var Q;return(Q=T.value)==null||Q.validate(async y=>{var j,we,ye,Ve,Me,fe,Ne;if(!y){const Ce={title:p.value.title,path:p.value.path,url:p.value.url,description:p.value.description,isActive:p.value.isActive,isVisible:p.value.isVisible,color:p.value.color,icon:p.value.icon,position:p.value.position,targetType:p.value.targetType,parentId:H.value,menuId:(j=M.value)==null?void 0:j.id,sectionId:p.value.sectionId,menuItemGroupId:p.value.menuItemGroupId,pageId:p.value.pageId,contentId:p.value.contentId,contentType:p.value.contentType};if(A.value)if(A.value.title!==p.value.title&&q.value.findIndex(ie=>ie.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{U.start(),J.value=!0;const ie=await c({method:"put",url:`/menu/items/${A.value.id}`,data:Ce});ie.success&&ie.result.data&&(v.success(a("success")),te()),J.value=!1,U.finish(),ne.value=!1}else if(q.value.findIndex(ie=>ie.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{U.start(),J.value=!0;const ie=await c({method:"post",url:"/menu/items",data:Ce});if(ie.failure&&ie.error)switch((Ve=(ye=(we=ie.error)==null?void 0:we.response)==null?void 0:ye.data)==null?void 0:Ve.errorCode){case Qe.FORM_INVALID_DATA:ee((Ne=(fe=(Me=ie.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Ne.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();J.value=!1,U.finish(),ne.value=!1}}}),!1},I=async(Q,y)=>{(await c({method:"put",url:"/menu/items/position",data:{items:y}})).success&&te()},x=Q=>re("span",{},{default:()=>Z(Q.title)}),h=Q=>re("span",{},{default:()=>Z(Q.name)}),k=Q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(Q),pe=Q=>{if(Q.targetType==rt.EXTERNAL_LINK)return Q.url;if(Q.targetType==rt.PAGE_LINK)return Q.path;if(Q.targetType==rt.CONTENT_LINK)switch(Q.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},se=async(Q,y,j)=>{var we;if(!Z(p.value.title))switch(j){case at.CONTENT_MODEL:p.value.title=f(y,(we=O.value)==null?void 0:we.find(ye=>ye.id===y.contentModelId));break;case at.NEWS_ARTICLE:p.value.title=y.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:p.value.title=y.name;break}};return(Q,y)=>{const j=be,we=it,ye=It,Ve=xa,Me=Nt,fe=zt,Ne=lt,Ce=xl("Draggable"),ie=al,ge=nl,N=sl,$e=wt,B=Pt,ae=$t,xe=ut,ue=bt,Se=pt,ze=Tl,Ae=Ft,qe=bl,et=hl,xt=ht,Le=Ma,Je=Vt,Be=ft;return n(),E(me,null,[t(ye,{to:"#alt-action"},{default:l(()=>[t(we,{align:"center"},{default:l(()=>[e(D).length?(n(),z(e(Te),{key:0,type:"primary",onClick:y[0]||(y[0]=ve=>X(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addMenuItem")),1)]),_:1})):_e("",!0)]),_:1})]),_:1}),t(Ve,{class:"mt-2 mb-5",onBack:y[2]||(y[2]=ve=>M.value=null)},{title:l(()=>{var ve;return[L(r(e(Z)((ve=M.value)==null?void 0:ve.title)),1)]}),back:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Xe),{ref_key:"searchInputRef",ref:P,value:e(le),"onUpdate:value":y[1]||(y[1]=ve=>Ie(le)?le.value=ve:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(B,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(D)&&e(D).length?(n(),E(me,{key:0},[t(Ce,{list:e(q),onChange:y[3]||(y[3]=ve=>I(ve,e(q)))},{default:l(()=>[(n(!0),E(me,null,Pe(e(D).slice((e(S)-1)*e(W),e(S)*e(W)),ve=>(n(),z(Ne,{key:ve.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ge,{"default-expanded-names":ve.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ke})=>[t(we,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:l(()=>[L(r(ve.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:ve.isVisible?"info":"warning"},{default:l(()=>[L(r(ve.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ye(["!mx-0",e(_)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(K),onClick:ot(Tt=>X(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(K),onClick:ot(Tt=>d(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"info",secondary:e(K),onClick:ot(Tt=>X(null,ve.id),["stop"])},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:category"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("subMenuItem"))+" ",1),t(Me,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[L(r(ve.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),y[27]||(y[27]=g("div",{class:"w-6"},null,-1)),t(e(ce),null,{default:l(()=>[Ke?(n(),z(j,{key:0,icon:"fa-solid:chevron-left"})):(n(),z(j,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>y[28]||(y[28]=[g("span",null,null,-1)])),default:l(()=>[t(ie,{name:"1"},{header:l(()=>{var Ke;return[g("div",Is,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(j,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ye(e(_)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",$s,[g("div",null,[g("span",Vs,r(e(Z)(ve.title)),1),ve.group?(n(),E("span",Ts," Â ("+r(e(Z)((Ke=ve.group)==null?void 0:Ke.name))+") ",1)):_e("",!0)]),g("small",zs,r(pe(ve)),1)])])]}),default:l(()=>[ve.description?(n(),E(me,{key:0},[t(fe,{class:Ye([e(_)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),g("div",Us,r(e(Z)(ve.description)),1)],64)):_e("",!0),ve.children.length?(n(),E(me,{key:1},[t(fe,{class:Ye([e(_)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(Ce,{list:ve.children,onChange:Ke=>I(Ke,ve.children)},{default:l(()=>[(n(!0),E(me,null,Pe(ve.children,Ke=>(n(),z(Ne,{key:Ke.id,size:"small",class:"mb-1"},{header:l(()=>[g("div",Ss,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(j,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ye(e(_)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",Ms,[g("span",As,r(e(Z)(Ke.title)),1),g("small",Es,r(pe(Ke)),1)])])]),"header-extra":l(()=>[t(we,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:Ke.isActive?"success":"error"},{default:l(()=>[L(r(Ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:Ke.isVisible?"info":"warning"},{default:l(()=>[L(r(Ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ye(["!mx-0",e(_)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(K),onClick:ot(Tt=>X(Ke,ve.id),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(K),onClick:ot(Tt=>d(Ke),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):_e("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(N,{page:e(S),"onUpdate:page":y[4]||(y[4]=ve=>Ie(S)?S.value=ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(W),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(W)),"onUpdate:pageSize":V},{prefix:l(()=>[L(r(`${e(q).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),z(Ne,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(_)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t($e,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[e(le)?(n(),z(j,{key:0,icon:"carbon:search"})):(n(),z(j,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(le)?_e("",!0):(n(),E("div",Ds,[t(e(Te),{size:"small",onClick:y[5]||(y[5]=ve=>X(null))},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(xe,{show:e(o),"onUpdate:show":y[6]||(y[6]=ve=>Ie(o)?o.value=ve:null),loading:e(J),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(H)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:y[7]||(y[7]=()=>{o.value=!1,ne.value=!0}),onNegativeClick:y[8]||(y[8]=ve=>o.value=!1)},{default:l(()=>[g("section",Ls,[t(ae,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Pe(e(F),ve=>(n(),z(Ne,{key:ve.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",Ps,[g("div",Ns,[g("span",Rs,r(e(Z)(ve.title)),1),g("small",Os,r(pe(ve)),1)]),t(e(Te),{size:"small",type:"primary",secondary:e(K),onClick:Ke=>u(ve)},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(xe,{show:e(ne),"onUpdate:show":y[25]||(y[25]=ve=>Ie(ne)?ne.value=ve:null),loading:e(J),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(A)?e(H)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(H)?e(F).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(F).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:C,onNegativeClick:y[26]||(y[26]=ve=>ne.value=!1)},{default:l(()=>[t(Be,{ref_key:"formRef",ref:T,class:"mt-5",model:e(p),rules:e(b),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ue,{modelValue:e(p).title,"onUpdate:modelValue":y[9]||(y[9]=ve=>e(p).title=ve),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Se,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ue,{modelValue:e(p).description,"onUpdate:modelValue":y[10]||(y[10]=ve=>e(p).description=ve),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(ze,{value:e(p).position,"onUpdate:value":y[11]||(y[11]=ve=>e(p).position=ve),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ae,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(et,{value:e(p).isActive,"onUpdate:value":y[12]||(y[12]=ve=>e(p).isActive=ve),name:"isActive",class:"w-full"},{default:l(()=>[t(qe,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(qe,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Ae,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(et,{value:e(p).isVisible,"onUpdate:value":y[13]||(y[13]=ve=>e(p).isVisible=ve),name:"isVisible",class:"w-full"},{default:l(()=>[t(qe,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(qe,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(fe,{class:"!my-2"}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Le,{modelValue:e(p).icon,"onUpdate:modelValue":y[14]||(y[14]=ve=>e(p).icon=ve),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Ae,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[g("div",qs,[e(p).color?(n(),E(me,{key:0},[t(e(Te),{text:"",type:"error",style:{"font-size":"21px"},onClick:y[15]||(y[15]=ve=>e(p).color="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(p).color,"onUpdate:value":y[16]||(y[16]=ve=>e(p).color=ve),class:"cursor-pointer",theme:e(K)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Ae,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Je,{value:e(p).menuItemGroupId,"onUpdate:value":y[17]||(y[17]=ve=>e(p).menuItemGroupId=ve),options:e(oe),placeholder:e(a)("group"),"render-label":h,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ae,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(et,{value:e(p).targetType,"onUpdate:value":y[18]||(y[18]=ve=>e(p).targetType=ve),class:"w-full",size:"small"},{default:l(()=>[t(qe,{value:e(rt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[L(r(e(a)("pageLink")),1)]),_:1},8,["value"]),t(qe,{value:e(rt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[L(r(e(a)("contentLink")),1)]),_:1},8,["value"]),t(qe,{value:e(rt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[L(r(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(B,{appear:"",name:"slide-fade"},{default:l(()=>[e(p).targetType===e(rt).PAGE_LINK?(n(),E("section",Fs,[t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Je,{value:e(p).pageId,"onUpdate:value":y[19]||(y[19]=ve=>e(p).pageId=ve),options:e($)||[],placeholder:e(a)("selectPage"),"render-label":x,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ae,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var ve;return[t(Je,{value:e(p).sectionId,"onUpdate:value":y[20]||(y[20]=Ke=>e(p).sectionId=Ke),options:((ve=(e($)||[]).find(Ke=>Ke.id===e(p).pageId))==null?void 0:ve.sections)||[],placeholder:e(a)("selectSection"),"render-label":x,disabled:!e(p).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Se,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Xe),{value:e(p).path,"onUpdate:value":y[21]||(y[21]=ve=>e(p).path=ve),placeholder:e(a)("path"),"allow-input":k,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(p).targetType===e(rt).CONTENT_LINK?(n(),E("section",js,[t(Cs,{"content-type":e(p).contentType,"onUpdate:contentType":y[22]||(y[22]=ve=>e(p).contentType=ve),"content-id":e(p).contentId,"onUpdate:contentId":y[23]||(y[23]=ve=>e(p).contentId=ve),onUpdate:se},null,8,["content-type","content-id"])])):e(p).targetType===e(rt).EXTERNAL_LINK?(n(),E("section",Bs,[t(Se,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Xe),{value:e(p).url,"onUpdate:value":y[24]||(y[24]=ve=>e(p).url=ve),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):_e("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ys={class:"flex items-center justify-between"},Gs={class:"flex flex-col"},Hs={class:"text-sm font-bold"},Ws=je({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,tr:Z,displayFormErrors:ee,formatKey:_}=We(),K=_t(de,"show"),{menuLocations:$}=Fe(He()),{loadMenuLocations:oe}=He(),{isLightTheme:O}=Fe(yt()),Y=i(!1),G=async()=>{Y.value=!0,await oe(),Y.value=!1};G();const U=ct(),v=nt(),R=st(),M=i(!1),q=i(!1),F=i(null),m=i(null),le=i({name:"",description:""}),P={name:[{required:!0,message:a("fillRequired")}]},D=S=>{F.value=he.cloneDeep(S),le.value=he.cloneDeep(S||{name:"",description:""}),q.value=!0},te=async()=>{var S;return(S=m.value)==null||S.validate(async V=>{var w,H,J,ne,o,A;if(!V){R.start(),M.value=!0;const T={name:le.value.name,description:le.value.description},p=await c({method:F.value?"put":"post",url:F.value?`/menu-locations/${F.value.id}`:"/menu-locations",data:T});if(p.failure&&p.error)switch((J=(H=(w=p.error)==null?void 0:w.response)==null?void 0:H.data)==null?void 0:J.errorCode){case Qe.FORM_INVALID_DATA:ee((A=(o=(ne=p.error)==null?void 0:ne.response)==null?void 0:o.data)==null?void 0:A.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),G(),q.value=!1;M.value=!1,R.finish()}}),!1},W=async S=>{U.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-locations/${S.id}`})).success?(v.success(a("success")),G()):v.error(a("anErrorOccurred"))}})};return(S,V)=>{const w=be,H=ce,J=Te,ne=it,o=wl,A=lt,T=$t,p=wt,b=Yt,X=ut,d=Xe,u=pt,C=bt,I=ft;return n(),E(me,null,[t(X,{show:K.value,"onUpdate:show":V[2]||(V[2]=x=>K.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ne,{align:"center"},{default:l(()=>[t(J,{size:"small",type:"primary",disabled:e(Y),onClick:V[0]||(V[0]=x=>D(null))},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),L(" "+r(e(a)("add")),1)]),_:1},8,["disabled"]),t(J,{size:"small",type:"error",disabled:e(Y),onClick:V[1]||(V[1]=x=>K.value=!1)},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1}),L(" "+r(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(b,{show:e(Y)},{default:l(()=>[e($).length?(n(),z(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Pe(e($),x=>(n(),z(A,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",Ys,[g("div",Gs,[g("span",Hs,r(x.name),1),t(o,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[L(r(e(Z)(x.description)),1)]),_:2},1024)]),t(ne,null,{default:l(()=>[t(J,{size:"small",type:"warning",secondary:e(O),onClick:h=>D(x)},{default:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(J,{size:"small",type:"error",secondary:e(O),onClick:h=>W(x)},{default:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),z(A,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(q),"onUpdate:show":V[5]||(V[5]=x=>Ie(q)?q.value=x:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(F)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:V[6]||(V[6]=x=>q.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:m,model:e(le),rules:P,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("key"),path:"name"},{default:l(()=>[t(d,{value:e(le).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":V[3]||(V[3]=x=>e(le).name=e(_)(x))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(C,{modelValue:e(le).description,"onUpdate:modelValue":V[4]||(V[4]=x=>e(le).description=x),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Js={key:2},Xs={class:"flex items-center"},Zs={class:"flex flex-col"},Qs={key:0,class:"text-xs font-normal"},eo={class:"mt-4"},to=je({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:_,formatKey:K}=We(),{isLightTheme:$}=Fe(yt()),{menuLocations:oe}=Fe(He()),{loadMenuLocations:O}=He(),Y=st(),G=nt(),U=ct(),v=i(!1),R=i(!1),M=i([]),q=async(T=!1)=>{Y.start(),v.value=!0;const p=await c({url:"/menus"});p.success&&p.result&&(M.value=p.result.data),T&&await O(),v.value=!1,Y.finish()};q(!0);const F=i(12),m=i(1),le=T=>{F.value=T},P={name:"",title:"",description:"",menuLocationId:void 0},D=i(!1),te=i(!1),W=i(!1),S=i(null),V=i(P),w={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},H=i(null),J=T=>{H.value=he.cloneDeep(T),V.value=he.cloneDeep(T||P),D.value=!0},ne=async()=>{var T;return(T=S.value)==null||T.validate(async p=>{var b,X,d,u,C,I;if(!p){Y.start(),R.value=!0;const x={name:V.value.name,title:V.value.title,description:V.value.description,menuLocationId:V.value.menuLocationId},h=await c({method:H.value?"put":"post",url:H.value?`/menus/${H.value.id}`:"/menus",data:x});if(h.failure&&h.error)switch((d=(X=(b=h.error)==null?void 0:b.response)==null?void 0:X.data)==null?void 0:d.errorCode){case Qe.FORM_INVALID_DATA:ee((I=(C=(u=h.error)==null?void 0:u.response)==null?void 0:C.data)==null?void 0:I.data);break;default:G.error(a("anErrorOccurred"))}else G.success(a("success")),q(),D.value=!1;R.value=!1,Y.finish()}}),!1},o=async T=>{U.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menus/${T.id}`})).success?(G.success(a("success")),q()):G.error(a("anErrorOccurred"))}})},A=ll("menus-management",()=>({itemsMenu:i(null)}))();return kt(()=>V.value.title,T=>{H.value||V.value.name.length<=21&&(V.value.name=Ua(f(T),{trim:!0,lower:!0,strict:!0}))}),(T,p)=>{const b=be,X=ce,d=Te,u=it,C=It,I=zt,x=lt,h=sl,k=wt,pe=Pt,se=bt,Q=pt,y=Xe,j=Ft,we=Vt,ye=ht,Ve=ft,Me=ut;return n(),E(me,null,[e(A).itemsMenu?_e("",!0):(n(),z(C,{key:0,to:"#alt-action"},{default:l(()=>[t(u,{align:"center"},{default:l(()=>[e(_)?(n(),z(d,{key:0,type:"success",onClick:p[0]||(p[0]=fe=>te.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:template"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("locations")),1)]),_:1})):_e("",!0),t(d,{type:"warning",onClick:p[1]||(p[1]=fe=>W.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("groups")),1)]),_:1}),e(M)&&e(M).length?(n(),z(d,{key:1,type:"primary",onClick:p[2]||(p[2]=fe=>J(null))},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addMenu")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})),e(A).itemsMenu?(n(),z(Ks,{key:1,modelValue:e(A).itemsMenu,"onUpdate:modelValue":p[3]||(p[3]=fe=>e(A).itemsMenu=fe)},null,8,["modelValue"])):(n(),E("section",Js,[t(pe,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(M)&&e(M).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Pe(e(M).slice((e(m)-1)*e(F),e(m)*e(F)),fe=>(n(),z(x,{key:fe.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Ne;return[g("div",Xs,[t(u,null,{default:l(()=>[t(d,{size:"small",type:"primary",secondary:e($),onClick:ot(Ce=>J(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(d,{size:"small",type:"error",secondary:e($),onClick:ot(Ce=>o(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(I,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",Zs,[g("span",{class:Ye(`${fe.location?"text-sm":"text-base"} font-bold`)},r(e(f)(fe.title)),3),fe.location?(n(),E("small",Qs,r((Ne=fe.location)==null?void 0:Ne.name),1)):_e("",!0)])])]}),"header-extra":l(()=>[t(d,{size:"small",type:"primary",secondary:e($),onClick:ot(Ne=>e(A).itemsMenu=fe,["stop"])},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(h,{page:e(m),"onUpdate:page":p[4]||(p[4]=fe=>Ie(m)?m.value=fe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(F),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(M).length/e(F)),"onUpdate:pageSize":le},{prefix:l(()=>[L(r(`${e(M).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),z(x,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(k,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[g("div",eo,[t(d,{size:"small",onClick:p[5]||(p[5]=fe=>J(null))},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(Me,{show:e(D),"onUpdate:show":p[10]||(p[10]=fe=>Ie(D)?D.value=fe:null),loading:e(R),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ne,onNegativeClick:p[11]||(p[11]=fe=>D.value=!1)},{default:l(()=>[t(Ve,{ref_key:"formRef",ref:S,model:e(V),rules:w,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Q,{label:e(a)("title"),path:"title"},{default:l(()=>[t(se,{modelValue:e(V).title,"onUpdate:modelValue":p[6]||(p[6]=fe=>e(V).title=fe),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(a)("description"),path:"description"},{default:l(()=>[t(se,{modelValue:e(V).description,"onUpdate:modelValue":p[7]||(p[7]=fe=>e(V).description=fe),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ye,{"x-gap":"12",span:24},{default:l(()=>[t(j,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(y,{value:e(V).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":p[8]||(p[8]=fe=>e(V).name=e(K)(fe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(j,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(we,{value:e(V).menuLocationId,"onUpdate:value":p[9]||(p[9]=fe=>e(V).menuLocationId=fe),options:e(oe),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ws,{show:e(te),"onUpdate:show":p[12]||(p[12]=fe=>Ie(te)?te.value=fe:null)},null,8,["show"]),t(xs,{show:e(W),"onUpdate:show":p[13]||(p[13]=fe=>Ie(W)?W.value=fe:null)},null,8,["show"])]))],64)}}}),lo="/creopse/assets/video-thumbnail-86f60cc7.svg";var Bt=(de=>(de.VERTICAL="vertical",de.HORIZONTAL="horizontal",de))(Bt||{}),Ct=(de=>(de.SELF_HOSTED="self-hosted",de.YOUTUBE="youtube",de))(Ct||{});const ao=()=>{const{t:de}=Ge(),a=[{label:de("horizontal"),value:Bt.HORIZONTAL,tagType:"info"},{label:de("vertical"),value:Bt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:Z=>{var ee;return((ee=a.find(_=>_.value===Z))==null?void 0:ee.tagType)||"default"},getVideoDisplayTypeLabel:Z=>{var ee;return(ee=a.find(_=>_.value===Z))==null?void 0:ee.label},videoDisplayTypes:a}},no=ll("video-setting",{state:()=>({settings:[]}),getters:{getSetting:de=>a=>de.settings.find(c=>c.key===a),getSettingValue:de=>(a,c="string")=>{const f=de.settings.find(ee=>ee.key===a);let Z="";switch(c){case"number":Z=f&&parseInt(f.value)&&!isNaN(parseInt(f.value))?parseInt(f.value):0;break;case"boolean":Z=f&&!isNaN(parseInt(f.value))&&parseInt(f.value)>0;break;case"object":Z=f&&f.value?JSON.parse(f.value):{};break;case"array":Z=f&&f.value?JSON.parse(f.value):[];break;default:Z=f&&f.value?f.value:"";break}return Z}},actions:{async initDefaultSettings(){await this.loadSettings();const de={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Ze();await a({url:"/video-settings",method:"put",data:de}),await this.loadSettings()},async loadSettings(){const{request:de}=Ze(),a=await de({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),so={key:1,class:"flex items-center gap-3"},oo={key:0,class:"w-full flex items-center justify-between mt-4"},io={class:"flex items-center gap-3"},ro={key:1,class:"mt-4"},uo={key:0},co={class:"flex items-center justify-center h-full"},po=["src"],fo={class:"text-center text-dimgray text-sm"},mo={key:1,class:"flex items-center justify-center"},vo={class:"mt-5"},_o={class:"w-full flex flex-gap-8 items-center justify-start"},yo=["src"],go={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},bo=["src"],ho=je({__name:"index",setup(de){const{t:a,locale:c}=Ge(),{tr:f,fileUrl:Z,pickByTheme:ee,displayFormErrors:_}=We(),{videoDisplayTypes:K}=ao(),{request:$}=Ze(),{isLightTheme:oe}=Fe(yt()),O=st(),Y=nt(),G=ct(),U=vt("appConfig"),v=i(""),R=i(null),M=i(!1),q=i([]),F=ll("videos-management-store",()=>({currentTab:i("all")}))(),m=()=>{V()},le=i(0),P=i(12),D=i(1),te=De(()=>`/video-items?pageSize=${P.value}&query=${v.value}&source=${F.currentTab}`),W=Ce=>{V(`${te.value}&page=${Ce}`)},S=Ce=>{P.value=Ce,V()},V=async(Ce=null,ie=!1)=>{var N,$e,B,ae,xe;M.value=!0,O.start();const ge=await $({url:Ce??te.value});ge.success&&ge.result&&(q.value=((N=ge.result.data)==null?void 0:N.videoItems)||[],le.value=((B=($e=ge.result.data)==null?void 0:$e.meta)==null?void 0:B.total)||0,D.value=((xe=(ae=ge.result.data)==null?void 0:ae.meta)==null?void 0:xe.currentPage)||1),O.finish(),M.value=!1};V(null,!0);const w=i(!1),H=i(!1),J=i(null),ne=i(null),o=i({title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""}),A=De(()=>({title:[{required:o.value.source==Ct.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),T=Ce=>{J.value=he.cloneDeep(Ce),Ce?o.value=he.cloneDeep(Ce):o.value={title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""},H.value=!0},p=async Ce=>{G.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await $({method:"delete",url:`/video-items/force/${Ce.id}`})).success?(Y.success(a("success")),V()):Y.error(a("anErrorOccurred"))}})},b=async()=>{var Ce;return(Ce=ne.value)==null||Ce.validate(async ie=>{var ge,N,$e,B,ae,xe;if(!ie)if(J.value){O.start(),w.value=!0;const ue={title:o.value.title,description:o.value.description,visible:o.value.visible,source:o.value.source,displayType:o.value.displayType,thumbnail:o.value.thumbnail,path:o.value.path},Se=await $({method:"put",url:`/video-items/${J.value.id}`,data:ue});Se.success&&Se.result.data&&(Y.success(a("success")),V(`${te.value}&page=${D.value}`)),w.value=!1,O.finish(),H.value=!1}else{O.start(),w.value=!0;const ue={title:o.value.title,description:o.value.description,visible:o.value.visible,source:o.value.source,displayType:o.value.displayType,thumbnail:o.value.thumbnail,path:o.value.path},Se=await $({method:"post",url:"/video-items",data:ue});if(Se.failure&&Se.error)switch(($e=(N=(ge=Se.error)==null?void 0:ge.response)==null?void 0:N.data)==null?void 0:$e.errorCode){case Qe.FORM_INVALID_DATA:_((xe=(ae=(B=Se.error)==null?void 0:B.response)==null?void 0:ae.data)==null?void 0:xe.data);break;case Qe.REQUEST_PARAMS_MISSING:Y.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case Qe.REQUEST_DATA_RETRIEVAL_FAILED:Y.error(a("videoDataCantBeRetrieve"));break;case Qe.REQUEST_DATA_ALREADY_EXISTS:Y.error(a("videoAlreadyExists"));break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),V(`${te.value}&page=${D.value}`),H.value=!1;w.value=!1,O.finish()}}),!1},X=i(!1),d=i(!1),u=i(""),C=i(""),I=i("classic"),x=i(!1),h=no(),k=i({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),pe=i(k.value),se=De(()=>he.isEqual(k.value,pe.value)),Q=async()=>{w.value=!0;const Ce=await $({url:"/video-settings",method:"put",data:k.value});Ce.success&&Ce.result?Y.success(a("success")):Y.error(a("unableToUpdateSettings")),await y()},y=async()=>{var Ce;O.start(),w.value=!0,await h.loadSettings(),(Ce=h.settings)==null||Ce.forEach(ie=>{k.value[ie.key]!=null&&(k.value[ie.key]=ie.value)}),pe.value=he.cloneDeep(k.value),w.value=!1,O.finish()};y();const j=async()=>{O.start(),w.value=!0,(await $({url:"/video-items/youtube/channel-videos",method:"put"})).success?(Y.success(a("success")),await y()):Y.error(a("unableToUpdateChannelVideos")),w.value=!1,O.finish()},we=i(!1),ye=i(dt()),Ve=i({}),Me=De(()=>{let Ce=0;for(const ie in Ve.value)Ve.value[ie]&&Ce++;return Ce});function fe(){Ve.value={},V()}const Ne=async()=>(Me.value?G.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[Me.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{w.value=!0,O.start();for(const Ce in Ve.value)Ve.value[Ce]&&await $({url:`/video-items/force/${Ce}`,method:"delete"});O.finish(),w.value=!1,Y.success(a("success")),Ve.value={},V(null,!0)}}):Y.warning(a("noItemSelected")),!1);return(Ce,ie)=>{var rl,ul;const ge=be,N=ce,$e=Te,B=Gt,ae=It,xe=Ka,ue=Xe,Se=Vl,ze=Ya,Ae=it,qe=lt,et=Rt,xt=Ga,Le=ht,Je=wl,Be=Nt,ve=Pt,Ke=sl,Tt=Yt,Ot=wt,St=pt,Mt=Ft,Ue=Vt,gt=bt,jt=tl,pl=ft,ol=ut,il=Kt;return n(),E(me,null,[t(ae,{to:"#alt-action"},{default:l(()=>[e(F).currentTab=="settings"?(n(),z($e,{key:0,loading:e(w),disabled:e(se),type:"primary",onClick:Q},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),E("div",so,[t(B,{checked:e(we),"onUpdate:checked":[ie[0]||(ie[0]=s=>Ie(we)?we.value=s:null),ie[1]||(ie[1]=s=>{for(const Wt of e(q))Wt.id&&(e(Ve)[Wt.id]=s);ye.value=("uuidv4"in Ce?Ce.uuidv4:e(dt))()})]},{default:l(()=>[L(r(e(a)("selectAll")),1)]),_:1},8,["checked"]),t($e,{type:"primary",onClick:ie[2]||(ie[2]=s=>T(null))},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(ze,{value:e(F).currentTab,"onUpdate:value":[ie[6]||(ie[6]=s=>e(F).currentTab=s),m],type:"card",size:"medium"},Va({default:l(()=>[t(xe,{name:"all"},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:collapse-all"})]),_:1}),L(" "+r(e(a)("all_")),1)]),_:1}),t(xe,{name:e(Ct).SELF_HOSTED},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:document-video"})]),_:1}),L(" "+r(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(xe,{name:e(Ct).YOUTUBE},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:logo-youtube"})]),_:1}),L(" "+r(e(a)("youtube")),1)]),_:1},8,["name"]),t(xe,{name:"settings"},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:settings-adjust"})]),_:1}),L(" "+r(e(a)("settings")),1)]),_:1})]),_:2},[e(F).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Se,{class:"!w-[250px]"},{default:l(()=>[t(ue,{ref_key:"searchInputRef",ref:R,value:e(v),"onUpdate:value":[ie[3]||(ie[3]=s=>Ie(v)?v.value=s:null),ie[4]||(ie[4]=s=>{s||V()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t($e,{type:"primary",onClick:ie[5]||(ie[5]=s=>V())},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(Me)>0?(n(),E("section",oo,[g("span",null,r(e(a)("nbItemsSelected",[e(Me)])),1),g("section",io,[t($e,{type:"error",size:"small",onClick:Ne},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("delete")),1)]),_:1}),t($e,{type:"warning",size:"small",onClick:fe},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0),e(F).currentTab=="settings"?(n(),E("section",ro,[t(qe,{hoverable:"",embedded:""},{header:l(()=>[L(r(e(a)("youtube")),1)]),default:l(()=>[t(Le,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(et,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(a)("apiKey")),1),t(ue,{value:e(k).youtubeApiKey,"onUpdate:value":ie[7]||(ie[7]=s=>e(k).youtubeApiKey=s),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(qe,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(a)("autoUpdateChannelVideos")),1),t(xt,{value:e(k).youtubeChannelVideosAutoUpdate,"onUpdate:value":ie[8]||(ie[8]=s=>e(k).youtubeChannelVideosAutoUpdate=s),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>ie[28]||(ie[28]=[g("div",{class:"w-6"},null,-1)])),unchecked:l(()=>ie[29]||(ie[29]=[g("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(k).youtubeChannelVideosAutoUpdate=="1"?(n(),E(me,{key:0},[t(et,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(a)("channelId")),1),t(ue,{value:e(k).youtubeChannelId,"onUpdate:value":ie[9]||(ie[9]=s=>e(k).youtubeChannelId=s),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(a)("lastUpdate")),1),g("b",null,r(e(k).youtubeLastChannelVideosUpdate?e(Lt)(e(k).youtubeLastChannelVideosUpdate,{locale:e(c),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t($e,{strong:"",circle:"",secondary:e(oe),type:"primary",title:e(a)("refresh"),disabled:e(w),onClick:j},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:restart",class:Ye({"animate-spin":e(w)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):_e("",!0)]),_:1})]),_:1})])):(n(),z(qe,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(q).length&&!e(M)?(n(),E("section",uo,[t(Le,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),E(me,null,Pe(e(q),(s,Wt)=>(n(),z(et,{key:Wt},{default:l(()=>[t(ve,{name:"slide-fade",appear:""},{default:l(()=>[t(qe,{bordered:"",hoverable:""},{cover:l(()=>[g("div",co,[g("img",{src:s.thumbnailUrl??e(lo),class:"w-full h-[200px] object-cover"},null,8,po)])]),header:l(()=>[g("div",fo,[t(Je,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[s.id?(n(),z(B,{key:e(ye),checked:e(Ve)[s.id],"onUpdate:checked":Jt=>e(Ve)[s.id]=Jt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),L(" "+r(e(f)(s.title)),1)]),_:2},1024)])]),action:l(()=>[t(Ae,{justify:"space-between",align:"center"},{default:l(()=>[t(Ae,null,{default:l(()=>[t(Be,{bordered:!1,type:s.visible?"success":"error"},{default:l(()=>[L(r(s.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Be,{bordered:!1,type:s.displayType==e(Bt).HORIZONTAL?"info":"warning"},{default:l(()=>[L(r(s.displayType==e(Bt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Ae,null,{default:l(()=>[t($e,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{u.value=e(a)("video"),C.value=e(Z)(s.path),I.value=s.source==e(Ct).YOUTUBE?"youtube":"classic",d.value=!0}},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),s.source!=e(Ct).YOUTUBE?(n(),z($e,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Jt=>T(s)},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):_e("",!0),t($e,{ternary:"",circle:"",title:e(a)("delete"),onClick:Jt=>p(s)},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ke,{page:e(D),"onUpdate:page":[ie[10]||(ie[10]=s=>Ie(D)?D.value=s:null),W],class:"mt-10 justify-center","show-size-picker":"","page-size":e(P),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(le)/e(P)),"onUpdate:pageSize":S},{prefix:l(()=>[L(r(`${e(le)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(M)?(n(),E("section",mo,[t(Tt,{size:"medium"})])):(n(),z(Ot,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(ol,{show:e(H),"onUpdate:show":ie[21]||(ie[21]=s=>Ie(H)?H.value=s:null),loading:e(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:b,onNegativeClick:ie[22]||(ie[22]=s=>H.value=!1)},{default:l(()=>[g("div",vo,[t(pl,{ref_key:"formRef",ref:ne,model:e(o),rules:e(A),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(St,{label:e(a)("source"),path:"source"},{default:l(()=>[t(B,{checked:e(o).source,"onUpdate:checked":ie[11]||(ie[11]=s=>e(o).source=s),"checked-value":e(Ct).YOUTUBE,"unchecked-value":e(Ct).SELF_HOSTED},{default:l(()=>[L(r(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(o).source==e(Ct).YOUTUBE?(n(),z(Le,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(ue,{value:e(o).path,"onUpdate:value":ie[12]||(ie[12]=s=>e(o).path=s),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(o).displayType,"onUpdate:value":ie[13]||(ie[13]=s=>e(o).displayType=s),placeholder:e(a)("displayType"),options:e(K),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),E(me,{key:1},[t(St,{label:e(a)("title"),path:"title"},{default:l(()=>[t(gt,{modelValue:e(o).title,"onUpdate:modelValue":ie[14]||(ie[14]=s=>e(o).title=s),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(St,{label:e(a)("description"),path:"description"},{default:l(()=>[t(gt,{modelValue:e(o).description,"onUpdate:modelValue":ie[15]||(ie[15]=s=>e(o).description=s),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Le,{"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Se,null,{default:l(()=>[t($e,{type:"primary",onClick:ie[16]||(ie[16]=()=>{X.value=!0})},{default:l(()=>[L(r(e(a)("select")),1)]),_:1}),t(ue,{value:e(o).path?e(Xt)(e(o).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(o).path?(n(),E(me,{key:0},[t($e,{type:"primary",ghost:"",onClick:ie[17]||(ie[17]=()=>{u.value=e(a)("video"),C.value=e(Z)(e(o).path),I.value="classic",d.value=!0})},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("play")),1)]),_:1}),t($e,{type:"primary",ghost:"",onClick:ie[18]||(ie[18]=()=>{e(o).path=""})},{icon:l(()=>[t(N,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(o).displayType,"onUpdate:value":ie[19]||(ie[19]=s=>e(o).displayType=s),placeholder:e(a)("displayType"),options:e(K),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(St,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[g("div",_o,[g("div",{class:"cursor-pointer w-full h-[150px]",onClick:ie[20]||(ie[20]=()=>{x.value=!0})},[e(o).thumbnail?(n(),z(jt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Oe("border: 1px dashed "+e(ee)("green","white")),src:e(Z)(e(o).thumbnail||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(ee)("green","white"))},[t(N,{size:64},{default:l(()=>[t(ge,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ol,{show:e(d),"onUpdate:show":ie[23]||(ie[23]=s=>Ie(d)?d.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(u)},{default:l(()=>[e(I)==="youtube"?(n(),E("iframe",{key:0,width:"100%",height:"380",src:e(C),frameborder:"0",allowfullscreen:""},null,8,yo)):(n(),E("video",go,[g("source",{src:e(C)},null,8,bo)]))]),_:1},8,["show","title"]),t(il,{show:e(X),"onUpdate:show":ie[24]||(ie[24]=s=>Ie(X)?X.value=s:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((rl=e(U))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[25]||(ie[25]=s=>{e(o).path=s,X.value=!1})},null,8,["show","title","upload-config"]),t(il,{show:e(x),"onUpdate:show":ie[26]||(ie[26]=s=>Ie(x)?x.value=s:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(U))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[27]||(ie[27]=s=>{e(o).thumbnail=s,x.value=!1})},null,8,["show","title","upload-config"])],64)}}});const ko=Ut(ho,[["__scopeId","data-v-42abee62"]]),{t:Ee}=ba.global,va=[{key:"maxlength",defaultValue:"",placeholder:Ee("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Ee("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],wo={text:va,textarea:va,number:[{key:"min",defaultValue:"",placeholder:Ee("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Ee("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Ee("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ee("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("dateFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"library",defaultValue:"all",placeholder:Ee("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}]},{t:Re}=ba.global,xo=[{label:Re("text"),value:"text"},{label:Re("i18nText"),value:"i18n-text"},{label:Re("textarea"),value:"textarea"},{label:Re("i18nTextarea"),value:"i18n-textarea"},{label:Re("number"),value:"number"},{label:Re("checkbox"),value:"checkbox"},{label:Re("singleSelect"),value:"single-select"},{label:Re("multiSelect"),value:"multi-select"},{label:Re("date"),value:"date"},{label:Re("year"),value:"year"},{label:Re("editor"),value:"editor"},{label:Re("i18nEditor"),value:"i18n-editor"},{label:Re("image"),value:"image"},{label:Re("gallery"),value:"gallery"},{label:Re("newsArticle"),value:"news-article"},{label:Re("newsArticles"),value:"news-articles"},{label:Re("newsCategory"),value:"news-category"},{label:Re("newsCategories"),value:"news-categories"},{label:Re("newsTag"),value:"news-tag"},{label:Re("newsTags"),value:"news-tags"},{label:Re("icon"),value:"icon"},{label:Re("icons"),value:"icons"},{label:Re("albums"),value:"albums"},{label:Re("audio"),value:"audio"},{label:Re("video"),value:"video"},{label:Re("document"),value:"document"},{label:Re("file"),value:"file"},{label:Re("color"),value:"color"},{label:Re("contentItem"),value:"content-model-item"},{label:Re("contentItems"),value:"content-model-items"},{label:Re("menuItemLink"),value:"menu-item-link"},{label:Re("list"),value:"list"},{label:Re("i18nList"),value:"i18n-list"}],Co={class:"flex items-center justify-between w-full"},Io={class:"text-base font-semibold"},$o={class:"text-xs text-slate-400"},Vo={class:"text-xs text-slate-400"},To={class:"text-xs text-slate-400"},zo={class:"text-xs text-slate-400"},Uo={class:"text-xs text-slate-400"},So={key:0},Mo={key:0,class:"w-full flex items-center"},Ao={class:"w-full flex items-center"},Eo={class:"w-full"},Do=je({__name:"Fields",props:Ht({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{tr:c,formatKey:f}=We(),{isLightTheme:Z}=Fe(yt()),{contentModels:ee}=Fe(He()),_=de,K=_t(de,"modelValue"),$=vt("renderSelectLabel"),oe=vt("removeCollectionField"),O=vt("removeSingleton"),Y=vt("onCreateItemOption"),G=vt("expandedNames",()=>De(()=>i([]).value));return(U,v)=>{const R=Nt,M=it,q=be,F=ce,m=Te,le=Xe,P=Rt,D=bt,te=Vt,W=ht,S=zt,V=Gt,w=zl,H=Pt,J=Tl,ne=al,o=nl,A=lt;return n(!0),E(me,null,Pe(K.value,(T,p)=>(n(),z(A,{key:`field-${p}`,size:"small",class:"my-2"},{default:l(()=>[t(o,{"expanded-names":e(G)(_.type=="collection"?`c-${_.parentItemIndex}-f-${p}`:`s-${p}`).value,"onUpdate:expandedNames":b=>e(G)(_.type=="collection"?`c-${_.parentItemIndex}-f-${p}`:`s-${p}`).value=b,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(ne,{name:"1"},{header:l(()=>[g("div",Co,[t(M,null,{default:l(()=>[t(R,{size:"small",type:"info"},{default:l(()=>[L(r(p+1),1)]),_:2},1024),g("span",Io,r(e(c)(T.label)),1)]),_:2},1024),t(m,{size:"small",type:"error",secondary:e(Z),onClick:()=>{_.type==="collection"?e(oe)&&e(oe)(_.collectionKey,p):e(O)&&e(O)(p)}},{default:l(()=>[t(F,{class:"mr-1"},{default:l(()=>[t(q,{icon:"carbon:trash-can"})]),_:1}),L(" "+r(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(W,{span:24,"x-gap":"6"},{default:l(()=>[t(P,{span:6},{default:l(()=>[g("span",$o,r(e(a)("fieldKey")),1),t(le,{value:T.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":b=>T.key=e(f)(b)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(P,{span:10},{default:l(()=>[g("span",Vo,r(e(a)("title")),1),t(D,{modelValue:T.label,"onUpdate:modelValue":b=>T.label=b,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(P,{span:8},{default:l(()=>[g("span",To,r(e(a)("type")),1),t(te,{value:T.type,"onUpdate:value":b=>T.type=b,options:e(xo),placeholder:e(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),t(S,{class:"!mt-4 !mb-2"}),t(W,{span:24,"x-gap":"6"},{default:l(()=>[t(P,{span:10,class:"flex items-center"},{default:l(()=>[t(V,{checked:T.required,"onUpdate:checked":b=>T.required=b,size:"medium"},{default:l(()=>[L(r(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(P,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(T.type)?(n(),E(me,{key:0},[g("span",zo,r(e(a)("contentModel")),1),t(te,{value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,options:e(ee),placeholder:e(a)("contentModel"),"render-label":e($),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),E(me,{key:1},[g("span",Uo,r(e(a)("defaultValue")),1),T.type==="color"?(n(),E("div",So,[t(e(el),{value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,class:"cursor-pointer",theme:e(Z)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):(n(),z(le,{key:1,value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),T.type==="multi-select"||T.type==="single-select"?(n(),z(S,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[L(r(e(a)("options")),1)]),_:1})):_e("",!0),t(H,{name:"slide-fade",appear:""},{default:l(()=>[T.type==="multi-select"||T.type==="single-select"?(n(),E("div",Mo,[t(w,{value:T.options,"onUpdate:value":b=>T.options=b,placeholder:e(a)("addOption"),"on-create":b=>e(Y)?e(Y)(b,p):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[L(r(e(a)("addOption")),1)]),default:l(({value:b})=>[g("div",Ao,[t(le,{value:b.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":X=>b.value=e(f)(X)},null,8,["value","placeholder","onUpdate:value"]),t(D,{modelValue:b.label,"onUpdate:modelValue":X=>b.label=X,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):_e("",!0)]),_:2},1024),(n(!0),E(me,null,Pe(e(wo),(b,X,d)=>(n(),E(me,{key:d},[T.type===X?(n(),z(o,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(F,{size:"18"},{default:l(()=>[t(q,{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(ne,{name:"1"},{header:l(()=>[t(S,{"title-placement":"left",class:"!my-4"},{default:l(()=>[L(r(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(H,{name:"slide-fade",appear:""},{default:l(()=>[g("div",Eo,[(n(!0),E(me,null,Pe(b,u=>(n(),z(W,{key:u.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(P,{span:10},{default:l(()=>[t(le,{value:u.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(P,{span:14},{default:l(()=>[u.isNumber?(n(),z(J,{key:0,value:T.settings[u.key],"onUpdate:value":C=>T.settings[u.key]=C,"default-value":u.defaultValue?parseInt(u.defaultValue):void 0,placeholder:u.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),z(le,{key:1,value:T.settings[u.key],"onUpdate:value":C=>T.settings[u.key]=C,"default-value":u.defaultValue,placeholder:u.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):_e("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)}}});const _a=Ut(Do,[["__scopeId","data-v-9f4a4e0a"]]),Lo={class:"text-base"},Po={key:0},No={key:0},Ro={key:0},Oo={class:"flex items-center justify-between w-full"},qo={class:"text-base font-semibold"},Fo={class:"text-xs text-slate-400"},jo={class:"text-xs text-slate-400"},Bo={class:"text-xs text-slate-400"},Aa=je({__name:"index",props:Ht({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(de){const{t:a}=Ge(),{tr:c,pickByTheme:f,formatKey:Z}=We(),{isLightTheme:ee}=Fe(yt()),{loadContentModels:_}=He();_();const K=de,$=_t(de,"show"),oe=st(),O=nt(),Y=ct(),G=i(!1),U=i(null),v=i({}),R=i({}),M={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},q=i(!1),F=i(!1),m=i({}),le=d=>De({get:()=>m.value[d]?["1"]:[],set:u=>{m.value[d]=u.length>0}});kt(()=>F.value,d=>{Object.entries(v.value).forEach(([u,C],I)=>{var x;u!=="index"&&(m.value[`c-${I}`]=d,(x=C==null?void 0:C.items)==null||x.forEach((h,k)=>{m.value[`c-${I}-f-${k}`]=d}))})}),kt(()=>q.value,d=>{Object.entries(v.value).forEach(([u,C],I)=>{u==="index"&&(C==null||C.forEach((x,h)=>{m.value[`s-${h}`]=d}))})});const P=De(()=>he.isEqual(v.value,R.value)),D=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(he.cloneDeep(M)):v.value.index=[he.cloneDeep(M)]:v.value={index:[he.cloneDeep(M)]}},te=d=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(d,1)},W=()=>{const d=dt();v.value?v.value[d]={key:"",title:"",items:[]}:v.value={[d]:{key:"",title:"",items:[]}}},S=d=>{if(v.value){const{[d]:u,...C}=v.value;v.value=C}},V=d=>{v.value&&v.value[d].items.push(he.cloneDeep(M))},w=(d,u)=>{if(v.value){const C=v.value[d];C&&Array.isArray(C.items)&&C.items.splice(u,1)}},H=d=>d.title&&d.key&&d.key!=="index",J=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(d=>d!=="index").length:0,ne=De(()=>v.value?Object.keys(v.value).filter(d=>d!=="index"):[]),o=d=>ne.value.indexOf(d),A=i(!1),T=async()=>{const d=he.cloneDeep(v.value),u=he.cloneDeep(v.value);A.value=!1,G.value=!0,oe.start();const C=[];if(he.forIn(d,(I,x)=>{x!=="index"&&C.push(I.key)}),he.forIn(d,(I,x)=>{if(x!=="index"){const h=he.keys(d).filter(k=>k!=="index").indexOf(x);if(I&&I.key){if(I.key==="index")return O.error(a("keyIndexIsReservedInCollections")),A.value=!0,!1;if(C.filter(pe=>pe==I.key).length>1)return O.error(a("collectionKeyIsNotUnique",[I.key])),A.value=!0,!1;if(Array.isArray(I.items))for(const[pe,se]of I.items.entries())if(se.key){if(I.items.filter(y=>y.key===se.key).length>1)return O.error(a("fieldKeyOfCollectionIsNotUnique",[se.key,I.key])),A.value=!0,!1}else return O.error(a("fieldKeyOfCollectionIsRequired",[pe+1,I.key])),A.value=!0,!1}else return O.error(a("collectionKeyIsRequired",[h+1])),A.value=!0,!1}else if(Array.isArray(I))for(const[h,k]of I.entries())if(k.key){if(I.filter(se=>se.key===k.key).length>1)return O.error(a("singletonKeyIsNotUnique",[k.key])),A.value=!0,!1}else return O.error(a("singletonKeyIsRequired",[h+1])),A.value=!0,!1}),A.value){G.value=!1,oe.finish();return}he.forIn(u,(I,x)=>{x!=="index"&&x!==I.key&&Oa(d,x,I.key)}),await K.updateDataStructure(d),G.value=!1,oe.finish()},p=()=>{he.isEqual(v.value,R.value)?$.value=!1:Y.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{$.value=!1}})};kt(()=>K.rawDataStructure,d=>{v.value=d?he.cloneDeep(d):{},he.forIn(d,(u,C)=>{var I;C!=="index"?(v.value[C].key=C,(I=u==null?void 0:u.items)==null||I.forEach((x,h)=>{v.value[C].items[h].settings||(v.value[C].items[h].settings={})})):u==null||u.forEach((x,h)=>{v.value[C][h].settings||(v.value[C][h].settings={})})}),R.value=he.cloneDeep(v.value)},{immediate:!0,deep:!0});const b=d=>re("span",{},{default:()=>c(d.title)}),X=(d,u)=>({value:`option_${u+1}${d+1}`,label:""});return At("removeCollectionField",w),At("onCreateItemOption",X),At("renderSelectLabel",b),At("removeSingleton",te),At("addSingleton",D),At("expandCollections",F),At("expandSingletons",q),At("expandedNames",le),(d,u)=>{const C=Ca,I=be,x=ce,h=Te,k=it,pe=lt,se=$t,Q=Rt,y=Nt,j=Xe,we=bt,ye=ht,Ve=zt,Me=Ha,fe=al,Ne=nl,Ce=ya;return n(),z(Ce,{modelValue:$.value,"onUpdate:modelValue":u[7]||(u[7]=ie=>$.value=ie),"close-on-esc":!1,closable:!1,onOnSizeChange:u[8]||(u[8]=ie=>{U.value=ie})},{header:l(()=>[g("div",Lo,[t(C,{depth:"1"},{default:l(()=>[L(r(e(a)("dataStructure"))+" ",1),d.title?(n(),E("span",Po,"Â -Â "+r(d.title),1)):_e("",!0)]),_:1})])]),"header-extra":l(()=>[t(k,{align:"center"},{default:l(()=>[t(h,{type:"success",title:e(a)("save"),loading:e(G),disabled:e(P),onClick:u[0]||(u[0]=ie=>T())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(h,{type:"error",title:e(a)("close"),disabled:e(G),onClick:u[1]||(u[1]=ie=>p())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:close"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var ie,ge;return[g("section",{style:Oe(`min-height: ${((ie=e(U))==null?void 0:ie.windowHeight)-((ge=e(U))==null?void 0:ge.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(f)("bg-slate-200","bg-zinc-800")}`)},[t(ye,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(Q,{class:"ml-4 mt-2"},{default:l(()=>{var N,$e;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var B,ae;return[L(r(e(a)("singletons"))+"Â  ",1),(B=e(v).index)!=null&&B.length?(n(),E("span",No," ("+r((ae=e(v).index)==null?void 0:ae.length)+") ",1)):_e("",!0)]}),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(h,{size:"small",type:"primary",secondary:e(ee),onClick:u[2]||(u[2]=B=>q.value=!e(q))},{default:l(()=>[t(x,null,{default:l(()=>[e(q)?(n(),z(I,{key:0,icon:"carbon:collapse-categories"})):(n(),z(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(h,{size:"small",type:"primary",secondary:e(ee),onClick:u[3]||(u[3]=B=>D())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+r(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:Oe(`max-height: ${((N=e(U))==null?void 0:N.windowHeight)-(($e=e(U))==null?void 0:$e.headerHeight)-100}px`)},{default:l(()=>[t(_a,{modelValue:e(v).index,"onUpdate:modelValue":u[4]||(u[4]=B=>e(v).index=B),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(Q,{class:"mr-4 mt-2"},{default:l(()=>{var N,$e;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>[L(r(e(a)("collections"))+"Â  ",1),J()>0?(n(),E("span",Ro," ("+r(J())+") ",1)):_e("",!0)]),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(h,{size:"small",type:"primary",secondary:e(ee),onClick:u[5]||(u[5]=B=>F.value=!e(F))},{default:l(()=>[t(x,null,{default:l(()=>[e(F)?(n(),z(I,{key:0,icon:"carbon:collapse-categories"})):(n(),z(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(h,{size:"small",type:"primary",secondary:e(ee),onClick:u[6]||(u[6]=B=>W())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+r(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:Oe(`max-height: ${((N=e(U))==null?void 0:N.windowHeight)-(($e=e(U))==null?void 0:$e.headerHeight)-100}px`)},{default:l(()=>[(n(!0),E(me,null,Pe(e(v)||{},(B,ae,xe)=>(n(),E(me,{key:xe},[ae!="index"?(n(),z(pe,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Ne,{"expanded-names":le(`c-${xe}`).value,"onUpdate:expandedNames":ue=>le(`c-${xe}`).value=ue,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(fe,{name:"1"},{header:l(()=>[g("div",Oo,[t(k,null,{default:l(()=>[t(y,{size:"small",type:"success"},{default:l(()=>[L(r(o(ae)+1),1)]),_:2},1024),g("span",qo,r(e(c)(B.title)),1)]),_:2},1024),t(h,{size:"small",type:"error",secondary:e(ee),onClick:ue=>S(ae)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1}),L(" "+r(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(ye,{span:24,"x-gap":"6"},{default:l(()=>[t(Q,{span:6},{default:l(()=>[g("span",Fo,r(e(a)("fieldKey")),1),t(j,{value:B.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":ue=>B.key=e(Z)(ue)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(Q,{span:11},{default:l(()=>[g("span",jo,r(e(a)("title")),1),t(we,{modelValue:B.title,"onUpdate:modelValue":ue=>B.title=ue,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(Q,{span:7},{default:l(()=>[g("span",Bo,r(e(a)("actions")),1),t(h,{block:"",size:"small",type:"primary",disabled:!H(B),secondary:e(ee),class:"w-full",onClick:ue=>V(ae)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+r(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Ve,{class:"!my-4.75"}),H(B)?(n(),z(_a,{key:0,modelValue:e(v)[ae].items,"onUpdate:modelValue":ue=>e(v)[ae].items=ue,"parent-item-index":xe,"collection-key":ae,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),z(Me,{key:1,bordered:"",type:"info"},{default:l(()=>[L(r(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):_e("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Ko={class:"flex items-center"},Yo={class:"text-base"},Go={class:"mt-2"},Ho={class:"mt-2 text-xs"},Wo=je({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:_}=We(),{sections:K}=Fe(He()),{loadSections:$}=He(),{isLightTheme:oe}=Fe(yt()),O=st(),Y=nt(),G=i(!1);$();const U=i(12),v=i(1),R=H=>{U.value=H},M={name:"",title:"",content:"",slug:""},q=i(!1),F=i(null),m=i(M),le={title:[{required:!0,message:a("fillRequired")}]},P=i(null),D=H=>{P.value=he.cloneDeep(H),m.value=he.cloneDeep(H||M),q.value=!0},te=async()=>{var H;return(H=F.value)==null||H.validate(async J=>{var ne,o,A,T,p,b;if(!J){O.start(),G.value=!0;const X={title:m.value.title};P.value||(X.name=he.startCase(he.camelCase(f(m.value.title))).replace(/\s+/g,""));const d=await c({method:P.value?"put":"post",url:P.value?`/sections/${P.value.slug}`:"/sections",data:X});if(d.failure&&d.error)switch((A=(o=(ne=d.error)==null?void 0:ne.response)==null?void 0:o.data)==null?void 0:A.errorCode){case Qe.FORM_INVALID_DATA:ee((b=(p=(T=d.error)==null?void 0:T.response)==null?void 0:p.data)==null?void 0:b.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),$(),q.value=!1;G.value=!1,O.finish()}}),!1},W=i(null),S=i(!1),V=async H=>{var ne;G.value=!0,O.start();const J=await c({url:`/sections/${(ne=W.value)==null?void 0:ne.slug}`,method:"put",data:{dataStructure:H}});J.success&&J.result?(Y.success(a("success")),$(),w(J.result.data)):Y.error(a("anErrorOccurred")),G.value=!1,O.finish()},w=H=>{W.value=H,S.value=!0};return(H,J)=>{var se,Q;const ne=be,o=ce,A=Te,T=it,p=zt,b=Nt,X=al,d=nl,u=lt,C=sl,I=wt,x=bt,h=pt,k=ft,pe=ut;return n(),E(me,null,[e(K)&&e(K).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Pe(e(K).slice((e(v)-1)*e(U),e(v)*e(U)),y=>(n(),z(u,{key:y.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(d,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:j})=>[t(o,null,{default:l(()=>[j?(n(),z(ne,{key:0,icon:"fa-solid:chevron-left"})):(n(),z(ne,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>J[5]||(J[5]=[g("span",null,null,-1)])),default:l(()=>[t(X,{name:"1"},{header:l(()=>[g("div",Ko,[t(T,null,{default:l(()=>[e(_)?(n(),z(A,{key:0,size:"small",type:"primary",secondary:e(oe),onClick:ot(j=>w(y),["stop"])},{default:l(()=>[t(o,{class:"mr-1"},{default:l(()=>[t(ne,{icon:"carbon:data-1"})]),_:1}),L(" "+r(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):_e("",!0),t(A,{size:"small",type:"primary",secondary:e(oe),onClick:ot(j=>D(y),["stop"])},{default:l(()=>[t(o,null,{default:l(()=>[t(ne,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(p,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("span",Yo,r(e(f)(y.title)),1)])]),default:l(()=>[g("div",null,r(e(a)("sectionUsedInXPages",[y.pagesCount])),1),g("section",Go,[(n(!0),E(me,null,Pe(y.pages,j=>(n(),z(b,{key:j.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[L(r(e(f)(j.title)),1)]),_:2},1024))),128))]),g("div",Ho,[L(r(e(a)("dataRetrievalSlug"))+": ",1),g("b",null,r(y.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(C,{page:e(v),"onUpdate:page":J[0]||(J[0]=y=>Ie(v)?v.value=y:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(U),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(K).length/e(U)),"onUpdate:pageSize":R},{prefix:l(()=>[L(r(`${e(K).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),z(u,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(I,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(o,null,{default:l(()=>[t(ne,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(pe,{show:e(q),"onUpdate:show":J[2]||(J[2]=y=>Ie(q)?q.value=y:null),loading:e(G),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(P)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:J[3]||(J[3]=y=>q.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:F,model:e(m),rules:le,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(h,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(x,{modelValue:e(m).title,"onUpdate:modelValue":J[1]||(J[1]=y=>e(m).title=y),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Aa,{show:e(S),"onUpdate:show":J[4]||(J[4]=y=>Ie(S)?S.value=y:null),title:e(f)((se=e(W))==null?void 0:se.title),"raw-data-structure":(Q=e(W))==null?void 0:Q.dataStructure,"update-data-structure":V},null,8,["show","title","raw-data-structure"])],64)}}});const Jo={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(de){const a=de,{t:c}=Ge(),f=i(!1),Z=i(null),ee=i({header:null,results:null});function _({header:R,results:M}){ee.value={header:R,results:M},a.onSuccess&&a.onSuccess(ee.value)}function K(R){if(R.stopPropagation(),R.preventDefault(),f.value)return;const M=R.dataTransfer.files;if(M.length!==1){console.log(c("supportUploadingOneFile"));return}const q=M[0];if(!v(q))return console.log(c("formatNotSupported")),!1;Y(q),R.stopPropagation(),R.preventDefault()}function $(R){R.stopPropagation(),R.preventDefault(),R.dataTransfer.dropEffect="copy"}function oe(){Z.value.click()}function O(R){const q=R.target.files[0];q&&Y(q)}function Y(R){if(Z.value=null,!a.beforeUpload){G(R);return}a.beforeUpload(R)&&G(R)}function G(R){return f.value=!0,new Promise((M,q)=>{const F=new FileReader;F.onload=m=>{const le=m.target.result,P=on(le,{type:"array"}),D=P.SheetNames[0],te=P.Sheets[D],W=U(te),S=fl.sheet_to_json(te);_({header:W,results:S}),f.value=!1,M()},F.readAsArrayBuffer(R)})}function U(R){const M=[],q=fl.decode_range(R["!ref"]);let F;const m=q.s.r;for(F=q.s.c;F<=q.e.c;++F){const le=R[fl.encode_cell({c:F,r:m})];let P="UNKNOWN "+F;le&&le.t&&(P=fl.format_cell(le)),M.push(P)}return M}function v(R){return/\.(xlsx|xls|csv)$/.test(R.name)}return(R,M)=>{const q=Te;return n(),E("div",null,[g("input",{ref_key:"excelUploadInput",ref:Z,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:O},null,544),g("div",{class:"drop",onDrop:K,onDragover:$,onDragenter:$},[L(r(e(c)("dropExcelFileHereOr"))+" ",1),t(q,{loading:e(f),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:oe},{default:l(()=>[L(r(e(c)("browse")),1)]),_:1},8,["loading"])],32)])}}},Ea=Ut(Jo,[["__scopeId","data-v-c15025e0"]]),Xo={class:"flex items-center justify-center"},Zo=je({__name:"Email",setup(de){const a=st(),c=nt(),f=ct(),{displayFormErrors:Z}=We(),{request:ee}=Ze(),{t:_,locale:K}=Ge(),$=i(!1),oe=i([]),O=i(""),Y=i(),G={pageSize:12,prefix:({itemCount:d})=>re("div",{class:"font-bold"},{default:()=>`${_("total")}: ${d}`})},U=[{type:"selection"},{title:_("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(d){return re("div",{},{default:()=>d.email})}},{title:_("updateAt"),key:"updatedAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.updatedAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:_("createdAt"),key:"createdAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.createdAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:Y,placeholder:_("search"),value:O.value,onInput:d=>{O.value=d}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(d){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{D(d)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:_("confirm"),content:_("confirmDeleteEmailAddress"),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/emails/${d.id}`})).success?(c.success(_("success")),R()):c.error(_("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=De(()=>{if(!O.value)return oe.value;const d=oe.value.filter(u=>u.email.toLowerCase().includes(O.value.toLowerCase()));return Y.value&&Y.value.focus(),d}),R=async()=>{$.value=!0;const d=await ee({url:"/newsletter/emails"});d.success&&d.result&&(oe.value=d.result.data),$.value=!1};R();const M=i(!1),q=i(!1),F=i(null),m=i(null),le=i({email:""}),P={email:[{required:!0,message:_("fillRequired")},{trigger:["input"],validator(d,u){return u&&!Qt.isEmail(u)?new Error(_("invalidEmail")):!0}}]},D=d=>{F.value=he.cloneDeep(d),d?le.value=he.cloneDeep(d):le.value={email:""},q.value=!0},te=async()=>{var d;return(d=m.value)==null||d.validate(async u=>{var C,I,x,h,k,pe;if(!u)if(F.value)if(F.value.email!==le.value.email&&oe.value.findIndex(se=>se.email==le.value.email)>-1)c.error(_("sameEmailAddressMessage"));else{a.start(),M.value=!0;const se={email:le.value.email},Q=await ee({method:"put",url:`/newsletter/emails/${F.value.id}`,data:se});Q.success&&Q.result.data&&(c.success(_("success")),R()),M.value=!1,a.finish(),q.value=!1}else if(oe.value.findIndex(se=>se.email==le.value.email)>-1)c.error(_("sameEmailAddressMessage"));else{a.start(),M.value=!0;const se={email:le.value.email},Q=await ee({method:"post",url:"/newsletter/emails",data:se});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:Z((pe=(k=(h=Q.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:c.error(_("anErrorOccurred"))}else c.success(_("success")),R();M.value=!1,a.finish(),q.value=!1}}),!1};let W=null;const S=()=>{W&&(W.destroy(),W=null)};Ta(S);const V=(d,u)=>u.map(C=>d.map(I=>C[I])),w=()=>{W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["no","email","createdAt","updatedAt"];const C=he.sortBy(oe.value.map((x,h)=>({no:h+1,...x})),"email"),I=V(u,C);try{d.export_json_to_excel({header:u,data:I,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),S()}catch{S(),c.error(_("anErrorOccurred"))}})},H=()=>{W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["email"];const C=V(u,[{email:"adresse@email.com"}]);try{d.export_json_to_excel({header:u,data:C,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),S()}catch{S(),c.error(_("anErrorOccurred"))}})},J=i(!1),ne=async({results:d})=>{M.value=!0,a.start(),W||(W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<d.length;u++)d[u].email&&oe.value.findIndex(C=>C.email==d[u].email)==-1&&(W&&(W.content=`${_("pleaseBePatient")}: ${u} ${_("task_s")} / ${d.length}`),await ee({method:"post",url:"/newsletter/emails",data:{email:d[u].email}}));await R(),S(),a.finish(),M.value=!1,J.value=!1},o=i(dt()),A=i([]),T=d=>d.id,p=d=>{A.value=d},b=()=>{A.value=[],o.value=dt()},X=async()=>(A.value.length?f.warning({title:_("confirm"),content:_("deleteSelectionWarningMessage",[A.value.length]),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let d=0;d<A.value.length;d++)(await ee({url:`/newsletter/emails/${A.value[d]}`,method:"delete"})).success;R(),a.finish(),M.value=!1,c.success(_("success")),b()}}):c.warning(_("noItemSelected")),!1);return(d,u)=>{const C=Ia,I=it,x=It,h=lt,k=Pt,pe=kl,se=gl,Q=pt,y=ft,j=ut,we=Ea;return n(),E(me,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:u[0]||(u[0]=ye=>w())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("export")),1)]),_:1})]),default:l(()=>[L(" "+r(e(_)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:u[1]||(u[1]=ye=>J.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:u[2]||(u[2]=ye=>D(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),z(h,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(_)("nbItemsSelected",[e(A).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:b},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),z(pe,{key:e(o),columns:U,data:e(v),pagination:G,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(j,{show:e(q),"onUpdate:show":u[4]||(u[4]=ye=>Ie(q)?q.value=ye:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(F)?e(_)("editEmailAddress"):e(_)("addEmailAddress"),"positive-text":e(_)("validate"),"negative-text":e(_)("cancel"),onPositiveClick:te,onNegativeClick:u[5]||(u[5]=ye=>q.value=!1)},{default:l(()=>[t(y,{ref_key:"formRef",ref:m,class:"mt-5",model:e(le),rules:P,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Q,{label:e(_)("emailAddress"),path:"email"},{default:l(()=>[t(e(Xe),{value:e(le).email,"onUpdate:value":u[3]||(u[3]=ye=>e(le).email=ye),placeholder:e(_)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(j,{show:e(J),"onUpdate:show":u[7]||(u[7]=ye=>Ie(J)?J.value=ye:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(_)("import")},{default:l(()=>[t(we,{class:"my-5","on-success":ne}),g("div",Xo,[t(e(Te),{type:"info",size:"small",onClick:u[6]||(u[6]=ye=>H())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Qo={class:"flex items-center justify-center"},ei=je({__name:"Phone",setup(de){const a=st(),c=nt(),f=ct(),{displayFormErrors:Z}=We(),{request:ee}=Ze(),{t:_,locale:K}=Ge(),$=i(!1),oe=i([]),O=i(""),Y=i(),G={pageSize:12,prefix:({itemCount:d})=>re("div",{class:"font-bold"},{default:()=>`${_("total")}: ${d}`})},U=[{type:"selection"},{title:_("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(d){return re("div",{},{default:()=>d.phone})}},{title:_("updateAt"),key:"updatedAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.updatedAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:_("createdAt"),key:"createdAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.createdAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:Y,placeholder:_("search"),value:O.value,onInput:d=>{O.value=d}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(d){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{D(d)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:_("confirm"),content:_("confirmDeletePhoneNumber"),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/phones/${d.id}`})).success?(c.success(_("success")),R()):c.error(_("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=De(()=>{if(!O.value)return oe.value;const d=oe.value.filter(u=>u.phone.toLowerCase().includes(O.value.toLowerCase()));return Y.value&&Y.value.focus(),d}),R=async()=>{$.value=!0;const d=await ee({url:"/newsletter/phones"});d.success&&d.result&&(oe.value=d.result.data),$.value=!1};R();const M=i(!1),q=i(!1),F=i(null),m=i(null),le=i({phone:""}),P={phone:[{required:!0,message:_("fillRequired")},{trigger:["input"],validator(d,u){return u&&!un(u)?new Error(_("invalidNumber")):!0}}]},D=d=>{F.value=he.cloneDeep(d),d?le.value=he.cloneDeep(d):le.value={phone:""},q.value=!0},te=async()=>{var d;return(d=m.value)==null||d.validate(async u=>{var C,I,x,h,k,pe;if(!u)if(F.value)if(F.value.phone!==le.value.phone.replace(/\s+/g,"")&&oe.value.findIndex(se=>se.phone==le.value.phone.replace(/\s+/g,""))>-1)c.error(_("samePhoneNumberMessage"));else{a.start(),M.value=!0;const se={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"put",url:`/newsletter/phones/${F.value.id}`,data:se});Q.success&&Q.result.data&&(c.success(_("success")),R()),M.value=!1,a.finish(),q.value=!1}else if(oe.value.findIndex(se=>se.phone==le.value.phone.replace(/\s+/g,""))>-1)c.error(_("samePhoneNumberMessage"));else{a.start(),M.value=!0;const se={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"post",url:"/newsletter/phones",data:se});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:Z((pe=(k=(h=Q.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:c.error(_("anErrorOccurred"))}else c.success(_("success")),R();M.value=!1,a.finish(),q.value=!1}}),!1};let W=null;const S=()=>{W&&(W.destroy(),W=null)};Ta(S);const V=(d,u)=>u.map(C=>d.map(I=>C[I])),w=()=>{W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["no","phone","createdAt","updatedAt"];const C=he.sortBy(oe.value.map((x,h)=>({no:h+1,...x})),"phone"),I=V(u,C);try{d.export_json_to_excel({header:u,data:I,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),S()}catch{S(),c.error(_("anErrorOccurred"))}})},H=()=>{W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["phone"];const C=V(u,[{phone:"+22899999999"}]);try{d.export_json_to_excel({header:u,data:C,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),S()}catch{S(),c.error(_("anErrorOccurred"))}})},J=i(!1),ne=async({results:d})=>{M.value=!0,a.start(),W||(W=c.info(_("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<d.length;u++)d[u].phone&&oe.value.findIndex(C=>C.phone.replace(/\s+/g,"")==d[u].phone.replace(/\s+/g,""))==-1&&(W&&(W.content=`${_("pleaseBePatient")}: ${u} ${_("task_s")} / ${d.length}`),await ee({method:"post",url:"/newsletter/phones",data:{phone:d[u].phone.replace(/\s+/g,"")}}));await R(),S(),a.finish(),M.value=!1,J.value=!1},o=i(dt()),A=i([]),T=d=>d.id,p=d=>{A.value=d},b=()=>{A.value=[],o.value=dt()},X=async()=>(A.value.length?f.warning({title:_("confirm"),content:_("deleteSelectionWarningMessage",[A.value.length]),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let d=0;d<A.value.length;d++)(await ee({url:`/newsletter/phones/${A.value[d]}`,method:"delete"})).success;R(),a.finish(),M.value=!1,c.success(_("success")),b()}}):c.warning(_("noItemSelected")),!1);return(d,u)=>{const C=Ia,I=it,x=It,h=lt,k=Pt,pe=kl,se=gl,Q=rn,y=pt,j=ft,we=ut,ye=Ea;return n(),E(me,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:u[0]||(u[0]=Ve=>w())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("export")),1)]),_:1})]),default:l(()=>[L(" "+r(e(_)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:u[1]||(u[1]=Ve=>J.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:u[2]||(u[2]=Ve=>D(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),z(h,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,r(e(_)("nbItemsSelected",[e(A).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:b},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),z(pe,{key:e(o),columns:U,data:e(v),pagination:G,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(we,{show:e(q),"onUpdate:show":u[4]||(u[4]=Ve=>Ie(q)?q.value=Ve:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(F)?e(_)("editPhoneNumber"):e(_)("addPhoneNumber"),"positive-text":e(_)("validate"),"negative-text":e(_)("cancel"),onPositiveClick:te,onNegativeClick:u[5]||(u[5]=Ve=>q.value=!1)},{default:l(()=>[t(j,{ref_key:"formRef",ref:m,class:"mt-5",model:e(le),rules:P,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(y,{label:e(_)("phone"),path:"phone"},{default:l(()=>[t(Q,{modelValue:e(le).phone,"onUpdate:modelValue":u[3]||(u[3]=Ve=>e(le).phone=Ve)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(we,{show:e(J),"onUpdate:show":u[7]||(u[7]=Ve=>Ie(J)?J.value=Ve:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(_)("import")},{default:l(()=>[t(ye,{class:"my-5","on-success":ne}),g("div",Qo,[t(e(Te),{type:"info",size:"small",onClick:u[6]||(u[6]=Ve=>H())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),ti="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",li={class:"text-base"},ai={class:"text-base"},ni=je({__name:"DataForm",props:Ht({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(de){const a=de,c=_t(de,"show"),f=_t(de,"data"),Z=st(),ee=nt(),{t:_}=Ge(),{tr:K,pickByTheme:$,editKeysToCamelCase:oe}=We(),O=i(null),Y=i(!1),G=vt("currentEditItem"),U=De(()=>he.isEqual(f.value,G==null?void 0:G.value)&&he.isEqual(R.value,q.value)),v=()=>{c.value=!1,Y.value=!1},R=i({}),M=i(dt()),q=i({}),F=i(),m=i();kt(()=>c.value,P=>{var D;P&&(ga(f.value.contentModelData)?R.value=qt(f.value.contentModelData):R.value=qt({}),he.forIn(oe(((D=a.contentModel)==null?void 0:D.dataStructure)??{}),(te,W)=>{(!R.value[W]||Array.isArray(R.value[W])&&R.value[W].length==0)&&(W==="index"?R.value[W]=qt({}):R.value[W]=qt([]))}),q.value=he.cloneDeep(R.value),M.value=dt())},{immediate:!0});const le=async()=>{Y.value=!0,Z.start();const P=F.value&&await F.value(),D=m.value&&await m.value();(!F.value||P)&&(!m.value||D)?await a.submitData(R.value):ee.error(_("mandatoryFieldsNotFilledIn")),Z.finish(),Y.value=!1};return(P,D)=>{const te=Ca,W=bl,S=hl,V=be,w=ce,H=Te,J=it,ne=lt,o=$t,A=Rt,T=ht,p=ya;return n(),z(p,{modelValue:c.value,"onUpdate:modelValue":D[3]||(D[3]=b=>c.value=b),"close-on-esc":!1,closable:!1,onOnSizeChange:D[4]||(D[4]=b=>{O.value=b})},{header:l(()=>[g("div",li,[t(te,{depth:"1"},{default:l(()=>{var b;return[L(r(e(K)((b=a.contentModel)==null?void 0:b.title))+" ",1),g("span",null," Â -Â "+r(e(G)?e(_)("editItem"):e(_)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(J,{align:"center"},{default:l(()=>[g("span",ai,r(e(_)("status"))+":",1),t(S,{value:f.value.isActive,"onUpdate:value":D[0]||(D[0]=b=>f.value.isActive=b),name:"isActive",class:"w-full"},{default:l(()=>[t(W,{value:!1,label:e(_)("hidden"),class:"w-[50%]"},null,8,["label"]),t(W,{value:!0,label:e(_)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),D[5]||(D[5]=g("div",{class:"w-4"},null,-1)),t(H,{type:"success",title:e(_)("save"),loading:e(Y),disabled:e(U),onClick:D[1]||(D[1]=b=>le())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("save")),1)]),_:1},8,["title","loading","disabled"]),t(H,{type:"error",title:e(_)("close"),disabled:e(Y),onClick:D[2]||(D[2]=b=>v())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:close"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var b,X;return[g("section",{style:Oe(`min-height: ${((b=e(O))==null?void 0:b.windowHeight)-((X=e(O))==null?void 0:X.headerHeight)-5}px`),class:Ye(`w-full h-full ${e($)("bg-slate-200","bg-zinc-800")}`)},[t(T,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(A,{class:"ml-4 mt-2"},{default:l(()=>{var d,u;return[t(o,{style:Oe(`height: ${((d=e(O))==null?void 0:d.windowHeight)-((u=e(O))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),E(me,null,Pe(e(oe)((C=P.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),E(me,{key:x},[String(x)==="index"?(n(),z(ne,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),z(yl,{key:`${e(M)}-${x}-form-1`,modelValue:e(R)[x],"onUpdate:modelValue":h=>e(R)[x]=h,items:I,onUpdate:(h,k)=>{F.value=k}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(A,{class:"mr-4 mt-2"},{default:l(()=>{var d,u;return[t(o,{style:Oe(`height: ${((d=e(O))==null?void 0:d.windowHeight)-((u=e(O))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),E(me,null,Pe(e(oe)((C=P.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),E(me,{key:x},[String(x)!=="index"?(n(),z(ne,{key:0,title:e(K)(I.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{quaternary:"",size:"small",onClick:()=>e(R)[x].push({})},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(_)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),E(me,null,Pe(e(R)[x],(h,k)=>(n(),z(ne,{key:k,title:String(k+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{type:"error",size:"small",onClick:()=>e(R)[x].splice(k,1)},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),z(yl,{key:`${e(M)}-${x}-${k}-form-2`,modelValue:e(R)[x][k],"onUpdate:modelValue":pe=>e(R)[x][k]=pe,items:I.items,onUpdate:(pe,se)=>{m.value=se}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),si={class:"flex items-center justify-between"},oi={class:"flex flex-col"},ii={class:"text-sm font-bold"},ri={class:"text-xs font-normal"},ui=je({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Ht(["update"],["update:show"]),setup(de,{emit:a}){const{t:c}=Ge(),{request:f}=Ze(),{pickByTheme:Z,tr:ee,displayFormErrors:_,mergeArrays:K}=We(),{extractItemTitle:$}=cl(),{loadContentModels:oe}=He(),{contentModels:O}=Fe(He()),{isLightTheme:Y}=Fe(yt()),G=ct(),U=nt(),v=st(),R=a;oe();const M=_t(de,"show"),q=i(!1),F=vt("currentEditItem"),m=async T=>{G.warning({title:c("confirm"),content:c("confirmDeleteLink"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{var b,X,d,u,C;v.start(),(await f({method:"put",url:`/content-model/items/${(b=F==null?void 0:F.value)==null?void 0:b.id}`,data:{relatedItems:(u=(d=(X=F==null?void 0:F.value)==null?void 0:X.relatedItems)==null?void 0:d.filter(I=>I.id!==T.id))==null?void 0:u.map(I=>I.id)}})).success?(U.success(c("success")),R("update",(C=F==null?void 0:F.value)==null?void 0:C.id)):U.error(c("anErrorOccurred")),v.finish()}})},le=T=>{var p;return(p=O.value)==null?void 0:p.find(b=>b.id===T.contentModelId)},P=i(!1),D=i(null),te=i({contentModelId:null,itemId:null}),W={contentModelId:[{required:!0,message:c("fillRequired")}],itemId:[{required:!0,message:c("fillRequired")}]},S=async()=>{var T;return(T=D.value)==null||T.validate(async p=>{var b,X,d,u,C,I,x,h,k,pe;if(!p){v.start(),q.value=!0;const se=((X=(b=F==null?void 0:F.value)==null?void 0:b.relatedItems)==null?void 0:X.map(y=>y.id))||[],Q=await f({method:"put",url:`/content-model/items/${(d=F==null?void 0:F.value)==null?void 0:d.id}`,data:{relatedItems:[...se,te.value.itemId]}});if(Q.failure&&Q.error)switch((I=(C=(u=Q.error)==null?void 0:u.response)==null?void 0:C.data)==null?void 0:I.errorCode){case Qe.FORM_INVALID_DATA:_((k=(h=(x=Q.error)==null?void 0:x.response)==null?void 0:h.data)==null?void 0:k.data);break;default:U.error(c("anErrorOccurred"))}else U.success(c("success")),R("update",(pe=F==null?void 0:F.value)==null?void 0:pe.id),P.value=!1;q.value=!1,v.finish()}}),!1},V=T=>re("span",{},{default:()=>ee(T.title)}),w=T=>De(()=>re("span",{},{default:()=>$(T,le(T))})),H=i(!1),J=i([]),ne=i([]),o=async(T,p)=>{if(!T.length){ne.value=[];return}H.value=!0;const b=await f({url:`/content-model-items/search/${T}/${p}`});b.success&&b.result&&(ne.value=b.result.data),H.value=!1},A=De(()=>K(J.value,ne.value,"id").filter(T=>{var p;return T.id!==((p=F==null?void 0:F.value)==null?void 0:p.id)}));return(T,p)=>{const b=be,X=Te,d=it,u=ce,C=lt,I=$t,x=wt,h=Yt,k=ut,pe=Vt,se=pt,Q=ft;return n(),E(me,null,[t(k,{show:M.value,"onUpdate:show":p[2]||(p[2]=y=>M.value=y),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(c)("linkContentModelItems")},{"header-extra":l(()=>[t(d,{align:"center"},{default:l(()=>[t(X,{size:"small",type:"primary",disabled:e(q),onClick:p[0]||(p[0]=y=>P.value=!0)},{default:l(()=>[t(b,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+r(e(c)("add")),1)]),_:1},8,["disabled"]),t(X,{size:"small",type:"error",disabled:e(q),onClick:p[1]||(p[1]=y=>M.value=!1)},{default:l(()=>[t(b,{icon:"carbon:close",class:"mr-1"}),L(" "+r(e(c)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(h,{show:e(q)},{default:l(()=>{var y,j;return[(j=(y=e(F))==null?void 0:y.relatedItems)!=null&&j.length?(n(),z(I,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var we;return[(n(!0),E(me,null,Pe((we=e(F))==null?void 0:we.relatedItems,ye=>(n(),z(C,{key:ye.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Ve;return[g("div",si,[g("div",oi,[g("span",ii,r(e($)(ye,le(ye))),1),g("span",ri,r(e(ee)((Ve=le(ye))==null?void 0:Ve.title)),1)]),t(d,null,{default:l(()=>[t(X,{size:"small",type:"error",secondary:e(Y),onClick:Me=>m(ye)},{default:l(()=>[t(u,null,{default:l(()=>[t(b,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),z(C,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(c)("noLinkAdded")},{icon:l(()=>[t(u,null,{default:l(()=>[t(b,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(k,{show:e(P),"onUpdate:show":p[6]||(p[6]=y=>Ie(P)?P.value=y:null),loading:e(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(c)("addLink"),"positive-text":e(c)("validate"),"negative-text":e(c)("cancel"),onPositiveClick:S,onNegativeClick:p[7]||(p[7]=y=>P.value=!1)},{default:l(()=>[t(Q,{ref_key:"formRef",ref:D,model:e(te),rules:W,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(se,{label:e(c)("contentModel"),path:"contentModelId"},{default:l(()=>[t(pe,{value:e(te).contentModelId,"onUpdate:value":p[3]||(p[3]=y=>e(te).contentModelId=y),options:e(O),placeholder:e(c)("contentModel"),"render-label":V,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(se,{label:e(c)("itemToLink"),path:"itemId"},{default:l(()=>[t(pe,{value:e(te).itemId,"onUpdate:value":p[4]||(p[4]=y=>e(te).itemId=y),options:e(A)||[],placeholder:e(c)("itemToLink"),"render-label":y=>w(y).value,loading:e(H),disabled:!e(te).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[5]||(p[5]=y=>o(y,e(te).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),di={key:0,class:"w-full flex items-center justify-between gap-4"},ci={class:"flex items-center gap-3"},pi={key:0},fi={class:"flex items-center justify-center h-full"},mi=["src"],vi={class:"text-center text-dimgray text-sm"},_i={key:1,class:"flex items-center justify-center"},yi=je({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee}=We(),_=ct(),K=nt(),$=st(),oe=_t(de,"modelValue"),O=i(!1),Y=i(!1),G=i(!1),U=i(!1),v=i([]),R=i(0),M=i(12),q=i(1),F=De(()=>{var b;return`/content-model/items?pageSize=${M.value}&contentModelId=${(b=oe.value)==null?void 0:b.id}`}),m=b=>{P(`${F.value}&page=${b}`)},le=b=>{M.value=b,P()},P=async(b=null,X=!1)=>{var u,C,I,x,h;O.value=!0,$.start();const d=await c({url:b??F.value});d.success&&d.result&&(v.value=((u=d.result.data)==null?void 0:u.items)||[],R.value=((I=(C=d.result.data)==null?void 0:C.meta)==null?void 0:I.total)||0,q.value=((h=(x=d.result.data)==null?void 0:x.meta)==null?void 0:h.currentPage)||1),$.finish(),O.value=!1};P(null,!0);const D=i(null),te=i({title:"",contentModelData:"",isActive:!0}),W=b=>{D.value=he.cloneDeep(b),b?te.value=he.cloneDeep(b):te.value={title:"",contentModelData:"",isActive:!0},G.value=!0},S=b=>{D.value=he.cloneDeep(b),U.value=!0},V=async b=>{await P();const X=v.value.find(d=>d.id===b);X&&S(X)},w=async b=>{_.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-model/items/${b.id}`})).success?(K.success(a("success")),P()):K.error(a("anErrorOccurred"))}})},H=async b=>{var u,C,I,x,h,k,pe;$.start(),Y.value=!0;const X={title:te.value.title,contentModelData:b,isActive:te.value.isActive,contentModelId:(u=oe.value)==null?void 0:u.id},d=await c({method:D.value?"put":"post",url:D.value?`/content-model/items/${D.value.id}`:"/content-model/items",data:X});if(d.failure&&d.error)switch((x=(I=(C=d.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:ee((pe=(k=(h=d.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),P(`${F.value}&page=${q.value}`),G.value=!1;Y.value=!1,$.finish()},J=i(!1),ne=i(dt()),o=i({}),A=De(()=>{let b=0;for(const X in o.value)o.value[X]&&b++;return b});function T(){o.value={},P()}const p=async()=>(A.value?_.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[A.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{Y.value=!0,$.start();for(const b in o.value)o.value[b]&&await c({url:`/content-model/items/${b}`,method:"delete"});$.finish(),Y.value=!1,K.success(a("success")),o.value={},P(null,!0)}}):K.warning(a("noItemSelected")),!1);return At("currentEditItem",D),(b,X)=>{const d=Gt,u=be,C=ce,I=Te,x=it,h=It,k=xa,pe=wl,se=Nt,Q=lt,y=Pt,j=Rt,we=ht,ye=sl,Ve=Yt,Me=wt;return n(),E(me,null,[t(h,{to:"#alt-action"},{default:l(()=>[t(x,{align:"center"},{default:l(()=>[t(d,{checked:e(J),"onUpdate:checked":[X[0]||(X[0]=fe=>Ie(J)?J.value=fe:null),X[1]||(X[1]=fe=>{for(const Ne of e(v))Ne.id&&(e(o)[Ne.id]=fe);ne.value=("uuidv4"in b?b.uuidv4:e(dt))()})],disabled:!e(v).length},{default:l(()=>[L(r(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(I,{type:"primary",onClick:X[2]||(X[2]=fe=>W(null))},{icon:l(()=>[t(C,{size:"18"},{default:l(()=>[t(u,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(k,{class:"mt-2 mb-5",onBack:X[3]||(X[3]=fe=>oe.value=null)},{title:l(()=>{var fe;return[L(r(e(Z)((fe=oe.value)==null?void 0:fe.title)),1)]}),back:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(A)>0?(n(),E("section",di,[g("span",null,r(e(a)("nbItemsSelected",[e(A)])),1),g("section",ci,[t(I,{type:"error",size:"small",onClick:p},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("delete")),1)]),_:1}),t(I,{type:"warning",size:"small",onClick:T},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0)]),_:1}),e(v).length&&!e(O)?(n(),E("section",pi,[t(we,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),E(me,null,Pe(e(v),(fe,Ne)=>(n(),z(j,{key:Ne},{default:l(()=>[t(y,{name:"slide-fade",appear:""},{default:l(()=>[t(Q,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var Ce;return[g("div",fi,[g("img",{src:((Ce=oe.value)==null?void 0:Ce.imageUrl)??e(ti),class:"w-full h-[200px] object-cover"},null,8,mi)])]}),header:l(()=>[g("div",vi,[t(pe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[fe.id?(n(),z(d,{key:e(ne),checked:e(o)[fe.id],"onUpdate:checked":Ce=>e(o)[fe.id]=Ce,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),L(" "+r(e(f)(fe,oe.value)),1)]),_:2},1024)])]),action:l(()=>[t(x,{justify:"space-between",align:"center"},{default:l(()=>[t(se,{bordered:!1,type:fe.isActive?"success":"error"},{default:l(()=>[L(r(fe.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(x,null,{default:l(()=>[t(I,{ternary:"",circle:"",title:e(a)("edit"),onClick:Ce=>W(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("links"),onClick:Ce=>S(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ce=>w(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(ye,{page:e(q),"onUpdate:page":[X[4]||(X[4]=fe=>Ie(q)?q.value=fe:null),m],class:"mt-10 justify-center","show-size-picker":"","page-size":e(M),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(R)/e(M)),"onUpdate:pageSize":le},{prefix:l(()=>[L(r(`${e(R)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(O)?(n(),E("section",_i,[t(Ve,{size:"medium"})])):(n(),z(Me,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(ni,{show:e(G),"onUpdate:show":X[5]||(X[5]=fe=>Ie(G)?G.value=fe:null),data:e(te),"onUpdate:data":X[6]||(X[6]=fe=>Ie(te)?te.value=fe:null),"content-model":oe.value,"submit-data":H},null,8,["show","data","content-model"]),t(ui,{show:e(U),"onUpdate:show":X[7]||(X[7]=fe=>Ie(U)?U.value=fe:null),onUpdate:V},null,8,["show"])],64)}}}),gi={key:2},bi={class:"flex items-center"},hi={class:"text-base"},ki={class:"mt-4"},wi="previews",xi=je({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,fileUrl:_,isInDevMode:K,formatKey:$}=We(),{isLightTheme:oe}=Fe(yt()),{contentModels:O}=Fe(He()),{loadContentModels:Y}=He(),G=st(),U=nt(),v=ct(),R=i(!1),M=i(!1),q=vt("appConfig"),F=async()=>{G.start(),R.value=!0,await Y(),R.value=!1,G.finish()};F();const m=i(12),le=i(1),P=C=>{m.value=C},D={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},te=i(!1),W=i(null),S=i(D),V={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},w=i(null),H=C=>{w.value=he.cloneDeep(C),S.value=he.cloneDeep(C||D),te.value=!0},J=async()=>{var C;return(C=W.value)==null||C.validate(async I=>{var x,h,k,pe,se,Q;if(!I){G.start(),M.value=!0;const y={name:S.value.name,title:S.value.title,image:S.value.image,description:S.value.description,titleFieldName:S.value.titleFieldName,hasPermalink:S.value.hasPermalink},j=await c({method:w.value?"put":"post",url:w.value?`/content-models/${w.value.id}`:"/content-models",data:y});if(j.failure&&j.error)switch((k=(h=(x=j.error)==null?void 0:x.response)==null?void 0:h.data)==null?void 0:k.errorCode){case Qe.FORM_INVALID_DATA:ee((Q=(se=(pe=j.error)==null?void 0:pe.response)==null?void 0:se.data)==null?void 0:Q.data);break;default:U.error(a("anErrorOccurred"))}else U.success(a("success")),F(),te.value=!1;M.value=!1,G.finish()}}),!1},ne=async C=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-models/${C.id}`})).success?(U.success(a("success")),F()):U.error(a("anErrorOccurred"))}})},o=i(null),A=i(!1),T=async C=>{var x;M.value=!0,G.start();const I=await c({url:`/content-models/${(x=o.value)==null?void 0:x.id}`,method:"put",data:{dataStructure:C}});I.success&&I.result?(U.success(a("success")),F(),p(I.result.data)):U.error(a("anErrorOccurred")),M.value=!1,G.finish()},p=C=>{o.value=C,A.value=!0},b=i(!1),X=async C=>{S.value.image=C,b.value=!1},d=()=>{S.value.image=""},u=ll("content-models-management",()=>({itemsContentModel:i(null)}))();return kt(()=>S.value.title,C=>{w.value||S.value.name.length<=21&&(S.value.name=Ua(f(C),{trim:!0,lower:!0,strict:!0}))}),(C,I)=>{var xe,ue,Se;const x=be,h=ce,k=Te,pe=It,se=it,Q=zt,y=lt,j=sl,we=wt,ye=Pt,Ve=bt,Me=pt,fe=Xe,Ne=Rt,Ce=$a,ie=Ft,ge=ht,N=Gt,$e=ft,B=ut,ae=Kt;return n(),E(me,null,[e(u).itemsContentModel?_e("",!0):(n(),z(pe,{key:0,to:"#alt-action"},{default:l(()=>[e(O)&&e(O).length?(n(),z(k,{key:0,type:"primary",onClick:I[0]||(I[0]=ze=>H(null))},{icon:l(()=>[t(h,{size:"18"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addContentModel")),1)]),_:1})):_e("",!0)]),_:1})),e(u).itemsContentModel?(n(),z(yi,{key:1,modelValue:e(u).itemsContentModel,"onUpdate:modelValue":I[1]||(I[1]=ze=>e(u).itemsContentModel=ze)},null,8,["modelValue"])):(n(),E("section",gi,[t(ye,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(O)&&e(O).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Pe(e(O).slice((e(le)-1)*e(m),e(le)*e(m)),ze=>(n(),z(y,{key:ze.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[g("div",bi,[e(K)?(n(),z(se,{key:0},{default:l(()=>[t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>p(ze),["stop"])},{default:l(()=>[t(h,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:data-1"})]),_:1}),L(" "+r(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>H(ze),["stop"])},{default:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"error",secondary:e(oe),onClick:ot(Ae=>ne(ze),["stop"])},{default:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):_e("",!0),e(K)?(n(),z(Q,{key:1,vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):_e("",!0),g("span",hi,r(e(f)(ze.title)),1)])]),"header-extra":l(()=>[t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>e(u).itemsContentModel=ze,["stop"])},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(j,{page:e(le),"onUpdate:page":I[2]||(I[2]=ze=>Ie(le)?le.value=ze:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(m),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(O).length/e(m)),"onUpdate:pageSize":P},{prefix:l(()=>[L(r(`${e(O).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),z(y,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(we,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[g("div",ki,[t(k,{size:"small",onClick:I[3]||(I[3]=ze=>H(null))},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(B,{show:e(te),"onUpdate:show":I[11]||(I[11]=ze=>Ie(te)?te.value=ze:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(w)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:J,onNegativeClick:I[12]||(I[12]=ze=>te.value=!1)},{default:l(()=>[t($e,{ref_key:"formRef",ref:W,model:e(S),rules:V,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Me,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Ve,{modelValue:e(S).title,"onUpdate:modelValue":I[4]||(I[4]=ze=>e(S).title=ze),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Ve,{modelValue:e(S).description,"onUpdate:modelValue":I[5]||(I[5]=ze=>e(S).description=ze),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ge,{"x-gap":"12",span:24},{default:l(()=>[t(Ne,{span:14},{default:l(()=>[t(Me,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(fe,{value:e(S).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":I[6]||(I[6]=ze=>e(S).name=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(fe,{value:e(S).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":I[7]||(I[7]=ze=>e(S).titleFieldName=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(ie,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(se,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(Ce,{class:"cursor-pointer","object-fit":"cover",style:Oe("border: 1px dashed "+e(Z)("green","white")),size:150,src:e(_)(e(S).image||""),onClick:I[8]||(I[8]=ze=>b.value=!0)},{default:l(()=>[e(S).image?_e("",!0):(n(),z(h,{key:0,size:64},{default:l(()=>[t(x,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(S).image?(n(),z(k,{key:0,quaternary:"",onClick:I[9]||(I[9]=ze=>d())},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(Me,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(N,{checked:e(S).hasPermalink,"onUpdate:checked":I[10]||(I[10]=ze=>e(S).hasPermalink=ze)},{default:l(()=>[L(r(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ae,{show:e(b),"onUpdate:show":I[13]||(I[13]=ze=>Ie(b)?b.value=ze:null),title:e(a)("selectImage"),"upload-config":{folder:wi,limit:0,maxSize:0,baseUrl:((xe=e(q))==null?void 0:xe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:X},null,8,["show","title","upload-config"]),t(Aa,{show:e(A),"onUpdate:show":I[14]||(I[14]=ze=>Ie(A)?A.value=ze:null),title:e(f)((ue=e(o))==null?void 0:ue.title),"raw-data-structure":(Se=e(o))==null?void 0:Se.dataStructure,"update-data-structure":T},null,8,["show","title","raw-data-structure"])]))],64)}}});var Et=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(Et||{});const Ci={class:"text-base font-bold"},Ii={class:"text-sm"},$i={class:"text-xs text-slate-400"},Vi={class:"text-xs text-slate-400"},Ti={class:"text-xs text-slate-400"},zi={class:"text-sm"},Ui={class:"text-xs text-slate-400"},Si={class:"text-xs text-slate-400"},Mi={class:"text-xs text-slate-400"},Ai={class:"text-sm"},Ei={class:"text-xs text-slate-400"},Di={class:"text-xs text-slate-400"},Li={class:"text-xs text-slate-400"},Pi={class:"text-base font-bold"},Ni={class:"text-sm"},Ri={class:"text-xs text-slate-400"},Oi={class:"text-xs text-slate-400"},qi={class:"text-xs text-slate-400"},Fi=je({__name:"index",setup(de){const{t:a}=Ge(),{tr:c}=We(),{request:f}=Ze(),{contentModels:Z,pages:ee}=Fe(He()),{loadContentModels:_,loadPages:K}=He(),$=nt(),oe=st(),O=[{pathPrefix:"/news/article",contentType:Et.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Et.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Et.NEWS_TAG,contentParam:"slug",pageId:null}],Y=i(!1),G=i([]),U=i(O),v=i(),R=De(()=>Z.value.filter(P=>P.hasPermalink)),M=async(P=!1)=>{oe.start(),Y.value=!0,P&&(await _(),await K());const D=await f({url:"/permalinks"});if(D.success&&D.result){G.value=D.result.data,U.value=he.cloneDeep(O);for(let te=0;te<R.value.length;te++)U.value.push({pathPrefix:`/${R.value[te].slug}`,contentType:Et.CONTENT_MODEL,contentParam:"id",contentId:R.value[te].id,pageId:null});for(let te=0;te<U.value.length;te++)switch(U.value[te].contentType){case Et.NEWS_ARTICLE:case Et.NEWS_CATEGORY:case Et.NEWS_TAG:{const W=G.value.find(S=>S.contentType===U.value[te].contentType);W&&(U.value[te].pathPrefix=W.pathPrefix,U.value[te].contentParam=W.contentParam,U.value[te].pageId=W.pageId,U.value[te].permalinkId=W.id)}break;case Et.CONTENT_MODEL:{const W=G.value.find(S=>S.contentType===U.value[te].contentType&&S.contentId===U.value[te].contentId);W&&(U.value[te].pathPrefix=W.pathPrefix,U.value[te].contentParam=W.contentParam,U.value[te].pageId=W.pageId,U.value[te].permalinkId=W.id)}break}v.value=he.cloneDeep(U.value)}Y.value=!1,oe.finish()};M(!0);const q=async()=>{oe.start(),Y.value=!0,(await f({method:"put",url:"/permalinks",data:U.value})).success&&($.success(a("success")),M()),Y.value=!1,oe.finish()},F=De(()=>he.isEqual(U.value,v.value)),m=P=>re("span",{},{default:()=>c(P.title)}),le=P=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(P);return(P,D)=>{const te=be,W=ce,S=Te,V=It,w=Xe,H=Rt,J=Vt,ne=ht,o=lt,A=al,T=nl,p=zt;return n(),E(me,null,[t(V,{to:"#alt-action"},{default:l(()=>[t(S,{type:"primary",loading:e(Y),disabled:e(F),onClick:D[0]||(D[0]=b=>q())},{icon:l(()=>[t(W,null,{default:l(()=>[t(te,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(o,{embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:b})=>[t(W,null,{default:l(()=>[b?(n(),z(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),z(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[10]||(D[10]=[g("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[g("span",Ci,r(e(a)("news")),1)]),default:l(()=>[t(o,{size:"small"},{header:l(()=>[g("span",Ii,r(e(a)("articles")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[g("span",$i,r(e(a)("pathPrefix")),1),t(w,{value:e(U)[0].pathPrefix,"onUpdate:value":D[1]||(D[1]=b=>e(U)[0].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Vi,r(e(a)("contentParam")),1),t(w,{value:e(U)[0].contentParam,"onUpdate:value":D[2]||(D[2]=b=>e(U)[0].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Ti,r(e(a)("contentPage")),1),t(J,{value:e(U)[0].pageId,"onUpdate:value":D[3]||(D[3]=b=>e(U)[0].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(o,{size:"small"},{header:l(()=>[g("span",zi,r(e(a)("categories")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[g("span",Ui,r(e(a)("pathPrefix")),1),t(w,{value:e(U)[1].pathPrefix,"onUpdate:value":D[4]||(D[4]=b=>e(U)[1].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Si,r(e(a)("contentParam")),1),t(w,{value:e(U)[1].contentParam,"onUpdate:value":D[5]||(D[5]=b=>e(U)[1].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Mi,r(e(a)("contentPage")),1),t(J,{value:e(U)[1].pageId,"onUpdate:value":D[6]||(D[6]=b=>e(U)[1].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(o,{size:"small"},{header:l(()=>[g("span",Ai,r(e(a)("tags")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[g("span",Ei,r(e(a)("pathPrefix")),1),t(w,{value:e(U)[2].pathPrefix,"onUpdate:value":D[7]||(D[7]=b=>e(U)[2].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Di,r(e(a)("contentParam")),1),t(w,{value:e(U)[2].contentParam,"onUpdate:value":D[8]||(D[8]=b=>e(U)[2].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[g("span",Li,r(e(a)("contentPage")),1),t(J,{value:e(U)[2].pageId,"onUpdate:value":D[9]||(D[9]=b=>e(U)[2].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(p,{class:"!my-2"}),e(R).length&&e(U).length>3?(n(),z(o,{key:0,embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:b})=>[t(W,null,{default:l(()=>[b?(n(),z(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),z(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[11]||(D[11]=[g("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[g("span",Pi,r(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),E(me,null,Pe(e(R),(b,X)=>(n(),z(o,{key:b.id,size:"small"},{header:l(()=>[g("span",Ni,r(e(c)(b.title)),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[g("span",Ri,r(e(a)("pathPrefix")),1),t(w,{value:e(U)[X+3].pathPrefix,"onUpdate:value":d=>e(U)[X+3].pathPrefix=d,"allow-input":le,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[g("span",Oi,r(e(a)("contentParam")),1),t(w,{value:e(U)[X+3].contentParam,"onUpdate:value":d=>e(U)[X+3].contentParam=d,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[g("span",qi,r(e(a)("contentPage")),1),t(J,{value:e(U)[X+3].pageId,"onUpdate:value":d=>e(U)[X+3].pageId=d,options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):_e("",!0)],64)}}}),ji={class:"w-full"},Bi=je({__name:"Campaign",setup(de){const a=st(),c=nt(),f=ct(),Z=ha(),{displayFormErrors:ee,ckEditorToolbarItems:_}=We(),{request:K}=Ze(),{t:$,locale:oe}=Ge(),O=i(!1),Y=i([]),G=i([]),U=i([]),v=i([]),R=i(""),M=i(),q={pageSize:12,prefix:({itemCount:o})=>re("div",{class:"font-bold"},{default:()=>`${$("total")}: ${o}`})},F=[{title:$("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(o){return re("div",{},{default:()=>o.title})}},{title:$("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(o){return re("small",{},{default:()=>o.subject})}},{title:$("numberOfRecipients"),key:"recipients",width:200,render(o){return re("div",{},{default:()=>o.recipients.length})},sortOrder:!1,sorter:"default"},{title:$("updateAt"),key:"updatedAt",width:150,render(o){return re("div",{},{default:()=>Lt(o.updatedAt,{locale:oe.value,outPattern:"DD MMMM YYYY"})})}},{title:$("createdAt"),key:"createdAt",width:150,render(o){return re("div",{},{default:()=>Lt(o.createdAt,{locale:oe.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:M,placeholder:$("search"),value:R.value,onInput:o=>{R.value=o}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:175,render(o){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"primary",title:$("history"),onClick:()=>{W.value=o,te.value=!0},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"mdi:history"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"info",title:$("launchCampaign"),onClick:()=>{const A=f.info({title:$("launchCampaign"),content:$("confirmLaunchCampaign",[o.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:$("yes"),negativeText:$("cancel"),onPositiveClick:async()=>{var X,d,u,C,I,x,h;A.loading=!0;const T=await K({url:"/email",method:"post",data:{title:o.title,subject:o.subject,content:o.content,recipients:o.recipients.filter(k=>Qt.isEmail(k)),tags:[]}}),p=(X=Z.getSettingValue("phone","string"))==null?void 0:X.split(",")[0],b=await K({url:"/sms",method:"post",data:{from:p.replace(/\s+/g,""),content:o.rawContent,recipients:o.recipients.filter(k=>!Qt.isEmail(k))}});if(T.failure&&T.error)switch((C=(u=(d=T.error)==null?void 0:d.response)==null?void 0:u.data)==null?void 0:C.errorCode){case Qe.FORM_INVALID_DATA:c.error($("invalidData"));break;default:c.error($("sendingFailed"))}else if(b.failure&&b.error)switch((h=(x=(I=b.error)==null?void 0:I.response)==null?void 0:x.data)==null?void 0:h.errorCode){case Qe.FORM_INVALID_DATA:c.error($("invalidData"));break;default:c.error($("sendingFailed"))}else{const k=o.history||[];k.push({id:dt(),date:qa(new Date,{locale:oe.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+T.result.message+" Phone: "+b.result.message});const pe=await K({method:"put",url:`/newsletter/campaigns/${o.id}`,data:{history:k}});pe.success&&pe.result.data?(c.success($("success")),le()):c.error($("anErrorOccurred"))}A.loading=!1}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"mdi:send"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"warning",title:$("edit"),onClick:()=>{H(o)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",title:$("delete"),onClick:()=>{f.warning({title:$("confirm"),content:$("confirmDeleteCampaign"),positiveText:$("yes"),negativeText:$("no"),onPositiveClick:async()=>{(await K({method:"delete",url:`/newsletter/campaigns/${o.id}`})).success?(c.success($("success")),le()):c.error($("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],m=De(()=>{if(!R.value)return v.value;const o=v.value.filter(A=>A.title.toLowerCase().includes(R.value.toLowerCase())||A.subject.toLowerCase().includes(R.value.toLowerCase()));return M.value&&M.value.focus(),o}),le=async(o=!1)=>{O.value=!0;const A=await K({url:"/newsletter/campaigns"});if(A.success&&A.result&&(v.value=A.result.data),o){const T=await K({url:"/newsletter/emails"});T.success&&T.result&&(Y.value=T.result.data);const p=await K({url:"/newsletter/phones"});p.success&&p.result&&(G.value=p.result.data),U.value=[...Y.value.map(b=>({recipient:b.email,type:"email"})),...G.value.map(b=>({recipient:b.phone,type:"phone"}))]}O.value=!1};le(!0);const P=i(!1),D=i(!1),te=i(!1),W=i(null),S=i(null),V=i({title:"",subject:"",content:"",rawContent:"",recipients:[]}),w={title:[{required:!0,message:$("fillRequired")}],subject:[{required:!0,message:$("fillRequired")}],content:[{required:!0,message:$("fillRequired")}],rawContent:[{required:!0,message:$("fillRequired")}],recipients:[{required:!0,message:$("fillRequired")}]},H=o=>{W.value=he.cloneDeep(o),o?V.value=he.cloneDeep(o):V.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},D.value=!0},J=async()=>{var o;return(o=S.value)==null||o.validate(async A=>{var T,p,b,X,d,u;if(!A)if(W.value)if(W.value.title!==V.value.title&&v.value.findIndex(C=>C.title==V.value.title)>-1)c.error($("sameCampaignTitleMessage"));else{a.start(),P.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},I=await K({method:"put",url:`/newsletter/campaigns/${W.value.id}`,data:C});I.success&&I.result.data&&(c.success($("success")),le()),P.value=!1,a.finish(),D.value=!1}else if(v.value.findIndex(C=>C.title==V.value.title)>-1)c.error($("sameCampaignTitleMessage"));else{a.start(),P.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},I=await K({method:"post",url:"/newsletter/campaigns",data:C});if(I.failure&&I.error)switch((b=(p=(T=I.error)==null?void 0:T.response)==null?void 0:p.data)==null?void 0:b.errorCode){case Qe.FORM_INVALID_DATA:ee((u=(d=(X=I.error)==null?void 0:X.response)==null?void 0:d.data)==null?void 0:u.data);break;default:c.error($("anErrorOccurred"))}else c.success($("success")),le();P.value=!1,a.finish(),D.value=!1}}),!1},ne=(o,A)=>he.isEqual(o.slice().sort(),A.slice().sort());return(o,A)=>{const T=It,p=kl,b=gl,X=pt,d=za,u=Gt,C=Vt,I=ft,x=ut,h=Wa,k=Ja,pe=Xa,se=$t,Q=wt;return n(),E(me,null,[t(T,{to:"#alt-action"},{default:l(()=>[t(e(Te),{type:"primary",onClick:A[0]||(A[0]=y=>H(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+r(e($)("addCampaign")),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(p,{columns:F,data:e(m),pagination:q,loading:e(O),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(x,{show:e(D),"onUpdate:show":A[9]||(A[9]=y=>Ie(D)?D.value=y:null),loading:e(P),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e($)("editCampaign"):e($)("addCampaign"),"positive-text":e($)("validate"),"negative-text":e($)("cancel"),onPositiveClick:J,onNegativeClick:A[10]||(A[10]=y=>D.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:S,class:"mt-5",model:e(V),rules:w,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(X,{label:e($)("title"),path:"title"},{default:l(()=>[t(e(Xe),{value:e(V).title,"onUpdate:value":A[1]||(A[1]=y=>e(V).title=y),placeholder:e($)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("subject"),path:"subject"},{default:l(()=>[t(e(Xe),{value:e(V).subject,"onUpdate:value":A[2]||(A[2]=y=>e(V).subject=y),placeholder:e($)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("content"),path:"content"},{default:l(()=>[g("div",ji,[t(d,{modelValue:e(V).content,"onUpdate:modelValue":A[3]||(A[3]=y=>e(V).content=y),"toolbar-items":e(_),placeholder:e($)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(X,{label:e($)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Xe),{value:e(V).rawContent,"onUpdate:value":A[4]||(A[4]=y=>e(V).rawContent=y),placeholder:e($)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("recipients"),path:"recipients"},{default:l(()=>[t(C,{value:e(V).recipients,"onUpdate:value":A[8]||(A[8]=y=>e(V).recipients=y),options:e(U),placeholder:e($)("recipients"),loading:e(O),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(u,{size:"large",class:"w-full","default-checked":e(U).length&&ne(e(V).recipients,e(U).filter(y=>y.type=="email").map(y=>y.recipient)),"onUpdate:checked":A[5]||(A[5]=y=>{y?e(V).recipients=e(U).filter(j=>j.type=="email").map(j=>j.recipient):e(V).recipients=e(V).recipients.filter(j=>!("_v"in o?o._v:e(Qt)).isEmail(j))})},{default:l(()=>[L(r(e($)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),A[12]||(A[12]=g("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(U).length&&ne(e(V).recipients,e(U).filter(y=>y.type=="phone").map(y=>y.recipient)),"onUpdate:checked":A[6]||(A[6]=y=>{y?e(V).recipients=e(U).filter(j=>j.type=="phone").map(j=>j.recipient):e(V).recipients=e(V).recipients.filter(j=>("_v"in o?o._v:e(Qt)).isEmail(j))})},{default:l(()=>[L(r(e($)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),A[13]||(A[13]=g("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(U).length&&e(V).recipients.length===e(U).length,"onUpdate:checked":A[7]||(A[7]=y=>{y?e(V).recipients=e(U).filter(j=>j.recipient).map(j=>j.recipient):e(V).recipients=[]})},{default:l(()=>[L(r(e($)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(x,{show:e(te),"onUpdate:show":A[11]||(A[11]=y=>Ie(te)?te.value=y:null),loading:e(P),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e($)("history")},{default:l(()=>{var y,j;return[(j=(y=e(W))==null?void 0:y.history)!=null&&j.length?(n(),z(se,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(pe,{hoverable:""},{default:l(()=>{var we;return[(n(!0),E(me,null,Pe((we=e(W))==null?void 0:we.history.slice().reverse(),ye=>(n(),z(k,{key:ye.id},{default:l(()=>[t(h,{title:ye.date,"content-style":"margin-top: 10px;"},{default:l(()=>[L(r(ye.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),z(Q,{key:1,description:e($)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),Ki={id:"header-btn"},Yi={key:1,id:"alt-action"},Gi={key:"contact-info"},Hi={class:"text-xs"},Wi={class:"text-xs"},Ji={class:"text-xs"},Xi={class:"text-xs"},Zi={class:"text-xs"},Qi={class:"text-xs"},er={class:"text-xs"},tr={class:"flex items-center gap-2 w-full"},lr={key:"appearance"},ar={class:"text-sm"},nr={class:"flex flex-col items-center justify-center text-gray-400"},sr={class:"text-sm"},or={class:"flex flex-col items-center justify-center text-gray-400"},ir={class:"text-sm"},rr={class:"flex flex-col items-center justify-center text-gray-400"},ur={class:"text-sm"},dr={class:"flex flex-col items-center justify-center text-gray-400"},cr={class:"text-sm"},pr={class:"flex flex-col items-center justify-center text-gray-400"},fr={class:"text-sm"},mr={class:"flex flex-col items-center justify-center text-gray-400"},vr={class:"text-sm"},_r={class:"text-sm"},yr={class:"flex flex-col items-center justify-center text-gray-400"},gr={class:"text-sm"},br={class:"flex flex-col items-center justify-center text-gray-400"},hr={class:"text-sm"},kr={class:"flex items-center justify-between"},wr={class:"font-bold"},xr={class:"flex items-center"},Cr={class:"flex items-center justify-between"},Ir={class:"font-bold"},$r={class:"flex items-center"},Vr={class:"flex items-center justify-between"},Tr={class:"font-bold"},zr={class:"flex items-center"},Ur={key:"social-networks"},Sr={class:"text-xs"},Mr={key:"newsletter-email"},Ar={key:"newsletter-phone"},Er={key:"newsletter-campaign"},Dr={key:"ads"},Lr={key:"videos"},Pr={key:"content-models"},Nr={key:"menus"},Rr={key:"content-permalinks"},Or={key:"page-sections"},qr=je({name:Fa.CONTENT_MANAGEMENT.NAME}),Fr=je({...qr,setup(de){$l(ge=>({d005cb5c:e(Y)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],c=ge=>a.includes(ge),{t:f}=Ge(),Z=dn(),ee=ct(),_=nt(),K=st(),{request:$}=Ze(),{displayFormErrors:oe,appPrimaryColor:O,appSecondaryColor:Y,pickByTheme:G,fileUrl:U,isLgScreen:v,isMdScreen:R,isSmScreen:M,isXlScreen:q,is2XlScreen:F,tr:m}=We(),le=yt(),P=ha(),{pages:D}=Fe(He()),{loadPages:te,loadSections:W}=He(),S=vt("appConfig"),V=i(!1),w=i({name:"",icon:"",adminIcon:"",oneColorIcon:"",logo:"",adminLogo:"",oneColorLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),H=i(w.value),J=ll("content-management",()=>({currentMenuItemKey:i("contact-info")}))(),ne=(ge,N)=>()=>re(ce,{color:J.currentMenuItemKey==N?"white":""},{default:()=>re(be,{icon:ge})}),o=(ge,N)=>()=>re("span",{class:`${J.currentMenuItemKey==N?"text-white":""}`,id:he.camelCase(N)},{default:()=>ge}),A=De(()=>{const ge=[{label:o(f("contactInfo"),"contact-info"),key:"contact-info",icon:ne("carbon:identification","contact-info")},{label:o(f("appearance"),"appearance"),key:"appearance",icon:ne("carbon:color-palette","appearance")},{label:o(f("socialNetworks"),"social-networks"),key:"social-networks",icon:ne("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:o(f("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ne("carbon:at","newsletter-email")},{label:o(f("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ne("carbon:phone","newsletter-phone")},{label:o(f("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ne("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:o(f("ads"),"ads"),key:"ads",icon:ne("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:o(f("videos"),"videos"),key:"videos",icon:ne("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:o(f("menusManagement"),"menus"),key:"menus",icon:ne("carbon:menu","menus")},{label:o(f("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ne("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:o(f("contentModels"),"content-models"),key:"content-models",icon:ne("carbon:model-alt","content-models")},{label:o(f("pageSections"),"page-sections"),key:"page-sections",icon:ne("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const N of D.value)ge.push({label:o(`${f("page")} ${m(N.title)}`,`${N.slug}-page`),key:`${N.slug}-page`,icon:ne("carbon:document",`${N.slug}-page`)});return ge.push({key:"divider",type:"divider"},{label:o(f("addPage"),"add-new-page"),key:"add-new-page",icon:ne("carbon:add-alt","add-new-page")}),ge}),T=De(()=>he.isEqual(w.value,H.value)),p=De(()=>le.contentLayoutSize.height-200),b=De(()=>le.isLightTheme?"light":"dark"),X=i(null),d={email:[{required:!1,message:f("fillRequired")},{trigger:["input"],validator(ge,N){return N&&!Qt.isEmail(N)?new Error(f("invalidEmail")):!0}}]},u=i();kt(()=>u.value,ge=>{w.value.additionalInfo=JSON.stringify(ge||"[]")},{deep:!0});const C=i(null),I={},x=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],h=i("logos"),k=i(!1),pe=async ge=>{switch(h.value){case"logos":w.value.logo=ge;break;case"icons":w.value.icon=ge;break;case"admin-logos":w.value.adminLogo=ge;break;case"admin-icons":w.value.adminIcon=ge;break;case"monochrome-logos":w.value.oneColorLogo=ge;break;case"monochrome-icons":w.value.oneColorIcon=ge;break;case"dark-backgrounds":w.value.adminAuthDarkBg=ge;break;case"light-backgrounds":w.value.adminAuthLightBg=ge;break}k.value=!1},se={name:"",title:"",content:"",slug:""},Q=i(!1),y=i(null),j=i(se),we={title:[{required:!0,message:f("fillRequired")}]},ye=i(null),Ve=ge=>{ye.value=he.cloneDeep(ge),j.value=he.cloneDeep(ge||se),Q.value=!0},Me=async()=>{var ge;return(ge=y.value)==null||ge.validate(async N=>{var $e,B,ae,xe,ue,Se,ze;if(!N){K.start(),V.value=!0;const Ae={title:j.value.title};ye.value||(Ae.name=he.startCase(he.camelCase(m(j.value.title))).replace(/\s+/g,""));const qe=await $({method:ye.value?"put":"post",url:ye.value?`/pages/${ye.value.slug}`:"/pages",data:Ae});if(qe.failure&&qe.error)switch((ae=(B=($e=qe.error)==null?void 0:$e.response)==null?void 0:B.data)==null?void 0:ae.errorCode){case Qe.FORM_INVALID_DATA:oe((Se=(ue=(xe=qe.error)==null?void 0:xe.response)==null?void 0:ue.data)==null?void 0:Se.data);break;default:_.error(f("anErrorOccurred"))}else _.success(f("success")),te(),J.currentMenuItemKey=`${(ze=qe.result.data)==null?void 0:ze.slug}-page`,Q.value=!1;V.value=!1,K.finish()}}),!1},fe=async(ge=!1)=>{var N;K.start(),V.value=!0,te(),ge&&W(),await P.loadInformation(),(N=P.items)==null||N.forEach($e=>{w.value[$e.key]!=null&&(w.value[$e.key]=$e.value)}),H.value=he.cloneDeep(w.value);try{u.value=JSON.parse(w.value.additionalInfo||"[]")}catch{u.value=[]}V.value=!1,K.finish()};fe(!0),Ul(()=>{Z.params.key&&c(Z.params.key)&&(J.currentMenuItemKey=Z.params.key)});const Ne=async()=>{V.value=!0;const ge=await $({url:"/app-information",method:"put",data:w.value});ge.success&&ge.result?_.success(f("success")):_.error(f("unableToUpdateSettings")),await fe()},Ce=["contact-info","appearance","social-networks"];kt(()=>J.currentMenuItemKey,(ge,N)=>{ge==="add-new-page"?(J.currentMenuItemKey=N,Ve(null)):Ce.includes(N)&&!Ce.includes(ge)&&(T.value||ee.warning({title:f("confirm"),content:f("marketInfoDiscardChangesConfirm"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{J.currentMenuItemKey=N}}))});const ie=i();return kt(()=>[R.value,M.value,v.value,q.value],([ge,N,$e,B])=>{ie.value=ge||N||$e||B,setTimeout(()=>{ie.value=void 0},500)},{immediate:!0}),(ge,N)=>{var Mt;const $e=Te,B=it,ae=Za,xe=Qa,ue=Xe,Se=pt,ze=Ft,Ae=ht,qe=bt,et=zl,xt=ft,Le=lt,Je=$a,Be=Rt,ve=zt,Ke=en,Tt=Da,Ot=Kt,St=ut;return n(),E(me,null,[t(Tt,null,{"header-extra":l(()=>[t(B,null,{default:l(()=>[g("div",Ki,[Ce.includes(e(J).currentMenuItemKey)?(n(),z($e,{key:0,loading:e(V),disabled:e(T),type:"primary",onClick:Ne},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("save")),1)]),_:1},8,["loading","disabled"])):(n(),E("div",Yi))])]),_:1})]),default:l(()=>[t(Le,{embedded:""},{default:l(()=>[t(Ke,{style:Oe(`height: ${e(p)}px`)},{default:l(()=>[t(Ke,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t(xe,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(ie),"default-collapsed":!e(F),"collapsed-width":64,"native-scrollbar":!1,width:e(F)?300:275},{default:l(()=>[t(ae,{value:e(J).currentMenuItemKey,"onUpdate:value":N[0]||(N[0]=Ue=>e(J).currentMenuItemKey=Ue),"collapsed-width":64,"collapsed-icon-size":22,options:e(A)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ke,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Na,{name:"slide-fade"},{default:l(()=>[dl(g("section",Gi,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"contactInfoFormRef",ref:X,model:e(w),rules:d,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{path:"name"},{label:l(()=>[g("b",Hi,r(e(f)("websiteName")),1)]),default:l(()=>[t(ue,{value:e(w).name,"onUpdate:value":N[1]||(N[1]=Ue=>e(w).name=Ue),placeholder:e(f)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Ae,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"email"},{label:l(()=>[g("b",Wi,r(e(f)("email")),1)]),default:l(()=>[t(ue,{value:e(w).email,"onUpdate:value":N[2]||(N[2]=Ue=>e(w).email=Ue),placeholder:e(f)("email"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(ze,{span:12,path:"phone"},{label:l(()=>[g("b",Ji,r(e(f)("phone")),1)]),default:l(()=>[t(ue,{value:e(w).phone,"onUpdate:value":N[3]||(N[3]=Ue=>e(w).phone=Ue),placeholder:e(f)("phone"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"address"},{label:l(()=>[g("span",Xi,[g("b",null,r(e(f)("address")),1)])]),default:l(()=>[t(ue,{value:e(w).address,"onUpdate:value":N[4]||(N[4]=Ue=>e(w).address=Ue),placeholder:e(f)("address"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ae,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"postalCode"},{label:l(()=>[g("b",Zi,r(e(f)("postalCode")),1)]),default:l(()=>[t(ue,{value:e(w).postalCode,"onUpdate:value":N[5]||(N[5]=Ue=>e(w).postalCode=Ue),placeholder:e(f)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"description"},{label:l(()=>[g("b",Qi,r(e(f)("description")),1)]),default:l(()=>[t(qe,{modelValue:e(w).description,"onUpdate:modelValue":N[6]||(N[6]=Ue=>e(w).description=Ue),placeholder:e(f)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Se,{path:"additionalInfo"},{label:l(()=>[g("b",er,r(e(f)("additionalInfo")),1)]),default:l(()=>[t(et,{value:e(u),"onUpdate:value":N[7]||(N[7]=Ue=>Ie(u)?u.value=Ue:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[L(r(e(f)("add")),1)]),default:l(({value:Ue})=>[g("div",tr,[t(ue,{value:Ue.name,"onUpdate:value":gt=>Ue.name=gt,placeholder:e(f)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(ue,{value:Ue.content,"onUpdate:value":gt=>Ue.content=gt,placeholder:e(f)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="contact-info"]]),dl(g("section",lr,[t(Le,{embedded:""},{default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",ar,r(e(f)("websiteLogo")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).logo?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).logo),onClick:N[8]||(N[8]=()=>{h.value="logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[9]||(N[9]=()=>{h.value="logos",k.value=!0})},[g("div",nr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).logo?(n(),z($e,{key:2,quaternary:"",onClick:N[10]||(N[10]=()=>e(w).logo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",sr,r(e(f)("websiteIcon")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).icon?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).icon),onClick:N[11]||(N[11]=()=>{h.value="icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[12]||(N[12]=()=>{h.value="icons",k.value=!0})},[g("div",or,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).icon?(n(),z($e,{key:2,quaternary:"",onClick:N[13]||(N[13]=()=>e(w).icon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",ir,r(e(f)("adminLogo")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminLogo?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).adminLogo),onClick:N[14]||(N[14]=()=>{h.value="admin-logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[15]||(N[15]=()=>{h.value="admin-logos",k.value=!0})},[g("div",rr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).adminLogo?(n(),z($e,{key:2,quaternary:"",onClick:N[16]||(N[16]=()=>e(w).adminLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",ur,r(e(f)("adminIcon")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminIcon?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).adminIcon),onClick:N[17]||(N[17]=()=>{h.value="admin-icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[18]||(N[18]=()=>{h.value="admin-icons",k.value=!0})},[g("div",dr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).adminIcon?(n(),z($e,{key:2,quaternary:"",onClick:N[19]||(N[19]=()=>e(w).adminIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",cr,r(e(f)("websiteLogoMonochrome")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorLogo?(n(),z(Je,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).oneColorLogo),onClick:N[20]||(N[20]=()=>{h.value="monochrome-logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[21]||(N[21]=()=>{h.value="monochrome-logos",k.value=!0})},[g("div",pr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).oneColorLogo?(n(),z($e,{key:2,quaternary:"",onClick:N[22]||(N[22]=()=>e(w).oneColorLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",fr,r(e(f)("websiteIconMonochrome")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorIcon?(n(),z(Je,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).oneColorIcon),onClick:N[23]||(N[23]=()=>{h.value="monochrome-icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[24]||(N[24]=()=>{h.value="monochrome-icons",k.value=!0})},[g("div",mr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).oneColorIcon?(n(),z($e,{key:2,quaternary:"",onClick:N[25]||(N[25]=()=>e(w).oneColorIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{segmented:"",size:"small"},{header:l(()=>[g("span",vr,r(e(f)("adminAuthPagesBg")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",_r,r(e(f)("lightMode")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthLightBg?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).adminAuthLightBg),onClick:N[26]||(N[26]=()=>{h.value="light-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[27]||(N[27]=()=>{h.value="light-backgrounds",k.value=!0})},[g("div",yr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).adminAuthLightBg?(n(),z($e,{key:2,quaternary:"",onClick:N[28]||(N[28]=()=>e(w).adminAuthLightBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",gr,r(e(f)("darkMode")),1)]),default:l(()=>[t(B,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthDarkBg?(n(),z(Je,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(G)(e(O),"white")),size:125,src:e(U)(e(w).adminAuthDarkBg),onClick:N[29]||(N[29]=()=>{h.value="dark-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(G)(e(O),"white")}; width: 125px; height: 125px`),onClick:N[30]||(N[30]=()=>{h.value="dark-backgrounds",k.value=!0})},[g("div",br,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,r(e(f)("import")),1)])],4)),e(w).adminAuthDarkBg?(n(),z($e,{key:2,quaternary:"",onClick:N[31]||(N[31]=()=>e(w).adminAuthDarkBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+r(e(f)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[g("span",hr,r(e(f)("adminColors")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Be,null,{default:l(()=>[g("div",kr,[g("span",wr,r(e(f)("baseColor")),1),g("div",xr,[e(w).primaryColor?(n(),E(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[32]||(N[32]=Ue=>e(w).primaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).primaryColor,"onUpdate:value":N[33]||(N[33]=Ue=>e(w).primaryColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Be,null,{default:l(()=>[g("div",Cr,[g("span",Ir,r(e(f)("secondaryColor")),1),g("div",$r,[e(w).secondaryColor?(n(),E(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[34]||(N[34]=Ue=>e(w).secondaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).secondaryColor,"onUpdate:value":N[35]||(N[35]=Ue=>e(w).secondaryColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Be,null,{default:l(()=>[g("div",Vr,[g("span",Tr,r(e(f)("tertiaryColor")),1),g("div",zr,[e(w).accentColor?(n(),E(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[36]||(N[36]=Ue=>e(w).accentColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).accentColor,"onUpdate:value":N[37]||(N[37]=Ue=>e(w).accentColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="appearance"]]),dl(g("section",Ur,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"socialNetworksFormRef",ref:C,model:e(w),rules:I,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ae,{"x-gap":"12",span:24},{default:l(()=>[(n(),E(me,null,Pe(x,Ue=>t(ze,{key:Ue.name,span:12,path:Ue.name},{label:l(()=>[g("b",Sr,r(e(f)(Ue.name)),1)]),default:l(()=>[t(ue,{value:e(w)[Ue.name],"onUpdate:value":gt=>e(w)[Ue.name]=gt,placeholder:e(f)(Ue.name),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:Ue.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="social-networks"]]),e(J).currentMenuItemKey==="newsletter-email"?(n(),E("section",Mr,[t(Zo)])):_e("",!0),e(J).currentMenuItemKey==="newsletter-phone"?(n(),E("section",Ar,[t(ei)])):_e("",!0),e(J).currentMenuItemKey==="newsletter-campaign"?(n(),E("section",Er,[t(Bi)])):_e("",!0),e(J).currentMenuItemKey==="ads"?(n(),E("section",Dr,[t(kn)])):_e("",!0),e(J).currentMenuItemKey==="videos"?(n(),E("section",Lr,[t(ko)])):_e("",!0),e(J).currentMenuItemKey==="content-models"?(n(),E("section",Pr,[t(xi)])):_e("",!0),e(J).currentMenuItemKey==="menus"?(n(),E("section",Nr,[t(to)])):_e("",!0),e(J).currentMenuItemKey==="content-permalinks"?(n(),E("section",Rr,[t(Fi)])):_e("",!0),e(J).currentMenuItemKey==="page-sections"?(n(),E("section",Or,[t(Wo)])):_e("",!0),(n(!0),E(me,null,Pe(e(D),(Ue,gt)=>(n(),E(me,{key:`${Ue.slug}-page`},[e(J).currentMenuItemKey===`${Ue.slug}-page`?(n(),E("section",{key:`${Ue.slug}-page`},[t(bs,{slug:Ue.slug,"open-form-modal":Ve,onDelete:()=>{e(J).currentMenuItemKey=e(D).length>1?`${e(D)[gt-1].slug}-page`:a[0],e(te)()}},null,8,["slug","onDelete"])])):_e("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Ot,{show:e(k),"onUpdate:show":N[38]||(N[38]=Ue=>Ie(k)?k.value=Ue:null),title:e(f)("selectImage"),"upload-config":{folder:e(h),limit:0,maxSize:0,baseUrl:((Mt=e(S))==null?void 0:Mt.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe},null,8,["show","title","upload-config"]),t(St,{show:e(Q),"onUpdate:show":N[40]||(N[40]=Ue=>Ie(Q)?Q.value=Ue:null),loading:e(V),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(ye)?e(f)("editPage"):e(f)("addPage"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:Me,onNegativeClick:N[41]||(N[41]=Ue=>Q.value=!1)},{default:l(()=>[t(xt,{ref_key:"addPageFormRef",ref:y,model:e(j),rules:we,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(f)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(qe,{modelValue:e(j).title,"onUpdate:modelValue":N[39]||(N[39]=Ue=>e(j).title=Ue),placeholder:e(f)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:Ra(Me,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const rc=Ut(Fr,[["__scopeId","data-v-9b4bc774"]]);export{rc as default};
