import{C as S,P as h}from"./ckeditor_ckeditor5-core-c8d003a2.js";import{f as A,U as Y,V as q,G as $,W as G}from"./ckeditor_ckeditor5-utils-df07b536.js";import{T as D,k as j}from"./ckeditor_ckeditor5-engine-af85ebf5.js";import{B as J}from"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import{E as Q}from"./ckeditor_ckeditor5-enter-27538ad0.js";import{D as X}from"./ckeditor_ckeditor5-typing-70b03be4.js";/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L extends S{constructor(e,i){super(e),this.type=i}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,t=i.document,n=Array.from(t.selection.getSelectedBlocks()).filter(s=>_(s,i.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;i.change(s=>{if(o){let r=n[n.length-1].nextSibling,c=Number.POSITIVE_INFINITY,a=[];for(;r&&r.name=="listItem"&&r.getAttribute("listIndent")!==0;){const m=r.getAttribute("listIndent");m<c&&(c=m);const u=m-c;a.push({element:r,listIndent:u}),r=r.nextSibling}a=a.reverse();for(const m of a)s.setAttribute("listIndent",m.listIndent,m.element)}if(!o){let r=Number.POSITIVE_INFINITY;for(const c of n)c.is("element","listItem")&&c.getAttribute("listIndent")<r&&(r=c.getAttribute("listIndent"));r=r===0?1:r,V(n,!0,r),V(n,!1,r)}for(const r of n.reverse())o&&r.name=="listItem"?s.rename(r,"paragraph"):!o&&r.name!="listItem"?(s.setAttributes({listType:this.type,listIndent:0},r),s.rename(r,"listItem")):!o&&r.name=="listItem"&&r.getAttribute("listType")!=this.type&&s.setAttribute("listType",this.type,r);this.fire("_executeCleanup",n)})}_getValue(){const e=A(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,i=this.editor.model.schema,t=A(e.getSelectedBlocks());return t?_(t,i):!1}}function V(l,e,i){const t=e?l[0]:l[l.length-1];if(t.is("element","listItem")){let n=t[e?"previousSibling":"nextSibling"],o=t.getAttribute("listIndent");for(;n&&n.is("element","listItem")&&n.getAttribute("listIndent")>=i;)o>n.getAttribute("listIndent")&&(o=n.getAttribute("listIndent")),n.getAttribute("listIndent")==o&&l[e?"unshift":"push"](n),n=n[e?"previousSibling":"nextSibling"]}}function _(l,e){return e.checkChild(l.parent,"listItem")&&!e.isObject(l)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B extends S{constructor(e,i){super(e),this._indentBy=i=="forward"?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,i=e.document;let t=Array.from(i.selection.getSelectedBlocks());e.change(n=>{const o=t[t.length-1];let s=o.nextSibling;for(;s&&s.name=="listItem"&&s.getAttribute("listIndent")>o.getAttribute("listIndent");)t.push(s),s=s.nextSibling;this._indentBy<0&&(t=t.reverse());for(const r of t){const c=r.getAttribute("listIndent")+this._indentBy;c<0?n.rename(r,"paragraph"):n.setAttribute("listIndent",c,r)}this.fire("_executeCleanup",t)})}_checkEnabled(){const e=A(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){const i=e.getAttribute("listIndent"),t=e.getAttribute("listType");let n=e.previousSibling;for(;n&&n.is("element","listItem")&&n.getAttribute("listIndent")>=i;){if(n.getAttribute("listIndent")==i)return n.getAttribute("listType")==t;n=n.previousSibling}return!1}return!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Z(l){const e=l.createContainerElement("li");return e.getFillerOffset=se,e}function T(l,e){const i=e.mapper,t=e.writer,n=l.getAttribute("listType")=="numbered"?"ol":"ul",o=Z(t),s=t.createContainerElement(n,null);return t.insert(t.createPositionAt(s,0),o),i.bindElements(l,o),o}function I(l,e,i,t){const n=e.parent,o=i.mapper,s=i.writer;let r=o.toViewPosition(t.createPositionBefore(l));const c=W(l.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:l.getAttribute("listIndent")}),a=l.previousSibling;if(c&&c.getAttribute("listIndent")==l.getAttribute("listIndent")){const m=o.toViewElement(c);r=s.breakContainer(s.createPositionAfter(m))}else if(a&&a.name=="listItem"){r=o.toViewPosition(t.createPositionAt(a,"end"));const m=o.findMappedViewAncestor(r),u=z(m);u?r=s.createPositionBefore(u):r=s.createPositionAt(m,"end")}else r=o.toViewPosition(t.createPositionBefore(l));if(r=E(r),s.insert(r,n),a&&a.name=="listItem"){const m=o.toViewElement(a),d=s.createRange(s.createPositionAt(m,0),r).getWalker({ignoreElementEnd:!0});for(const f of d)if(f.item.is("element","li")){const w=s.breakContainer(s.createPositionBefore(f.item)),v=f.item.parent,C=s.createPositionAt(e,"end");g(s,C.nodeBefore,C.nodeAfter),s.move(s.createRangeOn(v),C),d._position=w}}else{const m=n.nextSibling;if(m&&(m.is("element","ul")||m.is("element","ol"))){let u=null;for(const d of m.getChildren()){const f=o.toModelElement(d);if(f&&f.getAttribute("listIndent")>l.getAttribute("listIndent"))u=d;else break}u&&(s.breakContainer(s.createPositionAfter(u)),s.move(s.createRangeOn(u.parent),s.createPositionAt(e,"end")))}}g(s,n,n.nextSibling),g(s,n.previousSibling,n)}function g(l,e,i){return!e||!i||e.name!="ul"&&e.name!="ol"||e.name!=i.name||e.getAttribute("class")!==i.getAttribute("class")?null:l.mergeContainers(l.createPositionAfter(e))}function E(l){return l.getLastMatchingPosition(e=>e.item.is("uiElement"))}function W(l,e){const i=!!e.sameIndent,t=!!e.smallerIndent,n=e.listIndent;let o=l;for(;o&&o.name=="listItem";){const s=o.getAttribute("listIndent");if(i&&n==s||t&&n>s)return o;e.direction==="forward"?o=o.nextSibling:o=o.previousSibling}return null}function y(l,e,i,t){l.ui.componentFactory.add(e,n=>{const o=l.commands.get(e),s=new J(n);return s.set({label:i,icon:t,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{l.execute(e),l.editing.view.focus()}),s})}function z(l){for(const e of l.getChildren())if(e.name=="ul"||e.name=="ol")return e;return null}function P(l,e){const i=[],t=l.parent,n={ignoreElementEnd:!1,startPosition:l,shallow:!0,direction:e},o=t.getAttribute("listIndent"),s=[...new D(n)].filter(r=>r.item.is("element")).map(r=>r.item);for(const r of s){if(!r.is("element","listItem")||r.getAttribute("listIndent")<o)break;if(!(r.getAttribute("listIndent")>o)){if(r.getAttribute("listType")!==t.getAttribute("listType")||r.getAttribute("listStyle")!==t.getAttribute("listStyle")||r.getAttribute("listReversed")!==t.getAttribute("listReversed")||r.getAttribute("listStart")!==t.getAttribute("listStart"))break;e==="backward"?i.unshift(r):i.push(r)}}return i}function ee(l){let i=[...l.document.selection.getSelectedBlocks()].filter(t=>t.is("element","listItem")).map(t=>{const n=l.change(o=>o.createPositionAt(t,0));return[...P(n,"backward"),...P(n,"forward")]}).flat();return i=[...new Set(i)],i}const te=["disc","circle","square"],ie=["decimal","decimal-leading-zero","lower-roman","upper-roman","lower-latin","upper-latin"];function ne(l){return te.includes(l)?"bulleted":ie.includes(l)?"numbered":null}function se(){const l=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");return this.isEmpty||l?0:j.call(this)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oe extends h{static get pluginName(){return"ListUtils"}getListTypeFromListStyleType(e){return ne(e)}getSelectedListItems(e){return ee(e)}getSiblingNodes(e,i){return P(e,i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function R(l){return(e,i,t)=>{const n=t.consumable;if(!n.test(i.item,"insert")||!n.test(i.item,"attribute:listType")||!n.test(i.item,"attribute:listIndent"))return;n.consume(i.item,"insert"),n.consume(i.item,"attribute:listType"),n.consume(i.item,"attribute:listIndent");const o=i.item,s=T(o,t);I(o,s,t,l)}}function re(l){return(e,i,t)=>{const s=t.mapper.toViewPosition(i.position).getLastMatchingPosition(f=>!f.item.is("element","li")).nodeAfter,r=t.writer;r.breakContainer(r.createPositionBefore(s)),r.breakContainer(r.createPositionAfter(s));const c=s.parent,a=c.previousSibling,m=r.createRangeOn(c),u=r.remove(m);a&&a.nextSibling&&g(r,a,a.nextSibling);const d=t.mapper.toModelElement(s);U(d.getAttribute("listIndent")+1,i.position,m.start,s,t,l);for(const f of r.createRangeIn(u).getItems())t.mapper.unbindViewElement(f);e.stop()}}const le=(l,e,i)=>{if(!i.consumable.test(e.item,l.name))return;const t=i.mapper.toViewElement(e.item),n=i.writer;n.breakContainer(n.createPositionBefore(t)),n.breakContainer(n.createPositionAfter(t));const o=t.parent,s=e.attributeNewValue=="numbered"?"ol":"ul";n.rename(s,o)},ce=(l,e,i)=>{i.consumable.consume(e.item,l.name);const n=i.mapper.toViewElement(e.item).parent,o=i.writer;g(o,n,n.nextSibling),g(o,n.previousSibling,n)};function me(l){return(e,i,t)=>{if(!t.consumable.consume(i.item,"attribute:listIndent"))return;const n=t.mapper.toViewElement(i.item),o=t.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));const s=n.parent,r=s.previousSibling,c=o.createRangeOn(s);o.remove(c),r&&r.nextSibling&&g(o,r,r.nextSibling),U(i.attributeOldValue+1,i.range.start,c.start,n,t,l),I(i.item,n,t,l);for(const a of i.item.getChildren())t.consumable.consume(a,"insert")}}const N=(l,e,i)=>{if(i.consumable.test(e.item,l.name)&&e.item.name!="listItem"){let t=i.mapper.toViewPosition(e.range.start);const n=i.writer,o=[];for(;(t.parent.name=="ul"||t.parent.name=="ol")&&(t=n.breakContainer(t),t.parent.name=="li");){const s=t,r=n.createPositionAt(t.parent,"end");if(!s.isEqual(r)){const c=n.remove(n.createRange(s,r));o.push(c)}t=n.createPositionAfter(t.parent)}if(o.length>0){for(let s=0;s<o.length;s++){const r=t.nodeBefore;if(t=n.insert(t,o[s]).end,s>0){const a=g(n,r,r.nextSibling);a&&a.parent==r&&t.offset--}}g(n,t.nodeBefore,t.nodeAfter)}}},ae=(l,e,i)=>{const t=i.mapper.toViewPosition(e.position),n=t.nodeBefore,o=t.nodeAfter;g(i.writer,n,o)},ue=(l,e,i)=>{if(i.consumable.consume(e.viewItem,{name:!0})){const t=i.writer,n=t.createElement("listItem"),o=Ie(e.viewItem);t.setAttribute("listIndent",o,n);const s=e.viewItem.parent&&e.viewItem.parent.name=="ol"?"numbered":"bulleted";if(t.setAttribute("listType",s,n),!i.safeInsert(n,e.modelCursor))return;const r=pe(n,e.viewItem.getChildren(),i);e.modelRange=t.createRange(e.modelCursor,r),i.updateConversionResult(n,e)}},M=(l,e,i)=>{if(i.consumable.test(e.viewItem,{name:!0})){const t=Array.from(e.viewItem.getChildren());for(const n of t)!(n.is("element","li")||p(n))&&n._remove()}},de=(l,e,i)=>{if(i.consumable.test(e.viewItem,{name:!0})){if(e.viewItem.childCount===0)return;const t=[...e.viewItem.getChildren()];let n=!1;for(const o of t)n&&!p(o)&&o._remove(),p(o)&&(n=!0)}};function O(l){return(e,i)=>{if(i.isPhantom)return;const t=i.modelPosition.nodeBefore;if(t&&t.is("element","listItem")){const n=i.mapper.toViewElement(t),o=n.getAncestors().find(p),s=l.createPositionAt(n,0).getWalker();for(const r of s)if(r.type=="elementStart"&&r.item.is("element","li")){i.viewPosition=r.previousPosition;break}else if(r.type=="elementEnd"&&r.item==o){i.viewPosition=r.nextPosition;break}}}}function fe(l){return(e,i)=>{const t=i.viewPosition,n=t.parent,o=i.mapper;if(n.name=="ul"||n.name=="ol"){if(t.isAtEnd){const s=o.toModelElement(t.nodeBefore),r=o.getModelLength(t.nodeBefore);i.modelPosition=l.createPositionBefore(s).getShiftedBy(r)}else{const s=o.toModelElement(t.nodeAfter);i.modelPosition=l.createPositionBefore(s)}e.stop()}else if(n.name=="li"&&t.nodeBefore&&(t.nodeBefore.name=="ul"||t.nodeBefore.name=="ol")){const s=o.toModelElement(n);let r=1,c=t.nodeBefore;for(;c&&p(c);)r+=o.getModelLength(c),c=c.previousSibling;i.modelPosition=l.createPositionBefore(s).getShiftedBy(r),e.stop()}}}function ge(l,e){const i=l.document.differ.getChanges(),t=new Map;let n=!1;for(const c of i)if(c.type=="insert"&&c.name=="listItem")o(c.position);else if(c.type=="insert"&&c.name!="listItem"){if(c.name!="$text"){const m=c.position.nodeAfter;m.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",m),n=!0),m.hasAttribute("listType")&&(e.removeAttribute("listType",m),n=!0),m.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",m),n=!0),m.hasAttribute("listReversed")&&(e.removeAttribute("listReversed",m),n=!0),m.hasAttribute("listStart")&&(e.removeAttribute("listStart",m),n=!0);for(const u of Array.from(l.createRangeIn(m)).filter(d=>d.item.is("element","listItem")))o(u.previousPosition)}const a=c.position.getShiftedBy(c.length);o(a)}else c.type=="remove"&&c.name=="listItem"?o(c.position):(c.type=="attribute"&&c.attributeKey=="listIndent"||c.type=="attribute"&&c.attributeKey=="listType")&&o(c.range.start);for(const c of t.values())s(c),r(c);return n;function o(c){const a=c.nodeBefore;if(!a||!a.is("element","listItem")){const m=c.nodeAfter;m&&m.is("element","listItem")&&t.set(m,m)}else{let m=a;if(t.has(m))return;for(let u=m.previousSibling;u&&u.is("element","listItem");u=m.previousSibling)if(m=u,t.has(m))return;t.set(a,m)}}function s(c){let a=0,m=null;for(;c&&c.is("element","listItem");){const u=c.getAttribute("listIndent");if(u>a){let d;m===null?(m=u-a,d=a):(m>u&&(m=u),d=u-m),e.setAttribute("listIndent",d,c),n=!0}else m=null,a=c.getAttribute("listIndent")+1;c=c.nextSibling}}function r(c){let a=[],m=null;for(;c&&c.is("element","listItem");){const u=c.getAttribute("listIndent");if(m&&m.getAttribute("listIndent")>u&&(a=a.slice(0,u+1)),u!=0)if(a[u]){const d=a[u];c.getAttribute("listType")!=d&&(e.setAttribute("listType",d,c),n=!0)}else a[u]=c.getAttribute("listType");m=c,c=c.nextSibling}}}const he=function(l,[e,i]){const t=this;let n=e.is("documentFragment")?e.getChild(0):e,o;if(i?o=t.createSelection(i):o=t.document.selection,n&&n.is("element","listItem")){const s=o.getFirstPosition();let r=null;if(s.parent.is("element","listItem")?r=s.parent:s.nodeBefore&&s.nodeBefore.is("element","listItem")&&(r=s.nodeBefore),r){const c=r.getAttribute("listIndent");if(c>0)for(;n&&n.is("element","listItem");)n._setAttribute("listIndent",n.getAttribute("listIndent")+c),n=n.nextSibling}}};function pe(l,e,i){const{writer:t,schema:n}=i;let o=t.createPositionAfter(l);for(const s of e)if(s.name=="ul"||s.name=="ol")o=i.convertItem(s,o).modelCursor;else{const r=i.convertItem(s,t.createPositionAt(l,"end")),c=r.modelRange.start.nodeAfter;c&&c.is("element")&&!n.checkChild(l,c.name)&&(r.modelCursor.parent.is("element","listItem")?l=r.modelCursor.parent:l=be(r.modelCursor),o=t.createPositionAfter(l))}return o}function be(l){const e=new D({startPosition:l});let i;do i=e.next();while(!i.value.item.is("element","listItem"));return i.value.item}function U(l,e,i,t,n,o){const s=W(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:l}),r=n.mapper,c=n.writer,a=s?s.getAttribute("listIndent"):null;let m;if(!s)m=i;else if(a==l){const u=r.toViewElement(s).parent;m=c.createPositionAfter(u)}else{const u=o.createPositionAt(s,"end");m=r.toViewPosition(u)}m=E(m);for(const u of[...t.getChildren()])p(u)&&(m=c.move(c.createRangeOn(u),m).end,g(c,u,u.nextSibling),g(c,u.previousSibling,u))}function p(l){return l.is("element","ol")||l.is("element","ul")}function Ie(l){let e=0,i=l.parent;for(;i;){if(i.is("element","li"))e++;else{const t=i.previousSibling;t&&t.is("element","li")&&e++}i=i.parent}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K extends h{static get pluginName(){return"ListEditing"}static get requires(){return[Q,X,oe]}init(){const e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const i=e.data,t=e.editing;e.model.document.registerPostFixer(o=>ge(e.model,o)),t.mapper.registerViewToModelLength("li",k),i.mapper.registerViewToModelLength("li",k),t.mapper.on("modelToViewPosition",O(t.view)),t.mapper.on("viewToModelPosition",fe(e.model)),i.mapper.on("modelToViewPosition",O(t.view)),e.conversion.for("editingDowncast").add(o=>{o.on("insert",N,{priority:"high"}),o.on("insert:listItem",R(e.model)),o.on("attribute:listType:listItem",le,{priority:"high"}),o.on("attribute:listType:listItem",ce,{priority:"low"}),o.on("attribute:listIndent:listItem",me(e.model)),o.on("remove:listItem",re(e.model)),o.on("remove",ae,{priority:"low"})}),e.conversion.for("dataDowncast").add(o=>{o.on("insert",N,{priority:"high"}),o.on("insert:listItem",R(e.model))}),e.conversion.for("upcast").add(o=>{o.on("element:ul",M,{priority:"high"}),o.on("element:ol",M,{priority:"high"}),o.on("element:li",de,{priority:"high"}),o.on("element:li",ue)}),e.model.on("insertContent",he,{priority:"high"}),e.commands.add("numberedList",new L(e,"numbered")),e.commands.add("bulletedList",new L(e,"bulleted")),e.commands.add("indentList",new B(e,"forward")),e.commands.add("outdentList",new B(e,"backward"));const n=t.view.document;this.listenTo(n,"enter",(o,s)=>{const r=this.editor.model.document,c=r.selection.getLastPosition().parent;r.selection.isCollapsed&&c.name=="listItem"&&c.isEmpty&&(this.editor.execute("outdentList"),s.preventDefault(),o.stop())},{context:"li"}),this.listenTo(n,"delete",(o,s)=>{if(s.direction!=="backward")return;const r=this.editor.model.document.selection;if(!r.isCollapsed)return;const c=r.getFirstPosition();if(!c.isAtStart)return;const a=c.parent;a.name!=="listItem"||a.previousSibling&&a.previousSibling.name==="listItem"||(this.editor.execute("outdentList"),s.preventDefault(),o.stop())},{context:"li"}),this.listenTo(e.editing.view.document,"tab",(o,s)=>{const r=s.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),s.stopPropagation(),s.preventDefault(),o.stop())},{context:"li"})}afterInit(){const e=this.editor.commands,i=e.get("indent"),t=e.get("outdent");i&&i.registerChildCommand(e.get("indentList")),t&&t.registerChildCommand(e.get("outdentList"))}}function k(l){let e=1;for(const i of l.getChildren())if(i.name=="ul"||i.name=="ol")for(const t of i.getChildren())e+=k(t);return e}const we='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',ve='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ce extends h{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;y(this.editor,"numberedList",e("Numbered List"),we),y(this.editor,"bulletedList",e("Bulleted List"),ve)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ue extends h{static get requires(){return[K,Ce]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const b="todoListChecked";class Ae extends S{constructor(e){super(e),this._selectedElements=[],this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){this._selectedElements=this._getSelectedItems(),this.value=this._selectedElements.every(e=>!!e.getAttribute(b)),this.isEnabled=!!this._selectedElements.length}_getSelectedItems(){const e=this.editor.model,i=e.schema,t=e.document.selection.getFirstRange(),n=t.start.parent,o=[];i.checkAttribute(n,b)&&o.push(n);for(const s of t.getItems())i.checkAttribute(s,b)&&!o.includes(s)&&o.push(s);return o}execute(e={}){this.editor.model.change(i=>{for(const t of this._selectedElements)(e.forceValue===void 0?!this.value:e.forceValue)?i.setAttribute(b,!0,t):i.removeAttribute(b,t)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Le(l,e){return(i,t,n)=>{const o=n.consumable;if(!o.test(t.item,"insert")||!o.test(t.item,"attribute:listType")||!o.test(t.item,"attribute:listIndent")||t.item.getAttribute("listType")!="todo")return;const s=t.item;o.consume(s,"insert"),o.consume(s,"attribute:listType"),o.consume(s,"attribute:listIndent"),o.consume(s,"attribute:todoListChecked");const r=n.writer,c=T(s,n),a=!!s.getAttribute("todoListChecked"),m=x(s,r,a,e),u=r.createContainerElement("span",{class:"todo-list__label__description"});r.addClass("todo-list",c.parent),r.insert(r.createPositionAt(c,0),m),r.insert(r.createPositionAfter(m),u),I(s,c,n,l)}}function ye(l){return(e,i,t)=>{const n=t.consumable;if(!n.test(i.item,"insert")||!n.test(i.item,"attribute:listType")||!n.test(i.item,"attribute:listIndent")||i.item.getAttribute("listType")!="todo")return;const o=i.item;n.consume(o,"insert"),n.consume(o,"attribute:listType"),n.consume(o,"attribute:listIndent"),n.consume(o,"attribute:todoListChecked");const s=t.writer,r=T(o,t);s.addClass("todo-list",r.parent);const c=s.createContainerElement("label",{class:"todo-list__label"}),a=s.createEmptyElement("input",{type:"checkbox",disabled:"disabled"}),m=s.createContainerElement("span",{class:"todo-list__label__description"});o.getAttribute("todoListChecked")&&s.setAttribute("checked","checked",a),s.insert(s.createPositionAt(r,0),c),s.insert(s.createPositionAt(c,0),a),s.insert(s.createPositionAfter(a),m),I(o,r,t,l)}}const Pe=(l,e,i)=>{const t=e.modelCursor,n=t.parent,o=e.viewItem;if(o.getAttribute("type")!="checkbox"||n.name!="listItem"||!t.isAtStart||!i.consumable.consume(o,{name:!0}))return;const s=i.writer;s.setAttribute("listType","todo",n),e.viewItem.hasAttribute("checked")&&s.setAttribute("todoListChecked",!0,n),e.modelRange=s.createRange(t)};function ke(l,e){return(i,t,n)=>{if(!n.consumable.consume(t.item,i.name))return;const o=n.mapper.toViewElement(t.item),s=n.writer,r=Te(o,e);if(t.attributeNewValue=="todo"){const c=!!t.item.getAttribute("todoListChecked"),a=x(t.item,s,c,l),m=s.createContainerElement("span",{class:"todo-list__label__description"}),u=s.createRangeIn(o),d=z(o),f=E(u.start),w=d?s.createPositionBefore(d):u.end,v=s.createRange(f,w);s.addClass("todo-list",o.parent),s.move(v,s.createPositionAt(m,0)),s.insert(s.createPositionAt(o,0),a),s.insert(s.createPositionAfter(a),m)}else if(t.attributeOldValue=="todo"){const c=H(o,e);s.removeClass("todo-list",o.parent),s.remove(r),s.move(s.createRangeIn(c),s.createPositionBefore(c)),s.remove(c)}}}function Se(l){return(e,i,t)=>{if(i.item.getAttribute("listType")!="todo"||!t.consumable.consume(i.item,"attribute:todoListChecked"))return;const{mapper:n,writer:o}=t,s=!!i.item.getAttribute("todoListChecked"),c=n.toViewElement(i.item).getChild(0),a=x(i.item,o,s,l);o.insert(o.createPositionAfter(c),a),o.remove(c)}}function F(l){return(e,i)=>{const t=i.modelPosition,n=t.parent;if(!n.is("element","listItem")||n.getAttribute("listType")!="todo")return;const o=i.mapper.toViewElement(n),s=H(o,l);s&&(i.viewPosition=i.mapper.findPositionIn(s,t.offset))}}function x(l,e,i,t){return e.createUIElement("label",{class:"todo-list__label",contenteditable:!1},function(o){const s=Y(document,"input",{type:"checkbox",tabindex:"-1"});i&&s.setAttribute("checked","checked"),s.addEventListener("change",()=>t(l));const r=this.toDomElement(o);return r.appendChild(s),r})}function Te(l,e){const i=e.createRangeIn(l);for(const t of i)if(t.item.is("uiElement","label"))return t.item}function H(l,e){const i=e.createRangeIn(l);for(const t of i)if(t.item.is("containerElement","span")&&t.item.hasClass("todo-list__label__description"))return t.item}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ee=q("Ctrl+Enter");class xe extends h{static get pluginName(){return"TodoListEditing"}static get requires(){return[K]}init(){const e=this.editor,{editing:i,data:t,model:n}=e;n.schema.extend("listItem",{allowAttributes:["todoListChecked"]}),n.schema.addAttributeCheck((r,c)=>{const a=r.last;if(c=="todoListChecked"&&a.name=="listItem"&&a.getAttribute("listType")!="todo")return!1}),e.commands.add("todoList",new L(e,"todo"));const o=new Ae(e);e.commands.add("checkTodoList",o),e.commands.add("todoListCheck",o),t.downcastDispatcher.on("insert:listItem",ye(n),{priority:"high"}),t.upcastDispatcher.on("element:input",Pe,{priority:"high"}),i.downcastDispatcher.on("insert:listItem",Le(n,r=>this._handleCheckmarkChange(r)),{priority:"high"}),i.downcastDispatcher.on("attribute:listType:listItem",ke(r=>this._handleCheckmarkChange(r),i.view)),i.downcastDispatcher.on("attribute:todoListChecked:listItem",Se(r=>this._handleCheckmarkChange(r))),i.mapper.on("modelToViewPosition",F(i.view)),t.mapper.on("modelToViewPosition",F(i.view)),this.listenTo(i.view.document,"arrowKey",Ve(n,e.locale),{context:"li"}),this.listenTo(i.view.document,"keydown",(r,c)=>{$(c)===Ee&&(e.execute("checkTodoList"),r.stop())},{priority:"high"});const s=new Set;this.listenTo(n,"applyOperation",(r,c)=>{const a=c[0];if(a.type=="rename"&&a.oldName=="listItem"){const m=a.position.nodeAfter;m.hasAttribute("todoListChecked")&&s.add(m)}else if(a.type=="changeAttribute"&&a.key=="listType"&&a.oldValue==="todo")for(const m of a.range.getItems())m.hasAttribute("todoListChecked")&&m.getAttribute("listType")!=="todo"&&s.add(m)}),n.document.registerPostFixer(r=>{let c=!1;for(const a of s)r.removeAttribute("todoListChecked",a),c=!0;return s.clear(),c})}_handleCheckmarkChange(e){const i=this.editor,t=i.model,n=Array.from(t.document.selection.getRanges());t.change(o=>{o.setSelection(e,"end"),i.execute("checkTodoList"),o.setSelection(n)})}}function Ve(l,e){return(i,t)=>{if(G(t.keyCode,e.contentLanguageDirection)!="left")return;const o=l.schema,s=l.document.selection;if(!s.isCollapsed)return;const r=s.getFirstPosition(),c=r.parent;if(c.name==="listItem"&&c.getAttribute("listType")=="todo"&&r.isAtStart){const a=o.getNearestSelectionRange(l.createPositionBefore(c),"backward");a&&l.change(m=>m.setSelection(a)),t.preventDefault(),t.stopPropagation(),i.stop()}}}const _e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Be extends h{static get pluginName(){return"TodoListUI"}init(){const e=this.editor.t;y(this.editor,"todoList",e("To-do List"),_e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ke extends h{static get requires(){return[xe,Be]}static get pluginName(){return"TodoList"}}export{Ue as L,Ke as T};
