const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as pe}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Ka,a as uo,b as ji}from"./index.vue_vue_type_script_setup_true_lang-BjkLV1um.js";import{_ as lu}from"./PageLayout.vue_vue_type_script_setup_true_lang-cyM7SD35.js";import{_ as Na}from"./I18nInput-DAdw6GUI.js";import{Q as nr,e as Ge,t as bt,u as st,f as Ft,w as Xt,y as pn,S as cs,T as au,U as Cd,v as Ya,V as po,p as Ro,W as Id,x as nu,J as ou,X as Vd,Y as su,Z as Ri,_ as Ga,$ as Ki,a0 as ru,d as iu,a1 as cu,a2 as du,R as Sd,a3 as uu,a4 as Ed,A as ac,a5 as Yi,a6 as Ud,a7 as pu,a8 as mu,a9 as Td,aa as fu,ab as _u,ac as Gi,ad as Md,ae as vu,c as yu,af as gu,ag as hu,q as bu,I as ku,ah as wu}from"./main-DumBU3o2.js";import{I as _e}from"./iconify_vue-DXPEksg3.js";import{_ as jr}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-BdpKP9nz.js";import{u as Ie}from"./vue-i18n-B92nPylK.js";import{u as Qe,F as oa,p as Je,K as Jl,l as mo,a0 as on,_ as Cl,q as Tl,H as Da,C as Ha,B as Ye,h as H,J as Qa,a as Ca,d as Ia,e as Qn,c as el,Q as or,R as sr,b as Va,a1 as xu,X as us,P as Kr,o as mn,S as Dd,r as Wa,O as rr,W as Nd,L as Yr,k as fo,s as Hi,a2 as $u,a3 as Gr,a4 as Hr,a5 as Qi,f as Wi,D as fn,E as _n,w as ir,a6 as Cu,a7 as Iu,a8 as zd,t as Ad,I as jo,y as Xi,a9 as Vu,aa as Pd,ab as Ld,m as Ji,ac as Bd,ad as Su,ae as Eu,Y as Uu,af as Tu,T as Mu,U as Du,V as Nu}from"./naive-ui-B6SBt1-y.js";import{_ as ue}from"./lodash-C_MgVQnG.js";import{_ as Wn}from"./fawmi_vue-google-maps-yyESU4s0.js";import{C as yn,S as nc,p as Dn,d as zu,v as Nn,V as cr,w as zn,G as Jr}from"./ngneat_falso-BQ8TvUKs.js";import{h as Au}from"./moment-Djc71hkG.js";import{_ as Fd}from"./index.vue_vue_type_style_index_0_lang-BPQv9QZ6.js";import{u as Od,a as qd}from"./article-BpwbMKy-.js";import{v as Al}from"./uuid-8I8R7izr.js";import{c as Zi,u as Pu}from"./tanstack_vue-query-C9nQ2kf3.js";import{s as Rd}from"./slugify-BFyLO-pG.js";import{_ as Lu}from"./media-file-BD97IfFf.js";import{r as Bu}from"./vueuse_shared-CcT-C3Xm.js";import{_ as ps}from"./jsoneditor-BJ7iDtct.js";import{u as jd}from"./vueuse_core-DLnQCT4A.js";import{_ as Kd}from"./UploadExcel-CFqo0boU.js";import{_ as ds}from"./validator-DC79P2ge.js";import{_ as Fu}from"./VueTelInputWrapper-mHijJuBL.js";import{i as Ou}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{u as qu}from"./email-BgR-vkIy.js";import{u as Ru}from"./vue-shepherd-CZJ8KBfd.js";import{a as ju}from"./vue-router-DjpI5axN.js";var Hn=(u=>(u.IMAGE="image",u.VIDEO="video",u))(Hn||{});const Yd=(u,e)=>nr(["ad-identifiers"],async()=>{const{request:n}=Ge(),t=await n({url:"/ad-identifiers"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),Ku=(u,e)=>nr(["ads"],async()=>{const{request:n}=Ge(),t=await n({url:"/ads"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),Yu=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe();return bt({queryKey:["ad-identifiers"],operation:"insert",getItemId:a=>a.id,mutationFn:async a=>{const l=await n({method:"post",url:"/ad-identifiers",data:a});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Gu=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe();return bt({queryKey:["ad-identifiers"],operation:"update",getItemId:a=>a.id,mutationFn:async a=>{const l=await n({method:"put",url:`/ad-identifiers/${a.id}`,data:a});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Hu=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe();return bt({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const a=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:o=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:Qu,defineComponent:Wu}=await pe("vue"),{unref:gt,resolveComponent:Wb,createVNode:At,toDisplayString:Ko,createTextVNode:Zr,withCtx:Jt,renderList:Xu,Fragment:oc,openBlock:Yo,createElementBlock:ei,createElementVNode:fs,createCommentVNode:Ju,normalizeClass:sc,createBlock:ti,isRef:Zu}=await pe("vue"),ep={class:"flex items-center justify-between"},tp={class:"flex flex-col"},lp={class:"text-sm font-bold"},ap={class:"text-xs font-normal"},np={key:0,class:"text-xs font-bold"},{ref:_s}=await pe("vue"),op=Wu({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,formatKey:t}=st(),o=Qu(u,"show"),{data:a,isPending:l}=Yd(),{mutate:d}=Hu(),{mutate:W}=Yu(),{mutate:re}=Gu(),ne=oa(),B=Je(),ve=_s(!1),P=_s(!1),V=_s(null),c=_s(null),C=_s({id:"",reusable:!1,contentType:Hn.IMAGE,contentSize:"",params:[]}),me={id:[{required:!0,message:e("fillRequired")}]},r=le=>{V.value=ue.cloneDeep(le),C.value=ue.cloneDeep(le||{id:"",reusable:!1,contentType:Hn.IMAGE,contentSize:"",params:[]}),P.value=!0},be=async()=>(c.value?.validate(async le=>{if(!le){B.start(),ve.value=!0;const L={id:C.value.id,reusable:C.value.reusable,contentType:C.value.contentType,contentSize:C.value.contentSize,params:C.value.params};V.value?re(L,{onSuccess:()=>{P.value=!1}}):W(L,{onSuccess:()=>{P.value=!1}}),ve.value=!1,B.finish()}}),!1),R=async le=>{ne.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{d({id:le.id})}})};return(le,L)=>{const S=_e,U=Ye,O=Tl,M=Da,K=Ha,f=H,E=Cl,w=on,b=Qa,j=mo,x=Jl,X=el,J=Qn,De=Ia,ae=sr,y=or,q=xu,Te=Va,I=Ca;return Yo(),ei(oc,null,[At(x,{show:o.value,"onUpdate:show":L[2]||(L[2]=p=>o.value=p),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:gt(e)("adIdentifiers")},{"header-extra":Jt(()=>[At(O,{align:"center"},{default:Jt(()=>[At(U,{secondary:"",size:"small",type:"primary",disabled:gt(l),onClick:L[0]||(L[0]=p=>r(null))},{default:Jt(()=>[At(S,{icon:"carbon:add-alt",class:"mr-1"}),Zr(" "+Ko(gt(e)("add")),1)]),_:1},8,["disabled"]),At(U,{secondary:"",size:"small",type:"error",disabled:gt(l),onClick:L[1]||(L[1]=p=>o.value=!1)},{default:Jt(()=>[At(S,{icon:"carbon:close",class:"mr-1"}),Zr(" "+Ko(gt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Jt(()=>[At(j,{show:gt(l)},{default:Jt(()=>[gt(a)?.length?(Yo(),ti(w,{key:0,style:{"max-height":"400px"}},{default:Jt(()=>[(Yo(!0),ei(oc,null,Xu(gt(a),p=>(Yo(),ti(E,{key:p.id,embedded:"",size:"small",class:"mb-2"},{default:Jt(()=>[fs("div",ep,[fs("div",tp,[fs("span",lp,Ko(p.id),1),fs("div",null,[fs("span",ap,Ko(p.contentType===gt(Hn).IMAGE?gt(e)("image"):gt(e)("video")),1),p.contentSize?(Yo(),ei("span",np," Â ("+Ko(p.contentSize)+") ",1)):Ju("",!0)])]),At(O,null,{default:Jt(()=>[At(M,{size:"medium",bordered:!1,type:p.reusable?"info":"warning"},{default:Jt(()=>[Zr(Ko(p.reusable?gt(e)("reusable"):gt(e)("notReusable")),1)]),_:2},1032,["type"]),At(K,{vertical:"",class:sc(["!mx-0",gt(n)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),At(U,{size:"small",type:"warning",secondary:"",onClick:s=>r(p)},{default:Jt(()=>[At(f,null,{default:Jt(()=>[At(S,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),At(U,{size:"small",type:"error",secondary:"",onClick:s=>R(p)},{default:Jt(()=>[At(f,null,{default:Jt(()=>[At(S,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Yo(),ti(E,{key:1,size:"large",class:sc(`mb-2 !border-dashed !border-2 ${gt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Jt(()=>[At(b,{description:gt(e)("noIdentifierAdded")},{icon:Jt(()=>[At(f,{size:"60"},{default:Jt(()=>[At(S,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),At(x,{show:gt(P),"onUpdate:show":L[8]||(L[8]=p=>Zu(P)?P.value=p:null),loading:gt(ve),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:gt(V)?gt(e)("editAdIdentifier"):gt(e)("addAdIdentifier"),"positive-text":gt(e)("validate"),"negative-text":gt(e)("cancel"),onPositiveClick:be,onNegativeClick:L[9]||(L[9]=p=>P.value=!1)},{default:Jt(()=>[At(I,{ref_key:"formRef",ref:c,model:gt(C),rules:me,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Jt(()=>[At(De,{span:24,"x-gap":"12"},{default:Jt(()=>[At(J,{span:16,label:gt(e)("identifier"),path:"id"},{default:Jt(()=>[At(X,{value:gt(C).id,placeholder:gt(e)("identifier"),disabled:gt(V)!=null,class:"w-full","onUpdate:value":L[3]||(L[3]=p=>gt(C).id=gt(t)(p))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),At(J,{span:8,label:gt(e)("contentSize"),path:"contentSize"},{default:Jt(()=>[At(X,{value:gt(C).contentSize,"onUpdate:value":L[4]||(L[4]=p=>gt(C).contentSize=p),placeholder:gt(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),At(De,{span:24,"x-gap":"12"},{default:Jt(()=>[At(J,{span:12,label:gt(e)("status"),path:"reusable"},{default:Jt(()=>[At(y,{value:gt(C).reusable,"onUpdate:value":L[5]||(L[5]=p=>gt(C).reusable=p),name:"reusable",class:"w-full"},{default:Jt(()=>[At(ae,{value:!1,label:gt(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),At(ae,{value:!0,label:gt(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),At(J,{span:12,label:gt(e)("contentType"),path:"contentType"},{default:Jt(()=>[At(y,{value:gt(C).contentType,"onUpdate:value":L[6]||(L[6]=p=>gt(C).contentType=p),name:"contentType",class:"w-full"},{default:Jt(()=>[At(ae,{value:gt(Hn).IMAGE,label:gt(e)("image"),class:"w-[50%]"},null,8,["value","label"]),At(ae,{value:gt(Hn).VIDEO,label:gt(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),At(Te,{label:gt(e)("settings"),path:"params"},{default:Jt(()=>[At(q,{value:gt(C).params,"onUpdate:value":L[7]||(L[7]=p=>gt(C).params=p),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),sp=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["ads"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/ads",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},rp=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["ads"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/ads/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},ip=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["ads"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/ads/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:cp}=await pe("vue"),{unref:he,createVNode:wt,withCtx:Pt,toDisplayString:vo,createTextVNode:yo,openBlock:gn,createBlock:dr,createCommentVNode:li,resolveComponent:Xb,isRef:Go,Fragment:ur,createElementBlock:Ho,normalizeStyle:rc,createElementVNode:ai,renderList:dp}=await pe("vue"),up={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},pp={id:"video",autoplay:"",controls:"",style:{width:"100%"}},mp=["src"],{inject:fp,ref:za,h:Il,computed:ic}=await pe("vue"),_p=cp({__name:"index",setup(u){const e=Qe(),n=oa(),t=fp("appConfig"),{data:o}=Yd(),{data:a,isPending:l}=Ku(),{mutate:d,isPending:W}=ip(),{mutate:re,isPending:ne}=sp(),{mutate:B,isPending:ve}=rp(),{tr:P,fileUrl:V,pickByTheme:c,appSecondaryColor:C,isInDevMode:me}=st(),{t:r,locale:be}=Ie(),R=za(""),le=za(),L={pageSize:12,prefix:({itemCount:p})=>Il("div",{class:"font-bold"},{default:()=>`${r("total")}: ${p}`})},S=[{title:r("preview"),key:"image",width:200,fixed:"left",render(p){return p.adIdentifier?.contentType==Hn.IMAGE?Il(us,{src:p.contentUrl??"",objectFit:"cover",width:200,height:100}):Il("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[Il(H,{size:50,color:C.value},{default:()=>Il(_e,{icon:"carbon:document-video"})})])}},{title:r("identifier"),key:"pid",width:150,fixed:"left",render(p){return Il("small",{},{default:()=>p.pid})}},{title:r("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(p){return Il("div",{},{default:()=>P(p.title)})}},{title:r("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(p){return Il("small",{},{default:()=>P(p.description)})}},{title:r("status"),key:"isActive",width:100,render(p){return Il(Da,{type:p.display?"success":"warning",bordered:!1},{default:()=>p.display?r("visible"):r("hidden")})},sortOrder:!1,sorter:"default"},{title:r("updateAt"),key:"updatedAt",width:125,render(p){return Il("div",{},{default:()=>pn(p.updatedAt,{locale:be.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(p){return Il("div",{},{default:()=>pn(p.createdAt,{locale:be.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Il(el,{ref:le,placeholder:r("search"),value:R.value,onInput:p=>{R.value=p}},{suffix:()=>Il(H,{},{default:()=>Il(_e,{icon:"carbon:search"})})}),key:"actions",width:150,render(p){return Il("div",{class:"flex justify-end items-center w-full"},[Il(Ye,{size:"small",type:"warning",secondary:!0,onClick:()=>{X(p)},renderIcon:()=>Il(H,null,{default:()=>Il(_e,{icon:"carbon:edit"})})}),Il("div",{class:"w-2"}),Il(Ye,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:r("confirm"),content:r("confirmDeleteAd"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{p.id&&d({id:p.id})}})},renderIcon:()=>Il(H,null,{default:()=>Il(_e,{icon:"carbon:trash-can"})})})])},fixed:"right"}],U=ic(()=>{if(!R.value)return a.value;const p=a.value?.filter(s=>s.pid.toLowerCase().includes(R.value.toLowerCase())||s.title.toLowerCase().includes(R.value.toLowerCase())||s.description?.toLowerCase().includes(R.value.toLowerCase()));return le.value&&le.value.focus(),p}),O=za(!1),M=za(!1),K=za(Hn.IMAGE),f=za(),E=za(null),w=za(null),b=za({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),j={pid:[{required:!0,message:r("fillRequired")}],title:[{required:!0,message:r("fillRequired")}],content:[{required:!0,message:r("fillRequired")}]},x=ic({get:()=>!b.value.broadcastStart||!b.value.broadcastEnd?null:[b.value.broadcastStart||"",b.value.broadcastEnd||""],set:p=>{p?(b.value.broadcastStart=p[0],b.value.broadcastEnd=p[1]):(b.value.broadcastStart=null,b.value.broadcastEnd=null)}}),X=p=>{E.value=ue.cloneDeep(p),p?(b.value=ue.cloneDeep(p),p.data||(b.value.data={})):b.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},f.value=o.value?.find(s=>s.id==b.value.pid)?.params,O.value=!0},J=p=>Il("span",{},{default:()=>p.id+(p.contentSize?` (${p.contentSize})`:"")}),De=async()=>(w.value?.validate(async p=>{if(!p){const s={pid:b.value.pid,title:b.value.title,display:b.value.display,content:b.value.content,description:b.value.description,data:b.value.data,broadcastStart:b.value.broadcastStart,broadcastEnd:b.value.broadcastEnd};E.value?E.value.title!==b.value.title&&(a.value||[]).findIndex(m=>m.title==b.value.title)>-1?e.error(r("sameAdTitleMessage")):B({id:E.value.id,...s},{onSuccess:()=>{}}):(a.value||[]).findIndex(m=>m.title==b.value.title)>-1?e.error(r("sameAdTitleMessage")):re(s,{onSuccess:()=>{}}),O.value=!1}}),!1),ae=za(!1),y=za(!1),q=za(!1),Te=za(""),I=za("");return(p,s)=>{const m=Tl,D=Ka,T=Kr,F=jr,z=Na,ee=Va,G=Dd,ut=Wa,St=Qn,$e=sr,It=or,ze=Ia,lt=mn,Q=rr,h=Ca,_=Jl,pt=uo;return gn(),Ho(ur,null,[wt(D,{to:"#alt-action"},{default:Pt(()=>[wt(m,null,{default:Pt(()=>[he(me)?(gn(),dr(he(Ye),{key:0,secondary:"",type:"warning",onClick:s[0]||(s[0]=Se=>M.value=!0)},{default:Pt(()=>[wt(he(H),{size:"26"},{default:Pt(()=>[wt(he(_e),{icon:"carbon:id"})]),_:1}),yo(" "+vo(he(r)("identifiers")),1)]),_:1})):li("",!0),wt(he(Ye),{type:"primary",secondary:"",onClick:s[1]||(s[1]=Se=>X(null))},{icon:Pt(()=>[wt(he(H),{size:"18"},{default:Pt(()=>[wt(he(_e),{icon:"carbon:add-alt"})]),_:1})]),default:Pt(()=>[yo(" "+vo(he(r)("addAd")),1)]),_:1})]),_:1})]),_:1}),wt(F,null,{default:Pt(()=>[wt(T,{columns:S,data:he(U),pagination:L,loading:he(l),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),wt(_,{show:he(O),"onUpdate:show":s[12]||(s[12]=Se=>Go(O)?O.value=Se:null),loading:he(ne)||he(ve)||he(W),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:he(E)?he(r)("editAd"):he(r)("addAd"),"positive-text":he(r)("validate"),"negative-text":he(r)("cancel"),onPositiveClick:De,onNegativeClick:s[13]||(s[13]=Se=>O.value=!1)},{default:Pt(()=>[wt(h,{ref_key:"formRef",ref:w,class:"mt-5",model:he(b),rules:j,"show-require-mark":!1,size:"medium"},{default:Pt(()=>[wt(ze,{cols:"24","x-gap":12},{default:Pt(()=>[wt(lt,{span:"12"},{default:Pt(()=>[wt(ee,{"show-label":!1,path:"title"},{default:Pt(()=>[wt(z,{modelValue:he(b).title,"onUpdate:modelValue":s[2]||(s[2]=Se=>he(b).title=Se),placeholder:he(r)("title"),class:"w-full",sync:""},{label:Pt(()=>[yo(vo(he(r)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),wt(ee,{"show-label":!1,path:"description"},{default:Pt(()=>[wt(z,{modelValue:he(b).description,"onUpdate:modelValue":s[3]||(s[3]=Se=>he(b).description=Se),placeholder:he(r)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Pt(()=>[yo(vo(he(r)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),wt(ee,{label:he(r)("broadcastPeriod"),path:"broadcastPeriod"},{default:Pt(()=>[wt(G,{"formatted-value":he(x),"onUpdate:formattedValue":s[4]||(s[4]=Se=>Go(x)?x.value=Se:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),wt(ze,{"x-gap":"12",span:24},{default:Pt(()=>[wt(St,{span:12,label:he(r)("identifier"),path:"pid"},{default:Pt(()=>[wt(ut,{value:he(b).pid,"onUpdate:value":[s[5]||(s[5]=Se=>he(b).pid=Se),s[6]||(s[6]=()=>{f.value=he(o)?.find(Se=>Se.id==he(b).pid)?.params})],"render-label":J,options:he(o)?.map(Se=>({...Se,disabled:!Se.reusable&&(Se.adsCount||0)>0})),placeholder:he(r)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),wt(St,{span:12,label:he(r)("status"),path:"display"},{default:Pt(()=>[wt(It,{value:he(b).display,"onUpdate:value":s[7]||(s[7]=Se=>he(b).display=Se),name:"display",class:"w-full"},{default:Pt(()=>[wt($e,{value:!1,label:he(r)("hidden"),class:"w-[50%]"},null,8,["label"]),wt($e,{value:!0,label:he(r)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),wt(lt,{span:"12"},{default:Pt(()=>[wt(ee,{label:he(r)("content"),path:"content"},{default:Pt(()=>[he(K)==he(Hn).VIDEO?(gn(),dr(Q,{key:0},{default:Pt(()=>[wt(he(Ye),{secondary:"",type:"primary",onClick:s[8]||(s[8]=()=>{y.value=!0})},{default:Pt(()=>[yo(vo(he(r)("select")),1)]),_:1}),wt(he(el),{value:he(b).content?he(cs)(he(b).content):"",placeholder:he(r)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),he(b).content?(gn(),Ho(ur,{key:0},[wt(he(Ye),{type:"primary",ghost:"",onClick:s[9]||(s[9]=()=>{Te.value=he(r)("video"),I.value=he(V)(he(b).content),q.value=!0})},{icon:Pt(()=>[wt(he(H),null,{default:Pt(()=>[wt(he(_e),{icon:"carbon:play-outline-filled"})]),_:1})]),default:Pt(()=>[yo(" "+vo(he(r)("play")),1)]),_:1}),wt(he(Ye),{type:"primary",ghost:"",onClick:s[10]||(s[10]=()=>{he(b).content=""})},{icon:Pt(()=>[wt(he(H),null,{default:Pt(()=>[wt(he(_e),{icon:"carbon:trash-can"})]),_:1})]),default:Pt(()=>[yo(" "+vo(he(r)("clear")),1)]),_:1})],64)):li("",!0)]),_:1})):(gn(),Ho("div",up,[ai("div",{class:"cursor-pointer w-full h-[150px]",onClick:s[11]||(s[11]=()=>{ae.value=!0})},[he(b).content?(gn(),dr(he(us),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:rc("border: 1px dashed "+he(c)("green","white")),src:he(V)(he(b).content||"")},null,8,["style","src"])):(gn(),Ho("div",{key:1,class:"w-full h-full flex items-center justify-center",style:rc("border: 1px dashed "+he(c)("green","white"))},[wt(he(H),{size:64},{default:Pt(()=>[wt(he(_e),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),he(f)&&Array.isArray(he(f))?(gn(),dr(ee,{key:0,label:he(r)("data"),path:"data"},{default:Pt(()=>[wt(ze,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Pt(()=>[(gn(!0),Ho(ur,null,dp(he(f),(Se,ct)=>(gn(),Ho(ur,{key:ct},[wt(lt,{span:10},{default:Pt(()=>[wt(he(el),{value:Se,placeholder:Se,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),wt(lt,{span:14},{default:Pt(()=>[wt(he(el),{value:he(b).data[Se],"onUpdate:value":kt=>he(b).data[Se]=kt,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):li("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),wt(_,{show:he(q),"onUpdate:show":s[14]||(s[14]=Se=>Go(q)?q.value=Se:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:he(Te)},{default:Pt(()=>[ai("video",pp,[ai("source",{src:he(I)},null,8,mp)])]),_:1},8,["show","title"]),wt(pt,{show:he(ae),"onUpdate:show":s[15]||(s[15]=Se=>Go(ae)?ae.value=Se:null),title:he(r)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:he(t)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:s[16]||(s[16]=Se=>{he(b).content=Se,ae.value=!1})},null,8,["show","title","upload-config"]),wt(pt,{show:he(y),"onUpdate:show":s[17]||(s[17]=Se=>Go(y)?y.value=Se:null),title:he(r)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:he(t)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:s[18]||(s[18]=Se=>{he(b).content=Se,y.value=!1})},null,8,["show","title","upload-config"]),wt(op,{show:he(M),"onUpdate:show":s[19]||(s[19]=Se=>Go(M)?M.value=Se:null)},null,8,["show"])],64)}}}),vp=Wn(_p,[["__scopeId","data-v-324eb116"]]),cc=u=>{const e=Au();switch(u){case"text":return Jr({min:40,max:80});case"i18n-text":return`{ "fr": "${Jr({min:40,max:80})}", "en": "${Jr({min:40,max:80})}" }`;case"textarea":return zn();case"i18n-textarea":return`{ "fr": "${zn()}", "en": "${zn()}" }`;case"number":return yn({min:10,max:1e4});case"checkbox":return nc();case"single-select":return Dn();case"multi-select":return[Dn(),Dn(),Dn()];case"date":return e.format("YYYY-MM-DD");case"daterange":return[e.format("YYYY-MM-DD"),e.add(5,"years").format("YYYY-MM-DD")];case"datetime":return e.format("YYYY-MM-DD HH:mm:ss");case"datetimerange":return[e.format("YYYY-MM-DD HH:mm:ss"),e.clone().add(5,"years").format("YYYY-MM-DD HH:mm:ss")];case"year":return e.format("YYYY");case"yearrange":return[e.format("YYYY"),e.clone().add(5,"years").format("YYYY")];case"month":return e.format("YYYY-MM");case"monthrange":return[e.format("YYYY-MM"),e.clone().add(5,"years").format("YYYY-MM")];case"quarter":return`${e.format("YYYY")}-Q${e.quarter()}`;case"quarterrange":const n=e.clone().add(5,"years");return[`${e.format("YYYY")}-Q${e.quarter()}`,`${n.format("YYYY")}-Q${n.quarter()}`];case"week":return`${e.format("YYYY")}-${e.week()}`;case"editor":return`<p>${zn()}</p><p>${zn()}</p>`;case"i18n-editor":return`{ "fr": "<p>${zn()}</p><p>${zn()}</p>", "en": "<p>${zn()}</p><p>${zn()}</p>" }`;case"image":return Nn({width:1200,height:800});case"gallery":return[Nn({width:1200,height:800}),Nn({width:1200,height:800}),Nn({width:1200,height:800}),Nn({width:1200,height:800})];case"news-article":return yn({min:0,max:10});case"news-articles":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"news-category":return yn({min:0,max:10});case"news-categories":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"news-tag":return yn({min:0,max:10});case"news-tags":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"icon":return cr();case"icons":return[cr(),cr(),cr()];case"albums":return[{name:"album",medias:[Nn(),Nn(),Nn(),Nn()]}];case"audio":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/mp3/mp31mb.mp3";case"video":return"https://testfilehub.github.io/files/MP4/1mb.MP4";case"document":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/pdf/pdf1mb.pdf";case"file":return"https://testfilehub.github.io/files/TXT/1mb.TXT";case"color":return zu();case"content-model-item":return;case"content-model-items":return[];case"menu-item-link":return 0;case"list":return[{value:Dn()},{value:Dn()},{value:Dn()}];case"i18n-list":return[{value:`{ "fr": "${Dn()}", en: "${Dn()}" }`}];case"switch":return nc();case"slider":return yn({min:0,max:100});case"range-slider":return[yn({min:0,max:100}),yn({min:0,max:100})];case"gradient":return"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)";default:return u}},{useModel:yp,mergeModels:gp,defineComponent:hp}=await pe("vue"),{toDisplayString:pr,createElementVNode:ni,resolveComponent:bp,createVNode:ga,withCtx:Ll,unref:pa,createTextVNode:oi,openBlock:sn,createBlock:vs,createCommentVNode:mr,renderList:dc,Fragment:uc,createElementBlock:Qo,createSlots:kp,isRef:pc}=await pe("vue"),{defineComponent:wp,ref:fr,inject:xp}=await pe("vue"),$p={class:"w-full"},Cp={class:"mb-2"},Ip={class:"text-base text-left"},Vp=["src","onClick"],Sp=["src"],Ep=wp({name:"AlbumsPicker"}),Up=hp({...Ep,props:gp({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=yp(u,"modelValue"),n=u,{t}=Ie(),{fileUrl:o}=st(),a=fr(!1),l=fr(!1),d=fr(0),W=fr(""),re=xp("appConfig"),ne=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},B=V=>{e.value&&Array.isArray(e.value)?e.value.splice(V,1):e.value=[]},ve=(V,c)=>{e.value&&Array.isArray(e.value[c].medias)?e.value[c].medias.splice(V,1):e.value&&(e.value[c].medias=[])},P=V=>{const c=V.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(c)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(c)?"video":"unknown"};return(V,c)=>{const C=_e,me=H,r=Ye,be=Na,R=us,le=bp("Draggable"),L=Nd,S=on,U=Cl,O=uo,M=Jl;return sn(),Qo("section",$p,[ni("section",Cp,[ga(U,{size:"small",segmented:e.value&&e.value.length>0},{header:Ll(()=>[ni("div",Ip,pr(n.title),1)]),"header-extra":Ll(()=>[n.readonly?mr("",!0):(sn(),vs(r,{key:0,quaternary:"",onClick:ne},{icon:Ll(()=>[ga(me,{size:"18"},{default:Ll(()=>[ga(C,{icon:"carbon:folder-add"})]),_:1})]),default:Ll(()=>[oi(" "+pr(pa(t)("addAlbum")),1)]),_:1}))]),default:Ll(()=>[(sn(!0),Qo(uc,null,dc(e.value,(K,f)=>(sn(),vs(U,{key:f,size:"small",embedded:"",hoverable:"",segmented:K.medias&&K.medias.length>0,class:"mb-4"},kp({header:Ll(()=>[ga(be,{modelValue:K.name,"onUpdate:modelValue":E=>K.name=E,placeholder:pa(t)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:Ll(()=>[ga(S,{style:{"max-height":"100%"}},{default:Ll(()=>[K.medias&&K.medias.length>0?(sn(),vs(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Ll(()=>[ga(le,{list:K.medias,class:"w-full grid grid-cols-3 gap-4"},{default:Ll(()=>[(sn(!0),Qo(uc,null,dc(K.medias,(E,w)=>(sn(),Qo("div",{key:"img-"+w,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[P(E)==="image"?(sn(),vs(R,{key:0,"object-fit":"cover",src:pa(o)(E)},null,8,["src"])):(sn(),Qo("video",{key:1,muted:"",src:pa(o)(E),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{W.value=pa(o)(E),l.value=!0}},null,8,Vp)),n.readonly?mr("",!0):(sn(),vs(r,{key:2,strong:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:b=>ve(w,f)},{icon:Ll(()=>[ga(me,null,{default:Ll(()=>[ga(C,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):mr("",!0)]),_:2},1024)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:Ll(()=>[ga(r,{quaternary:"",class:"mr-2",onClick:()=>{d.value=f,a.value=!0}},{icon:Ll(()=>[ga(me,null,{default:Ll(()=>[ga(C,{icon:"carbon:add-alt"})]),_:1})]),default:Ll(()=>[oi(" "+pr(pa(t)("add")),1)]),_:1},8,["onClick"]),c[3]||(c[3]=ni("div",{class:"w-2"},null,-1)),ga(r,{quaternary:"",type:"error",onClick:E=>B(f)},{icon:Ll(()=>[ga(me,null,{default:Ll(()=>[ga(C,{icon:"carbon:trash-can"})]),_:1})]),default:Ll(()=>[oi(" "+pr(pa(t)("delete")),1)]),_:1},8,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),ga(O,{show:pa(a),"onUpdate:show":c[0]||(c[0]=K=>pc(a)?a.value=K:null),title:pa(t)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:pa(re)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:c[1]||(c[1]=K=>{e.value&&Array.isArray(e.value[pa(d)].medias)?e.value[pa(d)].medias.push(K):e.value&&(e.value[pa(d)].medias=[K]),a.value=!1})},null,8,["show","title","upload-config"]),ga(M,{show:pa(l),"onUpdate:show":c[2]||(c[2]=K=>pc(l)?l.value=K:null),preset:"card",style:{width:"500px"},title:pa(t)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:Ll(()=>[pa(W)?(sn(),Qo("video",{key:0,controls:"",autoplay:"",class:"w-full",src:pa(W)},null,8,Sp)):mr("",!0)]),_:1},8,["show","title"])])}}}),Tp=Wn(Up,[["__scopeId","data-v-a7af0b66"]]),{useModel:Mp,mergeModels:Dp,defineComponent:Np}=await pe("vue"),{toDisplayString:mc,createElementVNode:fc,resolveComponent:zp,createVNode:An,withCtx:rn,unref:ys,createTextVNode:Ap,openBlock:Wo,createBlock:si,createCommentVNode:ri,renderList:Pp,Fragment:Lp,createElementBlock:ii,isRef:Bp}=await pe("vue"),{defineComponent:Fp,inject:Op,ref:qp}=await pe("vue"),Rp={class:"w-full"},jp={class:"mb-2"},Kp={class:"text-base text-left"},Yp=Fp({name:"GridImagesPicker"}),Gp=Np({...Yp,props:Dp({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=Mp(u,"modelValue"),n=Op("appConfig"),t=u,{t:o}=Ie(),{fileUrl:a}=st(),l=qp(!1),d=re=>{Array.isArray(e.value)?e.value.splice(re,1):e.value=[]},W=async re=>{Array.isArray(e.value)?e.value.push(...re):e.value=[...re],l.value=!1};return(re,ne)=>{const B=_e,ve=H,P=Ye,V=us,c=zp("Draggable"),C=Nd,me=on,r=Cl,be=uo;return Wo(),ii("section",Rp,[fc("section",jp,[An(r,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:rn(()=>[fc("div",Kp,mc(t.title),1)]),"header-extra":rn(()=>[t.readonly?ri("",!0):(Wo(),si(P,{key:0,quaternary:"",onClick:ne[0]||(ne[0]=R=>l.value=!0)},{icon:rn(()=>[An(ve,{size:"18"},{default:rn(()=>[An(B,{icon:"carbon:add-alt"})]),_:1})]),default:rn(()=>[Ap(" "+mc(ys(o)("add")),1)]),_:1}))]),default:rn(()=>[An(me,{style:{"max-height":"100%"}},{default:rn(()=>[e.value&&e.value.length?(Wo(),si(C,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:rn(()=>[An(c,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:rn(()=>[(Wo(!0),ii(Lp,null,Pp(e.value,(R,le)=>(Wo(),ii("div",{key:"img-"+le,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[An(V,{width:"100","object-fit":"cover",src:ys(a)(R)},null,8,["src"]),t.readonly?ri("",!0):(Wo(),si(P,{key:0,strong:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:L=>d(le)},{icon:rn(()=>[An(ve,null,{default:rn(()=>[An(B,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):ri("",!0)]),_:1})]),_:1},8,["segmented"])]),An(be,{show:ys(l),"onUpdate:show":ne[1]||(ne[1]=R=>Bp(l)?l.value=R:null),title:ys(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:ys(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:W},null,8,["show","title","upload-config"])])}}}),Hp=Wn(Gp,[["__scopeId","data-v-06b50a08"]]);var ya=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(ya||{}),Rr=(u=>(u.INTERNAL="internal",u.USER_EDITABLE="user-editable",u))(Rr||{}),io=(u=>(u.EDITORIAL_CONTENT="editorial-content",u.USER_DATA="user-data",u.SYSTEM_DATA="system-data",u))(io||{}),lr=(u=>(u.USER="user",u.ADMIN="admin",u.SYSTEM="system",u))(lr||{}),na=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(na||{});const ms=()=>{const{t:u}=Ie(),{tr:e}=st(),n=(c,C)=>C&&C.titleFieldName?au(c.contentModelData.index[C.titleFieldName])?e(c.contentModelData.index[C.titleFieldName]):c.contentModelData.index[C.titleFieldName]:Cd(c.contentModelData.index,e,e(c.title)),t=[{label:u("contentModel"),value:na.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:na.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:na.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:na.NEWS_TAG,tagType:"error"}],o=c=>t.find(C=>C.value===c)?.label,a=c=>t.find(C=>C.value===c)?.tagType||"default",l=[{label:u("editorialContent"),value:io.EDITORIAL_CONTENT,tagType:"warning"},{label:u("userEntries"),value:io.USER_DATA,tagType:"info"},{label:u("systemData"),value:io.SYSTEM_DATA,tagType:"success"}],d=c=>l.find(C=>C.value===c)?.label,W=c=>l.find(C=>C.value===c)?.tagType||"default",re=[{label:u("internalAdminSystem"),value:Rr.INTERNAL,tagType:"default"},{label:u("userEditable"),value:Rr.USER_EDITABLE,tagType:"info"}],ne=c=>re.find(C=>C.value===c)?.label,B=c=>re.find(C=>C.value===c)?.tagType||"default",ve=[{label:u("user"),value:lr.USER,tagType:"warning"},{label:u("admin"),value:lr.ADMIN,tagType:"info"},{label:u("system"),value:lr.SYSTEM,tagType:"error"}];return{contentTypes:t,getContentTypeLabel:o,getContentTypeTagType:a,extractItemTitle:n,contentModelIntents:l,getContentModelIntentLabel:d,getContentModelIntentTagType:W,contentModelAccessScopes:re,getContentModelAccessScopeLabel:ne,getContentModelAccessScopeTagType:B,contentModelItemCreatorTypes:ve,getContentModelItemCreatorTypeLabel:c=>ve.find(C=>C.value===c)?.label,getContentModelItemCreatorTypeTagType:c=>ve.find(C=>C.value===c)?.tagType||"default"}};class Qp{id;contentModelId;title;contentModelData;data;isActive;createdByType;createdBy;createdAt;updatedAt;createdByUser;contentModel;relatedItems;relatedTo;constructor(e,n,t,o,a,l,d,W,re,ne){this.id=W,this.contentModelId=d,this.title=e,this.data=l,this.contentModelData=n,this.isActive=t,this.createdByType=o,this.createdBy=a,this.createdAt=re,this.updatedAt=ne}}const Wp=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["content-model","items"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/content-model/items",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Gd=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["content-model","items"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/content-model/items/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Xp=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["content-model","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/content-model/items/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Jp=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof Qp){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("ContentModelItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(l=>a[l])}),mutationFn:async a=>{t.start();const l=Object.keys(a).filter(d=>a[d]);try{for(const d of l)await e({method:"delete",url:`/content-model/items/${d}`});return l}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},ec=()=>{const{request:u}=Ge();return Ya(async({query:e,contentModelId:n})=>{const t=await u({url:`/content-model-items/search/${e}/${n}`});return t.failure&&t.error?[]:t.result.data})},Hd=()=>{const{request:u}=Ge();return Ya(async e=>{const n=await u({url:"/content-model-items/list",method:"post",data:e});return n.failure&&n.error?[]:n.result.data})},{defineComponent:Zp}=await pe("vue"),{unref:v,renderList:em,Fragment:gs,openBlock:mt,createElementBlock:hn,resolveComponent:_c,createBlock:Et,createCommentVNode:Xo,createVNode:Ct,withCtx:Tt,normalizeStyle:ci,createElementVNode:hs,toDisplayString:Za,createTextVNode:en,isRef:go}=await pe("vue"),tm={key:4,class:"w-full"},lm={key:5,class:"w-full"},am={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},nm=["onClick"],om={key:0,class:"w-full"},sm={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},rm=["src"],im={id:"video",autoplay:"",controls:"",style:{width:"100%"}},cm=["src"],{defineComponent:dm,inject:um,ref:Kl,h:Pn,watch:vc,computed:bs,onMounted:pm}=await pe("vue"),{storeToRefs:mm}=await pe("pinia"),fm=dm({name:"FormGenerator"}),_m=Zp({...fm,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const n=u,t=e,{t:o,locale:a}=Ie(),{tr:l,pickByTheme:d,fileUrl:W,mergeArrays:re}=st(),{extractItemTitle:ne}=ms(),{data:B}=po(),ve=um("appConfig");let P=[];if(typeof n.items=="string")try{P=JSON.parse(n.items)}catch{P=[]}else P=ue.cloneDeep(n.items);let V={};if(n.useJson)try{V=JSON.parse(n.modelValue)}catch{V={}}const c=Kl(""),C=Kl(Al()),me=Kl(null),r=Kl(n.useJson?V:n.modelValue),be={};P.forEach(Y=>{Y.key in r.value||(Y.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(Y.type)?r.value[Y.key]=JSON.parse(Y.defaultValue):Y.type=="number"||Y.type=="slider"?r.value[Y.key]=parseFloat(Y.defaultValue):Y.type=="content-model-item"?r.value[Y.key]=void 0:Y.type=="content-model-items"?r.value[Y.key]=[]:Y.type=="list"?r.value[Y.key]=Y.defaultValue.split(",").map(ye=>({value:ye})):Y.type=="i18n-list"?r.value[Y.key]=Y.defaultValue.split(",").map(ye=>({value:`{ "fr": "${ye}", "en": "${ye}" }`})):r.value[Y.key]=Y.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(Y.type)?r.value[Y.key]="":["number","slider"].includes(Y.type)?r.value[Y.key]=0:["checkbox","switch"].includes(Y.type)?r.value[Y.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(Y.type)?r.value[Y.key]=[]:["range-slider"].includes(Y.type)?r.value[Y.key]=[0,100]:r.value[Y.key]=void 0),Y.required&&(be[Y.key]=[{required:!0,message:o("fillRequired")}]),C.value=Al()});const R=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],le=Y=>Pn("span",{},{default:()=>l(Y.label)});vc(()=>r.value,Y=>{const ye=n.useJson?JSON.stringify(Y):Y,xe=async()=>{if(P.length==0)return!0;let we=!1;try{await me.value?.validate(at=>{we=!at})}catch{we=!1}return we};t("update:modelValue",ye),t("update",ye,xe)},{immediate:!0,deep:!0});const{isLightTheme:L}=mm(Ro()),S=Kl(!1),U=Kl(!1),O=Kl(!1),M=Kl(""),K=Kl(""),f=Kl(!1),E=Kl(!1),w=Kl(""),b=Kl(""),j=Kl(!1),x=Y=>{window.open(Y,"_blank")},X=Kl(!1),J=Kl([]),{data:De,isPending:ae}=Id();vc(()=>De.value,Y=>{const ye=ue.cloneDeep(Y);if(ye){J.value=[];for(let xe=0;xe<ye?.length;xe++)switch(ye[xe].targetType){case ya.EXTERNAL_LINK:J.value.findIndex(we=>we.url===ye[xe].url)===-1&&J.value.push(ye[xe]);break;case ya.PAGE_LINK:J.value.findIndex(we=>we.path===ye[xe].path)===-1&&J.value.push(ye[xe]);break}}},{immediate:!0,deep:!0});const y=Kl([]),q=Kl([]),{mutateAsync:Te,isPending:I}=ec(),{mutateAsync:p,isPending:s}=Hd(),m=bs(()=>I.value||s.value),D=async(Y,ye)=>{if(!Y.length){q.value=[];return}q.value=await Te({query:Y,contentModelId:ye})},T=bs(()=>re(y.value,q.value,"id")),F=Kl([]),z=Kl([]),{mutateAsync:ee,isPending:G}=Od(),{mutateAsync:ut,isPending:St}=qd(),$e=bs(()=>St.value||G.value),It=async Y=>{if(!Y.length){z.value=[];return}z.value=await ut(Y)},ze=bs(()=>re(F.value,z.value,"id")),lt=nu({enabled:!1}),Q=ou({enabled:!1});pm(async()=>{P.find(Y=>Y.type==="news-categories"||Y.type==="news-category")&&(lt.refetch(),Q.refetch());for(let Y=0;Y<P.length;Y++)if(P[Y].type==="news-articles"||P[Y].type==="news-article"){const ye=r.value[P[Y].key],xe=await ee({ids:P[Y].type==="news-articles"?ye:[ye]});xe&&(F.value=re(F.value,xe,"id"))}else if(P[Y].type==="content-model-items"||P[Y].type==="content-model-item"){const ye=r.value[P[Y].key],xe=await p({ids:P[Y].type==="content-model-items"?ye:[ye]});xe&&(y.value=re(y.value,xe,"id"))}});const h=Y=>Pn("span",{},{default:()=>`${l(Y.name)}`}),_=Y=>Pn("span",{},{default:()=>`${l(Y.title)}`}),pt=Y=>Pn("span",{},{default:()=>`${l(Y.name)}`}),Se=Y=>bs(()=>Pn("span",{},{default:()=>ne(Y,B.value?.find(ye=>ye.id===Y.contentModelId))})),ct=({option:Y})=>Pn("div",{style:{display:"flex",alignItems:"center"}},[`${l(Y.title)}`]),kt=Y=>Pn("div",{style:{marginLeft:"12px",padding:"4px 0"}},[Pn("div",{},{default:()=>`${l(Y.title)}`}),Pn("small",{},{default:()=>`${Y.targetType==ya.EXTERNAL_LINK?Y.url:Y.path}`})]);return(Y,ye)=>{const xe=el,we=Na,at=Fd,ll=Yr,zt=fo,Ke=Hi,al=Tl,Ot=$u,nl=Dd,Pl=Wa,et=us,ie=_e,oe=H,Ae=Ye,A=Hp,nt=_c("IconPicker"),Ml=Tp,jl=rr,Xa=_c("color-picker"),Ja=Gr,N=Va,Ht=Ca,rl=Jl,_o=uo;return mt(),hn(gs,null,[(mt(),Et(Ht,{ref_key:"formRef",ref:me,key:v(C),model:v(r),rules:be,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:ci(n.formStyle)},{default:Tt(()=>[(mt(!0),hn(gs,null,em(v(P),(i,Qr)=>(mt(),Et(N,{key:Qr,label:v(l)(i.label),path:i.key,"label-style":n.labelStyle,"show-require-mark":i.required,class:"w-full"},{default:Tt(()=>[i.type=="text"?(mt(),Et(xe,{key:0,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),maxlength:i.settings?.maxLength||void 0,minlength:i.settings?.minLength||void 0,clearable:i.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):i.type=="i18n-text"?(mt(),Et(we,{key:1,modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):i.type=="textarea"?(mt(),Et(xe,{key:2,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),maxlength:i.settings?.maxLength||void 0,minlength:i.settings?.minLength||void 0,clearable:i.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):i.type=="i18n-textarea"?(mt(),Et(we,{key:3,modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):i.type=="editor"?(mt(),hn("div",tm,[Ct(at,{modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),"toolbar-items":R,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):i.type=="i18n-editor"?(mt(),hn("div",lm,[Ct(we,{modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):i.type=="number"?(mt(),Et(ll,{key:6,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,max:i.settings?.max||void 0,min:i.settings?.min||void 0,step:i.settings?.step||1,clearable:i.settings?.clearable||!1,placeholder:v(l)(i.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):i.type=="checkbox"?(mt(),Et(zt,{key:7,checked:v(r)[i.key],"onUpdate:checked":ce=>v(r)[i.key]=ce,"checked-value":i.settings?.["checked-value"]||!0,"unchecked-value":i.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):i.type=="switch"?(mt(),Et(al,{key:8},{default:Tt(()=>[Ct(Ke,{value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,"checked-value":i.settings?.["checked-value"]||!0,"unchecked-value":i.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):i.type=="slider"?(mt(),Et(Ot,{key:9,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,min:i.settings?.min||0,max:i.settings?.max||100,step:i.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):i.type=="range-slider"?(mt(),Et(Ot,{key:10,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,min:i.settings?.min||0,max:i.settings?.max||100,step:i.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):i.type=="date"?(mt(),Et(nl,{key:11,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM-dd",format:i.settings?.format||"dd MMMM yyyy",type:"date",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="daterange"?(mt(),Et(nl,{key:12,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM-dd",format:i.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="datetime"?(mt(),Et(nl,{key:13,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM-dd HH:mm:ss",format:i.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="datetimerange"?(mt(),Et(nl,{key:14,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM-dd HH:mm:ss",format:i.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="year"?(mt(),Et(nl,{key:15,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy",type:"year",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="yearrange"?(mt(),Et(nl,{key:16,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy",type:"yearrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="month"?(mt(),Et(nl,{key:17,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM",type:"month",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="monthrange"?(mt(),Et(nl,{key:18,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-MM",type:"monthrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="quarter"?(mt(),Et(nl,{key:19,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-Q",type:"quarter",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="quarterrange"?(mt(),Et(nl,{key:20,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,"value-format":"yyyy-Q",type:"quarterrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="week"?(mt(),Et(nl,{key:21,"formatted-value":v(r)[i.key],"onUpdate:formattedValue":ce=>v(r)[i.key]=ce,type:"week",clearable:i.settings?.clearable||!0,placeholder:v(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):i.type=="single-select"||i.type=="multi-select"?(mt(),Et(Pl,{key:22,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:(i.options||[])?.map(ce=>{if(i.type=="multi-select"&&i.settings&&v(r)[i.key]){const ua=i.settings?.max||1/0;return{...ce,disabled:v(r)[i.key].length>=ua&&!v(r)[i.key].includes(ce.value)}}return ce}),multiple:i.type=="multi-select",placeholder:v(l)(i.label),"render-label":le,"label-field":"label","value-field":"value",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="image"?(mt(),hn("div",am,[hs("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{c.value=i.key,S.value=!0}},[v(r)[i.key]?(mt(),Et(et,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:ci("border: 1px dashed "+v(d)("green","white")),src:v(W)(v(r)[i.key]||"")},null,8,["style","src"])):(mt(),hn("div",{key:1,class:"w-full h-full flex items-center justify-center",style:ci("border: 1px dashed "+v(d)("green","white"))},[Ct(oe,{size:64},{default:Tt(()=>[Ct(ie,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,nm),v(r)[i.key]?(mt(),Et(Ae,{key:0,quaternary:"",onClick:()=>{c.value=i.key,v(r)[v(c)]=""}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("clear")),1)]),_:1},8,["onClick"])):Xo("",!0)])):i.type=="gallery"?(mt(),Et(A,{key:24,modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,"upload-folder":"images",title:v(l)(i.label)},null,8,["modelValue","onUpdate:modelValue","title"])):i.type=="news-category"||i.type=="news-categories"?(mt(),Et(Pl,{key:25,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:(v(lt).data.value||[])?.map(ce=>{if(i.type=="news-categories"&&i.settings&&v(r)[i.key]){const ua=i.settings?.max||1/0;return{...ce,disabled:v(r)[i.key].length>=ua&&!v(r)[i.key].includes(ce.id)}}return ce}),multiple:i.type=="news-categories",placeholder:v(l)(i.label),"render-label":h,"label-field":"name","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="news-tag"||i.type=="news-tags"?(mt(),Et(Pl,{key:26,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:(v(Q).data.value||[])?.map(ce=>{if(i.type=="news-tags"&&i.settings&&v(r)[i.key]){const ua=i.settings?.max||1/0;return{...ce,disabled:v(r)[i.key].length>=ua&&!v(r)[i.key].includes(ce.id)}}return ce}),multiple:i.type=="news-tags",placeholder:v(l)(i.label),"render-label":pt,"label-field":"name","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="news-article"||i.type=="news-articles"?(mt(),Et(Pl,{key:27,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:(v(ze)||[])?.map(ce=>{if(i.type=="news-articles"&&i.settings&&v(r)[i.key]){const ua=i.settings?.max||1/0;return{...ce,disabled:v(r)[i.key].length>=ua&&!v(r)[i.key].includes(ce.id)}}return ce}),multiple:i.type=="news-articles",placeholder:v(l)(i.label),"render-label":_,loading:v($e),"value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:It},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):i.type=="icon"||i.type=="icons"?(mt(),Et(nt,{key:28,modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),multiple:i.type=="icons","icons-list-placeholder":v(o)("enterIconNameInSearchBar"),"search-placeholder":v(o)("search"),"empty-text":v(o)("noIconsFound"),"icon-library":i.settings?.library||"all",clearable:i.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):i.type=="albums"?(mt(),Et(Ml,{key:29,modelValue:v(r)[i.key],"onUpdate:modelValue":ce=>v(r)[i.key]=ce,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):i.type=="audio"?(mt(),Et(jl,{key:30},{default:Tt(()=>[Ct(Ae,{type:"primary",secondary:"",onClick:()=>{c.value=i.key,f.value=!0}},{default:Tt(()=>[en(Za(v(o)("select")),1)]),_:1},8,["onClick"]),Ct(xe,{value:v(r)[i.key]?v(cs)(v(r)[i.key]):"",placeholder:v(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(r)[i.key]?(mt(),hn(gs,{key:0},[Ct(Ae,{type:"primary",ghost:"",onClick:()=>{w.value=v(l)(i.label),b.value=v(W)(v(r)[i.key]),E.value=!0}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:play"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("play")),1)]),_:1},8,["onClick"]),Ct(Ae,{type:"primary",ghost:"",onClick:()=>{c.value=i.key,v(r)[v(c)]=""}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="video"?(mt(),Et(jl,{key:31},{default:Tt(()=>[Ct(Ae,{type:"primary",secondary:"",onClick:()=>{c.value=i.key,U.value=!0}},{default:Tt(()=>[en(Za(v(o)("select")),1)]),_:1},8,["onClick"]),Ct(xe,{value:v(r)[i.key]?v(cs)(v(r)[i.key]):"",placeholder:v(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(r)[i.key]?(mt(),hn(gs,{key:0},[Ct(Ae,{type:"primary",ghost:"",onClick:()=>{M.value=v(l)(i.label),K.value=v(W)(v(r)[i.key]),O.value=!0}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:play"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("play")),1)]),_:1},8,["onClick"]),Ct(Ae,{type:"primary",ghost:"",onClick:()=>{c.value=i.key,v(r)[v(c)]=""}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="document"?(mt(),Et(jl,{key:32},{default:Tt(()=>[Ct(Ae,{type:"primary",secondary:"",onClick:()=>{c.value=i.key,j.value=!0}},{default:Tt(()=>[en(Za(v(o)("select")),1)]),_:1},8,["onClick"]),Ct(xe,{value:v(r)[i.key]?v(cs)(v(r)[i.key]):"",placeholder:v(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(r)[i.key]?(mt(),hn(gs,{key:0},[Ct(Ae,{type:"primary",ghost:"",onClick:ce=>x(v(W)(v(r)[i.key]))},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"mdi:open-in-new"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("open")),1)]),_:1},8,["onClick"]),Ct(Ae,{type:"primary",ghost:"",onClick:()=>{c.value=i.key,v(r)[v(c)]=""}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="file"?(mt(),Et(jl,{key:33},{default:Tt(()=>[Ct(Ae,{type:"primary",secondary:"",onClick:()=>{c.value=i.key,X.value=!0}},{default:Tt(()=>[en(Za(v(o)("select")),1)]),_:1},8,["onClick"]),Ct(xe,{value:v(r)[i.key]?v(cs)(v(r)[i.key]):"",placeholder:v(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),v(r)[i.key]?(mt(),Et(Ae,{key:0,type:"primary",ghost:"",onClick:()=>{c.value=i.key,v(r)[v(c)]=""}},{icon:Tt(()=>[Ct(oe,null,{default:Tt(()=>[Ct(ie,{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[en(" "+Za(v(o)("clear")),1)]),_:1},8,["onClick"])):Xo("",!0)]),_:2},1024)):i.type=="color"||i.type=="gradient"?(mt(),Et(Xa,{key:34,"pure-color":v(r)[i.key],"onUpdate:pureColor":ce=>v(r)[i.key]=ce,"default-pure-color":"#00000000","picker-type":"chrome","use-type":i.type=="color"?"pure":"gradient",format:i.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:v(L)?"white":"black",lang:v(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):i.type=="content-model-item"||i.type=="content-model-items"?(mt(),Et(Pl,{key:35,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:(v(T)||[])?.map(ce=>{if(i.type=="content-model-items"&&i.settings&&v(r)[i.key]){const ua=i.settings?.max||1/0;return{...ce,disabled:v(r)[i.key].length>=ua&&!v(r)[i.key].includes(ce.id)}}return ce}),multiple:i.type=="content-model-items",placeholder:v(l)(i.label),"render-label":ce=>Se(ce).value,loading:v(m),"value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:ce=>D(ce,i.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):i.type=="menu-item-link"?(mt(),Et(Pl,{key:36,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,options:v(J)||[],placeholder:v(l)(i.label),"render-label":kt,"render-tag":ct,loading:v(ae),"label-field":"title","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):i.type=="list"?(mt(),Et(Ja,{key:37,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),max:i.settings?.max||void 0,min:i.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:Tt(({value:ce})=>[i.settings?.type=="editor"?(mt(),hn("div",om,[Ct(at,{modelValue:ce.value,"onUpdate:modelValue":ua=>ce.value=ua,"toolbar-items":R,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(mt(),Et(xe,{key:1,value:ce.value,"onUpdate:value":ua=>ce.value=ua,type:i.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):i.type=="i18n-list"?(mt(),Et(Ja,{key:38,value:v(r)[i.key],"onUpdate:value":ce=>v(r)[i.key]=ce,placeholder:v(l)(i.label),max:i.settings?.max||void 0,min:i.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:Tt(({value:ce})=>[Ct(we,{modelValue:ce.value,"onUpdate:modelValue":ua=>ce.value=ua,type:i.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):Xo("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),Ct(rl,{show:v(E),"onUpdate:show":ye[0]||(ye[0]=i=>go(E)?E.value=i:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:v(w)},{default:Tt(()=>[hs("audio",sm,[hs("source",{src:v(b)},null,8,rm)])]),_:1},8,["show","title"]),Ct(rl,{show:v(O),"onUpdate:show":ye[1]||(ye[1]=i=>go(O)?O.value=i:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:v(M)},{default:Tt(()=>[hs("video",im,[hs("source",{src:v(K)},null,8,cm)])]),_:1},8,["show","title"]),Ct(_o,{show:v(S),"onUpdate:show":ye[2]||(ye[2]=i=>go(S)?S.value=i:null),title:v(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:v(ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ye[3]||(ye[3]=i=>{v(r)[v(c)]=i,S.value=!1})},null,8,["show","title","upload-config"]),Ct(_o,{show:v(U),"onUpdate:show":ye[4]||(ye[4]=i=>go(U)?U.value=i:null),title:v(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:v(ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ye[5]||(ye[5]=i=>{v(r)[v(c)]=i,U.value=!1})},null,8,["show","title","upload-config"]),Ct(_o,{show:v(f),"onUpdate:show":ye[6]||(ye[6]=i=>go(f)?f.value=i:null),title:v(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:v(ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ye[7]||(ye[7]=i=>{v(r)[v(c)]=i,f.value=!1})},null,8,["show","title","upload-config"]),Ct(_o,{show:v(j),"onUpdate:show":ye[8]||(ye[8]=i=>go(j)?j.value=i:null),title:v(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:v(ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ye[9]||(ye[9]=i=>{v(r)[v(c)]=i,j.value=!1})},null,8,["show","title","upload-config"]),Ct(_o,{show:v(X),"onUpdate:show":ye[10]||(ye[10]=i=>go(X)?X.value=i:null),title:v(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:v(ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ye[11]||(ye[11]=i=>{v(r)[v(c)]=i,X.value=!1})},null,8,["show","title","upload-config"])],64)}}}),ar=Wn(_m,[["__scopeId","data-v-3ffecd12"]]),{unref:di}=await pe("vue"),{defineComponent:vm}=await pe("vue"),{unref:_t,resolveComponent:ym,createVNode:il,withCtx:Lt,openBlock:_l,createBlock:ma,createCommentVNode:_r,toDisplayString:bn,createTextVNode:Ln,renderList:vr,Fragment:ho,createElementBlock:bo,normalizeClass:gm,isRef:hm,createSlots:bm,createElementVNode:ks,vShow:ui,withDirectives:pi,Transition:mi}=await pe("vue"),km={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},wm={class:"flex items-center justify-start gap-2"},{storeToRefs:xm}=await pe("pinia"),{ref:yr,inject:Xn,watch:fi,reactive:Bn,computed:yc}=await pe("vue"),$m=vm({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(u){const e=u,n=oa(),{sectionsDataBackup:t,sectionsSettingsBackup:o}=xm(Vd()),{t:a}=Ie(),{tr:l,editKeysToCamelCase:d}=st(),W=yr("index"),re=yr(!1),ne=Xn("formValueValidate1"),B=Xn("formValueValidate2"),ve=Xn("formValueValidate3"),P=Xn("initialSettings"),V=Xn("initialData"),c=Xn("settings"),C=Xn("data"),me=Xn("refreshKey"),{data:r,isPending:be}=su({slug:e.slug,linkId:e.linkId,pageId:e.pageId});fi(()=>r?.value,O=>{const M=ue.cloneDeep(O),K=M?.pages?.length?M?.pages[0].pivot:null;if(M&&C&&K&&(ue.isObject(K?.data)&&Ri(K?.data)?C.value=Bn(K?.data):C.value=Bn({}),ue.forIn(d(M.dataStructure),(f,E)=>{(!C.value[E]||Array.isArray(C.value[E])&&C.value[E].length==0)&&(E==="index"?C.value[E]=Bn({}):C.value[E]=Bn([]))})),V&&C&&setTimeout(()=>{V.value=ue.cloneDeep(C.value)},500),M&&c&&(ue.isObject(K?.settings)&&Ri(K?.settings)?c.value=Bn(K?.settings):c.value=Bn({}),ue.forIn(d(M.settingsStructure),(f,E)=>{c.value[E]||(c.value[E]=Bn({}))})),P&&c&&setTimeout(()=>{P.value=ue.cloneDeep(c.value)},500),M)if(d(M.dataStructure)){const f=Object.keys(d(M.dataStructure));f.includes("index")?W.value="index":W.value=f.length>0?f[0]:"_settings"}else W.value="_settings";if(me&&(me.value=Al()),!re.value&&(t.value[`${e.slug}__${e.linkId}__${e.pageId}`]||o.value[`${e.slug}__${e.linkId}__${e.pageId}`])){re.value=!0;const f=()=>{t.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,o.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,me&&(me.value=Al())};n.warning({title:a("backup"),content:a("sectionDataOrSettingsAvailable"),positiveText:a("restore"),negativeText:a("drop"),onPositiveClick:async()=>{C?.value&&t.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(C.value=Bn(ue.cloneDeep(t.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),c?.value&&o.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(c.value=Bn(ue.cloneDeep(o.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),f()},onNegativeClick:async()=>{f()}})}},{immediate:!0,deep:!0});const R=yr(!1);setTimeout(()=>{R.value=!0},500);const le=yc(()=>!ue.isEqual(C?.value,V?.value)),L=yc(()=>!ue.isEqual(c?.value,P?.value));fi(()=>C?.value,O=>{le.value&&R.value&&(t.value={...t.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:ue.cloneDeep(O)})},{deep:!0}),fi(()=>c?.value,O=>{L.value&&R.value&&(o.value={...o.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:ue.cloneDeep(O)})},{deep:!0});const S=yr(!1),U=()=>{S.value=!0,setTimeout(()=>{S.value=!1},3e3)};return(O,M)=>{const K=mo,f=Tl,E=_e,w=H,b=Qi,j=Ye,x=Hr,X=Wi,J=Cl,De=Da,ae=ir,y=_n,q=fn,Te=ym("Draggable"),I=Ga;return _t(be)?(_l(),ma(f,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:Lt(()=>[il(K)]),_:1})):(_l(),bo(ho,{key:1},[ks("div",km,[il(x,{value:_t(W),"onUpdate:value":M[1]||(M[1]=p=>hm(W)?W.value=p:null),type:"card",size:"small"},bm({default:Lt(()=>[_t(d)(_t(r)?.dataStructure)?(_l(),bo(ho,{key:0},[_t(d)(_t(r)?.dataStructure).index?(_l(),ma(b,{key:0,name:"index"},{default:Lt(()=>[il(w,{class:"mr-1"},{default:Lt(()=>[il(E,{icon:"carbon:types"})]),_:1}),Ln(" "+bn(_t(a)("general")),1)]),_:1})):_r("",!0),(_l(!0),bo(ho,null,vr(_t(Xt)(_t(d)(_t(r)?.dataStructure),["index"]),(p,s)=>(_l(),ma(b,{key:s,name:String(s)},{default:Lt(()=>[Ln(bn(_t(l)(p.title)),1)]),_:2},1032,["name"]))),128))],64)):_r("",!0),il(b,{name:"_settings"},{default:Lt(()=>[il(w,{class:"mr-1"},{default:Lt(()=>[il(E,{icon:"carbon:settings"})]),_:1}),Ln(" "+bn(_t(a)("settings")),1)]),_:1})]),_:2},[_t(W)!=="index"&&_t(W)!=="_settings"?{name:"suffix",fn:Lt(()=>[il(j,{quaternary:"",size:"small",class:gm({"btn-blink":_t(S)}),onClick:M[0]||(M[0]=()=>{_t(C)[_t(W)].push({}),me.value=("uuidv4"in O?O.uuidv4:di(Al))()})},{icon:Lt(()=>[il(w,null,{default:Lt(()=>[il(E,{icon:"carbon:add-alt"})]),_:1})]),default:Lt(()=>[Ln(" "+bn(_t(a)("add")),1)]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["value"])]),il(I,{appear:"",name:"slide-fade"},{default:Lt(()=>[ks("section",null,[(_l(!0),bo(ho,null,vr(_t(d)(_t(r)?.dataStructure)||{},(p,s)=>(_l(),bo(ho,{key:s},[String(s)==="index"?(_l(),ma(mi,{key:0,name:"slide-fade",mode:"out-in"},{default:Lt(()=>[pi(il(J,{size:"small",class:"mb-2",embedded:""},{default:Lt(()=>[_t(d)(_t(r)?.dataStructure).index?(_l(),ma(ar,{key:`${_t(me)}-${s}-form-1`,modelValue:_t(C)[s],"onUpdate:modelValue":m=>_t(C)[s]=m,items:p,onUpdate:(m,D)=>{ne.value=D}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(_l(),ma(X,{key:1,type:"warning","show-icon":""},{default:Lt(()=>[Ln(bn(_t(a)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[ui,_t(W)==="index"]])]),_:2},1024)):(_l(),ma(mi,{key:1,name:"slide-fade",mode:"out-in"},{default:Lt(()=>[pi(il(J,{size:"small",class:"mb-2",embedded:""},{default:Lt(()=>[_t(C)[s]&&Array.isArray(_t(C)[s])&&_t(C)[s].length?(_l(),ma(Te,{key:0,list:_t(C)[s],onChange:M[2]||(M[2]=m=>{me.value=("uuidv4"in O?O.uuidv4:di(Al))()}),class:"w-full"},{default:Lt(()=>[(_l(!0),bo(ho,null,vr(_t(C)[s],(m,D)=>(_l(),ma(J,{key:D,size:"small",class:"mb-2"},{default:Lt(()=>[il(q,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Lt(({collapsed:T})=>[il(f,{align:"center",justify:"space-between"},{default:Lt(()=>[il(j,{secondary:"",type:"error",size:"small",onClick:()=>{_t(C)[s].splice(D,1),me.value=("uuidv4"in O?O.uuidv4:di(Al))()}},{icon:Lt(()=>[il(w,null,{default:Lt(()=>[il(E,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),il(w,null,{default:Lt(()=>[T?(_l(),ma(E,{key:0,icon:"fa-solid:chevron-left"})):(_l(),ma(E,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Lt(()=>[...M[4]||(M[4]=[ks("span",null,null,-1)])]),default:Lt(()=>[il(y,{name:"1"},{header:Lt(({collapsed:T})=>[ks("div",wm,[il(w,{size:"18",class:"cursor-move mr-2"},{default:Lt(()=>[il(E,{icon:"fa-solid:grip-lines"})]),_:1}),il(De,{size:"medium",type:"info"},{default:Lt(()=>[Ln(bn(String(D+1)),1)]),_:2},1024),T?(_l(),ma(ae,{key:0,"line-clamp":1,"expand-trigger":"click",class:"text-base max-w-[80%]"},{default:Lt(()=>[Ln(bn(_t(Cd)(_t(C)[s][D],_t(l),"")),1)]),_:2},1024)):_r("",!0)])]),default:Lt(()=>[(_l(),ma(ar,{key:`${_t(me)}-${s}-${D}-form-2`,modelValue:_t(C)[s][D],"onUpdate:modelValue":T=>_t(C)[s][D]=T,items:p.items,onUpdate:(T,F)=>{B.value=F}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list"])):(_l(),ma(X,{key:1,type:"info",class:"cursor-pointer","show-icon":"",onClick:M[3]||(M[3]=m=>U())},{default:Lt(()=>[Ln(bn(_t(a)("emptyCollectionInfoMessage")),1)]),_:1}))]),_:2},1536),[[ui,_t(W)===String(s)]])]),_:2},1024))],64))),128)),il(mi,{name:"slide-fade",mode:"out-in"},{default:Lt(()=>[pi(il(J,{size:"small",class:"mb-2",embedded:""},{default:Lt(()=>[_t(r)?.settingsStructure?(_l(!0),bo(ho,{key:0},vr(_t(d)(_t(r)?.settingsStructure),(p,s)=>(_l(),ma(J,{key:s,size:"small",class:"mb-2"},{header:Lt(()=>[ks("span",null,bn(_t(l)(p.title)),1)]),default:Lt(()=>[_t(c)[s]?(_l(),ma(ar,{key:`${_t(me)}-${s}-form-3`,modelValue:_t(c)[s],"onUpdate:modelValue":m=>_t(c)[s]=m,items:p.items,onUpdate:(m,D)=>{ve.value=D}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):_r("",!0)]),_:2},1024))),128)):(_l(),ma(X,{key:1,type:"warning","show-icon":""},{default:Lt(()=>[Ln(bn(_t(a)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[ui,_t(W)==="_settings"]])]),_:1})])]),_:1})],64))}}}),Cm=Wn($m,[["__scopeId","data-v-3fc1fc92"]]),Im=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["pages"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/pages",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Qd=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["pages"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/pages/${l.slug}`,data:Xt(l,["id","slug","hideSuccessMessage"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:(l,d)=>{d.hideSuccessMessage||o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Vm=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["pages"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:a})=>{o.start();const l=await e({method:"delete",url:`/pages/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Sm=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["sections"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/sections",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Wd=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["sections"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/sections/${l.slug}`,data:Xt(l,["id","slug"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Em=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Zi(),t=Je(),o=Qe();return Ya(async a=>{const l=await u({url:`/sections/${a.slug}/data-source-page`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},Um=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Zi(),t=Je(),o=Qe();return Ya(async a=>{const l=await u({url:`/sections/${a.slug}/duplicate`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},Tm=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Zi(),t=Je(),o=Qe();return Ya(async a=>{const l=await u({url:`/sections/${a.slug}/copy-data`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},{defineComponent:Mm}=await pe("vue"),{unref:ke,resolveComponent:Dm,createVNode:Ve,withCtx:Ne,toDisplayString:Dl,createTextVNode:ha,normalizeClass:ko,openBlock:vl,createBlock:tn,createCommentVNode:gr,vShow:Nm,withDirectives:zm,createElementVNode:Yl,normalizeStyle:Am,renderList:hr,Fragment:ws,createElementBlock:ln,withModifiers:gc,isRef:Jo}=await pe("vue"),Pm={class:"flex items-center justify-between ml-1 mr-2.5"},Lm={key:0},Bm={key:1},Fm={key:0},Om={class:"flex items-center"},qm={class:"text-base"},Rm={class:"absolute top-[-10px] right-[-10px] z-[10]"},jm={class:"flex items-center justify-center cursor-pointer gap-2"},Km={key:1},Ym={class:"mt-4"},Gm={key:2,class:"mt-2 text-xs"},Hm={class:"mb-8 mt-2"},Qm={class:"flex items-center justify-between"},Wm={class:"text-base"},Xm={class:"mb-8 mt-2"},Jm={class:"flex items-center justify-between"},Zm={class:"text-base"},ef={class:"my-8"},{ref:Vl,watch:tf,computed:wo,onMounted:lf,provide:Jn}=await pe("vue"),{storeToRefs:af}=await pe("pinia"),nf=Mm({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const n=oa(),{t}=Ie(),o=u,a=e,l=Vl(Al()),d=Vl({}),W=Vl({}),re=Vl({}),ne=Vl({}),B=Vl(),ve=Vl(),P=Vl(),V=Vl([]),c=Vl([]),C=Vl({}),me=Vl({}),{tr:r,pickByTheme:be,editKeysToCamelCase:R}=st(),{sectionsDataBackup:le,sectionsSettingsBackup:L}=af(Vd()),{data:S}=Ki(),{data:U,isPending:O}=ru(o.slug),{mutate:M,isPending:K}=Qd(),{mutate:f,isPending:E}=Vm(),{mutate:w,isPending:b}=Em(),{mutate:j,isPending:x}=Wd(),{mutate:X,isPending:J}=Um(),{mutate:De,isPending:ae}=Tm();tf(()=>U.value,ie=>{const oe=ue.cloneDeep(ie);if(oe&&Array.isArray(oe?.sections)){const Ae=oe.sections;if(Array.isArray(oe?.sectionsOrder)){V.value=[];for(const A of oe.sectionsOrder)if(A){const nt=Ae.find(Ml=>`${Ml.slug}__${Ml.pivot?.linkId}`===A);nt&&V.value.push(nt)}for(const A of Ae)V.value.map(nt=>`${nt.slug}__${nt.pivot?.linkId}`).includes(`${A.slug}__${A.pivot?.linkId}`)||V.value.push(A)}else V.value=ue.cloneDeep(Ae);if(Array.isArray(oe.sectionsDisabled))for(const A of oe.sections)A&&(C.value[`${A.slug}__${A.pivot?.linkId}`]=!oe.sectionsDisabled.includes(`${A.slug}__${A.pivot?.linkId}`));else for(const A of oe.sections)A&&(C.value[`${A.slug}__${A.pivot?.linkId}`]=!0)}me.value=ue.cloneDeep(C.value),c.value=ue.cloneDeep(V.value),l.value=Al()},{immediate:!0,deep:!0});const y=wo(()=>ue.isEqual(d.value,re.value)&&ue.isEqual(W.value,ne.value)&&ue.isEqual(V.value,c.value)&&ue.isEqual(C.value,me.value)),q=async()=>{const ie=B.value&&await B.value(),oe=ve.value&&await ve.value(),Ae=P.value&&await P.value(),A=async()=>{zt.value&&(j({slug:zt.value.slug,dataSourceLinkId:zt.value.pivot?.dataSourceLinkId,dataSourcePageId:zt.value.pivot?.dataSourcePageId,settings:W.value,data:d.value}),le.value[`${zt.value.slug}__${zt.value.pivot?.dataSourceLinkId}__${zt.value.pivot?.dataSourcePageId}`]=null,L.value[`${zt.value.slug}__${zt.value.pivot?.dataSourceLinkId}__${zt.value.pivot?.dataSourcePageId}`]=null),M({slug:o.slug,sectionsOrder:V.value.map(nt=>`${nt.slug}__${nt.pivot?.linkId}`),sectionsDisabled:Object.keys(C.value).filter(nt=>!C.value[nt]),hideSuccessMessage:!!zt.value})};!zt.value||(!B.value||ie)&&(!ve.value||oe)&&(!P.value||Ae)?await A():n.warning({title:t("confirm"),content:t("mandatoryFieldsNotFilledInConfirmation"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{await A()}})},Te=ie=>{const A=V.value.filter(nt=>nt.id===ie.id).map(nt=>nt.pivot?.createdAt||nt.pivot?.updatedAt||"").sort((nt,Ml)=>new Date(nt).getTime()-new Date(Ml).getTime()).indexOf(ie.pivot?.createdAt||ie.pivot?.updatedAt||"");return ie.pivot?.linkId=="default"?r(ie.title):r(ie.title)+" ("+(A+1)+")"},I=async ie=>{n.warning({title:t("confirm"),content:t("confirmDeletePage"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{ie.id&&f({id:ie.id,slug:ie.slug},{onSuccess:()=>{a("delete",U.value)}})}})},p=Vl([]),s=Vl(!1),m=Vl(""),D=()=>{p.value=[],m.value="",V.value.forEach(ie=>{ie.id&&p.value.push(ie.id)}),s.value=!0},T=ie=>{ie.id&&(p.value.includes(ie.id)?p.value=p.value.filter(oe=>oe!==ie.id):p.value.push(ie.id))},F=ie=>wo({get:()=>ie.id?p.value.includes(ie.id):!1,set:oe=>{ie.id&&(oe?p.value=p.value.filter(Ae=>Ae!==ie.id):p.value.includes(ie.id)||p.value.push(ie.id))}}),z=async()=>{M({slug:o.slug,sectionsIds:p.value})},ee=Vl(0),G=Vl([]),ut=Vl(!1),St=ie=>{ee.value=ie,G.value=[],m.value="",ut.value=!0},$e=ie=>{ie.id&&(G.value.includes(ie.id)?G.value=G.value.filter(oe=>oe!==ie.id):G.value.push(ie.id))},It=ie=>wo({get:()=>ie.id?G.value.includes(ie.id):!1,set:oe=>{ie.id&&(oe?G.value=G.value.filter(Ae=>Ae!==ie.id):G.value.includes(ie.id)||G.value.push(ie.id))}}),ze=async()=>{if(!G.value.length)return!1;const ie=V.value.map(A=>`${A.slug}__${A.pivot?.linkId}`),oe=G.value.map(A=>`${S.value?.find(Ml=>Ml.id===A)?.slug}__default`),Ae=[...ie.slice(0,ee.value),...oe,...ie.slice(ee.value)];M({slug:o.slug,sectionsIds:[...V.value.map(A=>A.id),...G.value],sectionsOrder:Ae})},lt=wo(()=>(S.value||[]).filter(ie=>!V.value.find(oe=>oe.id===ie.id))),Q=ie=>ie.title.toLowerCase().includes(m.value.toLowerCase())||ie.slug.toLowerCase().includes(m.value.toLowerCase()),h=wo(()=>m.value?S.value?.filter(Q):S.value),_=wo(()=>m.value?lt.value?.filter(Q):lt.value),pt=(ie,oe,Ae=!1)=>ie.map(A=>{const Ml=ie.filter(Ht=>Ht.id===A.id).map(Ht=>Ht.pivot?.createdAt||Ht.pivot?.updatedAt||"").sort((Ht,rl)=>new Date(Ht).getTime()-new Date(rl).getTime()),jl=Ml.indexOf(A.pivot?.createdAt||A.pivot?.updatedAt||""),Xa=U.value?.id==A.id?t("currentPage"):r(A.title),Ja=Ml.length>1?" - "+r(oe?.title):"",N=A.pivot?.linkId!="default"?" ("+(jl+1)+")":"";return{label:Xa+Ja+N,value:A.id+"__"+A.pivot?.linkId,disabled:Ae?U.value?.id==A.id&&oe?.id==A.pivot?.sectionId&&oe?.pivot?.dataSourceLinkId==A.pivot?.linkId:!1}}),Se=async(ie,oe)=>{const Ae=oe?.split("__")||[],A=Ae.length?Ae[0]:null,nt=Ae.length>1?Ae[1]:null;y.value?w({slug:ie.slug,data:{pageId:U.value?.id,linkId:ie.pivot?.linkId,sourcePageId:A,sourceLinkId:nt}}):n.warning({title:t("confirm"),content:t("confirmUpdateDataSourcePage"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:()=>w({slug:ie.slug,data:{pageId:U.value?.id,linkId:ie.pivot?.linkId,sourcePageId:A,sourceLinkId:nt}})})},ct=ie=>{n.warning({title:t("confirm"),content:t("confirmRemoveSection"),positiveText:t("remove"),negativeText:t("cancel"),onPositiveClick:()=>M({slug:o.slug,removedSectionsIds:[{id:ie.id,linkId:ie.pivot?.linkId}]})})},kt=ie=>{n.warning({title:t("confirm"),content:t("confirmDuplicateSection"),positiveText:t("duplicate"),negativeText:t("cancel"),onPositiveClick:()=>X({slug:ie.slug,data:{pageId:U.value?.id,linkId:ie.pivot?.linkId}})})},Y=ie=>{n.warning({title:t("confirm"),content:t("confirmFillInFakeData"),positiveText:t("generate"),negativeText:t("cancel"),onPositiveClick:()=>{const oe={};ue.forIn(R(ie?.dataStructure),(Ae,A)=>{if(A==="index"){oe[A]={};for(const nt of Ae)oe.index[nt.key]=cc(nt.type)}else{oe[A]=[];for(let nt=0;nt<3;nt++){const Ml={};for(const jl of Ae.items)Ml[jl.key]=cc(jl.type);oe[A].push(Ml)}}}),j({slug:ie.slug,dataSourceLinkId:ie.pivot?.dataSourceLinkId,dataSourcePageId:ie.pivot?.dataSourcePageId,data:oe})}})},ye=Vl(!1),xe=Vl(null),we=Vl(null),at=ie=>{xe.value=ie,we.value=null,ye.value=!0},ll=async()=>{if(!we.value)return!1;const ie=we.value.split("__")||[],oe=ie.length?ie[0]:null,Ae=ie.length>1?ie[1]:null;De({slug:xe.value?.slug,data:{fromPageId:oe,fromLinkId:Ae,toPageId:U.value?.id,toLinkId:xe.value?.pivot?.linkId}})},zt=Vl(null),Ke=ie=>{zt.value=ie},al=()=>{zt.value&&(zt.value=null)},{getSettingValue:Ot}=iu(),nl=()=>{const ie=`${cu(du())}/${(Ot("basePath")||"creopse")+Sd.VISUAL_EDITOR.PATH}?page=${U.value?.slug}`;uu(ie,[],{target:"_blank",method:"GET"})},Pl=wo(()=>K.value||E.value||x.value||b.value||J.value),et=Vl(!1);return lf(()=>{setTimeout(()=>{et.value=!0},300)}),Jn("refreshKey",l),Jn("formValueValidate1",B),Jn("formValueValidate2",ve),Jn("formValueValidate3",P),Jn("initialSettings",ne),Jn("initialData",re),Jn("settings",W),Jn("data",d),(ie,oe)=>{const Ae=_e,A=H,nt=Ye,Ml=Ha,jl=Tl,Xa=Ka,Ja=Iu,N=Ga,Ht=Cu,rl=Cl,_o=zd,i=fo,Qr=Da,ce=Wa,ua=_n,eu=fn,tu=Dm("Draggable"),Wr=Qa,tc=el,lc=on,Xr=Jl;return vl(),ln(ws,null,[Ve(Xa,{to:"#alt-action"},{default:Ne(()=>[Ve(jl,{align:"center"},{default:Ne(()=>[Ve(nt,{secondary:"",type:"error",disabled:ke(Pl),onClick:oe[0]||(oe[0]=dt=>ke(U)?I(ke(U)):null)},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:trash-can"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("delete")),1)]),_:1},8,["disabled"]),Ve(nt,{secondary:"",type:"info",disabled:ke(Pl),onClick:oe[1]||(oe[1]=dt=>ke(U)?u.openFormModal(ke(U)):null)},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:edit"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("editPage")),1)]),_:1},8,["disabled"]),Ve(Ml,{vertical:"",class:ko(ke(be)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ve(nt,{secondary:"",type:"primary",loading:ke(Pl),disabled:ke(y),onClick:oe[2]||(oe[2]=dt=>q())},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:save"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Yl("section",{class:ko(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",ke(et)?"opacity-100":"opacity-0"]),style:Am({visibility:ke(et)?"visible":"hidden"})},[Ve(rl,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:Ne(()=>[Yl("div",Pm,[Ve(Ht,null,{default:Ne(()=>[Ve(Ja,{onClick:oe[3]||(oe[3]=dt=>al())},{default:Ne(()=>[Ve(A,{class:"mr-1"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:document"})]),_:1}),ha(" "+Dl(ke(r)(ke(U)?.title)),1)]),_:1}),Ve(N,{appear:"",name:"slide-fade"},{default:Ne(()=>[ke(zt)?(vl(),tn(Ja,{key:0},{default:Ne(()=>[ha(Dl(Te(ke(zt))),1)]),_:1})):gr("",!0)]),_:1})]),_:1}),Ve(jl,null,{default:Ne(()=>[zm(Ve(nt,{onClick:oe[4]||(oe[4]=dt=>nl()),size:"small",secondary:"",type:"success"},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:view"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("openVisualEditor")),1)]),_:1},512),[[Nm,!1]]),ke(zt)?(vl(),tn(nt,{key:0,onClick:oe[5]||(oe[5]=dt=>al()),size:"small",secondary:"",type:"warning",title:ke(t)("exit")},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):gr("",!0)]),_:1})])]),_:1})],6),Yl("div",{class:ko(`${ke(zt)?"h-[90px]":"h-[50px]"}`)},null,2),ke(zt)?(vl(),tn(Cm,{key:0,slug:ke(zt)?.slug,"link-id":ke(zt)?.pivot?.dataSourceLinkId,"page-id":ke(zt)?.pivot?.dataSourcePageId},null,8,["slug","link-id","page-id"])):(vl(),tn(N,{key:1,appear:"",name:"slide-fade"},{default:Ne(()=>[Yl("section",null,[ke(O)?(vl(),ln("section",Lm,[(vl(),ln(ws,null,hr(7,dt=>Ve(_o,{key:dt,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(vl(),ln("section",Bm,[ke(U)&&Array.isArray(ke(U).sections)&&ke(U).sections.length?(vl(),ln("section",Fm,[Ve(tu,{list:ke(V)},{default:Ne(()=>[(vl(!0),ln(ws,null,hr(ke(V),(dt,Mn)=>(vl(),ln("section",{key:dt.id},[Ve(rl,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:Ne(()=>[Ve(eu,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ne(({collapsed:vn})=>[Ve(jl,{align:"center",justify:"space-between"},{default:Ne(()=>[Ve(nt,{secondary:"",type:"primary",size:"small",onClick:gc(hb=>Ke(dt),["stop"])},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:archive"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("dataAndSettings")),1)]),_:1},8,["onClick"]),Ve(A,null,{default:Ne(()=>[vn?(vl(),tn(Ae,{key:0,icon:"fa-solid:chevron-left"})):(vl(),tn(Ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ne(()=>[...oe[18]||(oe[18]=[Yl("span",null,null,-1)])]),default:Ne(()=>[Ve(ua,{name:"1"},{header:Ne(()=>[Yl("div",Om,[Ve(A,{size:"21",class:"cursor-move mr-4"},{default:Ne(()=>[Ve(Ae,{icon:"fa-solid:grip-lines"})]),_:1}),Ve(i,{checked:ke(C)[`${dt.slug}__${dt.pivot?.linkId}`],"onUpdate:checked":vn=>ke(C)[`${dt.slug}__${dt.pivot?.linkId}`]=vn,size:"small",class:"mr-4",onClick:oe[6]||(oe[6]=gc(()=>{},["stop"]))},{default:Ne(()=>[ha(Dl(ke(t)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),Ve(Qr,{size:"small",type:"info"},{default:Ne(()=>[ha(Dl(Mn+1),1)]),_:2},1024),Ve(Ml,{vertical:"",class:ko(ke(be)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Yl("span",qm,Dl(Te(dt)),1)])]),default:Ne(()=>[Ve(jl,null,{default:Ne(()=>[Ve(nt,{size:"small",type:"error",secondary:"",onClick:vn=>ct(dt)},{default:Ne(()=>[Ve(A,{size:"18",class:"mr-1"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:close"})]),_:1}),ha(" "+Dl(ke(t)("removeSection")),1)]),_:1},8,["onClick"]),Ve(nt,{size:"small",type:"warning",secondary:"",onClick:vn=>kt(dt)},{default:Ne(()=>[Ve(A,{size:"18",class:"mr-1"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:partition-same"})]),_:1}),ha(" "+Dl(ke(t)("duplicateSection")),1)]),_:1},8,["onClick"]),Ve(nt,{size:"small",type:"info",secondary:"",onClick:vn=>Y(dt)},{default:Ne(()=>[Ve(A,{size:"18",class:"mr-1"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:magic-wand"})]),_:1}),ha(" "+Dl(ke(t)("fillInFakeData")),1)]),_:1},8,["onClick"]),Ve(nt,{size:"small",type:"info",secondary:"",onClick:vn=>at(dt)},{default:Ne(()=>[Ve(A,{size:"18",class:"mr-1"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:copy"})]),_:1}),ha(" "+Dl(ke(t)("copyData")),1)]),_:1},8,["onClick"]),Ve(Ml,{vertical:"",class:ko(ke(be)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ve(jl,{align:"center"},{default:Ne(()=>[Yl("span",null,Dl(ke(t)("dataSource")),1),Ve(ce,{value:`${dt.pivot?.dataSourcePageId}__${dt.pivot?.dataSourceLinkId}`,options:pt(dt.pages||[],dt),placeholder:ke(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":vn=>Se(dt,vn)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),Mn<ke(V).length-1?(vl(),ln("div",{key:0,class:ko(`relative border-dashed border-y-2 h-1.5  ${ke(be)("!border-zinc-300","!border-zinc-600")}`)},[Yl("div",Rm,[Ve(nt,{size:"tiny",type:"info",title:ke(t)("insertSections"),onClick:vn=>St(Mn+1)},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):gr("",!0)]))),128))]),_:1},8,["list"]),Ve(rl,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:oe[7]||(oe[7]=dt=>D())},{default:Ne(()=>[Yl("div",jm,[Ve(A,{size:"20"},{default:Ne(()=>[Ve(Ae,{icon:"carbon:row"})]),_:1}),ha(" "+Dl(ke(t)("insertOrRemoveSections")),1)])]),_:1})])):(vl(),ln("section",Km,[Ve(rl,{size:"large",class:ko(`mb-2 !border-dashed !border-2 ${ke(be)("!border-zinc-300","!border-zinc-600")}`)},{default:Ne(()=>[Ve(Wr,{description:ke(t)("noSectionOnThisPage")},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:page-break"})]),_:1})]),extra:Ne(()=>[Yl("div",Ym,[Ve(nt,{size:"small",secondary:"",onClick:oe[8]||(oe[8]=dt=>D())},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:row"})]),_:1})]),default:Ne(()=>[ha(" "+Dl(ke(t)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),ke(U)?(vl(),ln("div",Gm,[ha(Dl(ke(t)("dataRetrievalSlug"))+": ",1),Yl("b",null,Dl(ke(U).slug),1)])):gr("",!0)]))])]),_:1})),Ve(Xr,{show:ke(s),"onUpdate:show":oe[10]||(oe[10]=dt=>Jo(s)?s.value=dt:null),loading:ke(K)||ke(b),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("insertOrRemoveSections"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:z,onNegativeClick:oe[11]||(oe[11]=dt=>s.value=!1)},{default:Ne(()=>[Yl("section",Hm,[Ve(tc,{value:ke(m),"onUpdate:value":oe[9]||(oe[9]=dt=>Jo(m)?m.value=dt:null),clearable:!0,placeholder:ke(t)("searchSection"),class:"mb-3"},{suffix:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"]),ke(h)?.length?(vl(),tn(lc,{key:0,style:{"max-height":"400px"}},{default:Ne(()=>[(vl(!0),ln(ws,null,hr(ke(h),dt=>(vl(),tn(rl,{key:dt.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Mn=>T(dt)},{default:Ne(()=>[Yl("div",Qm,[Yl("span",Wm,Dl(ke(r)(dt.title)),1),Ve(i,{checked:F(dt).value,"onUpdate:checked":Mn=>F(dt).value=Mn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(vl(),tn(Wr,{key:1,description:ke(m)?ke(t)("noSectionFound"):ke(t)("noSectionAvailable"),class:"my-10"},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ve(Xr,{show:ke(ut),"onUpdate:show":oe[13]||(oe[13]=dt=>Jo(ut)?ut.value=dt:null),loading:ke(K)||ke(b),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("insertSections"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:ze,onNegativeClick:oe[14]||(oe[14]=dt=>ut.value=!1)},{default:Ne(()=>[Yl("section",Xm,[Ve(tc,{value:ke(m),"onUpdate:value":oe[12]||(oe[12]=dt=>Jo(m)?m.value=dt:null),clearable:!0,placeholder:ke(t)("searchSection"),class:"mb-3"},{suffix:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"]),ke(_)?.length?(vl(),tn(lc,{key:0,style:{"max-height":"400px"}},{default:Ne(()=>[(vl(!0),ln(ws,null,hr(ke(_),dt=>(vl(),tn(rl,{key:dt.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Mn=>$e(dt)},{default:Ne(()=>[Yl("div",Jm,[Yl("span",Zm,Dl(ke(r)(dt.title)),1),Ve(i,{checked:It(dt).value,"onUpdate:checked":Mn=>It(dt).value=Mn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(vl(),tn(Wr,{key:1,description:ke(m)?ke(t)("noSectionFound"):ke(t)("noSectionAvailable"),class:"my-10"},{icon:Ne(()=>[Ve(A,null,{default:Ne(()=>[Ve(Ae,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ve(Xr,{show:ke(ye),"onUpdate:show":oe[16]||(oe[16]=dt=>Jo(ye)?ye.value=dt:null),loading:ke(K)||ke(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("copyData"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:ll,onNegativeClick:oe[17]||(oe[17]=dt=>ye.value=!1)},{default:Ne(()=>[Yl("section",ef,[Ve(jl,{align:"start",vertical:""},{default:Ne(()=>[Yl("span",null,Dl(ke(t)("dataWillBeCopiedFrom"))+":",1),Ve(ce,{value:ke(we),"onUpdate:value":oe[15]||(oe[15]=dt=>Jo(we)?we.value=dt:null),options:pt(ke(xe)?.pages||[],ke(xe),!0),placeholder:ke(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[300px]"},null,8,["value","options","placeholder"])]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),of=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu-item-groups"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/menu-item-groups",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},sf=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu-item-groups"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/menu-item-groups/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},rf=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["menu-item-groups"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu-item-groups/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:cf,defineComponent:df}=await pe("vue"),{unref:Qt,resolveComponent:Jb,createVNode:yl,toDisplayString:Zo,createTextVNode:xs,withCtx:Sl,renderList:uf,Fragment:hc,openBlock:$s,createElementBlock:bc,createElementVNode:_i,createBlock:vi,normalizeClass:pf,isRef:mf}=await pe("vue"),{ref:br}=await pe("vue"),ff={class:"flex items-center justify-between"},_f={class:"flex flex-col"},vf={class:"text-sm font-bold"},yf=df({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,tr:t}=st(),o=cf(u,"show"),{data:a,isPending:l}=Ed(),{mutate:d,isPending:W}=of(),{mutate:re,isPending:ne}=sf(),{mutate:B,isPending:ve}=rf(),P=oa(),V=br(!1),c=br(null),C=br(null),me=br({name:"",description:""}),r={name:[{required:!0,message:e("fillRequired")}]},be=L=>{c.value=ue.cloneDeep(L),me.value=ue.cloneDeep(L||{name:"",description:""}),V.value=!0},R=async()=>(C.value?.validate(async L=>{if(!L){const S={name:me.value.name,description:me.value.description};c.value?re({id:c.value.id,...S},{onSuccess:()=>{V.value=!1}}):d(S,{onSuccess:()=>{V.value=!1}})}}),!1),le=async L=>{P.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{L.id&&B({id:L.id})}})};return(L,S)=>{const U=_e,O=Ye,M=Tl,K=ir,f=H,E=Cl,w=on,b=Qa,j=mo,x=Jl,X=Na,J=Va,De=Ca;return $s(),bc(hc,null,[yl(x,{show:o.value,"onUpdate:show":S[2]||(S[2]=ae=>o.value=ae),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Qt(e)("menuItemGroups")},{"header-extra":Sl(()=>[yl(M,{align:"center"},{default:Sl(()=>[yl(O,{secondary:"",size:"small",type:"primary",disabled:Qt(l),onClick:S[0]||(S[0]=ae=>be(null))},{default:Sl(()=>[yl(U,{icon:"carbon:add-alt",class:"mr-1"}),xs(" "+Zo(Qt(e)("add")),1)]),_:1},8,["disabled"]),yl(O,{secondary:"",size:"small",type:"error",disabled:Qt(l),onClick:S[1]||(S[1]=ae=>o.value=!1)},{default:Sl(()=>[yl(U,{icon:"carbon:close",class:"mr-1"}),xs(" "+Zo(Qt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Sl(()=>[yl(j,{show:Qt(l)},{default:Sl(()=>[Qt(a)?.length?($s(),vi(w,{key:0,style:{"max-height":"400px"}},{default:Sl(()=>[($s(!0),bc(hc,null,uf(Qt(a),ae=>($s(),vi(E,{key:ae.id,embedded:"",size:"small",class:"mb-2"},{default:Sl(()=>[_i("div",ff,[_i("div",_f,[_i("span",vf,Zo(Qt(t)(ae.name)),1),yl(K,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:Sl(()=>[xs(Zo(Qt(t)(ae.description)),1)]),_:2},1024)]),yl(M,null,{default:Sl(()=>[yl(O,{size:"small",type:"warning",secondary:"",onClick:y=>be(ae)},{default:Sl(()=>[yl(f,null,{default:Sl(()=>[yl(U,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),yl(O,{size:"small",type:"error",secondary:"",onClick:y=>le(ae)},{default:Sl(()=>[yl(f,null,{default:Sl(()=>[yl(U,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):($s(),vi(E,{key:1,size:"large",class:pf(`mb-2 !border-dashed !border-2 ${Qt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Sl(()=>[yl(b,{description:Qt(e)("noMenuItemGroupAdded")},{icon:Sl(()=>[yl(f,null,{default:Sl(()=>[yl(U,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),yl(x,{show:Qt(V),"onUpdate:show":S[5]||(S[5]=ae=>mf(V)?V.value=ae:null),loading:Qt(W)||Qt(ne)||Qt(ve),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Qt(c)?Qt(e)("editMenuItemGroup"):Qt(e)("addMenuItemGroup"),"positive-text":Qt(e)("validate"),"negative-text":Qt(e)("cancel"),onPositiveClick:R,onNegativeClick:S[6]||(S[6]=ae=>V.value=!1)},{default:Sl(()=>[yl(De,{ref_key:"formRef",ref:C,model:Qt(me),rules:r,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Sl(()=>[yl(J,{"show-label":!1,path:"name"},{default:Sl(()=>[yl(X,{modelValue:Qt(me).name,"onUpdate:modelValue":S[3]||(S[3]=ae=>Qt(me).name=ae),placeholder:Qt(e)("name"),class:"w-full",sync:""},{label:Sl(()=>[xs(Zo(Qt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),yl(J,{"show-label":!1,path:"description"},{default:Sl(()=>[yl(X,{modelValue:Qt(me).description,"onUpdate:modelValue":S[4]||(S[4]=ae=>Qt(me).description=ae),placeholder:Qt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Sl(()=>[xs(Zo(Qt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:kc,mergeModels:gf,defineComponent:hf}=await pe("vue"),{unref:ol,resolveComponent:Zb,createVNode:Fn,withCtx:xo,isRef:bf,Fragment:kf,openBlock:Cs,createElementBlock:wf,createCommentVNode:kr,createBlock:wr}=await pe("vue"),{ref:Is,computed:Vs,onMounted:xf,h:Ss}=await pe("vue"),$f=hf({__name:"ContentFormItems",props:{"content-type":{default:na.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:gf(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:n}=Ie(),{tr:t,mergeArrays:o}=st(),{contentTypes:a,extractItemTitle:l}=ms(),{data:d}=po(),W=e,re=kc(u,"content-type"),ne=kc(u,"content-id"),B=Is(),ve=Is([]),P=Is([]),{mutateAsync:V,isPending:c}=ec(),{mutateAsync:C,isPending:me}=Hd(),r=Vs(()=>c.value||me.value),be=async(ae,y)=>{if(!ae.length){P.value=[];return}P.value=await V({query:ae,contentModelId:y})},R=Vs(()=>o(ve.value,P.value,"id")),le=Is([]),L=Is([]),{mutateAsync:S,isPending:U}=Od(),{mutateAsync:O,isPending:M}=qd(),K=Vs(()=>M.value||U.value),f=async ae=>{if(!ae.length){L.value=[];return}L.value=await O(ae)},E=Vs(()=>o(le.value,L.value,"id")),{categories:w}=ac(),{tags:b}=ac();xf(async()=>{const ae=await S({ids:ne.value?[ne.value]:[]});ae&&(le.value=o(le.value,ae,"id"));const y=await C({ids:ne.value?[ne.value]:[]});y&&(ve.value=o(ve.value,y,"id"),B.value=ve.value.find(q=>q.id===ne.value)?.contentModelId)});const j=ae=>Ss("span",{},{default:()=>`${t(ae.name)}`}),x=ae=>Ss("span",{},{default:()=>`${t(ae.title)}`}),X=ae=>Ss("span",{},{default:()=>`${t(ae.name)}`}),J=ae=>Ss("span",{},{default:()=>t(ae.title)}),De=ae=>Vs(()=>Ss("span",{},{default:()=>l(ae,d.value?.find(y=>y.id===ae.contentModelId))}));return(ae,y)=>{const q=Wa,Te=Qn,I=Ia;return Cs(),wr(I,{"x-gap":"12",span:24},{default:xo(()=>[Fn(Te,{span:8,label:ol(n)("contentType"),path:"contentType"},{default:xo(()=>[Fn(q,{value:re.value,"onUpdate:value":[y[0]||(y[0]=p=>re.value=p),y[1]||(y[1]=()=>ne.value=void 0)],options:ol(a)||[],placeholder:ol(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),re.value===ol(na).CONTENT_MODEL?(Cs(),wf(kf,{key:0},[Fn(Te,{span:8,label:ol(n)("contentModel")},{default:xo(()=>[Fn(q,{value:ol(B),"onUpdate:value":y[2]||(y[2]=p=>bf(B)?B.value=p:null),options:ol(d),placeholder:ol(n)("search"),"render-label":J,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Fn(Te,{span:8,label:ol(n)("item"),path:"contentId"},{default:xo(()=>[Fn(q,{value:ne.value,"onUpdate:value":[y[3]||(y[3]=p=>ne.value=p),y[5]||(y[5]=(p,s)=>W("update",p,s,re.value))],options:ol(R)||[],placeholder:ol(n)("search"),"render-label":p=>De(p).value,loading:ol(r),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:y[4]||(y[4]=p=>be(p,ol(B)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):kr("",!0),re.value===ol(na).NEWS_ARTICLE?(Cs(),wr(Te,{key:1,span:16,label:ol(n)("newsArticle"),path:"contentId"},{default:xo(()=>[Fn(q,{value:ne.value,"onUpdate:value":[y[6]||(y[6]=p=>ne.value=p),y[7]||(y[7]=(p,s)=>W("update",p,s,re.value))],options:ol(E)||[],placeholder:ol(n)("search"),"render-label":x,loading:ol(K),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):kr("",!0),re.value===ol(na).NEWS_CATEGORY?(Cs(),wr(Te,{key:2,span:16,label:ol(n)("newsCategory"),path:"contentId"},{default:xo(()=>[Fn(q,{value:ne.value,"onUpdate:value":[y[8]||(y[8]=p=>ne.value=p),y[9]||(y[9]=(p,s)=>W("update",p,s,re.value))],options:ol(w)||[],placeholder:ol(n)("select"),"render-label":j,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):kr("",!0),re.value===ol(na).NEWS_TAG?(Cs(),wr(Te,{key:3,span:16,label:ol(n)("newsTag"),path:"contentId"},{default:xo(()=>[Fn(q,{value:ne.value,"onUpdate:value":[y[10]||(y[10]=p=>ne.value=p),y[11]||(y[11]=(p,s)=>W("update",p,s,re.value))],options:ol(b)||[],placeholder:ol(n)("select"),"render-label":X,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):kr("",!0)]),_:1})}}}),Cf=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu","items"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/menu/items",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},If=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu","items"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/menu/items/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Vf=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["menu","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu/items/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Sf=()=>{const{request:u}=Ge(),e=Je();return Ya(async n=>{const t=await u({method:"put",url:"/menu/items/position",data:n});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:Ef,defineComponent:Uf}=await pe("vue"),{unref:k,resolveComponent:yi,createVNode:se,withCtx:Ce,toDisplayString:gl,createTextVNode:ba,openBlock:cl,createBlock:On,createCommentVNode:$o,isRef:xr,renderList:$r,Fragment:kn,createElementBlock:ka,normalizeClass:Co,withModifiers:Es,createElementVNode:Zl}=await pe("vue"),Tf={key:0},Mf={class:"flex items-center"},Df={class:"flex flex-col"},Nf={class:"text-sm font-bold"},zf={key:0,class:"text-sm"},Af={class:"text-xs font-normal"},Pf={class:"text-xs my-1"},Lf={class:"flex items-center"},Bf={class:"flex flex-col"},Ff={class:"text-sm font-bold"},Of={class:"text-xs font-normal"},qf={key:0,class:"mt-4"},Rf={class:"my-8"},jf={class:"flex items-center justify-between"},Kf={class:"flex flex-col"},Yf={class:"text-sm font-bold"},Gf={class:"text-xs font-normal"},Hf={class:"flex items-center"},Qf={key:0},Wf={key:1},Xf={key:2},{storeToRefs:Jf}=await pe("pinia"),{ref:La,watch:Zf,computed:Us,h:wc}=await pe("vue"),e_=Uf({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:n}=Ie(),{extractItemTitle:t}=ms(),{tr:o,pickByTheme:a}=st(),{isLightTheme:l}=Jf(Ro()),{data:d,isPending:W}=Yi(),{data:re}=po(),{data:ne,isPending:B}=Ed(),{data:ve,isFetching:P,refetch:V}=Id({enabled:!1}),{mutate:c,isPending:C}=Cf(),{mutate:me,isPending:r}=If(),{mutate:be,isPending:R}=Vf(),{mutate:le}=Sf(),L=Qe(),S=oa(),U=Ef(u,"modelValue"),O=La([]),M=La([]),K=La(""),f=La();let E=La(!0);Zf(()=>P.value,Q=>{Q||(E.value=!1)});const w=Us(()=>{if(!K.value)return O.value;const Q=O.value.filter(h=>h.title.toLowerCase().includes(K.value.toLowerCase())||h.description?.toLowerCase().includes(K.value.toLowerCase())||h.children.some(_=>_.title.toLowerCase().includes(K.value.toLowerCase())||_.description?.toLowerCase().includes(K.value.toLowerCase())));return f.value&&f.value.focus(),Q}),b=async()=>{await V(),O.value=ve.value?.filter(Q=>!Q.parentId&&Q.menuId===U.value?.id)||[];for(let Q=0;Q<O.value.length;Q++)O.value[Q].children=ve.value?.filter(h=>h.parentId===O.value[Q].id&&h.menuId===U.value?.id)||[];M.value=ve.value?.filter(Q=>Q.menuId!==U.value?.id)||[]};b();const j=La(24),x=La(1),X=Q=>{j.value=Q},J={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:ya.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:na.CONTENT_MODEL,contentId:void 0},De=La(null),ae=La(!1),y=La(!1),q=La(null),Te=La(null),I=La(J),p=Us(()=>{const Q={title:[{required:!0,message:e("fillRequired")}]};return I.value.targetType===ya.PAGE_LINK?(Q.pageId=[{required:!0,message:e("fillRequired")}],Q.path=[{required:!0,message:e("fillRequired")}]):I.value.targetType===ya.EXTERNAL_LINK?Q.url=[{required:!0,message:e("fillRequired")}]:I.value.targetType===ya.CONTENT_LINK&&(Q.contentId=[{required:!0,message:e("fillRequired")}],Q.contentType=[{required:!0,message:e("fillRequired")}]),Q}),s=Us(()=>d.value?.find(Q=>Q.id==I.value.pageId)?.slug||""),{data:m,isPending:D}=Pu({queryKey:["pages",s],queryFn:async()=>{const{request:Q}=Ge(),h=await Q({url:`/pages/${s.value}`});return h.success&&h.result.data?h.result.data:null},enabled:Us(()=>!!s.value)}),T=Us(()=>m.value?.sections?.map(Q=>{const pt=(m.value?.sections?.filter(Se=>Se.id===Q.id)?.map(Se=>Se.pivot?.createdAt||Se.pivot?.updatedAt||"")?.sort((Se,ct)=>new Date(Se).getTime()-new Date(ct).getTime())||[]).indexOf(Q.pivot?.createdAt||Q.pivot?.updatedAt||"");return{label:Q.pivot?.linkId=="default"?o(Q.title):o(Q.title)+" ("+(pt+1)+")",value:Q.slug+"__"+Q.pivot?.linkId}})||[]),F=(Q,h=null)=>{q.value=ue.cloneDeep(Q),De.value=h,Q?(I.value=ue.cloneDeep(Q),ae.value=!0):(I.value=ue.cloneDeep(J),M.value.length>0?y.value=!0:ae.value=!0)},z=async Q=>{S.warning({title:e("confirm"),content:Q.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{Q.id&&be({id:Q.id})}})},ee=async Q=>{c({title:Q.title,path:Q.path,url:Q.url,description:Q.description,isActive:!0,isVisible:!0,color:Q.color,icon:Q.icon,position:Q.position,targetType:Q.targetType,parentId:De.value,menuId:U.value?.id,sectionKey:Q.sectionKey,menuItemGroupId:Q.menuItemGroupId,pageId:Q.pageId},{onSuccess(){b(),y.value=!1}})},G=async()=>(Te.value?.validate(async Q=>{if(!Q){const h={title:I.value.title,path:I.value.path,url:I.value.url,description:I.value.description,isActive:I.value.isActive,isVisible:I.value.isVisible,color:I.value.color,icon:I.value.icon,position:I.value.position,targetType:I.value.targetType,parentId:De.value,menuId:U.value?.id,sectionKey:I.value.sectionKey,menuItemGroupId:I.value.menuItemGroupId,pageId:I.value.pageId,contentId:I.value.contentId,contentType:I.value.contentType};q.value?q.value.title!==I.value.title&&O.value.findIndex(_=>_.title==I.value.title)>-1?L.error(e("sameMenuItemTitleMessage")):me({id:q.value.id,...h},{onSuccess(){b()}}):O.value.findIndex(_=>_.title==I.value.title)>-1?L.error(e("sameMenuItemTitleMessage")):c(h,{onSuccess(){b()}}),ae.value=!1}}),!1),ut=async(Q,h)=>{le({items:h},{onSuccess(){b()}})},St=Q=>wc("span",{},{default:()=>o(Q.title)}),$e=Q=>wc("span",{},{default:()=>o(Q.name)}),It=Q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(Q),ze=Q=>{if(Q.targetType==ya.EXTERNAL_LINK)return Q.url;if(Q.targetType==ya.PAGE_LINK)return Q.path;if(Q.targetType==ya.CONTENT_LINK)switch(Q.contentType){case na.CONTENT_MODEL:return e("contentModel");case na.NEWS_CATEGORY:return e("newsCategory");case na.NEWS_ARTICLE:return e("newsArticle");case na.NEWS_TAG:return e("newsTag")}return""},lt=async(Q,h,_)=>{if(!o(I.value.title))switch(_){case na.CONTENT_MODEL:I.value.title=t(h,re.value?.find(pt=>pt.id===h.contentModelId));break;case na.NEWS_ARTICLE:I.value.title=h.title;break;case na.NEWS_CATEGORY:case na.NEWS_TAG:I.value.title=h.name;break}};return(Q,h)=>{const _=_e,pt=Tl,Se=Ka,ct=Ad,kt=zd,Y=Da,ye=Ha,xe=Cl,we=yi("Draggable"),at=_n,ll=fn,zt=jo,Ke=Qa,al=Ga,Ot=on,nl=Jl,Pl=Na,et=Va,ie=Yr,oe=Qn,Ae=sr,A=or,nt=Ia,Ml=yi("IconPicker"),jl=yi("color-picker"),Xa=Wa,Ja=Ca;return cl(),ka(kn,null,[se(Se,{to:"#alt-action"},{default:Ce(()=>[se(pt,{align:"center"},{default:Ce(()=>[k(w).length?(cl(),On(k(Ye),{key:0,secondary:"",type:"primary",onClick:h[0]||(h[0]=N=>F(null))},{icon:Ce(()=>[se(k(H),{size:"18"},{default:Ce(()=>[se(_,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[ba(" "+gl(k(e)("addMenuItem")),1)]),_:1})):$o("",!0)]),_:1})]),_:1}),se(ct,{class:"mt-2 mb-5",onBack:h[2]||(h[2]=N=>U.value=null)},{title:Ce(()=>[ba(gl(k(o)(U.value?.title)),1)]),back:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Ce(()=>[se(k(el),{ref_key:"searchInputRef",ref:f,value:k(K),"onUpdate:value":h[1]||(h[1]=N=>xr(K)?K.value=N:null),clearable:!0,placeholder:k(e)("search")},{suffix:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),se(al,{appear:"",name:"slide-fade"},{default:Ce(()=>[Zl("section",null,[k(E)?(cl(),ka("section",Tf,[(cl(),ka(kn,null,$r(7,N=>se(kt,{key:N,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(cl(),ka(kn,{key:1},[k(w)&&k(w).length?(cl(),ka(kn,{key:0},[se(we,{list:k(O),onChange:h[3]||(h[3]=N=>ut(N,k(O)))},{default:Ce(()=>[(cl(!0),ka(kn,null,$r(k(w).slice((k(x)-1)*k(j),k(x)*k(j)),N=>(cl(),On(xe,{key:N.id,embedded:"",size:"small",class:"mb-1"},{default:Ce(()=>[se(ll,{"default-expanded-names":N.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":Ce(({collapsed:Ht})=>[se(pt,{align:"center"},{default:Ce(()=>[se(Y,{size:"small",bordered:!1,type:N.isActive?"success":"error"},{default:Ce(()=>[ba(gl(N.isActive?k(e)("published"):k(e)("unpublished")),1)]),_:2},1032,["type"]),se(Y,{size:"small",bordered:!1,type:N.isVisible?"info":"warning"},{default:Ce(()=>[ba(gl(N.isVisible?k(e)("visible"):k(e)("hidden")),1)]),_:2},1032,["type"]),se(ye,{vertical:"",class:Co(["!mx-0",k(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),se(k(Ye),{size:"small",type:"primary",secondary:"",onClick:Es(rl=>F(N),["stop"])},{default:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),se(k(Ye),{size:"small",type:"error",secondary:"",onClick:Es(rl=>z(N),["stop"])},{default:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),se(k(Ye),{size:"small",type:"info",secondary:"",onClick:Es(rl=>F(null,N.id),["stop"])},{icon:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:category"})]),_:1})]),default:Ce(()=>[ba(" "+gl(k(e)("subMenuItem"))+" ",1),se(Y,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:Ce(()=>[ba(gl(N.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),h[27]||(h[27]=Zl("div",{class:"w-6"},null,-1)),se(k(H),null,{default:Ce(()=>[Ht?(cl(),On(_,{key:0,icon:"fa-solid:chevron-left"})):(cl(),On(_,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ce(()=>[...h[28]||(h[28]=[Zl("span",null,null,-1)])]),default:Ce(()=>[se(at,{name:"1"},{header:Ce(()=>[Zl("div",Mf,[se(k(H),{size:"21",class:"cursor-move mr-4"},{default:Ce(()=>[se(_,{icon:"fa-solid:grip-lines"})]),_:1}),se(ye,{vertical:"",class:Co(k(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Zl("div",Df,[Zl("div",null,[Zl("span",Nf,gl(k(o)(N.title)),1),N.group?(cl(),ka("span",zf," Â ("+gl(k(o)(N.group?.name))+") ",1)):$o("",!0)]),Zl("small",Af,gl(ze(N)),1)])])]),default:Ce(()=>[N.description?(cl(),ka(kn,{key:0},[se(ye,{class:Co([k(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Zl("div",Pf,gl(k(o)(N.description)),1)],64)):$o("",!0),N.children.length?(cl(),ka(kn,{key:1},[se(ye,{class:Co([k(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),se(we,{list:N.children,onChange:Ht=>ut(Ht,N.children)},{default:Ce(()=>[(cl(!0),ka(kn,null,$r(N.children,Ht=>(cl(),On(xe,{key:Ht.id,size:"small",class:"mb-1"},{header:Ce(()=>[Zl("div",Lf,[se(k(H),{size:"21",class:"cursor-move mr-4"},{default:Ce(()=>[se(_,{icon:"fa-solid:grip-lines"})]),_:1}),se(ye,{vertical:"",class:Co(k(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Zl("div",Bf,[Zl("span",Ff,gl(k(o)(Ht.title)),1),Zl("small",Of,gl(ze(Ht)),1)])])]),"header-extra":Ce(()=>[se(pt,{align:"center"},{default:Ce(()=>[se(Y,{size:"small",bordered:!1,type:Ht.isActive?"success":"error"},{default:Ce(()=>[ba(gl(Ht.isActive?k(e)("published"):k(e)("unpublished")),1)]),_:2},1032,["type"]),se(Y,{size:"small",bordered:!1,type:Ht.isVisible?"info":"warning"},{default:Ce(()=>[ba(gl(Ht.isVisible?k(e)("visible"):k(e)("hidden")),1)]),_:2},1032,["type"]),se(ye,{vertical:"",class:Co(["!mx-0",k(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),se(k(Ye),{size:"small",type:"primary",secondary:"",onClick:Es(rl=>F(Ht,N.id),["stop"])},{default:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),se(k(Ye),{size:"small",type:"error",secondary:"",onClick:Es(rl=>z(Ht),["stop"])},{default:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):$o("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),se(zt,{page:k(x),"onUpdate:page":h[4]||(h[4]=N=>xr(x)?x.value=N:null),class:"mt-5 justify-end","show-size-picker":"","page-size":k(j),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(k(O).length/k(j)),"onUpdate:pageSize":X},{prefix:Ce(()=>[ba(gl(`${k(O).length} ${k(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(cl(),On(xe,{key:1,size:"large",class:Co(`mb-2 !border-dashed !border-2 ${k(a)("!border-zinc-300","!border-zinc-600")}`)},{default:Ce(()=>[se(Ke,{description:k(e)("noMenuItemAvailable")},{icon:Ce(()=>[se(k(H),null,{default:Ce(()=>[k(K)?(cl(),On(_,{key:0,icon:"carbon:search"})):(cl(),On(_,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:Ce(()=>[k(K)?$o("",!0):(cl(),ka("div",qf,[se(k(Ye),{size:"small",secondary:"",onClick:h[5]||(h[5]=N=>F(null))},{icon:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[ba(" "+gl(k(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),se(nl,{show:k(y),"onUpdate:show":h[6]||(h[6]=N=>xr(y)?y.value=N:null),loading:k(C)||k(r)||k(R),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:k(e)("menuItems"),"positive-text":k(De)?k(e)("createSubMenuItem"):k(e)("createMenuItem"),"negative-text":k(e)("cancel"),onPositiveClick:h[7]||(h[7]=()=>{y.value=!1,ae.value=!0}),onNegativeClick:h[8]||(h[8]=N=>y.value=!1)},{default:Ce(()=>[Zl("section",Rf,[se(Ot,{style:{"max-height":"400px"}},{default:Ce(()=>[(cl(!0),ka(kn,null,$r(k(M),N=>(cl(),On(xe,{key:N.id,embedded:"",size:"small",class:"mb-2"},{default:Ce(()=>[Zl("div",jf,[Zl("div",Kf,[Zl("span",Yf,gl(k(o)(N.title)),1),Zl("small",Gf,gl(ze(N)),1)]),se(k(Ye),{size:"small",type:"primary",secondary:"",onClick:Ht=>ee(N)},{icon:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[ba(" "+gl(k(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),se(nl,{show:k(ae),"onUpdate:show":h[25]||(h[25]=N=>xr(ae)?ae.value=N:null),loading:k(C)||k(r)||k(R),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:k(q)?k(De)?k(e)("editSubMenuItem"):k(e)("editMenuItem"):k(De)?k(M).length?k(e)("createSubMenuItem"):k(e)("addSubMenuItem"):k(M).length?k(e)("createMenuItem"):k(e)("addMenuItem"),"positive-text":k(e)("validate"),"negative-text":k(e)("cancel"),onPositiveClick:G,onNegativeClick:h[26]||(h[26]=N=>ae.value=!1)},{default:Ce(()=>[se(Ja,{ref_key:"formRef",ref:Te,class:"mt-5",model:k(I),rules:k(p),"show-require-mark":!1,size:"medium"},{default:Ce(()=>[se(et,{"show-label":!1,path:"title"},{default:Ce(()=>[se(Pl,{modelValue:k(I).title,"onUpdate:modelValue":h[9]||(h[9]=N=>k(I).title=N),placeholder:k(e)("title"),class:"w-full",sync:""},{label:Ce(()=>[ba(gl(k(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),se(et,{"show-label":!1,path:"description"},{default:Ce(()=>[se(Pl,{modelValue:k(I).description,"onUpdate:modelValue":h[10]||(h[10]=N=>k(I).description=N),placeholder:k(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Ce(()=>[ba(gl(k(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),se(nt,{"x-gap":"12",span:24},{default:Ce(()=>[se(oe,{span:5,label:k(e)("position"),path:"position"},{default:Ce(()=>[se(ie,{value:k(I).position,"onUpdate:value":h[11]||(h[11]=N=>k(I).position=N),placeholder:k(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),se(oe,{span:10,label:k(e)("publication"),path:"isActive"},{default:Ce(()=>[se(A,{value:k(I).isActive,"onUpdate:value":h[12]||(h[12]=N=>k(I).isActive=N),name:"isActive",class:"w-full"},{default:Ce(()=>[se(Ae,{value:!1,label:k(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),se(Ae,{value:!0,label:k(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),se(oe,{span:9,label:k(e)("visibility"),path:"isVisible"},{default:Ce(()=>[se(A,{value:k(I).isVisible,"onUpdate:value":h[13]||(h[13]=N=>k(I).isVisible=N),name:"isVisible",class:"w-full"},{default:Ce(()=>[se(Ae,{value:!1,label:k(e)("hidden"),class:"w-[50%]"},null,8,["label"]),se(Ae,{value:!0,label:k(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),se(ye,{class:"!my-2"}),se(nt,{"x-gap":"12",span:24},{default:Ce(()=>[se(oe,{span:10,label:k(e)("icon"),path:"icon"},{default:Ce(()=>[se(Ml,{modelValue:k(I).icon,"onUpdate:modelValue":h[14]||(h[14]=N=>k(I).icon=N),placeholder:k(e)("icon"),"icons-list-placeholder":k(e)("enterIconNameInSearchBar"),"search-placeholder":k(e)("search"),"empty-text":k(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),se(oe,{span:4,label:k(e)("color"),path:"color"},{default:Ce(()=>[Zl("div",Hf,[k(I).color?(cl(),ka(kn,{key:0},[se(k(Ye),{text:"",type:"error",style:{"font-size":"21px"},onClick:h[15]||(h[15]=N=>k(I).color="")},{default:Ce(()=>[se(k(H),null,{default:Ce(()=>[se(_,{icon:"carbon:trash-can"})]),_:1})]),_:1}),se(ye,{vertical:""})],64)):$o("",!0),se(jl,{"pure-color":k(I).color,"onUpdate:pureColor":h[16]||(h[16]=N=>k(I).color=N),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:k(l)?"white":"black",lang:k(n)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),se(oe,{span:10,label:k(e)("group"),path:"menuItemGroupId"},{default:Ce(()=>[se(Xa,{value:k(I).menuItemGroupId,"onUpdate:value":h[17]||(h[17]=N=>k(I).menuItemGroupId=N),options:k(ne),placeholder:k(e)("group"),"render-label":$e,loading:k(B),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),se(oe,{span:24,label:k(e)("targetType"),path:"targetType"},{default:Ce(()=>[se(A,{value:k(I).targetType,"onUpdate:value":h[18]||(h[18]=N=>k(I).targetType=N),class:"w-full",size:"small"},{default:Ce(()=>[se(Ae,{value:k(ya).PAGE_LINK,class:"w-[33.33%]"},{default:Ce(()=>[ba(gl(k(e)("pageLink")),1)]),_:1},8,["value"]),se(Ae,{value:k(ya).CONTENT_LINK,class:"w-[33.33%]"},{default:Ce(()=>[ba(gl(k(e)("contentLink")),1)]),_:1},8,["value"]),se(Ae,{value:k(ya).EXTERNAL_LINK,class:"w-[33.33%]"},{default:Ce(()=>[ba(gl(k(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),se(al,{appear:"",name:"slide-fade"},{default:Ce(()=>[k(I).targetType===k(ya).PAGE_LINK?(cl(),ka("section",Qf,[se(nt,{"x-gap":"12",span:24},{default:Ce(()=>[se(oe,{span:12,label:k(e)("page"),path:"pageId"},{default:Ce(()=>[se(Xa,{value:k(I).pageId,"onUpdate:value":h[19]||(h[19]=N=>k(I).pageId=N),options:k(d)||[],placeholder:k(e)("selectPage"),"render-label":St,loading:k(W),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),se(oe,{span:12,label:k(e)("section"),path:"sectionKey"},{default:Ce(()=>[se(Xa,{value:k(I).sectionKey,"onUpdate:value":h[20]||(h[20]=N=>k(I).sectionKey=N),options:k(T),placeholder:k(e)("selectSection"),disabled:!k(I).pageId,loading:k(D),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),se(et,{label:k(e)("path"),path:"path"},{default:Ce(()=>[se(k(el),{value:k(I).path,"onUpdate:value":h[21]||(h[21]=N=>k(I).path=N),placeholder:k(e)("path"),"allow-input":It,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):k(I).targetType===k(ya).CONTENT_LINK?(cl(),ka("section",Wf,[se($f,{"content-type":k(I).contentType,"onUpdate:contentType":h[22]||(h[22]=N=>k(I).contentType=N),"content-id":k(I).contentId,"onUpdate:contentId":h[23]||(h[23]=N=>k(I).contentId=N),onUpdate:lt},null,8,["content-type","content-id"])])):k(I).targetType===k(ya).EXTERNAL_LINK?(cl(),ka("section",Xf,[se(et,{label:k(e)("url"),path:"url"},{default:Ce(()=>[se(k(el),{value:k(I).url,"onUpdate:value":h[24]||(h[24]=N=>k(I).url=N),placeholder:k(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):$o("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),t_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu-locations"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/menu-locations",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},l_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menu-locations"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/menu-locations/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},a_=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["menu-locations"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu-locations/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:n_,defineComponent:o_}=await pe("vue"),{unref:Wt,resolveComponent:ek,createVNode:sl,withCtx:hl,toDisplayString:Ts,createTextVNode:Cr,renderList:s_,Fragment:xc,openBlock:Ms,createElementBlock:$c,createElementVNode:gi,createBlock:hi,normalizeClass:r_,isRef:i_}=await pe("vue"),{ref:Ir}=await pe("vue"),c_={class:"flex items-center justify-between"},d_={class:"flex flex-col"},u_={class:"text-sm font-bold"},p_=o_({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,tr:t,formatKey:o}=st(),a=n_(u,"show"),{data:l,isPending:d}=Ud(),{mutate:W,isPending:re}=t_(),{mutate:ne,isPending:B}=l_(),{mutate:ve,isPending:P}=a_(),V=oa(),c=Ir(!1),C=Ir(null),me=Ir(null),r=Ir({name:"",description:""}),be={name:[{required:!0,message:e("fillRequired")}]},R=S=>{C.value=ue.cloneDeep(S),r.value=ue.cloneDeep(S||{name:"",description:""}),c.value=!0},le=async()=>(me.value?.validate(async S=>{if(!S){const U={name:r.value.name,description:r.value.description};C.value?ne({id:C.value.id,data:U},{onSuccess:()=>{c.value=!1}}):W(U,{onSuccess:()=>{c.value=!1}})}}),!1),L=async S=>{V.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{S.id&&ve({id:S.id})}})};return(S,U)=>{const O=_e,M=H,K=Ye,f=Tl,E=ir,w=Cl,b=on,j=Qa,x=mo,X=Jl,J=el,De=Va,ae=Na,y=Ca;return Ms(),$c(xc,null,[sl(X,{show:a.value,"onUpdate:show":U[2]||(U[2]=q=>a.value=q),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Wt(e)("menuLocations")},{"header-extra":hl(()=>[sl(f,{align:"center"},{default:hl(()=>[sl(K,{secondary:"",size:"small",type:"primary",disabled:Wt(d),onClick:U[0]||(U[0]=q=>R(null))},{default:hl(()=>[sl(M,{class:"mr-1"},{default:hl(()=>[sl(O,{icon:"carbon:add-alt"})]),_:1}),Cr(" "+Ts(Wt(e)("add")),1)]),_:1},8,["disabled"]),sl(K,{secondary:"",size:"small",type:"error",disabled:Wt(d),onClick:U[1]||(U[1]=q=>a.value=!1)},{default:hl(()=>[sl(M,{class:"mr-1"},{default:hl(()=>[sl(O,{icon:"carbon:close"})]),_:1}),Cr(" "+Ts(Wt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:hl(()=>[sl(x,{show:Wt(d)},{default:hl(()=>[Wt(l)?.length?(Ms(),hi(b,{key:0,style:{"max-height":"400px"}},{default:hl(()=>[(Ms(!0),$c(xc,null,s_(Wt(l),q=>(Ms(),hi(w,{key:q.id,embedded:"",size:"small",class:"mb-2"},{default:hl(()=>[gi("div",c_,[gi("div",d_,[gi("span",u_,Ts(q.name),1),sl(E,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:hl(()=>[Cr(Ts(Wt(t)(q.description)),1)]),_:2},1024)]),sl(f,null,{default:hl(()=>[sl(K,{size:"small",type:"warning",secondary:"",onClick:Te=>R(q)},{default:hl(()=>[sl(M,null,{default:hl(()=>[sl(O,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),sl(K,{size:"small",type:"error",secondary:"",onClick:Te=>L(q)},{default:hl(()=>[sl(M,null,{default:hl(()=>[sl(O,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Ms(),hi(w,{key:1,size:"large",class:r_(`mb-2 !border-dashed !border-2 ${Wt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:hl(()=>[sl(j,{description:Wt(e)("noMenuLocationAdded")},{icon:hl(()=>[sl(M,null,{default:hl(()=>[sl(O,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),sl(X,{show:Wt(c),"onUpdate:show":U[5]||(U[5]=q=>i_(c)?c.value=q:null),loading:Wt(re)||Wt(B)||Wt(P),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Wt(C)?Wt(e)("editMenuLocation"):Wt(e)("addMenuLocation"),"positive-text":Wt(e)("validate"),"negative-text":Wt(e)("cancel"),onPositiveClick:le,onNegativeClick:U[6]||(U[6]=q=>c.value=!1)},{default:hl(()=>[sl(y,{ref_key:"formRef",ref:me,model:Wt(r),rules:be,"show-require-mark":!1,size:"medium",class:"my-5"},{default:hl(()=>[sl(De,{label:Wt(e)("key"),path:"name"},{default:hl(()=>[sl(J,{value:Wt(r).name,placeholder:Wt(e)("key"),class:"w-full","onUpdate:value":U[3]||(U[3]=q=>Wt(r).name=Wt(o)(q))},null,8,["value","placeholder"])]),_:1},8,["label"]),sl(De,{"show-label":!1,path:"description"},{default:hl(()=>[sl(ae,{modelValue:Wt(r).description,"onUpdate:modelValue":U[4]||(U[4]=q=>Wt(r).description=q),placeholder:Wt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:hl(()=>[Cr(Ts(Wt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),m_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menus"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/menus",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},f_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["menus"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/menus/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},__=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["menus"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menus/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:v_}=await pe("vue"),{unref:tt,resolveComponent:tk,createVNode:Mt,withCtx:Dt,toDisplayString:wn,createTextVNode:Zn,openBlock:cn,createBlock:es,createCommentVNode:Vr,renderList:y_,Fragment:bi,createElementBlock:Ds,withModifiers:ki,normalizeClass:wi,createElementVNode:Ns,isRef:Sr}=await pe("vue"),g_={key:2},h_={class:"flex items-center"},b_={class:"flex flex-col"},k_={key:0,class:"text-xs font-normal"},w_={class:"mt-4"},{ref:qn,watch:x_}=await pe("vue"),{defineStore:$_}=await pe("pinia"),C_=v_({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,pickByTheme:t,isInDevMode:o,formatKey:a}=st(),{data:l}=Ud(),{data:d}=pu(),{mutate:W,isPending:re}=__(),{mutate:ne,isPending:B}=m_(),{mutate:ve,isPending:P}=f_(),V=oa(),c=qn(24),C=qn(1),me=w=>{c.value=w},r={name:"",title:"",description:"",menuLocationId:void 0},be=qn(!1),R=qn(!1),le=qn(!1),L=qn(null),S=qn(r),U={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},O=qn(null),M=w=>{O.value=ue.cloneDeep(w),S.value=ue.cloneDeep(w||r),be.value=!0},K=async()=>(L.value?.validate(async w=>{if(!w){const b={name:S.value.name,title:S.value.title,description:S.value.description,menuLocationId:S.value.menuLocationId};O.value?ve({id:O.value.id,...b},{onSuccess:()=>{}}):ne(b,{onSuccess:()=>{}}),be.value=!1}}),!1),f=async w=>{V.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{w.id&&W({id:w.id})}})},E=$_("menus-management",()=>({itemsMenu:qn(null)}))();return x_(()=>S.value.title,w=>{O.value||S.value.name.length<=21&&(S.value.name=Rd(n(w),{trim:!0,lower:!0,strict:!0}))}),(w,b)=>{const j=_e,x=H,X=Ye,J=Tl,De=Ka,ae=Ha,y=Cl,q=jo,Te=Qa,I=Ga,p=Na,s=Va,m=el,D=Qn,T=Wa,F=Ia,z=Ca,ee=Jl;return cn(),Ds(bi,null,[tt(E).itemsMenu?Vr("",!0):(cn(),es(De,{key:0,to:"#alt-action"},{default:Dt(()=>[Mt(J,{align:"center"},{default:Dt(()=>[tt(o)?(cn(),es(X,{key:0,type:"success",secondary:"",onClick:b[0]||(b[0]=G=>R.value=!0)},{icon:Dt(()=>[Mt(x,{size:"18"},{default:Dt(()=>[Mt(j,{icon:"carbon:template"})]),_:1})]),default:Dt(()=>[Zn(" "+wn(tt(e)("locations")),1)]),_:1})):Vr("",!0),Mt(X,{type:"warning",secondary:"",onClick:b[1]||(b[1]=G=>le.value=!0)},{icon:Dt(()=>[Mt(x,{size:"18"},{default:Dt(()=>[Mt(j,{icon:"carbon:tag-group"})]),_:1})]),default:Dt(()=>[Zn(" "+wn(tt(e)("groups")),1)]),_:1}),tt(d)&&tt(d).length?(cn(),es(X,{key:1,type:"primary",secondary:"",onClick:b[2]||(b[2]=G=>M(null))},{icon:Dt(()=>[Mt(x,{size:"18"},{default:Dt(()=>[Mt(j,{icon:"carbon:add-alt"})]),_:1})]),default:Dt(()=>[Zn(" "+wn(tt(e)("addMenu")),1)]),_:1})):Vr("",!0)]),_:1})]),_:1})),tt(E).itemsMenu?(cn(),es(e_,{key:1,modelValue:tt(E).itemsMenu,"onUpdate:modelValue":b[3]||(b[3]=G=>tt(E).itemsMenu=G)},null,8,["modelValue"])):(cn(),Ds("section",g_,[Mt(I,{appear:"",name:"slide-fade"},{default:Dt(()=>[Ns("section",null,[tt(d)&&tt(d).length?(cn(),Ds(bi,{key:0},[(cn(!0),Ds(bi,null,y_(tt(d).slice((tt(C)-1)*tt(c),tt(C)*tt(c)),G=>(cn(),es(y,{key:G.id,embedded:"",size:"small",class:"mb-2"},{header:Dt(()=>[Ns("div",h_,[Mt(J,null,{default:Dt(()=>[Mt(X,{size:"small",type:"primary",secondary:"",onClick:ki(ut=>M(G),["stop"])},{default:Dt(()=>[Mt(x,null,{default:Dt(()=>[Mt(j,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Mt(X,{size:"small",type:"error",secondary:"",onClick:ki(ut=>f(G),["stop"])},{default:Dt(()=>[Mt(x,null,{default:Dt(()=>[Mt(j,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),Mt(ae,{vertical:"",class:wi(tt(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ns("div",b_,[Ns("span",{class:wi(`${G.location?"text-sm":"text-base"} font-bold`)},wn(tt(n)(G.title)),3),G.location?(cn(),Ds("small",k_,wn(G.location?.name),1)):Vr("",!0)])])]),"header-extra":Dt(()=>[Mt(X,{size:"small",type:"primary",secondary:"",onClick:ki(ut=>tt(E).itemsMenu=G,["stop"])},{icon:Dt(()=>[Mt(x,null,{default:Dt(()=>[Mt(j,{icon:"carbon:arrow-right"})]),_:1})]),default:Dt(()=>[Zn(" "+wn(tt(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),Mt(q,{page:tt(C),"onUpdate:page":b[4]||(b[4]=G=>Sr(C)?C.value=G:null),class:"mt-5 justify-end","show-size-picker":"","page-size":tt(c),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(tt(d).length/tt(c)),"onUpdate:pageSize":me},{prefix:Dt(()=>[Zn(wn(`${tt(d).length} ${tt(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(cn(),es(y,{key:1,size:"large",class:wi(`mb-2 !border-dashed !border-2 ${tt(t)("!border-zinc-300","!border-zinc-600")}`)},{default:Dt(()=>[Mt(Te,{description:tt(e)("noMenuAvailable")},{icon:Dt(()=>[Mt(x,null,{default:Dt(()=>[Mt(j,{icon:"carbon:model-alt"})]),_:1})]),extra:Dt(()=>[Ns("div",w_,[Mt(X,{size:"small",onClick:b[5]||(b[5]=G=>M(null))},{icon:Dt(()=>[Mt(x,null,{default:Dt(()=>[Mt(j,{icon:"carbon:add-alt"})]),_:1})]),default:Dt(()=>[Zn(" "+wn(tt(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Mt(ee,{show:tt(be),"onUpdate:show":b[10]||(b[10]=G=>Sr(be)?be.value=G:null),loading:tt(B)||tt(P)||tt(re),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:tt(O)?tt(e)("editMenu"):tt(e)("addMenu"),"positive-text":tt(e)("validate"),"negative-text":tt(e)("cancel"),onPositiveClick:K,onNegativeClick:b[11]||(b[11]=G=>be.value=!1)},{default:Dt(()=>[Mt(z,{ref_key:"formRef",ref:L,model:tt(S),rules:U,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Dt(()=>[Mt(s,{"show-label":!1,path:"title"},{default:Dt(()=>[Mt(p,{modelValue:tt(S).title,"onUpdate:modelValue":b[6]||(b[6]=G=>tt(S).title=G),placeholder:tt(e)("title"),class:"w-full",sync:""},{label:Dt(()=>[Zn(wn(tt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Mt(s,{"show-label":!1,path:"description"},{default:Dt(()=>[Mt(p,{modelValue:tt(S).description,"onUpdate:modelValue":b[7]||(b[7]=G=>tt(S).description=G),placeholder:tt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Dt(()=>[Zn(wn(tt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Mt(F,{"x-gap":"12",span:24},{default:Dt(()=>[Mt(D,{span:12,label:tt(e)("key"),path:"name"},{default:Dt(()=>[Mt(m,{value:tt(S).name,placeholder:tt(e)("key"),class:"w-full","onUpdate:value":b[8]||(b[8]=G=>tt(S).name=tt(a)(G))},null,8,["value","placeholder"])]),_:1},8,["label"]),Mt(D,{span:12,label:tt(e)("location"),path:"menuLocationId"},{default:Dt(()=>[Mt(T,{value:tt(S).menuLocationId,"onUpdate:value":b[9]||(b[9]=G=>tt(S).menuLocationId=G),options:tt(l),placeholder:tt(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Mt(p_,{show:tt(R),"onUpdate:show":b[12]||(b[12]=G=>Sr(R)?R.value=G:null)},null,8,["show"]),Mt(yf,{show:tt(le),"onUpdate:show":b[13]||(b[13]=G=>Sr(le)?le.value=G:null)},null,8,["show"])]))],64)}}}),I_="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var co=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(co||{}),ja=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(ja||{});const V_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["video-categories"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/video-categories",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},S_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["video-categories"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/video-categories/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},E_=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["video-categories"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/video-categories/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},U_=()=>{const{request:u}=Ge(),e=Je();return Ya(async n=>{const t=await u({method:"put",url:"/video-categories/position",data:n});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:T_}=await pe("vue"),{unref:Z,isRef:Er,createVNode:Ue,resolveComponent:Cc,withCtx:qe,toDisplayString:ea,createTextVNode:an,openBlock:sa,createBlock:xn,createCommentVNode:Io,renderList:Ic,Fragment:Vo,createElementBlock:eo,normalizeClass:So,withModifiers:zs,createElementVNode:Ba,normalizeStyle:M_}=await pe("vue"),D_={class:"flex items-center"},N_={class:"flex flex-col"},z_={class:"text-sm font-bold"},A_={class:"text-xs font-normal"},P_={class:"text-xs my-1"},L_={class:"flex items-center"},B_={class:"flex flex-col"},F_={class:"text-sm font-bold"},O_={class:"text-xs font-normal"},q_={key:0,class:"mt-4"},R_={class:"flex items-center"},{storeToRefs:j_}=await pe("pinia"),{inject:K_,ref:$n,computed:Vc,watch:Y_}=await pe("vue"),G_="categories",H_=T_({__name:"Categories",setup(u){const e=Je(),n=Qe(),t=oa(),{tr:o,fileUrl:a,pickByTheme:l}=st(),{t:d,locale:W}=Ie(),{data:re,isPending:ne,refetch:B}=mu(),{mutate:ve,isPending:P}=E_(),{mutate:V,isPending:c}=S_(),{mutate:C,isPending:me}=V_(),{mutate:r}=U_(),{isLightTheme:be}=j_(Ro()),R=K_("appConfig"),le=$n(""),L=$n(),S=Vc(()=>{if(!le.value)return U.value;const I=U.value.filter(p=>p.name.toLowerCase().includes(le.value.toLowerCase())||p.description?.toLowerCase().includes(le.value.toLowerCase())||p.children?.some(s=>s.name.toLowerCase().includes(le.value.toLowerCase())||s.description?.toLowerCase().includes(le.value.toLowerCase())));return L.value&&L.value.focus(),I}),U=Vc(()=>{const I=re.value?.filter(p=>!p.parentId)||[];for(let p=0;p<I.length;p++)I[p].children=re.value?.filter(s=>s.parentId===I[p].id);return I});Y_(()=>ne.value||me.value||c.value||P.value,I=>{I?e.start():e.finish()});const O=$n(24),M=$n(1),K=I=>{O.value=I},f=$n(null),E=$n(!1),w=$n(null),b=$n(null),j=$n({name:"",description:"",isActive:!0,position:0,image:"",color:""}),x={name:[{required:!0,message:d("fillRequired")}]},X=(I,p=null)=>{w.value=ue.cloneDeep(I),I?j.value=ue.cloneDeep(I):j.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},f.value=p,E.value=!0},J=async I=>{t.warning({title:d("confirm"),content:I.parentId?d("confirmDeleteSubCategory"):d("confirmDeleteCategory"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{I.id&&ve({id:I.id})}})},De=async()=>(b.value?.validate(async I=>{if(!I){const p={name:j.value.name,description:j.value.description,isActive:j.value.isActive,position:j.value.position,image:j.value.image,color:j.value.color,parentId:f.value};w.value?w.value.name!==j.value.name&&(re.value||[]).findIndex(s=>s.name==j.value.name)>-1?n.error(d("sameCategoryNameMessage")):V({id:w.value.id,...p}):(re.value||[]).findIndex(s=>s.name==j.value.name)>-1?n.error(d("sameCategoryNameMessage")):C(p),E.value=!1}}),!1),ae=async(I,p)=>{r({items:p},{onSuccess(){B()}})},y=$n(!1),q=async I=>{j.value.image=I,y.value=!1},Te=()=>{j.value.image=""};return(I,p)=>{const s=_e,m=rr,D=Ka,T=Ha,F=Tl,z=Cl,ee=Cc("Draggable"),G=_n,ut=fn,St=jo,$e=Qa,It=mo,ze=Ga,lt=uo,Q=Na,h=Va,_=Yr,pt=Qn,Se=Cc("color-picker"),ct=Ia,kt=Xi,Y=Hi,ye=Ca,xe=Jl;return sa(),eo(Vo,null,[Ue(D,{to:"#search-category-action"},{default:qe(()=>[Ue(m,{class:"!w-[250px]"},{default:qe(()=>[Ue(Z(el),{ref_key:"searchInputRef",ref:L,value:Z(le),"onUpdate:value":p[0]||(p[0]=we=>Er(le)?le.value=we:null),clearable:!0,placeholder:Z(d)("searchCategory")},null,8,["value","placeholder"]),Ue(Z(Ye),{type:"primary",secondary:""},{icon:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),Ue(D,{to:"#add-category-action"},{default:qe(()=>[Z(S).length?(sa(),xn(Z(Ye),{key:0,type:"primary",secondary:"",onClick:p[1]||(p[1]=we=>X(null))},{icon:qe(()=>[Ue(Z(H),{size:"18"},{default:qe(()=>[Ue(s,{icon:"carbon:add-alt"})]),_:1})]),default:qe(()=>[an(" "+ea(Z(d)("addCategory")),1)]),_:1})):Io("",!0)]),_:1}),Ue(ze,{name:"slide-fade",appear:""},{default:qe(()=>[Ba("section",null,[Ue(It,{show:Z(ne)},{default:qe(()=>[Z(S)&&Z(S).length?(sa(),eo(Vo,{key:0},[Ue(ee,{list:Z(U),onChange:p[2]||(p[2]=we=>ae(we,Z(U)))},{default:qe(()=>[(sa(!0),eo(Vo,null,Ic(Z(S).slice((Z(M)-1)*Z(O),Z(M)*Z(O)),we=>(sa(),xn(z,{key:we.id,embedded:"",size:"small",class:"mb-1"},{default:qe(()=>[Ue(ut,{"default-expanded-names":we.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":qe(({collapsed:at})=>[Ue(F,{align:"center"},{default:qe(()=>[Ue(Z(Da),{size:"small",bordered:!1,type:we.isActive?"success":"error"},{default:qe(()=>[an(ea(we.isActive?Z(d)("visible"):Z(d)("hidden")),1)]),_:2},1032,["type"]),Ue(T,{vertical:"",class:So(["!mx-0",Z(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(Z(Ye),{size:"small",type:"primary",secondary:"",onClick:zs(ll=>X(we),["stop"])},{default:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(Z(Ye),{size:"small",type:"error",secondary:"",onClick:zs(ll=>J(we),["stop"])},{default:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Ue(Z(Ye),{size:"small",type:"info",secondary:"",onClick:zs(ll=>X(null,we.id),["stop"])},{icon:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:category"})]),_:1})]),default:qe(()=>[an(" "+ea(Z(d)("subCategory"))+" ",1),Ue(Z(Da),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:qe(()=>[an(ea(we.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),p[16]||(p[16]=Ba("div",{class:"w-6"},null,-1)),Ue(Z(H),null,{default:qe(()=>[at?(sa(),xn(s,{key:0,icon:"fa-solid:chevron-left"})):(sa(),xn(s,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:qe(()=>[...p[17]||(p[17]=[Ba("span",null,null,-1)])]),default:qe(()=>[Ue(G,{name:"1"},{header:qe(()=>[Ba("div",D_,[Ue(Z(H),{size:"21",class:"cursor-move mr-4"},{default:qe(()=>[Ue(s,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(T,{vertical:"",class:So(Z(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ba("div",N_,[Ba("span",z_,ea(Z(o)(we.name))+"Â ("+ea(we.itemsCount)+"Â "+ea(Z(d)("video_s"))+") ",1),Ba("small",A_,ea(we.slug),1)])])]),default:qe(()=>[we.description?(sa(),eo(Vo,{key:0},[Ue(T,{class:So([Z(l)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Ba("div",P_,ea(Z(o)(we.description)),1)],64)):Io("",!0),we.children?.length?(sa(),eo(Vo,{key:1},[Ue(T,{class:So([Z(l)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Ue(ee,{list:we.children,onChange:at=>ae(at,we.children||[])},{default:qe(()=>[(sa(!0),eo(Vo,null,Ic(we.children,at=>(sa(),xn(z,{key:at.id,size:"small",class:"mb-1"},{header:qe(()=>[Ba("div",L_,[Ue(Z(H),{size:"21",class:"cursor-move mr-4"},{default:qe(()=>[Ue(s,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(T,{vertical:"",class:So(Z(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ba("div",B_,[Ba("span",F_,ea(Z(o)(at.name)),1),Ba("small",O_,ea(at.slug),1)])])]),"header-extra":qe(()=>[Ue(F,{align:"center"},{default:qe(()=>[Ue(Z(Da),{size:"small",bordered:!1,type:at.isActive?"success":"error"},{default:qe(()=>[an(ea(at.isActive?Z(d)("visible"):Z(d)("hidden")),1)]),_:2},1032,["type"]),Ue(T,{vertical:"",class:So(["!mx-0",Z(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(Z(Ye),{size:"small",type:"primary",secondary:"",onClick:zs(ll=>X(at,we.id),["stop"])},{default:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(Z(Ye),{size:"small",type:"error",secondary:"",onClick:zs(ll=>J(at),["stop"])},{default:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Io("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Ue(St,{page:Z(M),"onUpdate:page":p[3]||(p[3]=we=>Er(M)?M.value=we:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Z(O),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(Z(U).length/Z(O)),"onUpdate:pageSize":K},{prefix:qe(()=>[an(ea(`${Z(U).length} ${Z(d)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(sa(),xn(z,{key:1,size:"large",class:So(`mb-2 !border-dashed !border-2 ${Z(l)("!border-zinc-300","!border-zinc-600")}`)},{default:qe(()=>[Ue($e,{description:Z(d)("noCategoryAvailable")},{icon:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Z(le)?(sa(),xn(s,{key:0,icon:"carbon:search"})):(sa(),xn(s,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:qe(()=>[Z(le)?Io("",!0):(sa(),eo("div",q_,[Ue(Z(Ye),{size:"small",secondary:"",onClick:p[4]||(p[4]=we=>X(null))},{icon:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:add-alt"})]),_:1})]),default:qe(()=>[an(" "+ea(Z(d)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),Ue(lt,{show:Z(y),"onUpdate:show":p[5]||(p[5]=we=>Er(y)?y.value=we:null),title:Z(d)("selectImage"),"upload-config":{folder:G_,limit:0,maxSize:0,baseUrl:Z(R)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:q},null,8,["show","title","upload-config"]),Ue(xe,{show:Z(E),"onUpdate:show":p[14]||(p[14]=we=>Er(E)?E.value=we:null),loading:Z(me)||Z(c)||Z(P),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:Z(w)?Z(f)?Z(d)("editSubCategory"):Z(d)("editCategory"):Z(f)?Z(d)("addSubCategory"):Z(d)("addCategory"),"positive-text":Z(d)("validate"),"negative-text":Z(d)("cancel"),onPositiveClick:De,onNegativeClick:p[15]||(p[15]=we=>E.value=!1)},{default:qe(()=>[Ue(ye,{ref_key:"formRef",ref:b,class:"mt-5",model:Z(j),rules:x,"show-require-mark":!1,size:"medium"},{default:qe(()=>[Ue(h,{"show-label":!1,path:"name"},{default:qe(()=>[Ue(Q,{modelValue:Z(j).name,"onUpdate:modelValue":p[6]||(p[6]=we=>Z(j).name=we),placeholder:Z(d)("name"),class:"w-full",sync:""},{label:qe(()=>[an(ea(Z(d)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(h,{"show-label":!1,path:"description"},{default:qe(()=>[Ue(Q,{modelValue:Z(j).description,"onUpdate:modelValue":p[7]||(p[7]=we=>Z(j).description=we),placeholder:Z(d)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:qe(()=>[an(ea(Z(d)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(ct,{"x-gap":"12",span:24},{default:qe(()=>[Ue(pt,{span:12,label:Z(d)("position"),path:"position"},{default:qe(()=>[Ue(_,{value:Z(j).position,"onUpdate:value":p[8]||(p[8]=we=>Z(j).position=we),placeholder:Z(d)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Ue(pt,{span:12,label:Z(d)("color"),path:"color"},{default:qe(()=>[Ba("div",R_,[Z(j).color?(sa(),eo(Vo,{key:0},[Ue(Z(Ye),{text:"",type:"error",style:{"font-size":"21px"},onClick:p[9]||(p[9]=we=>Z(j).color="")},{default:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Ue(T,{vertical:""})],64)):Io("",!0),Ue(Se,{"pure-color":Z(j).color,"onUpdate:pureColor":p[10]||(p[10]=we=>Z(j).color=we),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:Z(be)?"white":"black",lang:Z(W)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),Ue(T,{dashed:"",class:"!my-2"}),Ue(ct,{"x-gap":"12",span:24},{default:qe(()=>[Ue(pt,{span:12,label:Z(d)("preview"),path:"image"},{default:qe(()=>[Ue(F,{align:"center",justify:"center",style:{height:"100%"}},{default:qe(()=>[Ue(kt,{class:"cursor-pointer","object-fit":"cover",style:M_("border: 1px dashed "+Z(l)("green","white")),size:150,src:Z(a)(Z(j).image||""),onClick:p[11]||(p[11]=we=>y.value=!0)},{default:qe(()=>[Z(j).image?Io("",!0):(sa(),xn(Z(H),{key:0,size:64},{default:qe(()=>[Ue(s,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),Z(j).image?(sa(),xn(Z(Ye),{key:0,quaternary:"",onClick:p[12]||(p[12]=we=>Te())},{icon:qe(()=>[Ue(Z(H),null,{default:qe(()=>[Ue(s,{icon:"carbon:trash-can"})]),_:1})]),default:qe(()=>[an(" "+ea(Z(d)("clear")),1)]),_:1})):Io("",!0)]),_:1})]),_:1},8,["label"]),Ue(pt,{span:12,label:Z(d)("status"),path:"isActive"},{default:qe(()=>[Ue(Y,{value:Z(j).isActive,"onUpdate:value":p[13]||(p[13]=we=>Z(j).isActive=we),size:"small"},{checked:qe(()=>[an(ea(Z(d)("visible")),1)]),unchecked:qe(()=>[an(ea(Z(d)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Q_=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Je(),t=Qe();return Ya(async o=>{const a=await u({url:"/video-settings",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{t.success(e("success"))},onError:(o,a)=>{t.error(e("unableToUpdateSettings"))}})};class W_{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,n,t=ja.SELF_HOSTED,o=co.HORIZONTAL,a,l,d,W,re,ne,B,ve,P,V,c,C){this.id=l,this.foreignId=ne,this.publisherId=re,this.title=e,this.slug=W,this.description=B,this.thumbnail=ve,this.thumbnailUrl=P,this.path=n,this.url=d,this.source=t,this.visible=a,this.displayType=o,this.publishedAt=V,this.createdAt=c,this.updatedAt=C}}const X_=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Je(),t=Qe();return Ya(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:()=>t.success(e("success")),onError:()=>t.error(e("unableToUpdateChannelVideos")),retry:1})},J_=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Je(),a=Qe();return bt({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:l=>"id"in l&&l.id?l.id:`temp-${crypto.randomUUID()}`,mutationFn:async l=>{o.start();try{const d=await n({method:"post",url:"/video-items",data:Xt(l,["id"])});if(!d.success)throw new Error(d.error||t("anErrorOccurred"));return d.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{a.success(t("success"))},onError:l=>{switch(l?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:e(l?.response?.data?.data);break;case Ft.REQUEST_PARAMS_MISSING:a.error(t("pleaseProvideApiKeyAndValidVideoUrl"));break;case Ft.REQUEST_DATA_RETRIEVAL_FAILED:a.error(t("videoDataCantBeRetrieve"));break;case Ft.REQUEST_DATA_ALREADY_EXISTS:a.error(t("videoAlreadyExists"));break;default:a.error(t("anErrorOccurred"))}},...u}})},Z_=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();try{const l=await e({method:"put",url:`/video-items/${a.id}`,data:Xt(a,["id"])});if(!l.success)throw new Error(l.error||n("anErrorOccurred"));return l.result.data}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},ev=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{t.start();const l=await e({method:"delete",url:`/video-items/force/${a}`});if(t.finish(),!l.success)throw new Error(l.error);return l.result?.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},tv=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof W_){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("VideoItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(l=>a[l])}),mutationFn:async a=>{t.start();const l=Object.keys(a).filter(d=>a[d]);try{for(const d of l)await e({method:"delete",url:`/video-items/force/${d}`});return l}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},{defineComponent:lv}=await pe("vue"),{unref:El,resolveComponent:lk,createVNode:dl,withCtx:bl,toDisplayString:Eo,createTextVNode:Sc,createElementVNode:Uo,normalizeClass:av,Fragment:Ec,openBlock:Uc,createElementBlock:Tc,createCommentVNode:nv}=await pe("vue"),{ref:Mc,computed:Dc}=await pe("vue"),ov=lv({__name:"Settings",setup(u){const{t:e,locale:n}=Ie(),t=Td({enabled:!1}),{mutate:o,isPending:a}=Q_(),{mutate:l,isPending:d}=X_(),W=Mc({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),re=Mc(W.value),ne=Dc(()=>ue.isEqual(W.value,re.value)),B=async()=>{o(W.value,{onSuccess:()=>ve()})},ve=async()=>{await t.refetch(),t.data.value?.forEach(c=>{W.value[c.key]!=null&&(W.value[c.key]=c.value)}),re.value=ue.cloneDeep(W.value)};ve();const P=()=>{l(void 0,{onSuccess:()=>ve()})},V=Dc(()=>!!(a.value||d.value||t.isPending.value));return(c,C)=>{const me=_e,r=H,be=Ye,R=Ka,le=el,L=Tl,S=Cl,U=mn,O=Hi,M=Ia,K=Ga;return Uc(),Tc(Ec,null,[dl(R,{to:"#save-settings-action"},{default:bl(()=>[dl(be,{loading:El(V),disabled:El(ne),type:"primary",secondary:"",onClick:B},{icon:bl(()=>[dl(r,null,{default:bl(()=>[dl(me,{icon:"carbon:save"})]),_:1})]),default:bl(()=>[Sc(" "+Eo(El(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),dl(K,{name:"slide-fade",appear:""},{default:bl(()=>[dl(S,{hoverable:"",embedded:""},{header:bl(()=>[Sc(Eo(El(e)("youtube")),1)]),default:bl(()=>[dl(M,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:bl(()=>[dl(U,null,{default:bl(()=>[dl(S,{class:"w-full h-full",size:"small"},{default:bl(()=>[dl(L,{align:"center",justify:"space-between"},{default:bl(()=>[Uo("span",null,Eo(El(e)("apiKey")),1),dl(le,{value:El(W).youtubeApiKey,"onUpdate:value":C[0]||(C[0]=f=>El(W).youtubeApiKey=f),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),dl(U,null,{default:bl(()=>[dl(S,{class:"w-full h-full py-1.5",size:"small"},{default:bl(()=>[dl(L,{align:"center",justify:"space-between"},{default:bl(()=>[Uo("span",null,Eo(El(e)("autoUpdateChannelVideos")),1),dl(O,{value:El(W).youtubeChannelVideosAutoUpdate,"onUpdate:value":C[1]||(C[1]=f=>El(W).youtubeChannelVideosAutoUpdate=f),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:bl(()=>[...C[3]||(C[3]=[Uo("div",{class:"w-6"},null,-1)])]),unchecked:bl(()=>[...C[4]||(C[4]=[Uo("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),El(W).youtubeChannelVideosAutoUpdate=="1"?(Uc(),Tc(Ec,{key:0},[dl(U,null,{default:bl(()=>[dl(S,{class:"w-full h-full",size:"small"},{default:bl(()=>[dl(L,{align:"center",justify:"space-between"},{default:bl(()=>[Uo("span",null,Eo(El(e)("channelId")),1),dl(le,{value:El(W).youtubeChannelId,"onUpdate:value":C[2]||(C[2]=f=>El(W).youtubeChannelId=f),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),dl(U,null,{default:bl(()=>[dl(S,{class:"w-full h-full",size:"small"},{default:bl(()=>[dl(L,{align:"center",justify:"space-between"},{default:bl(()=>[Uo("span",null,Eo(El(e)("lastUpdate")),1),Uo("b",null,Eo(El(W).youtubeLastChannelVideosUpdate?El(pn)(El(W).youtubeLastChannelVideosUpdate,{locale:El(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):El(e)("never")),1),dl(be,{strong:"",circle:"",secondary:"",type:"primary",title:El(e)("refresh"),disabled:El(V),onClick:P},{icon:bl(()=>[dl(r,null,{default:bl(()=>[dl(me,{icon:"carbon:restart",class:av({"animate-spin":El(V)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):nv("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),sv=()=>{const{t:u}=Ie(),e=[{label:u("horizontal"),value:co.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:co.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(a=>a.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(a=>a.value===o)?.label,videoDisplayTypes:e}},{unref:rv}=await pe("vue"),{defineComponent:iv}=await pe("vue"),{unref:$,vShow:As,createElementVNode:wa,withDirectives:Ps,toDisplayString:Bl,createTextVNode:Gl,resolveComponent:ak,isRef:Rn,withCtx:Me,createVNode:ge,openBlock:Fl,createElementBlock:Sa,createCommentVNode:Ur,normalizeClass:cv,renderList:Nc,Fragment:ts,withModifiers:dv,createBlock:ls,normalizeStyle:zc}=await pe("vue"),uv={id:"save-settings-action"},pv={id:"add-category-action"},mv={class:"flex items-center gap-3"},fv={id:"search-category-action"},_v={key:0,class:"w-full flex items-center justify-between mt-2"},vv={class:"flex items-center gap-3"},yv={key:0,class:"mt-12"},gv={key:1,class:"mt-12"},hv={key:2},bv={key:0},kv=["onClick"],wv={class:"absolute top-0 left-0 w-full h-full bg-black opacity-35 flex items-center justify-center"},xv={class:"absolute bottom-0 right-0 p-3 w-full"},$v={class:"text-center text-dimgray text-sm"},Cv={key:1,class:"flex items-center justify-center"},Iv={class:"mt-5"},Vv={class:"w-full flex flex-gap-8 items-center justify-start"},Sv=["src"],Ev={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Uv=["src"],{inject:Tv,ref:Ol,computed:Tr,watch:Mv,h:Ac}=await pe("vue"),{defineStore:Dv}=await pe("pinia"),Nv=iv({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,fileUrl:t,pickByTheme:o,getVideoThumbnail:a}=st(),{videoDisplayTypes:l}=sv(),{orderedCategories:d}=fu(),W=Td(),{mutate:re,isPending:ne}=ev(),{mutate:B,isPending:ve}=tv(),{mutate:P,isPending:V}=J_(),{mutate:c,isPending:C}=Z_(),me=Qe(),r=oa(),be=Tv("appConfig"),R=Ol(""),le=Bu(R,500),L=Ol(null),S=Ol([]),U=Ol([]),O=Dv("videos-management-store",()=>({currentTab:Ol("all")}))(),M=Ol(0),K=Ol(24),f=Ol(1),E=Tr(()=>({pageSize:K.value,query:le.value,source:O.currentTab,page:f.value})),w=h=>{f.value=h,x()},b=h=>{K.value=h,x()},{data:j,refetch:x,isPending:X}=_u(E);Mv(()=>j.value,h=>{S.value=h?.videoItems||[],M.value=h?.meta?.total||0,f.value=h?.meta?.currentPage||1},{deep:!0,immediate:!0});const J=Ol(!1),De=Ol(null),ae=Ol(null),y=Ol({title:"",description:"",visible:!0,source:ja.SELF_HOSTED,displayType:co.HORIZONTAL,thumbnail:"",path:""}),q=Tr(()=>({title:[{required:y.value.source==ja.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),Te=h=>{De.value=ue.cloneDeep(h),h?(y.value=ue.cloneDeep(h),U.value=h.categories?.map(_=>_.id)??[]):(y.value={title:"",description:"",visible:!0,source:O.currentTab=="youtube"?ja.YOUTUBE:ja.SELF_HOSTED,displayType:co.HORIZONTAL,thumbnail:"",path:""},U.value=[]),J.value=!0},I=async h=>{r.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{re(h)}})},p=async()=>(ae.value?.validate(async h=>{if(!h){const _={title:y.value.title,description:y.value.description,visible:y.value.visible,source:y.value.source,displayType:y.value.displayType,thumbnail:y.value.thumbnail,path:y.value.path,categories:U.value};De.value?(_.id=De.value.id,c(_)):P(_),J.value=!1}}),!1),s=Ol(!1),m=Ol(!1),D=Ol(""),T=Ol(""),F=Ol("classic"),z=h=>{D.value=n(h.title)??e("video"),T.value=t(h.path),F.value=h.source==ja.YOUTUBE?"youtube":"classic",m.value=!0},ee=Ol(!1),G=Ol(!1),ut=Ol(Al()),St=Ol({}),$e=Tr(()=>{let h=0;for(const _ in St.value)St.value[_]&&h++;return h});function It(){St.value={},x()}const ze=async()=>($e.value?r.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[$e.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{B(St.value,{onSuccess:()=>{St.value={}}})}}):me.warning(e("noItemSelected")),!1),lt=h=>[h.parentId?Ac(H,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>Ac(_e,{icon:"mdi:arrow-right"})}):null,`${n(h.name)}`],Q=Tr(()=>!!(V.value||C.value||ne.value||ve.value||W.isPending.value));return(h,_)=>{const pt=fo,Se=Ye,ct=Ka,kt=Qi,Y=el,ye=rr,xe=Hr,we=Lu,at=Da,ll=Tl,zt=ir,Ke=Cl,al=Ga,Ot=mn,nl=Ia,Pl=jo,et=mo,ie=Qa,oe=Va,Ae=Qn,A=Wa,nt=Na,Ml=us,jl=Ca,Xa=Jl,Ja=uo;return Fl(),Sa(ts,null,[ge(ct,{to:"#alt-action"},{default:Me(()=>[Ps(wa("div",uv,null,512),[[As,$(O).currentTab=="settings"]]),Ps(wa("div",pv,null,512),[[As,$(O).currentTab=="categories"]]),Ps(wa("div",mv,[ge(pt,{checked:$(G),"onUpdate:checked":[_[0]||(_[0]=N=>Rn(G)?G.value=N:null),_[1]||(_[1]=N=>{for(const Ht of $(S))Ht.id&&($(St)[Ht.id]=N);ut.value=("uuidv4"in h?h.uuidv4:rv(Al))()})]},{default:Me(()=>[Gl(Bl($(e)("selectAll")),1)]),_:1},8,["checked"]),ge(Se,{type:"primary",secondary:"",loading:$(V),disabled:$(Q),onClick:_[2]||(_[2]=N=>Te(null))},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:video-add"})]),_:1})]),default:Me(()=>[Gl(" "+Bl($(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[As,["all","self-hosted","youtube"].includes($(O).currentTab)]])]),_:1}),wa("section",{class:cv(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${$(o)("bg-white","bg-zinc-800")}`)},[ge(xe,{value:$(O).currentTab,"onUpdate:value":[_[6]||(_[6]=N=>$(O).currentTab=N),_[7]||(_[7]=()=>$(x)())],type:"card",size:"medium"},{suffix:Me(()=>[Ps(wa("div",null,[ge(ye,{class:"!w-[250px]"},{default:Me(()=>[ge(Y,{ref_key:"searchInputRef",ref:L,value:$(R),"onUpdate:value":[_[3]||(_[3]=N=>Rn(R)?R.value=N:null),_[4]||(_[4]=N=>{N||$(x)()})],clearable:!0,placeholder:$(e)("searchVideo")},null,8,["value","placeholder"]),ge(Se,{type:"primary",secondary:"",onClick:_[5]||(_[5]=N=>$(x)())},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[As,["all","self-hosted","youtube"].includes($(O).currentTab)]]),Ps(wa("div",fv,null,512),[[As,$(O).currentTab=="categories"]])]),default:Me(()=>[ge(kt,{name:"all"},{default:Me(()=>[ge($(H),{size:"18",class:"mr-1"},{default:Me(()=>[ge($(_e),{icon:"carbon:collapse-all"})]),_:1}),Gl(" "+Bl($(e)("all_")),1)]),_:1}),ge(kt,{name:$(ja).SELF_HOSTED},{default:Me(()=>[ge($(H),{size:"18",class:"mr-1"},{default:Me(()=>[ge($(_e),{icon:"carbon:document-video"})]),_:1}),Gl(" "+Bl($(e)("selfHosted")),1)]),_:1},8,["name"]),ge(kt,{name:$(ja).YOUTUBE},{default:Me(()=>[ge($(H),{size:"18",class:"mr-1"},{default:Me(()=>[ge($(_e),{icon:"carbon:logo-youtube"})]),_:1}),Gl(" "+Bl($(e)("youtube")),1)]),_:1},8,["name"]),ge(kt,{name:"categories"},{default:Me(()=>[ge($(H),{size:"18",class:"mr-1"},{default:Me(()=>[ge($(_e),{icon:"carbon:categories"})]),_:1}),Gl(" "+Bl($(e)("categories")),1)]),_:1}),ge(kt,{name:"settings"},{default:Me(()=>[ge($(H),{size:"18",class:"mr-1"},{default:Me(()=>[ge($(_e),{icon:"carbon:settings-adjust"})]),_:1}),Gl(" "+Bl($(e)("settings")),1)]),_:1})]),_:1},8,["value"]),$($e)>0?(Fl(),Sa("section",_v,[wa("span",null,Bl($(e)("nbItemsSelected",[$($e)])),1),wa("section",vv,[ge(Se,{type:"error",size:"small",loading:$(ve),secondary:"",onClick:ze},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Gl(" "+Bl($(e)("delete")),1)]),_:1},8,["loading"]),ge(Se,{type:"warning",size:"small",secondary:"",onClick:It},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:close"})]),_:1})]),default:Me(()=>[Gl(" "+Bl($(e)("cancelSelection")),1)]),_:1})])])):Ur("",!0)],2),$(O).currentTab=="settings"?(Fl(),Sa("section",yv,[ge(ov)])):$(O).currentTab=="categories"?(Fl(),Sa("section",gv,[ge(H_)])):(Fl(),Sa("section",hv,[ge(al,{name:"slide-fade",appear:""},{default:Me(()=>[ge(Ke,{embedded:"",class:"py-10 mt-6"},{default:Me(()=>[$(S).length&&!$(W).isPending.value?(Fl(),Sa("section",bv,[ge(nl,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Me(()=>[(Fl(!0),Sa(ts,null,Nc($(S),(N,Ht)=>(Fl(),ls(Ot,{key:Ht},{default:Me(()=>[ge(al,{name:"slide-fade",appear:""},{default:Me(()=>[ge(Ke,{bordered:"",hoverable:""},{cover:Me(()=>[wa("div",{class:"flex items-center justify-center w-full h-full relative cursor-pointer",onClick:rl=>z(N)},[ge(we,{load:()=>$(a)(N.path),fallback:N.thumbnailUrl??$(I_),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),wa("div",wv,[ge($(H),{size:72},{default:Me(()=>[ge($(_e),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),wa("div",xv,[ge(ll,null,{default:Me(()=>[(Fl(!0),Sa(ts,null,Nc(N.categories,rl=>(Fl(),ls(at,{size:"small",bordered:!1,key:rl.id,onClick:dv(()=>{},["stop"])},{default:Me(()=>[Gl(Bl($(n)(rl.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,kv)]),header:Me(()=>[wa("div",$v,[ge(zt,{"line-clamp":1,"expand-trigger":"click"},{default:Me(()=>[N.id?(Fl(),ls(pt,{key:$(ut),checked:$(St)[N.id],"onUpdate:checked":rl=>$(St)[N.id]=rl,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Ur("",!0),Gl(" "+Bl($(n)(N.title)),1)]),_:2},1024)])]),action:Me(()=>[ge(ll,{justify:"space-between",align:"center"},{default:Me(()=>[ge(ll,null,{default:Me(()=>[ge(at,{bordered:!1,type:N.visible?"success":"error"},{default:Me(()=>[Gl(Bl(N.visible?$(e)("visible"):$(e)("hidden")),1)]),_:2},1032,["type"]),ge(at,{bordered:!1,type:N.displayType==$(co).HORIZONTAL?"info":"warning"},{default:Me(()=>[Gl(Bl(N.displayType==$(co).HORIZONTAL?$(e)("horizontal"):$(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),ge(ll,null,{default:Me(()=>[ge(Se,{size:"small",type:"primary",secondary:"",title:$(e)("play"),onClick:rl=>z(N)},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),N.source!=$(ja).YOUTUBE?(Fl(),ls(Se,{key:0,size:"small",type:"primary",secondary:"",title:$(e)("edit"),loading:$(C),onClick:rl=>Te(N)},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","loading","onClick"])):Ur("",!0),ge(Se,{size:"small",type:"error",secondary:"",title:$(e)("delete"),loading:$(ne),onClick:rl=>I(N)},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),ge(Pl,{page:$(f),"onUpdate:page":[_[8]||(_[8]=N=>Rn(f)?f.value=N:null),w],class:"mt-10 justify-center","show-size-picker":"","page-size":$(K),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil($(M)/$(K)),"onUpdate:pageSize":b},{prefix:Me(()=>[Gl(Bl(`${$(M)} ${$(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):$(W).isPending.value?(Fl(),Sa("section",Cv,[ge(et,{size:"medium"})])):(Fl(),ls(ie,{key:2,description:$(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),ge(Xa,{show:$(J),"onUpdate:show":_[21]||(_[21]=N=>Rn(J)?J.value=N:null),loading:$(X),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:$(De)?$(e)("editVideo"):$(e)("addVideo"),"positive-text":$(e)("validate"),"negative-text":$(e)("cancel"),onPositiveClick:p,onNegativeClick:_[22]||(_[22]=N=>J.value=!1)},{default:Me(()=>[wa("div",Iv,[ge(jl,{ref_key:"formRef",ref:ae,model:$(y),rules:$(q),"show-require-mark":!1,size:"medium"},{default:Me(()=>[ge(oe,{label:$(e)("source"),path:"source"},{default:Me(()=>[ge(pt,{checked:$(y).source,"onUpdate:checked":_[9]||(_[9]=N=>$(y).source=N),"checked-value":$(ja).YOUTUBE,"unchecked-value":$(ja).SELF_HOSTED},{default:Me(()=>[Gl(Bl($(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),$(y).source==$(ja).YOUTUBE?(Fl(),Sa(ts,{key:0},[ge(nl,{"x-gap":"12",span:24},{default:Me(()=>[ge(Ae,{span:16,label:$(e)("videoShareLink"),path:"path"},{default:Me(()=>[ge(Y,{value:$(y).path,"onUpdate:value":_[10]||(_[10]=N=>$(y).path=N),placeholder:$(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),ge(Ae,{span:8,label:$(e)("displayType"),path:"displayType"},{default:Me(()=>[ge(A,{value:$(y).displayType,"onUpdate:value":_[11]||(_[11]=N=>$(y).displayType=N),placeholder:$(e)("displayType"),options:$(l),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),ge(oe,{label:$(e)("categories"),path:"categories"},{default:Me(()=>[ge(A,{value:$(U),"onUpdate:value":_[12]||(_[12]=N=>Rn(U)?U.value=N:null),"render-label":lt,placeholder:$(e)("categories"),options:$(d),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])],64)):(Fl(),Sa(ts,{key:1},[ge(oe,{"show-label":!1,path:"title"},{default:Me(()=>[ge(nt,{modelValue:$(y).title,"onUpdate:modelValue":_[13]||(_[13]=N=>$(y).title=N),placeholder:$(e)("title"),class:"w-full",sync:""},{label:Me(()=>[Gl(Bl($(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ge(oe,{"show-label":!1,path:"description"},{default:Me(()=>[ge(nt,{modelValue:$(y).description,"onUpdate:modelValue":_[14]||(_[14]=N=>$(y).description=N),placeholder:$(e)("description"),class:"w-full",type:"textarea",sync:""},{label:Me(()=>[Gl(Bl($(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ge(oe,{label:$(e)("categories"),path:"categories"},{default:Me(()=>[ge(A,{value:$(U),"onUpdate:value":_[15]||(_[15]=N=>Rn(U)?U.value=N:null),"render-label":lt,placeholder:$(e)("categories"),options:$(d),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),ge(nl,{"x-gap":"12",span:24},{default:Me(()=>[ge(Ae,{span:16,label:$(e)("content"),path:"path"},{default:Me(()=>[ge(ye,null,{default:Me(()=>[ge(Se,{type:"primary",secondary:"",onClick:_[16]||(_[16]=()=>{s.value=!0})},{default:Me(()=>[Gl(Bl($(e)("select")),1)]),_:1}),ge(Y,{value:$(y).path?$(cs)($(y).path):"",placeholder:$(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),$(y).path?(Fl(),Sa(ts,{key:0},[ge(Se,{type:"primary",ghost:"",onClick:_[17]||(_[17]=()=>{D.value=$(e)("video"),T.value=$(t)($(y).path),F.value="classic",m.value=!0})},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:play"})]),_:1})]),default:Me(()=>[Gl(" "+Bl($(e)("play")),1)]),_:1}),ge(Se,{type:"primary",ghost:"",onClick:_[18]||(_[18]=()=>{$(y).path=""})},{icon:Me(()=>[ge($(H),null,{default:Me(()=>[ge($(_e),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Gl(" "+Bl($(e)("clear")),1)]),_:1})],64)):Ur("",!0)]),_:1})]),_:1},8,["label"]),ge(Ae,{span:8,label:$(e)("displayType"),path:"displayType"},{default:Me(()=>[ge(A,{value:$(y).displayType,"onUpdate:value":_[19]||(_[19]=N=>$(y).displayType=N),placeholder:$(e)("displayType"),options:$(l),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),ge(oe,{label:$(e)("thumbnail"),path:"thumbnail"},{default:Me(()=>[wa("div",Vv,[wa("div",{class:"cursor-pointer w-full h-[150px]",onClick:_[20]||(_[20]=()=>{ee.value=!0})},[$(y).thumbnail?(Fl(),ls(Ml,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:zc("border: 1px dashed "+$(o)("green","white")),src:$(t)($(y).thumbnail||"")},null,8,["style","src"])):(Fl(),Sa("div",{key:1,class:"w-full h-full flex items-center justify-center",style:zc("border: 1px dashed "+$(o)("green","white"))},[ge($(H),{size:64},{default:Me(()=>[ge($(_e),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ge(Xa,{show:$(m),"onUpdate:show":_[23]||(_[23]=N=>Rn(m)?m.value=N:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:$(D)},{default:Me(()=>[$(F)==="youtube"?(Fl(),Sa("iframe",{key:0,width:"100%",height:"380",src:$(T),frameborder:"0",allowfullscreen:""},null,8,Sv)):(Fl(),Sa("video",Ev,[wa("source",{src:$(T)},null,8,Uv)]))]),_:1},8,["show","title"]),ge(Ja,{show:$(s),"onUpdate:show":_[24]||(_[24]=N=>Rn(s)?s.value=N:null),title:$(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:$(be)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:_[25]||(_[25]=N=>{$(y).path=N,s.value=!1})},null,8,["show","title","upload-config"]),ge(Ja,{show:$(ee),"onUpdate:show":_[26]||(_[26]=N=>Rn(ee)?ee.value=N:null),title:$(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:$(be)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:_[27]||(_[27]=N=>{$(y).thumbnail=N,ee.value=!1})},null,8,["show","title","upload-config"])],64)}}}),zv=Wn(Nv,[["__scopeId","data-v-721a9a7a"]]),{t:Ze}=Gi.global,Pc=[{key:"maxlength",defaultValue:"",placeholder:Ze("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Ze("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],Av={text:Pc,textarea:Pc,number:[{key:"min",defaultValue:"",placeholder:Ze("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ze("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Ze("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Ze("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ze("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ze("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ze("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"format",defaultValue:"",placeholder:Ze("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"format",defaultValue:"",placeholder:Ze("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"format",defaultValue:"",placeholder:Ze("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"format",defaultValue:"",placeholder:Ze("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ze("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ze("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ze("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ze("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ze("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ze("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"library",defaultValue:"all",placeholder:Ze("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ze("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ze("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Ze("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Ze("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ze("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ze("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Ze("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ze("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ze("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Ze("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ze("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Ze("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ze("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Ze("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Ze("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ze("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Ze("sliderStep"),isNumber:!0}]},{t:it}=Gi.global,xi=[{type:"group",label:it("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:it("text"),value:"text"},{label:it("i18nText"),value:"i18n-text"},{label:it("textarea"),value:"textarea"},{label:it("i18nTextarea"),value:"i18n-textarea"},{label:it("editor"),value:"editor"},{label:it("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:it("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:it("number"),value:"number"},{label:it("checkbox"),value:"checkbox"},{label:it("switch"),value:"switch"},{label:it("slider"),value:"slider"},{label:it("rangeSlider"),value:"range-slider"}]},{type:"group",label:it("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:it("singleSelect"),value:"single-select"},{label:it("multiSelect"),value:"multi-select"}]},{type:"group",label:it("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:it("date"),value:"date"},{label:it("daterange"),value:"daterange"},{label:it("datetime"),value:"datetime"},{label:it("datetimerange"),value:"datetimerange"},{label:it("year"),value:"year"},{label:it("yearrange"),value:"yearrange"},{label:it("month"),value:"month"},{label:it("monthrange"),value:"monthrange"},{label:it("quarter"),value:"quarter"},{label:it("quarterrange"),value:"quarterrange"},{label:it("week"),value:"week"}]},{type:"group",label:it("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:it("image"),value:"image"},{label:it("gallery"),value:"gallery"},{label:it("audio"),value:"audio"},{label:it("video"),value:"video"},{label:it("document"),value:"document"},{label:it("file"),value:"file"}]},{type:"group",label:it("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:it("newsArticle"),value:"news-article"},{label:it("newsArticles"),value:"news-articles"},{label:it("newsCategory"),value:"news-category"},{label:it("newsCategories"),value:"news-categories"},{label:it("newsTag"),value:"news-tag"},{label:it("newsTags"),value:"news-tags"}]},{type:"group",label:it("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:it("icon"),value:"icon"},{label:it("icons"),value:"icons"},{label:it("color"),value:"color"},{label:it("gradient"),value:"gradient"}]},{type:"group",label:it("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:it("contentItem"),value:"content-model-item"},{label:it("contentItems"),value:"content-model-items"},{label:it("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:it("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:it("list"),value:"list"},{label:it("i18nList"),value:"i18n-list"},{label:it("albums"),value:"albums"}]}],{useModel:Pv,mergeModels:Lv,defineComponent:Bv}=await pe("vue"),{renderList:Ls,Fragment:jn,openBlock:ul,createElementBlock:Aa,unref:Xe,createVNode:vt,withCtx:yt,resolveComponent:Lc,createElementVNode:fa,createBlock:dn,createCommentVNode:$i,toDisplayString:_a,createTextVNode:To,normalizeClass:Fv,isRef:Bc}=await pe("vue"),Ov={class:"flex items-center"},qv={class:"flex items-center justify-between w-full"},Rv={class:"flex items-center justify-between"},jv={class:"text-base font-semibold ml-4"},Kv={class:"text-xs text-slate-400"},Yv={class:"text-xs text-slate-400"},Gv={class:"text-xs text-slate-400"},Hv={class:"text-xs text-slate-400"},Qv={key:0},Wv={class:"text-xs text-slate-400"},Xv={key:1},Jv={class:"text-xs text-slate-400"},Zv={key:2},ey={class:"text-xs text-slate-400"},ty={key:3},ly={class:"text-xs text-slate-400"},ay={key:0,class:"w-full flex items-center"},ny={class:"w-full flex items-center"},oy={class:"w-full"},sy={class:"text-sm"},{storeToRefs:ry}=await pe("pinia"),{ref:as,computed:Ci,h:Bs,inject:Fs}=await pe("vue"),iy=Bv({__name:"Fields",props:Lv({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:n}=Ie(),{tr:t,formatKey:o,pickByTheme:a}=st(),{isLightTheme:l}=ry(Ro()),{data:d}=po(),W=u,re=Pv(u,"modelValue"),ne=K=>{for(const f of xi){const E=f.children.find(w=>w.value===K);if(E)return E.label}return null},B=as(!1),ve=as(null),P=as(null),V=as(null),c=as(),C=(K,f)=>{P.value=V.value=K,ve.value=f;for(const E of xi)E.children.find(b=>b.value===K)&&(c.value=E.key);B.value=!0},me=K=>{r(K).value=!r(K).value},r=K=>Ci({get:()=>K.value===P.value,set:f=>{f?P.value=K.value:P.value=null}}),be=Ci(()=>!P.value||P.value===V.value),R=()=>{P.value&&ve.value!==null&&(re.value[ve.value].type=P.value),B.value=!1},le=K=>Bs("div",{class:"flex items-center"},[Bs(H,{size:21,class:"text-gray-500"},{default:()=>Bs(_e,{icon:K.icon})}),Bs("span",{class:"font-normal ml-2 "},{default:()=>K.label}),Bs("span",{class:"text-gray-500 ml-1"},{default:()=>`(${K.children.length})`})]),L=Fs("renderSelectLabel"),S=Fs("removeCollectionField"),U=Fs("removeSingleton"),O=Fs("onCreateItemOption"),M=Fs("expandedNames",()=>Ci(()=>as([]).value));return(K,f)=>{const E=Ye,w=Da,b=el,j=mn,x=Na,X=rr,J=Ia,De=Ha,ae=fo,y=Wa,q=Lc("color-picker"),Te=Gr,I=Ga,p=Yr,s=_n,m=fn,D=Cl,T=Lc("Draggable"),F=Tl,z=Ld,ee=Pd,G=Vu,ut=Hr,St=Jl;return ul(),Aa(jn,null,[vt(T,{list:re.value,class:"w-full"},{default:yt(()=>[(ul(!0),Aa(jn,null,Ls(re.value,($e,It)=>(ul(),dn(D,{key:`field-${It}`,size:"small",class:"my-2",hoverable:""},{default:yt(()=>[vt(m,{"expanded-names":Xe(M)(W.type=="collection"?`c-${W.parentItemIndex}-f-${It}`:`s-${It}`).value,"onUpdate:expandedNames":ze=>Xe(M)(W.type=="collection"?`c-${W.parentItemIndex}-f-${It}`:`s-${It}`).value=ze,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":yt(({collapsed:ze})=>[fa("div",Ov,[vt(E,{size:"small",type:"error",secondary:"",onClick:()=>{W.type==="collection"?Xe(S)&&Xe(S)(W.collectionKey,It):Xe(U)&&Xe(U)(It)},title:Xe(e)("delete")},{default:yt(()=>[vt(Xe(H),null,{default:yt(()=>[vt(Xe(_e),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),f[3]||(f[3]=fa("div",{class:"w-4"},null,-1)),vt(Xe(H),null,{default:yt(()=>[ze?(ul(),dn(Xe(_e),{key:0,icon:"fa-solid:chevron-left"})):(ul(),dn(Xe(_e),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:yt(()=>[...f[4]||(f[4]=[fa("span",null,null,-1)])]),default:yt(()=>[vt(s,{name:"1"},{header:yt(()=>[fa("div",qv,[fa("div",Rv,[vt(Xe(H),{size:"18",class:"cursor-move mr-2"},{default:yt(()=>[vt(Xe(_e),{icon:"fa-solid:grip-lines"})]),_:1}),vt(w,{size:"small",type:"info"},{default:yt(()=>[To(_a(It+1),1)]),_:2},1024),fa("span",jv,_a(Xe(t)($e.label)),1)])])]),default:yt(()=>[vt(J,{span:24,"x-gap":"6"},{default:yt(()=>[vt(j,{span:6},{default:yt(()=>[fa("span",Kv,_a(Xe(e)("fieldKey")),1),vt(b,{value:$e.key,placeholder:Xe(e)("fieldKey"),class:"w-full","onUpdate:value":ze=>$e.key=Xe(o)(ze)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),vt(j,{span:10},{default:yt(()=>[vt(x,{modelValue:$e.label,"onUpdate:modelValue":ze=>$e.label=ze,placeholder:Xe(e)("title"),class:"w-full",sync:""},{label:yt(()=>[fa("span",Yv,_a(Xe(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),vt(j,{span:8},{default:yt(()=>[fa("span",Gv,_a(Xe(e)("type")),1),vt(X,null,{default:yt(()=>[vt(b,{value:ne($e.type),placeholder:Xe(e)("type"),class:"w-full field-type-input",readonly:"",onClick:ze=>C($e.type,It)},null,8,["value","placeholder","onClick"]),vt(E,{secondary:"",onClick:ze=>C($e.type,It)},{icon:yt(()=>[vt(Xe(_e),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),vt(De,{class:"!mt-4 !mb-2"}),vt(J,{span:24,"x-gap":"6"},{default:yt(()=>[vt(j,{span:10,class:"flex items-center"},{default:yt(()=>[vt(ae,{checked:$e.required,"onUpdate:checked":ze=>$e.required=ze,size:"medium"},{default:yt(()=>[To(_a(Xe(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),vt(j,{span:14},{default:yt(()=>[["content-model-item","content-model-items"].includes($e.type)?(ul(),Aa(jn,{key:0},[fa("span",Hv,_a(Xe(e)("contentModel")),1),vt(y,{value:$e.defaultValue,"onUpdate:value":ze=>$e.defaultValue=ze,options:Xe(d),placeholder:Xe(e)("contentModel"),"render-label":Xe(L),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(ul(),Aa(jn,{key:1},[$e.type==="color"||$e.type==="gradient"?(ul(),Aa("div",Qv,[fa("span",Wv,_a(Xe(e)("defaultValue")),1),vt(q,{"pure-color":$e.defaultValue,"onUpdate:pureColor":ze=>$e.defaultValue=ze,"default-pure-color":"#00000000","picker-type":"chrome","use-type":$e.type==="color"?"pure":"gradient",format:$e.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Xe(l)?"white":"black",lang:Xe(n)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):$e.type==="i18n-text"?(ul(),Aa("div",Xv,[vt(x,{modelValue:$e.defaultValue,"onUpdate:modelValue":ze=>$e.defaultValue=ze,placeholder:Xe(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:yt(()=>[fa("span",Jv,_a(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):$e.type==="i18n-textarea"?(ul(),Aa("div",Zv,[vt(x,{modelValue:$e.defaultValue,"onUpdate:modelValue":ze=>$e.defaultValue=ze,placeholder:Xe(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:yt(()=>[fa("span",ey,_a(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):$e.type==="i18n-editor"?(ul(),Aa("div",ty,[vt(x,{modelValue:$e.defaultValue,"onUpdate:modelValue":ze=>$e.defaultValue=ze,placeholder:Xe(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:yt(()=>[fa("span",ly,_a(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(ul(),dn(b,{key:4,value:$e.defaultValue,"onUpdate:value":ze=>$e.defaultValue=ze,placeholder:Xe(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),$e.type==="multi-select"||$e.type==="single-select"?(ul(),dn(De,{key:0,"title-placement":"left",class:"!my-4"},{default:yt(()=>[To(_a(Xe(e)("options")),1)]),_:1})):$i("",!0),vt(I,{name:"slide-fade",appear:""},{default:yt(()=>[$e.type==="multi-select"||$e.type==="single-select"?(ul(),Aa("div",ay,[vt(Te,{value:$e.options,"onUpdate:value":ze=>$e.options=ze,placeholder:Xe(e)("addOption"),"on-create":ze=>Xe(O)?Xe(O)(ze,It):null,"show-sort-button":"",class:"w-full"},{"create-button-default":yt(()=>[To(_a(Xe(e)("addOption")),1)]),default:yt(({value:ze})=>[fa("div",ny,[vt(b,{value:ze.value,placeholder:Xe(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":lt=>ze.value=Xe(o)(lt)},null,8,["value","placeholder","onUpdate:value"]),vt(x,{modelValue:ze.label,"onUpdate:modelValue":lt=>ze.label=lt,placeholder:Xe(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):$i("",!0)]),_:2},1024),(ul(!0),Aa(jn,null,Ls(Xe(Av),(ze,lt,Q)=>(ul(),Aa(jn,{key:Q},[$e.type===lt?(ul(),dn(m,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:yt(()=>[vt(Xe(H),{size:"18"},{default:yt(()=>[vt(Xe(_e),{icon:"carbon:chevron-right"})]),_:1})]),default:yt(()=>[vt(s,{name:"1"},{header:yt(()=>[vt(De,{"title-placement":"left",class:"!my-4"},{default:yt(()=>[To(_a(Xe(e)("settings")),1)]),_:1})]),default:yt(()=>[vt(I,{name:"slide-fade",appear:""},{default:yt(()=>[fa("div",oy,[(ul(!0),Aa(jn,null,Ls(ze,h=>(ul(),dn(J,{key:h.key,span:24,"x-gap":"12",class:"mb-2"},{default:yt(()=>[vt(j,{span:10},{default:yt(()=>[vt(b,{value:h.key,placeholder:Xe(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),vt(j,{span:14},{default:yt(()=>[h.isNumber?(ul(),dn(p,{key:0,value:$e.settings[h.key],"onUpdate:value":_=>$e.settings[h.key]=_,"default-value":h.defaultValue?parseInt(h.defaultValue):void 0,placeholder:h.placeholder||Xe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(ul(),dn(b,{key:1,value:$e.settings[h.key],"onUpdate:value":_=>$e.settings[h.key]=_,"default-value":h.defaultValue,placeholder:h.placeholder||Xe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):$i("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),vt(St,{show:Xe(B),"onUpdate:show":f[2]||(f[2]=$e=>Bc(B)?B.value=$e:null),preset:"card",size:"medium",style:{width:"650px"},title:Xe(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":yt(()=>[vt(F,{align:"center"},{default:yt(()=>[vt(E,{secondary:"",size:"small",type:"success",disabled:Xe(be),onClick:R},{default:yt(()=>[vt(Xe(_e),{icon:"carbon:checkmark",class:"mr-1"}),To(" "+_a(Xe(e)("select")),1)]),_:1},8,["disabled"]),vt(E,{secondary:"",size:"small",type:"error",onClick:f[0]||(f[0]=$e=>B.value=!1)},{default:yt(()=>[vt(Xe(_e),{icon:"carbon:close",class:"mr-1"}),To(" "+_a(Xe(e)("close")),1)]),_:1})]),_:1})]),default:yt(()=>[vt(ut,{animated:"",type:"line",size:"medium",placement:"left",value:Xe(c),"onUpdate:value":f[1]||(f[1]=$e=>Bc(c)?c.value=$e:null),style:{height:"100%"}},{default:yt(()=>[(ul(!0),Aa(jn,null,Ls(Xe(xi),($e,It)=>(ul(),dn(G,{name:$e.key,tab:le($e),key:It},{default:yt(()=>[vt(ee,{hoverable:"",clickable:"",bordered:""},{default:yt(()=>[(ul(!0),Aa(jn,null,Ls($e.children,ze=>(ul(),dn(z,{class:Fv(r(ze).value?`${Xe(a)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:ze.value,onClick:lt=>me(ze)},{suffix:yt(()=>[vt(ae,{checked:r(ze).value,"onUpdate:checked":lt=>r(ze).value=lt,size:"medium",onClick:lt=>me(ze)},null,8,["checked","onUpdate:checked","onClick"])]),default:yt(()=>[fa("span",sy,_a(ze.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Fc=Wn(iy,[["__scopeId","data-v-f2dba27a"]]),{useModel:cy,mergeModels:dy,defineComponent:uy}=await pe("vue"),{unref:Re,toDisplayString:ra,openBlock:pl,createElementBlock:Os,createCommentVNode:ns,createTextVNode:un,resolveComponent:nk,withCtx:ot,createVNode:ft,createElementVNode:Cn,createBlock:Hl,normalizeStyle:Ii,isRef:py,renderList:my,Fragment:Oc,normalizeClass:fy}=await pe("vue"),_y={class:"text-base"},vy={key:0},yy={key:0},gy={key:0},hy={class:"flex items-center"},by={class:"flex items-center justify-between w-full"},ky={class:"text-base font-semibold"},wy={class:"text-xs text-slate-400"},xy={class:"text-xs text-slate-400"},$y={class:"text-xs text-slate-400"},{defineAsyncComponent:Cy,ref:In,computed:Mr,watch:Dr,h:Iy,provide:to}=await pe("vue"),{storeToRefs:Vy}=await pe("pinia"),Xd=uy({__name:"index",props:dy({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=Cy(()=>ps(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(s=>s.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:n}=Ie(),{tr:t,pickByTheme:o,formatKey:a}=st(),{isLightTheme:l}=Vy(Ro());po();const d=u,W=cy(u,"show"),re=Je(),ne=Qe(),B=oa(),ve=In(!1),P=In(null),V=In({}),c=In({}),C={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},me=In(!1),r=In(!1),be=In(!1),R=In(!1),le=In({}),L=s=>Mr({get:()=>le.value[s]?["1"]:[],set:m=>{le.value[s]=m.length>0}}),S=Mr({get:()=>ue.omit(V.value,["index"]),set:s=>{V.value=V.value.index!==void 0?{index:V.value.index,...s}:{...s}}});Dr(()=>R.value,s=>{Object.entries(V.value).forEach(([m,D],T)=>{m!=="index"&&(le.value[`c-${T}`]=s,D?.items?.forEach((F,z)=>{le.value[`c-${T}-f-${z}`]=s}))})}),Dr(()=>be.value,s=>{Object.entries(V.value).forEach(([m,D],T)=>{m==="index"&&D?.forEach((F,z)=>{le.value[`s-${z}`]=s})})});const U=Mr(()=>ue.isEqual(V.value,c.value)),O=()=>{V.value?V.value.index&&Array.isArray(V.value.index)?V.value.index.push(ue.cloneDeep(C)):V.value.index=[ue.cloneDeep(C)]:V.value={index:[ue.cloneDeep(C)]}},M=s=>{V.value&&Array.isArray(V.value.index)&&V.value.index.splice(s,1)},K=()=>{const s=Al();V.value?V.value[s]={key:"",title:"",items:[]}:V.value={[s]:{key:"",title:"",items:[]}}},f=s=>{if(V.value){const{[s]:m,...D}=V.value;V.value=D}},E=s=>{V.value&&V.value[s].items.push(ue.cloneDeep(C))},w=(s,m)=>{if(V.value){const D=V.value[s];D&&Array.isArray(D.items)&&D.items.splice(m,1)}},b=s=>s.title&&s.key&&s.key!=="index",j=()=>V.value&&typeof V.value=="object"?Object.keys(V.value).filter(s=>s!=="index").length:0,x=Mr(()=>V.value?Object.keys(V.value).filter(s=>s!=="index"):[]),X=s=>x.value.indexOf(s),J=In(!1),De=async()=>{const s=ue.cloneDeep(V.value),m=ue.cloneDeep(V.value);J.value=!1,ve.value=!0,re.start();const D=[];if(ue.forIn(s,(T,F)=>{F!=="index"&&D.push(T.key)}),ue.forIn(s,(T,F)=>{if(F!=="index"){const z=ue.keys(s).filter(ee=>ee!=="index").indexOf(F);if(T&&T.key){if(T.key==="index")return ne.error(n("keyIndexIsReservedInCollections")),J.value=!0,!1;if(D.filter(G=>G==T.key).length>1)return ne.error(n("collectionKeyIsNotUnique",[T.key])),J.value=!0,!1;if(Array.isArray(T.items))for(const[G,ut]of T.items.entries())if(ut.key){if(T.items.filter($e=>$e.key===ut.key).length>1)return ne.error(n("fieldKeyOfCollectionIsNotUnique",[ut.key,T.key])),J.value=!0,!1}else return ne.error(n("fieldKeyOfCollectionIsRequired",[G+1,T.key])),J.value=!0,!1}else return ne.error(n("collectionKeyIsRequired",[z+1])),J.value=!0,!1}else if(Array.isArray(T))for(const[z,ee]of T.entries())if(ee.key){if(T.filter(ut=>ut.key===ee.key).length>1)return ne.error(n("singletonKeyIsNotUnique",[ee.key])),J.value=!0,!1}else return ne.error(n("singletonKeyIsRequired",[z+1])),J.value=!0,!1}),J.value){ve.value=!1,re.finish();return}ue.forIn(m,(T,F)=>{F!=="index"&&F!==T.key&&Md(s,F,T.key)}),await d.updateDataStructure(s),ve.value=!1,re.finish()},ae=()=>{ue.isEqual(V.value,c.value)?W.value=!1:B.warning({title:n("confirm"),content:n("confirmCloseDataStructure"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{W.value=!1}})};Dr(()=>d.rawDataStructure,s=>{V.value=s?ue.cloneDeep(s):{},ue.forIn(s,(m,D)=>{D!=="index"?(V.value[D].key=D,m?.items?.forEach((T,F)=>{V.value[D].items[F].settings||(V.value[D].items[F].settings={})})):m?.forEach((T,F)=>{V.value[D][F].settings||(V.value[D][F].settings={})})}),c.value=ue.cloneDeep(V.value)},{immediate:!0,deep:!0});const y=s=>Iy("span",{},{default:()=>t(s.title)}),q=(s,m)=>({value:`option_${m+1}${s+1}`,label:""}),{copy:Te,copied:I,isSupported:p}=jd();return Dr(()=>I.value,s=>{s&&ne.success(n("dataStructureCopied"))}),to("removeCollectionField",w),to("onCreateItemOption",q),to("renderSelectLabel",y),to("removeSingleton",M),to("addSingleton",O),to("expandCollections",R),to("expandSingletons",be),to("expandedNames",L),(s,m)=>{const D=Ji,T=_e,F=H,z=Ye,ee=Tl,G=Cl,ut=on,St=mn,$e=Da,It=el,ze=Na,lt=Ia,Q=Ha,h=Wi,_=_n,pt=fn,Se=ji;return pl(),Hl(Se,{modelValue:W.value,"onUpdate:modelValue":m[13]||(m[13]=ct=>W.value=ct),"close-on-esc":!1,closable:!1,onOnSizeChange:m[14]||(m[14]=ct=>{P.value=ct})},{header:ot(()=>[Cn("div",_y,[ft(D,{depth:"1"},{default:ot(()=>[un(ra(Re(n)("dataStructure"))+" ",1),u.title?(pl(),Os("span",vy,"Â -Â "+ra(u.title),1)):ns("",!0)]),_:1})])]),"header-extra":ot(()=>[ft(ee,{align:"center"},{default:ot(()=>[ft(z,{secondary:"",title:Re(n)("save"),loading:Re(ve),disabled:Re(U),onClick:m[0]||(m[0]=ct=>De())},{icon:ot(()=>[ft(F,null,{default:ot(()=>[ft(T,{icon:"carbon:save"})]),_:1})]),default:ot(()=>[un(" "+ra(Re(n)("save")),1)]),_:1},8,["title","loading","disabled"]),ft(z,{secondary:"",type:"error",title:Re(n)("close"),disabled:Re(ve),onClick:m[1]||(m[1]=ct=>ae())},{icon:ot(()=>[ft(F,null,{default:ot(()=>[ft(T,{icon:"carbon:close"})]),_:1})]),default:ot(()=>[un(" "+ra(Re(n)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:ot(()=>[Cn("section",{style:Ii(`min-height: ${Re(P)?.windowHeight-Re(P)?.headerHeight-5}px`),class:fy(`w-full h-full ${Re(o)("bg-slate-200","bg-zinc-800")}`)},[ft(lt,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:ot(()=>[ft(St,{class:"mx-2 mt-2"},{default:ot(()=>[ft(G,{embedded:"",bordered:"",segmented:""},{header:ot(()=>[un(ra(Re(n)("singletons"))+"Â  ",1),Re(V).index?.length?(pl(),Os("span",yy," ("+ra(Re(V).index?.length)+") ",1)):ns("",!0)]),"header-extra":ot(()=>[ft(ee,null,{default:ot(()=>[Re(p)&&Re(me)?(pl(),Hl(z,{key:0,size:"small",type:"warning",secondary:"",title:Re(n)("copy"),onClick:m[2]||(m[2]=ct=>Re(Te)(JSON.stringify(Re(V).index)))},{icon:ot(()=>[ft(F,null,{default:ot(()=>[ft(T,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):ns("",!0),ft(z,{size:"small",type:"warning",secondary:"",onClick:m[3]||(m[3]=()=>{me.value=!Re(me),Re(me)&&(r.value=!1)})},{default:ot(()=>[ft(F,null,{default:ot(()=>[Re(me)?(pl(),Hl(T,{key:0,icon:"carbon:code"})):(pl(),Hl(T,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),ft(z,{size:"small",type:"primary",secondary:"",onClick:m[4]||(m[4]=ct=>be.value=!Re(be))},{default:ot(()=>[ft(F,null,{default:ot(()=>[Re(be)?(pl(),Hl(T,{key:0,icon:"carbon:collapse-categories"})):(pl(),Hl(T,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),ft(z,{size:"small",type:"primary",secondary:"",onClick:m[5]||(m[5]=ct=>O())},{default:ot(()=>[ft(F,{class:"mr-1"},{default:ot(()=>[ft(T,{icon:"carbon:add-alt"})]),_:1}),un(" "+ra(Re(n)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Re(me)?(pl(),Hl(Re(e),{key:0,height:Re(P)?.windowHeight-Re(P)?.headerHeight-100,"dark-theme":!Re(l),class:"creopse-json-editor",mode:"tree",json:Re(V).index,"onUpdate:json":m[6]||(m[6]=ct=>Re(V).index=ct)},null,8,["height","dark-theme","json"])):(pl(),Hl(ut,{key:1,style:Ii(`max-height: ${Re(P)?.windowHeight-Re(P)?.headerHeight-100}px`)},{default:ot(()=>[ft(Fc,{modelValue:Re(V).index,"onUpdate:modelValue":m[7]||(m[7]=ct=>Re(V).index=ct),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),ft(St,{class:"mx-2 mt-2"},{default:ot(()=>[ft(G,{embedded:"",bordered:"",segmented:""},{header:ot(()=>[un(ra(Re(n)("collections"))+"Â  ",1),j()>0?(pl(),Os("span",gy," ("+ra(j())+") ",1)):ns("",!0)]),"header-extra":ot(()=>[ft(ee,null,{default:ot(()=>[Re(p)&&Re(r)?(pl(),Hl(z,{key:0,size:"small",type:"warning",secondary:"",title:Re(n)("copy"),onClick:m[8]||(m[8]=ct=>Re(Te)(JSON.stringify(Re(S))))},{icon:ot(()=>[ft(F,null,{default:ot(()=>[ft(T,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):ns("",!0),ft(z,{size:"small",type:"warning",secondary:"",onClick:m[9]||(m[9]=()=>{r.value=!Re(r),Re(r)&&(me.value=!1)})},{default:ot(()=>[ft(F,null,{default:ot(()=>[Re(r)?(pl(),Hl(T,{key:0,icon:"carbon:code"})):(pl(),Hl(T,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),ft(z,{size:"small",type:"primary",secondary:"",onClick:m[10]||(m[10]=ct=>R.value=!Re(R))},{default:ot(()=>[ft(F,null,{default:ot(()=>[Re(R)?(pl(),Hl(T,{key:0,icon:"carbon:collapse-categories"})):(pl(),Hl(T,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),ft(z,{size:"small",type:"primary",secondary:"",onClick:m[11]||(m[11]=ct=>K())},{default:ot(()=>[ft(F,{class:"mr-1"},{default:ot(()=>[ft(T,{icon:"carbon:add-alt"})]),_:1}),un(" "+ra(Re(n)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Re(r)?(pl(),Hl(Re(e),{key:0,height:Re(P)?.windowHeight-Re(P)?.headerHeight-100,"dark-theme":!Re(l),class:"creopse-json-editor",mode:"tree",json:Re(S),"onUpdate:json":m[12]||(m[12]=ct=>py(S)?S.value=ct:null)},null,8,["height","dark-theme","json"])):(pl(),Hl(ut,{key:1,style:Ii(`max-height: ${Re(P)?.windowHeight-Re(P)?.headerHeight-100}px`)},{default:ot(()=>[(pl(!0),Os(Oc,null,my(Re(V)||{},(ct,kt,Y)=>(pl(),Os(Oc,{key:Y},[kt!="index"?(pl(),Hl(G,{key:0,size:"small",class:"my-2",embedded:""},{default:ot(()=>[ft(pt,{"expanded-names":L(`c-${Y}`).value,"onUpdate:expandedNames":ye=>L(`c-${Y}`).value=ye,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":ot(({collapsed:ye})=>[Cn("div",hy,[ft(z,{size:"small",type:"error",secondary:"",onClick:xe=>f(kt)},{default:ot(()=>[ft(F,{class:"mr-1"},{default:ot(()=>[ft(T,{icon:"carbon:trash-can"})]),_:1}),un(" "+ra(Re(n)("delete")),1)]),_:1},8,["onClick"]),m[15]||(m[15]=Cn("div",{class:"w-4"},null,-1)),ft(F,null,{default:ot(()=>[ye?(pl(),Hl(T,{key:0,icon:"fa-solid:chevron-left"})):(pl(),Hl(T,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:ot(()=>[...m[16]||(m[16]=[Cn("span",null,null,-1)])]),default:ot(()=>[ft(_,{name:"1"},{header:ot(()=>[Cn("div",by,[ft(ee,null,{default:ot(()=>[ft($e,{size:"small",type:"success"},{default:ot(()=>[un(ra(X(kt)+1),1)]),_:2},1024),Cn("span",ky,ra(Re(t)(ct.title)),1)]),_:2},1024)])]),default:ot(()=>[ft(lt,{span:24,"x-gap":"6"},{default:ot(()=>[ft(St,{span:6},{default:ot(()=>[Cn("span",wy,ra(Re(n)("fieldKey")),1),ft(It,{value:ct.key,placeholder:Re(n)("collectionKey"),class:"w-full",size:"small","onUpdate:value":ye=>ct.key=Re(a)(ye)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),ft(St,{span:11},{default:ot(()=>[ft(ze,{modelValue:ct.title,"onUpdate:modelValue":ye=>ct.title=ye,placeholder:Re(n)("title"),class:"w-full",size:"small",sync:""},{label:ot(()=>[Cn("span",xy,ra(Re(n)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),ft(St,{span:7},{default:ot(()=>[Cn("span",$y,ra(Re(n)("actions")),1),ft(z,{block:"",size:"small",type:"primary",disabled:!b(ct),secondary:"",class:"w-full",onClick:ye=>E(kt)},{default:ot(()=>[ft(F,{class:"mr-1"},{default:ot(()=>[ft(T,{icon:"carbon:add-alt"})]),_:1}),un(" "+ra(Re(n)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),ft(Q,{class:"!my-4.75"}),b(ct)?(pl(),Hl(Fc,{key:0,modelValue:Re(V)[kt].items,"onUpdate:modelValue":ye=>Re(V)[kt].items=ye,"parent-item-index":Y,"collection-key":kt,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(pl(),Hl(h,{key:1,bordered:"",type:"info"},{default:ot(()=>[un(ra(Re(n)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):ns("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:Ea}=Gi.global,Sy=[{label:Ea("text"),value:"text"},{label:Ea("textarea"),value:"textarea"},{label:Ea("number"),value:"number"},{label:Ea("switch"),value:"switch"},{label:Ea("singleSelect"),value:"single-select"},{label:Ea("multiSelect"),value:"multi-select"},{label:Ea("slider"),value:"slider"},{label:Ea("image"),value:"image"},{label:Ea("icon"),value:"icon"},{label:Ea("color"),value:"color"},{label:Ea("gradient"),value:"gradient"},{label:Ea("dimensions"),value:"dimensions"},{label:Ea("background"),value:"background"},{label:Ea("border"),value:"border"},{label:Ea("shadow"),value:"shadow"}],{useModel:Ey,mergeModels:Uy,defineComponent:Ty}=await pe("vue"),{unref:We,toDisplayString:kl,openBlock:wl,createElementBlock:os,createCommentVNode:qs,createTextVNode:Fa,resolveComponent:qc,withCtx:je,createVNode:He,createElementVNode:ql,createBlock:ia,isRef:My,renderList:Rc,Fragment:jc,normalizeStyle:Kc,normalizeClass:Dy}=await pe("vue"),Ny={class:"text-base"},zy={key:0},Ay={key:0},Py={class:"flex items-center"},Ly={class:"flex items-center justify-between w-full"},By={class:"text-base font-semibold"},Fy={class:"text-xs text-slate-400"},Oy={class:"text-xs text-slate-400"},qy={class:"text-xs text-slate-400"},Ry={class:"flex items-center"},jy={class:"flex items-center justify-between w-full"},Ky={class:"flex items-center justify-between"},Yy={class:"text-base font-semibold ml-4"},Gy={class:"text-xs text-slate-400"},Hy={class:"text-xs text-slate-400"},Qy={class:"text-xs text-slate-400"},Wy={key:0},Xy={class:"text-xs text-slate-400"},Jy={key:0,class:"w-full flex items-center"},Zy={class:"w-full flex items-center"},{defineAsyncComponent:eg,ref:lo,computed:Vi,watch:Si}=await pe("vue"),{storeToRefs:tg}=await pe("pinia"),lg=Ty({__name:"index",props:Uy({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=eg(()=>ps(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(y=>y.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),n=oa(),t=Qe(),o=Je(),{t:a,locale:l}=Ie(),{pickByTheme:d,tr:W,formatKey:re}=st(),{isLightTheme:ne}=tg(Ro()),B=u,ve=Ey(u,"show"),P=lo(null),V=lo(!1),c=lo({}),C=lo({}),me={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},r=lo(!1),be=lo(!1),R=lo({}),le=y=>Vi({get:()=>R.value[y]?["1"]:[],set:q=>{R.value[y]=q.length>0}});Si(()=>B.settingsStructure,y=>{c.value=y?ue.cloneDeep(y):{},ue.forIn(y,(q,Te)=>{c.value[Te].key=Te}),C.value=ue.cloneDeep(c.value)},{immediate:!0,deep:!0});const L=Vi(()=>ue.isEqual(c.value,C.value)),S=lo(!1),U=async()=>{const y=ue.cloneDeep(c.value),q=ue.cloneDeep(c.value);S.value=!1,V.value=!0,o.start();const Te=Object.values(y).map(I=>I.key);if(ue.forIn(y,(I,p)=>{const s=ue.keys(y).indexOf(p);if(I&&I.key){if(Te.filter(D=>D==I.key).length>1)return t.error(a("groupKeyIsNotUnique",[I.key])),S.value=!0,!1;if(Array.isArray(I.items))for(const[D,T]of I.items.entries())if(T.key){if(I.items.filter(z=>z.key===T.key).length>1)return t.error(a("fieldKeyOfGroupIsNotUnique",[T.key,I.key])),S.value=!0,!1}else return t.error(a("fieldKeyOfGroupIsRequired",[D+1,I.key])),S.value=!0,!1}else return t.error(a("groupKeyIsRequired",[s+1])),S.value=!0,!1}),S.value){V.value=!1,o.finish();return}ue.forIn(q,(I,p)=>{p!==I.key&&Md(y,p,I.key)}),await B.updateSettingsStructure(y),V.value=!1,o.finish()},O=()=>{ue.isEqual(c.value,C.value)?ve.value=!1:n.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{ve.value=!1}})},M=()=>c.value&&typeof c.value=="object"?Object.keys(c.value).length:0,K=Vi(()=>c.value?Object.keys(c.value):[]),f=y=>K.value.indexOf(y),E=()=>{const y=Al();c.value?c.value[y]={key:"",title:"",items:[]}:c.value={[y]:{key:"",title:"",items:[]}}},w=y=>{if(c.value){const{[y]:q,...Te}=c.value;c.value=Te}},b=y=>{c.value&&c.value[y].items.push(ue.cloneDeep(me))},j=(y,q)=>{if(c.value){const Te=c.value[y];Te&&Array.isArray(Te.items)&&Te.items.splice(q,1)}},x=y=>y.title&&y.key,X=(y,q)=>({value:`option_${q+1}${y+1}`,label:""});Si(()=>be.value,y=>{Object.entries(c.value).forEach(([q,Te],I)=>{R.value[`c-${I}`]=y,Te?.items?.forEach((p,s)=>{R.value[`c-${I}-f-${s}`]=y})})});const{copy:J,copied:De,isSupported:ae}=jd();return Si(()=>De.value,y=>{y&&t.success(a("settingsStructureCopied"))}),(y,q)=>{const Te=Ji,I=_e,p=H,s=Ye,m=Tl,D=mn,T=Cl,F=Da,z=el,ee=Na,G=Ia,ut=Ha,St=Wa,$e=fo,It=qc("color-picker"),ze=Gr,lt=Ga,Q=_n,h=fn,_=qc("Draggable"),pt=Wi,Se=on,ct=ji;return wl(),ia(ct,{modelValue:ve.value,"onUpdate:modelValue":q[7]||(q[7]=kt=>ve.value=kt),"close-on-esc":!1,closable:!1,onOnSizeChange:q[8]||(q[8]=kt=>{P.value=kt})},{header:je(()=>[ql("div",Ny,[He(Te,{depth:"1"},{default:je(()=>[Fa(kl(We(a)("sectionSettings"))+" ",1),u.title?(wl(),os("span",zy,"Â -Â "+kl(u.title),1)):qs("",!0)]),_:1})])]),"header-extra":je(()=>[He(m,{align:"center"},{default:je(()=>[He(s,{secondary:"",title:We(a)("save"),loading:We(V),disabled:We(L),onClick:q[0]||(q[0]=kt=>U())},{icon:je(()=>[He(p,null,{default:je(()=>[He(I,{icon:"carbon:save"})]),_:1})]),default:je(()=>[Fa(" "+kl(We(a)("save")),1)]),_:1},8,["title","loading","disabled"]),He(s,{secondary:"",type:"error",title:We(a)("close"),disabled:We(V),onClick:q[1]||(q[1]=kt=>O())},{icon:je(()=>[He(p,null,{default:je(()=>[He(I,{icon:"carbon:close"})]),_:1})]),default:je(()=>[Fa(" "+kl(We(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:je(()=>[ql("section",{style:Kc(`min-height: ${We(P)?.windowHeight-We(P)?.headerHeight-5}px`),class:Dy(`w-full h-full ${We(d)("bg-slate-200","bg-zinc-800")}`)},[He(G,{cols:"4","item-responsive":"",responsive:"screen"},{default:je(()=>[He(D,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),He(D,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:je(()=>[He(T,{embedded:"",bordered:"",segmented:""},{header:je(()=>[Fa(kl(We(a)("groups"))+"Â  ",1),M()>0?(wl(),os("span",Ay," ("+kl(M())+") ",1)):qs("",!0)]),"header-extra":je(()=>[He(m,null,{default:je(()=>[We(ae)&&We(r)?(wl(),ia(s,{key:0,size:"small",type:"warning",secondary:"",title:We(a)("copy"),onClick:q[2]||(q[2]=kt=>We(J)(JSON.stringify(We(c))))},{icon:je(()=>[He(p,null,{default:je(()=>[He(I,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):qs("",!0),He(s,{size:"small",type:"warning",secondary:"",onClick:q[3]||(q[3]=()=>{r.value=!We(r)})},{default:je(()=>[He(p,null,{default:je(()=>[We(r)?(wl(),ia(I,{key:0,icon:"carbon:code"})):(wl(),ia(I,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),He(s,{size:"small",type:"primary",secondary:"",onClick:q[4]||(q[4]=kt=>be.value=!We(be))},{default:je(()=>[He(p,null,{default:je(()=>[We(be)?(wl(),ia(I,{key:0,icon:"carbon:collapse-categories"})):(wl(),ia(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),He(s,{size:"small",type:"primary",secondary:"",onClick:q[5]||(q[5]=kt=>E())},{default:je(()=>[He(p,{class:"mr-1"},{default:je(()=>[He(I,{icon:"carbon:add-alt"})]),_:1}),Fa(" "+kl(We(a)("addGroup")),1)]),_:1})]),_:1})]),_:1}),We(r)?(wl(),ia(We(e),{key:0,height:We(P)?.windowHeight-We(P)?.headerHeight-100,"dark-theme":!We(ne),class:"creopse-json-editor",mode:"tree",json:We(c),"onUpdate:json":q[6]||(q[6]=kt=>My(c)?c.value=kt:null)},null,8,["height","dark-theme","json"])):(wl(),ia(Se,{key:1,style:Kc(`max-height: ${We(P)?.windowHeight-We(P)?.headerHeight-100}px`)},{default:je(()=>[(wl(!0),os(jc,null,Rc(We(c)||{},(kt,Y,ye)=>(wl(),ia(T,{key:ye,size:"small",class:"my-2",embedded:""},{default:je(()=>[He(h,{"expanded-names":le(`c-${ye}`).value,"onUpdate:expandedNames":xe=>le(`c-${ye}`).value=xe,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":je(({collapsed:xe})=>[ql("div",Py,[He(s,{size:"small",type:"error",secondary:"",onClick:we=>w(Y)},{default:je(()=>[He(p,{class:"mr-1"},{default:je(()=>[He(I,{icon:"carbon:trash-can"})]),_:1}),Fa(" "+kl(We(a)("delete")),1)]),_:1},8,["onClick"]),q[9]||(q[9]=ql("div",{class:"w-4"},null,-1)),He(p,null,{default:je(()=>[xe?(wl(),ia(I,{key:0,icon:"fa-solid:chevron-left"})):(wl(),ia(I,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:je(()=>[...q[10]||(q[10]=[ql("span",null,null,-1)])]),default:je(()=>[He(Q,{name:"1"},{header:je(()=>[ql("div",Ly,[He(m,null,{default:je(()=>[He(F,{size:"small",type:"success"},{default:je(()=>[Fa(kl(f(Y)+1),1)]),_:2},1024),ql("span",By,kl(We(W)(kt.title)),1)]),_:2},1024)])]),default:je(()=>[He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(D,{span:6},{default:je(()=>[ql("span",Fy,kl(We(a)("fieldKey")),1),He(z,{value:kt.key,placeholder:We(a)("groupKey"),class:"w-full",size:"small","onUpdate:value":xe=>kt.key=We(re)(xe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),He(D,{span:11},{default:je(()=>[He(ee,{modelValue:kt.title,"onUpdate:modelValue":xe=>kt.title=xe,placeholder:We(a)("title"),class:"w-full",size:"small",sync:""},{label:je(()=>[ql("span",Oy,kl(We(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),He(D,{span:7},{default:je(()=>[ql("span",qy,kl(We(a)("actions")),1),He(s,{block:"",size:"small",type:"primary",disabled:!x(kt),secondary:"",class:"w-full",onClick:xe=>b(Y)},{default:je(()=>[He(p,{class:"mr-1"},{default:je(()=>[He(I,{icon:"carbon:add-alt"})]),_:1}),Fa(" "+kl(We(a)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),He(ut,{class:"!my-4.75"}),x(kt)?(wl(),ia(_,{key:0,list:We(c)[Y].items,class:"w-full"},{default:je(()=>[(wl(!0),os(jc,null,Rc(We(c)[Y].items,(xe,we)=>(wl(),ia(T,{key:`field-${we}`,size:"small",class:"my-2",hoverable:""},{default:je(()=>[He(h,{"expanded-names":le(`c-${Y}-f-${we}`).value,"onUpdate:expandedNames":at=>le(`c-${Y}-f-${we}`).value=at,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":je(({collapsed:at})=>[ql("div",Ry,[He(s,{size:"small",type:"error",secondary:"",onClick:()=>{j(Y,we)},title:We(a)("delete")},{default:je(()=>[He(p,null,{default:je(()=>[He(I,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),q[11]||(q[11]=ql("div",{class:"w-4"},null,-1)),He(p,null,{default:je(()=>[at?(wl(),ia(I,{key:0,icon:"fa-solid:chevron-left"})):(wl(),ia(I,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:je(()=>[...q[12]||(q[12]=[ql("span",null,null,-1)])]),default:je(()=>[He(Q,{name:"1"},{header:je(()=>[ql("div",jy,[ql("div",Ky,[He(p,{size:"18",class:"cursor-move mr-2"},{default:je(()=>[He(I,{icon:"fa-solid:grip-lines"})]),_:1}),He(F,{size:"small",type:"info"},{default:je(()=>[Fa(kl(we+1),1)]),_:2},1024),ql("span",Yy,kl(We(W)(xe.label)),1)])])]),default:je(()=>[He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(D,{span:6},{default:je(()=>[ql("span",Gy,kl(We(a)("fieldKey")),1),He(z,{value:xe.key,placeholder:We(a)("fieldKey"),class:"w-full","onUpdate:value":at=>xe.key=We(re)(at)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),He(D,{span:10},{default:je(()=>[He(ee,{modelValue:xe.label,"onUpdate:modelValue":at=>xe.label=at,placeholder:We(a)("title"),class:"w-full",sync:""},{label:je(()=>[ql("span",Hy,kl(We(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),He(D,{span:8},{default:je(()=>[ql("span",Qy,kl(We(a)("type")),1),He(St,{value:xe.type,"onUpdate:value":at=>xe.type=at,options:We(Sy),placeholder:We(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),He(ut,{class:"!mt-4 !mb-2"}),He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(D,{span:10,class:"flex items-center"},{default:je(()=>[He($e,{checked:xe.required,"onUpdate:checked":at=>xe.required=at,size:"medium"},{default:je(()=>[Fa(kl(We(a)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),He(D,{span:14},{default:je(()=>[xe.type==="color"||xe.type==="gradient"?(wl(),os("div",Wy,[ql("span",Xy,kl(We(a)("defaultValue")),1),He(It,{"pure-color":xe.defaultValue,"onUpdate:pureColor":at=>xe.defaultValue=at,"default-pure-color":"#00000000","picker-type":"chrome","use-type":xe.type==="color"?"pure":"gradient",format:xe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:We(ne)?"white":"black",lang:We(l)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(wl(),ia(z,{key:1,value:xe.defaultValue,"onUpdate:value":at=>xe.defaultValue=at,placeholder:We(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),xe.type==="multi-select"||xe.type==="single-select"?(wl(),ia(ut,{key:0,"title-placement":"left",class:"!my-4"},{default:je(()=>[Fa(kl(We(a)("options")),1)]),_:1})):qs("",!0),He(lt,{name:"slide-fade",appear:""},{default:je(()=>[xe.type==="multi-select"||xe.type==="single-select"?(wl(),os("div",Jy,[He(ze,{value:xe.options,"onUpdate:value":at=>xe.options=at,placeholder:We(a)("addOption"),"on-create":at=>X?X(at,we):null,"show-sort-button":"",class:"w-full"},{"create-button-default":je(()=>[Fa(kl(We(a)("addOption")),1)]),default:je(({value:at})=>[ql("div",Zy,[He(z,{value:at.value,placeholder:We(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":ll=>at.value=We(re)(ll)},null,8,["value","placeholder","onUpdate:value"]),He(ee,{modelValue:at.label,"onUpdate:modelValue":ll=>at.label=ll,placeholder:We(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):qs("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(wl(),ia(pt,{key:1,bordered:"",type:"info"},{default:je(()=>[Fa(kl(We(a)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),He(D,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),ag=Wn(lg,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:ng}=await pe("vue"),{unref:$t,renderList:Yc,Fragment:Rs,openBlock:Vn,createElementBlock:js,resolveComponent:ok,createBlock:Ks,createCommentVNode:Gc,withCtx:Ul,createVNode:xl,createElementVNode:Ys,toDisplayString:Mo,createTextVNode:Gs,withModifiers:Ei,normalizeClass:Hc,isRef:Nr}=await pe("vue"),og={class:"flex items-center"},sg={class:"text-base"},rg={class:"mt-2"},{ref:Sn}=await pe("vue"),ig=ng({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,pickByTheme:t,isInDevMode:o}=st(),{data:a}=Ki(),{mutate:l,isPending:d}=Sm(),{mutate:W,isPending:re}=Wd(),ne=Sn(24),B=Sn(1),ve=E=>{ne.value=E},P={name:"",title:"",content:"",slug:""},V=Sn(!1),c=Sn(null),C=Sn(P),me={title:[{required:!0,message:e("fillRequired")}]},r=Sn(null),be=E=>{r.value=ue.cloneDeep(E),C.value=ue.cloneDeep(E||P),V.value=!0},R=async()=>(c.value?.validate(async E=>{if(!E){const w={title:C.value.title};r.value?W({slug:r.value.slug,...w},{onSuccess:()=>{}}):l({name:ue.startCase(ue.camelCase(n(C.value.title))).replace(/\s+/g,""),...w},{onSuccess:()=>{}}),V.value=!1}}),!1),le=Sn(null),L=Sn(!1),S=E=>{le.value=E,L.value=!0},U=async E=>{W({slug:le.value?.slug,dataStructure:E},{onSuccess:w=>{S(w)}})},O=Sn(null),M=Sn(!1),K=E=>{O.value=E,M.value=!0},f=async E=>{W({slug:O.value?.slug,settingsStructure:E},{onSuccess:w=>{K(w)}})};return(E,w)=>{const b=_e,j=H,x=Ye,X=Tl,J=Ha,De=Da,ae=_n,y=fn,q=Cl,Te=jo,I=Qa,p=Na,s=Va,m=Ca,D=Jl;return Vn(),js(Rs,null,[$t(a)&&$t(a).length?(Vn(),js(Rs,{key:0},[(Vn(!0),js(Rs,null,Yc($t(a).slice(($t(B)-1)*$t(ne),$t(B)*$t(ne)),T=>(Vn(),Ks(q,{key:T.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:Ul(()=>[xl(y,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ul(({collapsed:F})=>[xl(j,null,{default:Ul(()=>[F?(Vn(),Ks(b,{key:0,icon:"fa-solid:chevron-left"})):(Vn(),Ks(b,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ul(()=>[...w[6]||(w[6]=[Ys("span",null,null,-1)])]),default:Ul(()=>[xl(ae,{name:"1"},{header:Ul(()=>[Ys("div",og,[xl(X,null,{default:Ul(()=>[$t(o)?(Vn(),js(Rs,{key:0},[xl(x,{size:"small",type:"primary",secondary:"",onClick:Ei(F=>S(T),["stop"])},{default:Ul(()=>[xl(j,{class:"mr-1"},{default:Ul(()=>[xl(b,{icon:"carbon:data-1"})]),_:1}),Gs(" "+Mo($t(e)("dataStructure")),1)]),_:1},8,["onClick"]),xl(x,{size:"small",type:"info",secondary:"",title:$t(e)("sectionSettings"),onClick:Ei(F=>K(T),["stop"])},{default:Ul(()=>[xl(j,{class:"mr-1"},{default:Ul(()=>[xl(b,{icon:"carbon:settings-edit"})]),_:1}),Gs(" "+Mo($t(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Gc("",!0),xl(x,{size:"small",type:"primary",secondary:"",title:$t(e)("edit"),onClick:Ei(F=>be(T),["stop"])},{default:Ul(()=>[xl(j,null,{default:Ul(()=>[xl(b,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),xl(J,{vertical:"",class:Hc($t(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ys("span",sg,Mo($t(n)(T.title)),1)])]),default:Ul(()=>[Ys("div",null,Mo($t(e)("sectionUsedXTimesOnPages",[T.pagesCount])),1),Ys("section",rg,[(Vn(!0),js(Rs,null,Yc($t(vu)(T.pages||[],"id"),F=>(Vn(),Ks(De,{key:F.id,size:"small",class:"mr-1",type:"success"},{default:Ul(()=>[Gs(Mo($t(n)(F.title)),1)]),_:2},1024))),128))]),Gc("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),xl(Te,{page:$t(B),"onUpdate:page":w[0]||(w[0]=T=>Nr(B)?B.value=T:null),class:"mt-5 justify-end","show-size-picker":"","page-size":$t(ne),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil($t(a).length/$t(ne)),"onUpdate:pageSize":ve},{prefix:Ul(()=>[Gs(Mo(`${$t(a).length} ${$t(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Vn(),Ks(q,{key:1,size:"large",class:Hc(`mb-2 !border-dashed !border-2 ${$t(t)("!border-zinc-300","!border-zinc-600")}`)},{default:Ul(()=>[xl(I,{description:$t(e)("noSectionAvailable")},{icon:Ul(()=>[xl(j,null,{default:Ul(()=>[xl(b,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),xl(D,{show:$t(V),"onUpdate:show":w[2]||(w[2]=T=>Nr(V)?V.value=T:null),loading:$t(d)||$t(re),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:$t(r)?$t(e)("editSection"):$t(e)("addSection"),"positive-text":$t(e)("validate"),"negative-text":$t(e)("cancel"),onPositiveClick:R,onNegativeClick:w[3]||(w[3]=T=>V.value=!1)},{default:Ul(()=>[xl(m,{ref_key:"formRef",ref:c,model:$t(C),rules:me,"show-require-mark":!1,size:"medium"},{default:Ul(()=>[xl(s,{"show-label":!1,path:"title",class:"mt-5"},{default:Ul(()=>[xl(p,{modelValue:$t(C).title,"onUpdate:modelValue":w[1]||(w[1]=T=>$t(C).title=T),placeholder:$t(e)("title"),class:"w-full",sync:""},{label:Ul(()=>[Gs(Mo($t(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),xl(Xd,{show:$t(L),"onUpdate:show":w[4]||(w[4]=T=>Nr(L)?L.value=T:null),title:$t(n)($t(le)?.title),"raw-data-structure":$t(le)?.dataStructure,"update-data-structure":U},null,8,["show","title","raw-data-structure"]),xl(ag,{show:$t(M),"onUpdate:show":w[5]||(w[5]=T=>Nr(M)?M.value=T:null),title:$t(n)($t(O)?.title),"settings-structure":$t(O)?.settingsStructure,"update-settings-structure":f},null,8,["show","title","settings-structure"])],64)}}}),Jd=(u,e)=>nr(["newsletter-emails"],async()=>{const{request:n}=Ge(),t=await n({url:"/newsletter/emails"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),Zd=(u,e)=>nr(["newsletter-phones"],async()=>{const{request:n}=Ge(),t=await n({url:"/newsletter/phones"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),cg=(u,e)=>nr(["newsletter-campaigns"],async()=>{const{request:n}=Ge(),t=await n({url:"/newsletter/campaigns"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u});class dg{id;email;createdAt;updatedAt;constructor(e,n,t,o){this.email=e,this.id=n,this.createdAt=t,this.updatedAt=o}}const ug=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-emails"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/newsletter/emails",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},pg=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-emails"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/newsletter/emails/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},mg=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["newsletter-emails"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/emails/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},fg=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["newsletter-emails"],operation:"batch",getItemId:a=>{if(a instanceof dg){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterEmail ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{t.start();try{for(let l=0;l<a.length;l++)await e({url:`/newsletter/emails/${a[l]}`,method:"delete"});return a}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},_g=()=>{const{request:u}=Ge();return Ya(async e=>{const n=await u({method:"post",url:"/newsletter/emails",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:vg}=await pe("vue"),{unref:ht,createVNode:qt,withCtx:Rt,toDisplayString:ao,createTextVNode:Do,resolveComponent:sk,createElementVNode:Qc,openBlock:Ui,createBlock:Wc,createCommentVNode:yg,isRef:Xc,Fragment:gg,createElementBlock:hg}=await pe("vue"),bg={class:"flex items-center justify-center"},{ref:En,h:Ua,computed:kg,onBeforeUnmount:wg}=await pe("vue"),xg=vg({__name:"Email",setup(u){const e=Je(),n=Qe(),t=oa(),{data:o,refetch:a,isPending:l}=Jd(),{mutate:d,isPending:W}=fg(),{mutate:re}=mg(),{mutate:ne,isPending:B}=ug(),{mutate:ve,isPending:P}=pg(),{mutateAsync:V}=_g(),{t:c,locale:C}=Ie(),me=En(""),r=En(),be={pageSize:12,prefix:({itemCount:s})=>Ua("div",{class:"font-bold"},{default:()=>`${c("total")}: ${s}`})},R=[{type:"selection"},{title:c("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return Ua("div",{},{default:()=>s.email})}},{title:c("updateAt"),key:"updatedAt",width:125,render(s){return Ua("div",{},{default:()=>pn(s.updatedAt,{locale:C.value,outPattern:"DD MMMM YYYY"})})}},{title:c("createdAt"),key:"createdAt",width:125,render(s){return Ua("div",{},{default:()=>pn(s.createdAt,{locale:C.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Ua(el,{ref:r,placeholder:c("search"),value:me.value,onInput:s=>{me.value=s}},{suffix:()=>Ua(H,{},{default:()=>Ua(_e,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return Ua("div",{class:"flex justify-end items-center w-full"},[Ua(Ye,{size:"small",type:"warning",secondary:!0,onClick:()=>{f(s)},renderIcon:()=>Ua(H,null,{default:()=>Ua(_e,{icon:"carbon:edit"})})}),Ua("div",{class:"w-2"}),Ua(Ye,{size:"small",type:"error",secondary:!0,onClick:()=>{t.warning({title:c("confirm"),content:c("confirmDeleteEmailAddress"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{s.id&&re({id:s.id})}})},renderIcon:()=>Ua(H,null,{default:()=>Ua(_e,{icon:"carbon:trash-can"})})})])},fixed:"right"}],le=kg(()=>{if(!me.value)return o.value;const s=o.value?.filter(m=>m.email.toLowerCase().includes(me.value.toLowerCase()));return r.value&&r.value.focus(),s}),L=En(!1),S=En(!1),U=En(null),O=En(null),M=En({email:""}),K={email:[{required:!0,message:c("fillRequired")},{trigger:["input"],validator(s,m){return m&&!ds.isEmail(m)?new Error(c("invalidEmail")):!0}}]},f=s=>{U.value=ue.cloneDeep(s),s?M.value=ue.cloneDeep(s):M.value={email:""},S.value=!0},E=async()=>(O.value?.validate(async s=>{if(!s){const m={email:M.value.email};U.value?U.value.email!==M.value.email&&(o.value||[]).findIndex(D=>D.email==M.value.email)>-1?n.error(c("sameEmailAddressMessage")):ve({id:U.value.id,...m}):(o.value||[]).findIndex(D=>D.email==M.value.email)>-1?n.error(c("sameEmailAddressMessage")):ne(m),S.value=!1}}),!1);let w=null;const b=()=>{w&&(w.destroy(),w=null)};wg(b);const j=(s,m)=>m.map(D=>s.map(T=>D[T])),x=()=>{w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ps(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var m=["no","email","createdAt","updatedAt"];const D=ue.sortBy(o.value?.map((F,z)=>({no:z+1,...F})),"email"),T=j(m,D);try{s.export_json_to_excel({header:m,data:T,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),b()}catch{b(),n.error(c("anErrorOccurred"))}})},X=()=>{w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ps(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var m=["email"];const D=j(m,[{email:"adresse@email.com"}]);try{s.export_json_to_excel({header:m,data:D,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),b()}catch{b(),n.error(c("anErrorOccurred"))}})},J=En(!1),De=async({results:s})=>{L.value=!0,e.start(),w||(w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}));for(let m=0;m<s.length;m++)s[m].email&&o.value?.findIndex(D=>D.email==s[m].email)==-1&&(w&&(w.content=`${c("pleaseBePatient")}: ${m} ${c("task_s")} / ${s.length}`),await V({email:s[m].email}));await a(),b(),e.finish(),L.value=!1,J.value=!1},ae=En(Al()),y=En([]),q=s=>s.id,Te=s=>{y.value=s},I=()=>{y.value=[],ae.value=Al()},p=async()=>(y.value.length?t.warning({title:c("confirm"),content:c("deleteSelectionWarningMessage",[y.value.length]),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:()=>{d(y.value,{onSuccess:()=>{I()}})}}):n.warning(c("noItemSelected")),!1);return(s,m)=>{const D=Bd,T=Tl,F=Ka,z=Cl,ee=Ga,G=Kr,ut=jr,St=Va,$e=Ca,It=Jl,ze=Kd;return Ui(),hg(gg,null,[qt(F,{to:"#alt-action"},{default:Rt(()=>[qt(T,null,{default:Rt(()=>[qt(D,{onPositiveClick:m[0]||(m[0]=lt=>x())},{trigger:Rt(()=>[qt(ht(Ye),{type:"success",secondary:""},{icon:Rt(()=>[qt(ht(H),{size:"18"},{default:Rt(()=>[qt(ht(_e),{icon:"carbon:upload"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("export")),1)]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("exportDataInExcelFile")),1)]),_:1}),qt(ht(Ye),{type:"info",secondary:"",onClick:m[1]||(m[1]=lt=>J.value=!0)},{icon:Rt(()=>[qt(ht(H),{size:"18"},{default:Rt(()=>[qt(ht(_e),{icon:"carbon:download"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("import")),1)]),_:1}),qt(ht(Ye),{type:"primary",secondary:"",onClick:m[2]||(m[2]=lt=>f(null))},{icon:Rt(()=>[qt(ht(H),{size:"18"},{default:Rt(()=>[qt(ht(_e),{icon:"carbon:add-alt"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),qt(ee,{name:"slide-fade",appear:""},{default:Rt(()=>[ht(y).length?(Ui(),Wc(z,{key:0,class:"my-2",size:"small",embedded:""},{default:Rt(()=>[qt(T,{align:"center",justify:"space-between"},{default:Rt(()=>[Qc("span",null,ao(ht(c)("nbItemsSelected",[ht(y).length])),1),qt(T,{align:"center",justify:"space-between"},{default:Rt(()=>[qt(ht(Ye),{type:"error",size:"small",secondary:"",onClick:p},{icon:Rt(()=>[qt(ht(H),null,{default:Rt(()=>[qt(ht(_e),{icon:"carbon:trash-can"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("delete")),1)]),_:1}),qt(ht(Ye),{type:"warning",size:"small",secondary:"",onClick:I},{icon:Rt(()=>[qt(ht(H),null,{default:Rt(()=>[qt(ht(_e),{icon:"carbon:close"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):yg("",!0)]),_:1}),qt(ut,null,{default:Rt(()=>[(Ui(),Wc(G,{key:ht(ae),columns:R,data:ht(le),pagination:be,loading:ht(l)||ht(W),"single-line":!1,"scroll-x":800,"row-key":q,size:"small",striped:"","onUpdate:checkedRowKeys":Te},null,8,["data","loading","row-key"]))]),_:1}),qt(It,{show:ht(S),"onUpdate:show":m[4]||(m[4]=lt=>Xc(S)?S.value=lt:null),loading:ht(B)||ht(P),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:ht(U)?ht(c)("editEmailAddress"):ht(c)("addEmailAddress"),"positive-text":ht(c)("validate"),"negative-text":ht(c)("cancel"),onPositiveClick:E,onNegativeClick:m[5]||(m[5]=lt=>S.value=!1)},{default:Rt(()=>[qt($e,{ref_key:"formRef",ref:O,class:"mt-5",model:ht(M),rules:K,"show-require-mark":!1,size:"medium"},{default:Rt(()=>[qt(St,{label:ht(c)("emailAddress"),path:"email"},{default:Rt(()=>[qt(ht(el),{value:ht(M).email,"onUpdate:value":m[3]||(m[3]=lt=>ht(M).email=lt),placeholder:ht(c)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),qt(It,{show:ht(J),"onUpdate:show":m[7]||(m[7]=lt=>Xc(J)?J.value=lt:null),loading:ht(L),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:ht(c)("import")},{default:Rt(()=>[qt(ze,{class:"my-5","on-success":De}),Qc("div",bg,[qt(ht(Ye),{type:"info",size:"small",secondary:"",onClick:m[6]||(m[6]=lt=>X())},{icon:Rt(()=>[qt(ht(H),null,{default:Rt(()=>[qt(ht(_e),{icon:"carbon:download"})]),_:1})]),default:Rt(()=>[Do(" "+ao(ht(c)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class $g{id;phone;createdAt;updatedAt;constructor(e,n,t,o){this.phone=e,this.id=n,this.createdAt=t,this.updatedAt=o}}const Cg=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-phones"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/newsletter/phones",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Ig=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-phones"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/newsletter/phones/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Vg=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["newsletter-phones"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/phones/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Sg=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return bt({queryKey:["newsletter-phones"],operation:"batch",getItemId:a=>{if(a instanceof $g){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterPhone ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{t.start();try{for(let l=0;l<a.length;l++)await e({url:`/newsletter/phones/${a[l]}`,method:"delete"});return a}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Eg=()=>{const{request:u}=Ge();return Ya(async e=>{const n=await u({method:"post",url:"/newsletter/phones",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Ug}=await pe("vue"),{unref:xt,createVNode:jt,withCtx:Kt,toDisplayString:no,createTextVNode:No,resolveComponent:rk,createElementVNode:Jc,openBlock:Ti,createBlock:Zc,createCommentVNode:Tg,isRef:ed,Fragment:Mg,createElementBlock:Dg}=await pe("vue"),Ng={class:"flex items-center justify-center"},{ref:Un,h:Ta,computed:zg,onBeforeUnmount:Ag}=await pe("vue"),Pg=Ug({__name:"Phone",setup(u){const e=Je(),n=Qe(),t=oa(),{data:o,refetch:a,isPending:l}=Zd(),{mutate:d,isPending:W}=Sg(),{mutate:re}=Vg(),{mutate:ne,isPending:B}=Cg(),{mutate:ve,isPending:P}=Ig(),{mutateAsync:V}=Eg(),{t:c,locale:C}=Ie(),me=Un(""),r=Un(),be={pageSize:12,prefix:({itemCount:s})=>Ta("div",{class:"font-bold"},{default:()=>`${c("total")}: ${s}`})},R=[{type:"selection"},{title:c("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return Ta("div",{},{default:()=>s.phone})}},{title:c("updateAt"),key:"updatedAt",width:125,render(s){return Ta("div",{},{default:()=>pn(s.updatedAt,{locale:C.value,outPattern:"DD MMMM YYYY"})})}},{title:c("createdAt"),key:"createdAt",width:125,render(s){return Ta("div",{},{default:()=>pn(s.createdAt,{locale:C.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Ta(el,{ref:r,placeholder:c("search"),value:me.value,onInput:s=>{me.value=s}},{suffix:()=>Ta(H,{},{default:()=>Ta(_e,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return Ta("div",{class:"flex justify-end items-center w-full"},[Ta(Ye,{size:"small",type:"warning",secondary:!0,onClick:()=>{f(s)},renderIcon:()=>Ta(H,null,{default:()=>Ta(_e,{icon:"carbon:edit"})})}),Ta("div",{class:"w-2"}),Ta(Ye,{size:"small",type:"error",secondary:!0,onClick:()=>{t.warning({title:c("confirm"),content:c("confirmDeletePhoneNumber"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{s.id&&re({id:s.id})}})},renderIcon:()=>Ta(H,null,{default:()=>Ta(_e,{icon:"carbon:trash-can"})})})])},fixed:"right"}],le=zg(()=>{if(!me.value)return o.value;const s=o.value?.filter(m=>m.phone.toLowerCase().includes(me.value.toLowerCase()));return r.value&&r.value.focus(),s}),L=Un(!1),S=Un(!1),U=Un(null),O=Un(null),M=Un({phone:""}),K={phone:[{required:!0,message:c("fillRequired")},{trigger:["input"],validator(s,m){return m&&!Ou(m)?new Error(c("invalidNumber")):!0}}]},f=s=>{U.value=ue.cloneDeep(s),s?M.value=ue.cloneDeep(s):M.value={phone:""},S.value=!0},E=async()=>(O.value?.validate(async s=>{if(!s){const m={phone:M.value.phone.replace(/\s+/g,"")};U.value?U.value.phone!==M.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(D=>D.phone==M.value.phone.replace(/\s+/g,""))>-1?n.error(c("samePhoneNumberMessage")):ve({id:U.value.id,...m}):(o.value||[]).findIndex(D=>D.phone==M.value.phone.replace(/\s+/g,""))>-1?n.error(c("samePhoneNumberMessage")):ne(m),S.value=!1}}),!1);let w=null;const b=()=>{w&&(w.destroy(),w=null)};Ag(b);const j=(s,m)=>m.map(D=>s.map(T=>D[T])),x=()=>{w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ps(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var m=["no","phone","createdAt","updatedAt"];const D=ue.sortBy(o.value?.map((F,z)=>({no:z+1,...F})),"phone"),T=j(m,D);try{s.export_json_to_excel({header:m,data:T,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),b()}catch{b(),n.error(c("anErrorOccurred"))}})},X=()=>{w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ps(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var m=["phone"];const D=j(m,[{phone:"+XXX XXX XXXXX"}]);try{s.export_json_to_excel({header:m,data:D,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),b()}catch{b(),n.error(c("anErrorOccurred"))}})},J=Un(!1),De=async({results:s})=>{L.value=!0,e.start(),w||(w=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}));for(let m=0;m<s.length;m++)s[m].phone&&o.value?.findIndex(D=>D.phone.replace(/\s+/g,"")==s[m].phone.replace(/\s+/g,""))==-1&&(w&&(w.content=`${c("pleaseBePatient")}: ${m} ${c("task_s")} / ${s.length}`),await V({phone:s[m].phone.replace(/\s+/g,"")}));await a(),b(),e.finish(),L.value=!1,J.value=!1},ae=Un(Al()),y=Un([]),q=s=>s.id,Te=s=>{y.value=s},I=()=>{y.value=[],ae.value=Al()},p=async()=>(y.value.length?t.warning({title:c("confirm"),content:c("deleteSelectionWarningMessage",[y.value.length]),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:()=>{d(y.value,{onSuccess:()=>{I()}})}}):n.warning(c("noItemSelected")),!1);return(s,m)=>{const D=Bd,T=Tl,F=Ka,z=Cl,ee=Ga,G=Kr,ut=jr,St=Fu,$e=Va,It=Ca,ze=Jl,lt=Kd;return Ti(),Dg(Mg,null,[jt(F,{to:"#alt-action"},{default:Kt(()=>[jt(T,null,{default:Kt(()=>[jt(D,{onPositiveClick:m[0]||(m[0]=Q=>x())},{trigger:Kt(()=>[jt(xt(Ye),{type:"success",secondary:""},{icon:Kt(()=>[jt(xt(H),{size:"18"},{default:Kt(()=>[jt(xt(_e),{icon:"carbon:upload"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("export")),1)]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("exportDataInExcelFile")),1)]),_:1}),jt(xt(Ye),{type:"info",secondary:"",onClick:m[1]||(m[1]=Q=>J.value=!0)},{icon:Kt(()=>[jt(xt(H),{size:"18"},{default:Kt(()=>[jt(xt(_e),{icon:"carbon:download"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("import")),1)]),_:1}),jt(xt(Ye),{type:"primary",secondary:"",onClick:m[2]||(m[2]=Q=>f(null))},{icon:Kt(()=>[jt(xt(H),{size:"18"},{default:Kt(()=>[jt(xt(_e),{icon:"carbon:add-alt"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),jt(ee,{name:"slide-fade",appear:""},{default:Kt(()=>[xt(y).length?(Ti(),Zc(z,{key:0,class:"my-2",size:"small",embedded:""},{default:Kt(()=>[jt(T,{align:"center",justify:"space-between"},{default:Kt(()=>[Jc("span",null,no(xt(c)("nbItemsSelected",[xt(y).length])),1),jt(T,{align:"center",justify:"space-between"},{default:Kt(()=>[jt(xt(Ye),{type:"error",size:"small",secondary:"",onClick:p},{icon:Kt(()=>[jt(xt(H),null,{default:Kt(()=>[jt(xt(_e),{icon:"carbon:trash-can"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("delete")),1)]),_:1}),jt(xt(Ye),{type:"warning",size:"small",secondary:"",onClick:I},{icon:Kt(()=>[jt(xt(H),null,{default:Kt(()=>[jt(xt(_e),{icon:"carbon:close"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Tg("",!0)]),_:1}),jt(ut,null,{default:Kt(()=>[(Ti(),Zc(G,{key:xt(ae),columns:R,data:xt(le),pagination:be,loading:xt(l)||xt(W),"single-line":!1,"scroll-x":800,"row-key":q,size:"small",striped:"","onUpdate:checkedRowKeys":Te},null,8,["data","loading","row-key"]))]),_:1}),jt(ze,{show:xt(S),"onUpdate:show":m[4]||(m[4]=Q=>ed(S)?S.value=Q:null),loading:xt(B)||xt(P),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:xt(U)?xt(c)("editPhoneNumber"):xt(c)("addPhoneNumber"),"positive-text":xt(c)("validate"),"negative-text":xt(c)("cancel"),onPositiveClick:E,onNegativeClick:m[5]||(m[5]=Q=>S.value=!1)},{default:Kt(()=>[jt(It,{ref_key:"formRef",ref:O,class:"mt-5",model:xt(M),rules:K,"show-require-mark":!1,size:"medium"},{default:Kt(()=>[jt($e,{label:xt(c)("phone"),path:"phone"},{default:Kt(()=>[jt(St,{modelValue:xt(M).phone,"onUpdate:modelValue":m[3]||(m[3]=Q=>xt(M).phone=Q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),jt(ze,{show:xt(J),"onUpdate:show":m[7]||(m[7]=Q=>ed(J)?J.value=Q:null),loading:xt(L),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:xt(c)("import")},{default:Kt(()=>[jt(lt,{class:"my-5","on-success":De}),Jc("div",Ng,[jt(xt(Ye),{type:"info",size:"small",secondary:"",onClick:m[6]||(m[6]=Q=>X())},{icon:Kt(()=>[jt(xt(H),null,{default:Kt(()=>[jt(xt(_e),{icon:"carbon:download"})]),_:1})]),default:Kt(()=>[No(" "+no(xt(c)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Lg="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:td,mergeModels:Bg,defineComponent:Fg}=await pe("vue"),{unref:Bt,toDisplayString:zo,openBlock:xa,createElementBlock:oo,createCommentVNode:Hs,createTextVNode:zr,resolveComponent:ik,withCtx:tl,createVNode:Ql,createElementVNode:Ar,Fragment:ss,renderList:Mi,createBlock:so,normalizeStyle:Di,normalizeClass:Og}=await pe("vue"),qg={class:"text-base"},Rg={key:0},jg={key:1},Kg={class:"text-base font-bold"},{ref:Ao,inject:Yg,computed:Gg,watch:Hg,reactive:Pr}=await pe("vue"),Qg=Fg({__name:"DataForm",props:Bg({submitData:{},contentModel:{},readonly:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,n=td(u,"show"),t=td(u,"data"),o=Je(),a=Qe(),{t:l}=Ie(),{tr:d,pickByTheme:W,editKeysToCamelCase:re}=st(),ne=Ao(null),B=Ao(!1),ve=Yg("currentEditItem"),P=Gg(()=>ue.isEqual(t.value,ve?.value)&&ue.isEqual(c.value,me.value)),V=()=>{n.value=!1,B.value=!1},c=Ao({}),C=Ao(Al()),me=Ao({}),r=Ao(),be=Ao();Hg(()=>n.value,le=>{le&&(Ri(t.value.contentModelData)?c.value=Pr(t.value.contentModelData):c.value=Pr({}),ue.forIn(re(e.contentModel?.dataStructure??{}),(L,S)=>{(!c.value[S]||Array.isArray(c.value[S])&&c.value[S].length==0)&&(S==="index"?c.value[S]=Pr({}):c.value[S]=Pr([]))}),me.value=ue.cloneDeep(c.value),C.value=Al())},{immediate:!0});const R=async()=>{B.value=!0,o.start();const le=r.value&&await r.value(),L=be.value&&await be.value();(!r.value||le)&&(!be.value||L)?await e.submitData(c.value):a.error(l("mandatoryFieldsNotFilledIn")),o.finish(),B.value=!1};return(le,L)=>{const S=Ji,U=sr,O=or,M=_e,K=H,f=Ye,E=Tl,w=Cl,b=on,j=mn,x=Ia,X=ji;return xa(),so(X,{modelValue:n.value,"onUpdate:modelValue":L[3]||(L[3]=J=>n.value=J),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=J=>{ne.value=J})},{header:tl(()=>[Ar("div",qg,[Ql(S,{depth:"1"},{default:tl(()=>[zr(zo(Bt(d)(e.contentModel?.title))+" ",1),e.readonly?(xa(),oo("span",Rg," Â -Â "+zo(Bt(l)("preview")),1)):(xa(),oo("span",jg," Â -Â "+zo(Bt(ve)?Bt(l)("editItem"):Bt(l)("addItem")),1))]),_:1})])]),"header-extra":tl(()=>[Ql(E,{align:"center"},{default:tl(()=>[e.readonly?Hs("",!0):(xa(),oo(ss,{key:0},[Ar("span",Kg,zo(Bt(l)("status"))+":",1),Ql(O,{value:t.value.isActive,"onUpdate:value":L[0]||(L[0]=J=>t.value.isActive=J),name:"isActive",class:"w-full"},{default:tl(()=>[Ql(U,{value:!1,label:Bt(l)("unpublished")},null,8,["label"]),Ql(U,{value:!0,label:Bt(l)("published")},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=Ar("div",{class:"w-4"},null,-1)),Ql(f,{secondary:"",type:"success",title:Bt(l)("save"),loading:Bt(B),disabled:Bt(P),onClick:L[1]||(L[1]=J=>R())},{icon:tl(()=>[Ql(K,null,{default:tl(()=>[Ql(M,{icon:"carbon:save"})]),_:1})]),default:tl(()=>[zr(" "+zo(Bt(l)("save")),1)]),_:1},8,["title","loading","disabled"])],64)),Ql(f,{secondary:"",type:"error",title:Bt(l)("close"),disabled:Bt(B),onClick:L[2]||(L[2]=J=>V())},{icon:tl(()=>[Ql(K,null,{default:tl(()=>[Ql(M,{icon:"carbon:close"})]),_:1})]),default:tl(()=>[zr(" "+zo(Bt(l)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:tl(()=>[Ar("section",{style:Di(`min-height: ${Bt(ne)?.windowHeight-Bt(ne)?.headerHeight-5}px`),class:Og(`w-full h-full ${Bt(W)("bg-slate-200","bg-zinc-800")}`)},[Ql(x,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:tl(()=>[Ql(j,{class:"ml-4 mt-2"},{default:tl(()=>[Ql(b,{style:Di(`height: ${Bt(ne)?.windowHeight-Bt(ne)?.headerHeight-50}px`)},{default:tl(()=>[(xa(!0),oo(ss,null,Mi(Bt(re)(u.contentModel?.dataStructure),(J,De)=>(xa(),oo(ss,{key:De},[String(De)==="index"?(xa(),so(w,{key:0,size:"small",class:"mb-2"},{default:tl(()=>[(xa(),so(ar,{key:`${Bt(C)}-${De}-form-1`,modelValue:Bt(c)[De],"onUpdate:modelValue":ae=>Bt(c)[De]=ae,items:J,onUpdate:(ae,y)=>{r.value=y}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):Hs("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),Ql(j,{class:"mr-4 mt-2"},{default:tl(()=>[Ql(b,{style:Di(`height: ${Bt(ne)?.windowHeight-Bt(ne)?.headerHeight-50}px`)},{default:tl(()=>[(xa(!0),oo(ss,null,Mi(Bt(re)(u.contentModel?.dataStructure),(J,De)=>(xa(),oo(ss,{key:De},[String(De)!=="index"?(xa(),so(w,{key:0,title:Bt(d)(J.title),size:"small",class:"mb-2"},{"header-extra":tl(()=>[e.readonly?Hs("",!0):(xa(),so(f,{key:0,quaternary:"",size:"small",onClick:()=>Bt(c)[De].push({})},{icon:tl(()=>[Ql(K,null,{default:tl(()=>[Ql(M,{icon:"carbon:add-alt"})]),_:1})]),default:tl(()=>[zr(" "+zo(Bt(l)("add")),1)]),_:1},8,["onClick"]))]),default:tl(()=>[(xa(!0),oo(ss,null,Mi(Bt(c)[De],(ae,y)=>(xa(),so(w,{key:y,title:String(y+1),size:"small",class:"mb-2"},{"header-extra":tl(()=>[e.readonly?Hs("",!0):(xa(),so(f,{key:0,secondary:"",type:"error",size:"small",onClick:()=>Bt(c)[De].splice(y,1)},{icon:tl(()=>[Ql(K,null,{default:tl(()=>[Ql(M,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]),default:tl(()=>[(xa(),so(ar,{key:`${Bt(C)}-${De}-${y}-form-2`,modelValue:Bt(c)[De][y],"onUpdate:modelValue":q=>Bt(c)[De][y]=q,items:J.items,onUpdate:(q,Te)=>{be.value=Te}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):Hs("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:Wg,mergeModels:Xg,defineComponent:Jg}=await pe("vue"),{unref:Yt,resolveComponent:ck,createVNode:Wl,toDisplayString:Lr,createTextVNode:ld,withCtx:ca,renderList:Zg,Fragment:ad,openBlock:Qs,createElementBlock:nd,createElementVNode:Br,createBlock:Ni,normalizeClass:e1,isRef:t1}=await pe("vue"),{inject:l1,ref:Ws,h:od,computed:sd}=await pe("vue"),a1={class:"flex items-center justify-between"},n1={class:"flex flex-col"},o1={class:"text-sm font-bold"},s1={class:"text-xs font-normal"},r1=Jg({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Xg(["update"],["update:show"]),setup(u,{emit:e}){const{t:n}=Ie(),{pickByTheme:t,tr:o,mergeArrays:a}=st(),{extractItemTitle:l}=ms(),{data:d}=po(),{mutate:W,isPending:re}=Gd(),ne=oa(),B=e,ve=Wg(u,"show"),P=l1("currentEditItem"),V=async E=>{ne.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{W({id:P?.value?.id,relatedItems:P?.value?.relatedItems?.filter(w=>w.id!==E.id)?.map(w=>w.id)},{onSuccess:()=>{B("update",P?.value?.id)}})}})},c=E=>d.value?.find(w=>w.id===E.contentModelId),C=Ws(!1),me=Ws(null),r=Ws({contentModelId:null,itemId:null}),be={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},R=async()=>(me.value?.validate(async E=>{if(!E){const w=P?.value?.relatedItems?.map(b=>b.id)||[];W({id:P?.value?.id,relatedItems:[...w,r.value.itemId]},{onSuccess:()=>{B("update",P?.value?.id),C.value=!1}})}}),!1),le=E=>od("span",{},{default:()=>o(E.title)}),L=E=>sd(()=>od("span",{},{default:()=>l(E,c(E))})),S=Ws([]),U=Ws([]),{mutateAsync:O,isPending:M}=ec(),K=async(E,w)=>{if(!E.length){U.value=[];return}U.value=await O({query:E,contentModelId:w})},f=sd(()=>a(S.value,U.value,"id").filter(E=>E.id!==P?.value?.id));return(E,w)=>{const b=_e,j=Ye,x=Tl,X=H,J=Cl,De=on,ae=Qa,y=mo,q=Jl,Te=Wa,I=Va,p=Ca;return Qs(),nd(ad,null,[Wl(q,{show:ve.value,"onUpdate:show":w[2]||(w[2]=s=>ve.value=s),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Yt(n)("linkContentModelItems")},{"header-extra":ca(()=>[Wl(x,{align:"center"},{default:ca(()=>[Wl(j,{secondary:"",size:"small",type:"primary",disabled:Yt(re),onClick:w[0]||(w[0]=s=>C.value=!0)},{default:ca(()=>[Wl(b,{icon:"carbon:add-alt",class:"mr-1"}),ld(" "+Lr(Yt(n)("add")),1)]),_:1},8,["disabled"]),Wl(j,{secondary:"",size:"small",type:"error",disabled:Yt(re),onClick:w[1]||(w[1]=s=>ve.value=!1)},{default:ca(()=>[Wl(b,{icon:"carbon:close",class:"mr-1"}),ld(" "+Lr(Yt(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:ca(()=>[Wl(y,{show:Yt(re)},{default:ca(()=>[Yt(P)?.relatedItems?.length?(Qs(),Ni(De,{key:0,style:{"max-height":"400px"}},{default:ca(()=>[(Qs(!0),nd(ad,null,Zg(Yt(P)?.relatedItems,s=>(Qs(),Ni(J,{key:s.id,embedded:"",size:"small",class:"mb-2"},{default:ca(()=>[Br("div",a1,[Br("div",n1,[Br("span",o1,Lr(Yt(l)(s,c(s))),1),Br("span",s1,Lr(Yt(o)(c(s)?.title)),1)]),Wl(x,null,{default:ca(()=>[Wl(j,{size:"small",type:"error",secondary:"",onClick:m=>V(s)},{default:ca(()=>[Wl(X,null,{default:ca(()=>[Wl(b,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Qs(),Ni(J,{key:1,size:"large",class:e1(`mb-2 !border-dashed !border-2 ${Yt(t)("!border-zinc-300","!border-zinc-600")}`)},{default:ca(()=>[Wl(ae,{description:Yt(n)("noLinkAdded")},{icon:ca(()=>[Wl(X,null,{default:ca(()=>[Wl(b,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Wl(q,{show:Yt(C),"onUpdate:show":w[6]||(w[6]=s=>t1(C)?C.value=s:null),loading:Yt(re),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Yt(n)("addLink"),"positive-text":Yt(n)("validate"),"negative-text":Yt(n)("cancel"),onPositiveClick:R,onNegativeClick:w[7]||(w[7]=s=>C.value=!1)},{default:ca(()=>[Wl(p,{ref_key:"formRef",ref:me,model:Yt(r),rules:be,"show-require-mark":!1,size:"medium",class:"my-5"},{default:ca(()=>[Wl(I,{label:Yt(n)("contentModel"),path:"contentModelId"},{default:ca(()=>[Wl(Te,{value:Yt(r).contentModelId,"onUpdate:value":w[3]||(w[3]=s=>Yt(r).contentModelId=s),options:Yt(d),placeholder:Yt(n)("contentModel"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Wl(I,{label:Yt(n)("itemToLink"),path:"itemId"},{default:ca(()=>[Wl(Te,{value:Yt(r).itemId,"onUpdate:value":w[4]||(w[4]=s=>Yt(r).itemId=s),options:Yt(f)||[],placeholder:Yt(n)("itemToLink"),"render-label":s=>L(s).value,loading:Yt(M),disabled:!Yt(r).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:w[5]||(w[5]=s=>K(s,Yt(r).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:i1}=await pe("vue"),{useModel:c1,defineComponent:d1}=await pe("vue"),{unref:Ee,toDisplayString:ml,createTextVNode:ta,resolveComponent:dk,isRef:rs,withCtx:Le,createVNode:Pe,createElementVNode:la,openBlock:Nl,createElementBlock:nn,createCommentVNode:Po,renderList:rd,Fragment:Lo,createBlock:Tn,normalizeClass:id,withModifiers:Fr}=await pe("vue"),u1={key:0,class:"w-full flex items-center justify-between gap-4"},p1={class:"flex items-center gap-3"},m1={key:0},f1={class:"flex items-center justify-center h-full"},_1=["src"],v1={class:"text-center text-dimgray text-sm"},y1={class:"flex items-center"},g1={class:"text-base"},h1={key:1,class:"flex items-center justify-center"},b1={key:0},k1={key:1},{ref:Pa,computed:cd,watch:w1,isReadonly:uk,provide:x1}=await pe("vue"),{defineStore:$1}=await pe("pinia"),C1=d1({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=Ie(),{extractItemTitle:n,getContentModelItemCreatorTypeLabel:t,getContentModelItemCreatorTypeTagType:o}=ms(),{tr:a,pickByTheme:l}=st(),d=oa(),W=Qe(),re=yu(),ne=c1(u,"modelValue"),B=Pa(!1),ve=Pa(!1),P=Pa(!1),V=Pa(!1),c=Pa([]),{mutate:C}=Xp(),{mutate:me}=Wp(),{mutate:r}=Gd(),{mutate:be}=Jp(),R=Pa(0),le=Pa(24),L=Pa(1),S=cd(()=>({contentModelId:ne.value?.id,pageSize:le.value,page:L.value})),U=m=>{L.value=m,K()},O=m=>{le.value=m,K()},{data:M,refetch:K,isPending:f}=gu(S);w1(()=>M.value,m=>{c.value=m?.items||[],R.value=m?.meta?.total||0,L.value=m?.meta?.currentPage||1},{deep:!0,immediate:!0});const E=Pa(null),w=Pa({title:"",contentModelData:"",isActive:!0}),b=(m,D=!1)=>{E.value=ue.cloneDeep(m),V.value=D,m?w.value=ue.cloneDeep(m):w.value={title:"",contentModelData:"",isActive:!0},B.value=!0},j=m=>{E.value=ue.cloneDeep(m),P.value=!0},x=m=>{E.value=ue.cloneDeep(m),ve.value=!0},X=async m=>{await K();const D=c.value.find(T=>T.id===m);D&&j(D)},J=async m=>{d.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{m.id&&C({id:m.id})}})},De=async m=>{const D={title:w.value.title,contentModelData:m,isActive:w.value.isActive,contentModelId:ne.value?.id,createdByType:lr.ADMIN,createdBy:re.userData?.id};E.value?r({id:E.value.id,...D}):me(D),B.value=!1},ae=Pa(!1),y=Pa(Al()),q=Pa({}),Te=cd(()=>{let m=0;for(const D in q.value)q.value[D]&&m++;return m});function I(){q.value={},K()}const p=async()=>(Te.value?d.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[Te.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{be(q.value,{onSuccess:()=>{q.value={}}})}}):W.warning(e("noItemSelected")),!1),s=$1("content-model-items-store",()=>({uiFormat:Pa("list")}))();return x1("currentEditItem",E),(m,D)=>{const T=fo,F=_e,z=H,ee=Ye,G=Tl,ut=Ka,St=sr,$e=or,It=Ad,ze=ir,lt=Da,Q=Cl,h=Ga,_=mn,pt=Ia,Se=Ha,ct=Eu,kt=Su,Y=_n,ye=fn,xe=jo,we=mo,at=Qa,ll=Uu,zt=Jl;return Nl(),nn(Lo,null,[Pe(ut,{to:"#alt-action"},{default:Le(()=>[Pe(G,{align:"center"},{default:Le(()=>[Pe(T,{checked:Ee(ae),"onUpdate:checked":[D[0]||(D[0]=Ke=>rs(ae)?ae.value=Ke:null),D[1]||(D[1]=Ke=>{for(const al of Ee(c))al.id&&(Ee(q)[al.id]=Ke);y.value=("uuidv4"in m?m.uuidv4:i1(Al))()})],disabled:!Ee(c).length},{default:Le(()=>[ta(ml(Ee(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Pe(ee,{type:"primary",secondary:"",onClick:D[2]||(D[2]=Ke=>b(null))},{icon:Le(()=>[Pe(z,{size:"18"},{default:Le(()=>[Pe(F,{icon:"carbon:add-alt"})]),_:1})]),default:Le(()=>[ta(" "+ml(Ee(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Pe(It,{class:"mt-2 mb-5",onBack:D[4]||(D[4]=Ke=>ne.value=null)},{title:Le(()=>[ta(ml(Ee(a)(ne.value?.title)),1)]),back:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Le(()=>[Pe(G,null,{default:Le(()=>[Ee(Te)>0?(Nl(),nn("section",u1,[la("span",null,ml(Ee(e)("nbItemsSelected",[Ee(Te)])),1),la("section",p1,[Pe(ee,{type:"error",secondary:"",size:"small",onClick:p},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:trash-can"})]),_:1})]),default:Le(()=>[ta(" "+ml(Ee(e)("delete")),1)]),_:1}),Pe(ee,{type:"warning",secondary:"",size:"small",onClick:I},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:close-filled"})]),_:1})]),default:Le(()=>[ta(" "+ml(Ee(e)("cancelSelection")),1)]),_:1})])])):Po("",!0),Pe($e,{value:Ee(s).uiFormat,"onUpdate:value":D[3]||(D[3]=Ke=>Ee(s).uiFormat=Ke),size:"small",class:"w-full"},{default:Le(()=>[Pe(St,{value:"grid",class:"w-[50%]"},{default:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:grid"})]),_:1})]),_:1}),Pe(St,{value:"list",class:"w-[50%]"},{default:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:list"})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),Ee(c).length&&!Ee(f)?(Nl(),nn("section",m1,[Ee(s).uiFormat=="grid"?(Nl(),Tn(pt,{key:0,"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Le(()=>[(Nl(!0),nn(Lo,null,rd(Ee(c),(Ke,al)=>(Nl(),Tn(_,{key:al},{default:Le(()=>[Pe(h,{name:"slide-fade",appear:""},{default:Le(()=>[Pe(Q,{size:"small",bordered:"",hoverable:""},{cover:Le(()=>[la("div",f1,[la("img",{src:ne.value?.imageUrl??Ee(Lg),class:"w-full h-[200px] object-cover"},null,8,_1)])]),header:Le(()=>[la("div",v1,[Pe(ze,{"line-clamp":1,"expand-trigger":"click"},{default:Le(()=>[Ke.id?(Nl(),Tn(T,{key:Ee(y),checked:Ee(q)[Ke.id],"onUpdate:checked":Ot=>Ee(q)[Ke.id]=Ot,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Po("",!0),ta(" "+ml(Ee(n)(Ke,ne.value)||`${Ee(e)("unnamedItem")} (${al+1})`),1)]),_:2},1024)])]),action:Le(()=>[Pe(G,{justify:"space-between",align:"center"},{default:Le(()=>[Pe(lt,{bordered:!1,type:Ke.isActive?"success":"error"},{default:Le(()=>[ta(ml(Ke.isActive?Ee(e)("published"):Ee(e)("unpublished")),1)]),_:2},1032,["type"]),Pe(G,null,{default:Le(()=>[Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("about"),onClick:Ot=>x(Ke)},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:information-filled"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("preview"),onClick:Ot=>b(Ke,!0)},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("edit"),onClick:Ot=>b(Ke)},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("links"),onClick:Ot=>j(Ke)},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"error",secondary:"",title:Ee(e)("delete"),onClick:Ot=>J(Ke)},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(Nl(!0),nn(Lo,{key:1},rd(Ee(c),(Ke,al)=>(Nl(),Tn(Q,{key:al,embedded:"",size:"small",class:"mb-2"},{default:Le(()=>[Pe(ye,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Le(({collapsed:Ot})=>[Pe(G,{align:"center",justify:"space-between"},{default:Le(()=>[Pe(lt,{bordered:!1,type:Ke.isActive?"success":"error"},{default:Le(()=>[ta(ml(Ke.isActive?Ee(e)("published"):Ee(e)("unpublished")),1)]),_:2},1032,["type"]),Pe(z,null,{default:Le(()=>[Ot?(Nl(),Tn(F,{key:0,icon:"fa-solid:chevron-left"})):(Nl(),Tn(F,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Le(()=>[...D[10]||(D[10]=[la("span",null,null,-1)])]),default:Le(()=>[Pe(Y,{name:"1"},{header:Le(()=>[la("div",y1,[Pe(G,null,{default:Le(()=>[Ke.id?(Nl(),Tn(T,{key:Ee(y),checked:Ee(q)[Ke.id],"onUpdate:checked":Ot=>Ee(q)[Ke.id]=Ot,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Po("",!0)]),_:2},1024),Pe(Se,{vertical:"",class:id(Ee(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Pe(G,null,{default:Le(()=>[Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("preview"),onClick:Fr(Ot=>b(Ke,!0),["stop"])},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("edit"),onClick:Fr(Ot=>b(Ke),["stop"])},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"primary",secondary:"",title:Ee(e)("links"),onClick:Fr(Ot=>j(Ke),["stop"])},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Pe(ee,{size:"small",type:"error",secondary:"",title:Ee(e)("delete"),onClick:Fr(Ot=>J(Ke),["stop"])},{icon:Le(()=>[Pe(z,null,{default:Le(()=>[Pe(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),Pe(Se,{vertical:"",class:id(Ee(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),la("span",g1,ml(Ee(n)(Ke,ne.value)||`${Ee(e)("unnamedItem")} (${al+1})`),1)])]),default:Le(()=>[Pe(kt,{"label-placement":"left",bordered:""},{default:Le(()=>[Ke?.createdByType?(Nl(),Tn(ct,{key:0},{label:Le(()=>[ta(ml(Ee(e)("source")),1)]),default:Le(()=>[Pe(lt,{size:"small",type:Ee(o)(Ke?.createdByType)},{default:Le(()=>[ta(ml(Ee(t)(Ke?.createdByType)),1)]),_:2},1032,["type"])]),_:2},1024)):Po("",!0),Pe(ct,null,{label:Le(()=>[ta(ml(Ee(e)("addedBy")),1)]),default:Le(()=>[Ke?.createdByUser?(Nl(),nn(Lo,{key:0},[ta(ml(`${Ke?.createdByUser?.firstname} ${Ke?.createdByUser?.lastname}`),1)],64)):(Nl(),nn(Lo,{key:1},[ta(ml(Ee(e)("undefined")),1)],64))]),_:2},1024),Ke?.createdByUser?.createdAt?(Nl(),Tn(ct,{key:1},{label:Le(()=>[ta(ml(Ee(e)("date")),1)]),default:Le(()=>[ta(" "+ml(Ee(pn)(Ke?.createdByUser?.createdAt)),1)]),_:2},1024)):Po("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Pe(xe,{page:Ee(L),"onUpdate:page":[D[5]||(D[5]=Ke=>rs(L)?L.value=Ke:null),U],class:"mt-10 justify-center","show-size-picker":"","page-size":Ee(le),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(Ee(R)/Ee(le)),"onUpdate:pageSize":O},{prefix:Le(()=>[ta(ml(`${Ee(R)} ${Ee(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):Ee(f)?(Nl(),nn("section",h1,[Pe(we,{size:"medium"})])):(Nl(),Tn(at,{key:2,description:Ee(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Pe(Qg,{show:Ee(B),"onUpdate:show":D[6]||(D[6]=Ke=>rs(B)?B.value=Ke:null),data:Ee(w),"onUpdate:data":D[7]||(D[7]=Ke=>rs(w)?w.value=Ke:null),"content-model":ne.value,"submit-data":De,readonly:Ee(V)},null,8,["show","data","content-model","readonly"]),Pe(r1,{show:Ee(P),"onUpdate:show":D[8]||(D[8]=Ke=>rs(P)?P.value=Ke:null),onUpdate:X},null,8,["show"]),Pe(zt,{show:Ee(ve),"onUpdate:show":D[9]||(D[9]=Ke=>rs(ve)?ve.value=Ke:null),preset:"card",style:{width:"450px"},bordered:!1,"show-icon":!1,title:Ee(e)("about")},{default:Le(()=>[Pe(ll,{striped:"","single-line":!1,size:"small"},{default:Le(()=>[la("tbody",null,[Ee(E)?.createdByType?(Nl(),nn("tr",b1,[la("td",null,[la("b",null,ml(Ee(e)("source")),1)]),la("td",null,[Pe(lt,{size:"small",type:Ee(o)(Ee(E)?.createdByType)},{default:Le(()=>[ta(ml(Ee(t)(Ee(E)?.createdByType)),1)]),_:1},8,["type"])])])):Po("",!0),la("tr",null,[la("td",null,[la("b",null,ml(Ee(e)("addedBy")),1)]),la("td",null,[Ee(E)?.createdByUser?(Nl(),nn(Lo,{key:0},[ta(ml(`${Ee(E)?.createdByUser?.firstname} ${Ee(E)?.createdByUser?.lastname}`),1)],64)):(Nl(),nn(Lo,{key:1},[ta(ml(Ee(e)("undefined")),1)],64))])]),Ee(E)?.createdByUser?.createdAt?(Nl(),nn("tr",k1,[la("td",null,[la("b",null,ml(Ee(e)("date")),1)]),la("td",null,ml(Ee(pn)(Ee(E)?.createdByUser?.createdAt)),1)])):Po("",!0)])]),_:1})]),_:1},8,["show","title"])],64)}}}),I1=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["content-models"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/content-models",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},V1=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["content-models"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/content-models/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},S1=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["content-models"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/content-models/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:E1}=await pe("vue"),{unref:de,resolveComponent:pk,createVNode:Be,withCtx:Fe,toDisplayString:$a,createTextVNode:Ma,openBlock:da,createBlock:Oa,createCommentVNode:Bo,isRef:Xs,renderList:U1,Fragment:dd,createElementBlock:Js,withModifiers:Or,createElementVNode:qr,normalizeClass:ud,normalizeStyle:T1}=await pe("vue"),M1={key:2},D1={key:0},N1={class:"flex items-center"},z1={class:"text-base"},A1={key:0,class:"mt-4"},{inject:P1,ref:qa,computed:pd,watch:L1}=await pe("vue"),{defineStore:md}=await pe("pinia"),B1="previews",F1=E1({__name:"index",setup(u){const{t:e}=Ie(),{contentModelIntents:n,contentModelAccessScopes:t,getContentModelIntentLabel:o,getContentModelIntentTagType:a,getContentModelAccessScopeLabel:l,getContentModelAccessScopeTagType:d}=ms(),{tr:W,pickByTheme:re,fileUrl:ne,isInDevMode:B,formatKey:ve}=st(),{data:P}=po(),{mutate:V,isPending:c}=S1(),{mutate:C,isPending:me}=I1(),{mutate:r,isPending:be}=V1(),R=oa(),le=P1("appConfig"),L=md("content-models-store",()=>({currentTab:qa("all")}))(),S=pd(()=>L.currentTab=="all"?P.value:P.value?.filter(F=>F.intent==L.currentTab)),U=qa(""),O=qa(),M=pd(()=>{if(!U.value)return S.value||[];const F=(S.value||[]).filter(z=>z.title.toLowerCase().includes(U.value.toLowerCase())||z.description?.toLowerCase().includes(U.value.toLowerCase()));return O.value&&O.value.focus(),F}),K=qa(24),f=qa(1),E=F=>{K.value=F},w={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",intent:io.EDITORIAL_CONTENT,accessScope:Rr.INTERNAL,hasPermalink:!1},b=qa(!1),j=qa(null),x=qa(w),X={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}],intent:[{required:!0,message:e("fillRequired")}],accessScope:[{required:!0,message:e("fillRequired")}]},J=qa(null),De=F=>{J.value=ue.cloneDeep(F),x.value=ue.cloneDeep(F||w),b.value=!0},ae=async()=>(j.value?.validate(async F=>{if(!F){const z={id:J.value?.id||0,name:x.value.name,title:x.value.title,image:x.value.image,description:x.value.description,titleFieldName:x.value.titleFieldName,intent:x.value.intent,accessScope:x.value.accessScope,hasPermalink:x.value.hasPermalink};J.value?r(z,{onSuccess:()=>{}}):C(z,{onSuccess:()=>{}}),b.value=!1}}),!1),y=async F=>{R.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{V({id:F.id||0})}})},q=qa(null),Te=qa(!1),I=F=>{q.value=F,Te.value=!0},p=async F=>{r({id:q.value?.id||0,hasPermalink:q.value?.hasPermalink,dataStructure:F},{onSuccess:z=>{I(z)}})},s=qa(!1),m=async F=>{x.value.image=F,s.value=!1},D=()=>{x.value.image=""},T=md("content-models-management",()=>({itemsContentModel:qa(null)}))();return L1(()=>x.value.title,F=>{J.value||x.value.name.length<=21&&(x.value.name=Rd(W(F),{trim:!0,lower:!0,strict:!0}))}),(F,z)=>{const ee=_e,G=H,ut=Ye,St=Ka,$e=Qi,It=el,ze=Hr,lt=Tl,Q=Ha,h=Da,_=_n,pt=fn,Se=Cl,ct=jo,kt=Qa,Y=Ga,ye=Na,xe=Va,we=Wa,at=mn,ll=Ia,zt=Xi,Ke=Qn,al=fo,Ot=Ca,nl=Jl,Pl=uo;return da(),Js(dd,null,[de(T).itemsContentModel?Bo("",!0):(da(),Oa(St,{key:0,to:"#alt-action"},{default:Fe(()=>[de(P)&&de(P).length?(da(),Oa(ut,{key:0,type:"primary",secondary:"",onClick:z[0]||(z[0]=et=>De(null))},{icon:Fe(()=>[Be(G,{size:"18"},{default:Fe(()=>[Be(ee,{icon:"carbon:add-alt"})]),_:1})]),default:Fe(()=>[Ma(" "+$a(de(e)("addContentModel")),1)]),_:1})):Bo("",!0)]),_:1})),de(T).itemsContentModel?(da(),Oa(C1,{key:1,modelValue:de(T).itemsContentModel,"onUpdate:modelValue":z[1]||(z[1]=et=>de(T).itemsContentModel=et)},null,8,["modelValue"])):(da(),Js("section",M1,[Be(Y,{appear:"",name:"slide-fade"},{default:Fe(()=>[qr("section",null,[Be(ze,{value:de(L).currentTab,"onUpdate:value":z[3]||(z[3]=et=>de(L).currentTab=et),type:"card",size:"medium",class:"mb-2"},{suffix:Fe(()=>[Be(It,{ref_key:"searchInputRef",ref:O,value:de(U),"onUpdate:value":z[2]||(z[2]=et=>Xs(U)?U.value=et:null),clearable:!0,placeholder:de(e)("search"),class:"!w-[250px]"},{suffix:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),default:Fe(()=>[Be($e,{name:"all"},{default:Fe(()=>[Be(G,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(ee,{icon:"carbon:table-of-contents"})]),_:1}),Ma(" "+$a(de(e)("all")),1)]),_:1}),Be($e,{name:de(io).EDITORIAL_CONTENT},{default:Fe(()=>[Be(G,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(ee,{icon:"carbon:blog"})]),_:1}),Ma(" "+$a(de(e)("editorialContent")),1)]),_:1},8,["name"]),Be($e,{name:de(io).USER_DATA},{default:Fe(()=>[Be(G,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(ee,{icon:"carbon:group-presentation"})]),_:1}),Ma(" "+$a(de(e)("userEntries")),1)]),_:1},8,["name"]),Be($e,{name:de(io).SYSTEM_DATA},{default:Fe(()=>[Be(G,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(ee,{icon:"carbon:terminal"})]),_:1}),Ma(" "+$a(de(e)("systemData")),1)]),_:1},8,["name"])]),_:1},8,["value"]),de(M)&&de(M).length?(da(),Js("section",D1,[(da(!0),Js(dd,null,U1(de(M).slice((de(f)-1)*de(K),de(f)*de(K)),et=>(da(),Oa(Se,{key:et.id,embedded:"",size:"small",class:"mb-2"},{default:Fe(()=>[Be(pt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Fe(({collapsed:ie})=>[Be(lt,{align:"center",justify:"space-between"},{default:Fe(()=>[Be(ut,{size:"small",type:"primary",secondary:"",onClick:Or(oe=>de(T).itemsContentModel=et,["stop"])},{icon:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:arrow-right"})]),_:1})]),default:Fe(()=>[Ma(" "+$a(de(e)("open")),1)]),_:1},8,["onClick"]),Be(G,null,{default:Fe(()=>[ie?(da(),Oa(ee,{key:0,icon:"fa-solid:chevron-left"})):(da(),Oa(ee,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Fe(()=>[...z[19]||(z[19]=[qr("span",null,null,-1)])]),default:Fe(()=>[Be(_,{name:"1"},{header:Fe(()=>[qr("div",N1,[de(B)?(da(),Oa(lt,{key:0},{default:Fe(()=>[Be(ut,{size:"small",type:"primary",secondary:"",onClick:Or(ie=>I(et),["stop"])},{default:Fe(()=>[Be(G,{class:"mr-1"},{default:Fe(()=>[Be(ee,{icon:"carbon:data-1"})]),_:1}),Ma(" "+$a(de(e)("dataStructure")),1)]),_:1},8,["onClick"]),Be(ut,{size:"small",type:"primary",secondary:"",onClick:Or(ie=>De(et),["stop"])},{default:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Be(ut,{size:"small",type:"error",secondary:"",onClick:Or(ie=>y(et),["stop"])},{default:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):Bo("",!0),de(B)?(da(),Oa(Q,{key:1,vertical:"",class:ud(de(re)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):Bo("",!0),qr("span",z1,$a(de(W)(et.title)),1)])]),default:Fe(()=>[Be(lt,null,{default:Fe(()=>[Be(h,{size:"small",type:de(a)(et.intent)},{default:Fe(()=>[Ma($a(de(o)(et.intent)),1)]),_:2},1032,["type"]),Be(h,{size:"small",type:de(d)(et.accessScope)},{default:Fe(()=>[Ma($a(de(l)(et.accessScope)),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Be(ct,{page:de(f),"onUpdate:page":z[4]||(z[4]=et=>Xs(f)?f.value=et:null),class:"mt-5 justify-end","show-size-picker":"","page-size":de(K),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(de(M).length/de(K)),"onUpdate:pageSize":E},{prefix:Fe(()=>[Ma($a(`${de(M).length} ${de(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):(da(),Oa(Se,{key:1,size:"large",class:ud(`mb-2 !border-dashed !border-2 ${de(re)("!border-zinc-300","!border-zinc-600")}`)},{default:Fe(()=>[Be(kt,{description:de(e)("noContentModelAvailable")},{icon:Fe(()=>[Be(G,null,{default:Fe(()=>[de(U)?(da(),Oa(ee,{key:0,icon:"carbon:search"})):(da(),Oa(ee,{key:1,icon:"carbon:model-alt"}))]),_:1})]),extra:Fe(()=>[de(U)?Bo("",!0):(da(),Js("div",A1,[Be(ut,{size:"small",secondary:"",onClick:z[5]||(z[5]=et=>De(null))},{icon:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:add-alt"})]),_:1})]),default:Fe(()=>[Ma(" "+$a(de(e)("addContentModel")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Be(nl,{show:de(b),"onUpdate:show":z[15]||(z[15]=et=>Xs(b)?b.value=et:null),loading:de(me)||de(be)||de(c),preset:"dialog",style:{width:"540px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:de(J)?de(e)("editContentModel"):de(e)("addContentModel"),"positive-text":de(e)("validate"),"negative-text":de(e)("cancel"),onPositiveClick:ae,onNegativeClick:z[16]||(z[16]=et=>b.value=!1)},{default:Fe(()=>[Be(Ot,{ref_key:"formRef",ref:j,model:de(x),rules:X,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Fe(()=>[Be(xe,{"show-label":!1,path:"title"},{default:Fe(()=>[Be(ye,{modelValue:de(x).title,"onUpdate:modelValue":z[6]||(z[6]=et=>de(x).title=et),placeholder:de(e)("title"),class:"w-full",sync:""},{label:Fe(()=>[Ma($a(de(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Be(xe,{"show-label":!1,path:"description"},{default:Fe(()=>[Be(ye,{modelValue:de(x).description,"onUpdate:modelValue":z[7]||(z[7]=et=>de(x).description=et),placeholder:de(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Fe(()=>[Ma($a(de(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Be(ll,{"x-gap":"12",span:24},{default:Fe(()=>[Be(at,{span:12},{default:Fe(()=>[Be(xe,{path:"intent",label:de(e)("finality")},{default:Fe(()=>[Be(we,{value:de(x).intent,"onUpdate:value":z[8]||(z[8]=et=>de(x).intent=et),options:de(n)||[],placeholder:de(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),Be(at,{span:12},{default:Fe(()=>[Be(xe,{path:"accessScope",label:de(e)("accessScope")},{default:Fe(()=>[Be(we,{value:de(x).accessScope,"onUpdate:value":z[9]||(z[9]=et=>de(x).accessScope=et),options:de(t)||[],placeholder:de(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),Be(ll,{"x-gap":"12",span:24},{default:Fe(()=>[Be(at,{span:14},{default:Fe(()=>[Be(xe,{label:de(e)("contentModelKey"),path:"name"},{default:Fe(()=>[Be(It,{value:de(x).name,placeholder:de(e)("contentModelKey"),class:"w-full","onUpdate:value":z[10]||(z[10]=et=>de(x).name=de(ve)(et))},null,8,["value","placeholder"])]),_:1},8,["label"]),Be(xe,{label:de(e)("titleSingletonKey"),path:"titleFieldName"},{default:Fe(()=>[Be(It,{value:de(x).titleFieldName,placeholder:de(e)("titleSingletonKey"),class:"w-full","onUpdate:value":z[11]||(z[11]=et=>de(x).titleFieldName=de(ve)(et))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Be(Ke,{span:10,label:de(e)("itemsPreview"),path:"image"},{default:Fe(()=>[Be(lt,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:Fe(()=>[Be(zt,{class:"cursor-pointer","object-fit":"cover",style:T1("border: 1px dashed "+de(re)("green","white")),size:150,src:de(ne)(de(x).image||""),onClick:z[12]||(z[12]=et=>s.value=!0)},{default:Fe(()=>[de(x).image?Bo("",!0):(da(),Oa(G,{key:0,size:64},{default:Fe(()=>[Be(ee,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),de(x).image?(da(),Oa(ut,{key:0,quaternary:"",onClick:z[13]||(z[13]=et=>D())},{icon:Fe(()=>[Be(G,null,{default:Fe(()=>[Be(ee,{icon:"carbon:trash-can"})]),_:1})]),default:Fe(()=>[Ma(" "+$a(de(e)("clear")),1)]),_:1})):Bo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),Be(xe,{"show-label":!1,path:"hasPermalink"},{default:Fe(()=>[Be(al,{checked:de(x).hasPermalink,"onUpdate:checked":z[14]||(z[14]=et=>de(x).hasPermalink=et)},{default:Fe(()=>[Ma($a(de(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Be(Pl,{show:de(s),"onUpdate:show":z[17]||(z[17]=et=>Xs(s)?s.value=et:null),title:de(e)("selectImage"),"upload-config":{folder:B1,limit:0,maxSize:0,baseUrl:de(le)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:m},null,8,["show","title","upload-config"]),Be(Xd,{show:de(Te),"onUpdate:show":z[18]||(z[18]=et=>Xs(Te)?Te.value=et:null),title:de(W)(de(q)?.title),"raw-data-structure":de(q)?.dataStructure,"update-data-structure":p},null,8,["show","title","raw-data-structure"])]))],64)}}});var Gn=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Gn||{});const O1=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["permalinks"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:"/permalinks",data:l});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},{defineComponent:q1}=await pe("vue"),{unref:rt,resolveComponent:mk,createVNode:Vt,withCtx:Ut,toDisplayString:aa,createTextVNode:R1,openBlock:ro,createBlock:is,createCommentVNode:j1,createElementVNode:Xl,renderList:K1,Fragment:fd,createElementBlock:_d}=await pe("vue"),Y1={class:"text-base font-bold"},G1={class:"text-sm"},H1={class:"text-xs text-slate-400"},Q1={class:"text-xs text-slate-400"},W1={class:"text-xs text-slate-400"},X1={class:"text-sm"},J1={class:"text-xs text-slate-400"},Z1={class:"text-xs text-slate-400"},eh={class:"text-xs text-slate-400"},th={class:"text-sm"},lh={class:"text-xs text-slate-400"},ah={class:"text-xs text-slate-400"},nh={class:"text-xs text-slate-400"},oh={class:"text-base font-bold"},sh={class:"text-sm"},rh={class:"text-xs text-slate-400"},ih={class:"text-xs text-slate-400"},ch={class:"text-xs text-slate-400"},{ref:vd,computed:yd,h:dh}=await pe("vue"),uh=q1({__name:"index",setup(u){const{t:e}=Ie(),{tr:n}=st(),{data:t}=Yi(),{data:o,refetch:a}=po({enabled:!1}),{data:l,refetch:d}=hu({enabled:!1}),{mutate:W,isPending:re}=O1(),ne=[{pathPrefix:"/news/article",contentType:Gn.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Gn.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Gn.NEWS_TAG,contentParam:"slug",pageId:null}],B=vd(ne),ve=vd(),P=yd(()=>o.value?.filter(be=>be.hasPermalink)),V=async(be=!1)=>{be&&await a(),await d(),B.value=ue.cloneDeep(ne);for(let R=0;R<(P.value?.length||0);R++)B.value.push({pathPrefix:`/${P.value?.[R].slug}`,contentType:Gn.CONTENT_MODEL,contentParam:"id",contentId:P.value?.[R].id,pageId:null});for(let R=0;R<B.value.length;R++)switch(B.value[R].contentType){case Gn.NEWS_ARTICLE:case Gn.NEWS_CATEGORY:case Gn.NEWS_TAG:{const le=l.value?.find(L=>L.contentType===B.value[R].contentType);le&&(B.value[R].pathPrefix=le.pathPrefix,B.value[R].contentParam=le.contentParam,B.value[R].pageId=le.pageId,B.value[R].permalinkId=le.id)}break;case Gn.CONTENT_MODEL:{const le=l.value?.find(L=>L.contentType===B.value[R].contentType&&L.contentId===B.value[R].contentId);le&&(B.value[R].pathPrefix=le.pathPrefix,B.value[R].contentParam=le.contentParam,B.value[R].pageId=le.pageId,B.value[R].permalinkId=le.id)}break}ve.value=ue.cloneDeep(B.value)};V(!0);const c=async()=>{W(B.value,{onSuccess:()=>{V()}})},C=yd(()=>ue.isEqual(B.value,ve.value)),me=be=>dh("span",{},{default:()=>n(be.title)}),r=be=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(be);return(be,R)=>{const le=_e,L=H,S=Ye,U=Ka,O=el,M=mn,K=Wa,f=Ia,E=Cl,w=_n,b=fn,j=Ha;return ro(),_d(fd,null,[Vt(U,{to:"#alt-action"},{default:Ut(()=>[Vt(S,{secondary:"",type:"primary",loading:rt(re),disabled:rt(C),onClick:R[0]||(R[0]=x=>c())},{icon:Ut(()=>[Vt(L,null,{default:Ut(()=>[Vt(le,{icon:"carbon:save"})]),_:1})]),default:Ut(()=>[R1(" "+aa(rt(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),Vt(E,{embedded:"",size:"small"},{default:Ut(()=>[Vt(b,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Ut(({collapsed:x})=>[Vt(L,null,{default:Ut(()=>[x?(ro(),is(le,{key:0,icon:"fa-solid:chevron-left"})):(ro(),is(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ut(()=>[...R[10]||(R[10]=[Xl("span",null,null,-1)])]),default:Ut(()=>[Vt(w,{name:"1"},{header:Ut(()=>[Xl("span",Y1,aa(rt(e)("news")),1)]),default:Ut(()=>[Vt(E,{size:"small"},{header:Ut(()=>[Xl("span",G1,aa(rt(e)("articles")),1)]),default:Ut(()=>[Vt(f,{cols:"24","x-gap":"12"},{default:Ut(()=>[Vt(M,{span:"10"},{default:Ut(()=>[Xl("span",H1,aa(rt(e)("pathPrefix")),1),Vt(O,{value:rt(B)[0].pathPrefix,"onUpdate:value":R[1]||(R[1]=x=>rt(B)[0].pathPrefix=x),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",Q1,aa(rt(e)("contentParam")),1),Vt(O,{value:rt(B)[0].contentParam,"onUpdate:value":R[2]||(R[2]=x=>rt(B)[0].contentParam=x),readonly:"",size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",W1,aa(rt(e)("contentPage")),1),Vt(K,{value:rt(B)[0].pageId,"onUpdate:value":R[3]||(R[3]=x=>rt(B)[0].pageId=x),options:rt(t)||[],placeholder:rt(e)("selectPage"),"render-label":me,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Vt(E,{size:"small"},{header:Ut(()=>[Xl("span",X1,aa(rt(e)("categories")),1)]),default:Ut(()=>[Vt(f,{cols:"24","x-gap":"12"},{default:Ut(()=>[Vt(M,{span:"10"},{default:Ut(()=>[Xl("span",J1,aa(rt(e)("pathPrefix")),1),Vt(O,{value:rt(B)[1].pathPrefix,"onUpdate:value":R[4]||(R[4]=x=>rt(B)[1].pathPrefix=x),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",Z1,aa(rt(e)("contentParam")),1),Vt(O,{value:rt(B)[1].contentParam,"onUpdate:value":R[5]||(R[5]=x=>rt(B)[1].contentParam=x),readonly:"",size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",eh,aa(rt(e)("contentPage")),1),Vt(K,{value:rt(B)[1].pageId,"onUpdate:value":R[6]||(R[6]=x=>rt(B)[1].pageId=x),options:rt(t)||[],placeholder:rt(e)("selectPage"),"render-label":me,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Vt(E,{size:"small"},{header:Ut(()=>[Xl("span",th,aa(rt(e)("tags")),1)]),default:Ut(()=>[Vt(f,{cols:"24","x-gap":"12"},{default:Ut(()=>[Vt(M,{span:"10"},{default:Ut(()=>[Xl("span",lh,aa(rt(e)("pathPrefix")),1),Vt(O,{value:rt(B)[2].pathPrefix,"onUpdate:value":R[7]||(R[7]=x=>rt(B)[2].pathPrefix=x),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",ah,aa(rt(e)("contentParam")),1),Vt(O,{value:rt(B)[2].contentParam,"onUpdate:value":R[8]||(R[8]=x=>rt(B)[2].contentParam=x),readonly:"",size:"small"},null,8,["value"])]),_:1}),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",nh,aa(rt(e)("contentPage")),1),Vt(K,{value:rt(B)[2].pageId,"onUpdate:value":R[9]||(R[9]=x=>rt(B)[2].pageId=x),options:rt(t)||[],placeholder:rt(e)("selectPage"),"render-label":me,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Vt(j,{class:"!my-2"}),rt(P)?.length&&rt(B).length>3?(ro(),is(E,{key:0,embedded:"",size:"small"},{default:Ut(()=>[Vt(b,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Ut(({collapsed:x})=>[Vt(L,null,{default:Ut(()=>[x?(ro(),is(le,{key:0,icon:"fa-solid:chevron-left"})):(ro(),is(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ut(()=>[...R[11]||(R[11]=[Xl("span",null,null,-1)])]),default:Ut(()=>[Vt(w,{name:"1"},{header:Ut(()=>[Xl("span",oh,aa(rt(e)("contentModels")),1)]),default:Ut(()=>[(ro(!0),_d(fd,null,K1(rt(P),(x,X)=>(ro(),is(E,{key:x.id,size:"small"},{header:Ut(()=>[Xl("span",sh,aa(rt(n)(x.title)),1)]),default:Ut(()=>[Vt(f,{cols:"24","x-gap":"12"},{default:Ut(()=>[Vt(M,{span:"10"},{default:Ut(()=>[Xl("span",rh,aa(rt(e)("pathPrefix")),1),Vt(O,{value:rt(B)[X+3].pathPrefix,"onUpdate:value":J=>rt(B)[X+3].pathPrefix=J,"allow-input":r,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",ih,aa(rt(e)("contentParam")),1),Vt(O,{value:rt(B)[X+3].contentParam,"onUpdate:value":J=>rt(B)[X+3].contentParam=J,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Vt(M,{span:"7"},{default:Ut(()=>[Xl("span",ch,aa(rt(e)("contentPage")),1),Vt(K,{value:rt(B)[X+3].pageId,"onUpdate:value":J=>rt(B)[X+3].pageId=J,options:rt(t)||[],placeholder:rt(e)("selectPage"),"render-label":me,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):j1("",!0)],64)}}}),ph=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"post",url:"/newsletter/campaigns",data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},mh=u=>{const{displayFormErrors:e}=st(),{request:n}=Ge(),{t}=Ie(),o=Qe(),a=Je();return bt({queryKey:["newsletter-campaigns"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const d=await n({method:"put",url:`/newsletter/campaigns/${l.id}`,data:Xt(l,["id"])});if(a.finish(),d.failure&&d.error)throw new Error(d.error);return d.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},fh=u=>{const{request:e}=Ge(),{t:n}=Ie(),t=Qe(),o=Je();return bt({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/campaigns/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},_h=()=>{const{displayFormErrors:u}=st(),{request:e}=Ge(),{t:n}=Ie(),t=Je(),o=Qe();return Ya(async a=>{const l=await e({url:"/sms",method:"post",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{l.onSuccess?l.onSuccess(a):o.success(n("success"))},onError:(a,l)=>{if(l.onError)l.onError(a);else switch(a?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:u(a?.response?.data?.data);break;default:o.error(n("sendingFailed"))}},retry:2})},{unref:gd}=await pe("vue"),{defineComponent:vh}=await pe("vue"),{unref:Oe,createVNode:$l,withCtx:Rl,toDisplayString:Zs,createTextVNode:er,resolveComponent:fk,createElementVNode:zi,isRef:hd,renderList:yh,Fragment:bd,openBlock:tr,createElementBlock:kd,createBlock:Ai}=await pe("vue"),gh={class:"w-full"},{ref:Fo,h:fl,computed:wd}=await pe("vue"),hh=vh({__name:"Campaign",setup(u){const e=Qe(),n=oa(),{getSettingValue:t}=bu(),{ckEditorToolbarItems:o}=st(),{t:a,locale:l}=Ie(),{data:d}=Jd(),{data:W}=Zd(),{data:re,isPending:ne}=cg(),{mutate:B,isPending:ve}=ph(),{mutate:P}=fh(),{mutate:V,isPending:c}=mh(),{mutate:C}=qu(),{mutate:me}=_h(),r=Fo(""),be=Fo(),R={pageSize:12,prefix:({itemCount:x})=>fl("div",{class:"font-bold"},{default:()=>`${a("total")}: ${x}`})},le=[{title:a("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(x){return fl("div",{},{default:()=>x.title})}},{title:a("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(x){return fl("small",{},{default:()=>x.subject})}},{title:a("numberOfRecipients"),key:"recipients",width:200,render(x){return fl("div",{},{default:()=>x.recipients.length})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:150,render(x){return fl("div",{},{default:()=>pn(x.updatedAt,{locale:l.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:150,render(x){return fl("div",{},{default:()=>pn(x.createdAt,{locale:l.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>fl(el,{ref:be,placeholder:a("search"),value:r.value,onInput:x=>{r.value=x}},{suffix:()=>fl(H,{},{default:()=>fl(_e,{icon:"carbon:search"})})}),key:"actions",width:175,render(x){return fl("div",{class:"flex justify-end items-center w-full"},[fl(Ye,{size:"small",type:"primary",secondary:!0,title:a("history"),onClick:()=>{M.value=x,O.value=!0},renderIcon:()=>fl(H,null,{default:()=>fl(_e,{icon:"mdi:history"})})}),fl("div",{class:"w-2"}),fl(Ye,{size:"small",type:"info",secondary:!0,title:a("launchCampaign"),onClick:()=>{const X=n.info({title:a("launchCampaign"),content:a("confirmLaunchCampaign",[x.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:a("yes"),negativeText:a("cancel"),onPositiveClick:async()=>{X.loading=!0,C({data:{title:x.title,subject:x.subject,content:x.content,recipients:x.recipients.filter(J=>ds.isEmail(J)),tags:[]},onSuccess:J=>{const De=t("phone","string")?.split(",")[0];me({data:{from:De.replace(/\s+/g,""),content:x.rawContent,recipients:x.recipients.filter(ae=>!ds.isEmail(ae))},onSuccess:ae=>{const y=x.history||[];y.push({id:Al(),date:ku(new Date,{locale:l.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+J.message+" Phone: "+ae.message}),V({id:x.id,history:y}),X.loading=!1},onError:()=>{X.loading=!1}})},onError:()=>{X.loading=!1}})}})},renderIcon:()=>fl(H,null,{default:()=>fl(_e,{icon:"mdi:send"})})}),fl("div",{class:"w-2"}),fl(Ye,{size:"small",type:"warning",secondary:!0,title:a("edit"),onClick:()=>{w(x)},renderIcon:()=>fl(H,null,{default:()=>fl(_e,{icon:"carbon:edit"})})}),fl("div",{class:"w-2"}),fl(Ye,{size:"small",type:"error",secondary:!0,title:a("delete"),onClick:()=>{n.warning({title:a("confirm"),content:a("confirmDeleteCampaign"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{x.id&&P({id:x.id})}})},renderIcon:()=>fl(H,null,{default:()=>fl(_e,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=wd(()=>{if(!r.value)return re.value;const x=re.value?.filter(X=>X.title.toLowerCase().includes(r.value.toLowerCase())||X.subject.toLowerCase().includes(r.value.toLowerCase()));return be.value&&be.value.focus(),x}),S=wd(()=>[...(d.value||[]).map(x=>({recipient:x.email,type:"email"})),...(W.value||[]).map(x=>({recipient:x.phone,type:"phone"}))]),U=Fo(!1),O=Fo(!1),M=Fo(null),K=Fo(null),f=Fo({title:"",subject:"",content:"",rawContent:"",recipients:[]}),E={title:[{required:!0,message:a("fillRequired")}],subject:[{required:!0,message:a("fillRequired")}],content:[{required:!0,message:a("fillRequired")}],rawContent:[{required:!0,message:a("fillRequired")}],recipients:[{required:!0,message:a("fillRequired")}]},w=x=>{M.value=ue.cloneDeep(x),x?f.value=ue.cloneDeep(x):f.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},U.value=!0},b=async()=>(K.value?.validate(async x=>{if(!x){const X={title:f.value.title,subject:f.value.subject,content:f.value.content,rawContent:f.value.rawContent,recipients:f.value.recipients};M.value?M.value.title!==f.value.title&&(re.value||[]).findIndex(J=>J.title==f.value.title)>-1?e.error(a("sameCampaignTitleMessage")):V({id:M.value.id,...X}):(re.value||[]).findIndex(J=>J.title==f.value.title)>-1?e.error(a("sameCampaignTitleMessage")):B(X),U.value=!1}}),!1),j=(x,X)=>ue.isEqual(x.slice().sort(),X.slice().sort());return(x,X)=>{const J=Ka,De=Kr,ae=jr,y=Va,q=Fd,Te=fo,I=Wa,p=Ca,s=Jl,m=Tu,D=Ld,T=Pd,F=on,z=Qa;return tr(),kd(bd,null,[$l(J,{to:"#alt-action"},{default:Rl(()=>[$l(Oe(Ye),{type:"primary",secondary:"",onClick:X[0]||(X[0]=ee=>w(null))},{icon:Rl(()=>[$l(Oe(H),{size:"18"},{default:Rl(()=>[$l(Oe(_e),{icon:"carbon:add-alt"})]),_:1})]),default:Rl(()=>[er(" "+Zs(Oe(a)("addCampaign")),1)]),_:1})]),_:1}),$l(ae,null,{default:Rl(()=>[$l(De,{columns:le,data:Oe(L),pagination:R,loading:Oe(ne),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),$l(s,{show:Oe(U),"onUpdate:show":X[9]||(X[9]=ee=>hd(U)?U.value=ee:null),loading:Oe(ve)||Oe(c),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Oe(M)?Oe(a)("editCampaign"):Oe(a)("addCampaign"),"positive-text":Oe(a)("validate"),"negative-text":Oe(a)("cancel"),onPositiveClick:b,onNegativeClick:X[10]||(X[10]=ee=>U.value=!1)},{default:Rl(()=>[$l(p,{ref_key:"formRef",ref:K,class:"mt-5",model:Oe(f),rules:E,"show-require-mark":!1,size:"medium"},{default:Rl(()=>[$l(y,{label:Oe(a)("title"),path:"title"},{default:Rl(()=>[$l(Oe(el),{value:Oe(f).title,"onUpdate:value":X[1]||(X[1]=ee=>Oe(f).title=ee),placeholder:Oe(a)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),$l(y,{label:Oe(a)("subject"),path:"subject"},{default:Rl(()=>[$l(Oe(el),{value:Oe(f).subject,"onUpdate:value":X[2]||(X[2]=ee=>Oe(f).subject=ee),placeholder:Oe(a)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),$l(y,{label:Oe(a)("content"),path:"content"},{default:Rl(()=>[zi("div",gh,[$l(q,{modelValue:Oe(f).content,"onUpdate:modelValue":X[3]||(X[3]=ee=>Oe(f).content=ee),"toolbar-items":Oe(o),placeholder:Oe(a)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),$l(y,{label:Oe(a)("rawContent"),path:"rawContent"},{default:Rl(()=>[$l(Oe(el),{value:Oe(f).rawContent,"onUpdate:value":X[4]||(X[4]=ee=>Oe(f).rawContent=ee),placeholder:Oe(a)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),$l(y,{label:Oe(a)("recipients"),path:"recipients"},{default:Rl(()=>[$l(I,{value:Oe(f).recipients,"onUpdate:value":X[8]||(X[8]=ee=>Oe(f).recipients=ee),options:Oe(S),placeholder:Oe(a)("recipients"),loading:Oe(ne),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:Rl(()=>[$l(Te,{size:"large",class:"w-full","default-checked":Oe(S).length&&j(Oe(f).recipients,Oe(S).filter(ee=>ee.type=="email").map(ee=>ee.recipient)),"onUpdate:checked":X[5]||(X[5]=ee=>{ee?Oe(f).recipients=Oe(S).filter(G=>G.type=="email").map(G=>G.recipient):Oe(f).recipients=Oe(f).recipients.filter(G=>!("_v"in x?x._v:gd(ds)).isEmail(G))})},{default:Rl(()=>[er(Zs(Oe(a)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),X[12]||(X[12]=zi("div",{class:"h-2"},null,-1)),$l(Te,{size:"large",class:"w-full","default-checked":Oe(S).length&&j(Oe(f).recipients,Oe(S).filter(ee=>ee.type=="phone").map(ee=>ee.recipient)),"onUpdate:checked":X[6]||(X[6]=ee=>{ee?Oe(f).recipients=Oe(S).filter(G=>G.type=="phone").map(G=>G.recipient):Oe(f).recipients=Oe(f).recipients.filter(G=>("_v"in x?x._v:gd(ds)).isEmail(G))})},{default:Rl(()=>[er(Zs(Oe(a)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),X[13]||(X[13]=zi("div",{class:"h-2"},null,-1)),$l(Te,{size:"large",class:"w-full","default-checked":Oe(S).length&&Oe(f).recipients.length===Oe(S).length,"onUpdate:checked":X[7]||(X[7]=ee=>{ee?Oe(f).recipients=Oe(S).filter(G=>G.recipient).map(G=>G.recipient):Oe(f).recipients=[]})},{default:Rl(()=>[er(Zs(Oe(a)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),$l(s,{show:Oe(O),"onUpdate:show":X[11]||(X[11]=ee=>hd(O)?O.value=ee:null),loading:Oe(c),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Oe(a)("history")},{default:Rl(()=>[Oe(M)?.history?.length?(tr(),Ai(F,{key:0,style:{"max-height":"400px"}},{default:Rl(()=>[$l(T,{hoverable:""},{default:Rl(()=>[(tr(!0),kd(bd,null,yh(Oe(M)?.history.slice().reverse(),ee=>(tr(),Ai(D,{key:ee.id},{default:Rl(()=>[$l(m,{title:ee.date,"content-style":"margin-top: 10px;"},{default:Rl(()=>[er(Zs(ee.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(tr(),Ai(z,{key:1,description:Oe(a)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),bh=()=>{const{request:u}=Ge(),{t:e}=Ie(),n=Je(),t=Qe();return Ya(async o=>{const a=await u({url:"/app-information",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{t.success(e("success"))},onError:(o,a)=>{t.error(e("unableToUpdateAppInformation"))}})},{defineComponent:kh}=await pe("vue"),{unref:g,createVNode:te,withCtx:fe,toDisplayString:Zt,createTextVNode:Oo,resolveComponent:wh,openBlock:Gt,createBlock:Kn,createCommentVNode:va,createElementBlock:zl,createElementVNode:Nt,isRef:Pi,vShow:Li,withDirectives:Bi,normalizeStyle:Yn,Fragment:qo,renderList:xd,TransitionGroup:xh,withKeys:$h}=await pe("vue"),Ch={id:"header-btn"},Ih={key:1,id:"alt-action"},Vh={key:"basic-info"},Sh={class:"text-xs"},Eh={class:"text-xs"},Uh={class:"text-xs"},Th={class:"text-xs"},Mh={class:"text-xs"},Dh={class:"text-xs"},Nh={class:"text-xs"},zh={class:"flex items-center gap-2 w-full"},Ah={key:"branding"},Ph={class:"text-sm"},Lh={class:"text-sm"},Bh={class:"flex flex-col items-center justify-center text-gray-400"},Fh={class:"text-sm"},Oh={class:"flex flex-col items-center justify-center text-gray-400"},qh={class:"text-sm"},Rh={class:"flex flex-col items-center justify-center text-gray-400"},jh={class:"text-sm"},Kh={class:"flex flex-col items-center justify-center text-gray-400"},Yh={class:"text-sm"},Gh={class:"flex items-center justify-between"},Hh={class:"font-bold"},Qh={class:"flex items-center"},Wh={class:"flex items-center justify-between"},Xh={class:"font-bold"},Jh={class:"flex items-center"},Zh={class:"flex items-center justify-between"},eb={class:"font-bold"},tb={class:"flex items-center"},lb={key:"social-networks"},ab={class:"text-xs"},nb={key:"newsletter-email"},ob={key:"newsletter-phone"},sb={key:"newsletter-campaign"},rb={key:"ads"},ib={key:"videos"},cb={key:"content-models"},db={key:"menus"},ub={key:"content-permalinks"},pb={key:"page-sections"},{defineComponent:mb,inject:fb,ref:Ra,h:Fi,computed:Oi,watch:qi,onMounted:$d}=await pe("vue"),{storeToRefs:_b,defineStore:vb}=await pe("pinia"),yb=mb({name:Sd.CONTENT_MANAGEMENT.NAME}),gb=kh({...yb,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=h=>e.includes(h),{t,locale:o}=Ie(),a=ju(),l=oa(),{appPrimaryColor:d,pickByTheme:W,fileUrl:re,isLgScreen:ne,isMdScreen:B,isSmScreen:ve,isXlScreen:P,is2XlScreen:V,tr:c}=st(),C=wu({enabled:!1}),{isLightTheme:me,contentLayoutSize:r}=_b(Ro());Ki();const{data:be,refetch:R}=Yi(),{mutate:le,isPending:L}=bh(),{mutate:S,isPending:U}=Qd(),{mutate:O,isPending:M}=Im(),K=fb("appConfig"),f=Ra({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),E=Ra(f.value),w=vb("content-management",()=>({currentMenuItemKey:Ra("basic-info")}))(),b=(h,_)=>()=>Fi(H,{},{default:()=>Fi(_e,{icon:h})}),j=(h,_,pt=!1)=>()=>Fi("span",{id:_,class:{"page-menu-item":pt}},{default:()=>h}),x=Oi(()=>{const h=[{label:j(t("basicInfo"),"basic-info"),key:"basic-info",icon:b("carbon:identification")},{label:j(t("branding"),"branding"),key:"branding",icon:b("carbon:color-palette")},{label:j(t("socialNetworks"),"social-networks"),key:"social-networks",icon:b("carbon:share")},{key:"divider",type:"divider"},{label:j(t("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:b("carbon:at")},{label:j(t("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:b("carbon:phone")},{label:j(t("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:b("carbon:bullhorn")},{key:"divider",type:"divider"},{label:j(t("ads"),"ads"),key:"ads",icon:b("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:j(t("videos"),"videos"),key:"videos",icon:b("carbon:video-player")},{key:"divider",type:"divider"},{label:j(t("menusManagement"),"menus"),key:"menus",icon:b("carbon:menu")},{label:j(t("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:b("carbon:link")},{key:"divider",type:"divider"},{label:j(t("contentModels"),"content-models"),key:"content-models",icon:b("carbon:model-alt")},{label:j(t("pageSections"),"page-sections"),key:"page-sections",icon:b("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const _ of be.value||[])h.push({label:j(c(_.title).startsWith(t("page"))?c(_.title):`${t("page")} ${c(_.title)}`,`${_.slug}-page`,!0),key:`${_.slug}-page`,icon:b("carbon:document",`${_.slug}-page`)});return be.value&&be.value.length>0&&h.push({key:"divider",type:"divider"}),h.push({label:j(t("addPage"),"add-new-page"),key:"add-new-page",icon:b("carbon:add-alt")}),h}),X=Oi(()=>ue.isEqual(f.value,E.value)),J=Oi(()=>r.value.height-165),De=Ra(null),ae={email:[{required:!1,message:t("fillRequired")},{trigger:["input"],validator(h,_){return _&&!ds.isEmail(_)?new Error(t("invalidEmail")):!0}}]},y=Ra();qi(()=>y.value,h=>{f.value.additionalInfo=JSON.stringify(h||"[]")},{deep:!0});const q=Ra(null),Te={},I=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],p=Ra("logos"),s=Ra(!1),m=async h=>{switch(p.value){case"logos":f.value.logo=h;break;case"icons":f.value.icon=h;break;case"monochrome-logos":f.value.oneColorLogo=h;break;case"monochrome-icons":f.value.oneColorIcon=h;break}s.value=!1},D={name:"",title:"",content:"",slug:""},T=Ra(!1),F=Ra(null),z=Ra(D),ee={title:[{required:!0,message:t("fillRequired")}]},G=Ra(null),ut=h=>{G.value=ue.cloneDeep(h),z.value=ue.cloneDeep(h||D),T.value=!0},St=async()=>(F.value?.validate(async h=>{if(!h){const _={title:z.value.title};G.value?S({slug:G.value.slug,..._},{onSuccess:pt=>{w.currentMenuItemKey=`${pt?.slug}-page`,T.value=!1}}):O({name:ue.startCase(ue.camelCase(c(z.value.title))).replace(/\s+/g,""),..._},{onSuccess:pt=>{w.currentMenuItemKey=`${pt?.slug}-page`,T.value=!1}})}}),!1),$e=async()=>{await C.refetch(),C.data.value?.forEach(h=>{f.value[h.key]!=null&&(f.value[h.key]=h.value)}),E.value=ue.cloneDeep(f.value);try{y.value=JSON.parse(f.value.additionalInfo||"[]")}catch{y.value=[]}};$e(),$d(()=>{setTimeout(()=>{a.params.key&&n(a.params.key)&&(w.currentMenuItemKey=a.params.key)},500)});const It=()=>{le(f.value,{onSuccess:()=>$e()})},ze=["basic-info","branding","social-networks"];qi(()=>w.currentMenuItemKey,(h,_)=>{h==="add-new-page"?(w.currentMenuItemKey=_,ut(null)):ze.includes(_)&&!ze.includes(h)&&(X.value||l.warning({title:t("confirm"),content:t("marketInfoDiscardChangesConfirm"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{w.currentMenuItemKey=_}}))});const lt=Ra();qi(()=>[B.value,ve.value,ne.value,P.value],([h,_,pt,Se])=>{lt.value=h||_||pt||Se,setTimeout(()=>{lt.value=void 0},500)},{immediate:!0});const Q=Ru({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:t("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return $d(()=>{setTimeout(()=>{const h=document.getElementById("sidebar");Q.addStep({attachTo:{element:h,on:"left"},title:t("contentManagementGuideTitle1"),text:t("contentManagementGuideText1"),buttons:[{text:t("pass"),label:t("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.cancel()}},{text:t("next"),label:t("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.next()}}]});const _=document.getElementsByClassName("page-menu-item");if(_&&_.length>0){const Se=[];for(let ct=0;ct<_.length;ct++)Se.push(_[ct]?.parentNode?.parentNode?.parentNode);Q.addStep({attachTo:{element:Se[0],on:"left"},title:t("contentManagementGuideTitle2"),text:t("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:t("previous"),label:t("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.back()}},{text:t("next"),label:t("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.next()}}]})}const pt=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;Q.addStep({attachTo:{element:pt,on:"left"},title:t("contentManagementGuideTitle3"),text:t("contentManagementGuideText3"),buttons:[{text:t("previous"),label:t("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.back()}},{text:t("ok"),label:t("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Q.next()}}]})},1e3)}),(h,_)=>{const pt=Ye,Se=Tl,ct=Nu,kt=Du,Y=el,ye=Va,xe=Qn,we=Ia,at=Na,ll=Gr,zt=Ca,Ke=Cl,al=Xi,Ot=mn,nl=Ha,Pl=wh("color-picker"),et=Mu,ie=lu,oe=uo,Ae=Jl;return Gt(),zl(qo,null,[te(ie,null,{"header-extra":fe(()=>[te(Se,null,{default:fe(()=>[Nt("div",Ch,[ze.includes(g(w).currentMenuItemKey)?(Gt(),Kn(pt,{key:0,loading:g(L)||g(C).isPending.value,disabled:g(X),type:"primary",secondary:"",onClick:It},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:save"})]),_:1})]),default:fe(()=>[Oo(" "+Zt(g(t)("save")),1)]),_:1},8,["loading","disabled"])):(Gt(),zl("div",Ih))]),te(pt,{dashed:"",type:"primary",title:g(t)("help"),onClick:_[0]||(_[0]=A=>g(Q).start())},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:fe(()=>[te(et,{style:Yn(`height: ${g(J)}px`)},{default:fe(()=>[te(et,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:fe(()=>[te(kt,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:g(lt),"default-collapsed":!g(V),"collapsed-width":64,"native-scrollbar":!1,width:g(V)?300:275},{default:fe(()=>[te(ct,{value:g(w).currentMenuItemKey,"onUpdate:value":_[1]||(_[1]=A=>g(w).currentMenuItemKey=A),"collapsed-width":64,"collapsed-icon-size":22,options:g(x)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),te(et,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:fe(()=>[te(xh,{name:"slide-fade"},{default:fe(()=>[Bi(Nt("section",Vh,[te(Ke,{hoverable:""},{default:fe(()=>[te(zt,{ref_key:"basicInfoFormRef",ref:De,model:g(f),rules:ae,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:fe(()=>[te(ye,{path:"name"},{label:fe(()=>[Nt("b",Sh,Zt(g(t)("websiteName")),1)]),default:fe(()=>[te(Y,{value:g(f).name,"onUpdate:value":_[2]||(_[2]=A=>g(f).name=A),placeholder:g(t)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),te(we,{"x-gap":"12",span:24},{default:fe(()=>[te(xe,{span:12,path:"email"},{label:fe(()=>[Nt("b",Eh,Zt(g(t)("email")),1)]),default:fe(()=>[te(Y,{value:g(f).email,"onUpdate:value":_[3]||(_[3]=A=>g(f).email=A),placeholder:g(t)("email"),class:"w-full"},{prefix:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),te(xe,{span:12,path:"phone"},{label:fe(()=>[Nt("b",Uh,Zt(g(t)("phone")),1)]),default:fe(()=>[te(Y,{value:g(f).phone,"onUpdate:value":_[4]||(_[4]=A=>g(f).phone=A),placeholder:g(t)("phone"),class:"w-full"},{prefix:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),te(ye,{path:"address"},{label:fe(()=>[Nt("span",Th,[Nt("b",null,Zt(g(t)("address")),1)])]),default:fe(()=>[te(Y,{value:g(f).address,"onUpdate:value":_[5]||(_[5]=A=>g(f).address=A),placeholder:g(t)("address"),class:"w-full"},{prefix:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),te(we,{"x-gap":"12",span:24},{default:fe(()=>[te(xe,{span:12,path:"postalCode"},{label:fe(()=>[Nt("b",Mh,Zt(g(t)("postalCode")),1)]),default:fe(()=>[te(Y,{value:g(f).postalCode,"onUpdate:value":_[6]||(_[6]=A=>g(f).postalCode=A),placeholder:g(t)("postalCode"),class:"w-full"},{prefix:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),te(ye,{"show-label":!1,path:"description"},{default:fe(()=>[te(at,{modelValue:g(f).description,"onUpdate:modelValue":_[7]||(_[7]=A=>g(f).description=A),placeholder:g(t)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:fe(()=>[Nt("b",Dh,Zt(g(t)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),te(ye,{path:"additionalInfo"},{label:fe(()=>[Nt("b",Nh,Zt(g(t)("additionalInfo")),1)]),default:fe(()=>[te(ll,{value:g(y),"onUpdate:value":_[8]||(_[8]=A=>Pi(y)?y.value=A:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":fe(()=>[Oo(Zt(g(t)("add")),1)]),default:fe(({value:A})=>[Nt("div",zh,[te(Y,{value:A.name,"onUpdate:value":nt=>A.name=nt,placeholder:g(t)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),te(Y,{value:A.content,"onUpdate:value":nt=>A.content=nt,placeholder:g(t)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Li,g(w).currentMenuItemKey==="basic-info"]]),Bi(Nt("section",Ah,[te(Ke,{segmented:"",size:"small"},{header:fe(()=>[Nt("span",Ph,Zt(g(t)("graphicElements")),1)]),default:fe(()=>[te(we,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:fe(()=>[te(Ot,null,{default:fe(()=>[te(Ke,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:fe(()=>[Nt("span",Lh,Zt(g(t)("logo")),1)]),default:fe(()=>[te(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:fe(()=>[g(f).logo?(Gt(),Kn(al,{key:0,class:"cursor-pointer","object-fit":"contain",style:Yn("border: 1px dashed "+g(W)(g(d),"white")),size:125,src:g(re)(g(f).logo),onClick:_[9]||(_[9]=()=>{p.value="logos",s.value=!0})},null,8,["style","src"])):(Gt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Yn(`border: 1px dashed ${g(W)(g(d),"white")}; width: 125px; height: 125px`),onClick:_[10]||(_[10]=()=>{p.value="logos",s.value=!0})},[Nt("div",Bh,[te(g(H),{size:"50"},{default:fe(()=>[te(g(_e),{icon:"carbon:image"})]),_:1}),Nt("span",null,Zt(g(t)("import")),1)])],4)),g(f).logo?(Gt(),Kn(pt,{key:2,quaternary:"",onClick:_[11]||(_[11]=()=>g(f).logo="")},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[Oo(" "+Zt(g(t)("clear")),1)]),_:1})):va("",!0)]),_:1})]),_:1})]),_:1}),te(Ot,null,{default:fe(()=>[te(Ke,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:fe(()=>[Nt("span",Fh,Zt(g(t)("icon")),1)]),default:fe(()=>[te(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:fe(()=>[g(f).icon?(Gt(),Kn(al,{key:0,class:"cursor-pointer","object-fit":"contain",style:Yn("border: 1px dashed "+g(W)(g(d),"white")),size:125,src:g(re)(g(f).icon),onClick:_[12]||(_[12]=()=>{p.value="icons",s.value=!0})},null,8,["style","src"])):(Gt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Yn(`border: 1px dashed ${g(W)(g(d),"white")}; width: 125px; height: 125px`),onClick:_[13]||(_[13]=()=>{p.value="icons",s.value=!0})},[Nt("div",Oh,[te(g(H),{size:"50"},{default:fe(()=>[te(g(_e),{icon:"carbon:image"})]),_:1}),Nt("span",null,Zt(g(t)("import")),1)])],4)),g(f).icon?(Gt(),Kn(pt,{key:2,quaternary:"",onClick:_[14]||(_[14]=()=>g(f).icon="")},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[Oo(" "+Zt(g(t)("clear")),1)]),_:1})):va("",!0)]),_:1})]),_:1})]),_:1}),te(Ot,null,{default:fe(()=>[te(Ke,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:fe(()=>[Nt("span",qh,Zt(g(t)("logoMonochrome")),1)]),default:fe(()=>[te(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:fe(()=>[g(f).oneColorLogo?(Gt(),Kn(al,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Yn("border: 1px dashed "+g(W)(g(d),"white")),size:125,src:g(re)(g(f).oneColorLogo),onClick:_[15]||(_[15]=()=>{p.value="monochrome-logos",s.value=!0})},null,8,["style","src"])):(Gt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Yn(`border: 1px dashed ${g(W)(g(d),"white")}; width: 125px; height: 125px`),onClick:_[16]||(_[16]=()=>{p.value="monochrome-logos",s.value=!0})},[Nt("div",Rh,[te(g(H),{size:"50"},{default:fe(()=>[te(g(_e),{icon:"carbon:image"})]),_:1}),Nt("span",null,Zt(g(t)("import")),1)])],4)),g(f).oneColorLogo?(Gt(),Kn(pt,{key:2,quaternary:"",onClick:_[17]||(_[17]=()=>g(f).oneColorLogo="")},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[Oo(" "+Zt(g(t)("clear")),1)]),_:1})):va("",!0)]),_:1})]),_:1})]),_:1}),te(Ot,null,{default:fe(()=>[te(Ke,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:fe(()=>[Nt("span",jh,Zt(g(t)("iconMonochrome")),1)]),default:fe(()=>[te(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:fe(()=>[g(f).oneColorIcon?(Gt(),Kn(al,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Yn("border: 1px dashed "+g(W)(g(d),"white")),size:125,src:g(re)(g(f).oneColorIcon),onClick:_[18]||(_[18]=()=>{p.value="monochrome-icons",s.value=!0})},null,8,["style","src"])):(Gt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Yn(`border: 1px dashed ${g(W)(g(d),"white")}; width: 125px; height: 125px`),onClick:_[19]||(_[19]=()=>{p.value="monochrome-icons",s.value=!0})},[Nt("div",Kh,[te(g(H),{size:"50"},{default:fe(()=>[te(g(_e),{icon:"carbon:image"})]),_:1}),Nt("span",null,Zt(g(t)("import")),1)])],4)),g(f).oneColorIcon?(Gt(),Kn(pt,{key:2,quaternary:"",onClick:_[20]||(_[20]=()=>g(f).oneColorIcon="")},{icon:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[Oo(" "+Zt(g(t)("clear")),1)]),_:1})):va("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),_[31]||(_[31]=Nt("br",null,null,-1)),te(Ke,{hoverable:"",segmented:"",size:"small"},{header:fe(()=>[Nt("span",Yh,Zt(g(t)("websiteColors")),1)]),default:fe(()=>[te(we,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:fe(()=>[te(Ot,null,{default:fe(()=>[Nt("div",Gh,[Nt("span",Hh,Zt(g(t)("baseColor")),1),Nt("div",Qh,[g(f).primaryColor?(Gt(),zl(qo,{key:0},[te(pt,{text:"",type:"error",style:{"font-size":"21px"},onClick:_[21]||(_[21]=A=>g(f).primaryColor="")},{default:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),_:1}),te(nl,{vertical:""})],64)):va("",!0),te(Pl,{"pure-color":g(f).primaryColor,"onUpdate:pureColor":_[22]||(_[22]=A=>g(f).primaryColor=A),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(me)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),te(Ot,null,{default:fe(()=>[Nt("div",Wh,[Nt("span",Xh,Zt(g(t)("secondaryColor")),1),Nt("div",Jh,[g(f).secondaryColor?(Gt(),zl(qo,{key:0},[te(pt,{text:"",type:"error",style:{"font-size":"21px"},onClick:_[23]||(_[23]=A=>g(f).secondaryColor="")},{default:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),_:1}),te(nl,{vertical:""})],64)):va("",!0),te(Pl,{"pure-color":g(f).secondaryColor,"onUpdate:pureColor":_[24]||(_[24]=A=>g(f).secondaryColor=A),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(me)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),te(Ot,null,{default:fe(()=>[Nt("div",Zh,[Nt("span",eb,Zt(g(t)("tertiaryColor")),1),Nt("div",tb,[g(f).accentColor?(Gt(),zl(qo,{key:0},[te(pt,{text:"",type:"error",style:{"font-size":"21px"},onClick:_[25]||(_[25]=A=>g(f).accentColor="")},{default:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:"carbon:trash-can"})]),_:1})]),_:1}),te(nl,{vertical:""})],64)):va("",!0),te(Pl,{"pure-color":g(f).accentColor,"onUpdate:pureColor":_[26]||(_[26]=A=>g(f).accentColor=A),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(me)?"white":"black",lang:g(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Li,g(w).currentMenuItemKey==="branding"]]),Bi(Nt("section",lb,[te(Ke,{hoverable:""},{default:fe(()=>[te(zt,{ref_key:"socialNetworksFormRef",ref:q,model:g(f),rules:Te,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:fe(()=>[te(we,{"x-gap":"12",span:24},{default:fe(()=>[(Gt(),zl(qo,null,xd(I,A=>te(xe,{key:A.name,span:12,path:A.name},{label:fe(()=>[Nt("b",ab,Zt(g(t)(A.name)),1)]),default:fe(()=>[te(Y,{value:g(f)[A.name],"onUpdate:value":nt=>g(f)[A.name]=nt,placeholder:g(t)(A.name),class:"w-full"},{prefix:fe(()=>[te(g(H),null,{default:fe(()=>[te(g(_e),{icon:A.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Li,g(w).currentMenuItemKey==="social-networks"]]),g(w).currentMenuItemKey==="newsletter-email"?(Gt(),zl("section",nb,[te(xg)])):va("",!0),g(w).currentMenuItemKey==="newsletter-phone"?(Gt(),zl("section",ob,[te(Pg)])):va("",!0),g(w).currentMenuItemKey==="newsletter-campaign"?(Gt(),zl("section",sb,[te(hh)])):va("",!0),g(w).currentMenuItemKey==="ads"?(Gt(),zl("section",rb,[te(vp)])):va("",!0),g(w).currentMenuItemKey==="videos"?(Gt(),zl("section",ib,[te(zv)])):va("",!0),g(w).currentMenuItemKey==="content-models"?(Gt(),zl("section",cb,[te(F1)])):va("",!0),g(w).currentMenuItemKey==="menus"?(Gt(),zl("section",db,[te(C_)])):va("",!0),g(w).currentMenuItemKey==="content-permalinks"?(Gt(),zl("section",ub,[te(uh)])):va("",!0),g(w).currentMenuItemKey==="page-sections"?(Gt(),zl("section",pb,[te(ig)])):va("",!0),(Gt(!0),zl(qo,null,xd(g(be),(A,nt)=>(Gt(),zl(qo,{key:`${A.slug}-page`},[g(w).currentMenuItemKey===`${A.slug}-page`?(Gt(),zl("section",{key:`${A.slug}-page`},[te(nf,{slug:A.slug,"open-form-modal":ut,onDelete:()=>{g(w).currentMenuItemKey=(g(be)?.length||0)>1?`${g(be)?.[nt-1].slug}-page`:e[0],g(R)()}},null,8,["slug","onDelete"])])):va("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),te(oe,{show:g(s),"onUpdate:show":_[27]||(_[27]=A=>Pi(s)?s.value=A:null),title:g(t)("selectImage"),"upload-config":{folder:g(p),limit:0,maxSize:0,baseUrl:g(K)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:m},null,8,["show","title","upload-config"]),te(Ae,{show:g(T),"onUpdate:show":_[29]||(_[29]=A=>Pi(T)?T.value=A:null),loading:g(M)||g(U),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:g(G)?g(t)("editPage"):g(t)("addPage"),"positive-text":g(t)("validate"),"negative-text":g(t)("cancel"),onPositiveClick:St,onNegativeClick:_[30]||(_[30]=A=>T.value=!1)},{default:fe(()=>[te(zt,{ref_key:"addPageFormRef",ref:F,model:g(z),rules:ee,"show-require-mark":!1,size:"medium"},{default:fe(()=>[te(ye,{"show-label":!1,path:"title",class:"mt-5"},{default:fe(()=>[te(at,{modelValue:g(z).title,"onUpdate:modelValue":_[28]||(_[28]=A=>g(z).title=A),placeholder:g(t)("title"),class:"w-full",sync:"",onKeydown:$h(St,["enter"])},{label:fe(()=>[Oo(Zt(g(t)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),_k=Wn(gb,[["__scopeId","data-v-eb0e0d24"]]);export{_k as default};
