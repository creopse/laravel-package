import{i as m}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{_ as H}from"./AuthLayout-Cd04zGrL.js";import{u as q,c as L,d as M,R as _,_ as O,e as F}from"./index-B2LlKIv2.js";import{I as j}from"./iconify_vue-BwapRRpV.js";import{R as z}from"./response-error-code-DXeaxdrh.js";import{u as U}from"./vue-router-B7M2c80d.js";import{_ as G}from"./validator-QVVspsrX.js";import{b as W,A as Y,D as $,E as J,F as K,B as Q,N as X}from"./naive-ui-CrTIpLJ9.js";import{u as Z}from"./vue-i18n-CWrb4u3f.js";const{defineComponent:ee}=await m("vue"),{unref:e,createElementVNode:r,resolveComponent:Ee,createVNode:o,withCtx:s,toDisplayString:w,createTextVNode:b,openBlock:te,createBlock:oe}=await m("vue"),se={class:"container h-full"},ne={class:"flex justify-center items-center flex-wrap h-full g-6 text-gray-800"},re={class:"md:w-8/12 lg:w-5/12 xl:w-4/12 2xl:w-3/12 sm:w-full"},ae={class:"flex justify-center mb-6"},le=["src","alt"],ie={class:"flex items-center my-4 before:flex-1 before:border-t before:border-gray-300 before:mt-0.5 after:flex-1 after:border-t after:border-gray-300 after:mt-0.5"},ce={class:"w-full text-center font-semibold mx-4 mb-0"},{defineComponent:ue,ref:u,watch:_e}=await m("vue"),me=ue({name:_.RESET_PASSWORD.NAME}),Se=ee({...me,setup(de){const{t:n}=Z(),d=U(),p=W(),{request:h}=F(),{displayFormErrors:x,logo:y}=q(),E=L(),S=M(),c=u(!1),f=u(null),l=u({email:""}),C={email:[{required:!0,message:n("fillRequired")},{trigger:["input"],validator(i,t){return t&&!G.isEmail(t)?new Error(n("invalidEmail")):!0}}]},k=i=>{i.preventDefault(),f.value?.validate(async t=>{if(!t){c.value=!0;const a=await h({url:"/auth/send-password-link",method:"post",data:{email:l.value.email}});if(a.failure&&a.error)switch(a.error?.response?.data?.errorCode){case z.FORM_INVALID_DATA:x(a.error?.response?.data?.data);break;default:p.error(n("failedToSend"))}else l.value={email:""},p.success(n("weHaveSentYouPwdResetEmail"),{closable:!0,duration:1e4});c.value=!1}})},A="Creopse",R=S.getSettingValue("disableInstaller","boolean");return _e(()=>E.isUserConnected,i=>{i&&d.replace(_.HOME.PATH)},{immediate:!0}),(i,t)=>{const a=K,N=J,I=j,V=X,g=Q,T=$,D=Y,B=O,P=H;return te(),oe(P,{"display-server-alerts":!e(R)},{default:s(()=>[o(B,{name:"slide-fade",appear:""},{default:s(()=>[r("div",se,[r("div",ne,[r("div",re,[o(D,{size:"small",class:"w-full"},{default:s(()=>[r("div",ae,[r("img",{src:e(y),class:"w-54",alt:e(A)},null,8,le)]),o(T,{ref_key:"formRef",ref:f,model:e(l),rules:C,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:s(()=>[o(N,{label:e(n)("addressEmail"),path:"email"},{default:s(()=>[o(a,{value:e(l).email,"onUpdate:value":t[0]||(t[0]=v=>e(l).email=v),placeholder:e(n)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(g,{type:"primary",block:"",loading:e(c),onClick:k},{icon:s(()=>[o(V,null,{default:s(()=>[o(I,{icon:"mdi:lock-reset"})]),_:1})]),default:s(()=>[b(" "+w(e(n)("resetPassword")),1)]),_:1},8,["loading"]),r("div",ie,[r("p",ce,[o(g,{text:"",onClick:t[1]||(t[1]=v=>e(d).push(e(_).LOGIN.PATH))},{default:s(()=>[b(w(e(n)("toLogin")),1)]),_:1})])])]),_:1},8,["model"])]),_:1})])])])]),_:1})]),_:1},8,["display-server-alerts"])}}});export{Se as default};
