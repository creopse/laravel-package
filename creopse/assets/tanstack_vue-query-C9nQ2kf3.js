import"./vue-demi-colorpicker-CNsKiPpa.js";import{Q as I,M as T,a as _,i as V,s as m,b as $,c as F,d as K}from"./tanstack_query-core-CCfXiMWC.js";import{i as M,u as S,r as N,s as U,a as x,b as v,c as R,t as P,o as O,d as k}from"./vue_reactivity-h59Zk7w_.js";import{h as Y,i as B,n as W,c as w,w as d}from"./vue_runtime-core-PUhyuCwm.js";var H="VUE_QUERY_CLIENT";function A(e){const t=e?`:${e}`:"";return`${H}${t}`}function b(e,t){Object.keys(e).forEach(i=>{e[i]=t[i]})}function C(e,t,i="",n=0){if(t){const s=t(e,i,n);if(s===void 0&&M(e)||s!==void 0)return s}if(Array.isArray(e))return e.map((s,u)=>C(s,t,String(u),n+1));if(typeof e=="object"&&L(e)){const s=Object.entries(e).map(([u,o])=>[u,C(o,t,u,n+1)]);return Object.fromEntries(s)}return e}function J(e,t){return C(e,t)}function r(e,t=!1){return J(e,(i,n,s)=>{if(s===1&&n==="queryKey")return r(i,!0);if(t&&X(i))return r(i(),t);if(M(i))return r(S(i),t)})}function L(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function X(e){return typeof e=="function"}function D(e=""){if(!Y())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=A(e),i=B(t);if(!i)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return i}var Z=class extends I{find(e){return super.find(r(e))}findAll(e={}){return super.findAll(r(e))}},z=class extends T{find(e){return super.find(r(e))}findAll(e={}){return super.findAll(r(e))}},G=class extends _{constructor(e={}){const t={defaultOptions:e.defaultOptions,queryCache:e.queryCache||new Z,mutationCache:e.mutationCache||new z};super(t),this.isRestoring=N(!1)}isFetching(e={}){return super.isFetching(r(e))}isMutating(e={}){return super.isMutating(r(e))}getQueryData(e){return super.getQueryData(r(e))}ensureQueryData(e){return super.ensureQueryData(r(e))}getQueriesData(e){return super.getQueriesData(r(e))}setQueryData(e,t,i={}){return super.setQueryData(r(e),t,r(i))}setQueriesData(e,t,i={}){return super.setQueriesData(r(e),t,r(i))}getQueryState(e){return super.getQueryState(r(e))}removeQueries(e={}){return super.removeQueries(r(e))}resetQueries(e={},t={}){return super.resetQueries(r(e),r(t))}cancelQueries(e={},t={}){return super.cancelQueries(r(e),r(t))}invalidateQueries(e={},t={}){const i=r(e),n=r(t);if(super.invalidateQueries({...i,refetchType:"none"},n),i.refetchType==="none")return Promise.resolve();const s={...i,type:i.refetchType??i.type??"active"};return W().then(()=>super.refetchQueries(s,n))}refetchQueries(e={},t={}){return super.refetchQueries(r(e),r(t))}fetchQuery(e){return super.fetchQuery(r(e))}prefetchQuery(e){return super.prefetchQuery(r(e))}fetchInfiniteQuery(e){return super.fetchInfiniteQuery(r(e))}prefetchInfiniteQuery(e){return super.prefetchInfiniteQuery(r(e))}setDefaultOptions(e){super.setDefaultOptions(r(e))}setQueryDefaults(e,t){super.setQueryDefaults(r(e),r(t))}getQueryDefaults(e){return super.getQueryDefaults(r(e))}setMutationDefaults(e,t){super.setMutationDefaults(r(e),r(t))}getMutationDefaults(e){return super.getMutationDefaults(r(e))}},ue={install:(e,t={})=>{const i=A(t.queryClientKey);let n;if("queryClient"in t&&t.queryClient)n=t.queryClient;else{const o="queryClientConfig"in t?t.queryClientConfig:void 0;n=new G(o)}V||n.mount();let s=()=>{};if(t.clientPersister){n.isRestoring&&(n.isRestoring.value=!0);const[o,c]=t.clientPersister(n);s=o,c.then(()=>{n.isRestoring&&(n.isRestoring.value=!1),t.clientPersisterOnSuccess?.(n)})}const u=()=>{n.unmount(),s()};if(e.onUnmount)e.onUnmount(u);else{const o=e.unmount;e.unmount=function(){u(),o()}}e.provide(i,n)}};function ee(e,t,i){const n=D(),s=w(()=>{const a=r(t);typeof a.enabled=="function"&&(a.enabled=a.enabled());const Q=n.defaultQueryOptions(a);return Q._optimisticResults=n.isRestoring?.value?"isRestoring":"optimistic",Q}),u=new e(n,s.value),o=s.value.shallow?U(u.getCurrentResult()):x(u.getCurrentResult());let c=()=>{};n.isRestoring&&d(n.isRestoring,a=>{a||(c(),c=u.subscribe(Q=>{b(o,Q)}))},{immediate:!0});const h=()=>{u.setOptions(s.value),b(o,u.getCurrentResult())};d(s,h),O(()=>{c()});const f=(...a)=>(h(),o.refetch(...a)),l=()=>new Promise((a,Q)=>{let g=()=>{};const q=()=>{if(s.value.enabled!==!1){u.setOptions(s.value);const E=u.getOptimisticResult(s.value);E.isStale?(g(),u.fetchOptimistic(s.value).then(a,j=>{m(s.value.throwOnError,[j,u.getCurrentQuery()])?Q(j):a(u.getCurrentResult())})):(g(),a(E))}};q(),g=d(s,q)});d(()=>o.error,a=>{if(o.isError&&!o.isFetching&&m(s.value.throwOnError,[a,u.getCurrentQuery()]))throw a});const p=s.value.shallow?v(o):R(o),y=P(p);for(const a in o)typeof o[a]=="function"&&(y[a]=o[a]);return y.suspense=l,y.refetch=f,y}function ie(e,t){return ee($,e)}function oe({queries:e,...t},i){const n=D(),s=w(()=>S(e).map(l=>{const p=r(l);typeof p.enabled=="function"&&(p.enabled=l.enabled());const y=n.defaultQueryOptions(p);return y._optimisticResults=n.isRestoring?.value?"isRestoring":"optimistic",y})),u=new F(n,s.value,t),o=()=>{const[f,l]=u.getOptimisticResult(s.value,t.combine);return l(f.map((p,y)=>({...p,refetch:async(...a)=>{const[{[y]:Q}]=u.getOptimisticResult(s.value,t.combine);return Q.refetch(...a)}})))},c=k(o());let h=()=>{};return n.isRestoring&&d(n.isRestoring,f=>{f||(h(),h=u.subscribe(()=>{c.value=o()}),c.value=o())},{immediate:!0}),d(s,f=>{u.setQueries(f,t),c.value=o()}),O(()=>{h()}),t.shallow?v(c):R(c)}function ae(e,t){const i=D(),n=w(()=>i.defaultMutationOptions(r(e))),s=new K(i,n.value),u=n.value.shallow?U(s.getCurrentResult()):x(s.getCurrentResult()),o=s.subscribe(l=>{b(u,l)}),c=(l,p)=>{s.mutate(l,p).catch(()=>{})};d(n,()=>{s.setOptions(n.value)}),O(()=>{o()});const h=n.value.shallow?v(u):R(u),f=P(h);return d(()=>u.error,l=>{if(l&&m(n.value.throwOnError,[l]))throw l}),{...f,mutate:c,mutateAsync:u.mutate,reset:u.reset}}export{G as Q,ue as V,oe as a,ae as b,D as c,ie as u};
