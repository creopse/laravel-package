import{i as d}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{_ as R}from"./AuthLayout-Cd04zGrL.js";import{u as B,c as H,d as D,R as p,e as F}from"./index-B2LlKIv2.js";import{R as L}from"./response-error-code-DXeaxdrh.js";import{a as M,u as T}from"./vue-router-B7M2c80d.js";import{O as $,A as Y,C as q,P as O,I as P,B as j}from"./naive-ui-CrTIpLJ9.js";import{u as z}from"./vue-i18n-CWrb4u3f.js";const{defineComponent:G}=await d("vue"),{unref:e,createElementVNode:o,toDisplayString:l,createTextVNode:c,resolveComponent:ye,withCtx:t,createVNode:_,openBlock:i,createBlock:u,createCommentVNode:U,Fragment:J,createElementBlock:K}=await d("vue"),Q={class:"container h-full"},W={class:"flex justify-center items-center flex-wrap h-full g-6 text-gray-800"},X={class:"md:w-8/12 lg:w-5/12 xl:w-4/12 2xl:w-3/12 sm:w-full"},Z={class:"flex justify-center mb-4.5"},ee=["src","alt"],te={class:"text-center"},oe={class:"flex items-center my-4 before:flex-1 before:border-t before:border-gray-300 before:mt-0.5 after:flex-1 after:border-t after:border-gray-300 after:mt-0.5"},se={class:"text-center font-semibold mx-4 mb-0"},{defineComponent:re,ref:g,onMounted:ae}=await d("vue"),ne=re({name:p.VERIFY_EMAIL.NAME}),he=G({...ne,setup(le){const{t:a}=z(),{logo:v}=B(),{request:x}=F(),s=M(),f=T(),b=H(),w=D(),y=g(!0),r=g(null);ae(async()=>{(!s.params.id||!s.params.hash)&&f.replace(p.LOGIN.PATH);const n=await x({url:`/auth/verify-email/${s.params.id}/${s.params.hash}?expires=${s.query.expires}&signature=${s.query.signature}`});if(n.failure&&n.error)switch(n.error?.response?.data?.errorCode){case L.AUTH_EMAIL_ALREADY_VERIFIED:r.value="already";break;default:r.value="no";break}else r.value="yes",b.userData=n.result.data.user;y.value=!1});const k="Creopse",E=w.getSettingValue("disableInstaller","boolean");return(n,h)=>{const C=O,A=q,m=P,V=j,N=Y,S=$,I=R;return i(),u(I,{"display-server-alerts":!e(E)},{default:t(()=>[o("div",Q,[o("div",W,[o("div",X,[_(S,{show:e(y)},{default:t(()=>[_(N,{size:"small",class:"w-full"},{default:t(()=>[o("div",Z,[o("img",{src:e(v),class:"w-54",alt:e(k)},null,8,ee)]),o("div",te,[_(A,null,{default:t(()=>[_(C,{type:"primary"},{default:t(()=>[c(l(e(a)("emailVerification")),1)]),_:1})]),_:1}),e(r)!=null?(i(),K(J,{key:0},[e(r)=="yes"?(i(),u(m,{key:0,type:"success"},{default:t(()=>[c(l(e(a)("verifyYourEmailSucceed")),1)]),_:1})):e(r)=="already"?(i(),u(m,{key:1,type:"info"},{default:t(()=>[c(l(e(a)("yourEmailAlreadyVerified")),1)]),_:1})):(i(),u(m,{key:2,type:"error"},{default:t(()=>[c(l(e(a)("verifyYourEmailFailed")),1)]),_:1}))],64)):U("",!0),o("div",oe,[o("p",se,[_(V,{text:"",onClick:h[0]||(h[0]=ce=>e(f).replace(e(p).HOME.PATH))},{default:t(()=>[c(l(e(a)("back")),1)]),_:1})])])])]),_:1})]),_:1},8,["show"])])])])]),_:1},8,["display-server-alerts"])}}});export{he as default};
