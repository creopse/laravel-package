import{i as h}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{_ as G}from"./index.vue_vue_type_style_index_0_lang-ClsakzZz.js";import{I as j}from"./iconify_vue-DK9FHL8l.js";import{u as D,d as M}from"./index-BkcZCWEr.js";import{a as N}from"./axios-ELK0WRh1.js";import{B as q,t as H,C as P}from"./naive-ui-U3LV0D3Q.js";import{u as Q}from"./vue-i18n-DGGON2e6.js";import{_ as X}from"./fawmi_vue-google-maps-Cpr8dN0B.js";const{defineComponent:Y}=await h("vue"),{renderSlot:Z,createElementVNode:f,unref:o,resolveComponent:ye,createVNode:y,withCtx:I,openBlock:d,createBlock:g,createCommentVNode:V,Fragment:ee,createElementBlock:E,isRef:v,normalizeStyle:S}=await h("vue"),{defineComponent:te,ref:x,computed:F,watch:U,h:_}=await h("vue"),{defineStore:le}=await h("pinia"),ae={class:"flex justify-between gap-2"},oe={class:"flex gap-0.5"},ne=te({name:"I18nInput"}),se=Y({...ne,props:{type:{default:"text"},size:{default:"medium"},autosize:{type:[Boolean,Object],default:!1},placeholder:{default:""},inputStyles:{default:()=>({width:"100%"})},displayFlag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},rows:{default:2},contentEditorItems:{default:()=>["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo","|","sourceEditing"]},shouldNotGroupEditorWhenFull:{type:Boolean,default:!1},enableUpload:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue","codeChange"],setup(T,{emit:O}){const t=T,p=O,c=le("i18n-input",()=>({langCode:x("")}))(),a=x(""),u=F(()=>{let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e}),n=F({get(){let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e[a.value]||""},set(e){let l;try{l=JSON.parse(t.modelValue||"{}")}catch{l={}}l[a.value]=e,p("update:modelValue",JSON.stringify(l))}});U(()=>a.value,e=>{p("codeChange",e),c.langCode=e}),U(()=>c.langCode,e=>{t.sync&&(a.value=e)}),c.langCode&&(a.value=c.langCode);const{languages:b}=D();b.length&&!a.value&&(a.value=b[0].value);const A=e=>_("div",{class:"flex items-center"},[t.displayFlag?_("img",{src:e.flag,style:{width:"14px",marginRight:"4px"}}):_("span"),_("b",{},{default:()=>`${String(e.value).toUpperCase()}`})]),{t:k,locale:m}=Q(),J=()=>{const e=u.value;e[a.value]=e[m.value],p("update:modelValue",JSON.stringify(e))},{getSettingValue:z}=M(),C=z("translation.googleTranslate.apiKey","string"),w=z("translation.deeplTranslate.apiKey","string"),K=async(e,l)=>{const s="https://api-free.deepl.com/v2/translate";try{return(await N.post(s,new URLSearchParams({auth_key:w,text:e,target_lang:l.toUpperCase()}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.translations[0].text}catch{return""}},L=async(e,l)=>{const s=`https://translation.googleapis.com/language/translate/v2?key=${C}`;try{return(await N.post(s,{q:e,target:l,format:"text"})).data.data.translations[0].translatedText}catch{return""}},W=async()=>{const e=u.value;C?e[a.value]=await L(e[m.value],a.value):w&&(e[a.value]=await K(e[m.value],a.value)),p("update:modelValue",JSON.stringify(e))};return(e,l)=>{const s=j,i=q,$=H,R=G,B=P;return d(),E("div",null,[f("div",ae,[f("div",null,[Z(e.$slots,"label",{},void 0,!0)]),f("div",oe,[o(u)&&o(u)[o(m)]&&!o(u)[o(a)]?(d(),E(ee,{key:0},[o(C)||o(w)?(d(),g(i,{key:0,size:"tiny",secondary:"",title:o(k)("translate"),onClick:W},{icon:I(()=>[y(s,{icon:"carbon:translate"})]),_:1},8,["title"])):V("",!0),y(i,{title:o(k)("fillIn"),secondary:"",size:"tiny",onClick:J},{icon:I(()=>[y(s,{icon:"carbon:container-image-push"})]),_:1},8,["title"])],64)):V("",!0),y($,{value:o(a),"onUpdate:value":l[0]||(l[0]=r=>v(a)?a.value=r:null),disabled:t.disabled,options:o(b),"render-label":A,class:"!w-[80px] !border-t-0",filterable:"",size:"tiny"},null,8,["value","disabled","options"])])]),f("div",null,[t.type=="editor"?(d(),g(R,{key:0,modelValue:o(n),"onUpdate:modelValue":l[1]||(l[1]=r=>v(n)?n.value=r:null),style:S(e.inputStyles),disabled:t.disabled,placeholder:e.placeholder,"toolbar-items":e.contentEditorItems,"should-not-group-when-full":t.shouldNotGroupEditorWhenFull,"enable-upload":t.enableUpload},null,8,["modelValue","style","disabled","placeholder","toolbar-items","should-not-group-when-full","enable-upload"])):t.type=="text"?(d(),g(B,{key:1,value:o(n),"onUpdate:value":l[2]||(l[2]=r=>v(n)?n.value=r:null),size:t.size,type:t.type,style:S(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","size","type","style","placeholder","disabled"])):t.type=="textarea"?(d(),g(B,{key:2,value:o(n),"onUpdate:value":l[3]||(l[3]=r=>v(n)?n.value=r:null),autosize:t.autosize,size:t.size,type:t.type,rows:e.rows,style:S(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","autosize","size","type","rows","style","placeholder","disabled"])):V("",!0)])])}}}),ge=X(se,[["__scopeId","data-v-28da6e21"]]);export{ge as _};
