import{_ as Ct,a as Bt,b as la}from"./index.vue_vue_type_script_setup_true_lang-8f6b05a6.js";import{_ as ka}from"./PageLayout.vue_vue_type_script_setup_true_lang-1f1f845c.js";import{_ as gt}from"./I18nInput-c371cc93.js";import{f as wl,p as ot,o as wa,v as pl,T as xa,a as Ca,w as Ia}from"./vue_runtime-dom-c0cb2070.js";import{e as Qe,u as Je,f as yt,r as Et,p as Wt,q as Zl,s as We,i as Jt,t as aa,_ as Dt,v as na,w as $a,x as fl,h as sa,j as Va,R as Ta}from"./index-b7ce0b99.js";import{I as ge}from"./iconify_vue-6750bec6.js";import{R as et}from"./response-error-code-87d1097e.js";import{d as el,a as je}from"./pinia-5dd13ed8.js";import{_ as be}from"./lodash-a9971f22.js";import{c as pt,b as nt,a as st,_ as Ve,g as it,Z as Lt,V as Tt,N as ce,L as lt,ag as It,a2 as kt,P as Kt,a4 as ut,E as Ze,H as qt,I as bt,a8 as _l,a9 as yl,ah as za,F as ft,G as mt,ab as Qt,a7 as gl,aa as oa,j as $t,R as Pt,a5 as xl,ac as ia,a3 as Cl,M as Yt,ai as Ua,$ as tl,a0 as ll,W as bl,U as ra,a1 as al,aj as Sa,ak as Ma,k as Aa,al as ua,O as da,J as Ea,am as ca,e as pa,an as Da,ao as La,ap as Pa,h as Na,n as Ra,o as Oa}from"./naive-ui-1f55be4a.js";import{d as Be,aF as _t,o as n,c as D,Y as t,aO as l,l as P,P as S,F as me,ar as Ne,a as _,Q as _e,i as vt,h as re,p as De,ag as Gt,as as hl,W as fa,w as ht,aH as qa,v as il,r as Fa,b as Il,s as St,e as ma}from"./vue_runtime-core-4f5fb440.js";import{u as He}from"./vue-i18n-84a05dd5.js";import{r as o,u as e,c as Ie,a as Ot}from"./vue_reactivity-852d8377.js";import{t as i,a as Ge,n as Oe}from"./vue_shared-7dcc3b7f.js";import{_ as zt}from"./fawmi_vue-google-maps-52673af8.js";import{o as ja,a as Ba}from"./vueuse_core-e3c6c607.js";import{s as Ka}from"./vue-virtual-scroller-50f85086.js";import{i as Ql}from"./is-svg-36c6b3ab.js";import{_ as va}from"./index.vue_vue_type_style_index_0_lang-87b4b380.js";import{M as Zt}from"./vue-pick-colors-f58bc48b.js";import{v as ct}from"./uuid-cf522c50.js";import{s as _a}from"./slugify-ce681755.js";import{r as Ya,u as cl}from"./xlsx-83e6f69b.js";import{_ as Xt}from"./validator-c0254ba9.js";import{_ as Ga}from"./VueTelInputWrapper-0362b6ee.js";import{i as Ha}from"./libphonenumber-js-cdb4849e.js";import{a as Wa}from"./vue-router-e670704e.js";import"./media-library-58b3d02b.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-418f0a59.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-d1f69174.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var At=(de=>(de.IMAGE="image",de.VIDEO="video",de))(At||{});const ml=el("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:de}=Qe(),a=await de({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),Ja={class:"flex items-center justify-between"},Xa={class:"flex flex-col"},Za={class:"text-sm font-bold"},Qa={class:"text-xs font-normal"},en={key:0,class:"text-xs font-bold"},tn=Be({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,displayFormErrors:X,formatKey:ee}=Je(),m=_t(de,"show"),{adIdentifiers:B}=je(ml()),{loadAdIdentifiers:$}=ml(),{isLightTheme:se}=je(yt()),q=o(!1),K=async()=>{q.value=!0,await $(),q.value=!1};K();const Y=pt(),z=nt(),f=st(),O=o(!1),M=o(!1),F=o(null),j=o(null),y=o({id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),le={id:[{required:!0,message:a("fillRequired")}]},R=H=>{F.value=be.cloneDeep(H),y.value=be.cloneDeep(H||{id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),M.value=!0},L=async()=>{var H;return(H=j.value)==null||H.validate(async U=>{var V,w,G,W,ae,s;if(!U){f.start(),O.value=!0;const A={id:y.value.id,reusable:y.value.reusable,contentType:y.value.contentType,contentSize:y.value.contentSize,params:y.value.params},T=await d({method:F.value?"put":"post",url:F.value?`/ad-identifiers/${F.value.id}`:"/ad-identifiers",data:A});if(T.failure&&T.error)switch((G=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:G.errorCode){case et.FORM_INVALID_DATA:X((s=(ae=(W=T.error)==null?void 0:W.response)==null?void 0:ae.data)==null?void 0:s.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),K(),M.value=!1;O.value=!1,f.finish()}}),!1},te=async H=>{Y.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/ad-identifiers/${H.id}`})).success?(z.success(a("success")),K()):z.error(a("anErrorOccurred"))}})};return(H,U)=>{const V=ge,w=Ve,G=it,W=Lt,ae=Tt,s=ce,A=lt,T=It,c=kt,v=Kt,Z=ut,u=Ze,r=qt,C=bt,x=_l,I=yl,g=za,h=ft,pe=mt;return n(),D(me,null,[t(Z,{show:m.value,"onUpdate:show":U[2]||(U[2]=ne=>m.value=ne),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(G,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(q),onClick:U[0]||(U[0]=ne=>R(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(q),onClick:U[1]||(U[1]=ne=>m.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(v,{show:e(q)},{default:l(()=>[e(B).length?(n(),S(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(B),ne=>(n(),S(A,{key:ne.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ja,[_("div",Xa,[_("span",Za,i(ne.id),1),_("div",null,[_("span",Qa,i(ne.contentType===e(At).IMAGE?e(a)("image"):e(a)("video")),1),ne.contentSize?(n(),D("span",en," Â ("+i(ne.contentSize)+") ",1)):_e("",!0)])]),t(G,null,{default:l(()=>[t(W,{size:"medium",bordered:!1,type:ne.reusable?"info":"warning"},{default:l(()=>[P(i(ne.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ae,{vertical:"",class:Ge(["!mx-0",e(p)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(w,{size:"small",type:"warning",secondary:e(se),onClick:E=>R(ne)},{default:l(()=>[t(s,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(se),onClick:E=>te(ne)},{default:l(()=>[t(s,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(A,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(s,{size:"60"},{default:l(()=>[t(V,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(M),"onUpdate:show":U[8]||(U[8]=ne=>Ie(M)?M.value=ne:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(F)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:U[9]||(U[9]=ne=>M.value=!1)},{default:l(()=>[t(pe,{ref_key:"formRef",ref:j,model:e(y),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(u,{value:e(y).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":U[3]||(U[3]=ne=>e(y).id=e(ee)(ne))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(u,{value:e(y).contentSize,"onUpdate:value":U[4]||(U[4]=ne=>e(y).contentSize=ne),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(I,{value:e(y).reusable,"onUpdate:value":U[5]||(U[5]=ne=>e(y).reusable=ne),name:"reusable",class:"w-full"},{default:l(()=>[t(x,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(x,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(r,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(I,{value:e(y).contentType,"onUpdate:value":U[6]||(U[6]=ne=>e(y).contentType=ne),name:"contentType",class:"w-full"},{default:l(()=>[t(x,{value:e(At).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(x,{value:e(At).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(h,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(g,{value:e(y).params,"onUpdate:value":U[7]||(U[7]=ne=>e(y).params=ne),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ln={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},an={id:"video",autoplay:"",controls:"",style:{width:"100%"}},nn=["src"],sn=Be({__name:"index",setup(de){const a=st(),d=nt(),p=pt(),X=vt("appConfig"),{adIdentifiers:ee}=je(ml()),{loadAdIdentifiers:m}=ml(),{displayFormErrors:B,tr:$,fileUrl:se,pickByTheme:q,appSecondaryColor:K,isInDevMode:Y}=Je(),{request:z}=Qe(),{t:f,locale:O}=He(),M=o(!1),F=o([]),j=o(""),y=o(),le={pageSize:12,prefix:({itemCount:g})=>re("div",{class:"font-bold"},{default:()=>`${f("total")}: ${g}`})},R=[{title:f("preview"),key:"image",width:200,fixed:"left",render(g){var h;return((h=g.adIdentifier)==null?void 0:h.contentType)==At.IMAGE?re(Qt,{src:g.contentUrl??"",objectFit:"cover",width:200,height:100}):re("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[re(ce,{size:50,color:K.value},{default:()=>re(ge,{icon:"carbon:document-video"})})])}},{title:f("identifier"),key:"pid",width:150,fixed:"left",render(g){return re("small",{},{default:()=>g.pid})}},{title:f("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(g){return re("div",{},{default:()=>$(g.title)})}},{title:f("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(g){return re("small",{},{default:()=>$(g.description)})}},{title:f("status"),key:"isActive",width:100,render(g){return re(Lt,{type:g.display?"success":"warning",bordered:!1},{default:()=>g.display?f("visible"):f("hidden")})},sortOrder:!1,sorter:"default"},{title:f("updateAt"),key:"updatedAt",width:125,render(g){return re("div",{},{default:()=>Et(g.updatedAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:f("createdAt"),key:"createdAt",width:125,render(g){return re("div",{},{default:()=>Et(g.createdAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:y,placeholder:f("search"),value:j.value,onInput:g=>{j.value=g}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(g){return re("div",{class:"flex justify-end items-center w-full"},[re(Ve,{size:"small",type:"warning",onClick:()=>{c(g)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:f("confirm"),content:f("confirmDeleteAd"),positiveText:f("yes"),negativeText:f("no"),onPositiveClick:async()=>{(await z({method:"delete",url:`/ads/${g.id}`})).success?(d.success(f("success")),te()):d.error(f("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=De(()=>{if(!j.value)return F.value;const g=F.value.filter(h=>{var pe;return h.pid.toLowerCase().includes(j.value.toLowerCase())||h.title.toLowerCase().includes(j.value.toLowerCase())||((pe=h.description)==null?void 0:pe.toLowerCase().includes(j.value.toLowerCase()))});return y.value&&y.value.focus(),g}),te=async()=>{M.value=!0;const g=await z({url:"/ads"});g.success&&g.result&&(F.value=g.result.data),await m(),M.value=!1};te();const H=o(!1),U=o(!1),V=o(!1),w=o(At.IMAGE),G=o(),W=o(null),ae=o(null),s=o({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),A={pid:[{required:!0,message:f("fillRequired")}],title:[{required:!0,message:f("fillRequired")}],content:[{required:!0,message:f("fillRequired")}]},T=De({get:()=>!s.value.broadcastStart||!s.value.broadcastEnd?null:[s.value.broadcastStart||"",s.value.broadcastEnd||""],set:g=>{g?(s.value.broadcastStart=g[0],s.value.broadcastEnd=g[1]):(s.value.broadcastStart=null,s.value.broadcastEnd=null)}}),c=g=>{var h;W.value=be.cloneDeep(g),g?(s.value=be.cloneDeep(g),g.data||(s.value.data={})):s.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},G.value=(h=ee.value.find(pe=>pe.id==s.value.pid))==null?void 0:h.params,U.value=!0},v=g=>re("span",{},{default:()=>g.id+(g.contentSize?` (${g.contentSize})`:"")}),Z=async()=>{var g;return(g=ae.value)==null||g.validate(async h=>{var pe,ne,E,b,Q,ke;if(!h)if(W.value)if(W.value.title!==s.value.title&&F.value.findIndex(he=>he.title==s.value.title)>-1)d.error(f("sameAdTitleMessage"));else{a.start(),H.value=!0;const he={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Ue=await z({method:"put",url:`/ads/${W.value.id}`,data:he});Ue.success&&Ue.result.data&&(d.success(f("success")),te()),H.value=!1,a.finish(),U.value=!1}else if(F.value.findIndex(he=>he.title==s.value.title)>-1)d.error(f("sameAdTitleMessage"));else{a.start(),H.value=!0;const he={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Ue=await z({method:"post",url:"/ads",data:he});if(Ue.failure&&Ue.error)switch((E=(ne=(pe=Ue.error)==null?void 0:pe.response)==null?void 0:ne.data)==null?void 0:E.errorCode){case et.FORM_INVALID_DATA:B((ke=(Q=(b=Ue.error)==null?void 0:b.response)==null?void 0:Q.data)==null?void 0:ke.data);break;default:d.error(f("anErrorOccurred"))}else d.success(f("success")),te();H.value=!1,a.finish(),U.value=!1}}),!1},u=o(!1),r=o(!1),C=o(!1),x=o(""),I=o("");return(g,h)=>{var J,oe;const pe=it,ne=Ct,E=gl,b=gt,Q=ft,ke=oa,he=$t,Ue=qt,Me=_l,fe=yl,Pe=bt,we=Pt,ie=xl,ye=mt,N=ut,$e=Bt;return n(),D(me,null,[t(ne,{to:"#alt-action"},{default:l(()=>[t(pe,null,{default:l(()=>[e(Y)?(n(),S(e(Ve),{key:0,type:"warning",onClick:h[0]||(h[0]=ue=>V.value=!0)},{default:l(()=>[t(e(ce),{size:"26"},{default:l(()=>[t(e(ge),{icon:"carbon:id"})]),_:1}),P(" "+i(e(f)("identifiers")),1)]),_:1})):_e("",!0),t(e(Ve),{type:"primary",onClick:h[1]||(h[1]=ue=>c(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(f)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(E,{columns:R,data:e(L),pagination:le,loading:e(M),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"]),t(N,{show:e(U),"onUpdate:show":h[12]||(h[12]=ue=>Ie(U)?U.value=ue:null),loading:e(H),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(f)("editAd"):e(f)("addAd"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:Z,onNegativeClick:h[13]||(h[13]=ue=>U.value=!1)},{default:l(()=>[t(ye,{ref_key:"formRef",ref:ae,class:"mt-5",model:e(s),rules:A,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Pe,{cols:"24","x-gap":12},{default:l(()=>[t(we,{span:"12"},{default:l(()=>[t(Q,{label:e(f)("title"),path:"title"},{default:l(()=>[t(b,{modelValue:e(s).title,"onUpdate:modelValue":h[2]||(h[2]=ue=>e(s).title=ue),placeholder:e(f)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(f)("description"),path:"description"},{default:l(()=>[t(b,{modelValue:e(s).description,"onUpdate:modelValue":h[3]||(h[3]=ue=>e(s).description=ue),placeholder:e(f)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(f)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(ke,{"formatted-value":e(T),"onUpdate:formattedValue":h[4]||(h[4]=ue=>Ie(T)?T.value=ue:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Pe,{"x-gap":"12",span:24},{default:l(()=>[t(Ue,{span:12,label:e(f)("identifier"),path:"pid"},{default:l(()=>[t(he,{value:e(s).pid,"onUpdate:value":[h[5]||(h[5]=ue=>e(s).pid=ue),h[6]||(h[6]=()=>{var ue;G.value=(ue=e(ee).find(xe=>xe.id==e(s).pid))==null?void 0:ue.params})],"render-label":v,options:e(ee).map(ue=>({...ue,disabled:!ue.reusable&&(ue.adsCount||0)>0})),placeholder:e(f)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ue,{span:12,label:e(f)("status"),path:"display"},{default:l(()=>[t(fe,{value:e(s).display,"onUpdate:value":h[7]||(h[7]=ue=>e(s).display=ue),name:"display",class:"w-full"},{default:l(()=>[t(Me,{value:!1,label:e(f)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Me,{value:!0,label:e(f)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(we,{span:"12"},{default:l(()=>[t(Q,{label:e(f)("content"),path:"content"},{default:l(()=>[e(w)==e(At).VIDEO?(n(),S(ie,{key:0},{default:l(()=>[t(e(Ve),{type:"primary",onClick:h[8]||(h[8]=()=>{r.value=!0})},{default:l(()=>[P(i(e(f)("select")),1)]),_:1}),t(e(Ze),{value:e(s).content?e(Wt)(e(s).content):"",placeholder:e(f)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(s).content?(n(),D(me,{key:0},[t(e(Ve),{type:"primary",ghost:"",onClick:h[9]||(h[9]=()=>{x.value=e(f)("video"),I.value=e(se)(e(s).content),C.value=!0})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[P(" "+i(e(f)("play")),1)]),_:1}),t(e(Ve),{type:"primary",ghost:"",onClick:h[10]||(h[10]=()=>{e(s).content=""})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(f)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})):(n(),D("div",ln,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:h[11]||(h[11]=()=>{u.value=!0})},[e(s).content?(n(),S(e(Qt),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Oe("border: 1px dashed "+e(q)("green","white")),src:e(se)(e(s).content||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(q)("green","white"))},[t(e(ce),{size:64},{default:l(()=>[t(e(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(G)&&Array.isArray(e(G))?(n(),S(Q,{key:0,label:e(f)("data"),path:"data"},{default:l(()=>[t(Pe,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),D(me,null,Ne(e(G),(ue,xe)=>(n(),D(me,{key:xe},[t(we,{span:10},{default:l(()=>[t(e(Ze),{value:ue,placeholder:ue,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(we,{span:14},{default:l(()=>[t(e(Ze),{value:e(s).data[ue],"onUpdate:value":Se=>e(s).data[ue]=Se,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):_e("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(N,{show:e(C),"onUpdate:show":h[14]||(h[14]=ue=>Ie(C)?C.value=ue:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(x)},{default:l(()=>[_("video",an,[_("source",{src:e(I)},null,8,nn)])]),_:1},8,["show","title"]),t($e,{show:e(u),"onUpdate:show":h[15]||(h[15]=ue=>Ie(u)?u.value=ue:null),title:e(f)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((J=e(X))==null?void 0:J.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:h[16]||(h[16]=ue=>{e(s).content=ue,u.value=!1})},null,8,["show","title","upload-config"]),t($e,{show:e(r),"onUpdate:show":h[17]||(h[17]=ue=>Ie(r)?r.value=ue:null),title:e(f)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((oe=e(X))==null?void 0:oe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:h[18]||(h[18]=ue=>{e(s).content=ue,r.value=!1})},null,8,["show","title","upload-config"]),t(tn,{show:e(V),"onUpdate:show":h[19]||(h[19]=ue=>Ie(V)?V.value=ue:null)},null,8,["show"])],64)}}});const on=zt(sn,[["__scopeId","data-v-395e350d"]]),rn={class:"w-full"},un={class:"mb-2"},dn={class:"text-base text-left"},cn=["src","onClick"],pn=["src"],fn=Be({name:"AlbumsPicker"}),mn=Be({...fn,props:Gt({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),d=de,{t:p}=He(),{fileUrl:X}=Je(),ee=o(!1),m=o(!1),B=o(0),$=o(""),se=vt("appConfig"),q=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},K=f=>{a.value&&Array.isArray(a.value)?a.value.splice(f,1):a.value=[]},Y=(f,O)=>{a.value&&Array.isArray(a.value[O].medias)?a.value[O].medias.splice(f,1):a.value&&(a.value[O].medias=[])},z=f=>{var M,F;const O=((F=(M=f.split("."))==null?void 0:M.pop())==null?void 0:F.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(O)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(O)?"video":"unknown"};return(f,O)=>{var w;const M=ge,F=ce,j=Ve,y=gt,le=Qt,R=hl("Draggable"),L=ia,te=It,H=lt,U=Bt,V=ut;return n(),D("section",rn,[_("section",un,[t(H,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",dn,i(d.title),1)]),"header-extra":l(()=>[d.readonly?_e("",!0):(n(),S(j,{key:0,quaternary:"",onClick:q},{icon:l(()=>[t(F,{size:"18"},{default:l(()=>[t(M,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),D(me,null,Ne(a.value,(G,W)=>(n(),S(H,{key:W,size:"small",embedded:"",hoverable:"",segmented:G.medias&&G.medias.length>0,class:"mb-4"},fa({header:l(()=>[t(y,{modelValue:G.name,"onUpdate:modelValue":ae=>G.name=ae,placeholder:e(p)("albumName"),"selector-span":5,disabled:d.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(te,{style:{"max-height":"100%"}},{default:l(()=>[G.medias&&G.medias.length>0?(n(),S(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(R,{list:G.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),D(me,null,Ne(G.medias,(ae,s)=>(n(),D("div",{key:"img-"+s,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[z(ae)==="image"?(n(),S(le,{key:0,"object-fit":"cover",src:e(X)(ae)},null,8,["src"])):(n(),D("video",{key:1,muted:"",src:e(X)(ae),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{$.value=e(X)(ae),m.value=!0}},null,8,cn)),d.readonly?_e("",!0):(n(),S(j,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:A=>Y(s,W)},{icon:l(()=>[t(F,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):_e("",!0)]),_:2},1024)]),_:2},[d.readonly?void 0:{name:"header-extra",fn:l(()=>[t(j,{quaternary:"",class:"mr-2",onClick:()=>{B.value=W,ee.value=!0}},{icon:l(()=>[t(F,null,{default:l(()=>[t(M,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"]),O[3]||(O[3]=_("div",{class:"w-2"},null,-1)),t(j,{quaternary:"",type:"error",onClick:ae=>K(W)},{icon:l(()=>[t(F,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(U,{show:e(ee),"onUpdate:show":O[0]||(O[0]=G=>Ie(ee)?ee.value=G:null),title:e(p)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((w=e(se))==null?void 0:w.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:O[1]||(O[1]=G=>{a.value&&Array.isArray(a.value[e(B)].medias)?a.value[e(B)].medias.push(G):a.value&&(a.value[e(B)].medias=[G]),ee.value=!1})},null,8,["show","title","upload-config"]),t(V,{show:e(m),"onUpdate:show":O[2]||(O[2]=G=>Ie(m)?m.value=G:null),preset:"card",style:{width:"500px"},title:e(p)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e($)?(n(),D("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e($)},null,8,pn)):_e("",!0)]),_:1},8,["show","title"])])}}});const vn=zt(mn,[["__scopeId","data-v-338a28a2"]]);function ya(){const{request:de}=Qe(),a=o([]),d=B=>{const $=B.split("_"),se={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},q={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(Y=>Y.replace(/([A-Z])(?=\.\w+$)/,(z,f)=>q[f]||f))($[0]),$.length>1?se[$[1]]:""]},p=()=>new Promise(B=>setTimeout(B)),X=async B=>{a.value=[];let $=1;for(const[se,q]of Object.entries(B)){$&&$%5e3===0&&await p();const[K,Y]=d(se);a.value.push({id:$,name:K,svgCode:q,library:Y}),$+=1}return a.value},ee=o(!1);return{searchIcons:async B=>{let $={};ee.value=!0;const se=await de({url:"/search-icons",method:"post",data:{query:B,decode:!1}});if(se.success&&se.result){try{$=JSON.parse(se.result.data)}catch(q){$={},console.error(q)}$=await X($)}return ee.value=!1,$},isSearching:ee,currentIconsList:a}}const _n=["innerHTML"],yn=Be({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(de){wl(ee=>({"95b6e21e":e(p),"22e3431a":e(d)}));const a=de,d=De(()=>a.color),p=De(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),X=o();return ht(()=>a.data,async ee=>{var m,B;if(!Ql(ee||"")){const{currentIconsList:$}=ya();X.value=((B=(m=$.value)==null?void 0:m.find(se=>se.name==ee))==null?void 0:B.svgCode)||""}},{immediate:!0}),(ee,m)=>(n(),D("i",{innerHTML:e(Ql)(a.data||"")?a.data:e(X)},null,8,_n))}});const kl=zt(yn,[["__scopeId","data-v-09747f05"]]),gn={key:0,class:"multiple"},bn={key:0,class:"item"},hn={key:2,class:"flex items-center ml-2"},kn={key:1,class:"placeholder"},wn={class:"v3ip__search"},xn=["placeholder"],Cn={key:0,class:"v3ip__loader"},In=["onClick"],$n={key:1,class:"v3ip__empty"},Vn={key:1,class:"default-text"},Tn={key:1,class:"default-text"},zn=Be({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(de,{emit:a}){wl(R=>({86121764:e(p),24235862:e(ee)}));const d=de,p=De(()=>typeof d.selectorHeight=="number"?`${d.selectorHeight}px`:d.selectorHeight),X=a,ee=o(d.selectedIconBgColor),m=o(""),B=o(!1),{currentIconsList:$,searchIcons:se,isSearching:q}=ya();ht(()=>m.value,R=>{se(R)},{immediate:!0});const K=De(()=>be.uniqBy(be.uniqBy($.value.filter(R=>{var w,G;const L=typeof d.iconLibrary=="string"&&R.library==d.iconLibrary||Array.isArray(d.iconLibrary)&&d.iconLibrary.includes(R.library)||d.iconLibrary=="all",te=!d.includeIcons||!d.includeIcons.length||d.includeIcons.includes(R.name),H=!d.includeSearch||((w=R.name)==null?void 0:w.toLocaleLowerCase().includes(d.includeSearch)),U=!d.excludeIcons||!d.excludeIcons.length||!d.excludeIcons.includes(R.name),V=!d.excludeSearch||!((G=R.name)!=null&&G.toLocaleLowerCase().includes(d.excludeSearch));return L&&te&&H&&U&&V}),"svgCode"),"name")),Y=R=>d.valueType=="name"?R.name:R.svgCode,z=R=>{var L,te;return d.valueType=="name"?((te=(L=$.value)==null?void 0:L.find(H=>H.name==R))==null?void 0:te.svgCode)||"":R},f=R=>d.multiple?d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length?d.modelValue.findIndex(L=>L==Y(R))>-1:!1:d.modelValue==Y(R),O=R=>{if(R)if(d.multiple)if(d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length){const L=d.modelValue,te=d.modelValue.findIndex(H=>H==Y(R));te>-1?L.splice(te,1):d.modelValue.length<d.multipleLimit&&typeof Y(R)<"u"&&L.push(Y(R)),X("update:modelValue",L),X("change",L,R)}else d.multipleLimit>0&&(X("update:modelValue",[Y(R)]),X("change",[Y(R)],R));else Y(R)==d.modelValue?d.clearable&&X("update:modelValue",null):X("update:modelValue",Y(R)),X("change",R)},M=o();ja(M,()=>B.value=!1);const F=o(),{width:j}=Ba(F),y=qa(),le=R=>!!y[R];return(R,L)=>{var w,G,W,ae;const te=ge,H=ce,U=Ve,V=Kt;return n(),D("div",{ref_key:"picker",ref:M,class:"v3ip__custom-select",onBlur:L[4]||(L[4]=s=>B.value=!1)},[_("div",{class:Ge(["v3ip__selected",{open:e(B),disabled:d.disabled}]),onClick:L[2]||(L[2]=s=>B.value=d.disabled?!1:!e(B))},[!d.multiple&&d.modelValue||d.multiple&&Array.isArray(d.modelValue)&&((w=d.modelValue)!=null&&w.length)?(n(),D(me,{key:0},[d.multiple?(n(),D("div",gn,[Array.isArray(d.modelValue)?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(d.modelValue||[],(s,A)=>(n(),D(me,{key:A},[A<d.selectedItemsToDisplay?(n(),S(kl,{key:0,class:"item",data:typeof z(s)=="string"?z(s):null,size:20,onClick:ot(T=>{var c;return O((c=e($))==null?void 0:c.find(v=>Y(v)==s))},["stop"])},null,8,["data","onClick"])):_e("",!0)],64))),128)),((G=d.modelValue)==null?void 0:G.length)>d.selectedItemsToDisplay?(n(),D("div",bn,[_("b",null," +"+i(((W=d.modelValue)==null?void 0:W.length)-d.selectedItemsToDisplay),1)])):_e("",!0)],64)):_e("",!0)])):(n(),S(kl,{key:1,data:typeof z(d.modelValue)=="string"?z(d.modelValue):null,size:20,onClick:L[0]||(L[0]=ot(s=>{var A;return O((A=e($))==null?void 0:A.find(T=>Y(T)==d.modelValue))},["stop"]))},null,8,["data"])),(ae=d.modelValue)!=null&&ae.length&&d.clearable?(n(),D("div",hn,[t(U,{type:"error",size:"tiny",secondary:"",onClick:L[1]||(L[1]=ot(()=>{X("update:modelValue",d.multiple?[]:null)},["stop"]))},{default:l(()=>[t(H,null,{default:l(()=>[t(te,{icon:"mdi:close"})]),_:1})]),_:1})])):_e("",!0)],64)):(n(),D("span",kn,i(d.placeholder),1))],2),t(xa,{name:"fade"},{default:l(()=>[il(_("div",null,[_("div",wn,[il(_("input",{"onUpdate:modelValue":L[3]||(L[3]=s=>Ie(m)?m.value=s:null),type:"text",name:"search",placeholder:d.searchPlaceholder},null,8,xn),[[wa,e(m)]])]),e(q)?(n(),D("div",Cn,[t(V,{size:"small"})])):(n(),D(me,{key:1},[e(K)&&e(K).length?(n(),S(e(Ka),{key:0,ref_key:"scroller",ref:F,class:"v3ip__items",items:e(K),"item-size":40,"grid-items":4,"item-secondary-size":e(j)/4},{default:l(({item:s})=>[_("div",{class:Ge({active:f(s)}),onClick:A=>O(s)},[t(kl,{data:typeof s.svgCode=="string"?s.svgCode:null,size:24,color:f(s)?d.selectedIconColor:void 0},null,8,["data","color"])],10,In)]),_:1},8,["items","item-secondary-size"])):(n(),D("div",$n,[e(m)?(n(),D(me,{key:0},[le("empty")?Fa(R.$slots,"empty",{key:0},void 0,!0):(n(),D("div",Vn,[_("small",null,i(d.emptyText),1)]))],64)):(n(),D("div",Tn,[_("small",null,i(d.iconsListPlaceholder),1)]))]))],64))],512),[[pl,e(B)]])]),_:3})],544)}}});const ga=zt(zn,[["__scopeId","data-v-20cc11c7"]]),Un={class:"w-full"},Sn={class:"mb-2"},Mn={class:"text-base text-left"},An=Be({name:"GridImagesPicker"}),En=Be({...An,props:Gt({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),d=vt("appConfig"),p=de,{t:X}=He(),{fileUrl:ee}=Je(),m=o(!1),B=se=>{Array.isArray(a.value)?a.value.splice(se,1):a.value=[]},$=async se=>{Array.isArray(a.value)?a.value.push(...se):a.value=[...se],m.value=!1};return(se,q)=>{var le;const K=ge,Y=ce,z=Ve,f=Qt,O=hl("Draggable"),M=ia,F=It,j=lt,y=Bt;return n(),D("section",Un,[_("section",Sn,[t(j,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Mn,i(p.title),1)]),"header-extra":l(()=>[p.readonly?_e("",!0):(n(),S(z,{key:0,quaternary:"",onClick:q[0]||(q[0]=R=>m.value=!0)},{icon:l(()=>[t(Y,{size:"18"},{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("add")),1)]),_:1}))]),default:l(()=>[t(F,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),S(M,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(O,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),D(me,null,Ne(a.value,(R,L)=>(n(),D("div",{key:"img-"+L,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(f,{width:"100","object-fit":"cover",src:e(ee)(R)},null,8,["src"]),p.readonly?_e("",!0):(n(),S(z,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>B(L)},{icon:l(()=>[t(Y,null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):_e("",!0)]),_:1})]),_:1},8,["segmented"])]),t(y,{show:e(m),"onUpdate:show":q[1]||(q[1]=R=>Ie(m)?m.value=R:null),title:e(X)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((le=e(d))==null?void 0:le.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:$},null,8,["show","title","upload-config"])])}}});const Dn=zt(En,[["__scopeId","data-v-12efa615"]]);var rt=(de=>(de.EXTERNAL_LINK="external-link",de.PAGE_LINK="page-link",de.CONTENT_LINK="content-link",de))(rt||{}),at=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(at||{});const rl=()=>{const{t:de}=He(),{tr:a}=Je(),d=(m,B)=>{if(B&&B.titleFieldName)return Zl(m.contentModelData.index[B.titleFieldName])?a(m.contentModelData.index[B.titleFieldName]):m.contentModelData.index[B.titleFieldName];if(m.contentModelData&&m.contentModelData.index){const $=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const se of $)if(m.contentModelData.index[se])return Zl(m.contentModelData.index[se])?a(m.contentModelData.index[se]):m.contentModelData.index[se]}return a(m.title)},p=[{label:de("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:de("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:de("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:de("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:p,getContentTypeLabel:m=>{var B;return(B=p.find($=>$.value===m))==null?void 0:B.label},getContentTypeTagType:m=>{var B;return((B=p.find($=>$.value===m))==null?void 0:B.tagType)||"default"},extractItemTitle:d}},Ln={key:4,class:"w-full"},Pn={key:5,class:"w-full"},Nn={key:11,class:"w-full flex flex-gap-8 items-center justify-start"},Rn=["onClick"],On={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},qn=["src"],Fn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},jn=["src"],Bn=Be({name:"FormGenerator"}),Kn=Be({...Bn,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(de,{emit:a}){const d=de,p=a,{t:X}=He(),{tr:ee,pickByTheme:m,fileUrl:B,mergeArrays:$}=Je(),{extractItemTitle:se}=rl(),{request:q}=Qe(),{loadContentModels:K}=We(),{contentModels:Y}=je(We());K();const z=vt("appConfig");let f=[];if(typeof d.items=="string")try{f=JSON.parse(d.items)}catch{f=[]}else f=be.cloneDeep(d.items);let O={};if(d.useJson)try{O=JSON.parse(d.modelValue)}catch{O={}}const M=o(""),F=o(ct()),j=o(null),y=o(d.useJson?O:d.modelValue),le={};f.forEach(J=>{J.key in y.value||(J.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(J.type)?y.value[J.key]=JSON.parse(J.defaultValue):J.type=="number"?y.value[J.key]=parseFloat(J.defaultValue):J.type=="content-model-item"?y.value[J.key]=void 0:J.type=="content-model-items"?y.value[J.key]=[]:y.value[J.key]=J.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(J.type)?y.value[J.key]="":["number"].includes(J.type)?y.value[J.key]=0:["checkbox"].includes(J.type)?y.value[J.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums"].includes(J.type)?y.value[J.key]=[]:y.value[J.key]=void 0),J.required&&(le[J.key]=[{required:!0,message:X("fillRequired")}]),F.value=ct()});const R=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],L=J=>re("span",{},{default:()=>ee(J.label)});ht(()=>y.value,J=>{const oe=d.useJson?JSON.stringify(J):J,ue=async()=>{var Se;if(f.length==0)return!0;let xe=!1;try{await((Se=j.value)==null?void 0:Se.validate(ze=>{xe=!ze}))}catch{xe=!1}return xe};p("update:modelValue",oe),p("update",oe,ue)},{immediate:!0,deep:!0});const te=yt(),H=De(()=>te.isLightTheme?"light":"dark"),U=o(!1),V=o(!1),w=o(!1),G=o(""),W=o(""),ae=o(!1),s=o(!1),A=o(""),T=o(""),c=o(!1),v=J=>{window.open(J,"_blank")},Z=o(!1),u=o(!1),r=o([]);(async()=>{var oe;u.value=!0;const J=await q({url:"/menu/items"});if(J.success&&J.result)for(let ue=0;ue<((oe=J.result.data)==null?void 0:oe.length);ue++)switch(J.result.data[ue].targetType){case rt.EXTERNAL_LINK:r.value.findIndex(xe=>xe.url===J.result.data[ue].url)===-1&&r.value.push(J.result.data[ue]);break;case rt.PAGE_LINK:r.value.findIndex(xe=>xe.path===J.result.data[ue].path)===-1&&r.value.push(J.result.data[ue]);break}u.value=!1})();const x=o(!1),I=o([]),g=o([]),h=async(J,oe)=>{if(!J.length){g.value=[];return}x.value=!0;const ue=await q({url:`/content-model-items/search/${J}/${oe}`});ue.success&&ue.result&&(g.value=ue.result.data),x.value=!1},pe=De(()=>$(I.value,g.value,"id")),ne=o(!1),E=o([]),b=o([]),Q=async J=>{if(!J.length){b.value=[];return}ne.value=!0;const oe=await q({url:`/news-articles/search/${J}`});oe.success&&oe.result&&(b.value=oe.result.data),ne.value=!1},ke=De(()=>$(E.value,b.value,"id")),{categories:he,tags:Ue}=je(Jt()),{loadCategories:Me,loadTags:fe}=Jt();Il(async()=>{f.find(J=>J.type==="news-categories"||J.type==="news-category")&&(Me(),fe());for(let J=0;J<f.length;J++)if(f[J].type==="news-articles"||f[J].type==="news-article"){ne.value=!0;const oe=y.value[f[J].key],ue=await q({url:"/news-articles/list",method:"post",data:{ids:f[J].type==="news-articles"?oe:[oe]}});ue.success&&ue.result&&(E.value=$(E.value,ue.result.data,"id")),ne.value=!1}else if(f[J].type==="content-model-items"||f[J].type==="content-model-item"){x.value=!0;const oe=y.value[f[J].key],ue=await q({url:"/content-model-items/list",method:"post",data:{ids:f[J].type==="content-model-items"?oe:[oe]}});ue.success&&ue.result&&(I.value=$(I.value,ue.result.data,"id")),x.value=!1}});const Pe=J=>re("span",{},{default:()=>`${ee(J.name)}`}),we=J=>re("span",{},{default:()=>`${ee(J.title)}`}),ie=J=>re("span",{},{default:()=>`${ee(J.name)}`}),ye=J=>De(()=>re("span",{},{default:()=>{var oe;return se(J,(oe=Y.value)==null?void 0:oe.find(ue=>ue.id===J.contentModelId))}})),N=({option:J})=>re("div",{style:{display:"flex",alignItems:"center"}},[`${ee(J.title)}`]),$e=J=>re("div",{style:{marginLeft:"12px",padding:"4px 0"}},[re("div",{},{default:()=>`${ee(J.title)}`}),re("small",{},{default:()=>`${J.targetType==rt.EXTERNAL_LINK?J.url:J.path}`})]);return(J,oe)=>{var ul,dl,nl,sl,ol;const ue=Ze,xe=gt,Se=va,ze=Cl,Ee=Yt,qe=oa,tt=$t,wt=Qt,Le=ge,Xe=ce,Ke=Ve,ve=Dn,Ye=ga,Vt=vn,Nt=xl,Rt=ft,Ut=mt,Te=ut,dt=Bt;return n(),D(me,null,[(n(),S(Ut,{ref_key:"formRef",ref:j,key:e(F),model:e(y),rules:le,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Oe(d.formStyle)},{default:l(()=>[(n(!0),D(me,null,Ne(e(f),(k,Ce)=>(n(),S(Rt,{key:Ce,label:e(ee)(k.label),path:k.key,"label-style":d.labelStyle,"show-require-mark":k.required,class:"w-full"},{default:l(()=>{var Ft,Ht,$l,Vl,Tl,zl,Ul,Sl,Ml,Al,El,Dl,Ll,Pl,Nl,Rl,Ol,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl;return[k.type=="text"?(n(),S(ue,{key:0,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),maxlength:((Ft=k.settings)==null?void 0:Ft.maxLength)||void 0,minlength:((Ht=k.settings)==null?void 0:Ht.minLength)||void 0,clearable:(($l=k.settings)==null?void 0:$l.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):k.type=="i18n-text"?(n(),S(xe,{key:1,modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):k.type=="textarea"?(n(),S(ue,{key:2,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),maxlength:((Vl=k.settings)==null?void 0:Vl.maxLength)||void 0,minlength:((Tl=k.settings)==null?void 0:Tl.minLength)||void 0,clearable:((zl=k.settings)==null?void 0:zl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):k.type=="i18n-textarea"?(n(),S(xe,{key:3,modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):k.type=="editor"?(n(),D("div",Ln,[t(Se,{modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),"toolbar-items":R,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):k.type=="i18n-editor"?(n(),D("div",Pn,[t(xe,{modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):k.type=="number"?(n(),S(ze,{key:6,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,max:((Ul=k.settings)==null?void 0:Ul.max)||void 0,min:((Sl=k.settings)==null?void 0:Sl.min)||void 0,step:((Ml=k.settings)==null?void 0:Ml.step)||1,clearable:((Al=k.settings)==null?void 0:Al.clearable)||!1,placeholder:e(ee)(k.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):k.type=="checkbox"?(n(),S(Ee,{key:7,checked:e(y)[k.key],"onUpdate:checked":Ae=>e(y)[k.key]=Ae,"checked-value":((El=k.settings)==null?void 0:El["checked-value"])||!0,"unchecked-value":((Dl=k.settings)==null?void 0:Dl["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):k.type=="date"?(n(),S(qe,{key:8,"formatted-value":e(y)[k.key],"onUpdate:formattedValue":Ae=>e(y)[k.key]=Ae,"value-format":"yyyy-MM-dd",format:((Ll=k.settings)==null?void 0:Ll.format)||"dd MMMM yyyy",type:"date",clearable:((Pl=k.settings)==null?void 0:Pl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):k.type=="year"?(n(),S(qe,{key:9,"formatted-value":e(y)[k.key],"onUpdate:formattedValue":Ae=>e(y)[k.key]=Ae,"value-format":"yyyy",type:"year",clearable:((Nl=k.settings)==null?void 0:Nl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):k.type=="single-select"||k.type=="multi-select"?(n(),S(tt,{key:10,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:k.options||[],multiple:k.type=="multi-select",placeholder:e(ee)(k.label),"render-label":L,"label-field":"label","value-field":"value",filterable:"",clearable:((Rl=k.settings)==null?void 0:Rl.clearable)||!0,"max-tag-count":((Ol=k.settings)==null?void 0:Ol["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):k.type=="image"?(n(),D("div",Nn,[_("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{M.value=k.key,U.value=!0}},[e(y)[k.key]?(n(),S(wt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Oe("border: 1px dashed "+e(m)("green","white")),src:e(B)(e(y)[k.key]||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(m)("green","white"))},[t(Xe,{size:64},{default:l(()=>[t(Le,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Rn),e(y)[k.key]?(n(),S(Ke,{key:0,quaternary:"",onClick:()=>{M.value=k.key,e(y)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)])):k.type=="gallery"?(n(),S(ve,{key:12,modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,"upload-folder":"images",title:e(ee)(k.label)},null,8,["modelValue","onUpdate:modelValue","title"])):k.type=="news-category"||k.type=="news-categories"?(n(),S(tt,{key:13,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:e(he)||[],multiple:k.type=="news-categories",placeholder:e(ee)(k.label),"render-label":Pe,"label-field":"name","value-field":"id",filterable:"",clearable:((ql=k.settings)==null?void 0:ql.clearable)||!0,"max-tag-count":((Fl=k.settings)==null?void 0:Fl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):k.type=="news-tag"||k.type=="news-tags"?(n(),S(tt,{key:14,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:e(Ue)||[],multiple:k.type=="news-tags",placeholder:e(ee)(k.label),"render-label":ie,"label-field":"name","value-field":"id",filterable:"",clearable:((jl=k.settings)==null?void 0:jl.clearable)||!0,"max-tag-count":((Bl=k.settings)==null?void 0:Bl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):k.type=="news-article"||k.type=="news-articles"?(n(),S(tt,{key:15,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:e(ke)||[],multiple:k.type=="news-articles",placeholder:e(ee)(k.label),"render-label":we,loading:e(ne),"value-field":"id",filterable:"",clearable:((Kl=k.settings)==null?void 0:Kl.clearable)||!0,"max-tag-count":((Yl=k.settings)==null?void 0:Yl["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:Q},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):k.type=="icon"||k.type=="icons"?(n(),S(Ye,{key:16,modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,placeholder:e(ee)(k.label),multiple:k.type=="icons","icons-list-placeholder":e(X)("enterIconNameInSearchBar"),"search-placeholder":e(X)("search"),"empty-text":e(X)("noIconsFound"),"icon-library":((Gl=k.settings)==null?void 0:Gl.library)||"all",clearable:((Hl=k.settings)==null?void 0:Hl.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):k.type=="albums"?(n(),S(Vt,{key:17,modelValue:e(y)[k.key],"onUpdate:modelValue":Ae=>e(y)[k.key]=Ae,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):k.type=="audio"?(n(),S(Nt,{key:18},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=k.key,ae.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(ue,{value:e(y)[k.key]?e(Wt)(e(y)[k.key]):"",placeholder:e(X)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(y)[k.key]?(n(),D(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:()=>{A.value=e(ee)(k.label),T.value=e(B)(e(y)[k.key]),s.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=k.key,e(y)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):k.type=="video"?(n(),S(Nt,{key:19},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=k.key,V.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(ue,{value:e(y)[k.key]?e(Wt)(e(y)[k.key]):"",placeholder:e(X)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(y)[k.key]?(n(),D(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:()=>{G.value=e(ee)(k.label),W.value=e(B)(e(y)[k.key]),w.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=k.key,e(y)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):k.type=="document"?(n(),S(Nt,{key:20},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=k.key,c.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(ue,{value:e(y)[k.key]?e(Wt)(e(y)[k.key]):"",placeholder:e(X)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(y)[k.key]?(n(),D(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:Ae=>v(e(B)(e(y)[k.key]))},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("open")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=k.key,e(y)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):k.type=="file"?(n(),S(Nt,{key:21},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=k.key,Z.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(ue,{value:e(y)[k.key]?e(Wt)(e(y)[k.key]):"",placeholder:e(X)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(y)[k.key]?(n(),S(Ke,{key:0,type:"primary",ghost:"",onClick:()=>{M.value=k.key,e(y)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)]),_:2},1024)):k.type=="color"?(n(),S(e(Zt),{key:22,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,class:"cursor-pointer",theme:e(H),format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):k.type=="content-model-item"||k.type=="content-model-items"?(n(),S(tt,{key:23,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:e(pe)||[],multiple:k.type=="content-model-items",placeholder:e(ee)(k.label),"render-label":Ae=>ye(Ae).value,loading:e(x),"value-field":"id",filterable:"",clearable:((Wl=k.settings)==null?void 0:Wl.clearable)||!0,"max-tag-count":((Jl=k.settings)==null?void 0:Jl["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:Ae=>h(Ae,k.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):k.type=="menu-item-link"?(n(),S(tt,{key:24,value:e(y)[k.key],"onUpdate:value":Ae=>e(y)[k.key]=Ae,options:e(r)||[],placeholder:e(ee)(k.label),"render-label":$e,"render-tag":N,loading:e(u),"label-field":"title","value-field":"id",filterable:"",clearable:((Xl=k.settings)==null?void 0:Xl.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):_e("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(Te,{show:e(s),"onUpdate:show":oe[0]||(oe[0]=k=>Ie(s)?s.value=k:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(A)},{default:l(()=>[_("audio",On,[_("source",{src:e(T)},null,8,qn)])]),_:1},8,["show","title"]),t(Te,{show:e(w),"onUpdate:show":oe[1]||(oe[1]=k=>Ie(w)?w.value=k:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(G)},{default:l(()=>[_("video",Fn,[_("source",{src:e(W)},null,8,jn)])]),_:1},8,["show","title"]),t(dt,{show:e(U),"onUpdate:show":oe[2]||(oe[2]=k=>Ie(U)?U.value=k:null),title:e(X)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(z))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[3]||(oe[3]=k=>{e(y)[e(M)]=k,U.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(V),"onUpdate:show":oe[4]||(oe[4]=k=>Ie(V)?V.value=k:null),title:e(X)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((dl=e(z))==null?void 0:dl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[5]||(oe[5]=k=>{e(y)[e(M)]=k,V.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(ae),"onUpdate:show":oe[6]||(oe[6]=k=>Ie(ae)?ae.value=k:null),title:e(X)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((nl=e(z))==null?void 0:nl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[7]||(oe[7]=k=>{e(y)[e(M)]=k,ae.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(c),"onUpdate:show":oe[8]||(oe[8]=k=>Ie(c)?c.value=k:null),title:e(X)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((sl=e(z))==null?void 0:sl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[9]||(oe[9]=k=>{e(y)[e(M)]=k,c.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(Z),"onUpdate:show":oe[10]||(oe[10]=k=>Ie(Z)?Z.value=k:null),title:e(X)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ol=e(z))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[11]||(oe[11]=k=>{e(y)[e(M)]=k,Z.value=!1})},null,8,["show","title","upload-config"])],64)}}});const vl=zt(Kn,[["__scopeId","data-v-8b81ecc9"]]),Yn={key:0},Gn={key:1},Hn={key:0},Wn={class:"flex items-center"},Jn={class:"text-base"},Xn={class:"flex items-center justify-center cursor-pointer gap-2"},Zn={key:1},Qn={class:"mt-4"},es={key:2,class:"mt-2 text-xs"},ts={class:"my-8"},ls={class:"flex items-center justify-between"},as={class:"text-base"},ns=Be({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(de,{emit:a}){const d=pt(),{t:p}=He(),X=de,ee=a,m=o(ct()),B=o({}),$=o({}),se=o(),q=o(),K=o(),Y=o([]),z=o([]),f=o({}),O=o({}),M=o(!1),F=o(!1),j=nt(),y=st(),{request:le}=Qe(),{tr:R,pickByTheme:L,editKeysToCamelCase:te}=Je(),{sections:H}=je(We()),{isLightTheme:U}=je(yt()),V=async()=>{var h,pe,ne,E;F.value=M.value=!0,y.start();const I=await le({url:`/pages/${X.slug}`});if(I.success&&I.result){if(K.value=I.result.data,(h=K.value)!=null&&h.sections&&Array.isArray((pe=K.value)==null?void 0:pe.sections)){const b={};for(const Q of K.value.sections)Q&&(b[Q.slug]=Q.dataSourcePageSectionsData??{});for(const Q of K.value.sections)Q&&(be.isObject(b)&&be.has(b,Q.slug)&&aa(b[Q.slug])?B.value[Q.slug]=Ot(b[Q.slug]):B.value[Q.slug]=Ot({}),be.forIn(te(Q.dataStructure),(ke,he)=>{(!B.value[Q.slug][he]||Array.isArray(B.value[Q.slug][he])&&B.value[Q.slug][he].length==0)&&(he==="index"?B.value[Q.slug][he]=Ot({}):B.value[Q.slug][he]=Ot([]))}))}if(K.value&&Array.isArray((ne=K.value)==null?void 0:ne.sections)){const b=K.value.sections;if(Array.isArray((E=K.value)==null?void 0:E.sectionsOrder)){Y.value=[];for(const Q of K.value.sectionsOrder)if(Q){const ke=b.find(he=>he.slug===Q);ke&&Y.value.push(ke)}for(const Q of b)Y.value.map(ke=>ke.slug).includes(Q.slug)||Y.value.push(Q)}else Y.value=be.cloneDeep(b);if(Array.isArray(K.value.sectionsDisabled))for(const Q of K.value.sections)Q&&(f.value[Q.slug]=!K.value.sectionsDisabled.includes(Q.slug));else for(const Q of K.value.sections)Q&&(f.value[Q.slug]=!0)}O.value=be.cloneDeep(f.value),z.value=be.cloneDeep(Y.value),$.value=be.cloneDeep(B.value)}m.value=ct();function g(b){return new Promise(Q=>setTimeout(Q,b))}await g(5e3),y.finish(),F.value=M.value=!1};V();const w=I=>re("span",{},{default:()=>{var g;return I.id===((g=K.value)==null?void 0:g.id)?p("currentPage"):R(I.title)}}),G=De(()=>be.isEqual(B.value,$.value)&&be.isEqual(Y.value,z.value)&&be.isEqual(f.value,O.value)),W=async()=>{F.value=!0,y.start();const I=se.value&&await se.value(),g=q.value&&await q.value(),h=async()=>{const pe=await le({url:`/pages/${X.slug}`,method:"put",data:{dispatchData:!0,sectionsData:B.value,sectionsOrder:Y.value.map(ne=>ne.slug),sectionsDisabled:Object.keys(f.value).filter(ne=>!f.value[ne])}});pe.success&&pe.result?(j.success(p("success")),V()):j.error(p("anErrorOccurred"))};(!se.value||I)&&(!q.value||g)?await h():d.warning({title:p("confirm"),content:p("mandatoryFieldsNotFilledInConfirmation"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:async()=>{await h()}}),y.finish(),F.value=!1},ae=async I=>{d.warning({title:p("confirm"),content:p("confirmDeletePage"),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{(await le({method:"delete",url:`/pages/${I.slug}`})).success?(ee("delete",K.value),j.success(p("success"))):j.error(p("anErrorOccurred"))}})},s=o(!1),A=o([]),T=o(!1),c=()=>{A.value=[],Y.value.forEach(I=>{I.id&&A.value.push(I.id)}),T.value=!0},v=I=>{I.id&&(A.value.includes(I.id)?A.value=A.value.filter(g=>g!==I.id):A.value.push(I.id))},Z=I=>De({get:()=>I.id?A.value.includes(I.id):!1,set:g=>{I.id&&(g?A.value=A.value.filter(h=>h!==I.id):A.value.includes(I.id)||A.value.push(I.id))}}),u=I=>{I.id&&(A.value=[],Y.value.forEach(g=>{g.id&&g.id!==I.id&&A.value.push(g.id)}),r())},r=async()=>{s.value=!0,y.start();const I=await le({url:`/pages/${X.slug}`,method:"put",data:{sectionsIds:A.value}});I.success&&I.result?(j.success(p("success")),V()):j.error(p("anErrorOccurred")),y.finish(),s.value=!1},C=async(I,g)=>{var pe;s.value=!0,y.start();const h=await le({url:`/sections/${I.slug}/data-source-page`,method:"put",data:{pageId:(pe=K.value)==null?void 0:pe.id,sourcePageId:g}});h.success&&h.result?(j.success(p("success")),V()):j.error(p("anErrorOccurred")),y.finish(),s.value=!1},x=async(I,g)=>{G.value?C(I,g):d.warning({title:p("confirm"),content:p("confirmUpdateDataSourcePage"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:()=>C(I,g)})};return(I,g)=>{const h=ge,pe=ce,ne=Ve,E=Tt,b=it,Q=Ct,ke=Ua,he=Yt,Ue=Lt,Me=lt,fe=$t,Pe=tl,we=ll,ie=hl("Draggable"),ye=kt,N=Dt,$e=It,J=ut;return n(),D(me,null,[t(Q,{to:"#alt-action"},{default:l(()=>[t(b,{align:"center"},{default:l(()=>[t(ne,{type:"error",disabled:e(F),onClick:g[0]||(g[0]=oe=>e(K)?ae(e(K)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("delete")),1)]),_:1},8,["disabled"]),t(ne,{type:"info",disabled:e(F),onClick:g[1]||(g[1]=oe=>e(K)?I.openFormModal(e(K)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("editPage")),1)]),_:1},8,["disabled"]),t(E,{vertical:"",class:Ge(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(ne,{type:"primary",loading:e(F),disabled:e(G),onClick:g[2]||(g[2]=oe=>W())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(N,{appear:"",name:"slide-fade"},{default:l(()=>[e(M)?(n(),D("section",Yn,[(n(),D(me,null,Ne(6,oe=>t(ke,{key:oe,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),D("section",Gn,[e(K)&&Array.isArray(e(K).sections)&&e(K).sections.length?(n(),D("section",Hn,[t(ie,{list:e(Y)},{default:l(()=>[(n(!0),D(me,null,Ne(e(Y),(oe,ue)=>(n(),S(Me,{key:oe.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(we,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:xe})=>[t(pe,null,{default:l(()=>[xe?(n(),S(h,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(h,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>g[8]||(g[8]=[_("span",null,null,-1)])),default:l(()=>[t(Pe,{name:"1"},{header:l(()=>[_("div",Wn,[t(pe,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(h,{icon:"fa-solid:grip-lines"})]),_:1}),t(he,{checked:e(f)[oe.slug],"onUpdate:checked":xe=>e(f)[oe.slug]=xe,size:"small",class:"mr-4",onClick:g[3]||(g[3]=ot(()=>{},["stop"]))},{default:l(()=>[P(i(e(p)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(Ue,{size:"small",type:"info"},{default:l(()=>[P(i(ue+1),1)]),_:2},1024),t(E,{vertical:"",class:Ge(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",Jn,i(e(R)(oe.title)),1)])]),default:l(()=>[(n(!0),D(me,null,Ne(e(te)(oe.dataStructure),(xe,Se)=>(n(),D(me,{key:Se},[String(Se)==="index"?(n(),S(Me,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),S(vl,{key:`${e(m)}-${Se}-form-1`,modelValue:e(B)[oe.slug][Se],"onUpdate:modelValue":ze=>e(B)[oe.slug][Se]=ze,items:xe,onUpdate:(ze,Ee)=>{se.value=Ee}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),S(Me,{key:1,title:e(R)(xe.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(ne,{quaternary:"",size:"small",onClick:()=>e(B)[oe.slug][Se].push({})},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),D(me,null,Ne(e(B)[oe.slug][Se],(ze,Ee)=>(n(),S(Me,{key:Ee,title:String(Ee+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(ne,{type:"error",size:"small",onClick:()=>e(B)[oe.slug][Se].splice(Ee,1)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),S(vl,{key:`${e(m)}-${Se}-${Ee}-form-2`,modelValue:e(B)[oe.slug][Se][Ee],"onUpdate:modelValue":qe=>e(B)[oe.slug][Se][Ee]=qe,items:xe.items,onUpdate:(qe,tt)=>{q.value=tt}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(b,null,{default:l(()=>[t(ne,{size:"small",type:"error",secondary:e(U),onClick:xe=>u(oe)},{default:l(()=>[t(pe,{size:"21"},{default:l(()=>[t(h,{icon:"carbon:close"})]),_:1}),P(" "+i(e(p)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(E,{vertical:"",class:Ge(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(b,{align:"center"},{default:l(()=>[_("span",null,i(e(p)("dataSourcePage")),1),t(fe,{value:oe.dataSourcePageId,options:oe.pages||[],placeholder:e(p)("select"),"render-label":w,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":xe=>x(oe,xe)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(Me,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:g[4]||(g[4]=oe=>c())},{default:l(()=>[_("div",Xn,[t(pe,{size:"20"},{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(p)("addSection")),1)])]),_:1})])):(n(),D("section",Zn,[t(Me,{size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(L)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ye,{description:e(p)("noSectionOnThisPage")},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[_("div",Qn,[t(ne,{size:"small",onClick:g[5]||(g[5]=oe=>c())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(K)?(n(),D("div",es,[P(i(e(p)("dataRetrievalSlug"))+": ",1),_("b",null,i(e(K).slug),1)])):_e("",!0)]))]),_:1}),t(J,{show:e(T),"onUpdate:show":g[6]||(g[6]=oe=>Ie(T)?T.value=oe:null),loading:e(s),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(p)("addSections"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:r,onNegativeClick:g[7]||(g[7]=oe=>T.value=!1)},{default:l(()=>[_("section",ts,[t($e,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(H),oe=>(n(),S(Me,{key:oe.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:ue=>v(oe)},{default:l(()=>[_("div",ls,[_("span",as,i(e(R)(oe.title)),1),t(he,{checked:Z(oe).value,"onUpdate:checked":ue=>Z(oe).value=ue,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ss={class:"flex items-center justify-between"},os={class:"flex flex-col"},is={class:"text-sm font-bold"},rs=Be({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:X,displayFormErrors:ee}=Je(),m=_t(de,"show"),{menuItemGroups:B}=je(We()),{loadMenuItemGroups:$}=We(),{isLightTheme:se}=je(yt()),q=o(!1),K=async()=>{q.value=!0,await $(),q.value=!1};K();const Y=pt(),z=nt(),f=st(),O=o(!1),M=o(!1),F=o(null),j=o(null),y=o({name:"",description:""}),le={name:[{required:!0,message:a("fillRequired")}]},R=H=>{F.value=be.cloneDeep(H),y.value=be.cloneDeep(H||{name:"",description:""}),M.value=!0},L=async()=>{var H;return(H=j.value)==null||H.validate(async U=>{var V,w,G,W,ae,s;if(!U){f.start(),O.value=!0;const A={name:y.value.name,description:y.value.description},T=await d({method:F.value?"put":"post",url:F.value?`/menu-item-groups/${F.value.id}`:"/menu-item-groups",data:A});if(T.failure&&T.error)switch((G=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:G.errorCode){case et.FORM_INVALID_DATA:ee((s=(ae=(W=T.error)==null?void 0:W.response)==null?void 0:ae.data)==null?void 0:s.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),K(),M.value=!1;O.value=!1,f.finish()}}),!1},te=async H=>{Y.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-item-groups/${H.id}`})).success?(z.success(a("success")),K()):z.error(a("anErrorOccurred"))}})};return(H,U)=>{const V=ge,w=Ve,G=it,W=bl,ae=ce,s=lt,A=It,T=kt,c=Kt,v=ut,Z=gt,u=ft,r=mt;return n(),D(me,null,[t(v,{show:m.value,"onUpdate:show":U[2]||(U[2]=C=>m.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(G,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(q),onClick:U[0]||(U[0]=C=>R(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(q),onClick:U[1]||(U[1]=C=>m.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(c,{show:e(q)},{default:l(()=>[e(B).length?(n(),S(A,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(B),C=>(n(),S(s,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",ss,[_("div",os,[_("span",is,i(e(X)(C.name)),1),t(W,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(i(e(X)(C.description)),1)]),_:2},1024)]),t(G,null,{default:l(()=>[t(w,{size:"small",type:"warning",secondary:e(se),onClick:x=>R(C)},{default:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(se),onClick:x=>te(C)},{default:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(s,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(T,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(v,{show:e(M),"onUpdate:show":U[5]||(U[5]=C=>Ie(M)?M.value=C:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(F)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:U[6]||(U[6]=C=>M.value=!1)},{default:l(()=>[t(r,{ref_key:"formRef",ref:j,model:e(y),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("name"),path:"name"},{default:l(()=>[t(Z,{modelValue:e(y).name,"onUpdate:modelValue":U[3]||(U[3]=C=>e(y).name=C),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Z,{modelValue:e(y).description,"onUpdate:modelValue":U[4]||(U[4]=C=>e(y).description=C),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),us=Be({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Gt(["update"],["update:content-type","update:content-id"]),setup(de,{emit:a}){const{t:d}=He(),{tr:p,mergeArrays:X}=Je(),{request:ee}=Qe(),{contentTypes:m,extractItemTitle:B}=rl(),{loadContentModels:$}=We(),{contentModels:se}=je(We()),q=a;$();const K=_t(de,"content-type"),Y=_t(de,"content-id"),z=o(),f=o(!1),O=o([]),M=o([]),F=async(T,c)=>{if(!T.length){M.value=[];return}f.value=!0;const v=await ee({url:`/content-model-items/search/${T}/${c}`});v.success&&v.result&&(M.value=v.result.data),f.value=!1},j=De(()=>X(O.value,M.value,"id")),y=o(!1),le=o([]),R=o([]),L=async T=>{if(!T.length){R.value=[];return}y.value=!0;const c=await ee({url:`/news-articles/search/${T}`});c.success&&c.result&&(R.value=c.result.data),y.value=!1},te=De(()=>X(le.value,R.value,"id")),{categories:H}=je(Jt()),{loadCategories:U}=Jt(),{tags:V}=je(Jt()),{loadTags:w}=Jt();Il(async()=>{var v;U(),w(),y.value=!0;const T=await ee({url:"/news-articles/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});T.success&&T.result&&(le.value=X(le.value,T.result.data,"id")),y.value=!1,f.value=!0;const c=await ee({url:"/content-model-items/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});c.success&&c.result&&(O.value=X(O.value,c.result.data,"id"),z.value=(v=O.value.find(Z=>Z.id===Y.value))==null?void 0:v.contentModelId),f.value=!1});const G=T=>re("span",{},{default:()=>`${p(T.name)}`}),W=T=>re("span",{},{default:()=>`${p(T.title)}`}),ae=T=>re("span",{},{default:()=>`${p(T.name)}`}),s=T=>re("span",{},{default:()=>p(T.title)}),A=T=>De(()=>re("span",{},{default:()=>{var c;return B(T,(c=se.value)==null?void 0:c.find(v=>v.id===T.contentModelId))}}));return(T,c)=>{const v=$t,Z=qt,u=bt;return n(),S(u,{"x-gap":"12",span:24},{default:l(()=>[t(Z,{span:8,label:e(d)("contentType"),path:"contentType"},{default:l(()=>[t(v,{value:K.value,"onUpdate:value":[c[0]||(c[0]=r=>K.value=r),c[1]||(c[1]=()=>Y.value=void 0)],options:e(m)||[],placeholder:e(d)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),K.value===e(at).CONTENT_MODEL?(n(),D(me,{key:0},[t(Z,{span:8,label:e(d)("contentModel")},{default:l(()=>[t(v,{value:e(z),"onUpdate:value":c[2]||(c[2]=r=>Ie(z)?z.value=r:null),options:e(se),placeholder:e(d)("search"),"render-label":s,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Z,{span:8,label:e(d)("item"),path:"contentId"},{default:l(()=>[t(v,{value:Y.value,"onUpdate:value":[c[3]||(c[3]=r=>Y.value=r),c[5]||(c[5]=(r,C)=>q("update",r,C,K.value))],options:e(j)||[],placeholder:e(d)("search"),"render-label":r=>A(r).value,loading:e(f),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[4]||(c[4]=r=>F(r,e(z)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):_e("",!0),K.value===e(at).NEWS_ARTICLE?(n(),S(Z,{key:1,span:16,label:e(d)("newsArticle"),path:"contentId"},{default:l(()=>[t(v,{value:Y.value,"onUpdate:value":[c[6]||(c[6]=r=>Y.value=r),c[7]||(c[7]=(r,C)=>q("update",r,C,K.value))],options:e(te)||[],placeholder:e(d)("search"),"render-label":W,loading:e(y),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:L},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):_e("",!0),K.value===e(at).NEWS_CATEGORY?(n(),S(Z,{key:2,span:16,label:e(d)("newsCategory"),path:"contentId"},{default:l(()=>[t(v,{value:Y.value,"onUpdate:value":[c[8]||(c[8]=r=>Y.value=r),c[9]||(c[9]=(r,C)=>q("update",r,C,K.value))],options:e(H)||[],placeholder:e(d)("select"),"render-label":G,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0),K.value===e(at).NEWS_TAG?(n(),S(Z,{key:3,span:16,label:e(d)("newsTag"),path:"contentId"},{default:l(()=>[t(v,{value:Y.value,"onUpdate:value":[c[10]||(c[10]=r=>Y.value=r),c[11]||(c[11]=(r,C)=>q("update",r,C,K.value))],options:e(V)||[],placeholder:e(d)("select"),"render-label":ae,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0)]),_:1})}}}),ds={class:"flex items-center"},cs={class:"flex flex-col"},ps={class:"text-sm font-bold"},fs={key:0,class:"text-sm"},ms={class:"text-xs font-normal"},vs={class:"text-xs my-1"},_s={class:"flex items-center"},ys={class:"flex flex-col"},gs={class:"text-sm font-bold"},bs={class:"text-xs font-normal"},hs={key:0,class:"mt-4"},ks={class:"my-8"},ws={class:"flex items-center justify-between"},xs={class:"flex flex-col"},Cs={class:"text-sm font-bold"},Is={class:"text-xs font-normal"},$s={class:"flex items-center"},Vs={key:0},Ts={key:1},zs={key:2},Us=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=rl(),{tr:X,displayFormErrors:ee,pickByTheme:m}=Je(),{isLightTheme:B}=je(yt()),{pages:$,menuItemGroups:se,contentModels:q}=je(We()),{loadPages:K,loadMenuItemGroups:Y}=We(),z=st(),f=nt(),O=pt(),M=_t(de,"modelValue"),F=o([]),j=o([]),y=o(!1),le=o(""),R=o(),L=De(()=>{if(!le.value)return F.value;const E=F.value.filter(b=>{var Q;return b.title.toLowerCase().includes(le.value.toLowerCase())||((Q=b.description)==null?void 0:Q.toLowerCase().includes(le.value.toLowerCase()))||b.children.some(ke=>{var he;return ke.title.toLowerCase().includes(le.value.toLowerCase())||((he=ke.description)==null?void 0:he.toLowerCase().includes(le.value.toLowerCase()))})});return R.value&&R.value.focus(),E}),te=async(E=!1)=>{z.start(),y.value=!0;const b=await d({url:"/menu/items"});if(b.success&&b.result){F.value=b.result.data.filter(Q=>{var ke;return!Q.parentId&&Q.menuId===((ke=M.value)==null?void 0:ke.id)});for(let Q=0;Q<F.value.length;Q++)F.value[Q].children=b.result.data.filter(ke=>{var he;return ke.parentId===F.value[Q].id&&ke.menuId===((he=M.value)==null?void 0:he.id)});j.value=b.result.data.filter(Q=>{var ke;return Q.menuId!==((ke=M.value)==null?void 0:ke.id)})}E&&(K(),await Y()),y.value=!1,z.finish()};te(!0);const H=o(12),U=o(1),V=E=>{H.value=E},w={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:rt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},G=o(null),W=o(!1),ae=o(!1),s=o(!1),A=o(null),T=o(null),c=o(w),v=De(()=>{const E={title:[{required:!0,message:a("fillRequired")}]};return c.value.targetType===rt.PAGE_LINK?(E.pageId=[{required:!0,message:a("fillRequired")}],E.path=[{required:!0,message:a("fillRequired")}]):c.value.targetType===rt.EXTERNAL_LINK?E.url=[{required:!0,message:a("fillRequired")}]:c.value.targetType===rt.CONTENT_LINK&&(E.contentId=[{required:!0,message:a("fillRequired")}],E.contentType=[{required:!0,message:a("fillRequired")}]),E}),Z=(E,b=null)=>{A.value=be.cloneDeep(E),G.value=b,E?(c.value=be.cloneDeep(E),ae.value=!0):(c.value=be.cloneDeep(w),j.value.length>0?s.value=!0:ae.value=!0)},u=async E=>{O.warning({title:a("confirm"),content:E.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu/items/${E.id}`})).success?(f.success(a("success")),te()):f.error(a("anErrorOccurred"))}})},r=async E=>{var Q,ke,he,Ue,Me,fe,Pe;z.start(),W.value=!0;const b=await d({method:"post",url:"/menu/items",data:{title:E.title,path:E.path,url:E.url,description:E.description,isActive:!0,isVisible:!0,color:E.color,icon:E.icon,position:E.position,targetType:E.targetType,parentId:G.value,menuId:(Q=M.value)==null?void 0:Q.id,sectionId:E.sectionId,menuItemGroupId:E.menuItemGroupId,pageId:E.pageId}});if(b.failure&&b.error)switch((Ue=(he=(ke=b.error)==null?void 0:ke.response)==null?void 0:he.data)==null?void 0:Ue.errorCode){case et.FORM_INVALID_DATA:ee((Pe=(fe=(Me=b.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Pe.data);break;default:f.error(a("anErrorOccurred"))}else f.success(a("success")),te();W.value=!1,z.finish(),s.value=!1},C=async()=>{var E;return(E=T.value)==null||E.validate(async b=>{var Q,ke,he,Ue,Me,fe,Pe;if(!b){const we={title:c.value.title,path:c.value.path,url:c.value.url,description:c.value.description,isActive:c.value.isActive,isVisible:c.value.isVisible,color:c.value.color,icon:c.value.icon,position:c.value.position,targetType:c.value.targetType,parentId:G.value,menuId:(Q=M.value)==null?void 0:Q.id,sectionId:c.value.sectionId,menuItemGroupId:c.value.menuItemGroupId,pageId:c.value.pageId,contentId:c.value.contentId,contentType:c.value.contentType};if(A.value)if(A.value.title!==c.value.title&&F.value.findIndex(ie=>ie.title==c.value.title)>-1)f.error(a("sameMenuItemTitleMessage"));else{z.start(),W.value=!0;const ie=await d({method:"put",url:`/menu/items/${A.value.id}`,data:we});ie.success&&ie.result.data&&(f.success(a("success")),te()),W.value=!1,z.finish(),ae.value=!1}else if(F.value.findIndex(ie=>ie.title==c.value.title)>-1)f.error(a("sameMenuItemTitleMessage"));else{z.start(),W.value=!0;const ie=await d({method:"post",url:"/menu/items",data:we});if(ie.failure&&ie.error)switch((Ue=(he=(ke=ie.error)==null?void 0:ke.response)==null?void 0:he.data)==null?void 0:Ue.errorCode){case et.FORM_INVALID_DATA:ee((Pe=(fe=(Me=ie.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Pe.data);break;default:f.error(a("anErrorOccurred"))}else f.success(a("success")),te();W.value=!1,z.finish(),ae.value=!1}}}),!1},x=async(E,b)=>{(await d({method:"put",url:"/menu/items/position",data:{items:b}})).success&&te()},I=E=>re("span",{},{default:()=>X(E.title)}),g=E=>re("span",{},{default:()=>X(E.name)}),h=E=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(E),pe=E=>{if(E.targetType==rt.EXTERNAL_LINK)return E.url;if(E.targetType==rt.PAGE_LINK)return E.path;if(E.targetType==rt.CONTENT_LINK)switch(E.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},ne=async(E,b,Q)=>{var ke;if(!X(c.value.title))switch(Q){case at.CONTENT_MODEL:c.value.title=p(b,(ke=q.value)==null?void 0:ke.find(he=>he.id===b.contentModelId));break;case at.NEWS_ARTICLE:c.value.title=b.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:c.value.title=b.name;break}};return(E,b)=>{const Q=ge,ke=it,he=Ct,Ue=ra,Me=Lt,fe=Tt,Pe=lt,we=hl("Draggable"),ie=tl,ye=ll,N=al,$e=kt,J=Dt,oe=It,ue=ut,xe=gt,Se=ft,ze=Cl,Ee=qt,qe=_l,tt=yl,wt=bt,Le=ga,Xe=$t,Ke=mt;return n(),D(me,null,[t(he,{to:"#alt-action"},{default:l(()=>[t(ke,{align:"center"},{default:l(()=>[e(L).length?(n(),S(e(Ve),{key:0,type:"primary",onClick:b[0]||(b[0]=ve=>Z(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(Q,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenuItem")),1)]),_:1})):_e("",!0)]),_:1})]),_:1}),t(Ue,{class:"mt-2 mb-5",onBack:b[2]||(b[2]=ve=>M.value=null)},{title:l(()=>{var ve;return[P(i(e(X)((ve=M.value)==null?void 0:ve.title)),1)]}),back:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Ze),{ref_key:"searchInputRef",ref:R,value:e(le),"onUpdate:value":b[1]||(b[1]=ve=>Ie(le)?le.value=ve:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(J,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(L)&&e(L).length?(n(),D(me,{key:0},[t(we,{list:e(F),onChange:b[3]||(b[3]=ve=>x(ve,e(F)))},{default:l(()=>[(n(!0),D(me,null,Ne(e(L).slice((e(U)-1)*e(H),e(U)*e(H)),ve=>(n(),S(Pe,{key:ve.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ye,{"default-expanded-names":ve.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ye})=>[t(ke,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:l(()=>[P(i(ve.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:ve.isVisible?"info":"warning"},{default:l(()=>[P(i(ve.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ge(["!mx-0",e(m)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Ve),{size:"small",type:"primary",secondary:e(B),onClick:ot(Vt=>Z(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"error",secondary:e(B),onClick:ot(Vt=>u(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"info",secondary:e(B),onClick:ot(Vt=>Z(null,ve.id),["stop"])},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:category"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("subMenuItem"))+" ",1),t(Me,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[P(i(ve.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),b[27]||(b[27]=_("div",{class:"w-6"},null,-1)),t(e(ce),null,{default:l(()=>[Ye?(n(),S(Q,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(Q,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>b[28]||(b[28]=[_("span",null,null,-1)])),default:l(()=>[t(ie,{name:"1"},{header:l(()=>{var Ye;return[_("div",ds,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(Q,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ge(e(m)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",cs,[_("div",null,[_("span",ps,i(e(X)(ve.title)),1),ve.group?(n(),D("span",fs," Â ("+i(e(X)((Ye=ve.group)==null?void 0:Ye.name))+") ",1)):_e("",!0)]),_("small",ms,i(pe(ve)),1)])])]}),default:l(()=>[ve.description?(n(),D(me,{key:0},[t(fe,{class:Ge([e(m)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),_("div",vs,i(e(X)(ve.description)),1)],64)):_e("",!0),ve.children.length?(n(),D(me,{key:1},[t(fe,{class:Ge([e(m)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(we,{list:ve.children,onChange:Ye=>x(Ye,ve.children)},{default:l(()=>[(n(!0),D(me,null,Ne(ve.children,Ye=>(n(),S(Pe,{key:Ye.id,size:"small",class:"mb-1"},{header:l(()=>[_("div",_s,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(Q,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ge(e(m)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",ys,[_("span",gs,i(e(X)(Ye.title)),1),_("small",bs,i(pe(Ye)),1)])])]),"header-extra":l(()=>[t(ke,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:Ye.isActive?"success":"error"},{default:l(()=>[P(i(Ye.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:Ye.isVisible?"info":"warning"},{default:l(()=>[P(i(Ye.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ge(["!mx-0",e(m)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Ve),{size:"small",type:"primary",secondary:e(B),onClick:ot(Vt=>Z(Ye,ve.id),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"error",secondary:e(B),onClick:ot(Vt=>u(Ye),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):_e("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(N,{page:e(U),"onUpdate:page":b[4]||(b[4]=ve=>Ie(U)?U.value=ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(H),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(F).length/e(H)),"onUpdate:pageSize":V},{prefix:l(()=>[P(i(`${e(F).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(Pe,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(m)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t($e,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[e(le)?(n(),S(Q,{key:0,icon:"carbon:search"})):(n(),S(Q,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(le)?_e("",!0):(n(),D("div",hs,[t(e(Ve),{size:"small",onClick:b[5]||(b[5]=ve=>Z(null))},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(ue,{show:e(s),"onUpdate:show":b[6]||(b[6]=ve=>Ie(s)?s.value=ve:null),loading:e(W),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(G)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:b[7]||(b[7]=()=>{s.value=!1,ae.value=!0}),onNegativeClick:b[8]||(b[8]=ve=>s.value=!1)},{default:l(()=>[_("section",ks,[t(oe,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(j),ve=>(n(),S(Pe,{key:ve.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",ws,[_("div",xs,[_("span",Cs,i(e(X)(ve.title)),1),_("small",Is,i(pe(ve)),1)]),t(e(Ve),{size:"small",type:"primary",secondary:e(B),onClick:Ye=>r(ve)},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ue,{show:e(ae),"onUpdate:show":b[25]||(b[25]=ve=>Ie(ae)?ae.value=ve:null),loading:e(W),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(A)?e(G)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(G)?e(j).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(j).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:C,onNegativeClick:b[26]||(b[26]=ve=>ae.value=!1)},{default:l(()=>[t(Ke,{ref_key:"formRef",ref:T,class:"mt-5",model:e(c),rules:e(v),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(a)("title"),path:"title"},{default:l(()=>[t(xe,{modelValue:e(c).title,"onUpdate:modelValue":b[9]||(b[9]=ve=>e(c).title=ve),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Se,{label:e(a)("description"),path:"description"},{default:l(()=>[t(xe,{modelValue:e(c).description,"onUpdate:modelValue":b[10]||(b[10]=ve=>e(c).description=ve),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(ze,{value:e(c).position,"onUpdate:value":b[11]||(b[11]=ve=>e(c).position=ve),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ee,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(tt,{value:e(c).isActive,"onUpdate:value":b[12]||(b[12]=ve=>e(c).isActive=ve),name:"isActive",class:"w-full"},{default:l(()=>[t(qe,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(qe,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Ee,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(tt,{value:e(c).isVisible,"onUpdate:value":b[13]||(b[13]=ve=>e(c).isVisible=ve),name:"isVisible",class:"w-full"},{default:l(()=>[t(qe,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(qe,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(fe,{class:"!my-2"}),t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Le,{modelValue:e(c).icon,"onUpdate:modelValue":b[14]||(b[14]=ve=>e(c).icon=ve),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Ee,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[_("div",$s,[e(c).color?(n(),D(me,{key:0},[t(e(Ve),{text:"",type:"error",style:{"font-size":"21px"},onClick:b[15]||(b[15]=ve=>e(c).color="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(Q,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):_e("",!0),t(e(Zt),{value:e(c).color,"onUpdate:value":b[16]||(b[16]=ve=>e(c).color=ve),class:"cursor-pointer",theme:e(B)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Ee,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Xe,{value:e(c).menuItemGroupId,"onUpdate:value":b[17]||(b[17]=ve=>e(c).menuItemGroupId=ve),options:e(se),placeholder:e(a)("group"),"render-label":g,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ee,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(tt,{value:e(c).targetType,"onUpdate:value":b[18]||(b[18]=ve=>e(c).targetType=ve),class:"w-full",size:"small"},{default:l(()=>[t(qe,{value:e(rt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("pageLink")),1)]),_:1},8,["value"]),t(qe,{value:e(rt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("contentLink")),1)]),_:1},8,["value"]),t(qe,{value:e(rt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(J,{appear:"",name:"slide-fade"},{default:l(()=>[e(c).targetType===e(rt).PAGE_LINK?(n(),D("section",Vs,[t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Xe,{value:e(c).pageId,"onUpdate:value":b[19]||(b[19]=ve=>e(c).pageId=ve),options:e($)||[],placeholder:e(a)("selectPage"),"render-label":I,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ee,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var ve;return[t(Xe,{value:e(c).sectionId,"onUpdate:value":b[20]||(b[20]=Ye=>e(c).sectionId=Ye),options:((ve=(e($)||[]).find(Ye=>Ye.id===e(c).pageId))==null?void 0:ve.sections)||[],placeholder:e(a)("selectSection"),"render-label":I,disabled:!e(c).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Se,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Ze),{value:e(c).path,"onUpdate:value":b[21]||(b[21]=ve=>e(c).path=ve),placeholder:e(a)("path"),"allow-input":h,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(c).targetType===e(rt).CONTENT_LINK?(n(),D("section",Ts,[t(us,{"content-type":e(c).contentType,"onUpdate:contentType":b[22]||(b[22]=ve=>e(c).contentType=ve),"content-id":e(c).contentId,"onUpdate:contentId":b[23]||(b[23]=ve=>e(c).contentId=ve),onUpdate:ne},null,8,["content-type","content-id"])])):e(c).targetType===e(rt).EXTERNAL_LINK?(n(),D("section",zs,[t(Se,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Ze),{value:e(c).url,"onUpdate:value":b[24]||(b[24]=ve=>e(c).url=ve),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):_e("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ss={class:"flex items-center justify-between"},Ms={class:"flex flex-col"},As={class:"text-sm font-bold"},Es=Be({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:X,displayFormErrors:ee,formatKey:m}=Je(),B=_t(de,"show"),{menuLocations:$}=je(We()),{loadMenuLocations:se}=We(),{isLightTheme:q}=je(yt()),K=o(!1),Y=async()=>{K.value=!0,await se(),K.value=!1};Y();const z=pt(),f=nt(),O=st(),M=o(!1),F=o(!1),j=o(null),y=o(null),le=o({name:"",description:""}),R={name:[{required:!0,message:a("fillRequired")}]},L=U=>{j.value=be.cloneDeep(U),le.value=be.cloneDeep(U||{name:"",description:""}),F.value=!0},te=async()=>{var U;return(U=y.value)==null||U.validate(async V=>{var w,G,W,ae,s,A;if(!V){O.start(),M.value=!0;const T={name:le.value.name,description:le.value.description},c=await d({method:j.value?"put":"post",url:j.value?`/menu-locations/${j.value.id}`:"/menu-locations",data:T});if(c.failure&&c.error)switch((W=(G=(w=c.error)==null?void 0:w.response)==null?void 0:G.data)==null?void 0:W.errorCode){case et.FORM_INVALID_DATA:ee((A=(s=(ae=c.error)==null?void 0:ae.response)==null?void 0:s.data)==null?void 0:A.data);break;default:f.error(a("anErrorOccurred"))}else f.success(a("success")),Y(),F.value=!1;M.value=!1,O.finish()}}),!1},H=async U=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-locations/${U.id}`})).success?(f.success(a("success")),Y()):f.error(a("anErrorOccurred"))}})};return(U,V)=>{const w=ge,G=ce,W=Ve,ae=it,s=bl,A=lt,T=It,c=kt,v=Kt,Z=ut,u=Ze,r=ft,C=gt,x=mt;return n(),D(me,null,[t(Z,{show:B.value,"onUpdate:show":V[2]||(V[2]=I=>B.value=I),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ae,{align:"center"},{default:l(()=>[t(W,{size:"small",type:"primary",disabled:e(K),onClick:V[0]||(V[0]=I=>L(null))},{default:l(()=>[t(G,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(W,{size:"small",type:"error",disabled:e(K),onClick:V[1]||(V[1]=I=>B.value=!1)},{default:l(()=>[t(G,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(v,{show:e(K)},{default:l(()=>[e($).length?(n(),S(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e($),I=>(n(),S(A,{key:I.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ss,[_("div",Ms,[_("span",As,i(I.name),1),t(s,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(i(e(X)(I.description)),1)]),_:2},1024)]),t(ae,null,{default:l(()=>[t(W,{size:"small",type:"warning",secondary:e(q),onClick:g=>L(I)},{default:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(W,{size:"small",type:"error",secondary:e(q),onClick:g=>H(I)},{default:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(A,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(F),"onUpdate:show":V[5]||(V[5]=I=>Ie(F)?F.value=I:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(j)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:V[6]||(V[6]=I=>F.value=!1)},{default:l(()=>[t(x,{ref_key:"formRef",ref:y,model:e(le),rules:R,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(r,{label:e(a)("key"),path:"name"},{default:l(()=>[t(u,{value:e(le).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":V[3]||(V[3]=I=>e(le).name=e(m)(I))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{label:e(a)("description"),path:"description"},{default:l(()=>[t(C,{modelValue:e(le).description,"onUpdate:modelValue":V[4]||(V[4]=I=>e(le).description=I),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ds={key:2},Ls={class:"flex items-center"},Ps={class:"flex flex-col"},Ns={key:0,class:"text-xs font-normal"},Rs={class:"mt-4"},Os=Be({__name:"index",setup(de){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:ee,isInDevMode:m,formatKey:B}=Je(),{isLightTheme:$}=je(yt()),{menuLocations:se}=je(We()),{loadMenuLocations:q}=We(),K=st(),Y=nt(),z=pt(),f=o(!1),O=o(!1),M=o([]),F=async(T=!1)=>{K.start(),f.value=!0;const c=await d({url:"/menus"});c.success&&c.result&&(M.value=c.result.data),T&&await q(),f.value=!1,K.finish()};F(!0);const j=o(12),y=o(1),le=T=>{j.value=T},R={name:"",title:"",description:"",menuLocationId:void 0},L=o(!1),te=o(!1),H=o(!1),U=o(null),V=o(R),w={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},G=o(null),W=T=>{G.value=be.cloneDeep(T),V.value=be.cloneDeep(T||R),L.value=!0},ae=async()=>{var T;return(T=U.value)==null||T.validate(async c=>{var v,Z,u,r,C,x;if(!c){K.start(),O.value=!0;const I={name:V.value.name,title:V.value.title,description:V.value.description,menuLocationId:V.value.menuLocationId},g=await d({method:G.value?"put":"post",url:G.value?`/menus/${G.value.id}`:"/menus",data:I});if(g.failure&&g.error)switch((u=(Z=(v=g.error)==null?void 0:v.response)==null?void 0:Z.data)==null?void 0:u.errorCode){case et.FORM_INVALID_DATA:ee((x=(C=(r=g.error)==null?void 0:r.response)==null?void 0:C.data)==null?void 0:x.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),F(),L.value=!1;O.value=!1,K.finish()}}),!1},s=async T=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menus/${T.id}`})).success?(Y.success(a("success")),F()):Y.error(a("anErrorOccurred"))}})},A=el("menus-management",()=>({itemsMenu:o(null)}))();return ht(()=>V.value.title,T=>{G.value||V.value.name.length<=21&&(V.value.name=_a(p(T),{trim:!0,lower:!0,strict:!0}))}),(T,c)=>{const v=ge,Z=ce,u=Ve,r=it,C=Ct,x=Tt,I=lt,g=al,h=kt,pe=Dt,ne=gt,E=ft,b=Ze,Q=qt,ke=$t,he=bt,Ue=mt,Me=ut;return n(),D(me,null,[e(A).itemsMenu?_e("",!0):(n(),S(C,{key:0,to:"#alt-action"},{default:l(()=>[t(r,{align:"center"},{default:l(()=>[e(m)?(n(),S(u,{key:0,type:"success",onClick:c[0]||(c[0]=fe=>te.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(v,{icon:"carbon:template"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("locations")),1)]),_:1})):_e("",!0),t(u,{type:"warning",onClick:c[1]||(c[1]=fe=>H.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(v,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("groups")),1)]),_:1}),e(M)&&e(M).length?(n(),S(u,{key:1,type:"primary",onClick:c[2]||(c[2]=fe=>W(null))},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(v,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenu")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})),e(A).itemsMenu?(n(),S(Us,{key:1,modelValue:e(A).itemsMenu,"onUpdate:modelValue":c[3]||(c[3]=fe=>e(A).itemsMenu=fe)},null,8,["modelValue"])):(n(),D("section",Ds,[t(pe,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(M)&&e(M).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(M).slice((e(y)-1)*e(j),e(y)*e(j)),fe=>(n(),S(I,{key:fe.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Pe;return[_("div",Ls,[t(r,null,{default:l(()=>[t(u,{size:"small",type:"primary",secondary:e($),onClick:ot(we=>W(fe),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t(v,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(u,{size:"small",type:"error",secondary:e($),onClick:ot(we=>s(fe),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t(v,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(x,{vertical:"",class:Ge(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Ps,[_("span",{class:Ge(`${fe.location?"text-sm":"text-base"} font-bold`)},i(e(p)(fe.title)),3),fe.location?(n(),D("small",Ns,i((Pe=fe.location)==null?void 0:Pe.name),1)):_e("",!0)])])]}),"header-extra":l(()=>[t(u,{size:"small",type:"primary",secondary:e($),onClick:ot(Pe=>e(A).itemsMenu=fe,["stop"])},{icon:l(()=>[t(Z,null,{default:l(()=>[t(v,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(g,{page:e(y),"onUpdate:page":c[4]||(c[4]=fe=>Ie(y)?y.value=fe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(j),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(M).length/e(j)),"onUpdate:pageSize":le},{prefix:l(()=>[P(i(`${e(M).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(I,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(h,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(Z,null,{default:l(()=>[t(v,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",Rs,[t(u,{size:"small",onClick:c[5]||(c[5]=fe=>W(null))},{icon:l(()=>[t(Z,null,{default:l(()=>[t(v,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(Me,{show:e(L),"onUpdate:show":c[10]||(c[10]=fe=>Ie(L)?L.value=fe:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ae,onNegativeClick:c[11]||(c[11]=fe=>L.value=!1)},{default:l(()=>[t(Ue,{ref_key:"formRef",ref:U,model:e(V),rules:w,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(E,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ne,{modelValue:e(V).title,"onUpdate:modelValue":c[6]||(c[6]=fe=>e(V).title=fe),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(E,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ne,{modelValue:e(V).description,"onUpdate:modelValue":c[7]||(c[7]=fe=>e(V).description=fe),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(he,{"x-gap":"12",span:24},{default:l(()=>[t(Q,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(b,{value:e(V).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":c[8]||(c[8]=fe=>e(V).name=e(B)(fe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Q,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(ke,{value:e(V).menuLocationId,"onUpdate:value":c[9]||(c[9]=fe=>e(V).menuLocationId=fe),options:e(se),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Es,{show:e(te),"onUpdate:show":c[12]||(c[12]=fe=>Ie(te)?te.value=fe:null)},null,8,["show"]),t(rs,{show:e(H),"onUpdate:show":c[13]||(c[13]=fe=>Ie(H)?H.value=fe:null)},null,8,["show"])]))],64)}}}),qs="/creopse/assets/video-thumbnail-86f60cc7.svg";var jt=(de=>(de.VERTICAL="vertical",de.HORIZONTAL="horizontal",de))(jt||{}),xt=(de=>(de.SELF_HOSTED="self-hosted",de.YOUTUBE="youtube",de))(xt||{});const Fs=()=>{const{t:de}=He(),a=[{label:de("horizontal"),value:jt.HORIZONTAL,tagType:"info"},{label:de("vertical"),value:jt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:X=>{var ee;return((ee=a.find(m=>m.value===X))==null?void 0:ee.tagType)||"default"},getVideoDisplayTypeLabel:X=>{var ee;return(ee=a.find(m=>m.value===X))==null?void 0:ee.label},videoDisplayTypes:a}},js=el("video-setting",{state:()=>({settings:[]}),getters:{getSetting:de=>a=>de.settings.find(d=>d.key===a),getSettingValue:de=>(a,d="string")=>{const p=de.settings.find(ee=>ee.key===a);let X="";switch(d){case"number":X=p&&parseInt(p.value)&&!isNaN(parseInt(p.value))?parseInt(p.value):0;break;case"boolean":X=p&&!isNaN(parseInt(p.value))&&parseInt(p.value)>0;break;case"object":X=p&&p.value?JSON.parse(p.value):{};break;case"array":X=p&&p.value?JSON.parse(p.value):[];break;default:X=p&&p.value?p.value:"";break}return X}},actions:{async initDefaultSettings(){await this.loadSettings();const de={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Qe();await a({url:"/video-settings",method:"put",data:de}),await this.loadSettings()},async loadSettings(){const{request:de}=Qe(),a=await de({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),Bs={key:1,class:"flex items-center gap-3"},Ks={key:0,class:"w-full flex items-center justify-between mt-4"},Ys={class:"flex items-center gap-3"},Gs={key:1,class:"mt-4"},Hs={key:0},Ws={class:"flex items-center justify-center h-full"},Js=["src"],Xs={class:"text-center text-dimgray text-sm"},Zs={key:1,class:"flex items-center justify-center"},Qs={class:"mt-5"},eo={class:"w-full flex flex-gap-8 items-center justify-start"},to=["src"],lo={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},ao=["src"],no=Be({__name:"index",setup(de){const{t:a,locale:d}=He(),{tr:p,fileUrl:X,pickByTheme:ee,displayFormErrors:m}=Je(),{videoDisplayTypes:B}=Fs(),{request:$}=Qe(),{isLightTheme:se}=je(yt()),q=st(),K=nt(),Y=pt(),z=vt("appConfig"),f=o(""),O=o(null),M=o(!1),F=o([]),j=el("videos-management-store",()=>({currentTab:o("all")}))(),y=()=>{V()},le=o(0),R=o(12),L=o(1),te=De(()=>`/video-items?pageSize=${R.value}&query=${f.value}&source=${j.currentTab}`),H=we=>{V(`${te.value}&page=${we}`)},U=we=>{R.value=we,V()},V=async(we=null,ie=!1)=>{var N,$e,J,oe,ue;M.value=!0,q.start();const ye=await $({url:we??te.value});ye.success&&ye.result&&(F.value=((N=ye.result.data)==null?void 0:N.videoItems)||[],le.value=((J=($e=ye.result.data)==null?void 0:$e.meta)==null?void 0:J.total)||0,L.value=((ue=(oe=ye.result.data)==null?void 0:oe.meta)==null?void 0:ue.currentPage)||1),q.finish(),M.value=!1};V(null,!0);const w=o(!1),G=o(!1),W=o(null),ae=o(null),s=o({title:"",description:"",visible:!0,source:xt.SELF_HOSTED,displayType:jt.HORIZONTAL,thumbnail:"",path:""}),A=De(()=>({title:[{required:s.value.source==xt.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),T=we=>{W.value=be.cloneDeep(we),we?s.value=be.cloneDeep(we):s.value={title:"",description:"",visible:!0,source:xt.SELF_HOSTED,displayType:jt.HORIZONTAL,thumbnail:"",path:""},G.value=!0},c=async we=>{Y.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await $({method:"delete",url:`/video-items/force/${we.id}`})).success?(K.success(a("success")),V()):K.error(a("anErrorOccurred"))}})},v=async()=>{var we;return(we=ae.value)==null||we.validate(async ie=>{var ye,N,$e,J,oe,ue;if(!ie)if(W.value){q.start(),w.value=!0;const xe={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Se=await $({method:"put",url:`/video-items/${W.value.id}`,data:xe});Se.success&&Se.result.data&&(K.success(a("success")),V(`${te.value}&page=${L.value}`)),w.value=!1,q.finish(),G.value=!1}else{q.start(),w.value=!0;const xe={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Se=await $({method:"post",url:"/video-items",data:xe});if(Se.failure&&Se.error)switch(($e=(N=(ye=Se.error)==null?void 0:ye.response)==null?void 0:N.data)==null?void 0:$e.errorCode){case et.FORM_INVALID_DATA:m((ue=(oe=(J=Se.error)==null?void 0:J.response)==null?void 0:oe.data)==null?void 0:ue.data);break;case et.REQUEST_PARAMS_MISSING:K.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case et.REQUEST_DATA_RETRIEVAL_FAILED:K.error(a("videoDataCantBeRetrieve"));break;case et.REQUEST_DATA_ALREADY_EXISTS:K.error(a("videoAlreadyExists"));break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),V(`${te.value}&page=${L.value}`),G.value=!1;w.value=!1,q.finish()}}),!1},Z=o(!1),u=o(!1),r=o(""),C=o(""),x=o("classic"),I=o(!1),g=js(),h=o({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),pe=o(h.value),ne=De(()=>be.isEqual(h.value,pe.value)),E=async()=>{w.value=!0;const we=await $({url:"/video-settings",method:"put",data:h.value});we.success&&we.result?K.success(a("success")):K.error(a("unableToUpdateSettings")),await b()},b=async()=>{var we;q.start(),w.value=!0,await g.loadSettings(),(we=g.settings)==null||we.forEach(ie=>{h.value[ie.key]!=null&&(h.value[ie.key]=ie.value)}),pe.value=be.cloneDeep(h.value),w.value=!1,q.finish()};b();const Q=async()=>{q.start(),w.value=!0,(await $({url:"/video-items/youtube/channel-videos",method:"put"})).success?(K.success(a("success")),await b()):K.error(a("unableToUpdateChannelVideos")),w.value=!1,q.finish()},ke=o(!1),he=o(ct()),Ue=o({}),Me=De(()=>{let we=0;for(const ie in Ue.value)Ue.value[ie]&&we++;return we});function fe(){Ue.value={},V()}const Pe=async()=>(Me.value?Y.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[Me.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{w.value=!0,q.start();for(const we in Ue.value)Ue.value[we]&&await $({url:`/video-items/force/${we}`,method:"delete"});q.finish(),w.value=!1,K.success(a("success")),Ue.value={},V(null,!0)}}):K.warning(a("noItemSelected")),!1);return(we,ie)=>{var ol,k;const ye=ge,N=ce,$e=Ve,J=Yt,oe=Ct,ue=Sa,xe=Ze,Se=xl,ze=Ma,Ee=it,qe=lt,tt=Pt,wt=Aa,Le=bt,Xe=bl,Ke=Lt,ve=Dt,Ye=al,Vt=Kt,Nt=kt,Rt=ft,Ut=qt,Te=$t,dt=gt,ul=Qt,dl=mt,nl=ut,sl=Bt;return n(),D(me,null,[t(oe,{to:"#alt-action"},{default:l(()=>[e(j).currentTab=="settings"?(n(),S($e,{key:0,loading:e(w),disabled:e(ne),type:"primary",onClick:E},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),D("div",Bs,[t(J,{checked:e(ke),"onUpdate:checked":[ie[0]||(ie[0]=Ce=>Ie(ke)?ke.value=Ce:null),ie[1]||(ie[1]=Ce=>{for(const Ft of e(F))Ft.id&&(e(Ue)[Ft.id]=Ce);he.value=("uuidv4"in we?we.uuidv4:e(ct))()})]},{default:l(()=>[P(i(e(a)("selectAll")),1)]),_:1},8,["checked"]),t($e,{type:"primary",onClick:ie[2]||(ie[2]=Ce=>T(null))},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(ze,{value:e(j).currentTab,"onUpdate:value":[ie[6]||(ie[6]=Ce=>e(j).currentTab=Ce),y],type:"card",size:"medium"},fa({default:l(()=>[t(ue,{name:"all"},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:collapse-all"})]),_:1}),P(" "+i(e(a)("all_")),1)]),_:1}),t(ue,{name:e(xt).SELF_HOSTED},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:document-video"})]),_:1}),P(" "+i(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(ue,{name:e(xt).YOUTUBE},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:logo-youtube"})]),_:1}),P(" "+i(e(a)("youtube")),1)]),_:1},8,["name"]),t(ue,{name:"settings"},{default:l(()=>[t(N,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:settings-adjust"})]),_:1}),P(" "+i(e(a)("settings")),1)]),_:1})]),_:2},[e(j).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Se,{class:"!w-[250px]"},{default:l(()=>[t(xe,{ref_key:"searchInputRef",ref:O,value:e(f),"onUpdate:value":[ie[3]||(ie[3]=Ce=>Ie(f)?f.value=Ce:null),ie[4]||(ie[4]=Ce=>{Ce||V()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t($e,{type:"primary",onClick:ie[5]||(ie[5]=Ce=>V())},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(Me)>0?(n(),D("section",Ks,[_("span",null,i(e(a)("nbItemsSelected",[e(Me)])),1),_("section",Ys,[t($e,{type:"error",size:"small",onClick:Pe},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("delete")),1)]),_:1}),t($e,{type:"warning",size:"small",onClick:fe},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0),e(j).currentTab=="settings"?(n(),D("section",Gs,[t(qe,{hoverable:"",embedded:""},{header:l(()=>[P(i(e(a)("youtube")),1)]),default:l(()=>[t(Le,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(tt,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(a)("apiKey")),1),t(xe,{value:e(h).youtubeApiKey,"onUpdate:value":ie[7]||(ie[7]=Ce=>e(h).youtubeApiKey=Ce),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(tt,null,{default:l(()=>[t(qe,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(a)("autoUpdateChannelVideos")),1),t(wt,{value:e(h).youtubeChannelVideosAutoUpdate,"onUpdate:value":ie[8]||(ie[8]=Ce=>e(h).youtubeChannelVideosAutoUpdate=Ce),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>ie[28]||(ie[28]=[_("div",{class:"w-6"},null,-1)])),unchecked:l(()=>ie[29]||(ie[29]=[_("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(h).youtubeChannelVideosAutoUpdate=="1"?(n(),D(me,{key:0},[t(tt,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(a)("channelId")),1),t(xe,{value:e(h).youtubeChannelId,"onUpdate:value":ie[9]||(ie[9]=Ce=>e(h).youtubeChannelId=Ce),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(tt,null,{default:l(()=>[t(qe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(a)("lastUpdate")),1),_("b",null,i(e(h).youtubeLastChannelVideosUpdate?e(Et)(e(h).youtubeLastChannelVideosUpdate,{locale:e(d),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t($e,{strong:"",circle:"",secondary:e(se),type:"primary",title:e(a)("refresh"),disabled:e(w),onClick:Q},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:restart",class:Ge({"animate-spin":e(w)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):_e("",!0)]),_:1})]),_:1})])):(n(),S(qe,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(F).length&&!e(M)?(n(),D("section",Hs,[t(Le,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),D(me,null,Ne(e(F),(Ce,Ft)=>(n(),S(tt,{key:Ft},{default:l(()=>[t(ve,{name:"slide-fade",appear:""},{default:l(()=>[t(qe,{bordered:"",hoverable:""},{cover:l(()=>[_("div",Ws,[_("img",{src:Ce.thumbnailUrl??e(qs),class:"w-full h-[200px] object-cover"},null,8,Js)])]),header:l(()=>[_("div",Xs,[t(Xe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[Ce.id?(n(),S(J,{key:e(he),checked:e(Ue)[Ce.id],"onUpdate:checked":Ht=>e(Ue)[Ce.id]=Ht,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),P(" "+i(e(p)(Ce.title)),1)]),_:2},1024)])]),action:l(()=>[t(Ee,{justify:"space-between",align:"center"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(Ke,{bordered:!1,type:Ce.visible?"success":"error"},{default:l(()=>[P(i(Ce.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Ke,{bordered:!1,type:Ce.displayType==e(jt).HORIZONTAL?"info":"warning"},{default:l(()=>[P(i(Ce.displayType==e(jt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Ee,null,{default:l(()=>[t($e,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{r.value=e(a)("video"),C.value=e(X)(Ce.path),x.value=Ce.source==e(xt).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Ce.source!=e(xt).YOUTUBE?(n(),S($e,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Ht=>T(Ce)},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):_e("",!0),t($e,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ht=>c(Ce)},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ye,{page:e(L),"onUpdate:page":[ie[10]||(ie[10]=Ce=>Ie(L)?L.value=Ce:null),H],class:"mt-10 justify-center","show-size-picker":"","page-size":e(R),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(le)/e(R)),"onUpdate:pageSize":U},{prefix:l(()=>[P(i(`${e(le)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(M)?(n(),D("section",Zs,[t(Vt,{size:"medium"})])):(n(),S(Nt,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(nl,{show:e(G),"onUpdate:show":ie[21]||(ie[21]=Ce=>Ie(G)?G.value=Ce:null),loading:e(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:v,onNegativeClick:ie[22]||(ie[22]=Ce=>G.value=!1)},{default:l(()=>[_("div",Qs,[t(dl,{ref_key:"formRef",ref:ae,model:e(s),rules:e(A),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Rt,{label:e(a)("source"),path:"source"},{default:l(()=>[t(J,{checked:e(s).source,"onUpdate:checked":ie[11]||(ie[11]=Ce=>e(s).source=Ce),"checked-value":e(xt).YOUTUBE,"unchecked-value":e(xt).SELF_HOSTED},{default:l(()=>[P(i(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(s).source==e(xt).YOUTUBE?(n(),S(Le,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(Ut,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(xe,{value:e(s).path,"onUpdate:value":ie[12]||(ie[12]=Ce=>e(s).path=Ce),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ut,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Te,{value:e(s).displayType,"onUpdate:value":ie[13]||(ie[13]=Ce=>e(s).displayType=Ce),placeholder:e(a)("displayType"),options:e(B),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),D(me,{key:1},[t(Rt,{label:e(a)("title"),path:"title"},{default:l(()=>[t(dt,{modelValue:e(s).title,"onUpdate:modelValue":ie[14]||(ie[14]=Ce=>e(s).title=Ce),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Rt,{label:e(a)("description"),path:"description"},{default:l(()=>[t(dt,{modelValue:e(s).description,"onUpdate:modelValue":ie[15]||(ie[15]=Ce=>e(s).description=Ce),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Le,{"x-gap":"12",span:24},{default:l(()=>[t(Ut,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Se,null,{default:l(()=>[t($e,{type:"primary",onClick:ie[16]||(ie[16]=()=>{Z.value=!0})},{default:l(()=>[P(i(e(a)("select")),1)]),_:1}),t(xe,{value:e(s).path?e(Wt)(e(s).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(s).path?(n(),D(me,{key:0},[t($e,{type:"primary",ghost:"",onClick:ie[17]||(ie[17]=()=>{r.value=e(a)("video"),C.value=e(X)(e(s).path),x.value="classic",u.value=!0})},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("play")),1)]),_:1}),t($e,{type:"primary",ghost:"",onClick:ie[18]||(ie[18]=()=>{e(s).path=""})},{icon:l(()=>[t(N,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})]),_:1},8,["label"]),t(Ut,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Te,{value:e(s).displayType,"onUpdate:value":ie[19]||(ie[19]=Ce=>e(s).displayType=Ce),placeholder:e(a)("displayType"),options:e(B),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(Rt,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[_("div",eo,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:ie[20]||(ie[20]=()=>{I.value=!0})},[e(s).thumbnail?(n(),S(ul,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Oe("border: 1px dashed "+e(ee)("green","white")),src:e(X)(e(s).thumbnail||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(ee)("green","white"))},[t(N,{size:64},{default:l(()=>[t(ye,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(nl,{show:e(u),"onUpdate:show":ie[23]||(ie[23]=Ce=>Ie(u)?u.value=Ce:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(r)},{default:l(()=>[e(x)==="youtube"?(n(),D("iframe",{key:0,width:"100%",height:"380",src:e(C),frameborder:"0",allowfullscreen:""},null,8,to)):(n(),D("video",lo,[_("source",{src:e(C)},null,8,ao)]))]),_:1},8,["show","title"]),t(sl,{show:e(Z),"onUpdate:show":ie[24]||(ie[24]=Ce=>Ie(Z)?Z.value=Ce:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(z))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[25]||(ie[25]=Ce=>{e(s).path=Ce,Z.value=!1})},null,8,["show","title","upload-config"]),t(sl,{show:e(I),"onUpdate:show":ie[26]||(ie[26]=Ce=>Ie(I)?I.value=Ce:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((k=e(z))==null?void 0:k.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[27]||(ie[27]=Ce=>{e(s).thumbnail=Ce,I.value=!1})},null,8,["show","title","upload-config"])],64)}}});const so=zt(no,[["__scopeId","data-v-42abee62"]]),{t:Fe}=na.global,ea=[{key:"maxlength",defaultValue:"",placeholder:Fe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Fe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],oo={text:ea,textarea:ea,number:[{key:"min",defaultValue:"",placeholder:Fe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Fe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Fe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Fe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Fe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Fe("maxTagCount")}],date:[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"format",defaultValue:"",placeholder:Fe("dateFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Fe("maxTagCount")}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Fe("maxTagCount")}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Fe("maxTagCount")}],icon:[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"library",defaultValue:"all",placeholder:Fe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Fe("maxTagCount")}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Fe("inputClearable")}]},{t:Re}=na.global,io=[{label:Re("text"),value:"text"},{label:Re("i18nText"),value:"i18n-text"},{label:Re("textarea"),value:"textarea"},{label:Re("i18nTextarea"),value:"i18n-textarea"},{label:Re("number"),value:"number"},{label:Re("checkbox"),value:"checkbox"},{label:Re("singleSelect"),value:"single-select"},{label:Re("multiSelect"),value:"multi-select"},{label:Re("date"),value:"date"},{label:Re("year"),value:"year"},{label:Re("editor"),value:"editor"},{label:Re("i18nEditor"),value:"i18n-editor"},{label:Re("image"),value:"image"},{label:Re("gallery"),value:"gallery"},{label:Re("newsArticle"),value:"news-article"},{label:Re("newsArticles"),value:"news-articles"},{label:Re("newsCategory"),value:"news-category"},{label:Re("newsCategories"),value:"news-categories"},{label:Re("newsTag"),value:"news-tag"},{label:Re("newsTags"),value:"news-tags"},{label:Re("icon"),value:"icon"},{label:Re("icons"),value:"icons"},{label:Re("albums"),value:"albums"},{label:Re("audio"),value:"audio"},{label:Re("video"),value:"video"},{label:Re("document"),value:"document"},{label:Re("file"),value:"file"},{label:Re("color"),value:"color"},{label:Re("contentItem"),value:"content-model-item"},{label:Re("contentItems"),value:"content-model-items"},{label:Re("menuItemLink"),value:"menu-item-link"}],ro={class:"flex items-center justify-between w-full"},uo={class:"text-base font-semibold"},co={class:"text-xs text-slate-400"},po={class:"text-xs text-slate-400"},fo={class:"text-xs text-slate-400"},mo={class:"text-xs text-slate-400"},vo={class:"text-xs text-slate-400"},_o={key:0},yo={key:0,class:"w-full flex items-center"},go={class:"w-full flex items-center"},bo={class:"w-full"},ho=Be({__name:"Fields",props:Gt({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const{t:a}=He(),{tr:d,formatKey:p}=Je(),{isLightTheme:X}=je(yt()),{contentModels:ee}=je(We()),m=de,B=_t(de,"modelValue"),$=vt("renderSelectLabel"),se=vt("removeCollectionField"),q=vt("removeSingleton"),K=vt("onCreateItemOption"),Y=vt("expandedNames",()=>De(()=>o([]).value));return(z,f)=>{const O=Lt,M=it,F=ge,j=ce,y=Ve,le=Ze,R=Pt,L=gt,te=$t,H=bt,U=Tt,V=Yt,w=ua,G=Dt,W=Cl,ae=tl,s=ll,A=lt;return n(!0),D(me,null,Ne(B.value,(T,c)=>(n(),S(A,{key:`field-${c}`,size:"small",class:"my-2"},{default:l(()=>[t(s,{"expanded-names":e(Y)(m.type=="collection"?`c-${m.parentItemIndex}-f-${c}`:`s-${c}`).value,"onUpdate:expandedNames":v=>e(Y)(m.type=="collection"?`c-${m.parentItemIndex}-f-${c}`:`s-${c}`).value=v,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(ae,{name:"1"},{header:l(()=>[_("div",ro,[t(M,null,{default:l(()=>[t(O,{size:"small",type:"info"},{default:l(()=>[P(i(c+1),1)]),_:2},1024),_("span",uo,i(e(d)(T.label)),1)]),_:2},1024),t(y,{size:"small",type:"error",secondary:e(X),onClick:()=>{m.type==="collection"?e(se)&&e(se)(m.collectionKey,c):e(q)&&e(q)(c)}},{default:l(()=>[t(j,{class:"mr-1"},{default:l(()=>[t(F,{icon:"carbon:trash-can"})]),_:1}),P(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(H,{span:24,"x-gap":"6"},{default:l(()=>[t(R,{span:6},{default:l(()=>[_("span",co,i(e(a)("fieldKey")),1),t(le,{value:T.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":v=>T.key=e(p)(v)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(R,{span:10},{default:l(()=>[_("span",po,i(e(a)("title")),1),t(L,{modelValue:T.label,"onUpdate:modelValue":v=>T.label=v,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(R,{span:8},{default:l(()=>[_("span",fo,i(e(a)("type")),1),t(te,{value:T.type,"onUpdate:value":v=>T.type=v,options:e(io),placeholder:e(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),t(U,{class:"!mt-4 !mb-2"}),t(H,{span:24,"x-gap":"6"},{default:l(()=>[t(R,{span:10,class:"flex items-center"},{default:l(()=>[t(V,{checked:T.required,"onUpdate:checked":v=>T.required=v,size:"medium"},{default:l(()=>[P(i(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(R,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(T.type)?(n(),D(me,{key:0},[_("span",mo,i(e(a)("contentModel")),1),t(te,{value:T.defaultValue,"onUpdate:value":v=>T.defaultValue=v,options:e(ee),placeholder:e(a)("contentModel"),"render-label":e($),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),D(me,{key:1},[_("span",vo,i(e(a)("defaultValue")),1),T.type==="color"?(n(),D("div",_o,[t(e(Zt),{value:T.defaultValue,"onUpdate:value":v=>T.defaultValue=v,class:"cursor-pointer",theme:e(X)?"light":"dark",format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):(n(),S(le,{key:1,value:T.defaultValue,"onUpdate:value":v=>T.defaultValue=v,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),T.type==="multi-select"||T.type==="single-select"?(n(),S(U,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[P(i(e(a)("options")),1)]),_:1})):_e("",!0),t(G,{name:"slide-fade",appear:""},{default:l(()=>[T.type==="multi-select"||T.type==="single-select"?(n(),D("div",yo,[t(w,{value:T.options,"onUpdate:value":v=>T.options=v,placeholder:e(a)("addOption"),"on-create":v=>e(K)?e(K)(v,c):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[P(i(e(a)("addOption")),1)]),default:l(({value:v})=>[_("div",go,[t(le,{value:v.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Z=>v.value=e(p)(Z)},null,8,["value","placeholder","onUpdate:value"]),t(L,{modelValue:v.label,"onUpdate:modelValue":Z=>v.label=Z,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):_e("",!0)]),_:2},1024),(n(!0),D(me,null,Ne(e(oo),(v,Z,u)=>(n(),D(me,{key:u},[T.type===Z?(n(),S(s,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(j,{size:"18"},{default:l(()=>[t(F,{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(ae,{name:"1"},{header:l(()=>[t(U,{"title-placement":"left",class:"!my-4"},{default:l(()=>[P(i(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(G,{name:"slide-fade",appear:""},{default:l(()=>[_("div",bo,[(n(!0),D(me,null,Ne(v,r=>(n(),S(H,{key:r.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(R,{span:10},{default:l(()=>[t(le,{value:r.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(R,{span:14},{default:l(()=>[r.isNumber?(n(),S(W,{key:0,value:T.settings[r.key],"onUpdate:value":C=>T.settings[r.key]=C,"default-value":r.defaultValue?parseInt(r.defaultValue):void 0,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),S(le,{key:1,value:T.settings[r.key],"onUpdate:value":C=>T.settings[r.key]=C,"default-value":r.defaultValue,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):_e("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)}}});const ta=zt(ho,[["__scopeId","data-v-a507c7a3"]]),ko={class:"text-base"},wo={key:0},xo={key:0},Co={key:0},Io={class:"flex items-center justify-between w-full"},$o={class:"text-base font-semibold"},Vo={class:"text-xs text-slate-400"},To={class:"text-xs text-slate-400"},zo={class:"text-xs text-slate-400"},ba=Be({__name:"index",props:Gt({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(de){const{t:a}=He(),{tr:d,pickByTheme:p,formatKey:X}=Je(),{isLightTheme:ee}=je(yt()),{loadContentModels:m}=We();m();const B=de,$=_t(de,"show"),se=st(),q=nt(),K=pt(),Y=o(!1),z=o(null),f=o({}),O=o({}),M={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},F=o(!1),j=o(!1),y=o({}),le=u=>De({get:()=>y.value[u]?["1"]:[],set:r=>{y.value[u]=r.length>0}});ht(()=>j.value,u=>{Object.entries(f.value).forEach(([r,C],x)=>{var I;r!=="index"&&(y.value[`c-${x}`]=u,(I=C==null?void 0:C.items)==null||I.forEach((g,h)=>{y.value[`c-${x}-f-${h}`]=u}))})}),ht(()=>F.value,u=>{Object.entries(f.value).forEach(([r,C],x)=>{r==="index"&&(C==null||C.forEach((I,g)=>{y.value[`s-${g}`]=u}))})});const R=De(()=>be.isEqual(f.value,O.value)),L=()=>{f.value?f.value.index&&Array.isArray(f.value.index)?f.value.index.push(be.cloneDeep(M)):f.value.index=[be.cloneDeep(M)]:f.value={index:[be.cloneDeep(M)]}},te=u=>{f.value&&Array.isArray(f.value.index)&&f.value.index.splice(u,1)},H=()=>{const u=ct();f.value?f.value[u]={key:"",title:"",items:[]}:f.value={[u]:{key:"",title:"",items:[]}}},U=u=>{if(f.value){const{[u]:r,...C}=f.value;f.value=C}},V=u=>{f.value&&f.value[u].items.push(be.cloneDeep(M))},w=(u,r)=>{if(f.value){const C=f.value[u];C&&Array.isArray(C.items)&&C.items.splice(r,1)}},G=u=>u.title&&u.key&&u.key!=="index",W=()=>f.value&&typeof f.value=="object"?Object.keys(f.value).filter(u=>u!=="index").length:0,ae=De(()=>f.value?Object.keys(f.value).filter(u=>u!=="index"):[]),s=u=>ae.value.indexOf(u),A=o(!1),T=async()=>{const u=be.cloneDeep(f.value),r=be.cloneDeep(f.value);A.value=!1,Y.value=!0,se.start();const C=[];if(be.forIn(u,(x,I)=>{I!=="index"&&C.push(x.key)}),be.forIn(u,(x,I)=>{if(I!=="index"){const g=be.keys(u).filter(h=>h!=="index").indexOf(I);if(x&&x.key){if(x.key==="index")return q.error(a("keyIndexIsReservedInCollections")),A.value=!0,!1;if(C.filter(pe=>pe==x.key).length>1)return q.error(a("collectionKeyIsNotUnique",[x.key])),A.value=!0,!1;if(Array.isArray(x.items))for(const[pe,ne]of x.items.entries())if(ne.key){if(x.items.filter(b=>b.key===ne.key).length>1)return q.error(a("fieldKeyOfCollectionIsNotUnique",[ne.key,x.key])),A.value=!0,!1}else return q.error(a("fieldKeyOfCollectionIsRequired",[pe+1,x.key])),A.value=!0,!1}else return q.error(a("collectionKeyIsRequired",[g+1])),A.value=!0,!1}else if(Array.isArray(x))for(const[g,h]of x.entries())if(h.key){if(x.filter(ne=>ne.key===h.key).length>1)return q.error(a("singletonKeyIsNotUnique",[h.key])),A.value=!0,!1}else return q.error(a("singletonKeyIsRequired",[g+1])),A.value=!0,!1}),A.value){Y.value=!1,se.finish();return}be.forIn(r,(x,I)=>{I!=="index"&&I!==x.key&&$a(u,I,x.key)}),await B.updateDataStructure(u),Y.value=!1,se.finish()},c=()=>{be.isEqual(f.value,O.value)?$.value=!1:K.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{$.value=!1}})};ht(()=>B.rawDataStructure,u=>{f.value=u?be.cloneDeep(u):{},be.forIn(u,(r,C)=>{var x;C!=="index"?(f.value[C].key=C,(x=r==null?void 0:r.items)==null||x.forEach((I,g)=>{f.value[C].items[g].settings||(f.value[C].items[g].settings={})})):r==null||r.forEach((I,g)=>{f.value[C][g].settings||(f.value[C][g].settings={})})}),O.value=be.cloneDeep(f.value)},{immediate:!0,deep:!0});const v=u=>re("span",{},{default:()=>d(u.title)}),Z=(u,r)=>({value:`option_${r+1}${u+1}`,label:""});return St("removeCollectionField",w),St("onCreateItemOption",Z),St("renderSelectLabel",v),St("removeSingleton",te),St("addSingleton",L),St("expandCollections",j),St("expandSingletons",F),St("expandedNames",le),(u,r)=>{const C=da,x=ge,I=ce,g=Ve,h=it,pe=lt,ne=It,E=Pt,b=Lt,Q=Ze,ke=gt,he=bt,Ue=Tt,Me=Ea,fe=tl,Pe=ll,we=la;return n(),S(we,{modelValue:$.value,"onUpdate:modelValue":r[7]||(r[7]=ie=>$.value=ie),"close-on-esc":!1,closable:!1,onOnSizeChange:r[8]||(r[8]=ie=>{z.value=ie})},{header:l(()=>[_("div",ko,[t(C,{depth:"1"},{default:l(()=>[P(i(e(a)("dataStructure"))+" ",1),u.title?(n(),D("span",wo,"Â -Â "+i(u.title),1)):_e("",!0)]),_:1})])]),"header-extra":l(()=>[t(h,{align:"center"},{default:l(()=>[t(g,{type:"success",title:e(a)("save"),loading:e(Y),disabled:e(R),onClick:r[0]||(r[0]=ie=>T())},{icon:l(()=>[t(I,null,{default:l(()=>[t(x,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(g,{type:"error",title:e(a)("close"),disabled:e(Y),onClick:r[1]||(r[1]=ie=>c())},{icon:l(()=>[t(I,null,{default:l(()=>[t(x,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var ie,ye;return[_("section",{style:Oe(`min-height: ${((ie=e(z))==null?void 0:ie.windowHeight)-((ye=e(z))==null?void 0:ye.headerHeight)-5}px`),class:Ge(`w-full h-full ${e(p)("bg-slate-200","bg-zinc-800")}`)},[t(he,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(E,{class:"ml-4 mt-2"},{default:l(()=>{var N,$e;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var J,oe;return[P(i(e(a)("singletons"))+"Â  ",1),(J=e(f).index)!=null&&J.length?(n(),D("span",xo," ("+i((oe=e(f).index)==null?void 0:oe.length)+") ",1)):_e("",!0)]}),"header-extra":l(()=>[t(h,null,{default:l(()=>[t(g,{size:"small",type:"primary",secondary:e(ee),onClick:r[2]||(r[2]=J=>F.value=!e(F))},{default:l(()=>[t(I,null,{default:l(()=>[e(F)?(n(),S(x,{key:0,icon:"carbon:collapse-categories"})):(n(),S(x,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(g,{size:"small",type:"primary",secondary:e(ee),onClick:r[3]||(r[3]=J=>L())},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ne,{style:Oe(`max-height: ${((N=e(z))==null?void 0:N.windowHeight)-(($e=e(z))==null?void 0:$e.headerHeight)-100}px`)},{default:l(()=>[t(ta,{modelValue:e(f).index,"onUpdate:modelValue":r[4]||(r[4]=J=>e(f).index=J),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(E,{class:"mr-4 mt-2"},{default:l(()=>{var N,$e;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>[P(i(e(a)("collections"))+"Â  ",1),W()>0?(n(),D("span",Co," ("+i(W())+") ",1)):_e("",!0)]),"header-extra":l(()=>[t(h,null,{default:l(()=>[t(g,{size:"small",type:"primary",secondary:e(ee),onClick:r[5]||(r[5]=J=>j.value=!e(j))},{default:l(()=>[t(I,null,{default:l(()=>[e(j)?(n(),S(x,{key:0,icon:"carbon:collapse-categories"})):(n(),S(x,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(g,{size:"small",type:"primary",secondary:e(ee),onClick:r[6]||(r[6]=J=>H())},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ne,{style:Oe(`max-height: ${((N=e(z))==null?void 0:N.windowHeight)-(($e=e(z))==null?void 0:$e.headerHeight)-100}px`)},{default:l(()=>[(n(!0),D(me,null,Ne(e(f)||{},(J,oe,ue)=>(n(),D(me,{key:ue},[oe!="index"?(n(),S(pe,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Pe,{"expanded-names":le(`c-${ue}`).value,"onUpdate:expandedNames":xe=>le(`c-${ue}`).value=xe,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(fe,{name:"1"},{header:l(()=>[_("div",Io,[t(h,null,{default:l(()=>[t(b,{size:"small",type:"success"},{default:l(()=>[P(i(s(oe)+1),1)]),_:2},1024),_("span",$o,i(e(d)(J.title)),1)]),_:2},1024),t(g,{size:"small",type:"error",secondary:e(ee),onClick:xe=>U(oe)},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1}),P(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(he,{span:24,"x-gap":"6"},{default:l(()=>[t(E,{span:6},{default:l(()=>[_("span",Vo,i(e(a)("fieldKey")),1),t(Q,{value:J.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":xe=>J.key=e(X)(xe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(E,{span:11},{default:l(()=>[_("span",To,i(e(a)("title")),1),t(ke,{modelValue:J.title,"onUpdate:modelValue":xe=>J.title=xe,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(E,{span:7},{default:l(()=>[_("span",zo,i(e(a)("actions")),1),t(g,{block:"",size:"small",type:"primary",disabled:!G(J),secondary:e(ee),class:"w-full",onClick:xe=>V(oe)},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Ue,{class:"!my-4.75"}),G(J)?(n(),S(ta,{key:0,modelValue:e(f)[oe].items,"onUpdate:modelValue":xe=>e(f)[oe].items=xe,"parent-item-index":ue,"collection-key":oe,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),S(Me,{key:1,bordered:"",type:"info"},{default:l(()=>[P(i(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):_e("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Uo={class:"flex items-center"},So={class:"text-base"},Mo={class:"mt-2"},Ao={class:"mt-2 text-xs"},Eo=Be({__name:"index",setup(de){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:ee,isInDevMode:m}=Je(),{sections:B}=je(We()),{loadSections:$}=We(),{isLightTheme:se}=je(yt()),q=st(),K=nt(),Y=o(!1);$();const z=o(12),f=o(1),O=G=>{z.value=G},M={name:"",title:"",content:"",slug:""},F=o(!1),j=o(null),y=o(M),le={title:[{required:!0,message:a("fillRequired")}]},R=o(null),L=G=>{R.value=be.cloneDeep(G),y.value=be.cloneDeep(G||M),F.value=!0},te=async()=>{var G;return(G=j.value)==null||G.validate(async W=>{var ae,s,A,T,c,v;if(!W){q.start(),Y.value=!0;const Z={title:y.value.title};R.value||(Z.name=be.startCase(be.camelCase(p(y.value.title))).replace(/\s+/g,""));const u=await d({method:R.value?"put":"post",url:R.value?`/sections/${R.value.slug}`:"/sections",data:Z});if(u.failure&&u.error)switch((A=(s=(ae=u.error)==null?void 0:ae.response)==null?void 0:s.data)==null?void 0:A.errorCode){case et.FORM_INVALID_DATA:ee((v=(c=(T=u.error)==null?void 0:T.response)==null?void 0:c.data)==null?void 0:v.data);break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),$(),F.value=!1;Y.value=!1,q.finish()}}),!1},H=o(null),U=o(!1),V=async G=>{var ae;Y.value=!0,q.start();const W=await d({url:`/sections/${(ae=H.value)==null?void 0:ae.slug}`,method:"put",data:{dataStructure:G}});W.success&&W.result?(K.success(a("success")),$(),w(W.result.data)):K.error(a("anErrorOccurred")),Y.value=!1,q.finish()},w=G=>{H.value=G,U.value=!0};return(G,W)=>{var ne,E;const ae=ge,s=ce,A=Ve,T=it,c=Tt,v=Lt,Z=tl,u=ll,r=lt,C=al,x=kt,I=gt,g=ft,h=mt,pe=ut;return n(),D(me,null,[e(B)&&e(B).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(B).slice((e(f)-1)*e(z),e(f)*e(z)),b=>(n(),S(r,{key:b.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(u,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:Q})=>[t(s,null,{default:l(()=>[Q?(n(),S(ae,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>W[5]||(W[5]=[_("span",null,null,-1)])),default:l(()=>[t(Z,{name:"1"},{header:l(()=>[_("div",Uo,[t(T,null,{default:l(()=>[e(m)?(n(),S(A,{key:0,size:"small",type:"primary",secondary:e(se),onClick:ot(Q=>w(b),["stop"])},{default:l(()=>[t(s,{class:"mr-1"},{default:l(()=>[t(ae,{icon:"carbon:data-1"})]),_:1}),P(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):_e("",!0),t(A,{size:"small",type:"primary",secondary:e(se),onClick:ot(Q=>L(b),["stop"])},{default:l(()=>[t(s,null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(c,{vertical:"",class:Ge(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",So,i(e(p)(b.title)),1)])]),default:l(()=>[_("div",null,i(e(a)("sectionUsedInXPages",[b.pagesCount])),1),_("section",Mo,[(n(!0),D(me,null,Ne(b.pages,Q=>(n(),S(v,{key:Q.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[P(i(e(p)(Q.title)),1)]),_:2},1024))),128))]),_("div",Ao,[P(i(e(a)("dataRetrievalSlug"))+": ",1),_("b",null,i(b.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(C,{page:e(f),"onUpdate:page":W[0]||(W[0]=b=>Ie(f)?f.value=b:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(z),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(B).length/e(z)),"onUpdate:pageSize":O},{prefix:l(()=>[P(i(`${e(B).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(r,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(s,null,{default:l(()=>[t(ae,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(pe,{show:e(F),"onUpdate:show":W[2]||(W[2]=b=>Ie(F)?F.value=b:null),loading:e(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(R)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:W[3]||(W[3]=b=>F.value=!1)},{default:l(()=>[t(h,{ref_key:"formRef",ref:j,model:e(y),rules:le,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(g,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(I,{modelValue:e(y).title,"onUpdate:modelValue":W[1]||(W[1]=b=>e(y).title=b),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ba,{show:e(U),"onUpdate:show":W[4]||(W[4]=b=>Ie(U)?U.value=b:null),title:e(p)((ne=e(H))==null?void 0:ne.title),"raw-data-structure":(E=e(H))==null?void 0:E.dataStructure,"update-data-structure":V},null,8,["show","title","raw-data-structure"])],64)}}});const Do={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(de){const a=de,{t:d}=He(),p=o(!1),X=o(null),ee=o({header:null,results:null});function m({header:O,results:M}){ee.value={header:O,results:M},a.onSuccess&&a.onSuccess(ee.value)}function B(O){if(O.stopPropagation(),O.preventDefault(),p.value)return;const M=O.dataTransfer.files;if(M.length!==1){console.log(d("supportUploadingOneFile"));return}const F=M[0];if(!f(F))return console.log(d("formatNotSupported")),!1;K(F),O.stopPropagation(),O.preventDefault()}function $(O){O.stopPropagation(),O.preventDefault(),O.dataTransfer.dropEffect="copy"}function se(){X.value.click()}function q(O){const F=O.target.files[0];F&&K(F)}function K(O){if(X.value=null,!a.beforeUpload){Y(O);return}a.beforeUpload(O)&&Y(O)}function Y(O){return p.value=!0,new Promise((M,F)=>{const j=new FileReader;j.onload=y=>{const le=y.target.result,R=Ya(le,{type:"array"}),L=R.SheetNames[0],te=R.Sheets[L],H=z(te),U=cl.sheet_to_json(te);m({header:H,results:U}),p.value=!1,M()},j.readAsArrayBuffer(O)})}function z(O){const M=[],F=cl.decode_range(O["!ref"]);let j;const y=F.s.r;for(j=F.s.c;j<=F.e.c;++j){const le=O[cl.encode_cell({c:j,r:y})];let R="UNKNOWN "+j;le&&le.t&&(R=cl.format_cell(le)),M.push(R)}return M}function f(O){return/\.(xlsx|xls|csv)$/.test(O.name)}return(O,M)=>{const F=Ve;return n(),D("div",null,[_("input",{ref_key:"excelUploadInput",ref:X,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:q},null,544),_("div",{class:"drop",onDrop:B,onDragover:$,onDragenter:$},[P(i(e(d)("dropExcelFileHereOr"))+" ",1),t(F,{loading:e(p),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:se},{default:l(()=>[P(i(e(d)("browse")),1)]),_:1},8,["loading"])],32)])}}},ha=zt(Do,[["__scopeId","data-v-c15025e0"]]),Lo={class:"flex items-center justify-center"},Po=Be({__name:"Email",setup(de){const a=st(),d=nt(),p=pt(),{displayFormErrors:X}=Je(),{request:ee}=Qe(),{t:m,locale:B}=He(),$=o(!1),se=o([]),q=o(""),K=o(),Y={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${m("total")}: ${u}`})},z=[{type:"selection"},{title:m("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.email})}},{title:m("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Et(u.updatedAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:m("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Et(u.createdAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:K,placeholder:m("search"),value:q.value,onInput:u=>{q.value=u}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(Ve,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:m("confirm"),content:m("confirmDeleteEmailAddress"),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/emails/${u.id}`})).success?(d.success(m("success")),O()):d.error(m("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],f=De(()=>{if(!q.value)return se.value;const u=se.value.filter(r=>r.email.toLowerCase().includes(q.value.toLowerCase()));return K.value&&K.value.focus(),u}),O=async()=>{$.value=!0;const u=await ee({url:"/newsletter/emails"});u.success&&u.result&&(se.value=u.result.data),$.value=!1};O();const M=o(!1),F=o(!1),j=o(null),y=o(null),le=o({email:""}),R={email:[{required:!0,message:m("fillRequired")},{trigger:["input"],validator(u,r){return r&&!Xt.isEmail(r)?new Error(m("invalidEmail")):!0}}]},L=u=>{j.value=be.cloneDeep(u),u?le.value=be.cloneDeep(u):le.value={email:""},F.value=!0},te=async()=>{var u;return(u=y.value)==null||u.validate(async r=>{var C,x,I,g,h,pe;if(!r)if(j.value)if(j.value.email!==le.value.email&&se.value.findIndex(ne=>ne.email==le.value.email)>-1)d.error(m("sameEmailAddressMessage"));else{a.start(),M.value=!0;const ne={email:le.value.email},E=await ee({method:"put",url:`/newsletter/emails/${j.value.id}`,data:ne});E.success&&E.result.data&&(d.success(m("success")),O()),M.value=!1,a.finish(),F.value=!1}else if(se.value.findIndex(ne=>ne.email==le.value.email)>-1)d.error(m("sameEmailAddressMessage"));else{a.start(),M.value=!0;const ne={email:le.value.email},E=await ee({method:"post",url:"/newsletter/emails",data:ne});if(E.failure&&E.error)switch((I=(x=(C=E.error)==null?void 0:C.response)==null?void 0:x.data)==null?void 0:I.errorCode){case et.FORM_INVALID_DATA:X((pe=(h=(g=E.error)==null?void 0:g.response)==null?void 0:h.data)==null?void 0:pe.data);break;default:d.error(m("anErrorOccurred"))}else d.success(m("success")),O();M.value=!1,a.finish(),F.value=!1}}),!1};let H=null;const U=()=>{H&&(H.destroy(),H=null)};ma(U);const V=(u,r)=>r.map(C=>u.map(x=>C[x])),w=()=>{H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","email","createdAt","updatedAt"];const C=be.sortBy(se.value.map((I,g)=>({no:g+1,...I})),"email"),x=V(r,C);try{u.export_json_to_excel({header:r,data:x,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(m("anErrorOccurred"))}})},G=()=>{H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["email"];const C=V(r,[{email:"adresse@email.com"}]);try{u.export_json_to_excel({header:r,data:C,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(m("anErrorOccurred"))}})},W=o(!1),ae=async({results:u})=>{M.value=!0,a.start(),H||(H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].email&&se.value.findIndex(C=>C.email==u[r].email)==-1&&(H&&(H.content=`${m("pleaseBePatient")}: ${r} ${m("task_s")} / ${u.length}`),await ee({method:"post",url:"/newsletter/emails",data:{email:u[r].email}}));await O(),U(),a.finish(),M.value=!1,W.value=!1},s=o(ct()),A=o([]),T=u=>u.id,c=u=>{A.value=u},v=()=>{A.value=[],s.value=ct()},Z=async()=>(A.value.length?p.warning({title:m("confirm"),content:m("deleteSelectionWarningMessage",[A.value.length]),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let u=0;u<A.value.length;u++)(await ee({url:`/newsletter/emails/${A.value[u]}`,method:"delete"})).success;O(),a.finish(),M.value=!1,d.success(m("success")),v()}}):d.warning(m("noItemSelected")),!1);return(u,r)=>{const C=ca,x=it,I=Ct,g=lt,h=Dt,pe=gl,ne=ft,E=mt,b=ut,Q=ha;return n(),D(me,null,[t(I,{to:"#alt-action"},{default:l(()=>[t(x,null,{default:l(()=>[t(C,{onPositiveClick:r[0]||(r[0]=ke=>w())},{trigger:l(()=>[t(e(Ve),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("export")),1)]),_:1})]),default:l(()=>[P(" "+i(e(m)("exportDataInExcelFile")),1)]),_:1}),t(e(Ve),{type:"info",onClick:r[1]||(r[1]=ke=>W.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("import")),1)]),_:1}),t(e(Ve),{type:"primary",onClick:r[2]||(r[2]=ke=>L(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(h,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),S(g,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(x,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(m)("nbItemsSelected",[e(A).length])),1),t(x,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Ve),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("delete")),1)]),_:1}),t(e(Ve),{type:"warning",size:"small",onClick:v},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),(n(),S(pe,{key:e(s),columns:z,data:e(f),pagination:Y,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"])),t(b,{show:e(F),"onUpdate:show":r[4]||(r[4]=ke=>Ie(F)?F.value=ke:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(j)?e(m)("editEmailAddress"):e(m)("addEmailAddress"),"positive-text":e(m)("validate"),"negative-text":e(m)("cancel"),onPositiveClick:te,onNegativeClick:r[5]||(r[5]=ke=>F.value=!1)},{default:l(()=>[t(E,{ref_key:"formRef",ref:y,class:"mt-5",model:e(le),rules:R,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(ne,{label:e(m)("emailAddress"),path:"email"},{default:l(()=>[t(e(Ze),{value:e(le).email,"onUpdate:value":r[3]||(r[3]=ke=>e(le).email=ke),placeholder:e(m)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(b,{show:e(W),"onUpdate:show":r[7]||(r[7]=ke=>Ie(W)?W.value=ke:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(m)("import")},{default:l(()=>[t(Q,{class:"my-5","on-success":ae}),_("div",Lo,[t(e(Ve),{type:"info",size:"small",onClick:r[6]||(r[6]=ke=>G())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),No={class:"flex items-center justify-center"},Ro=Be({__name:"Phone",setup(de){const a=st(),d=nt(),p=pt(),{displayFormErrors:X}=Je(),{request:ee}=Qe(),{t:m,locale:B}=He(),$=o(!1),se=o([]),q=o(""),K=o(),Y={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${m("total")}: ${u}`})},z=[{type:"selection"},{title:m("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.phone})}},{title:m("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Et(u.updatedAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:m("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Et(u.createdAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:K,placeholder:m("search"),value:q.value,onInput:u=>{q.value=u}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(Ve,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:m("confirm"),content:m("confirmDeletePhoneNumber"),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/phones/${u.id}`})).success?(d.success(m("success")),O()):d.error(m("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],f=De(()=>{if(!q.value)return se.value;const u=se.value.filter(r=>r.phone.toLowerCase().includes(q.value.toLowerCase()));return K.value&&K.value.focus(),u}),O=async()=>{$.value=!0;const u=await ee({url:"/newsletter/phones"});u.success&&u.result&&(se.value=u.result.data),$.value=!1};O();const M=o(!1),F=o(!1),j=o(null),y=o(null),le=o({phone:""}),R={phone:[{required:!0,message:m("fillRequired")},{trigger:["input"],validator(u,r){return r&&!Ha(r)?new Error(m("invalidNumber")):!0}}]},L=u=>{j.value=be.cloneDeep(u),u?le.value=be.cloneDeep(u):le.value={phone:""},F.value=!0},te=async()=>{var u;return(u=y.value)==null||u.validate(async r=>{var C,x,I,g,h,pe;if(!r)if(j.value)if(j.value.phone!==le.value.phone.replace(/\s+/g,"")&&se.value.findIndex(ne=>ne.phone==le.value.phone.replace(/\s+/g,""))>-1)d.error(m("samePhoneNumberMessage"));else{a.start(),M.value=!0;const ne={phone:le.value.phone.replace(/\s+/g,"")},E=await ee({method:"put",url:`/newsletter/phones/${j.value.id}`,data:ne});E.success&&E.result.data&&(d.success(m("success")),O()),M.value=!1,a.finish(),F.value=!1}else if(se.value.findIndex(ne=>ne.phone==le.value.phone.replace(/\s+/g,""))>-1)d.error(m("samePhoneNumberMessage"));else{a.start(),M.value=!0;const ne={phone:le.value.phone.replace(/\s+/g,"")},E=await ee({method:"post",url:"/newsletter/phones",data:ne});if(E.failure&&E.error)switch((I=(x=(C=E.error)==null?void 0:C.response)==null?void 0:x.data)==null?void 0:I.errorCode){case et.FORM_INVALID_DATA:X((pe=(h=(g=E.error)==null?void 0:g.response)==null?void 0:h.data)==null?void 0:pe.data);break;default:d.error(m("anErrorOccurred"))}else d.success(m("success")),O();M.value=!1,a.finish(),F.value=!1}}),!1};let H=null;const U=()=>{H&&(H.destroy(),H=null)};ma(U);const V=(u,r)=>r.map(C=>u.map(x=>C[x])),w=()=>{H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","phone","createdAt","updatedAt"];const C=be.sortBy(se.value.map((I,g)=>({no:g+1,...I})),"phone"),x=V(r,C);try{u.export_json_to_excel({header:r,data:x,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(m("anErrorOccurred"))}})},G=()=>{H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["phone"];const C=V(r,[{phone:"+22899999999"}]);try{u.export_json_to_excel({header:r,data:C,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(m("anErrorOccurred"))}})},W=o(!1),ae=async({results:u})=>{M.value=!0,a.start(),H||(H=d.info(m("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].phone&&se.value.findIndex(C=>C.phone.replace(/\s+/g,"")==u[r].phone.replace(/\s+/g,""))==-1&&(H&&(H.content=`${m("pleaseBePatient")}: ${r} ${m("task_s")} / ${u.length}`),await ee({method:"post",url:"/newsletter/phones",data:{phone:u[r].phone.replace(/\s+/g,"")}}));await O(),U(),a.finish(),M.value=!1,W.value=!1},s=o(ct()),A=o([]),T=u=>u.id,c=u=>{A.value=u},v=()=>{A.value=[],s.value=ct()},Z=async()=>(A.value.length?p.warning({title:m("confirm"),content:m("deleteSelectionWarningMessage",[A.value.length]),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let u=0;u<A.value.length;u++)(await ee({url:`/newsletter/phones/${A.value[u]}`,method:"delete"})).success;O(),a.finish(),M.value=!1,d.success(m("success")),v()}}):d.warning(m("noItemSelected")),!1);return(u,r)=>{const C=ca,x=it,I=Ct,g=lt,h=Dt,pe=gl,ne=Ga,E=ft,b=mt,Q=ut,ke=ha;return n(),D(me,null,[t(I,{to:"#alt-action"},{default:l(()=>[t(x,null,{default:l(()=>[t(C,{onPositiveClick:r[0]||(r[0]=he=>w())},{trigger:l(()=>[t(e(Ve),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("export")),1)]),_:1})]),default:l(()=>[P(" "+i(e(m)("exportDataInExcelFile")),1)]),_:1}),t(e(Ve),{type:"info",onClick:r[1]||(r[1]=he=>W.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("import")),1)]),_:1}),t(e(Ve),{type:"primary",onClick:r[2]||(r[2]=he=>L(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(h,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),S(g,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(x,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,i(e(m)("nbItemsSelected",[e(A).length])),1),t(x,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Ve),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("delete")),1)]),_:1}),t(e(Ve),{type:"warning",size:"small",onClick:v},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),(n(),S(pe,{key:e(s),columns:z,data:e(f),pagination:Y,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"])),t(Q,{show:e(F),"onUpdate:show":r[4]||(r[4]=he=>Ie(F)?F.value=he:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(j)?e(m)("editPhoneNumber"):e(m)("addPhoneNumber"),"positive-text":e(m)("validate"),"negative-text":e(m)("cancel"),onPositiveClick:te,onNegativeClick:r[5]||(r[5]=he=>F.value=!1)},{default:l(()=>[t(b,{ref_key:"formRef",ref:y,class:"mt-5",model:e(le),rules:R,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(E,{label:e(m)("phone"),path:"phone"},{default:l(()=>[t(ne,{modelValue:e(le).phone,"onUpdate:modelValue":r[3]||(r[3]=he=>e(le).phone=he)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Q,{show:e(W),"onUpdate:show":r[7]||(r[7]=he=>Ie(W)?W.value=he:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(m)("import")},{default:l(()=>[t(ke,{class:"my-5","on-success":ae}),_("div",No,[t(e(Ve),{type:"info",size:"small",onClick:r[6]||(r[6]=he=>G())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Oo="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",qo={class:"text-base"},Fo={class:"text-base"},jo=Be({__name:"DataForm",props:Gt({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(de){const a=de,d=_t(de,"show"),p=_t(de,"data"),X=st(),ee=nt(),{t:m}=He(),{tr:B,pickByTheme:$,editKeysToCamelCase:se}=Je(),q=o(null),K=o(!1),Y=vt("currentEditItem"),z=De(()=>be.isEqual(p.value,Y==null?void 0:Y.value)&&be.isEqual(O.value,F.value)),f=()=>{d.value=!1,K.value=!1},O=o({}),M=o(ct()),F=o({}),j=o(),y=o();ht(()=>d.value,R=>{var L;R&&(aa(p.value.contentModelData)?O.value=Ot(p.value.contentModelData):O.value=Ot({}),be.forIn(se(((L=a.contentModel)==null?void 0:L.dataStructure)??{}),(te,H)=>{(!O.value[H]||Array.isArray(O.value[H])&&O.value[H].length==0)&&(H==="index"?O.value[H]=Ot({}):O.value[H]=Ot([]))}),F.value=be.cloneDeep(O.value),M.value=ct())},{immediate:!0});const le=async()=>{K.value=!0,X.start();const R=j.value&&await j.value(),L=y.value&&await y.value();(!j.value||R)&&(!y.value||L)?await a.submitData(O.value):ee.error(m("mandatoryFieldsNotFilledIn")),X.finish(),K.value=!1};return(R,L)=>{const te=da,H=_l,U=yl,V=ge,w=ce,G=Ve,W=it,ae=lt,s=It,A=Pt,T=bt,c=la;return n(),S(c,{modelValue:d.value,"onUpdate:modelValue":L[3]||(L[3]=v=>d.value=v),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=v=>{q.value=v})},{header:l(()=>[_("div",qo,[t(te,{depth:"1"},{default:l(()=>{var v;return[P(i(e(B)((v=a.contentModel)==null?void 0:v.title))+" ",1),_("span",null," Â -Â "+i(e(Y)?e(m)("editItem"):e(m)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(W,{align:"center"},{default:l(()=>[_("span",Fo,i(e(m)("status"))+":",1),t(U,{value:p.value.isActive,"onUpdate:value":L[0]||(L[0]=v=>p.value.isActive=v),name:"isActive",class:"w-full"},{default:l(()=>[t(H,{value:!1,label:e(m)("hidden"),class:"w-[50%]"},null,8,["label"]),t(H,{value:!0,label:e(m)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=_("div",{class:"w-4"},null,-1)),t(G,{type:"success",title:e(m)("save"),loading:e(K),disabled:e(z),onClick:L[1]||(L[1]=v=>le())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("save")),1)]),_:1},8,["title","loading","disabled"]),t(G,{type:"error",title:e(m)("close"),disabled:e(K),onClick:L[2]||(L[2]=v=>f())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var v,Z;return[_("section",{style:Oe(`min-height: ${((v=e(q))==null?void 0:v.windowHeight)-((Z=e(q))==null?void 0:Z.headerHeight)-5}px`),class:Ge(`w-full h-full ${e($)("bg-slate-200","bg-zinc-800")}`)},[t(T,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(A,{class:"ml-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:Oe(`height: ${((u=e(q))==null?void 0:u.windowHeight)-((r=e(q))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),D(me,null,Ne(e(se)((C=R.contentModel)==null?void 0:C.dataStructure),(x,I)=>(n(),D(me,{key:I},[String(I)==="index"?(n(),S(ae,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),S(vl,{key:`${e(M)}-${I}-form-1`,modelValue:e(O)[I],"onUpdate:modelValue":g=>e(O)[I]=g,items:x,onUpdate:(g,h)=>{j.value=h}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(A,{class:"mr-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:Oe(`height: ${((u=e(q))==null?void 0:u.windowHeight)-((r=e(q))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),D(me,null,Ne(e(se)((C=R.contentModel)==null?void 0:C.dataStructure),(x,I)=>(n(),D(me,{key:I},[String(I)!=="index"?(n(),S(ae,{key:0,title:e(B)(x.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(G,{quaternary:"",size:"small",onClick:()=>e(O)[I].push({})},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),D(me,null,Ne(e(O)[I],(g,h)=>(n(),S(ae,{key:h,title:String(h+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(G,{type:"error",size:"small",onClick:()=>e(O)[I].splice(h,1)},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),S(vl,{key:`${e(M)}-${I}-${h}-form-2`,modelValue:e(O)[I][h],"onUpdate:modelValue":pe=>e(O)[I][h]=pe,items:x.items,onUpdate:(pe,ne)=>{y.value=ne}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Bo={class:"flex items-center justify-between"},Ko={class:"flex flex-col"},Yo={class:"text-sm font-bold"},Go={class:"text-xs font-normal"},Ho=Be({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Gt(["update"],["update:show"]),setup(de,{emit:a}){const{t:d}=He(),{request:p}=Qe(),{pickByTheme:X,tr:ee,displayFormErrors:m,mergeArrays:B}=Je(),{extractItemTitle:$}=rl(),{loadContentModels:se}=We(),{contentModels:q}=je(We()),{isLightTheme:K}=je(yt()),Y=pt(),z=nt(),f=st(),O=a;se();const M=_t(de,"show"),F=o(!1),j=vt("currentEditItem"),y=async T=>{Y.warning({title:d("confirm"),content:d("confirmDeleteLink"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{var v,Z,u,r,C;f.start(),(await p({method:"put",url:`/content-model/items/${(v=j==null?void 0:j.value)==null?void 0:v.id}`,data:{relatedItems:(r=(u=(Z=j==null?void 0:j.value)==null?void 0:Z.relatedItems)==null?void 0:u.filter(x=>x.id!==T.id))==null?void 0:r.map(x=>x.id)}})).success?(z.success(d("success")),O("update",(C=j==null?void 0:j.value)==null?void 0:C.id)):z.error(d("anErrorOccurred")),f.finish()}})},le=T=>{var c;return(c=q.value)==null?void 0:c.find(v=>v.id===T.contentModelId)},R=o(!1),L=o(null),te=o({contentModelId:null,itemId:null}),H={contentModelId:[{required:!0,message:d("fillRequired")}],itemId:[{required:!0,message:d("fillRequired")}]},U=async()=>{var T;return(T=L.value)==null||T.validate(async c=>{var v,Z,u,r,C,x,I,g,h,pe;if(!c){f.start(),F.value=!0;const ne=((Z=(v=j==null?void 0:j.value)==null?void 0:v.relatedItems)==null?void 0:Z.map(b=>b.id))||[],E=await p({method:"put",url:`/content-model/items/${(u=j==null?void 0:j.value)==null?void 0:u.id}`,data:{relatedItems:[...ne,te.value.itemId]}});if(E.failure&&E.error)switch((x=(C=(r=E.error)==null?void 0:r.response)==null?void 0:C.data)==null?void 0:x.errorCode){case et.FORM_INVALID_DATA:m((h=(g=(I=E.error)==null?void 0:I.response)==null?void 0:g.data)==null?void 0:h.data);break;default:z.error(d("anErrorOccurred"))}else z.success(d("success")),O("update",(pe=j==null?void 0:j.value)==null?void 0:pe.id),R.value=!1;F.value=!1,f.finish()}}),!1},V=T=>re("span",{},{default:()=>ee(T.title)}),w=T=>De(()=>re("span",{},{default:()=>$(T,le(T))})),G=o(!1),W=o([]),ae=o([]),s=async(T,c)=>{if(!T.length){ae.value=[];return}G.value=!0;const v=await p({url:`/content-model-items/search/${T}/${c}`});v.success&&v.result&&(ae.value=v.result.data),G.value=!1},A=De(()=>B(W.value,ae.value,"id").filter(T=>{var c;return T.id!==((c=j==null?void 0:j.value)==null?void 0:c.id)}));return(T,c)=>{const v=ge,Z=Ve,u=it,r=ce,C=lt,x=It,I=kt,g=Kt,h=ut,pe=$t,ne=ft,E=mt;return n(),D(me,null,[t(h,{show:M.value,"onUpdate:show":c[2]||(c[2]=b=>M.value=b),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(d)("linkContentModelItems")},{"header-extra":l(()=>[t(u,{align:"center"},{default:l(()=>[t(Z,{size:"small",type:"primary",disabled:e(F),onClick:c[0]||(c[0]=b=>R.value=!0)},{default:l(()=>[t(v,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(d)("add")),1)]),_:1},8,["disabled"]),t(Z,{size:"small",type:"error",disabled:e(F),onClick:c[1]||(c[1]=b=>M.value=!1)},{default:l(()=>[t(v,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(d)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(g,{show:e(F)},{default:l(()=>{var b,Q;return[(Q=(b=e(j))==null?void 0:b.relatedItems)!=null&&Q.length?(n(),S(x,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var ke;return[(n(!0),D(me,null,Ne((ke=e(j))==null?void 0:ke.relatedItems,he=>(n(),S(C,{key:he.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Ue;return[_("div",Bo,[_("div",Ko,[_("span",Yo,i(e($)(he,le(he))),1),_("span",Go,i(e(ee)((Ue=le(he))==null?void 0:Ue.title)),1)]),t(u,null,{default:l(()=>[t(Z,{size:"small",type:"error",secondary:e(K),onClick:Me=>y(he)},{default:l(()=>[t(r,null,{default:l(()=>[t(v,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),S(C,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(I,{description:e(d)("noLinkAdded")},{icon:l(()=>[t(r,null,{default:l(()=>[t(v,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(h,{show:e(R),"onUpdate:show":c[6]||(c[6]=b=>Ie(R)?R.value=b:null),loading:e(F),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(d)("addLink"),"positive-text":e(d)("validate"),"negative-text":e(d)("cancel"),onPositiveClick:U,onNegativeClick:c[7]||(c[7]=b=>R.value=!1)},{default:l(()=>[t(E,{ref_key:"formRef",ref:L,model:e(te),rules:H,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ne,{label:e(d)("contentModel"),path:"contentModelId"},{default:l(()=>[t(pe,{value:e(te).contentModelId,"onUpdate:value":c[3]||(c[3]=b=>e(te).contentModelId=b),options:e(q),placeholder:e(d)("contentModel"),"render-label":V,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(ne,{label:e(d)("itemToLink"),path:"itemId"},{default:l(()=>[t(pe,{value:e(te).itemId,"onUpdate:value":c[4]||(c[4]=b=>e(te).itemId=b),options:e(A)||[],placeholder:e(d)("itemToLink"),"render-label":b=>w(b).value,loading:e(G),disabled:!e(te).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[5]||(c[5]=b=>s(b,e(te).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Wo={key:0,class:"w-full flex items-center justify-between gap-4"},Jo={class:"flex items-center gap-3"},Xo={key:0},Zo={class:"flex items-center justify-center h-full"},Qo=["src"],ei={class:"text-center text-dimgray text-sm"},ti={key:1,class:"flex items-center justify-center"},li=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=rl(),{tr:X,displayFormErrors:ee}=Je(),m=pt(),B=nt(),$=st(),se=_t(de,"modelValue"),q=o(!1),K=o(!1),Y=o(!1),z=o(!1),f=o([]),O=o(0),M=o(12),F=o(1),j=De(()=>{var v;return`/content-model/items?pageSize=${M.value}&contentModelId=${(v=se.value)==null?void 0:v.id}`}),y=v=>{R(`${j.value}&page=${v}`)},le=v=>{M.value=v,R()},R=async(v=null,Z=!1)=>{var r,C,x,I,g;q.value=!0,$.start();const u=await d({url:v??j.value});u.success&&u.result&&(f.value=((r=u.result.data)==null?void 0:r.items)||[],O.value=((x=(C=u.result.data)==null?void 0:C.meta)==null?void 0:x.total)||0,F.value=((g=(I=u.result.data)==null?void 0:I.meta)==null?void 0:g.currentPage)||1),$.finish(),q.value=!1};R(null,!0);const L=o(null),te=o({title:"",contentModelData:"",isActive:!0}),H=v=>{L.value=be.cloneDeep(v),v?te.value=be.cloneDeep(v):te.value={title:"",contentModelData:"",isActive:!0},Y.value=!0},U=v=>{L.value=be.cloneDeep(v),z.value=!0},V=async v=>{await R();const Z=f.value.find(u=>u.id===v);Z&&U(Z)},w=async v=>{m.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-model/items/${v.id}`})).success?(B.success(a("success")),R()):B.error(a("anErrorOccurred"))}})},G=async v=>{var r,C,x,I,g,h,pe;$.start(),K.value=!0;const Z={title:te.value.title,contentModelData:v,isActive:te.value.isActive,contentModelId:(r=se.value)==null?void 0:r.id},u=await d({method:L.value?"put":"post",url:L.value?`/content-model/items/${L.value.id}`:"/content-model/items",data:Z});if(u.failure&&u.error)switch((I=(x=(C=u.error)==null?void 0:C.response)==null?void 0:x.data)==null?void 0:I.errorCode){case et.FORM_INVALID_DATA:ee((pe=(h=(g=u.error)==null?void 0:g.response)==null?void 0:h.data)==null?void 0:pe.data);break;default:B.error(a("anErrorOccurred"))}else B.success(a("success")),R(`${j.value}&page=${F.value}`),Y.value=!1;K.value=!1,$.finish()},W=o(!1),ae=o(ct()),s=o({}),A=De(()=>{let v=0;for(const Z in s.value)s.value[Z]&&v++;return v});function T(){s.value={},R()}const c=async()=>(A.value?m.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[A.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{K.value=!0,$.start();for(const v in s.value)s.value[v]&&await d({url:`/content-model/items/${v}`,method:"delete"});$.finish(),K.value=!1,B.success(a("success")),s.value={},R(null,!0)}}):B.warning(a("noItemSelected")),!1);return St("currentEditItem",L),(v,Z)=>{const u=Yt,r=ge,C=ce,x=Ve,I=it,g=Ct,h=ra,pe=bl,ne=Lt,E=lt,b=Dt,Q=Pt,ke=bt,he=al,Ue=Kt,Me=kt;return n(),D(me,null,[t(g,{to:"#alt-action"},{default:l(()=>[t(I,{align:"center"},{default:l(()=>[t(u,{checked:e(W),"onUpdate:checked":[Z[0]||(Z[0]=fe=>Ie(W)?W.value=fe:null),Z[1]||(Z[1]=fe=>{for(const Pe of e(f))Pe.id&&(e(s)[Pe.id]=fe);ae.value=("uuidv4"in v?v.uuidv4:e(ct))()})],disabled:!e(f).length},{default:l(()=>[P(i(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(x,{type:"primary",onClick:Z[2]||(Z[2]=fe=>H(null))},{icon:l(()=>[t(C,{size:"18"},{default:l(()=>[t(r,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(h,{class:"mt-2 mb-5",onBack:Z[3]||(Z[3]=fe=>se.value=null)},{title:l(()=>{var fe;return[P(i(e(X)((fe=se.value)==null?void 0:fe.title)),1)]}),back:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(A)>0?(n(),D("section",Wo,[_("span",null,i(e(a)("nbItemsSelected",[e(A)])),1),_("section",Jo,[t(x,{type:"error",size:"small",onClick:c},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("delete")),1)]),_:1}),t(x,{type:"warning",size:"small",onClick:T},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0)]),_:1}),e(f).length&&!e(q)?(n(),D("section",Xo,[t(ke,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),D(me,null,Ne(e(f),(fe,Pe)=>(n(),S(Q,{key:Pe},{default:l(()=>[t(b,{name:"slide-fade",appear:""},{default:l(()=>[t(E,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var we;return[_("div",Zo,[_("img",{src:((we=se.value)==null?void 0:we.imageUrl)??e(Oo),class:"w-full h-[200px] object-cover"},null,8,Qo)])]}),header:l(()=>[_("div",ei,[t(pe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[fe.id?(n(),S(u,{key:e(ae),checked:e(s)[fe.id],"onUpdate:checked":we=>e(s)[fe.id]=we,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),P(" "+i(e(p)(fe,se.value)),1)]),_:2},1024)])]),action:l(()=>[t(I,{justify:"space-between",align:"center"},{default:l(()=>[t(ne,{bordered:!1,type:fe.isActive?"success":"error"},{default:l(()=>[P(i(fe.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(I,null,{default:l(()=>[t(x,{ternary:"",circle:"",title:e(a)("edit"),onClick:we=>H(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(x,{ternary:"",circle:"",title:e(a)("links"),onClick:we=>U(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(x,{ternary:"",circle:"",title:e(a)("delete"),onClick:we=>w(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(he,{page:e(F),"onUpdate:page":[Z[4]||(Z[4]=fe=>Ie(F)?F.value=fe:null),y],class:"mt-10 justify-center","show-size-picker":"","page-size":e(M),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(O)/e(M)),"onUpdate:pageSize":le},{prefix:l(()=>[P(i(`${e(O)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(q)?(n(),D("section",ti,[t(Ue,{size:"medium"})])):(n(),S(Me,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(jo,{show:e(Y),"onUpdate:show":Z[5]||(Z[5]=fe=>Ie(Y)?Y.value=fe:null),data:e(te),"onUpdate:data":Z[6]||(Z[6]=fe=>Ie(te)?te.value=fe:null),"content-model":se.value,"submit-data":G},null,8,["show","data","content-model"]),t(Ho,{show:e(z),"onUpdate:show":Z[7]||(Z[7]=fe=>Ie(z)?z.value=fe:null),onUpdate:V},null,8,["show"])],64)}}}),ai={key:2},ni={class:"flex items-center"},si={class:"text-base"},oi={class:"mt-4"},ii="previews",ri=Be({__name:"index",setup(de){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:ee,fileUrl:m,isInDevMode:B,formatKey:$}=Je(),{isLightTheme:se}=je(yt()),{contentModels:q}=je(We()),{loadContentModels:K}=We(),Y=st(),z=nt(),f=pt(),O=o(!1),M=o(!1),F=vt("appConfig"),j=async()=>{Y.start(),O.value=!0,await K(),O.value=!1,Y.finish()};j();const y=o(12),le=o(1),R=C=>{y.value=C},L={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},te=o(!1),H=o(null),U=o(L),V={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},w=o(null),G=C=>{w.value=be.cloneDeep(C),U.value=be.cloneDeep(C||L),te.value=!0},W=async()=>{var C;return(C=H.value)==null||C.validate(async x=>{var I,g,h,pe,ne,E;if(!x){Y.start(),M.value=!0;const b={name:U.value.name,title:U.value.title,image:U.value.image,description:U.value.description,titleFieldName:U.value.titleFieldName,hasPermalink:U.value.hasPermalink},Q=await d({method:w.value?"put":"post",url:w.value?`/content-models/${w.value.id}`:"/content-models",data:b});if(Q.failure&&Q.error)switch((h=(g=(I=Q.error)==null?void 0:I.response)==null?void 0:g.data)==null?void 0:h.errorCode){case et.FORM_INVALID_DATA:ee((E=(ne=(pe=Q.error)==null?void 0:pe.response)==null?void 0:ne.data)==null?void 0:E.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),j(),te.value=!1;M.value=!1,Y.finish()}}),!1},ae=async C=>{f.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-models/${C.id}`})).success?(z.success(a("success")),j()):z.error(a("anErrorOccurred"))}})},s=o(null),A=o(!1),T=async C=>{var I;M.value=!0,Y.start();const x=await d({url:`/content-models/${(I=s.value)==null?void 0:I.id}`,method:"put",data:{dataStructure:C}});x.success&&x.result?(z.success(a("success")),j(),c(x.result.data)):z.error(a("anErrorOccurred")),M.value=!1,Y.finish()},c=C=>{s.value=C,A.value=!0},v=o(!1),Z=async C=>{U.value.image=C,v.value=!1},u=()=>{U.value.image=""},r=el("content-models-management",()=>({itemsContentModel:o(null)}))();return ht(()=>U.value.title,C=>{w.value||U.value.name.length<=21&&(U.value.name=_a(p(C),{trim:!0,lower:!0,strict:!0}))}),(C,x)=>{var ue,xe,Se;const I=ge,g=ce,h=Ve,pe=Ct,ne=it,E=Tt,b=lt,Q=al,ke=kt,he=Dt,Ue=gt,Me=ft,fe=Ze,Pe=Pt,we=pa,ie=qt,ye=bt,N=Yt,$e=mt,J=ut,oe=Bt;return n(),D(me,null,[e(r).itemsContentModel?_e("",!0):(n(),S(pe,{key:0,to:"#alt-action"},{default:l(()=>[e(q)&&e(q).length?(n(),S(h,{key:0,type:"primary",onClick:x[0]||(x[0]=ze=>G(null))},{icon:l(()=>[t(g,{size:"18"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addContentModel")),1)]),_:1})):_e("",!0)]),_:1})),e(r).itemsContentModel?(n(),S(li,{key:1,modelValue:e(r).itemsContentModel,"onUpdate:modelValue":x[1]||(x[1]=ze=>e(r).itemsContentModel=ze)},null,8,["modelValue"])):(n(),D("section",ai,[t(he,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(q)&&e(q).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(q).slice((e(le)-1)*e(y),e(le)*e(y)),ze=>(n(),S(b,{key:ze.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[_("div",ni,[e(B)?(n(),S(ne,{key:0},{default:l(()=>[t(h,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>c(ze),["stop"])},{default:l(()=>[t(g,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:data-1"})]),_:1}),P(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>G(ze),["stop"])},{default:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"error",secondary:e(se),onClick:ot(Ee=>ae(ze),["stop"])},{default:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):_e("",!0),e(B)?(n(),S(E,{key:1,vertical:"",class:Ge(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):_e("",!0),_("span",si,i(e(p)(ze.title)),1)])]),"header-extra":l(()=>[t(h,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>e(r).itemsContentModel=ze,["stop"])},{icon:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(Q,{page:e(le),"onUpdate:page":x[2]||(x[2]=ze=>Ie(le)?le.value=ze:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(y),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(y)),"onUpdate:pageSize":R},{prefix:l(()=>[P(i(`${e(q).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(b,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ke,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",oi,[t(h,{size:"small",onClick:x[3]||(x[3]=ze=>G(null))},{icon:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(J,{show:e(te),"onUpdate:show":x[11]||(x[11]=ze=>Ie(te)?te.value=ze:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(w)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:W,onNegativeClick:x[12]||(x[12]=ze=>te.value=!1)},{default:l(()=>[t($e,{ref_key:"formRef",ref:H,model:e(U),rules:V,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Me,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Ue,{modelValue:e(U).title,"onUpdate:modelValue":x[4]||(x[4]=ze=>e(U).title=ze),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Ue,{modelValue:e(U).description,"onUpdate:modelValue":x[5]||(x[5]=ze=>e(U).description=ze),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ye,{"x-gap":"12",span:24},{default:l(()=>[t(Pe,{span:14},{default:l(()=>[t(Me,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(fe,{value:e(U).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":x[6]||(x[6]=ze=>e(U).name=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(fe,{value:e(U).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":x[7]||(x[7]=ze=>e(U).titleFieldName=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(ie,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(ne,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(we,{class:"cursor-pointer","object-fit":"cover",style:Oe("border: 1px dashed "+e(X)("green","white")),size:150,src:e(m)(e(U).image||""),onClick:x[8]||(x[8]=ze=>v.value=!0)},{default:l(()=>[e(U).image?_e("",!0):(n(),S(g,{key:0,size:64},{default:l(()=>[t(I,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(U).image?(n(),S(h,{key:0,quaternary:"",onClick:x[9]||(x[9]=ze=>u())},{icon:l(()=>[t(g,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(Me,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(N,{checked:e(U).hasPermalink,"onUpdate:checked":x[10]||(x[10]=ze=>e(U).hasPermalink=ze)},{default:l(()=>[P(i(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(oe,{show:e(v),"onUpdate:show":x[13]||(x[13]=ze=>Ie(v)?v.value=ze:null),title:e(a)("selectImage"),"upload-config":{folder:ii,limit:0,maxSize:0,baseUrl:((ue=e(F))==null?void 0:ue.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:Z},null,8,["show","title","upload-config"]),t(ba,{show:e(A),"onUpdate:show":x[14]||(x[14]=ze=>Ie(A)?A.value=ze:null),title:e(p)((xe=e(s))==null?void 0:xe.title),"raw-data-structure":(Se=e(s))==null?void 0:Se.dataStructure,"update-data-structure":T},null,8,["show","title","raw-data-structure"])]))],64)}}});var Mt=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(Mt||{});const ui={class:"text-base font-bold"},di={class:"text-sm"},ci={class:"text-xs text-slate-400"},pi={class:"text-xs text-slate-400"},fi={class:"text-xs text-slate-400"},mi={class:"text-sm"},vi={class:"text-xs text-slate-400"},_i={class:"text-xs text-slate-400"},yi={class:"text-xs text-slate-400"},gi={class:"text-sm"},bi={class:"text-xs text-slate-400"},hi={class:"text-xs text-slate-400"},ki={class:"text-xs text-slate-400"},wi={class:"text-base font-bold"},xi={class:"text-sm"},Ci={class:"text-xs text-slate-400"},Ii={class:"text-xs text-slate-400"},$i={class:"text-xs text-slate-400"},Vi=Be({__name:"index",setup(de){const{t:a}=He(),{tr:d}=Je(),{request:p}=Qe(),{contentModels:X,pages:ee}=je(We()),{loadContentModels:m,loadPages:B}=We(),$=nt(),se=st(),q=[{pathPrefix:"/news/article",contentType:Mt.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Mt.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Mt.NEWS_TAG,contentParam:"slug",pageId:null}],K=o(!1),Y=o([]),z=o(q),f=o(),O=De(()=>X.value.filter(R=>R.hasPermalink)),M=async(R=!1)=>{se.start(),K.value=!0,R&&(await m(),await B());const L=await p({url:"/permalinks"});if(L.success&&L.result){Y.value=L.result.data,z.value=be.cloneDeep(q);for(let te=0;te<O.value.length;te++)z.value.push({pathPrefix:`/${O.value[te].slug}`,contentType:Mt.CONTENT_MODEL,contentParam:"id",contentId:O.value[te].id,pageId:null});for(let te=0;te<z.value.length;te++)switch(z.value[te].contentType){case Mt.NEWS_ARTICLE:case Mt.NEWS_CATEGORY:case Mt.NEWS_TAG:{const H=Y.value.find(U=>U.contentType===z.value[te].contentType);H&&(z.value[te].pathPrefix=H.pathPrefix,z.value[te].contentParam=H.contentParam,z.value[te].pageId=H.pageId,z.value[te].permalinkId=H.id)}break;case Mt.CONTENT_MODEL:{const H=Y.value.find(U=>U.contentType===z.value[te].contentType&&U.contentId===z.value[te].contentId);H&&(z.value[te].pathPrefix=H.pathPrefix,z.value[te].contentParam=H.contentParam,z.value[te].pageId=H.pageId,z.value[te].permalinkId=H.id)}break}f.value=be.cloneDeep(z.value)}K.value=!1,se.finish()};M(!0);const F=async()=>{se.start(),K.value=!0,(await p({method:"put",url:"/permalinks",data:z.value})).success&&($.success(a("success")),M()),K.value=!1,se.finish()},j=De(()=>be.isEqual(z.value,f.value)),y=R=>re("span",{},{default:()=>d(R.title)}),le=R=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(R);return(R,L)=>{const te=ge,H=ce,U=Ve,V=Ct,w=Ze,G=Pt,W=$t,ae=bt,s=lt,A=tl,T=ll,c=Tt;return n(),D(me,null,[t(V,{to:"#alt-action"},{default:l(()=>[t(U,{type:"primary",loading:e(K),disabled:e(j),onClick:L[0]||(L[0]=v=>F())},{icon:l(()=>[t(H,null,{default:l(()=>[t(te,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(s,{embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:v})=>[t(H,null,{default:l(()=>[v?(n(),S(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[10]||(L[10]=[_("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[_("span",ui,i(e(a)("news")),1)]),default:l(()=>[t(s,{size:"small"},{header:l(()=>[_("span",di,i(e(a)("articles")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[_("span",ci,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=v=>e(z)[0].pathPrefix=v),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",pi,i(e(a)("contentParam")),1),t(w,{value:e(z)[0].contentParam,"onUpdate:value":L[2]||(L[2]=v=>e(z)[0].contentParam=v),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",fi,i(e(a)("contentPage")),1),t(W,{value:e(z)[0].pageId,"onUpdate:value":L[3]||(L[3]=v=>e(z)[0].pageId=v),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":y,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[_("span",mi,i(e(a)("categories")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[_("span",vi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=v=>e(z)[1].pathPrefix=v),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",_i,i(e(a)("contentParam")),1),t(w,{value:e(z)[1].contentParam,"onUpdate:value":L[5]||(L[5]=v=>e(z)[1].contentParam=v),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",yi,i(e(a)("contentPage")),1),t(W,{value:e(z)[1].pageId,"onUpdate:value":L[6]||(L[6]=v=>e(z)[1].pageId=v),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":y,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[_("span",gi,i(e(a)("tags")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[_("span",bi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=v=>e(z)[2].pathPrefix=v),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",hi,i(e(a)("contentParam")),1),t(w,{value:e(z)[2].contentParam,"onUpdate:value":L[8]||(L[8]=v=>e(z)[2].contentParam=v),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[_("span",ki,i(e(a)("contentPage")),1),t(W,{value:e(z)[2].pageId,"onUpdate:value":L[9]||(L[9]=v=>e(z)[2].pageId=v),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":y,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{class:"!my-2"}),e(O).length&&e(z).length>3?(n(),S(s,{key:0,embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:v})=>[t(H,null,{default:l(()=>[v?(n(),S(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[11]||(L[11]=[_("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[_("span",wi,i(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),D(me,null,Ne(e(O),(v,Z)=>(n(),S(s,{key:v.id,size:"small"},{header:l(()=>[_("span",xi,i(e(d)(v.title)),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[_("span",Ci,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[Z+3].pathPrefix,"onUpdate:value":u=>e(z)[Z+3].pathPrefix=u,"allow-input":le,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(G,{span:"7"},{default:l(()=>[_("span",Ii,i(e(a)("contentParam")),1),t(w,{value:e(z)[Z+3].contentParam,"onUpdate:value":u=>e(z)[Z+3].contentParam=u,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(G,{span:"7"},{default:l(()=>[_("span",$i,i(e(a)("contentPage")),1),t(W,{value:e(z)[Z+3].pageId,"onUpdate:value":u=>e(z)[Z+3].pageId=u,options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":y,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):_e("",!0)],64)}}}),Ti={class:"w-full"},zi=Be({__name:"Campaign",setup(de){const a=st(),d=nt(),p=pt(),X=sa(),{displayFormErrors:ee,ckEditorToolbarItems:m}=Je(),{request:B}=Qe(),{t:$,locale:se}=He(),q=o(!1),K=o([]),Y=o([]),z=o([]),f=o([]),O=o(""),M=o(),F={pageSize:12,prefix:({itemCount:s})=>re("div",{class:"font-bold"},{default:()=>`${$("total")}: ${s}`})},j=[{title:$("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(s){return re("div",{},{default:()=>s.title})}},{title:$("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(s){return re("small",{},{default:()=>s.subject})}},{title:$("numberOfRecipients"),key:"recipients",width:200,render(s){return re("div",{},{default:()=>s.recipients.length})},sortOrder:!1,sorter:"default"},{title:$("updateAt"),key:"updatedAt",width:150,render(s){return re("div",{},{default:()=>Et(s.updatedAt,{locale:se.value,outPattern:"DD MMMM YYYY"})})}},{title:$("createdAt"),key:"createdAt",width:150,render(s){return re("div",{},{default:()=>Et(s.createdAt,{locale:se.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:M,placeholder:$("search"),value:O.value,onInput:s=>{O.value=s}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:175,render(s){return re("div",{class:"flex justify-end items-center w-full"},[re(Ve,{size:"small",type:"primary",title:$("history"),onClick:()=>{H.value=s,te.value=!0},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"mdi:history"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"info",title:$("launchCampaign"),onClick:()=>{const A=p.info({title:$("launchCampaign"),content:$("confirmLaunchCampaign",[s.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:$("yes"),negativeText:$("cancel"),onPositiveClick:async()=>{var Z,u,r,C,x,I,g;A.loading=!0;const T=await B({url:"/email",method:"post",data:{title:s.title,subject:s.subject,content:s.content,recipients:s.recipients.filter(h=>Xt.isEmail(h)),tags:[]}}),c=(Z=X.getSettingValue("phone","string"))==null?void 0:Z.split(",")[0],v=await B({url:"/sms",method:"post",data:{from:c.replace(/\s+/g,""),content:s.rawContent,recipients:s.recipients.filter(h=>!Xt.isEmail(h))}});if(T.failure&&T.error)switch((C=(r=(u=T.error)==null?void 0:u.response)==null?void 0:r.data)==null?void 0:C.errorCode){case et.FORM_INVALID_DATA:d.error($("invalidData"));break;default:d.error($("sendingFailed"))}else if(v.failure&&v.error)switch((g=(I=(x=v.error)==null?void 0:x.response)==null?void 0:I.data)==null?void 0:g.errorCode){case et.FORM_INVALID_DATA:d.error($("invalidData"));break;default:d.error($("sendingFailed"))}else{const h=s.history||[];h.push({id:ct(),date:Va(new Date,{locale:se.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+T.result.message+" Phone: "+v.result.message});const pe=await B({method:"put",url:`/newsletter/campaigns/${s.id}`,data:{history:h}});pe.success&&pe.result.data?(d.success($("success")),le()):d.error($("anErrorOccurred"))}A.loading=!1}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"mdi:send"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"warning",title:$("edit"),onClick:()=>{G(s)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Ve,{size:"small",type:"error",title:$("delete"),onClick:()=>{p.warning({title:$("confirm"),content:$("confirmDeleteCampaign"),positiveText:$("yes"),negativeText:$("no"),onPositiveClick:async()=>{(await B({method:"delete",url:`/newsletter/campaigns/${s.id}`})).success?(d.success($("success")),le()):d.error($("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],y=De(()=>{if(!O.value)return f.value;const s=f.value.filter(A=>A.title.toLowerCase().includes(O.value.toLowerCase())||A.subject.toLowerCase().includes(O.value.toLowerCase()));return M.value&&M.value.focus(),s}),le=async(s=!1)=>{q.value=!0;const A=await B({url:"/newsletter/campaigns"});if(A.success&&A.result&&(f.value=A.result.data),s){const T=await B({url:"/newsletter/emails"});T.success&&T.result&&(K.value=T.result.data);const c=await B({url:"/newsletter/phones"});c.success&&c.result&&(Y.value=c.result.data),z.value=[...K.value.map(v=>({recipient:v.email,type:"email"})),...Y.value.map(v=>({recipient:v.phone,type:"phone"}))]}q.value=!1};le(!0);const R=o(!1),L=o(!1),te=o(!1),H=o(null),U=o(null),V=o({title:"",subject:"",content:"",rawContent:"",recipients:[]}),w={title:[{required:!0,message:$("fillRequired")}],subject:[{required:!0,message:$("fillRequired")}],content:[{required:!0,message:$("fillRequired")}],rawContent:[{required:!0,message:$("fillRequired")}],recipients:[{required:!0,message:$("fillRequired")}]},G=s=>{H.value=be.cloneDeep(s),s?V.value=be.cloneDeep(s):V.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},L.value=!0},W=async()=>{var s;return(s=U.value)==null||s.validate(async A=>{var T,c,v,Z,u,r;if(!A)if(H.value)if(H.value.title!==V.value.title&&f.value.findIndex(C=>C.title==V.value.title)>-1)d.error($("sameCampaignTitleMessage"));else{a.start(),R.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},x=await B({method:"put",url:`/newsletter/campaigns/${H.value.id}`,data:C});x.success&&x.result.data&&(d.success($("success")),le()),R.value=!1,a.finish(),L.value=!1}else if(f.value.findIndex(C=>C.title==V.value.title)>-1)d.error($("sameCampaignTitleMessage"));else{a.start(),R.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},x=await B({method:"post",url:"/newsletter/campaigns",data:C});if(x.failure&&x.error)switch((v=(c=(T=x.error)==null?void 0:T.response)==null?void 0:c.data)==null?void 0:v.errorCode){case et.FORM_INVALID_DATA:ee((r=(u=(Z=x.error)==null?void 0:Z.response)==null?void 0:u.data)==null?void 0:r.data);break;default:d.error($("anErrorOccurred"))}else d.success($("success")),le();R.value=!1,a.finish(),L.value=!1}}),!1},ae=(s,A)=>be.isEqual(s.slice().sort(),A.slice().sort());return(s,A)=>{const T=Ct,c=gl,v=ft,Z=va,u=Yt,r=$t,C=mt,x=ut,I=Da,g=La,h=Pa,pe=It,ne=kt;return n(),D(me,null,[t(T,{to:"#alt-action"},{default:l(()=>[t(e(Ve),{type:"primary",onClick:A[0]||(A[0]=E=>G(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e($)("addCampaign")),1)]),_:1})]),_:1}),t(c,{columns:j,data:e(y),pagination:F,loading:e(q),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"]),t(x,{show:e(L),"onUpdate:show":A[9]||(A[9]=E=>Ie(L)?L.value=E:null),loading:e(R),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e($)("editCampaign"):e($)("addCampaign"),"positive-text":e($)("validate"),"negative-text":e($)("cancel"),onPositiveClick:W,onNegativeClick:A[10]||(A[10]=E=>L.value=!1)},{default:l(()=>[t(C,{ref_key:"formRef",ref:U,class:"mt-5",model:e(V),rules:w,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(v,{label:e($)("title"),path:"title"},{default:l(()=>[t(e(Ze),{value:e(V).title,"onUpdate:value":A[1]||(A[1]=E=>e(V).title=E),placeholder:e($)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(v,{label:e($)("subject"),path:"subject"},{default:l(()=>[t(e(Ze),{value:e(V).subject,"onUpdate:value":A[2]||(A[2]=E=>e(V).subject=E),placeholder:e($)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(v,{label:e($)("content"),path:"content"},{default:l(()=>[_("div",Ti,[t(Z,{modelValue:e(V).content,"onUpdate:modelValue":A[3]||(A[3]=E=>e(V).content=E),"toolbar-items":e(m),placeholder:e($)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(v,{label:e($)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Ze),{value:e(V).rawContent,"onUpdate:value":A[4]||(A[4]=E=>e(V).rawContent=E),placeholder:e($)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(v,{label:e($)("recipients"),path:"recipients"},{default:l(()=>[t(r,{value:e(V).recipients,"onUpdate:value":A[8]||(A[8]=E=>e(V).recipients=E),options:e(z),placeholder:e($)("recipients"),loading:e(q),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(u,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(V).recipients,e(z).filter(E=>E.type=="email").map(E=>E.recipient)),"onUpdate:checked":A[5]||(A[5]=E=>{E?e(V).recipients=e(z).filter(b=>b.type=="email").map(b=>b.recipient):e(V).recipients=e(V).recipients.filter(b=>!("_v"in s?s._v:e(Xt)).isEmail(b))})},{default:l(()=>[P(i(e($)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),A[12]||(A[12]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(V).recipients,e(z).filter(E=>E.type=="phone").map(E=>E.recipient)),"onUpdate:checked":A[6]||(A[6]=E=>{E?e(V).recipients=e(z).filter(b=>b.type=="phone").map(b=>b.recipient):e(V).recipients=e(V).recipients.filter(b=>("_v"in s?s._v:e(Xt)).isEmail(b))})},{default:l(()=>[P(i(e($)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),A[13]||(A[13]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(z).length&&e(V).recipients.length===e(z).length,"onUpdate:checked":A[7]||(A[7]=E=>{E?e(V).recipients=e(z).filter(b=>b.recipient).map(b=>b.recipient):e(V).recipients=[]})},{default:l(()=>[P(i(e($)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(x,{show:e(te),"onUpdate:show":A[11]||(A[11]=E=>Ie(te)?te.value=E:null),loading:e(R),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e($)("history")},{default:l(()=>{var E,b;return[(b=(E=e(H))==null?void 0:E.history)!=null&&b.length?(n(),S(pe,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(h,{hoverable:""},{default:l(()=>{var Q;return[(n(!0),D(me,null,Ne((Q=e(H))==null?void 0:Q.history.slice().reverse(),ke=>(n(),S(g,{key:ke.id},{default:l(()=>[t(I,{title:ke.date,"content-style":"margin-top: 10px;"},{default:l(()=>[P(i(ke.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),S(ne,{key:1,description:e($)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),Ui={id:"header-btn"},Si={key:1,id:"alt-action"},Mi={key:"contact-info"},Ai={class:"text-xs"},Ei={class:"text-xs"},Di={class:"text-xs"},Li={class:"text-xs"},Pi={class:"text-xs"},Ni={class:"text-xs"},Ri={class:"text-xs"},Oi={class:"flex items-center gap-2 w-full"},qi={key:"appearance"},Fi={class:"text-sm"},ji={class:"flex flex-col items-center justify-center text-gray-400"},Bi={class:"text-sm"},Ki={class:"flex flex-col items-center justify-center text-gray-400"},Yi={class:"text-sm"},Gi={class:"flex flex-col items-center justify-center text-gray-400"},Hi={class:"text-sm"},Wi={class:"flex flex-col items-center justify-center text-gray-400"},Ji={class:"text-sm"},Xi={class:"flex flex-col items-center justify-center text-gray-400"},Zi={class:"text-sm"},Qi={class:"flex flex-col items-center justify-center text-gray-400"},er={class:"text-sm"},tr={class:"text-sm"},lr={class:"flex flex-col items-center justify-center text-gray-400"},ar={class:"text-sm"},nr={class:"flex flex-col items-center justify-center text-gray-400"},sr={class:"text-sm"},or={class:"flex items-center justify-between"},ir={class:"font-bold"},rr={class:"flex items-center"},ur={class:"flex items-center justify-between"},dr={class:"font-bold"},cr={class:"flex items-center"},pr={class:"flex items-center justify-between"},fr={class:"font-bold"},mr={class:"flex items-center"},vr={key:"social-networks"},_r={class:"text-xs"},yr={key:"newsletter-email"},gr={key:"newsletter-phone"},br={key:"newsletter-campaign"},hr={key:"ads"},kr={key:"videos"},wr={key:"content-models"},xr={key:"menus"},Cr={key:"content-permalinks"},Ir={key:"page-sections"},$r=Be({name:Ta.CONTENT_MANAGEMENT.NAME}),Vr=Be({...$r,setup(de){wl(ye=>({d005cb5c:e(K)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],d=ye=>a.includes(ye),{t:p}=He(),X=Wa(),ee=pt(),m=nt(),B=st(),{request:$}=Qe(),{displayFormErrors:se,appPrimaryColor:q,appSecondaryColor:K,pickByTheme:Y,fileUrl:z,isLgScreen:f,isMdScreen:O,isSmScreen:M,isXlScreen:F,is2XlScreen:j,tr:y}=Je(),le=yt(),R=sa(),{pages:L}=je(We()),{loadPages:te,loadSections:H}=We(),U=vt("appConfig"),V=o(!1),w=o({name:"",icon:"",adminIcon:"",oneColorIcon:"",logo:"",adminLogo:"",oneColorLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),G=o(w.value),W=el("content-management",()=>({currentMenuItemKey:o("contact-info")}))(),ae=(ye,N)=>()=>re(ce,{color:W.currentMenuItemKey==N?"white":""},{default:()=>re(ge,{icon:ye})}),s=(ye,N)=>()=>re("span",{class:`${W.currentMenuItemKey==N?"text-white":""}`,id:be.camelCase(N)},{default:()=>ye}),A=De(()=>{const ye=[{label:s(p("contactInfo"),"contact-info"),key:"contact-info",icon:ae("carbon:identification","contact-info")},{label:s(p("appearance"),"appearance"),key:"appearance",icon:ae("carbon:color-palette","appearance")},{label:s(p("socialNetworks"),"social-networks"),key:"social-networks",icon:ae("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:s(p("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ae("carbon:at","newsletter-email")},{label:s(p("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ae("carbon:phone","newsletter-phone")},{label:s(p("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ae("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:s(p("ads"),"ads"),key:"ads",icon:ae("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:s(p("videos"),"videos"),key:"videos",icon:ae("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:s(p("menusManagement"),"menus"),key:"menus",icon:ae("carbon:menu","menus")},{label:s(p("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ae("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:s(p("contentModels"),"content-models"),key:"content-models",icon:ae("carbon:model-alt","content-models")},{label:s(p("pageSections"),"page-sections"),key:"page-sections",icon:ae("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const N of L.value)ye.push({label:s(`${p("page")} ${y(N.title)}`,`${N.slug}-page`),key:`${N.slug}-page`,icon:ae("carbon:document",`${N.slug}-page`)});return ye.push({key:"divider",type:"divider"},{label:s(p("addPage"),"add-new-page"),key:"add-new-page",icon:ae("carbon:add-alt","add-new-page")}),ye}),T=De(()=>be.isEqual(w.value,G.value)),c=De(()=>le.contentLayoutSize.height-200),v=De(()=>le.isLightTheme?"light":"dark"),Z=o(null),u={email:[{required:!1,message:p("fillRequired")},{trigger:["input"],validator(ye,N){return N&&!Xt.isEmail(N)?new Error(p("invalidEmail")):!0}}]},r=o();ht(()=>r.value,ye=>{w.value.additionalInfo=JSON.stringify(ye||"[]")},{deep:!0});const C=o(null),x={},I=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],g=o("logos"),h=o(!1),pe=async ye=>{switch(g.value){case"logos":w.value.logo=ye;break;case"icons":w.value.icon=ye;break;case"admin-logos":w.value.adminLogo=ye;break;case"admin-icons":w.value.adminIcon=ye;break;case"monochrome-logos":w.value.oneColorLogo=ye;break;case"monochrome-icons":w.value.oneColorIcon=ye;break;case"dark-backgrounds":w.value.adminAuthDarkBg=ye;break;case"light-backgrounds":w.value.adminAuthLightBg=ye;break}h.value=!1},ne={name:"",title:"",content:"",slug:""},E=o(!1),b=o(null),Q=o(ne),ke={title:[{required:!0,message:p("fillRequired")}]},he=o(null),Ue=ye=>{he.value=be.cloneDeep(ye),Q.value=be.cloneDeep(ye||ne),E.value=!0},Me=async()=>{var ye;return(ye=b.value)==null||ye.validate(async N=>{var $e,J,oe,ue,xe,Se,ze;if(!N){B.start(),V.value=!0;const Ee={title:Q.value.title};he.value||(Ee.name=be.startCase(be.camelCase(y(Q.value.title))).replace(/\s+/g,""));const qe=await $({method:he.value?"put":"post",url:he.value?`/pages/${he.value.slug}`:"/pages",data:Ee});if(qe.failure&&qe.error)switch((oe=(J=($e=qe.error)==null?void 0:$e.response)==null?void 0:J.data)==null?void 0:oe.errorCode){case et.FORM_INVALID_DATA:se((Se=(xe=(ue=qe.error)==null?void 0:ue.response)==null?void 0:xe.data)==null?void 0:Se.data);break;default:m.error(p("anErrorOccurred"))}else m.success(p("success")),te(),W.currentMenuItemKey=`${(ze=qe.result.data)==null?void 0:ze.slug}-page`,E.value=!1;V.value=!1,B.finish()}}),!1},fe=async(ye=!1)=>{var N;B.start(),V.value=!0,te(),ye&&H(),await R.loadInformation(),(N=R.items)==null||N.forEach($e=>{w.value[$e.key]!=null&&(w.value[$e.key]=$e.value)}),G.value=be.cloneDeep(w.value);try{r.value=JSON.parse(w.value.additionalInfo||"[]")}catch{r.value=[]}V.value=!1,B.finish()};fe(!0),Il(()=>{X.params.key&&d(X.params.key)&&(W.currentMenuItemKey=X.params.key)});const Pe=async()=>{V.value=!0;const ye=await $({url:"/app-information",method:"put",data:w.value});ye.success&&ye.result?m.success(p("success")):m.error(p("unableToUpdateSettings")),await fe()},we=["contact-info","appearance","social-networks"];ht(()=>W.currentMenuItemKey,(ye,N)=>{ye==="add-new-page"?(W.currentMenuItemKey=N,Ue(null)):we.includes(N)&&!we.includes(ye)&&(T.value||ee.warning({title:p("confirm"),content:p("marketInfoDiscardChangesConfirm"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{W.currentMenuItemKey=N}}))});const ie=o();return ht(()=>[O.value,M.value,f.value,F.value],([ye,N,$e,J])=>{ie.value=ye||N||$e||J,setTimeout(()=>{ie.value=void 0},500)},{immediate:!0}),(ye,N)=>{var Ut;const $e=Ve,J=it,oe=Na,ue=Ra,xe=Ze,Se=ft,ze=qt,Ee=bt,qe=gt,tt=ua,wt=mt,Le=lt,Xe=pa,Ke=Pt,ve=Tt,Ye=Oa,Vt=ka,Nt=Bt,Rt=ut;return n(),D(me,null,[t(Vt,null,{"header-extra":l(()=>[t(J,null,{default:l(()=>[_("div",Ui,[we.includes(e(W).currentMenuItemKey)?(n(),S($e,{key:0,loading:e(V),disabled:e(T),type:"primary",onClick:Pe},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])):(n(),D("div",Si))])]),_:1})]),default:l(()=>[t(Le,{embedded:""},{default:l(()=>[t(Ye,{style:Oe(`height: ${e(c)}px`)},{default:l(()=>[t(Ye,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t(ue,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(ie),"default-collapsed":!e(j),"collapsed-width":64,"native-scrollbar":!1,width:e(j)?300:275},{default:l(()=>[t(oe,{value:e(W).currentMenuItemKey,"onUpdate:value":N[0]||(N[0]=Te=>e(W).currentMenuItemKey=Te),"collapsed-width":64,"collapsed-icon-size":22,options:e(A)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ye,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Ca,{name:"slide-fade"},{default:l(()=>[il(_("section",Mi,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(wt,{ref_key:"contactInfoFormRef",ref:Z,model:e(w),rules:u,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{path:"name"},{label:l(()=>[_("b",Ai,i(e(p)("websiteName")),1)]),default:l(()=>[t(xe,{value:e(w).name,"onUpdate:value":N[1]||(N[1]=Te=>e(w).name=Te),placeholder:e(p)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Ee,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"email"},{label:l(()=>[_("b",Ei,i(e(p)("email")),1)]),default:l(()=>[t(xe,{value:e(w).email,"onUpdate:value":N[2]||(N[2]=Te=>e(w).email=Te),placeholder:e(p)("email"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(ze,{span:12,path:"phone"},{label:l(()=>[_("b",Di,i(e(p)("phone")),1)]),default:l(()=>[t(xe,{value:e(w).phone,"onUpdate:value":N[3]||(N[3]=Te=>e(w).phone=Te),placeholder:e(p)("phone"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"address"},{label:l(()=>[_("span",Li,[_("b",null,i(e(p)("address")),1)])]),default:l(()=>[t(xe,{value:e(w).address,"onUpdate:value":N[4]||(N[4]=Te=>e(w).address=Te),placeholder:e(p)("address"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ee,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"postalCode"},{label:l(()=>[_("b",Pi,i(e(p)("postalCode")),1)]),default:l(()=>[t(xe,{value:e(w).postalCode,"onUpdate:value":N[5]||(N[5]=Te=>e(w).postalCode=Te),placeholder:e(p)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"description"},{label:l(()=>[_("b",Ni,i(e(p)("description")),1)]),default:l(()=>[t(qe,{modelValue:e(w).description,"onUpdate:modelValue":N[6]||(N[6]=Te=>e(w).description=Te),placeholder:e(p)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Se,{path:"additionalInfo"},{label:l(()=>[_("b",Ri,i(e(p)("additionalInfo")),1)]),default:l(()=>[t(tt,{value:e(r),"onUpdate:value":N[7]||(N[7]=Te=>Ie(r)?r.value=Te:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[P(i(e(p)("add")),1)]),default:l(({value:Te})=>[_("div",Oi,[t(xe,{value:Te.name,"onUpdate:value":dt=>Te.name=dt,placeholder:e(p)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(xe,{value:Te.content,"onUpdate:value":dt=>Te.content=dt,placeholder:e(p)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[pl,e(W).currentMenuItemKey==="contact-info"]]),il(_("section",qi,[t(Le,{embedded:""},{default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Fi,i(e(p)("websiteLogo")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).logo?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).logo),onClick:N[8]||(N[8]=()=>{g.value="logos",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[9]||(N[9]=()=>{g.value="logos",h.value=!0})},[_("div",ji,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).logo?(n(),S($e,{key:2,quaternary:"",onClick:N[10]||(N[10]=()=>e(w).logo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Bi,i(e(p)("websiteIcon")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).icon?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).icon),onClick:N[11]||(N[11]=()=>{g.value="icons",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[12]||(N[12]=()=>{g.value="icons",h.value=!0})},[_("div",Ki,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).icon?(n(),S($e,{key:2,quaternary:"",onClick:N[13]||(N[13]=()=>e(w).icon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Yi,i(e(p)("adminLogo")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminLogo?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).adminLogo),onClick:N[14]||(N[14]=()=>{g.value="admin-logos",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[15]||(N[15]=()=>{g.value="admin-logos",h.value=!0})},[_("div",Gi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).adminLogo?(n(),S($e,{key:2,quaternary:"",onClick:N[16]||(N[16]=()=>e(w).adminLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Hi,i(e(p)("adminIcon")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminIcon?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).adminIcon),onClick:N[17]||(N[17]=()=>{g.value="admin-icons",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[18]||(N[18]=()=>{g.value="admin-icons",h.value=!0})},[_("div",Wi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).adminIcon?(n(),S($e,{key:2,quaternary:"",onClick:N[19]||(N[19]=()=>e(w).adminIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ji,i(e(p)("websiteLogoMonochrome")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorLogo?(n(),S(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).oneColorLogo),onClick:N[20]||(N[20]=()=>{g.value="monochrome-logos",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[21]||(N[21]=()=>{g.value="monochrome-logos",h.value=!0})},[_("div",Xi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).oneColorLogo?(n(),S($e,{key:2,quaternary:"",onClick:N[22]||(N[22]=()=>e(w).oneColorLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Zi,i(e(p)("websiteIconMonochrome")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorIcon?(n(),S(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).oneColorIcon),onClick:N[23]||(N[23]=()=>{g.value="monochrome-icons",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[24]||(N[24]=()=>{g.value="monochrome-icons",h.value=!0})},[_("div",Qi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).oneColorIcon?(n(),S($e,{key:2,quaternary:"",onClick:N[25]||(N[25]=()=>e(w).oneColorIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{segmented:"",size:"small"},{header:l(()=>[_("span",er,i(e(p)("adminAuthPagesBg")),1)]),default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",tr,i(e(p)("lightMode")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthLightBg?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).adminAuthLightBg),onClick:N[26]||(N[26]=()=>{g.value="light-backgrounds",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[27]||(N[27]=()=>{g.value="light-backgrounds",h.value=!0})},[_("div",lr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).adminAuthLightBg?(n(),S($e,{key:2,quaternary:"",onClick:N[28]||(N[28]=()=>e(w).adminAuthLightBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",ar,i(e(p)("darkMode")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthDarkBg?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(q),"white")),size:125,src:e(z)(e(w).adminAuthDarkBg),onClick:N[29]||(N[29]=()=>{g.value="dark-backgrounds",h.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(q),"white")}; width: 125px; height: 125px`),onClick:N[30]||(N[30]=()=>{g.value="dark-backgrounds",h.value=!0})},[_("div",nr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,i(e(p)("import")),1)])],4)),e(w).adminAuthDarkBg?(n(),S($e,{key:2,quaternary:"",onClick:N[31]||(N[31]=()=>e(w).adminAuthDarkBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[_("span",sr,i(e(p)("adminColors")),1)]),default:l(()=>[t(Ee,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Ke,null,{default:l(()=>[_("div",or,[_("span",ir,i(e(p)("baseColor")),1),_("div",rr,[e(w).primaryColor?(n(),D(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[32]||(N[32]=Te=>e(w).primaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(Zt),{value:e(w).primaryColor,"onUpdate:value":N[33]||(N[33]=Te=>e(w).primaryColor=Te),class:"cursor-pointer",theme:e(v),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Ke,null,{default:l(()=>[_("div",ur,[_("span",dr,i(e(p)("secondaryColor")),1),_("div",cr,[e(w).secondaryColor?(n(),D(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[34]||(N[34]=Te=>e(w).secondaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(Zt),{value:e(w).secondaryColor,"onUpdate:value":N[35]||(N[35]=Te=>e(w).secondaryColor=Te),class:"cursor-pointer",theme:e(v),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Ke,null,{default:l(()=>[_("div",pr,[_("span",fr,i(e(p)("tertiaryColor")),1),_("div",mr,[e(w).accentColor?(n(),D(me,{key:0},[t($e,{text:"",type:"error",style:{"font-size":"21px"},onClick:N[36]||(N[36]=Te=>e(w).accentColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(Zt),{value:e(w).accentColor,"onUpdate:value":N[37]||(N[37]=Te=>e(w).accentColor=Te),class:"cursor-pointer",theme:e(v),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[pl,e(W).currentMenuItemKey==="appearance"]]),il(_("section",vr,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(wt,{ref_key:"socialNetworksFormRef",ref:C,model:e(w),rules:x,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"x-gap":"12",span:24},{default:l(()=>[(n(),D(me,null,Ne(I,Te=>t(ze,{key:Te.name,span:12,path:Te.name},{label:l(()=>[_("b",_r,i(e(p)(Te.name)),1)]),default:l(()=>[t(xe,{value:e(w)[Te.name],"onUpdate:value":dt=>e(w)[Te.name]=dt,placeholder:e(p)(Te.name),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:Te.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[pl,e(W).currentMenuItemKey==="social-networks"]]),e(W).currentMenuItemKey==="newsletter-email"?(n(),D("section",yr,[t(Po)])):_e("",!0),e(W).currentMenuItemKey==="newsletter-phone"?(n(),D("section",gr,[t(Ro)])):_e("",!0),e(W).currentMenuItemKey==="newsletter-campaign"?(n(),D("section",br,[t(zi)])):_e("",!0),e(W).currentMenuItemKey==="ads"?(n(),D("section",hr,[t(on)])):_e("",!0),e(W).currentMenuItemKey==="videos"?(n(),D("section",kr,[t(so)])):_e("",!0),e(W).currentMenuItemKey==="content-models"?(n(),D("section",wr,[t(ri)])):_e("",!0),e(W).currentMenuItemKey==="menus"?(n(),D("section",xr,[t(Os)])):_e("",!0),e(W).currentMenuItemKey==="content-permalinks"?(n(),D("section",Cr,[t(Vi)])):_e("",!0),e(W).currentMenuItemKey==="page-sections"?(n(),D("section",Ir,[t(Eo)])):_e("",!0),(n(!0),D(me,null,Ne(e(L),(Te,dt)=>(n(),D(me,{key:`${Te.slug}-page`},[e(W).currentMenuItemKey===`${Te.slug}-page`?(n(),D("section",{key:`${Te.slug}-page`},[t(ns,{slug:Te.slug,"open-form-modal":Ue,onDelete:()=>{e(W).currentMenuItemKey=e(L).length>1?`${e(L)[dt-1].slug}-page`:a[0],e(te)()}},null,8,["slug","onDelete"])])):_e("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Nt,{show:e(h),"onUpdate:show":N[38]||(N[38]=Te=>Ie(h)?h.value=Te:null),title:e(p)("selectImage"),"upload-config":{folder:e(g),limit:0,maxSize:0,baseUrl:((Ut=e(U))==null?void 0:Ut.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe},null,8,["show","title","upload-config"]),t(Rt,{show:e(E),"onUpdate:show":N[40]||(N[40]=Te=>Ie(E)?E.value=Te:null),loading:e(V),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(he)?e(p)("editPage"):e(p)("addPage"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:Me,onNegativeClick:N[41]||(N[41]=Te=>E.value=!1)},{default:l(()=>[t(wt,{ref_key:"addPageFormRef",ref:b,model:e(Q),rules:ke,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(p)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(qe,{modelValue:e(Q).title,"onUpdate:modelValue":N[39]||(N[39]=Te=>e(Q).title=Te),placeholder:e(p)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:Ia(Me,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const Yd=zt(Vr,[["__scopeId","data-v-9b4bc774"]]);export{Yd as default};
