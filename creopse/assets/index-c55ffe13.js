import{_ as M}from"./AuthLayout-1372a2d0.js";import{u as $,a as F,b as j,d as z,c as Q,R as f,g as W,_ as Y,e as J}from"./index-b41c7da9.js";import{_ as K,a as X}from"./PhoneAuth.vue_vue_type_script_setup_true_lang-d07ba517.js";import{v as Z}from"./vue_runtime-dom-c0cb2070.js";import{p as ee}from"./password-strength-options-220cc0dc.js";import{e as te}from"./check-password-strength-48654609.js";import{R as E}from"./response-error-code-87d1097e.js";import{u as oe}from"./vue-router-e670704e.js";import{_ as re}from"./validator-c0254ba9.js";import{d as D,w as se,o as ae,P as ie,aO as a,Y as s,a as u,v as le,l as R,Q as ne}from"./vue_runtime-core-4f5fb440.js";import{u as pe}from"./vue-i18n-84a05dd5.js";import{b as me,E as ue,H as de,I as ce,F as _e,_ as fe,O as we,G as ge}from"./naive-ui-17a84883.js";import{r as h,u as e}from"./vue_reactivity-852d8377.js";import{t as b}from"./vue_shared-7dcc3b7f.js";import"./iconify_vue-6750bec6.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./fawmi_vue-google-maps-52673af8.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-a9971f22.js";import"./pinia-5dd13ed8.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-ce681755.js";import"./vueuse_core-a611fd48.js";import"./vueuse_shared-5de4c6d8.js";import"./parse-domain-15b982e1.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./vue3-google-login-7712408e.js";import"./vue-draggable-next-d31a77b2.js";import"./vue-recaptcha-486cc690.js";import"./p-defer-64bd7c04.js";import"./defu-573334b8.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./VueTelInputWrapper-26bf9be6.js";import"./vue-timer-hook-0366d26a.js";import"./libphonenumber-js-f65e98d1.js";const ve={class:"container h-full"},he={class:"flex justify-center items-center flex-wrap h-full g-6 text-gray-800"},be={class:"md:w-8/12 lg:w-5/12 xl:w-4/12 2xl:w-3.5/12 sm:w-full"},ye={size:"small",class:"w-full"},Ae={class:"flex justify-center mb-8"},ke=["src","alt"],Ce={class:"mt-2"},Re=D({name:f.REGISTER.NAME}),eo=D({...Re,setup(Se){const{t}=pe(),w=oe(),y=me(),{request:P}=J(),{displayFormErrors:q,logo:x}=$(),{userHasSuperAdminRole:I}=F(),{defaultPrefs:N}=j(),A=z(),d=Q(),k=h(!1),S=h(null),r=h({lastname:"",firstname:"",email:"",password:"",passwordConfirmation:""}),H={lastname:[{required:!0,message:t("fillRequired")}],firstname:[{required:!0,message:t("fillRequired")}],email:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(n,o){return o&&!re.isEmail(o)?new Error(t("invalidEmail")):!0}}],password:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(n,o){return o&&["too-weak"].includes(te.passwordStrength(o,ee).value)?new Error(t("passwordTooWeak")):!0}}],passwordConfirmation:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(n,o){return o&&o!==r.value.password?new Error(t("nonCompliantPassword")):!0}}]},V=async n=>{var o;n.preventDefault(),(o=S.value)==null||o.validate(async p=>{var m,c,g,_,v,C;if(p)y.error(t("invalidForm"));else{k.value=!0,d.userData=null;const l=await P({url:"/auth/register",method:"post",data:{...r.value,preferences:N.value}});if(l.failure&&l.error)switch((g=(c=(m=l.error)==null?void 0:m.response)==null?void 0:c.data)==null?void 0:g.errorCode){case E.AUTH_MISSING_DATA:y.error(t("missingData"));break;case E.FORM_INVALID_DATA:q((C=(v=(_=l.error)==null?void 0:_.response)==null?void 0:v.data)==null?void 0:C.data);break;default:y.error(t("registrationNotSuccessful"))}else l.success&&l.result?(d.userData=l.result.data.user,d.accessToken=l.result.data.accessToken,d.accessTokenDate=W()):w.replace(f.LOGIN.PATH),r.value={lastname:"",firstname:"",email:"",password:"",passwordConfirmation:""};k.value=!1}})},O="Creopse";se(()=>d.isUserConnected,n=>{n&&(I()&&A.initDefaultSettings(),w.replace(f.HOME.PATH))},{immediate:!0});const U=A.getSettingValue("disableInstaller","boolean");A.getSettingValue("allowRegistration","boolean")||w.replace(f.LOGIN.PATH);const G=h(!0);return(n,o)=>{const p=ue,m=de,c=ce,g=_e,_=fe,v=we,C=X,l=K,L=ge,T=Y,B=M;return ae(),ie(B,{"display-server-alerts":!e(U)},{default:a(()=>[s(T,{name:"slide-fade",appear:""},{default:a(()=>[u("div",ve,[u("div",he,[u("div",be,[s(T,{appear:""},{default:a(()=>[le(u("div",ye,[u("div",Ae,[u("img",{src:e(x),class:"w-54",alt:e(O)},null,8,ke)]),s(L,{ref_key:"formRef",ref:S,model:e(r),rules:H,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:a(()=>[s(c,{"x-gap":"12",span:24},{default:a(()=>[s(m,{span:12,label:e(t)("lastname"),path:"lastname"},{default:a(()=>[s(p,{value:e(r).lastname,"onUpdate:value":o[0]||(o[0]=i=>e(r).lastname=i),placeholder:e(t)("lastname"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(m,{span:12,label:e(t)("firstname_s"),path:"firstname"},{default:a(()=>[s(p,{value:e(r).firstname,"onUpdate:value":o[1]||(o[1]=i=>e(r).firstname=i),placeholder:e(t)("firstname_s"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),s(g,{label:e(t)("addressEmail"),path:"email"},{default:a(()=>[s(p,{value:e(r).email,"onUpdate:value":o[2]||(o[2]=i=>e(r).email=i),placeholder:e(t)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(c,{"x-gap":"12",span:24},{default:a(()=>[s(m,{span:12,label:e(t)("password"),path:"password"},{default:a(()=>[s(p,{value:e(r).password,"onUpdate:value":o[3]||(o[3]=i=>e(r).password=i),placeholder:e(t)("password"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(m,{span:12,label:e(t)("confirmPassword"),path:"passwordConfirmation"},{default:a(()=>[s(p,{value:e(r).passwordConfirmation,"onUpdate:value":o[4]||(o[4]=i=>e(r).passwordConfirmation=i),placeholder:e(t)("confirmPassword"),disabled:!e(r).password,"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),s(_,{type:"primary",loading:e(k),disabled:!e(r).lastname||!e(r).firstname||!e(r).email||!e(r).password||!e(r).passwordConfirmation,block:"",onClick:V},{default:a(()=>[R(b(e(t)("validate")),1)]),_:1},8,["loading","disabled"]),s(v,{ref:"divider",class:"!my-2"},{default:a(()=>[R(b(e(t)("or")),1)]),_:1},512),ne("",!0),s(l),u("div",Ce,[s(_,{block:"",tertiary:"",type:"default",onClick:o[6]||(o[6]=i=>e(w).push(e(f).LOGIN.PATH))},{default:a(()=>[R(b(e(t)("alreadyHaveAccount"))+" "+b(e(t)("toLogin")),1)]),_:1})])]),_:1},8,["model"])],512),[[Z,e(G)]])]),_:1})])])])]),_:1})]),_:1},8,["display-server-alerts"])}}});export{eo as default};
