var y={},E;function Z(){if(E)return y;E=1;var f=f||{};f.stringify=function(){var r={"visit_linear-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return r.visit_gradient(t)},"visit_radial-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return r.visit_gradient(t)},visit_gradient:function(t){var n=r.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+r.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,l=r.visit(t.at),v=r.visit(t.style);return v&&(n+=" "+v),l&&(n+=" at "+l),n},"visit_default-radial":function(t){var n="",l=r.visit(t.at);return l&&(n+=l),n},"visit_extent-keyword":function(t){var n=t.value,l=r.visit(t.at);return l&&(n+=" at "+l),n},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return r.visit(t.value.x)+" "+r.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_calc:function(t){return"calc("+t.value+")"},visit_literal:function(t){return r.visit_color(t.value,t)},visit_hex:function(t){return r.visit_color("#"+t.value,t)},visit_rgb:function(t){return r.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return r.visit_color("rgba("+t.value.join(", ")+")",t)},visit_hsl:function(t){return r.visit_color("hsl("+t.value[0]+", "+t.value[1]+"%, "+t.value[2]+"%)",t)},visit_hsla:function(t){return r.visit_color("hsla("+t.value[0]+", "+t.value[1]+"%, "+t.value[2]+"%, "+t.value[3]+")",t)},visit_var:function(t){return r.visit_color("var("+t.value+")",t)},visit_color:function(t,n){var l=t,v=r.visit(n.length);return v&&(l+=" "+v),l},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var n="",l=t.length;return t.forEach(function(v,_){n+=r.visit(v),_<l-1&&(n+=", ")}),n},visit_object:function(t){return t.width&&t.height?r.visit(t.width)+" "+r.visit(t.height):""},visit:function(t){if(!t)return"";if(t instanceof Array)return r.visit_array(t);if(typeof t=="object"&&!t.type)return r.visit_object(t);if(t.type){var n=r["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return r.visit(t)}}();var f=f||{};return f.parse=function(){var r={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,radianValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))rad/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,varColor:/^var/i,calcValue:/^calc/i,variableName:/^(--[a-zA-Z0-9-,\s\#]+)/,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,hslColor:/^hsl/i,hslaColor:/^hsla/i},t="";function n(i){var e=new Error(t+": "+i);throw e.source=t,e}function l(){var i=v();return t.length>0&&n("Invalid input not EOF"),i}function v(){return d(_)}function _(){return p("linear-gradient",r.linearGradient,V)||p("repeating-linear-gradient",r.repeatingLinearGradient,V)||p("radial-gradient",r.radialGradient,k)||p("repeating-radial-gradient",r.repeatingRadialGradient,k)}function p(i,e,a){return h(e,function(u){var c=a();return c&&(o(r.comma)||n("Missing comma before color stops")),{type:i,orientation:c,colorStops:d(R)}})}function h(i,e){var a=o(i);if(a){o(r.startCall)||n("Missing (");var u=e(a);return o(r.endCall)||n("Missing )"),u}}function V(){var i=O();if(i)return i;var e=s("position-keyword",r.positionKeywords,1);return e?{type:"directional",value:e.value}:S()}function O(){return s("directional",r.sideOrCorner,1)}function S(){return s("angular",r.angleValue,1)||s("angular",r.radianValue,1)}function k(){var i,e=G(),a;return e&&(i=[],i.push(e),a=t,o(r.comma)&&(e=G(),e?i.push(e):t=a)),i}function G(){var i=A()||z();if(i)i.at=b();else{var e=C();if(e){i=e;var a=b();a&&(i.at=a)}else{var u=b();if(u)i={type:"default-radial",at:u};else{var c=x();c&&(i={type:"default-radial",at:c})}}}return i}function A(){var i=s("shape",/^(circle)/i,0);return i&&(i.style=L()||C()),i}function z(){var i=s("shape",/^(ellipse)/i,0);return i&&(i.style=x()||m()||C()),i}function C(){return s("extent-keyword",r.extentKeywords,1)}function b(){if(s("position",/^at/,0)){var i=x();return i||n("Missing positioning value"),i}}function x(){var i=K();if(i.x||i.y)return{type:"position",value:i}}function K(){return{x:m(),y:m()}}function d(i){var e=i(),a=[];if(e)for(a.push(e);o(r.comma);)e=i(),e?a.push(e):n("One extra comma");return a}function R(){var i=H();return i||n("Expected color definition"),i.length=m(),i}function H(){return N()||B()||q()||P()||D()||j()||M()}function M(){return s("literal",r.literalColor,0)}function N(){return s("hex",r.hexColor,1)}function D(){return h(r.rgbColor,function(){return{type:"rgb",value:d(g)}})}function P(){return h(r.rgbaColor,function(){return{type:"rgba",value:d(g)}})}function j(){return h(r.varColor,function(){return{type:"var",value:F()}})}function q(){return h(r.hslColor,function(){var i=o(r.percentageValue);i&&n("HSL hue value must be a number in degrees (0-360) or normalized (-360 to 360), not a percentage");var e=g();o(r.comma);var a=o(r.percentageValue),u=a?a[1]:null;o(r.comma),a=o(r.percentageValue);var c=a?a[1]:null;return(!u||!c)&&n("Expected percentage value for saturation and lightness in HSL"),{type:"hsl",value:[e,u,c]}})}function B(){return h(r.hslaColor,function(){var i=g();o(r.comma);var e=o(r.percentageValue),a=e?e[1]:null;o(r.comma),e=o(r.percentageValue);var u=e?e[1]:null;o(r.comma);var c=g();return(!a||!u)&&n("Expected percentage value for saturation and lightness in HSLA"),{type:"hsla",value:[i,a,u,c]}})}function F(){return o(r.variableName)[1]}function g(){return o(r.number)[1]}function m(){return s("%",r.percentageValue,1)||I()||T()||L()}function I(){return s("position-keyword",r.positionKeywords,1)}function T(){return h(r.calcValue,function(){for(var i=1,e=0;i>0&&e<t.length;){var a=t.charAt(e);a==="("?i++:a===")"&&i--,e++}i>0&&n("Missing closing parenthesis in calc() expression");var u=t.substring(0,e-1);return w(e-1),{type:"calc",value:u}})}function L(){return s("px",r.pixelValue,1)||s("em",r.emValue,1)}function s(i,e,a){var u=o(e);if(u)return{type:i,value:u[a]}}function o(i){var e,a;return a=/^[\n\r\t\s]+/.exec(t),a&&w(a[0].length),e=i.exec(t),e&&w(e[0].length),e}function w(i){t=t.substr(i)}return function(i){return t=i.toString().trim(),t.endsWith(";")&&(t=t.slice(0,-1)),l()}}(),y.parse=f.parse,y.stringify=f.stringify,y}var W=Z();export{W as n};
