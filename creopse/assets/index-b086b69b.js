import{_ as It,a as Kt,b as za}from"./index.vue_vue_type_script_setup_true_lang-1b7b600b.js";import{_ as Ja}from"./PageLayout.vue_vue_type_script_setup_true_lang-889f8007.js";import{_ as bt}from"./I18nInput-a3772079.js";import{f as Vl,p as ot,o as Xa,v as fl,T as Za,a as Qa,w as en}from"./vue_runtime-dom-5ad5ecb0.js";import{e as Ze,u as Je,f as yt,r as Dt,p as Xt,q as Ia,s as We,i as Zt,t as Ua,_ as Lt,v as Ma,w as tn,x as ml,h as Sa,j as ln,R as an}from"./index-920c76d4.js";import{I as ge}from"./iconify_vue-46af0b81.js";import{_ as yl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-572d3081.js";import{R as Qe}from"./response-error-code-87d1097e.js";import{d as ll,a as je}from"./pinia-a2cac08c.js";import{_ as Ce}from"./lodash-a9971f22.js";import{c as ct,b as nt,a as st,_ as ze,g as it,Z as Pt,V as zt,N as pe,L as lt,ag as $t,a2 as wt,P as Yt,a4 as rt,E as Xe,H as Ft,I as ht,a8 as gl,a9 as bl,ah as nn,F as pt,G as ft,ab as tl,a7 as hl,aa as Aa,j as Vt,R as Nt,a5 as kl,ac as Ea,a3 as Tl,M as Gt,ai as zl,aj as sn,$ as al,a0 as nl,W as wl,U as Da,a1 as sl,ak as on,al as La,k as rn,am as Pa,an as Na,ao as un,O as Oa,J as dn,ap as Ra,e as qa,aq as cn,h as pn,n as fn,o as mn}from"./naive-ui-ab0dda7d.js";import{d as Be,aF as _t,o as n,c as U,Y as t,aO as l,l as T,P as x,F as ye,ar as Oe,a as _,Q as he,i as vt,h as re,p as Le,ag as Ht,as as xl,W as Fa,w as kt,aH as vn,v as dl,r as _n,b as Ul,s as St,e as ja}from"./vue_runtime-core-273b5003.js";import{u as He}from"./vue-i18n-0da1582b.js";import{r,u as e,c as Ve,a as qt}from"./vue_reactivity-852d8377.js";import{t as o,a as Ye,n as qe}from"./vue_shared-7dcc3b7f.js";import{_ as Ot}from"./fawmi_vue-google-maps-439c501d.js";import{o as yn,a as gn}from"./vueuse_core-d5cd9503.js";import{s as bn}from"./vue-virtual-scroller-9fb1e6c4.js";import{i as $a}from"./is-svg-36c6b3ab.js";import{_ as Ba}from"./index.vue_vue_type_style_index_0_lang-261c1c96.js";import{M as el}from"./vue-pick-colors-7b2d784c.js";import{v as dt}from"./uuid-cf522c50.js";import{s as Ka}from"./slugify-ce681755.js";import{_ as Ya}from"./UploadExcel-73dc99b2.js";import{_ as Qt}from"./validator-c0254ba9.js";import{_ as hn}from"./VueTelInputWrapper-e6ad68aa.js";import{i as kn}from"./libphonenumber-js-cdb4849e.js";import{a as wn}from"./vue-router-c3388b6d.js";import"./media-library-4ac60013.js";import"./vue-advanced-cropper-45f4d00f.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-489ba3ba.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-0787c3d6.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-df7eee76.js";import"./vue-2044cde0.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-417126f1.js";import"./pinia_colada-2d4f4a8d.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-a68ee547.js";import"./vue3-map-chart-668e2d48.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-d047f964.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-68d47bbf.js";import"./vooks-6944b357.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-835eca33.js";import"./vue-resize-f5358a64.js";import"./vue-observe-visibility-1f4537f4.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-6f0d8da7.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-40fbe54c.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-284e336f.js";import"./popperjs_core-f3391c26.js";import"./xlsx-83e6f69b.js";var Et=(fe=>(fe.IMAGE="image",fe.VIDEO="video",fe))(Et||{});const vl=ll("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:fe}=Ze(),a=await fe({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),xn={class:"flex items-center justify-between"},Cn={class:"flex flex-col"},In={class:"text-sm font-bold"},$n={class:"text-xs font-normal"},Vn={key:0,class:"text-xs font-bold"},Tn=Be({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(fe){const{t:a}=He(),{request:c}=Ze(),{pickByTheme:m,displayFormErrors:Z,formatKey:Q}=Je(),b=_t(fe,"show"),{adIdentifiers:R}=je(vl()),{loadAdIdentifiers:z}=vl(),{isLightTheme:ue}=je(yt()),L=r(!1),K=async()=>{L.value=!0,await z(),L.value=!1};K();const N=ct(),S=nt(),v=st(),ee=r(!1),P=r(!1),G=r(null),W=r(null),p=r({id:"",reusable:!1,contentType:Et.IMAGE,contentSize:"",params:[]}),ie={id:[{required:!0,message:a("fillRequired")}]},B=Y=>{G.value=Ce.cloneDeep(Y),p.value=Ce.cloneDeep(Y||{id:"",reusable:!1,contentType:Et.IMAGE,contentSize:"",params:[]}),P.value=!0},D=async()=>{var Y;return(Y=W.value)==null||Y.validate(async E=>{var C,g,O,j,ae,i;if(!E){v.start(),ee.value=!0;const M={id:p.value.id,reusable:p.value.reusable,contentType:p.value.contentType,contentSize:p.value.contentSize,params:p.value.params},F=await c({method:G.value?"put":"post",url:G.value?`/ad-identifiers/${G.value.id}`:"/ad-identifiers",data:M});if(F.failure&&F.error)switch((O=(g=(C=F.error)==null?void 0:C.response)==null?void 0:g.data)==null?void 0:O.errorCode){case Qe.FORM_INVALID_DATA:Z((i=(ae=(j=F.error)==null?void 0:j.response)==null?void 0:ae.data)==null?void 0:i.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),K(),P.value=!1;ee.value=!1,v.finish()}}),!1},te=async Y=>{N.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/ad-identifiers/${Y.id}`})).success?(S.success(a("success")),K()):S.error(a("anErrorOccurred"))}})};return(Y,E)=>{const C=ge,g=ze,O=it,j=Pt,ae=zt,i=pe,M=lt,F=$t,f=wt,$=Yt,H=rt,u=Xe,d=Ft,V=ht,w=gl,I=bl,y=nn,k=pt,_e=ft;return n(),U(ye,null,[t(H,{show:b.value,"onUpdate:show":E[2]||(E[2]=se=>b.value=se),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(O,{align:"center"},{default:l(()=>[t(g,{size:"small",type:"primary",disabled:e(L),onClick:E[0]||(E[0]=se=>B(null))},{default:l(()=>[t(C,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(g,{size:"small",type:"error",disabled:e(L),onClick:E[1]||(E[1]=se=>b.value=!1)},{default:l(()=>[t(C,{icon:"carbon:close",class:"mr-1"}),T(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t($,{show:e(L)},{default:l(()=>[e(R).length?(n(),x(F,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e(R),se=>(n(),x(M,{key:se.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",xn,[_("div",Cn,[_("span",In,o(se.id),1),_("div",null,[_("span",$n,o(se.contentType===e(Et).IMAGE?e(a)("image"):e(a)("video")),1),se.contentSize?(n(),U("span",Vn," Â ("+o(se.contentSize)+") ",1)):he("",!0)])]),t(O,null,{default:l(()=>[t(j,{size:"medium",bordered:!1,type:se.reusable?"info":"warning"},{default:l(()=>[T(o(se.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ae,{vertical:"",class:Ye(["!mx-0",e(m)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(g,{size:"small",type:"warning",secondary:e(ue),onClick:J=>B(se)},{default:l(()=>[t(i,null,{default:l(()=>[t(C,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(g,{size:"small",type:"error",secondary:e(ue),onClick:J=>te(se)},{default:l(()=>[t(i,null,{default:l(()=>[t(C,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),x(M,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(m)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(f,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(i,{size:"60"},{default:l(()=>[t(C,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(H,{show:e(P),"onUpdate:show":E[8]||(E[8]=se=>Ve(P)?P.value=se:null),loading:e(ee),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:E[9]||(E[9]=se=>P.value=!1)},{default:l(()=>[t(_e,{ref_key:"formRef",ref:W,model:e(p),rules:ie,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(d,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(u,{value:e(p).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":E[3]||(E[3]=se=>e(p).id=e(Q)(se))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(d,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(u,{value:e(p).contentSize,"onUpdate:value":E[4]||(E[4]=se=>e(p).contentSize=se),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(d,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(I,{value:e(p).reusable,"onUpdate:value":E[5]||(E[5]=se=>e(p).reusable=se),name:"reusable",class:"w-full"},{default:l(()=>[t(w,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(w,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(d,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(I,{value:e(p).contentType,"onUpdate:value":E[6]||(E[6]=se=>e(p).contentType=se),name:"contentType",class:"w-full"},{default:l(()=>[t(w,{value:e(Et).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(w,{value:e(Et).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(k,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(y,{value:e(p).params,"onUpdate:value":E[7]||(E[7]=se=>e(p).params=se),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),zn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Un={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Mn=["src"],Sn=Be({__name:"index",setup(fe){const a=st(),c=nt(),m=ct(),Z=vt("appConfig"),{adIdentifiers:Q}=je(vl()),{loadAdIdentifiers:b}=vl(),{displayFormErrors:R,tr:z,fileUrl:ue,pickByTheme:L,appSecondaryColor:K,isInDevMode:N}=Je(),{request:S}=Ze(),{t:v,locale:ee}=He(),P=r(!1),G=r([]),W=r(""),p=r(),ie={pageSize:12,prefix:({itemCount:y})=>re("div",{class:"font-bold"},{default:()=>`${v("total")}: ${y}`})},B=[{title:v("preview"),key:"image",width:200,fixed:"left",render(y){var k;return((k=y.adIdentifier)==null?void 0:k.contentType)==Et.IMAGE?re(tl,{src:y.contentUrl??"",objectFit:"cover",width:200,height:100}):re("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[re(pe,{size:50,color:K.value},{default:()=>re(ge,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(y){return re("small",{},{default:()=>y.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(y){return re("div",{},{default:()=>z(y.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(y){return re("small",{},{default:()=>z(y.description)})}},{title:v("status"),key:"isActive",width:100,render(y){return re(Pt,{type:y.display?"success":"warning",bordered:!1},{default:()=>y.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(y){return re("div",{},{default:()=>Dt(y.updatedAt,{locale:ee.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(y){return re("div",{},{default:()=>Dt(y.createdAt,{locale:ee.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:p,placeholder:v("search"),value:W.value,onInput:y=>{W.value=y}},{suffix:()=>re(pe,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(y){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{f(y)},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{m.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await S({method:"delete",url:`/ads/${y.id}`})).success?(c.success(v("success")),te()):c.error(v("anErrorOccurred"))}})},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],D=Le(()=>{if(!W.value)return G.value;const y=G.value.filter(k=>{var _e;return k.pid.toLowerCase().includes(W.value.toLowerCase())||k.title.toLowerCase().includes(W.value.toLowerCase())||((_e=k.description)==null?void 0:_e.toLowerCase().includes(W.value.toLowerCase()))});return p.value&&p.value.focus(),y}),te=async()=>{P.value=!0;const y=await S({url:"/ads"});y.success&&y.result&&(G.value=y.result.data),await b(),P.value=!1};te();const Y=r(!1),E=r(!1),C=r(!1),g=r(Et.IMAGE),O=r(),j=r(null),ae=r(null),i=r({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),M={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},F=Le({get:()=>!i.value.broadcastStart||!i.value.broadcastEnd?null:[i.value.broadcastStart||"",i.value.broadcastEnd||""],set:y=>{y?(i.value.broadcastStart=y[0],i.value.broadcastEnd=y[1]):(i.value.broadcastStart=null,i.value.broadcastEnd=null)}}),f=y=>{var k;j.value=Ce.cloneDeep(y),y?(i.value=Ce.cloneDeep(y),y.data||(i.value.data={})):i.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},O.value=(k=Q.value.find(_e=>_e.id==i.value.pid))==null?void 0:k.params,E.value=!0},$=y=>re("span",{},{default:()=>y.id+(y.contentSize?` (${y.contentSize})`:"")}),H=async()=>{var y;return(y=ae.value)==null||y.validate(async k=>{var _e,se,J,h,le,me;if(!k)if(j.value)if(j.value.title!==i.value.title&&G.value.findIndex(X=>X.title==i.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),Y.value=!0;const X={pid:i.value.pid,title:i.value.title,display:i.value.display,content:i.value.content,description:i.value.description,data:i.value.data,broadcastStart:i.value.broadcastStart,broadcastEnd:i.value.broadcastEnd},xe=await S({method:"put",url:`/ads/${j.value.id}`,data:X});xe.success&&xe.result.data&&(c.success(v("success")),te()),Y.value=!1,a.finish(),E.value=!1}else if(G.value.findIndex(X=>X.title==i.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),Y.value=!0;const X={pid:i.value.pid,title:i.value.title,display:i.value.display,content:i.value.content,description:i.value.description,data:i.value.data,broadcastStart:i.value.broadcastStart,broadcastEnd:i.value.broadcastEnd},xe=await S({method:"post",url:"/ads",data:X});if(xe.failure&&xe.error)switch((J=(se=(_e=xe.error)==null?void 0:_e.response)==null?void 0:se.data)==null?void 0:J.errorCode){case Qe.FORM_INVALID_DATA:R((me=(le=(h=xe.error)==null?void 0:h.response)==null?void 0:le.data)==null?void 0:me.data);break;default:c.error(v("anErrorOccurred"))}else c.success(v("success")),te();Y.value=!1,a.finish(),E.value=!1}}),!1},u=r(!1),d=r(!1),V=r(!1),w=r(""),I=r("");return(y,k)=>{var ne,$e;const _e=it,se=It,J=hl,h=yl,le=bt,me=pt,X=Aa,xe=Vt,be=Ft,de=gl,Re=bl,Ie=ht,oe=Nt,we=kl,A=ft,Te=rt,q=Kt;return n(),U(ye,null,[t(se,{to:"#alt-action"},{default:l(()=>[t(_e,null,{default:l(()=>[e(N)?(n(),x(e(ze),{key:0,type:"warning",onClick:k[0]||(k[0]=ce=>C.value=!0)},{default:l(()=>[t(e(pe),{size:"26"},{default:l(()=>[t(e(ge),{icon:"carbon:id"})]),_:1}),T(" "+o(e(v)("identifiers")),1)]),_:1})):he("",!0),t(e(ze),{type:"primary",onClick:k[1]||(k[1]=ce=>f(null))},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(h,null,{default:l(()=>[t(J,{columns:B,data:e(D),pagination:ie,loading:e(P),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(Te,{show:e(E),"onUpdate:show":k[12]||(k[12]=ce=>Ve(E)?E.value=ce:null),loading:e(Y),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(j)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:H,onNegativeClick:k[13]||(k[13]=ce=>E.value=!1)},{default:l(()=>[t(A,{ref_key:"formRef",ref:ae,class:"mt-5",model:e(i),rules:M,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ie,{cols:"24","x-gap":12},{default:l(()=>[t(oe,{span:"12"},{default:l(()=>[t(me,{"show-label":!1,path:"title"},{default:l(()=>[t(le,{modelValue:e(i).title,"onUpdate:modelValue":k[2]||(k[2]=ce=>e(i).title=ce),placeholder:e(v)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(v)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(me,{"show-label":!1,path:"description"},{default:l(()=>[t(le,{modelValue:e(i).description,"onUpdate:modelValue":k[3]||(k[3]=ce=>e(i).description=ce),placeholder:e(v)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(o(e(v)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(me,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(X,{"formatted-value":e(F),"onUpdate:formattedValue":k[4]||(k[4]=ce=>Ve(F)?F.value=ce:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Ie,{"x-gap":"12",span:24},{default:l(()=>[t(be,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(xe,{value:e(i).pid,"onUpdate:value":[k[5]||(k[5]=ce=>e(i).pid=ce),k[6]||(k[6]=()=>{var ce;O.value=(ce=e(Q).find(Ee=>Ee.id==e(i).pid))==null?void 0:ce.params})],"render-label":$,options:e(Q).map(ce=>({...ce,disabled:!ce.reusable&&(ce.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(be,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(Re,{value:e(i).display,"onUpdate:value":k[7]||(k[7]=ce=>e(i).display=ce),name:"display",class:"w-full"},{default:l(()=>[t(de,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(de,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(oe,{span:"12"},{default:l(()=>[t(me,{label:e(v)("content"),path:"content"},{default:l(()=>[e(g)==e(Et).VIDEO?(n(),x(we,{key:0},{default:l(()=>[t(e(ze),{type:"primary",onClick:k[8]||(k[8]=()=>{d.value=!0})},{default:l(()=>[T(o(e(v)("select")),1)]),_:1}),t(e(Xe),{value:e(i).content?e(Xt)(e(i).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(i).content?(n(),U(ye,{key:0},[t(e(ze),{type:"primary",ghost:"",onClick:k[9]||(k[9]=()=>{w.value=e(v)("video"),I.value=e(ue)(e(i).content),V.value=!0})},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[T(" "+o(e(v)("play")),1)]),_:1}),t(e(ze),{type:"primary",ghost:"",onClick:k[10]||(k[10]=()=>{e(i).content=""})},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(v)("clear")),1)]),_:1})],64)):he("",!0)]),_:1})):(n(),U("div",zn,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:k[11]||(k[11]=()=>{u.value=!0})},[e(i).content?(n(),x(e(tl),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:qe("border: 1px dashed "+e(L)("green","white")),src:e(ue)(e(i).content||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(L)("green","white"))},[t(e(pe),{size:64},{default:l(()=>[t(e(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(O)&&Array.isArray(e(O))?(n(),x(me,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(Ie,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),U(ye,null,Oe(e(O),(ce,Ee)=>(n(),U(ye,{key:Ee},[t(oe,{span:10},{default:l(()=>[t(e(Xe),{value:ce,placeholder:ce,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(oe,{span:14},{default:l(()=>[t(e(Xe),{value:e(i).data[ce],"onUpdate:value":Ue=>e(i).data[ce]=Ue,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):he("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Te,{show:e(V),"onUpdate:show":k[14]||(k[14]=ce=>Ve(V)?V.value=ce:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(w)},{default:l(()=>[_("video",Un,[_("source",{src:e(I)},null,8,Mn)])]),_:1},8,["show","title"]),t(q,{show:e(u),"onUpdate:show":k[15]||(k[15]=ce=>Ve(u)?u.value=ce:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ne=e(Z))==null?void 0:ne.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[16]||(k[16]=ce=>{e(i).content=ce,u.value=!1})},null,8,["show","title","upload-config"]),t(q,{show:e(d),"onUpdate:show":k[17]||(k[17]=ce=>Ve(d)?d.value=ce:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:(($e=e(Z))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[18]||(k[18]=ce=>{e(i).content=ce,d.value=!1})},null,8,["show","title","upload-config"]),t(Tn,{show:e(C),"onUpdate:show":k[19]||(k[19]=ce=>Ve(C)?C.value=ce:null)},null,8,["show"])],64)}}});const An=Ot(Sn,[["__scopeId","data-v-249c905b"]]),En={class:"w-full"},Dn={class:"mb-2"},Ln={class:"text-base text-left"},Pn=["src","onClick"],Nn=["src"],On=Be({name:"AlbumsPicker"}),Rn=Be({...On,props:Ht({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(fe){const a=_t(fe,"modelValue"),c=fe,{t:m}=He(),{fileUrl:Z}=Je(),Q=r(!1),b=r(!1),R=r(0),z=r(""),ue=vt("appConfig"),L=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},K=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},N=(v,ee)=>{a.value&&Array.isArray(a.value[ee].medias)?a.value[ee].medias.splice(v,1):a.value&&(a.value[ee].medias=[])},S=v=>{var P,G;const ee=((G=(P=v.split("."))==null?void 0:P.pop())==null?void 0:G.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(ee)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(ee)?"video":"unknown"};return(v,ee)=>{var g;const P=ge,G=pe,W=ze,p=bt,ie=tl,B=xl("Draggable"),D=Ea,te=$t,Y=lt,E=Kt,C=rt;return n(),U("section",En,[_("section",Dn,[t(Y,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Ln,o(c.title),1)]),"header-extra":l(()=>[c.readonly?he("",!0):(n(),x(W,{key:0,quaternary:"",onClick:L},{icon:l(()=>[t(G,{size:"18"},{default:l(()=>[t(P,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),U(ye,null,Oe(a.value,(O,j)=>(n(),x(Y,{key:j,size:"small",embedded:"",hoverable:"",segmented:O.medias&&O.medias.length>0,class:"mb-4"},Fa({header:l(()=>[t(p,{modelValue:O.name,"onUpdate:modelValue":ae=>O.name=ae,placeholder:e(m)("albumName"),disabled:c.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(te,{style:{"max-height":"100%"}},{default:l(()=>[O.medias&&O.medias.length>0?(n(),x(D,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(B,{list:O.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),U(ye,null,Oe(O.medias,(ae,i)=>(n(),U("div",{key:"img-"+i,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[S(ae)==="image"?(n(),x(ie,{key:0,"object-fit":"cover",src:e(Z)(ae)},null,8,["src"])):(n(),U("video",{key:1,muted:"",src:e(Z)(ae),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{z.value=e(Z)(ae),b.value=!0}},null,8,Pn)),c.readonly?he("",!0):(n(),x(W,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:M=>N(i,j)},{icon:l(()=>[t(G,null,{default:l(()=>[t(P,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):he("",!0)]),_:2},1024)]),_:2},[c.readonly?void 0:{name:"header-extra",fn:l(()=>[t(W,{quaternary:"",class:"mr-2",onClick:()=>{R.value=j,Q.value=!0}},{icon:l(()=>[t(G,null,{default:l(()=>[t(P,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("add")),1)]),_:2},1032,["onClick"]),ee[3]||(ee[3]=_("div",{class:"w-2"},null,-1)),t(W,{quaternary:"",type:"error",onClick:ae=>K(j)},{icon:l(()=>[t(G,null,{default:l(()=>[t(P,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(E,{show:e(Q),"onUpdate:show":ee[0]||(ee[0]=O=>Ve(Q)?Q.value=O:null),title:e(m)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((g=e(ue))==null?void 0:g.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ee[1]||(ee[1]=O=>{a.value&&Array.isArray(a.value[e(R)].medias)?a.value[e(R)].medias.push(O):a.value&&(a.value[e(R)].medias=[O]),Q.value=!1})},null,8,["show","title","upload-config"]),t(C,{show:e(b),"onUpdate:show":ee[2]||(ee[2]=O=>Ve(b)?b.value=O:null),preset:"card",style:{width:"500px"},title:e(m)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e(z)?(n(),U("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e(z)},null,8,Nn)):he("",!0)]),_:1},8,["show","title"])])}}});const qn=Ot(Rn,[["__scopeId","data-v-32de8454"]]);function Ga(){const{request:fe}=Ze(),a=r([]),c=R=>{const z=R.split("_"),ue={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},L={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(N=>N.replace(/([A-Z])(?=\.\w+$)/,(S,v)=>L[v]||v))(z[0]),z.length>1?ue[z[1]]:""]},m=()=>new Promise(R=>setTimeout(R)),Z=async R=>{a.value=[];let z=1;for(const[ue,L]of Object.entries(R)){z&&z%5e3===0&&await m();const[K,N]=c(ue);a.value.push({id:z,name:K,svgCode:L,library:N}),z+=1}return a.value},Q=r(!1);return{searchIcons:async R=>{let z={};Q.value=!0;const ue=await fe({url:"/search-icons",method:"post",data:{query:R,decode:!1}});if(ue.success&&ue.result){try{z=JSON.parse(ue.result.data)}catch(L){z={},console.error(L)}z=await Z(z)}return Q.value=!1,z},isSearching:Q,currentIconsList:a}}const Fn=["innerHTML"],jn=Be({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(fe){Vl(Q=>({"95b6e21e":e(m),"22e3431a":e(c)}));const a=fe,c=Le(()=>a.color),m=Le(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),Z=r();return kt(()=>a.data,async Q=>{var b,R;if(!$a(Q||"")){const{currentIconsList:z}=Ga();Z.value=((R=(b=z.value)==null?void 0:b.find(ue=>ue.name==Q))==null?void 0:R.svgCode)||""}},{immediate:!0}),(Q,b)=>(n(),U("i",{innerHTML:e($a)(a.data||"")?a.data:e(Z)},null,8,Fn))}});const Il=Ot(jn,[["__scopeId","data-v-09747f05"]]),Bn={key:0,class:"multiple"},Kn={key:0,class:"item"},Yn={key:2,class:"flex items-center ml-2"},Gn={key:1,class:"placeholder"},Hn={class:"v3ip__search"},Wn=["placeholder"],Jn={key:0,class:"v3ip__loader"},Xn=["onClick"],Zn={key:1,class:"v3ip__empty"},Qn={key:1,class:"default-text"},es={key:1,class:"default-text"},ts=Be({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(fe,{emit:a}){Vl(B=>({"0fdd31ba":e(m),fe32c314:e(Q)}));const c=fe,m=Le(()=>typeof c.selectorHeight=="number"?`${c.selectorHeight}px`:c.selectorHeight),Z=a,Q=r(c.selectedIconBgColor),b=r(""),R=r(!1),{currentIconsList:z,searchIcons:ue,isSearching:L}=Ga();kt(()=>b.value,B=>{ue(B)},{immediate:!0});const K=Le(()=>Ce.uniqBy(Ce.uniqBy(z.value.filter(B=>{var g,O;const D=typeof c.iconLibrary=="string"&&B.library==c.iconLibrary||Array.isArray(c.iconLibrary)&&c.iconLibrary.includes(B.library)||c.iconLibrary=="all",te=!c.includeIcons||!c.includeIcons.length||c.includeIcons.includes(B.name),Y=!c.includeSearch||((g=B.name)==null?void 0:g.toLocaleLowerCase().includes(c.includeSearch)),E=!c.excludeIcons||!c.excludeIcons.length||!c.excludeIcons.includes(B.name),C=!c.excludeSearch||!((O=B.name)!=null&&O.toLocaleLowerCase().includes(c.excludeSearch));return D&&te&&Y&&E&&C}),"svgCode"),"name")),N=B=>c.valueType=="name"?B.name:B.svgCode,S=B=>{var D,te;return c.valueType=="name"?((te=(D=z.value)==null?void 0:D.find(Y=>Y.name==B))==null?void 0:te.svgCode)||"":B},v=B=>c.multiple?c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length?c.modelValue.findIndex(D=>D==N(B))>-1:!1:c.modelValue==N(B),ee=B=>{if(B)if(c.multiple)if(c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length){const D=c.modelValue,te=c.modelValue.findIndex(Y=>Y==N(B));te>-1?D.splice(te,1):c.modelValue.length<c.multipleLimit&&typeof N(B)<"u"&&D.push(N(B)),Z("update:modelValue",D),Z("change",D,B)}else c.multipleLimit>0&&(Z("update:modelValue",[N(B)]),Z("change",[N(B)],B));else N(B)==c.modelValue?c.clearable&&Z("update:modelValue",null):Z("update:modelValue",N(B)),Z("change",B)},P=r();yn(P,()=>R.value=!1);const G=r(),{width:W}=gn(G),p=vn(),ie=B=>!!p[B];return(B,D)=>{var g,O,j,ae;const te=ge,Y=pe,E=ze,C=Yt;return n(),U("div",{ref_key:"picker",ref:P,class:"v3ip__custom-select",onBlur:D[4]||(D[4]=i=>R.value=!1)},[_("div",{class:Ye(["v3ip__selected",{open:e(R),disabled:c.disabled}]),onClick:D[2]||(D[2]=i=>R.value=c.disabled?!1:!e(R))},[!c.multiple&&c.modelValue||c.multiple&&Array.isArray(c.modelValue)&&((g=c.modelValue)!=null&&g.length)?(n(),U(ye,{key:0},[c.multiple?(n(),U("div",Bn,[Array.isArray(c.modelValue)?(n(),U(ye,{key:0},[(n(!0),U(ye,null,Oe(c.modelValue||[],(i,M)=>(n(),U(ye,{key:M},[M<c.selectedItemsToDisplay?(n(),x(Il,{key:0,class:"item",data:typeof S(i)=="string"?S(i):null,size:20,onClick:ot(F=>{var f;return ee((f=e(z))==null?void 0:f.find($=>N($)==i))},["stop"])},null,8,["data","onClick"])):he("",!0)],64))),128)),((O=c.modelValue)==null?void 0:O.length)>c.selectedItemsToDisplay?(n(),U("div",Kn,[_("b",null," +"+o(((j=c.modelValue)==null?void 0:j.length)-c.selectedItemsToDisplay),1)])):he("",!0)],64)):he("",!0)])):(n(),x(Il,{key:1,data:typeof S(c.modelValue)=="string"?S(c.modelValue):null,size:20,onClick:D[0]||(D[0]=ot(i=>{var M;return ee((M=e(z))==null?void 0:M.find(F=>N(F)==c.modelValue))},["stop"]))},null,8,["data"])),(ae=c.modelValue)!=null&&ae.length&&c.clearable?(n(),U("div",Yn,[t(E,{type:"error",size:"tiny",secondary:"",onClick:D[1]||(D[1]=ot(()=>{Z("update:modelValue",c.multiple?[]:null)},["stop"]))},{default:l(()=>[t(Y,null,{default:l(()=>[t(te,{icon:"carbon:close"})]),_:1})]),_:1})])):he("",!0)],64)):(n(),U("span",Gn,o(c.placeholder),1))],2),t(Za,{name:"fade"},{default:l(()=>[dl(_("div",null,[_("div",Hn,[dl(_("input",{"onUpdate:modelValue":D[3]||(D[3]=i=>Ve(b)?b.value=i:null),type:"text",name:"search",placeholder:c.searchPlaceholder},null,8,Wn),[[Xa,e(b)]])]),e(L)?(n(),U("div",Jn,[t(C,{size:"small"})])):(n(),U(ye,{key:1},[e(K)&&e(K).length?(n(),x(e(bn),{key:0,ref_key:"scroller",ref:G,class:"v3ip__items",items:e(K),"item-size":40,"grid-items":4,"item-secondary-size":e(W)/4},{default:l(({item:i})=>[_("div",{class:Ye({active:v(i)}),onClick:M=>ee(i)},[t(Il,{data:typeof i.svgCode=="string"?i.svgCode:null,size:24,color:v(i)?c.selectedIconColor:void 0},null,8,["data","color"])],10,Xn)]),_:1},8,["items","item-secondary-size"])):(n(),U("div",Zn,[e(b)?(n(),U(ye,{key:0},[ie("empty")?_n(B.$slots,"empty",{key:0},void 0,!0):(n(),U("div",Qn,[_("small",null,o(c.emptyText),1)]))],64)):(n(),U("div",es,[_("small",null,o(c.iconsListPlaceholder),1)]))]))],64))],512),[[fl,e(R)]])]),_:3})],544)}}});const Ha=Ot(ts,[["__scopeId","data-v-67ca7633"]]),ls={class:"w-full"},as={class:"mb-2"},ns={class:"text-base text-left"},ss=Be({name:"GridImagesPicker"}),os=Be({...ss,props:Ht({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(fe){const a=_t(fe,"modelValue"),c=vt("appConfig"),m=fe,{t:Z}=He(),{fileUrl:Q}=Je(),b=r(!1),R=ue=>{Array.isArray(a.value)?a.value.splice(ue,1):a.value=[]},z=async ue=>{Array.isArray(a.value)?a.value.push(...ue):a.value=[...ue],b.value=!1};return(ue,L)=>{var ie;const K=ge,N=pe,S=ze,v=tl,ee=xl("Draggable"),P=Ea,G=$t,W=lt,p=Kt;return n(),U("section",ls,[_("section",as,[t(W,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",ns,o(m.title),1)]),"header-extra":l(()=>[m.readonly?he("",!0):(n(),x(S,{key:0,quaternary:"",onClick:L[0]||(L[0]=B=>b.value=!0)},{icon:l(()=>[t(N,{size:"18"},{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("add")),1)]),_:1}))]),default:l(()=>[t(G,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),x(P,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(ee,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),U(ye,null,Oe(a.value,(B,D)=>(n(),U("div",{key:"img-"+D,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(Q)(B)},null,8,["src"]),m.readonly?he("",!0):(n(),x(S,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>R(D)},{icon:l(()=>[t(N,null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):he("",!0)]),_:1})]),_:1},8,["segmented"])]),t(p,{show:e(b),"onUpdate:show":L[1]||(L[1]=B=>Ve(b)?b.value=B:null),title:e(Z)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ie=e(c))==null?void 0:ie.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:z},null,8,["show","title","upload-config"])])}}});const is=Ot(os,[["__scopeId","data-v-12efa615"]]);var ut=(fe=>(fe.EXTERNAL_LINK="external-link",fe.PAGE_LINK="page-link",fe.CONTENT_LINK="content-link",fe))(ut||{}),at=(fe=>(fe.NEWS_TAG="news-tag",fe.NEWS_CATEGORY="news-category",fe.NEWS_ARTICLE="news-article",fe.CONTENT_MODEL="content-model",fe))(at||{});const cl=()=>{const{t:fe}=He(),{tr:a}=Je(),c=(b,R)=>{if(R&&R.titleFieldName)return Ia(b.contentModelData.index[R.titleFieldName])?a(b.contentModelData.index[R.titleFieldName]):b.contentModelData.index[R.titleFieldName];if(b.contentModelData&&b.contentModelData.index){const z=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const ue of z)if(b.contentModelData.index[ue])return Ia(b.contentModelData.index[ue])?a(b.contentModelData.index[ue]):b.contentModelData.index[ue]}return a(b.title)},m=[{label:fe("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:fe("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:fe("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:fe("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:m,getContentTypeLabel:b=>{var R;return(R=m.find(z=>z.value===b))==null?void 0:R.label},getContentTypeTagType:b=>{var R;return((R=m.find(z=>z.value===b))==null?void 0:R.tagType)||"default"},extractItemTitle:c}},rs={key:4,class:"w-full"},us={key:5,class:"w-full"},ds={key:20,class:"w-full flex flex-gap-8 items-center justify-start"},cs=["onClick"],ps={key:0,class:"w-full"},fs={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},ms=["src"],vs={id:"video",autoplay:"",controls:"",style:{width:"100%"}},_s=["src"],ys=Be({name:"FormGenerator"}),gs=Be({...ys,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(fe,{emit:a}){const c=fe,m=a,{t:Z}=He(),{tr:Q,pickByTheme:b,fileUrl:R,mergeArrays:z}=Je(),{extractItemTitle:ue}=cl(),{request:L}=Ze(),{loadContentModels:K}=We(),{contentModels:N}=je(We());K();const S=vt("appConfig");let v=[];if(typeof c.items=="string")try{v=JSON.parse(c.items)}catch{v=[]}else v=Ce.cloneDeep(c.items);let ee={};if(c.useJson)try{ee=JSON.parse(c.modelValue)}catch{ee={}}const P=r(""),G=r(dt()),W=r(null),p=r(c.useJson?ee:c.modelValue),ie={};v.forEach(q=>{q.key in p.value||(q.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(q.type)?p.value[q.key]=JSON.parse(q.defaultValue):q.type=="number"?p.value[q.key]=parseFloat(q.defaultValue):q.type=="content-model-item"?p.value[q.key]=void 0:q.type=="content-model-items"?p.value[q.key]=[]:q.type=="list"?p.value[q.key]=q.defaultValue.split(",").map(ne=>({value:ne})):q.type=="i18n-list"?p.value[q.key]=q.defaultValue.split(",").map(ne=>({value:`{ "fr": "${ne}", "en": "${ne}" }`})):p.value[q.key]=q.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(q.type)?p.value[q.key]="":["number"].includes(q.type)?p.value[q.key]=0:["checkbox"].includes(q.type)?p.value[q.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(q.type)?p.value[q.key]=[]:p.value[q.key]=void 0),q.required&&(ie[q.key]=[{required:!0,message:Z("fillRequired")}]),G.value=dt()});const B=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],D=q=>re("span",{},{default:()=>Q(q.label)});kt(()=>p.value,q=>{const ne=c.useJson?JSON.stringify(q):q,$e=async()=>{var Ee;if(v.length==0)return!0;let ce=!1;try{await((Ee=W.value)==null?void 0:Ee.validate(Ue=>{ce=!Ue}))}catch{ce=!1}return ce};m("update:modelValue",ne),m("update",ne,$e)},{immediate:!0,deep:!0});const te=yt(),Y=Le(()=>te.isLightTheme?"light":"dark"),E=r(!1),C=r(!1),g=r(!1),O=r(""),j=r(""),ae=r(!1),i=r(!1),M=r(""),F=r(""),f=r(!1),$=q=>{window.open(q,"_blank")},H=r(!1),u=r(!1),d=r([]);(async()=>{var ne;u.value=!0;const q=await L({url:"/menu/items"});if(q.success&&q.result)for(let $e=0;$e<((ne=q.result.data)==null?void 0:ne.length);$e++)switch(q.result.data[$e].targetType){case ut.EXTERNAL_LINK:d.value.findIndex(ce=>ce.url===q.result.data[$e].url)===-1&&d.value.push(q.result.data[$e]);break;case ut.PAGE_LINK:d.value.findIndex(ce=>ce.path===q.result.data[$e].path)===-1&&d.value.push(q.result.data[$e]);break}u.value=!1})();const w=r(!1),I=r([]),y=r([]),k=async(q,ne)=>{if(!q.length){y.value=[];return}w.value=!0;const $e=await L({url:`/content-model-items/search/${q}/${ne}`});$e.success&&$e.result&&(y.value=$e.result.data),w.value=!1},_e=Le(()=>z(I.value,y.value,"id")),se=r(!1),J=r([]),h=r([]),le=async q=>{if(!q.length){h.value=[];return}se.value=!0;const ne=await L({url:`/news-articles/search/${q}`});ne.success&&ne.result&&(h.value=ne.result.data),se.value=!1},me=Le(()=>z(J.value,h.value,"id")),{categories:X,tags:xe}=je(Zt()),{loadCategories:be,loadTags:de}=Zt();Ul(async()=>{v.find(q=>q.type==="news-categories"||q.type==="news-category")&&(be(),de());for(let q=0;q<v.length;q++)if(v[q].type==="news-articles"||v[q].type==="news-article"){se.value=!0;const ne=p.value[v[q].key],$e=await L({url:"/news-articles/list",method:"post",data:{ids:v[q].type==="news-articles"?ne:[ne]}});$e.success&&$e.result&&(J.value=z(J.value,$e.result.data,"id")),se.value=!1}else if(v[q].type==="content-model-items"||v[q].type==="content-model-item"){w.value=!0;const ne=p.value[v[q].key],$e=await L({url:"/content-model-items/list",method:"post",data:{ids:v[q].type==="content-model-items"?ne:[ne]}});$e.success&&$e.result&&(I.value=z(I.value,$e.result.data,"id")),w.value=!1}});const Re=q=>re("span",{},{default:()=>`${Q(q.name)}`}),Ie=q=>re("span",{},{default:()=>`${Q(q.title)}`}),oe=q=>re("span",{},{default:()=>`${Q(q.name)}`}),we=q=>Le(()=>re("span",{},{default:()=>{var ne;return ue(q,(ne=N.value)==null?void 0:ne.find($e=>$e.id===q.contentModelId))}})),A=({option:q})=>re("div",{style:{display:"flex",alignItems:"center"}},[`${Q(q.title)}`]),Te=q=>re("div",{style:{marginLeft:"12px",padding:"4px 0"}},[re("div",{},{default:()=>`${Q(q.title)}`}),re("small",{},{default:()=>`${q.targetType==ut.EXTERNAL_LINK?q.url:q.path}`})]);return(q,ne)=>{var pl,ol,il,rl,ul;const $e=Xe,ce=bt,Ee=Ba,Ue=Tl,De=Gt,Ne=Aa,et=Vt,xt=tl,Pe=ge,Ge=pe,Fe=ze,ke=is,Ke=Ha,Tt=qn,Rt=kl,Ut=zl,Mt=pt,Me=ft,gt=rt,jt=Kt;return n(),U(ye,null,[(n(),x(Me,{ref_key:"formRef",ref:W,key:e(G),model:e(p),rules:ie,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:qe(c.formStyle)},{default:l(()=>[(n(!0),U(ye,null,Oe(e(v),(s,Wt)=>(n(),x(Mt,{key:Wt,label:e(Q)(s.label),path:s.key,"label-style":c.labelStyle,"show-require-mark":s.required,class:"w-full"},{default:l(()=>{var Jt,Ml,Sl,Al,El,Dl,Ll,Pl,Nl,Ol,Rl,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa,oa,ia,ra,ua,da,ca,pa,fa,ma,va,_a,ya,ga,ba,ha,ka,wa,xa,Ca;return[s.type=="text"?(n(),x($e,{key:0,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),maxlength:((Jt=s.settings)==null?void 0:Jt.maxLength)||void 0,minlength:((Ml=s.settings)==null?void 0:Ml.minLength)||void 0,clearable:((Sl=s.settings)==null?void 0:Sl.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-text"?(n(),x(ce,{key:1,modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="textarea"?(n(),x($e,{key:2,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),maxlength:((Al=s.settings)==null?void 0:Al.maxLength)||void 0,minlength:((El=s.settings)==null?void 0:El.minLength)||void 0,clearable:((Dl=s.settings)==null?void 0:Dl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-textarea"?(n(),x(ce,{key:3,modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="editor"?(n(),U("div",rs,[t(Ee,{modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),"toolbar-items":B,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="i18n-editor"?(n(),U("div",us,[t(ce,{modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="number"?(n(),x(Ue,{key:6,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,max:((Ll=s.settings)==null?void 0:Ll.max)||void 0,min:((Pl=s.settings)==null?void 0:Pl.min)||void 0,step:((Nl=s.settings)==null?void 0:Nl.step)||1,clearable:((Ol=s.settings)==null?void 0:Ol.clearable)||!1,placeholder:e(Q)(s.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):s.type=="checkbox"?(n(),x(De,{key:7,checked:e(p)[s.key],"onUpdate:checked":ve=>e(p)[s.key]=ve,"checked-value":((Rl=s.settings)==null?void 0:Rl["checked-value"])||!0,"unchecked-value":((ql=s.settings)==null?void 0:ql["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):s.type=="date"?(n(),x(Ne,{key:8,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM-dd",format:((Fl=s.settings)==null?void 0:Fl.format)||"dd MMMM yyyy",type:"date",clearable:((jl=s.settings)==null?void 0:jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="daterange"?(n(),x(Ne,{key:9,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM-dd",format:((Bl=s.settings)==null?void 0:Bl.format)||"dd MMMM yyyy",type:"daterange",clearable:((Kl=s.settings)==null?void 0:Kl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetime"?(n(),x(Ne,{key:10,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Yl=s.settings)==null?void 0:Yl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:((Gl=s.settings)==null?void 0:Gl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetimerange"?(n(),x(Ne,{key:11,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Hl=s.settings)==null?void 0:Hl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:((Wl=s.settings)==null?void 0:Wl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="year"?(n(),x(Ne,{key:12,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy",type:"year",clearable:((Jl=s.settings)==null?void 0:Jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="yearrange"?(n(),x(Ne,{key:13,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy",type:"yearrange",clearable:((Xl=s.settings)==null?void 0:Xl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="month"?(n(),x(Ne,{key:14,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM",type:"month",clearable:((Zl=s.settings)==null?void 0:Zl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="monthrange"?(n(),x(Ne,{key:15,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-MM",type:"monthrange",clearable:((Ql=s.settings)==null?void 0:Ql.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarter"?(n(),x(Ne,{key:16,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-Q",type:"quarter",clearable:((ea=s.settings)==null?void 0:ea.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarterrange"?(n(),x(Ne,{key:17,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,"value-format":"yyyy-Q",type:"quarterrange",clearable:((ta=s.settings)==null?void 0:ta.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="week"?(n(),x(Ne,{key:18,"formatted-value":e(p)[s.key],"onUpdate:formattedValue":ve=>e(p)[s.key]=ve,type:"week",clearable:((la=s.settings)==null?void 0:la.clearable)||!0,placeholder:e(Z)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):s.type=="single-select"||s.type=="multi-select"?(n(),x(et,{key:19,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:(aa=s.options||[])==null?void 0:aa.map(ve=>{var tt;if(s.type=="multi-select"&&s.settings&&e(p)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ve,disabled:e(p)[s.key].length>=mt&&!e(p)[s.key].includes(ve.value)}}return ve}),multiple:s.type=="multi-select",placeholder:e(Q)(s.label),"render-label":D,"label-field":"label","value-field":"value",filterable:"",clearable:((na=s.settings)==null?void 0:na.clearable)||!0,"max-tag-count":((sa=s.settings)==null?void 0:sa["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="image"?(n(),U("div",ds,[_("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{P.value=s.key,E.value=!0}},[e(p)[s.key]?(n(),x(xt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:qe("border: 1px dashed "+e(b)("green","white")),src:e(R)(e(p)[s.key]||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(b)("green","white"))},[t(Ge,{size:64},{default:l(()=>[t(Pe,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,cs),e(p)[s.key]?(n(),x(Fe,{key:0,quaternary:"",onClick:()=>{P.value=s.key,e(p)[e(P)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])):he("",!0)])):s.type=="gallery"?(n(),x(ke,{key:21,modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,"upload-folder":"images",title:e(Q)(s.label)},null,8,["modelValue","onUpdate:modelValue","title"])):s.type=="news-category"||s.type=="news-categories"?(n(),x(et,{key:22,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:(oa=e(X)||[])==null?void 0:oa.map(ve=>{var tt;if(s.type=="news-categories"&&s.settings&&e(p)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ve,disabled:e(p)[s.key].length>=mt&&!e(p)[s.key].includes(ve.id)}}return ve}),multiple:s.type=="news-categories",placeholder:e(Q)(s.label),"render-label":Re,"label-field":"name","value-field":"id",filterable:"",clearable:((ia=s.settings)==null?void 0:ia.clearable)||!0,"max-tag-count":((ra=s.settings)==null?void 0:ra["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-tag"||s.type=="news-tags"?(n(),x(et,{key:23,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:(ua=e(xe)||[])==null?void 0:ua.map(ve=>{var tt;if(s.type=="news-tags"&&s.settings&&e(p)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ve,disabled:e(p)[s.key].length>=mt&&!e(p)[s.key].includes(ve.id)}}return ve}),multiple:s.type=="news-tags",placeholder:e(Q)(s.label),"render-label":oe,"label-field":"name","value-field":"id",filterable:"",clearable:((da=s.settings)==null?void 0:da.clearable)||!0,"max-tag-count":((ca=s.settings)==null?void 0:ca["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-article"||s.type=="news-articles"?(n(),x(et,{key:24,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:(pa=e(me)||[])==null?void 0:pa.map(ve=>{var tt;if(s.type=="news-articles"&&s.settings&&e(p)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ve,disabled:e(p)[s.key].length>=mt&&!e(p)[s.key].includes(ve.id)}}return ve}),multiple:s.type=="news-articles",placeholder:e(Q)(s.label),"render-label":Ie,loading:e(se),"value-field":"id",filterable:"",clearable:((fa=s.settings)==null?void 0:fa.clearable)||!0,"max-tag-count":((ma=s.settings)==null?void 0:ma["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:le},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):s.type=="icon"||s.type=="icons"?(n(),x(Ke,{key:25,modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),multiple:s.type=="icons","icons-list-placeholder":e(Z)("enterIconNameInSearchBar"),"search-placeholder":e(Z)("search"),"empty-text":e(Z)("noIconsFound"),"icon-library":((va=s.settings)==null?void 0:va.library)||"all",clearable:((_a=s.settings)==null?void 0:_a.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):s.type=="albums"?(n(),x(Tt,{key:26,modelValue:e(p)[s.key],"onUpdate:modelValue":ve=>e(p)[s.key]=ve,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):s.type=="audio"?(n(),x(Rt,{key:27},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{P.value=s.key,ae.value=!0}},{default:l(()=>[T(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(p)[s.key]?e(Xt)(e(p)[s.key]):"",placeholder:e(Z)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(p)[s.key]?(n(),U(ye,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:()=>{M.value=e(Q)(s.label),F.value=e(R)(e(p)[s.key]),i.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{P.value=s.key,e(p)[e(P)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):s.type=="video"?(n(),x(Rt,{key:28},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{P.value=s.key,C.value=!0}},{default:l(()=>[T(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(p)[s.key]?e(Xt)(e(p)[s.key]):"",placeholder:e(Z)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(p)[s.key]?(n(),U(ye,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:()=>{O.value=e(Q)(s.label),j.value=e(R)(e(p)[s.key]),g.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{P.value=s.key,e(p)[e(P)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):s.type=="document"?(n(),x(Rt,{key:29},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{P.value=s.key,f.value=!0}},{default:l(()=>[T(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(p)[s.key]?e(Xt)(e(p)[s.key]):"",placeholder:e(Z)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(p)[s.key]?(n(),U(ye,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:ve=>$(e(R)(e(p)[s.key]))},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("open")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{P.value=s.key,e(p)[e(P)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):s.type=="file"?(n(),x(Rt,{key:30},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{P.value=s.key,H.value=!0}},{default:l(()=>[T(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(p)[s.key]?e(Xt)(e(p)[s.key]):"",placeholder:e(Z)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(p)[s.key]?(n(),x(Fe,{key:0,type:"primary",ghost:"",onClick:()=>{P.value=s.key,e(p)[e(P)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])):he("",!0)]),_:2},1024)):s.type=="color"?(n(),x(e(el),{key:31,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,class:"cursor-pointer",theme:e(Y),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):s.type=="content-model-item"||s.type=="content-model-items"?(n(),x(et,{key:32,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:(ya=e(_e)||[])==null?void 0:ya.map(ve=>{var tt;if(s.type=="content-model-items"&&s.settings&&e(p)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ve,disabled:e(p)[s.key].length>=mt&&!e(p)[s.key].includes(ve.id)}}return ve}),multiple:s.type=="content-model-items",placeholder:e(Q)(s.label),"render-label":ve=>we(ve).value,loading:e(w),"value-field":"id",filterable:"",clearable:((ga=s.settings)==null?void 0:ga.clearable)||!0,"max-tag-count":((ba=s.settings)==null?void 0:ba["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:ve=>k(ve,s.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):s.type=="menu-item-link"?(n(),x(et,{key:33,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,options:e(d)||[],placeholder:e(Q)(s.label),"render-label":Te,"render-tag":A,loading:e(u),"label-field":"title","value-field":"id",filterable:"",clearable:((ha=s.settings)==null?void 0:ha.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):s.type=="list"?(n(),x(Ut,{key:34,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),max:((ka=s.settings)==null?void 0:ka.max)||void 0,min:((wa=s.settings)==null?void 0:wa.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ve})=>{var tt,mt;return[((tt=s.settings)==null?void 0:tt.type)=="editor"?(n(),U("div",ps,[t(Ee,{modelValue:ve.value,"onUpdate:modelValue":Cl=>ve.value=Cl,"toolbar-items":B,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(n(),x($e,{key:1,value:ve.value,"onUpdate:value":Cl=>ve.value=Cl,type:((mt=s.settings)==null?void 0:mt.type)||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):s.type=="i18n-list"?(n(),x(Ut,{key:35,value:e(p)[s.key],"onUpdate:value":ve=>e(p)[s.key]=ve,placeholder:e(Q)(s.label),max:((xa=s.settings)==null?void 0:xa.max)||void 0,min:((Ca=s.settings)==null?void 0:Ca.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ve})=>{var tt;return[t(ce,{modelValue:ve.value,"onUpdate:modelValue":mt=>ve.value=mt,type:((tt=s.settings)==null?void 0:tt.type)||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):he("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(gt,{show:e(i),"onUpdate:show":ne[0]||(ne[0]=s=>Ve(i)?i.value=s:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(M)},{default:l(()=>[_("audio",fs,[_("source",{src:e(F)},null,8,ms)])]),_:1},8,["show","title"]),t(gt,{show:e(g),"onUpdate:show":ne[1]||(ne[1]=s=>Ve(g)?g.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(O)},{default:l(()=>[_("video",vs,[_("source",{src:e(j)},null,8,_s)])]),_:1},8,["show","title"]),t(jt,{show:e(E),"onUpdate:show":ne[2]||(ne[2]=s=>Ve(E)?E.value=s:null),title:e(Z)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((pl=e(S))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ne[3]||(ne[3]=s=>{e(p)[e(P)]=s,E.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(C),"onUpdate:show":ne[4]||(ne[4]=s=>Ve(C)?C.value=s:null),title:e(Z)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(S))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ne[5]||(ne[5]=s=>{e(p)[e(P)]=s,C.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(ae),"onUpdate:show":ne[6]||(ne[6]=s=>Ve(ae)?ae.value=s:null),title:e(Z)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((il=e(S))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ne[7]||(ne[7]=s=>{e(p)[e(P)]=s,ae.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(f),"onUpdate:show":ne[8]||(ne[8]=s=>Ve(f)?f.value=s:null),title:e(Z)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((rl=e(S))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ne[9]||(ne[9]=s=>{e(p)[e(P)]=s,f.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(H),"onUpdate:show":ne[10]||(ne[10]=s=>Ve(H)?H.value=s:null),title:e(Z)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ul=e(S))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ne[11]||(ne[11]=s=>{e(p)[e(P)]=s,H.value=!1})},null,8,["show","title","upload-config"])],64)}}});const _l=Ot(gs,[["__scopeId","data-v-9ecd0c70"]]),bs={key:0},hs={key:1},ks={key:0},ws={class:"flex items-center"},xs={class:"text-base"},Cs={class:"flex items-center justify-center cursor-pointer gap-2"},Is={key:1},$s={class:"mt-4"},Vs={key:2,class:"mt-2 text-xs"},Ts={class:"my-8"},zs={class:"flex items-center justify-between"},Us={class:"text-base"},Ms=Be({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(fe,{emit:a}){const c=ct(),{t:m}=He(),Z=fe,Q=a,b=r(dt()),R=r({}),z=r({}),ue=r(),L=r(),K=r(),N=r([]),S=r([]),v=r({}),ee=r({}),P=r(!1),G=r(!1),W=nt(),p=st(),{request:ie}=Ze(),{tr:B,pickByTheme:D,editKeysToCamelCase:te}=Je(),{sections:Y}=je(We()),{isLightTheme:E}=je(yt()),C=async(I=!0)=>{var _e,se,J,h;I&&(P.value=!0),G.value=!0,p.start();const y=await ie({url:`/pages/${Z.slug}`});if(y.success&&y.result){if(K.value=y.result.data,(_e=K.value)!=null&&_e.sections&&Array.isArray((se=K.value)==null?void 0:se.sections)){const le={};for(const me of K.value.sections)me&&(le[me.slug]=me.dataSourcePageSectionsData??{});for(const me of K.value.sections)me&&(Ce.isObject(le)&&Ce.has(le,me.slug)&&Ua(le[me.slug])?R.value[me.slug]=qt(le[me.slug]):R.value[me.slug]=qt({}),Ce.forIn(te(me.dataStructure),(X,xe)=>{(!R.value[me.slug][xe]||Array.isArray(R.value[me.slug][xe])&&R.value[me.slug][xe].length==0)&&(xe==="index"?R.value[me.slug][xe]=qt({}):R.value[me.slug][xe]=qt([]))}))}if(K.value&&Array.isArray((J=K.value)==null?void 0:J.sections)){const le=K.value.sections;if(Array.isArray((h=K.value)==null?void 0:h.sectionsOrder)){N.value=[];for(const me of K.value.sectionsOrder)if(me){const X=le.find(xe=>xe.slug===me);X&&N.value.push(X)}for(const me of le)N.value.map(X=>X.slug).includes(me.slug)||N.value.push(me)}else N.value=Ce.cloneDeep(le);if(Array.isArray(K.value.sectionsDisabled))for(const me of K.value.sections)me&&(v.value[me.slug]=!K.value.sectionsDisabled.includes(me.slug));else for(const me of K.value.sections)me&&(v.value[me.slug]=!0)}ee.value=Ce.cloneDeep(v.value),S.value=Ce.cloneDeep(N.value),z.value=Ce.cloneDeep(R.value)}b.value=dt();function k(le){return new Promise(me=>setTimeout(me,le))}await k(5e3),p.finish(),G.value=!1,I&&(P.value=!1)};C();const g=I=>re("span",{},{default:()=>{var y;return I.id===((y=K.value)==null?void 0:y.id)?m("currentPage"):B(I.title)}}),O=Le(()=>Ce.isEqual(R.value,z.value)&&Ce.isEqual(N.value,S.value)&&Ce.isEqual(v.value,ee.value)),j=async()=>{G.value=!0,p.start();const I=ue.value&&await ue.value(),y=L.value&&await L.value(),k=async()=>{const _e=await ie({url:`/pages/${Z.slug}`,method:"put",data:{dispatchData:!0,sectionsData:R.value,sectionsOrder:N.value.map(se=>se.slug),sectionsDisabled:Object.keys(v.value).filter(se=>!v.value[se])}});_e.success&&_e.result?(W.success(m("success")),C(!1)):W.error(m("anErrorOccurred"))};(!ue.value||I)&&(!L.value||y)?await k():c.warning({title:m("confirm"),content:m("mandatoryFieldsNotFilledInConfirmation"),positiveText:m("yes"),negativeText:m("cancel"),onPositiveClick:async()=>{await k()}}),p.finish(),G.value=!1},ae=async I=>{c.warning({title:m("confirm"),content:m("confirmDeletePage"),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{(await ie({method:"delete",url:`/pages/${I.slug}`})).success?(Q("delete",K.value),W.success(m("success"))):W.error(m("anErrorOccurred"))}})},i=r(!1),M=r([]),F=r(!1),f=()=>{M.value=[],N.value.forEach(I=>{I.id&&M.value.push(I.id)}),F.value=!0},$=I=>{I.id&&(M.value.includes(I.id)?M.value=M.value.filter(y=>y!==I.id):M.value.push(I.id))},H=I=>Le({get:()=>I.id?M.value.includes(I.id):!1,set:y=>{I.id&&(y?M.value=M.value.filter(k=>k!==I.id):M.value.includes(I.id)||M.value.push(I.id))}}),u=I=>{I.id&&(M.value=[],N.value.forEach(y=>{y.id&&y.id!==I.id&&M.value.push(y.id)}),d())},d=async()=>{i.value=!0,p.start();const I=await ie({url:`/pages/${Z.slug}`,method:"put",data:{sectionsIds:M.value}});I.success&&I.result?(W.success(m("success")),C()):W.error(m("anErrorOccurred")),p.finish(),i.value=!1},V=async(I,y)=>{var _e;i.value=!0,p.start();const k=await ie({url:`/sections/${I.slug}/data-source-page`,method:"put",data:{pageId:(_e=K.value)==null?void 0:_e.id,sourcePageId:y}});k.success&&k.result?(W.success(m("success")),C(!1)):W.error(m("anErrorOccurred")),p.finish(),i.value=!1},w=async(I,y)=>{O.value?V(I,y):c.warning({title:m("confirm"),content:m("confirmUpdateDataSourcePage"),positiveText:m("yes"),negativeText:m("cancel"),onPositiveClick:()=>V(I,y)})};return(I,y)=>{const k=ge,_e=pe,se=ze,J=zt,h=it,le=It,me=sn,X=Gt,xe=Pt,be=lt,de=Vt,Re=al,Ie=nl,oe=xl("Draggable"),we=wt,A=Lt,Te=$t,q=rt;return n(),U(ye,null,[t(le,{to:"#alt-action"},{default:l(()=>[t(h,{align:"center"},{default:l(()=>[t(se,{type:"error",disabled:e(G),onClick:y[0]||(y[0]=ne=>e(K)?ae(e(K)):null)},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("delete")),1)]),_:1},8,["disabled"]),t(se,{type:"info",disabled:e(G),onClick:y[1]||(y[1]=ne=>e(K)?I.openFormModal(e(K)):null)},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("editPage")),1)]),_:1},8,["disabled"]),t(J,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(se,{type:"primary",loading:e(G),disabled:e(O),onClick:y[2]||(y[2]=ne=>j())},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(A,{appear:"",name:"slide-fade"},{default:l(()=>[e(P)?(n(),U("section",bs,[(n(),U(ye,null,Oe(6,ne=>t(me,{key:ne,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),U("section",hs,[e(K)&&Array.isArray(e(K).sections)&&e(K).sections.length?(n(),U("section",ks,[t(oe,{list:e(N)},{default:l(()=>[(n(!0),U(ye,null,Oe(e(N),(ne,$e)=>(n(),x(be,{key:ne.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(Ie,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:ce})=>[t(_e,null,{default:l(()=>[ce?(n(),x(k,{key:0,icon:"fa-solid:chevron-left"})):(n(),x(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>y[8]||(y[8]=[_("span",null,null,-1)])),default:l(()=>[t(Re,{name:"1"},{header:l(()=>[_("div",ws,[t(_e,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(k,{icon:"fa-solid:grip-lines"})]),_:1}),t(X,{checked:e(v)[ne.slug],"onUpdate:checked":ce=>e(v)[ne.slug]=ce,size:"small",class:"mr-4",onClick:y[3]||(y[3]=ot(()=>{},["stop"]))},{default:l(()=>[T(o(e(m)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(xe,{size:"small",type:"info"},{default:l(()=>[T(o($e+1),1)]),_:2},1024),t(J,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",xs,o(e(B)(ne.title)),1)])]),default:l(()=>[(n(!0),U(ye,null,Oe(e(te)(ne.dataStructure),(ce,Ee)=>(n(),U(ye,{key:Ee},[String(Ee)==="index"?(n(),x(be,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),x(_l,{key:`${e(b)}-${Ee}-form-1`,modelValue:e(R)[ne.slug][Ee],"onUpdate:modelValue":Ue=>e(R)[ne.slug][Ee]=Ue,items:ce,onUpdate:(Ue,De)=>{ue.value=De}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),x(be,{key:1,title:e(B)(ce.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{quaternary:"",size:"small",onClick:()=>e(R)[ne.slug][Ee].push({})},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),U(ye,null,Oe(e(R)[ne.slug][Ee],(Ue,De)=>(n(),x(be,{key:De,title:String(De+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{type:"error",size:"small",onClick:()=>e(R)[ne.slug][Ee].splice(De,1)},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),x(_l,{key:`${e(b)}-${Ee}-${De}-form-2`,modelValue:e(R)[ne.slug][Ee][De],"onUpdate:modelValue":Ne=>e(R)[ne.slug][Ee][De]=Ne,items:ce.items,onUpdate:(Ne,et)=>{L.value=et}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(h,null,{default:l(()=>[t(se,{size:"small",type:"error",secondary:e(E),onClick:ce=>u(ne)},{default:l(()=>[t(_e,{size:"21"},{default:l(()=>[t(k,{icon:"carbon:close"})]),_:1}),T(" "+o(e(m)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(J,{vertical:"",class:Ye(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(h,{align:"center"},{default:l(()=>[_("span",null,o(e(m)("dataSourcePage")),1),t(de,{value:ne.dataSourcePageId,options:ne.pages||[],placeholder:e(m)("select"),"render-label":g,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ce=>w(ne,ce)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(be,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:y[4]||(y[4]=ne=>f())},{default:l(()=>[_("div",Cs,[t(_e,{size:"20"},{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1}),T(" "+o(e(m)("addSection")),1)])]),_:1})])):(n(),U("section",Is,[t(be,{size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(D)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(we,{description:e(m)("noSectionOnThisPage")},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[_("div",$s,[t(se,{size:"small",onClick:y[5]||(y[5]=ne=>f())},{icon:l(()=>[t(_e,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(K)?(n(),U("div",Vs,[T(o(e(m)("dataRetrievalSlug"))+": ",1),_("b",null,o(e(K).slug),1)])):he("",!0)]))]),_:1}),t(q,{show:e(F),"onUpdate:show":y[6]||(y[6]=ne=>Ve(F)?F.value=ne:null),loading:e(i),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(m)("addSections"),"positive-text":e(m)("validate"),"negative-text":e(m)("cancel"),onPositiveClick:d,onNegativeClick:y[7]||(y[7]=ne=>F.value=!1)},{default:l(()=>[_("section",Ts,[t(Te,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e(Y),ne=>(n(),x(be,{key:ne.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:$e=>$(ne)},{default:l(()=>[_("div",zs,[_("span",Us,o(e(B)(ne.title)),1),t(X,{checked:H(ne).value,"onUpdate:checked":$e=>H(ne).value=$e,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ss={class:"flex items-center justify-between"},As={class:"flex flex-col"},Es={class:"text-sm font-bold"},Ds=Be({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(fe){const{t:a}=He(),{request:c}=Ze(),{pickByTheme:m,tr:Z,displayFormErrors:Q}=Je(),b=_t(fe,"show"),{menuItemGroups:R}=je(We()),{loadMenuItemGroups:z}=We(),{isLightTheme:ue}=je(yt()),L=r(!1),K=async()=>{L.value=!0,await z(),L.value=!1};K();const N=ct(),S=nt(),v=st(),ee=r(!1),P=r(!1),G=r(null),W=r(null),p=r({name:"",description:""}),ie={name:[{required:!0,message:a("fillRequired")}]},B=Y=>{G.value=Ce.cloneDeep(Y),p.value=Ce.cloneDeep(Y||{name:"",description:""}),P.value=!0},D=async()=>{var Y;return(Y=W.value)==null||Y.validate(async E=>{var C,g,O,j,ae,i;if(!E){v.start(),ee.value=!0;const M={name:p.value.name,description:p.value.description},F=await c({method:G.value?"put":"post",url:G.value?`/menu-item-groups/${G.value.id}`:"/menu-item-groups",data:M});if(F.failure&&F.error)switch((O=(g=(C=F.error)==null?void 0:C.response)==null?void 0:g.data)==null?void 0:O.errorCode){case Qe.FORM_INVALID_DATA:Q((i=(ae=(j=F.error)==null?void 0:j.response)==null?void 0:ae.data)==null?void 0:i.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),K(),P.value=!1;ee.value=!1,v.finish()}}),!1},te=async Y=>{N.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-item-groups/${Y.id}`})).success?(S.success(a("success")),K()):S.error(a("anErrorOccurred"))}})};return(Y,E)=>{const C=ge,g=ze,O=it,j=wl,ae=pe,i=lt,M=$t,F=wt,f=Yt,$=rt,H=bt,u=pt,d=ft;return n(),U(ye,null,[t($,{show:b.value,"onUpdate:show":E[2]||(E[2]=V=>b.value=V),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(O,{align:"center"},{default:l(()=>[t(g,{size:"small",type:"primary",disabled:e(L),onClick:E[0]||(E[0]=V=>B(null))},{default:l(()=>[t(C,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(g,{size:"small",type:"error",disabled:e(L),onClick:E[1]||(E[1]=V=>b.value=!1)},{default:l(()=>[t(C,{icon:"carbon:close",class:"mr-1"}),T(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(f,{show:e(L)},{default:l(()=>[e(R).length?(n(),x(M,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e(R),V=>(n(),x(i,{key:V.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ss,[_("div",As,[_("span",Es,o(e(Z)(V.name)),1),t(j,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[T(o(e(Z)(V.description)),1)]),_:2},1024)]),t(O,null,{default:l(()=>[t(g,{size:"small",type:"warning",secondary:e(ue),onClick:w=>B(V)},{default:l(()=>[t(ae,null,{default:l(()=>[t(C,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(g,{size:"small",type:"error",secondary:e(ue),onClick:w=>te(V)},{default:l(()=>[t(ae,null,{default:l(()=>[t(C,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),x(i,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(m)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(F,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ae,null,{default:l(()=>[t(C,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t($,{show:e(P),"onUpdate:show":E[5]||(E[5]=V=>Ve(P)?P.value=V:null),loading:e(ee),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:E[6]||(E[6]=V=>P.value=!1)},{default:l(()=>[t(d,{ref_key:"formRef",ref:W,model:e(p),rules:ie,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{"show-label":!1,path:"name"},{default:l(()=>[t(H,{modelValue:e(p).name,"onUpdate:modelValue":E[3]||(E[3]=V=>e(p).name=V),placeholder:e(a)("name"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(u,{"show-label":!1,path:"description"},{default:l(()=>[t(H,{modelValue:e(p).description,"onUpdate:modelValue":E[4]||(E[4]=V=>e(p).description=V),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ls=Be({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Ht(["update"],["update:content-type","update:content-id"]),setup(fe,{emit:a}){const{t:c}=He(),{tr:m,mergeArrays:Z}=Je(),{request:Q}=Ze(),{contentTypes:b,extractItemTitle:R}=cl(),{loadContentModels:z}=We(),{contentModels:ue}=je(We()),L=a;z();const K=_t(fe,"content-type"),N=_t(fe,"content-id"),S=r(),v=r(!1),ee=r([]),P=r([]),G=async(F,f)=>{if(!F.length){P.value=[];return}v.value=!0;const $=await Q({url:`/content-model-items/search/${F}/${f}`});$.success&&$.result&&(P.value=$.result.data),v.value=!1},W=Le(()=>Z(ee.value,P.value,"id")),p=r(!1),ie=r([]),B=r([]),D=async F=>{if(!F.length){B.value=[];return}p.value=!0;const f=await Q({url:`/news-articles/search/${F}`});f.success&&f.result&&(B.value=f.result.data),p.value=!1},te=Le(()=>Z(ie.value,B.value,"id")),{categories:Y}=je(Zt()),{loadCategories:E}=Zt(),{tags:C}=je(Zt()),{loadTags:g}=Zt();Ul(async()=>{var $;E(),g(),p.value=!0;const F=await Q({url:"/news-articles/list",method:"post",data:{ids:N.value?[N.value]:[]}});F.success&&F.result&&(ie.value=Z(ie.value,F.result.data,"id")),p.value=!1,v.value=!0;const f=await Q({url:"/content-model-items/list",method:"post",data:{ids:N.value?[N.value]:[]}});f.success&&f.result&&(ee.value=Z(ee.value,f.result.data,"id"),S.value=($=ee.value.find(H=>H.id===N.value))==null?void 0:$.contentModelId),v.value=!1});const O=F=>re("span",{},{default:()=>`${m(F.name)}`}),j=F=>re("span",{},{default:()=>`${m(F.title)}`}),ae=F=>re("span",{},{default:()=>`${m(F.name)}`}),i=F=>re("span",{},{default:()=>m(F.title)}),M=F=>Le(()=>re("span",{},{default:()=>{var f;return R(F,(f=ue.value)==null?void 0:f.find($=>$.id===F.contentModelId))}}));return(F,f)=>{const $=Vt,H=Ft,u=ht;return n(),x(u,{"x-gap":"12",span:24},{default:l(()=>[t(H,{span:8,label:e(c)("contentType"),path:"contentType"},{default:l(()=>[t($,{value:K.value,"onUpdate:value":[f[0]||(f[0]=d=>K.value=d),f[1]||(f[1]=()=>N.value=void 0)],options:e(b)||[],placeholder:e(c)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),K.value===e(at).CONTENT_MODEL?(n(),U(ye,{key:0},[t(H,{span:8,label:e(c)("contentModel")},{default:l(()=>[t($,{value:e(S),"onUpdate:value":f[2]||(f[2]=d=>Ve(S)?S.value=d:null),options:e(ue),placeholder:e(c)("search"),"render-label":i,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(H,{span:8,label:e(c)("item"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[f[3]||(f[3]=d=>N.value=d),f[5]||(f[5]=(d,V)=>L("update",d,V,K.value))],options:e(W)||[],placeholder:e(c)("search"),"render-label":d=>M(d).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f[4]||(f[4]=d=>G(d,e(S)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):he("",!0),K.value===e(at).NEWS_ARTICLE?(n(),x(H,{key:1,span:16,label:e(c)("newsArticle"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[f[6]||(f[6]=d=>N.value=d),f[7]||(f[7]=(d,V)=>L("update",d,V,K.value))],options:e(te)||[],placeholder:e(c)("search"),"render-label":j,loading:e(p),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:D},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):he("",!0),K.value===e(at).NEWS_CATEGORY?(n(),x(H,{key:2,span:16,label:e(c)("newsCategory"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[f[8]||(f[8]=d=>N.value=d),f[9]||(f[9]=(d,V)=>L("update",d,V,K.value))],options:e(Y)||[],placeholder:e(c)("select"),"render-label":O,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):he("",!0),K.value===e(at).NEWS_TAG?(n(),x(H,{key:3,span:16,label:e(c)("newsTag"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[f[10]||(f[10]=d=>N.value=d),f[11]||(f[11]=(d,V)=>L("update",d,V,K.value))],options:e(C)||[],placeholder:e(c)("select"),"render-label":ae,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):he("",!0)]),_:1})}}}),Ps={class:"flex items-center"},Ns={class:"flex flex-col"},Os={class:"text-sm font-bold"},Rs={key:0,class:"text-sm"},qs={class:"text-xs font-normal"},Fs={class:"text-xs my-1"},js={class:"flex items-center"},Bs={class:"flex flex-col"},Ks={class:"text-sm font-bold"},Ys={class:"text-xs font-normal"},Gs={key:0,class:"mt-4"},Hs={class:"my-8"},Ws={class:"flex items-center justify-between"},Js={class:"flex flex-col"},Xs={class:"text-sm font-bold"},Zs={class:"text-xs font-normal"},Qs={class:"flex items-center"},eo={key:0},to={key:1},lo={key:2},ao=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(fe){const{t:a}=He(),{request:c}=Ze(),{extractItemTitle:m}=cl(),{tr:Z,displayFormErrors:Q,pickByTheme:b}=Je(),{isLightTheme:R}=je(yt()),{pages:z,menuItemGroups:ue,contentModels:L}=je(We()),{loadPages:K,loadMenuItemGroups:N}=We(),S=st(),v=nt(),ee=ct(),P=_t(fe,"modelValue"),G=r([]),W=r([]),p=r(!1),ie=r(""),B=r(),D=Le(()=>{if(!ie.value)return G.value;const J=G.value.filter(h=>{var le;return h.title.toLowerCase().includes(ie.value.toLowerCase())||((le=h.description)==null?void 0:le.toLowerCase().includes(ie.value.toLowerCase()))||h.children.some(me=>{var X;return me.title.toLowerCase().includes(ie.value.toLowerCase())||((X=me.description)==null?void 0:X.toLowerCase().includes(ie.value.toLowerCase()))})});return B.value&&B.value.focus(),J}),te=async(J=!1)=>{S.start(),p.value=!0;const h=await c({url:"/menu/items"});if(h.success&&h.result){G.value=h.result.data.filter(le=>{var me;return!le.parentId&&le.menuId===((me=P.value)==null?void 0:me.id)});for(let le=0;le<G.value.length;le++)G.value[le].children=h.result.data.filter(me=>{var X;return me.parentId===G.value[le].id&&me.menuId===((X=P.value)==null?void 0:X.id)});W.value=h.result.data.filter(le=>{var me;return le.menuId!==((me=P.value)==null?void 0:me.id)})}J&&(K(),await N()),p.value=!1,S.finish()};te(!0);const Y=r(12),E=r(1),C=J=>{Y.value=J},g={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:ut.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},O=r(null),j=r(!1),ae=r(!1),i=r(!1),M=r(null),F=r(null),f=r(g),$=Le(()=>{const J={title:[{required:!0,message:a("fillRequired")}]};return f.value.targetType===ut.PAGE_LINK?(J.pageId=[{required:!0,message:a("fillRequired")}],J.path=[{required:!0,message:a("fillRequired")}]):f.value.targetType===ut.EXTERNAL_LINK?J.url=[{required:!0,message:a("fillRequired")}]:f.value.targetType===ut.CONTENT_LINK&&(J.contentId=[{required:!0,message:a("fillRequired")}],J.contentType=[{required:!0,message:a("fillRequired")}]),J}),H=(J,h=null)=>{M.value=Ce.cloneDeep(J),O.value=h,J?(f.value=Ce.cloneDeep(J),ae.value=!0):(f.value=Ce.cloneDeep(g),W.value.length>0?i.value=!0:ae.value=!0)},u=async J=>{ee.warning({title:a("confirm"),content:J.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu/items/${J.id}`})).success?(v.success(a("success")),te()):v.error(a("anErrorOccurred"))}})},d=async J=>{var le,me,X,xe,be,de,Re;S.start(),j.value=!0;const h=await c({method:"post",url:"/menu/items",data:{title:J.title,path:J.path,url:J.url,description:J.description,isActive:!0,isVisible:!0,color:J.color,icon:J.icon,position:J.position,targetType:J.targetType,parentId:O.value,menuId:(le=P.value)==null?void 0:le.id,sectionId:J.sectionId,menuItemGroupId:J.menuItemGroupId,pageId:J.pageId}});if(h.failure&&h.error)switch((xe=(X=(me=h.error)==null?void 0:me.response)==null?void 0:X.data)==null?void 0:xe.errorCode){case Qe.FORM_INVALID_DATA:Q((Re=(de=(be=h.error)==null?void 0:be.response)==null?void 0:de.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();j.value=!1,S.finish(),i.value=!1},V=async()=>{var J;return(J=F.value)==null||J.validate(async h=>{var le,me,X,xe,be,de,Re;if(!h){const Ie={title:f.value.title,path:f.value.path,url:f.value.url,description:f.value.description,isActive:f.value.isActive,isVisible:f.value.isVisible,color:f.value.color,icon:f.value.icon,position:f.value.position,targetType:f.value.targetType,parentId:O.value,menuId:(le=P.value)==null?void 0:le.id,sectionId:f.value.sectionId,menuItemGroupId:f.value.menuItemGroupId,pageId:f.value.pageId,contentId:f.value.contentId,contentType:f.value.contentType};if(M.value)if(M.value.title!==f.value.title&&G.value.findIndex(oe=>oe.title==f.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{S.start(),j.value=!0;const oe=await c({method:"put",url:`/menu/items/${M.value.id}`,data:Ie});oe.success&&oe.result.data&&(v.success(a("success")),te()),j.value=!1,S.finish(),ae.value=!1}else if(G.value.findIndex(oe=>oe.title==f.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{S.start(),j.value=!0;const oe=await c({method:"post",url:"/menu/items",data:Ie});if(oe.failure&&oe.error)switch((xe=(X=(me=oe.error)==null?void 0:me.response)==null?void 0:X.data)==null?void 0:xe.errorCode){case Qe.FORM_INVALID_DATA:Q((Re=(de=(be=oe.error)==null?void 0:be.response)==null?void 0:de.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();j.value=!1,S.finish(),ae.value=!1}}}),!1},w=async(J,h)=>{(await c({method:"put",url:"/menu/items/position",data:{items:h}})).success&&te()},I=J=>re("span",{},{default:()=>Z(J.title)}),y=J=>re("span",{},{default:()=>Z(J.name)}),k=J=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(J),_e=J=>{if(J.targetType==ut.EXTERNAL_LINK)return J.url;if(J.targetType==ut.PAGE_LINK)return J.path;if(J.targetType==ut.CONTENT_LINK)switch(J.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},se=async(J,h,le)=>{var me;if(!Z(f.value.title))switch(le){case at.CONTENT_MODEL:f.value.title=m(h,(me=L.value)==null?void 0:me.find(X=>X.id===h.contentModelId));break;case at.NEWS_ARTICLE:f.value.title=h.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:f.value.title=h.name;break}};return(J,h)=>{const le=ge,me=it,X=It,xe=Da,be=Pt,de=zt,Re=lt,Ie=xl("Draggable"),oe=al,we=nl,A=sl,Te=wt,q=Lt,ne=$t,$e=rt,ce=bt,Ee=pt,Ue=Tl,De=Ft,Ne=gl,et=bl,xt=ht,Pe=Ha,Ge=Vt,Fe=ft;return n(),U(ye,null,[t(X,{to:"#alt-action"},{default:l(()=>[t(me,{align:"center"},{default:l(()=>[e(D).length?(n(),x(e(ze),{key:0,type:"primary",onClick:h[0]||(h[0]=ke=>H(null))},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(le,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addMenuItem")),1)]),_:1})):he("",!0)]),_:1})]),_:1}),t(xe,{class:"mt-2 mb-5",onBack:h[2]||(h[2]=ke=>P.value=null)},{title:l(()=>{var ke;return[T(o(e(Z)((ke=P.value)==null?void 0:ke.title)),1)]}),back:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Xe),{ref_key:"searchInputRef",ref:B,value:e(ie),"onUpdate:value":h[1]||(h[1]=ke=>Ve(ie)?ie.value=ke:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(q,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(D)&&e(D).length?(n(),U(ye,{key:0},[t(Ie,{list:e(G),onChange:h[3]||(h[3]=ke=>w(ke,e(G)))},{default:l(()=>[(n(!0),U(ye,null,Oe(e(D).slice((e(E)-1)*e(Y),e(E)*e(Y)),ke=>(n(),x(Re,{key:ke.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(we,{"default-expanded-names":ke.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ke})=>[t(me,{align:"center"},{default:l(()=>[t(be,{size:"small",bordered:!1,type:ke.isActive?"success":"error"},{default:l(()=>[T(o(ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(be,{size:"small",bordered:!1,type:ke.isVisible?"info":"warning"},{default:l(()=>[T(o(ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(de,{vertical:"",class:Ye(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(ze),{size:"small",type:"primary",secondary:e(R),onClick:ot(Tt=>H(ke),["stop"])},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"error",secondary:e(R),onClick:ot(Tt=>u(ke),["stop"])},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"info",secondary:e(R),onClick:ot(Tt=>H(null,ke.id),["stop"])},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:category"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("subMenuItem"))+" ",1),t(be,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[T(o(ke.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),h[27]||(h[27]=_("div",{class:"w-6"},null,-1)),t(e(pe),null,{default:l(()=>[Ke?(n(),x(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),x(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>h[28]||(h[28]=[_("span",null,null,-1)])),default:l(()=>[t(oe,{name:"1"},{header:l(()=>{var Ke;return[_("div",Ps,[t(e(pe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(le,{icon:"fa-solid:grip-lines"})]),_:1}),t(de,{vertical:"",class:Ye(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Ns,[_("div",null,[_("span",Os,o(e(Z)(ke.title)),1),ke.group?(n(),U("span",Rs," Â ("+o(e(Z)((Ke=ke.group)==null?void 0:Ke.name))+") ",1)):he("",!0)]),_("small",qs,o(_e(ke)),1)])])]}),default:l(()=>[ke.description?(n(),U(ye,{key:0},[t(de,{class:Ye([e(b)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),_("div",Fs,o(e(Z)(ke.description)),1)],64)):he("",!0),ke.children.length?(n(),U(ye,{key:1},[t(de,{class:Ye([e(b)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(Ie,{list:ke.children,onChange:Ke=>w(Ke,ke.children)},{default:l(()=>[(n(!0),U(ye,null,Oe(ke.children,Ke=>(n(),x(Re,{key:Ke.id,size:"small",class:"mb-1"},{header:l(()=>[_("div",js,[t(e(pe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(le,{icon:"fa-solid:grip-lines"})]),_:1}),t(de,{vertical:"",class:Ye(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Bs,[_("span",Ks,o(e(Z)(Ke.title)),1),_("small",Ys,o(_e(Ke)),1)])])]),"header-extra":l(()=>[t(me,{align:"center"},{default:l(()=>[t(be,{size:"small",bordered:!1,type:Ke.isActive?"success":"error"},{default:l(()=>[T(o(Ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(be,{size:"small",bordered:!1,type:Ke.isVisible?"info":"warning"},{default:l(()=>[T(o(Ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(de,{vertical:"",class:Ye(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(ze),{size:"small",type:"primary",secondary:e(R),onClick:ot(Tt=>H(Ke,ke.id),["stop"])},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"error",secondary:e(R),onClick:ot(Tt=>u(Ke),["stop"])},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):he("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(A,{page:e(E),"onUpdate:page":h[4]||(h[4]=ke=>Ve(E)?E.value=ke:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(Y),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(G).length/e(Y)),"onUpdate:pageSize":C},{prefix:l(()=>[T(o(`${e(G).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),x(Re,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(b)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Te,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[e(ie)?(n(),x(le,{key:0,icon:"carbon:search"})):(n(),x(le,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(ie)?he("",!0):(n(),U("div",Gs,[t(e(ze),{size:"small",onClick:h[5]||(h[5]=ke=>H(null))},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t($e,{show:e(i),"onUpdate:show":h[6]||(h[6]=ke=>Ve(i)?i.value=ke:null),loading:e(j),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(O)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:h[7]||(h[7]=()=>{i.value=!1,ae.value=!0}),onNegativeClick:h[8]||(h[8]=ke=>i.value=!1)},{default:l(()=>[_("section",Hs,[t(ne,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e(W),ke=>(n(),x(Re,{key:ke.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ws,[_("div",Js,[_("span",Xs,o(e(Z)(ke.title)),1),_("small",Zs,o(_e(ke)),1)]),t(e(ze),{size:"small",type:"primary",secondary:e(R),onClick:Ke=>d(ke)},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t($e,{show:e(ae),"onUpdate:show":h[25]||(h[25]=ke=>Ve(ae)?ae.value=ke:null),loading:e(j),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(M)?e(O)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(O)?e(W).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(W).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:V,onNegativeClick:h[26]||(h[26]=ke=>ae.value=!1)},{default:l(()=>[t(Fe,{ref_key:"formRef",ref:F,class:"mt-5",model:e(f),rules:e($),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"show-label":!1,path:"title"},{default:l(()=>[t(ce,{modelValue:e(f).title,"onUpdate:modelValue":h[9]||(h[9]=ke=>e(f).title=ke),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ee,{"show-label":!1,path:"description"},{default:l(()=>[t(ce,{modelValue:e(f).description,"onUpdate:modelValue":h[10]||(h[10]=ke=>e(f).description=ke),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(Ue,{value:e(f).position,"onUpdate:value":h[11]||(h[11]=ke=>e(f).position=ke),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(De,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(et,{value:e(f).isActive,"onUpdate:value":h[12]||(h[12]=ke=>e(f).isActive=ke),name:"isActive",class:"w-full"},{default:l(()=>[t(Ne,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(Ne,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(De,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(et,{value:e(f).isVisible,"onUpdate:value":h[13]||(h[13]=ke=>e(f).isVisible=ke),name:"isVisible",class:"w-full"},{default:l(()=>[t(Ne,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Ne,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(de,{class:"!my-2"}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Pe,{modelValue:e(f).icon,"onUpdate:modelValue":h[14]||(h[14]=ke=>e(f).icon=ke),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(De,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[_("div",Qs,[e(f).color?(n(),U(ye,{key:0},[t(e(ze),{text:"",type:"error",style:{"font-size":"21px"},onClick:h[15]||(h[15]=ke=>e(f).color="")},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(le,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(de,{vertical:""})],64)):he("",!0),t(e(el),{value:e(f).color,"onUpdate:value":h[16]||(h[16]=ke=>e(f).color=ke),class:"cursor-pointer",theme:e(R)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(De,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Ge,{value:e(f).menuItemGroupId,"onUpdate:value":h[17]||(h[17]=ke=>e(f).menuItemGroupId=ke),options:e(ue),placeholder:e(a)("group"),"render-label":y,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(De,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(et,{value:e(f).targetType,"onUpdate:value":h[18]||(h[18]=ke=>e(f).targetType=ke),class:"w-full",size:"small"},{default:l(()=>[t(Ne,{value:e(ut).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[T(o(e(a)("pageLink")),1)]),_:1},8,["value"]),t(Ne,{value:e(ut).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[T(o(e(a)("contentLink")),1)]),_:1},8,["value"]),t(Ne,{value:e(ut).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[T(o(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(q,{appear:"",name:"slide-fade"},{default:l(()=>[e(f).targetType===e(ut).PAGE_LINK?(n(),U("section",eo,[t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Ge,{value:e(f).pageId,"onUpdate:value":h[19]||(h[19]=ke=>e(f).pageId=ke),options:e(z)||[],placeholder:e(a)("selectPage"),"render-label":I,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(De,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var ke;return[t(Ge,{value:e(f).sectionId,"onUpdate:value":h[20]||(h[20]=Ke=>e(f).sectionId=Ke),options:((ke=(e(z)||[]).find(Ke=>Ke.id===e(f).pageId))==null?void 0:ke.sections)||[],placeholder:e(a)("selectSection"),"render-label":I,disabled:!e(f).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Ee,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Xe),{value:e(f).path,"onUpdate:value":h[21]||(h[21]=ke=>e(f).path=ke),placeholder:e(a)("path"),"allow-input":k,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(f).targetType===e(ut).CONTENT_LINK?(n(),U("section",to,[t(Ls,{"content-type":e(f).contentType,"onUpdate:contentType":h[22]||(h[22]=ke=>e(f).contentType=ke),"content-id":e(f).contentId,"onUpdate:contentId":h[23]||(h[23]=ke=>e(f).contentId=ke),onUpdate:se},null,8,["content-type","content-id"])])):e(f).targetType===e(ut).EXTERNAL_LINK?(n(),U("section",lo,[t(Ee,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Xe),{value:e(f).url,"onUpdate:value":h[24]||(h[24]=ke=>e(f).url=ke),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):he("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),no={class:"flex items-center justify-between"},so={class:"flex flex-col"},oo={class:"text-sm font-bold"},io=Be({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(fe){const{t:a}=He(),{request:c}=Ze(),{pickByTheme:m,tr:Z,displayFormErrors:Q,formatKey:b}=Je(),R=_t(fe,"show"),{menuLocations:z}=je(We()),{loadMenuLocations:ue}=We(),{isLightTheme:L}=je(yt()),K=r(!1),N=async()=>{K.value=!0,await ue(),K.value=!1};N();const S=ct(),v=nt(),ee=st(),P=r(!1),G=r(!1),W=r(null),p=r(null),ie=r({name:"",description:""}),B={name:[{required:!0,message:a("fillRequired")}]},D=E=>{W.value=Ce.cloneDeep(E),ie.value=Ce.cloneDeep(E||{name:"",description:""}),G.value=!0},te=async()=>{var E;return(E=p.value)==null||E.validate(async C=>{var g,O,j,ae,i,M;if(!C){ee.start(),P.value=!0;const F={name:ie.value.name,description:ie.value.description},f=await c({method:W.value?"put":"post",url:W.value?`/menu-locations/${W.value.id}`:"/menu-locations",data:F});if(f.failure&&f.error)switch((j=(O=(g=f.error)==null?void 0:g.response)==null?void 0:O.data)==null?void 0:j.errorCode){case Qe.FORM_INVALID_DATA:Q((M=(i=(ae=f.error)==null?void 0:ae.response)==null?void 0:i.data)==null?void 0:M.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),N(),G.value=!1;P.value=!1,ee.finish()}}),!1},Y=async E=>{S.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-locations/${E.id}`})).success?(v.success(a("success")),N()):v.error(a("anErrorOccurred"))}})};return(E,C)=>{const g=ge,O=pe,j=ze,ae=it,i=wl,M=lt,F=$t,f=wt,$=Yt,H=rt,u=Xe,d=pt,V=bt,w=ft;return n(),U(ye,null,[t(H,{show:R.value,"onUpdate:show":C[2]||(C[2]=I=>R.value=I),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ae,{align:"center"},{default:l(()=>[t(j,{size:"small",type:"primary",disabled:e(K),onClick:C[0]||(C[0]=I=>D(null))},{default:l(()=>[t(O,{class:"mr-1"},{default:l(()=>[t(g,{icon:"carbon:add-alt"})]),_:1}),T(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(j,{size:"small",type:"error",disabled:e(K),onClick:C[1]||(C[1]=I=>R.value=!1)},{default:l(()=>[t(O,{class:"mr-1"},{default:l(()=>[t(g,{icon:"carbon:close"})]),_:1}),T(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t($,{show:e(K)},{default:l(()=>[e(z).length?(n(),x(F,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e(z),I=>(n(),x(M,{key:I.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",no,[_("div",so,[_("span",oo,o(I.name),1),t(i,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[T(o(e(Z)(I.description)),1)]),_:2},1024)]),t(ae,null,{default:l(()=>[t(j,{size:"small",type:"warning",secondary:e(L),onClick:y=>D(I)},{default:l(()=>[t(O,null,{default:l(()=>[t(g,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(j,{size:"small",type:"error",secondary:e(L),onClick:y=>Y(I)},{default:l(()=>[t(O,null,{default:l(()=>[t(g,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),x(M,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(m)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(f,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(O,null,{default:l(()=>[t(g,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(H,{show:e(G),"onUpdate:show":C[5]||(C[5]=I=>Ve(G)?G.value=I:null),loading:e(P),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:C[6]||(C[6]=I=>G.value=!1)},{default:l(()=>[t(w,{ref_key:"formRef",ref:p,model:e(ie),rules:B,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(d,{label:e(a)("key"),path:"name"},{default:l(()=>[t(u,{value:e(ie).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":C[3]||(C[3]=I=>e(ie).name=e(b)(I))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(d,{"show-label":!1,path:"description"},{default:l(()=>[t(V,{modelValue:e(ie).description,"onUpdate:modelValue":C[4]||(C[4]=I=>e(ie).description=I),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ro={key:2},uo={class:"flex items-center"},co={class:"flex flex-col"},po={key:0,class:"text-xs font-normal"},fo={class:"mt-4"},mo=Be({__name:"index",setup(fe){const{t:a}=He(),{request:c}=Ze(),{tr:m,pickByTheme:Z,displayFormErrors:Q,isInDevMode:b,formatKey:R}=Je(),{isLightTheme:z}=je(yt()),{menuLocations:ue}=je(We()),{loadMenuLocations:L}=We(),K=st(),N=nt(),S=ct(),v=r(!1),ee=r(!1),P=r([]),G=async(F=!1)=>{K.start(),v.value=!0;const f=await c({url:"/menus"});f.success&&f.result&&(P.value=f.result.data),F&&await L(),v.value=!1,K.finish()};G(!0);const W=r(12),p=r(1),ie=F=>{W.value=F},B={name:"",title:"",description:"",menuLocationId:void 0},D=r(!1),te=r(!1),Y=r(!1),E=r(null),C=r(B),g={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},O=r(null),j=F=>{O.value=Ce.cloneDeep(F),C.value=Ce.cloneDeep(F||B),D.value=!0},ae=async()=>{var F;return(F=E.value)==null||F.validate(async f=>{var $,H,u,d,V,w;if(!f){K.start(),ee.value=!0;const I={name:C.value.name,title:C.value.title,description:C.value.description,menuLocationId:C.value.menuLocationId},y=await c({method:O.value?"put":"post",url:O.value?`/menus/${O.value.id}`:"/menus",data:I});if(y.failure&&y.error)switch((u=(H=($=y.error)==null?void 0:$.response)==null?void 0:H.data)==null?void 0:u.errorCode){case Qe.FORM_INVALID_DATA:Q((w=(V=(d=y.error)==null?void 0:d.response)==null?void 0:V.data)==null?void 0:w.data);break;default:N.error(a("anErrorOccurred"))}else N.success(a("success")),G(),D.value=!1;ee.value=!1,K.finish()}}),!1},i=async F=>{S.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menus/${F.id}`})).success?(N.success(a("success")),G()):N.error(a("anErrorOccurred"))}})},M=ll("menus-management",()=>({itemsMenu:r(null)}))();return kt(()=>C.value.title,F=>{O.value||C.value.name.length<=21&&(C.value.name=Ka(m(F),{trim:!0,lower:!0,strict:!0}))}),(F,f)=>{const $=ge,H=pe,u=ze,d=it,V=It,w=zt,I=lt,y=sl,k=wt,_e=Lt,se=bt,J=pt,h=Xe,le=Ft,me=Vt,X=ht,xe=ft,be=rt;return n(),U(ye,null,[e(M).itemsMenu?he("",!0):(n(),x(V,{key:0,to:"#alt-action"},{default:l(()=>[t(d,{align:"center"},{default:l(()=>[e(b)?(n(),x(u,{key:0,type:"success",onClick:f[0]||(f[0]=de=>te.value=!0)},{icon:l(()=>[t(H,{size:"18"},{default:l(()=>[t($,{icon:"carbon:template"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("locations")),1)]),_:1})):he("",!0),t(u,{type:"warning",onClick:f[1]||(f[1]=de=>Y.value=!0)},{icon:l(()=>[t(H,{size:"18"},{default:l(()=>[t($,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("groups")),1)]),_:1}),e(P)&&e(P).length?(n(),x(u,{key:1,type:"primary",onClick:f[2]||(f[2]=de=>j(null))},{icon:l(()=>[t(H,{size:"18"},{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addMenu")),1)]),_:1})):he("",!0)]),_:1})]),_:1})),e(M).itemsMenu?(n(),x(ao,{key:1,modelValue:e(M).itemsMenu,"onUpdate:modelValue":f[3]||(f[3]=de=>e(M).itemsMenu=de)},null,8,["modelValue"])):(n(),U("section",ro,[t(_e,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(P)&&e(P).length?(n(),U(ye,{key:0},[(n(!0),U(ye,null,Oe(e(P).slice((e(p)-1)*e(W),e(p)*e(W)),de=>(n(),x(I,{key:de.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Re;return[_("div",uo,[t(d,null,{default:l(()=>[t(u,{size:"small",type:"primary",secondary:e(z),onClick:ot(Ie=>j(de),["stop"])},{default:l(()=>[t(H,null,{default:l(()=>[t($,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(u,{size:"small",type:"error",secondary:e(z),onClick:ot(Ie=>i(de),["stop"])},{default:l(()=>[t(H,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(w,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",co,[_("span",{class:Ye(`${de.location?"text-sm":"text-base"} font-bold`)},o(e(m)(de.title)),3),de.location?(n(),U("small",po,o((Re=de.location)==null?void 0:Re.name),1)):he("",!0)])])]}),"header-extra":l(()=>[t(u,{size:"small",type:"primary",secondary:e(z),onClick:ot(Re=>e(M).itemsMenu=de,["stop"])},{icon:l(()=>[t(H,null,{default:l(()=>[t($,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(y,{page:e(p),"onUpdate:page":f[4]||(f[4]=de=>Ve(p)?p.value=de:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(W),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(P).length/e(W)),"onUpdate:pageSize":ie},{prefix:l(()=>[T(o(`${e(P).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),x(I,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(k,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(H,null,{default:l(()=>[t($,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",fo,[t(u,{size:"small",onClick:f[5]||(f[5]=de=>j(null))},{icon:l(()=>[t(H,null,{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(be,{show:e(D),"onUpdate:show":f[10]||(f[10]=de=>Ve(D)?D.value=de:null),loading:e(ee),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(O)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ae,onNegativeClick:f[11]||(f[11]=de=>D.value=!1)},{default:l(()=>[t(xe,{ref_key:"formRef",ref:E,model:e(C),rules:g,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(J,{"show-label":!1,path:"title"},{default:l(()=>[t(se,{modelValue:e(C).title,"onUpdate:modelValue":f[6]||(f[6]=de=>e(C).title=de),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(J,{"show-label":!1,path:"description"},{default:l(()=>[t(se,{modelValue:e(C).description,"onUpdate:modelValue":f[7]||(f[7]=de=>e(C).description=de),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(X,{"x-gap":"12",span:24},{default:l(()=>[t(le,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(h,{value:e(C).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":f[8]||(f[8]=de=>e(C).name=e(R)(de))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(le,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(me,{value:e(C).menuLocationId,"onUpdate:value":f[9]||(f[9]=de=>e(C).menuLocationId=de),options:e(ue),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(io,{show:e(te),"onUpdate:show":f[12]||(f[12]=de=>Ve(te)?te.value=de:null)},null,8,["show"]),t(Ds,{show:e(Y),"onUpdate:show":f[13]||(f[13]=de=>Ve(Y)?Y.value=de:null)},null,8,["show"])]))],64)}}}),vo="/creopse/assets/video-thumbnail-86f60cc7.svg";var Bt=(fe=>(fe.VERTICAL="vertical",fe.HORIZONTAL="horizontal",fe))(Bt||{}),Ct=(fe=>(fe.SELF_HOSTED="self-hosted",fe.YOUTUBE="youtube",fe))(Ct||{});const _o=()=>{const{t:fe}=He(),a=[{label:fe("horizontal"),value:Bt.HORIZONTAL,tagType:"info"},{label:fe("vertical"),value:Bt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:Z=>{var Q;return((Q=a.find(b=>b.value===Z))==null?void 0:Q.tagType)||"default"},getVideoDisplayTypeLabel:Z=>{var Q;return(Q=a.find(b=>b.value===Z))==null?void 0:Q.label},videoDisplayTypes:a}},yo=ll("video-setting",{state:()=>({settings:[]}),getters:{getSetting:fe=>a=>fe.settings.find(c=>c.key===a),getSettingValue:fe=>(a,c="string")=>{const m=fe.settings.find(Q=>Q.key===a);let Z="";switch(c){case"number":Z=m&&parseInt(m.value)&&!isNaN(parseInt(m.value))?parseInt(m.value):0;break;case"boolean":Z=m&&!isNaN(parseInt(m.value))&&parseInt(m.value)>0;break;case"object":Z=m&&m.value?JSON.parse(m.value):{};break;case"array":Z=m&&m.value?JSON.parse(m.value):[];break;default:Z=m&&m.value?m.value:"";break}return Z}},actions:{async initDefaultSettings(){await this.loadSettings();const fe={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Ze();await a({url:"/video-settings",method:"put",data:fe}),await this.loadSettings()},async loadSettings(){const{request:fe}=Ze(),a=await fe({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),go={key:1,class:"flex items-center gap-3"},bo={key:0,class:"w-full flex items-center justify-between mt-4"},ho={class:"flex items-center gap-3"},ko={key:1,class:"mt-4"},wo={key:0},xo={class:"flex items-center justify-center h-full"},Co=["src"],Io={class:"text-center text-dimgray text-sm"},$o={key:1,class:"flex items-center justify-center"},Vo={class:"mt-5"},To={class:"w-full flex flex-gap-8 items-center justify-start"},zo=["src"],Uo={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Mo=["src"],So=Be({__name:"index",setup(fe){const{t:a,locale:c}=He(),{tr:m,fileUrl:Z,pickByTheme:Q,displayFormErrors:b}=Je(),{videoDisplayTypes:R}=_o(),{request:z}=Ze(),{isLightTheme:ue}=je(yt()),L=st(),K=nt(),N=ct(),S=vt("appConfig"),v=r(""),ee=r(null),P=r(!1),G=r([]),W=ll("videos-management-store",()=>({currentTab:r("all")}))(),p=()=>{C()},ie=r(0),B=r(12),D=r(1),te=Le(()=>`/video-items?pageSize=${B.value}&query=${v.value}&source=${W.currentTab}`),Y=Ie=>{C(`${te.value}&page=${Ie}`)},E=Ie=>{B.value=Ie,C()},C=async(Ie=null,oe=!1)=>{var A,Te,q,ne,$e;P.value=!0,L.start();const we=await z({url:Ie??te.value});we.success&&we.result&&(G.value=((A=we.result.data)==null?void 0:A.videoItems)||[],ie.value=((q=(Te=we.result.data)==null?void 0:Te.meta)==null?void 0:q.total)||0,D.value=(($e=(ne=we.result.data)==null?void 0:ne.meta)==null?void 0:$e.currentPage)||1),L.finish(),P.value=!1};C(null,!0);const g=r(!1),O=r(!1),j=r(null),ae=r(null),i=r({title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""}),M=Le(()=>({title:[{required:i.value.source==Ct.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),F=Ie=>{j.value=Ce.cloneDeep(Ie),Ie?i.value=Ce.cloneDeep(Ie):i.value={title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""},O.value=!0},f=async Ie=>{N.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await z({method:"delete",url:`/video-items/force/${Ie.id}`})).success?(K.success(a("success")),C()):K.error(a("anErrorOccurred"))}})},$=async()=>{var Ie;return(Ie=ae.value)==null||Ie.validate(async oe=>{var we,A,Te,q,ne,$e;if(!oe)if(j.value){L.start(),g.value=!0;const ce={title:i.value.title,description:i.value.description,visible:i.value.visible,source:i.value.source,displayType:i.value.displayType,thumbnail:i.value.thumbnail,path:i.value.path},Ee=await z({method:"put",url:`/video-items/${j.value.id}`,data:ce});Ee.success&&Ee.result.data&&(K.success(a("success")),C(`${te.value}&page=${D.value}`)),g.value=!1,L.finish(),O.value=!1}else{L.start(),g.value=!0;const ce={title:i.value.title,description:i.value.description,visible:i.value.visible,source:i.value.source,displayType:i.value.displayType,thumbnail:i.value.thumbnail,path:i.value.path},Ee=await z({method:"post",url:"/video-items",data:ce});if(Ee.failure&&Ee.error)switch((Te=(A=(we=Ee.error)==null?void 0:we.response)==null?void 0:A.data)==null?void 0:Te.errorCode){case Qe.FORM_INVALID_DATA:b(($e=(ne=(q=Ee.error)==null?void 0:q.response)==null?void 0:ne.data)==null?void 0:$e.data);break;case Qe.REQUEST_PARAMS_MISSING:K.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case Qe.REQUEST_DATA_RETRIEVAL_FAILED:K.error(a("videoDataCantBeRetrieve"));break;case Qe.REQUEST_DATA_ALREADY_EXISTS:K.error(a("videoAlreadyExists"));break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),C(`${te.value}&page=${D.value}`),O.value=!1;g.value=!1,L.finish()}}),!1},H=r(!1),u=r(!1),d=r(""),V=r(""),w=r("classic"),I=r(!1),y=yo(),k=r({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),_e=r(k.value),se=Le(()=>Ce.isEqual(k.value,_e.value)),J=async()=>{g.value=!0;const Ie=await z({url:"/video-settings",method:"put",data:k.value});Ie.success&&Ie.result?K.success(a("success")):K.error(a("unableToUpdateSettings")),await h()},h=async()=>{var Ie;L.start(),g.value=!0,await y.loadSettings(),(Ie=y.settings)==null||Ie.forEach(oe=>{k.value[oe.key]!=null&&(k.value[oe.key]=oe.value)}),_e.value=Ce.cloneDeep(k.value),g.value=!1,L.finish()};h();const le=async()=>{L.start(),g.value=!0,(await z({url:"/video-items/youtube/channel-videos",method:"put"})).success?(K.success(a("success")),await h()):K.error(a("unableToUpdateChannelVideos")),g.value=!1,L.finish()},me=r(!1),X=r(dt()),xe=r({}),be=Le(()=>{let Ie=0;for(const oe in xe.value)xe.value[oe]&&Ie++;return Ie});function de(){xe.value={},C()}const Re=async()=>(be.value?N.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[be.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{g.value=!0,L.start();for(const Ie in xe.value)xe.value[Ie]&&await z({url:`/video-items/force/${Ie}`,method:"delete"});L.finish(),g.value=!1,K.success(a("success")),xe.value={},C(null,!0)}}):K.warning(a("noItemSelected")),!1);return(Ie,oe)=>{var rl,ul;const we=ge,A=pe,Te=ze,q=Gt,ne=It,$e=on,ce=Xe,Ee=kl,Ue=La,De=it,Ne=lt,et=Nt,xt=rn,Pe=ht,Ge=wl,Fe=Pt,ke=Lt,Ke=sl,Tt=Yt,Rt=wt,Ut=pt,Mt=Ft,Me=Vt,gt=bt,jt=tl,pl=ft,ol=rt,il=Kt;return n(),U(ye,null,[t(ne,{to:"#alt-action"},{default:l(()=>[e(W).currentTab=="settings"?(n(),x(Te,{key:0,loading:e(g),disabled:e(se),type:"primary",onClick:J},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),U("div",go,[t(q,{checked:e(me),"onUpdate:checked":[oe[0]||(oe[0]=s=>Ve(me)?me.value=s:null),oe[1]||(oe[1]=s=>{for(const Wt of e(G))Wt.id&&(e(xe)[Wt.id]=s);X.value=("uuidv4"in Ie?Ie.uuidv4:e(dt))()})]},{default:l(()=>[T(o(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(Te,{type:"primary",onClick:oe[2]||(oe[2]=s=>F(null))},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(Ue,{value:e(W).currentTab,"onUpdate:value":[oe[6]||(oe[6]=s=>e(W).currentTab=s),p],type:"card",size:"medium"},Fa({default:l(()=>[t($e,{name:"all"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(we,{icon:"carbon:collapse-all"})]),_:1}),T(" "+o(e(a)("all_")),1)]),_:1}),t($e,{name:e(Ct).SELF_HOSTED},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(we,{icon:"carbon:document-video"})]),_:1}),T(" "+o(e(a)("selfHosted")),1)]),_:1},8,["name"]),t($e,{name:e(Ct).YOUTUBE},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(we,{icon:"carbon:logo-youtube"})]),_:1}),T(" "+o(e(a)("youtube")),1)]),_:1},8,["name"]),t($e,{name:"settings"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(we,{icon:"carbon:settings-adjust"})]),_:1}),T(" "+o(e(a)("settings")),1)]),_:1})]),_:2},[e(W).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Ee,{class:"!w-[250px]"},{default:l(()=>[t(ce,{ref_key:"searchInputRef",ref:ee,value:e(v),"onUpdate:value":[oe[3]||(oe[3]=s=>Ve(v)?v.value=s:null),oe[4]||(oe[4]=s=>{s||C()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(Te,{type:"primary",onClick:oe[5]||(oe[5]=s=>C())},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(be)>0?(n(),U("section",bo,[_("span",null,o(e(a)("nbItemsSelected",[e(be)])),1),_("section",ho,[t(Te,{type:"error",size:"small",onClick:Re},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("delete")),1)]),_:1}),t(Te,{type:"warning",size:"small",onClick:de},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):he("",!0),e(W).currentTab=="settings"?(n(),U("section",ko,[t(Ne,{hoverable:"",embedded:""},{header:l(()=>[T(o(e(a)("youtube")),1)]),default:l(()=>[t(Pe,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("apiKey")),1),t(ce,{value:e(k).youtubeApiKey,"onUpdate:value":oe[7]||(oe[7]=s=>e(k).youtubeApiKey=s),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("autoUpdateChannelVideos")),1),t(xt,{value:e(k).youtubeChannelVideosAutoUpdate,"onUpdate:value":oe[8]||(oe[8]=s=>e(k).youtubeChannelVideosAutoUpdate=s),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>oe[28]||(oe[28]=[_("div",{class:"w-6"},null,-1)])),unchecked:l(()=>oe[29]||(oe[29]=[_("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(k).youtubeChannelVideosAutoUpdate=="1"?(n(),U(ye,{key:0},[t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("channelId")),1),t(ce,{value:e(k).youtubeChannelId,"onUpdate:value":oe[9]||(oe[9]=s=>e(k).youtubeChannelId=s),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("lastUpdate")),1),_("b",null,o(e(k).youtubeLastChannelVideosUpdate?e(Dt)(e(k).youtubeLastChannelVideosUpdate,{locale:e(c),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(Te,{strong:"",circle:"",secondary:e(ue),type:"primary",title:e(a)("refresh"),disabled:e(g),onClick:le},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:restart",class:Ye({"animate-spin":e(g)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):he("",!0)]),_:1})]),_:1})])):(n(),x(Ne,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(G).length&&!e(P)?(n(),U("section",wo,[t(Pe,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),U(ye,null,Oe(e(G),(s,Wt)=>(n(),x(et,{key:Wt},{default:l(()=>[t(ke,{name:"slide-fade",appear:""},{default:l(()=>[t(Ne,{bordered:"",hoverable:""},{cover:l(()=>[_("div",xo,[_("img",{src:s.thumbnailUrl??e(vo),class:"w-full h-[200px] object-cover"},null,8,Co)])]),header:l(()=>[_("div",Io,[t(Ge,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[s.id?(n(),x(q,{key:e(X),checked:e(xe)[s.id],"onUpdate:checked":Jt=>e(xe)[s.id]=Jt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):he("",!0),T(" "+o(e(m)(s.title)),1)]),_:2},1024)])]),action:l(()=>[t(De,{justify:"space-between",align:"center"},{default:l(()=>[t(De,null,{default:l(()=>[t(Fe,{bordered:!1,type:s.visible?"success":"error"},{default:l(()=>[T(o(s.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Fe,{bordered:!1,type:s.displayType==e(Bt).HORIZONTAL?"info":"warning"},{default:l(()=>[T(o(s.displayType==e(Bt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(De,null,{default:l(()=>[t(Te,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{d.value=e(a)("video"),V.value=e(Z)(s.path),w.value=s.source==e(Ct).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),s.source!=e(Ct).YOUTUBE?(n(),x(Te,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Jt=>F(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):he("",!0),t(Te,{ternary:"",circle:"",title:e(a)("delete"),onClick:Jt=>f(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ke,{page:e(D),"onUpdate:page":[oe[10]||(oe[10]=s=>Ve(D)?D.value=s:null),Y],class:"mt-10 justify-center","show-size-picker":"","page-size":e(B),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(ie)/e(B)),"onUpdate:pageSize":E},{prefix:l(()=>[T(o(`${e(ie)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(P)?(n(),U("section",$o,[t(Tt,{size:"medium"})])):(n(),x(Rt,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(ol,{show:e(O),"onUpdate:show":oe[21]||(oe[21]=s=>Ve(O)?O.value=s:null),loading:e(g),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(j)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:$,onNegativeClick:oe[22]||(oe[22]=s=>O.value=!1)},{default:l(()=>[_("div",Vo,[t(pl,{ref_key:"formRef",ref:ae,model:e(i),rules:e(M),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ut,{label:e(a)("source"),path:"source"},{default:l(()=>[t(q,{checked:e(i).source,"onUpdate:checked":oe[11]||(oe[11]=s=>e(i).source=s),"checked-value":e(Ct).YOUTUBE,"unchecked-value":e(Ct).SELF_HOSTED},{default:l(()=>[T(o(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(i).source==e(Ct).YOUTUBE?(n(),x(Pe,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(ce,{value:e(i).path,"onUpdate:value":oe[12]||(oe[12]=s=>e(i).path=s),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Me,{value:e(i).displayType,"onUpdate:value":oe[13]||(oe[13]=s=>e(i).displayType=s),placeholder:e(a)("displayType"),options:e(R),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),U(ye,{key:1},[t(Ut,{"show-label":!1,path:"title"},{default:l(()=>[t(gt,{modelValue:e(i).title,"onUpdate:modelValue":oe[14]||(oe[14]=s=>e(i).title=s),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ut,{"show-label":!1,path:"description"},{default:l(()=>[t(gt,{modelValue:e(i).description,"onUpdate:modelValue":oe[15]||(oe[15]=s=>e(i).description=s),placeholder:e(a)("description"),class:"w-full",type:"textarea",sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Pe,{"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(Te,{type:"primary",onClick:oe[16]||(oe[16]=()=>{H.value=!0})},{default:l(()=>[T(o(e(a)("select")),1)]),_:1}),t(ce,{value:e(i).path?e(Xt)(e(i).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(i).path?(n(),U(ye,{key:0},[t(Te,{type:"primary",ghost:"",onClick:oe[17]||(oe[17]=()=>{d.value=e(a)("video"),V.value=e(Z)(e(i).path),w.value="classic",u.value=!0})},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("play")),1)]),_:1}),t(Te,{type:"primary",ghost:"",onClick:oe[18]||(oe[18]=()=>{e(i).path=""})},{icon:l(()=>[t(A,null,{default:l(()=>[t(we,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("clear")),1)]),_:1})],64)):he("",!0)]),_:1})]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Me,{value:e(i).displayType,"onUpdate:value":oe[19]||(oe[19]=s=>e(i).displayType=s),placeholder:e(a)("displayType"),options:e(R),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(Ut,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[_("div",To,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:oe[20]||(oe[20]=()=>{I.value=!0})},[e(i).thumbnail?(n(),x(jt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:qe("border: 1px dashed "+e(Q)("green","white")),src:e(Z)(e(i).thumbnail||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(Q)("green","white"))},[t(A,{size:64},{default:l(()=>[t(we,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ol,{show:e(u),"onUpdate:show":oe[23]||(oe[23]=s=>Ve(u)?u.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(d)},{default:l(()=>[e(w)==="youtube"?(n(),U("iframe",{key:0,width:"100%",height:"380",src:e(V),frameborder:"0",allowfullscreen:""},null,8,zo)):(n(),U("video",Uo,[_("source",{src:e(V)},null,8,Mo)]))]),_:1},8,["show","title"]),t(il,{show:e(H),"onUpdate:show":oe[24]||(oe[24]=s=>Ve(H)?H.value=s:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((rl=e(S))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[25]||(oe[25]=s=>{e(i).path=s,H.value=!1})},null,8,["show","title","upload-config"]),t(il,{show:e(I),"onUpdate:show":oe[26]||(oe[26]=s=>Ve(I)?I.value=s:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(S))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[27]||(oe[27]=s=>{e(i).thumbnail=s,I.value=!1})},null,8,["show","title","upload-config"])],64)}}});const Ao=Ot(So,[["__scopeId","data-v-27915aaa"]]),{t:Se}=Ma.global,Va=[{key:"maxlength",defaultValue:"",placeholder:Se("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Se("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],Eo={text:Va,textarea:Va,number:[{key:"min",defaultValue:"",placeholder:Se("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Se("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Se("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Se("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"library",defaultValue:"all",placeholder:Se("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}]},{t:Ae}=Ma.global,$l=[{type:"group",label:Ae("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Ae("text"),value:"text"},{label:Ae("i18nText"),value:"i18n-text"},{label:Ae("textarea"),value:"textarea"},{label:Ae("i18nTextarea"),value:"i18n-textarea"},{label:Ae("editor"),value:"editor"},{label:Ae("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Ae("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Ae("number"),value:"number"},{label:Ae("checkbox"),value:"checkbox"}]},{type:"group",label:Ae("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Ae("singleSelect"),value:"single-select"},{label:Ae("multiSelect"),value:"multi-select"}]},{type:"group",label:Ae("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Ae("date"),value:"date"},{label:Ae("daterange"),value:"daterange"},{label:Ae("datetime"),value:"datetime"},{label:Ae("datetimerange"),value:"datetimerange"},{label:Ae("year"),value:"year"},{label:Ae("yearrange"),value:"yearrange"},{label:Ae("month"),value:"month"},{label:Ae("monthrange"),value:"monthrange"},{label:Ae("quarter"),value:"quarter"},{label:Ae("quarterrange"),value:"quarterrange"},{label:Ae("week"),value:"week"}]},{type:"group",label:Ae("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Ae("image"),value:"image"},{label:Ae("gallery"),value:"gallery"},{label:Ae("audio"),value:"audio"},{label:Ae("video"),value:"video"},{label:Ae("document"),value:"document"},{label:Ae("file"),value:"file"}]},{type:"group",label:Ae("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Ae("newsArticle"),value:"news-article"},{label:Ae("newsArticles"),value:"news-articles"},{label:Ae("newsCategory"),value:"news-category"},{label:Ae("newsCategories"),value:"news-categories"},{label:Ae("newsTag"),value:"news-tag"},{label:Ae("newsTags"),value:"news-tags"}]},{type:"group",label:Ae("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Ae("icon"),value:"icon"},{label:Ae("icons"),value:"icons"},{label:Ae("color"),value:"color"}]},{type:"group",label:Ae("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Ae("contentItem"),value:"content-model-item"},{label:Ae("contentItems"),value:"content-model-items"},{label:Ae("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Ae("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Ae("list"),value:"list"},{label:Ae("i18nList"),value:"i18n-list"},{label:Ae("albums"),value:"albums"}]}],Do={class:"flex items-center justify-between w-full"},Lo={class:"text-base font-semibold"},Po={class:"text-xs text-slate-400"},No={class:"text-xs text-slate-400"},Oo={class:"text-xs text-slate-400"},Ro={class:"text-xs text-slate-400"},qo={key:0},Fo={class:"text-xs text-slate-400"},jo={key:1},Bo={class:"text-xs text-slate-400"},Ko={key:2},Yo={class:"text-xs text-slate-400"},Go={key:3},Ho={class:"text-xs text-slate-400"},Wo={key:0,class:"w-full flex items-center"},Jo={class:"w-full flex items-center"},Xo={class:"w-full"},Zo={class:"text-sm"},Qo=Be({__name:"Fields",props:Ht({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(fe){const{t:a}=He(),{tr:c,formatKey:m,pickByTheme:Z}=Je(),{isLightTheme:Q}=je(yt()),{contentModels:b}=je(We()),R=fe,z=_t(fe,"modelValue"),ue=C=>{for(const g of $l){const O=g.children.find(j=>j.value===C);if(O)return O.label}return null},L=r(!1),K=r(null),N=r(null),S=r(null),v=r(),ee=(C,g)=>{N.value=S.value=C,K.value=g;for(const O of $l)O.children.find(ae=>ae.value===C)&&(v.value=O.key);L.value=!0},P=C=>{G(C).value=!G(C).value},G=C=>Le({get:()=>C.value===N.value,set:g=>{g?N.value=C.value:N.value=null}}),W=Le(()=>!N.value||N.value===S.value),p=()=>{N.value&&K.value!==null&&(z.value[K.value].type=N.value),L.value=!1},ie=C=>re("div",{class:"flex items-center"},[re(pe,{size:21,class:"text-gray-500"},{default:()=>re(ge,{icon:C.icon})}),re("span",{class:"font-normal ml-2 "},{default:()=>C.label}),re("span",{class:"text-gray-500 ml-1"},{default:()=>`(${C.children.length})`})]),B=vt("renderSelectLabel"),D=vt("removeCollectionField"),te=vt("removeSingleton"),Y=vt("onCreateItemOption"),E=vt("expandedNames",()=>Le(()=>r([]).value));return(C,g)=>{const O=Pt,j=it,ae=ze,i=Xe,M=Nt,F=bt,f=kl,$=ht,H=zt,u=Gt,d=Vt,V=zl,w=Lt,I=Tl,y=al,k=nl,_e=lt,se=Pa,J=Na,h=un,le=La,me=rt;return n(),U(ye,null,[(n(!0),U(ye,null,Oe(z.value,(X,xe)=>(n(),x(_e,{key:`field-${xe}`,size:"small",class:"my-2"},{default:l(()=>[t(k,{"expanded-names":e(E)(R.type=="collection"?`c-${R.parentItemIndex}-f-${xe}`:`s-${xe}`).value,"onUpdate:expandedNames":be=>e(E)(R.type=="collection"?`c-${R.parentItemIndex}-f-${xe}`:`s-${xe}`).value=be,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(y,{name:"1"},{header:l(()=>[_("div",Do,[t(j,null,{default:l(()=>[t(O,{size:"small",type:"info"},{default:l(()=>[T(o(xe+1),1)]),_:2},1024),_("span",Lo,o(e(c)(X.label)),1)]),_:2},1024),t(ae,{size:"small",type:"error",secondary:e(Q),onClick:()=>{R.type==="collection"?e(D)&&e(D)(R.collectionKey,xe):e(te)&&e(te)(xe)}},{default:l(()=>[t(e(pe),{class:"mr-1"},{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1}),T(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t($,{span:24,"x-gap":"6"},{default:l(()=>[t(M,{span:6},{default:l(()=>[_("span",Po,o(e(a)("fieldKey")),1),t(i,{value:X.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":be=>X.key=e(m)(be)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(M,{span:10},{default:l(()=>[t(F,{modelValue:X.label,"onUpdate:modelValue":be=>X.label=be,placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[_("span",No,o(e(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(M,{span:8},{default:l(()=>[_("span",Oo,o(e(a)("type")),1),t(f,null,{default:l(()=>[t(i,{value:ue(X.type),placeholder:e(a)("type"),class:"w-full field-type-input",readonly:"",onClick:be=>ee(X.type,xe)},null,8,["value","placeholder","onClick"]),t(ae,{onClick:be=>ee(X.type,xe)},{icon:l(()=>[t(e(ge),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(H,{class:"!mt-4 !mb-2"}),t($,{span:24,"x-gap":"6"},{default:l(()=>[t(M,{span:10,class:"flex items-center"},{default:l(()=>[t(u,{checked:X.required,"onUpdate:checked":be=>X.required=be,size:"medium"},{default:l(()=>[T(o(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(M,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(X.type)?(n(),U(ye,{key:0},[_("span",Ro,o(e(a)("contentModel")),1),t(d,{value:X.defaultValue,"onUpdate:value":be=>X.defaultValue=be,options:e(b),placeholder:e(a)("contentModel"),"render-label":e(B),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),U(ye,{key:1},[X.type==="color"?(n(),U("div",qo,[_("span",Fo,o(e(a)("defaultValue")),1),t(e(el),{value:X.defaultValue,"onUpdate:value":be=>X.defaultValue=be,class:"cursor-pointer",theme:e(Q)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):X.type==="i18n-text"?(n(),U("div",jo,[t(F,{modelValue:X.defaultValue,"onUpdate:modelValue":be=>X.defaultValue=be,placeholder:e(a)("defaultValue"),type:"text",class:"w-full",sync:""},{label:l(()=>[_("span",Bo,o(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):X.type==="i18n-textarea"?(n(),U("div",Ko,[t(F,{modelValue:X.defaultValue,"onUpdate:modelValue":be=>X.defaultValue=be,placeholder:e(a)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:l(()=>[_("span",Yo,o(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):X.type==="i18n-editor"?(n(),U("div",Go,[t(F,{modelValue:X.defaultValue,"onUpdate:modelValue":be=>X.defaultValue=be,placeholder:e(a)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:l(()=>[_("span",Ho,o(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):(n(),x(i,{key:4,value:X.defaultValue,"onUpdate:value":be=>X.defaultValue=be,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),X.type==="multi-select"||X.type==="single-select"?(n(),x(H,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[T(o(e(a)("options")),1)]),_:1})):he("",!0),t(w,{name:"slide-fade",appear:""},{default:l(()=>[X.type==="multi-select"||X.type==="single-select"?(n(),U("div",Wo,[t(V,{value:X.options,"onUpdate:value":be=>X.options=be,placeholder:e(a)("addOption"),"on-create":be=>e(Y)?e(Y)(be,xe):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[T(o(e(a)("addOption")),1)]),default:l(({value:be})=>[_("div",Jo,[t(i,{value:be.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":de=>be.value=e(m)(de)},null,8,["value","placeholder","onUpdate:value"]),t(F,{modelValue:be.label,"onUpdate:modelValue":de=>be.label=de,placeholder:e(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):he("",!0)]),_:2},1024),(n(!0),U(ye,null,Oe(e(Eo),(be,de,Re)=>(n(),U(ye,{key:Re},[X.type===de?(n(),x(k,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(y,{name:"1"},{header:l(()=>[t(H,{"title-placement":"left",class:"!my-4"},{default:l(()=>[T(o(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(w,{name:"slide-fade",appear:""},{default:l(()=>[_("div",Xo,[(n(!0),U(ye,null,Oe(be,Ie=>(n(),x($,{key:Ie.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(M,{span:10},{default:l(()=>[t(i,{value:Ie.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(M,{span:14},{default:l(()=>[Ie.isNumber?(n(),x(I,{key:0,value:X.settings[Ie.key],"onUpdate:value":oe=>X.settings[Ie.key]=oe,"default-value":Ie.defaultValue?parseInt(Ie.defaultValue):void 0,placeholder:Ie.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),x(i,{key:1,value:X.settings[Ie.key],"onUpdate:value":oe=>X.settings[Ie.key]=oe,"default-value":Ie.defaultValue,placeholder:Ie.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):he("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)),t(me,{show:e(L),"onUpdate:show":g[2]||(g[2]=X=>Ve(L)?L.value=X:null),preset:"card",size:"medium",style:{width:"650px"},title:e(a)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":l(()=>[t(j,{align:"center"},{default:l(()=>[t(ae,{size:"small",type:"success",disabled:e(W),onClick:p},{default:l(()=>[t(e(ge),{icon:"carbon:checkmark",class:"mr-1"}),T(" "+o(e(a)("select")),1)]),_:1},8,["disabled"]),t(ae,{size:"small",type:"error",onClick:g[0]||(g[0]=X=>L.value=!1)},{default:l(()=>[t(e(ge),{icon:"carbon:close",class:"mr-1"}),T(" "+o(e(a)("close")),1)]),_:1})]),_:1})]),default:l(()=>[t(le,{animated:"",type:"line",size:"medium",placement:"left",value:e(v),"onUpdate:value":g[1]||(g[1]=X=>Ve(v)?v.value=X:null),style:{height:"100%"}},{default:l(()=>[(n(!0),U(ye,null,Oe(e($l),(X,xe)=>(n(),x(h,{name:X.key,tab:ie(X),key:xe},{default:l(()=>[t(J,{hoverable:"",clickable:"",bordered:""},{default:l(()=>[(n(!0),U(ye,null,Oe(X.children,be=>(n(),x(se,{class:Ye(G(be).value?`${e(Z)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:be.value,onClick:de=>P(be)},{suffix:l(()=>[t(u,{checked:G(be).value,"onUpdate:checked":de=>G(be).value=de,size:"medium",onClick:de=>P(be)},null,8,["checked","onUpdate:checked","onClick"])]),default:l(()=>[_("span",Zo,o(be.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}});const Ta=Ot(Qo,[["__scopeId","data-v-24eae944"]]),ei={class:"text-base"},ti={key:0},li={key:0},ai={key:0},ni={class:"flex items-center justify-between w-full"},si={class:"text-base font-semibold"},oi={class:"text-xs text-slate-400"},ii={class:"text-xs text-slate-400"},ri={class:"text-xs text-slate-400"},Wa=Be({__name:"index",props:Ht({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(fe){const{t:a}=He(),{tr:c,pickByTheme:m,formatKey:Z}=Je(),{isLightTheme:Q}=je(yt()),{loadContentModels:b}=We();b();const R=fe,z=_t(fe,"show"),ue=st(),L=nt(),K=ct(),N=r(!1),S=r(null),v=r({}),ee=r({}),P={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},G=r(!1),W=r(!1),p=r({}),ie=u=>Le({get:()=>p.value[u]?["1"]:[],set:d=>{p.value[u]=d.length>0}});kt(()=>W.value,u=>{Object.entries(v.value).forEach(([d,V],w)=>{var I;d!=="index"&&(p.value[`c-${w}`]=u,(I=V==null?void 0:V.items)==null||I.forEach((y,k)=>{p.value[`c-${w}-f-${k}`]=u}))})}),kt(()=>G.value,u=>{Object.entries(v.value).forEach(([d,V],w)=>{d==="index"&&(V==null||V.forEach((I,y)=>{p.value[`s-${y}`]=u}))})});const B=Le(()=>Ce.isEqual(v.value,ee.value)),D=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(Ce.cloneDeep(P)):v.value.index=[Ce.cloneDeep(P)]:v.value={index:[Ce.cloneDeep(P)]}},te=u=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(u,1)},Y=()=>{const u=dt();v.value?v.value[u]={key:"",title:"",items:[]}:v.value={[u]:{key:"",title:"",items:[]}}},E=u=>{if(v.value){const{[u]:d,...V}=v.value;v.value=V}},C=u=>{v.value&&v.value[u].items.push(Ce.cloneDeep(P))},g=(u,d)=>{if(v.value){const V=v.value[u];V&&Array.isArray(V.items)&&V.items.splice(d,1)}},O=u=>u.title&&u.key&&u.key!=="index",j=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(u=>u!=="index").length:0,ae=Le(()=>v.value?Object.keys(v.value).filter(u=>u!=="index"):[]),i=u=>ae.value.indexOf(u),M=r(!1),F=async()=>{const u=Ce.cloneDeep(v.value),d=Ce.cloneDeep(v.value);M.value=!1,N.value=!0,ue.start();const V=[];if(Ce.forIn(u,(w,I)=>{I!=="index"&&V.push(w.key)}),Ce.forIn(u,(w,I)=>{if(I!=="index"){const y=Ce.keys(u).filter(k=>k!=="index").indexOf(I);if(w&&w.key){if(w.key==="index")return L.error(a("keyIndexIsReservedInCollections")),M.value=!0,!1;if(V.filter(_e=>_e==w.key).length>1)return L.error(a("collectionKeyIsNotUnique",[w.key])),M.value=!0,!1;if(Array.isArray(w.items))for(const[_e,se]of w.items.entries())if(se.key){if(w.items.filter(h=>h.key===se.key).length>1)return L.error(a("fieldKeyOfCollectionIsNotUnique",[se.key,w.key])),M.value=!0,!1}else return L.error(a("fieldKeyOfCollectionIsRequired",[_e+1,w.key])),M.value=!0,!1}else return L.error(a("collectionKeyIsRequired",[y+1])),M.value=!0,!1}else if(Array.isArray(w))for(const[y,k]of w.entries())if(k.key){if(w.filter(se=>se.key===k.key).length>1)return L.error(a("singletonKeyIsNotUnique",[k.key])),M.value=!0,!1}else return L.error(a("singletonKeyIsRequired",[y+1])),M.value=!0,!1}),M.value){N.value=!1,ue.finish();return}Ce.forIn(d,(w,I)=>{I!=="index"&&I!==w.key&&tn(u,I,w.key)}),await R.updateDataStructure(u),N.value=!1,ue.finish()},f=()=>{Ce.isEqual(v.value,ee.value)?z.value=!1:K.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{z.value=!1}})};kt(()=>R.rawDataStructure,u=>{v.value=u?Ce.cloneDeep(u):{},Ce.forIn(u,(d,V)=>{var w;V!=="index"?(v.value[V].key=V,(w=d==null?void 0:d.items)==null||w.forEach((I,y)=>{v.value[V].items[y].settings||(v.value[V].items[y].settings={})})):d==null||d.forEach((I,y)=>{v.value[V][y].settings||(v.value[V][y].settings={})})}),ee.value=Ce.cloneDeep(v.value)},{immediate:!0,deep:!0});const $=u=>re("span",{},{default:()=>c(u.title)}),H=(u,d)=>({value:`option_${d+1}${u+1}`,label:""});return St("removeCollectionField",g),St("onCreateItemOption",H),St("renderSelectLabel",$),St("removeSingleton",te),St("addSingleton",D),St("expandCollections",W),St("expandSingletons",G),St("expandedNames",ie),(u,d)=>{const V=Oa,w=ge,I=pe,y=ze,k=it,_e=lt,se=$t,J=Nt,h=Pt,le=Xe,me=bt,X=ht,xe=zt,be=dn,de=al,Re=nl,Ie=za;return n(),x(Ie,{modelValue:z.value,"onUpdate:modelValue":d[7]||(d[7]=oe=>z.value=oe),"close-on-esc":!1,closable:!1,onOnSizeChange:d[8]||(d[8]=oe=>{S.value=oe})},{header:l(()=>[_("div",ei,[t(V,{depth:"1"},{default:l(()=>[T(o(e(a)("dataStructure"))+" ",1),u.title?(n(),U("span",ti,"Â -Â "+o(u.title),1)):he("",!0)]),_:1})])]),"header-extra":l(()=>[t(k,{align:"center"},{default:l(()=>[t(y,{type:"success",title:e(a)("save"),loading:e(N),disabled:e(B),onClick:d[0]||(d[0]=oe=>F())},{icon:l(()=>[t(I,null,{default:l(()=>[t(w,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(y,{type:"error",title:e(a)("close"),disabled:e(N),onClick:d[1]||(d[1]=oe=>f())},{icon:l(()=>[t(I,null,{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var oe,we;return[_("section",{style:qe(`min-height: ${((oe=e(S))==null?void 0:oe.windowHeight)-((we=e(S))==null?void 0:we.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(m)("bg-slate-200","bg-zinc-800")}`)},[t(X,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(J,{class:"ml-4 mt-2"},{default:l(()=>{var A,Te;return[t(_e,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var q,ne;return[T(o(e(a)("singletons"))+"Â  ",1),(q=e(v).index)!=null&&q.length?(n(),U("span",li," ("+o((ne=e(v).index)==null?void 0:ne.length)+") ",1)):he("",!0)]}),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(y,{size:"small",type:"primary",secondary:e(Q),onClick:d[2]||(d[2]=q=>G.value=!e(G))},{default:l(()=>[t(I,null,{default:l(()=>[e(G)?(n(),x(w,{key:0,icon:"carbon:collapse-categories"})):(n(),x(w,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(y,{size:"small",type:"primary",secondary:e(Q),onClick:d[3]||(d[3]=q=>D())},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),T(" "+o(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:qe(`max-height: ${((A=e(S))==null?void 0:A.windowHeight)-((Te=e(S))==null?void 0:Te.headerHeight)-100}px`)},{default:l(()=>[t(Ta,{modelValue:e(v).index,"onUpdate:modelValue":d[4]||(d[4]=q=>e(v).index=q),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(J,{class:"mr-4 mt-2"},{default:l(()=>{var A,Te;return[t(_e,{embedded:"",bordered:"",segmented:""},{header:l(()=>[T(o(e(a)("collections"))+"Â  ",1),j()>0?(n(),U("span",ai," ("+o(j())+") ",1)):he("",!0)]),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(y,{size:"small",type:"primary",secondary:e(Q),onClick:d[5]||(d[5]=q=>W.value=!e(W))},{default:l(()=>[t(I,null,{default:l(()=>[e(W)?(n(),x(w,{key:0,icon:"carbon:collapse-categories"})):(n(),x(w,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(y,{size:"small",type:"primary",secondary:e(Q),onClick:d[6]||(d[6]=q=>Y())},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),T(" "+o(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:qe(`max-height: ${((A=e(S))==null?void 0:A.windowHeight)-((Te=e(S))==null?void 0:Te.headerHeight)-100}px`)},{default:l(()=>[(n(!0),U(ye,null,Oe(e(v)||{},(q,ne,$e)=>(n(),U(ye,{key:$e},[ne!="index"?(n(),x(_e,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Re,{"expanded-names":ie(`c-${$e}`).value,"onUpdate:expandedNames":ce=>ie(`c-${$e}`).value=ce,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(de,{name:"1"},{header:l(()=>[_("div",ni,[t(k,null,{default:l(()=>[t(h,{size:"small",type:"success"},{default:l(()=>[T(o(i(ne)+1),1)]),_:2},1024),_("span",si,o(e(c)(q.title)),1)]),_:2},1024),t(y,{size:"small",type:"error",secondary:e(Q),onClick:ce=>E(ne)},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1}),T(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(X,{span:24,"x-gap":"6"},{default:l(()=>[t(J,{span:6},{default:l(()=>[_("span",oi,o(e(a)("fieldKey")),1),t(le,{value:q.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":ce=>q.key=e(Z)(ce)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(J,{span:11},{default:l(()=>[t(me,{modelValue:q.title,"onUpdate:modelValue":ce=>q.title=ce,placeholder:e(a)("title"),class:"w-full",size:"small",sync:""},{label:l(()=>[_("span",ii,o(e(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(J,{span:7},{default:l(()=>[_("span",ri,o(e(a)("actions")),1),t(y,{block:"",size:"small",type:"primary",disabled:!O(q),secondary:e(Q),class:"w-full",onClick:ce=>C(ne)},{default:l(()=>[t(I,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),T(" "+o(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(xe,{class:"!my-4.75"}),O(q)?(n(),x(Ta,{key:0,modelValue:e(v)[ne].items,"onUpdate:modelValue":ce=>e(v)[ne].items=ce,"parent-item-index":$e,"collection-key":ne,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),x(be,{key:1,bordered:"",type:"info"},{default:l(()=>[T(o(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):he("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),ui={class:"flex items-center"},di={class:"text-base"},ci={class:"mt-2"},pi={class:"mt-2 text-xs"},fi=Be({__name:"index",setup(fe){const{t:a}=He(),{request:c}=Ze(),{tr:m,pickByTheme:Z,displayFormErrors:Q,isInDevMode:b}=Je(),{sections:R}=je(We()),{loadSections:z}=We(),{isLightTheme:ue}=je(yt()),L=st(),K=nt(),N=r(!1);z();const S=r(12),v=r(1),ee=O=>{S.value=O},P={name:"",title:"",content:"",slug:""},G=r(!1),W=r(null),p=r(P),ie={title:[{required:!0,message:a("fillRequired")}]},B=r(null),D=O=>{B.value=Ce.cloneDeep(O),p.value=Ce.cloneDeep(O||P),G.value=!0},te=async()=>{var O;return(O=W.value)==null||O.validate(async j=>{var ae,i,M,F,f,$;if(!j){L.start(),N.value=!0;const H={title:p.value.title};B.value||(H.name=Ce.startCase(Ce.camelCase(m(p.value.title))).replace(/\s+/g,""));const u=await c({method:B.value?"put":"post",url:B.value?`/sections/${B.value.slug}`:"/sections",data:H});if(u.failure&&u.error)switch((M=(i=(ae=u.error)==null?void 0:ae.response)==null?void 0:i.data)==null?void 0:M.errorCode){case Qe.FORM_INVALID_DATA:Q(($=(f=(F=u.error)==null?void 0:F.response)==null?void 0:f.data)==null?void 0:$.data);break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),z(),G.value=!1;N.value=!1,L.finish()}}),!1},Y=r(null),E=r(!1),C=async O=>{var ae;N.value=!0,L.start();const j=await c({url:`/sections/${(ae=Y.value)==null?void 0:ae.slug}`,method:"put",data:{dataStructure:O}});j.success&&j.result?(K.success(a("success")),z(),g(j.result.data)):K.error(a("anErrorOccurred")),N.value=!1,L.finish()},g=O=>{Y.value=O,E.value=!0};return(O,j)=>{var se,J;const ae=ge,i=pe,M=ze,F=it,f=zt,$=Pt,H=al,u=nl,d=lt,V=sl,w=wt,I=bt,y=pt,k=ft,_e=rt;return n(),U(ye,null,[e(R)&&e(R).length?(n(),U(ye,{key:0},[(n(!0),U(ye,null,Oe(e(R).slice((e(v)-1)*e(S),e(v)*e(S)),h=>(n(),x(d,{key:h.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(u,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:le})=>[t(i,null,{default:l(()=>[le?(n(),x(ae,{key:0,icon:"fa-solid:chevron-left"})):(n(),x(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>j[5]||(j[5]=[_("span",null,null,-1)])),default:l(()=>[t(H,{name:"1"},{header:l(()=>[_("div",ui,[t(F,null,{default:l(()=>[e(b)?(n(),x(M,{key:0,size:"small",type:"primary",secondary:e(ue),onClick:ot(le=>g(h),["stop"])},{default:l(()=>[t(i,{class:"mr-1"},{default:l(()=>[t(ae,{icon:"carbon:data-1"})]),_:1}),T(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):he("",!0),t(M,{size:"small",type:"primary",secondary:e(ue),onClick:ot(le=>D(h),["stop"])},{default:l(()=>[t(i,null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(f,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",di,o(e(m)(h.title)),1)])]),default:l(()=>[_("div",null,o(e(a)("sectionUsedInXPages",[h.pagesCount])),1),_("section",ci,[(n(!0),U(ye,null,Oe(h.pages,le=>(n(),x($,{key:le.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[T(o(e(m)(le.title)),1)]),_:2},1024))),128))]),_("div",pi,[T(o(e(a)("dataRetrievalSlug"))+": ",1),_("b",null,o(h.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,{page:e(v),"onUpdate:page":j[0]||(j[0]=h=>Ve(v)?v.value=h:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(S),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(R).length/e(S)),"onUpdate:pageSize":ee},{prefix:l(()=>[T(o(`${e(R).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),x(d,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(w,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(i,null,{default:l(()=>[t(ae,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(_e,{show:e(G),"onUpdate:show":j[2]||(j[2]=h=>Ve(G)?G.value=h:null),loading:e(N),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(B)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:j[3]||(j[3]=h=>G.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:W,model:e(p),rules:ie,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(y,{"show-label":!1,path:"title",class:"mt-5"},{default:l(()=>[t(I,{modelValue:e(p).title,"onUpdate:modelValue":j[1]||(j[1]=h=>e(p).title=h),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Wa,{show:e(E),"onUpdate:show":j[4]||(j[4]=h=>Ve(E)?E.value=h:null),title:e(m)((se=e(Y))==null?void 0:se.title),"raw-data-structure":(J=e(Y))==null?void 0:J.dataStructure,"update-data-structure":C},null,8,["show","title","raw-data-structure"])],64)}}}),mi={class:"flex items-center justify-center"},vi=Be({__name:"Email",setup(fe){const a=st(),c=nt(),m=ct(),{displayFormErrors:Z}=Je(),{request:Q}=Ze(),{t:b,locale:R}=He(),z=r(!1),ue=r([]),L=r(""),K=r(),N={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${b("total")}: ${u}`})},S=[{type:"selection"},{title:b("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.email})}},{title:b("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Dt(u.updatedAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Dt(u.createdAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:K,placeholder:b("search"),value:L.value,onInput:u=>{L.value=u}},{suffix:()=>re(pe,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{D(u)},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{m.warning({title:b("confirm"),content:b("confirmDeleteEmailAddress"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await Q({method:"delete",url:`/newsletter/emails/${u.id}`})).success?(c.success(b("success")),ee()):c.error(b("anErrorOccurred"))}})},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!L.value)return ue.value;const u=ue.value.filter(d=>d.email.toLowerCase().includes(L.value.toLowerCase()));return K.value&&K.value.focus(),u}),ee=async()=>{z.value=!0;const u=await Q({url:"/newsletter/emails"});u.success&&u.result&&(ue.value=u.result.data),z.value=!1};ee();const P=r(!1),G=r(!1),W=r(null),p=r(null),ie=r({email:""}),B={email:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(u,d){return d&&!Qt.isEmail(d)?new Error(b("invalidEmail")):!0}}]},D=u=>{W.value=Ce.cloneDeep(u),u?ie.value=Ce.cloneDeep(u):ie.value={email:""},G.value=!0},te=async()=>{var u;return(u=p.value)==null||u.validate(async d=>{var V,w,I,y,k,_e;if(!d)if(W.value)if(W.value.email!==ie.value.email&&ue.value.findIndex(se=>se.email==ie.value.email)>-1)c.error(b("sameEmailAddressMessage"));else{a.start(),P.value=!0;const se={email:ie.value.email},J=await Q({method:"put",url:`/newsletter/emails/${W.value.id}`,data:se});J.success&&J.result.data&&(c.success(b("success")),ee()),P.value=!1,a.finish(),G.value=!1}else if(ue.value.findIndex(se=>se.email==ie.value.email)>-1)c.error(b("sameEmailAddressMessage"));else{a.start(),P.value=!0;const se={email:ie.value.email},J=await Q({method:"post",url:"/newsletter/emails",data:se});if(J.failure&&J.error)switch((I=(w=(V=J.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:I.errorCode){case Qe.FORM_INVALID_DATA:Z((_e=(k=(y=J.error)==null?void 0:y.response)==null?void 0:k.data)==null?void 0:_e.data);break;default:c.error(b("anErrorOccurred"))}else c.success(b("success")),ee();P.value=!1,a.finish(),G.value=!1}}),!1};let Y=null;const E=()=>{Y&&(Y.destroy(),Y=null)};ja(E);const C=(u,d)=>d.map(V=>u.map(w=>V[w])),g=()=>{Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),ml(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var d=["no","email","createdAt","updatedAt"];const V=Ce.sortBy(ue.value.map((I,y)=>({no:y+1,...I})),"email"),w=C(d,V);try{u.export_json_to_excel({header:d,data:w,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},O=()=>{Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),ml(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var d=["email"];const V=C(d,[{email:"adresse@email.com"}]);try{u.export_json_to_excel({header:d,data:V,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},j=r(!1),ae=async({results:u})=>{P.value=!0,a.start(),Y||(Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let d=0;d<u.length;d++)u[d].email&&ue.value.findIndex(V=>V.email==u[d].email)==-1&&(Y&&(Y.content=`${b("pleaseBePatient")}: ${d} ${b("task_s")} / ${u.length}`),await Q({method:"post",url:"/newsletter/emails",data:{email:u[d].email}}));await ee(),E(),a.finish(),P.value=!1,j.value=!1},i=r(dt()),M=r([]),F=u=>u.id,f=u=>{M.value=u},$=()=>{M.value=[],i.value=dt()},H=async()=>(M.value.length?m.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[M.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{P.value=!0,a.start();for(let u=0;u<M.value.length;u++)(await Q({url:`/newsletter/emails/${M.value[u]}`,method:"delete"})).success;ee(),a.finish(),P.value=!1,c.success(b("success")),$()}}):c.warning(b("noItemSelected")),!1);return(u,d)=>{const V=Ra,w=it,I=It,y=lt,k=Lt,_e=hl,se=yl,J=pt,h=ft,le=rt,me=Ya;return n(),U(ye,null,[t(I,{to:"#alt-action"},{default:l(()=>[t(w,null,{default:l(()=>[t(V,{onPositiveClick:d[0]||(d[0]=X=>g())},{trigger:l(()=>[t(e(ze),{type:"success"},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:upload"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("export")),1)]),_:1})]),default:l(()=>[T(" "+o(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(ze),{type:"info",onClick:d[1]||(d[1]=X=>j.value=!0)},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("import")),1)]),_:1}),t(e(ze),{type:"primary",onClick:d[2]||(d[2]=X=>D(null))},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(M).length?(n(),x(y,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(w,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(b)("nbItemsSelected",[e(M).length])),1),t(w,{align:"center",justify:"space-between"},{default:l(()=>[t(e(ze),{type:"error",size:"small",onClick:H},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("delete")),1)]),_:1}),t(e(ze),{type:"warning",size:"small",onClick:$},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):he("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),x(_e,{key:e(i),columns:S,data:e(v),pagination:N,loading:e(z),"single-line":!1,"scroll-x":800,"row-key":F,size:"small",striped:"","onUpdate:checkedRowKeys":f},null,8,["data","loading","row-key"]))]),_:1}),t(le,{show:e(G),"onUpdate:show":d[4]||(d[4]=X=>Ve(G)?G.value=X:null),loading:e(P),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(W)?e(b)("editEmailAddress"):e(b)("addEmailAddress"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:te,onNegativeClick:d[5]||(d[5]=X=>G.value=!1)},{default:l(()=>[t(h,{ref_key:"formRef",ref:p,class:"mt-5",model:e(ie),rules:B,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(J,{label:e(b)("emailAddress"),path:"email"},{default:l(()=>[t(e(Xe),{value:e(ie).email,"onUpdate:value":d[3]||(d[3]=X=>e(ie).email=X),placeholder:e(b)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(le,{show:e(j),"onUpdate:show":d[7]||(d[7]=X=>Ve(j)?j.value=X:null),loading:e(P),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(me,{class:"my-5","on-success":ae}),_("div",mi,[t(e(ze),{type:"info",size:"small",onClick:d[6]||(d[6]=X=>O())},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),_i={class:"flex items-center justify-center"},yi=Be({__name:"Phone",setup(fe){const a=st(),c=nt(),m=ct(),{displayFormErrors:Z}=Je(),{request:Q}=Ze(),{t:b,locale:R}=He(),z=r(!1),ue=r([]),L=r(""),K=r(),N={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${b("total")}: ${u}`})},S=[{type:"selection"},{title:b("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.phone})}},{title:b("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Dt(u.updatedAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Dt(u.createdAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:K,placeholder:b("search"),value:L.value,onInput:u=>{L.value=u}},{suffix:()=>re(pe,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{D(u)},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{m.warning({title:b("confirm"),content:b("confirmDeletePhoneNumber"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await Q({method:"delete",url:`/newsletter/phones/${u.id}`})).success?(c.success(b("success")),ee()):c.error(b("anErrorOccurred"))}})},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!L.value)return ue.value;const u=ue.value.filter(d=>d.phone.toLowerCase().includes(L.value.toLowerCase()));return K.value&&K.value.focus(),u}),ee=async()=>{z.value=!0;const u=await Q({url:"/newsletter/phones"});u.success&&u.result&&(ue.value=u.result.data),z.value=!1};ee();const P=r(!1),G=r(!1),W=r(null),p=r(null),ie=r({phone:""}),B={phone:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(u,d){return d&&!kn(d)?new Error(b("invalidNumber")):!0}}]},D=u=>{W.value=Ce.cloneDeep(u),u?ie.value=Ce.cloneDeep(u):ie.value={phone:""},G.value=!0},te=async()=>{var u;return(u=p.value)==null||u.validate(async d=>{var V,w,I,y,k,_e;if(!d)if(W.value)if(W.value.phone!==ie.value.phone.replace(/\s+/g,"")&&ue.value.findIndex(se=>se.phone==ie.value.phone.replace(/\s+/g,""))>-1)c.error(b("samePhoneNumberMessage"));else{a.start(),P.value=!0;const se={phone:ie.value.phone.replace(/\s+/g,"")},J=await Q({method:"put",url:`/newsletter/phones/${W.value.id}`,data:se});J.success&&J.result.data&&(c.success(b("success")),ee()),P.value=!1,a.finish(),G.value=!1}else if(ue.value.findIndex(se=>se.phone==ie.value.phone.replace(/\s+/g,""))>-1)c.error(b("samePhoneNumberMessage"));else{a.start(),P.value=!0;const se={phone:ie.value.phone.replace(/\s+/g,"")},J=await Q({method:"post",url:"/newsletter/phones",data:se});if(J.failure&&J.error)switch((I=(w=(V=J.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:I.errorCode){case Qe.FORM_INVALID_DATA:Z((_e=(k=(y=J.error)==null?void 0:y.response)==null?void 0:k.data)==null?void 0:_e.data);break;default:c.error(b("anErrorOccurred"))}else c.success(b("success")),ee();P.value=!1,a.finish(),G.value=!1}}),!1};let Y=null;const E=()=>{Y&&(Y.destroy(),Y=null)};ja(E);const C=(u,d)=>d.map(V=>u.map(w=>V[w])),g=()=>{Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),ml(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var d=["no","phone","createdAt","updatedAt"];const V=Ce.sortBy(ue.value.map((I,y)=>({no:y+1,...I})),"phone"),w=C(d,V);try{u.export_json_to_excel({header:d,data:w,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},O=()=>{Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),ml(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var d=["phone"];const V=C(d,[{phone:"+22899999999"}]);try{u.export_json_to_excel({header:d,data:V,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},j=r(!1),ae=async({results:u})=>{P.value=!0,a.start(),Y||(Y=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let d=0;d<u.length;d++)u[d].phone&&ue.value.findIndex(V=>V.phone.replace(/\s+/g,"")==u[d].phone.replace(/\s+/g,""))==-1&&(Y&&(Y.content=`${b("pleaseBePatient")}: ${d} ${b("task_s")} / ${u.length}`),await Q({method:"post",url:"/newsletter/phones",data:{phone:u[d].phone.replace(/\s+/g,"")}}));await ee(),E(),a.finish(),P.value=!1,j.value=!1},i=r(dt()),M=r([]),F=u=>u.id,f=u=>{M.value=u},$=()=>{M.value=[],i.value=dt()},H=async()=>(M.value.length?m.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[M.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{P.value=!0,a.start();for(let u=0;u<M.value.length;u++)(await Q({url:`/newsletter/phones/${M.value[u]}`,method:"delete"})).success;ee(),a.finish(),P.value=!1,c.success(b("success")),$()}}):c.warning(b("noItemSelected")),!1);return(u,d)=>{const V=Ra,w=it,I=It,y=lt,k=Lt,_e=hl,se=yl,J=hn,h=pt,le=ft,me=rt,X=Ya;return n(),U(ye,null,[t(I,{to:"#alt-action"},{default:l(()=>[t(w,null,{default:l(()=>[t(V,{onPositiveClick:d[0]||(d[0]=xe=>g())},{trigger:l(()=>[t(e(ze),{type:"success"},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:upload"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("export")),1)]),_:1})]),default:l(()=>[T(" "+o(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(ze),{type:"info",onClick:d[1]||(d[1]=xe=>j.value=!0)},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("import")),1)]),_:1}),t(e(ze),{type:"primary",onClick:d[2]||(d[2]=xe=>D(null))},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(M).length?(n(),x(y,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(w,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(b)("nbItemsSelected",[e(M).length])),1),t(w,{align:"center",justify:"space-between"},{default:l(()=>[t(e(ze),{type:"error",size:"small",onClick:H},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("delete")),1)]),_:1}),t(e(ze),{type:"warning",size:"small",onClick:$},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):he("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),x(_e,{key:e(i),columns:S,data:e(v),pagination:N,loading:e(z),"single-line":!1,"scroll-x":800,"row-key":F,size:"small",striped:"","onUpdate:checkedRowKeys":f},null,8,["data","loading","row-key"]))]),_:1}),t(me,{show:e(G),"onUpdate:show":d[4]||(d[4]=xe=>Ve(G)?G.value=xe:null),loading:e(P),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(W)?e(b)("editPhoneNumber"):e(b)("addPhoneNumber"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:te,onNegativeClick:d[5]||(d[5]=xe=>G.value=!1)},{default:l(()=>[t(le,{ref_key:"formRef",ref:p,class:"mt-5",model:e(ie),rules:B,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(h,{label:e(b)("phone"),path:"phone"},{default:l(()=>[t(J,{modelValue:e(ie).phone,"onUpdate:modelValue":d[3]||(d[3]=xe=>e(ie).phone=xe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(me,{show:e(j),"onUpdate:show":d[7]||(d[7]=xe=>Ve(j)?j.value=xe:null),loading:e(P),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(X,{class:"my-5","on-success":ae}),_("div",_i,[t(e(ze),{type:"info",size:"small",onClick:d[6]||(d[6]=xe=>O())},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),gi="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",bi={class:"text-base"},hi={class:"text-base"},ki=Be({__name:"DataForm",props:Ht({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(fe){const a=fe,c=_t(fe,"show"),m=_t(fe,"data"),Z=st(),Q=nt(),{t:b}=He(),{tr:R,pickByTheme:z,editKeysToCamelCase:ue}=Je(),L=r(null),K=r(!1),N=vt("currentEditItem"),S=Le(()=>Ce.isEqual(m.value,N==null?void 0:N.value)&&Ce.isEqual(ee.value,G.value)),v=()=>{c.value=!1,K.value=!1},ee=r({}),P=r(dt()),G=r({}),W=r(),p=r();kt(()=>c.value,B=>{var D;B&&(Ua(m.value.contentModelData)?ee.value=qt(m.value.contentModelData):ee.value=qt({}),Ce.forIn(ue(((D=a.contentModel)==null?void 0:D.dataStructure)??{}),(te,Y)=>{(!ee.value[Y]||Array.isArray(ee.value[Y])&&ee.value[Y].length==0)&&(Y==="index"?ee.value[Y]=qt({}):ee.value[Y]=qt([]))}),G.value=Ce.cloneDeep(ee.value),P.value=dt())},{immediate:!0});const ie=async()=>{K.value=!0,Z.start();const B=W.value&&await W.value(),D=p.value&&await p.value();(!W.value||B)&&(!p.value||D)?await a.submitData(ee.value):Q.error(b("mandatoryFieldsNotFilledIn")),Z.finish(),K.value=!1};return(B,D)=>{const te=Oa,Y=gl,E=bl,C=ge,g=pe,O=ze,j=it,ae=lt,i=$t,M=Nt,F=ht,f=za;return n(),x(f,{modelValue:c.value,"onUpdate:modelValue":D[3]||(D[3]=$=>c.value=$),"close-on-esc":!1,closable:!1,onOnSizeChange:D[4]||(D[4]=$=>{L.value=$})},{header:l(()=>[_("div",bi,[t(te,{depth:"1"},{default:l(()=>{var $;return[T(o(e(R)(($=a.contentModel)==null?void 0:$.title))+" ",1),_("span",null," Â -Â "+o(e(N)?e(b)("editItem"):e(b)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(j,{align:"center"},{default:l(()=>[_("span",hi,o(e(b)("status"))+":",1),t(E,{value:m.value.isActive,"onUpdate:value":D[0]||(D[0]=$=>m.value.isActive=$),name:"isActive",class:"w-full"},{default:l(()=>[t(Y,{value:!1,label:e(b)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Y,{value:!0,label:e(b)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),D[5]||(D[5]=_("div",{class:"w-4"},null,-1)),t(O,{type:"success",title:e(b)("save"),loading:e(K),disabled:e(S),onClick:D[1]||(D[1]=$=>ie())},{icon:l(()=>[t(g,null,{default:l(()=>[t(C,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("save")),1)]),_:1},8,["title","loading","disabled"]),t(O,{type:"error",title:e(b)("close"),disabled:e(K),onClick:D[2]||(D[2]=$=>v())},{icon:l(()=>[t(g,null,{default:l(()=>[t(C,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var $,H;return[_("section",{style:qe(`min-height: ${(($=e(L))==null?void 0:$.windowHeight)-((H=e(L))==null?void 0:H.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(z)("bg-slate-200","bg-zinc-800")}`)},[t(F,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(M,{class:"ml-4 mt-2"},{default:l(()=>{var u,d;return[t(i,{style:qe(`height: ${((u=e(L))==null?void 0:u.windowHeight)-((d=e(L))==null?void 0:d.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),U(ye,null,Oe(e(ue)((V=B.contentModel)==null?void 0:V.dataStructure),(w,I)=>(n(),U(ye,{key:I},[String(I)==="index"?(n(),x(ae,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),x(_l,{key:`${e(P)}-${I}-form-1`,modelValue:e(ee)[I],"onUpdate:modelValue":y=>e(ee)[I]=y,items:w,onUpdate:(y,k)=>{W.value=k}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):he("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(M,{class:"mr-4 mt-2"},{default:l(()=>{var u,d;return[t(i,{style:qe(`height: ${((u=e(L))==null?void 0:u.windowHeight)-((d=e(L))==null?void 0:d.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),U(ye,null,Oe(e(ue)((V=B.contentModel)==null?void 0:V.dataStructure),(w,I)=>(n(),U(ye,{key:I},[String(I)!=="index"?(n(),x(ae,{key:0,title:e(R)(w.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(O,{quaternary:"",size:"small",onClick:()=>e(ee)[I].push({})},{icon:l(()=>[t(g,null,{default:l(()=>[t(C,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(b)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),U(ye,null,Oe(e(ee)[I],(y,k)=>(n(),x(ae,{key:k,title:String(k+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(O,{type:"error",size:"small",onClick:()=>e(ee)[I].splice(k,1)},{icon:l(()=>[t(g,null,{default:l(()=>[t(C,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),x(_l,{key:`${e(P)}-${I}-${k}-form-2`,modelValue:e(ee)[I][k],"onUpdate:modelValue":_e=>e(ee)[I][k]=_e,items:w.items,onUpdate:(_e,se)=>{p.value=se}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):he("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),wi={class:"flex items-center justify-between"},xi={class:"flex flex-col"},Ci={class:"text-sm font-bold"},Ii={class:"text-xs font-normal"},$i=Be({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Ht(["update"],["update:show"]),setup(fe,{emit:a}){const{t:c}=He(),{request:m}=Ze(),{pickByTheme:Z,tr:Q,displayFormErrors:b,mergeArrays:R}=Je(),{extractItemTitle:z}=cl(),{loadContentModels:ue}=We(),{contentModels:L}=je(We()),{isLightTheme:K}=je(yt()),N=ct(),S=nt(),v=st(),ee=a;ue();const P=_t(fe,"show"),G=r(!1),W=vt("currentEditItem"),p=async F=>{N.warning({title:c("confirm"),content:c("confirmDeleteLink"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{var $,H,u,d,V;v.start(),(await m({method:"put",url:`/content-model/items/${($=W==null?void 0:W.value)==null?void 0:$.id}`,data:{relatedItems:(d=(u=(H=W==null?void 0:W.value)==null?void 0:H.relatedItems)==null?void 0:u.filter(w=>w.id!==F.id))==null?void 0:d.map(w=>w.id)}})).success?(S.success(c("success")),ee("update",(V=W==null?void 0:W.value)==null?void 0:V.id)):S.error(c("anErrorOccurred")),v.finish()}})},ie=F=>{var f;return(f=L.value)==null?void 0:f.find($=>$.id===F.contentModelId)},B=r(!1),D=r(null),te=r({contentModelId:null,itemId:null}),Y={contentModelId:[{required:!0,message:c("fillRequired")}],itemId:[{required:!0,message:c("fillRequired")}]},E=async()=>{var F;return(F=D.value)==null||F.validate(async f=>{var $,H,u,d,V,w,I,y,k,_e;if(!f){v.start(),G.value=!0;const se=((H=($=W==null?void 0:W.value)==null?void 0:$.relatedItems)==null?void 0:H.map(h=>h.id))||[],J=await m({method:"put",url:`/content-model/items/${(u=W==null?void 0:W.value)==null?void 0:u.id}`,data:{relatedItems:[...se,te.value.itemId]}});if(J.failure&&J.error)switch((w=(V=(d=J.error)==null?void 0:d.response)==null?void 0:V.data)==null?void 0:w.errorCode){case Qe.FORM_INVALID_DATA:b((k=(y=(I=J.error)==null?void 0:I.response)==null?void 0:y.data)==null?void 0:k.data);break;default:S.error(c("anErrorOccurred"))}else S.success(c("success")),ee("update",(_e=W==null?void 0:W.value)==null?void 0:_e.id),B.value=!1;G.value=!1,v.finish()}}),!1},C=F=>re("span",{},{default:()=>Q(F.title)}),g=F=>Le(()=>re("span",{},{default:()=>z(F,ie(F))})),O=r(!1),j=r([]),ae=r([]),i=async(F,f)=>{if(!F.length){ae.value=[];return}O.value=!0;const $=await m({url:`/content-model-items/search/${F}/${f}`});$.success&&$.result&&(ae.value=$.result.data),O.value=!1},M=Le(()=>R(j.value,ae.value,"id").filter(F=>{var f;return F.id!==((f=W==null?void 0:W.value)==null?void 0:f.id)}));return(F,f)=>{const $=ge,H=ze,u=it,d=pe,V=lt,w=$t,I=wt,y=Yt,k=rt,_e=Vt,se=pt,J=ft;return n(),U(ye,null,[t(k,{show:P.value,"onUpdate:show":f[2]||(f[2]=h=>P.value=h),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(c)("linkContentModelItems")},{"header-extra":l(()=>[t(u,{align:"center"},{default:l(()=>[t(H,{size:"small",type:"primary",disabled:e(G),onClick:f[0]||(f[0]=h=>B.value=!0)},{default:l(()=>[t($,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+o(e(c)("add")),1)]),_:1},8,["disabled"]),t(H,{size:"small",type:"error",disabled:e(G),onClick:f[1]||(f[1]=h=>P.value=!1)},{default:l(()=>[t($,{icon:"carbon:close",class:"mr-1"}),T(" "+o(e(c)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(y,{show:e(G)},{default:l(()=>{var h,le;return[(le=(h=e(W))==null?void 0:h.relatedItems)!=null&&le.length?(n(),x(w,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var me;return[(n(!0),U(ye,null,Oe((me=e(W))==null?void 0:me.relatedItems,X=>(n(),x(V,{key:X.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var xe;return[_("div",wi,[_("div",xi,[_("span",Ci,o(e(z)(X,ie(X))),1),_("span",Ii,o(e(Q)((xe=ie(X))==null?void 0:xe.title)),1)]),t(u,null,{default:l(()=>[t(H,{size:"small",type:"error",secondary:e(K),onClick:be=>p(X)},{default:l(()=>[t(d,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),x(V,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(I,{description:e(c)("noLinkAdded")},{icon:l(()=>[t(d,null,{default:l(()=>[t($,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(k,{show:e(B),"onUpdate:show":f[6]||(f[6]=h=>Ve(B)?B.value=h:null),loading:e(G),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(c)("addLink"),"positive-text":e(c)("validate"),"negative-text":e(c)("cancel"),onPositiveClick:E,onNegativeClick:f[7]||(f[7]=h=>B.value=!1)},{default:l(()=>[t(J,{ref_key:"formRef",ref:D,model:e(te),rules:Y,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(se,{label:e(c)("contentModel"),path:"contentModelId"},{default:l(()=>[t(_e,{value:e(te).contentModelId,"onUpdate:value":f[3]||(f[3]=h=>e(te).contentModelId=h),options:e(L),placeholder:e(c)("contentModel"),"render-label":C,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(se,{label:e(c)("itemToLink"),path:"itemId"},{default:l(()=>[t(_e,{value:e(te).itemId,"onUpdate:value":f[4]||(f[4]=h=>e(te).itemId=h),options:e(M)||[],placeholder:e(c)("itemToLink"),"render-label":h=>g(h).value,loading:e(O),disabled:!e(te).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f[5]||(f[5]=h=>i(h,e(te).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Vi={key:0,class:"w-full flex items-center justify-between gap-4"},Ti={class:"flex items-center gap-3"},zi={key:0},Ui={class:"flex items-center justify-center h-full"},Mi=["src"],Si={class:"text-center text-dimgray text-sm"},Ai={key:1,class:"flex items-center justify-center"},Ei=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(fe){const{t:a}=He(),{request:c}=Ze(),{extractItemTitle:m}=cl(),{tr:Z,displayFormErrors:Q}=Je(),b=ct(),R=nt(),z=st(),ue=_t(fe,"modelValue"),L=r(!1),K=r(!1),N=r(!1),S=r(!1),v=r([]),ee=r(0),P=r(12),G=r(1),W=Le(()=>{var $;return`/content-model/items?pageSize=${P.value}&contentModelId=${($=ue.value)==null?void 0:$.id}`}),p=$=>{B(`${W.value}&page=${$}`)},ie=$=>{P.value=$,B()},B=async($=null,H=!1)=>{var d,V,w,I,y;L.value=!0,z.start();const u=await c({url:$??W.value});u.success&&u.result&&(v.value=((d=u.result.data)==null?void 0:d.items)||[],ee.value=((w=(V=u.result.data)==null?void 0:V.meta)==null?void 0:w.total)||0,G.value=((y=(I=u.result.data)==null?void 0:I.meta)==null?void 0:y.currentPage)||1),z.finish(),L.value=!1};B(null,!0);const D=r(null),te=r({title:"",contentModelData:"",isActive:!0}),Y=$=>{D.value=Ce.cloneDeep($),$?te.value=Ce.cloneDeep($):te.value={title:"",contentModelData:"",isActive:!0},N.value=!0},E=$=>{D.value=Ce.cloneDeep($),S.value=!0},C=async $=>{await B();const H=v.value.find(u=>u.id===$);H&&E(H)},g=async $=>{b.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-model/items/${$.id}`})).success?(R.success(a("success")),B()):R.error(a("anErrorOccurred"))}})},O=async $=>{var d,V,w,I,y,k,_e;z.start(),K.value=!0;const H={title:te.value.title,contentModelData:$,isActive:te.value.isActive,contentModelId:(d=ue.value)==null?void 0:d.id},u=await c({method:D.value?"put":"post",url:D.value?`/content-model/items/${D.value.id}`:"/content-model/items",data:H});if(u.failure&&u.error)switch((I=(w=(V=u.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:I.errorCode){case Qe.FORM_INVALID_DATA:Q((_e=(k=(y=u.error)==null?void 0:y.response)==null?void 0:k.data)==null?void 0:_e.data);break;default:R.error(a("anErrorOccurred"))}else R.success(a("success")),B(`${W.value}&page=${G.value}`),N.value=!1;K.value=!1,z.finish()},j=r(!1),ae=r(dt()),i=r({}),M=Le(()=>{let $=0;for(const H in i.value)i.value[H]&&$++;return $});function F(){i.value={},B()}const f=async()=>(M.value?b.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[M.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{K.value=!0,z.start();for(const $ in i.value)i.value[$]&&await c({url:`/content-model/items/${$}`,method:"delete"});z.finish(),K.value=!1,R.success(a("success")),i.value={},B(null,!0)}}):R.warning(a("noItemSelected")),!1);return St("currentEditItem",D),($,H)=>{const u=Gt,d=ge,V=pe,w=ze,I=it,y=It,k=Da,_e=wl,se=Pt,J=lt,h=Lt,le=Nt,me=ht,X=sl,xe=Yt,be=wt;return n(),U(ye,null,[t(y,{to:"#alt-action"},{default:l(()=>[t(I,{align:"center"},{default:l(()=>[t(u,{checked:e(j),"onUpdate:checked":[H[0]||(H[0]=de=>Ve(j)?j.value=de:null),H[1]||(H[1]=de=>{for(const Re of e(v))Re.id&&(e(i)[Re.id]=de);ae.value=("uuidv4"in $?$.uuidv4:e(dt))()})],disabled:!e(v).length},{default:l(()=>[T(o(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(w,{type:"primary",onClick:H[2]||(H[2]=de=>Y(null))},{icon:l(()=>[t(V,{size:"18"},{default:l(()=>[t(d,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(k,{class:"mt-2 mb-5",onBack:H[3]||(H[3]=de=>ue.value=null)},{title:l(()=>{var de;return[T(o(e(Z)((de=ue.value)==null?void 0:de.title)),1)]}),back:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(M)>0?(n(),U("section",Vi,[_("span",null,o(e(a)("nbItemsSelected",[e(M)])),1),_("section",Ti,[t(w,{type:"error",size:"small",onClick:f},{icon:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("delete")),1)]),_:1}),t(w,{type:"warning",size:"small",onClick:F},{icon:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):he("",!0)]),_:1}),e(v).length&&!e(L)?(n(),U("section",zi,[t(me,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),U(ye,null,Oe(e(v),(de,Re)=>(n(),x(le,{key:Re},{default:l(()=>[t(h,{name:"slide-fade",appear:""},{default:l(()=>[t(J,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var Ie;return[_("div",Ui,[_("img",{src:((Ie=ue.value)==null?void 0:Ie.imageUrl)??e(gi),class:"w-full h-[200px] object-cover"},null,8,Mi)])]}),header:l(()=>[_("div",Si,[t(_e,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[de.id?(n(),x(u,{key:e(ae),checked:e(i)[de.id],"onUpdate:checked":Ie=>e(i)[de.id]=Ie,class:"mr-1"},null,8,["checked","onUpdate:checked"])):he("",!0),T(" "+o(e(m)(de,ue.value)),1)]),_:2},1024)])]),action:l(()=>[t(I,{justify:"space-between",align:"center"},{default:l(()=>[t(se,{bordered:!1,type:de.isActive?"success":"error"},{default:l(()=>[T(o(de.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(I,null,{default:l(()=>[t(w,{ternary:"",circle:"",title:e(a)("edit"),onClick:Ie=>Y(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(w,{ternary:"",circle:"",title:e(a)("links"),onClick:Ie=>E(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(w,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ie=>g(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(d,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(X,{page:e(G),"onUpdate:page":[H[4]||(H[4]=de=>Ve(G)?G.value=de:null),p],class:"mt-10 justify-center","show-size-picker":"","page-size":e(P),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(ee)/e(P)),"onUpdate:pageSize":ie},{prefix:l(()=>[T(o(`${e(ee)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(L)?(n(),U("section",Ai,[t(xe,{size:"medium"})])):(n(),x(be,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(ki,{show:e(N),"onUpdate:show":H[5]||(H[5]=de=>Ve(N)?N.value=de:null),data:e(te),"onUpdate:data":H[6]||(H[6]=de=>Ve(te)?te.value=de:null),"content-model":ue.value,"submit-data":O},null,8,["show","data","content-model"]),t($i,{show:e(S),"onUpdate:show":H[7]||(H[7]=de=>Ve(S)?S.value=de:null),onUpdate:C},null,8,["show"])],64)}}}),Di={key:2},Li={class:"flex items-center"},Pi={class:"text-base"},Ni={class:"mt-4"},Oi="previews",Ri=Be({__name:"index",setup(fe){const{t:a}=He(),{request:c}=Ze(),{tr:m,pickByTheme:Z,displayFormErrors:Q,fileUrl:b,isInDevMode:R,formatKey:z}=Je(),{isLightTheme:ue}=je(yt()),{contentModels:L}=je(We()),{loadContentModels:K}=We(),N=st(),S=nt(),v=ct(),ee=r(!1),P=r(!1),G=vt("appConfig"),W=async()=>{N.start(),ee.value=!0,await K(),ee.value=!1,N.finish()};W();const p=r(12),ie=r(1),B=V=>{p.value=V},D={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},te=r(!1),Y=r(null),E=r(D),C={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},g=r(null),O=V=>{g.value=Ce.cloneDeep(V),E.value=Ce.cloneDeep(V||D),te.value=!0},j=async()=>{var V;return(V=Y.value)==null||V.validate(async w=>{var I,y,k,_e,se,J;if(!w){N.start(),P.value=!0;const h={name:E.value.name,title:E.value.title,image:E.value.image,description:E.value.description,titleFieldName:E.value.titleFieldName,hasPermalink:E.value.hasPermalink},le=await c({method:g.value?"put":"post",url:g.value?`/content-models/${g.value.id}`:"/content-models",data:h});if(le.failure&&le.error)switch((k=(y=(I=le.error)==null?void 0:I.response)==null?void 0:y.data)==null?void 0:k.errorCode){case Qe.FORM_INVALID_DATA:Q((J=(se=(_e=le.error)==null?void 0:_e.response)==null?void 0:se.data)==null?void 0:J.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),W(),te.value=!1;P.value=!1,N.finish()}}),!1},ae=async V=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-models/${V.id}`})).success?(S.success(a("success")),W()):S.error(a("anErrorOccurred"))}})},i=r(null),M=r(!1),F=async V=>{var I;P.value=!0,N.start();const w=await c({url:`/content-models/${(I=i.value)==null?void 0:I.id}`,method:"put",data:{dataStructure:V}});w.success&&w.result?(S.success(a("success")),W(),f(w.result.data)):S.error(a("anErrorOccurred")),P.value=!1,N.finish()},f=V=>{i.value=V,M.value=!0},$=r(!1),H=async V=>{E.value.image=V,$.value=!1},u=()=>{E.value.image=""},d=ll("content-models-management",()=>({itemsContentModel:r(null)}))();return kt(()=>E.value.title,V=>{g.value||E.value.name.length<=21&&(E.value.name=Ka(m(V),{trim:!0,lower:!0,strict:!0}))}),(V,w)=>{var $e,ce,Ee;const I=ge,y=pe,k=ze,_e=It,se=it,J=zt,h=lt,le=sl,me=wt,X=Lt,xe=bt,be=pt,de=Xe,Re=Nt,Ie=qa,oe=Ft,we=ht,A=Gt,Te=ft,q=rt,ne=Kt;return n(),U(ye,null,[e(d).itemsContentModel?he("",!0):(n(),x(_e,{key:0,to:"#alt-action"},{default:l(()=>[e(L)&&e(L).length?(n(),x(k,{key:0,type:"primary",onClick:w[0]||(w[0]=Ue=>O(null))},{icon:l(()=>[t(y,{size:"18"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addContentModel")),1)]),_:1})):he("",!0)]),_:1})),e(d).itemsContentModel?(n(),x(Ei,{key:1,modelValue:e(d).itemsContentModel,"onUpdate:modelValue":w[1]||(w[1]=Ue=>e(d).itemsContentModel=Ue)},null,8,["modelValue"])):(n(),U("section",Di,[t(X,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(L)&&e(L).length?(n(),U(ye,{key:0},[(n(!0),U(ye,null,Oe(e(L).slice((e(ie)-1)*e(p),e(ie)*e(p)),Ue=>(n(),x(h,{key:Ue.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[_("div",Li,[e(R)?(n(),x(se,{key:0},{default:l(()=>[t(k,{size:"small",type:"primary",secondary:e(ue),onClick:ot(De=>f(Ue),["stop"])},{default:l(()=>[t(y,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:data-1"})]),_:1}),T(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"primary",secondary:e(ue),onClick:ot(De=>O(Ue),["stop"])},{default:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"error",secondary:e(ue),onClick:ot(De=>ae(Ue),["stop"])},{default:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):he("",!0),e(R)?(n(),x(J,{key:1,vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):he("",!0),_("span",Pi,o(e(m)(Ue.title)),1)])]),"header-extra":l(()=>[t(k,{size:"small",type:"primary",secondary:e(ue),onClick:ot(De=>e(d).itemsContentModel=Ue,["stop"])},{icon:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(le,{page:e(ie),"onUpdate:page":w[2]||(w[2]=Ue=>Ve(ie)?ie.value=Ue:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(p),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(L).length/e(p)),"onUpdate:pageSize":B},{prefix:l(()=>[T(o(`${e(L).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),x(h,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(me,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",Ni,[t(k,{size:"small",onClick:w[3]||(w[3]=Ue=>O(null))},{icon:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(q,{show:e(te),"onUpdate:show":w[11]||(w[11]=Ue=>Ve(te)?te.value=Ue:null),loading:e(P),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(g)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:j,onNegativeClick:w[12]||(w[12]=Ue=>te.value=!1)},{default:l(()=>[t(Te,{ref_key:"formRef",ref:Y,model:e(E),rules:C,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(be,{"show-label":!1,path:"title"},{default:l(()=>[t(xe,{modelValue:e(E).title,"onUpdate:modelValue":w[4]||(w[4]=Ue=>e(E).title=Ue),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(o(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(be,{"show-label":!1,path:"description"},{default:l(()=>[t(xe,{modelValue:e(E).description,"onUpdate:modelValue":w[5]||(w[5]=Ue=>e(E).description=Ue),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(o(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(we,{"x-gap":"12",span:24},{default:l(()=>[t(Re,{span:14},{default:l(()=>[t(be,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(de,{value:e(E).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":w[6]||(w[6]=Ue=>e(E).name=e(z)(Ue))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(be,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(de,{value:e(E).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":w[7]||(w[7]=Ue=>e(E).titleFieldName=e(z)(Ue))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(oe,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(se,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(Ie,{class:"cursor-pointer","object-fit":"cover",style:qe("border: 1px dashed "+e(Z)("green","white")),size:150,src:e(b)(e(E).image||""),onClick:w[8]||(w[8]=Ue=>$.value=!0)},{default:l(()=>[e(E).image?he("",!0):(n(),x(y,{key:0,size:64},{default:l(()=>[t(I,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(E).image?(n(),x(k,{key:0,quaternary:"",onClick:w[9]||(w[9]=Ue=>u())},{icon:l(()=>[t(y,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(be,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(A,{checked:e(E).hasPermalink,"onUpdate:checked":w[10]||(w[10]=Ue=>e(E).hasPermalink=Ue)},{default:l(()=>[T(o(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ne,{show:e($),"onUpdate:show":w[13]||(w[13]=Ue=>Ve($)?$.value=Ue:null),title:e(a)("selectImage"),"upload-config":{folder:Oi,limit:0,maxSize:0,baseUrl:(($e=e(G))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:H},null,8,["show","title","upload-config"]),t(Wa,{show:e(M),"onUpdate:show":w[14]||(w[14]=Ue=>Ve(M)?M.value=Ue:null),title:e(m)((ce=e(i))==null?void 0:ce.title),"raw-data-structure":(Ee=e(i))==null?void 0:Ee.dataStructure,"update-data-structure":F},null,8,["show","title","raw-data-structure"])]))],64)}}});var At=(fe=>(fe.NEWS_TAG="news-tag",fe.NEWS_CATEGORY="news-category",fe.NEWS_ARTICLE="news-article",fe.CONTENT_MODEL="content-model",fe))(At||{});const qi={class:"text-base font-bold"},Fi={class:"text-sm"},ji={class:"text-xs text-slate-400"},Bi={class:"text-xs text-slate-400"},Ki={class:"text-xs text-slate-400"},Yi={class:"text-sm"},Gi={class:"text-xs text-slate-400"},Hi={class:"text-xs text-slate-400"},Wi={class:"text-xs text-slate-400"},Ji={class:"text-sm"},Xi={class:"text-xs text-slate-400"},Zi={class:"text-xs text-slate-400"},Qi={class:"text-xs text-slate-400"},er={class:"text-base font-bold"},tr={class:"text-sm"},lr={class:"text-xs text-slate-400"},ar={class:"text-xs text-slate-400"},nr={class:"text-xs text-slate-400"},sr=Be({__name:"index",setup(fe){const{t:a}=He(),{tr:c}=Je(),{request:m}=Ze(),{contentModels:Z,pages:Q}=je(We()),{loadContentModels:b,loadPages:R}=We(),z=nt(),ue=st(),L=[{pathPrefix:"/news/article",contentType:At.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:At.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:At.NEWS_TAG,contentParam:"slug",pageId:null}],K=r(!1),N=r([]),S=r(L),v=r(),ee=Le(()=>Z.value.filter(B=>B.hasPermalink)),P=async(B=!1)=>{ue.start(),K.value=!0,B&&(await b(),await R());const D=await m({url:"/permalinks"});if(D.success&&D.result){N.value=D.result.data,S.value=Ce.cloneDeep(L);for(let te=0;te<ee.value.length;te++)S.value.push({pathPrefix:`/${ee.value[te].slug}`,contentType:At.CONTENT_MODEL,contentParam:"id",contentId:ee.value[te].id,pageId:null});for(let te=0;te<S.value.length;te++)switch(S.value[te].contentType){case At.NEWS_ARTICLE:case At.NEWS_CATEGORY:case At.NEWS_TAG:{const Y=N.value.find(E=>E.contentType===S.value[te].contentType);Y&&(S.value[te].pathPrefix=Y.pathPrefix,S.value[te].contentParam=Y.contentParam,S.value[te].pageId=Y.pageId,S.value[te].permalinkId=Y.id)}break;case At.CONTENT_MODEL:{const Y=N.value.find(E=>E.contentType===S.value[te].contentType&&E.contentId===S.value[te].contentId);Y&&(S.value[te].pathPrefix=Y.pathPrefix,S.value[te].contentParam=Y.contentParam,S.value[te].pageId=Y.pageId,S.value[te].permalinkId=Y.id)}break}v.value=Ce.cloneDeep(S.value)}K.value=!1,ue.finish()};P(!0);const G=async()=>{ue.start(),K.value=!0,(await m({method:"put",url:"/permalinks",data:S.value})).success&&(z.success(a("success")),P()),K.value=!1,ue.finish()},W=Le(()=>Ce.isEqual(S.value,v.value)),p=B=>re("span",{},{default:()=>c(B.title)}),ie=B=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(B);return(B,D)=>{const te=ge,Y=pe,E=ze,C=It,g=Xe,O=Nt,j=Vt,ae=ht,i=lt,M=al,F=nl,f=zt;return n(),U(ye,null,[t(C,{to:"#alt-action"},{default:l(()=>[t(E,{type:"primary",loading:e(K),disabled:e(W),onClick:D[0]||(D[0]=$=>G())},{icon:l(()=>[t(Y,null,{default:l(()=>[t(te,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(i,{embedded:"",size:"small"},{default:l(()=>[t(F,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:$})=>[t(Y,null,{default:l(()=>[$?(n(),x(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),x(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[10]||(D[10]=[_("span",null,null,-1)])),default:l(()=>[t(M,{name:"1"},{header:l(()=>[_("span",qi,o(e(a)("news")),1)]),default:l(()=>[t(i,{size:"small"},{header:l(()=>[_("span",Fi,o(e(a)("articles")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(O,{span:"10"},{default:l(()=>[_("span",ji,o(e(a)("pathPrefix")),1),t(g,{value:e(S)[0].pathPrefix,"onUpdate:value":D[1]||(D[1]=$=>e(S)[0].pathPrefix=$),"allow-input":ie,size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Bi,o(e(a)("contentParam")),1),t(g,{value:e(S)[0].contentParam,"onUpdate:value":D[2]||(D[2]=$=>e(S)[0].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Ki,o(e(a)("contentPage")),1),t(j,{value:e(S)[0].pageId,"onUpdate:value":D[3]||(D[3]=$=>e(S)[0].pageId=$),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":p,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(i,{size:"small"},{header:l(()=>[_("span",Yi,o(e(a)("categories")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(O,{span:"10"},{default:l(()=>[_("span",Gi,o(e(a)("pathPrefix")),1),t(g,{value:e(S)[1].pathPrefix,"onUpdate:value":D[4]||(D[4]=$=>e(S)[1].pathPrefix=$),"allow-input":ie,size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Hi,o(e(a)("contentParam")),1),t(g,{value:e(S)[1].contentParam,"onUpdate:value":D[5]||(D[5]=$=>e(S)[1].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Wi,o(e(a)("contentPage")),1),t(j,{value:e(S)[1].pageId,"onUpdate:value":D[6]||(D[6]=$=>e(S)[1].pageId=$),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":p,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(i,{size:"small"},{header:l(()=>[_("span",Ji,o(e(a)("tags")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(O,{span:"10"},{default:l(()=>[_("span",Xi,o(e(a)("pathPrefix")),1),t(g,{value:e(S)[2].pathPrefix,"onUpdate:value":D[7]||(D[7]=$=>e(S)[2].pathPrefix=$),"allow-input":ie,size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Zi,o(e(a)("contentParam")),1),t(g,{value:e(S)[2].contentParam,"onUpdate:value":D[8]||(D[8]=$=>e(S)[2].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(O,{span:"7"},{default:l(()=>[_("span",Qi,o(e(a)("contentPage")),1),t(j,{value:e(S)[2].pageId,"onUpdate:value":D[9]||(D[9]=$=>e(S)[2].pageId=$),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":p,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{class:"!my-2"}),e(ee).length&&e(S).length>3?(n(),x(i,{key:0,embedded:"",size:"small"},{default:l(()=>[t(F,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:$})=>[t(Y,null,{default:l(()=>[$?(n(),x(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),x(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[11]||(D[11]=[_("span",null,null,-1)])),default:l(()=>[t(M,{name:"1"},{header:l(()=>[_("span",er,o(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),U(ye,null,Oe(e(ee),($,H)=>(n(),x(i,{key:$.id,size:"small"},{header:l(()=>[_("span",tr,o(e(c)($.title)),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(O,{span:"10"},{default:l(()=>[_("span",lr,o(e(a)("pathPrefix")),1),t(g,{value:e(S)[H+3].pathPrefix,"onUpdate:value":u=>e(S)[H+3].pathPrefix=u,"allow-input":ie,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(O,{span:"7"},{default:l(()=>[_("span",ar,o(e(a)("contentParam")),1),t(g,{value:e(S)[H+3].contentParam,"onUpdate:value":u=>e(S)[H+3].contentParam=u,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(O,{span:"7"},{default:l(()=>[_("span",nr,o(e(a)("contentPage")),1),t(j,{value:e(S)[H+3].pageId,"onUpdate:value":u=>e(S)[H+3].pageId=u,options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":p,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):he("",!0)],64)}}}),or={class:"w-full"},ir=Be({__name:"Campaign",setup(fe){const a=st(),c=nt(),m=ct(),Z=Sa(),{displayFormErrors:Q,ckEditorToolbarItems:b}=Je(),{request:R}=Ze(),{t:z,locale:ue}=He(),L=r(!1),K=r([]),N=r([]),S=r([]),v=r([]),ee=r(""),P=r(),G={pageSize:12,prefix:({itemCount:i})=>re("div",{class:"font-bold"},{default:()=>`${z("total")}: ${i}`})},W=[{title:z("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(i){return re("div",{},{default:()=>i.title})}},{title:z("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(i){return re("small",{},{default:()=>i.subject})}},{title:z("numberOfRecipients"),key:"recipients",width:200,render(i){return re("div",{},{default:()=>i.recipients.length})},sortOrder:!1,sorter:"default"},{title:z("updateAt"),key:"updatedAt",width:150,render(i){return re("div",{},{default:()=>Dt(i.updatedAt,{locale:ue.value,outPattern:"DD MMMM YYYY"})})}},{title:z("createdAt"),key:"createdAt",width:150,render(i){return re("div",{},{default:()=>Dt(i.createdAt,{locale:ue.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:P,placeholder:z("search"),value:ee.value,onInput:i=>{ee.value=i}},{suffix:()=>re(pe,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:175,render(i){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"primary",title:z("history"),onClick:()=>{Y.value=i,te.value=!0},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"mdi:history"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"info",title:z("launchCampaign"),onClick:()=>{const M=m.info({title:z("launchCampaign"),content:z("confirmLaunchCampaign",[i.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:z("yes"),negativeText:z("cancel"),onPositiveClick:async()=>{var H,u,d,V,w,I,y;M.loading=!0;const F=await R({url:"/email",method:"post",data:{title:i.title,subject:i.subject,content:i.content,recipients:i.recipients.filter(k=>Qt.isEmail(k)),tags:[]}}),f=(H=Z.getSettingValue("phone","string"))==null?void 0:H.split(",")[0],$=await R({url:"/sms",method:"post",data:{from:f.replace(/\s+/g,""),content:i.rawContent,recipients:i.recipients.filter(k=>!Qt.isEmail(k))}});if(F.failure&&F.error)switch((V=(d=(u=F.error)==null?void 0:u.response)==null?void 0:d.data)==null?void 0:V.errorCode){case Qe.FORM_INVALID_DATA:c.error(z("invalidData"));break;default:c.error(z("sendingFailed"))}else if($.failure&&$.error)switch((y=(I=(w=$.error)==null?void 0:w.response)==null?void 0:I.data)==null?void 0:y.errorCode){case Qe.FORM_INVALID_DATA:c.error(z("invalidData"));break;default:c.error(z("sendingFailed"))}else{const k=i.history||[];k.push({id:dt(),date:ln(new Date,{locale:ue.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+F.result.message+" Phone: "+$.result.message});const _e=await R({method:"put",url:`/newsletter/campaigns/${i.id}`,data:{history:k}});_e.success&&_e.result.data?(c.success(z("success")),ie()):c.error(z("anErrorOccurred"))}M.loading=!1}})},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"mdi:send"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"warning",title:z("edit"),onClick:()=>{O(i)},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",title:z("delete"),onClick:()=>{m.warning({title:z("confirm"),content:z("confirmDeleteCampaign"),positiveText:z("yes"),negativeText:z("no"),onPositiveClick:async()=>{(await R({method:"delete",url:`/newsletter/campaigns/${i.id}`})).success?(c.success(z("success")),ie()):c.error(z("anErrorOccurred"))}})},renderIcon:()=>re(pe,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],p=Le(()=>{if(!ee.value)return v.value;const i=v.value.filter(M=>M.title.toLowerCase().includes(ee.value.toLowerCase())||M.subject.toLowerCase().includes(ee.value.toLowerCase()));return P.value&&P.value.focus(),i}),ie=async(i=!1)=>{L.value=!0;const M=await R({url:"/newsletter/campaigns"});if(M.success&&M.result&&(v.value=M.result.data),i){const F=await R({url:"/newsletter/emails"});F.success&&F.result&&(K.value=F.result.data);const f=await R({url:"/newsletter/phones"});f.success&&f.result&&(N.value=f.result.data),S.value=[...K.value.map($=>({recipient:$.email,type:"email"})),...N.value.map($=>({recipient:$.phone,type:"phone"}))]}L.value=!1};ie(!0);const B=r(!1),D=r(!1),te=r(!1),Y=r(null),E=r(null),C=r({title:"",subject:"",content:"",rawContent:"",recipients:[]}),g={title:[{required:!0,message:z("fillRequired")}],subject:[{required:!0,message:z("fillRequired")}],content:[{required:!0,message:z("fillRequired")}],rawContent:[{required:!0,message:z("fillRequired")}],recipients:[{required:!0,message:z("fillRequired")}]},O=i=>{Y.value=Ce.cloneDeep(i),i?C.value=Ce.cloneDeep(i):C.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},D.value=!0},j=async()=>{var i;return(i=E.value)==null||i.validate(async M=>{var F,f,$,H,u,d;if(!M)if(Y.value)if(Y.value.title!==C.value.title&&v.value.findIndex(V=>V.title==C.value.title)>-1)c.error(z("sameCampaignTitleMessage"));else{a.start(),B.value=!0;const V={title:C.value.title,subject:C.value.subject,content:C.value.content,rawContent:C.value.rawContent,recipients:C.value.recipients},w=await R({method:"put",url:`/newsletter/campaigns/${Y.value.id}`,data:V});w.success&&w.result.data&&(c.success(z("success")),ie()),B.value=!1,a.finish(),D.value=!1}else if(v.value.findIndex(V=>V.title==C.value.title)>-1)c.error(z("sameCampaignTitleMessage"));else{a.start(),B.value=!0;const V={title:C.value.title,subject:C.value.subject,content:C.value.content,rawContent:C.value.rawContent,recipients:C.value.recipients},w=await R({method:"post",url:"/newsletter/campaigns",data:V});if(w.failure&&w.error)switch(($=(f=(F=w.error)==null?void 0:F.response)==null?void 0:f.data)==null?void 0:$.errorCode){case Qe.FORM_INVALID_DATA:Q((d=(u=(H=w.error)==null?void 0:H.response)==null?void 0:u.data)==null?void 0:d.data);break;default:c.error(z("anErrorOccurred"))}else c.success(z("success")),ie();B.value=!1,a.finish(),D.value=!1}}),!1},ae=(i,M)=>Ce.isEqual(i.slice().sort(),M.slice().sort());return(i,M)=>{const F=It,f=hl,$=yl,H=pt,u=Ba,d=Gt,V=Vt,w=ft,I=rt,y=cn,k=Pa,_e=Na,se=$t,J=wt;return n(),U(ye,null,[t(F,{to:"#alt-action"},{default:l(()=>[t(e(ze),{type:"primary",onClick:M[0]||(M[0]=h=>O(null))},{icon:l(()=>[t(e(pe),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+o(e(z)("addCampaign")),1)]),_:1})]),_:1}),t($,null,{default:l(()=>[t(f,{columns:W,data:e(p),pagination:G,loading:e(L),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(I,{show:e(D),"onUpdate:show":M[9]||(M[9]=h=>Ve(D)?D.value=h:null),loading:e(B),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(Y)?e(z)("editCampaign"):e(z)("addCampaign"),"positive-text":e(z)("validate"),"negative-text":e(z)("cancel"),onPositiveClick:j,onNegativeClick:M[10]||(M[10]=h=>D.value=!1)},{default:l(()=>[t(w,{ref_key:"formRef",ref:E,class:"mt-5",model:e(C),rules:g,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(H,{label:e(z)("title"),path:"title"},{default:l(()=>[t(e(Xe),{value:e(C).title,"onUpdate:value":M[1]||(M[1]=h=>e(C).title=h),placeholder:e(z)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(H,{label:e(z)("subject"),path:"subject"},{default:l(()=>[t(e(Xe),{value:e(C).subject,"onUpdate:value":M[2]||(M[2]=h=>e(C).subject=h),placeholder:e(z)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(H,{label:e(z)("content"),path:"content"},{default:l(()=>[_("div",or,[t(u,{modelValue:e(C).content,"onUpdate:modelValue":M[3]||(M[3]=h=>e(C).content=h),"toolbar-items":e(b),placeholder:e(z)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(H,{label:e(z)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Xe),{value:e(C).rawContent,"onUpdate:value":M[4]||(M[4]=h=>e(C).rawContent=h),placeholder:e(z)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(H,{label:e(z)("recipients"),path:"recipients"},{default:l(()=>[t(V,{value:e(C).recipients,"onUpdate:value":M[8]||(M[8]=h=>e(C).recipients=h),options:e(S),placeholder:e(z)("recipients"),loading:e(L),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(d,{size:"large",class:"w-full","default-checked":e(S).length&&ae(e(C).recipients,e(S).filter(h=>h.type=="email").map(h=>h.recipient)),"onUpdate:checked":M[5]||(M[5]=h=>{h?e(C).recipients=e(S).filter(le=>le.type=="email").map(le=>le.recipient):e(C).recipients=e(C).recipients.filter(le=>!("_v"in i?i._v:e(Qt)).isEmail(le))})},{default:l(()=>[T(o(e(z)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),M[12]||(M[12]=_("div",{class:"h-2"},null,-1)),t(d,{size:"large",class:"w-full","default-checked":e(S).length&&ae(e(C).recipients,e(S).filter(h=>h.type=="phone").map(h=>h.recipient)),"onUpdate:checked":M[6]||(M[6]=h=>{h?e(C).recipients=e(S).filter(le=>le.type=="phone").map(le=>le.recipient):e(C).recipients=e(C).recipients.filter(le=>("_v"in i?i._v:e(Qt)).isEmail(le))})},{default:l(()=>[T(o(e(z)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),M[13]||(M[13]=_("div",{class:"h-2"},null,-1)),t(d,{size:"large",class:"w-full","default-checked":e(S).length&&e(C).recipients.length===e(S).length,"onUpdate:checked":M[7]||(M[7]=h=>{h?e(C).recipients=e(S).filter(le=>le.recipient).map(le=>le.recipient):e(C).recipients=[]})},{default:l(()=>[T(o(e(z)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(I,{show:e(te),"onUpdate:show":M[11]||(M[11]=h=>Ve(te)?te.value=h:null),loading:e(B),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(z)("history")},{default:l(()=>{var h,le;return[(le=(h=e(Y))==null?void 0:h.history)!=null&&le.length?(n(),x(se,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(_e,{hoverable:""},{default:l(()=>{var me;return[(n(!0),U(ye,null,Oe((me=e(Y))==null?void 0:me.history.slice().reverse(),X=>(n(),x(k,{key:X.id},{default:l(()=>[t(y,{title:X.date,"content-style":"margin-top: 10px;"},{default:l(()=>[T(o(X.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),x(J,{key:1,description:e(z)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),rr={id:"header-btn"},ur={key:1,id:"alt-action"},dr={key:"contact-info"},cr={class:"text-xs"},pr={class:"text-xs"},fr={class:"text-xs"},mr={class:"text-xs"},vr={class:"text-xs"},_r={class:"text-xs"},yr={class:"text-xs"},gr={class:"flex items-center gap-2 w-full"},br={key:"appearance"},hr={class:"text-sm"},kr={class:"text-sm"},wr={class:"flex flex-col items-center justify-center text-gray-400"},xr={class:"text-sm"},Cr={class:"flex flex-col items-center justify-center text-gray-400"},Ir={class:"text-sm"},$r={class:"flex flex-col items-center justify-center text-gray-400"},Vr={class:"text-sm"},Tr={class:"flex flex-col items-center justify-center text-gray-400"},zr={class:"text-sm"},Ur={class:"text-sm"},Mr={class:"flex flex-col items-center justify-center text-gray-400"},Sr={class:"text-sm"},Ar={class:"flex flex-col items-center justify-center text-gray-400"},Er={class:"text-sm"},Dr={class:"flex flex-col items-center justify-center text-gray-400"},Lr={class:"text-sm"},Pr={class:"flex flex-col items-center justify-center text-gray-400"},Nr={class:"text-sm"},Or={class:"text-sm"},Rr={class:"flex flex-col items-center justify-center text-gray-400"},qr={class:"text-sm"},Fr={class:"flex flex-col items-center justify-center text-gray-400"},jr={class:"text-sm"},Br={class:"flex items-center justify-between"},Kr={class:"font-bold"},Yr={class:"flex items-center"},Gr={class:"flex items-center justify-between"},Hr={class:"font-bold"},Wr={class:"flex items-center"},Jr={class:"flex items-center justify-between"},Xr={class:"font-bold"},Zr={class:"flex items-center"},Qr={key:"social-networks"},eu={class:"text-xs"},tu={key:"newsletter-email"},lu={key:"newsletter-phone"},au={key:"newsletter-campaign"},nu={key:"ads"},su={key:"videos"},ou={key:"content-models"},iu={key:"menus"},ru={key:"content-permalinks"},uu={key:"page-sections"},du=Be({name:an.CONTENT_MANAGEMENT.NAME}),cu=Be({...du,setup(fe){Vl(we=>({"06bd801f":e(K)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],c=we=>a.includes(we),{t:m}=He(),Z=wn(),Q=ct(),b=nt(),R=st(),{request:z}=Ze(),{displayFormErrors:ue,appPrimaryColor:L,appSecondaryColor:K,pickByTheme:N,fileUrl:S,isLgScreen:v,isMdScreen:ee,isSmScreen:P,isXlScreen:G,is2XlScreen:W,tr:p}=Je(),ie=yt(),B=Sa(),{pages:D}=je(We()),{loadPages:te,loadSections:Y}=We(),E=vt("appConfig"),C=r(!1),g=r({name:"",icon:"",adminIcon:"",oneColorIcon:"",oneColorAdminIcon:"",logo:"",adminLogo:"",oneColorLogo:"",oneColorAdminLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),O=r(g.value),j=ll("content-management",()=>({currentMenuItemKey:r("contact-info")}))(),ae=(we,A)=>()=>re(pe,{color:j.currentMenuItemKey==A?"white":""},{default:()=>re(ge,{icon:we})}),i=(we,A)=>()=>re("span",{class:`${j.currentMenuItemKey==A?"text-white":""}`,id:Ce.camelCase(A)},{default:()=>we}),M=Le(()=>{const we=[{label:i(m("contactInfo"),"contact-info"),key:"contact-info",icon:ae("carbon:identification","contact-info")},{label:i(m("appearance"),"appearance"),key:"appearance",icon:ae("carbon:color-palette","appearance")},{label:i(m("socialNetworks"),"social-networks"),key:"social-networks",icon:ae("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:i(m("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ae("carbon:at","newsletter-email")},{label:i(m("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ae("carbon:phone","newsletter-phone")},{label:i(m("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ae("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:i(m("ads"),"ads"),key:"ads",icon:ae("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:i(m("videos"),"videos"),key:"videos",icon:ae("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:i(m("menusManagement"),"menus"),key:"menus",icon:ae("carbon:menu","menus")},{label:i(m("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ae("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:i(m("contentModels"),"content-models"),key:"content-models",icon:ae("carbon:model-alt","content-models")},{label:i(m("pageSections"),"page-sections"),key:"page-sections",icon:ae("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const A of D.value)we.push({label:i(`${m("page")} ${p(A.title)}`,`${A.slug}-page`),key:`${A.slug}-page`,icon:ae("carbon:document",`${A.slug}-page`)});return we.push({key:"divider",type:"divider"},{label:i(m("addPage"),"add-new-page"),key:"add-new-page",icon:ae("carbon:add-alt","add-new-page")}),we}),F=Le(()=>Ce.isEqual(g.value,O.value)),f=Le(()=>ie.contentLayoutSize.height-200),$=Le(()=>ie.isLightTheme?"light":"dark"),H=r(null),u={email:[{required:!1,message:m("fillRequired")},{trigger:["input"],validator(we,A){return A&&!Qt.isEmail(A)?new Error(m("invalidEmail")):!0}}]},d=r();kt(()=>d.value,we=>{g.value.additionalInfo=JSON.stringify(we||"[]")},{deep:!0});const V=r(null),w={},I=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],y=r("logos"),k=r(!1),_e=async we=>{switch(y.value){case"logos":g.value.logo=we;break;case"icons":g.value.icon=we;break;case"admin-logos":g.value.adminLogo=we;break;case"admin-icons":g.value.adminIcon=we;break;case"monochrome-logos":g.value.oneColorLogo=we;break;case"monochrome-icons":g.value.oneColorIcon=we;break;case"monochrome-admin-logos":g.value.oneColorAdminLogo=we;break;case"monochrome-admin-icons":g.value.oneColorAdminIcon=we;break;case"dark-backgrounds":g.value.adminAuthDarkBg=we;break;case"light-backgrounds":g.value.adminAuthLightBg=we;break}k.value=!1},se={name:"",title:"",content:"",slug:""},J=r(!1),h=r(null),le=r(se),me={title:[{required:!0,message:m("fillRequired")}]},X=r(null),xe=we=>{X.value=Ce.cloneDeep(we),le.value=Ce.cloneDeep(we||se),J.value=!0},be=async()=>{var we;return(we=h.value)==null||we.validate(async A=>{var Te,q,ne,$e,ce,Ee,Ue;if(!A){R.start(),C.value=!0;const De={title:le.value.title};X.value||(De.name=Ce.startCase(Ce.camelCase(p(le.value.title))).replace(/\s+/g,""));const Ne=await z({method:X.value?"put":"post",url:X.value?`/pages/${X.value.slug}`:"/pages",data:De});if(Ne.failure&&Ne.error)switch((ne=(q=(Te=Ne.error)==null?void 0:Te.response)==null?void 0:q.data)==null?void 0:ne.errorCode){case Qe.FORM_INVALID_DATA:ue((Ee=(ce=($e=Ne.error)==null?void 0:$e.response)==null?void 0:ce.data)==null?void 0:Ee.data);break;default:b.error(m("anErrorOccurred"))}else b.success(m("success")),te(),j.currentMenuItemKey=`${(Ue=Ne.result.data)==null?void 0:Ue.slug}-page`,J.value=!1;C.value=!1,R.finish()}}),!1},de=async(we=!1)=>{var A;R.start(),C.value=!0,te(),we&&Y(),await B.loadInformation(),(A=B.items)==null||A.forEach(Te=>{g.value[Te.key]!=null&&(g.value[Te.key]=Te.value)}),O.value=Ce.cloneDeep(g.value);try{d.value=JSON.parse(g.value.additionalInfo||"[]")}catch{d.value=[]}C.value=!1,R.finish()};de(!0),Ul(()=>{Z.params.key&&c(Z.params.key)&&(j.currentMenuItemKey=Z.params.key)});const Re=async()=>{C.value=!0;const we=await z({url:"/app-information",method:"put",data:g.value});we.success&&we.result?b.success(m("success")):b.error(m("unableToUpdateSettings")),await de()},Ie=["contact-info","appearance","social-networks"];kt(()=>j.currentMenuItemKey,(we,A)=>{we==="add-new-page"?(j.currentMenuItemKey=A,xe(null)):Ie.includes(A)&&!Ie.includes(we)&&(F.value||Q.warning({title:m("confirm"),content:m("marketInfoDiscardChangesConfirm"),positiveText:m("yes"),negativeText:m("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{j.currentMenuItemKey=A}}))});const oe=r();return kt(()=>[ee.value,P.value,v.value,G.value],([we,A,Te,q])=>{oe.value=we||A||Te||q,setTimeout(()=>{oe.value=void 0},500)},{immediate:!0}),(we,A)=>{var Mt;const Te=ze,q=it,ne=pn,$e=fn,ce=Xe,Ee=pt,Ue=Ft,De=ht,Ne=bt,et=zl,xt=ft,Pe=lt,Ge=qa,Fe=Nt,ke=zt,Ke=mn,Tt=Ja,Rt=Kt,Ut=rt;return n(),U(ye,null,[t(Tt,null,{"header-extra":l(()=>[t(q,null,{default:l(()=>[_("div",rr,[Ie.includes(e(j).currentMenuItemKey)?(n(),x(Te,{key:0,loading:e(C),disabled:e(F),type:"primary",onClick:Re},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("save")),1)]),_:1},8,["loading","disabled"])):(n(),U("div",ur))])]),_:1})]),default:l(()=>[t(Pe,{embedded:""},{default:l(()=>[t(Ke,{style:qe(`height: ${e(f)}px`)},{default:l(()=>[t(Ke,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t($e,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(oe),"default-collapsed":!e(W),"collapsed-width":64,"native-scrollbar":!1,width:e(W)?300:275},{default:l(()=>[t(ne,{value:e(j).currentMenuItemKey,"onUpdate:value":A[0]||(A[0]=Me=>e(j).currentMenuItemKey=Me),"collapsed-width":64,"collapsed-icon-size":22,options:e(M)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ke,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Qa,{name:"slide-fade"},{default:l(()=>[dl(_("section",dr,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"contactInfoFormRef",ref:H,model:e(g),rules:u,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{path:"name"},{label:l(()=>[_("b",cr,o(e(m)("websiteName")),1)]),default:l(()=>[t(ce,{value:e(g).name,"onUpdate:value":A[1]||(A[1]=Me=>e(g).name=Me),placeholder:e(m)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(Ue,{span:12,path:"email"},{label:l(()=>[_("b",pr,o(e(m)("email")),1)]),default:l(()=>[t(ce,{value:e(g).email,"onUpdate:value":A[2]||(A[2]=Me=>e(g).email=Me),placeholder:e(m)("email"),class:"w-full"},{prefix:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ue,{span:12,path:"phone"},{label:l(()=>[_("b",fr,o(e(m)("phone")),1)]),default:l(()=>[t(ce,{value:e(g).phone,"onUpdate:value":A[3]||(A[3]=Me=>e(g).phone=Me),placeholder:e(m)("phone"),class:"w-full"},{prefix:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"address"},{label:l(()=>[_("span",mr,[_("b",null,o(e(m)("address")),1)])]),default:l(()=>[t(ce,{value:e(g).address,"onUpdate:value":A[4]||(A[4]=Me=>e(g).address=Me),placeholder:e(m)("address"),class:"w-full"},{prefix:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(Ue,{span:12,path:"postalCode"},{label:l(()=>[_("b",vr,o(e(m)("postalCode")),1)]),default:l(()=>[t(ce,{value:e(g).postalCode,"onUpdate:value":A[5]||(A[5]=Me=>e(g).postalCode=Me),placeholder:e(m)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{"show-label":!1,path:"description"},{default:l(()=>[t(Ne,{modelValue:e(g).description,"onUpdate:modelValue":A[6]||(A[6]=Me=>e(g).description=Me),placeholder:e(m)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:l(()=>[_("b",_r,o(e(m)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ee,{path:"additionalInfo"},{label:l(()=>[_("b",yr,o(e(m)("additionalInfo")),1)]),default:l(()=>[t(et,{value:e(d),"onUpdate:value":A[7]||(A[7]=Me=>Ve(d)?d.value=Me:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[T(o(e(m)("add")),1)]),default:l(({value:Me})=>[_("div",gr,[t(ce,{value:Me.name,"onUpdate:value":gt=>Me.name=gt,placeholder:e(m)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(ce,{value:Me.content,"onUpdate:value":gt=>Me.content=gt,placeholder:e(m)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[fl,e(j).currentMenuItemKey==="contact-info"]]),dl(_("section",br,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",hr,o(e(m)("website")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",kr,o(e(m)("logo")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).logo?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).logo),onClick:A[8]||(A[8]=()=>{y.value="logos",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[9]||(A[9]=()=>{y.value="logos",k.value=!0})},[_("div",wr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).logo?(n(),x(Te,{key:2,quaternary:"",onClick:A[10]||(A[10]=()=>e(g).logo="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",xr,o(e(m)("icon")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).icon?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).icon),onClick:A[11]||(A[11]=()=>{y.value="icons",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[12]||(A[12]=()=>{y.value="icons",k.value=!0})},[_("div",Cr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).icon?(n(),x(Te,{key:2,quaternary:"",onClick:A[13]||(A[13]=()=>e(g).icon="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ir,o(e(m)("logoMonochrome")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).oneColorLogo?(n(),x(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).oneColorLogo),onClick:A[14]||(A[14]=()=>{y.value="monochrome-logos",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[15]||(A[15]=()=>{y.value="monochrome-logos",k.value=!0})},[_("div",$r,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).oneColorLogo?(n(),x(Te,{key:2,quaternary:"",onClick:A[16]||(A[16]=()=>e(g).oneColorLogo="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Vr,o(e(m)("iconMonochrome")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).oneColorIcon?(n(),x(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).oneColorIcon),onClick:A[17]||(A[17]=()=>{y.value="monochrome-icons",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[18]||(A[18]=()=>{y.value="monochrome-icons",k.value=!0})},[_("div",Tr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).oneColorIcon?(n(),x(Te,{key:2,quaternary:"",onClick:A[19]||(A[19]=()=>e(g).oneColorIcon="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",zr,o(e(m)("administration")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ur,o(e(m)("logo")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).adminLogo?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).adminLogo),onClick:A[20]||(A[20]=()=>{y.value="admin-logos",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[21]||(A[21]=()=>{y.value="admin-logos",k.value=!0})},[_("div",Mr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).adminLogo?(n(),x(Te,{key:2,quaternary:"",onClick:A[22]||(A[22]=()=>e(g).adminLogo="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Sr,o(e(m)("icon")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).adminIcon?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).adminIcon),onClick:A[23]||(A[23]=()=>{y.value="admin-icons",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[24]||(A[24]=()=>{y.value="admin-icons",k.value=!0})},[_("div",Ar,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).adminIcon?(n(),x(Te,{key:2,quaternary:"",onClick:A[25]||(A[25]=()=>e(g).adminIcon="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Er,o(e(m)("logoMonochrome")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).oneColorAdminLogo?(n(),x(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).oneColorAdminLogo),onClick:A[26]||(A[26]=()=>{y.value="monochrome-admin-logos",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[27]||(A[27]=()=>{y.value="monochrome-admin-logos",k.value=!0})},[_("div",Dr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).oneColorAdminLogo?(n(),x(Te,{key:2,quaternary:"",onClick:A[28]||(A[28]=()=>e(g).oneColorAdminLogo="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Lr,o(e(m)("iconMonochrome")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).oneColorAdminIcon?(n(),x(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).oneColorAdminIcon),onClick:A[29]||(A[29]=()=>{y.value="monochrome-admin-icons",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[30]||(A[30]=()=>{y.value="monochrome-admin-icons",k.value=!0})},[_("div",Pr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).oneColorAdminIcon?(n(),x(Te,{key:2,quaternary:"",onClick:A[31]||(A[31]=()=>e(g).oneColorAdminIcon="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",Nr,o(e(m)("adminAuthPagesBg")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Or,o(e(m)("lightMode")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).adminAuthLightBg?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).adminAuthLightBg),onClick:A[32]||(A[32]=()=>{y.value="light-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[33]||(A[33]=()=>{y.value="light-backgrounds",k.value=!0})},[_("div",Rr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).adminAuthLightBg?(n(),x(Te,{key:2,quaternary:"",onClick:A[34]||(A[34]=()=>e(g).adminAuthLightBg="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",qr,o(e(m)("darkMode")),1)]),default:l(()=>[t(q,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(g).adminAuthDarkBg?(n(),x(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(L),"white")),size:125,src:e(S)(e(g).adminAuthDarkBg),onClick:A[35]||(A[35]=()=>{y.value="dark-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(L),"white")}; width: 125px; height: 125px`),onClick:A[36]||(A[36]=()=>{y.value="dark-backgrounds",k.value=!0})},[_("div",Fr,[t(e(pe),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(m)("import")),1)])],4)),e(g).adminAuthDarkBg?(n(),x(Te,{key:2,quaternary:"",onClick:A[37]||(A[37]=()=>e(g).adminAuthDarkBg="")},{icon:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+o(e(m)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[_("span",jr,o(e(m)("adminColors")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Fe,null,{default:l(()=>[_("div",Br,[_("span",Kr,o(e(m)("baseColor")),1),_("div",Yr,[e(g).primaryColor?(n(),U(ye,{key:0},[t(Te,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[38]||(A[38]=Me=>e(g).primaryColor="")},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(el),{value:e(g).primaryColor,"onUpdate:value":A[39]||(A[39]=Me=>e(g).primaryColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Fe,null,{default:l(()=>[_("div",Gr,[_("span",Hr,o(e(m)("secondaryColor")),1),_("div",Wr,[e(g).secondaryColor?(n(),U(ye,{key:0},[t(Te,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[40]||(A[40]=Me=>e(g).secondaryColor="")},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(el),{value:e(g).secondaryColor,"onUpdate:value":A[41]||(A[41]=Me=>e(g).secondaryColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Fe,null,{default:l(()=>[_("div",Jr,[_("span",Xr,o(e(m)("tertiaryColor")),1),_("div",Zr,[e(g).accentColor?(n(),U(ye,{key:0},[t(Te,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[42]||(A[42]=Me=>e(g).accentColor="")},{default:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(el),{value:e(g).accentColor,"onUpdate:value":A[43]||(A[43]=Me=>e(g).accentColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[fl,e(j).currentMenuItemKey==="appearance"]]),dl(_("section",Qr,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"socialNetworksFormRef",ref:V,model:e(g),rules:w,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(De,{"x-gap":"12",span:24},{default:l(()=>[(n(),U(ye,null,Oe(I,Me=>t(Ue,{key:Me.name,span:12,path:Me.name},{label:l(()=>[_("b",eu,o(e(m)(Me.name)),1)]),default:l(()=>[t(ce,{value:e(g)[Me.name],"onUpdate:value":gt=>e(g)[Me.name]=gt,placeholder:e(m)(Me.name),class:"w-full"},{prefix:l(()=>[t(e(pe),null,{default:l(()=>[t(e(ge),{icon:Me.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[fl,e(j).currentMenuItemKey==="social-networks"]]),e(j).currentMenuItemKey==="newsletter-email"?(n(),U("section",tu,[t(vi)])):he("",!0),e(j).currentMenuItemKey==="newsletter-phone"?(n(),U("section",lu,[t(yi)])):he("",!0),e(j).currentMenuItemKey==="newsletter-campaign"?(n(),U("section",au,[t(ir)])):he("",!0),e(j).currentMenuItemKey==="ads"?(n(),U("section",nu,[t(An)])):he("",!0),e(j).currentMenuItemKey==="videos"?(n(),U("section",su,[t(Ao)])):he("",!0),e(j).currentMenuItemKey==="content-models"?(n(),U("section",ou,[t(Ri)])):he("",!0),e(j).currentMenuItemKey==="menus"?(n(),U("section",iu,[t(mo)])):he("",!0),e(j).currentMenuItemKey==="content-permalinks"?(n(),U("section",ru,[t(sr)])):he("",!0),e(j).currentMenuItemKey==="page-sections"?(n(),U("section",uu,[t(fi)])):he("",!0),(n(!0),U(ye,null,Oe(e(D),(Me,gt)=>(n(),U(ye,{key:`${Me.slug}-page`},[e(j).currentMenuItemKey===`${Me.slug}-page`?(n(),U("section",{key:`${Me.slug}-page`},[t(Ms,{slug:Me.slug,"open-form-modal":xe,onDelete:()=>{e(j).currentMenuItemKey=e(D).length>1?`${e(D)[gt-1].slug}-page`:a[0],e(te)()}},null,8,["slug","onDelete"])])):he("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Rt,{show:e(k),"onUpdate:show":A[44]||(A[44]=Me=>Ve(k)?k.value=Me:null),title:e(m)("selectImage"),"upload-config":{folder:e(y),limit:0,maxSize:0,baseUrl:((Mt=e(E))==null?void 0:Mt.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:_e},null,8,["show","title","upload-config"]),t(Ut,{show:e(J),"onUpdate:show":A[46]||(A[46]=Me=>Ve(J)?J.value=Me:null),loading:e(C),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(X)?e(m)("editPage"):e(m)("addPage"),"positive-text":e(m)("validate"),"negative-text":e(m)("cancel"),onPositiveClick:be,onNegativeClick:A[47]||(A[47]=Me=>J.value=!1)},{default:l(()=>[t(xt,{ref_key:"addPageFormRef",ref:h,model:e(le),rules:me,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"show-label":!1,path:"title",class:"mt-5"},{default:l(()=>[t(Ne,{modelValue:e(le).title,"onUpdate:modelValue":A[45]||(A[45]=Me=>e(le).title=Me),placeholder:e(m)("title"),class:"w-full",sync:"",onKeydown:en(be,["enter"])},{label:l(()=>[T(o(e(m)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const Sc=Ot(cu,[["__scopeId","data-v-6f4d8d7f"]]);export{Sc as default};
