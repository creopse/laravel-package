import{P as h,C as q}from"./ckeditor_ckeditor5-core-CWAtyu9P.js";import{c as O,f as B,M as A,b as L,d as T,e as E,U as D,t as j,u as H,v as Y,w as _}from"./ckeditor_ckeditor5-ui-C7Ma50Jw.js";import{C as I,h as $}from"./ckeditor_ckeditor5-utils-DZhn28Eg.js";import{l as V,m as k,n as W,o as Z}from"./ckeditor_ckeditor5-icons-BkOmZeoU.js";import{i as J,j as Q,k as X}from"./ckeditor_ckeditor5-engine-BHV-Rp_a.js";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class C extends q{attributeKey;constructor(e,o){super(e),this.attributeKey=o}refresh(){const e=this.editor.model,o=e.document;this.value=o.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(o.selection,this.attributeKey)}execute(e={}){const o=this.editor.model,i=o.document.selection,r=e.value,c=e.batch,l=s=>{if(i.isCollapsed)r?s.setSelectionAttribute(this.attributeKey,r):s.removeSelectionAttribute(this.attributeKey);else{const u=o.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const m of u)r?s.setAttribute(this.attributeKey,r,m):s.removeAttribute(this.attributeKey,m)}};c?o.enqueueChange(c,s=>{l(s)}):o.change(s=>{l(s)})}}const p="fontSize",g="fontFamily",w="fontColor",y="fontBackgroundColor";function U(t,e){const o={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const n of e)o.model.values.push(n.model),o.view[n.model]=n.view,n.upcastAlso&&(o.upcastAlso[n.model]=n.upcastAlso);return o}function R(t){return e=>te(e.getStyle(t))}function M(t){return(e,{writer:o})=>o.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}function ee({dropdownView:t,colors:e,columns:o,removeButtonLabel:n,colorPickerLabel:i,documentColorsLabel:r,documentColorsCount:c,colorPickerViewConfig:l}){const s=t.locale,u=new _(s,{colors:e,columns:o,removeButtonLabel:n,colorPickerLabel:i,documentColorsLabel:r,documentColorsCount:c,colorPickerViewConfig:l});return t.colorSelectorView=u,t.panelView.children.add(u),u}function te(t){return t.replace(/\s/g,"")}class oe extends C{constructor(e){super(e,g)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function G(t){return t.map(ne).filter(e=>e!==void 0)}function x(t){return t.replace(/["']/g,"").split(",").map(e=>e.trim())}function ne(t){if(typeof t=="object")return t;if(t==="default")return{title:"Default",model:void 0};if(typeof t=="string")return ie(t)}function ie(t){const e=x(t),o=e[0],n=e.map(se).join(", ");return{title:o,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function se(t){return t=t.trim(),t.indexOf(" ")>0&&(t=`'${t}'`),t}class re extends h{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(g,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:g}),e.model.schema.setAttributeProperties(g,{isFormatting:!0,copyOnEnter:!0});const o=G(e.config.get("fontFamily.options")).filter(i=>i.model),n=U(g,o);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add(g,new oe(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:g,view:(o,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+o},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:g,value:o=>o.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:g,value:o=>o.getAttribute("face")}})}}class le extends h{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,o=e.t,n=this._getLocalizedOptions(),i=e.commands.get(g),r=o("Font Family"),c=ae(n,i);e.ui.componentFactory.add(g,l=>{const s=O(l);return B(s,c,{role:"menu",ariaLabel:r}),s.buttonView.set({label:r,icon:V,tooltip:!0}),s.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",u=>{e.execute(u.source.commandName,{value:u.source.commandParam}),e.editing.view.focus()}),s}),e.ui.componentFactory.add(`menuBar:${g}`,l=>{const s=new A(l);s.buttonView.set({label:r,icon:V}),s.bind("isEnabled").to(i);const u=new L(l);for(const m of c){const a=new T(l,s),d=new E(l);d.set({role:"menuitemradio",isToggleable:!0}),d.bind(...Object.keys(m.model)).to(m.model),d.delegate("execute").to(s),d.on("execute",()=>{e.execute(m.model.commandName,{value:m.model.commandParam}),e.editing.view.focus()}),a.children.add(d),u.items.add(a)}return s.panelView.children.add(u),s})}_getLocalizedOptions(){const e=this.editor,o=e.t;return G(e.config.get(g).options).map(i=>(i.title==="Default"&&(i.title=o("Default")),i))}}function ae(t,e){const o=new $;for(const n of t){const i={type:"button",model:new D({commandName:g,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};i.model.bind("isOn").to(e,"value",r=>{if(r===n.model)return!0;if(!r||!n.model)return!1;const c=x(r)[0].toLowerCase(),l=x(n.model)[0].toLowerCase();return c===l}),n.view&&typeof n.view!="string"&&n.view.styles&&i.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),o.add(i)}return o}class ce extends h{static get requires(){return[re,le]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class ue extends C{constructor(e){super(e,p)}}function N(t){return t.map(e=>me(e)).filter(e=>e!==void 0)}const z={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function me(t){if(typeof t=="number"&&(t=String(t)),typeof t=="object"&&pe(t))return S(t);const e=fe(t);if(e)return S(e);if(t==="default")return{model:void 0,title:"Default"};if(!ge(t))return de(t)}function de(t){return typeof t=="string"&&(t={title:t,model:`${parseFloat(t)}px`}),t.view={name:"span",styles:{"font-size":t.model}},S(t)}function S(t){return t.view&&typeof t.view!="string"&&!t.view.priority&&(t.view.priority=7),t}function fe(t){return typeof t=="string"?z[t]:z[t.model]}function pe(t){return t.title&&t.model&&t.view}function ge(t){let e;if(typeof t=="object")if(t.model)e=parseFloat(t.model);else throw new I("font-size-invalid-definition",null,t);else e=parseFloat(t);return isNaN(e)}const P=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class be extends h{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(p,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:p}),e.model.schema.setAttributeProperties(p,{isFormatting:!0,copyOnEnter:!0});const o=e.config.get("fontSize.supportAllValues"),n=N(this.editor.config.get("fontSize.options")).filter(r=>r.model),i=U(p,n);o?(this._prepareAnyValueConverters(i),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(p,new ue(e))}_prepareAnyValueConverters(e){const o=this.editor,n=e.model.values.filter(i=>!J(String(i))&&!Q(String(i)));if(n.length)throw new I("font-size-invalid-use-of-named-presets",null,{presets:n});o.conversion.for("downcast").attributeToElement({model:p,view:(i,{writer:r})=>{if(i)return r.createAttributeElement("span",{style:"font-size:"+i},{priority:7})}}),o.conversion.for("upcast").elementToAttribute({model:{key:p,value:i=>i.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:p,value:o=>{const n=o.getAttribute("size"),i=n[0]==="-"||n[0]==="+";let r=parseInt(n,10);i&&(r=3+r);const c=P.length-1,l=Math.min(Math.max(r,0),c);return P[l]}}})}}class he extends h{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,o=e.t,n=this._getLocalizedOptions(),i=e.commands.get(p),r=o("Font Size"),c=we(n,i);e.ui.componentFactory.add(p,l=>{const s=O(l);return B(s,c,{role:"menu",ariaLabel:r}),s.buttonView.set({label:r,icon:k,tooltip:!0}),s.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",u=>{e.execute(u.source.commandName,{value:u.source.commandParam}),e.editing.view.focus()}),s}),e.ui.componentFactory.add(`menuBar:${p}`,l=>{const s=new A(l);s.buttonView.set({label:r,icon:k}),s.bind("isEnabled").to(i);const u=new L(l);for(const m of c){const a=new T(l,s),d=new E(l);d.set({role:"menuitemradio",isToggleable:!0}),d.bind(...Object.keys(m.model)).to(m.model),d.delegate("execute").to(s),d.on("execute",()=>{e.execute(m.model.commandName,{value:m.model.commandParam}),e.editing.view.focus()}),a.children.add(d),u.items.add(a)}return s.panelView.children.add(u),s})}_getLocalizedOptions(){const e=this.editor,o=e.t,n={Default:o("Default"),Tiny:o("Tiny"),Small:o("Small"),Big:o("Big"),Huge:o("Huge")};return N(e.config.get(p).options).map(r=>{const c=n[r.title];return c&&c!=r.title&&(r=Object.assign({},r,{title:c})),r})}}function we(t,e){const o=new $;for(const n of t){const i={type:"button",model:new D({commandName:p,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&i.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&i.model.set("class",`${i.model.class} ${n.view.classes}`)),i.model.bind("isOn").to(e,"value",r=>r===n.model),o.add(i)}return o}class ye extends h{static get requires(){return[be,he]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(e){return N(e)}}class ve extends C{constructor(e){super(e,w)}}class Ce extends h{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(w,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:w,value:R("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:w,value:o=>o.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:w,view:M("color")}),e.commands.add(w,new ve(e)),e.model.schema.extend("$text",{allowAttributes:w}),e.model.schema.setAttributeProperties(w,{isFormatting:!0,copyOnEnter:!0})}}class K extends h{commandName;componentName;icon;dropdownLabel;columns;constructor(e,{commandName:o,componentName:n,icon:i,dropdownLabel:r}){super(e),this.commandName=o,this.componentName=n,this.icon=i,this.dropdownLabel=r,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,o=e.locale,n=o.t,i=e.commands.get(this.commandName),r=e.config.get(this.componentName),c=j(r.colors),l=H(o,c),s=r.documentColors,u=r.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,m=>{const a=O(m);let d=!1;const f=ee({dropdownView:a,colors:l.map(b=>({label:b.label,color:b.model,options:{hasBorder:b.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:s!==0?n("Document colors"):"",documentColorsCount:s===void 0?this.columns:s,colorPickerViewConfig:u?r.colorPicker||{}:!1});return f.bind("selectedColor").to(i,"value"),a.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),a.bind("isEnabled").to(i),f.on("execute",(b,v)=>{a.isOpen&&e.execute(this.commandName,{value:v.value,batch:this._undoStepBatch}),v.source!=="colorPicker"&&e.editing.view.focus(),v.source==="colorPickerSaveButton"&&(a.isOpen=!1)}),f.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),f.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(a.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),a.on("change:isOpen",(b,v,F)=>{d||(d=!0,a.colorSelectorView.appendUI()),F&&(s!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),Y(a,()=>a.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(b=>b.isOn)),a}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,m=>{const a=new A(m);a.buttonView.set({label:this.dropdownLabel,icon:this.icon}),a.bind("isEnabled").to(i);let d=!1;const f=new _(m,{colors:l.map(b=>({label:b.label,color:b.model,options:{hasBorder:b.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:s!==0?n("Document colors"):"",documentColorsCount:s===void 0?this.columns:s,colorPickerViewConfig:!1});return f.bind("selectedColor").to(i,"value"),f.delegate("execute").to(a),f.on("execute",(b,v)=>{e.execute(this.commandName,{value:v.value,batch:this._undoStepBatch}),e.editing.view.focus()}),a.on("change:isOpen",(b,v,F)=>{d||(d=!0,f.appendUI()),F&&(s!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),a.panelView.children.add(f),a})}}class Fe extends K{constructor(e){const o=e.locale.t;super(e,{commandName:w,componentName:w,icon:W,dropdownLabel:o("Font Color")})}static get pluginName(){return"FontColorUI"}}class xe extends h{static get requires(){return[Ce,Fe]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class Se extends C{constructor(e){super(e,y)}}class Oe extends h{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(y,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(X),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:y,value:R("background-color")}}),e.conversion.for("downcast").attributeToElement({model:y,view:M("background-color")}),e.commands.add(y,new Se(e)),e.model.schema.extend("$text",{allowAttributes:y}),e.model.schema.setAttributeProperties(y,{isFormatting:!0,copyOnEnter:!0})}}class Ae extends K{constructor(e){const o=e.locale.t;super(e,{commandName:y,componentName:y,icon:Z,dropdownLabel:o("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Ne extends h{static get requires(){return[Oe,Ae]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class Le extends h{static get requires(){return[ce,ye,xe,Ne]}static get pluginName(){return"Font"}static get isOfficialPlugin(){return!0}}export{Le as F,ce as a,N as n};
