import{i as L}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{a as it}from"./index.vue_vue_type_script_setup_true_lang-BG9tDE2Y.js";import{_ as ut}from"./PageLayout.vue_vue_type_script_setup_true_lang-OixN3STA.js";import{I as ge}from"./iconify_vue-BwapRRpV.js";import{j as Te,B as we,b as be,a as qe,S as Me,g as Oe,N as He,A as je,G as Ge,R as We,k as ct,_ as dt,D as ft,H as pt,F as mt,a6 as _t,E as vt,ar as ht,a0 as gt,V as wt,a3 as bt}from"./naive-ui-CrTIpLJ9.js";import{u as re}from"./vue-i18n-CWrb4u3f.js";import{L as c}from"./leaflet-D4-p2oEE.js";import{_ as kt}from"./VueTelInputWrapper-c5drLhb6.js";import{c as Xe,f as Ct,u as Ze,b as yt,e as Je,A as Et,P as Pt,R as xt}from"./index-B2LlKIv2.js";import{p as $t}from"./password-strength-options-ByZgG3BK.js";import{p as Ft}from"./check-password-strength-CYKRgybp.js";import{_ as Pe}from"./lodash-DjP7BPMr.js";import{_ as Dt}from"./Admin.vue_vue_type_script_setup_true_lang-pGj8OczQ.js";import{A as xe}from"./auth-type-BjVd43MF.js";import{R as pe}from"./response-error-code-DXeaxdrh.js";import{_ as $e}from"./validator-QVVspsrX.js";import{i as St}from"./libphonenumber-js-Cbgs1wa0.js";const{defineComponent:Nt}=await L("vue"),{unref:ae,resolveComponent:Sn,isRef:Lt,createVNode:me,withCtx:Vt,openBlock:Bt,createElementBlock:At}=await L("vue"),{ref:_e}=await L("vue"),Ut={class:"flex justify-between"},Rt=Nt({__name:"MapFeature",emits:["selectCoords","getGeoLocation"],setup(o,{emit:t}){const s=t,{t:f}=re(),g=_e(null),C=_e(!1),S=_e([]),P=async h=>{try{if(!h.length){S.value=[];return}C.value=!0;const w=`https://nominatim.openstreetmap.org/search?format=json&polygon=1&addressdetails=1&q=${encodeURI(h)}`,r=await fetch(w);if(!r.ok)throw new Error(`Request failed with status ${r.status}`);const U=await r.json();S.value=U.map(u=>({coords:{lat:u.lat,lng:u.lon},value:u.place_id,label:u.display_name})),C.value=!1}catch(w){console.error(w),C.value=!1}},$=(h,w)=>{s("selectCoords",w.coords)};return(h,w)=>{const r=Te,U=ge,u=we;return Bt(),At("div",Ut,[me(r,{value:ae(g),"onUpdate:value":[w[0]||(w[0]=R=>Lt(g)?g.value=R:null),$],valueModifiers:{lazy:!0},filterable:"",placeholder:ae(f)("searchPlaces"),options:ae(S),loading:ae(C),clearable:"",remote:"",class:"relative !w-2/3",onSearch:P},null,8,["value","placeholder","options","loading"]),me(u,{onClick:w[1]||(w[1]=R=>s("getGeoLocation"))},{icon:Vt(()=>[me(U,{icon:"mdi:target"})]),_:1})])}}}),It="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(38,%20106,%20226,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e",zt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(226,%2038,%2038,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e";/*!_map
 * leaflet.fullscreen
 * (c) Bruno B.; MIT License
 * Uses fragments from the package 'screenfull'
 */const Z=(()=>{const o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"]],t=o[0],s={};for(const f of o)if(f[1]in document){for(let g=0;g<f.length;g++)s[t[g]]=f[g];return s}return!1})(),Fe={change:Z.fullscreenchange,error:Z.fullscreenerror},Ke={request:function(o,t){return new Promise(function(s,f){const g=function(){this.off("change",g),s()}.bind(this);this.on("change",g),o=o||document.documentElement;const C=o[Z.requestFullscreen](t);C instanceof Promise&&C.then(g).catch(f)}.bind(this))},exit:function(){return new Promise(function(o,t){if(!this.isFullscreen){o();return}const s=function(){this.off("change",s),o()}.bind(this);this.on("change",s);const f=document[Z.exitFullscreen]();f instanceof Promise&&f.then(s).catch(t)}.bind(this))},on:function(o,t){var s=Fe[o];s&&document.addEventListener(s,t,!1)},off:function(o,t){var s=Fe[o];s&&document.removeEventListener(s,t,!1)},nativeAPI:Z};Object.defineProperties(Ke,{isFullscreen:{get:function(){return!!document[Z.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[Z.fullscreenEnabled]}}});c.Control.FullScreen=c.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},_screenfull:Ke,onAdd:function(o){var t="leaflet-control-zoom-fullscreen",s,f="";return o.zoomControl&&!this.options.forceSeparateButton?s=o.zoomControl._container:s=c.DomUtil.create("div","leaflet-bar"),this.options.content?f=this.options.content:t+=" fullscreen-icon",this._createButton(this.options.title,t,f,s,this.toggleFullScreen,this),o.fullscreenControl=this,o.on("enterFullscreen exitFullscreen",this._toggleState,this),s},onRemove:function(){c.DomEvent.off(this.link,"click",c.DomEvent.stop).off(this.link,"click",this.toggleFullScreen,this),this._screenfull.isEnabled&&(c.DomEvent.off(this._container,this._screenfull.nativeAPI.fullscreenchange,c.DomEvent.stop).off(this._container,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this),c.DomEvent.off(document,this._screenfull.nativeAPI.fullscreenchange,c.DomEvent.stop).off(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this))},_createButton:function(o,t,s,f,g,C){return this.link=c.DomUtil.create("a",t,f),this.link.href="#",this.link.title=o,this.link.innerHTML=s,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",o),c.DomEvent.disableClickPropagation(f),c.DomEvent.on(this.link,"click",c.DomEvent.stop).on(this.link,"click",g,C),this._screenfull.isEnabled&&(c.DomEvent.on(f,this._screenfull.nativeAPI.fullscreenchange,c.DomEvent.stop).on(f,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,C),c.DomEvent.on(document,this._screenfull.nativeAPI.fullscreenchange,c.DomEvent.stop).on(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,C)),this.link},toggleFullScreen:function(){var o=this._map;o._exitFired=!1,o._isFullscreen?(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.exit():(c.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:o._container,"leaflet-pseudo-fullscreen"),o.invalidateSize()),o.fire("exitFullscreen"),o._exitFired=!0,o._isFullscreen=!1):(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.request(this.options.fullscreenElement?this.options.fullscreenElement:o._container):(c.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:o._container,"leaflet-pseudo-fullscreen"),o.invalidateSize()),o.fire("enterFullscreen"),o._isFullscreen=!0)},_toggleState:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel,this._map._isFullscreen?c.DomUtil.removeClass(this.link,"leaflet-fullscreen-on"):c.DomUtil.addClass(this.link,"leaflet-fullscreen-on")},_handleFullscreenChange:function(){var o=this._map;o.invalidateSize(),!this._screenfull.isFullscreen&&!o._exitFired&&(o.fire("exitFullscreen"),o._exitFired=!0,o._isFullscreen=!1)}});c.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}});c.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(c.control.fullscreen(this.options.fullscreenControlOptions))});c.control.fullscreen=function(o){return new c.Control.FullScreen(o)};const{defineComponent:Tt}=await L("vue"),{resolveComponent:Nn,openBlock:De,createBlock:qt,createCommentVNode:Mt,normalizeStyle:Ot,createElementVNode:Ht,createElementBlock:jt}=await L("vue"),Gt={class:"relative"},{defineComponent:Wt,ref:oe,onMounted:Xt,watch:Se}=await L("vue"),Zt=Wt({name:"LeafletLocation"}),Jt=Tt({...Zt,props:{coordToHighLight:{default:null},dataList:{default:()=>[]},showFeature:{type:Boolean,default:!0},height:{default:300}},emits:["update:coords","stepAction","markerClick","update:coordToHighLight"],setup(o,{emit:t}){const s=o,f=t,g=be(),{t:C}=re(),S=oe(!1),P=oe(null),$=oe(null),h=oe(null),w=v=>{P.value&&h.value?.removeLayer(P.value);const y=c.icon({iconUrl:zt,iconSize:[35,35]});P.value=c.marker([v.lat,v.lng],{icon:y,draggable:!0}).addTo(h.value).on("dragend",F=>{const b=F.target.getLatLng(),p={lat:b.lat,lng:b.lng};f("update:coords",p)}),h.value?.flyTo([v.lat,v.lng],16),f("update:coords",v)},r=()=>{S.value=!0,navigator.geolocation&&S.value&&navigator.geolocation.watchPosition(U,u)},U=v=>{S.value=!1;const y={lat:v.coords.latitude,lng:v.coords.longitude};w(y)},u=v=>{S.value=!1,g.error(C("anErrorOccurredDuringLocalisationFetch"))},R=v=>{if(v.length==0)return null;let y=0,F=0;for(const M of v)y+=M.lat,F+=M.lng;const b=y/v.length,p=F/v.length;return{lat:b,lng:p}},q=()=>{if(s.dataList){const v=c.icon({iconUrl:It,iconSize:[35,35]});c.circle({lat:6.1316,lng:1.224},5),s.dataList.forEach(F=>{c.marker([F.lat,F.lng],{icon:v}).addTo(h.value).on("click",function(b){f("markerClick",b.latlng)}).on("mouseover",function(b){})});const y=R(s.dataList);h.value?.flyTo([y?.lat||0,y?.lng||0],12)}};return Xt(()=>{$.value&&(h.value=c.map($.value,{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}).setView([6.136629,1.222186],10),c.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(h.value),q(),s.coordToHighLight&&w(s.coordToHighLight))}),Se(()=>s.dataList,()=>{q()},{deep:!0}),Se(()=>s.coordToHighLight,v=>{v&&w(v)},{deep:!0}),(v,y)=>{const F=Rt;return De(),jt("div",Gt,[s.showFeature?(De(),qt(F,{key:0,onSelectCoords:w,onGetGeoLocation:r})):Mt("",!0),Ht("div",{ref_key:"mapContainer",ref:$,class:"z-[1] mt-3",style:Ot({height:typeof s.height=="number"?`${s.height}px`:s.height})},null,4)])}}}),{defineComponent:Kt}=await L("vue"),{unref:k,toDisplayString:K,createTextVNode:Ne,resolveComponent:Ln,createVNode:m,withCtx:d,createElementVNode:A,isRef:Qt,openBlock:Le,createBlock:Yt,createCommentVNode:en,Fragment:tn,createElementBlock:nn}=await L("vue"),{ref:ve,computed:ln}=await L("vue"),an=Kt({__name:"Preferences",setup(o){const{t,locale:s}=re(),f=Xe(),g=Ct(),{languages:C,updateLocale:S,is2XlScreen:P,isXlScreen:$}=Ze(),{defaultPrefs:h}=yt(),{request:w}=Je(),r=be(),U=qe(),u=ve(h.value),R=ve(h.value),q=ve(!1),v=ln(()=>Pe.isEqual(u.value,R.value)),y=async()=>{U.start(),q.value=!0;const b=await w({url:`/users/self/${f.userData?.id}`,method:"put",data:{preferences:u.value}});b.success&&b.result?(f.userData=b.result.data,F(),r.success(t("success"))):r.error(t("anErrorOccurred")),q.value=!1,U.finish()},F=()=>{u.value=f.userData?.preferences??h.value,R.value=Pe.cloneDeep(u.value)};return F(),(b,p)=>{const M=ge,V=He,Y=we,O=Oe,x=Me,ee=ct,j=je,N=We,J=Ge,ne=Te;return Le(),nn(tn,null,[m(x,{class:"mb-5"},{title:d(()=>[Ne(K(k(t)("accountPreferences")),1)]),extra:d(()=>[m(O,null,{default:d(()=>[m(Y,{loading:k(q),disabled:k(v),type:"primary",onClick:y},{icon:d(()=>[m(V,null,{default:d(()=>[m(M,{icon:"carbon:save"})]),_:1})]),default:d(()=>[Ne(" "+K(k(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),m(j,{hoverable:"",embedded:""},{default:d(()=>[m(J,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:d(()=>[m(N,null,{default:d(()=>[m(j,{class:"w-full"},{default:d(()=>[m(O,{align:"center",justify:"space-between"},{default:d(()=>[A("span",null,K(k(t)("notificationsInApp")),1),m(ee,{value:k(u).inAppNotifEnabled,"onUpdate:value":p[0]||(p[0]=E=>k(u).inAppNotifEnabled=E),"checked-value":1,"unchecked-value":0,size:"small"},{checked:d(()=>p[4]||(p[4]=[A("div",{class:"w-6"},null,-1)])),unchecked:d(()=>p[5]||(p[5]=[A("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),m(N,null,{default:d(()=>[m(j,{class:"w-full"},{default:d(()=>[m(O,{align:"center",justify:"space-between"},{default:d(()=>[A("span",null,K(k(t)("notificationsInEmail")),1),m(ee,{value:k(u).emailNotifEnabled,"onUpdate:value":p[1]||(p[1]=E=>k(u).emailNotifEnabled=E),"checked-value":1,"unchecked-value":0,size:"small"},{checked:d(()=>p[6]||(p[6]=[A("div",{class:"w-6"},null,-1)])),unchecked:d(()=>p[7]||(p[7]=[A("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),p[10]||(p[10]=A("div",{class:"h-2"},null,-1)),k($)||k(P)?en("",!0):(Le(),Yt(J,{key:0,cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:d(()=>[m(N,null,{default:d(()=>[m(j,{class:"w-full"},{default:d(()=>[m(O,{align:"center",justify:"space-between"},{default:d(()=>[A("span",null,K(k(t)("appLanguage")),1),m(ne,{value:k(s),"onUpdate:value":[p[2]||(p[2]=E=>Qt(s)?s.value=E:null),k(S)],"consistent-menu-width":!1,size:"tiny",options:k(C)},null,8,["value","options","onUpdate:value"])]),_:1})]),_:1})]),_:1}),m(N,null,{default:d(()=>[m(j,{class:"w-full"},{default:d(()=>[m(O,{align:"center",justify:"space-between"},{default:d(()=>[A("span",null,K(k(t)("appTheme")),1),m(ee,{value:k(g).isLightTheme,"onUpdate:value":p[3]||(p[3]=E=>k(g).isLightTheme=E),size:"small"},{"checked-icon":d(()=>[m(V,{color:"orange"},{default:d(()=>[m(M,{icon:"carbon:sun"})]),_:1})]),"unchecked-icon":d(()=>[m(V,{color:"dimgray"},{default:d(()=>[m(M,{icon:"carbon:moon"})]),_:1})]),checked:d(()=>p[8]||(p[8]=[A("div",{class:"w-6"},null,-1)])),unchecked:d(()=>p[9]||(p[9]=[A("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})],64)}}}),{defineComponent:on}=await L("vue"),{resolveComponent:Vn,createVNode:l,withCtx:a,unref:e,toDisplayString:z,createTextVNode:X,vShow:Ve,withDirectives:Be,normalizeStyle:Ae,openBlock:T,createBlock:Q,createCommentVNode:Ue,createElementBlock:he,createElementVNode:Re,renderList:sn,Fragment:Ie,isRef:se}=await L("vue"),rn={key:0,class:"text-6xl"},un={class:"text-gray-500"},{defineComponent:cn,inject:dn,ref:D,computed:ze}=await L("vue"),fn=cn({name:xt.ACCOUNT.NAME}),Bn=on({...fn,setup(o){const{t}=re(),{request:s}=Je(),{pickByTheme:f,fileUrl:g,displayFormErrors:C}=Ze(),S=dn("appConfig"),P=be(),$=qe(),h=D(!1),w=D(null),r=D({lastname:"",firstname:"",email:"",address:"",location:void 0,avatar:"",phone:""}),U=ze(()=>({lastname:[{required:!0,message:t("fillRequired")}],firstname:[{required:!0,message:t("fillRequired")}],email:[{required:u.userData?u.userData.authType!=xe.PHONE:!0,message:t("fillRequired")},{trigger:["input"],validator(_,n){return n&&!$e.isEmail(n)?new Error(t("invalidEmail")):!0}}],phone:[{trigger:["input"],validator(_,n){return n&&!St(n)?new Error(t("invalidNumber")):!0}}]})),u=Xe(),R=_=>{r.value.location=_},q=ze(()=>u.userData?.lastname===r.value.lastname&&u.userData?.firstname===r.value.firstname&&u.userData?.avatar===r.value.avatar&&u.userData?.address===r.value.address&&u.userData?.location===r.value.location&&(u.userData?.phone===r.value.phone||!r.value.phone)),v=async _=>{_.preventDefault(),h.value=!0,w.value?.validate(async n=>{if(!n){const B=await s({url:`/users/self/${u.userData?.id}`,method:"put",data:{lastname:r.value.lastname,firstname:r.value.firstname,address:r.value.address,location:r.value.location,avatar:r.value.avatar,phone:r.value.phone}});B.success?(u.userData=B.result.data,y(),P.success(t("success"))):P.error(t("anErrorOccurred"))}}),h.value=!1},y=async()=>{$.start(),h.value=!0;const _=await s({url:`/users/${u.userData?.id}`});_.success&&_.result&&(r.value={lastname:_.result.data.lastname,firstname:_.result.data.firstname,email:_.result.data.email,address:_.result.data.address,location:_.result.data.location,avatar:_.result.data.avatar,phone:_.result.data.phone}),h.value=!1,$.finish()};y();const F="avatars",b=D(!1),p=async _=>{r.value.avatar=_,b.value=!1},M=()=>{r.value.avatar=""},V=D(!1),Y=D(!1),O=D(null),x=D({newPassword:"",newPasswordConfirmation:"",currentPassword:""}),ee={newPassword:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(_,n){return n&&["too-weak"].includes(Ft(n,$t).value)?new Error(t("passwordTooWeak")):!0}}],newPasswordConfirmation:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(_,n){return n&&n!==x.value.newPassword?new Error(t("nonCompliantPassword")):!0}}],currentPassword:[{required:!0,message:t("fillRequired")}]},j=async()=>(O.value?.validate(async _=>{if(!_){$.start(),Y.value=!0;const n=await s({url:"/auth/edit-password",method:"post",data:{newPassword:x.value.newPassword,newPasswordConfirmation:x.value.newPasswordConfirmation,currentPassword:x.value.currentPassword}});if(Y.value=!1,$.finish(),n.failure&&n.error)switch(n.error?.response?.data?.errorCode){case pe.FORM_INVALID_DATA:C(n.error?.response?.data?.data);break;case pe.AUTH_WRONG_PASSWORD:P.error(t("wrongPassword"));break;default:P.error(t("anErrorOccurred"))}else P.success(t("passwordResetSuccess"),{closable:!0,duration:5e3}),x.value={newPassword:"",newPasswordConfirmation:"",currentPassword:""},V.value=!1}}),!1),N=D(!1),J=D(!1),ne=D(null),E=D({email:""}),Qe={email:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(_,n){return n&&!$e.isEmail(n)?new Error(t("invalidEmail")):!0}}]},Ye=async()=>(ne.value?.validate(async _=>{if(!_){$.start(),J.value=!0;const n=await s({url:"/auth/edit-email",method:"post",data:{email:E.value.email}});if(J.value=!1,$.finish(),n.failure&&n.error)switch(n.error?.response?.data?.errorCode){case pe.FORM_INVALID_DATA:C(n.error?.response?.data?.data);break;default:P.error(t("anErrorOccurred"))}else P.success(t("emailResetSuccess"),{closable:!0,duration:5e3}),u.userData&&E.value.email&&(u.userData.email=E.value.email),r.value.email=E.value.email,E.value={email:""},N.value=!1}}),!1),te=D(!1),et=()=>{te.value=!1,y()};return(_,n)=>{const B=ge,H=He,G=we,ie=Oe,ke=dt,Ce=We,I=mt,le=pt,ue=Ge,tt=kt,ce=_t,W=vt,nt=Jt,ye=ht,lt=gt,de=ft,at=je,Ee=wt,ot=Me,st=ut,rt=it,fe=bt;return T(),he(Ie,null,[l(st,null,{"header-extra":a(()=>[l(ie,null,{default:a(()=>[Be(l(G,{onClick:n[0]||(n[0]=i=>N.value=!0)},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:email"})]),_:1})]),default:a(()=>[X(" "+z(e(t)("editEmail")),1)]),_:1},512),[[Ve,!1]]),Be(l(G,{onClick:n[1]||(n[1]=i=>V.value=!0)},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:password"})]),_:1})]),default:a(()=>[X(" "+z(e(t)("editPassword")),1)]),_:1},512),[[Ve,!1]]),l(G,{loading:e(h),disabled:e(q),type:"primary",onClick:v},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:save"})]),_:1})]),default:a(()=>[X(" "+z(e(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),default:a(()=>[l(at,{hoverable:"",embedded:""},{default:a(()=>[l(ue,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:a(()=>[l(Ce,{class:"text-center"},{default:a(()=>[l(ie,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:a(()=>[e(r).avatar?(T(),Q(ke,{key:0,class:"cursor-pointer","object-fit":"contain",style:Ae("border: 1px dashed "+e(f)("green","white")),size:125,src:e(g)(e(r).avatar),onClick:n[2]||(n[2]=i=>b.value=!0)},null,8,["style","src"])):(T(),Q(ke,{key:1,class:"cursor-pointer",style:Ae("border: 1px dashed "+e(f)("green","white")),size:125,onClick:n[3]||(n[3]=i=>b.value=!0)},{default:a(()=>[e(u).userData?.fullname?(T(),he("span",rn,z(e(Et)(e(u).userData?.fullname||"")),1)):(T(),Q(H,{key:1,size:64},{default:a(()=>[l(B,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style"])),e(r).avatar?(T(),Q(G,{key:2,quaternary:"",onClick:n[4]||(n[4]=i=>M())},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:trash-can"})]),_:1})]),default:a(()=>[X(" "+z(e(t)("clear")),1)]),_:1})):Ue("",!0)]),_:1})]),_:1}),l(Ce,null,{default:a(()=>[l(de,{ref_key:"formRef",ref:w,model:e(r),rules:e(U),"show-label":!0,"show-require-mark":!1,size:"medium"},{default:a(()=>[l(ue,{"x-gap":"12",span:24},{default:a(()=>[l(le,{span:12,label:e(t)("lastname"),path:"lastname"},{default:a(()=>[l(I,{value:e(r).lastname,"onUpdate:value":n[5]||(n[5]=i=>e(r).lastname=i),placeholder:e(t)("lastname"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),l(le,{span:12,label:e(t)("firstname_s"),path:"firstname"},{default:a(()=>[l(I,{value:e(r).firstname,"onUpdate:value":n[6]||(n[6]=i=>e(r).firstname=i),placeholder:e(t)("firstname_s"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),l(ue,{"x-gap":"12",span:24},{default:a(()=>[l(le,{span:12,label:e(t)("phoneNumber"),path:"phone"},{default:a(()=>[l(tt,{modelValue:e(r).phone,"onUpdate:modelValue":n[7]||(n[7]=i=>e(r).phone=i),disabled:e(u).userData?.authType==e(xe).PHONE},null,8,["modelValue","disabled"])]),_:1},8,["label"]),l(le,{span:12,label:e(t)("addressEmail"),path:"email"},{default:a(()=>[l(ce,null,{default:a(()=>[l(I,{value:e(r).email,"onUpdate:value":n[8]||(n[8]=i=>e(r).email=i),placeholder:e(t)("addressEmail"),disabled:"",class:"w-full"},null,8,["value","placeholder"]),l(G,{type:"primary",loading:e(J),onClick:n[9]||(n[9]=i=>N.value=!0)},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"])]),_:1}),l(W,{label:e(t)("address"),path:"address"},{default:a(()=>[l(I,{value:e(r).address,"onUpdate:value":n[10]||(n[10]=i=>e(r).address=i),placeholder:e(t)("address"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),l(W,{label:e(t)("location"),path:"location"},{default:a(()=>[l(nt,{class:"w-full",height:150,"show-feature":!0,"coord-to-high-light":e(r).location,"onUpdate:coords":R},null,8,["coord-to-high-light"])]),_:1},8,["label"]),l(W,{label:e(t)("password"),path:"password"},{default:a(()=>[l(ce,null,{default:a(()=>[l(I,{value:"password",placeholder:e(t)("password"),type:"password",disabled:"",class:"w-full"},null,8,["placeholder"]),l(G,{type:"primary",loading:e(Y),onClick:n[11]||(n[11]=i=>V.value=!0)},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"]),l(ce,null,{default:a(()=>[l(ye,{style:{width:"30%"}},{default:a(()=>[Re("span",un,z(e(t)("roles")),1)]),_:1}),l(ye,{style:{width:"70%"}},{default:a(()=>[(T(!0),he(Ie,null,sn(e(u).userData?.roles||[],i=>(T(),Q(lt,{key:i.name,class:"mx-1",size:"small",type:"info",round:!1,bordered:!1,strong:""},{default:a(()=>[X(z(i.displayName),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),l(Ee,{dashed:""}),l(ot,{class:"mb-5"},{title:a(()=>[X(z(e(t)("profileInfo")),1)]),extra:a(()=>[l(ie,null,{default:a(()=>[l(G,{type:"primary",onClick:n[12]||(n[12]=i=>te.value=!0)},{icon:a(()=>[l(H,null,{default:a(()=>[l(B,{icon:"fa-solid:window-restore"})]),_:1})]),default:a(()=>[X(" "+z(e(t)("open")),1)]),_:1})]),_:1})]),_:1}),l(Ee,{dashed:""}),l(an),n[24]||(n[24]=Re("div",{class:"h-10"},null,-1))]),_:1}),l(rt,{show:e(b),"onUpdate:show":n[13]||(n[13]=i=>se(b)?b.value=i:null),title:e(t)("avatar"),"upload-config":{folder:F,limit:0,maxSize:0,baseUrl:e(S)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:p},null,8,["show","title","upload-config"]),l(fe,{show:e(V),"onUpdate:show":n[17]||(n[17]=i=>se(V)?V.value=i:null),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editPassword"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),onPositiveClick:j,onNegativeClick:n[18]||(n[18]=i=>V.value=!1)},{default:a(()=>[l(de,{ref_key:"pwdFormRef",ref:O,model:e(x),rules:ee,"show-require-mark":!1,size:"medium"},{default:a(()=>[l(W,{label:e(t)("newPassword"),path:"newPassword"},{default:a(()=>[l(I,{value:e(x).newPassword,"onUpdate:value":n[14]||(n[14]=i=>e(x).newPassword=i),placeholder:e(t)("newPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),l(W,{label:e(t)("confirmPassword"),path:"newPasswordConfirmation"},{default:a(()=>[l(I,{value:e(x).newPasswordConfirmation,"onUpdate:value":n[15]||(n[15]=i=>e(x).newPasswordConfirmation=i),placeholder:e(t)("confirmPassword"),disabled:!e(x).newPassword,"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),l(W,{label:e(t)("currentPassword"),path:"currentPassword"},{default:a(()=>[l(I,{value:e(x).currentPassword,"onUpdate:value":n[16]||(n[16]=i=>e(x).currentPassword=i),placeholder:e(t)("currentPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text"]),l(fe,{show:e(N),"onUpdate:show":n[20]||(n[20]=i=>se(N)?N.value=i:null),preset:"dialog",style:{width:"400px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editEmail"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),onPositiveClick:Ye,onNegativeClick:n[21]||(n[21]=i=>N.value=!1)},{default:a(()=>[l(de,{ref_key:"emailFormRef",ref:ne,model:e(E),rules:Qe,"show-require-mark":!1,size:"medium"},{default:a(()=>[l(W,{label:e(t)("emailAddress"),path:"email"},{default:a(()=>[l(I,{value:e(E).email,"onUpdate:value":n[19]||(n[19]=i=>e(E).email=i),placeholder:e(t)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text"]),l(fe,{show:e(te),"onUpdate:show":n[23]||(n[23]=i=>se(te)?te.value=i:null),loading:e(h),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("profileInfo")},{default:a(()=>[e(u).userData?.profileType==e(Pt).ADMIN?(T(),Q(Dt,{key:0,mode:"edition","initial-data":e(u).userData?.profile,onBack:n[22]||(n[22]=i=>et())},null,8,["initial-data"])):Ue("",!0)]),_:1},8,["show","loading","title"])],64)}}});export{Bn as default};
