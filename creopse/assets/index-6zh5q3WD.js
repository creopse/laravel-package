import{i as D}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{a as ct}from"./index.vue_vue_type_script_setup_true_lang-DjxQ40YE.js";import{_ as dt}from"./PageLayout.vue_vue_type_script_setup_true_lang-PAUYRhpU.js";import{I as he}from"./iconify_vue-DK9FHL8l.js";import{t as qe,B as ge,a as we,u as Me,P as Oe,O as He,q as je,x as Ge,D as We,M as Xe,v as ft,r as pt,z as mt,E as _t,C as vt,a3 as ht,A as gt,at as wt,Y as bt,n as kt,a0 as yt}from"./naive-ui-U3LV0D3Q.js";import{u as ie}from"./vue-i18n-DGGON2e6.js";import{L as d}from"./leaflet-C-87TSkm.js";import{_ as Ct}from"./VueTelInputWrapper-DY2l15w0.js";import{c as Qe,p as Et,u as Ye,b as Pt,am as Ze,an as xt,ao as $t,ap as Ft,ah as Ut,P as Dt,R as St}from"./index-BkcZCWEr.js";import{p as Lt}from"./password-strength-options-ByZgG3BK.js";import{p as Nt}from"./check-password-strength-DpJr94ZL.js";import{_ as Pe}from"./lodash-BQQkJTn-.js";import{_ as Bt}from"./Admin.vue_vue_type_script_setup_true_lang-CKRpBrTt.js";import{A as xe}from"./auth-type-BjVd43MF.js";import{_ as $e}from"./validator-DwVK3abb.js";import{i as Vt}from"./libphonenumber-js-Cbgs1wa0.js";const{defineComponent:zt}=await D("vue"),{unref:oe,resolveComponent:Vn,isRef:It,createVNode:me,withCtx:At,openBlock:Rt,createElementBlock:Tt}=await D("vue"),{ref:_e}=await D("vue"),qt={class:"flex justify-between"},Mt=zt({__name:"MapFeature",emits:["selectCoords","getGeoLocation"],setup(o,{emit:p}){const s=p,{t}=ie(),h=_e(null),g=_e(!1),E=_e([]),N=async b=>{try{if(!b.length){E.value=[];return}g.value=!0;const u=`https://nominatim.openstreetmap.org/search?format=json&polygon=1&addressdetails=1&q=${encodeURI(b)}`,P=await fetch(u);if(!P.ok)throw new Error(`Request failed with status ${P.status}`);const k=await P.json();E.value=k.map(x=>({coords:{lat:x.lat,lng:x.lon},value:x.place_id,label:x.display_name})),g.value=!1}catch{g.value=!1}},r=(b,u)=>{s("selectCoords",u.coords)};return(b,u)=>{const P=qe,k=he,x=ge;return Rt(),Tt("div",qt,[me(P,{value:oe(h),"onUpdate:value":[u[0]||(u[0]=q=>It(h)?h.value=q:null),r],valueModifiers:{lazy:!0},filterable:"",placeholder:oe(t)("searchPlaces"),options:oe(E),loading:oe(g),clearable:"",remote:"",class:"relative !w-2/3",onSearch:N},null,8,["value","placeholder","options","loading"]),me(x,{secondary:"",onClick:u[1]||(u[1]=q=>s("getGeoLocation"))},{icon:At(()=>[me(k,{icon:"mdi:target"})]),_:1})])}}}),Ot="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(38,%20106,%20226,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e",Ht="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(226,%2038,%2038,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e";/*!_map
 * leaflet.fullscreen
 * (c) Bruno B.; MIT License
 * Uses fragments from the package 'screenfull'
 */const Z=(()=>{const o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"]],p=o[0],s={};for(const t of o)if(t[1]in document){for(let h=0;h<t.length;h++)s[p[h]]=t[h];return s}return!1})(),Fe={change:Z.fullscreenchange,error:Z.fullscreenerror},Je={request:function(o,p){return new Promise(function(s,t){const h=function(){this.off("change",h),s()}.bind(this);this.on("change",h),o=o||document.documentElement;const g=o[Z.requestFullscreen](p);g instanceof Promise&&g.then(h).catch(t)}.bind(this))},exit:function(){return new Promise(function(o,p){if(!this.isFullscreen){o();return}const s=function(){this.off("change",s),o()}.bind(this);this.on("change",s);const t=document[Z.exitFullscreen]();t instanceof Promise&&t.then(s).catch(p)}.bind(this))},on:function(o,p){var s=Fe[o];s&&document.addEventListener(s,p,!1)},off:function(o,p){var s=Fe[o];s&&document.removeEventListener(s,p,!1)},nativeAPI:Z};Object.defineProperties(Je,{isFullscreen:{get:function(){return!!document[Z.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[Z.fullscreenEnabled]}}});d.Control.FullScreen=d.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},_screenfull:Je,onAdd:function(o){var p="leaflet-control-zoom-fullscreen",s,t="";return o.zoomControl&&!this.options.forceSeparateButton?s=o.zoomControl._container:s=d.DomUtil.create("div","leaflet-bar"),this.options.content?t=this.options.content:p+=" fullscreen-icon",this._createButton(this.options.title,p,t,s,this.toggleFullScreen,this),o.fullscreenControl=this,o.on("enterFullscreen exitFullscreen",this._toggleState,this),s},onRemove:function(){d.DomEvent.off(this.link,"click",d.DomEvent.stop).off(this.link,"click",this.toggleFullScreen,this),this._screenfull.isEnabled&&(d.DomEvent.off(this._container,this._screenfull.nativeAPI.fullscreenchange,d.DomEvent.stop).off(this._container,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this),d.DomEvent.off(document,this._screenfull.nativeAPI.fullscreenchange,d.DomEvent.stop).off(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this))},_createButton:function(o,p,s,t,h,g){return this.link=d.DomUtil.create("a",p,t),this.link.href="#",this.link.title=o,this.link.innerHTML=s,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",o),d.DomEvent.disableClickPropagation(t),d.DomEvent.on(this.link,"click",d.DomEvent.stop).on(this.link,"click",h,g),this._screenfull.isEnabled&&(d.DomEvent.on(t,this._screenfull.nativeAPI.fullscreenchange,d.DomEvent.stop).on(t,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,g),d.DomEvent.on(document,this._screenfull.nativeAPI.fullscreenchange,d.DomEvent.stop).on(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,g)),this.link},toggleFullScreen:function(){var o=this._map;o._exitFired=!1,o._isFullscreen?(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.exit():(d.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:o._container,"leaflet-pseudo-fullscreen"),o.invalidateSize()),o.fire("exitFullscreen"),o._exitFired=!0,o._isFullscreen=!1):(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.request(this.options.fullscreenElement?this.options.fullscreenElement:o._container):(d.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:o._container,"leaflet-pseudo-fullscreen"),o.invalidateSize()),o.fire("enterFullscreen"),o._isFullscreen=!0)},_toggleState:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel,this._map._isFullscreen?d.DomUtil.removeClass(this.link,"leaflet-fullscreen-on"):d.DomUtil.addClass(this.link,"leaflet-fullscreen-on")},_handleFullscreenChange:function(){var o=this._map;o.invalidateSize(),!this._screenfull.isFullscreen&&!o._exitFired&&(o.fire("exitFullscreen"),o._exitFired=!0,o._isFullscreen=!1)}});d.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}});d.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(d.control.fullscreen(this.options.fullscreenControlOptions))});d.control.fullscreen=function(o){return new d.Control.FullScreen(o)};const{defineComponent:jt}=await D("vue"),{resolveComponent:zn,openBlock:Ue,createBlock:Gt,createCommentVNode:Wt,normalizeStyle:Xt,createElementVNode:Qt,createElementBlock:Yt}=await D("vue"),Zt={class:"relative"},{defineComponent:Jt,ref:se,onMounted:Kt,watch:De}=await D("vue"),en=Jt({name:"LeafletLocation"}),tn=jt({...en,props:{coordToHighLight:{default:null},dataList:{default:()=>[]},showFeature:{type:Boolean,default:!0},height:{default:300}},emits:["update:coords","stepAction","markerClick","update:coordToHighLight"],setup(o,{emit:p}){const s=o,t=p,h=we(),{t:g}=ie(),E=se(!1),N=se(null),r=se(null),b=se(null),u=_=>{N.value&&b.value?.removeLayer(N.value);const C=d.icon({iconUrl:Ht,iconSize:[35,35]});N.value=d.marker([_.lat,_.lng],{icon:C,draggable:!0}).addTo(b.value).on("dragend",$=>{const F=$.target.getLatLng(),c={lat:F.lat,lng:F.lng};t("update:coords",c)}),b.value?.flyTo([_.lat,_.lng],16),t("update:coords",_)},P=()=>{E.value=!0,navigator.geolocation&&E.value&&navigator.geolocation.watchPosition(k,x)},k=_=>{E.value=!1;const C={lat:_.coords.latitude,lng:_.coords.longitude};u(C)},x=_=>{E.value=!1,h.error(g("anErrorOccurredDuringLocalisationFetch"))},q=_=>{if(_.length==0)return null;let C=0,$=0;for(const O of _)C+=O.lat,$+=O.lng;const F=C/_.length,c=$/_.length;return{lat:F,lng:c}},M=()=>{if(s.dataList){const _=d.icon({iconUrl:Ot,iconSize:[35,35]});d.circle({lat:6.1316,lng:1.224},5),s.dataList.forEach($=>{d.marker([$.lat,$.lng],{icon:_}).addTo(b.value).on("click",function(F){t("markerClick",F.latlng)}).on("mouseover",function(F){})});const C=q(s.dataList);b.value?.flyTo([C?.lat||0,C?.lng||0],12)}};return Kt(()=>{r.value&&(b.value=d.map(r.value,{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}).setView([6.136629,1.222186],10),d.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(b.value),M(),s.coordToHighLight&&u(s.coordToHighLight))}),De(()=>s.dataList,()=>{M()},{deep:!0}),De(()=>s.coordToHighLight,_=>{_&&u(_)},{deep:!0}),(_,C)=>{const $=Mt;return Ue(),Yt("div",Zt,[s.showFeature?(Ue(),Gt($,{key:0,onSelectCoords:u,onGetGeoLocation:P})):Wt("",!0),Qt("div",{ref_key:"mapContainer",ref:r,class:"z-[1] mt-3",style:Xt({height:typeof s.height=="number"?`${s.height}px`:s.height})},null,4)])}}}),{defineComponent:nn}=await D("vue"),{unref:w,toDisplayString:J,createTextVNode:Se,resolveComponent:In,createVNode:m,withCtx:f,createElementVNode:L,isRef:ln,openBlock:Le,createBlock:an,createCommentVNode:on,Fragment:sn,createElementBlock:rn}=await D("vue"),{ref:Ne,computed:un}=await D("vue"),cn=nn({__name:"Preferences",setup(o){const{t:p,locale:s}=ie(),t=Me(),h=we(),g=Qe(),E=Et(),{languages:N,updateLocale:r,is2XlScreen:b,isXlScreen:u}=Ye(),{defaultPrefs:P}=Pt(),k=Ne(P.value),x=Ne(P.value),q=un(()=>Pe.isEqual(k.value,x.value)),M=()=>{k.value=g.userData?.preferences??P.value,x.value=Pe.cloneDeep(k.value)};M();const{mutate:_,isPending:C}=Ze(),$=()=>{t.start(),_({id:g.userData?.id,preferences:k.value},{onSuccess:F=>{g.userData=F,M(),h.success(p("success"))},onError:F=>{h.error(p("anErrorOccurred"))},onSettled:()=>{t.finish()}})};return(F,c)=>{const O=he,ee=je,V=ge,H=He,y=Oe,te=ft,G=Ge,W=Xe,le=We,z=qe;return Le(),rn(sn,null,[m(y,{class:"mb-5"},{title:f(()=>[Se(J(w(p)("accountPreferences")),1)]),extra:f(()=>[m(H,null,{default:f(()=>[m(V,{loading:w(C),disabled:w(q),secondary:"",type:"primary",onClick:c[0]||(c[0]=S=>$())},{icon:f(()=>[m(ee,null,{default:f(()=>[m(O,{icon:"carbon:save"})]),_:1})]),default:f(()=>[Se(" "+J(w(p)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),m(G,{hoverable:""},{default:f(()=>[m(le,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:f(()=>[m(W,null,{default:f(()=>[m(G,{class:"w-full"},{default:f(()=>[m(H,{align:"center",justify:"space-between"},{default:f(()=>[L("span",null,J(w(p)("notificationsInApp")),1),m(te,{value:w(k).inAppNotifEnabled,"onUpdate:value":c[1]||(c[1]=S=>w(k).inAppNotifEnabled=S),"checked-value":1,"unchecked-value":0,size:"small"},{checked:f(()=>c[5]||(c[5]=[L("div",{class:"w-6"},null,-1)])),unchecked:f(()=>c[6]||(c[6]=[L("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),m(W,null,{default:f(()=>[m(G,{class:"w-full"},{default:f(()=>[m(H,{align:"center",justify:"space-between"},{default:f(()=>[L("span",null,J(w(p)("notificationsInEmail")),1),m(te,{value:w(k).emailNotifEnabled,"onUpdate:value":c[2]||(c[2]=S=>w(k).emailNotifEnabled=S),"checked-value":1,"unchecked-value":0,size:"small"},{checked:f(()=>c[7]||(c[7]=[L("div",{class:"w-6"},null,-1)])),unchecked:f(()=>c[8]||(c[8]=[L("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),c[11]||(c[11]=L("div",{class:"h-2"},null,-1)),w(u)||w(b)?on("",!0):(Le(),an(le,{key:0,cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:f(()=>[m(W,null,{default:f(()=>[m(G,{class:"w-full"},{default:f(()=>[m(H,{align:"center",justify:"space-between"},{default:f(()=>[L("span",null,J(w(p)("appLanguage")),1),m(z,{value:w(s),"onUpdate:value":[c[3]||(c[3]=S=>ln(s)?s.value=S:null),w(r)],"consistent-menu-width":!1,size:"tiny",options:w(N)},null,8,["value","options","onUpdate:value"])]),_:1})]),_:1})]),_:1}),m(W,null,{default:f(()=>[m(G,{class:"w-full"},{default:f(()=>[m(H,{align:"center",justify:"space-between"},{default:f(()=>[L("span",null,J(w(p)("appTheme")),1),m(te,{value:w(E).isLightTheme,"onUpdate:value":c[4]||(c[4]=S=>w(E).isLightTheme=S),size:"small"},{"checked-icon":f(()=>[m(ee,{color:"orange"},{default:f(()=>[m(O,{icon:"carbon:sun"})]),_:1})]),"unchecked-icon":f(()=>[m(ee,{color:"dimgray"},{default:f(()=>[m(O,{icon:"carbon:moon"})]),_:1})]),checked:f(()=>c[9]||(c[9]=[L("div",{class:"w-6"},null,-1)])),unchecked:f(()=>c[10]||(c[10]=[L("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1,__:[11]})],64)}}}),{defineComponent:dn}=await D("vue"),{resolveComponent:An,createVNode:n,withCtx:a,unref:e,toDisplayString:R,createTextVNode:Y,vShow:Be,withDirectives:Ve,normalizeStyle:ze,openBlock:T,createBlock:K,createCommentVNode:Ie,createElementBlock:ve,createElementVNode:Ae,renderList:fn,Fragment:Re,isRef:re}=await D("vue"),pn={key:0,class:"text-6xl"},mn={class:"text-gray-500"},{defineComponent:_n,inject:vn,ref:B,computed:Te,watch:hn}=await D("vue"),gn=_n({name:St.ACCOUNT.NAME}),Rn=dn({...gn,setup(o){const p=Me(),s=we(),{t}=ie(),{pickByTheme:h,fileUrl:g}=Ye(),E=vn("appConfig"),N=B(null),r=B({lastname:"",firstname:"",email:"",address:"",location:void 0,avatar:"",phone:""}),b=Te(()=>({lastname:[{required:!0,message:t("fillRequired")}],firstname:[{required:!0,message:t("fillRequired")}],email:[{required:u.userData?u.userData.authType!=xe.PHONE:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&!$e.isEmail(l)?new Error(t("invalidEmail")):!0}}],phone:[{trigger:["input"],validator(v,l){return l&&!Vt(l)?new Error(t("invalidNumber")):!0}}]})),u=Qe(),{data:P,refetch:k,isPending:x}=xt(u.userData?.id||0),{mutate:q,isPending:M}=Ze();hn(()=>P.value,v=>{v&&(r.value={lastname:v.lastname,firstname:v.firstname,email:v.email,address:v.address??"",location:v.location,avatar:v.avatar,phone:v.phone??""})},{immediate:!0,deep:!0});const _=v=>{r.value.location=v},C=Te(()=>u.userData?.lastname===r.value.lastname&&u.userData?.firstname===r.value.firstname&&u.userData?.avatar===r.value.avatar&&u.userData?.address===r.value.address&&u.userData?.location===r.value.location&&(u.userData?.phone===r.value.phone||!r.value.phone)),$=async v=>{v.preventDefault(),N.value?.validate(async l=>{l||(p.start(),q({id:u.userData?.id,lastname:r.value.lastname,firstname:r.value.firstname,address:r.value.address,location:r.value.location,avatar:r.value.avatar,phone:r.value.phone},{onSuccess:U=>{u.userData=U,s.success(t("success"))},onError:U=>{s.error(t("anErrorOccurred"))},onSettled:()=>{p.finish()}}))})},F="avatars",c=B(!1),O=async v=>{r.value.avatar=v,c.value=!1},ee=()=>{r.value.avatar=""},V=B(!1),H=B(null),y=B({newPassword:"",newPasswordConfirmation:"",currentPassword:""}),te={newPassword:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&["too-weak"].includes(Nt(l,Lt).value)?new Error(t("passwordTooWeak")):!0}}],newPasswordConfirmation:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&l!==y.value.newPassword?new Error(t("nonCompliantPassword")):!0}}],currentPassword:[{required:!0,message:t("fillRequired")}]},{mutate:G,isPending:W}=$t(),le=async()=>(H.value?.validate(async v=>{v||G({newPassword:y.value.newPassword,newPasswordConfirmation:y.value.newPasswordConfirmation,currentPassword:y.value.currentPassword},{onSuccess:()=>{y.value={newPassword:"",newPasswordConfirmation:"",currentPassword:""},V.value=!1}})}),!1),z=B(!1),S=B(null),j=B({email:""}),Ke={email:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&!$e.isEmail(l)?new Error(t("invalidEmail")):!0}}]},{mutate:et,isPending:be}=Ft(),tt=async()=>(S.value?.validate(async v=>{v||et(j.value.email,{onSuccess(l,U,I){u.userData&&j.value.email&&(u.userData.email=j.value.email),r.value.email=j.value.email,j.value={email:""},z.value=!1}})}),!1),ne=B(!1),nt=()=>{ne.value=!1,k()};return(v,l)=>{const U=he,I=je,X=ge,ue=He,ke=pt,ye=Xe,A=vt,ae=_t,ce=We,lt=Ct,de=ht,Q=gt,at=tn,Ce=wt,ot=bt,fe=mt,st=Ge,Ee=kt,rt=Oe,it=dt,ut=ct,pe=yt;return T(),ve(Re,null,[n(it,null,{"header-extra":a(()=>[n(ue,null,{default:a(()=>[Ve(n(X,{secondary:"",onClick:l[0]||(l[0]=i=>z.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:email"})]),_:1})]),default:a(()=>[Y(" "+R(e(t)("editEmail")),1)]),_:1},512),[[Be,!1]]),Ve(n(X,{secondary:"",onClick:l[1]||(l[1]=i=>V.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:password"})]),_:1})]),default:a(()=>[Y(" "+R(e(t)("editPassword")),1)]),_:1},512),[[Be,!1]]),n(X,{loading:e(M),disabled:e(C),secondary:"",type:"primary",onClick:$},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:save"})]),_:1})]),default:a(()=>[Y(" "+R(e(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),default:a(()=>[n(st,{hoverable:""},{default:a(()=>[n(ce,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:a(()=>[n(ye,{class:"text-center"},{default:a(()=>[n(ue,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:a(()=>[e(r).avatar?(T(),K(ke,{key:0,class:"cursor-pointer","object-fit":"contain",style:ze("border: 1px dashed "+e(h)("green","white")),size:125,src:e(g)(e(r).avatar),onClick:l[2]||(l[2]=i=>c.value=!0)},null,8,["style","src"])):(T(),K(ke,{key:1,class:"cursor-pointer",style:ze("border: 1px dashed "+e(h)("green","white")),size:125,onClick:l[3]||(l[3]=i=>c.value=!0)},{default:a(()=>[e(u).userData?.fullname?(T(),ve("span",pn,R(e(Ut)(e(u).userData?.fullname||"")),1)):(T(),K(I,{key:1,size:64},{default:a(()=>[n(U,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style"])),e(r).avatar?(T(),K(X,{key:2,quaternary:"",onClick:l[4]||(l[4]=i=>ee())},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:trash-can"})]),_:1})]),default:a(()=>[Y(" "+R(e(t)("clear")),1)]),_:1})):Ie("",!0)]),_:1})]),_:1}),n(ye,null,{default:a(()=>[n(fe,{ref_key:"formRef",ref:N,model:e(r),rules:e(b),"show-label":!0,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(ce,{"x-gap":"12",span:24},{default:a(()=>[n(ae,{span:12,label:e(t)("lastname"),path:"lastname"},{default:a(()=>[n(A,{value:e(r).lastname,"onUpdate:value":l[5]||(l[5]=i=>e(r).lastname=i),placeholder:e(t)("lastname"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(ae,{span:12,label:e(t)("firstname_s"),path:"firstname"},{default:a(()=>[n(A,{value:e(r).firstname,"onUpdate:value":l[6]||(l[6]=i=>e(r).firstname=i),placeholder:e(t)("firstname_s"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),n(ce,{"x-gap":"12",span:24},{default:a(()=>[n(ae,{span:12,label:e(t)("phoneNumber"),path:"phone"},{default:a(()=>[n(lt,{modelValue:e(r).phone,"onUpdate:modelValue":l[7]||(l[7]=i=>e(r).phone=i),disabled:e(u).userData?.authType==e(xe).PHONE},null,8,["modelValue","disabled"])]),_:1},8,["label"]),n(ae,{span:12,label:e(t)("addressEmail"),path:"email"},{default:a(()=>[n(de,null,{default:a(()=>[n(A,{value:e(r).email,"onUpdate:value":l[8]||(l[8]=i=>e(r).email=i),placeholder:e(t)("addressEmail"),disabled:"",class:"w-full"},null,8,["value","placeholder"]),n(X,{secondary:"",type:"primary",loading:e(be),onClick:l[9]||(l[9]=i=>z.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"])]),_:1}),n(Q,{label:e(t)("address"),path:"address"},{default:a(()=>[n(A,{value:e(r).address,"onUpdate:value":l[10]||(l[10]=i=>e(r).address=i),placeholder:e(t)("address"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(Q,{label:e(t)("location"),path:"location"},{default:a(()=>[n(at,{class:"w-full",height:150,"show-feature":!0,"coord-to-high-light":e(r).location,"onUpdate:coords":_},null,8,["coord-to-high-light"])]),_:1},8,["label"]),n(Q,{label:e(t)("password"),path:"password"},{default:a(()=>[n(de,null,{default:a(()=>[n(A,{value:"password",placeholder:e(t)("password"),type:"password",disabled:"",class:"w-full"},null,8,["placeholder"]),n(X,{secondary:"",type:"primary",loading:e(W),onClick:l[11]||(l[11]=i=>V.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"]),n(de,null,{default:a(()=>[n(Ce,{style:{width:"30%"}},{default:a(()=>[Ae("span",mn,R(e(t)("roles")),1)]),_:1}),n(Ce,{style:{width:"70%"}},{default:a(()=>[(T(!0),ve(Re,null,fn(e(u).userData?.roles||[],i=>(T(),K(ot,{key:i.name,class:"mx-1",size:"small",type:"info",round:!1,bordered:!1,strong:""},{default:a(()=>[Y(R(i.displayName),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),n(Ee,{dashed:""}),n(rt,{class:"mb-5"},{title:a(()=>[Y(R(e(t)("profileInfo")),1)]),extra:a(()=>[n(ue,null,{default:a(()=>[n(X,{secondary:"",type:"primary",onClick:l[12]||(l[12]=i=>ne.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(U,{icon:"fa-solid:window-restore"})]),_:1})]),default:a(()=>[Y(" "+R(e(t)("open")),1)]),_:1})]),_:1})]),_:1}),n(Ee,{dashed:""}),n(cn),l[24]||(l[24]=Ae("div",{class:"h-10"},null,-1))]),_:1,__:[24]}),n(ut,{show:e(c),"onUpdate:show":l[13]||(l[13]=i=>re(c)?c.value=i:null),title:e(t)("avatar"),"upload-config":{folder:F,limit:0,maxSize:0,baseUrl:e(E)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:O},null,8,["show","title","upload-config"]),n(pe,{show:e(V),"onUpdate:show":l[17]||(l[17]=i=>re(V)?V.value=i:null),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editPassword"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),loading:e(W),onPositiveClick:le,onNegativeClick:l[18]||(l[18]=i=>V.value=!1)},{default:a(()=>[n(fe,{ref_key:"pwdFormRef",ref:H,model:e(y),rules:te,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(Q,{label:e(t)("newPassword"),path:"newPassword"},{default:a(()=>[n(A,{value:e(y).newPassword,"onUpdate:value":l[14]||(l[14]=i=>e(y).newPassword=i),placeholder:e(t)("newPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(Q,{label:e(t)("confirmPassword"),path:"newPasswordConfirmation"},{default:a(()=>[n(A,{value:e(y).newPasswordConfirmation,"onUpdate:value":l[15]||(l[15]=i=>e(y).newPasswordConfirmation=i),placeholder:e(t)("confirmPassword"),disabled:!e(y).newPassword,"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),n(Q,{label:e(t)("currentPassword"),path:"currentPassword"},{default:a(()=>[n(A,{value:e(y).currentPassword,"onUpdate:value":l[16]||(l[16]=i=>e(y).currentPassword=i),placeholder:e(t)("currentPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text","loading"]),n(pe,{show:e(z),"onUpdate:show":l[20]||(l[20]=i=>re(z)?z.value=i:null),preset:"dialog",style:{width:"400px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editEmail"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),loading:e(be),onPositiveClick:tt,onNegativeClick:l[21]||(l[21]=i=>z.value=!1)},{default:a(()=>[n(fe,{ref_key:"emailFormRef",ref:S,model:e(j),rules:Ke,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(Q,{label:e(t)("emailAddress"),path:"email"},{default:a(()=>[n(A,{value:e(j).email,"onUpdate:value":l[19]||(l[19]=i=>e(j).email=i),placeholder:e(t)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text","loading"]),n(pe,{show:e(ne),"onUpdate:show":l[23]||(l[23]=i=>re(ne)?ne.value=i:null),loading:e(x)||e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("profileInfo")},{default:a(()=>[e(u).userData?.profileType==e(Dt).ADMIN?(T(),K(Bt,{key:0,mode:"edition","initial-data":e(u).userData?.profile,onBack:l[22]||(l[22]=i=>nt())},null,8,["initial-data"])):Ie("",!0)]),_:1},8,["show","loading","title"])],64)}}});export{Rn as default};
