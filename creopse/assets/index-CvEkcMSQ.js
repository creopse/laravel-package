const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/export2excel-wUP16iDm.js","assets/xlsx-BynBL3lx.js","assets/crypto-js-DGV_XXMx.js","assets/ckeditor_ckeditor5-vue-DkSYpigU.js","assets/vue-C-DsSy4F.js","assets/vue_runtime-dom-D3WKiRcW.js","assets/vue_runtime-core-CZBc7Bfo.js","assets/vue_reactivity-B2cUHA-s.js","assets/vue_shared-GTvaU3GG.js","assets/vue_compiler-dom-Ao68HxB6.js","assets/vue_compiler-core-BFsbdLRI.js","assets/file-saver-BzOHKmZT.js"])))=>i.map(i=>d[i]);
import{i as ge}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{_ as ba,a as Nn,b as Ni}from"./index.vue_vue_type_script_setup_true_lang-BG9tDE2Y.js";import{_ as Xi}from"./PageLayout.vue_vue_type_script_setup_true_lang-OixN3STA.js";import{_ as na}from"./I18nInput-D7U2qJkw.js";import{e as Zt,u as Pt,f as Wl,r as Ka,q as lo,s as zr,t as Bt,j as ao,_ as Ya,v as Ei,w as Ui,x as Zi,y as Cs,i as Ai,k as Qi,R as ec}from"./index-B2LlKIv2.js";import{I as me}from"./iconify_vue-BwapRRpV.js";import{_ as Ts}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-DRZao2ZZ.js";import{R as cl}from"./response-error-code-DXeaxdrh.js";import{d as ro,a as It}from"./pinia-DbZVydD4.js";import{_ as be}from"./lodash-DjP7BPMr.js";import{c as El,b as gl,a as hl,a3 as Cl,O as En,ag as ka,A as fl,g as Vl,a0 as Ga,V as Ma,B as Se,N as oe,a2 as fa,D as Ol,G as oa,H as fn,F as Kt,a8 as zs,a9 as Ss,E as jl,ah as tc,ac as so,a7 as Ms,R as Ha,aa as Di,j as wa,a6 as Ns,ab as Li,a4 as Vr,M as Un,ai as Ir,aj as lc,Z as io,$ as co,X as Es,S as Bi,a1 as uo,ak as Pi,al as ac,k as nc,am as oc,an as Ri,ao as Fi,I as sc,P as Oi,ap as ji,_ as qi,aq as rc,n as ic,m as cc,h as uc}from"./naive-ui-CrTIpLJ9.js";import{u as Dt}from"./vue-i18n-CWrb4u3f.js";import{_ as Wa}from"./fawmi_vue-google-maps-DHKJ2mA8.js";import{o as dc,a as pc}from"./vueuse_core-C-qbfbRJ.js";import{s as fc}from"./vue-virtual-scroller-D46kPdIT.js";import{i as Sr}from"./is-svg-CT2ffbDp.js";import{_ as Ki}from"./index.vue_vue_type_style_index_0_lang-DrbEnv8N.js";import{R as oo}from"./vue-pick-colors-FPim5JW0.js";import{v as Nl}from"./uuid-8I8R7izr.js";import{s as Yi}from"./slugify-B8X89fKF.js";import{_ as mc}from"./media-library-DmBw0Umg.js";import{_ as Gi}from"./UploadExcel-CQfDDmbl.js";import{_ as no}from"./validator-QVVspsrX.js";import{_ as _c}from"./VueTelInputWrapper-c5drLhb6.js";import{i as vc}from"./libphonenumber-js-Cbgs1wa0.js";import{a as yc}from"./vue-router-B7M2c80d.js";var qa=(se=>(se.IMAGE="image",se.VIDEO="video",se))(qa||{});const Vs=ro("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:se}=Zt(),e=await se({url:"/ad-identifiers"});e.success&&e.result.data&&(this.adIdentifiers=e.result.data)}}}),{useModel:gc,defineComponent:hc}=await ge("vue"),{unref:Ae,resolveComponent:my,createVNode:ut,toDisplayString:Dn,createTextVNode:Ds,withCtx:St,renderList:bc,Fragment:Mr,openBlock:Ln,createElementBlock:Ls,createElementVNode:po,createCommentVNode:kc,normalizeClass:Nr,createBlock:Bs,isRef:wc}=await ge("vue"),xc={class:"flex items-center justify-between"},$c={class:"flex flex-col"},Cc={class:"text-sm font-bold"},Vc={class:"text-xs font-normal"},Ic={key:0,class:"text-xs font-bold"},{ref:Bn}=await ge("vue"),Tc=hc({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(se){const{t:e}=Dt(),{request:n}=Zt(),{pickByTheme:s,displayFormErrors:K,formatKey:X}=Pt(),p=gc(se,"show"),{adIdentifiers:A}=It(Vs()),{loadAdIdentifiers:$}=Vs(),{isLightTheme:Q}=It(Wl()),U=Bn(!1),B=async()=>{U.value=!0,await $(),U.value=!1};B();const V=El(),b=gl(),u=hl(),H=Bn(!1),N=Bn(!1),O=Bn(null),Z=Bn(null),a=Bn({id:"",reusable:!1,contentType:qa.IMAGE,contentSize:"",params:[]}),ee={id:[{required:!0,message:e("fillRequired")}]},P=G=>{O.value=be.cloneDeep(G),a.value=be.cloneDeep(G||{id:"",reusable:!1,contentType:qa.IMAGE,contentSize:"",params:[]}),N.value=!0},S=async()=>(Z.value?.validate(async G=>{if(!G){u.start(),H.value=!0;const C={id:a.value.id,reusable:a.value.reusable,contentType:a.value.contentType,contentSize:a.value.contentSize,params:a.value.params},y=await n({method:O.value?"put":"post",url:O.value?`/ad-identifiers/${O.value.id}`:"/ad-identifiers",data:C});if(y.failure&&y.error)switch(y.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:K(y.error?.response?.data?.data);break;default:b.error(e("anErrorOccurred"))}else b.success(e("success")),B(),N.value=!1;H.value=!1,u.finish()}}),!1),Y=async G=>{V.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/ad-identifiers/${G.id}`})).success?(b.success(e("success")),B()):b.error(e("anErrorOccurred"))}})};return(G,C)=>{const y=me,i=Se,j=Vl,L=Ga,ae=Ma,f=oe,m=fl,W=ka,c=fa,w=En,q=Cl,r=Kt,o=fn,z=oa,M=Ss,E=zs,g=tc,I=jl,pe=Ol;return Ln(),Ls(Mr,null,[ut(q,{show:p.value,"onUpdate:show":C[2]||(C[2]=R=>p.value=R),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Ae(e)("adIdentifiers")},{"header-extra":St(()=>[ut(j,{align:"center"},{default:St(()=>[ut(i,{size:"small",type:"primary",disabled:Ae(U),onClick:C[0]||(C[0]=R=>P(null))},{default:St(()=>[ut(y,{icon:"carbon:add-alt",class:"mr-1"}),Ds(" "+Dn(Ae(e)("add")),1)]),_:1},8,["disabled"]),ut(i,{size:"small",type:"error",disabled:Ae(U),onClick:C[1]||(C[1]=R=>p.value=!1)},{default:St(()=>[ut(y,{icon:"carbon:close",class:"mr-1"}),Ds(" "+Dn(Ae(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:St(()=>[ut(w,{show:Ae(U)},{default:St(()=>[Ae(A).length?(Ln(),Bs(W,{key:0,style:{"max-height":"400px"}},{default:St(()=>[(Ln(!0),Ls(Mr,null,bc(Ae(A),R=>(Ln(),Bs(m,{key:R.id,embedded:"",size:"small",class:"mb-2"},{default:St(()=>[po("div",xc,[po("div",$c,[po("span",Cc,Dn(R.id),1),po("div",null,[po("span",Vc,Dn(R.contentType===Ae(qa).IMAGE?Ae(e)("image"):Ae(e)("video")),1),R.contentSize?(Ln(),Ls("span",Ic," Â ("+Dn(R.contentSize)+") ",1)):kc("",!0)])]),ut(j,null,{default:St(()=>[ut(L,{size:"medium",bordered:!1,type:R.reusable?"info":"warning"},{default:St(()=>[Ds(Dn(R.reusable?Ae(e)("reusable"):Ae(e)("notReusable")),1)]),_:2},1032,["type"]),ut(ae,{vertical:"",class:Nr(["!mx-0",Ae(s)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ut(i,{size:"small",type:"warning",secondary:Ae(Q),onClick:te=>P(R)},{default:St(()=>[ut(f,null,{default:St(()=>[ut(y,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),ut(i,{size:"small",type:"error",secondary:Ae(Q),onClick:te=>Y(R)},{default:St(()=>[ut(f,null,{default:St(()=>[ut(y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Ln(),Bs(m,{key:1,size:"large",class:Nr(`mb-2 !border-dashed !border-2 ${Ae(s)("!border-zinc-300","!border-zinc-600")}`)},{default:St(()=>[ut(c,{description:Ae(e)("noIdentifierAdded")},{icon:St(()=>[ut(f,{size:"60"},{default:St(()=>[ut(y,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),ut(q,{show:Ae(N),"onUpdate:show":C[8]||(C[8]=R=>wc(N)?N.value=R:null),loading:Ae(H),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ae(O)?Ae(e)("editAdIdentifier"):Ae(e)("addAdIdentifier"),"positive-text":Ae(e)("validate"),"negative-text":Ae(e)("cancel"),onPositiveClick:S,onNegativeClick:C[9]||(C[9]=R=>N.value=!1)},{default:St(()=>[ut(pe,{ref_key:"formRef",ref:Z,model:Ae(a),rules:ee,"show-require-mark":!1,size:"medium",class:"my-5"},{default:St(()=>[ut(z,{span:24,"x-gap":"12"},{default:St(()=>[ut(o,{span:16,label:Ae(e)("identifier"),path:"id"},{default:St(()=>[ut(r,{value:Ae(a).id,placeholder:Ae(e)("identifier"),class:"w-full","onUpdate:value":C[3]||(C[3]=R=>Ae(a).id=Ae(X)(R))},null,8,["value","placeholder"])]),_:1},8,["label"]),ut(o,{span:8,label:Ae(e)("contentSize"),path:"contentSize"},{default:St(()=>[ut(r,{value:Ae(a).contentSize,"onUpdate:value":C[4]||(C[4]=R=>Ae(a).contentSize=R),placeholder:Ae(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),ut(z,{span:24,"x-gap":"12"},{default:St(()=>[ut(o,{span:12,label:Ae(e)("status"),path:"reusable"},{default:St(()=>[ut(E,{value:Ae(a).reusable,"onUpdate:value":C[5]||(C[5]=R=>Ae(a).reusable=R),name:"reusable",class:"w-full"},{default:St(()=>[ut(M,{value:!1,label:Ae(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),ut(M,{value:!0,label:Ae(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),ut(o,{span:12,label:Ae(e)("contentType"),path:"contentType"},{default:St(()=>[ut(E,{value:Ae(a).contentType,"onUpdate:value":C[6]||(C[6]=R=>Ae(a).contentType=R),name:"contentType",class:"w-full"},{default:St(()=>[ut(M,{value:Ae(qa).IMAGE,label:Ae(e)("image"),class:"w-[50%]"},null,8,["value","label"]),ut(M,{value:Ae(qa).VIDEO,label:Ae(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ut(I,{label:Ae(e)("settings"),path:"params"},{default:St(()=>[ut(g,{value:Ae(a).params,"onUpdate:value":C[7]||(C[7]=R=>Ae(a).params=R),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{defineComponent:zc}=await ge("vue"),{unref:ue,createVNode:je,withCtx:dt,toDisplayString:_n,createTextVNode:vn,openBlock:$a,createBlock:Go,createCommentVNode:Ps,resolveComponent:_y,isRef:Pn,Fragment:Ho,createElementBlock:Rn,normalizeStyle:Er,createElementVNode:Rs,renderList:Sc}=await ge("vue"),Mc={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Nc={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Ec=["src"],{inject:Uc,ref:Il,h:Gt,computed:Ur}=await ge("vue"),Ac=zc({__name:"index",setup(se){const e=hl(),n=gl(),s=El(),K=Uc("appConfig"),{adIdentifiers:X}=It(Vs()),{loadAdIdentifiers:p}=Vs(),{displayFormErrors:A,tr:$,fileUrl:Q,pickByTheme:U,appSecondaryColor:B,isInDevMode:V}=Pt(),{request:b}=Zt(),{t:u,locale:H}=Dt(),N=Il(!1),O=Il([]),Z=Il(""),a=Il(),ee={pageSize:12,prefix:({itemCount:g})=>Gt("div",{class:"font-bold"},{default:()=>`${u("total")}: ${g}`})},P=[{title:u("preview"),key:"image",width:200,fixed:"left",render(g){return g.adIdentifier?.contentType==qa.IMAGE?Gt(so,{src:g.contentUrl??"",objectFit:"cover",width:200,height:100}):Gt("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[Gt(oe,{size:50,color:B.value},{default:()=>Gt(me,{icon:"carbon:document-video"})})])}},{title:u("identifier"),key:"pid",width:150,fixed:"left",render(g){return Gt("small",{},{default:()=>g.pid})}},{title:u("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(g){return Gt("div",{},{default:()=>$(g.title)})}},{title:u("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(g){return Gt("small",{},{default:()=>$(g.description)})}},{title:u("status"),key:"isActive",width:100,render(g){return Gt(Ga,{type:g.display?"success":"warning",bordered:!1},{default:()=>g.display?u("visible"):u("hidden")})},sortOrder:!1,sorter:"default"},{title:u("updateAt"),key:"updatedAt",width:125,render(g){return Gt("div",{},{default:()=>Ka(g.updatedAt,{locale:H.value,outPattern:"DD MMMM YYYY"})})}},{title:u("createdAt"),key:"createdAt",width:125,render(g){return Gt("div",{},{default:()=>Ka(g.createdAt,{locale:H.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Gt(Kt,{ref:a,placeholder:u("search"),value:Z.value,onInput:g=>{Z.value=g}},{suffix:()=>Gt(oe,{},{default:()=>Gt(me,{icon:"carbon:search"})})}),key:"actions",width:150,render(g){return Gt("div",{class:"flex justify-end items-center w-full"},[Gt(Se,{size:"small",type:"warning",onClick:()=>{c(g)},renderIcon:()=>Gt(oe,null,{default:()=>Gt(me,{icon:"carbon:edit"})})}),Gt("div",{class:"w-2"}),Gt(Se,{size:"small",type:"error",onClick:()=>{s.warning({title:u("confirm"),content:u("confirmDeleteAd"),positiveText:u("yes"),negativeText:u("no"),onPositiveClick:async()=>{(await b({method:"delete",url:`/ads/${g.id}`})).success?(n.success(u("success")),Y()):n.error(u("anErrorOccurred"))}})},renderIcon:()=>Gt(oe,null,{default:()=>Gt(me,{icon:"carbon:trash-can"})})})])},fixed:"right"}],S=Ur(()=>{if(!Z.value)return O.value;const g=O.value.filter(I=>I.pid.toLowerCase().includes(Z.value.toLowerCase())||I.title.toLowerCase().includes(Z.value.toLowerCase())||I.description?.toLowerCase().includes(Z.value.toLowerCase()));return a.value&&a.value.focus(),g}),Y=async()=>{N.value=!0;const g=await b({url:"/ads"});g.success&&g.result&&(O.value=g.result.data),await p(),N.value=!1};Y();const G=Il(!1),C=Il(!1),y=Il(!1),i=Il(qa.IMAGE),j=Il(),L=Il(null),ae=Il(null),f=Il({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),m={pid:[{required:!0,message:u("fillRequired")}],title:[{required:!0,message:u("fillRequired")}],content:[{required:!0,message:u("fillRequired")}]},W=Ur({get:()=>!f.value.broadcastStart||!f.value.broadcastEnd?null:[f.value.broadcastStart||"",f.value.broadcastEnd||""],set:g=>{g?(f.value.broadcastStart=g[0],f.value.broadcastEnd=g[1]):(f.value.broadcastStart=null,f.value.broadcastEnd=null)}}),c=g=>{L.value=be.cloneDeep(g),g?(f.value=be.cloneDeep(g),g.data||(f.value.data={})):f.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},j.value=X.value.find(I=>I.id==f.value.pid)?.params,C.value=!0},w=g=>Gt("span",{},{default:()=>g.id+(g.contentSize?` (${g.contentSize})`:"")}),q=async()=>(ae.value?.validate(async g=>{if(!g)if(L.value)if(L.value.title!==f.value.title&&O.value.findIndex(I=>I.title==f.value.title)>-1)n.error(u("sameAdTitleMessage"));else{e.start(),G.value=!0;const I={pid:f.value.pid,title:f.value.title,display:f.value.display,content:f.value.content,description:f.value.description,data:f.value.data,broadcastStart:f.value.broadcastStart,broadcastEnd:f.value.broadcastEnd},pe=await b({method:"put",url:`/ads/${L.value.id}`,data:I});pe.success&&pe.result.data&&(n.success(u("success")),Y()),G.value=!1,e.finish(),C.value=!1}else if(O.value.findIndex(I=>I.title==f.value.title)>-1)n.error(u("sameAdTitleMessage"));else{e.start(),G.value=!0;const I={pid:f.value.pid,title:f.value.title,display:f.value.display,content:f.value.content,description:f.value.description,data:f.value.data,broadcastStart:f.value.broadcastStart,broadcastEnd:f.value.broadcastEnd},pe=await b({method:"post",url:"/ads",data:I});if(pe.failure&&pe.error)switch(pe.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:A(pe.error?.response?.data?.data);break;default:n.error(u("anErrorOccurred"))}else n.success(u("success")),Y();G.value=!1,e.finish(),C.value=!1}}),!1),r=Il(!1),o=Il(!1),z=Il(!1),M=Il(""),E=Il("");return(g,I)=>{const pe=Vl,R=ba,te=Ms,v=Ts,re=na,it=jl,fe=Di,Oe=wa,ve=fn,ce=Ss,zt=zs,rt=oa,ke=Ha,F=Ns,h=Ol,Ce=Cl,J=Nn;return $a(),Rn(Ho,null,[je(R,{to:"#alt-action"},{default:dt(()=>[je(pe,null,{default:dt(()=>[ue(V)?($a(),Go(ue(Se),{key:0,type:"warning",onClick:I[0]||(I[0]=D=>y.value=!0)},{default:dt(()=>[je(ue(oe),{size:"26"},{default:dt(()=>[je(ue(me),{icon:"carbon:id"})]),_:1}),vn(" "+_n(ue(u)("identifiers")),1)]),_:1})):Ps("",!0),je(ue(Se),{type:"primary",onClick:I[1]||(I[1]=D=>c(null))},{icon:dt(()=>[je(ue(oe),{size:"18"},{default:dt(()=>[je(ue(me),{icon:"carbon:add-alt"})]),_:1})]),default:dt(()=>[vn(" "+_n(ue(u)("addAd")),1)]),_:1})]),_:1})]),_:1}),je(v,null,{default:dt(()=>[je(te,{columns:P,data:ue(S),pagination:ee,loading:ue(N),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),je(Ce,{show:ue(C),"onUpdate:show":I[12]||(I[12]=D=>Pn(C)?C.value=D:null),loading:ue(G),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ue(L)?ue(u)("editAd"):ue(u)("addAd"),"positive-text":ue(u)("validate"),"negative-text":ue(u)("cancel"),onPositiveClick:q,onNegativeClick:I[13]||(I[13]=D=>C.value=!1)},{default:dt(()=>[je(h,{ref_key:"formRef",ref:ae,class:"mt-5",model:ue(f),rules:m,"show-require-mark":!1,size:"medium"},{default:dt(()=>[je(rt,{cols:"24","x-gap":12},{default:dt(()=>[je(ke,{span:"12"},{default:dt(()=>[je(it,{"show-label":!1,path:"title"},{default:dt(()=>[je(re,{modelValue:ue(f).title,"onUpdate:modelValue":I[2]||(I[2]=D=>ue(f).title=D),placeholder:ue(u)("title"),class:"w-full",sync:""},{label:dt(()=>[vn(_n(ue(u)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),je(it,{"show-label":!1,path:"description"},{default:dt(()=>[je(re,{modelValue:ue(f).description,"onUpdate:modelValue":I[3]||(I[3]=D=>ue(f).description=D),placeholder:ue(u)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:dt(()=>[vn(_n(ue(u)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),je(it,{label:ue(u)("broadcastPeriod"),path:"broadcastPeriod"},{default:dt(()=>[je(fe,{"formatted-value":ue(W),"onUpdate:formattedValue":I[4]||(I[4]=D=>Pn(W)?W.value=D:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),je(rt,{"x-gap":"12",span:24},{default:dt(()=>[je(ve,{span:12,label:ue(u)("identifier"),path:"pid"},{default:dt(()=>[je(Oe,{value:ue(f).pid,"onUpdate:value":[I[5]||(I[5]=D=>ue(f).pid=D),I[6]||(I[6]=()=>{j.value=ue(X).find(D=>D.id==ue(f).pid)?.params})],"render-label":w,options:ue(X).map(D=>({...D,disabled:!D.reusable&&(D.adsCount||0)>0})),placeholder:ue(u)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),je(ve,{span:12,label:ue(u)("status"),path:"display"},{default:dt(()=>[je(zt,{value:ue(f).display,"onUpdate:value":I[7]||(I[7]=D=>ue(f).display=D),name:"display",class:"w-full"},{default:dt(()=>[je(ce,{value:!1,label:ue(u)("hidden"),class:"w-[50%]"},null,8,["label"]),je(ce,{value:!0,label:ue(u)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),je(ke,{span:"12"},{default:dt(()=>[je(it,{label:ue(u)("content"),path:"content"},{default:dt(()=>[ue(i)==ue(qa).VIDEO?($a(),Go(F,{key:0},{default:dt(()=>[je(ue(Se),{type:"primary",onClick:I[8]||(I[8]=()=>{o.value=!0})},{default:dt(()=>[vn(_n(ue(u)("select")),1)]),_:1}),je(ue(Kt),{value:ue(f).content?ue(lo)(ue(f).content):"",placeholder:ue(u)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),ue(f).content?($a(),Rn(Ho,{key:0},[je(ue(Se),{type:"primary",ghost:"",onClick:I[9]||(I[9]=()=>{M.value=ue(u)("video"),E.value=ue(Q)(ue(f).content),z.value=!0})},{icon:dt(()=>[je(ue(oe),null,{default:dt(()=>[je(ue(me),{icon:"carbon:play-filled"})]),_:1})]),default:dt(()=>[vn(" "+_n(ue(u)("play")),1)]),_:1}),je(ue(Se),{type:"primary",ghost:"",onClick:I[10]||(I[10]=()=>{ue(f).content=""})},{icon:dt(()=>[je(ue(oe),null,{default:dt(()=>[je(ue(me),{icon:"carbon:trash-can"})]),_:1})]),default:dt(()=>[vn(" "+_n(ue(u)("clear")),1)]),_:1})],64)):Ps("",!0)]),_:1})):($a(),Rn("div",Mc,[Rs("div",{class:"cursor-pointer w-full h-[150px]",onClick:I[11]||(I[11]=()=>{r.value=!0})},[ue(f).content?($a(),Go(ue(so),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Er("border: 1px dashed "+ue(U)("green","white")),src:ue(Q)(ue(f).content||"")},null,8,["style","src"])):($a(),Rn("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Er("border: 1px dashed "+ue(U)("green","white"))},[je(ue(oe),{size:64},{default:dt(()=>[je(ue(me),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),ue(j)&&Array.isArray(ue(j))?($a(),Go(it,{key:0,label:ue(u)("data"),path:"data"},{default:dt(()=>[je(rt,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:dt(()=>[($a(!0),Rn(Ho,null,Sc(ue(j),(D,we)=>($a(),Rn(Ho,{key:we},[je(ke,{span:10},{default:dt(()=>[je(ue(Kt),{value:D,placeholder:D,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),je(ke,{span:14},{default:dt(()=>[je(ue(Kt),{value:ue(f).data[D],"onUpdate:value":et=>ue(f).data[D]=et,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):Ps("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),je(Ce,{show:ue(z),"onUpdate:show":I[14]||(I[14]=D=>Pn(z)?z.value=D:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:ue(M)},{default:dt(()=>[Rs("video",Nc,[Rs("source",{src:ue(E)},null,8,Ec)])]),_:1},8,["show","title"]),je(J,{show:ue(r),"onUpdate:show":I[15]||(I[15]=D=>Pn(r)?r.value=D:null),title:ue(u)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:ue(K)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:I[16]||(I[16]=D=>{ue(f).content=D,r.value=!1})},null,8,["show","title","upload-config"]),je(J,{show:ue(o),"onUpdate:show":I[17]||(I[17]=D=>Pn(o)?o.value=D:null),title:ue(u)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:ue(K)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:I[18]||(I[18]=D=>{ue(f).content=D,o.value=!1})},null,8,["show","title","upload-config"]),je(Tc,{show:ue(y),"onUpdate:show":I[19]||(I[19]=D=>Pn(y)?y.value=D:null)},null,8,["show"])],64)}}}),Dc=Wa(Ac,[["__scopeId","data-v-249c905b"]]),{useModel:Lc,mergeModels:Bc,defineComponent:Pc}=await ge("vue"),{toDisplayString:Wo,createElementVNode:Fs,resolveComponent:Rc,createVNode:Sl,withCtx:ll,unref:Tl,createTextVNode:Os,openBlock:ma,createBlock:fo,createCommentVNode:Jo,renderList:Ar,Fragment:Dr,createElementBlock:Fn,createSlots:Fc,isRef:Lr}=await ge("vue"),{defineComponent:Oc,ref:Xo,inject:jc}=await ge("vue"),qc={class:"w-full"},Kc={class:"mb-2"},Yc={class:"text-base text-left"},Gc=["src","onClick"],Hc=["src"],Wc=Oc({name:"AlbumsPicker"}),Jc=Pc({...Wc,props:Bc({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(se){const e=Lc(se,"modelValue"),n=se,{t:s}=Dt(),{fileUrl:K}=Pt(),X=Xo(!1),p=Xo(!1),A=Xo(0),$=Xo(""),Q=jc("appConfig"),U=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},B=u=>{e.value&&Array.isArray(e.value)?e.value.splice(u,1):e.value=[]},V=(u,H)=>{e.value&&Array.isArray(e.value[H].medias)?e.value[H].medias.splice(u,1):e.value&&(e.value[H].medias=[])},b=u=>{const H=u.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(H)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(H)?"video":"unknown"};return(u,H)=>{const N=me,O=oe,Z=Se,a=na,ee=so,P=Rc("Draggable"),S=Li,Y=ka,G=fl,C=Nn,y=Cl;return ma(),Fn("section",qc,[Fs("section",Kc,[Sl(G,{size:"small",segmented:e.value&&e.value.length>0},{header:ll(()=>[Fs("div",Yc,Wo(n.title),1)]),"header-extra":ll(()=>[n.readonly?Jo("",!0):(ma(),fo(Z,{key:0,quaternary:"",onClick:U},{icon:ll(()=>[Sl(O,{size:"18"},{default:ll(()=>[Sl(N,{icon:"carbon:folder-add"})]),_:1})]),default:ll(()=>[Os(" "+Wo(Tl(s)("addAlbum")),1)]),_:1}))]),default:ll(()=>[(ma(!0),Fn(Dr,null,Ar(e.value,(i,j)=>(ma(),fo(G,{key:j,size:"small",embedded:"",hoverable:"",segmented:i.medias&&i.medias.length>0,class:"mb-4"},Fc({header:ll(()=>[Sl(a,{modelValue:i.name,"onUpdate:modelValue":L=>i.name=L,placeholder:Tl(s)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:ll(()=>[Sl(Y,{style:{"max-height":"100%"}},{default:ll(()=>[i.medias&&i.medias.length>0?(ma(),fo(S,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:ll(()=>[Sl(P,{list:i.medias,class:"w-full grid grid-cols-3 gap-4"},{default:ll(()=>[(ma(!0),Fn(Dr,null,Ar(i.medias,(L,ae)=>(ma(),Fn("div",{key:"img-"+ae,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[b(L)==="image"?(ma(),fo(ee,{key:0,"object-fit":"cover",src:Tl(K)(L)},null,8,["src"])):(ma(),Fn("video",{key:1,muted:"",src:Tl(K)(L),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{$.value=Tl(K)(L),p.value=!0}},null,8,Gc)),n.readonly?Jo("",!0):(ma(),fo(Z,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:f=>V(ae,j)},{icon:ll(()=>[Sl(O,null,{default:ll(()=>[Sl(N,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):Jo("",!0)]),_:2},1024)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:ll(()=>[Sl(Z,{quaternary:"",class:"mr-2",onClick:()=>{A.value=j,X.value=!0}},{icon:ll(()=>[Sl(O,null,{default:ll(()=>[Sl(N,{icon:"carbon:add-alt"})]),_:1})]),default:ll(()=>[Os(" "+Wo(Tl(s)("add")),1)]),_:2},1032,["onClick"]),H[3]||(H[3]=Fs("div",{class:"w-2"},null,-1)),Sl(Z,{quaternary:"",type:"error",onClick:L=>B(j)},{icon:ll(()=>[Sl(O,null,{default:ll(()=>[Sl(N,{icon:"carbon:trash-can"})]),_:1})]),default:ll(()=>[Os(" "+Wo(Tl(s)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),Sl(C,{show:Tl(X),"onUpdate:show":H[0]||(H[0]=i=>Lr(X)?X.value=i:null),title:Tl(s)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:Tl(Q)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[1]||(H[1]=i=>{e.value&&Array.isArray(e.value[Tl(A)].medias)?e.value[Tl(A)].medias.push(i):e.value&&(e.value[Tl(A)].medias=[i]),X.value=!1})},null,8,["show","title","upload-config"]),Sl(y,{show:Tl(p),"onUpdate:show":H[2]||(H[2]=i=>Lr(p)?p.value=i:null),preset:"card",style:{width:"500px"},title:Tl(s)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:ll(()=>[Tl($)?(ma(),Fn("video",{key:0,controls:"",autoplay:"",class:"w-full",src:Tl($)},null,8,Hc)):Jo("",!0)]),_:1},8,["show","title"])])}}}),Xc=Wa(Jc,[["__scopeId","data-v-32de8454"]]),{ref:Br}=await ge("vue");function Hi(){const{request:se}=Zt(),e=Br([]),n=A=>{const $=A.split("_"),Q={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},U={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(V=>V.replace(/([A-Z])(?=\.\w+$)/,(b,u)=>U[u]||u))($[0]),$.length>1?Q[$[1]]:""]},s=()=>new Promise(A=>setTimeout(A)),K=async A=>{e.value=[];let $=1;for(const[Q,U]of Object.entries(A)){$&&$%5e3===0&&await s();const[B,V]=n(Q);e.value.push({id:$,name:B,svgCode:U,library:V}),$+=1}return e.value},X=Br(!1);return{searchIcons:async A=>{let $={};X.value=!0;const Q=await se({url:"/search-icons",method:"post",data:{query:A,decode:!1}});if(Q.success&&Q.result){try{$=JSON.parse(Q.result.data)}catch(U){$={},console.error(U)}$=await K($)}return X.value=!1,$},isSearching:X,currentIconsList:e}}const{useCssVars:Zc,defineComponent:Qc}=await ge("vue"),{unref:Zo,openBlock:eu,createElementBlock:tu}=await ge("vue"),lu=["innerHTML"],{computed:Pr,ref:au,watch:nu}=await ge("vue"),ou=Qc({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(se){Zc(X=>({"95b6e21e":Zo(s),"22e3431a":Zo(n)}));const e=se,n=Pr(()=>e.color),s=Pr(()=>typeof e.size=="number"?e.size+"px":e.size||"unset"),K=au();return nu(()=>e.data,async X=>{if(!Sr(X||"")){const{currentIconsList:p}=Hi();K.value=p.value?.find(A=>A.name==X)?.svgCode||""}},{immediate:!0}),(X,p)=>(eu(),tu("i",{innerHTML:Zo(Sr)(e.data||"")?e.data:Zo(K)},null,8,lu))}}),js=Wa(ou,[["__scopeId","data-v-09747f05"]]),{useCssVars:su,defineComponent:ru}=await ge("vue"),{unref:Dl,renderList:iu,Fragment:On,openBlock:kl,createElementBlock:Ll,withModifiers:qs,createBlock:Ks,createCommentVNode:Qo,toDisplayString:es,createElementVNode:Za,resolveComponent:vy,createVNode:jn,withCtx:ts,normalizeClass:Rr,isRef:cu,vModelText:uu,withDirectives:Fr,renderSlot:du,vShow:pu,Transition:fu}=await ge("vue"),mu={key:0,class:"multiple"},_u={key:0,class:"item"},vu={key:2,class:"flex items-center ml-2"},yu={key:1,class:"placeholder"},gu={class:"v3ip__search"},hu=["placeholder"],bu={key:0,class:"v3ip__loader"},ku=["onClick"],wu={key:1,class:"v3ip__empty"},xu={key:1,class:"default-text"},$u={key:1,class:"default-text"},{computed:Or,ref:mo,watch:Cu,useSlots:Vu}=await ge("vue"),Iu=ru({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(se,{emit:e}){su(P=>({"0fdd31ba":Dl(s),fe32c314:Dl(X)}));const n=se,s=Or(()=>typeof n.selectorHeight=="number"?`${n.selectorHeight}px`:n.selectorHeight),K=e,X=mo(n.selectedIconBgColor),p=mo(""),A=mo(!1),{currentIconsList:$,searchIcons:Q,isSearching:U}=Hi();Cu(()=>p.value,P=>{Q(P)},{immediate:!0});const B=Or(()=>be.uniqBy(be.uniqBy($.value.filter(P=>{const S=typeof n.iconLibrary=="string"&&P.library==n.iconLibrary||Array.isArray(n.iconLibrary)&&n.iconLibrary.includes(P.library)||n.iconLibrary=="all",Y=!n.includeIcons||!n.includeIcons.length||n.includeIcons.includes(P.name),G=!n.includeSearch||P.name?.toLocaleLowerCase().includes(n.includeSearch),C=!n.excludeIcons||!n.excludeIcons.length||!n.excludeIcons.includes(P.name),y=!n.excludeSearch||!P.name?.toLocaleLowerCase().includes(n.excludeSearch);return S&&Y&&G&&C&&y}),"svgCode"),"name")),V=P=>n.valueType=="name"?P.name:P.svgCode,b=P=>n.valueType=="name"?$.value?.find(S=>S.name==P)?.svgCode||"":P,u=P=>n.multiple?n.modelValue&&Array.isArray(n.modelValue)&&n.modelValue.length?n.modelValue.findIndex(S=>S==V(P))>-1:!1:n.modelValue==V(P),H=P=>{if(P)if(n.multiple)if(n.modelValue&&Array.isArray(n.modelValue)&&n.modelValue.length){const S=n.modelValue,Y=n.modelValue.findIndex(G=>G==V(P));Y>-1?S.splice(Y,1):n.modelValue.length<n.multipleLimit&&typeof V(P)<"u"&&S.push(V(P)),K("update:modelValue",S),K("change",S,P)}else n.multipleLimit>0&&(K("update:modelValue",[V(P)]),K("change",[V(P)],P));else V(P)==n.modelValue?n.clearable&&K("update:modelValue",null):K("update:modelValue",V(P)),K("change",P)},N=mo();dc(N,()=>A.value=!1);const O=mo(),{width:Z}=pc(O),a=Vu(),ee=P=>!!a[P];return(P,S)=>{const Y=me,G=oe,C=Se,y=En;return kl(),Ll("div",{ref_key:"picker",ref:N,class:"v3ip__custom-select",onBlur:S[4]||(S[4]=i=>A.value=!1)},[Za("div",{class:Rr(["v3ip__selected",{open:Dl(A),disabled:n.disabled}]),onClick:S[2]||(S[2]=i=>A.value=n.disabled?!1:!Dl(A))},[!n.multiple&&n.modelValue||n.multiple&&Array.isArray(n.modelValue)&&n.modelValue?.length?(kl(),Ll(On,{key:0},[n.multiple?(kl(),Ll("div",mu,[Array.isArray(n.modelValue)?(kl(),Ll(On,{key:0},[(kl(!0),Ll(On,null,iu(n.modelValue||[],(i,j)=>(kl(),Ll(On,{key:j},[j<n.selectedItemsToDisplay?(kl(),Ks(js,{key:0,class:"item",data:typeof b(i)=="string"?b(i):null,size:20,onClick:qs(L=>H(Dl($)?.find(ae=>V(ae)==i)),["stop"])},null,8,["data","onClick"])):Qo("",!0)],64))),128)),n.modelValue?.length>n.selectedItemsToDisplay?(kl(),Ll("div",_u,[Za("b",null," +"+es(n.modelValue?.length-n.selectedItemsToDisplay),1)])):Qo("",!0)],64)):Qo("",!0)])):(kl(),Ks(js,{key:1,data:typeof b(n.modelValue)=="string"?b(n.modelValue):null,size:20,onClick:S[0]||(S[0]=qs(i=>H(Dl($)?.find(j=>V(j)==n.modelValue)),["stop"]))},null,8,["data"])),n.modelValue?.length&&n.clearable?(kl(),Ll("div",vu,[jn(C,{type:"error",size:"tiny",secondary:"",onClick:S[1]||(S[1]=qs(()=>{K("update:modelValue",n.multiple?[]:null)},["stop"]))},{default:ts(()=>[jn(G,null,{default:ts(()=>[jn(Y,{icon:"carbon:close"})]),_:1})]),_:1})])):Qo("",!0)],64)):(kl(),Ll("span",yu,es(n.placeholder),1))],2),jn(fu,{name:"fade"},{default:ts(()=>[Fr(Za("div",null,[Za("div",gu,[Fr(Za("input",{"onUpdate:modelValue":S[3]||(S[3]=i=>cu(p)?p.value=i:null),type:"text",name:"search",placeholder:n.searchPlaceholder},null,8,hu),[[uu,Dl(p)]])]),Dl(U)?(kl(),Ll("div",bu,[jn(y,{size:"small"})])):(kl(),Ll(On,{key:1},[Dl(B)&&Dl(B).length?(kl(),Ks(Dl(fc),{key:0,ref_key:"scroller",ref:O,class:"v3ip__items",items:Dl(B),"item-size":40,"grid-items":4,"item-secondary-size":Dl(Z)/4},{default:ts(({item:i})=>[Za("div",{class:Rr({active:u(i)}),onClick:j=>H(i)},[jn(js,{data:typeof i.svgCode=="string"?i.svgCode:null,size:24,color:u(i)?n.selectedIconColor:void 0},null,8,["data","color"])],10,ku)]),_:1},8,["items","item-secondary-size"])):(kl(),Ll("div",wu,[Dl(p)?(kl(),Ll(On,{key:0},[ee("empty")?du(P.$slots,"empty",{key:0},void 0,!0):(kl(),Ll("div",xu,[Za("small",null,es(n.emptyText),1)]))],64)):(kl(),Ll("div",$u,[Za("small",null,es(n.iconsListPlaceholder),1)]))]))],64))],512),[[pu,Dl(A)]])]),_:3})],544)}}}),Wi=Wa(Iu,[["__scopeId","data-v-67ca7633"]]),{useModel:Tu,mergeModels:zu,defineComponent:Su}=await ge("vue"),{toDisplayString:jr,createElementVNode:qr,resolveComponent:Mu,createVNode:Na,withCtx:_a,unref:_o,createTextVNode:Nu,openBlock:qn,createBlock:Ys,createCommentVNode:Gs,renderList:Eu,Fragment:Uu,createElementBlock:Hs,isRef:Au}=await ge("vue"),{defineComponent:Du,inject:Lu,ref:Bu}=await ge("vue"),Pu={class:"w-full"},Ru={class:"mb-2"},Fu={class:"text-base text-left"},Ou=Du({name:"GridImagesPicker"}),ju=Su({...Ou,props:zu({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(se){const e=Tu(se,"modelValue"),n=Lu("appConfig"),s=se,{t:K}=Dt(),{fileUrl:X}=Pt(),p=Bu(!1),A=Q=>{Array.isArray(e.value)?e.value.splice(Q,1):e.value=[]},$=async Q=>{Array.isArray(e.value)?e.value.push(...Q):e.value=[...Q],p.value=!1};return(Q,U)=>{const B=me,V=oe,b=Se,u=so,H=Mu("Draggable"),N=Li,O=ka,Z=fl,a=Nn;return qn(),Hs("section",Pu,[qr("section",Ru,[Na(Z,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:_a(()=>[qr("div",Fu,jr(s.title),1)]),"header-extra":_a(()=>[s.readonly?Gs("",!0):(qn(),Ys(b,{key:0,quaternary:"",onClick:U[0]||(U[0]=ee=>p.value=!0)},{icon:_a(()=>[Na(V,{size:"18"},{default:_a(()=>[Na(B,{icon:"carbon:add-alt"})]),_:1})]),default:_a(()=>[Nu(" "+jr(_o(K)("add")),1)]),_:1}))]),default:_a(()=>[Na(O,{style:{"max-height":"100%"}},{default:_a(()=>[e.value&&e.value.length?(qn(),Ys(N,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:_a(()=>[Na(H,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:_a(()=>[(qn(!0),Hs(Uu,null,Eu(e.value,(ee,P)=>(qn(),Hs("div",{key:"img-"+P,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[Na(u,{width:"100","object-fit":"cover",src:_o(X)(ee)},null,8,["src"]),s.readonly?Gs("",!0):(qn(),Ys(b,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:S=>A(P)},{icon:_a(()=>[Na(V,null,{default:_a(()=>[Na(B,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):Gs("",!0)]),_:1})]),_:1},8,["segmented"])]),Na(a,{show:_o(p),"onUpdate:show":U[1]||(U[1]=ee=>Au(p)?p.value=ee:null),title:_o(K)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:_o(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:$},null,8,["show","title","upload-config"])])}}}),qu=Wa(ju,[["__scopeId","data-v-12efa615"]]);var zl=(se=>(se.EXTERNAL_LINK="external-link",se.PAGE_LINK="page-link",se.CONTENT_LINK="content-link",se))(zl||{}),yl=(se=>(se.NEWS_TAG="news-tag",se.NEWS_CATEGORY="news-category",se.NEWS_ARTICLE="news-article",se.CONTENT_MODEL="content-model",se))(yl||{});const Ko=()=>{const{t:se}=Dt(),{tr:e}=Pt(),n=(p,A)=>{if(A&&A.titleFieldName)return zr(p.contentModelData.index[A.titleFieldName])?e(p.contentModelData.index[A.titleFieldName]):p.contentModelData.index[A.titleFieldName];if(p.contentModelData&&p.contentModelData.index){const $=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const Q of $)if(p.contentModelData.index[Q])return zr(p.contentModelData.index[Q])?e(p.contentModelData.index[Q]):p.contentModelData.index[Q]}return e(p.title)},s=[{label:se("contentModel"),value:yl.CONTENT_MODEL,tagType:"warning"},{label:se("newsArticle"),value:yl.NEWS_ARTICLE,tagType:"info"},{label:se("newsCategory"),value:yl.NEWS_CATEGORY,tagType:"success"},{label:se("newsTag"),value:yl.NEWS_TAG,tagType:"error"}];return{contentTypes:s,getContentTypeLabel:p=>s.find(A=>A.value===p)?.label,getContentTypeTagType:p=>s.find(A=>A.value===p)?.tagType||"default",extractItemTitle:n}},{defineComponent:Ku}=await ge("vue"),{unref:d,renderList:Yu,Fragment:vo,openBlock:De,createElementBlock:Ca,resolveComponent:yy,createBlock:nt,createCommentVNode:Kn,createVNode:Ze,normalizeStyle:Ws,withCtx:ot,createElementVNode:yo,toDisplayString:sa,createTextVNode:ra,isRef:yn}=await ge("vue"),Gu={key:4,class:"w-full"},Hu={key:5,class:"w-full"},Wu={key:20,class:"w-full flex flex-gap-8 items-center justify-start"},Ju=["onClick"],Xu={key:0,class:"w-full"},Zu={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},Qu=["src"],ed={id:"video",autoplay:"",controls:"",style:{width:"100%"}},td=["src"],{defineComponent:ld,inject:ad,ref:Ht,h:Ea,watch:nd,computed:ls,onMounted:od}=await ge("vue"),sd=ld({name:"FormGenerator"}),rd=Ku({...sd,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(se,{emit:e}){const n=se,s=e,{t:K}=Dt(),{tr:X,pickByTheme:p,fileUrl:A,mergeArrays:$}=Pt(),{extractItemTitle:Q}=Ko(),{request:U}=Zt(),{loadContentModels:B}=Bt(),{contentModels:V}=It(Bt());B();const b=ad("appConfig");let u=[];if(typeof n.items=="string")try{u=JSON.parse(n.items)}catch{u=[]}else u=be.cloneDeep(n.items);let H={};if(n.useJson)try{H=JSON.parse(n.modelValue)}catch{H={}}const N=Ht(""),O=Ht(Nl()),Z=Ht(null),a=Ht(n.useJson?H:n.modelValue),ee={};u.forEach(J=>{J.key in a.value||(J.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(J.type)?a.value[J.key]=JSON.parse(J.defaultValue):J.type=="number"?a.value[J.key]=parseFloat(J.defaultValue):J.type=="content-model-item"?a.value[J.key]=void 0:J.type=="content-model-items"?a.value[J.key]=[]:J.type=="list"?a.value[J.key]=J.defaultValue.split(",").map(D=>({value:D})):J.type=="i18n-list"?a.value[J.key]=J.defaultValue.split(",").map(D=>({value:`{ "fr": "${D}", "en": "${D}" }`})):a.value[J.key]=J.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(J.type)?a.value[J.key]="":["number"].includes(J.type)?a.value[J.key]=0:["checkbox"].includes(J.type)?a.value[J.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(J.type)?a.value[J.key]=[]:a.value[J.key]=void 0),J.required&&(ee[J.key]=[{required:!0,message:K("fillRequired")}]),O.value=Nl()});const P=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],S=J=>Ea("span",{},{default:()=>X(J.label)});nd(()=>a.value,J=>{const D=n.useJson?JSON.stringify(J):J,we=async()=>{if(u.length==0)return!0;let et=!1;try{await Z.value?.validate(mt=>{et=!mt})}catch{et=!1}return et};s("update:modelValue",D),s("update",D,we)},{immediate:!0,deep:!0});const Y=Wl(),G=ls(()=>Y.isLightTheme?"light":"dark"),C=Ht(!1),y=Ht(!1),i=Ht(!1),j=Ht(""),L=Ht(""),ae=Ht(!1),f=Ht(!1),m=Ht(""),W=Ht(""),c=Ht(!1),w=J=>{window.open(J,"_blank")},q=Ht(!1),r=Ht(!1),o=Ht([]);(async()=>{r.value=!0;const J=await U({url:"/menu/items"});if(J.success&&J.result)for(let D=0;D<J.result.data?.length;D++)switch(J.result.data[D].targetType){case zl.EXTERNAL_LINK:o.value.findIndex(we=>we.url===J.result.data[D].url)===-1&&o.value.push(J.result.data[D]);break;case zl.PAGE_LINK:o.value.findIndex(we=>we.path===J.result.data[D].path)===-1&&o.value.push(J.result.data[D]);break}r.value=!1})();const M=Ht(!1),E=Ht([]),g=Ht([]),I=async(J,D)=>{if(!J.length){g.value=[];return}M.value=!0;const we=await U({url:`/content-model-items/search/${J}/${D}`});we.success&&we.result&&(g.value=we.result.data),M.value=!1},pe=ls(()=>$(E.value,g.value,"id")),R=Ht(!1),te=Ht([]),v=Ht([]),re=async J=>{if(!J.length){v.value=[];return}R.value=!0;const D=await U({url:`/news-articles/search/${J}`});D.success&&D.result&&(v.value=D.result.data),R.value=!1},it=ls(()=>$(te.value,v.value,"id")),{categories:fe,tags:Oe}=It(ao()),{loadCategories:ve,loadTags:ce}=ao();od(async()=>{u.find(J=>J.type==="news-categories"||J.type==="news-category")&&(ve(),ce());for(let J=0;J<u.length;J++)if(u[J].type==="news-articles"||u[J].type==="news-article"){R.value=!0;const D=a.value[u[J].key],we=await U({url:"/news-articles/list",method:"post",data:{ids:u[J].type==="news-articles"?D:[D]}});we.success&&we.result&&(te.value=$(te.value,we.result.data,"id")),R.value=!1}else if(u[J].type==="content-model-items"||u[J].type==="content-model-item"){M.value=!0;const D=a.value[u[J].key],we=await U({url:"/content-model-items/list",method:"post",data:{ids:u[J].type==="content-model-items"?D:[D]}});we.success&&we.result&&(E.value=$(E.value,we.result.data,"id")),M.value=!1}});const zt=J=>Ea("span",{},{default:()=>`${X(J.name)}`}),rt=J=>Ea("span",{},{default:()=>`${X(J.title)}`}),ke=J=>Ea("span",{},{default:()=>`${X(J.name)}`}),F=J=>ls(()=>Ea("span",{},{default:()=>Q(J,V.value?.find(D=>D.id===J.contentModelId))})),h=({option:J})=>Ea("div",{style:{display:"flex",alignItems:"center"}},[`${X(J.title)}`]),Ce=J=>Ea("div",{style:{marginLeft:"12px",padding:"4px 0"}},[Ea("div",{},{default:()=>`${X(J.title)}`}),Ea("small",{},{default:()=>`${J.targetType==zl.EXTERNAL_LINK?J.url:J.path}`})]);return(J,D)=>{const we=Kt,et=na,mt=Ki,Ul=Vr,xt=Un,vt=Di,Qt=wa,Al=so,ct=me,Tt=oe,$t=Se,ye=qu,Yt=Wi,xa=Xc,Ja=Ns,An=Ir,Ne=jl,ql=Ol,mn=Cl,Xa=Nn;return De(),Ca(vo,null,[(De(),nt(ql,{ref_key:"formRef",ref:Z,key:d(O),model:d(a),rules:ee,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Ws(n.formStyle)},{default:ot(()=>[(De(!0),Ca(vo,null,Yu(d(u),(l,Us)=>(De(),nt(Ne,{key:Us,label:d(X)(l.label),path:l.key,"label-style":n.labelStyle,"show-require-mark":l.required,class:"w-full"},{default:ot(()=>[l.type=="text"?(De(),nt(we,{key:0,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),maxlength:l.settings?.maxLength||void 0,minlength:l.settings?.minLength||void 0,clearable:l.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):l.type=="i18n-text"?(De(),nt(et,{key:1,modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):l.type=="textarea"?(De(),nt(we,{key:2,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),maxlength:l.settings?.maxLength||void 0,minlength:l.settings?.minLength||void 0,clearable:l.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):l.type=="i18n-textarea"?(De(),nt(et,{key:3,modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):l.type=="editor"?(De(),Ca("div",Gu,[Ze(mt,{modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):l.type=="i18n-editor"?(De(),Ca("div",Hu,[Ze(et,{modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):l.type=="number"?(De(),nt(Ul,{key:6,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,max:l.settings?.max||void 0,min:l.settings?.min||void 0,step:l.settings?.step||1,clearable:l.settings?.clearable||!1,placeholder:d(X)(l.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):l.type=="checkbox"?(De(),nt(xt,{key:7,checked:d(a)[l.key],"onUpdate:checked":ie=>d(a)[l.key]=ie,"checked-value":l.settings?.["checked-value"]||!0,"unchecked-value":l.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):l.type=="date"?(De(),nt(vt,{key:8,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM-dd",format:l.settings?.format||"dd MMMM yyyy",type:"date",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):l.type=="daterange"?(De(),nt(vt,{key:9,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM-dd",format:l.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):l.type=="datetime"?(De(),nt(vt,{key:10,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM-dd HH:mm:ss",format:l.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):l.type=="datetimerange"?(De(),nt(vt,{key:11,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM-dd HH:mm:ss",format:l.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):l.type=="year"?(De(),nt(vt,{key:12,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy",type:"year",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="yearrange"?(De(),nt(vt,{key:13,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy",type:"yearrange",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="month"?(De(),nt(vt,{key:14,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM",type:"month",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="monthrange"?(De(),nt(vt,{key:15,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-MM",type:"monthrange",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="quarter"?(De(),nt(vt,{key:16,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-Q",type:"quarter",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="quarterrange"?(De(),nt(vt,{key:17,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,"value-format":"yyyy-Q",type:"quarterrange",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):l.type=="week"?(De(),nt(vt,{key:18,"formatted-value":d(a)[l.key],"onUpdate:formattedValue":ie=>d(a)[l.key]=ie,type:"week",clearable:l.settings?.clearable||!0,placeholder:d(K)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):l.type=="single-select"||l.type=="multi-select"?(De(),nt(Qt,{key:19,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:(l.options||[])?.map(ie=>{if(l.type=="multi-select"&&l.settings&&d(a)[l.key]){const bl=l.settings?.max||1/0;return{...ie,disabled:d(a)[l.key].length>=bl&&!d(a)[l.key].includes(ie.value)}}return ie}),multiple:l.type=="multi-select",placeholder:d(X)(l.label),"render-label":S,"label-field":"label","value-field":"value",filterable:"",clearable:l.settings?.clearable||!0,"max-tag-count":l.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):l.type=="image"?(De(),Ca("div",Wu,[yo("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{N.value=l.key,C.value=!0}},[d(a)[l.key]?(De(),nt(Al,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Ws("border: 1px dashed "+d(p)("green","white")),src:d(A)(d(a)[l.key]||"")},null,8,["style","src"])):(De(),Ca("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Ws("border: 1px dashed "+d(p)("green","white"))},[Ze(Tt,{size:64},{default:ot(()=>[Ze(ct,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Ju),d(a)[l.key]?(De(),nt($t,{key:0,quaternary:"",onClick:()=>{N.value=l.key,d(a)[d(N)]=""}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:trash-can"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("clear")),1)]),_:2},1032,["onClick"])):Kn("",!0)])):l.type=="gallery"?(De(),nt(ye,{key:21,modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,"upload-folder":"images",title:d(X)(l.label)},null,8,["modelValue","onUpdate:modelValue","title"])):l.type=="news-category"||l.type=="news-categories"?(De(),nt(Qt,{key:22,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:(d(fe)||[])?.map(ie=>{if(l.type=="news-categories"&&l.settings&&d(a)[l.key]){const bl=l.settings?.max||1/0;return{...ie,disabled:d(a)[l.key].length>=bl&&!d(a)[l.key].includes(ie.id)}}return ie}),multiple:l.type=="news-categories",placeholder:d(X)(l.label),"render-label":zt,"label-field":"name","value-field":"id",filterable:"",clearable:l.settings?.clearable||!0,"max-tag-count":l.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):l.type=="news-tag"||l.type=="news-tags"?(De(),nt(Qt,{key:23,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:(d(Oe)||[])?.map(ie=>{if(l.type=="news-tags"&&l.settings&&d(a)[l.key]){const bl=l.settings?.max||1/0;return{...ie,disabled:d(a)[l.key].length>=bl&&!d(a)[l.key].includes(ie.id)}}return ie}),multiple:l.type=="news-tags",placeholder:d(X)(l.label),"render-label":ke,"label-field":"name","value-field":"id",filterable:"",clearable:l.settings?.clearable||!0,"max-tag-count":l.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):l.type=="news-article"||l.type=="news-articles"?(De(),nt(Qt,{key:24,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:(d(it)||[])?.map(ie=>{if(l.type=="news-articles"&&l.settings&&d(a)[l.key]){const bl=l.settings?.max||1/0;return{...ie,disabled:d(a)[l.key].length>=bl&&!d(a)[l.key].includes(ie.id)}}return ie}),multiple:l.type=="news-articles",placeholder:d(X)(l.label),"render-label":rt,loading:d(R),"value-field":"id",filterable:"",clearable:l.settings?.clearable||!0,"max-tag-count":l.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:re},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):l.type=="icon"||l.type=="icons"?(De(),nt(Yt,{key:25,modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),multiple:l.type=="icons","icons-list-placeholder":d(K)("enterIconNameInSearchBar"),"search-placeholder":d(K)("search"),"empty-text":d(K)("noIconsFound"),"icon-library":l.settings?.library||"all",clearable:l.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):l.type=="albums"?(De(),nt(xa,{key:26,modelValue:d(a)[l.key],"onUpdate:modelValue":ie=>d(a)[l.key]=ie,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):l.type=="audio"?(De(),nt(Ja,{key:27},{default:ot(()=>[Ze($t,{type:"primary",onClick:()=>{N.value=l.key,ae.value=!0}},{default:ot(()=>[ra(sa(d(K)("select")),1)]),_:2},1032,["onClick"]),Ze(we,{value:d(a)[l.key]?d(lo)(d(a)[l.key]):"",placeholder:d(K)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),d(a)[l.key]?(De(),Ca(vo,{key:0},[Ze($t,{type:"primary",ghost:"",onClick:()=>{m.value=d(X)(l.label),W.value=d(A)(d(a)[l.key]),f.value=!0}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:play"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("play")),1)]),_:2},1032,["onClick"]),Ze($t,{type:"primary",ghost:"",onClick:()=>{N.value=l.key,d(a)[d(N)]=""}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:trash-can"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("clear")),1)]),_:2},1032,["onClick"])],64)):Kn("",!0)]),_:2},1024)):l.type=="video"?(De(),nt(Ja,{key:28},{default:ot(()=>[Ze($t,{type:"primary",onClick:()=>{N.value=l.key,y.value=!0}},{default:ot(()=>[ra(sa(d(K)("select")),1)]),_:2},1032,["onClick"]),Ze(we,{value:d(a)[l.key]?d(lo)(d(a)[l.key]):"",placeholder:d(K)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),d(a)[l.key]?(De(),Ca(vo,{key:0},[Ze($t,{type:"primary",ghost:"",onClick:()=>{j.value=d(X)(l.label),L.value=d(A)(d(a)[l.key]),i.value=!0}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:play"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("play")),1)]),_:2},1032,["onClick"]),Ze($t,{type:"primary",ghost:"",onClick:()=>{N.value=l.key,d(a)[d(N)]=""}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:trash-can"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("clear")),1)]),_:2},1032,["onClick"])],64)):Kn("",!0)]),_:2},1024)):l.type=="document"?(De(),nt(Ja,{key:29},{default:ot(()=>[Ze($t,{type:"primary",onClick:()=>{N.value=l.key,c.value=!0}},{default:ot(()=>[ra(sa(d(K)("select")),1)]),_:2},1032,["onClick"]),Ze(we,{value:d(a)[l.key]?d(lo)(d(a)[l.key]):"",placeholder:d(K)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),d(a)[l.key]?(De(),Ca(vo,{key:0},[Ze($t,{type:"primary",ghost:"",onClick:ie=>w(d(A)(d(a)[l.key]))},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"mdi:open-in-new"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("open")),1)]),_:2},1032,["onClick"]),Ze($t,{type:"primary",ghost:"",onClick:()=>{N.value=l.key,d(a)[d(N)]=""}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:trash-can"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("clear")),1)]),_:2},1032,["onClick"])],64)):Kn("",!0)]),_:2},1024)):l.type=="file"?(De(),nt(Ja,{key:30},{default:ot(()=>[Ze($t,{type:"primary",onClick:()=>{N.value=l.key,q.value=!0}},{default:ot(()=>[ra(sa(d(K)("select")),1)]),_:2},1032,["onClick"]),Ze(we,{value:d(a)[l.key]?d(lo)(d(a)[l.key]):"",placeholder:d(K)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),d(a)[l.key]?(De(),nt($t,{key:0,type:"primary",ghost:"",onClick:()=>{N.value=l.key,d(a)[d(N)]=""}},{icon:ot(()=>[Ze(Tt,null,{default:ot(()=>[Ze(ct,{icon:"carbon:trash-can"})]),_:1})]),default:ot(()=>[ra(" "+sa(d(K)("clear")),1)]),_:2},1032,["onClick"])):Kn("",!0)]),_:2},1024)):l.type=="color"?(De(),nt(d(oo),{key:31,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,class:"cursor-pointer",theme:d(G),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):l.type=="content-model-item"||l.type=="content-model-items"?(De(),nt(Qt,{key:32,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:(d(pe)||[])?.map(ie=>{if(l.type=="content-model-items"&&l.settings&&d(a)[l.key]){const bl=l.settings?.max||1/0;return{...ie,disabled:d(a)[l.key].length>=bl&&!d(a)[l.key].includes(ie.id)}}return ie}),multiple:l.type=="content-model-items",placeholder:d(X)(l.label),"render-label":ie=>F(ie).value,loading:d(M),"value-field":"id",filterable:"",clearable:l.settings?.clearable||!0,"max-tag-count":l.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:ie=>I(ie,l.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):l.type=="menu-item-link"?(De(),nt(Qt,{key:33,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,options:d(o)||[],placeholder:d(X)(l.label),"render-label":Ce,"render-tag":h,loading:d(r),"label-field":"title","value-field":"id",filterable:"",clearable:l.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):l.type=="list"?(De(),nt(An,{key:34,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),max:l.settings?.max||void 0,min:l.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:ot(({value:ie})=>[l.settings?.type=="editor"?(De(),Ca("div",Xu,[Ze(mt,{modelValue:ie.value,"onUpdate:modelValue":bl=>ie.value=bl,"toolbar-items":P,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(De(),nt(we,{key:1,value:ie.value,"onUpdate:value":bl=>ie.value=bl,type:l.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):l.type=="i18n-list"?(De(),nt(An,{key:35,value:d(a)[l.key],"onUpdate:value":ie=>d(a)[l.key]=ie,placeholder:d(X)(l.label),max:l.settings?.max||void 0,min:l.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:ot(({value:ie})=>[Ze(et,{modelValue:ie.value,"onUpdate:modelValue":bl=>ie.value=bl,type:l.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):Kn("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),Ze(mn,{show:d(f),"onUpdate:show":D[0]||(D[0]=l=>yn(f)?f.value=l:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:d(m)},{default:ot(()=>[yo("audio",Zu,[yo("source",{src:d(W)},null,8,Qu)])]),_:1},8,["show","title"]),Ze(mn,{show:d(i),"onUpdate:show":D[1]||(D[1]=l=>yn(i)?i.value=l:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:d(j)},{default:ot(()=>[yo("video",ed,[yo("source",{src:d(L)},null,8,td)])]),_:1},8,["show","title"]),Ze(Xa,{show:d(C),"onUpdate:show":D[2]||(D[2]=l=>yn(C)?C.value=l:null),title:d(K)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:d(b)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D[3]||(D[3]=l=>{d(a)[d(N)]=l,C.value=!1})},null,8,["show","title","upload-config"]),Ze(Xa,{show:d(y),"onUpdate:show":D[4]||(D[4]=l=>yn(y)?y.value=l:null),title:d(K)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:d(b)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D[5]||(D[5]=l=>{d(a)[d(N)]=l,y.value=!1})},null,8,["show","title","upload-config"]),Ze(Xa,{show:d(ae),"onUpdate:show":D[6]||(D[6]=l=>yn(ae)?ae.value=l:null),title:d(K)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:d(b)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D[7]||(D[7]=l=>{d(a)[d(N)]=l,ae.value=!1})},null,8,["show","title","upload-config"]),Ze(Xa,{show:d(c),"onUpdate:show":D[8]||(D[8]=l=>yn(c)?c.value=l:null),title:d(K)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:d(b)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D[9]||(D[9]=l=>{d(a)[d(N)]=l,c.value=!1})},null,8,["show","title","upload-config"]),Ze(Xa,{show:d(q),"onUpdate:show":D[10]||(D[10]=l=>yn(q)?q.value=l:null),title:d(K)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:d(b)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D[11]||(D[11]=l=>{d(a)[d(N)]=l,q.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Is=Wa(rd,[["__scopeId","data-v-9ecd0c70"]]),{defineComponent:id}=await ge("vue"),{unref:Me,resolveComponent:cd,createVNode:Le,withCtx:Be,toDisplayString:Kl,createTextVNode:Va,normalizeClass:as,renderList:go,Fragment:gn,openBlock:al,createElementBlock:ia,createCommentVNode:ud,createBlock:Ua,createElementVNode:Ia,withModifiers:dd,isRef:pd}=await ge("vue"),fd={key:0},md={key:1},_d={key:0},vd={class:"flex items-center"},yd={class:"text-base"},gd={class:"flex items-center justify-center cursor-pointer gap-2"},hd={key:1},bd={class:"mt-4"},kd={key:2,class:"mt-2 text-xs"},wd={class:"my-8"},xd={class:"flex items-center justify-between"},$d={class:"text-base"},{ref:Bl,reactive:ns,h:Cd,computed:Kr}=await ge("vue"),Vd=id({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(se,{emit:e}){const n=El(),{t:s}=Dt(),K=se,X=e,p=Bl(Nl()),A=Bl({}),$=Bl({}),Q=Bl(),U=Bl(),B=Bl(),V=Bl([]),b=Bl([]),u=Bl({}),H=Bl({}),N=Bl(!1),O=Bl(!1),Z=gl(),a=hl(),{request:ee}=Zt(),{tr:P,pickByTheme:S,editKeysToCamelCase:Y}=Pt(),{sections:G}=It(Bt()),{isLightTheme:C}=It(Wl()),y=async(E=!0)=>{E&&(N.value=!0),O.value=!0,a.start();const g=await ee({url:`/pages/${K.slug}`});if(g.success&&g.result){if(B.value=g.result.data,B.value?.sections&&Array.isArray(B.value?.sections)){const pe={};for(const R of B.value.sections)R&&(pe[R.slug]=R.dataSourcePageSectionsData??{});for(const R of B.value.sections)R&&(be.isObject(pe)&&be.has(pe,R.slug)&&Ei(pe[R.slug])?A.value[R.slug]=ns(pe[R.slug]):A.value[R.slug]=ns({}),be.forIn(Y(R.dataStructure),(te,v)=>{(!A.value[R.slug][v]||Array.isArray(A.value[R.slug][v])&&A.value[R.slug][v].length==0)&&(v==="index"?A.value[R.slug][v]=ns({}):A.value[R.slug][v]=ns([]))}))}if(B.value&&Array.isArray(B.value?.sections)){const pe=B.value.sections;if(Array.isArray(B.value?.sectionsOrder)){V.value=[];for(const R of B.value.sectionsOrder)if(R){const te=pe.find(v=>v.slug===R);te&&V.value.push(te)}for(const R of pe)V.value.map(te=>te.slug).includes(R.slug)||V.value.push(R)}else V.value=be.cloneDeep(pe);if(Array.isArray(B.value.sectionsDisabled))for(const R of B.value.sections)R&&(u.value[R.slug]=!B.value.sectionsDisabled.includes(R.slug));else for(const R of B.value.sections)R&&(u.value[R.slug]=!0)}H.value=be.cloneDeep(u.value),b.value=be.cloneDeep(V.value),$.value=be.cloneDeep(A.value)}p.value=Nl();function I(pe){return new Promise(R=>setTimeout(R,pe))}await I(5e3),a.finish(),O.value=!1,E&&(N.value=!1)};y();const i=E=>Cd("span",{},{default:()=>E.id===B.value?.id?s("currentPage"):P(E.title)}),j=Kr(()=>be.isEqual(A.value,$.value)&&be.isEqual(V.value,b.value)&&be.isEqual(u.value,H.value)),L=async()=>{O.value=!0,a.start();const E=Q.value&&await Q.value(),g=U.value&&await U.value(),I=async()=>{const pe=await ee({url:`/pages/${K.slug}`,method:"put",data:{dispatchData:!0,sectionsData:A.value,sectionsOrder:V.value.map(R=>R.slug),sectionsDisabled:Object.keys(u.value).filter(R=>!u.value[R])}});pe.success&&pe.result?(Z.success(s("success")),y(!1)):Z.error(s("anErrorOccurred"))};(!Q.value||E)&&(!U.value||g)?await I():n.warning({title:s("confirm"),content:s("mandatoryFieldsNotFilledInConfirmation"),positiveText:s("yes"),negativeText:s("cancel"),onPositiveClick:async()=>{await I()}}),a.finish(),O.value=!1},ae=async E=>{n.warning({title:s("confirm"),content:s("confirmDeletePage"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/pages/${E.slug}`})).success?(X("delete",B.value),Z.success(s("success"))):Z.error(s("anErrorOccurred"))}})},f=Bl(!1),m=Bl([]),W=Bl(!1),c=()=>{m.value=[],V.value.forEach(E=>{E.id&&m.value.push(E.id)}),W.value=!0},w=E=>{E.id&&(m.value.includes(E.id)?m.value=m.value.filter(g=>g!==E.id):m.value.push(E.id))},q=E=>Kr({get:()=>E.id?m.value.includes(E.id):!1,set:g=>{E.id&&(g?m.value=m.value.filter(I=>I!==E.id):m.value.includes(E.id)||m.value.push(E.id))}}),r=E=>{E.id&&(m.value=[],V.value.forEach(g=>{g.id&&g.id!==E.id&&m.value.push(g.id)}),o())},o=async()=>{f.value=!0,a.start();const E=await ee({url:`/pages/${K.slug}`,method:"put",data:{sectionsIds:m.value}});E.success&&E.result?(Z.success(s("success")),y()):Z.error(s("anErrorOccurred")),a.finish(),f.value=!1},z=async(E,g)=>{f.value=!0,a.start();const I=await ee({url:`/sections/${E.slug}/data-source-page`,method:"put",data:{pageId:B.value?.id,sourcePageId:g}});I.success&&I.result?(Z.success(s("success")),y(!1)):Z.error(s("anErrorOccurred")),a.finish(),f.value=!1},M=async(E,g)=>{j.value?z(E,g):n.warning({title:s("confirm"),content:s("confirmUpdateDataSourcePage"),positiveText:s("yes"),negativeText:s("cancel"),onPositiveClick:()=>z(E,g)})};return(E,g)=>{const I=me,pe=oe,R=Se,te=Ma,v=Vl,re=ba,it=lc,fe=Un,Oe=Ga,ve=fl,ce=wa,zt=co,rt=io,ke=cd("Draggable"),F=fa,h=Ya,Ce=ka,J=Cl;return al(),ia(gn,null,[Le(re,{to:"#alt-action"},{default:Be(()=>[Le(v,{align:"center"},{default:Be(()=>[Le(R,{type:"error",disabled:Me(O),onClick:g[0]||(g[0]=D=>Me(B)?ae(Me(B)):null)},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:trash-can"})]),_:1})]),default:Be(()=>[Va(" "+Kl(Me(s)("delete")),1)]),_:1},8,["disabled"]),Le(R,{type:"info",disabled:Me(O),onClick:g[1]||(g[1]=D=>Me(B)?E.openFormModal(Me(B)):null)},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:edit"})]),_:1})]),default:Be(()=>[Va(" "+Kl(Me(s)("editPage")),1)]),_:1},8,["disabled"]),Le(te,{vertical:"",class:as(Me(S)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Le(R,{type:"primary",loading:Me(O),disabled:Me(j),onClick:g[2]||(g[2]=D=>L())},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:save"})]),_:1})]),default:Be(()=>[Va(" "+Kl(Me(s)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Le(h,{appear:"",name:"slide-fade"},{default:Be(()=>[Me(N)?(al(),ia("section",fd,[(al(),ia(gn,null,go(6,D=>Le(it,{key:D,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(al(),ia("section",md,[Me(B)&&Array.isArray(Me(B).sections)&&Me(B).sections.length?(al(),ia("section",_d,[Le(ke,{list:Me(V)},{default:Be(()=>[(al(!0),ia(gn,null,go(Me(V),(D,we)=>(al(),Ua(ve,{key:D.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:Be(()=>[Le(rt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Be(({collapsed:et})=>[Le(pe,null,{default:Be(()=>[et?(al(),Ua(I,{key:0,icon:"fa-solid:chevron-left"})):(al(),Ua(I,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Be(()=>g[8]||(g[8]=[Ia("span",null,null,-1)])),default:Be(()=>[Le(zt,{name:"1"},{header:Be(()=>[Ia("div",vd,[Le(pe,{size:"21",class:"cursor-move mr-4"},{default:Be(()=>[Le(I,{icon:"fa-solid:grip-lines"})]),_:1}),Le(fe,{checked:Me(u)[D.slug],"onUpdate:checked":et=>Me(u)[D.slug]=et,size:"small",class:"mr-4",onClick:g[3]||(g[3]=dd(()=>{},["stop"]))},{default:Be(()=>[Va(Kl(Me(s)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),Le(Oe,{size:"small",type:"info"},{default:Be(()=>[Va(Kl(we+1),1)]),_:2},1024),Le(te,{vertical:"",class:as(Me(S)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ia("span",yd,Kl(Me(P)(D.title)),1)])]),default:Be(()=>[(al(!0),ia(gn,null,go(Me(Y)(D.dataStructure),(et,mt)=>(al(),ia(gn,{key:mt},[String(mt)==="index"?(al(),Ua(ve,{key:0,size:"small",class:"mb-2"},{default:Be(()=>[(al(),Ua(Is,{key:`${Me(p)}-${mt}-form-1`,modelValue:Me(A)[D.slug][mt],"onUpdate:modelValue":Ul=>Me(A)[D.slug][mt]=Ul,items:et,onUpdate:(Ul,xt)=>{Q.value=xt}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(al(),Ua(ve,{key:1,title:Me(P)(et.title),size:"small",class:"mb-2"},{"header-extra":Be(()=>[Le(R,{quaternary:"",size:"small",onClick:()=>Me(A)[D.slug][mt].push({})},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:add-alt"})]),_:1})]),default:Be(()=>[Va(" "+Kl(Me(s)("add")),1)]),_:2},1032,["onClick"])]),default:Be(()=>[(al(!0),ia(gn,null,go(Me(A)[D.slug][mt],(Ul,xt)=>(al(),Ua(ve,{key:xt,title:String(xt+1),size:"small",class:"mb-2"},{"header-extra":Be(()=>[Le(R,{type:"error",size:"small",onClick:()=>Me(A)[D.slug][mt].splice(xt,1)},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:Be(()=>[(al(),Ua(Is,{key:`${Me(p)}-${mt}-${xt}-form-2`,modelValue:Me(A)[D.slug][mt][xt],"onUpdate:modelValue":vt=>Me(A)[D.slug][mt][xt]=vt,items:et.items,onUpdate:(vt,Qt)=>{U.value=Qt}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),Le(v,null,{default:Be(()=>[Le(R,{size:"small",type:"error",secondary:Me(C),onClick:et=>r(D)},{default:Be(()=>[Le(pe,{size:"21"},{default:Be(()=>[Le(I,{icon:"carbon:close"})]),_:1}),Va(" "+Kl(Me(s)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),Le(te,{vertical:"",class:as(Me(S)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Le(v,{align:"center"},{default:Be(()=>[Ia("span",null,Kl(Me(s)("dataSourcePage")),1),Le(ce,{value:D.dataSourcePageId,options:D.pages||[],placeholder:Me(s)("select"),"render-label":i,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":et=>M(D,et)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),Le(ve,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:g[4]||(g[4]=D=>c())},{default:Be(()=>[Ia("div",gd,[Le(pe,{size:"20"},{default:Be(()=>[Le(I,{icon:"carbon:add-alt"})]),_:1}),Va(" "+Kl(Me(s)("addSection")),1)])]),_:1})])):(al(),ia("section",hd,[Le(ve,{size:"large",class:as(`mb-2 !border-dashed !border-2 ${Me(S)("!border-zinc-300","!border-zinc-600")}`)},{default:Be(()=>[Le(F,{description:Me(s)("noSectionOnThisPage")},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:page-break"})]),_:1})]),extra:Be(()=>[Ia("div",bd,[Le(R,{size:"small",onClick:g[5]||(g[5]=D=>c())},{icon:Be(()=>[Le(pe,null,{default:Be(()=>[Le(I,{icon:"carbon:add-alt"})]),_:1})]),default:Be(()=>[Va(" "+Kl(Me(s)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),Me(B)?(al(),ia("div",kd,[Va(Kl(Me(s)("dataRetrievalSlug"))+": ",1),Ia("b",null,Kl(Me(B).slug),1)])):ud("",!0)]))]),_:1}),Le(J,{show:Me(W),"onUpdate:show":g[6]||(g[6]=D=>pd(W)?W.value=D:null),loading:Me(f),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Me(s)("addSections"),"positive-text":Me(s)("validate"),"negative-text":Me(s)("cancel"),onPositiveClick:o,onNegativeClick:g[7]||(g[7]=D=>W.value=!1)},{default:Be(()=>[Ia("section",wd,[Le(Ce,{style:{"max-height":"400px"}},{default:Be(()=>[(al(!0),ia(gn,null,go(Me(G),D=>(al(),Ua(ve,{key:D.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:we=>w(D)},{default:Be(()=>[Ia("div",xd,[Ia("span",$d,Kl(Me(P)(D.title)),1),Le(fe,{checked:q(D).value,"onUpdate:checked":we=>q(D).value=we,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:Id,defineComponent:Td}=await ge("vue"),{unref:Ct,resolveComponent:gy,createVNode:Rt,toDisplayString:Yn,createTextVNode:ho,withCtx:Wt,renderList:zd,Fragment:Yr,openBlock:bo,createElementBlock:Gr,createElementVNode:Js,createBlock:Xs,normalizeClass:Sd,isRef:Md}=await ge("vue"),Nd={class:"flex items-center justify-between"},Ed={class:"flex flex-col"},Ud={class:"text-sm font-bold"},{ref:Gn}=await ge("vue"),Ad=Td({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(se){const{t:e}=Dt(),{request:n}=Zt(),{pickByTheme:s,tr:K,displayFormErrors:X}=Pt(),p=Id(se,"show"),{menuItemGroups:A}=It(Bt()),{loadMenuItemGroups:$}=Bt(),{isLightTheme:Q}=It(Wl()),U=Gn(!1),B=async()=>{U.value=!0,await $(),U.value=!1};B();const V=El(),b=gl(),u=hl(),H=Gn(!1),N=Gn(!1),O=Gn(null),Z=Gn(null),a=Gn({name:"",description:""}),ee={name:[{required:!0,message:e("fillRequired")}]},P=G=>{O.value=be.cloneDeep(G),a.value=be.cloneDeep(G||{name:"",description:""}),N.value=!0},S=async()=>(Z.value?.validate(async G=>{if(!G){u.start(),H.value=!0;const C={name:a.value.name,description:a.value.description},y=await n({method:O.value?"put":"post",url:O.value?`/menu-item-groups/${O.value.id}`:"/menu-item-groups",data:C});if(y.failure&&y.error)switch(y.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(y.error?.response?.data?.data);break;default:b.error(e("anErrorOccurred"))}else b.success(e("success")),B(),N.value=!1;H.value=!1,u.finish()}}),!1),Y=async G=>{V.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/menu-item-groups/${G.id}`})).success?(b.success(e("success")),B()):b.error(e("anErrorOccurred"))}})};return(G,C)=>{const y=me,i=Se,j=Vl,L=Es,ae=oe,f=fl,m=ka,W=fa,c=En,w=Cl,q=na,r=jl,o=Ol;return bo(),Gr(Yr,null,[Rt(w,{show:p.value,"onUpdate:show":C[2]||(C[2]=z=>p.value=z),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Ct(e)("menuItemGroups")},{"header-extra":Wt(()=>[Rt(j,{align:"center"},{default:Wt(()=>[Rt(i,{size:"small",type:"primary",disabled:Ct(U),onClick:C[0]||(C[0]=z=>P(null))},{default:Wt(()=>[Rt(y,{icon:"carbon:add-alt",class:"mr-1"}),ho(" "+Yn(Ct(e)("add")),1)]),_:1},8,["disabled"]),Rt(i,{size:"small",type:"error",disabled:Ct(U),onClick:C[1]||(C[1]=z=>p.value=!1)},{default:Wt(()=>[Rt(y,{icon:"carbon:close",class:"mr-1"}),ho(" "+Yn(Ct(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Wt(()=>[Rt(c,{show:Ct(U)},{default:Wt(()=>[Ct(A).length?(bo(),Xs(m,{key:0,style:{"max-height":"400px"}},{default:Wt(()=>[(bo(!0),Gr(Yr,null,zd(Ct(A),z=>(bo(),Xs(f,{key:z.id,embedded:"",size:"small",class:"mb-2"},{default:Wt(()=>[Js("div",Nd,[Js("div",Ed,[Js("span",Ud,Yn(Ct(K)(z.name)),1),Rt(L,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:Wt(()=>[ho(Yn(Ct(K)(z.description)),1)]),_:2},1024)]),Rt(j,null,{default:Wt(()=>[Rt(i,{size:"small",type:"warning",secondary:Ct(Q),onClick:M=>P(z)},{default:Wt(()=>[Rt(ae,null,{default:Wt(()=>[Rt(y,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),Rt(i,{size:"small",type:"error",secondary:Ct(Q),onClick:M=>Y(z)},{default:Wt(()=>[Rt(ae,null,{default:Wt(()=>[Rt(y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(bo(),Xs(f,{key:1,size:"large",class:Sd(`mb-2 !border-dashed !border-2 ${Ct(s)("!border-zinc-300","!border-zinc-600")}`)},{default:Wt(()=>[Rt(W,{description:Ct(e)("noMenuItemGroupAdded")},{icon:Wt(()=>[Rt(ae,null,{default:Wt(()=>[Rt(y,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Rt(w,{show:Ct(N),"onUpdate:show":C[5]||(C[5]=z=>Md(N)?N.value=z:null),loading:Ct(H),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ct(O)?Ct(e)("editMenuItemGroup"):Ct(e)("addMenuItemGroup"),"positive-text":Ct(e)("validate"),"negative-text":Ct(e)("cancel"),onPositiveClick:S,onNegativeClick:C[6]||(C[6]=z=>N.value=!1)},{default:Wt(()=>[Rt(o,{ref_key:"formRef",ref:Z,model:Ct(a),rules:ee,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Wt(()=>[Rt(r,{"show-label":!1,path:"name"},{default:Wt(()=>[Rt(q,{modelValue:Ct(a).name,"onUpdate:modelValue":C[3]||(C[3]=z=>Ct(a).name=z),placeholder:Ct(e)("name"),class:"w-full",sync:""},{label:Wt(()=>[ho(Yn(Ct(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Rt(r,{"show-label":!1,path:"description"},{default:Wt(()=>[Rt(q,{modelValue:Ct(a).description,"onUpdate:modelValue":C[4]||(C[4]=z=>Ct(a).description=z),placeholder:Ct(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Wt(()=>[ho(Yn(Ct(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:Hr,mergeModels:Dd,defineComponent:Ld}=await ge("vue"),{unref:Et,resolveComponent:hy,createVNode:Aa,withCtx:hn,isRef:Bd,Fragment:Pd,openBlock:ko,createElementBlock:Rd,createCommentVNode:os,createBlock:ss}=await ge("vue"),{ref:bn,computed:Zs,onMounted:Fd,h:wo}=await ge("vue"),Od=Ld({__name:"ContentFormItems",props:{"content-type":{default:yl.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Dd(["update"],["update:content-type","update:content-id"]),setup(se,{emit:e}){const{t:n}=Dt(),{tr:s,mergeArrays:K}=Pt(),{request:X}=Zt(),{contentTypes:p,extractItemTitle:A}=Ko(),{loadContentModels:$}=Bt(),{contentModels:Q}=It(Bt()),U=e;$();const B=Hr(se,"content-type"),V=Hr(se,"content-id"),b=bn(),u=bn(!1),H=bn([]),N=bn([]),O=async(W,c)=>{if(!W.length){N.value=[];return}u.value=!0;const w=await X({url:`/content-model-items/search/${W}/${c}`});w.success&&w.result&&(N.value=w.result.data),u.value=!1},Z=Zs(()=>K(H.value,N.value,"id")),a=bn(!1),ee=bn([]),P=bn([]),S=async W=>{if(!W.length){P.value=[];return}a.value=!0;const c=await X({url:`/news-articles/search/${W}`});c.success&&c.result&&(P.value=c.result.data),a.value=!1},Y=Zs(()=>K(ee.value,P.value,"id")),{categories:G}=It(ao()),{loadCategories:C}=ao(),{tags:y}=It(ao()),{loadTags:i}=ao();Fd(async()=>{C(),i(),a.value=!0;const W=await X({url:"/news-articles/list",method:"post",data:{ids:V.value?[V.value]:[]}});W.success&&W.result&&(ee.value=K(ee.value,W.result.data,"id")),a.value=!1,u.value=!0;const c=await X({url:"/content-model-items/list",method:"post",data:{ids:V.value?[V.value]:[]}});c.success&&c.result&&(H.value=K(H.value,c.result.data,"id"),b.value=H.value.find(w=>w.id===V.value)?.contentModelId),u.value=!1});const j=W=>wo("span",{},{default:()=>`${s(W.name)}`}),L=W=>wo("span",{},{default:()=>`${s(W.title)}`}),ae=W=>wo("span",{},{default:()=>`${s(W.name)}`}),f=W=>wo("span",{},{default:()=>s(W.title)}),m=W=>Zs(()=>wo("span",{},{default:()=>A(W,Q.value?.find(c=>c.id===W.contentModelId))}));return(W,c)=>{const w=wa,q=fn,r=oa;return ko(),ss(r,{"x-gap":"12",span:24},{default:hn(()=>[Aa(q,{span:8,label:Et(n)("contentType"),path:"contentType"},{default:hn(()=>[Aa(w,{value:B.value,"onUpdate:value":[c[0]||(c[0]=o=>B.value=o),c[1]||(c[1]=()=>V.value=void 0)],options:Et(p)||[],placeholder:Et(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),B.value===Et(yl).CONTENT_MODEL?(ko(),Rd(Pd,{key:0},[Aa(q,{span:8,label:Et(n)("contentModel")},{default:hn(()=>[Aa(w,{value:Et(b),"onUpdate:value":c[2]||(c[2]=o=>Bd(b)?b.value=o:null),options:Et(Q),placeholder:Et(n)("search"),"render-label":f,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Aa(q,{span:8,label:Et(n)("item"),path:"contentId"},{default:hn(()=>[Aa(w,{value:V.value,"onUpdate:value":[c[3]||(c[3]=o=>V.value=o),c[5]||(c[5]=(o,z)=>U("update",o,z,B.value))],options:Et(Z)||[],placeholder:Et(n)("search"),"render-label":o=>m(o).value,loading:Et(u),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[4]||(c[4]=o=>O(o,Et(b)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):os("",!0),B.value===Et(yl).NEWS_ARTICLE?(ko(),ss(q,{key:1,span:16,label:Et(n)("newsArticle"),path:"contentId"},{default:hn(()=>[Aa(w,{value:V.value,"onUpdate:value":[c[6]||(c[6]=o=>V.value=o),c[7]||(c[7]=(o,z)=>U("update",o,z,B.value))],options:Et(Y)||[],placeholder:Et(n)("search"),"render-label":L,loading:Et(a),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:S},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):os("",!0),B.value===Et(yl).NEWS_CATEGORY?(ko(),ss(q,{key:2,span:16,label:Et(n)("newsCategory"),path:"contentId"},{default:hn(()=>[Aa(w,{value:V.value,"onUpdate:value":[c[8]||(c[8]=o=>V.value=o),c[9]||(c[9]=(o,z)=>U("update",o,z,B.value))],options:Et(G)||[],placeholder:Et(n)("select"),"render-label":j,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):os("",!0),B.value===Et(yl).NEWS_TAG?(ko(),ss(q,{key:3,span:16,label:Et(n)("newsTag"),path:"contentId"},{default:hn(()=>[Aa(w,{value:V.value,"onUpdate:value":[c[10]||(c[10]=o=>V.value=o),c[11]||(c[11]=(o,z)=>U("update",o,z,B.value))],options:Et(y)||[],placeholder:Et(n)("select"),"render-label":ae,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):os("",!0)]),_:1})}}}),{useModel:jd,defineComponent:qd}=await ge("vue"),{unref:_,resolveComponent:Kd,createVNode:le,withCtx:_e,toDisplayString:Ft,createTextVNode:Ml,openBlock:el,createBlock:Da,createCommentVNode:kn,isRef:rs,renderList:Qs,Fragment:Qa,createElementBlock:Jl,normalizeClass:wn,withModifiers:xo,createElementVNode:ml}=await ge("vue"),Yd={class:"flex items-center"},Gd={class:"flex flex-col"},Hd={class:"text-sm font-bold"},Wd={key:0,class:"text-sm"},Jd={class:"text-xs font-normal"},Xd={class:"text-xs my-1"},Zd={class:"flex items-center"},Qd={class:"flex flex-col"},ep={class:"text-sm font-bold"},tp={class:"text-xs font-normal"},lp={key:0,class:"mt-4"},ap={class:"my-8"},np={class:"flex items-center justify-between"},op={class:"flex flex-col"},sp={class:"text-sm font-bold"},rp={class:"text-xs font-normal"},ip={class:"flex items-center"},cp={key:0},up={key:1},dp={key:2},{ref:Yl,computed:Wr,h:Jr}=await ge("vue"),pp=qd({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(se){const{t:e}=Dt(),{request:n}=Zt(),{extractItemTitle:s}=Ko(),{tr:K,displayFormErrors:X,pickByTheme:p}=Pt(),{isLightTheme:A}=It(Wl()),{pages:$,menuItemGroups:Q,contentModels:U}=It(Bt()),{loadPages:B,loadMenuItemGroups:V}=Bt(),b=hl(),u=gl(),H=El(),N=jd(se,"modelValue"),O=Yl([]),Z=Yl([]),a=Yl(!1),ee=Yl(""),P=Yl(),S=Wr(()=>{if(!ee.value)return O.value;const te=O.value.filter(v=>v.title.toLowerCase().includes(ee.value.toLowerCase())||v.description?.toLowerCase().includes(ee.value.toLowerCase())||v.children.some(re=>re.title.toLowerCase().includes(ee.value.toLowerCase())||re.description?.toLowerCase().includes(ee.value.toLowerCase())));return P.value&&P.value.focus(),te}),Y=async(te=!1)=>{b.start(),a.value=!0;const v=await n({url:"/menu/items"});if(v.success&&v.result){O.value=v.result.data.filter(re=>!re.parentId&&re.menuId===N.value?.id);for(let re=0;re<O.value.length;re++)O.value[re].children=v.result.data.filter(it=>it.parentId===O.value[re].id&&it.menuId===N.value?.id);Z.value=v.result.data.filter(re=>re.menuId!==N.value?.id)}te&&(B(),await V()),a.value=!1,b.finish()};Y(!0);const G=Yl(12),C=Yl(1),y=te=>{G.value=te},i={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:zl.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:yl.CONTENT_MODEL,contentId:void 0},j=Yl(null),L=Yl(!1),ae=Yl(!1),f=Yl(!1),m=Yl(null),W=Yl(null),c=Yl(i),w=Wr(()=>{const te={title:[{required:!0,message:e("fillRequired")}]};return c.value.targetType===zl.PAGE_LINK?(te.pageId=[{required:!0,message:e("fillRequired")}],te.path=[{required:!0,message:e("fillRequired")}]):c.value.targetType===zl.EXTERNAL_LINK?te.url=[{required:!0,message:e("fillRequired")}]:c.value.targetType===zl.CONTENT_LINK&&(te.contentId=[{required:!0,message:e("fillRequired")}],te.contentType=[{required:!0,message:e("fillRequired")}]),te}),q=(te,v=null)=>{m.value=be.cloneDeep(te),j.value=v,te?(c.value=be.cloneDeep(te),ae.value=!0):(c.value=be.cloneDeep(i),Z.value.length>0?f.value=!0:ae.value=!0)},r=async te=>{H.warning({title:e("confirm"),content:te.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/menu/items/${te.id}`})).success?(u.success(e("success")),Y()):u.error(e("anErrorOccurred"))}})},o=async te=>{b.start(),L.value=!0;const v=await n({method:"post",url:"/menu/items",data:{title:te.title,path:te.path,url:te.url,description:te.description,isActive:!0,isVisible:!0,color:te.color,icon:te.icon,position:te.position,targetType:te.targetType,parentId:j.value,menuId:N.value?.id,sectionId:te.sectionId,menuItemGroupId:te.menuItemGroupId,pageId:te.pageId}});if(v.failure&&v.error)switch(v.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(v.error?.response?.data?.data);break;default:u.error(e("anErrorOccurred"))}else u.success(e("success")),Y();L.value=!1,b.finish(),f.value=!1},z=async()=>(W.value?.validate(async te=>{if(!te){const v={title:c.value.title,path:c.value.path,url:c.value.url,description:c.value.description,isActive:c.value.isActive,isVisible:c.value.isVisible,color:c.value.color,icon:c.value.icon,position:c.value.position,targetType:c.value.targetType,parentId:j.value,menuId:N.value?.id,sectionId:c.value.sectionId,menuItemGroupId:c.value.menuItemGroupId,pageId:c.value.pageId,contentId:c.value.contentId,contentType:c.value.contentType};if(m.value)if(m.value.title!==c.value.title&&O.value.findIndex(re=>re.title==c.value.title)>-1)u.error(e("sameMenuItemTitleMessage"));else{b.start(),L.value=!0;const re=await n({method:"put",url:`/menu/items/${m.value.id}`,data:v});re.success&&re.result.data&&(u.success(e("success")),Y()),L.value=!1,b.finish(),ae.value=!1}else if(O.value.findIndex(re=>re.title==c.value.title)>-1)u.error(e("sameMenuItemTitleMessage"));else{b.start(),L.value=!0;const re=await n({method:"post",url:"/menu/items",data:v});if(re.failure&&re.error)switch(re.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(re.error?.response?.data?.data);break;default:u.error(e("anErrorOccurred"))}else u.success(e("success")),Y();L.value=!1,b.finish(),ae.value=!1}}}),!1),M=async(te,v)=>{(await n({method:"put",url:"/menu/items/position",data:{items:v}})).success&&Y()},E=te=>Jr("span",{},{default:()=>K(te.title)}),g=te=>Jr("span",{},{default:()=>K(te.name)}),I=te=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(te),pe=te=>{if(te.targetType==zl.EXTERNAL_LINK)return te.url;if(te.targetType==zl.PAGE_LINK)return te.path;if(te.targetType==zl.CONTENT_LINK)switch(te.contentType){case yl.CONTENT_MODEL:return e("contentModel");case yl.NEWS_CATEGORY:return e("newsCategory");case yl.NEWS_ARTICLE:return e("newsArticle");case yl.NEWS_TAG:return e("newsTag")}return""},R=async(te,v,re)=>{if(!K(c.value.title))switch(re){case yl.CONTENT_MODEL:c.value.title=s(v,U.value?.find(it=>it.id===v.contentModelId));break;case yl.NEWS_ARTICLE:c.value.title=v.title;break;case yl.NEWS_CATEGORY:case yl.NEWS_TAG:c.value.title=v.name;break}};return(te,v)=>{const re=me,it=Vl,fe=ba,Oe=Bi,ve=Ga,ce=Ma,zt=fl,rt=Kd("Draggable"),ke=co,F=io,h=uo,Ce=fa,J=Ya,D=ka,we=Cl,et=na,mt=jl,Ul=Vr,xt=fn,vt=Ss,Qt=zs,Al=oa,ct=Wi,Tt=wa,$t=Ol;return el(),Jl(Qa,null,[le(fe,{to:"#alt-action"},{default:_e(()=>[le(it,{align:"center"},{default:_e(()=>[_(S).length?(el(),Da(_(Se),{key:0,type:"primary",onClick:v[0]||(v[0]=ye=>q(null))},{icon:_e(()=>[le(_(oe),{size:"18"},{default:_e(()=>[le(re,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Ml(" "+Ft(_(e)("addMenuItem")),1)]),_:1})):kn("",!0)]),_:1})]),_:1}),le(Oe,{class:"mt-2 mb-5",onBack:v[2]||(v[2]=ye=>N.value=null)},{title:_e(()=>[Ml(Ft(_(K)(N.value?.title)),1)]),back:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:_e(()=>[le(_(Kt),{ref_key:"searchInputRef",ref:P,value:_(ee),"onUpdate:value":v[1]||(v[1]=ye=>rs(ee)?ee.value=ye:null),clearable:!0,placeholder:_(e)("search")},{suffix:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),le(J,{appear:"",name:"slide-fade"},{default:_e(()=>[ml("section",null,[_(S)&&_(S).length?(el(),Jl(Qa,{key:0},[le(rt,{list:_(O),onChange:v[3]||(v[3]=ye=>M(ye,_(O)))},{default:_e(()=>[(el(!0),Jl(Qa,null,Qs(_(S).slice((_(C)-1)*_(G),_(C)*_(G)),ye=>(el(),Da(zt,{key:ye.id,embedded:"",size:"small",class:"mb-1"},{default:_e(()=>[le(F,{"default-expanded-names":ye.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":_e(({collapsed:Yt})=>[le(it,{align:"center"},{default:_e(()=>[le(ve,{size:"small",bordered:!1,type:ye.isActive?"success":"error"},{default:_e(()=>[Ml(Ft(ye.isActive?_(e)("published"):_(e)("unpublished")),1)]),_:2},1032,["type"]),le(ve,{size:"small",bordered:!1,type:ye.isVisible?"info":"warning"},{default:_e(()=>[Ml(Ft(ye.isVisible?_(e)("visible"):_(e)("hidden")),1)]),_:2},1032,["type"]),le(ce,{vertical:"",class:wn(["!mx-0",_(p)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),le(_(Se),{size:"small",type:"primary",secondary:_(A),onClick:xo(xa=>q(ye),["stop"])},{default:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),le(_(Se),{size:"small",type:"error",secondary:_(A),onClick:xo(xa=>r(ye),["stop"])},{default:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),le(_(Se),{size:"small",type:"info",secondary:_(A),onClick:xo(xa=>q(null,ye.id),["stop"])},{icon:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:category"})]),_:1})]),default:_e(()=>[Ml(" "+Ft(_(e)("subMenuItem"))+" ",1),le(ve,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:_e(()=>[Ml(Ft(ye.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),v[27]||(v[27]=ml("div",{class:"w-6"},null,-1)),le(_(oe),null,{default:_e(()=>[Yt?(el(),Da(re,{key:0,icon:"fa-solid:chevron-left"})):(el(),Da(re,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:_e(()=>v[28]||(v[28]=[ml("span",null,null,-1)])),default:_e(()=>[le(ke,{name:"1"},{header:_e(()=>[ml("div",Yd,[le(_(oe),{size:"21",class:"cursor-move mr-4"},{default:_e(()=>[le(re,{icon:"fa-solid:grip-lines"})]),_:1}),le(ce,{vertical:"",class:wn(_(p)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ml("div",Gd,[ml("div",null,[ml("span",Hd,Ft(_(K)(ye.title)),1),ye.group?(el(),Jl("span",Wd," Â ("+Ft(_(K)(ye.group?.name))+") ",1)):kn("",!0)]),ml("small",Jd,Ft(pe(ye)),1)])])]),default:_e(()=>[ye.description?(el(),Jl(Qa,{key:0},[le(ce,{class:wn([_(p)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),ml("div",Xd,Ft(_(K)(ye.description)),1)],64)):kn("",!0),ye.children.length?(el(),Jl(Qa,{key:1},[le(ce,{class:wn([_(p)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),le(rt,{list:ye.children,onChange:Yt=>M(Yt,ye.children)},{default:_e(()=>[(el(!0),Jl(Qa,null,Qs(ye.children,Yt=>(el(),Da(zt,{key:Yt.id,size:"small",class:"mb-1"},{header:_e(()=>[ml("div",Zd,[le(_(oe),{size:"21",class:"cursor-move mr-4"},{default:_e(()=>[le(re,{icon:"fa-solid:grip-lines"})]),_:1}),le(ce,{vertical:"",class:wn(_(p)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ml("div",Qd,[ml("span",ep,Ft(_(K)(Yt.title)),1),ml("small",tp,Ft(pe(Yt)),1)])])]),"header-extra":_e(()=>[le(it,{align:"center"},{default:_e(()=>[le(ve,{size:"small",bordered:!1,type:Yt.isActive?"success":"error"},{default:_e(()=>[Ml(Ft(Yt.isActive?_(e)("published"):_(e)("unpublished")),1)]),_:2},1032,["type"]),le(ve,{size:"small",bordered:!1,type:Yt.isVisible?"info":"warning"},{default:_e(()=>[Ml(Ft(Yt.isVisible?_(e)("visible"):_(e)("hidden")),1)]),_:2},1032,["type"]),le(ce,{vertical:"",class:wn(["!mx-0",_(p)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),le(_(Se),{size:"small",type:"primary",secondary:_(A),onClick:xo(xa=>q(Yt,ye.id),["stop"])},{default:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),le(_(Se),{size:"small",type:"error",secondary:_(A),onClick:xo(xa=>r(Yt),["stop"])},{default:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):kn("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),le(h,{page:_(C),"onUpdate:page":v[4]||(v[4]=ye=>rs(C)?C.value=ye:null),class:"mt-5 justify-end","show-size-picker":"","page-size":_(G),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(_(O).length/_(G)),"onUpdate:pageSize":y},{prefix:_e(()=>[Ml(Ft(`${_(O).length} ${_(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(el(),Da(zt,{key:1,size:"large",class:wn(`mb-2 !border-dashed !border-2 ${_(p)("!border-zinc-300","!border-zinc-600")}`)},{default:_e(()=>[le(Ce,{description:_(e)("noMenuItemAvailable")},{icon:_e(()=>[le(_(oe),null,{default:_e(()=>[_(ee)?(el(),Da(re,{key:0,icon:"carbon:search"})):(el(),Da(re,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:_e(()=>[_(ee)?kn("",!0):(el(),Jl("div",lp,[le(_(Se),{size:"small",onClick:v[5]||(v[5]=ye=>q(null))},{icon:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Ml(" "+Ft(_(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),le(we,{show:_(f),"onUpdate:show":v[6]||(v[6]=ye=>rs(f)?f.value=ye:null),loading:_(L),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:_(e)("menuItems"),"positive-text":_(j)?_(e)("createSubMenuItem"):_(e)("createMenuItem"),"negative-text":_(e)("cancel"),onPositiveClick:v[7]||(v[7]=()=>{f.value=!1,ae.value=!0}),onNegativeClick:v[8]||(v[8]=ye=>f.value=!1)},{default:_e(()=>[ml("section",ap,[le(D,{style:{"max-height":"400px"}},{default:_e(()=>[(el(!0),Jl(Qa,null,Qs(_(Z),ye=>(el(),Da(zt,{key:ye.id,embedded:"",size:"small",class:"mb-2"},{default:_e(()=>[ml("div",np,[ml("div",op,[ml("span",sp,Ft(_(K)(ye.title)),1),ml("small",rp,Ft(pe(ye)),1)]),le(_(Se),{size:"small",type:"primary",secondary:_(A),onClick:Yt=>o(ye)},{icon:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Ml(" "+Ft(_(e)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),le(we,{show:_(ae),"onUpdate:show":v[25]||(v[25]=ye=>rs(ae)?ae.value=ye:null),loading:_(L),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:_(m)?_(j)?_(e)("editSubMenuItem"):_(e)("editMenuItem"):_(j)?_(Z).length?_(e)("createSubMenuItem"):_(e)("addSubMenuItem"):_(Z).length?_(e)("createMenuItem"):_(e)("addMenuItem"),"positive-text":_(e)("validate"),"negative-text":_(e)("cancel"),onPositiveClick:z,onNegativeClick:v[26]||(v[26]=ye=>ae.value=!1)},{default:_e(()=>[le($t,{ref_key:"formRef",ref:W,class:"mt-5",model:_(c),rules:_(w),"show-require-mark":!1,size:"medium"},{default:_e(()=>[le(mt,{"show-label":!1,path:"title"},{default:_e(()=>[le(et,{modelValue:_(c).title,"onUpdate:modelValue":v[9]||(v[9]=ye=>_(c).title=ye),placeholder:_(e)("title"),class:"w-full",sync:""},{label:_e(()=>[Ml(Ft(_(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),le(mt,{"show-label":!1,path:"description"},{default:_e(()=>[le(et,{modelValue:_(c).description,"onUpdate:modelValue":v[10]||(v[10]=ye=>_(c).description=ye),placeholder:_(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:_e(()=>[Ml(Ft(_(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),le(Al,{"x-gap":"12",span:24},{default:_e(()=>[le(xt,{span:5,label:_(e)("position"),path:"position"},{default:_e(()=>[le(Ul,{value:_(c).position,"onUpdate:value":v[11]||(v[11]=ye=>_(c).position=ye),placeholder:_(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),le(xt,{span:10,label:_(e)("publication"),path:"isActive"},{default:_e(()=>[le(Qt,{value:_(c).isActive,"onUpdate:value":v[12]||(v[12]=ye=>_(c).isActive=ye),name:"isActive",class:"w-full"},{default:_e(()=>[le(vt,{value:!1,label:_(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),le(vt,{value:!0,label:_(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),le(xt,{span:9,label:_(e)("visibility"),path:"isVisible"},{default:_e(()=>[le(Qt,{value:_(c).isVisible,"onUpdate:value":v[13]||(v[13]=ye=>_(c).isVisible=ye),name:"isVisible",class:"w-full"},{default:_e(()=>[le(vt,{value:!1,label:_(e)("hidden"),class:"w-[50%]"},null,8,["label"]),le(vt,{value:!0,label:_(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),le(ce,{class:"!my-2"}),le(Al,{"x-gap":"12",span:24},{default:_e(()=>[le(xt,{span:10,label:_(e)("icon"),path:"icon"},{default:_e(()=>[le(ct,{modelValue:_(c).icon,"onUpdate:modelValue":v[14]||(v[14]=ye=>_(c).icon=ye),placeholder:_(e)("icon"),"icons-list-placeholder":_(e)("enterIconNameInSearchBar"),"search-placeholder":_(e)("search"),"empty-text":_(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),le(xt,{span:4,label:_(e)("color"),path:"color"},{default:_e(()=>[ml("div",ip,[_(c).color?(el(),Jl(Qa,{key:0},[le(_(Se),{text:"",type:"error",style:{"font-size":"21px"},onClick:v[15]||(v[15]=ye=>_(c).color="")},{default:_e(()=>[le(_(oe),null,{default:_e(()=>[le(re,{icon:"carbon:trash-can"})]),_:1})]),_:1}),le(ce,{vertical:""})],64)):kn("",!0),le(_(oo),{value:_(c).color,"onUpdate:value":v[16]||(v[16]=ye=>_(c).color=ye),class:"cursor-pointer",theme:_(A)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),le(xt,{span:10,label:_(e)("group"),path:"menuItemGroupId"},{default:_e(()=>[le(Tt,{value:_(c).menuItemGroupId,"onUpdate:value":v[17]||(v[17]=ye=>_(c).menuItemGroupId=ye),options:_(Q),placeholder:_(e)("group"),"render-label":g,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),le(xt,{span:24,label:_(e)("targetType"),path:"targetType"},{default:_e(()=>[le(Qt,{value:_(c).targetType,"onUpdate:value":v[18]||(v[18]=ye=>_(c).targetType=ye),class:"w-full",size:"small"},{default:_e(()=>[le(vt,{value:_(zl).PAGE_LINK,class:"w-[33.33%]"},{default:_e(()=>[Ml(Ft(_(e)("pageLink")),1)]),_:1},8,["value"]),le(vt,{value:_(zl).CONTENT_LINK,class:"w-[33.33%]"},{default:_e(()=>[Ml(Ft(_(e)("contentLink")),1)]),_:1},8,["value"]),le(vt,{value:_(zl).EXTERNAL_LINK,class:"w-[33.33%]"},{default:_e(()=>[Ml(Ft(_(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),le(J,{appear:"",name:"slide-fade"},{default:_e(()=>[_(c).targetType===_(zl).PAGE_LINK?(el(),Jl("section",cp,[le(Al,{"x-gap":"12",span:24},{default:_e(()=>[le(xt,{span:12,label:_(e)("page"),path:"pageId"},{default:_e(()=>[le(Tt,{value:_(c).pageId,"onUpdate:value":v[19]||(v[19]=ye=>_(c).pageId=ye),options:_($)||[],placeholder:_(e)("selectPage"),"render-label":E,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),le(xt,{span:12,label:_(e)("section"),path:"sectionId"},{default:_e(()=>[le(Tt,{value:_(c).sectionId,"onUpdate:value":v[20]||(v[20]=ye=>_(c).sectionId=ye),options:(_($)||[]).find(ye=>ye.id===_(c).pageId)?.sections||[],placeholder:_(e)("selectSection"),"render-label":E,disabled:!_(c).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),le(mt,{label:_(e)("path"),path:"path"},{default:_e(()=>[le(_(Kt),{value:_(c).path,"onUpdate:value":v[21]||(v[21]=ye=>_(c).path=ye),placeholder:_(e)("path"),"allow-input":I,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):_(c).targetType===_(zl).CONTENT_LINK?(el(),Jl("section",up,[le(Od,{"content-type":_(c).contentType,"onUpdate:contentType":v[22]||(v[22]=ye=>_(c).contentType=ye),"content-id":_(c).contentId,"onUpdate:contentId":v[23]||(v[23]=ye=>_(c).contentId=ye),onUpdate:R},null,8,["content-type","content-id"])])):_(c).targetType===_(zl).EXTERNAL_LINK?(el(),Jl("section",dp,[le(mt,{label:_(e)("url"),path:"url"},{default:_e(()=>[le(_(Kt),{value:_(c).url,"onUpdate:value":v[24]||(v[24]=ye=>_(c).url=ye),placeholder:_(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):kn("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:fp,defineComponent:mp}=await ge("vue"),{unref:Vt,resolveComponent:by,createVNode:Ut,withCtx:Ot,toDisplayString:$o,createTextVNode:is,renderList:_p,Fragment:Xr,openBlock:Co,createElementBlock:Zr,createElementVNode:er,createBlock:tr,normalizeClass:vp,isRef:yp}=await ge("vue"),gp={class:"flex items-center justify-between"},hp={class:"flex flex-col"},bp={class:"text-sm font-bold"},{ref:Hn}=await ge("vue"),kp=mp({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(se){const{t:e}=Dt(),{request:n}=Zt(),{pickByTheme:s,tr:K,displayFormErrors:X,formatKey:p}=Pt(),A=fp(se,"show"),{menuLocations:$}=It(Bt()),{loadMenuLocations:Q}=Bt(),{isLightTheme:U}=It(Wl()),B=Hn(!1),V=async()=>{B.value=!0,await Q(),B.value=!1};V();const b=El(),u=gl(),H=hl(),N=Hn(!1),O=Hn(!1),Z=Hn(null),a=Hn(null),ee=Hn({name:"",description:""}),P={name:[{required:!0,message:e("fillRequired")}]},S=C=>{Z.value=be.cloneDeep(C),ee.value=be.cloneDeep(C||{name:"",description:""}),O.value=!0},Y=async()=>(a.value?.validate(async C=>{if(!C){H.start(),N.value=!0;const y={name:ee.value.name,description:ee.value.description},i=await n({method:Z.value?"put":"post",url:Z.value?`/menu-locations/${Z.value.id}`:"/menu-locations",data:y});if(i.failure&&i.error)switch(i.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(i.error?.response?.data?.data);break;default:u.error(e("anErrorOccurred"))}else u.success(e("success")),V(),O.value=!1;N.value=!1,H.finish()}}),!1),G=async C=>{b.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/menu-locations/${C.id}`})).success?(u.success(e("success")),V()):u.error(e("anErrorOccurred"))}})};return(C,y)=>{const i=me,j=oe,L=Se,ae=Vl,f=Es,m=fl,W=ka,c=fa,w=En,q=Cl,r=Kt,o=jl,z=na,M=Ol;return Co(),Zr(Xr,null,[Ut(q,{show:A.value,"onUpdate:show":y[2]||(y[2]=E=>A.value=E),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Vt(e)("menuLocations")},{"header-extra":Ot(()=>[Ut(ae,{align:"center"},{default:Ot(()=>[Ut(L,{size:"small",type:"primary",disabled:Vt(B),onClick:y[0]||(y[0]=E=>S(null))},{default:Ot(()=>[Ut(j,{class:"mr-1"},{default:Ot(()=>[Ut(i,{icon:"carbon:add-alt"})]),_:1}),is(" "+$o(Vt(e)("add")),1)]),_:1},8,["disabled"]),Ut(L,{size:"small",type:"error",disabled:Vt(B),onClick:y[1]||(y[1]=E=>A.value=!1)},{default:Ot(()=>[Ut(j,{class:"mr-1"},{default:Ot(()=>[Ut(i,{icon:"carbon:close"})]),_:1}),is(" "+$o(Vt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Ot(()=>[Ut(w,{show:Vt(B)},{default:Ot(()=>[Vt($).length?(Co(),tr(W,{key:0,style:{"max-height":"400px"}},{default:Ot(()=>[(Co(!0),Zr(Xr,null,_p(Vt($),E=>(Co(),tr(m,{key:E.id,embedded:"",size:"small",class:"mb-2"},{default:Ot(()=>[er("div",gp,[er("div",hp,[er("span",bp,$o(E.name),1),Ut(f,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:Ot(()=>[is($o(Vt(K)(E.description)),1)]),_:2},1024)]),Ut(ae,null,{default:Ot(()=>[Ut(L,{size:"small",type:"warning",secondary:Vt(U),onClick:g=>S(E)},{default:Ot(()=>[Ut(j,null,{default:Ot(()=>[Ut(i,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),Ut(L,{size:"small",type:"error",secondary:Vt(U),onClick:g=>G(E)},{default:Ot(()=>[Ut(j,null,{default:Ot(()=>[Ut(i,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Co(),tr(m,{key:1,size:"large",class:vp(`mb-2 !border-dashed !border-2 ${Vt(s)("!border-zinc-300","!border-zinc-600")}`)},{default:Ot(()=>[Ut(c,{description:Vt(e)("noMenuLocationAdded")},{icon:Ot(()=>[Ut(j,null,{default:Ot(()=>[Ut(i,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Ut(q,{show:Vt(O),"onUpdate:show":y[5]||(y[5]=E=>yp(O)?O.value=E:null),loading:Vt(N),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Vt(Z)?Vt(e)("editMenuLocation"):Vt(e)("addMenuLocation"),"positive-text":Vt(e)("validate"),"negative-text":Vt(e)("cancel"),onPositiveClick:Y,onNegativeClick:y[6]||(y[6]=E=>O.value=!1)},{default:Ot(()=>[Ut(M,{ref_key:"formRef",ref:a,model:Vt(ee),rules:P,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Ot(()=>[Ut(o,{label:Vt(e)("key"),path:"name"},{default:Ot(()=>[Ut(r,{value:Vt(ee).name,placeholder:Vt(e)("key"),class:"w-full","onUpdate:value":y[3]||(y[3]=E=>Vt(ee).name=Vt(p)(E))},null,8,["value","placeholder"])]),_:1},8,["label"]),Ut(o,{"show-label":!1,path:"description"},{default:Ot(()=>[Ut(z,{modelValue:Vt(ee).description,"onUpdate:modelValue":y[4]||(y[4]=E=>Vt(ee).description=E),placeholder:Vt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ot(()=>[is($o(Vt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{defineComponent:wp}=await ge("vue"),{unref:$e,resolveComponent:ky,createVNode:lt,withCtx:st,toDisplayString:Ta,createTextVNode:en,openBlock:va,createBlock:Wn,createCommentVNode:cs,renderList:xp,Fragment:lr,createElementBlock:Vo,withModifiers:ar,normalizeClass:nr,createElementVNode:Io,isRef:us}=await ge("vue"),$p={key:2},Cp={class:"flex items-center"},Vp={class:"flex flex-col"},Ip={key:0,class:"text-xs font-normal"},Tp={class:"mt-4"},{ref:ca,watch:zp}=await ge("vue"),Sp=wp({__name:"index",setup(se){const{t:e}=Dt(),{request:n}=Zt(),{tr:s,pickByTheme:K,displayFormErrors:X,isInDevMode:p,formatKey:A}=Pt(),{isLightTheme:$}=It(Wl()),{menuLocations:Q}=It(Bt()),{loadMenuLocations:U}=Bt(),B=hl(),V=gl(),b=El(),u=ca(!1),H=ca(!1),N=ca([]),O=async(W=!1)=>{B.start(),u.value=!0;const c=await n({url:"/menus"});c.success&&c.result&&(N.value=c.result.data),W&&await U(),u.value=!1,B.finish()};O(!0);const Z=ca(12),a=ca(1),ee=W=>{Z.value=W},P={name:"",title:"",description:"",menuLocationId:void 0},S=ca(!1),Y=ca(!1),G=ca(!1),C=ca(null),y=ca(P),i={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},j=ca(null),L=W=>{j.value=be.cloneDeep(W),y.value=be.cloneDeep(W||P),S.value=!0},ae=async()=>(C.value?.validate(async W=>{if(!W){B.start(),H.value=!0;const c={name:y.value.name,title:y.value.title,description:y.value.description,menuLocationId:y.value.menuLocationId},w=await n({method:j.value?"put":"post",url:j.value?`/menus/${j.value.id}`:"/menus",data:c});if(w.failure&&w.error)switch(w.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(w.error?.response?.data?.data);break;default:V.error(e("anErrorOccurred"))}else V.success(e("success")),O(),S.value=!1;H.value=!1,B.finish()}}),!1),f=async W=>{b.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/menus/${W.id}`})).success?(V.success(e("success")),O()):V.error(e("anErrorOccurred"))}})},m=ro("menus-management",()=>({itemsMenu:ca(null)}))();return zp(()=>y.value.title,W=>{j.value||y.value.name.length<=21&&(y.value.name=Yi(s(W),{trim:!0,lower:!0,strict:!0}))}),(W,c)=>{const w=me,q=oe,r=Se,o=Vl,z=ba,M=Ma,E=fl,g=uo,I=fa,pe=Ya,R=na,te=jl,v=Kt,re=fn,it=wa,fe=oa,Oe=Ol,ve=Cl;return va(),Vo(lr,null,[$e(m).itemsMenu?cs("",!0):(va(),Wn(z,{key:0,to:"#alt-action"},{default:st(()=>[lt(o,{align:"center"},{default:st(()=>[$e(p)?(va(),Wn(r,{key:0,type:"success",onClick:c[0]||(c[0]=ce=>Y.value=!0)},{icon:st(()=>[lt(q,{size:"18"},{default:st(()=>[lt(w,{icon:"carbon:template"})]),_:1})]),default:st(()=>[en(" "+Ta($e(e)("locations")),1)]),_:1})):cs("",!0),lt(r,{type:"warning",onClick:c[1]||(c[1]=ce=>G.value=!0)},{icon:st(()=>[lt(q,{size:"18"},{default:st(()=>[lt(w,{icon:"carbon:tag-group"})]),_:1})]),default:st(()=>[en(" "+Ta($e(e)("groups")),1)]),_:1}),$e(N)&&$e(N).length?(va(),Wn(r,{key:1,type:"primary",onClick:c[2]||(c[2]=ce=>L(null))},{icon:st(()=>[lt(q,{size:"18"},{default:st(()=>[lt(w,{icon:"carbon:add-alt"})]),_:1})]),default:st(()=>[en(" "+Ta($e(e)("addMenu")),1)]),_:1})):cs("",!0)]),_:1})]),_:1})),$e(m).itemsMenu?(va(),Wn(pp,{key:1,modelValue:$e(m).itemsMenu,"onUpdate:modelValue":c[3]||(c[3]=ce=>$e(m).itemsMenu=ce)},null,8,["modelValue"])):(va(),Vo("section",$p,[lt(pe,{appear:"",name:"slide-fade"},{default:st(()=>[Io("section",null,[$e(N)&&$e(N).length?(va(),Vo(lr,{key:0},[(va(!0),Vo(lr,null,xp($e(N).slice(($e(a)-1)*$e(Z),$e(a)*$e(Z)),ce=>(va(),Wn(E,{key:ce.id,embedded:"",size:"small",class:"mb-2"},{header:st(()=>[Io("div",Cp,[lt(o,null,{default:st(()=>[lt(r,{size:"small",type:"primary",secondary:$e($),onClick:ar(zt=>L(ce),["stop"])},{default:st(()=>[lt(q,null,{default:st(()=>[lt(w,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),lt(r,{size:"small",type:"error",secondary:$e($),onClick:ar(zt=>f(ce),["stop"])},{default:st(()=>[lt(q,null,{default:st(()=>[lt(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),lt(M,{vertical:"",class:nr($e(K)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Io("div",Vp,[Io("span",{class:nr(`${ce.location?"text-sm":"text-base"} font-bold`)},Ta($e(s)(ce.title)),3),ce.location?(va(),Vo("small",Ip,Ta(ce.location?.name),1)):cs("",!0)])])]),"header-extra":st(()=>[lt(r,{size:"small",type:"primary",secondary:$e($),onClick:ar(zt=>$e(m).itemsMenu=ce,["stop"])},{icon:st(()=>[lt(q,null,{default:st(()=>[lt(w,{icon:"carbon:arrow-right"})]),_:1})]),default:st(()=>[en(" "+Ta($e(e)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),lt(g,{page:$e(a),"onUpdate:page":c[4]||(c[4]=ce=>us(a)?a.value=ce:null),class:"mt-5 justify-end","show-size-picker":"","page-size":$e(Z),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil($e(N).length/$e(Z)),"onUpdate:pageSize":ee},{prefix:st(()=>[en(Ta(`${$e(N).length} ${$e(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(va(),Wn(E,{key:1,size:"large",class:nr(`mb-2 !border-dashed !border-2 ${$e(K)("!border-zinc-300","!border-zinc-600")}`)},{default:st(()=>[lt(I,{description:$e(e)("noMenuAvailable")},{icon:st(()=>[lt(q,null,{default:st(()=>[lt(w,{icon:"carbon:model-alt"})]),_:1})]),extra:st(()=>[Io("div",Tp,[lt(r,{size:"small",onClick:c[5]||(c[5]=ce=>L(null))},{icon:st(()=>[lt(q,null,{default:st(()=>[lt(w,{icon:"carbon:add-alt"})]),_:1})]),default:st(()=>[en(" "+Ta($e(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),lt(ve,{show:$e(S),"onUpdate:show":c[10]||(c[10]=ce=>us(S)?S.value=ce:null),loading:$e(H),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:$e(j)?$e(e)("editMenu"):$e(e)("addMenu"),"positive-text":$e(e)("validate"),"negative-text":$e(e)("cancel"),onPositiveClick:ae,onNegativeClick:c[11]||(c[11]=ce=>S.value=!1)},{default:st(()=>[lt(Oe,{ref_key:"formRef",ref:C,model:$e(y),rules:i,"show-require-mark":!1,size:"medium",class:"my-5"},{default:st(()=>[lt(te,{"show-label":!1,path:"title"},{default:st(()=>[lt(R,{modelValue:$e(y).title,"onUpdate:modelValue":c[6]||(c[6]=ce=>$e(y).title=ce),placeholder:$e(e)("title"),class:"w-full",sync:""},{label:st(()=>[en(Ta($e(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),lt(te,{"show-label":!1,path:"description"},{default:st(()=>[lt(R,{modelValue:$e(y).description,"onUpdate:modelValue":c[7]||(c[7]=ce=>$e(y).description=ce),placeholder:$e(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:st(()=>[en(Ta($e(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),lt(fe,{"x-gap":"12",span:24},{default:st(()=>[lt(re,{span:12,label:$e(e)("key"),path:"name"},{default:st(()=>[lt(v,{value:$e(y).name,placeholder:$e(e)("key"),class:"w-full","onUpdate:value":c[8]||(c[8]=ce=>$e(y).name=$e(A)(ce))},null,8,["value","placeholder"])]),_:1},8,["label"]),lt(re,{span:12,label:$e(e)("location"),path:"menuLocationId"},{default:st(()=>[lt(it,{value:$e(y).menuLocationId,"onUpdate:value":c[9]||(c[9]=ce=>$e(y).menuLocationId=ce),options:$e(Q),placeholder:$e(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),lt(kp,{show:$e(Y),"onUpdate:show":c[12]||(c[12]=ce=>us(Y)?Y.value=ce:null)},null,8,["show"]),lt(Ad,{show:$e(G),"onUpdate:show":c[13]||(c[13]=ce=>us(G)?G.value=ce:null)},null,8,["show"])]))],64)}}}),Mp="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var Mn=(se=>(se.VERTICAL="vertical",se.HORIZONTAL="horizontal",se))(Mn||{}),ha=(se=>(se.SELF_HOSTED="self-hosted",se.YOUTUBE="youtube",se))(ha||{});const Np=()=>{const{t:se}=Dt(),e=[{label:se("horizontal"),value:Mn.HORIZONTAL,tagType:"info"},{label:se("vertical"),value:Mn.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:K=>e.find(X=>X.value===K)?.tagType||"default",getVideoDisplayTypeLabel:K=>e.find(X=>X.value===K)?.label,videoDisplayTypes:e}},Ep=ro("video-setting",{state:()=>({settings:[]}),getters:{getSetting:se=>e=>se.settings.find(n=>n.key===e),getSettingValue:se=>(e,n="string")=>{const s=se.settings.find(X=>X.key===e);let K="";switch(n){case"number":K=s&&parseInt(s.value)&&!isNaN(parseInt(s.value))?parseInt(s.value):0;break;case"boolean":K=s&&!isNaN(parseInt(s.value))&&parseInt(s.value)>0;break;case"object":K=s&&s.value?JSON.parse(s.value):{};break;case"array":K=s&&s.value?JSON.parse(s.value):[];break;default:K=s&&s.value?s.value:"";break}return K}},actions:{async initDefaultSettings(){await this.loadSettings();const se={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:e}=Zt();await e({url:"/video-settings",method:"put",data:se}),await this.loadSettings()},async loadSettings(){const{request:se}=Zt(),e=await se({url:"/video-settings"});e.success&&e.result?this.settings=e.result.data:this.settings=[]}}}),{unref:Up}=await ge("vue"),{defineComponent:Ap}=await ge("vue"),{unref:T,resolveComponent:wy,createVNode:ne,withCtx:de,toDisplayString:At,createTextVNode:ul,openBlock:nl,createBlock:tn,createCommentVNode:To,isRef:xn,createElementBlock:Xl,createSlots:Dp,createElementVNode:Pl,normalizeClass:Lp,Fragment:zo,renderList:Bp,normalizeStyle:Qr}=await ge("vue"),Pp={key:1,class:"flex items-center gap-3"},Rp={key:0,class:"w-full flex items-center justify-between mt-4"},Fp={class:"flex items-center gap-3"},Op={key:1,class:"mt-4"},jp={key:0},qp={class:"flex items-center justify-center h-full"},Kp={class:"text-center text-dimgray text-sm"},Yp={key:1,class:"flex items-center justify-center"},Gp={class:"mt-5"},Hp={class:"w-full flex flex-gap-8 items-center justify-start"},Wp=["src"],Jp={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Xp=["src"],{inject:Zp,ref:jt,computed:ds}=await ge("vue"),Qp=Ap({__name:"index",setup(se){const{t:e,locale:n}=Dt(),{tr:s,fileUrl:K,pickByTheme:X,displayFormErrors:p,getVideoThumbnail:A}=Pt(),{videoDisplayTypes:$}=Np(),{request:Q}=Zt(),{isLightTheme:U}=It(Wl()),B=hl(),V=gl(),b=El(),u=Zp("appConfig"),H=jt(""),N=jt(null),O=jt(!1),Z=jt([]),a=ro("videos-management-store",()=>({currentTab:jt("all")}))(),ee=()=>{i()},P=jt(0),S=jt(12),Y=jt(1),G=ds(()=>`/video-items?pageSize=${S.value}&query=${H.value}&source=${a.currentTab}`),C=ke=>{i(`${G.value}&page=${ke}`)},y=ke=>{S.value=ke,i()},i=async(ke=null,F=!1)=>{O.value=!0,B.start();const h=await Q({url:ke??G.value});h.success&&h.result&&(Z.value=h.result.data?.videoItems||[],P.value=h.result.data?.meta?.total||0,Y.value=h.result.data?.meta?.currentPage||1),B.finish(),O.value=!1};i(null,!0);const j=jt(!1),L=jt(!1),ae=jt(null),f=jt(null),m=jt({title:"",description:"",visible:!0,source:ha.SELF_HOSTED,displayType:Mn.HORIZONTAL,thumbnail:"",path:""}),W=ds(()=>({title:[{required:m.value.source==ha.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),c=ke=>{ae.value=be.cloneDeep(ke),ke?m.value=be.cloneDeep(ke):m.value={title:"",description:"",visible:!0,source:ha.SELF_HOSTED,displayType:Mn.HORIZONTAL,thumbnail:"",path:""},L.value=!0},w=async ke=>{b.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await Q({method:"delete",url:`/video-items/force/${ke.id}`})).success?(V.success(e("success")),i()):V.error(e("anErrorOccurred"))}})},q=async()=>(f.value?.validate(async ke=>{if(!ke)if(ae.value){B.start(),j.value=!0;const F={title:m.value.title,description:m.value.description,visible:m.value.visible,source:m.value.source,displayType:m.value.displayType,thumbnail:m.value.thumbnail,path:m.value.path},h=await Q({method:"put",url:`/video-items/${ae.value.id}`,data:F});h.success&&h.result.data&&(V.success(e("success")),i(`${G.value}&page=${Y.value}`)),j.value=!1,B.finish(),L.value=!1}else{B.start(),j.value=!0;const F={title:m.value.title,description:m.value.description,visible:m.value.visible,source:m.value.source,displayType:m.value.displayType,thumbnail:m.value.thumbnail,path:m.value.path},h=await Q({method:"post",url:"/video-items",data:F});if(h.failure&&h.error)switch(h.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:p(h.error?.response?.data?.data);break;case cl.REQUEST_PARAMS_MISSING:V.error(e("pleaseProvideApiKeyAndValidVideoUrl"));break;case cl.REQUEST_DATA_RETRIEVAL_FAILED:V.error(e("videoDataCantBeRetrieve"));break;case cl.REQUEST_DATA_ALREADY_EXISTS:V.error(e("videoAlreadyExists"));break;default:V.error(e("anErrorOccurred"))}else V.success(e("success")),i(`${G.value}&page=${Y.value}`),L.value=!1;j.value=!1,B.finish()}}),!1),r=jt(!1),o=jt(!1),z=jt(""),M=jt(""),E=jt("classic"),g=jt(!1),I=Ep(),pe=jt({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),R=jt(pe.value),te=ds(()=>be.isEqual(pe.value,R.value)),v=async()=>{j.value=!0;const ke=await Q({url:"/video-settings",method:"put",data:pe.value});ke.success&&ke.result?V.success(e("success")):V.error(e("unableToUpdateSettings")),await re()},re=async()=>{B.start(),j.value=!0,await I.loadSettings(),I.settings?.forEach(ke=>{pe.value[ke.key]!=null&&(pe.value[ke.key]=ke.value)}),R.value=be.cloneDeep(pe.value),j.value=!1,B.finish()};re();const it=async()=>{B.start(),j.value=!0,(await Q({url:"/video-items/youtube/channel-videos",method:"put"})).success?(V.success(e("success")),await re()):V.error(e("unableToUpdateChannelVideos")),j.value=!1,B.finish()},fe=jt(!1),Oe=jt(Nl()),ve=jt({}),ce=ds(()=>{let ke=0;for(const F in ve.value)ve.value[F]&&ke++;return ke});function zt(){ve.value={},i()}const rt=async()=>(ce.value?b.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[ce.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{j.value=!0,B.start();for(const ke in ve.value)ve.value[ke]&&await Q({url:`/video-items/force/${ke}`,method:"delete"});B.finish(),j.value=!1,V.success(e("success")),ve.value={},i(null,!0)}}):V.warning(e("noItemSelected")),!1);return(ke,F)=>{const h=me,Ce=oe,J=Se,D=Un,we=ba,et=ac,mt=Kt,Ul=Ns,xt=Pi,vt=Vl,Qt=fl,Al=Ha,ct=nc,Tt=oa,$t=mc,ye=Es,Yt=Ga,xa=Ya,Ja=uo,An=En,Ne=fa,ql=jl,mn=fn,Xa=wa,l=na,Us=so,ie=Ol,bl=Cl,Tr=Nn;return nl(),Xl(zo,null,[ne(we,{to:"#alt-action"},{default:de(()=>[T(a).currentTab=="settings"?(nl(),tn(J,{key:0,loading:T(j),disabled:T(te),type:"primary",onClick:v},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:save"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(nl(),Xl("div",Pp,[ne(D,{checked:T(fe),"onUpdate:checked":[F[0]||(F[0]=Ve=>xn(fe)?fe.value=Ve:null),F[1]||(F[1]=Ve=>{for(const Yo of T(Z))Yo.id&&(T(ve)[Yo.id]=Ve);Oe.value=("uuidv4"in ke?ke.uuidv4:Up(Nl))()})]},{default:de(()=>[ul(At(T(e)("selectAll")),1)]),_:1},8,["checked"]),ne(J,{type:"primary",onClick:F[2]||(F[2]=Ve=>c(null))},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:video-add"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("addVideo")),1)]),_:1})]))]),_:1}),ne(xt,{value:T(a).currentTab,"onUpdate:value":[F[6]||(F[6]=Ve=>T(a).currentTab=Ve),ee],type:"card",size:"medium"},Dp({default:de(()=>[ne(et,{name:"all"},{default:de(()=>[ne(Ce,{size:"18",class:"mr-1"},{default:de(()=>[ne(h,{icon:"carbon:collapse-all"})]),_:1}),ul(" "+At(T(e)("all_")),1)]),_:1}),ne(et,{name:T(ha).SELF_HOSTED},{default:de(()=>[ne(Ce,{size:"18",class:"mr-1"},{default:de(()=>[ne(h,{icon:"carbon:document-video"})]),_:1}),ul(" "+At(T(e)("selfHosted")),1)]),_:1},8,["name"]),ne(et,{name:T(ha).YOUTUBE},{default:de(()=>[ne(Ce,{size:"18",class:"mr-1"},{default:de(()=>[ne(h,{icon:"carbon:logo-youtube"})]),_:1}),ul(" "+At(T(e)("youtube")),1)]),_:1},8,["name"]),ne(et,{name:"settings"},{default:de(()=>[ne(Ce,{size:"18",class:"mr-1"},{default:de(()=>[ne(h,{icon:"carbon:settings-adjust"})]),_:1}),ul(" "+At(T(e)("settings")),1)]),_:1})]),_:2},[T(a).currentTab!="settings"?{name:"suffix",fn:de(()=>[ne(Ul,{class:"!w-[250px]"},{default:de(()=>[ne(mt,{ref_key:"searchInputRef",ref:N,value:T(H),"onUpdate:value":[F[3]||(F[3]=Ve=>xn(H)?H.value=Ve:null),F[4]||(F[4]=Ve=>{Ve||i()})],clearable:!0,placeholder:T(e)("searchVideo")},null,8,["value","placeholder"]),ne(J,{type:"primary",onClick:F[5]||(F[5]=Ve=>i())},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),T(ce)>0?(nl(),Xl("section",Rp,[Pl("span",null,At(T(e)("nbItemsSelected",[T(ce)])),1),Pl("section",Fp,[ne(J,{type:"error",size:"small",onClick:rt},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:trash-can"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("delete")),1)]),_:1}),ne(J,{type:"warning",size:"small",onClick:zt},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:close"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("cancelSelection")),1)]),_:1})])])):To("",!0),T(a).currentTab=="settings"?(nl(),Xl("section",Op,[ne(Qt,{hoverable:"",embedded:""},{header:de(()=>[ul(At(T(e)("youtube")),1)]),default:de(()=>[ne(Tt,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:de(()=>[ne(Al,null,{default:de(()=>[ne(Qt,{class:"w-full h-full",size:"small"},{default:de(()=>[ne(vt,{align:"center",justify:"space-between"},{default:de(()=>[Pl("span",null,At(T(e)("apiKey")),1),ne(mt,{value:T(pe).youtubeApiKey,"onUpdate:value":F[7]||(F[7]=Ve=>T(pe).youtubeApiKey=Ve),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),ne(Al,null,{default:de(()=>[ne(Qt,{class:"w-full h-full py-1.5",size:"small"},{default:de(()=>[ne(vt,{align:"center",justify:"space-between"},{default:de(()=>[Pl("span",null,At(T(e)("autoUpdateChannelVideos")),1),ne(ct,{value:T(pe).youtubeChannelVideosAutoUpdate,"onUpdate:value":F[8]||(F[8]=Ve=>T(pe).youtubeChannelVideosAutoUpdate=Ve),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:de(()=>F[28]||(F[28]=[Pl("div",{class:"w-6"},null,-1)])),unchecked:de(()=>F[29]||(F[29]=[Pl("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),T(pe).youtubeChannelVideosAutoUpdate=="1"?(nl(),Xl(zo,{key:0},[ne(Al,null,{default:de(()=>[ne(Qt,{class:"w-full h-full",size:"small"},{default:de(()=>[ne(vt,{align:"center",justify:"space-between"},{default:de(()=>[Pl("span",null,At(T(e)("channelId")),1),ne(mt,{value:T(pe).youtubeChannelId,"onUpdate:value":F[9]||(F[9]=Ve=>T(pe).youtubeChannelId=Ve),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),ne(Al,null,{default:de(()=>[ne(Qt,{class:"w-full h-full",size:"small"},{default:de(()=>[ne(vt,{align:"center",justify:"space-between"},{default:de(()=>[Pl("span",null,At(T(e)("lastUpdate")),1),Pl("b",null,At(T(pe).youtubeLastChannelVideosUpdate?T(Ka)(T(pe).youtubeLastChannelVideosUpdate,{locale:T(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):T(e)("never")),1),ne(J,{strong:"",circle:"",secondary:T(U),type:"primary",title:T(e)("refresh"),disabled:T(j),onClick:it},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:restart",class:Lp({"animate-spin":T(j)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):To("",!0)]),_:1})]),_:1})])):(nl(),tn(Qt,{key:2,embedded:"",class:"py-10 mt-4"},{default:de(()=>[T(Z).length&&!T(O)?(nl(),Xl("section",jp,[ne(Tt,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:de(()=>[(nl(!0),Xl(zo,null,Bp(T(Z),(Ve,Yo)=>(nl(),tn(Al,{key:Yo},{default:de(()=>[ne(xa,{name:"slide-fade",appear:""},{default:de(()=>[ne(Qt,{bordered:"",hoverable:""},{cover:de(()=>[Pl("div",qp,[ne($t,{load:()=>T(A)(Ve.path),fallback:Ve.thumbnailUrl??T(Mp),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"])])]),header:de(()=>[Pl("div",Kp,[ne(ye,{"line-clamp":1,"expand-trigger":"click"},{default:de(()=>[Ve.id?(nl(),tn(D,{key:T(Oe),checked:T(ve)[Ve.id],"onUpdate:checked":As=>T(ve)[Ve.id]=As,class:"mr-1"},null,8,["checked","onUpdate:checked"])):To("",!0),ul(" "+At(T(s)(Ve.title)),1)]),_:2},1024)])]),action:de(()=>[ne(vt,{justify:"space-between",align:"center"},{default:de(()=>[ne(vt,null,{default:de(()=>[ne(Yt,{bordered:!1,type:Ve.visible?"success":"error"},{default:de(()=>[ul(At(Ve.visible?T(e)("visible"):T(e)("hidden")),1)]),_:2},1032,["type"]),ne(Yt,{bordered:!1,type:Ve.displayType==T(Mn).HORIZONTAL?"info":"warning"},{default:de(()=>[ul(At(Ve.displayType==T(Mn).HORIZONTAL?T(e)("horizontal"):T(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),ne(vt,null,{default:de(()=>[ne(J,{ternary:"",circle:"",title:T(e)("play"),onClick:()=>{z.value=T(e)("video"),M.value=T(K)(Ve.path),E.value=Ve.source==T(ha).YOUTUBE?"youtube":"classic",o.value=!0}},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Ve.source!=T(ha).YOUTUBE?(nl(),tn(J,{key:0,ternary:"",circle:"",title:T(e)("edit"),onClick:As=>c(Ve)},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):To("",!0),ne(J,{ternary:"",circle:"",title:T(e)("delete"),onClick:As=>w(Ve)},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),ne(Ja,{page:T(Y),"onUpdate:page":[F[10]||(F[10]=Ve=>xn(Y)?Y.value=Ve:null),C],class:"mt-10 justify-center","show-size-picker":"","page-size":T(S),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(T(P)/T(S)),"onUpdate:pageSize":y},{prefix:de(()=>[ul(At(`${T(P)} ${T(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):T(O)?(nl(),Xl("section",Yp,[ne(An,{size:"medium"})])):(nl(),tn(Ne,{key:2,description:T(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),ne(bl,{show:T(L),"onUpdate:show":F[21]||(F[21]=Ve=>xn(L)?L.value=Ve:null),loading:T(j),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:T(ae)?T(e)("editVideo"):T(e)("addVideo"),"positive-text":T(e)("validate"),"negative-text":T(e)("cancel"),onPositiveClick:q,onNegativeClick:F[22]||(F[22]=Ve=>L.value=!1)},{default:de(()=>[Pl("div",Gp,[ne(ie,{ref_key:"formRef",ref:f,model:T(m),rules:T(W),"show-require-mark":!1,size:"medium"},{default:de(()=>[ne(ql,{label:T(e)("source"),path:"source"},{default:de(()=>[ne(D,{checked:T(m).source,"onUpdate:checked":F[11]||(F[11]=Ve=>T(m).source=Ve),"checked-value":T(ha).YOUTUBE,"unchecked-value":T(ha).SELF_HOSTED},{default:de(()=>[ul(At(T(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),T(m).source==T(ha).YOUTUBE?(nl(),tn(Tt,{key:0,"x-gap":"12",span:24},{default:de(()=>[ne(mn,{span:16,label:T(e)("videoShareLink"),path:"path"},{default:de(()=>[ne(mt,{value:T(m).path,"onUpdate:value":F[12]||(F[12]=Ve=>T(m).path=Ve),placeholder:T(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),ne(mn,{span:8,label:T(e)("displayType"),path:"displayType"},{default:de(()=>[ne(Xa,{value:T(m).displayType,"onUpdate:value":F[13]||(F[13]=Ve=>T(m).displayType=Ve),placeholder:T(e)("displayType"),options:T($),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(nl(),Xl(zo,{key:1},[ne(ql,{"show-label":!1,path:"title"},{default:de(()=>[ne(l,{modelValue:T(m).title,"onUpdate:modelValue":F[14]||(F[14]=Ve=>T(m).title=Ve),placeholder:T(e)("title"),class:"w-full",sync:""},{label:de(()=>[ul(At(T(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ne(ql,{"show-label":!1,path:"description"},{default:de(()=>[ne(l,{modelValue:T(m).description,"onUpdate:modelValue":F[15]||(F[15]=Ve=>T(m).description=Ve),placeholder:T(e)("description"),class:"w-full",type:"textarea",sync:""},{label:de(()=>[ul(At(T(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ne(Tt,{"x-gap":"12",span:24},{default:de(()=>[ne(mn,{span:16,label:T(e)("content"),path:"path"},{default:de(()=>[ne(Ul,null,{default:de(()=>[ne(J,{type:"primary",onClick:F[16]||(F[16]=()=>{r.value=!0})},{default:de(()=>[ul(At(T(e)("select")),1)]),_:1}),ne(mt,{value:T(m).path?T(lo)(T(m).path):"",placeholder:T(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),T(m).path?(nl(),Xl(zo,{key:0},[ne(J,{type:"primary",ghost:"",onClick:F[17]||(F[17]=()=>{z.value=T(e)("video"),M.value=T(K)(T(m).path),E.value="classic",o.value=!0})},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:play"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("play")),1)]),_:1}),ne(J,{type:"primary",ghost:"",onClick:F[18]||(F[18]=()=>{T(m).path=""})},{icon:de(()=>[ne(Ce,null,{default:de(()=>[ne(h,{icon:"carbon:trash-can"})]),_:1})]),default:de(()=>[ul(" "+At(T(e)("clear")),1)]),_:1})],64)):To("",!0)]),_:1})]),_:1},8,["label"]),ne(mn,{span:8,label:T(e)("displayType"),path:"displayType"},{default:de(()=>[ne(Xa,{value:T(m).displayType,"onUpdate:value":F[19]||(F[19]=Ve=>T(m).displayType=Ve),placeholder:T(e)("displayType"),options:T($),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),ne(ql,{label:T(e)("thumbnail"),path:"thumbnail"},{default:de(()=>[Pl("div",Hp,[Pl("div",{class:"cursor-pointer w-full h-[150px]",onClick:F[20]||(F[20]=()=>{g.value=!0})},[T(m).thumbnail?(nl(),tn(Us,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Qr("border: 1px dashed "+T(X)("green","white")),src:T(K)(T(m).thumbnail||"")},null,8,["style","src"])):(nl(),Xl("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Qr("border: 1px dashed "+T(X)("green","white"))},[ne(Ce,{size:64},{default:de(()=>[ne(h,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ne(bl,{show:T(o),"onUpdate:show":F[23]||(F[23]=Ve=>xn(o)?o.value=Ve:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:T(z)},{default:de(()=>[T(E)==="youtube"?(nl(),Xl("iframe",{key:0,width:"100%",height:"380",src:T(M),frameborder:"0",allowfullscreen:""},null,8,Wp)):(nl(),Xl("video",Jp,[Pl("source",{src:T(M)},null,8,Xp)]))]),_:1},8,["show","title"]),ne(Tr,{show:T(r),"onUpdate:show":F[24]||(F[24]=Ve=>xn(r)?r.value=Ve:null),title:T(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:T(u)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:F[25]||(F[25]=Ve=>{T(m).path=Ve,r.value=!1})},null,8,["show","title","upload-config"]),ne(Tr,{show:T(g),"onUpdate:show":F[26]||(F[26]=Ve=>xn(g)?g.value=Ve:null),title:T(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:T(u)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:F[27]||(F[27]=Ve=>{T(m).thumbnail=Ve,g.value=!1})},null,8,["show","title","upload-config"])],64)}}}),ef=Wa(Qp,[["__scopeId","data-v-cae8dda0"]]),{t:Ee}=Ui.global,ei=[{key:"maxlength",defaultValue:"",placeholder:Ee("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Ee("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],tf={text:ei,textarea:ei,number:[{key:"min",defaultValue:"",placeholder:Ee("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Ee("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Ee("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ee("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"library",defaultValue:"all",placeholder:Ee("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}]},{t:Ue}=Ui.global,or=[{type:"group",label:Ue("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Ue("text"),value:"text"},{label:Ue("i18nText"),value:"i18n-text"},{label:Ue("textarea"),value:"textarea"},{label:Ue("i18nTextarea"),value:"i18n-textarea"},{label:Ue("editor"),value:"editor"},{label:Ue("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Ue("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Ue("number"),value:"number"},{label:Ue("checkbox"),value:"checkbox"}]},{type:"group",label:Ue("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Ue("singleSelect"),value:"single-select"},{label:Ue("multiSelect"),value:"multi-select"}]},{type:"group",label:Ue("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Ue("date"),value:"date"},{label:Ue("daterange"),value:"daterange"},{label:Ue("datetime"),value:"datetime"},{label:Ue("datetimerange"),value:"datetimerange"},{label:Ue("year"),value:"year"},{label:Ue("yearrange"),value:"yearrange"},{label:Ue("month"),value:"month"},{label:Ue("monthrange"),value:"monthrange"},{label:Ue("quarter"),value:"quarter"},{label:Ue("quarterrange"),value:"quarterrange"},{label:Ue("week"),value:"week"}]},{type:"group",label:Ue("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Ue("image"),value:"image"},{label:Ue("gallery"),value:"gallery"},{label:Ue("audio"),value:"audio"},{label:Ue("video"),value:"video"},{label:Ue("document"),value:"document"},{label:Ue("file"),value:"file"}]},{type:"group",label:Ue("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Ue("newsArticle"),value:"news-article"},{label:Ue("newsArticles"),value:"news-articles"},{label:Ue("newsCategory"),value:"news-category"},{label:Ue("newsCategories"),value:"news-categories"},{label:Ue("newsTag"),value:"news-tag"},{label:Ue("newsTags"),value:"news-tags"}]},{type:"group",label:Ue("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Ue("icon"),value:"icon"},{label:Ue("icons"),value:"icons"},{label:Ue("color"),value:"color"}]},{type:"group",label:Ue("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Ue("contentItem"),value:"content-model-item"},{label:Ue("contentItems"),value:"content-model-items"},{label:Ue("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Ue("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Ue("list"),value:"list"},{label:Ue("i18nList"),value:"i18n-list"},{label:Ue("albums"),value:"albums"}]}],{useModel:lf,mergeModels:af,defineComponent:nf}=await ge("vue"),{renderList:So,Fragment:La,openBlock:Jt,createElementBlock:Gl,unref:Ie,toDisplayString:wl,createTextVNode:ln,resolveComponent:xy,withCtx:Ke,createVNode:Re,createElementVNode:Zl,createCommentVNode:sr,createBlock:Ba,normalizeClass:of,isRef:ti}=await ge("vue"),sf={class:"flex items-center justify-between w-full"},rf={class:"text-base font-semibold"},cf={class:"text-xs text-slate-400"},uf={class:"text-xs text-slate-400"},df={class:"text-xs text-slate-400"},pf={class:"text-xs text-slate-400"},ff={key:0},mf={class:"text-xs text-slate-400"},_f={key:1},vf={class:"text-xs text-slate-400"},yf={key:2},gf={class:"text-xs text-slate-400"},hf={key:3},bf={class:"text-xs text-slate-400"},kf={key:0,class:"w-full flex items-center"},wf={class:"w-full flex items-center"},xf={class:"w-full"},$f={class:"text-sm"},{ref:Jn,computed:rr,h:Mo,inject:No}=await ge("vue"),Cf=nf({__name:"Fields",props:af({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(se){const{t:e}=Dt(),{tr:n,formatKey:s,pickByTheme:K}=Pt(),{isLightTheme:X}=It(Wl()),{contentModels:p}=It(Bt()),A=se,$=lf(se,"modelValue"),Q=y=>{for(const i of or){const j=i.children.find(L=>L.value===y);if(j)return j.label}return null},U=Jn(!1),B=Jn(null),V=Jn(null),b=Jn(null),u=Jn(),H=(y,i)=>{V.value=b.value=y,B.value=i;for(const j of or)j.children.find(ae=>ae.value===y)&&(u.value=j.key);U.value=!0},N=y=>{O(y).value=!O(y).value},O=y=>rr({get:()=>y.value===V.value,set:i=>{i?V.value=y.value:V.value=null}}),Z=rr(()=>!V.value||V.value===b.value),a=()=>{V.value&&B.value!==null&&($.value[B.value].type=V.value),U.value=!1},ee=y=>Mo("div",{class:"flex items-center"},[Mo(oe,{size:21,class:"text-gray-500"},{default:()=>Mo(me,{icon:y.icon})}),Mo("span",{class:"font-normal ml-2 "},{default:()=>y.label}),Mo("span",{class:"text-gray-500 ml-1"},{default:()=>`(${y.children.length})`})]),P=No("renderSelectLabel"),S=No("removeCollectionField"),Y=No("removeSingleton"),G=No("onCreateItemOption"),C=No("expandedNames",()=>rr(()=>Jn([]).value));return(y,i)=>{const j=Ga,L=Vl,ae=Se,f=Kt,m=Ha,W=na,c=Ns,w=oa,q=Ma,r=Un,o=wa,z=Ir,M=Ya,E=Vr,g=co,I=io,pe=fl,R=Fi,te=Ri,v=oc,re=Pi,it=Cl;return Jt(),Gl(La,null,[(Jt(!0),Gl(La,null,So($.value,(fe,Oe)=>(Jt(),Ba(pe,{key:`field-${Oe}`,size:"small",class:"my-2"},{default:Ke(()=>[Re(I,{"expanded-names":Ie(C)(A.type=="collection"?`c-${A.parentItemIndex}-f-${Oe}`:`s-${Oe}`).value,"onUpdate:expandedNames":ve=>Ie(C)(A.type=="collection"?`c-${A.parentItemIndex}-f-${Oe}`:`s-${Oe}`).value=ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:Ke(()=>[Re(g,{name:"1"},{header:Ke(()=>[Zl("div",sf,[Re(L,null,{default:Ke(()=>[Re(j,{size:"small",type:"info"},{default:Ke(()=>[ln(wl(Oe+1),1)]),_:2},1024),Zl("span",rf,wl(Ie(n)(fe.label)),1)]),_:2},1024),Re(ae,{size:"small",type:"error",secondary:Ie(X),onClick:()=>{A.type==="collection"?Ie(S)&&Ie(S)(A.collectionKey,Oe):Ie(Y)&&Ie(Y)(Oe)}},{default:Ke(()=>[Re(Ie(oe),{class:"mr-1"},{default:Ke(()=>[Re(Ie(me),{icon:"carbon:trash-can"})]),_:1}),ln(" "+wl(Ie(e)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:Ke(()=>[Re(w,{span:24,"x-gap":"6"},{default:Ke(()=>[Re(m,{span:6},{default:Ke(()=>[Zl("span",cf,wl(Ie(e)("fieldKey")),1),Re(f,{value:fe.key,placeholder:Ie(e)("fieldKey"),class:"w-full","onUpdate:value":ve=>fe.key=Ie(s)(ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Re(m,{span:10},{default:Ke(()=>[Re(W,{modelValue:fe.label,"onUpdate:modelValue":ve=>fe.label=ve,placeholder:Ie(e)("title"),class:"w-full",sync:""},{label:Ke(()=>[Zl("span",uf,wl(Ie(e)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Re(m,{span:8},{default:Ke(()=>[Zl("span",df,wl(Ie(e)("type")),1),Re(c,null,{default:Ke(()=>[Re(f,{value:Q(fe.type),placeholder:Ie(e)("type"),class:"w-full field-type-input",readonly:"",onClick:ve=>H(fe.type,Oe)},null,8,["value","placeholder","onClick"]),Re(ae,{onClick:ve=>H(fe.type,Oe)},{icon:Ke(()=>[Re(Ie(me),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),Re(q,{class:"!mt-4 !mb-2"}),Re(w,{span:24,"x-gap":"6"},{default:Ke(()=>[Re(m,{span:10,class:"flex items-center"},{default:Ke(()=>[Re(r,{checked:fe.required,"onUpdate:checked":ve=>fe.required=ve,size:"medium"},{default:Ke(()=>[ln(wl(Ie(e)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),Re(m,{span:14},{default:Ke(()=>[["content-model-item","content-model-items"].includes(fe.type)?(Jt(),Gl(La,{key:0},[Zl("span",pf,wl(Ie(e)("contentModel")),1),Re(o,{value:fe.defaultValue,"onUpdate:value":ve=>fe.defaultValue=ve,options:Ie(p),placeholder:Ie(e)("contentModel"),"render-label":Ie(P),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(Jt(),Gl(La,{key:1},[fe.type==="color"?(Jt(),Gl("div",ff,[Zl("span",mf,wl(Ie(e)("defaultValue")),1),Re(Ie(oo),{value:fe.defaultValue,"onUpdate:value":ve=>fe.defaultValue=ve,class:"cursor-pointer",theme:Ie(X)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):fe.type==="i18n-text"?(Jt(),Gl("div",_f,[Re(W,{modelValue:fe.defaultValue,"onUpdate:modelValue":ve=>fe.defaultValue=ve,placeholder:Ie(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:Ke(()=>[Zl("span",vf,wl(Ie(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):fe.type==="i18n-textarea"?(Jt(),Gl("div",yf,[Re(W,{modelValue:fe.defaultValue,"onUpdate:modelValue":ve=>fe.defaultValue=ve,placeholder:Ie(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Ke(()=>[Zl("span",gf,wl(Ie(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):fe.type==="i18n-editor"?(Jt(),Gl("div",hf,[Re(W,{modelValue:fe.defaultValue,"onUpdate:modelValue":ve=>fe.defaultValue=ve,placeholder:Ie(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:Ke(()=>[Zl("span",bf,wl(Ie(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):(Jt(),Ba(f,{key:4,value:fe.defaultValue,"onUpdate:value":ve=>fe.defaultValue=ve,placeholder:Ie(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),fe.type==="multi-select"||fe.type==="single-select"?(Jt(),Ba(q,{key:0,"title-placement":"left",class:"!my-4"},{default:Ke(()=>[ln(wl(Ie(e)("options")),1)]),_:1})):sr("",!0),Re(M,{name:"slide-fade",appear:""},{default:Ke(()=>[fe.type==="multi-select"||fe.type==="single-select"?(Jt(),Gl("div",kf,[Re(z,{value:fe.options,"onUpdate:value":ve=>fe.options=ve,placeholder:Ie(e)("addOption"),"on-create":ve=>Ie(G)?Ie(G)(ve,Oe):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Ke(()=>[ln(wl(Ie(e)("addOption")),1)]),default:Ke(({value:ve})=>[Zl("div",wf,[Re(f,{value:ve.value,placeholder:Ie(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":ce=>ve.value=Ie(s)(ce)},null,8,["value","placeholder","onUpdate:value"]),Re(W,{modelValue:ve.label,"onUpdate:modelValue":ce=>ve.label=ce,placeholder:Ie(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):sr("",!0)]),_:2},1024),(Jt(!0),Gl(La,null,So(Ie(tf),(ve,ce,zt)=>(Jt(),Gl(La,{key:zt},[fe.type===ce?(Jt(),Ba(I,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:Ke(()=>[Re(Ie(oe),{size:"18"},{default:Ke(()=>[Re(Ie(me),{icon:"carbon:chevron-right"})]),_:1})]),default:Ke(()=>[Re(g,{name:"1"},{header:Ke(()=>[Re(q,{"title-placement":"left",class:"!my-4"},{default:Ke(()=>[ln(wl(Ie(e)("settings")),1)]),_:1})]),default:Ke(()=>[Re(M,{name:"slide-fade",appear:""},{default:Ke(()=>[Zl("div",xf,[(Jt(!0),Gl(La,null,So(ve,rt=>(Jt(),Ba(w,{key:rt.key,span:24,"x-gap":"12",class:"mb-2"},{default:Ke(()=>[Re(m,{span:10},{default:Ke(()=>[Re(f,{value:rt.key,placeholder:Ie(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),Re(m,{span:14},{default:Ke(()=>[rt.isNumber?(Jt(),Ba(E,{key:0,value:fe.settings[rt.key],"onUpdate:value":ke=>fe.settings[rt.key]=ke,"default-value":rt.defaultValue?parseInt(rt.defaultValue):void 0,placeholder:rt.placeholder||Ie(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(Jt(),Ba(f,{key:1,value:fe.settings[rt.key],"onUpdate:value":ke=>fe.settings[rt.key]=ke,"default-value":rt.defaultValue,placeholder:rt.placeholder||Ie(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):sr("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)),Re(it,{show:Ie(U),"onUpdate:show":i[2]||(i[2]=fe=>ti(U)?U.value=fe:null),preset:"card",size:"medium",style:{width:"650px"},title:Ie(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":Ke(()=>[Re(L,{align:"center"},{default:Ke(()=>[Re(ae,{size:"small",type:"success",disabled:Ie(Z),onClick:a},{default:Ke(()=>[Re(Ie(me),{icon:"carbon:checkmark",class:"mr-1"}),ln(" "+wl(Ie(e)("select")),1)]),_:1},8,["disabled"]),Re(ae,{size:"small",type:"error",onClick:i[0]||(i[0]=fe=>U.value=!1)},{default:Ke(()=>[Re(Ie(me),{icon:"carbon:close",class:"mr-1"}),ln(" "+wl(Ie(e)("close")),1)]),_:1})]),_:1})]),default:Ke(()=>[Re(re,{animated:"",type:"line",size:"medium",placement:"left",value:Ie(u),"onUpdate:value":i[1]||(i[1]=fe=>ti(u)?u.value=fe:null),style:{height:"100%"}},{default:Ke(()=>[(Jt(!0),Gl(La,null,So(Ie(or),(fe,Oe)=>(Jt(),Ba(v,{name:fe.key,tab:ee(fe),key:Oe},{default:Ke(()=>[Re(te,{hoverable:"",clickable:"",bordered:""},{default:Ke(()=>[(Jt(!0),Gl(La,null,So(fe.children,ve=>(Jt(),Ba(R,{class:of(O(ve).value?`${Ie(K)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:ve.value,onClick:ce=>N(ve)},{suffix:Ke(()=>[Re(r,{checked:O(ve).value,"onUpdate:checked":ce=>O(ve).value=ce,size:"medium",onClick:ce=>N(ve)},null,8,["checked","onUpdate:checked","onClick"])]),default:Ke(()=>[Zl("span",$f,wl(ve.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),li=Wa(Cf,[["__scopeId","data-v-24eae944"]]),{useModel:Vf,mergeModels:If,defineComponent:Tf}=await ge("vue"),{unref:Ye,toDisplayString:xl,openBlock:Ql,createElementBlock:Eo,createCommentVNode:ps,createTextVNode:ya,resolveComponent:$y,withCtx:Ge,createVNode:He,createElementVNode:$n,createBlock:an,normalizeStyle:ir,renderList:zf,Fragment:ai,normalizeClass:Sf}=await ge("vue"),Mf={class:"text-base"},Nf={key:0},Ef={key:0},Uf={key:0},Af={class:"flex items-center justify-between w-full"},Df={class:"text-base font-semibold"},Lf={class:"text-xs text-slate-400"},Bf={class:"text-xs text-slate-400"},Pf={class:"text-xs text-slate-400"},{ref:nn,computed:cr,watch:ur,h:Rf,provide:on}=await ge("vue"),Ji=Tf({__name:"index",props:If({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(se){const{t:e}=Dt(),{tr:n,pickByTheme:s,formatKey:K}=Pt(),{isLightTheme:X}=It(Wl()),{loadContentModels:p}=Bt();p();const A=se,$=Vf(se,"show"),Q=hl(),U=gl(),B=El(),V=nn(!1),b=nn(null),u=nn({}),H=nn({}),N={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},O=nn(!1),Z=nn(!1),a=nn({}),ee=r=>cr({get:()=>a.value[r]?["1"]:[],set:o=>{a.value[r]=o.length>0}});ur(()=>Z.value,r=>{Object.entries(u.value).forEach(([o,z],M)=>{o!=="index"&&(a.value[`c-${M}`]=r,z?.items?.forEach((E,g)=>{a.value[`c-${M}-f-${g}`]=r}))})}),ur(()=>O.value,r=>{Object.entries(u.value).forEach(([o,z],M)=>{o==="index"&&z?.forEach((E,g)=>{a.value[`s-${g}`]=r})})});const P=cr(()=>be.isEqual(u.value,H.value)),S=()=>{u.value?u.value.index&&Array.isArray(u.value.index)?u.value.index.push(be.cloneDeep(N)):u.value.index=[be.cloneDeep(N)]:u.value={index:[be.cloneDeep(N)]}},Y=r=>{u.value&&Array.isArray(u.value.index)&&u.value.index.splice(r,1)},G=()=>{const r=Nl();u.value?u.value[r]={key:"",title:"",items:[]}:u.value={[r]:{key:"",title:"",items:[]}}},C=r=>{if(u.value){const{[r]:o,...z}=u.value;u.value=z}},y=r=>{u.value&&u.value[r].items.push(be.cloneDeep(N))},i=(r,o)=>{if(u.value){const z=u.value[r];z&&Array.isArray(z.items)&&z.items.splice(o,1)}},j=r=>r.title&&r.key&&r.key!=="index",L=()=>u.value&&typeof u.value=="object"?Object.keys(u.value).filter(r=>r!=="index").length:0,ae=cr(()=>u.value?Object.keys(u.value).filter(r=>r!=="index"):[]),f=r=>ae.value.indexOf(r),m=nn(!1),W=async()=>{const r=be.cloneDeep(u.value),o=be.cloneDeep(u.value);m.value=!1,V.value=!0,Q.start();const z=[];if(be.forIn(r,(M,E)=>{E!=="index"&&z.push(M.key)}),be.forIn(r,(M,E)=>{if(E!=="index"){const g=be.keys(r).filter(I=>I!=="index").indexOf(E);if(M&&M.key){if(M.key==="index")return U.error(e("keyIndexIsReservedInCollections")),m.value=!0,!1;if(z.filter(pe=>pe==M.key).length>1)return U.error(e("collectionKeyIsNotUnique",[M.key])),m.value=!0,!1;if(Array.isArray(M.items))for(const[pe,R]of M.items.entries())if(R.key){if(M.items.filter(v=>v.key===R.key).length>1)return U.error(e("fieldKeyOfCollectionIsNotUnique",[R.key,M.key])),m.value=!0,!1}else return U.error(e("fieldKeyOfCollectionIsRequired",[pe+1,M.key])),m.value=!0,!1}else return U.error(e("collectionKeyIsRequired",[g+1])),m.value=!0,!1}else if(Array.isArray(M))for(const[g,I]of M.entries())if(I.key){if(M.filter(R=>R.key===I.key).length>1)return U.error(e("singletonKeyIsNotUnique",[I.key])),m.value=!0,!1}else return U.error(e("singletonKeyIsRequired",[g+1])),m.value=!0,!1}),m.value){V.value=!1,Q.finish();return}be.forIn(o,(M,E)=>{E!=="index"&&E!==M.key&&Zi(r,E,M.key)}),await A.updateDataStructure(r),V.value=!1,Q.finish()},c=()=>{be.isEqual(u.value,H.value)?$.value=!1:B.warning({title:e("confirm"),content:e("confirmCloseDataStructure"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{$.value=!1}})};ur(()=>A.rawDataStructure,r=>{u.value=r?be.cloneDeep(r):{},be.forIn(r,(o,z)=>{z!=="index"?(u.value[z].key=z,o?.items?.forEach((M,E)=>{u.value[z].items[E].settings||(u.value[z].items[E].settings={})})):o?.forEach((M,E)=>{u.value[z][E].settings||(u.value[z][E].settings={})})}),H.value=be.cloneDeep(u.value)},{immediate:!0,deep:!0});const w=r=>Rf("span",{},{default:()=>n(r.title)}),q=(r,o)=>({value:`option_${o+1}${r+1}`,label:""});return on("removeCollectionField",i),on("onCreateItemOption",q),on("renderSelectLabel",w),on("removeSingleton",Y),on("addSingleton",S),on("expandCollections",Z),on("expandSingletons",O),on("expandedNames",ee),(r,o)=>{const z=Oi,M=me,E=oe,g=Se,I=Vl,pe=fl,R=ka,te=Ha,v=Ga,re=Kt,it=na,fe=oa,Oe=Ma,ve=sc,ce=co,zt=io,rt=Ni;return Ql(),an(rt,{modelValue:$.value,"onUpdate:modelValue":o[7]||(o[7]=ke=>$.value=ke),"close-on-esc":!1,closable:!1,onOnSizeChange:o[8]||(o[8]=ke=>{b.value=ke})},{header:Ge(()=>[$n("div",Mf,[He(z,{depth:"1"},{default:Ge(()=>[ya(xl(Ye(e)("dataStructure"))+" ",1),r.title?(Ql(),Eo("span",Nf,"Â -Â "+xl(r.title),1)):ps("",!0)]),_:1})])]),"header-extra":Ge(()=>[He(I,{align:"center"},{default:Ge(()=>[He(g,{type:"success",title:Ye(e)("save"),loading:Ye(V),disabled:Ye(P),onClick:o[0]||(o[0]=ke=>W())},{icon:Ge(()=>[He(E,null,{default:Ge(()=>[He(M,{icon:"carbon:save"})]),_:1})]),default:Ge(()=>[ya(" "+xl(Ye(e)("save")),1)]),_:1},8,["title","loading","disabled"]),He(g,{type:"error",title:Ye(e)("close"),disabled:Ye(V),onClick:o[1]||(o[1]=ke=>c())},{icon:Ge(()=>[He(E,null,{default:Ge(()=>[He(M,{icon:"carbon:close"})]),_:1})]),default:Ge(()=>[ya(" "+xl(Ye(e)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ge(()=>[$n("section",{style:ir(`min-height: ${Ye(b)?.windowHeight-Ye(b)?.headerHeight-5}px`),class:Sf(`w-full h-full ${Ye(s)("bg-slate-200","bg-zinc-800")}`)},[He(fe,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Ge(()=>[He(te,{class:"ml-4 mt-2"},{default:Ge(()=>[He(pe,{embedded:"",bordered:"",segmented:""},{header:Ge(()=>[ya(xl(Ye(e)("singletons"))+"Â  ",1),Ye(u).index?.length?(Ql(),Eo("span",Ef," ("+xl(Ye(u).index?.length)+") ",1)):ps("",!0)]),"header-extra":Ge(()=>[He(I,null,{default:Ge(()=>[He(g,{size:"small",type:"primary",secondary:Ye(X),onClick:o[2]||(o[2]=ke=>O.value=!Ye(O))},{default:Ge(()=>[He(E,null,{default:Ge(()=>[Ye(O)?(Ql(),an(M,{key:0,icon:"carbon:collapse-categories"})):(Ql(),an(M,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),He(g,{size:"small",type:"primary",secondary:Ye(X),onClick:o[3]||(o[3]=ke=>S())},{default:Ge(()=>[He(E,{class:"mr-1"},{default:Ge(()=>[He(M,{icon:"carbon:add-alt"})]),_:1}),ya(" "+xl(Ye(e)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),He(R,{style:ir(`max-height: ${Ye(b)?.windowHeight-Ye(b)?.headerHeight-100}px`)},{default:Ge(()=>[He(li,{modelValue:Ye(u).index,"onUpdate:modelValue":o[4]||(o[4]=ke=>Ye(u).index=ke),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]),_:1}),He(te,{class:"mr-4 mt-2"},{default:Ge(()=>[He(pe,{embedded:"",bordered:"",segmented:""},{header:Ge(()=>[ya(xl(Ye(e)("collections"))+"Â  ",1),L()>0?(Ql(),Eo("span",Uf," ("+xl(L())+") ",1)):ps("",!0)]),"header-extra":Ge(()=>[He(I,null,{default:Ge(()=>[He(g,{size:"small",type:"primary",secondary:Ye(X),onClick:o[5]||(o[5]=ke=>Z.value=!Ye(Z))},{default:Ge(()=>[He(E,null,{default:Ge(()=>[Ye(Z)?(Ql(),an(M,{key:0,icon:"carbon:collapse-categories"})):(Ql(),an(M,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),He(g,{size:"small",type:"primary",secondary:Ye(X),onClick:o[6]||(o[6]=ke=>G())},{default:Ge(()=>[He(E,{class:"mr-1"},{default:Ge(()=>[He(M,{icon:"carbon:add-alt"})]),_:1}),ya(" "+xl(Ye(e)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),He(R,{style:ir(`max-height: ${Ye(b)?.windowHeight-Ye(b)?.headerHeight-100}px`)},{default:Ge(()=>[(Ql(!0),Eo(ai,null,zf(Ye(u)||{},(ke,F,h)=>(Ql(),Eo(ai,{key:h},[F!="index"?(Ql(),an(pe,{key:0,size:"small",class:"my-2",embedded:""},{default:Ge(()=>[He(zt,{"expanded-names":ee(`c-${h}`).value,"onUpdate:expandedNames":Ce=>ee(`c-${h}`).value=Ce,"display-directive":"show","default-expanded-names":["1"]},{default:Ge(()=>[He(ce,{name:"1"},{header:Ge(()=>[$n("div",Af,[He(I,null,{default:Ge(()=>[He(v,{size:"small",type:"success"},{default:Ge(()=>[ya(xl(f(F)+1),1)]),_:2},1024),$n("span",Df,xl(Ye(n)(ke.title)),1)]),_:2},1024),He(g,{size:"small",type:"error",secondary:Ye(X),onClick:Ce=>C(F)},{default:Ge(()=>[He(E,{class:"mr-1"},{default:Ge(()=>[He(M,{icon:"carbon:trash-can"})]),_:1}),ya(" "+xl(Ye(e)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:Ge(()=>[He(fe,{span:24,"x-gap":"6"},{default:Ge(()=>[He(te,{span:6},{default:Ge(()=>[$n("span",Lf,xl(Ye(e)("fieldKey")),1),He(re,{value:ke.key,placeholder:Ye(e)("collectionKey"),class:"w-full",size:"small","onUpdate:value":Ce=>ke.key=Ye(K)(Ce)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),He(te,{span:11},{default:Ge(()=>[He(it,{modelValue:ke.title,"onUpdate:modelValue":Ce=>ke.title=Ce,placeholder:Ye(e)("title"),class:"w-full",size:"small",sync:""},{label:Ge(()=>[$n("span",Bf,xl(Ye(e)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),He(te,{span:7},{default:Ge(()=>[$n("span",Pf,xl(Ye(e)("actions")),1),He(g,{block:"",size:"small",type:"primary",disabled:!j(ke),secondary:Ye(X),class:"w-full",onClick:Ce=>y(F)},{default:Ge(()=>[He(E,{class:"mr-1"},{default:Ge(()=>[He(M,{icon:"carbon:add-alt"})]),_:1}),ya(" "+xl(Ye(e)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),He(Oe,{class:"!my-4.75"}),j(ke)?(Ql(),an(li,{key:0,modelValue:Ye(u)[F].items,"onUpdate:modelValue":Ce=>Ye(u)[F].items=Ce,"parent-item-index":h,"collection-key":F,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(Ql(),an(ve,{key:1,bordered:"",type:"info"},{default:Ge(()=>[ya(xl(Ye(e)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):ps("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{defineComponent:Ff}=await ge("vue"),{unref:at,renderList:ni,Fragment:fs,openBlock:za,createElementBlock:ms,resolveComponent:Cy,createBlock:Xn,createCommentVNode:Of,withCtx:ol,createVNode:_l,createElementVNode:Cn,toDisplayString:sn,createTextVNode:Uo,withModifiers:oi,normalizeClass:si,isRef:dr}=await ge("vue"),jf={class:"flex items-center"},qf={class:"text-base"},Kf={class:"mt-2"},Yf={class:"mt-2 text-xs"},{ref:Pa}=await ge("vue"),Gf=Ff({__name:"index",setup(se){const{t:e}=Dt(),{request:n}=Zt(),{tr:s,pickByTheme:K,displayFormErrors:X,isInDevMode:p}=Pt(),{sections:A}=It(Bt()),{loadSections:$}=Bt(),{isLightTheme:Q}=It(Wl()),U=hl(),B=gl(),V=Pa(!1);$();const b=Pa(12),u=Pa(1),H=j=>{b.value=j},N={name:"",title:"",content:"",slug:""},O=Pa(!1),Z=Pa(null),a=Pa(N),ee={title:[{required:!0,message:e("fillRequired")}]},P=Pa(null),S=j=>{P.value=be.cloneDeep(j),a.value=be.cloneDeep(j||N),O.value=!0},Y=async()=>(Z.value?.validate(async j=>{if(!j){U.start(),V.value=!0;const L={title:a.value.title};P.value||(L.name=be.startCase(be.camelCase(s(a.value.title))).replace(/\s+/g,""));const ae=await n({method:P.value?"put":"post",url:P.value?`/sections/${P.value.slug}`:"/sections",data:L});if(ae.failure&&ae.error)switch(ae.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(ae.error?.response?.data?.data);break;default:B.error(e("anErrorOccurred"))}else B.success(e("success")),$(),O.value=!1;V.value=!1,U.finish()}}),!1),G=Pa(null),C=Pa(!1),y=async j=>{V.value=!0,U.start();const L=await n({url:`/sections/${G.value?.slug}`,method:"put",data:{dataStructure:j}});L.success&&L.result?(B.success(e("success")),$(),i(L.result.data)):B.error(e("anErrorOccurred")),V.value=!1,U.finish()},i=j=>{G.value=j,C.value=!0};return(j,L)=>{const ae=me,f=oe,m=Se,W=Vl,c=Ma,w=Ga,q=co,r=io,o=fl,z=uo,M=fa,E=na,g=jl,I=Ol,pe=Cl;return za(),ms(fs,null,[at(A)&&at(A).length?(za(),ms(fs,{key:0},[(za(!0),ms(fs,null,ni(at(A).slice((at(u)-1)*at(b),at(u)*at(b)),R=>(za(),Xn(o,{key:R.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:ol(()=>[_l(r,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":ol(({collapsed:te})=>[_l(f,null,{default:ol(()=>[te?(za(),Xn(ae,{key:0,icon:"fa-solid:chevron-left"})):(za(),Xn(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:ol(()=>L[5]||(L[5]=[Cn("span",null,null,-1)])),default:ol(()=>[_l(q,{name:"1"},{header:ol(()=>[Cn("div",jf,[_l(W,null,{default:ol(()=>[at(p)?(za(),Xn(m,{key:0,size:"small",type:"primary",secondary:at(Q),onClick:oi(te=>i(R),["stop"])},{default:ol(()=>[_l(f,{class:"mr-1"},{default:ol(()=>[_l(ae,{icon:"carbon:data-1"})]),_:1}),Uo(" "+sn(at(e)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):Of("",!0),_l(m,{size:"small",type:"primary",secondary:at(Q),onClick:oi(te=>S(R),["stop"])},{default:ol(()=>[_l(f,null,{default:ol(()=>[_l(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),_l(c,{vertical:"",class:si(at(K)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Cn("span",qf,sn(at(s)(R.title)),1)])]),default:ol(()=>[Cn("div",null,sn(at(e)("sectionUsedInXPages",[R.pagesCount])),1),Cn("section",Kf,[(za(!0),ms(fs,null,ni(R.pages,te=>(za(),Xn(w,{key:te.id,size:"small",class:"mr-1",type:"success"},{default:ol(()=>[Uo(sn(at(s)(te.title)),1)]),_:2},1024))),128))]),Cn("div",Yf,[Uo(sn(at(e)("dataRetrievalSlug"))+": ",1),Cn("b",null,sn(R.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),_l(z,{page:at(u),"onUpdate:page":L[0]||(L[0]=R=>dr(u)?u.value=R:null),class:"mt-5 justify-end","show-size-picker":"","page-size":at(b),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(at(A).length/at(b)),"onUpdate:pageSize":H},{prefix:ol(()=>[Uo(sn(`${at(A).length} ${at(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(za(),Xn(o,{key:1,size:"large",class:si(`mb-2 !border-dashed !border-2 ${at(K)("!border-zinc-300","!border-zinc-600")}`)},{default:ol(()=>[_l(M,{description:at(e)("noSectionAvailable")},{icon:ol(()=>[_l(f,null,{default:ol(()=>[_l(ae,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),_l(pe,{show:at(O),"onUpdate:show":L[2]||(L[2]=R=>dr(O)?O.value=R:null),loading:at(V),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:at(P)?at(e)("editSection"):at(e)("addSection"),"positive-text":at(e)("validate"),"negative-text":at(e)("cancel"),onPositiveClick:Y,onNegativeClick:L[3]||(L[3]=R=>O.value=!1)},{default:ol(()=>[_l(I,{ref_key:"formRef",ref:Z,model:at(a),rules:ee,"show-require-mark":!1,size:"medium"},{default:ol(()=>[_l(g,{"show-label":!1,path:"title",class:"mt-5"},{default:ol(()=>[_l(E,{modelValue:at(a).title,"onUpdate:modelValue":L[1]||(L[1]=R=>at(a).title=R),placeholder:at(e)("title"),class:"w-full",sync:""},{label:ol(()=>[Uo(sn(at(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),_l(Ji,{show:at(C),"onUpdate:show":L[4]||(L[4]=R=>dr(C)?C.value=R:null),title:at(s)(at(G)?.title),"raw-data-structure":at(G)?.dataStructure,"update-data-structure":y},null,8,["show","title","raw-data-structure"])],64)}}}),{defineComponent:Hf}=await ge("vue"),{unref:qe,createVNode:ht,withCtx:bt,toDisplayString:rn,createTextVNode:Vn,resolveComponent:Vy,createElementVNode:ri,openBlock:pr,createBlock:ii,createCommentVNode:Wf,isRef:ci,Fragment:Jf,createElementBlock:Xf}=await ge("vue"),Zf={class:"flex items-center justify-center"},{ref:ua,h:Rl,computed:Qf,onBeforeUnmount:em}=await ge("vue"),tm=Hf({__name:"Email",setup(se){const e=hl(),n=gl(),s=El(),{displayFormErrors:K}=Pt(),{request:X}=Zt(),{t:p,locale:A}=Dt(),$=ua(!1),Q=ua([]),U=ua(""),B=ua(),V={pageSize:12,prefix:({itemCount:r})=>Rl("div",{class:"font-bold"},{default:()=>`${p("total")}: ${r}`})},b=[{type:"selection"},{title:p("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return Rl("div",{},{default:()=>r.email})}},{title:p("updateAt"),key:"updatedAt",width:125,render(r){return Rl("div",{},{default:()=>Ka(r.updatedAt,{locale:A.value,outPattern:"DD MMMM YYYY"})})}},{title:p("createdAt"),key:"createdAt",width:125,render(r){return Rl("div",{},{default:()=>Ka(r.createdAt,{locale:A.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Rl(Kt,{ref:B,placeholder:p("search"),value:U.value,onInput:r=>{U.value=r}},{suffix:()=>Rl(oe,{},{default:()=>Rl(me,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return Rl("div",{class:"flex justify-end items-center w-full"},[Rl(Se,{size:"small",type:"warning",onClick:()=>{S(r)},renderIcon:()=>Rl(oe,null,{default:()=>Rl(me,{icon:"carbon:edit"})})}),Rl("div",{class:"w-2"}),Rl(Se,{size:"small",type:"error",onClick:()=>{s.warning({title:p("confirm"),content:p("confirmDeleteEmailAddress"),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{(await X({method:"delete",url:`/newsletter/emails/${r.id}`})).success?(n.success(p("success")),H()):n.error(p("anErrorOccurred"))}})},renderIcon:()=>Rl(oe,null,{default:()=>Rl(me,{icon:"carbon:trash-can"})})})])},fixed:"right"}],u=Qf(()=>{if(!U.value)return Q.value;const r=Q.value.filter(o=>o.email.toLowerCase().includes(U.value.toLowerCase()));return B.value&&B.value.focus(),r}),H=async()=>{$.value=!0;const r=await X({url:"/newsletter/emails"});r.success&&r.result&&(Q.value=r.result.data),$.value=!1};H();const N=ua(!1),O=ua(!1),Z=ua(null),a=ua(null),ee=ua({email:""}),P={email:[{required:!0,message:p("fillRequired")},{trigger:["input"],validator(r,o){return o&&!no.isEmail(o)?new Error(p("invalidEmail")):!0}}]},S=r=>{Z.value=be.cloneDeep(r),r?ee.value=be.cloneDeep(r):ee.value={email:""},O.value=!0},Y=async()=>(a.value?.validate(async r=>{if(!r)if(Z.value)if(Z.value.email!==ee.value.email&&Q.value.findIndex(o=>o.email==ee.value.email)>-1)n.error(p("sameEmailAddressMessage"));else{e.start(),N.value=!0;const o={email:ee.value.email},z=await X({method:"put",url:`/newsletter/emails/${Z.value.id}`,data:o});z.success&&z.result.data&&(n.success(p("success")),H()),N.value=!1,e.finish(),O.value=!1}else if(Q.value.findIndex(o=>o.email==ee.value.email)>-1)n.error(p("sameEmailAddressMessage"));else{e.start(),N.value=!0;const o={email:ee.value.email},z=await X({method:"post",url:"/newsletter/emails",data:o});if(z.failure&&z.error)switch(z.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:K(z.error?.response?.data?.data);break;default:n.error(p("anErrorOccurred"))}else n.success(p("success")),H();N.value=!1,e.finish(),O.value=!1}}),!1);let G=null;const C=()=>{G&&(G.destroy(),G=null)};em(C);const y=(r,o)=>o.map(z=>r.map(M=>z[M])),i=()=>{G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}),Cs(()=>import("./export2excel-wUP16iDm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(r=>{var o=["no","email","createdAt","updatedAt"];const z=be.sortBy(Q.value.map((E,g)=>({no:g+1,...E})),"email"),M=y(o,z);try{r.export_json_to_excel({header:o,data:M,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),C()}catch{C(),n.error(p("anErrorOccurred"))}})},j=()=>{G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}),Cs(()=>import("./export2excel-wUP16iDm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(r=>{var o=["email"];const z=y(o,[{email:"adresse@email.com"}]);try{r.export_json_to_excel({header:o,data:z,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),C()}catch{C(),n.error(p("anErrorOccurred"))}})},L=ua(!1),ae=async({results:r})=>{N.value=!0,e.start(),G||(G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<r.length;o++)r[o].email&&Q.value.findIndex(z=>z.email==r[o].email)==-1&&(G&&(G.content=`${p("pleaseBePatient")}: ${o} ${p("task_s")} / ${r.length}`),await X({method:"post",url:"/newsletter/emails",data:{email:r[o].email}}));await H(),C(),e.finish(),N.value=!1,L.value=!1},f=ua(Nl()),m=ua([]),W=r=>r.id,c=r=>{m.value=r},w=()=>{m.value=[],f.value=Nl()},q=async()=>(m.value.length?s.warning({title:p("confirm"),content:p("deleteSelectionWarningMessage",[m.value.length]),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{N.value=!0,e.start();for(let r=0;r<m.value.length;r++)(await X({url:`/newsletter/emails/${m.value[r]}`,method:"delete"})).success;H(),e.finish(),N.value=!1,n.success(p("success")),w()}}):n.warning(p("noItemSelected")),!1);return(r,o)=>{const z=ji,M=Vl,E=ba,g=fl,I=Ya,pe=Ms,R=Ts,te=jl,v=Ol,re=Cl,it=Gi;return pr(),Xf(Jf,null,[ht(E,{to:"#alt-action"},{default:bt(()=>[ht(M,null,{default:bt(()=>[ht(z,{onPositiveClick:o[0]||(o[0]=fe=>i())},{trigger:bt(()=>[ht(qe(Se),{type:"success"},{icon:bt(()=>[ht(qe(oe),{size:"18"},{default:bt(()=>[ht(qe(me),{icon:"carbon:upload"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("export")),1)]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("exportDataInExcelFile")),1)]),_:1}),ht(qe(Se),{type:"info",onClick:o[1]||(o[1]=fe=>L.value=!0)},{icon:bt(()=>[ht(qe(oe),{size:"18"},{default:bt(()=>[ht(qe(me),{icon:"carbon:download"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("import")),1)]),_:1}),ht(qe(Se),{type:"primary",onClick:o[2]||(o[2]=fe=>S(null))},{icon:bt(()=>[ht(qe(oe),{size:"18"},{default:bt(()=>[ht(qe(me),{icon:"carbon:add-alt"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),ht(I,{name:"slide-fade",appear:""},{default:bt(()=>[qe(m).length?(pr(),ii(g,{key:0,class:"my-2",size:"small",embedded:""},{default:bt(()=>[ht(M,{align:"center",justify:"space-between"},{default:bt(()=>[ri("span",null,rn(qe(p)("nbItemsSelected",[qe(m).length])),1),ht(M,{align:"center",justify:"space-between"},{default:bt(()=>[ht(qe(Se),{type:"error",size:"small",onClick:q},{icon:bt(()=>[ht(qe(oe),null,{default:bt(()=>[ht(qe(me),{icon:"carbon:trash-can"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("delete")),1)]),_:1}),ht(qe(Se),{type:"warning",size:"small",onClick:w},{icon:bt(()=>[ht(qe(oe),null,{default:bt(()=>[ht(qe(me),{icon:"carbon:close"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Wf("",!0)]),_:1}),ht(R,null,{default:bt(()=>[(pr(),ii(pe,{key:qe(f),columns:b,data:qe(u),pagination:V,loading:qe($),"single-line":!1,"scroll-x":800,"row-key":W,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"]))]),_:1}),ht(re,{show:qe(O),"onUpdate:show":o[4]||(o[4]=fe=>ci(O)?O.value=fe:null),loading:qe(N),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:qe(Z)?qe(p)("editEmailAddress"):qe(p)("addEmailAddress"),"positive-text":qe(p)("validate"),"negative-text":qe(p)("cancel"),onPositiveClick:Y,onNegativeClick:o[5]||(o[5]=fe=>O.value=!1)},{default:bt(()=>[ht(v,{ref_key:"formRef",ref:a,class:"mt-5",model:qe(ee),rules:P,"show-require-mark":!1,size:"medium"},{default:bt(()=>[ht(te,{label:qe(p)("emailAddress"),path:"email"},{default:bt(()=>[ht(qe(Kt),{value:qe(ee).email,"onUpdate:value":o[3]||(o[3]=fe=>qe(ee).email=fe),placeholder:qe(p)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ht(re,{show:qe(L),"onUpdate:show":o[7]||(o[7]=fe=>ci(L)?L.value=fe:null),loading:qe(N),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:qe(p)("import")},{default:bt(()=>[ht(it,{class:"my-5","on-success":ae}),ri("div",Zf,[ht(qe(Se),{type:"info",size:"small",onClick:o[6]||(o[6]=fe=>j())},{icon:bt(()=>[ht(qe(oe),null,{default:bt(()=>[ht(qe(me),{icon:"carbon:download"})]),_:1})]),default:bt(()=>[Vn(" "+rn(qe(p)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),{defineComponent:lm}=await ge("vue"),{unref:We,createVNode:kt,withCtx:wt,toDisplayString:cn,createTextVNode:In,resolveComponent:Iy,createElementVNode:ui,openBlock:fr,createBlock:di,createCommentVNode:am,isRef:pi,Fragment:nm,createElementBlock:om}=await ge("vue"),sm={class:"flex items-center justify-center"},{ref:da,h:Fl,computed:rm,onBeforeUnmount:im}=await ge("vue"),cm=lm({__name:"Phone",setup(se){const e=hl(),n=gl(),s=El(),{displayFormErrors:K}=Pt(),{request:X}=Zt(),{t:p,locale:A}=Dt(),$=da(!1),Q=da([]),U=da(""),B=da(),V={pageSize:12,prefix:({itemCount:r})=>Fl("div",{class:"font-bold"},{default:()=>`${p("total")}: ${r}`})},b=[{type:"selection"},{title:p("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return Fl("div",{},{default:()=>r.phone})}},{title:p("updateAt"),key:"updatedAt",width:125,render(r){return Fl("div",{},{default:()=>Ka(r.updatedAt,{locale:A.value,outPattern:"DD MMMM YYYY"})})}},{title:p("createdAt"),key:"createdAt",width:125,render(r){return Fl("div",{},{default:()=>Ka(r.createdAt,{locale:A.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Fl(Kt,{ref:B,placeholder:p("search"),value:U.value,onInput:r=>{U.value=r}},{suffix:()=>Fl(oe,{},{default:()=>Fl(me,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return Fl("div",{class:"flex justify-end items-center w-full"},[Fl(Se,{size:"small",type:"warning",onClick:()=>{S(r)},renderIcon:()=>Fl(oe,null,{default:()=>Fl(me,{icon:"carbon:edit"})})}),Fl("div",{class:"w-2"}),Fl(Se,{size:"small",type:"error",onClick:()=>{s.warning({title:p("confirm"),content:p("confirmDeletePhoneNumber"),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{(await X({method:"delete",url:`/newsletter/phones/${r.id}`})).success?(n.success(p("success")),H()):n.error(p("anErrorOccurred"))}})},renderIcon:()=>Fl(oe,null,{default:()=>Fl(me,{icon:"carbon:trash-can"})})})])},fixed:"right"}],u=rm(()=>{if(!U.value)return Q.value;const r=Q.value.filter(o=>o.phone.toLowerCase().includes(U.value.toLowerCase()));return B.value&&B.value.focus(),r}),H=async()=>{$.value=!0;const r=await X({url:"/newsletter/phones"});r.success&&r.result&&(Q.value=r.result.data),$.value=!1};H();const N=da(!1),O=da(!1),Z=da(null),a=da(null),ee=da({phone:""}),P={phone:[{required:!0,message:p("fillRequired")},{trigger:["input"],validator(r,o){return o&&!vc(o)?new Error(p("invalidNumber")):!0}}]},S=r=>{Z.value=be.cloneDeep(r),r?ee.value=be.cloneDeep(r):ee.value={phone:""},O.value=!0},Y=async()=>(a.value?.validate(async r=>{if(!r)if(Z.value)if(Z.value.phone!==ee.value.phone.replace(/\s+/g,"")&&Q.value.findIndex(o=>o.phone==ee.value.phone.replace(/\s+/g,""))>-1)n.error(p("samePhoneNumberMessage"));else{e.start(),N.value=!0;const o={phone:ee.value.phone.replace(/\s+/g,"")},z=await X({method:"put",url:`/newsletter/phones/${Z.value.id}`,data:o});z.success&&z.result.data&&(n.success(p("success")),H()),N.value=!1,e.finish(),O.value=!1}else if(Q.value.findIndex(o=>o.phone==ee.value.phone.replace(/\s+/g,""))>-1)n.error(p("samePhoneNumberMessage"));else{e.start(),N.value=!0;const o={phone:ee.value.phone.replace(/\s+/g,"")},z=await X({method:"post",url:"/newsletter/phones",data:o});if(z.failure&&z.error)switch(z.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:K(z.error?.response?.data?.data);break;default:n.error(p("anErrorOccurred"))}else n.success(p("success")),H();N.value=!1,e.finish(),O.value=!1}}),!1);let G=null;const C=()=>{G&&(G.destroy(),G=null)};im(C);const y=(r,o)=>o.map(z=>r.map(M=>z[M])),i=()=>{G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}),Cs(()=>import("./export2excel-wUP16iDm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(r=>{var o=["no","phone","createdAt","updatedAt"];const z=be.sortBy(Q.value.map((E,g)=>({no:g+1,...E})),"phone"),M=y(o,z);try{r.export_json_to_excel({header:o,data:M,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),C()}catch{C(),n.error(p("anErrorOccurred"))}})},j=()=>{G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}),Cs(()=>import("./export2excel-wUP16iDm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(r=>{var o=["phone"];const z=y(o,[{phone:"+22899999999"}]);try{r.export_json_to_excel({header:o,data:z,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),C()}catch{C(),n.error(p("anErrorOccurred"))}})},L=da(!1),ae=async({results:r})=>{N.value=!0,e.start(),G||(G=n.info(p("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<r.length;o++)r[o].phone&&Q.value.findIndex(z=>z.phone.replace(/\s+/g,"")==r[o].phone.replace(/\s+/g,""))==-1&&(G&&(G.content=`${p("pleaseBePatient")}: ${o} ${p("task_s")} / ${r.length}`),await X({method:"post",url:"/newsletter/phones",data:{phone:r[o].phone.replace(/\s+/g,"")}}));await H(),C(),e.finish(),N.value=!1,L.value=!1},f=da(Nl()),m=da([]),W=r=>r.id,c=r=>{m.value=r},w=()=>{m.value=[],f.value=Nl()},q=async()=>(m.value.length?s.warning({title:p("confirm"),content:p("deleteSelectionWarningMessage",[m.value.length]),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{N.value=!0,e.start();for(let r=0;r<m.value.length;r++)(await X({url:`/newsletter/phones/${m.value[r]}`,method:"delete"})).success;H(),e.finish(),N.value=!1,n.success(p("success")),w()}}):n.warning(p("noItemSelected")),!1);return(r,o)=>{const z=ji,M=Vl,E=ba,g=fl,I=Ya,pe=Ms,R=Ts,te=_c,v=jl,re=Ol,it=Cl,fe=Gi;return fr(),om(nm,null,[kt(E,{to:"#alt-action"},{default:wt(()=>[kt(M,null,{default:wt(()=>[kt(z,{onPositiveClick:o[0]||(o[0]=Oe=>i())},{trigger:wt(()=>[kt(We(Se),{type:"success"},{icon:wt(()=>[kt(We(oe),{size:"18"},{default:wt(()=>[kt(We(me),{icon:"carbon:upload"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("export")),1)]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("exportDataInExcelFile")),1)]),_:1}),kt(We(Se),{type:"info",onClick:o[1]||(o[1]=Oe=>L.value=!0)},{icon:wt(()=>[kt(We(oe),{size:"18"},{default:wt(()=>[kt(We(me),{icon:"carbon:download"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("import")),1)]),_:1}),kt(We(Se),{type:"primary",onClick:o[2]||(o[2]=Oe=>S(null))},{icon:wt(()=>[kt(We(oe),{size:"18"},{default:wt(()=>[kt(We(me),{icon:"carbon:add-alt"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),kt(I,{name:"slide-fade",appear:""},{default:wt(()=>[We(m).length?(fr(),di(g,{key:0,class:"my-2",size:"small",embedded:""},{default:wt(()=>[kt(M,{align:"center",justify:"space-between"},{default:wt(()=>[ui("span",null,cn(We(p)("nbItemsSelected",[We(m).length])),1),kt(M,{align:"center",justify:"space-between"},{default:wt(()=>[kt(We(Se),{type:"error",size:"small",onClick:q},{icon:wt(()=>[kt(We(oe),null,{default:wt(()=>[kt(We(me),{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("delete")),1)]),_:1}),kt(We(Se),{type:"warning",size:"small",onClick:w},{icon:wt(()=>[kt(We(oe),null,{default:wt(()=>[kt(We(me),{icon:"carbon:close"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):am("",!0)]),_:1}),kt(R,null,{default:wt(()=>[(fr(),di(pe,{key:We(f),columns:b,data:We(u),pagination:V,loading:We($),"single-line":!1,"scroll-x":800,"row-key":W,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"]))]),_:1}),kt(it,{show:We(O),"onUpdate:show":o[4]||(o[4]=Oe=>pi(O)?O.value=Oe:null),loading:We(N),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:We(Z)?We(p)("editPhoneNumber"):We(p)("addPhoneNumber"),"positive-text":We(p)("validate"),"negative-text":We(p)("cancel"),onPositiveClick:Y,onNegativeClick:o[5]||(o[5]=Oe=>O.value=!1)},{default:wt(()=>[kt(re,{ref_key:"formRef",ref:a,class:"mt-5",model:We(ee),rules:P,"show-require-mark":!1,size:"medium"},{default:wt(()=>[kt(v,{label:We(p)("phone"),path:"phone"},{default:wt(()=>[kt(te,{modelValue:We(ee).phone,"onUpdate:modelValue":o[3]||(o[3]=Oe=>We(ee).phone=Oe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),kt(it,{show:We(L),"onUpdate:show":o[7]||(o[7]=Oe=>pi(L)?L.value=Oe:null),loading:We(N),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:We(p)("import")},{default:wt(()=>[kt(fe,{class:"my-5","on-success":ae}),ui("div",sm,[kt(We(Se),{type:"info",size:"small",onClick:o[6]||(o[6]=Oe=>j())},{icon:wt(()=>[kt(We(oe),null,{default:wt(()=>[kt(We(me),{icon:"carbon:download"})]),_:1})]),default:wt(()=>[In(" "+cn(We(p)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),um="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:fi,mergeModels:dm,defineComponent:pm}=await ge("vue"),{unref:_t,toDisplayString:Zn,createElementVNode:Ao,createTextVNode:_s,resolveComponent:Ty,withCtx:Nt,createVNode:tl,renderList:mr,Fragment:Do,openBlock:ga,createElementBlock:Lo,createBlock:Qn,createCommentVNode:mi,normalizeStyle:_r,normalizeClass:fm}=await ge("vue"),mm={class:"text-base"},_m={class:"text-base"},{ref:Tn,inject:vm,computed:ym,watch:gm,reactive:vs}=await ge("vue"),hm=pm({__name:"DataForm",props:dm({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(se){const e=se,n=fi(se,"show"),s=fi(se,"data"),K=hl(),X=gl(),{t:p}=Dt(),{tr:A,pickByTheme:$,editKeysToCamelCase:Q}=Pt(),U=Tn(null),B=Tn(!1),V=vm("currentEditItem"),b=ym(()=>be.isEqual(s.value,V?.value)&&be.isEqual(H.value,O.value)),u=()=>{n.value=!1,B.value=!1},H=Tn({}),N=Tn(Nl()),O=Tn({}),Z=Tn(),a=Tn();gm(()=>n.value,P=>{P&&(Ei(s.value.contentModelData)?H.value=vs(s.value.contentModelData):H.value=vs({}),be.forIn(Q(e.contentModel?.dataStructure??{}),(S,Y)=>{(!H.value[Y]||Array.isArray(H.value[Y])&&H.value[Y].length==0)&&(Y==="index"?H.value[Y]=vs({}):H.value[Y]=vs([]))}),O.value=be.cloneDeep(H.value),N.value=Nl())},{immediate:!0});const ee=async()=>{B.value=!0,K.start();const P=Z.value&&await Z.value(),S=a.value&&await a.value();(!Z.value||P)&&(!a.value||S)?await e.submitData(H.value):X.error(p("mandatoryFieldsNotFilledIn")),K.finish(),B.value=!1};return(P,S)=>{const Y=Oi,G=Ss,C=zs,y=me,i=oe,j=Se,L=Vl,ae=fl,f=ka,m=Ha,W=oa,c=Ni;return ga(),Qn(c,{modelValue:n.value,"onUpdate:modelValue":S[3]||(S[3]=w=>n.value=w),"close-on-esc":!1,closable:!1,onOnSizeChange:S[4]||(S[4]=w=>{U.value=w})},{header:Nt(()=>[Ao("div",mm,[tl(Y,{depth:"1"},{default:Nt(()=>[_s(Zn(_t(A)(e.contentModel?.title))+" ",1),Ao("span",null," Â -Â "+Zn(_t(V)?_t(p)("editItem"):_t(p)("addItem")),1)]),_:1})])]),"header-extra":Nt(()=>[tl(L,{align:"center"},{default:Nt(()=>[Ao("span",_m,Zn(_t(p)("status"))+":",1),tl(C,{value:s.value.isActive,"onUpdate:value":S[0]||(S[0]=w=>s.value.isActive=w),name:"isActive",class:"w-full"},{default:Nt(()=>[tl(G,{value:!1,label:_t(p)("hidden"),class:"w-[50%]"},null,8,["label"]),tl(G,{value:!0,label:_t(p)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),S[5]||(S[5]=Ao("div",{class:"w-4"},null,-1)),tl(j,{type:"success",title:_t(p)("save"),loading:_t(B),disabled:_t(b),onClick:S[1]||(S[1]=w=>ee())},{icon:Nt(()=>[tl(i,null,{default:Nt(()=>[tl(y,{icon:"carbon:save"})]),_:1})]),default:Nt(()=>[_s(" "+Zn(_t(p)("save")),1)]),_:1},8,["title","loading","disabled"]),tl(j,{type:"error",title:_t(p)("close"),disabled:_t(B),onClick:S[2]||(S[2]=w=>u())},{icon:Nt(()=>[tl(i,null,{default:Nt(()=>[tl(y,{icon:"carbon:close"})]),_:1})]),default:Nt(()=>[_s(" "+Zn(_t(p)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Nt(()=>[Ao("section",{style:_r(`min-height: ${_t(U)?.windowHeight-_t(U)?.headerHeight-5}px`),class:fm(`w-full h-full ${_t($)("bg-slate-200","bg-zinc-800")}`)},[tl(W,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Nt(()=>[tl(m,{class:"ml-4 mt-2"},{default:Nt(()=>[tl(f,{style:_r(`height: ${_t(U)?.windowHeight-_t(U)?.headerHeight-50}px`)},{default:Nt(()=>[(ga(!0),Lo(Do,null,mr(_t(Q)(P.contentModel?.dataStructure),(w,q)=>(ga(),Lo(Do,{key:q},[String(q)==="index"?(ga(),Qn(ae,{key:0,size:"small",class:"mb-2"},{default:Nt(()=>[(ga(),Qn(Is,{key:`${_t(N)}-${q}-form-1`,modelValue:_t(H)[q],"onUpdate:modelValue":r=>_t(H)[q]=r,items:w,onUpdate:(r,o)=>{Z.value=o}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):mi("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),tl(m,{class:"mr-4 mt-2"},{default:Nt(()=>[tl(f,{style:_r(`height: ${_t(U)?.windowHeight-_t(U)?.headerHeight-50}px`)},{default:Nt(()=>[(ga(!0),Lo(Do,null,mr(_t(Q)(P.contentModel?.dataStructure),(w,q)=>(ga(),Lo(Do,{key:q},[String(q)!=="index"?(ga(),Qn(ae,{key:0,title:_t(A)(w.title),size:"small",class:"mb-2"},{"header-extra":Nt(()=>[tl(j,{quaternary:"",size:"small",onClick:()=>_t(H)[q].push({})},{icon:Nt(()=>[tl(i,null,{default:Nt(()=>[tl(y,{icon:"carbon:add-alt"})]),_:1})]),default:Nt(()=>[_s(" "+Zn(_t(p)("add")),1)]),_:2},1032,["onClick"])]),default:Nt(()=>[(ga(!0),Lo(Do,null,mr(_t(H)[q],(r,o)=>(ga(),Qn(ae,{key:o,title:String(o+1),size:"small",class:"mb-2"},{"header-extra":Nt(()=>[tl(j,{type:"error",size:"small",onClick:()=>_t(H)[q].splice(o,1)},{icon:Nt(()=>[tl(i,null,{default:Nt(()=>[tl(y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:Nt(()=>[(ga(),Qn(Is,{key:`${_t(N)}-${q}-${o}-form-2`,modelValue:_t(H)[q][o],"onUpdate:modelValue":z=>_t(H)[q][o]=z,items:w.items,onUpdate:(z,M)=>{a.value=M}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):mi("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:bm,mergeModels:km,defineComponent:wm}=await ge("vue"),{unref:gt,resolveComponent:zy,createVNode:dl,toDisplayString:ys,createTextVNode:_i,withCtx:$l,renderList:xm,Fragment:vi,openBlock:Bo,createElementBlock:yi,createElementVNode:gs,createBlock:vr,normalizeClass:$m,isRef:Cm}=await ge("vue"),Vm={class:"flex items-center justify-between"},Im={class:"flex flex-col"},Tm={class:"text-sm font-bold"},zm={class:"text-xs font-normal"},{ref:zn,inject:Sm,h:gi,computed:hi}=await ge("vue"),Mm=wm({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:km(["update"],["update:show"]),setup(se,{emit:e}){const{t:n}=Dt(),{request:s}=Zt(),{pickByTheme:K,tr:X,displayFormErrors:p,mergeArrays:A}=Pt(),{extractItemTitle:$}=Ko(),{loadContentModels:Q}=Bt(),{contentModels:U}=It(Bt()),{isLightTheme:B}=It(Wl()),V=El(),b=gl(),u=hl(),H=e;Q();const N=bm(se,"show"),O=zn(!1),Z=Sm("currentEditItem"),a=async W=>{V.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{u.start(),(await s({method:"put",url:`/content-model/items/${Z?.value?.id}`,data:{relatedItems:Z?.value?.relatedItems?.filter(w=>w.id!==W.id)?.map(w=>w.id)}})).success?(b.success(n("success")),H("update",Z?.value?.id)):b.error(n("anErrorOccurred")),u.finish()}})},ee=W=>U.value?.find(c=>c.id===W.contentModelId),P=zn(!1),S=zn(null),Y=zn({contentModelId:null,itemId:null}),G={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},C=async()=>(S.value?.validate(async W=>{if(!W){u.start(),O.value=!0;const c=Z?.value?.relatedItems?.map(q=>q.id)||[],w=await s({method:"put",url:`/content-model/items/${Z?.value?.id}`,data:{relatedItems:[...c,Y.value.itemId]}});if(w.failure&&w.error)switch(w.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:p(w.error?.response?.data?.data);break;default:b.error(n("anErrorOccurred"))}else b.success(n("success")),H("update",Z?.value?.id),P.value=!1;O.value=!1,u.finish()}}),!1),y=W=>gi("span",{},{default:()=>X(W.title)}),i=W=>hi(()=>gi("span",{},{default:()=>$(W,ee(W))})),j=zn(!1),L=zn([]),ae=zn([]),f=async(W,c)=>{if(!W.length){ae.value=[];return}j.value=!0;const w=await s({url:`/content-model-items/search/${W}/${c}`});w.success&&w.result&&(ae.value=w.result.data),j.value=!1},m=hi(()=>A(L.value,ae.value,"id").filter(W=>W.id!==Z?.value?.id));return(W,c)=>{const w=me,q=Se,r=Vl,o=oe,z=fl,M=ka,E=fa,g=En,I=Cl,pe=wa,R=jl,te=Ol;return Bo(),yi(vi,null,[dl(I,{show:N.value,"onUpdate:show":c[2]||(c[2]=v=>N.value=v),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:gt(n)("linkContentModelItems")},{"header-extra":$l(()=>[dl(r,{align:"center"},{default:$l(()=>[dl(q,{size:"small",type:"primary",disabled:gt(O),onClick:c[0]||(c[0]=v=>P.value=!0)},{default:$l(()=>[dl(w,{icon:"carbon:add-alt",class:"mr-1"}),_i(" "+ys(gt(n)("add")),1)]),_:1},8,["disabled"]),dl(q,{size:"small",type:"error",disabled:gt(O),onClick:c[1]||(c[1]=v=>N.value=!1)},{default:$l(()=>[dl(w,{icon:"carbon:close",class:"mr-1"}),_i(" "+ys(gt(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:$l(()=>[dl(g,{show:gt(O)},{default:$l(()=>[gt(Z)?.relatedItems?.length?(Bo(),vr(M,{key:0,style:{"max-height":"400px"}},{default:$l(()=>[(Bo(!0),yi(vi,null,xm(gt(Z)?.relatedItems,v=>(Bo(),vr(z,{key:v.id,embedded:"",size:"small",class:"mb-2"},{default:$l(()=>[gs("div",Vm,[gs("div",Im,[gs("span",Tm,ys(gt($)(v,ee(v))),1),gs("span",zm,ys(gt(X)(ee(v)?.title)),1)]),dl(r,null,{default:$l(()=>[dl(q,{size:"small",type:"error",secondary:gt(B),onClick:re=>a(v)},{default:$l(()=>[dl(o,null,{default:$l(()=>[dl(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Bo(),vr(z,{key:1,size:"large",class:$m(`mb-2 !border-dashed !border-2 ${gt(K)("!border-zinc-300","!border-zinc-600")}`)},{default:$l(()=>[dl(E,{description:gt(n)("noLinkAdded")},{icon:$l(()=>[dl(o,null,{default:$l(()=>[dl(w,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),dl(I,{show:gt(P),"onUpdate:show":c[6]||(c[6]=v=>Cm(P)?P.value=v:null),loading:gt(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:gt(n)("addLink"),"positive-text":gt(n)("validate"),"negative-text":gt(n)("cancel"),onPositiveClick:C,onNegativeClick:c[7]||(c[7]=v=>P.value=!1)},{default:$l(()=>[dl(te,{ref_key:"formRef",ref:S,model:gt(Y),rules:G,"show-require-mark":!1,size:"medium",class:"my-5"},{default:$l(()=>[dl(R,{label:gt(n)("contentModel"),path:"contentModelId"},{default:$l(()=>[dl(pe,{value:gt(Y).contentModelId,"onUpdate:value":c[3]||(c[3]=v=>gt(Y).contentModelId=v),options:gt(U),placeholder:gt(n)("contentModel"),"render-label":y,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),dl(R,{label:gt(n)("itemToLink"),path:"itemId"},{default:$l(()=>[dl(pe,{value:gt(Y).itemId,"onUpdate:value":c[4]||(c[4]=v=>gt(Y).itemId=v),options:gt(m)||[],placeholder:gt(n)("itemToLink"),"render-label":v=>i(v).value,loading:gt(j),disabled:!gt(Y).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[5]||(c[5]=v=>f(v,gt(Y).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Nm}=await ge("vue"),{useModel:Em,defineComponent:Um}=await ge("vue"),{unref:pt,toDisplayString:Ra,createTextVNode:un,resolveComponent:Sy,isRef:Po,withCtx:yt,createVNode:ft,createElementVNode:Ro,openBlock:dn,createElementBlock:Fo,createCommentVNode:bi,renderList:Am,Fragment:ki,createBlock:yr}=await ge("vue"),Dm={key:0,class:"w-full flex items-center justify-between gap-4"},Lm={class:"flex items-center gap-3"},Bm={key:0},Pm={class:"flex items-center justify-center h-full"},Rm=["src"],Fm={class:"text-center text-dimgray text-sm"},Om={key:1,class:"flex items-center justify-center"},{ref:ea,computed:wi,provide:jm}=await ge("vue"),qm=Um({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(se){const{t:e}=Dt(),{request:n}=Zt(),{extractItemTitle:s}=Ko(),{tr:K,displayFormErrors:X}=Pt(),p=El(),A=gl(),$=hl(),Q=Em(se,"modelValue"),U=ea(!1),B=ea(!1),V=ea(!1),b=ea(!1),u=ea([]),H=ea(0),N=ea(12),O=ea(1),Z=wi(()=>`/content-model/items?pageSize=${N.value}&contentModelId=${Q.value?.id}`),a=w=>{P(`${Z.value}&page=${w}`)},ee=w=>{N.value=w,P()},P=async(w=null,q=!1)=>{U.value=!0,$.start();const r=await n({url:w??Z.value});r.success&&r.result&&(u.value=r.result.data?.items||[],H.value=r.result.data?.meta?.total||0,O.value=r.result.data?.meta?.currentPage||1),$.finish(),U.value=!1};P(null,!0);const S=ea(null),Y=ea({title:"",contentModelData:"",isActive:!0}),G=w=>{S.value=be.cloneDeep(w),w?Y.value=be.cloneDeep(w):Y.value={title:"",contentModelData:"",isActive:!0},V.value=!0},C=w=>{S.value=be.cloneDeep(w),b.value=!0},y=async w=>{await P();const q=u.value.find(r=>r.id===w);q&&C(q)},i=async w=>{p.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/content-model/items/${w.id}`})).success?(A.success(e("success")),P()):A.error(e("anErrorOccurred"))}})},j=async w=>{$.start(),B.value=!0;const q={title:Y.value.title,contentModelData:w,isActive:Y.value.isActive,contentModelId:Q.value?.id},r=await n({method:S.value?"put":"post",url:S.value?`/content-model/items/${S.value.id}`:"/content-model/items",data:q});if(r.failure&&r.error)switch(r.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(r.error?.response?.data?.data);break;default:A.error(e("anErrorOccurred"))}else A.success(e("success")),P(`${Z.value}&page=${O.value}`),V.value=!1;B.value=!1,$.finish()},L=ea(!1),ae=ea(Nl()),f=ea({}),m=wi(()=>{let w=0;for(const q in f.value)f.value[q]&&w++;return w});function W(){f.value={},P()}const c=async()=>(m.value?p.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[m.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{B.value=!0,$.start();for(const w in f.value)f.value[w]&&await n({url:`/content-model/items/${w}`,method:"delete"});$.finish(),B.value=!1,A.success(e("success")),f.value={},P(null,!0)}}):A.warning(e("noItemSelected")),!1);return jm("currentEditItem",S),(w,q)=>{const r=Un,o=me,z=oe,M=Se,E=Vl,g=ba,I=Bi,pe=Es,R=Ga,te=fl,v=Ya,re=Ha,it=oa,fe=uo,Oe=En,ve=fa;return dn(),Fo(ki,null,[ft(g,{to:"#alt-action"},{default:yt(()=>[ft(E,{align:"center"},{default:yt(()=>[ft(r,{checked:pt(L),"onUpdate:checked":[q[0]||(q[0]=ce=>Po(L)?L.value=ce:null),q[1]||(q[1]=ce=>{for(const zt of pt(u))zt.id&&(pt(f)[zt.id]=ce);ae.value=("uuidv4"in w?w.uuidv4:Nm(Nl))()})],disabled:!pt(u).length},{default:yt(()=>[un(Ra(pt(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),ft(M,{type:"primary",onClick:q[2]||(q[2]=ce=>G(null))},{icon:yt(()=>[ft(z,{size:"18"},{default:yt(()=>[ft(o,{icon:"carbon:add-alt"})]),_:1})]),default:yt(()=>[un(" "+Ra(pt(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),ft(I,{class:"mt-2 mb-5",onBack:q[3]||(q[3]=ce=>Q.value=null)},{title:yt(()=>[un(Ra(pt(K)(Q.value?.title)),1)]),back:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:yt(()=>[pt(m)>0?(dn(),Fo("section",Dm,[Ro("span",null,Ra(pt(e)("nbItemsSelected",[pt(m)])),1),Ro("section",Lm,[ft(M,{type:"error",size:"small",onClick:c},{icon:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"carbon:trash-can"})]),_:1})]),default:yt(()=>[un(" "+Ra(pt(e)("delete")),1)]),_:1}),ft(M,{type:"warning",size:"small",onClick:W},{icon:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"carbon:close-filled"})]),_:1})]),default:yt(()=>[un(" "+Ra(pt(e)("cancelSelection")),1)]),_:1})])])):bi("",!0)]),_:1}),pt(u).length&&!pt(U)?(dn(),Fo("section",Bm,[ft(it,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:yt(()=>[(dn(!0),Fo(ki,null,Am(pt(u),(ce,zt)=>(dn(),yr(re,{key:zt},{default:yt(()=>[ft(v,{name:"slide-fade",appear:""},{default:yt(()=>[ft(te,{size:"small",bordered:"",hoverable:""},{cover:yt(()=>[Ro("div",Pm,[Ro("img",{src:Q.value?.imageUrl??pt(um),class:"w-full h-[200px] object-cover"},null,8,Rm)])]),header:yt(()=>[Ro("div",Fm,[ft(pe,{"line-clamp":1,"expand-trigger":"click"},{default:yt(()=>[ce.id?(dn(),yr(r,{key:pt(ae),checked:pt(f)[ce.id],"onUpdate:checked":rt=>pt(f)[ce.id]=rt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):bi("",!0),un(" "+Ra(pt(s)(ce,Q.value)),1)]),_:2},1024)])]),action:yt(()=>[ft(E,{justify:"space-between",align:"center"},{default:yt(()=>[ft(R,{bordered:!1,type:ce.isActive?"success":"error"},{default:yt(()=>[un(Ra(ce.isActive?pt(e)("visible"):pt(e)("hidden")),1)]),_:2},1032,["type"]),ft(E,null,{default:yt(()=>[ft(M,{ternary:"",circle:"",title:pt(e)("edit"),onClick:rt=>G(ce)},{icon:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),ft(M,{ternary:"",circle:"",title:pt(e)("links"),onClick:rt=>C(ce)},{icon:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),ft(M,{ternary:"",circle:"",title:pt(e)("delete"),onClick:rt=>i(ce)},{icon:yt(()=>[ft(z,null,{default:yt(()=>[ft(o,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),ft(fe,{page:pt(O),"onUpdate:page":[q[4]||(q[4]=ce=>Po(O)?O.value=ce:null),a],class:"mt-10 justify-center","show-size-picker":"","page-size":pt(N),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(pt(H)/pt(N)),"onUpdate:pageSize":ee},{prefix:yt(()=>[un(Ra(`${pt(H)} ${pt(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):pt(U)?(dn(),Fo("section",Om,[ft(Oe,{size:"medium"})])):(dn(),yr(ve,{key:2,description:pt(e)("noItemAdded"),class:"my-16"},null,8,["description"])),ft(hm,{show:pt(V),"onUpdate:show":q[5]||(q[5]=ce=>Po(V)?V.value=ce:null),data:pt(Y),"onUpdate:data":q[6]||(q[6]=ce=>Po(Y)?Y.value=ce:null),"content-model":Q.value,"submit-data":j},null,8,["show","data","content-model"]),ft(Mm,{show:pt(b),"onUpdate:show":q[7]||(q[7]=ce=>Po(b)?b.value=ce:null),onUpdate:y},null,8,["show"])],64)}}}),{defineComponent:Km}=await ge("vue"),{unref:he,resolveComponent:My,createVNode:Je,withCtx:Xe,toDisplayString:Sa,createTextVNode:Fa,openBlock:ta,createBlock:Oa,createCommentVNode:eo,renderList:Ym,Fragment:gr,createElementBlock:hs,withModifiers:bs,normalizeClass:xi,createElementVNode:ks,isRef:ws,normalizeStyle:Gm}=await ge("vue"),Hm={key:2},Wm={class:"flex items-center"},Jm={class:"text-base"},Xm={class:"mt-4"},{ref:pa,inject:Zm,watch:Qm}=await ge("vue"),e_="previews",t_=Km({__name:"index",setup(se){const{t:e}=Dt(),{request:n}=Zt(),{tr:s,pickByTheme:K,displayFormErrors:X,fileUrl:p,isInDevMode:A,formatKey:$}=Pt(),{isLightTheme:Q}=It(Wl()),{contentModels:U}=It(Bt()),{loadContentModels:B}=Bt(),V=hl(),b=gl(),u=El(),H=pa(!1),N=pa(!1),O=Zm("appConfig"),Z=async()=>{V.start(),H.value=!0,await B(),H.value=!1,V.finish()};Z();const a=pa(12),ee=pa(1),P=z=>{a.value=z},S={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},Y=pa(!1),G=pa(null),C=pa(S),y={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},i=pa(null),j=z=>{i.value=be.cloneDeep(z),C.value=be.cloneDeep(z||S),Y.value=!0},L=async()=>(G.value?.validate(async z=>{if(!z){V.start(),N.value=!0;const M={name:C.value.name,title:C.value.title,image:C.value.image,description:C.value.description,titleFieldName:C.value.titleFieldName,hasPermalink:C.value.hasPermalink},E=await n({method:i.value?"put":"post",url:i.value?`/content-models/${i.value.id}`:"/content-models",data:M});if(E.failure&&E.error)switch(E.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(E.error?.response?.data?.data);break;default:b.error(e("anErrorOccurred"))}else b.success(e("success")),Z(),Y.value=!1;N.value=!1,V.finish()}}),!1),ae=async z=>{u.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{(await n({method:"delete",url:`/content-models/${z.id}`})).success?(b.success(e("success")),Z()):b.error(e("anErrorOccurred"))}})},f=pa(null),m=pa(!1),W=async z=>{N.value=!0,V.start();const M=await n({url:`/content-models/${f.value?.id}`,method:"put",data:{dataStructure:z}});M.success&&M.result?(b.success(e("success")),Z(),c(M.result.data)):b.error(e("anErrorOccurred")),N.value=!1,V.finish()},c=z=>{f.value=z,m.value=!0},w=pa(!1),q=async z=>{C.value.image=z,w.value=!1},r=()=>{C.value.image=""},o=ro("content-models-management",()=>({itemsContentModel:pa(null)}))();return Qm(()=>C.value.title,z=>{i.value||C.value.name.length<=21&&(C.value.name=Yi(s(z),{trim:!0,lower:!0,strict:!0}))}),(z,M)=>{const E=me,g=oe,I=Se,pe=ba,R=Vl,te=Ma,v=fl,re=uo,it=fa,fe=Ya,Oe=na,ve=jl,ce=Kt,zt=Ha,rt=qi,ke=fn,F=oa,h=Un,Ce=Ol,J=Cl,D=Nn;return ta(),hs(gr,null,[he(o).itemsContentModel?eo("",!0):(ta(),Oa(pe,{key:0,to:"#alt-action"},{default:Xe(()=>[he(U)&&he(U).length?(ta(),Oa(I,{key:0,type:"primary",onClick:M[0]||(M[0]=we=>j(null))},{icon:Xe(()=>[Je(g,{size:"18"},{default:Xe(()=>[Je(E,{icon:"carbon:add-alt"})]),_:1})]),default:Xe(()=>[Fa(" "+Sa(he(e)("addContentModel")),1)]),_:1})):eo("",!0)]),_:1})),he(o).itemsContentModel?(ta(),Oa(qm,{key:1,modelValue:he(o).itemsContentModel,"onUpdate:modelValue":M[1]||(M[1]=we=>he(o).itemsContentModel=we)},null,8,["modelValue"])):(ta(),hs("section",Hm,[Je(fe,{appear:"",name:"slide-fade"},{default:Xe(()=>[ks("section",null,[he(U)&&he(U).length?(ta(),hs(gr,{key:0},[(ta(!0),hs(gr,null,Ym(he(U).slice((he(ee)-1)*he(a),he(ee)*he(a)),we=>(ta(),Oa(v,{key:we.id,embedded:"",size:"small",class:"mb-2"},{header:Xe(()=>[ks("div",Wm,[he(A)?(ta(),Oa(R,{key:0},{default:Xe(()=>[Je(I,{size:"small",type:"primary",secondary:he(Q),onClick:bs(et=>c(we),["stop"])},{default:Xe(()=>[Je(g,{class:"mr-1"},{default:Xe(()=>[Je(E,{icon:"carbon:data-1"})]),_:1}),Fa(" "+Sa(he(e)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),Je(I,{size:"small",type:"primary",secondary:he(Q),onClick:bs(et=>j(we),["stop"])},{default:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),Je(I,{size:"small",type:"error",secondary:he(Q),onClick:bs(et=>ae(we),["stop"])},{default:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):eo("",!0),he(A)?(ta(),Oa(te,{key:1,vertical:"",class:xi(he(K)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):eo("",!0),ks("span",Jm,Sa(he(s)(we.title)),1)])]),"header-extra":Xe(()=>[Je(I,{size:"small",type:"primary",secondary:he(Q),onClick:bs(et=>he(o).itemsContentModel=we,["stop"])},{icon:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:arrow-right"})]),_:1})]),default:Xe(()=>[Fa(" "+Sa(he(e)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),Je(re,{page:he(ee),"onUpdate:page":M[2]||(M[2]=we=>ws(ee)?ee.value=we:null),class:"mt-5 justify-end","show-size-picker":"","page-size":he(a),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(he(U).length/he(a)),"onUpdate:pageSize":P},{prefix:Xe(()=>[Fa(Sa(`${he(U).length} ${he(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(ta(),Oa(v,{key:1,size:"large",class:xi(`mb-2 !border-dashed !border-2 ${he(K)("!border-zinc-300","!border-zinc-600")}`)},{default:Xe(()=>[Je(it,{description:he(e)("noContentModelAvailable")},{icon:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:model-alt"})]),_:1})]),extra:Xe(()=>[ks("div",Xm,[Je(I,{size:"small",onClick:M[3]||(M[3]=we=>j(null))},{icon:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:add-alt"})]),_:1})]),default:Xe(()=>[Fa(" "+Sa(he(e)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Je(J,{show:he(Y),"onUpdate:show":M[11]||(M[11]=we=>ws(Y)?Y.value=we:null),loading:he(N),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:he(i)?he(e)("editContentModel"):he(e)("addContentModel"),"positive-text":he(e)("validate"),"negative-text":he(e)("cancel"),onPositiveClick:L,onNegativeClick:M[12]||(M[12]=we=>Y.value=!1)},{default:Xe(()=>[Je(Ce,{ref_key:"formRef",ref:G,model:he(C),rules:y,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Xe(()=>[Je(ve,{"show-label":!1,path:"title"},{default:Xe(()=>[Je(Oe,{modelValue:he(C).title,"onUpdate:modelValue":M[4]||(M[4]=we=>he(C).title=we),placeholder:he(e)("title"),class:"w-full",sync:""},{label:Xe(()=>[Fa(Sa(he(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Je(ve,{"show-label":!1,path:"description"},{default:Xe(()=>[Je(Oe,{modelValue:he(C).description,"onUpdate:modelValue":M[5]||(M[5]=we=>he(C).description=we),placeholder:he(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Xe(()=>[Fa(Sa(he(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Je(F,{"x-gap":"12",span:24},{default:Xe(()=>[Je(zt,{span:14},{default:Xe(()=>[Je(ve,{label:he(e)("contentModelKey"),path:"name"},{default:Xe(()=>[Je(ce,{value:he(C).name,placeholder:he(e)("contentModelKey"),class:"w-full","onUpdate:value":M[6]||(M[6]=we=>he(C).name=he($)(we))},null,8,["value","placeholder"])]),_:1},8,["label"]),Je(ve,{label:he(e)("titleSingletonKey"),path:"titleFieldName"},{default:Xe(()=>[Je(ce,{value:he(C).titleFieldName,placeholder:he(e)("titleSingletonKey"),class:"w-full","onUpdate:value":M[7]||(M[7]=we=>he(C).titleFieldName=he($)(we))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Je(ke,{span:10,label:he(e)("itemsPreview"),path:"image"},{default:Xe(()=>[Je(R,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:Xe(()=>[Je(rt,{class:"cursor-pointer","object-fit":"cover",style:Gm("border: 1px dashed "+he(K)("green","white")),size:150,src:he(p)(he(C).image||""),onClick:M[8]||(M[8]=we=>w.value=!0)},{default:Xe(()=>[he(C).image?eo("",!0):(ta(),Oa(g,{key:0,size:64},{default:Xe(()=>[Je(E,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),he(C).image?(ta(),Oa(I,{key:0,quaternary:"",onClick:M[9]||(M[9]=we=>r())},{icon:Xe(()=>[Je(g,null,{default:Xe(()=>[Je(E,{icon:"carbon:trash-can"})]),_:1})]),default:Xe(()=>[Fa(" "+Sa(he(e)("clear")),1)]),_:1})):eo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),Je(ve,{"show-label":!1,path:"hasPermalink"},{default:Xe(()=>[Je(h,{checked:he(C).hasPermalink,"onUpdate:checked":M[10]||(M[10]=we=>he(C).hasPermalink=we)},{default:Xe(()=>[Fa(Sa(he(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Je(D,{show:he(w),"onUpdate:show":M[13]||(M[13]=we=>ws(w)?w.value=we:null),title:he(e)("selectImage"),"upload-config":{folder:e_,limit:0,maxSize:0,baseUrl:he(O)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:q},null,8,["show","title","upload-config"]),Je(Ji,{show:he(m),"onUpdate:show":M[14]||(M[14]=we=>ws(m)?m.value=we:null),title:he(s)(he(f)?.title),"raw-data-structure":he(f)?.dataStructure,"update-data-structure":W},null,8,["show","title","raw-data-structure"])]))],64)}}});var ja=(se=>(se.NEWS_TAG="news-tag",se.NEWS_CATEGORY="news-category",se.NEWS_ARTICLE="news-article",se.CONTENT_MODEL="content-model",se))(ja||{});const{defineComponent:l_}=await ge("vue"),{unref:ze,resolveComponent:Ny,createVNode:Qe,withCtx:tt,toDisplayString:vl,createTextVNode:a_,openBlock:pn,createBlock:to,createCommentVNode:n_,createElementVNode:pl,renderList:o_,Fragment:$i,createElementBlock:Ci}=await ge("vue"),s_={class:"text-base font-bold"},r_={class:"text-sm"},i_={class:"text-xs text-slate-400"},c_={class:"text-xs text-slate-400"},u_={class:"text-xs text-slate-400"},d_={class:"text-sm"},p_={class:"text-xs text-slate-400"},f_={class:"text-xs text-slate-400"},m_={class:"text-xs text-slate-400"},__={class:"text-sm"},v_={class:"text-xs text-slate-400"},y_={class:"text-xs text-slate-400"},g_={class:"text-xs text-slate-400"},h_={class:"text-base font-bold"},b_={class:"text-sm"},k_={class:"text-xs text-slate-400"},w_={class:"text-xs text-slate-400"},x_={class:"text-xs text-slate-400"},{ref:xs,computed:Vi,h:$_}=await ge("vue"),C_=l_({__name:"index",setup(se){const{t:e}=Dt(),{tr:n}=Pt(),{request:s}=Zt(),{contentModels:K,pages:X}=It(Bt()),{loadContentModels:p,loadPages:A}=Bt(),$=gl(),Q=hl(),U=[{pathPrefix:"/news/article",contentType:ja.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:ja.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:ja.NEWS_TAG,contentParam:"slug",pageId:null}],B=xs(!1),V=xs([]),b=xs(U),u=xs(),H=Vi(()=>K.value.filter(P=>P.hasPermalink)),N=async(P=!1)=>{Q.start(),B.value=!0,P&&(await p(),await A());const S=await s({url:"/permalinks"});if(S.success&&S.result){V.value=S.result.data,b.value=be.cloneDeep(U);for(let Y=0;Y<H.value.length;Y++)b.value.push({pathPrefix:`/${H.value[Y].slug}`,contentType:ja.CONTENT_MODEL,contentParam:"id",contentId:H.value[Y].id,pageId:null});for(let Y=0;Y<b.value.length;Y++)switch(b.value[Y].contentType){case ja.NEWS_ARTICLE:case ja.NEWS_CATEGORY:case ja.NEWS_TAG:{const G=V.value.find(C=>C.contentType===b.value[Y].contentType);G&&(b.value[Y].pathPrefix=G.pathPrefix,b.value[Y].contentParam=G.contentParam,b.value[Y].pageId=G.pageId,b.value[Y].permalinkId=G.id)}break;case ja.CONTENT_MODEL:{const G=V.value.find(C=>C.contentType===b.value[Y].contentType&&C.contentId===b.value[Y].contentId);G&&(b.value[Y].pathPrefix=G.pathPrefix,b.value[Y].contentParam=G.contentParam,b.value[Y].pageId=G.pageId,b.value[Y].permalinkId=G.id)}break}u.value=be.cloneDeep(b.value)}B.value=!1,Q.finish()};N(!0);const O=async()=>{Q.start(),B.value=!0,(await s({method:"put",url:"/permalinks",data:b.value})).success&&($.success(e("success")),N()),B.value=!1,Q.finish()},Z=Vi(()=>be.isEqual(b.value,u.value)),a=P=>$_("span",{},{default:()=>n(P.title)}),ee=P=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(P);return(P,S)=>{const Y=me,G=oe,C=Se,y=ba,i=Kt,j=Ha,L=wa,ae=oa,f=fl,m=co,W=io,c=Ma;return pn(),Ci($i,null,[Qe(y,{to:"#alt-action"},{default:tt(()=>[Qe(C,{type:"primary",loading:ze(B),disabled:ze(Z),onClick:S[0]||(S[0]=w=>O())},{icon:tt(()=>[Qe(G,null,{default:tt(()=>[Qe(Y,{icon:"carbon:save"})]),_:1})]),default:tt(()=>[a_(" "+vl(ze(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),Qe(f,{embedded:"",size:"small"},{default:tt(()=>[Qe(W,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":tt(({collapsed:w})=>[Qe(G,null,{default:tt(()=>[w?(pn(),to(Y,{key:0,icon:"fa-solid:chevron-left"})):(pn(),to(Y,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:tt(()=>S[10]||(S[10]=[pl("span",null,null,-1)])),default:tt(()=>[Qe(m,{name:"1"},{header:tt(()=>[pl("span",s_,vl(ze(e)("news")),1)]),default:tt(()=>[Qe(f,{size:"small"},{header:tt(()=>[pl("span",r_,vl(ze(e)("articles")),1)]),default:tt(()=>[Qe(ae,{cols:"24","x-gap":"12"},{default:tt(()=>[Qe(j,{span:"10"},{default:tt(()=>[pl("span",i_,vl(ze(e)("pathPrefix")),1),Qe(i,{value:ze(b)[0].pathPrefix,"onUpdate:value":S[1]||(S[1]=w=>ze(b)[0].pathPrefix=w),"allow-input":ee,size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",c_,vl(ze(e)("contentParam")),1),Qe(i,{value:ze(b)[0].contentParam,"onUpdate:value":S[2]||(S[2]=w=>ze(b)[0].contentParam=w),readonly:"",size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",u_,vl(ze(e)("contentPage")),1),Qe(L,{value:ze(b)[0].pageId,"onUpdate:value":S[3]||(S[3]=w=>ze(b)[0].pageId=w),options:ze(X)||[],placeholder:ze(e)("selectPage"),"render-label":a,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Qe(f,{size:"small"},{header:tt(()=>[pl("span",d_,vl(ze(e)("categories")),1)]),default:tt(()=>[Qe(ae,{cols:"24","x-gap":"12"},{default:tt(()=>[Qe(j,{span:"10"},{default:tt(()=>[pl("span",p_,vl(ze(e)("pathPrefix")),1),Qe(i,{value:ze(b)[1].pathPrefix,"onUpdate:value":S[4]||(S[4]=w=>ze(b)[1].pathPrefix=w),"allow-input":ee,size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",f_,vl(ze(e)("contentParam")),1),Qe(i,{value:ze(b)[1].contentParam,"onUpdate:value":S[5]||(S[5]=w=>ze(b)[1].contentParam=w),readonly:"",size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",m_,vl(ze(e)("contentPage")),1),Qe(L,{value:ze(b)[1].pageId,"onUpdate:value":S[6]||(S[6]=w=>ze(b)[1].pageId=w),options:ze(X)||[],placeholder:ze(e)("selectPage"),"render-label":a,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Qe(f,{size:"small"},{header:tt(()=>[pl("span",__,vl(ze(e)("tags")),1)]),default:tt(()=>[Qe(ae,{cols:"24","x-gap":"12"},{default:tt(()=>[Qe(j,{span:"10"},{default:tt(()=>[pl("span",v_,vl(ze(e)("pathPrefix")),1),Qe(i,{value:ze(b)[2].pathPrefix,"onUpdate:value":S[7]||(S[7]=w=>ze(b)[2].pathPrefix=w),"allow-input":ee,size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",y_,vl(ze(e)("contentParam")),1),Qe(i,{value:ze(b)[2].contentParam,"onUpdate:value":S[8]||(S[8]=w=>ze(b)[2].contentParam=w),readonly:"",size:"small"},null,8,["value"])]),_:1}),Qe(j,{span:"7"},{default:tt(()=>[pl("span",g_,vl(ze(e)("contentPage")),1),Qe(L,{value:ze(b)[2].pageId,"onUpdate:value":S[9]||(S[9]=w=>ze(b)[2].pageId=w),options:ze(X)||[],placeholder:ze(e)("selectPage"),"render-label":a,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Qe(c,{class:"!my-2"}),ze(H).length&&ze(b).length>3?(pn(),to(f,{key:0,embedded:"",size:"small"},{default:tt(()=>[Qe(W,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":tt(({collapsed:w})=>[Qe(G,null,{default:tt(()=>[w?(pn(),to(Y,{key:0,icon:"fa-solid:chevron-left"})):(pn(),to(Y,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:tt(()=>S[11]||(S[11]=[pl("span",null,null,-1)])),default:tt(()=>[Qe(m,{name:"1"},{header:tt(()=>[pl("span",h_,vl(ze(e)("contentModels")),1)]),default:tt(()=>[(pn(!0),Ci($i,null,o_(ze(H),(w,q)=>(pn(),to(f,{key:w.id,size:"small"},{header:tt(()=>[pl("span",b_,vl(ze(n)(w.title)),1)]),default:tt(()=>[Qe(ae,{cols:"24","x-gap":"12"},{default:tt(()=>[Qe(j,{span:"10"},{default:tt(()=>[pl("span",k_,vl(ze(e)("pathPrefix")),1),Qe(i,{value:ze(b)[q+3].pathPrefix,"onUpdate:value":r=>ze(b)[q+3].pathPrefix=r,"allow-input":ee,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Qe(j,{span:"7"},{default:tt(()=>[pl("span",w_,vl(ze(e)("contentParam")),1),Qe(i,{value:ze(b)[q+3].contentParam,"onUpdate:value":r=>ze(b)[q+3].contentParam=r,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Qe(j,{span:"7"},{default:tt(()=>[pl("span",x_,vl(ze(e)("contentPage")),1),Qe(L,{value:ze(b)[q+3].pageId,"onUpdate:value":r=>ze(b)[q+3].pageId=r,options:ze(X)||[],placeholder:ze(e)("selectPage"),"render-label":a,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):n_("",!0)],64)}}}),{unref:Ii}=await ge("vue"),{defineComponent:V_}=await ge("vue"),{unref:xe,createVNode:qt,withCtx:sl,toDisplayString:Oo,createTextVNode:jo,resolveComponent:Ey,createElementVNode:hr,isRef:Ti,renderList:I_,Fragment:zi,openBlock:qo,createElementBlock:Si,createBlock:br}=await ge("vue"),T_={class:"w-full"},{ref:la,h:Lt,computed:z_}=await ge("vue"),S_=V_({__name:"Campaign",setup(se){const e=hl(),n=gl(),s=El(),K=Ai(),{displayFormErrors:X,ckEditorToolbarItems:p}=Pt(),{request:A}=Zt(),{t:$,locale:Q}=Dt(),U=la(!1),B=la([]),V=la([]),b=la([]),u=la([]),H=la(""),N=la(),O={pageSize:12,prefix:({itemCount:f})=>Lt("div",{class:"font-bold"},{default:()=>`${$("total")}: ${f}`})},Z=[{title:$("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(f){return Lt("div",{},{default:()=>f.title})}},{title:$("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(f){return Lt("small",{},{default:()=>f.subject})}},{title:$("numberOfRecipients"),key:"recipients",width:200,render(f){return Lt("div",{},{default:()=>f.recipients.length})},sortOrder:!1,sorter:"default"},{title:$("updateAt"),key:"updatedAt",width:150,render(f){return Lt("div",{},{default:()=>Ka(f.updatedAt,{locale:Q.value,outPattern:"DD MMMM YYYY"})})}},{title:$("createdAt"),key:"createdAt",width:150,render(f){return Lt("div",{},{default:()=>Ka(f.createdAt,{locale:Q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Lt(Kt,{ref:N,placeholder:$("search"),value:H.value,onInput:f=>{H.value=f}},{suffix:()=>Lt(oe,{},{default:()=>Lt(me,{icon:"carbon:search"})})}),key:"actions",width:175,render(f){return Lt("div",{class:"flex justify-end items-center w-full"},[Lt(Se,{size:"small",type:"primary",title:$("history"),onClick:()=>{G.value=f,Y.value=!0},renderIcon:()=>Lt(oe,null,{default:()=>Lt(me,{icon:"mdi:history"})})}),Lt("div",{class:"w-2"}),Lt(Se,{size:"small",type:"info",title:$("launchCampaign"),onClick:()=>{const m=s.info({title:$("launchCampaign"),content:$("confirmLaunchCampaign",[f.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:$("yes"),negativeText:$("cancel"),onPositiveClick:async()=>{m.loading=!0;const W=await A({url:"/email",method:"post",data:{title:f.title,subject:f.subject,content:f.content,recipients:f.recipients.filter(q=>no.isEmail(q)),tags:[]}}),c=K.getSettingValue("phone","string")?.split(",")[0],w=await A({url:"/sms",method:"post",data:{from:c.replace(/\s+/g,""),content:f.rawContent,recipients:f.recipients.filter(q=>!no.isEmail(q))}});if(W.failure&&W.error)switch(W.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:n.error($("invalidData"));break;default:n.error($("sendingFailed"))}else if(w.failure&&w.error)switch(w.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:n.error($("invalidData"));break;default:n.error($("sendingFailed"))}else{const q=f.history||[];q.push({id:Nl(),date:Qi(new Date,{locale:Q.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+W.result.message+" Phone: "+w.result.message});const r=await A({method:"put",url:`/newsletter/campaigns/${f.id}`,data:{history:q}});r.success&&r.result.data?(n.success($("success")),ee()):n.error($("anErrorOccurred"))}m.loading=!1}})},renderIcon:()=>Lt(oe,null,{default:()=>Lt(me,{icon:"mdi:send"})})}),Lt("div",{class:"w-2"}),Lt(Se,{size:"small",type:"warning",title:$("edit"),onClick:()=>{j(f)},renderIcon:()=>Lt(oe,null,{default:()=>Lt(me,{icon:"carbon:edit"})})}),Lt("div",{class:"w-2"}),Lt(Se,{size:"small",type:"error",title:$("delete"),onClick:()=>{s.warning({title:$("confirm"),content:$("confirmDeleteCampaign"),positiveText:$("yes"),negativeText:$("no"),onPositiveClick:async()=>{(await A({method:"delete",url:`/newsletter/campaigns/${f.id}`})).success?(n.success($("success")),ee()):n.error($("anErrorOccurred"))}})},renderIcon:()=>Lt(oe,null,{default:()=>Lt(me,{icon:"carbon:trash-can"})})})])},fixed:"right"}],a=z_(()=>{if(!H.value)return u.value;const f=u.value.filter(m=>m.title.toLowerCase().includes(H.value.toLowerCase())||m.subject.toLowerCase().includes(H.value.toLowerCase()));return N.value&&N.value.focus(),f}),ee=async(f=!1)=>{U.value=!0;const m=await A({url:"/newsletter/campaigns"});if(m.success&&m.result&&(u.value=m.result.data),f){const W=await A({url:"/newsletter/emails"});W.success&&W.result&&(B.value=W.result.data);const c=await A({url:"/newsletter/phones"});c.success&&c.result&&(V.value=c.result.data),b.value=[...B.value.map(w=>({recipient:w.email,type:"email"})),...V.value.map(w=>({recipient:w.phone,type:"phone"}))]}U.value=!1};ee(!0);const P=la(!1),S=la(!1),Y=la(!1),G=la(null),C=la(null),y=la({title:"",subject:"",content:"",rawContent:"",recipients:[]}),i={title:[{required:!0,message:$("fillRequired")}],subject:[{required:!0,message:$("fillRequired")}],content:[{required:!0,message:$("fillRequired")}],rawContent:[{required:!0,message:$("fillRequired")}],recipients:[{required:!0,message:$("fillRequired")}]},j=f=>{G.value=be.cloneDeep(f),f?y.value=be.cloneDeep(f):y.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},S.value=!0},L=async()=>(C.value?.validate(async f=>{if(!f)if(G.value)if(G.value.title!==y.value.title&&u.value.findIndex(m=>m.title==y.value.title)>-1)n.error($("sameCampaignTitleMessage"));else{e.start(),P.value=!0;const m={title:y.value.title,subject:y.value.subject,content:y.value.content,rawContent:y.value.rawContent,recipients:y.value.recipients},W=await A({method:"put",url:`/newsletter/campaigns/${G.value.id}`,data:m});W.success&&W.result.data&&(n.success($("success")),ee()),P.value=!1,e.finish(),S.value=!1}else if(u.value.findIndex(m=>m.title==y.value.title)>-1)n.error($("sameCampaignTitleMessage"));else{e.start(),P.value=!0;const m={title:y.value.title,subject:y.value.subject,content:y.value.content,rawContent:y.value.rawContent,recipients:y.value.recipients},W=await A({method:"post",url:"/newsletter/campaigns",data:m});if(W.failure&&W.error)switch(W.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:X(W.error?.response?.data?.data);break;default:n.error($("anErrorOccurred"))}else n.success($("success")),ee();P.value=!1,e.finish(),S.value=!1}}),!1),ae=(f,m)=>be.isEqual(f.slice().sort(),m.slice().sort());return(f,m)=>{const W=ba,c=Ms,w=Ts,q=jl,r=Ki,o=Un,z=wa,M=Ol,E=Cl,g=rc,I=Fi,pe=Ri,R=ka,te=fa;return qo(),Si(zi,null,[qt(W,{to:"#alt-action"},{default:sl(()=>[qt(xe(Se),{type:"primary",onClick:m[0]||(m[0]=v=>j(null))},{icon:sl(()=>[qt(xe(oe),{size:"18"},{default:sl(()=>[qt(xe(me),{icon:"carbon:add-alt"})]),_:1})]),default:sl(()=>[jo(" "+Oo(xe($)("addCampaign")),1)]),_:1})]),_:1}),qt(w,null,{default:sl(()=>[qt(c,{columns:Z,data:xe(a),pagination:O,loading:xe(U),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),qt(E,{show:xe(S),"onUpdate:show":m[9]||(m[9]=v=>Ti(S)?S.value=v:null),loading:xe(P),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:xe(G)?xe($)("editCampaign"):xe($)("addCampaign"),"positive-text":xe($)("validate"),"negative-text":xe($)("cancel"),onPositiveClick:L,onNegativeClick:m[10]||(m[10]=v=>S.value=!1)},{default:sl(()=>[qt(M,{ref_key:"formRef",ref:C,class:"mt-5",model:xe(y),rules:i,"show-require-mark":!1,size:"medium"},{default:sl(()=>[qt(q,{label:xe($)("title"),path:"title"},{default:sl(()=>[qt(xe(Kt),{value:xe(y).title,"onUpdate:value":m[1]||(m[1]=v=>xe(y).title=v),placeholder:xe($)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),qt(q,{label:xe($)("subject"),path:"subject"},{default:sl(()=>[qt(xe(Kt),{value:xe(y).subject,"onUpdate:value":m[2]||(m[2]=v=>xe(y).subject=v),placeholder:xe($)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),qt(q,{label:xe($)("content"),path:"content"},{default:sl(()=>[hr("div",T_,[qt(r,{modelValue:xe(y).content,"onUpdate:modelValue":m[3]||(m[3]=v=>xe(y).content=v),"toolbar-items":xe(p),placeholder:xe($)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),qt(q,{label:xe($)("rawContent"),path:"rawContent"},{default:sl(()=>[qt(xe(Kt),{value:xe(y).rawContent,"onUpdate:value":m[4]||(m[4]=v=>xe(y).rawContent=v),placeholder:xe($)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),qt(q,{label:xe($)("recipients"),path:"recipients"},{default:sl(()=>[qt(z,{value:xe(y).recipients,"onUpdate:value":m[8]||(m[8]=v=>xe(y).recipients=v),options:xe(b),placeholder:xe($)("recipients"),loading:xe(U),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:sl(()=>[qt(o,{size:"large",class:"w-full","default-checked":xe(b).length&&ae(xe(y).recipients,xe(b).filter(v=>v.type=="email").map(v=>v.recipient)),"onUpdate:checked":m[5]||(m[5]=v=>{v?xe(y).recipients=xe(b).filter(re=>re.type=="email").map(re=>re.recipient):xe(y).recipients=xe(y).recipients.filter(re=>!("_v"in f?f._v:Ii(no)).isEmail(re))})},{default:sl(()=>[jo(Oo(xe($)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),m[12]||(m[12]=hr("div",{class:"h-2"},null,-1)),qt(o,{size:"large",class:"w-full","default-checked":xe(b).length&&ae(xe(y).recipients,xe(b).filter(v=>v.type=="phone").map(v=>v.recipient)),"onUpdate:checked":m[6]||(m[6]=v=>{v?xe(y).recipients=xe(b).filter(re=>re.type=="phone").map(re=>re.recipient):xe(y).recipients=xe(y).recipients.filter(re=>("_v"in f?f._v:Ii(no)).isEmail(re))})},{default:sl(()=>[jo(Oo(xe($)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),m[13]||(m[13]=hr("div",{class:"h-2"},null,-1)),qt(o,{size:"large",class:"w-full","default-checked":xe(b).length&&xe(y).recipients.length===xe(b).length,"onUpdate:checked":m[7]||(m[7]=v=>{v?xe(y).recipients=xe(b).filter(re=>re.recipient).map(re=>re.recipient):xe(y).recipients=[]})},{default:sl(()=>[jo(Oo(xe($)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),qt(E,{show:xe(Y),"onUpdate:show":m[11]||(m[11]=v=>Ti(Y)?Y.value=v:null),loading:xe(P),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:xe($)("history")},{default:sl(()=>[xe(G)?.history?.length?(qo(),br(R,{key:0,style:{"max-height":"400px"}},{default:sl(()=>[qt(pe,{hoverable:""},{default:sl(()=>[(qo(!0),Si(zi,null,I_(xe(G)?.history.slice().reverse(),v=>(qo(),br(I,{key:v.id},{default:sl(()=>[qt(g,{title:v.date,"content-style":"margin-top: 10px;"},{default:sl(()=>[jo(Oo(v.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(qo(),br(te,{key:1,description:xe($)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),{useCssVars:M_,defineComponent:N_}=await ge("vue"),{unref:t,createVNode:k,withCtx:x,toDisplayString:Fe,createTextVNode:aa,resolveComponent:Uy,openBlock:Pe,createBlock:rl,createCommentVNode:Xt,createElementBlock:Mt,createElementVNode:Te,isRef:kr,vShow:wr,withDirectives:xr,normalizeStyle:il,Fragment:Sn,renderList:Mi,TransitionGroup:E_,withKeys:U_}=await ge("vue"),A_={id:"header-btn"},D_={key:1,id:"alt-action"},L_={key:"contact-info"},B_={class:"text-xs"},P_={class:"text-xs"},R_={class:"text-xs"},F_={class:"text-xs"},O_={class:"text-xs"},j_={class:"text-xs"},q_={class:"text-xs"},K_={class:"flex items-center gap-2 w-full"},Y_={key:"appearance"},G_={class:"text-sm"},H_={class:"text-sm"},W_={class:"flex flex-col items-center justify-center text-gray-400"},J_={class:"text-sm"},X_={class:"flex flex-col items-center justify-center text-gray-400"},Z_={class:"text-sm"},Q_={class:"flex flex-col items-center justify-center text-gray-400"},ev={class:"text-sm"},tv={class:"flex flex-col items-center justify-center text-gray-400"},lv={class:"text-sm"},av={class:"text-sm"},nv={class:"flex flex-col items-center justify-center text-gray-400"},ov={class:"text-sm"},sv={class:"flex flex-col items-center justify-center text-gray-400"},rv={class:"text-sm"},iv={class:"flex flex-col items-center justify-center text-gray-400"},cv={class:"text-sm"},uv={class:"flex flex-col items-center justify-center text-gray-400"},dv={class:"text-sm"},pv={class:"text-sm"},fv={class:"flex flex-col items-center justify-center text-gray-400"},mv={class:"text-sm"},_v={class:"flex flex-col items-center justify-center text-gray-400"},vv={class:"text-sm"},yv={class:"flex items-center justify-between"},gv={class:"font-bold"},hv={class:"flex items-center"},bv={class:"flex items-center justify-between"},kv={class:"font-bold"},wv={class:"flex items-center"},xv={class:"flex items-center justify-between"},$v={class:"font-bold"},Cv={class:"flex items-center"},Vv={key:"social-networks"},Iv={class:"text-xs"},Tv={key:"newsletter-email"},zv={key:"newsletter-phone"},Sv={key:"newsletter-campaign"},Mv={key:"ads"},Nv={key:"videos"},Ev={key:"content-models"},Uv={key:"menus"},Av={key:"content-permalinks"},Dv={key:"page-sections"},{defineComponent:Lv,inject:Bv,ref:Hl,h:$r,computed:$s,watch:Cr,onMounted:Pv}=await ge("vue"),Rv=Lv({name:ec.CONTENT_MANAGEMENT.NAME}),Fv=N_({...Rv,setup(se){M_(F=>({"06bd801f":t(B)}));const e=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=F=>e.includes(F),{t:s}=Dt(),K=yc(),X=El(),p=gl(),A=hl(),{request:$}=Zt(),{displayFormErrors:Q,appPrimaryColor:U,appSecondaryColor:B,pickByTheme:V,fileUrl:b,isLgScreen:u,isMdScreen:H,isSmScreen:N,isXlScreen:O,is2XlScreen:Z,tr:a}=Pt(),ee=Wl(),P=Ai(),{pages:S}=It(Bt()),{loadPages:Y,loadSections:G}=Bt(),C=Bv("appConfig"),y=Hl(!1),i=Hl({name:"",icon:"",adminIcon:"",oneColorIcon:"",oneColorAdminIcon:"",logo:"",adminLogo:"",oneColorLogo:"",oneColorAdminLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),j=Hl(i.value),L=ro("content-management",()=>({currentMenuItemKey:Hl("contact-info")}))(),ae=(F,h)=>()=>$r(oe,{color:L.currentMenuItemKey==h?"white":""},{default:()=>$r(me,{icon:F})}),f=(F,h)=>()=>$r("span",{class:`${L.currentMenuItemKey==h?"text-white":""}`,id:be.camelCase(h)},{default:()=>F}),m=$s(()=>{const F=[{label:f(s("contactInfo"),"contact-info"),key:"contact-info",icon:ae("carbon:identification","contact-info")},{label:f(s("appearance"),"appearance"),key:"appearance",icon:ae("carbon:color-palette","appearance")},{label:f(s("socialNetworks"),"social-networks"),key:"social-networks",icon:ae("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:f(s("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ae("carbon:at","newsletter-email")},{label:f(s("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ae("carbon:phone","newsletter-phone")},{label:f(s("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ae("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:f(s("ads"),"ads"),key:"ads",icon:ae("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:f(s("videos"),"videos"),key:"videos",icon:ae("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:f(s("menusManagement"),"menus"),key:"menus",icon:ae("carbon:menu","menus")},{label:f(s("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ae("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:f(s("contentModels"),"content-models"),key:"content-models",icon:ae("carbon:model-alt","content-models")},{label:f(s("pageSections"),"page-sections"),key:"page-sections",icon:ae("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const h of S.value)F.push({label:f(`${s("page")} ${a(h.title)}`,`${h.slug}-page`),key:`${h.slug}-page`,icon:ae("carbon:document",`${h.slug}-page`)});return F.push({key:"divider",type:"divider"},{label:f(s("addPage"),"add-new-page"),key:"add-new-page",icon:ae("carbon:add-alt","add-new-page")}),F}),W=$s(()=>be.isEqual(i.value,j.value)),c=$s(()=>ee.contentLayoutSize.height-200),w=$s(()=>ee.isLightTheme?"light":"dark"),q=Hl(null),r={email:[{required:!1,message:s("fillRequired")},{trigger:["input"],validator(F,h){return h&&!no.isEmail(h)?new Error(s("invalidEmail")):!0}}]},o=Hl();Cr(()=>o.value,F=>{i.value.additionalInfo=JSON.stringify(F||"[]")},{deep:!0});const z=Hl(null),M={},E=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],g=Hl("logos"),I=Hl(!1),pe=async F=>{switch(g.value){case"logos":i.value.logo=F;break;case"icons":i.value.icon=F;break;case"admin-logos":i.value.adminLogo=F;break;case"admin-icons":i.value.adminIcon=F;break;case"monochrome-logos":i.value.oneColorLogo=F;break;case"monochrome-icons":i.value.oneColorIcon=F;break;case"monochrome-admin-logos":i.value.oneColorAdminLogo=F;break;case"monochrome-admin-icons":i.value.oneColorAdminIcon=F;break;case"dark-backgrounds":i.value.adminAuthDarkBg=F;break;case"light-backgrounds":i.value.adminAuthLightBg=F;break}I.value=!1},R={name:"",title:"",content:"",slug:""},te=Hl(!1),v=Hl(null),re=Hl(R),it={title:[{required:!0,message:s("fillRequired")}]},fe=Hl(null),Oe=F=>{fe.value=be.cloneDeep(F),re.value=be.cloneDeep(F||R),te.value=!0},ve=async()=>(v.value?.validate(async F=>{if(!F){A.start(),y.value=!0;const h={title:re.value.title};fe.value||(h.name=be.startCase(be.camelCase(a(re.value.title))).replace(/\s+/g,""));const Ce=await $({method:fe.value?"put":"post",url:fe.value?`/pages/${fe.value.slug}`:"/pages",data:h});if(Ce.failure&&Ce.error)switch(Ce.error?.response?.data?.errorCode){case cl.FORM_INVALID_DATA:Q(Ce.error?.response?.data?.data);break;default:p.error(s("anErrorOccurred"))}else p.success(s("success")),Y(),L.currentMenuItemKey=`${Ce.result.data?.slug}-page`,te.value=!1;y.value=!1,A.finish()}}),!1),ce=async(F=!1)=>{A.start(),y.value=!0,Y(),F&&G(),await P.loadInformation(),P.items?.forEach(h=>{i.value[h.key]!=null&&(i.value[h.key]=h.value)}),j.value=be.cloneDeep(i.value);try{o.value=JSON.parse(i.value.additionalInfo||"[]")}catch{o.value=[]}y.value=!1,A.finish()};ce(!0),Pv(()=>{K.params.key&&n(K.params.key)&&(L.currentMenuItemKey=K.params.key)});const zt=async()=>{y.value=!0;const F=await $({url:"/app-information",method:"put",data:i.value});F.success&&F.result?p.success(s("success")):p.error(s("unableToUpdateSettings")),await ce()},rt=["contact-info","appearance","social-networks"];Cr(()=>L.currentMenuItemKey,(F,h)=>{F==="add-new-page"?(L.currentMenuItemKey=h,Oe(null)):rt.includes(h)&&!rt.includes(F)&&(W.value||X.warning({title:s("confirm"),content:s("marketInfoDiscardChangesConfirm"),positiveText:s("yes"),negativeText:s("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{L.currentMenuItemKey=h}}))});const ke=Hl();return Cr(()=>[H.value,N.value,u.value,O.value],([F,h,Ce,J])=>{ke.value=F||h||Ce||J,setTimeout(()=>{ke.value=void 0},500)},{immediate:!0}),(F,h)=>{const Ce=Se,J=Vl,D=uc,we=cc,et=Kt,mt=jl,Ul=fn,xt=oa,vt=na,Qt=Ir,Al=Ol,ct=fl,Tt=qi,$t=Ha,ye=Ma,Yt=ic,xa=Xi,Ja=Nn,An=Cl;return Pe(),Mt(Sn,null,[k(xa,null,{"header-extra":x(()=>[k(J,null,{default:x(()=>[Te("div",A_,[rt.includes(t(L).currentMenuItemKey)?(Pe(),rl(Ce,{key:0,loading:t(y),disabled:t(W),type:"primary",onClick:zt},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:save"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("save")),1)]),_:1},8,["loading","disabled"])):(Pe(),Mt("div",D_))])]),_:1})]),default:x(()=>[k(ct,{embedded:""},{default:x(()=>[k(Yt,{style:il(`height: ${t(c)}px`)},{default:x(()=>[k(Yt,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:x(()=>[k(we,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:t(ke),"default-collapsed":!t(Z),"collapsed-width":64,"native-scrollbar":!1,width:t(Z)?300:275},{default:x(()=>[k(D,{value:t(L).currentMenuItemKey,"onUpdate:value":h[0]||(h[0]=Ne=>t(L).currentMenuItemKey=Ne),"collapsed-width":64,"collapsed-icon-size":22,options:t(m)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),k(Yt,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:x(()=>[k(E_,{name:"slide-fade"},{default:x(()=>[xr(Te("section",L_,[k(ct,{embedded:""},{default:x(()=>[k(ct,{hoverable:""},{default:x(()=>[k(Al,{ref_key:"contactInfoFormRef",ref:q,model:t(i),rules:r,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:x(()=>[k(mt,{path:"name"},{label:x(()=>[Te("b",B_,Fe(t(s)("websiteName")),1)]),default:x(()=>[k(et,{value:t(i).name,"onUpdate:value":h[1]||(h[1]=Ne=>t(i).name=Ne),placeholder:t(s)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),k(xt,{"x-gap":"12",span:24},{default:x(()=>[k(Ul,{span:12,path:"email"},{label:x(()=>[Te("b",P_,Fe(t(s)("email")),1)]),default:x(()=>[k(et,{value:t(i).email,"onUpdate:value":h[2]||(h[2]=Ne=>t(i).email=Ne),placeholder:t(s)("email"),class:"w-full"},{prefix:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),k(Ul,{span:12,path:"phone"},{label:x(()=>[Te("b",R_,Fe(t(s)("phone")),1)]),default:x(()=>[k(et,{value:t(i).phone,"onUpdate:value":h[3]||(h[3]=Ne=>t(i).phone=Ne),placeholder:t(s)("phone"),class:"w-full"},{prefix:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),k(mt,{path:"address"},{label:x(()=>[Te("span",F_,[Te("b",null,Fe(t(s)("address")),1)])]),default:x(()=>[k(et,{value:t(i).address,"onUpdate:value":h[4]||(h[4]=Ne=>t(i).address=Ne),placeholder:t(s)("address"),class:"w-full"},{prefix:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),k(xt,{"x-gap":"12",span:24},{default:x(()=>[k(Ul,{span:12,path:"postalCode"},{label:x(()=>[Te("b",O_,Fe(t(s)("postalCode")),1)]),default:x(()=>[k(et,{value:t(i).postalCode,"onUpdate:value":h[5]||(h[5]=Ne=>t(i).postalCode=Ne),placeholder:t(s)("postalCode"),class:"w-full"},{prefix:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),k(mt,{"show-label":!1,path:"description"},{default:x(()=>[k(vt,{modelValue:t(i).description,"onUpdate:modelValue":h[6]||(h[6]=Ne=>t(i).description=Ne),placeholder:t(s)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:x(()=>[Te("b",j_,Fe(t(s)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),k(mt,{path:"additionalInfo"},{label:x(()=>[Te("b",q_,Fe(t(s)("additionalInfo")),1)]),default:x(()=>[k(Qt,{value:t(o),"onUpdate:value":h[7]||(h[7]=Ne=>kr(o)?o.value=Ne:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":x(()=>[aa(Fe(t(s)("add")),1)]),default:x(({value:Ne})=>[Te("div",K_,[k(et,{value:Ne.name,"onUpdate:value":ql=>Ne.name=ql,placeholder:t(s)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),k(et,{value:Ne.content,"onUpdate:value":ql=>Ne.content=ql,placeholder:t(s)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[wr,t(L).currentMenuItemKey==="contact-info"]]),xr(Te("section",Y_,[k(ct,{embedded:""},{default:x(()=>[k(ct,{segmented:"",size:"small"},{header:x(()=>[Te("span",G_,Fe(t(s)("website")),1)]),default:x(()=>[k(xt,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:x(()=>[k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",H_,Fe(t(s)("logo")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).logo?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).logo),onClick:h[8]||(h[8]=()=>{g.value="logos",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[9]||(h[9]=()=>{g.value="logos",I.value=!0})},[Te("div",W_,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).logo?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[10]||(h[10]=()=>t(i).logo="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",J_,Fe(t(s)("icon")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).icon?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).icon),onClick:h[11]||(h[11]=()=>{g.value="icons",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[12]||(h[12]=()=>{g.value="icons",I.value=!0})},[Te("div",X_,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).icon?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[13]||(h[13]=()=>t(i).icon="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",Z_,Fe(t(s)("logoMonochrome")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).oneColorLogo?(Pe(),rl(Tt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).oneColorLogo),onClick:h[14]||(h[14]=()=>{g.value="monochrome-logos",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[15]||(h[15]=()=>{g.value="monochrome-logos",I.value=!0})},[Te("div",Q_,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).oneColorLogo?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[16]||(h[16]=()=>t(i).oneColorLogo="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",ev,Fe(t(s)("iconMonochrome")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).oneColorIcon?(Pe(),rl(Tt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).oneColorIcon),onClick:h[17]||(h[17]=()=>{g.value="monochrome-icons",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[18]||(h[18]=()=>{g.value="monochrome-icons",I.value=!0})},[Te("div",tv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).oneColorIcon?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[19]||(h[19]=()=>t(i).oneColorIcon="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),k(ct,{embedded:"","content-class":"!pt-0"},{default:x(()=>[k(ct,{segmented:"",size:"small"},{header:x(()=>[Te("span",lv,Fe(t(s)("administration")),1)]),default:x(()=>[k(xt,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:x(()=>[k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",av,Fe(t(s)("logo")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).adminLogo?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).adminLogo),onClick:h[20]||(h[20]=()=>{g.value="admin-logos",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[21]||(h[21]=()=>{g.value="admin-logos",I.value=!0})},[Te("div",nv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).adminLogo?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[22]||(h[22]=()=>t(i).adminLogo="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",ov,Fe(t(s)("icon")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).adminIcon?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).adminIcon),onClick:h[23]||(h[23]=()=>{g.value="admin-icons",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[24]||(h[24]=()=>{g.value="admin-icons",I.value=!0})},[Te("div",sv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).adminIcon?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[25]||(h[25]=()=>t(i).adminIcon="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",rv,Fe(t(s)("logoMonochrome")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).oneColorAdminLogo?(Pe(),rl(Tt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).oneColorAdminLogo),onClick:h[26]||(h[26]=()=>{g.value="monochrome-admin-logos",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[27]||(h[27]=()=>{g.value="monochrome-admin-logos",I.value=!0})},[Te("div",iv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).oneColorAdminLogo?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[28]||(h[28]=()=>t(i).oneColorAdminLogo="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",cv,Fe(t(s)("iconMonochrome")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).oneColorAdminIcon?(Pe(),rl(Tt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).oneColorAdminIcon),onClick:h[29]||(h[29]=()=>{g.value="monochrome-admin-icons",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[30]||(h[30]=()=>{g.value="monochrome-admin-icons",I.value=!0})},[Te("div",uv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).oneColorAdminIcon?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[31]||(h[31]=()=>t(i).oneColorAdminIcon="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),k(ct,{embedded:"","content-class":"!pt-0"},{default:x(()=>[k(ct,{segmented:"",size:"small"},{header:x(()=>[Te("span",dv,Fe(t(s)("adminAuthPagesBg")),1)]),default:x(()=>[k(xt,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:x(()=>[k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",pv,Fe(t(s)("lightMode")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).adminAuthLightBg?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).adminAuthLightBg),onClick:h[32]||(h[32]=()=>{g.value="light-backgrounds",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[33]||(h[33]=()=>{g.value="light-backgrounds",I.value=!0})},[Te("div",fv,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).adminAuthLightBg?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[34]||(h[34]=()=>t(i).adminAuthLightBg="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1}),k($t,null,{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:x(()=>[Te("span",mv,Fe(t(s)("darkMode")),1)]),default:x(()=>[k(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:x(()=>[t(i).adminAuthDarkBg?(Pe(),rl(Tt,{key:0,class:"cursor-pointer","object-fit":"contain",style:il("border: 1px dashed "+t(V)(t(U),"white")),size:125,src:t(b)(t(i).adminAuthDarkBg),onClick:h[35]||(h[35]=()=>{g.value="dark-backgrounds",I.value=!0})},null,8,["style","src"])):(Pe(),Mt("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:il(`border: 1px dashed ${t(V)(t(U),"white")}; width: 125px; height: 125px`),onClick:h[36]||(h[36]=()=>{g.value="dark-backgrounds",I.value=!0})},[Te("div",_v,[k(t(oe),{size:"50"},{default:x(()=>[k(t(me),{icon:"carbon:image"})]),_:1}),Te("span",null,Fe(t(s)("import")),1)])],4)),t(i).adminAuthDarkBg?(Pe(),rl(Ce,{key:2,quaternary:"",onClick:h[37]||(h[37]=()=>t(i).adminAuthDarkBg="")},{icon:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),default:x(()=>[aa(" "+Fe(t(s)("clear")),1)]),_:1})):Xt("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),k(ct,{embedded:"","content-class":"!pt-0"},{default:x(()=>[k(ct,{hoverable:"",segmented:"",size:"small"},{header:x(()=>[Te("span",vv,Fe(t(s)("adminColors")),1)]),default:x(()=>[k(xt,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:x(()=>[k($t,null,{default:x(()=>[Te("div",yv,[Te("span",gv,Fe(t(s)("baseColor")),1),Te("div",hv,[t(i).primaryColor?(Pe(),Mt(Sn,{key:0},[k(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:h[38]||(h[38]=Ne=>t(i).primaryColor="")},{default:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),_:1}),k(ye,{vertical:""})],64)):Xt("",!0),k(t(oo),{value:t(i).primaryColor,"onUpdate:value":h[39]||(h[39]=Ne=>t(i).primaryColor=Ne),class:"cursor-pointer",theme:t(w),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),k($t,null,{default:x(()=>[Te("div",bv,[Te("span",kv,Fe(t(s)("secondaryColor")),1),Te("div",wv,[t(i).secondaryColor?(Pe(),Mt(Sn,{key:0},[k(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:h[40]||(h[40]=Ne=>t(i).secondaryColor="")},{default:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),_:1}),k(ye,{vertical:""})],64)):Xt("",!0),k(t(oo),{value:t(i).secondaryColor,"onUpdate:value":h[41]||(h[41]=Ne=>t(i).secondaryColor=Ne),class:"cursor-pointer",theme:t(w),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),k($t,null,{default:x(()=>[Te("div",xv,[Te("span",$v,Fe(t(s)("tertiaryColor")),1),Te("div",Cv,[t(i).accentColor?(Pe(),Mt(Sn,{key:0},[k(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:h[42]||(h[42]=Ne=>t(i).accentColor="")},{default:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:"carbon:trash-can"})]),_:1})]),_:1}),k(ye,{vertical:""})],64)):Xt("",!0),k(t(oo),{value:t(i).accentColor,"onUpdate:value":h[43]||(h[43]=Ne=>t(i).accentColor=Ne),class:"cursor-pointer",theme:t(w),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[wr,t(L).currentMenuItemKey==="appearance"]]),xr(Te("section",Vv,[k(ct,{embedded:""},{default:x(()=>[k(ct,{hoverable:""},{default:x(()=>[k(Al,{ref_key:"socialNetworksFormRef",ref:z,model:t(i),rules:M,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:x(()=>[k(xt,{"x-gap":"12",span:24},{default:x(()=>[(Pe(),Mt(Sn,null,Mi(E,Ne=>k(Ul,{key:Ne.name,span:12,path:Ne.name},{label:x(()=>[Te("b",Iv,Fe(t(s)(Ne.name)),1)]),default:x(()=>[k(et,{value:t(i)[Ne.name],"onUpdate:value":ql=>t(i)[Ne.name]=ql,placeholder:t(s)(Ne.name),class:"w-full"},{prefix:x(()=>[k(t(oe),null,{default:x(()=>[k(t(me),{icon:Ne.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[wr,t(L).currentMenuItemKey==="social-networks"]]),t(L).currentMenuItemKey==="newsletter-email"?(Pe(),Mt("section",Tv,[k(tm)])):Xt("",!0),t(L).currentMenuItemKey==="newsletter-phone"?(Pe(),Mt("section",zv,[k(cm)])):Xt("",!0),t(L).currentMenuItemKey==="newsletter-campaign"?(Pe(),Mt("section",Sv,[k(S_)])):Xt("",!0),t(L).currentMenuItemKey==="ads"?(Pe(),Mt("section",Mv,[k(Dc)])):Xt("",!0),t(L).currentMenuItemKey==="videos"?(Pe(),Mt("section",Nv,[k(ef)])):Xt("",!0),t(L).currentMenuItemKey==="content-models"?(Pe(),Mt("section",Ev,[k(t_)])):Xt("",!0),t(L).currentMenuItemKey==="menus"?(Pe(),Mt("section",Uv,[k(Sp)])):Xt("",!0),t(L).currentMenuItemKey==="content-permalinks"?(Pe(),Mt("section",Av,[k(C_)])):Xt("",!0),t(L).currentMenuItemKey==="page-sections"?(Pe(),Mt("section",Dv,[k(Gf)])):Xt("",!0),(Pe(!0),Mt(Sn,null,Mi(t(S),(Ne,ql)=>(Pe(),Mt(Sn,{key:`${Ne.slug}-page`},[t(L).currentMenuItemKey===`${Ne.slug}-page`?(Pe(),Mt("section",{key:`${Ne.slug}-page`},[k(Vd,{slug:Ne.slug,"open-form-modal":Oe,onDelete:()=>{t(L).currentMenuItemKey=t(S).length>1?`${t(S)[ql-1].slug}-page`:e[0],t(Y)()}},null,8,["slug","onDelete"])])):Xt("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),k(Ja,{show:t(I),"onUpdate:show":h[44]||(h[44]=Ne=>kr(I)?I.value=Ne:null),title:t(s)("selectImage"),"upload-config":{folder:t(g),limit:0,maxSize:0,baseUrl:t(C)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:pe},null,8,["show","title","upload-config"]),k(An,{show:t(te),"onUpdate:show":h[46]||(h[46]=Ne=>kr(te)?te.value=Ne:null),loading:t(y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:t(fe)?t(s)("editPage"):t(s)("addPage"),"positive-text":t(s)("validate"),"negative-text":t(s)("cancel"),onPositiveClick:ve,onNegativeClick:h[47]||(h[47]=Ne=>te.value=!1)},{default:x(()=>[k(Al,{ref_key:"addPageFormRef",ref:v,model:t(re),rules:it,"show-require-mark":!1,size:"medium"},{default:x(()=>[k(mt,{"show-label":!1,path:"title",class:"mt-5"},{default:x(()=>[k(vt,{modelValue:t(re).title,"onUpdate:modelValue":h[45]||(h[45]=Ne=>t(re).title=Ne),placeholder:t(s)("title"),class:"w-full",sync:"",onKeydown:U_(ve,["enter"])},{label:x(()=>[aa(Fe(t(s)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ay=Wa(Fv,[["__scopeId","data-v-6f4d8d7f"]]);export{Ay as default};
