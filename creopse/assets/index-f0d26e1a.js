import{_ as It,a as Kt,b as ya}from"./index.vue_vue_type_script_setup_true_lang-8e720d7e.js";import{_ as Da}from"./PageLayout.vue_vue_type_script_setup_true_lang-b8ee0a59.js";import{_ as bt}from"./I18nInput-f806bca2.js";import{f as $l,p as ot,o as La,v as ml,T as Pa,a as Na,w as Ra}from"./vue_runtime-dom-c0cb2070.js";import{e as Ze,u as Je,f as yt,r as Lt,p as Xt,q as fa,s as We,i as Zt,t as ga,_ as Pt,v as ba,w as Oa,x as vl,h as ha,j as qa,R as ja}from"./index-bdcc2b50.js";import{I as ge}from"./iconify_vue-6750bec6.js";import{_ as gl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-b1f4964a.js";import{R as Qe}from"./response-error-code-87d1097e.js";import{d as ll,a as Fe}from"./pinia-5dd13ed8.js";import{_ as he}from"./lodash-a9971f22.js";import{c as ct,b as nt,a as st,_ as Te,g as it,Z as Nt,V as zt,N as ce,L as lt,ag as $t,a2 as wt,P as Yt,a4 as ut,E as Xe,H as jt,I as ht,a8 as bl,a9 as hl,ah as Fa,F as pt,G as ft,ab as tl,a7 as kl,aa as ka,j as Vt,R as Rt,a5 as Vl,ac as wa,a3 as Tl,M as Gt,ai as zl,aj as Ba,$ as al,a0 as nl,W as wl,U as xa,a1 as sl,ak as Ka,al as Ya,k as Ga,O as Ca,J as Ha,am as Ia,e as $a,an as Wa,ao as Ja,ap as Xa,h as Za,n as Qa,o as en}from"./naive-ui-0caedd43.js";import{d as Be,aF as _t,o as n,c as S,Y as t,aO as l,l as P,P as V,F as ve,ar as Ne,a as _,Q as me,i as vt,h as re,p as Le,ag as Ht,as as xl,W as Va,w as kt,aH as tn,v as dl,r as ln,b as Ul,s as At,e as Ta}from"./vue_runtime-core-4f5fb440.js";import{u as Ge}from"./vue-i18n-84a05dd5.js";import{r,u as e,c as $e,a as qt}from"./vue_reactivity-852d8377.js";import{t as o,a as Ye,n as Pe}from"./vue_shared-7dcc3b7f.js";import{_ as Ut}from"./fawmi_vue-google-maps-52673af8.js";import{o as an,a as nn}from"./vueuse_core-e3c6c607.js";import{s as sn}from"./vue-virtual-scroller-50f85086.js";import{i as ma}from"./is-svg-36c6b3ab.js";import{_ as za}from"./index.vue_vue_type_style_index_0_lang-9db73430.js";import{M as el}from"./vue-pick-colors-f58bc48b.js";import{v as dt}from"./uuid-cf522c50.js";import{s as Ua}from"./slugify-ce681755.js";import{r as on,u as fl}from"./xlsx-83e6f69b.js";import{_ as Qt}from"./validator-c0254ba9.js";import{_ as rn}from"./VueTelInputWrapper-758139a7.js";import{i as un}from"./libphonenumber-js-cdb4849e.js";import{a as dn}from"./vue-router-e670704e.js";import"./media-library-ab314cca.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-626a676d.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-d1f69174.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var Dt=(de=>(de.IMAGE="image",de.VIDEO="video",de))(Dt||{});const _l=ll("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:de}=Ze(),a=await de({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),cn={class:"flex items-center justify-between"},pn={class:"flex flex-col"},fn={class:"text-sm font-bold"},mn={class:"text-xs font-normal"},vn={key:0,class:"text-xs font-bold"},_n=Be({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,displayFormErrors:Z,formatKey:ee}=Je(),y=_t(de,"show"),{adIdentifiers:Y}=Fe(_l()),{loadAdIdentifiers:$}=_l(),{isLightTheme:oe}=Fe(yt()),R=r(!1),G=async()=>{R.value=!0,await $(),R.value=!1};G();const j=ct(),T=nt(),v=st(),O=r(!1),E=r(!1),q=r(null),B=r(null),m=r({id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),le={id:[{required:!0,message:a("fillRequired")}]},N=W=>{q.value=he.cloneDeep(W),m.value=he.cloneDeep(W||{id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),E.value=!0},L=async()=>{var W;return(W=B.value)==null||W.validate(async M=>{var z,w,H,J,ne,i;if(!M){v.start(),O.value=!0;const D={id:m.value.id,reusable:m.value.reusable,contentType:m.value.contentType,contentSize:m.value.contentSize,params:m.value.params},U=await c({method:q.value?"put":"post",url:q.value?`/ad-identifiers/${q.value.id}`:"/ad-identifiers",data:D});if(U.failure&&U.error)switch((H=(w=(z=U.error)==null?void 0:z.response)==null?void 0:w.data)==null?void 0:H.errorCode){case Qe.FORM_INVALID_DATA:Z((i=(ne=(J=U.error)==null?void 0:J.response)==null?void 0:ne.data)==null?void 0:i.data);break;default:T.error(a("anErrorOccurred"))}else T.success(a("success")),G(),E.value=!1;O.value=!1,v.finish()}}),!1},te=async W=>{j.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/ad-identifiers/${W.id}`})).success?(T.success(a("success")),G()):T.error(a("anErrorOccurred"))}})};return(W,M)=>{const z=ge,w=Te,H=it,J=Nt,ne=zt,i=ce,D=lt,U=$t,p=wt,h=Yt,X=ut,d=Xe,u=jt,C=ht,I=bl,x=hl,b=Fa,k=pt,pe=ft;return n(),S(ve,null,[t(X,{show:y.value,"onUpdate:show":M[2]||(M[2]=se=>y.value=se),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(R),onClick:M[0]||(M[0]=se=>N(null))},{default:l(()=>[t(z,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(R),onClick:M[1]||(M[1]=se=>y.value=!1)},{default:l(()=>[t(z,{icon:"carbon:close",class:"mr-1"}),P(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(h,{show:e(R)},{default:l(()=>[e(Y).length?(n(),V(U,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),S(ve,null,Ne(e(Y),se=>(n(),V(D,{key:se.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",cn,[_("div",pn,[_("span",fn,o(se.id),1),_("div",null,[_("span",mn,o(se.contentType===e(Dt).IMAGE?e(a)("image"):e(a)("video")),1),se.contentSize?(n(),S("span",vn," Â ("+o(se.contentSize)+") ",1)):me("",!0)])]),t(H,null,{default:l(()=>[t(J,{size:"medium",bordered:!1,type:se.reusable?"info":"warning"},{default:l(()=>[P(o(se.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ne,{vertical:"",class:Ye(["!mx-0",e(f)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(w,{size:"small",type:"warning",secondary:e(oe),onClick:Q=>N(se)},{default:l(()=>[t(i,null,{default:l(()=>[t(z,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(oe),onClick:Q=>te(se)},{default:l(()=>[t(i,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),V(D,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(i,{size:"60"},{default:l(()=>[t(z,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(E),"onUpdate:show":M[8]||(M[8]=se=>$e(E)?E.value=se:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:M[9]||(M[9]=se=>E.value=!1)},{default:l(()=>[t(pe,{ref_key:"formRef",ref:B,model:e(m),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(d,{value:e(m).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":M[3]||(M[3]=se=>e(m).id=e(ee)(se))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(d,{value:e(m).contentSize,"onUpdate:value":M[4]||(M[4]=se=>e(m).contentSize=se),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(x,{value:e(m).reusable,"onUpdate:value":M[5]||(M[5]=se=>e(m).reusable=se),name:"reusable",class:"w-full"},{default:l(()=>[t(I,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(I,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(u,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(x,{value:e(m).contentType,"onUpdate:value":M[6]||(M[6]=se=>e(m).contentType=se),name:"contentType",class:"w-full"},{default:l(()=>[t(I,{value:e(Dt).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(I,{value:e(Dt).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(k,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(b,{value:e(m).params,"onUpdate:value":M[7]||(M[7]=se=>e(m).params=se),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),yn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},gn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},bn=["src"],hn=Be({__name:"index",setup(de){const a=st(),c=nt(),f=ct(),Z=vt("appConfig"),{adIdentifiers:ee}=Fe(_l()),{loadAdIdentifiers:y}=_l(),{displayFormErrors:Y,tr:$,fileUrl:oe,pickByTheme:R,appSecondaryColor:G,isInDevMode:j}=Je(),{request:T}=Ze(),{t:v,locale:O}=Ge(),E=r(!1),q=r([]),B=r(""),m=r(),le={pageSize:12,prefix:({itemCount:b})=>re("div",{class:"font-bold"},{default:()=>`${v("total")}: ${b}`})},N=[{title:v("preview"),key:"image",width:200,fixed:"left",render(b){var k;return((k=b.adIdentifier)==null?void 0:k.contentType)==Dt.IMAGE?re(tl,{src:b.contentUrl??"",objectFit:"cover",width:200,height:100}):re("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[re(ce,{size:50,color:G.value},{default:()=>re(ge,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(b){return re("small",{},{default:()=>b.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(b){return re("div",{},{default:()=>$(b.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(b){return re("small",{},{default:()=>$(b.description)})}},{title:v("status"),key:"isActive",width:100,render(b){return re(Nt,{type:b.display?"success":"warning",bordered:!1},{default:()=>b.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(b){return re("div",{},{default:()=>Lt(b.updatedAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(b){return re("div",{},{default:()=>Lt(b.createdAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:m,placeholder:v("search"),value:B.value,onInput:b=>{B.value=b}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(b){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{p(b)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await T({method:"delete",url:`/ads/${b.id}`})).success?(c.success(v("success")),te()):c.error(v("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=Le(()=>{if(!B.value)return q.value;const b=q.value.filter(k=>{var pe;return k.pid.toLowerCase().includes(B.value.toLowerCase())||k.title.toLowerCase().includes(B.value.toLowerCase())||((pe=k.description)==null?void 0:pe.toLowerCase().includes(B.value.toLowerCase()))});return m.value&&m.value.focus(),b}),te=async()=>{E.value=!0;const b=await T({url:"/ads"});b.success&&b.result&&(q.value=b.result.data),await y(),E.value=!1};te();const W=r(!1),M=r(!1),z=r(!1),w=r(Dt.IMAGE),H=r(),J=r(null),ne=r(null),i=r({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),D={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},U=Le({get:()=>!i.value.broadcastStart||!i.value.broadcastEnd?null:[i.value.broadcastStart||"",i.value.broadcastEnd||""],set:b=>{b?(i.value.broadcastStart=b[0],i.value.broadcastEnd=b[1]):(i.value.broadcastStart=null,i.value.broadcastEnd=null)}}),p=b=>{var k;J.value=he.cloneDeep(b),b?(i.value=he.cloneDeep(b),b.data||(i.value.data={})):i.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},H.value=(k=ee.value.find(pe=>pe.id==i.value.pid))==null?void 0:k.params,M.value=!0},h=b=>re("span",{},{default:()=>b.id+(b.contentSize?` (${b.contentSize})`:"")}),X=async()=>{var b;return(b=ne.value)==null||b.validate(async k=>{var pe,se,Q,g,K,we;if(!k)if(J.value)if(J.value.title!==i.value.title&&q.value.findIndex(be=>be.title==i.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),W.value=!0;const be={pid:i.value.pid,title:i.value.title,display:i.value.display,content:i.value.content,description:i.value.description,data:i.value.data,broadcastStart:i.value.broadcastStart,broadcastEnd:i.value.broadcastEnd},Ve=await T({method:"put",url:`/ads/${J.value.id}`,data:be});Ve.success&&Ve.result.data&&(c.success(v("success")),te()),W.value=!1,a.finish(),M.value=!1}else if(q.value.findIndex(be=>be.title==i.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),W.value=!0;const be={pid:i.value.pid,title:i.value.title,display:i.value.display,content:i.value.content,description:i.value.description,data:i.value.data,broadcastStart:i.value.broadcastStart,broadcastEnd:i.value.broadcastEnd},Ve=await T({method:"post",url:"/ads",data:be});if(Ve.failure&&Ve.error)switch((Q=(se=(pe=Ve.error)==null?void 0:pe.response)==null?void 0:se.data)==null?void 0:Q.errorCode){case Qe.FORM_INVALID_DATA:Y((we=(K=(g=Ve.error)==null?void 0:g.response)==null?void 0:K.data)==null?void 0:we.data);break;default:c.error(v("anErrorOccurred"))}else c.success(v("success")),te();W.value=!1,a.finish(),M.value=!1}}),!1},d=r(!1),u=r(!1),C=r(!1),I=r(""),x=r("");return(b,k)=>{var ae,xe;const pe=it,se=It,Q=kl,g=gl,K=bt,we=pt,be=ka,Ve=Vt,Me=jt,fe=bl,Re=hl,Ce=ht,ie=Rt,ye=Vl,A=ft,Ie=ut,F=Kt;return n(),S(ve,null,[t(se,{to:"#alt-action"},{default:l(()=>[t(pe,null,{default:l(()=>[e(j)?(n(),V(e(Te),{key:0,type:"warning",onClick:k[0]||(k[0]=ue=>z.value=!0)},{default:l(()=>[t(e(ce),{size:"26"},{default:l(()=>[t(e(ge),{icon:"carbon:id"})]),_:1}),P(" "+o(e(v)("identifiers")),1)]),_:1})):me("",!0),t(e(Te),{type:"primary",onClick:k[1]||(k[1]=ue=>p(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(Q,{columns:N,data:e(L),pagination:le,loading:e(E),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(Ie,{show:e(M),"onUpdate:show":k[12]||(k[12]=ue=>$e(M)?M.value=ue:null),loading:e(W),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:X,onNegativeClick:k[13]||(k[13]=ue=>M.value=!1)},{default:l(()=>[t(A,{ref_key:"formRef",ref:ne,class:"mt-5",model:e(i),rules:D,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ce,{cols:"24","x-gap":12},{default:l(()=>[t(ie,{span:"12"},{default:l(()=>[t(we,{label:e(v)("title"),path:"title"},{default:l(()=>[t(K,{modelValue:e(i).title,"onUpdate:modelValue":k[2]||(k[2]=ue=>e(i).title=ue),placeholder:e(v)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(we,{label:e(v)("description"),path:"description"},{default:l(()=>[t(K,{modelValue:e(i).description,"onUpdate:modelValue":k[3]||(k[3]=ue=>e(i).description=ue),placeholder:e(v)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(we,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(be,{"formatted-value":e(U),"onUpdate:formattedValue":k[4]||(k[4]=ue=>$e(U)?U.value=ue:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Ce,{"x-gap":"12",span:24},{default:l(()=>[t(Me,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(Ve,{value:e(i).pid,"onUpdate:value":[k[5]||(k[5]=ue=>e(i).pid=ue),k[6]||(k[6]=()=>{var ue;H.value=(ue=e(ee).find(Se=>Se.id==e(i).pid))==null?void 0:ue.params})],"render-label":h,options:e(ee).map(ue=>({...ue,disabled:!ue.reusable&&(ue.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Me,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(Re,{value:e(i).display,"onUpdate:value":k[7]||(k[7]=ue=>e(i).display=ue),name:"display",class:"w-full"},{default:l(()=>[t(fe,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(fe,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(ie,{span:"12"},{default:l(()=>[t(we,{label:e(v)("content"),path:"content"},{default:l(()=>[e(w)==e(Dt).VIDEO?(n(),V(ye,{key:0},{default:l(()=>[t(e(Te),{type:"primary",onClick:k[8]||(k[8]=()=>{u.value=!0})},{default:l(()=>[P(o(e(v)("select")),1)]),_:1}),t(e(Xe),{value:e(i).content?e(Xt)(e(i).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(i).content?(n(),S(ve,{key:0},[t(e(Te),{type:"primary",ghost:"",onClick:k[9]||(k[9]=()=>{I.value=e(v)("video"),x.value=e(oe)(e(i).content),C.value=!0})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[P(" "+o(e(v)("play")),1)]),_:1}),t(e(Te),{type:"primary",ghost:"",onClick:k[10]||(k[10]=()=>{e(i).content=""})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(v)("clear")),1)]),_:1})],64)):me("",!0)]),_:1})):(n(),S("div",yn,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:k[11]||(k[11]=()=>{d.value=!0})},[e(i).content?(n(),V(e(tl),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Pe("border: 1px dashed "+e(R)("green","white")),src:e(oe)(e(i).content||"")},null,8,["style","src"])):(n(),S("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Pe("border: 1px dashed "+e(R)("green","white"))},[t(e(ce),{size:64},{default:l(()=>[t(e(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(H)&&Array.isArray(e(H))?(n(),V(we,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(Ce,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),S(ve,null,Ne(e(H),(ue,Se)=>(n(),S(ve,{key:Se},[t(ie,{span:10},{default:l(()=>[t(e(Xe),{value:ue,placeholder:ue,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(ie,{span:14},{default:l(()=>[t(e(Xe),{value:e(i).data[ue],"onUpdate:value":ze=>e(i).data[ue]=ze,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):me("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ie,{show:e(C),"onUpdate:show":k[14]||(k[14]=ue=>$e(C)?C.value=ue:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(I)},{default:l(()=>[_("video",gn,[_("source",{src:e(x)},null,8,bn)])]),_:1},8,["show","title"]),t(F,{show:e(d),"onUpdate:show":k[15]||(k[15]=ue=>$e(d)?d.value=ue:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ae=e(Z))==null?void 0:ae.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[16]||(k[16]=ue=>{e(i).content=ue,d.value=!1})},null,8,["show","title","upload-config"]),t(F,{show:e(u),"onUpdate:show":k[17]||(k[17]=ue=>$e(u)?u.value=ue:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((xe=e(Z))==null?void 0:xe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[18]||(k[18]=ue=>{e(i).content=ue,u.value=!1})},null,8,["show","title","upload-config"]),t(_n,{show:e(z),"onUpdate:show":k[19]||(k[19]=ue=>$e(z)?z.value=ue:null)},null,8,["show"])],64)}}});const kn=Ut(hn,[["__scopeId","data-v-7778d793"]]),wn={class:"w-full"},xn={class:"mb-2"},Cn={class:"text-base text-left"},In=["src","onClick"],$n=["src"],Vn=Be({name:"AlbumsPicker"}),Tn=Be({...Vn,props:Ht({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),c=de,{t:f}=Ge(),{fileUrl:Z}=Je(),ee=r(!1),y=r(!1),Y=r(0),$=r(""),oe=vt("appConfig"),R=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},G=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},j=(v,O)=>{a.value&&Array.isArray(a.value[O].medias)?a.value[O].medias.splice(v,1):a.value&&(a.value[O].medias=[])},T=v=>{var E,q;const O=((q=(E=v.split("."))==null?void 0:E.pop())==null?void 0:q.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(O)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(O)?"video":"unknown"};return(v,O)=>{var w;const E=ge,q=ce,B=Te,m=bt,le=tl,N=xl("Draggable"),L=wa,te=$t,W=lt,M=Kt,z=ut;return n(),S("section",wn,[_("section",xn,[t(W,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Cn,o(c.title),1)]),"header-extra":l(()=>[c.readonly?me("",!0):(n(),V(B,{key:0,quaternary:"",onClick:R},{icon:l(()=>[t(q,{size:"18"},{default:l(()=>[t(E,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),S(ve,null,Ne(a.value,(H,J)=>(n(),V(W,{key:J,size:"small",embedded:"",hoverable:"",segmented:H.medias&&H.medias.length>0,class:"mb-4"},Va({header:l(()=>[t(m,{modelValue:H.name,"onUpdate:modelValue":ne=>H.name=ne,placeholder:e(f)("albumName"),"selector-span":5,disabled:c.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(te,{style:{"max-height":"100%"}},{default:l(()=>[H.medias&&H.medias.length>0?(n(),V(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(N,{list:H.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),S(ve,null,Ne(H.medias,(ne,i)=>(n(),S("div",{key:"img-"+i,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[T(ne)==="image"?(n(),V(le,{key:0,"object-fit":"cover",src:e(Z)(ne)},null,8,["src"])):(n(),S("video",{key:1,muted:"",src:e(Z)(ne),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{$.value=e(Z)(ne),y.value=!0}},null,8,In)),c.readonly?me("",!0):(n(),V(B,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:D=>j(i,J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(E,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):me("",!0)]),_:2},1024)]),_:2},[c.readonly?void 0:{name:"header-extra",fn:l(()=>[t(B,{quaternary:"",class:"mr-2",onClick:()=>{Y.value=J,ee.value=!0}},{icon:l(()=>[t(q,null,{default:l(()=>[t(E,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("add")),1)]),_:2},1032,["onClick"]),O[3]||(O[3]=_("div",{class:"w-2"},null,-1)),t(B,{quaternary:"",type:"error",onClick:ne=>G(J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(E,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(M,{show:e(ee),"onUpdate:show":O[0]||(O[0]=H=>$e(ee)?ee.value=H:null),title:e(f)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((w=e(oe))==null?void 0:w.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:O[1]||(O[1]=H=>{a.value&&Array.isArray(a.value[e(Y)].medias)?a.value[e(Y)].medias.push(H):a.value&&(a.value[e(Y)].medias=[H]),ee.value=!1})},null,8,["show","title","upload-config"]),t(z,{show:e(y),"onUpdate:show":O[2]||(O[2]=H=>$e(y)?y.value=H:null),preset:"card",style:{width:"500px"},title:e(f)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e($)?(n(),S("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e($)},null,8,$n)):me("",!0)]),_:1},8,["show","title"])])}}});const zn=Ut(Tn,[["__scopeId","data-v-338a28a2"]]);function Sa(){const{request:de}=Ze(),a=r([]),c=Y=>{const $=Y.split("_"),oe={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},R={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(j=>j.replace(/([A-Z])(?=\.\w+$)/,(T,v)=>R[v]||v))($[0]),$.length>1?oe[$[1]]:""]},f=()=>new Promise(Y=>setTimeout(Y)),Z=async Y=>{a.value=[];let $=1;for(const[oe,R]of Object.entries(Y)){$&&$%5e3===0&&await f();const[G,j]=c(oe);a.value.push({id:$,name:G,svgCode:R,library:j}),$+=1}return a.value},ee=r(!1);return{searchIcons:async Y=>{let $={};ee.value=!0;const oe=await de({url:"/search-icons",method:"post",data:{query:Y,decode:!1}});if(oe.success&&oe.result){try{$=JSON.parse(oe.result.data)}catch(R){$={},console.error(R)}$=await Z($)}return ee.value=!1,$},isSearching:ee,currentIconsList:a}}const Un=["innerHTML"],Sn=Be({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(de){$l(ee=>({"95b6e21e":e(f),"22e3431a":e(c)}));const a=de,c=Le(()=>a.color),f=Le(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),Z=r();return kt(()=>a.data,async ee=>{var y,Y;if(!ma(ee||"")){const{currentIconsList:$}=Sa();Z.value=((Y=(y=$.value)==null?void 0:y.find(oe=>oe.name==ee))==null?void 0:Y.svgCode)||""}},{immediate:!0}),(ee,y)=>(n(),S("i",{innerHTML:e(ma)(a.data||"")?a.data:e(Z)},null,8,Un))}});const Il=Ut(Sn,[["__scopeId","data-v-09747f05"]]),Mn={key:0,class:"multiple"},An={key:0,class:"item"},En={key:2,class:"flex items-center ml-2"},Dn={key:1,class:"placeholder"},Ln={class:"v3ip__search"},Pn=["placeholder"],Nn={key:0,class:"v3ip__loader"},Rn=["onClick"],On={key:1,class:"v3ip__empty"},qn={key:1,class:"default-text"},jn={key:1,class:"default-text"},Fn=Be({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(de,{emit:a}){$l(N=>({86121764:e(f),24235862:e(ee)}));const c=de,f=Le(()=>typeof c.selectorHeight=="number"?`${c.selectorHeight}px`:c.selectorHeight),Z=a,ee=r(c.selectedIconBgColor),y=r(""),Y=r(!1),{currentIconsList:$,searchIcons:oe,isSearching:R}=Sa();kt(()=>y.value,N=>{oe(N)},{immediate:!0});const G=Le(()=>he.uniqBy(he.uniqBy($.value.filter(N=>{var w,H;const L=typeof c.iconLibrary=="string"&&N.library==c.iconLibrary||Array.isArray(c.iconLibrary)&&c.iconLibrary.includes(N.library)||c.iconLibrary=="all",te=!c.includeIcons||!c.includeIcons.length||c.includeIcons.includes(N.name),W=!c.includeSearch||((w=N.name)==null?void 0:w.toLocaleLowerCase().includes(c.includeSearch)),M=!c.excludeIcons||!c.excludeIcons.length||!c.excludeIcons.includes(N.name),z=!c.excludeSearch||!((H=N.name)!=null&&H.toLocaleLowerCase().includes(c.excludeSearch));return L&&te&&W&&M&&z}),"svgCode"),"name")),j=N=>c.valueType=="name"?N.name:N.svgCode,T=N=>{var L,te;return c.valueType=="name"?((te=(L=$.value)==null?void 0:L.find(W=>W.name==N))==null?void 0:te.svgCode)||"":N},v=N=>c.multiple?c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length?c.modelValue.findIndex(L=>L==j(N))>-1:!1:c.modelValue==j(N),O=N=>{if(N)if(c.multiple)if(c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length){const L=c.modelValue,te=c.modelValue.findIndex(W=>W==j(N));te>-1?L.splice(te,1):c.modelValue.length<c.multipleLimit&&typeof j(N)<"u"&&L.push(j(N)),Z("update:modelValue",L),Z("change",L,N)}else c.multipleLimit>0&&(Z("update:modelValue",[j(N)]),Z("change",[j(N)],N));else j(N)==c.modelValue?c.clearable&&Z("update:modelValue",null):Z("update:modelValue",j(N)),Z("change",N)},E=r();an(E,()=>Y.value=!1);const q=r(),{width:B}=nn(q),m=tn(),le=N=>!!m[N];return(N,L)=>{var w,H,J,ne;const te=ge,W=ce,M=Te,z=Yt;return n(),S("div",{ref_key:"picker",ref:E,class:"v3ip__custom-select",onBlur:L[4]||(L[4]=i=>Y.value=!1)},[_("div",{class:Ye(["v3ip__selected",{open:e(Y),disabled:c.disabled}]),onClick:L[2]||(L[2]=i=>Y.value=c.disabled?!1:!e(Y))},[!c.multiple&&c.modelValue||c.multiple&&Array.isArray(c.modelValue)&&((w=c.modelValue)!=null&&w.length)?(n(),S(ve,{key:0},[c.multiple?(n(),S("div",Mn,[Array.isArray(c.modelValue)?(n(),S(ve,{key:0},[(n(!0),S(ve,null,Ne(c.modelValue||[],(i,D)=>(n(),S(ve,{key:D},[D<c.selectedItemsToDisplay?(n(),V(Il,{key:0,class:"item",data:typeof T(i)=="string"?T(i):null,size:20,onClick:ot(U=>{var p;return O((p=e($))==null?void 0:p.find(h=>j(h)==i))},["stop"])},null,8,["data","onClick"])):me("",!0)],64))),128)),((H=c.modelValue)==null?void 0:H.length)>c.selectedItemsToDisplay?(n(),S("div",An,[_("b",null," +"+o(((J=c.modelValue)==null?void 0:J.length)-c.selectedItemsToDisplay),1)])):me("",!0)],64)):me("",!0)])):(n(),V(Il,{key:1,data:typeof T(c.modelValue)=="string"?T(c.modelValue):null,size:20,onClick:L[0]||(L[0]=ot(i=>{var D;return O((D=e($))==null?void 0:D.find(U=>j(U)==c.modelValue))},["stop"]))},null,8,["data"])),(ne=c.modelValue)!=null&&ne.length&&c.clearable?(n(),S("div",En,[t(M,{type:"error",size:"tiny",secondary:"",onClick:L[1]||(L[1]=ot(()=>{Z("update:modelValue",c.multiple?[]:null)},["stop"]))},{default:l(()=>[t(W,null,{default:l(()=>[t(te,{icon:"mdi:close"})]),_:1})]),_:1})])):me("",!0)],64)):(n(),S("span",Dn,o(c.placeholder),1))],2),t(Pa,{name:"fade"},{default:l(()=>[dl(_("div",null,[_("div",Ln,[dl(_("input",{"onUpdate:modelValue":L[3]||(L[3]=i=>$e(y)?y.value=i:null),type:"text",name:"search",placeholder:c.searchPlaceholder},null,8,Pn),[[La,e(y)]])]),e(R)?(n(),S("div",Nn,[t(z,{size:"small"})])):(n(),S(ve,{key:1},[e(G)&&e(G).length?(n(),V(e(sn),{key:0,ref_key:"scroller",ref:q,class:"v3ip__items",items:e(G),"item-size":40,"grid-items":4,"item-secondary-size":e(B)/4},{default:l(({item:i})=>[_("div",{class:Ye({active:v(i)}),onClick:D=>O(i)},[t(Il,{data:typeof i.svgCode=="string"?i.svgCode:null,size:24,color:v(i)?c.selectedIconColor:void 0},null,8,["data","color"])],10,Rn)]),_:1},8,["items","item-secondary-size"])):(n(),S("div",On,[e(y)?(n(),S(ve,{key:0},[le("empty")?ln(N.$slots,"empty",{key:0},void 0,!0):(n(),S("div",qn,[_("small",null,o(c.emptyText),1)]))],64)):(n(),S("div",jn,[_("small",null,o(c.iconsListPlaceholder),1)]))]))],64))],512),[[ml,e(Y)]])]),_:3})],544)}}});const Ma=Ut(Fn,[["__scopeId","data-v-20cc11c7"]]),Bn={class:"w-full"},Kn={class:"mb-2"},Yn={class:"text-base text-left"},Gn=Be({name:"GridImagesPicker"}),Hn=Be({...Gn,props:Ht({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const a=_t(de,"modelValue"),c=vt("appConfig"),f=de,{t:Z}=Ge(),{fileUrl:ee}=Je(),y=r(!1),Y=oe=>{Array.isArray(a.value)?a.value.splice(oe,1):a.value=[]},$=async oe=>{Array.isArray(a.value)?a.value.push(...oe):a.value=[...oe],y.value=!1};return(oe,R)=>{var le;const G=ge,j=ce,T=Te,v=tl,O=xl("Draggable"),E=wa,q=$t,B=lt,m=Kt;return n(),S("section",Bn,[_("section",Kn,[t(B,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Yn,o(f.title),1)]),"header-extra":l(()=>[f.readonly?me("",!0):(n(),V(T,{key:0,quaternary:"",onClick:R[0]||(R[0]=N=>y.value=!0)},{icon:l(()=>[t(j,{size:"18"},{default:l(()=>[t(G,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("add")),1)]),_:1}))]),default:l(()=>[t(q,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),V(E,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(O,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),S(ve,null,Ne(a.value,(N,L)=>(n(),S("div",{key:"img-"+L,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(ee)(N)},null,8,["src"]),f.readonly?me("",!0):(n(),V(T,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>Y(L)},{icon:l(()=>[t(j,null,{default:l(()=>[t(G,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):me("",!0)]),_:1})]),_:1},8,["segmented"])]),t(m,{show:e(y),"onUpdate:show":R[1]||(R[1]=N=>$e(y)?y.value=N:null),title:e(Z)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((le=e(c))==null?void 0:le.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:$},null,8,["show","title","upload-config"])])}}});const Wn=Ut(Hn,[["__scopeId","data-v-12efa615"]]);var rt=(de=>(de.EXTERNAL_LINK="external-link",de.PAGE_LINK="page-link",de.CONTENT_LINK="content-link",de))(rt||{}),at=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(at||{});const cl=()=>{const{t:de}=Ge(),{tr:a}=Je(),c=(y,Y)=>{if(Y&&Y.titleFieldName)return fa(y.contentModelData.index[Y.titleFieldName])?a(y.contentModelData.index[Y.titleFieldName]):y.contentModelData.index[Y.titleFieldName];if(y.contentModelData&&y.contentModelData.index){const $=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const oe of $)if(y.contentModelData.index[oe])return fa(y.contentModelData.index[oe])?a(y.contentModelData.index[oe]):y.contentModelData.index[oe]}return a(y.title)},f=[{label:de("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:de("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:de("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:de("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:f,getContentTypeLabel:y=>{var Y;return(Y=f.find($=>$.value===y))==null?void 0:Y.label},getContentTypeTagType:y=>{var Y;return((Y=f.find($=>$.value===y))==null?void 0:Y.tagType)||"default"},extractItemTitle:c}},Jn={key:4,class:"w-full"},Xn={key:5,class:"w-full"},Zn={key:11,class:"w-full flex flex-gap-8 items-center justify-start"},Qn=["onClick"],es={key:0,class:"w-full"},ts={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},ls=["src"],as={id:"video",autoplay:"",controls:"",style:{width:"100%"}},ns=["src"],ss=Be({name:"FormGenerator"}),os=Be({...ss,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(de,{emit:a}){const c=de,f=a,{t:Z}=Ge(),{tr:ee,pickByTheme:y,fileUrl:Y,mergeArrays:$}=Je(),{extractItemTitle:oe}=cl(),{request:R}=Ze(),{loadContentModels:G}=We(),{contentModels:j}=Fe(We());G();const T=vt("appConfig");let v=[];if(typeof c.items=="string")try{v=JSON.parse(c.items)}catch{v=[]}else v=he.cloneDeep(c.items);let O={};if(c.useJson)try{O=JSON.parse(c.modelValue)}catch{O={}}const E=r(""),q=r(dt()),B=r(null),m=r(c.useJson?O:c.modelValue),le={};v.forEach(F=>{F.key in m.value||(F.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(F.type)?m.value[F.key]=JSON.parse(F.defaultValue):F.type=="number"?m.value[F.key]=parseFloat(F.defaultValue):F.type=="content-model-item"?m.value[F.key]=void 0:F.type=="content-model-items"?m.value[F.key]=[]:F.type=="list"?m.value[F.key]=F.defaultValue.split(",").map(ae=>({value:ae})):F.type=="i18n-list"?m.value[F.key]=F.defaultValue.split(",").map(ae=>({value:`{ "fr": "${ae}", "en": "${ae}" }`})):m.value[F.key]=F.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(F.type)?m.value[F.key]="":["number"].includes(F.type)?m.value[F.key]=0:["checkbox"].includes(F.type)?m.value[F.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(F.type)?m.value[F.key]=[]:m.value[F.key]=void 0),F.required&&(le[F.key]=[{required:!0,message:Z("fillRequired")}]),q.value=dt()});const N=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],L=F=>re("span",{},{default:()=>ee(F.label)});kt(()=>m.value,F=>{const ae=c.useJson?JSON.stringify(F):F,xe=async()=>{var Se;if(v.length==0)return!0;let ue=!1;try{await((Se=B.value)==null?void 0:Se.validate(ze=>{ue=!ze}))}catch{ue=!1}return ue};f("update:modelValue",ae),f("update",ae,xe)},{immediate:!0,deep:!0});const te=yt(),W=Le(()=>te.isLightTheme?"light":"dark"),M=r(!1),z=r(!1),w=r(!1),H=r(""),J=r(""),ne=r(!1),i=r(!1),D=r(""),U=r(""),p=r(!1),h=F=>{window.open(F,"_blank")},X=r(!1),d=r(!1),u=r([]);(async()=>{var ae;d.value=!0;const F=await R({url:"/menu/items"});if(F.success&&F.result)for(let xe=0;xe<((ae=F.result.data)==null?void 0:ae.length);xe++)switch(F.result.data[xe].targetType){case rt.EXTERNAL_LINK:u.value.findIndex(ue=>ue.url===F.result.data[xe].url)===-1&&u.value.push(F.result.data[xe]);break;case rt.PAGE_LINK:u.value.findIndex(ue=>ue.path===F.result.data[xe].path)===-1&&u.value.push(F.result.data[xe]);break}d.value=!1})();const I=r(!1),x=r([]),b=r([]),k=async(F,ae)=>{if(!F.length){b.value=[];return}I.value=!0;const xe=await R({url:`/content-model-items/search/${F}/${ae}`});xe.success&&xe.result&&(b.value=xe.result.data),I.value=!1},pe=Le(()=>$(x.value,b.value,"id")),se=r(!1),Q=r([]),g=r([]),K=async F=>{if(!F.length){g.value=[];return}se.value=!0;const ae=await R({url:`/news-articles/search/${F}`});ae.success&&ae.result&&(g.value=ae.result.data),se.value=!1},we=Le(()=>$(Q.value,g.value,"id")),{categories:be,tags:Ve}=Fe(Zt()),{loadCategories:Me,loadTags:fe}=Zt();Ul(async()=>{v.find(F=>F.type==="news-categories"||F.type==="news-category")&&(Me(),fe());for(let F=0;F<v.length;F++)if(v[F].type==="news-articles"||v[F].type==="news-article"){se.value=!0;const ae=m.value[v[F].key],xe=await R({url:"/news-articles/list",method:"post",data:{ids:v[F].type==="news-articles"?ae:[ae]}});xe.success&&xe.result&&(Q.value=$(Q.value,xe.result.data,"id")),se.value=!1}else if(v[F].type==="content-model-items"||v[F].type==="content-model-item"){I.value=!0;const ae=m.value[v[F].key],xe=await R({url:"/content-model-items/list",method:"post",data:{ids:v[F].type==="content-model-items"?ae:[ae]}});xe.success&&xe.result&&(x.value=$(x.value,xe.result.data,"id")),I.value=!1}});const Re=F=>re("span",{},{default:()=>`${ee(F.name)}`}),Ce=F=>re("span",{},{default:()=>`${ee(F.title)}`}),ie=F=>re("span",{},{default:()=>`${ee(F.name)}`}),ye=F=>Le(()=>re("span",{},{default:()=>{var ae;return oe(F,(ae=j.value)==null?void 0:ae.find(xe=>xe.id===F.contentModelId))}})),A=({option:F})=>re("div",{style:{display:"flex",alignItems:"center"}},[`${ee(F.title)}`]),Ie=F=>re("div",{style:{marginLeft:"12px",padding:"4px 0"}},[re("div",{},{default:()=>`${ee(F.title)}`}),re("small",{},{default:()=>`${F.targetType==rt.EXTERNAL_LINK?F.url:F.path}`})]);return(F,ae)=>{var pl,ol,il,rl,ul;const xe=Xe,ue=bt,Se=za,ze=Tl,Ae=Gt,je=ka,et=Vt,xt=tl,De=ge,He=ce,qe=Te,_e=Wn,Ke=Ma,Tt=zn,Ot=Vl,St=zl,Mt=pt,Ue=ft,gt=ut,Ft=Kt;return n(),S(ve,null,[(n(),V(Ue,{ref_key:"formRef",ref:B,key:e(q),model:e(m),rules:le,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Pe(c.formStyle)},{default:l(()=>[(n(!0),S(ve,null,Ne(e(v),(s,Wt)=>(n(),V(Mt,{key:Wt,label:e(ee)(s.label),path:s.key,"label-style":c.labelStyle,"show-require-mark":s.required,class:"w-full"},{default:l(()=>{var Jt,Sl,Ml,Al,El,Dl,Ll,Pl,Nl,Rl,Ol,ql,jl,Fl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa,oa,ia,ra,ua,da,ca,pa;return[s.type=="text"?(n(),V(xe,{key:0,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),maxlength:((Jt=s.settings)==null?void 0:Jt.maxLength)||void 0,minlength:((Sl=s.settings)==null?void 0:Sl.minLength)||void 0,clearable:((Ml=s.settings)==null?void 0:Ml.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-text"?(n(),V(ue,{key:1,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="textarea"?(n(),V(xe,{key:2,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),maxlength:((Al=s.settings)==null?void 0:Al.maxLength)||void 0,minlength:((El=s.settings)==null?void 0:El.minLength)||void 0,clearable:((Dl=s.settings)==null?void 0:Dl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-textarea"?(n(),V(ue,{key:3,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="editor"?(n(),S("div",Jn,[t(Se,{modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"toolbar-items":N,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="i18n-editor"?(n(),S("div",Xn,[t(ue,{modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="number"?(n(),V(ze,{key:6,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,max:((Ll=s.settings)==null?void 0:Ll.max)||void 0,min:((Pl=s.settings)==null?void 0:Pl.min)||void 0,step:((Nl=s.settings)==null?void 0:Nl.step)||1,clearable:((Rl=s.settings)==null?void 0:Rl.clearable)||!1,placeholder:e(ee)(s.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):s.type=="checkbox"?(n(),V(Ae,{key:7,checked:e(m)[s.key],"onUpdate:checked":ke=>e(m)[s.key]=ke,"checked-value":((Ol=s.settings)==null?void 0:Ol["checked-value"])||!0,"unchecked-value":((ql=s.settings)==null?void 0:ql["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):s.type=="date"?(n(),V(je,{key:8,"formatted-value":e(m)[s.key],"onUpdate:formattedValue":ke=>e(m)[s.key]=ke,"value-format":"yyyy-MM-dd",format:((jl=s.settings)==null?void 0:jl.format)||"dd MMMM yyyy",type:"date",clearable:((Fl=s.settings)==null?void 0:Fl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="year"?(n(),V(je,{key:9,"formatted-value":e(m)[s.key],"onUpdate:formattedValue":ke=>e(m)[s.key]=ke,"value-format":"yyyy",type:"year",clearable:((Bl=s.settings)==null?void 0:Bl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="single-select"||s.type=="multi-select"?(n(),V(et,{key:10,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Kl=s.options||[])==null?void 0:Kl.map(ke=>{var tt;if(s.type=="multi-select"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.value)}}return ke}),multiple:s.type=="multi-select",placeholder:e(ee)(s.label),"render-label":L,"label-field":"label","value-field":"value",filterable:"",clearable:((Yl=s.settings)==null?void 0:Yl.clearable)||!0,"max-tag-count":((Gl=s.settings)==null?void 0:Gl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="image"?(n(),S("div",Zn,[_("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{E.value=s.key,M.value=!0}},[e(m)[s.key]?(n(),V(xt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Pe("border: 1px dashed "+e(y)("green","white")),src:e(Y)(e(m)[s.key]||"")},null,8,["style","src"])):(n(),S("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Pe("border: 1px dashed "+e(y)("green","white"))},[t(He,{size:64},{default:l(()=>[t(De,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Qn),e(m)[s.key]?(n(),V(qe,{key:0,quaternary:"",onClick:()=>{E.value=s.key,e(m)[e(E)]=""}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])):me("",!0)])):s.type=="gallery"?(n(),V(_e,{key:12,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,"upload-folder":"images",title:e(ee)(s.label)},null,8,["modelValue","onUpdate:modelValue","title"])):s.type=="news-category"||s.type=="news-categories"?(n(),V(et,{key:13,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Hl=e(be)||[])==null?void 0:Hl.map(ke=>{var tt;if(s.type=="news-categories"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-categories",placeholder:e(ee)(s.label),"render-label":Re,"label-field":"name","value-field":"id",filterable:"",clearable:((Wl=s.settings)==null?void 0:Wl.clearable)||!0,"max-tag-count":((Jl=s.settings)==null?void 0:Jl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-tag"||s.type=="news-tags"?(n(),V(et,{key:14,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(Xl=e(Ve)||[])==null?void 0:Xl.map(ke=>{var tt;if(s.type=="news-tags"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-tags",placeholder:e(ee)(s.label),"render-label":ie,"label-field":"name","value-field":"id",filterable:"",clearable:((Zl=s.settings)==null?void 0:Zl.clearable)||!0,"max-tag-count":((Ql=s.settings)==null?void 0:Ql["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-article"||s.type=="news-articles"?(n(),V(et,{key:15,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(ea=e(we)||[])==null?void 0:ea.map(ke=>{var tt;if(s.type=="news-articles"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="news-articles",placeholder:e(ee)(s.label),"render-label":Ce,loading:e(se),"value-field":"id",filterable:"",clearable:((ta=s.settings)==null?void 0:ta.clearable)||!0,"max-tag-count":((la=s.settings)==null?void 0:la["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:K},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):s.type=="icon"||s.type=="icons"?(n(),V(Ke,{key:16,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),multiple:s.type=="icons","icons-list-placeholder":e(Z)("enterIconNameInSearchBar"),"search-placeholder":e(Z)("search"),"empty-text":e(Z)("noIconsFound"),"icon-library":((aa=s.settings)==null?void 0:aa.library)||"all",clearable:((na=s.settings)==null?void 0:na.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):s.type=="albums"?(n(),V(Tt,{key:17,modelValue:e(m)[s.key],"onUpdate:modelValue":ke=>e(m)[s.key]=ke,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):s.type=="audio"?(n(),V(Ot,{key:18},{default:l(()=>[t(qe,{type:"primary",onClick:()=>{E.value=s.key,ne.value=!0}},{default:l(()=>[P(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),S(ve,{key:0},[t(qe,{type:"primary",ghost:"",onClick:()=>{D.value=e(ee)(s.label),U.value=e(Y)(e(m)[s.key]),i.value=!0}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(qe,{type:"primary",ghost:"",onClick:()=>{E.value=s.key,e(m)[e(E)]=""}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):me("",!0)]),_:2},1024)):s.type=="video"?(n(),V(Ot,{key:19},{default:l(()=>[t(qe,{type:"primary",onClick:()=>{E.value=s.key,z.value=!0}},{default:l(()=>[P(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),S(ve,{key:0},[t(qe,{type:"primary",ghost:"",onClick:()=>{H.value=e(ee)(s.label),J.value=e(Y)(e(m)[s.key]),w.value=!0}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(qe,{type:"primary",ghost:"",onClick:()=>{E.value=s.key,e(m)[e(E)]=""}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):me("",!0)]),_:2},1024)):s.type=="document"?(n(),V(Ot,{key:20},{default:l(()=>[t(qe,{type:"primary",onClick:()=>{E.value=s.key,p.value=!0}},{default:l(()=>[P(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),S(ve,{key:0},[t(qe,{type:"primary",ghost:"",onClick:ke=>h(e(Y)(e(m)[s.key]))},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("open")),1)]),_:2},1032,["onClick"]),t(qe,{type:"primary",ghost:"",onClick:()=>{E.value=s.key,e(m)[e(E)]=""}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):me("",!0)]),_:2},1024)):s.type=="file"?(n(),V(Ot,{key:21},{default:l(()=>[t(qe,{type:"primary",onClick:()=>{E.value=s.key,X.value=!0}},{default:l(()=>[P(o(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(xe,{value:e(m)[s.key]?e(Xt)(e(m)[s.key]):"",placeholder:e(Z)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m)[s.key]?(n(),V(qe,{key:0,type:"primary",ghost:"",onClick:()=>{E.value=s.key,e(m)[e(E)]=""}},{icon:l(()=>[t(He,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(Z)("clear")),1)]),_:2},1032,["onClick"])):me("",!0)]),_:2},1024)):s.type=="color"?(n(),V(e(el),{key:22,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,class:"cursor-pointer",theme:e(W),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):s.type=="content-model-item"||s.type=="content-model-items"?(n(),V(et,{key:23,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:(sa=e(pe)||[])==null?void 0:sa.map(ke=>{var tt;if(s.type=="content-model-items"&&s.settings&&e(m)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...ke,disabled:e(m)[s.key].length>=mt&&!e(m)[s.key].includes(ke.id)}}return ke}),multiple:s.type=="content-model-items",placeholder:e(ee)(s.label),"render-label":ke=>ye(ke).value,loading:e(I),"value-field":"id",filterable:"",clearable:((oa=s.settings)==null?void 0:oa.clearable)||!0,"max-tag-count":((ia=s.settings)==null?void 0:ia["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:ke=>k(ke,s.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):s.type=="menu-item-link"?(n(),V(et,{key:24,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,options:e(u)||[],placeholder:e(ee)(s.label),"render-label":Ie,"render-tag":A,loading:e(d),"label-field":"title","value-field":"id",filterable:"",clearable:((ra=s.settings)==null?void 0:ra.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):s.type=="list"?(n(),V(St,{key:25,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),max:((ua=s.settings)==null?void 0:ua.max)||void 0,min:((da=s.settings)==null?void 0:da.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ke})=>{var tt,mt;return[((tt=s.settings)==null?void 0:tt.type)=="editor"?(n(),S("div",es,[t(Se,{modelValue:ke.value,"onUpdate:modelValue":Cl=>ke.value=Cl,"toolbar-items":N,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(n(),V(xe,{key:1,value:ke.value,"onUpdate:value":Cl=>ke.value=Cl,type:((mt=s.settings)==null?void 0:mt.type)||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):s.type=="i18n-list"?(n(),V(St,{key:26,value:e(m)[s.key],"onUpdate:value":ke=>e(m)[s.key]=ke,placeholder:e(ee)(s.label),max:((ca=s.settings)==null?void 0:ca.max)||void 0,min:((pa=s.settings)==null?void 0:pa.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:ke})=>{var tt;return[t(ue,{modelValue:ke.value,"onUpdate:modelValue":mt=>ke.value=mt,type:((tt=s.settings)==null?void 0:tt.type)||"text","selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):me("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(gt,{show:e(i),"onUpdate:show":ae[0]||(ae[0]=s=>$e(i)?i.value=s:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(D)},{default:l(()=>[_("audio",ts,[_("source",{src:e(U)},null,8,ls)])]),_:1},8,["show","title"]),t(gt,{show:e(w),"onUpdate:show":ae[1]||(ae[1]=s=>$e(w)?w.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(H)},{default:l(()=>[_("video",as,[_("source",{src:e(J)},null,8,ns)])]),_:1},8,["show","title"]),t(Ft,{show:e(M),"onUpdate:show":ae[2]||(ae[2]=s=>$e(M)?M.value=s:null),title:e(Z)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((pl=e(T))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[3]||(ae[3]=s=>{e(m)[e(E)]=s,M.value=!1})},null,8,["show","title","upload-config"]),t(Ft,{show:e(z),"onUpdate:show":ae[4]||(ae[4]=s=>$e(z)?z.value=s:null),title:e(Z)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(T))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[5]||(ae[5]=s=>{e(m)[e(E)]=s,z.value=!1})},null,8,["show","title","upload-config"]),t(Ft,{show:e(ne),"onUpdate:show":ae[6]||(ae[6]=s=>$e(ne)?ne.value=s:null),title:e(Z)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((il=e(T))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[7]||(ae[7]=s=>{e(m)[e(E)]=s,ne.value=!1})},null,8,["show","title","upload-config"]),t(Ft,{show:e(p),"onUpdate:show":ae[8]||(ae[8]=s=>$e(p)?p.value=s:null),title:e(Z)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((rl=e(T))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[9]||(ae[9]=s=>{e(m)[e(E)]=s,p.value=!1})},null,8,["show","title","upload-config"]),t(Ft,{show:e(X),"onUpdate:show":ae[10]||(ae[10]=s=>$e(X)?X.value=s:null),title:e(Z)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ul=e(T))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[11]||(ae[11]=s=>{e(m)[e(E)]=s,X.value=!1})},null,8,["show","title","upload-config"])],64)}}});const yl=Ut(os,[["__scopeId","data-v-5888e5a7"]]),is={key:0},rs={key:1},us={key:0},ds={class:"flex items-center"},cs={class:"text-base"},ps={class:"flex items-center justify-center cursor-pointer gap-2"},fs={key:1},ms={class:"mt-4"},vs={key:2,class:"mt-2 text-xs"},_s={class:"my-8"},ys={class:"flex items-center justify-between"},gs={class:"text-base"},bs=Be({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(de,{emit:a}){const c=ct(),{t:f}=Ge(),Z=de,ee=a,y=r(dt()),Y=r({}),$=r({}),oe=r(),R=r(),G=r(),j=r([]),T=r([]),v=r({}),O=r({}),E=r(!1),q=r(!1),B=nt(),m=st(),{request:le}=Ze(),{tr:N,pickByTheme:L,editKeysToCamelCase:te}=Je(),{sections:W}=Fe(We()),{isLightTheme:M}=Fe(yt()),z=async()=>{var k,pe,se,Q;q.value=E.value=!0,m.start();const x=await le({url:`/pages/${Z.slug}`});if(x.success&&x.result){if(G.value=x.result.data,(k=G.value)!=null&&k.sections&&Array.isArray((pe=G.value)==null?void 0:pe.sections)){const g={};for(const K of G.value.sections)K&&(g[K.slug]=K.dataSourcePageSectionsData??{});for(const K of G.value.sections)K&&(he.isObject(g)&&he.has(g,K.slug)&&ga(g[K.slug])?Y.value[K.slug]=qt(g[K.slug]):Y.value[K.slug]=qt({}),he.forIn(te(K.dataStructure),(we,be)=>{(!Y.value[K.slug][be]||Array.isArray(Y.value[K.slug][be])&&Y.value[K.slug][be].length==0)&&(be==="index"?Y.value[K.slug][be]=qt({}):Y.value[K.slug][be]=qt([]))}))}if(G.value&&Array.isArray((se=G.value)==null?void 0:se.sections)){const g=G.value.sections;if(Array.isArray((Q=G.value)==null?void 0:Q.sectionsOrder)){j.value=[];for(const K of G.value.sectionsOrder)if(K){const we=g.find(be=>be.slug===K);we&&j.value.push(we)}for(const K of g)j.value.map(we=>we.slug).includes(K.slug)||j.value.push(K)}else j.value=he.cloneDeep(g);if(Array.isArray(G.value.sectionsDisabled))for(const K of G.value.sections)K&&(v.value[K.slug]=!G.value.sectionsDisabled.includes(K.slug));else for(const K of G.value.sections)K&&(v.value[K.slug]=!0)}O.value=he.cloneDeep(v.value),T.value=he.cloneDeep(j.value),$.value=he.cloneDeep(Y.value)}y.value=dt();function b(g){return new Promise(K=>setTimeout(K,g))}await b(5e3),m.finish(),q.value=E.value=!1};z();const w=x=>re("span",{},{default:()=>{var b;return x.id===((b=G.value)==null?void 0:b.id)?f("currentPage"):N(x.title)}}),H=Le(()=>he.isEqual(Y.value,$.value)&&he.isEqual(j.value,T.value)&&he.isEqual(v.value,O.value)),J=async()=>{q.value=!0,m.start();const x=oe.value&&await oe.value(),b=R.value&&await R.value(),k=async()=>{const pe=await le({url:`/pages/${Z.slug}`,method:"put",data:{dispatchData:!0,sectionsData:Y.value,sectionsOrder:j.value.map(se=>se.slug),sectionsDisabled:Object.keys(v.value).filter(se=>!v.value[se])}});pe.success&&pe.result?(B.success(f("success")),z()):B.error(f("anErrorOccurred"))};(!oe.value||x)&&(!R.value||b)?await k():c.warning({title:f("confirm"),content:f("mandatoryFieldsNotFilledInConfirmation"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{await k()}}),m.finish(),q.value=!1},ne=async x=>{c.warning({title:f("confirm"),content:f("confirmDeletePage"),positiveText:f("yes"),negativeText:f("no"),onPositiveClick:async()=>{(await le({method:"delete",url:`/pages/${x.slug}`})).success?(ee("delete",G.value),B.success(f("success"))):B.error(f("anErrorOccurred"))}})},i=r(!1),D=r([]),U=r(!1),p=()=>{D.value=[],j.value.forEach(x=>{x.id&&D.value.push(x.id)}),U.value=!0},h=x=>{x.id&&(D.value.includes(x.id)?D.value=D.value.filter(b=>b!==x.id):D.value.push(x.id))},X=x=>Le({get:()=>x.id?D.value.includes(x.id):!1,set:b=>{x.id&&(b?D.value=D.value.filter(k=>k!==x.id):D.value.includes(x.id)||D.value.push(x.id))}}),d=x=>{x.id&&(D.value=[],j.value.forEach(b=>{b.id&&b.id!==x.id&&D.value.push(b.id)}),u())},u=async()=>{i.value=!0,m.start();const x=await le({url:`/pages/${Z.slug}`,method:"put",data:{sectionsIds:D.value}});x.success&&x.result?(B.success(f("success")),z()):B.error(f("anErrorOccurred")),m.finish(),i.value=!1},C=async(x,b)=>{var pe;i.value=!0,m.start();const k=await le({url:`/sections/${x.slug}/data-source-page`,method:"put",data:{pageId:(pe=G.value)==null?void 0:pe.id,sourcePageId:b}});k.success&&k.result?(B.success(f("success")),z()):B.error(f("anErrorOccurred")),m.finish(),i.value=!1},I=async(x,b)=>{H.value?C(x,b):c.warning({title:f("confirm"),content:f("confirmUpdateDataSourcePage"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:()=>C(x,b)})};return(x,b)=>{const k=ge,pe=ce,se=Te,Q=zt,g=it,K=It,we=Ba,be=Gt,Ve=Nt,Me=lt,fe=Vt,Re=al,Ce=nl,ie=xl("Draggable"),ye=wt,A=Pt,Ie=$t,F=ut;return n(),S(ve,null,[t(K,{to:"#alt-action"},{default:l(()=>[t(g,{align:"center"},{default:l(()=>[t(se,{type:"error",disabled:e(q),onClick:b[0]||(b[0]=ae=>e(G)?ne(e(G)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("delete")),1)]),_:1},8,["disabled"]),t(se,{type:"info",disabled:e(q),onClick:b[1]||(b[1]=ae=>e(G)?x.openFormModal(e(G)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("editPage")),1)]),_:1},8,["disabled"]),t(Q,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(se,{type:"primary",loading:e(q),disabled:e(H),onClick:b[2]||(b[2]=ae=>J())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(A,{appear:"",name:"slide-fade"},{default:l(()=>[e(E)?(n(),S("section",is,[(n(),S(ve,null,Ne(6,ae=>t(we,{key:ae,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),S("section",rs,[e(G)&&Array.isArray(e(G).sections)&&e(G).sections.length?(n(),S("section",us,[t(ie,{list:e(j)},{default:l(()=>[(n(!0),S(ve,null,Ne(e(j),(ae,xe)=>(n(),V(Me,{key:ae.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(Ce,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:ue})=>[t(pe,null,{default:l(()=>[ue?(n(),V(k,{key:0,icon:"fa-solid:chevron-left"})):(n(),V(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>b[8]||(b[8]=[_("span",null,null,-1)])),default:l(()=>[t(Re,{name:"1"},{header:l(()=>[_("div",ds,[t(pe,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(k,{icon:"fa-solid:grip-lines"})]),_:1}),t(be,{checked:e(v)[ae.slug],"onUpdate:checked":ue=>e(v)[ae.slug]=ue,size:"small",class:"mr-4",onClick:b[3]||(b[3]=ot(()=>{},["stop"]))},{default:l(()=>[P(o(e(f)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(Ve,{size:"small",type:"info"},{default:l(()=>[P(o(xe+1),1)]),_:2},1024),t(Q,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",cs,o(e(N)(ae.title)),1)])]),default:l(()=>[(n(!0),S(ve,null,Ne(e(te)(ae.dataStructure),(ue,Se)=>(n(),S(ve,{key:Se},[String(Se)==="index"?(n(),V(Me,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),V(yl,{key:`${e(y)}-${Se}-form-1`,modelValue:e(Y)[ae.slug][Se],"onUpdate:modelValue":ze=>e(Y)[ae.slug][Se]=ze,items:ue,onUpdate:(ze,Ae)=>{oe.value=Ae}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),V(Me,{key:1,title:e(N)(ue.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{quaternary:"",size:"small",onClick:()=>e(Y)[ae.slug][Se].push({})},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),S(ve,null,Ne(e(Y)[ae.slug][Se],(ze,Ae)=>(n(),V(Me,{key:Ae,title:String(Ae+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(se,{type:"error",size:"small",onClick:()=>e(Y)[ae.slug][Se].splice(Ae,1)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),V(yl,{key:`${e(y)}-${Se}-${Ae}-form-2`,modelValue:e(Y)[ae.slug][Se][Ae],"onUpdate:modelValue":je=>e(Y)[ae.slug][Se][Ae]=je,items:ue.items,onUpdate:(je,et)=>{R.value=et}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(g,null,{default:l(()=>[t(se,{size:"small",type:"error",secondary:e(M),onClick:ue=>d(ae)},{default:l(()=>[t(pe,{size:"21"},{default:l(()=>[t(k,{icon:"carbon:close"})]),_:1}),P(" "+o(e(f)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(Q,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(g,{align:"center"},{default:l(()=>[_("span",null,o(e(f)("dataSourcePage")),1),t(fe,{value:ae.dataSourcePageId,options:ae.pages||[],placeholder:e(f)("select"),"render-label":w,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ue=>I(ae,ue)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(Me,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:b[4]||(b[4]=ae=>p())},{default:l(()=>[_("div",ps,[t(pe,{size:"20"},{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1}),P(" "+o(e(f)("addSection")),1)])]),_:1})])):(n(),S("section",fs,[t(Me,{size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(L)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ye,{description:e(f)("noSectionOnThisPage")},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[_("div",ms,[t(se,{size:"small",onClick:b[5]||(b[5]=ae=>p())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(G)?(n(),S("div",vs,[P(o(e(f)("dataRetrievalSlug"))+": ",1),_("b",null,o(e(G).slug),1)])):me("",!0)]))]),_:1}),t(F,{show:e(U),"onUpdate:show":b[6]||(b[6]=ae=>$e(U)?U.value=ae:null),loading:e(i),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(f)("addSections"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:u,onNegativeClick:b[7]||(b[7]=ae=>U.value=!1)},{default:l(()=>[_("section",_s,[t(Ie,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),S(ve,null,Ne(e(W),ae=>(n(),V(Me,{key:ae.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:xe=>h(ae)},{default:l(()=>[_("div",ys,[_("span",gs,o(e(N)(ae.title)),1),t(be,{checked:X(ae).value,"onUpdate:checked":xe=>X(ae).value=xe,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),hs={class:"flex items-center justify-between"},ks={class:"flex flex-col"},ws={class:"text-sm font-bold"},xs=Be({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,tr:Z,displayFormErrors:ee}=Je(),y=_t(de,"show"),{menuItemGroups:Y}=Fe(We()),{loadMenuItemGroups:$}=We(),{isLightTheme:oe}=Fe(yt()),R=r(!1),G=async()=>{R.value=!0,await $(),R.value=!1};G();const j=ct(),T=nt(),v=st(),O=r(!1),E=r(!1),q=r(null),B=r(null),m=r({name:"",description:""}),le={name:[{required:!0,message:a("fillRequired")}]},N=W=>{q.value=he.cloneDeep(W),m.value=he.cloneDeep(W||{name:"",description:""}),E.value=!0},L=async()=>{var W;return(W=B.value)==null||W.validate(async M=>{var z,w,H,J,ne,i;if(!M){v.start(),O.value=!0;const D={name:m.value.name,description:m.value.description},U=await c({method:q.value?"put":"post",url:q.value?`/menu-item-groups/${q.value.id}`:"/menu-item-groups",data:D});if(U.failure&&U.error)switch((H=(w=(z=U.error)==null?void 0:z.response)==null?void 0:w.data)==null?void 0:H.errorCode){case Qe.FORM_INVALID_DATA:ee((i=(ne=(J=U.error)==null?void 0:J.response)==null?void 0:ne.data)==null?void 0:i.data);break;default:T.error(a("anErrorOccurred"))}else T.success(a("success")),G(),E.value=!1;O.value=!1,v.finish()}}),!1},te=async W=>{j.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-item-groups/${W.id}`})).success?(T.success(a("success")),G()):T.error(a("anErrorOccurred"))}})};return(W,M)=>{const z=ge,w=Te,H=it,J=wl,ne=ce,i=lt,D=$t,U=wt,p=Yt,h=ut,X=bt,d=pt,u=ft;return n(),S(ve,null,[t(h,{show:y.value,"onUpdate:show":M[2]||(M[2]=C=>y.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(R),onClick:M[0]||(M[0]=C=>N(null))},{default:l(()=>[t(z,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(R),onClick:M[1]||(M[1]=C=>y.value=!1)},{default:l(()=>[t(z,{icon:"carbon:close",class:"mr-1"}),P(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(p,{show:e(R)},{default:l(()=>[e(Y).length?(n(),V(D,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),S(ve,null,Ne(e(Y),C=>(n(),V(i,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",hs,[_("div",ks,[_("span",ws,o(e(Z)(C.name)),1),t(J,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(o(e(Z)(C.description)),1)]),_:2},1024)]),t(H,null,{default:l(()=>[t(w,{size:"small",type:"warning",secondary:e(oe),onClick:I=>N(C)},{default:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(oe),onClick:I=>te(C)},{default:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),V(i,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(U,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(h,{show:e(E),"onUpdate:show":M[5]||(M[5]=C=>$e(E)?E.value=C:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:M[6]||(M[6]=C=>E.value=!1)},{default:l(()=>[t(u,{ref_key:"formRef",ref:B,model:e(m),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(d,{label:e(a)("name"),path:"name"},{default:l(()=>[t(X,{modelValue:e(m).name,"onUpdate:modelValue":M[3]||(M[3]=C=>e(m).name=C),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:e(a)("description"),path:"description"},{default:l(()=>[t(X,{modelValue:e(m).description,"onUpdate:modelValue":M[4]||(M[4]=C=>e(m).description=C),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Cs=Be({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Ht(["update"],["update:content-type","update:content-id"]),setup(de,{emit:a}){const{t:c}=Ge(),{tr:f,mergeArrays:Z}=Je(),{request:ee}=Ze(),{contentTypes:y,extractItemTitle:Y}=cl(),{loadContentModels:$}=We(),{contentModels:oe}=Fe(We()),R=a;$();const G=_t(de,"content-type"),j=_t(de,"content-id"),T=r(),v=r(!1),O=r([]),E=r([]),q=async(U,p)=>{if(!U.length){E.value=[];return}v.value=!0;const h=await ee({url:`/content-model-items/search/${U}/${p}`});h.success&&h.result&&(E.value=h.result.data),v.value=!1},B=Le(()=>Z(O.value,E.value,"id")),m=r(!1),le=r([]),N=r([]),L=async U=>{if(!U.length){N.value=[];return}m.value=!0;const p=await ee({url:`/news-articles/search/${U}`});p.success&&p.result&&(N.value=p.result.data),m.value=!1},te=Le(()=>Z(le.value,N.value,"id")),{categories:W}=Fe(Zt()),{loadCategories:M}=Zt(),{tags:z}=Fe(Zt()),{loadTags:w}=Zt();Ul(async()=>{var h;M(),w(),m.value=!0;const U=await ee({url:"/news-articles/list",method:"post",data:{ids:j.value?[j.value]:[]}});U.success&&U.result&&(le.value=Z(le.value,U.result.data,"id")),m.value=!1,v.value=!0;const p=await ee({url:"/content-model-items/list",method:"post",data:{ids:j.value?[j.value]:[]}});p.success&&p.result&&(O.value=Z(O.value,p.result.data,"id"),T.value=(h=O.value.find(X=>X.id===j.value))==null?void 0:h.contentModelId),v.value=!1});const H=U=>re("span",{},{default:()=>`${f(U.name)}`}),J=U=>re("span",{},{default:()=>`${f(U.title)}`}),ne=U=>re("span",{},{default:()=>`${f(U.name)}`}),i=U=>re("span",{},{default:()=>f(U.title)}),D=U=>Le(()=>re("span",{},{default:()=>{var p;return Y(U,(p=oe.value)==null?void 0:p.find(h=>h.id===U.contentModelId))}}));return(U,p)=>{const h=Vt,X=jt,d=ht;return n(),V(d,{"x-gap":"12",span:24},{default:l(()=>[t(X,{span:8,label:e(c)("contentType"),path:"contentType"},{default:l(()=>[t(h,{value:G.value,"onUpdate:value":[p[0]||(p[0]=u=>G.value=u),p[1]||(p[1]=()=>j.value=void 0)],options:e(y)||[],placeholder:e(c)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),G.value===e(at).CONTENT_MODEL?(n(),S(ve,{key:0},[t(X,{span:8,label:e(c)("contentModel")},{default:l(()=>[t(h,{value:e(T),"onUpdate:value":p[2]||(p[2]=u=>$e(T)?T.value=u:null),options:e(oe),placeholder:e(c)("search"),"render-label":i,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(X,{span:8,label:e(c)("item"),path:"contentId"},{default:l(()=>[t(h,{value:j.value,"onUpdate:value":[p[3]||(p[3]=u=>j.value=u),p[5]||(p[5]=(u,C)=>R("update",u,C,G.value))],options:e(B)||[],placeholder:e(c)("search"),"render-label":u=>D(u).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[4]||(p[4]=u=>q(u,e(T)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):me("",!0),G.value===e(at).NEWS_ARTICLE?(n(),V(X,{key:1,span:16,label:e(c)("newsArticle"),path:"contentId"},{default:l(()=>[t(h,{value:j.value,"onUpdate:value":[p[6]||(p[6]=u=>j.value=u),p[7]||(p[7]=(u,C)=>R("update",u,C,G.value))],options:e(te)||[],placeholder:e(c)("search"),"render-label":J,loading:e(m),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:L},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):me("",!0),G.value===e(at).NEWS_CATEGORY?(n(),V(X,{key:2,span:16,label:e(c)("newsCategory"),path:"contentId"},{default:l(()=>[t(h,{value:j.value,"onUpdate:value":[p[8]||(p[8]=u=>j.value=u),p[9]||(p[9]=(u,C)=>R("update",u,C,G.value))],options:e(W)||[],placeholder:e(c)("select"),"render-label":H,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):me("",!0),G.value===e(at).NEWS_TAG?(n(),V(X,{key:3,span:16,label:e(c)("newsTag"),path:"contentId"},{default:l(()=>[t(h,{value:j.value,"onUpdate:value":[p[10]||(p[10]=u=>j.value=u),p[11]||(p[11]=(u,C)=>R("update",u,C,G.value))],options:e(z)||[],placeholder:e(c)("select"),"render-label":ne,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):me("",!0)]),_:1})}}}),Is={class:"flex items-center"},$s={class:"flex flex-col"},Vs={class:"text-sm font-bold"},Ts={key:0,class:"text-sm"},zs={class:"text-xs font-normal"},Us={class:"text-xs my-1"},Ss={class:"flex items-center"},Ms={class:"flex flex-col"},As={class:"text-sm font-bold"},Es={class:"text-xs font-normal"},Ds={key:0,class:"mt-4"},Ls={class:"my-8"},Ps={class:"flex items-center justify-between"},Ns={class:"flex flex-col"},Rs={class:"text-sm font-bold"},Os={class:"text-xs font-normal"},qs={class:"flex items-center"},js={key:0},Fs={key:1},Bs={key:2},Ks=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee,pickByTheme:y}=Je(),{isLightTheme:Y}=Fe(yt()),{pages:$,menuItemGroups:oe,contentModels:R}=Fe(We()),{loadPages:G,loadMenuItemGroups:j}=We(),T=st(),v=nt(),O=ct(),E=_t(de,"modelValue"),q=r([]),B=r([]),m=r(!1),le=r(""),N=r(),L=Le(()=>{if(!le.value)return q.value;const Q=q.value.filter(g=>{var K;return g.title.toLowerCase().includes(le.value.toLowerCase())||((K=g.description)==null?void 0:K.toLowerCase().includes(le.value.toLowerCase()))||g.children.some(we=>{var be;return we.title.toLowerCase().includes(le.value.toLowerCase())||((be=we.description)==null?void 0:be.toLowerCase().includes(le.value.toLowerCase()))})});return N.value&&N.value.focus(),Q}),te=async(Q=!1)=>{T.start(),m.value=!0;const g=await c({url:"/menu/items"});if(g.success&&g.result){q.value=g.result.data.filter(K=>{var we;return!K.parentId&&K.menuId===((we=E.value)==null?void 0:we.id)});for(let K=0;K<q.value.length;K++)q.value[K].children=g.result.data.filter(we=>{var be;return we.parentId===q.value[K].id&&we.menuId===((be=E.value)==null?void 0:be.id)});B.value=g.result.data.filter(K=>{var we;return K.menuId!==((we=E.value)==null?void 0:we.id)})}Q&&(G(),await j()),m.value=!1,T.finish()};te(!0);const W=r(12),M=r(1),z=Q=>{W.value=Q},w={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:rt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},H=r(null),J=r(!1),ne=r(!1),i=r(!1),D=r(null),U=r(null),p=r(w),h=Le(()=>{const Q={title:[{required:!0,message:a("fillRequired")}]};return p.value.targetType===rt.PAGE_LINK?(Q.pageId=[{required:!0,message:a("fillRequired")}],Q.path=[{required:!0,message:a("fillRequired")}]):p.value.targetType===rt.EXTERNAL_LINK?Q.url=[{required:!0,message:a("fillRequired")}]:p.value.targetType===rt.CONTENT_LINK&&(Q.contentId=[{required:!0,message:a("fillRequired")}],Q.contentType=[{required:!0,message:a("fillRequired")}]),Q}),X=(Q,g=null)=>{D.value=he.cloneDeep(Q),H.value=g,Q?(p.value=he.cloneDeep(Q),ne.value=!0):(p.value=he.cloneDeep(w),B.value.length>0?i.value=!0:ne.value=!0)},d=async Q=>{O.warning({title:a("confirm"),content:Q.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu/items/${Q.id}`})).success?(v.success(a("success")),te()):v.error(a("anErrorOccurred"))}})},u=async Q=>{var K,we,be,Ve,Me,fe,Re;T.start(),J.value=!0;const g=await c({method:"post",url:"/menu/items",data:{title:Q.title,path:Q.path,url:Q.url,description:Q.description,isActive:!0,isVisible:!0,color:Q.color,icon:Q.icon,position:Q.position,targetType:Q.targetType,parentId:H.value,menuId:(K=E.value)==null?void 0:K.id,sectionId:Q.sectionId,menuItemGroupId:Q.menuItemGroupId,pageId:Q.pageId}});if(g.failure&&g.error)switch((Ve=(be=(we=g.error)==null?void 0:we.response)==null?void 0:be.data)==null?void 0:Ve.errorCode){case Qe.FORM_INVALID_DATA:ee((Re=(fe=(Me=g.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();J.value=!1,T.finish(),i.value=!1},C=async()=>{var Q;return(Q=U.value)==null||Q.validate(async g=>{var K,we,be,Ve,Me,fe,Re;if(!g){const Ce={title:p.value.title,path:p.value.path,url:p.value.url,description:p.value.description,isActive:p.value.isActive,isVisible:p.value.isVisible,color:p.value.color,icon:p.value.icon,position:p.value.position,targetType:p.value.targetType,parentId:H.value,menuId:(K=E.value)==null?void 0:K.id,sectionId:p.value.sectionId,menuItemGroupId:p.value.menuItemGroupId,pageId:p.value.pageId,contentId:p.value.contentId,contentType:p.value.contentType};if(D.value)if(D.value.title!==p.value.title&&q.value.findIndex(ie=>ie.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{T.start(),J.value=!0;const ie=await c({method:"put",url:`/menu/items/${D.value.id}`,data:Ce});ie.success&&ie.result.data&&(v.success(a("success")),te()),J.value=!1,T.finish(),ne.value=!1}else if(q.value.findIndex(ie=>ie.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{T.start(),J.value=!0;const ie=await c({method:"post",url:"/menu/items",data:Ce});if(ie.failure&&ie.error)switch((Ve=(be=(we=ie.error)==null?void 0:we.response)==null?void 0:be.data)==null?void 0:Ve.errorCode){case Qe.FORM_INVALID_DATA:ee((Re=(fe=(Me=ie.error)==null?void 0:Me.response)==null?void 0:fe.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();J.value=!1,T.finish(),ne.value=!1}}}),!1},I=async(Q,g)=>{(await c({method:"put",url:"/menu/items/position",data:{items:g}})).success&&te()},x=Q=>re("span",{},{default:()=>Z(Q.title)}),b=Q=>re("span",{},{default:()=>Z(Q.name)}),k=Q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(Q),pe=Q=>{if(Q.targetType==rt.EXTERNAL_LINK)return Q.url;if(Q.targetType==rt.PAGE_LINK)return Q.path;if(Q.targetType==rt.CONTENT_LINK)switch(Q.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},se=async(Q,g,K)=>{var we;if(!Z(p.value.title))switch(K){case at.CONTENT_MODEL:p.value.title=f(g,(we=R.value)==null?void 0:we.find(be=>be.id===g.contentModelId));break;case at.NEWS_ARTICLE:p.value.title=g.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:p.value.title=g.name;break}};return(Q,g)=>{const K=ge,we=it,be=It,Ve=xa,Me=Nt,fe=zt,Re=lt,Ce=xl("Draggable"),ie=al,ye=nl,A=sl,Ie=wt,F=Pt,ae=$t,xe=ut,ue=bt,Se=pt,ze=Tl,Ae=jt,je=bl,et=hl,xt=ht,De=Ma,He=Vt,qe=ft;return n(),S(ve,null,[t(be,{to:"#alt-action"},{default:l(()=>[t(we,{align:"center"},{default:l(()=>[e(L).length?(n(),V(e(Te),{key:0,type:"primary",onClick:g[0]||(g[0]=_e=>X(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addMenuItem")),1)]),_:1})):me("",!0)]),_:1})]),_:1}),t(Ve,{class:"mt-2 mb-5",onBack:g[2]||(g[2]=_e=>E.value=null)},{title:l(()=>{var _e;return[P(o(e(Z)((_e=E.value)==null?void 0:_e.title)),1)]}),back:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Xe),{ref_key:"searchInputRef",ref:N,value:e(le),"onUpdate:value":g[1]||(g[1]=_e=>$e(le)?le.value=_e:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(F,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(L)&&e(L).length?(n(),S(ve,{key:0},[t(Ce,{list:e(q),onChange:g[3]||(g[3]=_e=>I(_e,e(q)))},{default:l(()=>[(n(!0),S(ve,null,Ne(e(L).slice((e(M)-1)*e(W),e(M)*e(W)),_e=>(n(),V(Re,{key:_e.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ye,{"default-expanded-names":_e.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ke})=>[t(we,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:_e.isActive?"success":"error"},{default:l(()=>[P(o(_e.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:_e.isVisible?"info":"warning"},{default:l(()=>[P(o(_e.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ye(["!mx-0",e(y)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(Y),onClick:ot(Tt=>X(_e),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(Y),onClick:ot(Tt=>d(_e),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"info",secondary:e(Y),onClick:ot(Tt=>X(null,_e.id),["stop"])},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:category"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("subMenuItem"))+" ",1),t(Me,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[P(o(_e.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),g[27]||(g[27]=_("div",{class:"w-6"},null,-1)),t(e(ce),null,{default:l(()=>[Ke?(n(),V(K,{key:0,icon:"fa-solid:chevron-left"})):(n(),V(K,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>g[28]||(g[28]=[_("span",null,null,-1)])),default:l(()=>[t(ie,{name:"1"},{header:l(()=>{var Ke;return[_("div",Is,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(K,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ye(e(y)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",$s,[_("div",null,[_("span",Vs,o(e(Z)(_e.title)),1),_e.group?(n(),S("span",Ts," Â ("+o(e(Z)((Ke=_e.group)==null?void 0:Ke.name))+") ",1)):me("",!0)]),_("small",zs,o(pe(_e)),1)])])]}),default:l(()=>[_e.description?(n(),S(ve,{key:0},[t(fe,{class:Ye([e(y)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),_("div",Us,o(e(Z)(_e.description)),1)],64)):me("",!0),_e.children.length?(n(),S(ve,{key:1},[t(fe,{class:Ye([e(y)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(Ce,{list:_e.children,onChange:Ke=>I(Ke,_e.children)},{default:l(()=>[(n(!0),S(ve,null,Ne(_e.children,Ke=>(n(),V(Re,{key:Ke.id,size:"small",class:"mb-1"},{header:l(()=>[_("div",Ss,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(K,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ye(e(y)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Ms,[_("span",As,o(e(Z)(Ke.title)),1),_("small",Es,o(pe(Ke)),1)])])]),"header-extra":l(()=>[t(we,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:Ke.isActive?"success":"error"},{default:l(()=>[P(o(Ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:Ke.isVisible?"info":"warning"},{default:l(()=>[P(o(Ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ye(["!mx-0",e(y)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(Y),onClick:ot(Tt=>X(Ke,_e.id),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(Y),onClick:ot(Tt=>d(Ke),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):me("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(A,{page:e(M),"onUpdate:page":g[4]||(g[4]=_e=>$e(M)?M.value=_e:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(W),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(W)),"onUpdate:pageSize":z},{prefix:l(()=>[P(o(`${e(q).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),V(Re,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(y)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ie,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[e(le)?(n(),V(K,{key:0,icon:"carbon:search"})):(n(),V(K,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(le)?me("",!0):(n(),S("div",Ds,[t(e(Te),{size:"small",onClick:g[5]||(g[5]=_e=>X(null))},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(xe,{show:e(i),"onUpdate:show":g[6]||(g[6]=_e=>$e(i)?i.value=_e:null),loading:e(J),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(H)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:g[7]||(g[7]=()=>{i.value=!1,ne.value=!0}),onNegativeClick:g[8]||(g[8]=_e=>i.value=!1)},{default:l(()=>[_("section",Ls,[t(ae,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),S(ve,null,Ne(e(B),_e=>(n(),V(Re,{key:_e.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ps,[_("div",Ns,[_("span",Rs,o(e(Z)(_e.title)),1),_("small",Os,o(pe(_e)),1)]),t(e(Te),{size:"small",type:"primary",secondary:e(Y),onClick:Ke=>u(_e)},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(xe,{show:e(ne),"onUpdate:show":g[25]||(g[25]=_e=>$e(ne)?ne.value=_e:null),loading:e(J),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(D)?e(H)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(H)?e(B).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(B).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:C,onNegativeClick:g[26]||(g[26]=_e=>ne.value=!1)},{default:l(()=>[t(qe,{ref_key:"formRef",ref:U,class:"mt-5",model:e(p),rules:e(h),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ue,{modelValue:e(p).title,"onUpdate:modelValue":g[9]||(g[9]=_e=>e(p).title=_e),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Se,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ue,{modelValue:e(p).description,"onUpdate:modelValue":g[10]||(g[10]=_e=>e(p).description=_e),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(ze,{value:e(p).position,"onUpdate:value":g[11]||(g[11]=_e=>e(p).position=_e),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ae,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(et,{value:e(p).isActive,"onUpdate:value":g[12]||(g[12]=_e=>e(p).isActive=_e),name:"isActive",class:"w-full"},{default:l(()=>[t(je,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(je,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Ae,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(et,{value:e(p).isVisible,"onUpdate:value":g[13]||(g[13]=_e=>e(p).isVisible=_e),name:"isVisible",class:"w-full"},{default:l(()=>[t(je,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(je,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(fe,{class:"!my-2"}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(De,{modelValue:e(p).icon,"onUpdate:modelValue":g[14]||(g[14]=_e=>e(p).icon=_e),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Ae,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[_("div",qs,[e(p).color?(n(),S(ve,{key:0},[t(e(Te),{text:"",type:"error",style:{"font-size":"21px"},onClick:g[15]||(g[15]=_e=>e(p).color="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):me("",!0),t(e(el),{value:e(p).color,"onUpdate:value":g[16]||(g[16]=_e=>e(p).color=_e),class:"cursor-pointer",theme:e(Y)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Ae,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(He,{value:e(p).menuItemGroupId,"onUpdate:value":g[17]||(g[17]=_e=>e(p).menuItemGroupId=_e),options:e(oe),placeholder:e(a)("group"),"render-label":b,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ae,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(et,{value:e(p).targetType,"onUpdate:value":g[18]||(g[18]=_e=>e(p).targetType=_e),class:"w-full",size:"small"},{default:l(()=>[t(je,{value:e(rt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[P(o(e(a)("pageLink")),1)]),_:1},8,["value"]),t(je,{value:e(rt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[P(o(e(a)("contentLink")),1)]),_:1},8,["value"]),t(je,{value:e(rt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[P(o(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(F,{appear:"",name:"slide-fade"},{default:l(()=>[e(p).targetType===e(rt).PAGE_LINK?(n(),S("section",js,[t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(He,{value:e(p).pageId,"onUpdate:value":g[19]||(g[19]=_e=>e(p).pageId=_e),options:e($)||[],placeholder:e(a)("selectPage"),"render-label":x,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ae,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var _e;return[t(He,{value:e(p).sectionId,"onUpdate:value":g[20]||(g[20]=Ke=>e(p).sectionId=Ke),options:((_e=(e($)||[]).find(Ke=>Ke.id===e(p).pageId))==null?void 0:_e.sections)||[],placeholder:e(a)("selectSection"),"render-label":x,disabled:!e(p).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Se,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Xe),{value:e(p).path,"onUpdate:value":g[21]||(g[21]=_e=>e(p).path=_e),placeholder:e(a)("path"),"allow-input":k,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(p).targetType===e(rt).CONTENT_LINK?(n(),S("section",Fs,[t(Cs,{"content-type":e(p).contentType,"onUpdate:contentType":g[22]||(g[22]=_e=>e(p).contentType=_e),"content-id":e(p).contentId,"onUpdate:contentId":g[23]||(g[23]=_e=>e(p).contentId=_e),onUpdate:se},null,8,["content-type","content-id"])])):e(p).targetType===e(rt).EXTERNAL_LINK?(n(),S("section",Bs,[t(Se,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Xe),{value:e(p).url,"onUpdate:value":g[24]||(g[24]=_e=>e(p).url=_e),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):me("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ys={class:"flex items-center justify-between"},Gs={class:"flex flex-col"},Hs={class:"text-sm font-bold"},Ws=Be({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{pickByTheme:f,tr:Z,displayFormErrors:ee,formatKey:y}=Je(),Y=_t(de,"show"),{menuLocations:$}=Fe(We()),{loadMenuLocations:oe}=We(),{isLightTheme:R}=Fe(yt()),G=r(!1),j=async()=>{G.value=!0,await oe(),G.value=!1};j();const T=ct(),v=nt(),O=st(),E=r(!1),q=r(!1),B=r(null),m=r(null),le=r({name:"",description:""}),N={name:[{required:!0,message:a("fillRequired")}]},L=M=>{B.value=he.cloneDeep(M),le.value=he.cloneDeep(M||{name:"",description:""}),q.value=!0},te=async()=>{var M;return(M=m.value)==null||M.validate(async z=>{var w,H,J,ne,i,D;if(!z){O.start(),E.value=!0;const U={name:le.value.name,description:le.value.description},p=await c({method:B.value?"put":"post",url:B.value?`/menu-locations/${B.value.id}`:"/menu-locations",data:U});if(p.failure&&p.error)switch((J=(H=(w=p.error)==null?void 0:w.response)==null?void 0:H.data)==null?void 0:J.errorCode){case Qe.FORM_INVALID_DATA:ee((D=(i=(ne=p.error)==null?void 0:ne.response)==null?void 0:i.data)==null?void 0:D.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),j(),q.value=!1;E.value=!1,O.finish()}}),!1},W=async M=>{T.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-locations/${M.id}`})).success?(v.success(a("success")),j()):v.error(a("anErrorOccurred"))}})};return(M,z)=>{const w=ge,H=ce,J=Te,ne=it,i=wl,D=lt,U=$t,p=wt,h=Yt,X=ut,d=Xe,u=pt,C=bt,I=ft;return n(),S(ve,null,[t(X,{show:Y.value,"onUpdate:show":z[2]||(z[2]=x=>Y.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ne,{align:"center"},{default:l(()=>[t(J,{size:"small",type:"primary",disabled:e(G),onClick:z[0]||(z[0]=x=>L(null))},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),P(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(J,{size:"small",type:"error",disabled:e(G),onClick:z[1]||(z[1]=x=>Y.value=!1)},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1}),P(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(h,{show:e(G)},{default:l(()=>[e($).length?(n(),V(U,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),S(ve,null,Ne(e($),x=>(n(),V(D,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Ys,[_("div",Gs,[_("span",Hs,o(x.name),1),t(i,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(o(e(Z)(x.description)),1)]),_:2},1024)]),t(ne,null,{default:l(()=>[t(J,{size:"small",type:"warning",secondary:e(R),onClick:b=>L(x)},{default:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(J,{size:"small",type:"error",secondary:e(R),onClick:b=>W(x)},{default:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),V(D,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(H,null,{default:l(()=>[t(w,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(q),"onUpdate:show":z[5]||(z[5]=x=>$e(q)?q.value=x:null),loading:e(E),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(B)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:z[6]||(z[6]=x=>q.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:m,model:e(le),rules:N,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("key"),path:"name"},{default:l(()=>[t(d,{value:e(le).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":z[3]||(z[3]=x=>e(le).name=e(y)(x))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(C,{modelValue:e(le).description,"onUpdate:modelValue":z[4]||(z[4]=x=>e(le).description=x),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Js={key:2},Xs={class:"flex items-center"},Zs={class:"flex flex-col"},Qs={key:0,class:"text-xs font-normal"},eo={class:"mt-4"},to=Be({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:y,formatKey:Y}=Je(),{isLightTheme:$}=Fe(yt()),{menuLocations:oe}=Fe(We()),{loadMenuLocations:R}=We(),G=st(),j=nt(),T=ct(),v=r(!1),O=r(!1),E=r([]),q=async(U=!1)=>{G.start(),v.value=!0;const p=await c({url:"/menus"});p.success&&p.result&&(E.value=p.result.data),U&&await R(),v.value=!1,G.finish()};q(!0);const B=r(12),m=r(1),le=U=>{B.value=U},N={name:"",title:"",description:"",menuLocationId:void 0},L=r(!1),te=r(!1),W=r(!1),M=r(null),z=r(N),w={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},H=r(null),J=U=>{H.value=he.cloneDeep(U),z.value=he.cloneDeep(U||N),L.value=!0},ne=async()=>{var U;return(U=M.value)==null||U.validate(async p=>{var h,X,d,u,C,I;if(!p){G.start(),O.value=!0;const x={name:z.value.name,title:z.value.title,description:z.value.description,menuLocationId:z.value.menuLocationId},b=await c({method:H.value?"put":"post",url:H.value?`/menus/${H.value.id}`:"/menus",data:x});if(b.failure&&b.error)switch((d=(X=(h=b.error)==null?void 0:h.response)==null?void 0:X.data)==null?void 0:d.errorCode){case Qe.FORM_INVALID_DATA:ee((I=(C=(u=b.error)==null?void 0:u.response)==null?void 0:C.data)==null?void 0:I.data);break;default:j.error(a("anErrorOccurred"))}else j.success(a("success")),q(),L.value=!1;O.value=!1,G.finish()}}),!1},i=async U=>{T.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menus/${U.id}`})).success?(j.success(a("success")),q()):j.error(a("anErrorOccurred"))}})},D=ll("menus-management",()=>({itemsMenu:r(null)}))();return kt(()=>z.value.title,U=>{H.value||z.value.name.length<=21&&(z.value.name=Ua(f(U),{trim:!0,lower:!0,strict:!0}))}),(U,p)=>{const h=ge,X=ce,d=Te,u=it,C=It,I=zt,x=lt,b=sl,k=wt,pe=Pt,se=bt,Q=pt,g=Xe,K=jt,we=Vt,be=ht,Ve=ft,Me=ut;return n(),S(ve,null,[e(D).itemsMenu?me("",!0):(n(),V(C,{key:0,to:"#alt-action"},{default:l(()=>[t(u,{align:"center"},{default:l(()=>[e(y)?(n(),V(d,{key:0,type:"success",onClick:p[0]||(p[0]=fe=>te.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(h,{icon:"carbon:template"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("locations")),1)]),_:1})):me("",!0),t(d,{type:"warning",onClick:p[1]||(p[1]=fe=>W.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(h,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("groups")),1)]),_:1}),e(E)&&e(E).length?(n(),V(d,{key:1,type:"primary",onClick:p[2]||(p[2]=fe=>J(null))},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addMenu")),1)]),_:1})):me("",!0)]),_:1})]),_:1})),e(D).itemsMenu?(n(),V(Ks,{key:1,modelValue:e(D).itemsMenu,"onUpdate:modelValue":p[3]||(p[3]=fe=>e(D).itemsMenu=fe)},null,8,["modelValue"])):(n(),S("section",Js,[t(pe,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(E)&&e(E).length?(n(),S(ve,{key:0},[(n(!0),S(ve,null,Ne(e(E).slice((e(m)-1)*e(B),e(m)*e(B)),fe=>(n(),V(x,{key:fe.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Re;return[_("div",Xs,[t(u,null,{default:l(()=>[t(d,{size:"small",type:"primary",secondary:e($),onClick:ot(Ce=>J(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(h,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(d,{size:"small",type:"error",secondary:e($),onClick:ot(Ce=>i(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(I,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Zs,[_("span",{class:Ye(`${fe.location?"text-sm":"text-base"} font-bold`)},o(e(f)(fe.title)),3),fe.location?(n(),S("small",Qs,o((Re=fe.location)==null?void 0:Re.name),1)):me("",!0)])])]}),"header-extra":l(()=>[t(d,{size:"small",type:"primary",secondary:e($),onClick:ot(Re=>e(D).itemsMenu=fe,["stop"])},{icon:l(()=>[t(X,null,{default:l(()=>[t(h,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(b,{page:e(m),"onUpdate:page":p[4]||(p[4]=fe=>$e(m)?m.value=fe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(B),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(E).length/e(B)),"onUpdate:pageSize":le},{prefix:l(()=>[P(o(`${e(E).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),V(x,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(k,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(X,null,{default:l(()=>[t(h,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",eo,[t(d,{size:"small",onClick:p[5]||(p[5]=fe=>J(null))},{icon:l(()=>[t(X,null,{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(Me,{show:e(L),"onUpdate:show":p[10]||(p[10]=fe=>$e(L)?L.value=fe:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ne,onNegativeClick:p[11]||(p[11]=fe=>L.value=!1)},{default:l(()=>[t(Ve,{ref_key:"formRef",ref:M,model:e(z),rules:w,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Q,{label:e(a)("title"),path:"title"},{default:l(()=>[t(se,{modelValue:e(z).title,"onUpdate:modelValue":p[6]||(p[6]=fe=>e(z).title=fe),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(a)("description"),path:"description"},{default:l(()=>[t(se,{modelValue:e(z).description,"onUpdate:modelValue":p[7]||(p[7]=fe=>e(z).description=fe),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(be,{"x-gap":"12",span:24},{default:l(()=>[t(K,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(g,{value:e(z).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":p[8]||(p[8]=fe=>e(z).name=e(Y)(fe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(K,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(we,{value:e(z).menuLocationId,"onUpdate:value":p[9]||(p[9]=fe=>e(z).menuLocationId=fe),options:e(oe),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ws,{show:e(te),"onUpdate:show":p[12]||(p[12]=fe=>$e(te)?te.value=fe:null)},null,8,["show"]),t(xs,{show:e(W),"onUpdate:show":p[13]||(p[13]=fe=>$e(W)?W.value=fe:null)},null,8,["show"])]))],64)}}}),lo="/creopse/assets/video-thumbnail-86f60cc7.svg";var Bt=(de=>(de.VERTICAL="vertical",de.HORIZONTAL="horizontal",de))(Bt||{}),Ct=(de=>(de.SELF_HOSTED="self-hosted",de.YOUTUBE="youtube",de))(Ct||{});const ao=()=>{const{t:de}=Ge(),a=[{label:de("horizontal"),value:Bt.HORIZONTAL,tagType:"info"},{label:de("vertical"),value:Bt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:Z=>{var ee;return((ee=a.find(y=>y.value===Z))==null?void 0:ee.tagType)||"default"},getVideoDisplayTypeLabel:Z=>{var ee;return(ee=a.find(y=>y.value===Z))==null?void 0:ee.label},videoDisplayTypes:a}},no=ll("video-setting",{state:()=>({settings:[]}),getters:{getSetting:de=>a=>de.settings.find(c=>c.key===a),getSettingValue:de=>(a,c="string")=>{const f=de.settings.find(ee=>ee.key===a);let Z="";switch(c){case"number":Z=f&&parseInt(f.value)&&!isNaN(parseInt(f.value))?parseInt(f.value):0;break;case"boolean":Z=f&&!isNaN(parseInt(f.value))&&parseInt(f.value)>0;break;case"object":Z=f&&f.value?JSON.parse(f.value):{};break;case"array":Z=f&&f.value?JSON.parse(f.value):[];break;default:Z=f&&f.value?f.value:"";break}return Z}},actions:{async initDefaultSettings(){await this.loadSettings();const de={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Ze();await a({url:"/video-settings",method:"put",data:de}),await this.loadSettings()},async loadSettings(){const{request:de}=Ze(),a=await de({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),so={key:1,class:"flex items-center gap-3"},oo={key:0,class:"w-full flex items-center justify-between mt-4"},io={class:"flex items-center gap-3"},ro={key:1,class:"mt-4"},uo={key:0},co={class:"flex items-center justify-center h-full"},po=["src"],fo={class:"text-center text-dimgray text-sm"},mo={key:1,class:"flex items-center justify-center"},vo={class:"mt-5"},_o={class:"w-full flex flex-gap-8 items-center justify-start"},yo=["src"],go={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},bo=["src"],ho=Be({__name:"index",setup(de){const{t:a,locale:c}=Ge(),{tr:f,fileUrl:Z,pickByTheme:ee,displayFormErrors:y}=Je(),{videoDisplayTypes:Y}=ao(),{request:$}=Ze(),{isLightTheme:oe}=Fe(yt()),R=st(),G=nt(),j=ct(),T=vt("appConfig"),v=r(""),O=r(null),E=r(!1),q=r([]),B=ll("videos-management-store",()=>({currentTab:r("all")}))(),m=()=>{z()},le=r(0),N=r(12),L=r(1),te=Le(()=>`/video-items?pageSize=${N.value}&query=${v.value}&source=${B.currentTab}`),W=Ce=>{z(`${te.value}&page=${Ce}`)},M=Ce=>{N.value=Ce,z()},z=async(Ce=null,ie=!1)=>{var A,Ie,F,ae,xe;E.value=!0,R.start();const ye=await $({url:Ce??te.value});ye.success&&ye.result&&(q.value=((A=ye.result.data)==null?void 0:A.videoItems)||[],le.value=((F=(Ie=ye.result.data)==null?void 0:Ie.meta)==null?void 0:F.total)||0,L.value=((xe=(ae=ye.result.data)==null?void 0:ae.meta)==null?void 0:xe.currentPage)||1),R.finish(),E.value=!1};z(null,!0);const w=r(!1),H=r(!1),J=r(null),ne=r(null),i=r({title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""}),D=Le(()=>({title:[{required:i.value.source==Ct.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),U=Ce=>{J.value=he.cloneDeep(Ce),Ce?i.value=he.cloneDeep(Ce):i.value={title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""},H.value=!0},p=async Ce=>{j.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await $({method:"delete",url:`/video-items/force/${Ce.id}`})).success?(G.success(a("success")),z()):G.error(a("anErrorOccurred"))}})},h=async()=>{var Ce;return(Ce=ne.value)==null||Ce.validate(async ie=>{var ye,A,Ie,F,ae,xe;if(!ie)if(J.value){R.start(),w.value=!0;const ue={title:i.value.title,description:i.value.description,visible:i.value.visible,source:i.value.source,displayType:i.value.displayType,thumbnail:i.value.thumbnail,path:i.value.path},Se=await $({method:"put",url:`/video-items/${J.value.id}`,data:ue});Se.success&&Se.result.data&&(G.success(a("success")),z(`${te.value}&page=${L.value}`)),w.value=!1,R.finish(),H.value=!1}else{R.start(),w.value=!0;const ue={title:i.value.title,description:i.value.description,visible:i.value.visible,source:i.value.source,displayType:i.value.displayType,thumbnail:i.value.thumbnail,path:i.value.path},Se=await $({method:"post",url:"/video-items",data:ue});if(Se.failure&&Se.error)switch((Ie=(A=(ye=Se.error)==null?void 0:ye.response)==null?void 0:A.data)==null?void 0:Ie.errorCode){case Qe.FORM_INVALID_DATA:y((xe=(ae=(F=Se.error)==null?void 0:F.response)==null?void 0:ae.data)==null?void 0:xe.data);break;case Qe.REQUEST_PARAMS_MISSING:G.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case Qe.REQUEST_DATA_RETRIEVAL_FAILED:G.error(a("videoDataCantBeRetrieve"));break;case Qe.REQUEST_DATA_ALREADY_EXISTS:G.error(a("videoAlreadyExists"));break;default:G.error(a("anErrorOccurred"))}else G.success(a("success")),z(`${te.value}&page=${L.value}`),H.value=!1;w.value=!1,R.finish()}}),!1},X=r(!1),d=r(!1),u=r(""),C=r(""),I=r("classic"),x=r(!1),b=no(),k=r({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),pe=r(k.value),se=Le(()=>he.isEqual(k.value,pe.value)),Q=async()=>{w.value=!0;const Ce=await $({url:"/video-settings",method:"put",data:k.value});Ce.success&&Ce.result?G.success(a("success")):G.error(a("unableToUpdateSettings")),await g()},g=async()=>{var Ce;R.start(),w.value=!0,await b.loadSettings(),(Ce=b.settings)==null||Ce.forEach(ie=>{k.value[ie.key]!=null&&(k.value[ie.key]=ie.value)}),pe.value=he.cloneDeep(k.value),w.value=!1,R.finish()};g();const K=async()=>{R.start(),w.value=!0,(await $({url:"/video-items/youtube/channel-videos",method:"put"})).success?(G.success(a("success")),await g()):G.error(a("unableToUpdateChannelVideos")),w.value=!1,R.finish()},we=r(!1),be=r(dt()),Ve=r({}),Me=Le(()=>{let Ce=0;for(const ie in Ve.value)Ve.value[ie]&&Ce++;return Ce});function fe(){Ve.value={},z()}const Re=async()=>(Me.value?j.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[Me.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{w.value=!0,R.start();for(const Ce in Ve.value)Ve.value[Ce]&&await $({url:`/video-items/force/${Ce}`,method:"delete"});R.finish(),w.value=!1,G.success(a("success")),Ve.value={},z(null,!0)}}):G.warning(a("noItemSelected")),!1);return(Ce,ie)=>{var rl,ul;const ye=ge,A=ce,Ie=Te,F=Gt,ae=It,xe=Ka,ue=Xe,Se=Vl,ze=Ya,Ae=it,je=lt,et=Rt,xt=Ga,De=ht,He=wl,qe=Nt,_e=Pt,Ke=sl,Tt=Yt,Ot=wt,St=pt,Mt=jt,Ue=Vt,gt=bt,Ft=tl,pl=ft,ol=ut,il=Kt;return n(),S(ve,null,[t(ae,{to:"#alt-action"},{default:l(()=>[e(B).currentTab=="settings"?(n(),V(Ie,{key:0,loading:e(w),disabled:e(se),type:"primary",onClick:Q},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),S("div",so,[t(F,{checked:e(we),"onUpdate:checked":[ie[0]||(ie[0]=s=>$e(we)?we.value=s:null),ie[1]||(ie[1]=s=>{for(const Wt of e(q))Wt.id&&(e(Ve)[Wt.id]=s);be.value=("uuidv4"in Ce?Ce.uuidv4:e(dt))()})]},{default:l(()=>[P(o(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(Ie,{type:"primary",onClick:ie[2]||(ie[2]=s=>U(null))},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(ze,{value:e(B).currentTab,"onUpdate:value":[ie[6]||(ie[6]=s=>e(B).currentTab=s),m],type:"card",size:"medium"},Va({default:l(()=>[t(xe,{name:"all"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:collapse-all"})]),_:1}),P(" "+o(e(a)("all_")),1)]),_:1}),t(xe,{name:e(Ct).SELF_HOSTED},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:document-video"})]),_:1}),P(" "+o(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(xe,{name:e(Ct).YOUTUBE},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:logo-youtube"})]),_:1}),P(" "+o(e(a)("youtube")),1)]),_:1},8,["name"]),t(xe,{name:"settings"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:settings-adjust"})]),_:1}),P(" "+o(e(a)("settings")),1)]),_:1})]),_:2},[e(B).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Se,{class:"!w-[250px]"},{default:l(()=>[t(ue,{ref_key:"searchInputRef",ref:O,value:e(v),"onUpdate:value":[ie[3]||(ie[3]=s=>$e(v)?v.value=s:null),ie[4]||(ie[4]=s=>{s||z()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(Ie,{type:"primary",onClick:ie[5]||(ie[5]=s=>z())},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(Me)>0?(n(),S("section",oo,[_("span",null,o(e(a)("nbItemsSelected",[e(Me)])),1),_("section",io,[t(Ie,{type:"error",size:"small",onClick:Re},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("delete")),1)]),_:1}),t(Ie,{type:"warning",size:"small",onClick:fe},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):me("",!0),e(B).currentTab=="settings"?(n(),S("section",ro,[t(je,{hoverable:"",embedded:""},{header:l(()=>[P(o(e(a)("youtube")),1)]),default:l(()=>[t(De,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(et,null,{default:l(()=>[t(je,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("apiKey")),1),t(ue,{value:e(k).youtubeApiKey,"onUpdate:value":ie[7]||(ie[7]=s=>e(k).youtubeApiKey=s),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(je,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("autoUpdateChannelVideos")),1),t(xt,{value:e(k).youtubeChannelVideosAutoUpdate,"onUpdate:value":ie[8]||(ie[8]=s=>e(k).youtubeChannelVideosAutoUpdate=s),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>ie[28]||(ie[28]=[_("div",{class:"w-6"},null,-1)])),unchecked:l(()=>ie[29]||(ie[29]=[_("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(k).youtubeChannelVideosAutoUpdate=="1"?(n(),S(ve,{key:0},[t(et,null,{default:l(()=>[t(je,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("channelId")),1),t(ue,{value:e(k).youtubeChannelId,"onUpdate:value":ie[9]||(ie[9]=s=>e(k).youtubeChannelId=s),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(je,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ae,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("lastUpdate")),1),_("b",null,o(e(k).youtubeLastChannelVideosUpdate?e(Lt)(e(k).youtubeLastChannelVideosUpdate,{locale:e(c),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(Ie,{strong:"",circle:"",secondary:e(oe),type:"primary",title:e(a)("refresh"),disabled:e(w),onClick:K},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:restart",class:Ye({"animate-spin":e(w)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):me("",!0)]),_:1})]),_:1})])):(n(),V(je,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(q).length&&!e(E)?(n(),S("section",uo,[t(De,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),S(ve,null,Ne(e(q),(s,Wt)=>(n(),V(et,{key:Wt},{default:l(()=>[t(_e,{name:"slide-fade",appear:""},{default:l(()=>[t(je,{bordered:"",hoverable:""},{cover:l(()=>[_("div",co,[_("img",{src:s.thumbnailUrl??e(lo),class:"w-full h-[200px] object-cover"},null,8,po)])]),header:l(()=>[_("div",fo,[t(He,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[s.id?(n(),V(F,{key:e(be),checked:e(Ve)[s.id],"onUpdate:checked":Jt=>e(Ve)[s.id]=Jt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):me("",!0),P(" "+o(e(f)(s.title)),1)]),_:2},1024)])]),action:l(()=>[t(Ae,{justify:"space-between",align:"center"},{default:l(()=>[t(Ae,null,{default:l(()=>[t(qe,{bordered:!1,type:s.visible?"success":"error"},{default:l(()=>[P(o(s.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(qe,{bordered:!1,type:s.displayType==e(Bt).HORIZONTAL?"info":"warning"},{default:l(()=>[P(o(s.displayType==e(Bt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Ae,null,{default:l(()=>[t(Ie,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{u.value=e(a)("video"),C.value=e(Z)(s.path),I.value=s.source==e(Ct).YOUTUBE?"youtube":"classic",d.value=!0}},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),s.source!=e(Ct).YOUTUBE?(n(),V(Ie,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Jt=>U(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):me("",!0),t(Ie,{ternary:"",circle:"",title:e(a)("delete"),onClick:Jt=>p(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ke,{page:e(L),"onUpdate:page":[ie[10]||(ie[10]=s=>$e(L)?L.value=s:null),W],class:"mt-10 justify-center","show-size-picker":"","page-size":e(N),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(le)/e(N)),"onUpdate:pageSize":M},{prefix:l(()=>[P(o(`${e(le)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(E)?(n(),S("section",mo,[t(Tt,{size:"medium"})])):(n(),V(Ot,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(ol,{show:e(H),"onUpdate:show":ie[21]||(ie[21]=s=>$e(H)?H.value=s:null),loading:e(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:h,onNegativeClick:ie[22]||(ie[22]=s=>H.value=!1)},{default:l(()=>[_("div",vo,[t(pl,{ref_key:"formRef",ref:ne,model:e(i),rules:e(D),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(St,{label:e(a)("source"),path:"source"},{default:l(()=>[t(F,{checked:e(i).source,"onUpdate:checked":ie[11]||(ie[11]=s=>e(i).source=s),"checked-value":e(Ct).YOUTUBE,"unchecked-value":e(Ct).SELF_HOSTED},{default:l(()=>[P(o(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(i).source==e(Ct).YOUTUBE?(n(),V(De,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(ue,{value:e(i).path,"onUpdate:value":ie[12]||(ie[12]=s=>e(i).path=s),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(i).displayType,"onUpdate:value":ie[13]||(ie[13]=s=>e(i).displayType=s),placeholder:e(a)("displayType"),options:e(Y),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),S(ve,{key:1},[t(St,{label:e(a)("title"),path:"title"},{default:l(()=>[t(gt,{modelValue:e(i).title,"onUpdate:modelValue":ie[14]||(ie[14]=s=>e(i).title=s),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(St,{label:e(a)("description"),path:"description"},{default:l(()=>[t(gt,{modelValue:e(i).description,"onUpdate:modelValue":ie[15]||(ie[15]=s=>e(i).description=s),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(Mt,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Se,null,{default:l(()=>[t(Ie,{type:"primary",onClick:ie[16]||(ie[16]=()=>{X.value=!0})},{default:l(()=>[P(o(e(a)("select")),1)]),_:1}),t(ue,{value:e(i).path?e(Xt)(e(i).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(i).path?(n(),S(ve,{key:0},[t(Ie,{type:"primary",ghost:"",onClick:ie[17]||(ie[17]=()=>{u.value=e(a)("video"),C.value=e(Z)(e(i).path),I.value="classic",d.value=!0})},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("play")),1)]),_:1}),t(Ie,{type:"primary",ghost:"",onClick:ie[18]||(ie[18]=()=>{e(i).path=""})},{icon:l(()=>[t(A,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("clear")),1)]),_:1})],64)):me("",!0)]),_:1})]),_:1},8,["label"]),t(Mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(i).displayType,"onUpdate:value":ie[19]||(ie[19]=s=>e(i).displayType=s),placeholder:e(a)("displayType"),options:e(Y),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(St,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[_("div",_o,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:ie[20]||(ie[20]=()=>{x.value=!0})},[e(i).thumbnail?(n(),V(Ft,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Pe("border: 1px dashed "+e(ee)("green","white")),src:e(Z)(e(i).thumbnail||"")},null,8,["style","src"])):(n(),S("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Pe("border: 1px dashed "+e(ee)("green","white"))},[t(A,{size:64},{default:l(()=>[t(ye,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ol,{show:e(d),"onUpdate:show":ie[23]||(ie[23]=s=>$e(d)?d.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(u)},{default:l(()=>[e(I)==="youtube"?(n(),S("iframe",{key:0,width:"100%",height:"380",src:e(C),frameborder:"0",allowfullscreen:""},null,8,yo)):(n(),S("video",go,[_("source",{src:e(C)},null,8,bo)]))]),_:1},8,["show","title"]),t(il,{show:e(X),"onUpdate:show":ie[24]||(ie[24]=s=>$e(X)?X.value=s:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((rl=e(T))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[25]||(ie[25]=s=>{e(i).path=s,X.value=!1})},null,8,["show","title","upload-config"]),t(il,{show:e(x),"onUpdate:show":ie[26]||(ie[26]=s=>$e(x)?x.value=s:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(T))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[27]||(ie[27]=s=>{e(i).thumbnail=s,x.value=!1})},null,8,["show","title","upload-config"])],64)}}});const ko=Ut(ho,[["__scopeId","data-v-42abee62"]]),{t:Ee}=ba.global,va=[{key:"maxlength",defaultValue:"",placeholder:Ee("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Ee("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],wo={text:va,textarea:va,number:[{key:"min",defaultValue:"",placeholder:Ee("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Ee("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Ee("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ee("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"format",defaultValue:"",placeholder:Ee("dateFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"library",defaultValue:"all",placeholder:Ee("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ee("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ee("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Ee("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Ee("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ee("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ee("inputType")}]},{t:Oe}=ba.global,xo=[{label:Oe("text"),value:"text"},{label:Oe("i18nText"),value:"i18n-text"},{label:Oe("textarea"),value:"textarea"},{label:Oe("i18nTextarea"),value:"i18n-textarea"},{label:Oe("number"),value:"number"},{label:Oe("checkbox"),value:"checkbox"},{label:Oe("singleSelect"),value:"single-select"},{label:Oe("multiSelect"),value:"multi-select"},{label:Oe("date"),value:"date"},{label:Oe("year"),value:"year"},{label:Oe("editor"),value:"editor"},{label:Oe("i18nEditor"),value:"i18n-editor"},{label:Oe("image"),value:"image"},{label:Oe("gallery"),value:"gallery"},{label:Oe("newsArticle"),value:"news-article"},{label:Oe("newsArticles"),value:"news-articles"},{label:Oe("newsCategory"),value:"news-category"},{label:Oe("newsCategories"),value:"news-categories"},{label:Oe("newsTag"),value:"news-tag"},{label:Oe("newsTags"),value:"news-tags"},{label:Oe("icon"),value:"icon"},{label:Oe("icons"),value:"icons"},{label:Oe("albums"),value:"albums"},{label:Oe("audio"),value:"audio"},{label:Oe("video"),value:"video"},{label:Oe("document"),value:"document"},{label:Oe("file"),value:"file"},{label:Oe("color"),value:"color"},{label:Oe("contentItem"),value:"content-model-item"},{label:Oe("contentItems"),value:"content-model-items"},{label:Oe("menuItemLink"),value:"menu-item-link"},{label:Oe("list"),value:"list"},{label:Oe("i18nList"),value:"i18n-list"}],Co={class:"flex items-center justify-between w-full"},Io={class:"text-base font-semibold"},$o={class:"text-xs text-slate-400"},Vo={class:"text-xs text-slate-400"},To={class:"text-xs text-slate-400"},zo={class:"text-xs text-slate-400"},Uo={class:"text-xs text-slate-400"},So={key:0},Mo={key:0,class:"w-full flex items-center"},Ao={class:"w-full flex items-center"},Eo={class:"w-full"},Do=Be({__name:"Fields",props:Ht({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{tr:c,formatKey:f}=Je(),{isLightTheme:Z}=Fe(yt()),{contentModels:ee}=Fe(We()),y=de,Y=_t(de,"modelValue"),$=vt("renderSelectLabel"),oe=vt("removeCollectionField"),R=vt("removeSingleton"),G=vt("onCreateItemOption"),j=vt("expandedNames",()=>Le(()=>r([]).value));return(T,v)=>{const O=Nt,E=it,q=ge,B=ce,m=Te,le=Xe,N=Rt,L=bt,te=Vt,W=ht,M=zt,z=Gt,w=zl,H=Pt,J=Tl,ne=al,i=nl,D=lt;return n(!0),S(ve,null,Ne(Y.value,(U,p)=>(n(),V(D,{key:`field-${p}`,size:"small",class:"my-2"},{default:l(()=>[t(i,{"expanded-names":e(j)(y.type=="collection"?`c-${y.parentItemIndex}-f-${p}`:`s-${p}`).value,"onUpdate:expandedNames":h=>e(j)(y.type=="collection"?`c-${y.parentItemIndex}-f-${p}`:`s-${p}`).value=h,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(ne,{name:"1"},{header:l(()=>[_("div",Co,[t(E,null,{default:l(()=>[t(O,{size:"small",type:"info"},{default:l(()=>[P(o(p+1),1)]),_:2},1024),_("span",Io,o(e(c)(U.label)),1)]),_:2},1024),t(m,{size:"small",type:"error",secondary:e(Z),onClick:()=>{y.type==="collection"?e(oe)&&e(oe)(y.collectionKey,p):e(R)&&e(R)(p)}},{default:l(()=>[t(B,{class:"mr-1"},{default:l(()=>[t(q,{icon:"carbon:trash-can"})]),_:1}),P(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(W,{span:24,"x-gap":"6"},{default:l(()=>[t(N,{span:6},{default:l(()=>[_("span",$o,o(e(a)("fieldKey")),1),t(le,{value:U.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":h=>U.key=e(f)(h)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(N,{span:10},{default:l(()=>[_("span",Vo,o(e(a)("title")),1),t(L,{modelValue:U.label,"onUpdate:modelValue":h=>U.label=h,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(N,{span:8},{default:l(()=>[_("span",To,o(e(a)("type")),1),t(te,{value:U.type,"onUpdate:value":h=>U.type=h,options:e(xo),placeholder:e(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),t(M,{class:"!mt-4 !mb-2"}),t(W,{span:24,"x-gap":"6"},{default:l(()=>[t(N,{span:10,class:"flex items-center"},{default:l(()=>[t(z,{checked:U.required,"onUpdate:checked":h=>U.required=h,size:"medium"},{default:l(()=>[P(o(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(N,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(U.type)?(n(),S(ve,{key:0},[_("span",zo,o(e(a)("contentModel")),1),t(te,{value:U.defaultValue,"onUpdate:value":h=>U.defaultValue=h,options:e(ee),placeholder:e(a)("contentModel"),"render-label":e($),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),S(ve,{key:1},[_("span",Uo,o(e(a)("defaultValue")),1),U.type==="color"?(n(),S("div",So,[t(e(el),{value:U.defaultValue,"onUpdate:value":h=>U.defaultValue=h,class:"cursor-pointer",theme:e(Z)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):(n(),V(le,{key:1,value:U.defaultValue,"onUpdate:value":h=>U.defaultValue=h,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),U.type==="multi-select"||U.type==="single-select"?(n(),V(M,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[P(o(e(a)("options")),1)]),_:1})):me("",!0),t(H,{name:"slide-fade",appear:""},{default:l(()=>[U.type==="multi-select"||U.type==="single-select"?(n(),S("div",Mo,[t(w,{value:U.options,"onUpdate:value":h=>U.options=h,placeholder:e(a)("addOption"),"on-create":h=>e(G)?e(G)(h,p):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[P(o(e(a)("addOption")),1)]),default:l(({value:h})=>[_("div",Ao,[t(le,{value:h.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":X=>h.value=e(f)(X)},null,8,["value","placeholder","onUpdate:value"]),t(L,{modelValue:h.label,"onUpdate:modelValue":X=>h.label=X,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):me("",!0)]),_:2},1024),(n(!0),S(ve,null,Ne(e(wo),(h,X,d)=>(n(),S(ve,{key:d},[U.type===X?(n(),V(i,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(B,{size:"18"},{default:l(()=>[t(q,{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(ne,{name:"1"},{header:l(()=>[t(M,{"title-placement":"left",class:"!my-4"},{default:l(()=>[P(o(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(H,{name:"slide-fade",appear:""},{default:l(()=>[_("div",Eo,[(n(!0),S(ve,null,Ne(h,u=>(n(),V(W,{key:u.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(N,{span:10},{default:l(()=>[t(le,{value:u.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(N,{span:14},{default:l(()=>[u.isNumber?(n(),V(J,{key:0,value:U.settings[u.key],"onUpdate:value":C=>U.settings[u.key]=C,"default-value":u.defaultValue?parseInt(u.defaultValue):void 0,placeholder:u.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),V(le,{key:1,value:U.settings[u.key],"onUpdate:value":C=>U.settings[u.key]=C,"default-value":u.defaultValue,placeholder:u.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):me("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)}}});const _a=Ut(Do,[["__scopeId","data-v-9f4a4e0a"]]),Lo={class:"text-base"},Po={key:0},No={key:0},Ro={key:0},Oo={class:"flex items-center justify-between w-full"},qo={class:"text-base font-semibold"},jo={class:"text-xs text-slate-400"},Fo={class:"text-xs text-slate-400"},Bo={class:"text-xs text-slate-400"},Aa=Be({__name:"index",props:Ht({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(de){const{t:a}=Ge(),{tr:c,pickByTheme:f,formatKey:Z}=Je(),{isLightTheme:ee}=Fe(yt()),{loadContentModels:y}=We();y();const Y=de,$=_t(de,"show"),oe=st(),R=nt(),G=ct(),j=r(!1),T=r(null),v=r({}),O=r({}),E={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},q=r(!1),B=r(!1),m=r({}),le=d=>Le({get:()=>m.value[d]?["1"]:[],set:u=>{m.value[d]=u.length>0}});kt(()=>B.value,d=>{Object.entries(v.value).forEach(([u,C],I)=>{var x;u!=="index"&&(m.value[`c-${I}`]=d,(x=C==null?void 0:C.items)==null||x.forEach((b,k)=>{m.value[`c-${I}-f-${k}`]=d}))})}),kt(()=>q.value,d=>{Object.entries(v.value).forEach(([u,C],I)=>{u==="index"&&(C==null||C.forEach((x,b)=>{m.value[`s-${b}`]=d}))})});const N=Le(()=>he.isEqual(v.value,O.value)),L=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(he.cloneDeep(E)):v.value.index=[he.cloneDeep(E)]:v.value={index:[he.cloneDeep(E)]}},te=d=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(d,1)},W=()=>{const d=dt();v.value?v.value[d]={key:"",title:"",items:[]}:v.value={[d]:{key:"",title:"",items:[]}}},M=d=>{if(v.value){const{[d]:u,...C}=v.value;v.value=C}},z=d=>{v.value&&v.value[d].items.push(he.cloneDeep(E))},w=(d,u)=>{if(v.value){const C=v.value[d];C&&Array.isArray(C.items)&&C.items.splice(u,1)}},H=d=>d.title&&d.key&&d.key!=="index",J=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(d=>d!=="index").length:0,ne=Le(()=>v.value?Object.keys(v.value).filter(d=>d!=="index"):[]),i=d=>ne.value.indexOf(d),D=r(!1),U=async()=>{const d=he.cloneDeep(v.value),u=he.cloneDeep(v.value);D.value=!1,j.value=!0,oe.start();const C=[];if(he.forIn(d,(I,x)=>{x!=="index"&&C.push(I.key)}),he.forIn(d,(I,x)=>{if(x!=="index"){const b=he.keys(d).filter(k=>k!=="index").indexOf(x);if(I&&I.key){if(I.key==="index")return R.error(a("keyIndexIsReservedInCollections")),D.value=!0,!1;if(C.filter(pe=>pe==I.key).length>1)return R.error(a("collectionKeyIsNotUnique",[I.key])),D.value=!0,!1;if(Array.isArray(I.items))for(const[pe,se]of I.items.entries())if(se.key){if(I.items.filter(g=>g.key===se.key).length>1)return R.error(a("fieldKeyOfCollectionIsNotUnique",[se.key,I.key])),D.value=!0,!1}else return R.error(a("fieldKeyOfCollectionIsRequired",[pe+1,I.key])),D.value=!0,!1}else return R.error(a("collectionKeyIsRequired",[b+1])),D.value=!0,!1}else if(Array.isArray(I))for(const[b,k]of I.entries())if(k.key){if(I.filter(se=>se.key===k.key).length>1)return R.error(a("singletonKeyIsNotUnique",[k.key])),D.value=!0,!1}else return R.error(a("singletonKeyIsRequired",[b+1])),D.value=!0,!1}),D.value){j.value=!1,oe.finish();return}he.forIn(u,(I,x)=>{x!=="index"&&x!==I.key&&Oa(d,x,I.key)}),await Y.updateDataStructure(d),j.value=!1,oe.finish()},p=()=>{he.isEqual(v.value,O.value)?$.value=!1:G.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{$.value=!1}})};kt(()=>Y.rawDataStructure,d=>{v.value=d?he.cloneDeep(d):{},he.forIn(d,(u,C)=>{var I;C!=="index"?(v.value[C].key=C,(I=u==null?void 0:u.items)==null||I.forEach((x,b)=>{v.value[C].items[b].settings||(v.value[C].items[b].settings={})})):u==null||u.forEach((x,b)=>{v.value[C][b].settings||(v.value[C][b].settings={})})}),O.value=he.cloneDeep(v.value)},{immediate:!0,deep:!0});const h=d=>re("span",{},{default:()=>c(d.title)}),X=(d,u)=>({value:`option_${u+1}${d+1}`,label:""});return At("removeCollectionField",w),At("onCreateItemOption",X),At("renderSelectLabel",h),At("removeSingleton",te),At("addSingleton",L),At("expandCollections",B),At("expandSingletons",q),At("expandedNames",le),(d,u)=>{const C=Ca,I=ge,x=ce,b=Te,k=it,pe=lt,se=$t,Q=Rt,g=Nt,K=Xe,we=bt,be=ht,Ve=zt,Me=Ha,fe=al,Re=nl,Ce=ya;return n(),V(Ce,{modelValue:$.value,"onUpdate:modelValue":u[7]||(u[7]=ie=>$.value=ie),"close-on-esc":!1,closable:!1,onOnSizeChange:u[8]||(u[8]=ie=>{T.value=ie})},{header:l(()=>[_("div",Lo,[t(C,{depth:"1"},{default:l(()=>[P(o(e(a)("dataStructure"))+" ",1),d.title?(n(),S("span",Po,"Â -Â "+o(d.title),1)):me("",!0)]),_:1})])]),"header-extra":l(()=>[t(k,{align:"center"},{default:l(()=>[t(b,{type:"success",title:e(a)("save"),loading:e(j),disabled:e(N),onClick:u[0]||(u[0]=ie=>U())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(b,{type:"error",title:e(a)("close"),disabled:e(j),onClick:u[1]||(u[1]=ie=>p())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var ie,ye;return[_("section",{style:Pe(`min-height: ${((ie=e(T))==null?void 0:ie.windowHeight)-((ye=e(T))==null?void 0:ye.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(f)("bg-slate-200","bg-zinc-800")}`)},[t(be,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(Q,{class:"ml-4 mt-2"},{default:l(()=>{var A,Ie;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var F,ae;return[P(o(e(a)("singletons"))+"Â  ",1),(F=e(v).index)!=null&&F.length?(n(),S("span",No," ("+o((ae=e(v).index)==null?void 0:ae.length)+") ",1)):me("",!0)]}),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(b,{size:"small",type:"primary",secondary:e(ee),onClick:u[2]||(u[2]=F=>q.value=!e(q))},{default:l(()=>[t(x,null,{default:l(()=>[e(q)?(n(),V(I,{key:0,icon:"carbon:collapse-categories"})):(n(),V(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(b,{size:"small",type:"primary",secondary:e(ee),onClick:u[3]||(u[3]=F=>L())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),P(" "+o(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:Pe(`max-height: ${((A=e(T))==null?void 0:A.windowHeight)-((Ie=e(T))==null?void 0:Ie.headerHeight)-100}px`)},{default:l(()=>[t(_a,{modelValue:e(v).index,"onUpdate:modelValue":u[4]||(u[4]=F=>e(v).index=F),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(Q,{class:"mr-4 mt-2"},{default:l(()=>{var A,Ie;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>[P(o(e(a)("collections"))+"Â  ",1),J()>0?(n(),S("span",Ro," ("+o(J())+") ",1)):me("",!0)]),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(b,{size:"small",type:"primary",secondary:e(ee),onClick:u[5]||(u[5]=F=>B.value=!e(B))},{default:l(()=>[t(x,null,{default:l(()=>[e(B)?(n(),V(I,{key:0,icon:"carbon:collapse-categories"})):(n(),V(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(b,{size:"small",type:"primary",secondary:e(ee),onClick:u[6]||(u[6]=F=>W())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),P(" "+o(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(se,{style:Pe(`max-height: ${((A=e(T))==null?void 0:A.windowHeight)-((Ie=e(T))==null?void 0:Ie.headerHeight)-100}px`)},{default:l(()=>[(n(!0),S(ve,null,Ne(e(v)||{},(F,ae,xe)=>(n(),S(ve,{key:xe},[ae!="index"?(n(),V(pe,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Re,{"expanded-names":le(`c-${xe}`).value,"onUpdate:expandedNames":ue=>le(`c-${xe}`).value=ue,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(fe,{name:"1"},{header:l(()=>[_("div",Oo,[t(k,null,{default:l(()=>[t(g,{size:"small",type:"success"},{default:l(()=>[P(o(i(ae)+1),1)]),_:2},1024),_("span",qo,o(e(c)(F.title)),1)]),_:2},1024),t(b,{size:"small",type:"error",secondary:e(ee),onClick:ue=>M(ae)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1}),P(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(be,{span:24,"x-gap":"6"},{default:l(()=>[t(Q,{span:6},{default:l(()=>[_("span",jo,o(e(a)("fieldKey")),1),t(K,{value:F.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":ue=>F.key=e(Z)(ue)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(Q,{span:11},{default:l(()=>[_("span",Fo,o(e(a)("title")),1),t(we,{modelValue:F.title,"onUpdate:modelValue":ue=>F.title=ue,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(Q,{span:7},{default:l(()=>[_("span",Bo,o(e(a)("actions")),1),t(b,{block:"",size:"small",type:"primary",disabled:!H(F),secondary:e(ee),class:"w-full",onClick:ue=>z(ae)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),P(" "+o(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Ve,{class:"!my-4.75"}),H(F)?(n(),V(_a,{key:0,modelValue:e(v)[ae].items,"onUpdate:modelValue":ue=>e(v)[ae].items=ue,"parent-item-index":xe,"collection-key":ae,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),V(Me,{key:1,bordered:"",type:"info"},{default:l(()=>[P(o(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):me("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Ko={class:"flex items-center"},Yo={class:"text-base"},Go={class:"mt-2"},Ho={class:"mt-2 text-xs"},Wo=Be({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:y}=Je(),{sections:Y}=Fe(We()),{loadSections:$}=We(),{isLightTheme:oe}=Fe(yt()),R=st(),G=nt(),j=r(!1);$();const T=r(12),v=r(1),O=H=>{T.value=H},E={name:"",title:"",content:"",slug:""},q=r(!1),B=r(null),m=r(E),le={title:[{required:!0,message:a("fillRequired")}]},N=r(null),L=H=>{N.value=he.cloneDeep(H),m.value=he.cloneDeep(H||E),q.value=!0},te=async()=>{var H;return(H=B.value)==null||H.validate(async J=>{var ne,i,D,U,p,h;if(!J){R.start(),j.value=!0;const X={title:m.value.title};N.value||(X.name=he.startCase(he.camelCase(f(m.value.title))).replace(/\s+/g,""));const d=await c({method:N.value?"put":"post",url:N.value?`/sections/${N.value.slug}`:"/sections",data:X});if(d.failure&&d.error)switch((D=(i=(ne=d.error)==null?void 0:ne.response)==null?void 0:i.data)==null?void 0:D.errorCode){case Qe.FORM_INVALID_DATA:ee((h=(p=(U=d.error)==null?void 0:U.response)==null?void 0:p.data)==null?void 0:h.data);break;default:G.error(a("anErrorOccurred"))}else G.success(a("success")),$(),q.value=!1;j.value=!1,R.finish()}}),!1},W=r(null),M=r(!1),z=async H=>{var ne;j.value=!0,R.start();const J=await c({url:`/sections/${(ne=W.value)==null?void 0:ne.slug}`,method:"put",data:{dataStructure:H}});J.success&&J.result?(G.success(a("success")),$(),w(J.result.data)):G.error(a("anErrorOccurred")),j.value=!1,R.finish()},w=H=>{W.value=H,M.value=!0};return(H,J)=>{var se,Q;const ne=ge,i=ce,D=Te,U=it,p=zt,h=Nt,X=al,d=nl,u=lt,C=sl,I=wt,x=bt,b=pt,k=ft,pe=ut;return n(),S(ve,null,[e(Y)&&e(Y).length?(n(),S(ve,{key:0},[(n(!0),S(ve,null,Ne(e(Y).slice((e(v)-1)*e(T),e(v)*e(T)),g=>(n(),V(u,{key:g.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(d,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:K})=>[t(i,null,{default:l(()=>[K?(n(),V(ne,{key:0,icon:"fa-solid:chevron-left"})):(n(),V(ne,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>J[5]||(J[5]=[_("span",null,null,-1)])),default:l(()=>[t(X,{name:"1"},{header:l(()=>[_("div",Ko,[t(U,null,{default:l(()=>[e(y)?(n(),V(D,{key:0,size:"small",type:"primary",secondary:e(oe),onClick:ot(K=>w(g),["stop"])},{default:l(()=>[t(i,{class:"mr-1"},{default:l(()=>[t(ne,{icon:"carbon:data-1"})]),_:1}),P(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):me("",!0),t(D,{size:"small",type:"primary",secondary:e(oe),onClick:ot(K=>L(g),["stop"])},{default:l(()=>[t(i,null,{default:l(()=>[t(ne,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(p,{vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",Yo,o(e(f)(g.title)),1)])]),default:l(()=>[_("div",null,o(e(a)("sectionUsedInXPages",[g.pagesCount])),1),_("section",Go,[(n(!0),S(ve,null,Ne(g.pages,K=>(n(),V(h,{key:K.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[P(o(e(f)(K.title)),1)]),_:2},1024))),128))]),_("div",Ho,[P(o(e(a)("dataRetrievalSlug"))+": ",1),_("b",null,o(g.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(C,{page:e(v),"onUpdate:page":J[0]||(J[0]=g=>$e(v)?v.value=g:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(T),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(Y).length/e(T)),"onUpdate:pageSize":O},{prefix:l(()=>[P(o(`${e(Y).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),V(u,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(I,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(i,null,{default:l(()=>[t(ne,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(pe,{show:e(q),"onUpdate:show":J[2]||(J[2]=g=>$e(q)?q.value=g:null),loading:e(j),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(N)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:J[3]||(J[3]=g=>q.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:B,model:e(m),rules:le,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(b,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(x,{modelValue:e(m).title,"onUpdate:modelValue":J[1]||(J[1]=g=>e(m).title=g),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Aa,{show:e(M),"onUpdate:show":J[4]||(J[4]=g=>$e(M)?M.value=g:null),title:e(f)((se=e(W))==null?void 0:se.title),"raw-data-structure":(Q=e(W))==null?void 0:Q.dataStructure,"update-data-structure":z},null,8,["show","title","raw-data-structure"])],64)}}});const Jo={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(de){const a=de,{t:c}=Ge(),f=r(!1),Z=r(null),ee=r({header:null,results:null});function y({header:O,results:E}){ee.value={header:O,results:E},a.onSuccess&&a.onSuccess(ee.value)}function Y(O){if(O.stopPropagation(),O.preventDefault(),f.value)return;const E=O.dataTransfer.files;if(E.length!==1){console.log(c("supportUploadingOneFile"));return}const q=E[0];if(!v(q))return console.log(c("formatNotSupported")),!1;G(q),O.stopPropagation(),O.preventDefault()}function $(O){O.stopPropagation(),O.preventDefault(),O.dataTransfer.dropEffect="copy"}function oe(){Z.value.click()}function R(O){const q=O.target.files[0];q&&G(q)}function G(O){if(Z.value=null,!a.beforeUpload){j(O);return}a.beforeUpload(O)&&j(O)}function j(O){return f.value=!0,new Promise((E,q)=>{const B=new FileReader;B.onload=m=>{const le=m.target.result,N=on(le,{type:"array"}),L=N.SheetNames[0],te=N.Sheets[L],W=T(te),M=fl.sheet_to_json(te);y({header:W,results:M}),f.value=!1,E()},B.readAsArrayBuffer(O)})}function T(O){const E=[],q=fl.decode_range(O["!ref"]);let B;const m=q.s.r;for(B=q.s.c;B<=q.e.c;++B){const le=O[fl.encode_cell({c:B,r:m})];let N="UNKNOWN "+B;le&&le.t&&(N=fl.format_cell(le)),E.push(N)}return E}function v(O){return/\.(xlsx|xls|csv)$/.test(O.name)}return(O,E)=>{const q=Te;return n(),S("div",null,[_("input",{ref_key:"excelUploadInput",ref:Z,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:R},null,544),_("div",{class:"drop",onDrop:Y,onDragover:$,onDragenter:$},[P(o(e(c)("dropExcelFileHereOr"))+" ",1),t(q,{loading:e(f),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:oe},{default:l(()=>[P(o(e(c)("browse")),1)]),_:1},8,["loading"])],32)])}}},Ea=Ut(Jo,[["__scopeId","data-v-c15025e0"]]),Xo={class:"flex items-center justify-center"},Zo=Be({__name:"Email",setup(de){const a=st(),c=nt(),f=ct(),{displayFormErrors:Z}=Je(),{request:ee}=Ze(),{t:y,locale:Y}=Ge(),$=r(!1),oe=r([]),R=r(""),G=r(),j={pageSize:12,prefix:({itemCount:d})=>re("div",{class:"font-bold"},{default:()=>`${y("total")}: ${d}`})},T=[{type:"selection"},{title:y("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(d){return re("div",{},{default:()=>d.email})}},{title:y("updateAt"),key:"updatedAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.updatedAt,{locale:Y.value,outPattern:"DD MMMM YYYY"})})}},{title:y("createdAt"),key:"createdAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.createdAt,{locale:Y.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:G,placeholder:y("search"),value:R.value,onInput:d=>{R.value=d}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(d){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{L(d)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:y("confirm"),content:y("confirmDeleteEmailAddress"),positiveText:y("yes"),negativeText:y("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/emails/${d.id}`})).success?(c.success(y("success")),O()):c.error(y("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!R.value)return oe.value;const d=oe.value.filter(u=>u.email.toLowerCase().includes(R.value.toLowerCase()));return G.value&&G.value.focus(),d}),O=async()=>{$.value=!0;const d=await ee({url:"/newsletter/emails"});d.success&&d.result&&(oe.value=d.result.data),$.value=!1};O();const E=r(!1),q=r(!1),B=r(null),m=r(null),le=r({email:""}),N={email:[{required:!0,message:y("fillRequired")},{trigger:["input"],validator(d,u){return u&&!Qt.isEmail(u)?new Error(y("invalidEmail")):!0}}]},L=d=>{B.value=he.cloneDeep(d),d?le.value=he.cloneDeep(d):le.value={email:""},q.value=!0},te=async()=>{var d;return(d=m.value)==null||d.validate(async u=>{var C,I,x,b,k,pe;if(!u)if(B.value)if(B.value.email!==le.value.email&&oe.value.findIndex(se=>se.email==le.value.email)>-1)c.error(y("sameEmailAddressMessage"));else{a.start(),E.value=!0;const se={email:le.value.email},Q=await ee({method:"put",url:`/newsletter/emails/${B.value.id}`,data:se});Q.success&&Q.result.data&&(c.success(y("success")),O()),E.value=!1,a.finish(),q.value=!1}else if(oe.value.findIndex(se=>se.email==le.value.email)>-1)c.error(y("sameEmailAddressMessage"));else{a.start(),E.value=!0;const se={email:le.value.email},Q=await ee({method:"post",url:"/newsletter/emails",data:se});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:Z((pe=(k=(b=Q.error)==null?void 0:b.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:c.error(y("anErrorOccurred"))}else c.success(y("success")),O();E.value=!1,a.finish(),q.value=!1}}),!1};let W=null;const M=()=>{W&&(W.destroy(),W=null)};Ta(M);const z=(d,u)=>u.map(C=>d.map(I=>C[I])),w=()=>{W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["no","email","createdAt","updatedAt"];const C=he.sortBy(oe.value.map((x,b)=>({no:b+1,...x})),"email"),I=z(u,C);try{d.export_json_to_excel({header:u,data:I,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),M()}catch{M(),c.error(y("anErrorOccurred"))}})},H=()=>{W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["email"];const C=z(u,[{email:"adresse@email.com"}]);try{d.export_json_to_excel({header:u,data:C,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),M()}catch{M(),c.error(y("anErrorOccurred"))}})},J=r(!1),ne=async({results:d})=>{E.value=!0,a.start(),W||(W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<d.length;u++)d[u].email&&oe.value.findIndex(C=>C.email==d[u].email)==-1&&(W&&(W.content=`${y("pleaseBePatient")}: ${u} ${y("task_s")} / ${d.length}`),await ee({method:"post",url:"/newsletter/emails",data:{email:d[u].email}}));await O(),M(),a.finish(),E.value=!1,J.value=!1},i=r(dt()),D=r([]),U=d=>d.id,p=d=>{D.value=d},h=()=>{D.value=[],i.value=dt()},X=async()=>(D.value.length?f.warning({title:y("confirm"),content:y("deleteSelectionWarningMessage",[D.value.length]),positiveText:y("yes"),negativeText:y("no"),onPositiveClick:async()=>{E.value=!0,a.start();for(let d=0;d<D.value.length;d++)(await ee({url:`/newsletter/emails/${D.value[d]}`,method:"delete"})).success;O(),a.finish(),E.value=!1,c.success(y("success")),h()}}):c.warning(y("noItemSelected")),!1);return(d,u)=>{const C=Ia,I=it,x=It,b=lt,k=Pt,pe=kl,se=gl,Q=pt,g=ft,K=ut,we=Ea;return n(),S(ve,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:u[0]||(u[0]=be=>w())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("export")),1)]),_:1})]),default:l(()=>[P(" "+o(e(y)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:u[1]||(u[1]=be=>J.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:u[2]||(u[2]=be=>L(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(D).length?(n(),V(b,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(y)("nbItemsSelected",[e(D).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:h},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):me("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),V(pe,{key:e(i),columns:T,data:e(v),pagination:j,loading:e($),"single-line":!1,"scroll-x":800,"row-key":U,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(K,{show:e(q),"onUpdate:show":u[4]||(u[4]=be=>$e(q)?q.value=be:null),loading:e(E),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(B)?e(y)("editEmailAddress"):e(y)("addEmailAddress"),"positive-text":e(y)("validate"),"negative-text":e(y)("cancel"),onPositiveClick:te,onNegativeClick:u[5]||(u[5]=be=>q.value=!1)},{default:l(()=>[t(g,{ref_key:"formRef",ref:m,class:"mt-5",model:e(le),rules:N,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Q,{label:e(y)("emailAddress"),path:"email"},{default:l(()=>[t(e(Xe),{value:e(le).email,"onUpdate:value":u[3]||(u[3]=be=>e(le).email=be),placeholder:e(y)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(K,{show:e(J),"onUpdate:show":u[7]||(u[7]=be=>$e(J)?J.value=be:null),loading:e(E),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(y)("import")},{default:l(()=>[t(we,{class:"my-5","on-success":ne}),_("div",Xo,[t(e(Te),{type:"info",size:"small",onClick:u[6]||(u[6]=be=>H())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Qo={class:"flex items-center justify-center"},ei=Be({__name:"Phone",setup(de){const a=st(),c=nt(),f=ct(),{displayFormErrors:Z}=Je(),{request:ee}=Ze(),{t:y,locale:Y}=Ge(),$=r(!1),oe=r([]),R=r(""),G=r(),j={pageSize:12,prefix:({itemCount:d})=>re("div",{class:"font-bold"},{default:()=>`${y("total")}: ${d}`})},T=[{type:"selection"},{title:y("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(d){return re("div",{},{default:()=>d.phone})}},{title:y("updateAt"),key:"updatedAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.updatedAt,{locale:Y.value,outPattern:"DD MMMM YYYY"})})}},{title:y("createdAt"),key:"createdAt",width:125,render(d){return re("div",{},{default:()=>Lt(d.createdAt,{locale:Y.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:G,placeholder:y("search"),value:R.value,onInput:d=>{R.value=d}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(d){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"warning",onClick:()=>{L(d)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:y("confirm"),content:y("confirmDeletePhoneNumber"),positiveText:y("yes"),negativeText:y("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/phones/${d.id}`})).success?(c.success(y("success")),O()):c.error(y("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!R.value)return oe.value;const d=oe.value.filter(u=>u.phone.toLowerCase().includes(R.value.toLowerCase()));return G.value&&G.value.focus(),d}),O=async()=>{$.value=!0;const d=await ee({url:"/newsletter/phones"});d.success&&d.result&&(oe.value=d.result.data),$.value=!1};O();const E=r(!1),q=r(!1),B=r(null),m=r(null),le=r({phone:""}),N={phone:[{required:!0,message:y("fillRequired")},{trigger:["input"],validator(d,u){return u&&!un(u)?new Error(y("invalidNumber")):!0}}]},L=d=>{B.value=he.cloneDeep(d),d?le.value=he.cloneDeep(d):le.value={phone:""},q.value=!0},te=async()=>{var d;return(d=m.value)==null||d.validate(async u=>{var C,I,x,b,k,pe;if(!u)if(B.value)if(B.value.phone!==le.value.phone.replace(/\s+/g,"")&&oe.value.findIndex(se=>se.phone==le.value.phone.replace(/\s+/g,""))>-1)c.error(y("samePhoneNumberMessage"));else{a.start(),E.value=!0;const se={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"put",url:`/newsletter/phones/${B.value.id}`,data:se});Q.success&&Q.result.data&&(c.success(y("success")),O()),E.value=!1,a.finish(),q.value=!1}else if(oe.value.findIndex(se=>se.phone==le.value.phone.replace(/\s+/g,""))>-1)c.error(y("samePhoneNumberMessage"));else{a.start(),E.value=!0;const se={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"post",url:"/newsletter/phones",data:se});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:Z((pe=(k=(b=Q.error)==null?void 0:b.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:c.error(y("anErrorOccurred"))}else c.success(y("success")),O();E.value=!1,a.finish(),q.value=!1}}),!1};let W=null;const M=()=>{W&&(W.destroy(),W=null)};Ta(M);const z=(d,u)=>u.map(C=>d.map(I=>C[I])),w=()=>{W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["no","phone","createdAt","updatedAt"];const C=he.sortBy(oe.value.map((x,b)=>({no:b+1,...x})),"phone"),I=z(u,C);try{d.export_json_to_excel({header:u,data:I,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),M()}catch{M(),c.error(y("anErrorOccurred"))}})},H=()=>{W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(d=>{var u=["phone"];const C=z(u,[{phone:"+22899999999"}]);try{d.export_json_to_excel({header:u,data:C,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),M()}catch{M(),c.error(y("anErrorOccurred"))}})},J=r(!1),ne=async({results:d})=>{E.value=!0,a.start(),W||(W=c.info(y("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<d.length;u++)d[u].phone&&oe.value.findIndex(C=>C.phone.replace(/\s+/g,"")==d[u].phone.replace(/\s+/g,""))==-1&&(W&&(W.content=`${y("pleaseBePatient")}: ${u} ${y("task_s")} / ${d.length}`),await ee({method:"post",url:"/newsletter/phones",data:{phone:d[u].phone.replace(/\s+/g,"")}}));await O(),M(),a.finish(),E.value=!1,J.value=!1},i=r(dt()),D=r([]),U=d=>d.id,p=d=>{D.value=d},h=()=>{D.value=[],i.value=dt()},X=async()=>(D.value.length?f.warning({title:y("confirm"),content:y("deleteSelectionWarningMessage",[D.value.length]),positiveText:y("yes"),negativeText:y("no"),onPositiveClick:async()=>{E.value=!0,a.start();for(let d=0;d<D.value.length;d++)(await ee({url:`/newsletter/phones/${D.value[d]}`,method:"delete"})).success;O(),a.finish(),E.value=!1,c.success(y("success")),h()}}):c.warning(y("noItemSelected")),!1);return(d,u)=>{const C=Ia,I=it,x=It,b=lt,k=Pt,pe=kl,se=gl,Q=rn,g=pt,K=ft,we=ut,be=Ea;return n(),S(ve,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:u[0]||(u[0]=Ve=>w())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("export")),1)]),_:1})]),default:l(()=>[P(" "+o(e(y)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:u[1]||(u[1]=Ve=>J.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:u[2]||(u[2]=Ve=>L(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(D).length?(n(),V(b,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(y)("nbItemsSelected",[e(D).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:h},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):me("",!0)]),_:1}),t(se,null,{default:l(()=>[(n(),V(pe,{key:e(i),columns:T,data:e(v),pagination:j,loading:e($),"single-line":!1,"scroll-x":800,"row-key":U,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(we,{show:e(q),"onUpdate:show":u[4]||(u[4]=Ve=>$e(q)?q.value=Ve:null),loading:e(E),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(B)?e(y)("editPhoneNumber"):e(y)("addPhoneNumber"),"positive-text":e(y)("validate"),"negative-text":e(y)("cancel"),onPositiveClick:te,onNegativeClick:u[5]||(u[5]=Ve=>q.value=!1)},{default:l(()=>[t(K,{ref_key:"formRef",ref:m,class:"mt-5",model:e(le),rules:N,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(g,{label:e(y)("phone"),path:"phone"},{default:l(()=>[t(Q,{modelValue:e(le).phone,"onUpdate:modelValue":u[3]||(u[3]=Ve=>e(le).phone=Ve)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(we,{show:e(J),"onUpdate:show":u[7]||(u[7]=Ve=>$e(J)?J.value=Ve:null),loading:e(E),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(y)("import")},{default:l(()=>[t(be,{class:"my-5","on-success":ne}),_("div",Qo,[t(e(Te),{type:"info",size:"small",onClick:u[6]||(u[6]=Ve=>H())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),ti="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",li={class:"text-base"},ai={class:"text-base"},ni=Be({__name:"DataForm",props:Ht({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(de){const a=de,c=_t(de,"show"),f=_t(de,"data"),Z=st(),ee=nt(),{t:y}=Ge(),{tr:Y,pickByTheme:$,editKeysToCamelCase:oe}=Je(),R=r(null),G=r(!1),j=vt("currentEditItem"),T=Le(()=>he.isEqual(f.value,j==null?void 0:j.value)&&he.isEqual(O.value,q.value)),v=()=>{c.value=!1,G.value=!1},O=r({}),E=r(dt()),q=r({}),B=r(),m=r();kt(()=>c.value,N=>{var L;N&&(ga(f.value.contentModelData)?O.value=qt(f.value.contentModelData):O.value=qt({}),he.forIn(oe(((L=a.contentModel)==null?void 0:L.dataStructure)??{}),(te,W)=>{(!O.value[W]||Array.isArray(O.value[W])&&O.value[W].length==0)&&(W==="index"?O.value[W]=qt({}):O.value[W]=qt([]))}),q.value=he.cloneDeep(O.value),E.value=dt())},{immediate:!0});const le=async()=>{G.value=!0,Z.start();const N=B.value&&await B.value(),L=m.value&&await m.value();(!B.value||N)&&(!m.value||L)?await a.submitData(O.value):ee.error(y("mandatoryFieldsNotFilledIn")),Z.finish(),G.value=!1};return(N,L)=>{const te=Ca,W=bl,M=hl,z=ge,w=ce,H=Te,J=it,ne=lt,i=$t,D=Rt,U=ht,p=ya;return n(),V(p,{modelValue:c.value,"onUpdate:modelValue":L[3]||(L[3]=h=>c.value=h),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=h=>{R.value=h})},{header:l(()=>[_("div",li,[t(te,{depth:"1"},{default:l(()=>{var h;return[P(o(e(Y)((h=a.contentModel)==null?void 0:h.title))+" ",1),_("span",null," Â -Â "+o(e(j)?e(y)("editItem"):e(y)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(J,{align:"center"},{default:l(()=>[_("span",ai,o(e(y)("status"))+":",1),t(M,{value:f.value.isActive,"onUpdate:value":L[0]||(L[0]=h=>f.value.isActive=h),name:"isActive",class:"w-full"},{default:l(()=>[t(W,{value:!1,label:e(y)("hidden"),class:"w-[50%]"},null,8,["label"]),t(W,{value:!0,label:e(y)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=_("div",{class:"w-4"},null,-1)),t(H,{type:"success",title:e(y)("save"),loading:e(G),disabled:e(T),onClick:L[1]||(L[1]=h=>le())},{icon:l(()=>[t(w,null,{default:l(()=>[t(z,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("save")),1)]),_:1},8,["title","loading","disabled"]),t(H,{type:"error",title:e(y)("close"),disabled:e(G),onClick:L[2]||(L[2]=h=>v())},{icon:l(()=>[t(w,null,{default:l(()=>[t(z,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var h,X;return[_("section",{style:Pe(`min-height: ${((h=e(R))==null?void 0:h.windowHeight)-((X=e(R))==null?void 0:X.headerHeight)-5}px`),class:Ye(`w-full h-full ${e($)("bg-slate-200","bg-zinc-800")}`)},[t(U,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(D,{class:"ml-4 mt-2"},{default:l(()=>{var d,u;return[t(i,{style:Pe(`height: ${((d=e(R))==null?void 0:d.windowHeight)-((u=e(R))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),S(ve,null,Ne(e(oe)((C=N.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),S(ve,{key:x},[String(x)==="index"?(n(),V(ne,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),V(yl,{key:`${e(E)}-${x}-form-1`,modelValue:e(O)[x],"onUpdate:modelValue":b=>e(O)[x]=b,items:I,onUpdate:(b,k)=>{B.value=k}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):me("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(D,{class:"mr-4 mt-2"},{default:l(()=>{var d,u;return[t(i,{style:Pe(`height: ${((d=e(R))==null?void 0:d.windowHeight)-((u=e(R))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),S(ve,null,Ne(e(oe)((C=N.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),S(ve,{key:x},[String(x)!=="index"?(n(),V(ne,{key:0,title:e(Y)(I.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{quaternary:"",size:"small",onClick:()=>e(O)[x].push({})},{icon:l(()=>[t(w,null,{default:l(()=>[t(z,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(y)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),S(ve,null,Ne(e(O)[x],(b,k)=>(n(),V(ne,{key:k,title:String(k+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{type:"error",size:"small",onClick:()=>e(O)[x].splice(k,1)},{icon:l(()=>[t(w,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),V(yl,{key:`${e(E)}-${x}-${k}-form-2`,modelValue:e(O)[x][k],"onUpdate:modelValue":pe=>e(O)[x][k]=pe,items:I.items,onUpdate:(pe,se)=>{m.value=se}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):me("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),si={class:"flex items-center justify-between"},oi={class:"flex flex-col"},ii={class:"text-sm font-bold"},ri={class:"text-xs font-normal"},ui=Be({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Ht(["update"],["update:show"]),setup(de,{emit:a}){const{t:c}=Ge(),{request:f}=Ze(),{pickByTheme:Z,tr:ee,displayFormErrors:y,mergeArrays:Y}=Je(),{extractItemTitle:$}=cl(),{loadContentModels:oe}=We(),{contentModels:R}=Fe(We()),{isLightTheme:G}=Fe(yt()),j=ct(),T=nt(),v=st(),O=a;oe();const E=_t(de,"show"),q=r(!1),B=vt("currentEditItem"),m=async U=>{j.warning({title:c("confirm"),content:c("confirmDeleteLink"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{var h,X,d,u,C;v.start(),(await f({method:"put",url:`/content-model/items/${(h=B==null?void 0:B.value)==null?void 0:h.id}`,data:{relatedItems:(u=(d=(X=B==null?void 0:B.value)==null?void 0:X.relatedItems)==null?void 0:d.filter(I=>I.id!==U.id))==null?void 0:u.map(I=>I.id)}})).success?(T.success(c("success")),O("update",(C=B==null?void 0:B.value)==null?void 0:C.id)):T.error(c("anErrorOccurred")),v.finish()}})},le=U=>{var p;return(p=R.value)==null?void 0:p.find(h=>h.id===U.contentModelId)},N=r(!1),L=r(null),te=r({contentModelId:null,itemId:null}),W={contentModelId:[{required:!0,message:c("fillRequired")}],itemId:[{required:!0,message:c("fillRequired")}]},M=async()=>{var U;return(U=L.value)==null||U.validate(async p=>{var h,X,d,u,C,I,x,b,k,pe;if(!p){v.start(),q.value=!0;const se=((X=(h=B==null?void 0:B.value)==null?void 0:h.relatedItems)==null?void 0:X.map(g=>g.id))||[],Q=await f({method:"put",url:`/content-model/items/${(d=B==null?void 0:B.value)==null?void 0:d.id}`,data:{relatedItems:[...se,te.value.itemId]}});if(Q.failure&&Q.error)switch((I=(C=(u=Q.error)==null?void 0:u.response)==null?void 0:C.data)==null?void 0:I.errorCode){case Qe.FORM_INVALID_DATA:y((k=(b=(x=Q.error)==null?void 0:x.response)==null?void 0:b.data)==null?void 0:k.data);break;default:T.error(c("anErrorOccurred"))}else T.success(c("success")),O("update",(pe=B==null?void 0:B.value)==null?void 0:pe.id),N.value=!1;q.value=!1,v.finish()}}),!1},z=U=>re("span",{},{default:()=>ee(U.title)}),w=U=>Le(()=>re("span",{},{default:()=>$(U,le(U))})),H=r(!1),J=r([]),ne=r([]),i=async(U,p)=>{if(!U.length){ne.value=[];return}H.value=!0;const h=await f({url:`/content-model-items/search/${U}/${p}`});h.success&&h.result&&(ne.value=h.result.data),H.value=!1},D=Le(()=>Y(J.value,ne.value,"id").filter(U=>{var p;return U.id!==((p=B==null?void 0:B.value)==null?void 0:p.id)}));return(U,p)=>{const h=ge,X=Te,d=it,u=ce,C=lt,I=$t,x=wt,b=Yt,k=ut,pe=Vt,se=pt,Q=ft;return n(),S(ve,null,[t(k,{show:E.value,"onUpdate:show":p[2]||(p[2]=g=>E.value=g),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(c)("linkContentModelItems")},{"header-extra":l(()=>[t(d,{align:"center"},{default:l(()=>[t(X,{size:"small",type:"primary",disabled:e(q),onClick:p[0]||(p[0]=g=>N.value=!0)},{default:l(()=>[t(h,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+o(e(c)("add")),1)]),_:1},8,["disabled"]),t(X,{size:"small",type:"error",disabled:e(q),onClick:p[1]||(p[1]=g=>E.value=!1)},{default:l(()=>[t(h,{icon:"carbon:close",class:"mr-1"}),P(" "+o(e(c)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(b,{show:e(q)},{default:l(()=>{var g,K;return[(K=(g=e(B))==null?void 0:g.relatedItems)!=null&&K.length?(n(),V(I,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var we;return[(n(!0),S(ve,null,Ne((we=e(B))==null?void 0:we.relatedItems,be=>(n(),V(C,{key:be.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Ve;return[_("div",si,[_("div",oi,[_("span",ii,o(e($)(be,le(be))),1),_("span",ri,o(e(ee)((Ve=le(be))==null?void 0:Ve.title)),1)]),t(d,null,{default:l(()=>[t(X,{size:"small",type:"error",secondary:e(G),onClick:Me=>m(be)},{default:l(()=>[t(u,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),V(C,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(c)("noLinkAdded")},{icon:l(()=>[t(u,null,{default:l(()=>[t(h,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(k,{show:e(N),"onUpdate:show":p[6]||(p[6]=g=>$e(N)?N.value=g:null),loading:e(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(c)("addLink"),"positive-text":e(c)("validate"),"negative-text":e(c)("cancel"),onPositiveClick:M,onNegativeClick:p[7]||(p[7]=g=>N.value=!1)},{default:l(()=>[t(Q,{ref_key:"formRef",ref:L,model:e(te),rules:W,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(se,{label:e(c)("contentModel"),path:"contentModelId"},{default:l(()=>[t(pe,{value:e(te).contentModelId,"onUpdate:value":p[3]||(p[3]=g=>e(te).contentModelId=g),options:e(R),placeholder:e(c)("contentModel"),"render-label":z,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(se,{label:e(c)("itemToLink"),path:"itemId"},{default:l(()=>[t(pe,{value:e(te).itemId,"onUpdate:value":p[4]||(p[4]=g=>e(te).itemId=g),options:e(D)||[],placeholder:e(c)("itemToLink"),"render-label":g=>w(g).value,loading:e(H),disabled:!e(te).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[5]||(p[5]=g=>i(g,e(te).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),di={key:0,class:"w-full flex items-center justify-between gap-4"},ci={class:"flex items-center gap-3"},pi={key:0},fi={class:"flex items-center justify-center h-full"},mi=["src"],vi={class:"text-center text-dimgray text-sm"},_i={key:1,class:"flex items-center justify-center"},yi=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(de){const{t:a}=Ge(),{request:c}=Ze(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee}=Je(),y=ct(),Y=nt(),$=st(),oe=_t(de,"modelValue"),R=r(!1),G=r(!1),j=r(!1),T=r(!1),v=r([]),O=r(0),E=r(12),q=r(1),B=Le(()=>{var h;return`/content-model/items?pageSize=${E.value}&contentModelId=${(h=oe.value)==null?void 0:h.id}`}),m=h=>{N(`${B.value}&page=${h}`)},le=h=>{E.value=h,N()},N=async(h=null,X=!1)=>{var u,C,I,x,b;R.value=!0,$.start();const d=await c({url:h??B.value});d.success&&d.result&&(v.value=((u=d.result.data)==null?void 0:u.items)||[],O.value=((I=(C=d.result.data)==null?void 0:C.meta)==null?void 0:I.total)||0,q.value=((b=(x=d.result.data)==null?void 0:x.meta)==null?void 0:b.currentPage)||1),$.finish(),R.value=!1};N(null,!0);const L=r(null),te=r({title:"",contentModelData:"",isActive:!0}),W=h=>{L.value=he.cloneDeep(h),h?te.value=he.cloneDeep(h):te.value={title:"",contentModelData:"",isActive:!0},j.value=!0},M=h=>{L.value=he.cloneDeep(h),T.value=!0},z=async h=>{await N();const X=v.value.find(d=>d.id===h);X&&M(X)},w=async h=>{y.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-model/items/${h.id}`})).success?(Y.success(a("success")),N()):Y.error(a("anErrorOccurred"))}})},H=async h=>{var u,C,I,x,b,k,pe;$.start(),G.value=!0;const X={title:te.value.title,contentModelData:h,isActive:te.value.isActive,contentModelId:(u=oe.value)==null?void 0:u.id},d=await c({method:L.value?"put":"post",url:L.value?`/content-model/items/${L.value.id}`:"/content-model/items",data:X});if(d.failure&&d.error)switch((x=(I=(C=d.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:ee((pe=(k=(b=d.error)==null?void 0:b.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),N(`${B.value}&page=${q.value}`),j.value=!1;G.value=!1,$.finish()},J=r(!1),ne=r(dt()),i=r({}),D=Le(()=>{let h=0;for(const X in i.value)i.value[X]&&h++;return h});function U(){i.value={},N()}const p=async()=>(D.value?y.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[D.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{G.value=!0,$.start();for(const h in i.value)i.value[h]&&await c({url:`/content-model/items/${h}`,method:"delete"});$.finish(),G.value=!1,Y.success(a("success")),i.value={},N(null,!0)}}):Y.warning(a("noItemSelected")),!1);return At("currentEditItem",L),(h,X)=>{const d=Gt,u=ge,C=ce,I=Te,x=it,b=It,k=xa,pe=wl,se=Nt,Q=lt,g=Pt,K=Rt,we=ht,be=sl,Ve=Yt,Me=wt;return n(),S(ve,null,[t(b,{to:"#alt-action"},{default:l(()=>[t(x,{align:"center"},{default:l(()=>[t(d,{checked:e(J),"onUpdate:checked":[X[0]||(X[0]=fe=>$e(J)?J.value=fe:null),X[1]||(X[1]=fe=>{for(const Re of e(v))Re.id&&(e(i)[Re.id]=fe);ne.value=("uuidv4"in h?h.uuidv4:e(dt))()})],disabled:!e(v).length},{default:l(()=>[P(o(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(I,{type:"primary",onClick:X[2]||(X[2]=fe=>W(null))},{icon:l(()=>[t(C,{size:"18"},{default:l(()=>[t(u,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(k,{class:"mt-2 mb-5",onBack:X[3]||(X[3]=fe=>oe.value=null)},{title:l(()=>{var fe;return[P(o(e(Z)((fe=oe.value)==null?void 0:fe.title)),1)]}),back:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(D)>0?(n(),S("section",di,[_("span",null,o(e(a)("nbItemsSelected",[e(D)])),1),_("section",ci,[t(I,{type:"error",size:"small",onClick:p},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("delete")),1)]),_:1}),t(I,{type:"warning",size:"small",onClick:U},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):me("",!0)]),_:1}),e(v).length&&!e(R)?(n(),S("section",pi,[t(we,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),S(ve,null,Ne(e(v),(fe,Re)=>(n(),V(K,{key:Re},{default:l(()=>[t(g,{name:"slide-fade",appear:""},{default:l(()=>[t(Q,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var Ce;return[_("div",fi,[_("img",{src:((Ce=oe.value)==null?void 0:Ce.imageUrl)??e(ti),class:"w-full h-[200px] object-cover"},null,8,mi)])]}),header:l(()=>[_("div",vi,[t(pe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[fe.id?(n(),V(d,{key:e(ne),checked:e(i)[fe.id],"onUpdate:checked":Ce=>e(i)[fe.id]=Ce,class:"mr-1"},null,8,["checked","onUpdate:checked"])):me("",!0),P(" "+o(e(f)(fe,oe.value)),1)]),_:2},1024)])]),action:l(()=>[t(x,{justify:"space-between",align:"center"},{default:l(()=>[t(se,{bordered:!1,type:fe.isActive?"success":"error"},{default:l(()=>[P(o(fe.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(x,null,{default:l(()=>[t(I,{ternary:"",circle:"",title:e(a)("edit"),onClick:Ce=>W(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("links"),onClick:Ce=>M(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ce=>w(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(be,{page:e(q),"onUpdate:page":[X[4]||(X[4]=fe=>$e(q)?q.value=fe:null),m],class:"mt-10 justify-center","show-size-picker":"","page-size":e(E),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(O)/e(E)),"onUpdate:pageSize":le},{prefix:l(()=>[P(o(`${e(O)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(R)?(n(),S("section",_i,[t(Ve,{size:"medium"})])):(n(),V(Me,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(ni,{show:e(j),"onUpdate:show":X[5]||(X[5]=fe=>$e(j)?j.value=fe:null),data:e(te),"onUpdate:data":X[6]||(X[6]=fe=>$e(te)?te.value=fe:null),"content-model":oe.value,"submit-data":H},null,8,["show","data","content-model"]),t(ui,{show:e(T),"onUpdate:show":X[7]||(X[7]=fe=>$e(T)?T.value=fe:null),onUpdate:z},null,8,["show"])],64)}}}),gi={key:2},bi={class:"flex items-center"},hi={class:"text-base"},ki={class:"mt-4"},wi="previews",xi=Be({__name:"index",setup(de){const{t:a}=Ge(),{request:c}=Ze(),{tr:f,pickByTheme:Z,displayFormErrors:ee,fileUrl:y,isInDevMode:Y,formatKey:$}=Je(),{isLightTheme:oe}=Fe(yt()),{contentModels:R}=Fe(We()),{loadContentModels:G}=We(),j=st(),T=nt(),v=ct(),O=r(!1),E=r(!1),q=vt("appConfig"),B=async()=>{j.start(),O.value=!0,await G(),O.value=!1,j.finish()};B();const m=r(12),le=r(1),N=C=>{m.value=C},L={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},te=r(!1),W=r(null),M=r(L),z={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},w=r(null),H=C=>{w.value=he.cloneDeep(C),M.value=he.cloneDeep(C||L),te.value=!0},J=async()=>{var C;return(C=W.value)==null||C.validate(async I=>{var x,b,k,pe,se,Q;if(!I){j.start(),E.value=!0;const g={name:M.value.name,title:M.value.title,image:M.value.image,description:M.value.description,titleFieldName:M.value.titleFieldName,hasPermalink:M.value.hasPermalink},K=await c({method:w.value?"put":"post",url:w.value?`/content-models/${w.value.id}`:"/content-models",data:g});if(K.failure&&K.error)switch((k=(b=(x=K.error)==null?void 0:x.response)==null?void 0:b.data)==null?void 0:k.errorCode){case Qe.FORM_INVALID_DATA:ee((Q=(se=(pe=K.error)==null?void 0:pe.response)==null?void 0:se.data)==null?void 0:Q.data);break;default:T.error(a("anErrorOccurred"))}else T.success(a("success")),B(),te.value=!1;E.value=!1,j.finish()}}),!1},ne=async C=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-models/${C.id}`})).success?(T.success(a("success")),B()):T.error(a("anErrorOccurred"))}})},i=r(null),D=r(!1),U=async C=>{var x;E.value=!0,j.start();const I=await c({url:`/content-models/${(x=i.value)==null?void 0:x.id}`,method:"put",data:{dataStructure:C}});I.success&&I.result?(T.success(a("success")),B(),p(I.result.data)):T.error(a("anErrorOccurred")),E.value=!1,j.finish()},p=C=>{i.value=C,D.value=!0},h=r(!1),X=async C=>{M.value.image=C,h.value=!1},d=()=>{M.value.image=""},u=ll("content-models-management",()=>({itemsContentModel:r(null)}))();return kt(()=>M.value.title,C=>{w.value||M.value.name.length<=21&&(M.value.name=Ua(f(C),{trim:!0,lower:!0,strict:!0}))}),(C,I)=>{var xe,ue,Se;const x=ge,b=ce,k=Te,pe=It,se=it,Q=zt,g=lt,K=sl,we=wt,be=Pt,Ve=bt,Me=pt,fe=Xe,Re=Rt,Ce=$a,ie=jt,ye=ht,A=Gt,Ie=ft,F=ut,ae=Kt;return n(),S(ve,null,[e(u).itemsContentModel?me("",!0):(n(),V(pe,{key:0,to:"#alt-action"},{default:l(()=>[e(R)&&e(R).length?(n(),V(k,{key:0,type:"primary",onClick:I[0]||(I[0]=ze=>H(null))},{icon:l(()=>[t(b,{size:"18"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addContentModel")),1)]),_:1})):me("",!0)]),_:1})),e(u).itemsContentModel?(n(),V(yi,{key:1,modelValue:e(u).itemsContentModel,"onUpdate:modelValue":I[1]||(I[1]=ze=>e(u).itemsContentModel=ze)},null,8,["modelValue"])):(n(),S("section",gi,[t(be,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(R)&&e(R).length?(n(),S(ve,{key:0},[(n(!0),S(ve,null,Ne(e(R).slice((e(le)-1)*e(m),e(le)*e(m)),ze=>(n(),V(g,{key:ze.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[_("div",bi,[e(Y)?(n(),V(se,{key:0},{default:l(()=>[t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>p(ze),["stop"])},{default:l(()=>[t(b,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:data-1"})]),_:1}),P(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>H(ze),["stop"])},{default:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"error",secondary:e(oe),onClick:ot(Ae=>ne(ze),["stop"])},{default:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):me("",!0),e(Y)?(n(),V(Q,{key:1,vertical:"",class:Ye(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):me("",!0),_("span",hi,o(e(f)(ze.title)),1)])]),"header-extra":l(()=>[t(k,{size:"small",type:"primary",secondary:e(oe),onClick:ot(Ae=>e(u).itemsContentModel=ze,["stop"])},{icon:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(K,{page:e(le),"onUpdate:page":I[2]||(I[2]=ze=>$e(le)?le.value=ze:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(m),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(R).length/e(m)),"onUpdate:pageSize":N},{prefix:l(()=>[P(o(`${e(R).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),V(g,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(we,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",ki,[t(k,{size:"small",onClick:I[3]||(I[3]=ze=>H(null))},{icon:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(F,{show:e(te),"onUpdate:show":I[11]||(I[11]=ze=>$e(te)?te.value=ze:null),loading:e(E),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(w)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:J,onNegativeClick:I[12]||(I[12]=ze=>te.value=!1)},{default:l(()=>[t(Ie,{ref_key:"formRef",ref:W,model:e(M),rules:z,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Me,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Ve,{modelValue:e(M).title,"onUpdate:modelValue":I[4]||(I[4]=ze=>e(M).title=ze),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Ve,{modelValue:e(M).description,"onUpdate:modelValue":I[5]||(I[5]=ze=>e(M).description=ze),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ye,{"x-gap":"12",span:24},{default:l(()=>[t(Re,{span:14},{default:l(()=>[t(Me,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(fe,{value:e(M).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":I[6]||(I[6]=ze=>e(M).name=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(fe,{value:e(M).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":I[7]||(I[7]=ze=>e(M).titleFieldName=e($)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(ie,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(se,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(Ce,{class:"cursor-pointer","object-fit":"cover",style:Pe("border: 1px dashed "+e(Z)("green","white")),size:150,src:e(y)(e(M).image||""),onClick:I[8]||(I[8]=ze=>h.value=!0)},{default:l(()=>[e(M).image?me("",!0):(n(),V(b,{key:0,size:64},{default:l(()=>[t(x,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(M).image?(n(),V(k,{key:0,quaternary:"",onClick:I[9]||(I[9]=ze=>d())},{icon:l(()=>[t(b,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(Me,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(A,{checked:e(M).hasPermalink,"onUpdate:checked":I[10]||(I[10]=ze=>e(M).hasPermalink=ze)},{default:l(()=>[P(o(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ae,{show:e(h),"onUpdate:show":I[13]||(I[13]=ze=>$e(h)?h.value=ze:null),title:e(a)("selectImage"),"upload-config":{folder:wi,limit:0,maxSize:0,baseUrl:((xe=e(q))==null?void 0:xe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:X},null,8,["show","title","upload-config"]),t(Aa,{show:e(D),"onUpdate:show":I[14]||(I[14]=ze=>$e(D)?D.value=ze:null),title:e(f)((ue=e(i))==null?void 0:ue.title),"raw-data-structure":(Se=e(i))==null?void 0:Se.dataStructure,"update-data-structure":U},null,8,["show","title","raw-data-structure"])]))],64)}}});var Et=(de=>(de.NEWS_TAG="news-tag",de.NEWS_CATEGORY="news-category",de.NEWS_ARTICLE="news-article",de.CONTENT_MODEL="content-model",de))(Et||{});const Ci={class:"text-base font-bold"},Ii={class:"text-sm"},$i={class:"text-xs text-slate-400"},Vi={class:"text-xs text-slate-400"},Ti={class:"text-xs text-slate-400"},zi={class:"text-sm"},Ui={class:"text-xs text-slate-400"},Si={class:"text-xs text-slate-400"},Mi={class:"text-xs text-slate-400"},Ai={class:"text-sm"},Ei={class:"text-xs text-slate-400"},Di={class:"text-xs text-slate-400"},Li={class:"text-xs text-slate-400"},Pi={class:"text-base font-bold"},Ni={class:"text-sm"},Ri={class:"text-xs text-slate-400"},Oi={class:"text-xs text-slate-400"},qi={class:"text-xs text-slate-400"},ji=Be({__name:"index",setup(de){const{t:a}=Ge(),{tr:c}=Je(),{request:f}=Ze(),{contentModels:Z,pages:ee}=Fe(We()),{loadContentModels:y,loadPages:Y}=We(),$=nt(),oe=st(),R=[{pathPrefix:"/news/article",contentType:Et.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Et.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Et.NEWS_TAG,contentParam:"slug",pageId:null}],G=r(!1),j=r([]),T=r(R),v=r(),O=Le(()=>Z.value.filter(N=>N.hasPermalink)),E=async(N=!1)=>{oe.start(),G.value=!0,N&&(await y(),await Y());const L=await f({url:"/permalinks"});if(L.success&&L.result){j.value=L.result.data,T.value=he.cloneDeep(R);for(let te=0;te<O.value.length;te++)T.value.push({pathPrefix:`/${O.value[te].slug}`,contentType:Et.CONTENT_MODEL,contentParam:"id",contentId:O.value[te].id,pageId:null});for(let te=0;te<T.value.length;te++)switch(T.value[te].contentType){case Et.NEWS_ARTICLE:case Et.NEWS_CATEGORY:case Et.NEWS_TAG:{const W=j.value.find(M=>M.contentType===T.value[te].contentType);W&&(T.value[te].pathPrefix=W.pathPrefix,T.value[te].contentParam=W.contentParam,T.value[te].pageId=W.pageId,T.value[te].permalinkId=W.id)}break;case Et.CONTENT_MODEL:{const W=j.value.find(M=>M.contentType===T.value[te].contentType&&M.contentId===T.value[te].contentId);W&&(T.value[te].pathPrefix=W.pathPrefix,T.value[te].contentParam=W.contentParam,T.value[te].pageId=W.pageId,T.value[te].permalinkId=W.id)}break}v.value=he.cloneDeep(T.value)}G.value=!1,oe.finish()};E(!0);const q=async()=>{oe.start(),G.value=!0,(await f({method:"put",url:"/permalinks",data:T.value})).success&&($.success(a("success")),E()),G.value=!1,oe.finish()},B=Le(()=>he.isEqual(T.value,v.value)),m=N=>re("span",{},{default:()=>c(N.title)}),le=N=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(N);return(N,L)=>{const te=ge,W=ce,M=Te,z=It,w=Xe,H=Rt,J=Vt,ne=ht,i=lt,D=al,U=nl,p=zt;return n(),S(ve,null,[t(z,{to:"#alt-action"},{default:l(()=>[t(M,{type:"primary",loading:e(G),disabled:e(B),onClick:L[0]||(L[0]=h=>q())},{icon:l(()=>[t(W,null,{default:l(()=>[t(te,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(i,{embedded:"",size:"small"},{default:l(()=>[t(U,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:h})=>[t(W,null,{default:l(()=>[h?(n(),V(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),V(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[10]||(L[10]=[_("span",null,null,-1)])),default:l(()=>[t(D,{name:"1"},{header:l(()=>[_("span",Ci,o(e(a)("news")),1)]),default:l(()=>[t(i,{size:"small"},{header:l(()=>[_("span",Ii,o(e(a)("articles")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[_("span",$i,o(e(a)("pathPrefix")),1),t(w,{value:e(T)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=h=>e(T)[0].pathPrefix=h),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Vi,o(e(a)("contentParam")),1),t(w,{value:e(T)[0].contentParam,"onUpdate:value":L[2]||(L[2]=h=>e(T)[0].contentParam=h),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Ti,o(e(a)("contentPage")),1),t(J,{value:e(T)[0].pageId,"onUpdate:value":L[3]||(L[3]=h=>e(T)[0].pageId=h),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(i,{size:"small"},{header:l(()=>[_("span",zi,o(e(a)("categories")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[_("span",Ui,o(e(a)("pathPrefix")),1),t(w,{value:e(T)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=h=>e(T)[1].pathPrefix=h),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Si,o(e(a)("contentParam")),1),t(w,{value:e(T)[1].contentParam,"onUpdate:value":L[5]||(L[5]=h=>e(T)[1].contentParam=h),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Mi,o(e(a)("contentPage")),1),t(J,{value:e(T)[1].pageId,"onUpdate:value":L[6]||(L[6]=h=>e(T)[1].pageId=h),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(i,{size:"small"},{header:l(()=>[_("span",Ai,o(e(a)("tags")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[_("span",Ei,o(e(a)("pathPrefix")),1),t(w,{value:e(T)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=h=>e(T)[2].pathPrefix=h),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Di,o(e(a)("contentParam")),1),t(w,{value:e(T)[2].contentParam,"onUpdate:value":L[8]||(L[8]=h=>e(T)[2].contentParam=h),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[_("span",Li,o(e(a)("contentPage")),1),t(J,{value:e(T)[2].pageId,"onUpdate:value":L[9]||(L[9]=h=>e(T)[2].pageId=h),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(p,{class:"!my-2"}),e(O).length&&e(T).length>3?(n(),V(i,{key:0,embedded:"",size:"small"},{default:l(()=>[t(U,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:h})=>[t(W,null,{default:l(()=>[h?(n(),V(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),V(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[11]||(L[11]=[_("span",null,null,-1)])),default:l(()=>[t(D,{name:"1"},{header:l(()=>[_("span",Pi,o(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),S(ve,null,Ne(e(O),(h,X)=>(n(),V(i,{key:h.id,size:"small"},{header:l(()=>[_("span",Ni,o(e(c)(h.title)),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[_("span",Ri,o(e(a)("pathPrefix")),1),t(w,{value:e(T)[X+3].pathPrefix,"onUpdate:value":d=>e(T)[X+3].pathPrefix=d,"allow-input":le,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[_("span",Oi,o(e(a)("contentParam")),1),t(w,{value:e(T)[X+3].contentParam,"onUpdate:value":d=>e(T)[X+3].contentParam=d,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[_("span",qi,o(e(a)("contentPage")),1),t(J,{value:e(T)[X+3].pageId,"onUpdate:value":d=>e(T)[X+3].pageId=d,options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):me("",!0)],64)}}}),Fi={class:"w-full"},Bi=Be({__name:"Campaign",setup(de){const a=st(),c=nt(),f=ct(),Z=ha(),{displayFormErrors:ee,ckEditorToolbarItems:y}=Je(),{request:Y}=Ze(),{t:$,locale:oe}=Ge(),R=r(!1),G=r([]),j=r([]),T=r([]),v=r([]),O=r(""),E=r(),q={pageSize:12,prefix:({itemCount:i})=>re("div",{class:"font-bold"},{default:()=>`${$("total")}: ${i}`})},B=[{title:$("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(i){return re("div",{},{default:()=>i.title})}},{title:$("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(i){return re("small",{},{default:()=>i.subject})}},{title:$("numberOfRecipients"),key:"recipients",width:200,render(i){return re("div",{},{default:()=>i.recipients.length})},sortOrder:!1,sorter:"default"},{title:$("updateAt"),key:"updatedAt",width:150,render(i){return re("div",{},{default:()=>Lt(i.updatedAt,{locale:oe.value,outPattern:"DD MMMM YYYY"})})}},{title:$("createdAt"),key:"createdAt",width:150,render(i){return re("div",{},{default:()=>Lt(i.createdAt,{locale:oe.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Xe,{ref:E,placeholder:$("search"),value:O.value,onInput:i=>{O.value=i}},{suffix:()=>re(ce,{},{default:()=>re(ge,{icon:"carbon:search"})})}),key:"actions",width:175,render(i){return re("div",{class:"flex justify-end items-center w-full"},[re(Te,{size:"small",type:"primary",title:$("history"),onClick:()=>{W.value=i,te.value=!0},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"mdi:history"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"info",title:$("launchCampaign"),onClick:()=>{const D=f.info({title:$("launchCampaign"),content:$("confirmLaunchCampaign",[i.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:$("yes"),negativeText:$("cancel"),onPositiveClick:async()=>{var X,d,u,C,I,x,b;D.loading=!0;const U=await Y({url:"/email",method:"post",data:{title:i.title,subject:i.subject,content:i.content,recipients:i.recipients.filter(k=>Qt.isEmail(k)),tags:[]}}),p=(X=Z.getSettingValue("phone","string"))==null?void 0:X.split(",")[0],h=await Y({url:"/sms",method:"post",data:{from:p.replace(/\s+/g,""),content:i.rawContent,recipients:i.recipients.filter(k=>!Qt.isEmail(k))}});if(U.failure&&U.error)switch((C=(u=(d=U.error)==null?void 0:d.response)==null?void 0:u.data)==null?void 0:C.errorCode){case Qe.FORM_INVALID_DATA:c.error($("invalidData"));break;default:c.error($("sendingFailed"))}else if(h.failure&&h.error)switch((b=(x=(I=h.error)==null?void 0:I.response)==null?void 0:x.data)==null?void 0:b.errorCode){case Qe.FORM_INVALID_DATA:c.error($("invalidData"));break;default:c.error($("sendingFailed"))}else{const k=i.history||[];k.push({id:dt(),date:qa(new Date,{locale:oe.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+U.result.message+" Phone: "+h.result.message});const pe=await Y({method:"put",url:`/newsletter/campaigns/${i.id}`,data:{history:k}});pe.success&&pe.result.data?(c.success($("success")),le()):c.error($("anErrorOccurred"))}D.loading=!1}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"mdi:send"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"warning",title:$("edit"),onClick:()=>{H(i)},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(Te,{size:"small",type:"error",title:$("delete"),onClick:()=>{f.warning({title:$("confirm"),content:$("confirmDeleteCampaign"),positiveText:$("yes"),negativeText:$("no"),onPositiveClick:async()=>{(await Y({method:"delete",url:`/newsletter/campaigns/${i.id}`})).success?(c.success($("success")),le()):c.error($("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],m=Le(()=>{if(!O.value)return v.value;const i=v.value.filter(D=>D.title.toLowerCase().includes(O.value.toLowerCase())||D.subject.toLowerCase().includes(O.value.toLowerCase()));return E.value&&E.value.focus(),i}),le=async(i=!1)=>{R.value=!0;const D=await Y({url:"/newsletter/campaigns"});if(D.success&&D.result&&(v.value=D.result.data),i){const U=await Y({url:"/newsletter/emails"});U.success&&U.result&&(G.value=U.result.data);const p=await Y({url:"/newsletter/phones"});p.success&&p.result&&(j.value=p.result.data),T.value=[...G.value.map(h=>({recipient:h.email,type:"email"})),...j.value.map(h=>({recipient:h.phone,type:"phone"}))]}R.value=!1};le(!0);const N=r(!1),L=r(!1),te=r(!1),W=r(null),M=r(null),z=r({title:"",subject:"",content:"",rawContent:"",recipients:[]}),w={title:[{required:!0,message:$("fillRequired")}],subject:[{required:!0,message:$("fillRequired")}],content:[{required:!0,message:$("fillRequired")}],rawContent:[{required:!0,message:$("fillRequired")}],recipients:[{required:!0,message:$("fillRequired")}]},H=i=>{W.value=he.cloneDeep(i),i?z.value=he.cloneDeep(i):z.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},L.value=!0},J=async()=>{var i;return(i=M.value)==null||i.validate(async D=>{var U,p,h,X,d,u;if(!D)if(W.value)if(W.value.title!==z.value.title&&v.value.findIndex(C=>C.title==z.value.title)>-1)c.error($("sameCampaignTitleMessage"));else{a.start(),N.value=!0;const C={title:z.value.title,subject:z.value.subject,content:z.value.content,rawContent:z.value.rawContent,recipients:z.value.recipients},I=await Y({method:"put",url:`/newsletter/campaigns/${W.value.id}`,data:C});I.success&&I.result.data&&(c.success($("success")),le()),N.value=!1,a.finish(),L.value=!1}else if(v.value.findIndex(C=>C.title==z.value.title)>-1)c.error($("sameCampaignTitleMessage"));else{a.start(),N.value=!0;const C={title:z.value.title,subject:z.value.subject,content:z.value.content,rawContent:z.value.rawContent,recipients:z.value.recipients},I=await Y({method:"post",url:"/newsletter/campaigns",data:C});if(I.failure&&I.error)switch((h=(p=(U=I.error)==null?void 0:U.response)==null?void 0:p.data)==null?void 0:h.errorCode){case Qe.FORM_INVALID_DATA:ee((u=(d=(X=I.error)==null?void 0:X.response)==null?void 0:d.data)==null?void 0:u.data);break;default:c.error($("anErrorOccurred"))}else c.success($("success")),le();N.value=!1,a.finish(),L.value=!1}}),!1},ne=(i,D)=>he.isEqual(i.slice().sort(),D.slice().sort());return(i,D)=>{const U=It,p=kl,h=gl,X=pt,d=za,u=Gt,C=Vt,I=ft,x=ut,b=Wa,k=Ja,pe=Xa,se=$t,Q=wt;return n(),S(ve,null,[t(U,{to:"#alt-action"},{default:l(()=>[t(e(Te),{type:"primary",onClick:D[0]||(D[0]=g=>H(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+o(e($)("addCampaign")),1)]),_:1})]),_:1}),t(h,null,{default:l(()=>[t(p,{columns:B,data:e(m),pagination:q,loading:e(R),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(x,{show:e(L),"onUpdate:show":D[9]||(D[9]=g=>$e(L)?L.value=g:null),loading:e(N),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e($)("editCampaign"):e($)("addCampaign"),"positive-text":e($)("validate"),"negative-text":e($)("cancel"),onPositiveClick:J,onNegativeClick:D[10]||(D[10]=g=>L.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:M,class:"mt-5",model:e(z),rules:w,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(X,{label:e($)("title"),path:"title"},{default:l(()=>[t(e(Xe),{value:e(z).title,"onUpdate:value":D[1]||(D[1]=g=>e(z).title=g),placeholder:e($)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("subject"),path:"subject"},{default:l(()=>[t(e(Xe),{value:e(z).subject,"onUpdate:value":D[2]||(D[2]=g=>e(z).subject=g),placeholder:e($)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("content"),path:"content"},{default:l(()=>[_("div",Fi,[t(d,{modelValue:e(z).content,"onUpdate:modelValue":D[3]||(D[3]=g=>e(z).content=g),"toolbar-items":e(y),placeholder:e($)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(X,{label:e($)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Xe),{value:e(z).rawContent,"onUpdate:value":D[4]||(D[4]=g=>e(z).rawContent=g),placeholder:e($)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("recipients"),path:"recipients"},{default:l(()=>[t(C,{value:e(z).recipients,"onUpdate:value":D[8]||(D[8]=g=>e(z).recipients=g),options:e(T),placeholder:e($)("recipients"),loading:e(R),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(u,{size:"large",class:"w-full","default-checked":e(T).length&&ne(e(z).recipients,e(T).filter(g=>g.type=="email").map(g=>g.recipient)),"onUpdate:checked":D[5]||(D[5]=g=>{g?e(z).recipients=e(T).filter(K=>K.type=="email").map(K=>K.recipient):e(z).recipients=e(z).recipients.filter(K=>!("_v"in i?i._v:e(Qt)).isEmail(K))})},{default:l(()=>[P(o(e($)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),D[12]||(D[12]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(T).length&&ne(e(z).recipients,e(T).filter(g=>g.type=="phone").map(g=>g.recipient)),"onUpdate:checked":D[6]||(D[6]=g=>{g?e(z).recipients=e(T).filter(K=>K.type=="phone").map(K=>K.recipient):e(z).recipients=e(z).recipients.filter(K=>("_v"in i?i._v:e(Qt)).isEmail(K))})},{default:l(()=>[P(o(e($)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),D[13]||(D[13]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(T).length&&e(z).recipients.length===e(T).length,"onUpdate:checked":D[7]||(D[7]=g=>{g?e(z).recipients=e(T).filter(K=>K.recipient).map(K=>K.recipient):e(z).recipients=[]})},{default:l(()=>[P(o(e($)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(x,{show:e(te),"onUpdate:show":D[11]||(D[11]=g=>$e(te)?te.value=g:null),loading:e(N),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e($)("history")},{default:l(()=>{var g,K;return[(K=(g=e(W))==null?void 0:g.history)!=null&&K.length?(n(),V(se,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(pe,{hoverable:""},{default:l(()=>{var we;return[(n(!0),S(ve,null,Ne((we=e(W))==null?void 0:we.history.slice().reverse(),be=>(n(),V(k,{key:be.id},{default:l(()=>[t(b,{title:be.date,"content-style":"margin-top: 10px;"},{default:l(()=>[P(o(be.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),V(Q,{key:1,description:e($)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),Ki={id:"header-btn"},Yi={key:1,id:"alt-action"},Gi={key:"contact-info"},Hi={class:"text-xs"},Wi={class:"text-xs"},Ji={class:"text-xs"},Xi={class:"text-xs"},Zi={class:"text-xs"},Qi={class:"text-xs"},er={class:"text-xs"},tr={class:"flex items-center gap-2 w-full"},lr={key:"appearance"},ar={class:"text-sm"},nr={class:"text-sm"},sr={class:"flex flex-col items-center justify-center text-gray-400"},or={class:"text-sm"},ir={class:"flex flex-col items-center justify-center text-gray-400"},rr={class:"text-sm"},ur={class:"flex flex-col items-center justify-center text-gray-400"},dr={class:"text-sm"},cr={class:"flex flex-col items-center justify-center text-gray-400"},pr={class:"text-sm"},fr={class:"text-sm"},mr={class:"flex flex-col items-center justify-center text-gray-400"},vr={class:"text-sm"},_r={class:"flex flex-col items-center justify-center text-gray-400"},yr={class:"text-sm"},gr={class:"flex flex-col items-center justify-center text-gray-400"},br={class:"text-sm"},hr={class:"flex flex-col items-center justify-center text-gray-400"},kr={class:"text-sm"},wr={class:"text-sm"},xr={class:"flex flex-col items-center justify-center text-gray-400"},Cr={class:"text-sm"},Ir={class:"flex flex-col items-center justify-center text-gray-400"},$r={class:"text-sm"},Vr={class:"flex items-center justify-between"},Tr={class:"font-bold"},zr={class:"flex items-center"},Ur={class:"flex items-center justify-between"},Sr={class:"font-bold"},Mr={class:"flex items-center"},Ar={class:"flex items-center justify-between"},Er={class:"font-bold"},Dr={class:"flex items-center"},Lr={key:"social-networks"},Pr={class:"text-xs"},Nr={key:"newsletter-email"},Rr={key:"newsletter-phone"},Or={key:"newsletter-campaign"},qr={key:"ads"},jr={key:"videos"},Fr={key:"content-models"},Br={key:"menus"},Kr={key:"content-permalinks"},Yr={key:"page-sections"},Gr=Be({name:ja.CONTENT_MANAGEMENT.NAME}),Hr=Be({...Gr,setup(de){$l(ye=>({"5850c9b7":e(G)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],c=ye=>a.includes(ye),{t:f}=Ge(),Z=dn(),ee=ct(),y=nt(),Y=st(),{request:$}=Ze(),{displayFormErrors:oe,appPrimaryColor:R,appSecondaryColor:G,pickByTheme:j,fileUrl:T,isLgScreen:v,isMdScreen:O,isSmScreen:E,isXlScreen:q,is2XlScreen:B,tr:m}=Je(),le=yt(),N=ha(),{pages:L}=Fe(We()),{loadPages:te,loadSections:W}=We(),M=vt("appConfig"),z=r(!1),w=r({name:"",icon:"",adminIcon:"",oneColorIcon:"",oneColorAdminIcon:"",logo:"",adminLogo:"",oneColorLogo:"",oneColorAdminLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),H=r(w.value),J=ll("content-management",()=>({currentMenuItemKey:r("contact-info")}))(),ne=(ye,A)=>()=>re(ce,{color:J.currentMenuItemKey==A?"white":""},{default:()=>re(ge,{icon:ye})}),i=(ye,A)=>()=>re("span",{class:`${J.currentMenuItemKey==A?"text-white":""}`,id:he.camelCase(A)},{default:()=>ye}),D=Le(()=>{const ye=[{label:i(f("contactInfo"),"contact-info"),key:"contact-info",icon:ne("carbon:identification","contact-info")},{label:i(f("appearance"),"appearance"),key:"appearance",icon:ne("carbon:color-palette","appearance")},{label:i(f("socialNetworks"),"social-networks"),key:"social-networks",icon:ne("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:i(f("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ne("carbon:at","newsletter-email")},{label:i(f("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ne("carbon:phone","newsletter-phone")},{label:i(f("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ne("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:i(f("ads"),"ads"),key:"ads",icon:ne("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:i(f("videos"),"videos"),key:"videos",icon:ne("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:i(f("menusManagement"),"menus"),key:"menus",icon:ne("carbon:menu","menus")},{label:i(f("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ne("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:i(f("contentModels"),"content-models"),key:"content-models",icon:ne("carbon:model-alt","content-models")},{label:i(f("pageSections"),"page-sections"),key:"page-sections",icon:ne("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const A of L.value)ye.push({label:i(`${f("page")} ${m(A.title)}`,`${A.slug}-page`),key:`${A.slug}-page`,icon:ne("carbon:document",`${A.slug}-page`)});return ye.push({key:"divider",type:"divider"},{label:i(f("addPage"),"add-new-page"),key:"add-new-page",icon:ne("carbon:add-alt","add-new-page")}),ye}),U=Le(()=>he.isEqual(w.value,H.value)),p=Le(()=>le.contentLayoutSize.height-200),h=Le(()=>le.isLightTheme?"light":"dark"),X=r(null),d={email:[{required:!1,message:f("fillRequired")},{trigger:["input"],validator(ye,A){return A&&!Qt.isEmail(A)?new Error(f("invalidEmail")):!0}}]},u=r();kt(()=>u.value,ye=>{w.value.additionalInfo=JSON.stringify(ye||"[]")},{deep:!0});const C=r(null),I={},x=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],b=r("logos"),k=r(!1),pe=async ye=>{switch(b.value){case"logos":w.value.logo=ye;break;case"icons":w.value.icon=ye;break;case"admin-logos":w.value.adminLogo=ye;break;case"admin-icons":w.value.adminIcon=ye;break;case"monochrome-logos":w.value.oneColorLogo=ye;break;case"monochrome-icons":w.value.oneColorIcon=ye;break;case"monochrome-admin-logos":w.value.oneColorAdminLogo=ye;break;case"monochrome-admin-icons":w.value.oneColorAdminIcon=ye;break;case"dark-backgrounds":w.value.adminAuthDarkBg=ye;break;case"light-backgrounds":w.value.adminAuthLightBg=ye;break}k.value=!1},se={name:"",title:"",content:"",slug:""},Q=r(!1),g=r(null),K=r(se),we={title:[{required:!0,message:f("fillRequired")}]},be=r(null),Ve=ye=>{be.value=he.cloneDeep(ye),K.value=he.cloneDeep(ye||se),Q.value=!0},Me=async()=>{var ye;return(ye=g.value)==null||ye.validate(async A=>{var Ie,F,ae,xe,ue,Se,ze;if(!A){Y.start(),z.value=!0;const Ae={title:K.value.title};be.value||(Ae.name=he.startCase(he.camelCase(m(K.value.title))).replace(/\s+/g,""));const je=await $({method:be.value?"put":"post",url:be.value?`/pages/${be.value.slug}`:"/pages",data:Ae});if(je.failure&&je.error)switch((ae=(F=(Ie=je.error)==null?void 0:Ie.response)==null?void 0:F.data)==null?void 0:ae.errorCode){case Qe.FORM_INVALID_DATA:oe((Se=(ue=(xe=je.error)==null?void 0:xe.response)==null?void 0:ue.data)==null?void 0:Se.data);break;default:y.error(f("anErrorOccurred"))}else y.success(f("success")),te(),J.currentMenuItemKey=`${(ze=je.result.data)==null?void 0:ze.slug}-page`,Q.value=!1;z.value=!1,Y.finish()}}),!1},fe=async(ye=!1)=>{var A;Y.start(),z.value=!0,te(),ye&&W(),await N.loadInformation(),(A=N.items)==null||A.forEach(Ie=>{w.value[Ie.key]!=null&&(w.value[Ie.key]=Ie.value)}),H.value=he.cloneDeep(w.value);try{u.value=JSON.parse(w.value.additionalInfo||"[]")}catch{u.value=[]}z.value=!1,Y.finish()};fe(!0),Ul(()=>{Z.params.key&&c(Z.params.key)&&(J.currentMenuItemKey=Z.params.key)});const Re=async()=>{z.value=!0;const ye=await $({url:"/app-information",method:"put",data:w.value});ye.success&&ye.result?y.success(f("success")):y.error(f("unableToUpdateSettings")),await fe()},Ce=["contact-info","appearance","social-networks"];kt(()=>J.currentMenuItemKey,(ye,A)=>{ye==="add-new-page"?(J.currentMenuItemKey=A,Ve(null)):Ce.includes(A)&&!Ce.includes(ye)&&(U.value||ee.warning({title:f("confirm"),content:f("marketInfoDiscardChangesConfirm"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{J.currentMenuItemKey=A}}))});const ie=r();return kt(()=>[O.value,E.value,v.value,q.value],([ye,A,Ie,F])=>{ie.value=ye||A||Ie||F,setTimeout(()=>{ie.value=void 0},500)},{immediate:!0}),(ye,A)=>{var Mt;const Ie=Te,F=it,ae=Za,xe=Qa,ue=Xe,Se=pt,ze=jt,Ae=ht,je=bt,et=zl,xt=ft,De=lt,He=$a,qe=Rt,_e=zt,Ke=en,Tt=Da,Ot=Kt,St=ut;return n(),S(ve,null,[t(Tt,null,{"header-extra":l(()=>[t(F,null,{default:l(()=>[_("div",Ki,[Ce.includes(e(J).currentMenuItemKey)?(n(),V(Ie,{key:0,loading:e(z),disabled:e(U),type:"primary",onClick:Re},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("save")),1)]),_:1},8,["loading","disabled"])):(n(),S("div",Yi))])]),_:1})]),default:l(()=>[t(De,{embedded:""},{default:l(()=>[t(Ke,{style:Pe(`height: ${e(p)}px`)},{default:l(()=>[t(Ke,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t(xe,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(ie),"default-collapsed":!e(B),"collapsed-width":64,"native-scrollbar":!1,width:e(B)?300:275},{default:l(()=>[t(ae,{value:e(J).currentMenuItemKey,"onUpdate:value":A[0]||(A[0]=Ue=>e(J).currentMenuItemKey=Ue),"collapsed-width":64,"collapsed-icon-size":22,options:e(D)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ke,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Na,{name:"slide-fade"},{default:l(()=>[dl(_("section",Gi,[t(De,{embedded:""},{default:l(()=>[t(De,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"contactInfoFormRef",ref:X,model:e(w),rules:d,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{path:"name"},{label:l(()=>[_("b",Hi,o(e(f)("websiteName")),1)]),default:l(()=>[t(ue,{value:e(w).name,"onUpdate:value":A[1]||(A[1]=Ue=>e(w).name=Ue),placeholder:e(f)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Ae,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"email"},{label:l(()=>[_("b",Wi,o(e(f)("email")),1)]),default:l(()=>[t(ue,{value:e(w).email,"onUpdate:value":A[2]||(A[2]=Ue=>e(w).email=Ue),placeholder:e(f)("email"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(ze,{span:12,path:"phone"},{label:l(()=>[_("b",Ji,o(e(f)("phone")),1)]),default:l(()=>[t(ue,{value:e(w).phone,"onUpdate:value":A[3]||(A[3]=Ue=>e(w).phone=Ue),placeholder:e(f)("phone"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"address"},{label:l(()=>[_("span",Xi,[_("b",null,o(e(f)("address")),1)])]),default:l(()=>[t(ue,{value:e(w).address,"onUpdate:value":A[4]||(A[4]=Ue=>e(w).address=Ue),placeholder:e(f)("address"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ae,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"postalCode"},{label:l(()=>[_("b",Zi,o(e(f)("postalCode")),1)]),default:l(()=>[t(ue,{value:e(w).postalCode,"onUpdate:value":A[5]||(A[5]=Ue=>e(w).postalCode=Ue),placeholder:e(f)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Se,{path:"description"},{label:l(()=>[_("b",Qi,o(e(f)("description")),1)]),default:l(()=>[t(je,{modelValue:e(w).description,"onUpdate:modelValue":A[6]||(A[6]=Ue=>e(w).description=Ue),placeholder:e(f)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Se,{path:"additionalInfo"},{label:l(()=>[_("b",er,o(e(f)("additionalInfo")),1)]),default:l(()=>[t(et,{value:e(u),"onUpdate:value":A[7]||(A[7]=Ue=>$e(u)?u.value=Ue:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[P(o(e(f)("add")),1)]),default:l(({value:Ue})=>[_("div",tr,[t(ue,{value:Ue.name,"onUpdate:value":gt=>Ue.name=gt,placeholder:e(f)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(ue,{value:Ue.content,"onUpdate:value":gt=>Ue.content=gt,placeholder:e(f)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="contact-info"]]),dl(_("section",lr,[t(De,{embedded:""},{default:l(()=>[t(De,{segmented:"",size:"small"},{header:l(()=>[_("span",ar,o(e(f)("website")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",nr,o(e(f)("logo")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).logo?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).logo),onClick:A[8]||(A[8]=()=>{b.value="logos",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[9]||(A[9]=()=>{b.value="logos",k.value=!0})},[_("div",sr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).logo?(n(),V(Ie,{key:2,quaternary:"",onClick:A[10]||(A[10]=()=>e(w).logo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",or,o(e(f)("icon")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).icon?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).icon),onClick:A[11]||(A[11]=()=>{b.value="icons",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[12]||(A[12]=()=>{b.value="icons",k.value=!0})},[_("div",ir,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).icon?(n(),V(Ie,{key:2,quaternary:"",onClick:A[13]||(A[13]=()=>e(w).icon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",rr,o(e(f)("logoMonochrome")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorLogo?(n(),V(He,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).oneColorLogo),onClick:A[14]||(A[14]=()=>{b.value="monochrome-logos",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[15]||(A[15]=()=>{b.value="monochrome-logos",k.value=!0})},[_("div",ur,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).oneColorLogo?(n(),V(Ie,{key:2,quaternary:"",onClick:A[16]||(A[16]=()=>e(w).oneColorLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",dr,o(e(f)("iconMonochrome")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorIcon?(n(),V(He,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).oneColorIcon),onClick:A[17]||(A[17]=()=>{b.value="monochrome-icons",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[18]||(A[18]=()=>{b.value="monochrome-icons",k.value=!0})},[_("div",cr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).oneColorIcon?(n(),V(Ie,{key:2,quaternary:"",onClick:A[19]||(A[19]=()=>e(w).oneColorIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(De,{segmented:"",size:"small"},{header:l(()=>[_("span",pr,o(e(f)("administration")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",fr,o(e(f)("logo")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminLogo?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).adminLogo),onClick:A[20]||(A[20]=()=>{b.value="admin-logos",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[21]||(A[21]=()=>{b.value="admin-logos",k.value=!0})},[_("div",mr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).adminLogo?(n(),V(Ie,{key:2,quaternary:"",onClick:A[22]||(A[22]=()=>e(w).adminLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",vr,o(e(f)("icon")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminIcon?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).adminIcon),onClick:A[23]||(A[23]=()=>{b.value="admin-icons",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[24]||(A[24]=()=>{b.value="admin-icons",k.value=!0})},[_("div",_r,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).adminIcon?(n(),V(Ie,{key:2,quaternary:"",onClick:A[25]||(A[25]=()=>e(w).adminIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",yr,o(e(f)("logoMonochrome")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorAdminLogo?(n(),V(He,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).oneColorAdminLogo),onClick:A[26]||(A[26]=()=>{b.value="monochrome-admin-logos",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[27]||(A[27]=()=>{b.value="monochrome-admin-logos",k.value=!0})},[_("div",gr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).oneColorAdminLogo?(n(),V(Ie,{key:2,quaternary:"",onClick:A[28]||(A[28]=()=>e(w).oneColorAdminLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",br,o(e(f)("iconMonochrome")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorAdminIcon?(n(),V(He,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).oneColorAdminIcon),onClick:A[29]||(A[29]=()=>{b.value="monochrome-admin-icons",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[30]||(A[30]=()=>{b.value="monochrome-admin-icons",k.value=!0})},[_("div",hr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).oneColorAdminIcon?(n(),V(Ie,{key:2,quaternary:"",onClick:A[31]||(A[31]=()=>e(w).oneColorAdminIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(De,{segmented:"",size:"small"},{header:l(()=>[_("span",kr,o(e(f)("adminAuthPagesBg")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",wr,o(e(f)("lightMode")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthLightBg?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).adminAuthLightBg),onClick:A[32]||(A[32]=()=>{b.value="light-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[33]||(A[33]=()=>{b.value="light-backgrounds",k.value=!0})},[_("div",xr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).adminAuthLightBg?(n(),V(Ie,{key:2,quaternary:"",onClick:A[34]||(A[34]=()=>e(w).adminAuthLightBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1}),t(qe,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Cr,o(e(f)("darkMode")),1)]),default:l(()=>[t(F,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthDarkBg?(n(),V(He,{key:0,class:"cursor-pointer","object-fit":"contain",style:Pe("border: 1px dashed "+e(j)(e(R),"white")),size:125,src:e(T)(e(w).adminAuthDarkBg),onClick:A[35]||(A[35]=()=>{b.value="dark-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),S("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Pe(`border: 1px dashed ${e(j)(e(R),"white")}; width: 125px; height: 125px`),onClick:A[36]||(A[36]=()=>{b.value="dark-backgrounds",k.value=!0})},[_("div",Ir,[t(e(ce),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(w).adminAuthDarkBg?(n(),V(Ie,{key:2,quaternary:"",onClick:A[37]||(A[37]=()=>e(w).adminAuthDarkBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+o(e(f)("clear")),1)]),_:1})):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[_("span",$r,o(e(f)("adminColors")),1)]),default:l(()=>[t(Ae,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(qe,null,{default:l(()=>[_("div",Vr,[_("span",Tr,o(e(f)("baseColor")),1),_("div",zr,[e(w).primaryColor?(n(),S(ve,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[38]||(A[38]=Ue=>e(w).primaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(_e,{vertical:""})],64)):me("",!0),t(e(el),{value:e(w).primaryColor,"onUpdate:value":A[39]||(A[39]=Ue=>e(w).primaryColor=Ue),class:"cursor-pointer",theme:e(h),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(qe,null,{default:l(()=>[_("div",Ur,[_("span",Sr,o(e(f)("secondaryColor")),1),_("div",Mr,[e(w).secondaryColor?(n(),S(ve,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[40]||(A[40]=Ue=>e(w).secondaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(_e,{vertical:""})],64)):me("",!0),t(e(el),{value:e(w).secondaryColor,"onUpdate:value":A[41]||(A[41]=Ue=>e(w).secondaryColor=Ue),class:"cursor-pointer",theme:e(h),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(qe,null,{default:l(()=>[_("div",Ar,[_("span",Er,o(e(f)("tertiaryColor")),1),_("div",Dr,[e(w).accentColor?(n(),S(ve,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[42]||(A[42]=Ue=>e(w).accentColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(_e,{vertical:""})],64)):me("",!0),t(e(el),{value:e(w).accentColor,"onUpdate:value":A[43]||(A[43]=Ue=>e(w).accentColor=Ue),class:"cursor-pointer",theme:e(h),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="appearance"]]),dl(_("section",Lr,[t(De,{embedded:""},{default:l(()=>[t(De,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"socialNetworksFormRef",ref:C,model:e(w),rules:I,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ae,{"x-gap":"12",span:24},{default:l(()=>[(n(),S(ve,null,Ne(x,Ue=>t(ze,{key:Ue.name,span:12,path:Ue.name},{label:l(()=>[_("b",Pr,o(e(f)(Ue.name)),1)]),default:l(()=>[t(ue,{value:e(w)[Ue.name],"onUpdate:value":gt=>e(w)[Ue.name]=gt,placeholder:e(f)(Ue.name),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(ge),{icon:Ue.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(J).currentMenuItemKey==="social-networks"]]),e(J).currentMenuItemKey==="newsletter-email"?(n(),S("section",Nr,[t(Zo)])):me("",!0),e(J).currentMenuItemKey==="newsletter-phone"?(n(),S("section",Rr,[t(ei)])):me("",!0),e(J).currentMenuItemKey==="newsletter-campaign"?(n(),S("section",Or,[t(Bi)])):me("",!0),e(J).currentMenuItemKey==="ads"?(n(),S("section",qr,[t(kn)])):me("",!0),e(J).currentMenuItemKey==="videos"?(n(),S("section",jr,[t(ko)])):me("",!0),e(J).currentMenuItemKey==="content-models"?(n(),S("section",Fr,[t(xi)])):me("",!0),e(J).currentMenuItemKey==="menus"?(n(),S("section",Br,[t(to)])):me("",!0),e(J).currentMenuItemKey==="content-permalinks"?(n(),S("section",Kr,[t(ji)])):me("",!0),e(J).currentMenuItemKey==="page-sections"?(n(),S("section",Yr,[t(Wo)])):me("",!0),(n(!0),S(ve,null,Ne(e(L),(Ue,gt)=>(n(),S(ve,{key:`${Ue.slug}-page`},[e(J).currentMenuItemKey===`${Ue.slug}-page`?(n(),S("section",{key:`${Ue.slug}-page`},[t(bs,{slug:Ue.slug,"open-form-modal":Ve,onDelete:()=>{e(J).currentMenuItemKey=e(L).length>1?`${e(L)[gt-1].slug}-page`:a[0],e(te)()}},null,8,["slug","onDelete"])])):me("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Ot,{show:e(k),"onUpdate:show":A[44]||(A[44]=Ue=>$e(k)?k.value=Ue:null),title:e(f)("selectImage"),"upload-config":{folder:e(b),limit:0,maxSize:0,baseUrl:((Mt=e(M))==null?void 0:Mt.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe},null,8,["show","title","upload-config"]),t(St,{show:e(Q),"onUpdate:show":A[46]||(A[46]=Ue=>$e(Q)?Q.value=Ue:null),loading:e(z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(be)?e(f)("editPage"):e(f)("addPage"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:Me,onNegativeClick:A[47]||(A[47]=Ue=>Q.value=!1)},{default:l(()=>[t(xt,{ref_key:"addPageFormRef",ref:g,model:e(K),rules:we,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Se,{label:e(f)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(je,{modelValue:e(K).title,"onUpdate:modelValue":A[45]||(A[45]=Ue=>e(K).title=Ue),placeholder:e(f)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:Ra(Me,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const mc=Ut(Hr,[["__scopeId","data-v-b600202c"]]);export{mc as default};
