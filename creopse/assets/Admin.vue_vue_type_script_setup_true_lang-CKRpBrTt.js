import{i as m}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{I as O}from"./iconify_vue-DK9FHL8l.js";import{u as V,a as B,aa as L,aq as M,c as q,_ as z,P as G,f as i,R as y}from"./index-BkcZCWEr.js";import{a as Y}from"./vue-router-JM7pifDK.js";import{l as W,a as X,x as $,F as j,z as J,B as K,q as Q}from"./naive-ui-U3LV0D3Q.js";import{u as Z}from"./vue-i18n-DGGON2e6.js";const{defineComponent:ee}=await m("vue"),{unref:o,toDisplayString:u,createTextVNode:_,resolveComponent:_e,withCtx:t,createVNode:s,createElementVNode:d,openBlock:oe,createBlock:te}=await m("vue"),se={class:"w-full flex"},{ref:C}=await m("vue"),de=ee({__name:"Admin",props:{mode:{default:"creation"}},emits:["back"],setup(v,{emit:D}){const n=v,I=D,{t:e}=Z(),{displayFormErrors:S}=V(),{userHasSuperAdminRole:w}=B(),{mutate:E,isPending:p}=L(),{mutateAsync:x}=M(),c=q(),f=Y(),P=W(),r=X(),g=C(null),R=C({}),U={},h=()=>{g.value?.validate(async A=>{A||E({type:G.ADMIN,id:c.userData?.id,profileData:{}},{onSuccess:async(a,l)=>{w()?(c.userData=a,f.replace(y.HOME.PATH)):(await x(),P.success({title:e("success"),content:e("accountCreatedWithSuccess1"),positiveText:e("ok")}),c.resetAuthData(),f.replace(y.LOGIN.PATH))},onError:(a,l)=>{switch(a?.response?.data?.errorCode){case i.AUTH_PROFILE_ALREADY_EXISTS:r.error(e("profileAlreadyExists"));break;case i.AUTH_MISSING_DATA:r.error(e("missingData"));break;case i.FORM_INVALID_DATA:S(a?.response?.data?.data);break;case i.AUTH_USER_NOT_FOUND:r.error(e("userNotFound"));break;case i.AUTH_PROFILE_TYPE_NOT_FOUND:r.error(e("profileTypeNotFound"));break;default:r.error(e("registerProfileNotSuccessful"))}}})})};return n.mode=="edition",(A,a)=>{const l=j,F=J,k=z,N=O,T=Q,b=K,H=$;return oe(),te(H,{size:"medium",class:"w-full"},{default:t(()=>[s(k,{name:"slide-fade",appear:""},{default:t(()=>[d("section",null,[s(l,{title:n.mode=="edition"?o(e)("update"):o(e)("validation"),type:"success",class:"mb-10"},{default:t(()=>[_(u(n.mode=="edition"?o(e)("updateCompleted"):o(e)("registrationCompleted")),1)]),_:1},8,["title"]),s(F,{ref_key:"formRef",ref:g,model:o(R),rules:U,"show-label":!1,"show-require-mark":!1,size:"medium"},null,8,["model"])])]),_:1}),s(k,{name:"slide-fade",appear:""},{default:t(()=>[d("section",se,[s(b,{secondary:"",class:"flex-1",loading:o(p),onClick:a[0]||(a[0]=ae=>I("back"))},{icon:t(()=>[s(T,null,{default:t(()=>[s(N,{icon:"carbon:arrow-left"})]),_:1})]),default:t(()=>[_(" "+u(n.mode=="edition"?o(e)("close"):o(e)("back")),1)]),_:1},8,["loading"]),a[1]||(a[1]=d("div",{class:"w-2"},null,-1)),s(b,{secondary:"",class:"flex-1",type:"primary","icon-placement":"right",loading:o(p),onClick:h},{icon:t(()=>[s(T,null,{default:t(()=>[s(N,{icon:"carbon:checkmark-outline"})]),_:1})]),default:t(()=>[_(" "+u(n.mode=="edition"?o(e)("save"):o(e)("validate")),1)]),_:1},8,["loading"])])]),_:1})]),_:1})}}});export{de as _};
