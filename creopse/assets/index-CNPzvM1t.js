import{i as $}from"./css-render_vue3-ssr-Vbotx5Ir.js";import{H as ae,I as _e,u as pe,J as fe,f as me,K as X,R as he}from"./index-B2LlKIv2.js";import{I as f}from"./iconify_vue-BwapRRpV.js";import{u as ye}from"./vue-router-B7M2c80d.js";import{ao as le,aq as ie,g as se,B as ce,aj as re,N as m,e as L,ap as ge,a as xe,n as we,f as be,m as ke,h as ve,an as Ne,a2 as Ce}from"./naive-ui-CrTIpLJ9.js";import{u as de}from"./vue-i18n-CWrb4u3f.js";import{_ as $e}from"./fawmi_vue-google-maps-DHKJ2mA8.js";const{defineComponent:Be}=await $("vue"),{unref:l,resolveComponent:Ke,createVNode:a,withCtx:o,openBlock:M,createBlock:R,createCommentVNode:q,toDisplayString:j,createElementVNode:Y,createTextVNode:D,withModifiers:Se,normalizeStyle:Ie}=await $("vue"),ze=["innerHTML"],{ref:Z}=await $("vue"),Te=Be({__name:"Item",props:{item:{}},emits:["closeBox"],setup(Q,{emit:y}){const i=Q,E=y,{t:g,locale:F}=de(),k=ye(),{markAsRead:B,buildMessage:v,removeNotification:x,isUnread:H}=ae(),N=async w=>{if(w.data.target)try{await B(w),k.push(w.data.target),E("closeBox")}catch(s){console.log(s)}},S=Z({title:"",content:""}),I=Z(!1);return(async()=>{I.value=!0,S.value=await v(i.item),I.value=!1})(),(w,s)=>{const c=re,z=L,r=f,d=m,h=ce,C=se,T=ie,V=le,O=ge;return l(I)?(M(),R(V,{key:0,class:"item w-full"},{default:o(()=>[a(T,null,{header:o(()=>[a(c,{text:"",style:{width:"150px"}})]),"header-extra":o(()=>[a(z,{color:"gray",dot:""})]),description:o(()=>[a(c,{text:"",style:{width:"100%"},repeat:2})]),footer:o(()=>[a(C,{align:"center",justify:"space-between"},{default:o(()=>[a(h,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(d,null,{default:o(()=>[a(r,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[a(c,{text:"",style:{width:"60px"}})]),_:1}),a(C,{align:"center"},{default:o(()=>[a(h,{text:""},{icon:o(()=>[a(d,null,{default:o(()=>[a(r,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[a(c,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(M(),R(V,{key:1,class:"item w-full",style:Ie(`cursor: ${i.item.data.target?"pointer":"default"}`),onClick:s[3]||(s[3]=_=>N(i.item))},{default:o(()=>[a(T,null,{header:o(()=>[Y("span",{class:"title",onClick:s[0]||(s[0]=_=>N(i.item))},j(l(S).title),1)]),"header-extra":o(()=>[l(H)(i.item)?(M(),R(z,{key:0,dot:""})):q("",!0)]),description:o(()=>[Y("span",{class:"content",innerHTML:l(S).content},null,8,ze)]),footer:o(()=>[a(C,{align:"center",justify:"space-between"},{default:o(()=>[a(h,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(d,null,{default:o(()=>[a(r,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[D(" "+j(l(_e)(i.item?.createdAt||"",{locale:l(F)})),1)]),_:1}),a(C,{align:"center"},{default:o(()=>[l(H)(i.item)?(M(),R(h,{key:0,text:"",onClick:s[1]||(s[1]=Se(_=>l(B)(i.item),["stop"]))},{icon:o(()=>[a(d,null,{default:o(()=>[a(r,{icon:"carbon:checkmark"})]),_:1})]),default:o(()=>[D(" "+j(l(g)("read")),1)]),_:1})):q("",!0),i.item.data.removable?(M(),R(O,{key:1,"positive-text":l(g)("yes"),"negative-text":l(g)("no"),trigger:"hover",onPositiveClick:s[2]||(s[2]=_=>l(x)(i.item))},{trigger:o(()=>[a(h,{text:""},{icon:o(()=>[a(d,null,{default:o(()=>[a(r,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[D(" "+j(l(g)("delete")),1)]),_:1})]),default:o(()=>[D(" "+j(l(g)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),{defineComponent:Ve}=await $("vue"),{unref:n,createVNode:e,withCtx:t,toDisplayString:ee,createTextVNode:te,resolveComponent:Qe,isRef:Me,normalizeStyle:J,renderList:Re,Fragment:je,openBlock:b,createElementBlock:ne,createBlock:A}=await $("vue"),{defineComponent:Ae,ref:oe,computed:K,h:p,watch:Le}=await $("vue"),Ee=Ae({name:he.NOTIFICATIONS.NAME}),He=Ve({...Ee,setup(Q){const{t:y}=de(),{isMdScreen:i,isSmScreen:E,pickByTheme:g,appPrimaryColor:F}=pe(),k=oe("all"),B=oe(!1),v=xe(),x=fe(),H=me(),{userUnreadNotifications:N,markAllAsRead:S}=ae(),I=K(()=>[{label:()=>p("div",{class:"flex justify-between items-center w-full"},[p("span",{class:"mr-1 text-white"},{default:()=>y("all")}),p(L,{value:X(x.notifications.length||0),type:"info"})]),key:"all",icon:()=>p(m,{color:"white"},{default:()=>p(f,{icon:"mdi:email-multiple"})})},{label:()=>p("div",{class:"flex justify-between items-center w-full"},[p("span",{class:"mr-1 text-white"},{default:()=>y("unread")}),p(L,{value:X(N.value.length||0),type:"error"})]),key:"unread",icon:()=>p(m,{color:"white"},{default:()=>p(f,{icon:"mdi:email-open-multiple"})})}]),U=K(()=>{let c;switch(k.value){case"all":c=x.notifications;break;case"unread":c=N.value;break;default:c=[];break}return c}),w=K(()=>H.contentLayoutSize.height-100),s=async()=>{B.value=!0,v.start(),await x.getNotifications(),v.finish(),B.value=!1};return Le(()=>x.firstRefresh,c=>{c?v.start():v.finish()},{immediate:!0}),(c,z)=>{const r=ce,d=se,h=be,C=ve,T=ke,V=Ne,O=Ce,_=we,u=re,G=ie,W=le;return b(),ne("section",null,[n(x).firstRefresh?(b(),A(_,{key:1,style:J("height: "+n(w)+"px"),embedded:""},{default:t(()=>[e(h,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(d,{justify:"space-between",align:"center"},{default:t(()=>[e(u,{text:"",style:{width:"125px"}}),e(u,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),e(_,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(T,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:t(()=>[e(u,{height:"35px",width:"100%",class:"mb-1"}),e(u,{height:"35px",width:"100%"})]),_:1}),e(_,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[e(V,{hoverable:"",clickable:"",bordered:""},{default:t(()=>[e(W,{class:"item w-full"},{default:t(()=>[e(G,null,{header:t(()=>[e(u,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(L),{color:"gray",dot:""})]),description:t(()=>[e(u,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(d,{align:"center",justify:"space-between"},{default:t(()=>[e(r,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(u,{text:"",style:{width:"60px"}})]),_:1}),e(d,{align:"center"},{default:t(()=>[e(r,{text:""},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(u,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{class:"item w-full"},{default:t(()=>[e(G,null,{header:t(()=>[e(u,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(L),{color:"gray",dot:""})]),description:t(()=>[e(u,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(d,{align:"center",justify:"space-between"},{default:t(()=>[e(r,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(u,{text:"",style:{width:"60px"}})]),_:1}),e(d,{align:"center"},{default:t(()=>[e(r,{text:""},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(u,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(b(),A(_,{key:0,style:J("height: "+n(w)+"px"),embedded:""},{default:t(()=>[e(h,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(d,{justify:"space-between",align:"center"},{default:t(()=>[e(r,{text:"",onClick:s},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"carbon:restart"})]),_:1})]),default:t(()=>[te(" "+ee(n(y)("refresh")),1)]),_:1}),e(r,{text:"",disabled:!n(N).length,onClick:n(S)},{icon:t(()=>[e(n(m),null,{default:t(()=>[e(n(f),{icon:"carbon:checkmark"})]),_:1})]),default:t(()=>[te(" "+ee(n(y)("allMarkedAsRead")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),e(_,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(T,{style:J(`background-color: ${n(g)(n(F),"rgba(24, 24, 28, 1)")}`),"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:n(i)||n(E),width:260,bordered:""},{default:t(()=>[e(C,{value:n(k),"onUpdate:value":z[0]||(z[0]=P=>Me(k)?k.value=P:null),collapsed:n(i)||n(E),"collapsed-width":64,"collapsed-icon-size":22,options:n(I)},null,8,["value","collapsed","options"])]),_:1},8,["style","collapsed"]),e(_,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[n(U).length?(b(),A(V,{key:0,hoverable:"",clickable:"",bordered:""},{default:t(()=>[(b(!0),ne(je,null,Re(n(U),(P,ue)=>(b(),A(Te,{key:ue,item:P},null,8,["item"]))),128))]),_:1})):(b(),A(O,{key:1,description:n(y)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:t(()=>[e(n(m),{size:"56"},{default:t(()=>[e(n(f),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}}),Ge=$e(He,[["__scopeId","data-v-de3d3b46"]]);export{Ge as default};
