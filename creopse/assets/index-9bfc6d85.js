import{_ as K}from"./AuthLayout-1372a2d0.js";import{u as W,c as z,d as Q,R as S,P as Y,g as J,_ as X,e as Z}from"./index-b41c7da9.js";import{_ as ee,a as oe}from"./PhoneAuth.vue_vue_type_script_setup_true_lang-d07ba517.js";import{v as te,w as P}from"./vue_runtime-dom-c0cb2070.js";import{R as g}from"./response-error-code-87d1097e.js";import{u as re}from"./vue-router-e670704e.js";import{_ as se}from"./validator-c0254ba9.js";import{b as ae,E as ie,F as le,M as ne,_ as me,O as pe,G as ue,L as ce}from"./naive-ui-17a84883.js";import{d as N,w as _e,o as U,P as de,aO as s,Y as r,a as m,v as fe,l as k,Q as I,c as ge,F as we}from"./vue_runtime-core-4f5fb440.js";import{u as ve}from"./vue-i18n-84a05dd5.js";import{r as A,u as e}from"./vue_reactivity-852d8377.js";import{t as u}from"./vue_shared-7dcc3b7f.js";import"./iconify_vue-6750bec6.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./fawmi_vue-google-maps-52673af8.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-a9971f22.js";import"./pinia-5dd13ed8.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-ce681755.js";import"./vueuse_core-a611fd48.js";import"./vueuse_shared-5de4c6d8.js";import"./parse-domain-15b982e1.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./vue3-google-login-7712408e.js";import"./vue-draggable-next-d31a77b2.js";import"./vue-recaptcha-486cc690.js";import"./p-defer-64bd7c04.js";import"./defu-573334b8.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./VueTelInputWrapper-26bf9be6.js";import"./vue-timer-hook-0366d26a.js";import"./libphonenumber-js-f65e98d1.js";const be={class:"container h-full"},he={class:"flex justify-center items-center flex-wrap h-full g-6 text-gray-800"},ye={class:"md:w-8/12 lg:w-5/12 xl:w-3.5/12 2xl:w-3/12 sm:w-full"},ke={class:"flex justify-center mb-8"},Ae=["src","alt"],Se={class:"flex justify-around items-center mb-6"},Te={class:"text-sm"},Re=N({name:S.LOGIN.NAME}),Zo=N({...Re,setup(Ee){const{t:o,locale:O}=ve(),{request:H}=Z(),{displayFormErrors:V,updateLocale:B,logo:L}=W(),T=re(),c=ae(),_=z(),x=Q(),w=A(!1),D=A(null),a=A({email:"",password:"",remember:!1}),M={email:[{required:!0,message:o("fillRequired")},{trigger:["input"],validator(d,t){return t&&!se.isEmail(t)?new Error(o("invalidEmail")):!0}}],password:[{required:!0,message:o("fillRequired")}]},R=async d=>{var t;d.preventDefault(),(t=D.value)==null||t.validate(async v=>{var f,b,p,h,E,y;if(!v){w.value=!0,_.userData=null;const l=await H({url:"/auth/login",method:"post",data:a.value});if(l.failure&&l.error)switch((p=(b=(f=l.error)==null?void 0:f.response)==null?void 0:b.data)==null?void 0:p.errorCode){case g.AUTH_USER_NOT_FOUND:case g.AUTH_WRONG_PASSWORD:c.error(o("wrongEmailOrPassword"));break;case g.AUTH_MISSING_DATA:c.error(o("missingData"));break;case g.FORM_INVALID_DATA:V((y=(E=(h=l.error)==null?void 0:h.response)==null?void 0:E.data)==null?void 0:y.data);break;case g.AUTH_USER_DISABLED:c.error(o("disabledAccount"));break;default:c.error(o("unableToLogin"))}else{a.value={email:"",password:"",remember:!1},w.value=!1;const i=l.result.data.user;i!=null&&i.profileType&&(i==null?void 0:i.profileType)===Y.SUBSCRIBER?c.error(o("unableToLogin")):(_.userData=i,_.accessToken=l.result.data.accessToken,_.accessTokenDate=J())}w.value=!1}})},q="Creopse",F=x.getSettingValue("disableInstaller","boolean"),G=x.getSettingValue("allowRegistration","boolean");_e(()=>_.isUserConnected,d=>{B(O.value,!1),d&&T.replace(S.HOME.PATH)},{immediate:!0});const $=A(!0);return(d,t)=>{const v=ie,f=le,b=ne,p=me,h=pe,E=oe,y=ee,l=ue,i=ce,C=X,j=K;return U(),de(j,{"display-server-alerts":!e(F)},{default:s(()=>[r(C,{name:"slide-fade",appear:""},{default:s(()=>[m("div",be,[m("div",he,[m("div",ye,[r(C,{appear:""},{default:s(()=>[fe(r(i,{size:"small",class:"w-full"},{default:s(()=>[m("div",ke,[m("img",{src:e(L),class:"w-54",alt:e(q)},null,8,Ae)]),r(l,{ref_key:"formRef",ref:D,model:e(a),rules:M,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:s(()=>[r(f,{label:e(o)("addressEmail"),path:"email"},{default:s(()=>[r(v,{value:e(a).email,"onUpdate:value":t[0]||(t[0]=n=>e(a).email=n),placeholder:e(o)("addressEmail"),class:"w-full",onKeyup:P(R,["enter"])},null,8,["value","placeholder"])]),_:1},8,["label"]),r(f,{span:12,label:e(o)("password"),path:"password"},{default:s(()=>[r(v,{value:e(a).password,"onUpdate:value":t[1]||(t[1]=n=>e(a).password=n),placeholder:e(o)("password"),"show-password-on":"mousedown",type:"password",class:"w-full",onKeyup:P(R,["enter"])},null,8,["value","placeholder"])]),_:1},8,["label"]),m("div",Se,[r(b,{checked:e(a).remember,"onUpdate:checked":t[2]||(t[2]=n=>e(a).remember=n)},{default:s(()=>[k(u(e(o)("rememberMe")),1)]),_:1},8,["checked"]),r(p,{text:"",onClick:t[3]||(t[3]=n=>e(T).push(e(S).RESET_PASSWORD.PATH))},{default:s(()=>[k(u(e(o)("forgotPassword")),1)]),_:1})]),r(p,{type:"primary",loading:e(w),disabled:!e(a).email||!e(a).password,block:"",onClick:R},{default:s(()=>[k(u(e(o)("validate")),1)]),_:1},8,["loading","disabled"]),r(h,{ref:"divider",class:"!my-2"},{default:s(()=>[m("span",Te,u(e(o)("or")),1)]),_:1},512),I("",!0),r(y),e(G)?(U(),ge(we,{key:1},[t[6]||(t[6]=m("div",{class:"h-3"},null,-1)),r(p,{block:"",tertiary:"",type:"default",onClick:t[5]||(t[5]=n=>e(T).push(e(S).REGISTER.PATH))},{default:s(()=>[k(u(e(o)("dontHaveAccount"))+" "+u(e(o)("register")),1)]),_:1})],64)):I("",!0)]),_:1},8,["model"])]),_:1},512),[[te,e($)]])]),_:1})])])])]),_:1})]),_:1},8,["display-server-alerts"])}}});export{Zo as default};
