import{i as ee}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Wa}from"./PageLayout.vue_vue_type_script_setup_true_lang-CA4SA2ip.js";import{H as Ye,u as Me,f as mt,I as Xa,e as Be,t as ft,J as Ja,p as wa,_ as Za,w as rt,K as el,L as tl,c as al,M as ll,N as nl,O as sl,Q as ol,S as Et,T as rl,U as ia,V as il,R as ul}from"./main-ViLBltTU.js";import{_ as Xt}from"./I18nInput-q03qH19U.js";import{_ as Rt,a as ya,b as cl}from"./index.vue_vue_type_script_setup_true_lang-iJoPck6p.js";import{I as q}from"./iconify_vue-DXPEksg3.js";import{u as oe}from"./vue-i18n-B92nPylK.js";import{u as xe,p as Ee,t as qt,q as Jt,c as Ze,h as A,B as M,l as ba,_ as ka,x as dl,y as pl,D as ml,z as Ke,Q as Zt,F as fl,H as Bt,a as Lt,b as Ft,d as Ca,e as $a,R as _l,L as vl,s as ea,A as xa,T as gl,U as Aa,V as ta,r as Na,k as hl,W as wl,X as yl,o as bl,Y as kl,m as Cl,Z as $l,$ as xl,a0 as Al}from"./naive-ui-dfg6Ko-R.js";import{_ as de}from"./lodash-C_MgVQnG.js";import{_ as aa}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-EDNSTgfY.js";import{_ as Nl}from"./validator-DC79P2ge.js";import{u as Il,a as Sl,N as X,b as zl,c as Dl,d as Ul,e as Tl,f as Ml}from"./article-VfZSc4ZP.js";import{r as Ia}from"./vueuse_shared-B0wwFjQU.js";import{s as El}from"./slugify-BFyLO-pG.js";import{v as ua}from"./uuid-8I8R7izr.js";import{_ as Sa}from"./fawmi_vue-google-maps-yyESU4s0.js";import{a as Vl}from"./vue-router-DS5MTONl.js";const Pl=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=xe(),h=Ee();return Ye({queryKey:["news-categories"],operation:"insert",getItemId:o=>o.id??`temp-${crypto.randomUUID()}`,mutationFn:async o=>{h.start();const k=await x({method:"post",url:"/news-categories",data:ft(o,["id"])});if(h.finish(),k.failure&&k.error)throw new Error(k.error);return k.result.data},mutationOptions:{onSuccess:()=>{a.success(f("success"))},onError:o=>{o?.response?.data?.errorCode===mt.FORM_INVALID_DATA?C(o?.response?.data?.data):a.error(f("anErrorOccurred"))},...z}})},Rl=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=xe(),h=Ee();return Ye({queryKey:["news-categories"],operation:"update",getItemId:o=>o.id??`temp-${crypto.randomUUID()}`,mutationFn:async o=>{h.start();const k=await x({method:"put",url:`/news-categories/${o.id}`,data:ft(o,["id"])});if(h.finish(),k.failure&&k.error)throw new Error(k.error);return k.result.data},mutationOptions:{onSuccess:()=>{a.success(f("success"))},onError:o=>{o?.response?.data?.errorCode===mt.FORM_INVALID_DATA?C(o?.response?.data?.data):a.error(f("anErrorOccurred"))},...z}})},ql=z=>{const{request:C}=Be(),{t:x}=oe(),f=xe(),a=Ee();return Ye({queryKey:["news-categories"],operation:"remove",getItemId:h=>h.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:h})=>{a.start();const o=await C({method:"delete",url:`/news-categories/${h}`});if(a.finish(),!o.success)throw new Error(o.error);return o.result.data},mutationOptions:{onSuccess:()=>{f.success(x("success"))},onError:h=>{f.error(x("anErrorOccurred"))},...z}})},Bl=()=>{const{request:z}=Be(),C=Ee();return Xa(async x=>{const f=await z({method:"put",url:"/news-categories/position",data:x});if(f.failure&&f.error)throw new Error(f.error);return f.result.data},{onMutate:()=>C.start(),onSettled:()=>C.finish()})},{defineComponent:Ll}=await ee("vue"),{unref:t,resolveComponent:ca,createVNode:r,withCtx:u,isRef:Vt,toDisplayString:H,createTextVNode:Ce,openBlock:G,createBlock:Re,createCommentVNode:lt,renderList:da,Fragment:nt,createElementBlock:Ge,normalizeClass:st,withModifiers:Ct,createElementVNode:ge,normalizeStyle:Fl}=await ee("vue"),Ol={class:"flex items-center"},Hl={class:"flex flex-col"},Kl={class:"text-sm font-bold"},Yl={class:"text-xs font-normal"},jl={class:"text-xs my-1"},Ql={class:"flex items-center"},Gl={class:"flex flex-col"},Wl={class:"text-sm font-bold"},Xl={class:"text-xs font-normal"},Jl={key:0,class:"mt-4"},Zl={class:"flex items-center"},{storeToRefs:en}=await ee("pinia"),{inject:tn,ref:qe,computed:pa,watch:an}=await ee("vue"),ln="categories",nn=Ll({__name:"index",setup(z){const C=Ee(),x=xe(),f=qt(),{tr:a,fileUrl:h,pickByTheme:o,appPrimaryColor:k}=Me(),{t:_,locale:pe}=oe(),{data:n,isPending:V,refetch:F}=Ja(),{mutate:he,isPending:re}=ql(),{mutate:we,isPending:me}=Rl(),{mutate:j,isPending:O}=Pl(),{mutate:B}=Bl(),{isLightTheme:le}=en(wa()),Ve=tn("appConfig"),N=qe(""),Ae=qe(),P=pa(()=>{if(!N.value)return Q.value;const p=Q.value.filter(l=>l.name.toLowerCase().includes(N.value.toLowerCase())||l.description?.toLowerCase().includes(N.value.toLowerCase())||l.children?.some(I=>I.name.toLowerCase().includes(N.value.toLowerCase())||I.description?.toLowerCase().includes(N.value.toLowerCase())));return Ae.value&&Ae.value.focus(),p}),Q=pa(()=>{const p=n.value?.filter(l=>!l.parentId)||[];for(let l=0;l<p.length;l++)p[l].children=n.value?.filter(I=>I.parentId===p[l].id);return p});an(()=>V.value||O.value||me.value||re.value,p=>{p?C.start():C.finish()});const v=qe(24),$=qe(1),ne=p=>{v.value=p},U=qe(null),ye=qe(!1),fe=qe(null),te=qe(null),b=qe({name:"",description:"",isActive:!0,position:0,image:"",color:""}),ae={name:[{required:!0,message:_("fillRequired")}]},Ne=(p,l=null)=>{fe.value=de.cloneDeep(p),p?b.value=de.cloneDeep(p):b.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},U.value=l,ye.value=!0},J=async p=>{f.warning({title:_("confirm"),content:p.parentId?_("confirmDeleteSubCategory"):_("confirmDeleteCategory"),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{p.id&&he({id:p.id})}})},je=async()=>(te.value?.validate(async p=>{if(!p){const l={name:b.value.name,description:b.value.description,isActive:b.value.isActive,position:b.value.position,image:b.value.image,color:b.value.color,parentId:U.value};fe.value?fe.value.name!==b.value.name&&(n.value||[]).findIndex(I=>I.name==b.value.name)>-1?x.error(_("sameCategoryNameMessage")):we({id:fe.value.id,...l}):(n.value||[]).findIndex(I=>I.name==b.value.name)>-1?x.error(_("sameCategoryNameMessage")):j(l),ye.value=!1}}),!1),Ie=async(p,l)=>{B({items:l},{onSuccess(){F()}})},Le=qe(!1),_t=async p=>{b.value.image=p,Le.value=!1},vt=()=>{b.value.image=""};return(p,l)=>{const I=q,Qe=Jt,gt=Rt,_e=ml,Se=ka,it=ca("Draggable"),ht=pl,wt=dl,ut=Zt,R=fl,Nt=ba,et=Za,ze=ya,yt=Xt,be=Ft,It=_l,Pe=$a,St=ca("color-picker"),g=Ca,zt=vl,Ot=ea,Ht=Lt,Dt=Bt;return G(),Ge(nt,null,[r(gt,{to:"#add-category-action"},{default:u(()=>[r(Qe,{align:"center"},{default:u(()=>[r(t(Ze),{ref_key:"searchInputRef",ref:Ae,value:t(N),"onUpdate:value":l[0]||(l[0]=y=>Vt(N)?N.value=y:null),clearable:!0,placeholder:t(_)("search")},{suffix:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"]),t(P).length?(G(),Re(t(M),{key:0,type:"primary",secondary:"",onClick:l[1]||(l[1]=y=>Ne(null))},{icon:u(()=>[r(t(A),{size:"18"},{default:u(()=>[r(I,{icon:"carbon:add-alt"})]),_:1})]),default:u(()=>[Ce(" "+H(t(_)("addCategory")),1)]),_:1})):lt("",!0)]),_:1})]),_:1}),r(et,{appear:"",name:"slide-fade"},{default:u(()=>[ge("section",null,[r(Nt,{show:t(V)},{default:u(()=>[t(P)&&t(P).length?(G(),Ge(nt,{key:0},[r(it,{list:t(Q),onChange:l[2]||(l[2]=y=>Ie(y,t(Q)))},{default:u(()=>[(G(!0),Ge(nt,null,da(t(P).slice((t($)-1)*t(v),t($)*t(v)),y=>(G(),Re(Se,{key:y.id,embedded:"",size:"small",class:"mb-1"},{default:u(()=>[r(wt,{"default-expanded-names":y.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":u(({collapsed:ve})=>[r(Qe,{align:"center"},{default:u(()=>[r(t(Ke),{size:"small",bordered:!1,type:y.isActive?"success":"error"},{default:u(()=>[Ce(H(y.isActive?t(_)("visible"):t(_)("hidden")),1)]),_:2},1032,["type"]),r(_e,{vertical:"",class:st(["!mx-0",t(o)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),r(t(M),{size:"small",type:"primary",secondary:"",onClick:Ct(tt=>Ne(y),["stop"])},{default:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),r(t(M),{size:"small",type:"error",secondary:"",onClick:Ct(tt=>J(y),["stop"])},{default:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),r(t(M),{size:"small",type:"info",secondary:"",onClick:Ct(tt=>Ne(null,y.id),["stop"])},{icon:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:category"})]),_:1})]),default:u(()=>[Ce(" "+H(t(_)("subCategory"))+" ",1),r(t(Ke),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:u(()=>[Ce(H(y.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),l[16]||(l[16]=ge("div",{class:"w-6"},null,-1)),r(t(A),null,{default:u(()=>[ve?(G(),Re(I,{key:0,icon:"fa-solid:chevron-left"})):(G(),Re(I,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:u(()=>[...l[17]||(l[17]=[ge("span",null,null,-1)])]),default:u(()=>[r(ht,{name:"1"},{header:u(()=>[ge("div",Ol,[r(t(A),{size:"21",class:"cursor-move mr-4"},{default:u(()=>[r(I,{icon:"fa-solid:grip-lines"})]),_:1}),r(_e,{vertical:"",class:st(t(o)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ge("div",Hl,[ge("span",Kl,H(t(a)(y.name))+" ("+H(y.articlesCount)+" "+H(t(_)("article_s"))+") ",1),ge("small",Yl,H(y.slug),1)])])]),default:u(()=>[y.description?(G(),Ge(nt,{key:0},[r(_e,{class:st([t(o)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),ge("div",jl,H(t(a)(y.description)),1)],64)):lt("",!0),y.children?.length?(G(),Ge(nt,{key:1},[r(_e,{class:st([t(o)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),r(it,{list:y.children,onChange:ve=>Ie(ve,y.children||[])},{default:u(()=>[(G(!0),Ge(nt,null,da(y.children,ve=>(G(),Re(Se,{key:ve.id,size:"small",class:"mb-1"},{header:u(()=>[ge("div",Ql,[r(t(A),{size:"21",class:"cursor-move mr-4"},{default:u(()=>[r(I,{icon:"fa-solid:grip-lines"})]),_:1}),r(_e,{vertical:"",class:st(t(o)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ge("div",Gl,[ge("span",Wl,H(t(a)(ve.name)),1),ge("small",Xl,H(ve.slug),1)])])]),"header-extra":u(()=>[r(Qe,{align:"center"},{default:u(()=>[r(t(Ke),{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:u(()=>[Ce(H(ve.isActive?t(_)("visible"):t(_)("hidden")),1)]),_:2},1032,["type"]),r(_e,{vertical:"",class:st(["!mx-0",t(o)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),r(t(M),{size:"small",type:"primary",secondary:"",onClick:Ct(tt=>Ne(ve,y.id),["stop"])},{default:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),r(t(M),{size:"small",type:"error",secondary:"",onClick:Ct(tt=>J(ve),["stop"])},{default:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):lt("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),r(ut,{page:t($),"onUpdate:page":l[3]||(l[3]=y=>Vt($)?$.value=y:null),class:"mt-5 justify-end","show-size-picker":"","page-size":t(v),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(t(Q).length/t(v)),"onUpdate:pageSize":ne},{prefix:u(()=>[Ce(H(`${t(Q).length} ${t(_)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(G(),Re(Se,{key:1,size:"large",class:st(`mb-2 !border-dashed !border-2 ${t(o)("!border-zinc-300","!border-zinc-600")}`)},{default:u(()=>[r(R,{description:t(_)("noCategoryAvailable")},{icon:u(()=>[r(t(A),null,{default:u(()=>[t(N)?(G(),Re(I,{key:0,icon:"carbon:search"})):(G(),Re(I,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:u(()=>[t(N)?lt("",!0):(G(),Ge("div",Jl,[r(t(M),{size:"small",secondary:"",onClick:l[4]||(l[4]=y=>Ne(null))},{icon:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:add-alt"})]),_:1})]),default:u(()=>[Ce(" "+H(t(_)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),r(ze,{show:t(Le),"onUpdate:show":l[5]||(l[5]=y=>Vt(Le)?Le.value=y:null),title:t(_)("selectImage"),"upload-config":{folder:ln,limit:0,maxSize:0,baseUrl:t(Ve)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:_t},null,8,["show","title","upload-config"]),r(Dt,{show:t(ye),"onUpdate:show":l[14]||(l[14]=y=>Vt(ye)?ye.value=y:null),loading:t(O)||t(me)||t(re),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:t(fe)?t(U)?t(_)("editSubCategory"):t(_)("editCategory"):t(U)?t(_)("addSubCategory"):t(_)("addCategory"),"positive-text":t(_)("validate"),"negative-text":t(_)("cancel"),onPositiveClick:je,onNegativeClick:l[15]||(l[15]=y=>ye.value=!1)},{default:u(()=>[r(Ht,{ref_key:"formRef",ref:te,class:"mt-5",model:t(b),rules:ae,"show-require-mark":!1,size:"medium"},{default:u(()=>[r(be,{"show-label":!1,path:"name"},{default:u(()=>[r(yt,{modelValue:t(b).name,"onUpdate:modelValue":l[6]||(l[6]=y=>t(b).name=y),placeholder:t(_)("name"),class:"w-full",sync:""},{label:u(()=>[Ce(H(t(_)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),r(be,{"show-label":!1,path:"description"},{default:u(()=>[r(yt,{modelValue:t(b).description,"onUpdate:modelValue":l[7]||(l[7]=y=>t(b).description=y),placeholder:t(_)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:u(()=>[Ce(H(t(_)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,{"x-gap":"12",span:24},{default:u(()=>[r(Pe,{span:12,label:t(_)("position"),path:"position"},{default:u(()=>[r(It,{value:t(b).position,"onUpdate:value":l[8]||(l[8]=y=>t(b).position=y),placeholder:t(_)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),r(Pe,{span:12,label:t(_)("color"),path:"color"},{default:u(()=>[ge("div",Zl,[t(b).color?(G(),Ge(nt,{key:0},[r(t(M),{text:"",type:"error",style:{"font-size":"21px"},onClick:l[9]||(l[9]=y=>t(b).color="")},{default:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:trash-can"})]),_:1})]),_:1}),r(_e,{vertical:""})],64)):lt("",!0),r(St,{"pure-color":t(b).color,"onUpdate:pureColor":l[10]||(l[10]=y=>t(b).color=y),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:t(le)?"white":"black",lang:t(pe)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),r(_e,{dashed:"",class:"!my-2"}),r(g,{"x-gap":"12",span:24},{default:u(()=>[r(Pe,{span:12,label:t(_)("preview"),path:"image"},{default:u(()=>[r(Qe,{align:"center",justify:"center",style:{height:"100%"}},{default:u(()=>[r(zt,{class:"cursor-pointer","object-fit":"cover",style:Fl("border: 1px dashed "+t(o)(t(k),"white")),size:150,src:t(h)(t(b).image||""),onClick:l[11]||(l[11]=y=>Le.value=!0)},{default:u(()=>[t(b).image?lt("",!0):(G(),Re(t(A),{key:0,size:64},{default:u(()=>[r(I,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),t(b).image?(G(),Re(t(M),{key:0,quaternary:"",onClick:l[12]||(l[12]=y=>vt())},{icon:u(()=>[r(t(A),null,{default:u(()=>[r(I,{icon:"carbon:trash-can"})]),_:1})]),default:u(()=>[Ce(" "+H(t(_)("clear")),1)]),_:1})):lt("",!0)]),_:1})]),_:1},8,["label"]),r(Pe,{span:12,label:t(_)("status"),path:"isActive"},{default:u(()=>[r(Ot,{value:t(b).isActive,"onUpdate:value":l[13]||(l[13]=y=>t(b).isActive=y),size:"small"},{checked:u(()=>[Ce(H(t(_)("visible")),1)]),unchecked:u(()=>[Ce(H(t(_)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),sn=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=Ee(),h=xe();return Ye({queryKey:["news-comments"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:o=>"id"in o&&o.id?o.id:`temp-${crypto.randomUUID()}`,mutationFn:async o=>{a.start();try{const k=await x({method:"post",url:"/news-comments",data:ft(o,["id"])});if(!k.success)throw new Error(k.error||f("anErrorOccurred"));return k.result.data}finally{a.finish()}},mutationOptions:{onSuccess:()=>{h.success(f("success"))},onError:o=>{switch(o?.response?.data?.errorCode){case mt.FORM_INVALID_DATA:C(o?.response?.data?.data);break;default:h.error(f("anErrorOccurred"))}},...z}})},on=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=Ee(),h=xe();return Ye({queryKey:["news-comments"],operation:"update",isPaginated:!0,getItemId:o=>o.id??`temp-${crypto.randomUUID()}`,mutationFn:async o=>{a.start();try{const k=await x({method:"put",url:`/news-comments/${o.id}`,data:ft(o,["id"])});if(!k.success)throw new Error(k.error||f("anErrorOccurred"));return k.result.data}finally{a.finish()}},mutationOptions:{onSuccess:()=>{h.success(f("success"))},onError:o=>{switch(o?.response?.data?.errorCode){case mt.FORM_INVALID_DATA:C(o?.response?.data?.data);break;default:h.error(f("anErrorOccurred"))}},...z}})},rn=z=>{const{request:C}=Be(),{t:x}=oe(),f=Ee(),a=xe();return Ye({queryKey:["news-comments"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:h=>h.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:h})=>{f.start();const o=await C({method:"delete",url:`/news-comments/${h}`});if(f.finish(),!o.success)throw new Error(o.error);return o.result?.data},mutationOptions:{onSuccess:()=>{a.success(x("success"))},onError:h=>{a.error(x("anErrorOccurred"))},...z}})},{defineComponent:un}=await ee("vue"),{unref:w,createVNode:K,withCtx:ie,toDisplayString:jt,createTextVNode:Qt,vShow:cn,withDirectives:dn,resolveComponent:Ds,isRef:ma,Fragment:pn,openBlock:mn,createElementBlock:fn}=await ee("vue"),{ref:$e,computed:Pt,h:Y,watch:fa}=await ee("vue"),_n=un({__name:"index",setup(z){const C=qt(),{mergeArrays:x,tr:f}=Me(),{t:a,locale:h}=oe(),{mutate:o,isPending:k}=rn(),{mutate:_,isPending:pe}=sn(),{mutate:n,isPending:V}=on(),F=$e(""),he=Ia(F,500),re=$e(),we=$e([]),me=Pt(()=>[{title:a("content"),key:"content",resizable:!0,width:300,fixed:"left",sortOrder:!1,sorter:"default",render(p){return Y(xa,{class:"text-xs",lineClamp:1,expandTrigger:"click",tooltip:!1},{default:()=>p.content})}},{title:a("name"),key:"name",resizable:!0,width:150,ellipsis:{tooltip:!0}},{title:a("article"),key:"article",resizable:!0,width:250,ellipsis:{tooltip:!0},render(p){return Y("div",{},{default:()=>f(p.article?.title)})},sortOrder:!1,sorter:"default"},{title:a("email"),key:"email",resizable:!0,width:150,ellipsis:{tooltip:!0}},{title:a("status"),key:"isActive",width:100,render(p){return Y(Ke,{type:p.isActive?"success":"error",bordered:!1},{default:()=>p.isActive?a("published"):a("unpublished")})},sortOrder:!1,sorter:"default"},{title:a("lastEdition"),key:"updatedAt",width:125,render(p){return Y("div",{},{default:()=>rt(p.updatedAt,{locale:h.value})})}},{title:a("creation"),key:"createdAt",width:125,render(p){return Y("div",{},{default:()=>rt(p.createdAt,{locale:h.value})})}},{title:()=>Y(Aa,{},{default:()=>[Y(Ze,{ref:re,placeholder:a("search"),value:F.value,onInput:p=>{F.value=p,F.value||P()},clearable:!0}),Y(M,{onClick:()=>{P()}},{default:()=>Y(A,{color:"white"},{default:()=>Y(q,{icon:"carbon:search"})})})]}),key:"actions",width:200,render(p){return Y("div",{class:"flex justify-end items-center w-full"},[Y(gl,{value:p.isActive?1:0,"onUpdate:value":async l=>{n({id:p.id,isActive:l})},trigger:"click",placement:"left",options:[{label:a("published"),value:1},{label:a("unpublished"),value:0}]},{default:()=>[Y(M,{size:"small",type:"warning",secondary:!0,renderIcon:()=>Y(A,null,{default:()=>Y(q,{icon:"carbon:certificate-check"})})},{default:()=>a("status")})]}),Y("div",{class:"w-2"}),Y(M,{size:"small",type:"error",secondary:!0,onClick:()=>{C.warning({title:a("confirm"),content:a("confirmDeleteComment"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{o(p)}})},renderIcon:()=>Y(A,null,{default:()=>Y(q,{icon:"carbon:trash-can"})})})])},fixed:"right"}]),j=$e(0),O=$e(24),B=$e(1),le=Pt(()=>({pageSize:O.value,query:he.value,page:B.value})),Ve=p=>{B.value=p,P()},N=p=>{O.value=p,P()},{data:Ae,refetch:P,isPending:Q}=el(le);fa(()=>Ae.value,p=>{we.value=p?.comments||[],j.value=p?.meta?.total||0,B.value=p?.meta?.currentPage||1},{deep:!0,immediate:!0});const v=$e(!1),$=$e(null),ne=$e(null),U=$e({name:"",email:"",content:"",isActive:!0,articleId:void 0}),ye={name:[{required:!0,message:a("fillRequired")}],email:[{required:!0,message:a("fillRequired")},{trigger:["input"],validator(p,l){return l&&!Nl.isEmail(l)?new Error(a("invalidEmail")):!0}}],content:[{required:!0,message:a("fillRequired")}],articleId:[{required:!0,message:a("fillRequired")}]},fe=p=>{$.value=de.cloneDeep(p),U.value={name:"",email:"",content:"",isActive:!0,articleId:void 0},v.value=!0},te=async()=>(ne.value?.validate(async p=>{if(!p){const l={name:U.value.name,email:U.value.email,content:U.value.content,isActive:U.value.isActive,articleId:U.value.articleId};$.value?(l.id=$.value.id,n(l)):_(l),v.value=!1}}),!1),b=$e([]),ae=$e([]),{mutateAsync:Ne,isPending:J}=Il(),{mutateAsync:je,isPending:Ie}=Sl(),Le=Pt(()=>Ie.value||J.value),_t=async p=>{if(!p.length){ae.value=[];return}ae.value=await je(p)};fa(()=>U.value.articleId,async p=>{p&&(b.value=await Ne({ids:[p]}))});const vt=Pt(()=>x(b.value,ae.value,"id"));return(p,l)=>{const I=Rt,Qe=ta,gt=aa,_e=Zt,Se=Ft,it=Na,ht=ea,wt=Lt,ut=Bt;return mn(),fn(pn,null,[K(I,{to:"#add-comment-action"},{default:ie(()=>[dn(K(w(M),{type:"primary",secondary:"",onClick:l[0]||(l[0]=R=>fe(null))},{icon:ie(()=>[K(w(A),{size:"18"},{default:ie(()=>[K(w(q),{icon:"carbon:add-alt"})]),_:1})]),default:ie(()=>[Qt(" "+jt(w(a)("addComment")),1)]),_:1},512),[[cn,!1]])]),_:1}),K(gt,null,{default:ie(()=>[K(Qe,{"pagination-behavior-on-filter":"first",columns:w(me),data:w(we),loading:w(Q),"single-line":!1,"scroll-x":1500,striped:""},null,8,["columns","data","loading"])]),_:1}),K(_e,{page:w(B),"onUpdate:page":[l[1]||(l[1]=R=>ma(B)?B.value=R:null),Ve],class:"mt-5 justify-end","show-size-picker":"","page-size":w(O),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(w(j)/w(O)),"onUpdate:pageSize":N},null,8,["page","page-size","page-count"]),K(ut,{show:w(v),"onUpdate:show":l[7]||(l[7]=R=>ma(v)?v.value=R:null),loading:w(pe)||w(V)||w(k),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:w($)?w(a)("editComment"):w(a)("addComment"),"positive-text":w(a)("validate"),"negative-text":w(a)("cancel"),onPositiveClick:te,onNegativeClick:l[8]||(l[8]=R=>v.value=!1)},{default:ie(()=>[K(wt,{ref_key:"formRef",ref:ne,class:"mt-5",model:w(U),rules:ye,"show-require-mark":!1,size:"medium"},{default:ie(()=>[K(Se,{label:w(a)("name"),path:"name"},{default:ie(()=>[K(w(Ze),{value:w(U).name,"onUpdate:value":l[2]||(l[2]=R=>w(U).name=R),placeholder:w(a)("name"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),K(Se,{label:w(a)("email"),path:"email"},{default:ie(()=>[K(w(Ze),{value:w(U).email,"onUpdate:value":l[3]||(l[3]=R=>w(U).email=R),placeholder:w(a)("email"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),K(Se,{label:w(a)("article"),path:"article"},{default:ie(()=>[K(it,{value:w(U).articleId,"onUpdate:value":l[4]||(l[4]=R=>w(U).articleId=R),options:w(vt),placeholder:w(a)("article"),loading:w(Le),filterable:"",clearable:"",remote:"","value-field":"id","label-field":"fullname",class:"w-full",onSearch:_t},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),K(Se,{label:w(a)("content"),path:"content"},{default:ie(()=>[K(w(Ze),{value:w(U).content,"onUpdate:value":l[5]||(l[5]=R=>w(U).content=R),placeholder:w(a)("content"),type:"textarea",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),K(Se,{label:w(a)("status"),path:"isActive"},{default:ie(()=>[K(ht,{value:w(U).isActive,"onUpdate:value":l[6]||(l[6]=R=>w(U).isActive=R),size:"small"},{checked:ie(()=>[Qt(jt(w(a)("published")),1)]),unchecked:ie(()=>[Qt(jt(w(a)("unpublished")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),vn=()=>{const{t:z}=oe(),C=[{label:z("draft"),value:X.DRAFT,tagType:"default"},{label:z("pending"),value:X.PENDING,tagType:"info"},{label:z("published"),value:X.PUBLISHED,tagType:"success"},{label:z("trash"),value:X.TRASH,tagType:"error"}];return{getNewsArticleStatusTagType:a=>C.find(h=>h.value===a)?.tagType||"default",getNewsArticleStatusLabel:a=>C.find(h=>h.value===a)?.label,newsArticleStatus:C}},{defineComponent:gn}=await ee("vue"),{unref:e,toDisplayString:T,createElementVNode:ot,createVNode:i,withCtx:d,createTextVNode:L,openBlock:Z,createBlock:ct,createCommentVNode:dt,createElementBlock:De,resolveComponent:Us,isRef:Ue,renderList:_a,Fragment:Gt,vShow:hn,withDirectives:wn,normalizeStyle:yn}=await ee("vue"),bn={key:0,class:"flex items-center gap-3"},kn={key:1,class:"flex items-center gap-3"},Cn={class:"flex justify-end"},$n={key:0},xn={key:0},An={key:0},Nn={key:1},In={key:2},Sn={key:3},zn={class:"flex justify-center"},Dn={class:"text-base"},Un={class:"px-10 mt-20"},Tn={class:"w-full text-center"},{inject:Mn,ref:E,computed:$t,h:S,watch:va}=await ee("vue"),En="articles",Vn=gn({__name:"index",setup(z){const C=xe(),x=qt(),{tr:f,pickByTheme:a,fileUrl:h,appPrimaryColor:o}=Me(),{newsArticleStatus:k}=vn(),{tags:_,orderedCategories:pe}=tl(),{t:n,locale:V}=oe(),F=al(),he=Mn("appConfig"),{mutate:re,isPending:we}=zl(),{mutate:me,isPending:j}=Dl(),{mutate:O,isPending:B}=Ul(),{mutate:le,isPending:Ve}=Tl(),{mutate:N,isPending:Ae}=Ml(),P=E([]),Q=E([]),v=E([]),$=E(0),ne=E(""),U=E(),ye=Ia(ne,500),fe=E([]),te=E(!1),b=E(null),ae=E(null),Ne=$t(()=>[{type:"selection"},{title:n("title"),key:"title",resizable:!0,width:250,fixed:"left",ellipsis:{tooltip:!0},render(m){return S("div",{},{default:()=>f(m.title)})}},{title:n("summary"),key:"summary",resizable:!0,width:200,render(m){return S(xa,{class:"text-xs",lineClamp:1,expandTrigger:"click",tooltip:!1},{default:()=>f(m.summary)})}},{title:n("categories"),key:"categories",width:150,render(m){return S("div",{},{default:()=>m.categories?.map(s=>s.name).map(s=>S(Ke,{type:"info",size:"small",class:"mr-1 mb-1"},{default:()=>f(s)}))})}},{title:n("tags"),key:"tags",width:150,render(m){return S("div",{},{default:()=>m.tags?.map(s=>s.name).map(s=>S(Ke,{type:"primary",size:"small",class:"mr-1 mb-1"},{default:()=>f(s)}))})}},{title:n("headline"),key:"isHeadline",resizable:!0,width:150,ellipsis:{tooltip:!0},render(m){return S(Ke,{type:m.isHeadline?"success":"error",bordered:!1},{default:()=>m.isHeadline?n("yes"):n("no")})}},{title:n("author"),key:"author",resizable:!0,width:150,ellipsis:{tooltip:!0},render(m){return S("div",{},{default:()=>m.author?.firstname+" "+m.author?.lastname})}},{title:n("lastEdition"),key:"updatedAt",width:125,render(m){return S("div",{},{default:()=>rt(m.updatedAt,{locale:V.value})})}},{title:n("creation"),key:"createdAt",width:125,render(m){return S("div",{},{default:()=>rt(m.createdAt,{locale:V.value})})}},{title:()=>S(Aa,{},{default:()=>[S(Ze,{ref:U,placeholder:n("search"),value:ne.value,onInput:m=>{ne.value=m,ne.value||l()},clearable:!0}),S(M,{onClick:()=>{l()}},{default:()=>S(A,{color:"white"},{default:()=>S(q,{icon:"carbon:search"})})})]}),key:"actions",width:225,render(m){return S("div",{class:"flex justify-end items-center w-full"},[S(M,{size:"small",type:"warning",secondary:!0,onClick:()=>{Dt(m)},renderIcon:()=>S(A,null,{default:()=>S(q,{icon:"carbon:edit"})})},{default:()=>n("edit")}),S("div",{class:"w-2"}),S(M,{size:"small",type:"info",secondary:!0,onClick:()=>{b.value=m,ae.value=m.status,te.value=!0},renderIcon:()=>S(A,null,{default:()=>S(q,{icon:"mdi:equal"})})},$.value==X.TRASH?{}:{default:()=>n("status")}),S("div",{class:"w-2"}),$.value==X.TRASH?S(M,{size:"small",type:"error",secondary:!0,onClick:()=>{x.warning({title:n("confirm"),content:n("confirmDeleteComment"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{m.id&&re(m)}})},renderIcon:()=>S(A,null,{default:()=>S(q,{icon:"carbon:trash-can"})})}):null])},fixed:"right"}]),J=E(0),je=E(24),Ie=E(1),Le=$t(()=>({pageSize:je.value,query:ye.value,page:Ie.value,status:$.value,categories:P.value,tags:Q.value,months:v.value})),_t=m=>{Ie.value=m,l()},vt=m=>{je.value=m,l()},{data:p,refetch:l,isPending:I}=ll(Le);va(()=>p.value,m=>{fe.value=m?.articles||[],J.value=m?.meta?.total||0,Ie.value=m?.meta?.currentPage||1},{deep:!0,immediate:!0});const{data:Qe}=nl(),{data:gt}=sl(),{data:_e}=ol(),{data:Se}=Et(X.DRAFT),{data:it}=Et(X.PUBLISHED),{data:ht}=Et(X.PENDING),{data:wt}=Et(X.TRASH),{data:ut}=rl(F.userData?.id||0),R=$t(()=>gt.value?.map(m=>({label:m,value:m}))),Nt=$t(()=>!!(B.value||j.value||Ve.value||we.value||Ae.value)),et=E(!1),ze=E([]),yt=E(ze.value),be=E([]),It=E(be.value),Pe=E(null),St=E(null),g=E({authorId:F.userData?.id,publisherId:F.userData?.id,title:"",slug:"",summary:"",content:'{"fr":""}',featuredImage:"",featuredImageUrl:"",legend:"",allowComments:!0,isHeadline:!1,status:X.DRAFT,publishedAt:ia(new Date,{outPattern:"YYYY-MM-DD HH:mm:ss",locale:V.value})}),zt=E(g.value),Ot={title:[{required:!0,message:n("fillRequired")}],slug:[{required:!0,message:n("fillRequired")}],content:[{required:!0,message:n("fillRequired")}],summary:[{required:!0,message:n("fillRequired")}],featuredImage:[{required:!0,message:n("fillRequired")}],authorId:[{required:!0,message:n("fillRequired")}],publisherId:[{required:!0,message:n("fillRequired")}]},Ht=$t(()=>de.isEqual(ze.value,yt.value)&&de.isEqual(be.value,It.value)&&de.isEqual(g.value,zt.value)),Dt=m=>{Pe.value=de.cloneDeep(m),m?(g.value=de.cloneDeep(m),ze.value=m.tags?.map(s=>s.id)??[],be.value=m.categories?.map(s=>s.id)??[]):(g.value={authorId:F.userData?.id,publisherId:F.userData?.id,title:"",slug:"",summary:"",content:'{"fr":""}',featuredImage:"",featuredImageUrl:"",legend:"",allowComments:!0,isHeadline:!1,status:X.DRAFT,publishedAt:ia(new Date,{outPattern:"YYYY-MM-DD HH:mm:ss",locale:V.value})},ze.value=[],be.value=[]),yt.value=de.cloneDeep(ze.value),It.value=de.cloneDeep(be.value),zt.value=de.cloneDeep(g.value),et.value=!0},y=async()=>(St.value?.validate(async m=>{if(!m){const s={authorId:g.value.authorId,publisherId:g.value.publisherId,title:g.value.title,slug:g.value.slug,summary:g.value.summary,content:g.value.content,featuredImage:g.value.featuredImage,legend:g.value.legend,allowComments:g.value.allowComments,isHeadline:g.value.isHeadline,status:g.value.status,publishedAt:g.value.publishedAt,categories:be.value,tags:ze.value};Pe.value?me({id:Pe.value.id,...s}):O(s),et.value=!1}}),!1),ve=async()=>{b.value&&me({id:b.value?.id,status:ae.value},{onSuccess:()=>{b.value=null,ae.value=null,te.value=!1}})},tt=m=>[m.parentId?S(A,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>S(q,{icon:"mdi:arrow-right"})}):null,`${f(m.name)}`],la=m=>S("span",{},{default:()=>`${f(m.name)||m.name}`}),za=m=>S("span",{},{default:()=>rt(m.label,{inPattern:"YYYY-MM",outPattern:"MMMM YYYY",locale:V.value})}),Da=m=>/^[a-z0-9_-]*$/.test(m);va(()=>g.value.title,m=>{Pe.value||(g.value.slug=El(f(m),{trim:!0,lower:!0,strict:!0}))});const bt=E(!1),Ua=async m=>{g.value.featuredImage=m,bt.value=!1},Ta=()=>{g.value.featuredImage=""},na=E(ua()),ke=E([]),Ma=m=>m.id,Ea=m=>{ke.value=m};function Kt(){ke.value=[],na.value=ua()}const Va=async()=>(ke.value.length?x.warning({title:n("confirm"),content:n("deleteSelectionWarningMessage",[ke.value.length]),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:()=>{N(ke.value,{onSuccess:()=>{Kt()}})}}):C.warning(n("noItemSelected")),!1),Pa=async()=>(ke.value.length?x.warning({title:n("confirm"),content:n("editSelectionStatusWarningMessage",[ke.value.length]),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{le({selectedItems:ke.value,data:{status:ae.value}},{onSuccess:()=>{te.value=!1,Kt()}})}}):C.warning(n("noItemSelected")),!1);return(m,s)=>{const kt=hl,at=Na,Ra=Rt,Ut=yl,sa=wl,oa=ka,qa=ta,Ba=aa,La=Zt,Fa=ya,Oa=ba,Ha=Bt,Ka=Cl,Ya=Jt,Tt=Xt,Fe=Ft,Mt=$a,Yt=Ca,ja=kl,ra=bl,Qa=Lt,Ga=cl;return Z(),De(Gt,null,[i(Ra,{to:"#add-article-action"},{default:d(()=>[e(ke).length?(Z(),De("section",bn,[ot("span",null,T(e(n)("nbItemsSelected",[e(ke).length])),1),e($)==e(X).TRASH?(Z(),ct(e(M),{key:0,secondary:"",type:"error",size:"small",onClick:Va},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"carbon:trash-can"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("delete")),1)]),_:1})):dt("",!0),i(e(M),{type:"info",size:"small",secondary:"",onClick:s[0]||(s[0]=()=>{b.value=null,ae.value=null,te.value=!0})},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"mdi:equal"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("editStatus")),1)]),_:1}),i(e(M),{type:"warning",size:"small",secondary:"",onClick:Kt},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"carbon:close"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("cancelSelection")),1)]),_:1})])):(Z(),De("section",kn,[i(at,{value:e(v),"onUpdate:value":[s[2]||(s[2]=c=>Ue(v)?v.value=c:null),s[3]||(s[3]=c=>e(l)())],"render-label":za,options:e(R),placeholder:e(n)("months"),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"label","value-field":"value",class:"!w-[200px]"},{action:d(()=>[i(kt,{size:"large",class:"w-full","default-checked":e(R)?.length&&e(v).length===e(R)?.length,"onUpdate:checked":s[1]||(s[1]=c=>{c?v.value=e(R)?.map(Oe=>Oe.value)||[]:v.value=[],e(l)()})},{default:d(()=>[L(T(e(n)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder"]),i(at,{value:e(Q),"onUpdate:value":[s[5]||(s[5]=c=>Ue(Q)?Q.value=c:null),s[6]||(s[6]=c=>e(l)())],"render-label":la,placeholder:e(n)("tags"),options:e(_),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"!w-[200px]"},{action:d(()=>[i(kt,{size:"large",class:"w-full","default-checked":e(_)?.length&&e(Q).length===e(_).length,"onUpdate:checked":s[4]||(s[4]=c=>{c?Q.value=(e(_)||[]).map(Oe=>Oe.id).filter(Oe=>Oe):Q.value=[],e(l)()})},{default:d(()=>[L(T(e(n)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","placeholder","options"]),i(at,{value:e(P),"onUpdate:value":[s[8]||(s[8]=c=>Ue(P)?P.value=c:null),s[9]||(s[9]=c=>e(l)())],"render-label":tt,options:e(pe),placeholder:e(n)("categories"),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"!w-[250px]"},{action:d(()=>[i(kt,{size:"large",class:"w-full","default-checked":e(pe).length&&e(P).length===e(pe).length,"onUpdate:checked":s[7]||(s[7]=c=>{c?P.value=e(pe).map(Oe=>Oe.id).filter(Oe=>Oe):P.value=[],e(l)()})},{default:d(()=>[L(T(e(n)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder"]),i(e(M),{type:"primary",secondary:"",onClick:s[10]||(s[10]=c=>Dt(null))},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"carbon:add-alt"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("addArticle")),1)]),_:1})]))]),_:1}),i(oa,{size:"small",class:"mb-5"},{default:d(()=>[ot("div",Cn,[i(sa,{value:e($),"onUpdate:value":[s[11]||(s[11]=c=>Ue($)?$.value=c:null),s[12]||(s[12]=c=>e(l)())],name:"filterstatusradiobuttongroup",size:"medium",disabled:!!e(ke).length},{default:d(()=>[i(Ut,{value:0},{default:d(()=>[L(T(e(n)("all"))+"  ",1),e(_e)?(Z(),De("span",$n," ("+T(e(_e))+") ",1)):dt("",!0)]),_:1}),i(Ut,{value:10},{default:d(()=>[L(T(e(n)("myArticles"))+"  ",1),e(ut)?(Z(),De("span",xn," ("+T(e(ut))+") ",1)):dt("",!0)]),_:1}),(Z(!0),De(Gt,null,_a(e(k),c=>(Z(),ct(Ut,{key:c.value,value:c.value},{default:d(()=>[L(T(c.label)+"  ",1),c.value==e(X).DRAFT?(Z(),De("span",An," ("+T(e(Se))+") ",1)):c.value==e(X).PUBLISHED?(Z(),De("span",Nn," ("+T(e(it))+") ",1)):c.value==e(X).PENDING?(Z(),De("span",In," ("+T(e(ht))+") ",1)):c.value==e(X).TRASH?(Z(),De("span",Sn," ("+T(e(wt))+") ",1)):dt("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])])]),_:1}),i(Ba,null,{default:d(()=>[(Z(),ct(qa,{key:e(na),columns:e(Ne),data:e(fe),loading:e(I),"single-line":!1,"scroll-x":1500,"row-key":Ma,"pagination-behavior-on-filter":"first",size:"small",striped:"","onUpdate:checkedRowKeys":Ea},null,8,["columns","data","loading","row-key"]))]),_:1}),i(La,{page:e(Ie),"onUpdate:page":[s[13]||(s[13]=c=>Ue(Ie)?Ie.value=c:null),_t],class:"mt-5 justify-end","show-size-picker":"","page-size":e(je),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(e(J)/e(je)),"onUpdate:pageSize":vt},null,8,["page","page-size","page-count"]),i(Fa,{show:e(bt),"onUpdate:show":s[14]||(s[14]=c=>Ue(bt)?bt.value=c:null),title:e(n)("selectImage"),"upload-config":{folder:En,limit:0,maxSize:0,baseUrl:e(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:Ua},null,8,["show","title","upload-config"]),i(Ha,{show:e(te),"onUpdate:show":s[17]||(s[17]=c=>Ue(te)?te.value=c:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(n)("editStatus")},{default:d(()=>[i(Oa,{show:e(Nt)},{default:d(()=>[ot("div",zn,[i(sa,{value:e(ae),"onUpdate:value":[s[15]||(s[15]=c=>Ue(ae)?ae.value=c:null),s[16]||(s[16]=()=>{e(ke).length?Pa():ve()})],name:"filterstatusradiobuttongroup",size:"large"},{default:d(()=>[(Z(!0),De(Gt,null,_a(e(k),c=>(Z(),ct(Ut,{key:c.value,value:c.value,size:"large"},{default:d(()=>[L(T(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),_:1},8,["show"])]),_:1},8,["show","title"]),i(Ga,{modelValue:e(et),"onUpdate:modelValue":s[33]||(s[33]=c=>Ue(et)?et.value=c:null),class:"w-full"},{header:d(()=>[ot("div",Dn,[i(Ka,{depth:"1"},{default:d(()=>[L(T(e(Pe)?e(n)("editArticle"):e(n)("addArticle")),1)]),_:1})])]),"header-extra":d(()=>[i(Ya,{class:"mr-10",align:"center"},{default:d(()=>[i(e(M),{secondary:"",title:e(n)("save"),loading:e(I)||e(Nt),disabled:e(Ht),onClick:s[18]||(s[18]=c=>y())},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"carbon:save"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("save")),1)]),_:1},8,["title","loading","disabled"])]),_:1})]),default:d(()=>[ot("section",Un,[i(Qa,{ref_key:"formRef",ref:St,model:e(g),rules:Ot,"show-require-mark":!1,size:"medium"},{default:d(()=>[i(Yt,{cols:"5","x-gap":14,"y-gap":12,"item-responsive":""},{default:d(()=>[i(ra,{span:"0:5 400:5 600:2 800:2"},{default:d(()=>[i(Fe,{"show-label":!1,path:"title"},{default:d(()=>[i(Tt,{modelValue:e(g).title,"onUpdate:modelValue":s[19]||(s[19]=c=>e(g).title=c),placeholder:e(n)("title"),class:"w-full",sync:""},{label:d(()=>[L(T(e(n)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),i(Fe,{label:e(n)("slug"),path:"slug"},{default:d(()=>[i(e(Ze),{value:e(g).slug,"onUpdate:value":s[20]||(s[20]=c=>e(g).slug=c),placeholder:e(n)("slug"),"allow-input":Da,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),i(Yt,{"x-gap":"12",span:24},{default:d(()=>[i(Mt,{span:12,label:e(n)("status"),path:"status"},{default:d(()=>[i(at,{value:e(g).status,"onUpdate:value":s[21]||(s[21]=c=>e(g).status=c),placeholder:e(n)("status"),options:e(k),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),i(Mt,{span:12,label:e(n)("author"),path:"authorId"},{default:d(()=>[i(at,{value:e(g).authorId,"onUpdate:value":s[22]||(s[22]=c=>e(g).authorId=c),placeholder:e(n)("author"),options:e(Qe),"label-field":"fullname","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),wn(i(Fe,{label:e(n)("publicationDate"),path:"publishedAt"},{default:d(()=>[i(ja,{"formatted-value":e(g).publishedAt,"onUpdate:formattedValue":s[23]||(s[23]=c=>e(g).publishedAt=c),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy - HH:mm",type:"datetime",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),[[hn,e(g).status===e(X).PUBLISHED]]),i(Fe,{label:e(n)("featuredImage"),path:"featuredImage"},{default:d(()=>[i(oa,null,{default:d(()=>[ot("section",Tn,[ot("div",{class:"cursor-pointer w-full h-[200px] flex items-center justify-center rounded-sm",style:yn(`
                      border: 1px dashed ${e(a)(e(o),"white")};
                      background-image: url('${e(h)(e(g).featuredImageUrl||e(g).featuredImage||"")}');
                      background-position: center;
                      background-size: cover
                    `),onClick:s[24]||(s[24]=c=>bt.value=!0)},[e(g).featuredImage?dt("",!0):(Z(),ct(e(A),{key:0,size:64},{default:d(()=>[i(e(q),{icon:"carbon:image",class:"text-gray-400"})]),_:1}))],4),e(g).featuredImage?(Z(),ct(e(M),{key:0,class:"!mt-5",quaternary:"",onClick:s[25]||(s[25]=c=>Ta())},{icon:d(()=>[i(e(A),null,{default:d(()=>[i(e(q),{icon:"carbon:trash-can"})]),_:1})]),default:d(()=>[L(" "+T(e(n)("clear")),1)]),_:1})):dt("",!0)])]),_:1})]),_:1},8,["label"]),i(Fe,{"show-label":!1,path:"legend"},{default:d(()=>[i(Tt,{modelValue:e(g).legend,"onUpdate:modelValue":s[26]||(s[26]=c=>e(g).legend=c),placeholder:e(n)("legend"),class:"w-full",sync:""},{label:d(()=>[L(T(e(n)("legend")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),i(ra,{span:"0:5 400:5 600:3 800:3"},{default:d(()=>[i(Fe,{"show-label":!1,path:"summary"},{default:d(()=>[i(Tt,{modelValue:e(g).summary,"onUpdate:modelValue":s[27]||(s[27]=c=>e(g).summary=c),placeholder:e(n)("summary"),type:"textarea",class:"w-full",autosize:{minRows:3,maxRows:4},sync:""},{label:d(()=>[L(T(e(n)("summary")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),i(Fe,{"show-label":!1,path:"content"},{default:d(()=>[i(Tt,{modelValue:e(g).content,"onUpdate:modelValue":s[28]||(s[28]=c=>e(g).content=c),"should-not-group-editor-when-full":"",placeholder:e(n)("content"),type:"editor",class:"w-full",sync:""},{label:d(()=>[L(T(e(n)("content")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),i(Fe,{label:e(n)("categories"),path:"categories"},{default:d(()=>[i(at,{value:e(be),"onUpdate:value":s[29]||(s[29]=c=>Ue(be)?be.value=c:null),"render-label":tt,placeholder:e(n)("categories"),options:e(pe),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),i(Fe,{label:e(n)("tags"),path:"tags"},{default:d(()=>[i(at,{value:e(ze),"onUpdate:value":s[30]||(s[30]=c=>Ue(ze)?ze.value=c:null),"render-label":la,placeholder:e(n)("tags"),options:e(_),"max-tag-count":"responsive",filterable:"",multiple:"",tag:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),i(Yt,{"x-gap":"12",span:24},{default:d(()=>[i(Mt,{"show-label":!1,span:12,path:"allowComments"},{default:d(()=>[i(kt,{checked:e(g).allowComments,"onUpdate:checked":s[31]||(s[31]=c=>e(g).allowComments=c)},{default:d(()=>[L(T(e(n)("allowComments")),1)]),_:1},8,["checked"])]),_:1}),i(Mt,{"show-label":!1,span:12,path:"isHeadline"},{default:d(()=>[i(kt,{checked:e(g).isHeadline,"onUpdate:checked":s[32]||(s[32]=c=>e(g).isHeadline=c)},{default:d(()=>[L(T(e(n)("headline")),1)]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])],64)}}}),Pn=Sa(Vn,[["__scopeId","data-v-23168205"]]),Rn=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=xe(),h=Ee();return Ye({queryKey:["news-tags"],operation:"insert",getItemId:o=>o.id??`temp-${crypto.randomUUID()}`,mutationFn:async o=>{h.start();const k=await x({method:"post",url:"/news-tags",data:ft(o,["id"])});if(h.finish(),k.failure&&k.error)throw new Error(k.error);return k.result.data},mutationOptions:{onSuccess:()=>{a.success(f("success"))},onError:o=>{o?.response?.data?.errorCode===mt.FORM_INVALID_DATA?C(o?.response?.data?.data):a.error(f("anErrorOccurred"))},...z}})},qn=z=>{const{displayFormErrors:C}=Me(),{request:x}=Be(),{t:f}=oe(),a=xe(),h=Ee();return Ye({queryKey:["news-tags"],operation:"update",getItemId:o=>o.id??`temp-${crypto.randomUUID()}`,mutationFn:async o=>{h.start();const k=await x({method:"put",url:`/news-tags/${o.id}`,data:ft(o,["id"])});if(h.finish(),k.failure&&k.error)throw new Error(k.error);return k.result.data},mutationOptions:{onSuccess:()=>{a.success(f("success"))},onError:o=>{o?.response?.data?.errorCode===mt.FORM_INVALID_DATA?C(o?.response?.data?.data):a.error(f("anErrorOccurred"))},...z}})},Bn=z=>{const{request:C}=Be(),{t:x}=oe(),f=xe(),a=Ee();return Ye({queryKey:["news-tags"],operation:"remove",getItemId:h=>h.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:h})=>{a.start();const o=await C({method:"delete",url:`/news-tags/${h}`});if(a.finish(),!o.success)throw new Error(o.error);return o.result.data},mutationOptions:{onSuccess:()=>{f.success(x("success"))},onError:h=>{f.error(x("anErrorOccurred"))},...z}})},{defineComponent:Ln}=await ee("vue"),{unref:D,createVNode:ue,withCtx:ce,toDisplayString:xt,createTextVNode:At,resolveComponent:Ts,isRef:Fn,Fragment:On,openBlock:Hn,createElementBlock:Kn}=await ee("vue"),{ref:pt,h:W,computed:Yn}=await ee("vue"),jn=Ln({__name:"index",setup(z){const C=xe(),x=qt(),{tr:f}=Me(),{t:a,locale:h}=oe(),{data:o,isPending:k}=il(),{mutate:_,isPending:pe}=Bn(),{mutate:n,isPending:V}=qn(),{mutate:F,isPending:he}=Rn(),re=pt(""),we=pt(),me={pageSize:12,prefix:({itemCount:v})=>W("div",{class:"font-bold"},{default:()=>`${a("total")}: ${v}`})},j=[{title:a("name"),key:"name",resizable:!0,width:150,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(v){return W("div",{},{default:()=>f(v.name)})}},{title:a("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(v){return W("small",{},{default:()=>f(v.description)})}},{title:a("status"),key:"isActive",width:100,render(v){return W(Ke,{type:v.isActive?"success":"error",bordered:!1},{default:()=>v.isActive?a("visible"):a("hidden")})},sortOrder:!1,sorter:"default"},{title:a("article_s"),key:"articlesCount",width:90,render(v){return W(Ke,{type:"info",bordered:!1},{default:()=>v.articlesCount})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:125,render(v){return W("div",{},{default:()=>rt(v.updatedAt,{locale:h.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:125,render(v){return W("div",{},{default:()=>rt(v.createdAt,{locale:h.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>W(Ze,{ref:we,placeholder:a("search"),value:re.value,onInput:v=>{re.value=v}},{suffix:()=>W(A,{},{default:()=>W(q,{icon:"carbon:search"})})}),key:"actions",width:150,render(v){return W("div",{class:"flex justify-end items-center w-full"},[W(M,{size:"small",type:"warning",secondary:!0,onClick:()=>{P(v)},renderIcon:()=>W(A,null,{default:()=>W(q,{icon:"carbon:edit"})})}),W("div",{class:"w-2"}),W(M,{size:"small",type:"error",secondary:!0,onClick:()=>{x.warning({title:a("confirm"),content:a("confirmDeleteNewsTag"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{v.id&&_({id:v.id})}})},renderIcon:()=>W(A,null,{default:()=>W(q,{icon:"carbon:trash-can"})})})])},fixed:"right"}],O=Yn(()=>{if(!re.value)return o.value;const v=o.value?.filter($=>$.name.toLowerCase().includes(re.value.toLowerCase())||$.description?.toLowerCase().includes(re.value.toLowerCase()));return we.value&&we.value.focus(),v}),B=pt(!1),le=pt(null),Ve=pt(null),N=pt({name:"",description:"",isActive:!0}),Ae={name:[{required:!0,message:a("fillRequired")}],description:[{required:!0,message:a("fillRequired")}]},P=v=>{le.value=de.cloneDeep(v),v?N.value=de.cloneDeep(v):N.value={name:"",description:"",isActive:!0},B.value=!0},Q=async()=>(Ve.value?.validate(async v=>{if(!v){const $={name:N.value.name,description:N.value.description,isActive:N.value.isActive};le.value?le.value.name!==N.value.name&&(o.value||[]).findIndex(ne=>ne.name==N.value.name)>-1?C.error(a("sameTagNameMessage")):n({id:le.value.id,...$}):(o.value||[]).findIndex(ne=>ne.name==N.value.name)>-1?C.error(a("sameTagNameMessage")):F($),B.value=!1}}),!1);return(v,$)=>{const ne=Rt,U=ta,ye=aa,fe=Xt,te=Ft,b=ea,ae=Lt,Ne=Bt;return Hn(),Kn(On,null,[ue(ne,{to:"#add-tag-action"},{default:ce(()=>[ue(D(M),{type:"primary",secondary:"",onClick:$[0]||($[0]=J=>P(null))},{icon:ce(()=>[ue(D(A),{size:"18"},{default:ce(()=>[ue(D(q),{icon:"carbon:add-alt"})]),_:1})]),default:ce(()=>[At(" "+xt(D(a)("addTag")),1)]),_:1})]),_:1}),ue(ye,null,{default:ce(()=>[ue(U,{columns:j,data:D(O),pagination:me,loading:D(k),"single-line":!1,"scroll-x":1e3,size:"small",striped:""},null,8,["data","loading"])]),_:1}),ue(Ne,{show:D(B),"onUpdate:show":$[4]||($[4]=J=>Fn(B)?B.value=J:null),loading:D(he)||D(V)||D(pe),preset:"dialog",style:{width:"450px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:D(le)?D(a)("editTag"):D(a)("addTag"),"positive-text":D(a)("validate"),"negative-text":D(a)("cancel"),onPositiveClick:Q,onNegativeClick:$[5]||($[5]=J=>B.value=!1)},{default:ce(()=>[ue(ae,{ref_key:"formRef",ref:Ve,class:"mt-5",model:D(N),rules:Ae,"show-require-mark":!1,size:"medium"},{default:ce(()=>[ue(te,{"show-label":!1,path:"name"},{default:ce(()=>[ue(fe,{modelValue:D(N).name,"onUpdate:modelValue":$[1]||($[1]=J=>D(N).name=J),placeholder:D(a)("name"),class:"w-full",sync:""},{label:ce(()=>[At(xt(D(a)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ue(te,{"show-label":!1,path:"description"},{default:ce(()=>[ue(fe,{modelValue:D(N).description,"onUpdate:modelValue":$[2]||($[2]=J=>D(N).description=J),placeholder:D(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:ce(()=>[At(xt(D(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ue(te,{label:D(a)("status"),path:"isActive"},{default:ce(()=>[ue(b,{value:D(N).isActive,"onUpdate:value":$[3]||($[3]=J=>D(N).isActive=J),size:"small"},{checked:ce(()=>[At(xt(D(a)("visible")),1)]),unchecked:ce(()=>[At(xt(D(a)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{defineComponent:Qn}=await ee("vue"),{unref:se,vShow:We,createElementVNode:He,withDirectives:Xe,resolveComponent:Ms,withCtx:Je,createVNode:Te,TransitionGroup:Gn,normalizeStyle:Wn,openBlock:Xn,createBlock:Jn}=await ee("vue"),Zn={id:"header-btn"},es={id:"add-article-action"},ts={id:"add-comment-action"},as={id:"add-category-action"},ls={id:"add-tag-action"},ns={key:"articles"},ss={key:"comments"},os={key:"categories"},rs={key:"tags"},{defineComponent:is,ref:ga,h:Wt,computed:ha,watch:us,onMounted:cs}=await ee("vue"),{defineStore:ds}=await ee("pinia"),ps=is({name:ul.NEWS_MANAGEMENT.NAME}),ms=Qn({...ps,setup(z){const C=["articles","categories","comments","tags"],x=j=>C.includes(j),{t:f}=oe(),a=Vl(),{is2XlScreen:h,isXlScreen:o,isLgScreen:k,isMdScreen:_,isSmScreen:pe}=Me(),n=wa(),V=ds("news-management",()=>({currentMenuItemKey:ga("articles")}))(),F=(j,O)=>()=>Wt(A,{},{default:()=>Wt(q,{icon:j})}),he=(j,O)=>()=>Wt("span",{id:de.camelCase(O)},{default:()=>j}),re=ha(()=>[{label:he(f("articles"),"articles"),key:"articles",icon:F("carbon:document")},{label:he(f("comments"),"comments"),key:"comments",icon:F("carbon:chat")},{label:he(f("categories"),"categories"),key:"categories",icon:F("carbon:categories")},{label:he(f("tags"),"tags"),key:"tags",icon:F("carbon:tag")}]),we=ha(()=>n.contentLayoutSize.height-200),me=ga();return us(()=>[_.value,pe.value,k.value,o.value],([j,O,B,le])=>{me.value=j||O||B||le,setTimeout(()=>{me.value=void 0},500)}),cs(()=>{setTimeout(()=>{a.params.key&&x(a.params.key)&&(V.currentMenuItemKey=a.params.key)},500)}),(j,O)=>{const B=Jt,le=Al,Ve=xl,N=$l,Ae=Wa;return Xn(),Jn(Ae,null,{"header-extra":Je(()=>[Te(B,null,{default:Je(()=>[He("div",Zn,[Xe(He("div",es,null,512),[[We,se(V).currentMenuItemKey==="articles"]]),Xe(He("div",ts,null,512),[[We,se(V).currentMenuItemKey==="comments"]]),Xe(He("div",as,null,512),[[We,se(V).currentMenuItemKey==="categories"]]),Xe(He("div",ls,null,512),[[We,se(V).currentMenuItemKey==="tags"]])])]),_:1})]),default:Je(()=>[Te(N,{style:Wn(`height: ${se(we)}px`)},{default:Je(()=>[Te(N,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:Je(()=>[Te(Ve,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:se(me),"default-collapsed":!se(h),"collapsed-width":64,"native-scrollbar":!1,width:se(h)?300:275},{default:Je(()=>[Te(le,{value:se(V).currentMenuItemKey,"onUpdate:value":O[0]||(O[0]=P=>se(V).currentMenuItemKey=P),"collapsed-width":64,"collapsed-icon-size":22,options:se(re)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),Te(N,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:Je(()=>[Te(Gn,{name:"slide-fade"},{default:Je(()=>[Xe(He("section",ns,[Te(Pn)],512),[[We,se(V).currentMenuItemKey==="articles"]]),Xe(He("section",ss,[Te(_n)],512),[[We,se(V).currentMenuItemKey==="comments"]]),Xe(He("section",os,[Te(nn)],512),[[We,se(V).currentMenuItemKey==="categories"]]),Xe(He("section",rs,[Te(jn)],512),[[We,se(V).currentMenuItemKey==="tags"]])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})}}}),Es=Sa(ms,[["__scopeId","data-v-72fc85b4"]]);export{Es as default};
