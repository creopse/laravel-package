import{i as b}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as L}from"./AuthLayout.vue_vue_type_script_setup_true_lang-BL_4apmB.js";import{I as U}from"./iconify_vue-DXPEksg3.js";import{u as q,c as M,d as K,i as $,R as d,P as G,j as O}from"./main-DH7x7JSJ.js";import{u as j}from"./vue-router-DS5MTONl.js";import{_ as F}from"./validator-DC79P2ge.js";import{u as z,a as W,b as J,c as Q,k as X,B as Y,h as Z}from"./naive-ui-dfg6Ko-R.js";import{u as ee}from"./vue-i18n-B92nPylK.js";const{defineComponent:te}=await b("vue"),{unref:e,resolveComponent:ye,withKeys:k,createVNode:n,withCtx:a,toDisplayString:c,createTextVNode:p,createElementVNode:w,Fragment:oe,openBlock:h,createElementBlock:se,createCommentVNode:ne,createBlock:ae}=await b("vue"),le={class:"flex items-center justify-between mt-2 mb-8 gap-8"},re={class:"flex items-center"},{defineComponent:ie,ref:T,watch:ue}=await b("vue"),me=ie({name:d.LOGIN.NAME}),ke=te({...me,setup(ce){const{t:o,locale:E}=ee(),{updateLocale:C}=q(),_=j(),R=z(),i=M(),{getSettingValue:v}=K(),{mutate:S,isPending:N}=$(),y=T(null),s=T({email:"",password:"",remember:!1}),x={email:[{required:!0,message:o("fillRequired")},{trigger:["input"],validator(u,t){return t&&!F.isEmail(t)?new Error(o("invalidEmail")):!0}}],password:[{required:!0,message:o("fillRequired")}]},f=async u=>{u.preventDefault(),y.value?.validate(async t=>{t||(i.userData=null,S(s.value,{onSuccess:m=>{s.value={email:"",password:"",remember:!1};const r=m.user;r?.profileType&&r?.profileType!==G.ADMIN?R.error(o("unableToLogin")):(i.userData=r,i.accessToken=m.accessToken,i.accessTokenDate=O())}}))})},A=v("disableInstaller","boolean"),D=v("allowRegistration","boolean");return ue(()=>i.isUserConnected,u=>{C(E.value,!1),u&&_.replace(d.HOME.PATH)},{immediate:!0}),(u,t)=>{const m=Q,r=J,I=X,g=Y,V=U,B=Z,P=W,H=L;return h(),ae(H,{title:`${e(o)("welcome")} !`,subtitle:e(o)("loginToGetStarted"),"display-server-alerts":!e(A)},{default:a(()=>[n(P,{ref_key:"formRef",ref:y,model:e(s),rules:x,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(r,{label:e(o)("addressEmail"),path:"email"},{default:a(()=>[n(m,{value:e(s).email,"onUpdate:value":t[0]||(t[0]=l=>e(s).email=l),placeholder:e(o)("addressEmail"),class:"w-full",onKeyup:k(f,["enter"])},null,8,["value","placeholder"])]),_:1},8,["label"]),n(r,{span:12,label:e(o)("password"),path:"password"},{default:a(()=>[n(m,{value:e(s).password,"onUpdate:value":t[1]||(t[1]=l=>e(s).password=l),placeholder:e(o)("password"),"show-password-on":"mousedown",type:"password",class:"w-full",onKeyup:k(f,["enter"])},null,8,["value","placeholder"])]),_:1},8,["label"]),w("div",le,[w("div",re,[n(I,{checked:e(s).remember,"onUpdate:checked":t[2]||(t[2]=l=>e(s).remember=l)},{default:a(()=>[p(c(e(o)("rememberMe")),1)]),_:1},8,["checked"])]),n(g,{text:"",onClick:t[3]||(t[3]=l=>e(_).push(e(d).RESET_PASSWORD.PATH))},{default:a(()=>[p(c(e(o)("forgotPassword")),1)]),_:1})]),n(g,{secondary:"",type:"primary",loading:e(N),disabled:!e(s).email||!e(s).password,block:"",onClick:f},{icon:a(()=>[n(B,null,{default:a(()=>[n(V,{icon:"carbon:login"})]),_:1})]),default:a(()=>[p(" "+c(e(o)("toLogin")),1)]),_:1},8,["loading","disabled"]),e(D)?(h(),se(oe,{key:0},[t[5]||(t[5]=w("div",{class:"h-3"},null,-1)),n(g,{block:"",tertiary:"",type:"default",onClick:t[4]||(t[4]=l=>e(_).push(e(d).REGISTER.PATH))},{default:a(()=>[p(c(e(o)("dontHaveAccount"))+" "+c(e(o)("register")),1)]),_:1})],64)):ne("",!0)]),_:1},8,["model"])]),_:1},8,["title","subtitle","display-server-alerts"])}}});export{ke as default};
