import{i as L}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{a as dt}from"./index.vue_vue_type_script_setup_true_lang-CHdo98-A.js";import{_ as ft}from"./PageLayout.vue_vue_type_script_setup_true_lang-CMiqLWkB.js";import{I as he}from"./iconify_vue-DXPEksg3.js";import{r as Me,B as ge,u as we,p as He,t as Oe,q as je,h as Ge,_ as We,d as Xe,o as Ke,s as pt,y as mt,a as _t,e as vt,c as ht,O as gt,b as wt,ag as bt,H as kt,C as yt,K as Ct}from"./naive-ui-CqiIy5K7.js";import{u as se}from"./vue-i18n-B92nPylK.js";import{L as u}from"./leaflet-mOZL4BmS.js";import{_ as Et}from"./VueTelInputWrapper-DwU_q1Em.js";import{c as Qe,p as Pt,u as Ze,b as xt,aw as Je,ax as $t,ay as Ft,az as Ut,ar as Dt,P as St,R as Lt}from"./main-BRU0R4jH.js";import{p as Nt}from"./password-strength-options-ByZgG3BK.js";import{p as Bt}from"./check-password-strength-DpJr94ZL.js";import{_ as xe}from"./lodash-C_MgVQnG.js";import{_ as Vt}from"./Admin.vue_vue_type_script_setup_true_lang-BU8-iKao.js";import{A as $e}from"./auth-type-BjVd43MF.js";import{_ as Fe}from"./validator-DC79P2ge.js";import{i as zt}from"./libphonenumber-js-fynGZfgH.js";const{defineComponent:It}=await L("vue"),{unref:le,resolveComponent:zn,isRef:Rt,createVNode:me,withCtx:At,openBlock:Tt,createElementBlock:qt}=await L("vue"),{ref:_e}=await L("vue"),Mt={class:"flex justify-between"},Ht=It({__name:"MapFeature",emits:["selectCoords","getGeoLocation"],setup(s,{emit:f}){const r=f,{t}=se(),h=_e(null),g=_e(!1),E=_e([]),z=async o=>{try{if(!o.length){E.value=[];return}g.value=!0;const b=`https://nominatim.openstreetmap.org/search?format=json&polygon=1&addressdetails=1&q=${encodeURI(o)}`,c=await fetch(b);if(!c.ok)throw new Error(`Request failed with status ${c.status}`);const y=await c.json();E.value=y.map(x=>({coords:{lat:x.lat,lng:x.lon},value:x.place_id,label:x.display_name})),g.value=!1}catch{g.value=!1}},B=(o,b)=>{r("selectCoords",b.coords)};return(o,b)=>{const c=Me,y=he,x=ge;return Tt(),qt("div",Mt,[me(c,{value:le(h),"onUpdate:value":[b[0]||(b[0]=q=>Rt(h)?h.value=q:null),B],valueModifiers:{lazy:!0},filterable:"",placeholder:le(t)("searchPlaces"),options:le(E),loading:le(g),clearable:"",remote:"",class:"relative !w-2/3",onSearch:z},null,8,["value","placeholder","options","loading"]),me(x,{secondary:"",onClick:b[1]||(b[1]=q=>r("getGeoLocation"))},{icon:At(()=>[me(y,{icon:"mdi:target"})]),_:1})])}}}),Ot="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(38,%20106,%20226,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e",jt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20style='fill:%20rgba(226,%2038,%2038,%201);transform:%20;msFilter:;'%3e%3cpath%20d='M12%2022s8.029-5.56%208-12c0-4.411-3.589-8-8-8S4%205.589%204%209.995C3.971%2016.44%2011.696%2021.784%2012%2022zM8%209h3V6h2v3h3v2h-3v3h-2v-3H8V9z'%3e%3c/path%3e%3c/svg%3e";/*!_map
 * leaflet.fullscreen
 * (c) Bruno B.; MIT License
 * Uses fragments from the package 'screenfull'
 */const X=(()=>{const s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"]],f=s[0],r={};for(const t of s)if(t[1]in document){for(let h=0;h<t.length;h++)r[f[h]]=t[h];return r}return!1})(),Ue={change:X.fullscreenchange,error:X.fullscreenerror},Ye={request:function(s,f){return new Promise(function(r,t){const h=function(){this.off("change",h),r()}.bind(this);this.on("change",h),s=s||document.documentElement;const g=s[X.requestFullscreen](f);g instanceof Promise&&g.then(h).catch(t)}.bind(this))},exit:function(){return new Promise(function(s,f){if(!this.isFullscreen){s();return}const r=function(){this.off("change",r),s()}.bind(this);this.on("change",r);const t=document[X.exitFullscreen]();t instanceof Promise&&t.then(r).catch(f)}.bind(this))},on:function(s,f){var r=Ue[s];r&&document.addEventListener(r,f,!1)},off:function(s,f){var r=Ue[s];r&&document.removeEventListener(r,f,!1)},nativeAPI:X};Object.defineProperties(Ye,{isFullscreen:{get:function(){return!!document[X.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[X.fullscreenEnabled]}}});u.Control.FullScreen=u.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},_screenfull:Ye,onAdd:function(s){var f="leaflet-control-zoom-fullscreen",r,t="";return s.zoomControl&&!this.options.forceSeparateButton?r=s.zoomControl._container:r=u.DomUtil.create("div","leaflet-bar"),this.options.content?t=this.options.content:f+=" fullscreen-icon",this._createButton(this.options.title,f,t,r,this.toggleFullScreen,this),s.fullscreenControl=this,s.on("enterFullscreen exitFullscreen",this._toggleState,this),r},onRemove:function(){u.DomEvent.off(this.link,"click",u.DomEvent.stop).off(this.link,"click",this.toggleFullScreen,this),this._screenfull.isEnabled&&(u.DomEvent.off(this._container,this._screenfull.nativeAPI.fullscreenchange,u.DomEvent.stop).off(this._container,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this),u.DomEvent.off(document,this._screenfull.nativeAPI.fullscreenchange,u.DomEvent.stop).off(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,this))},_createButton:function(s,f,r,t,h,g){return this.link=u.DomUtil.create("a",f,t),this.link.href="#",this.link.title=s,this.link.innerHTML=r,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",s),u.DomEvent.disableClickPropagation(t),u.DomEvent.on(this.link,"click",u.DomEvent.stop).on(this.link,"click",h,g),this._screenfull.isEnabled&&(u.DomEvent.on(t,this._screenfull.nativeAPI.fullscreenchange,u.DomEvent.stop).on(t,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,g),u.DomEvent.on(document,this._screenfull.nativeAPI.fullscreenchange,u.DomEvent.stop).on(document,this._screenfull.nativeAPI.fullscreenchange,this._handleFullscreenChange,g)),this.link},toggleFullScreen:function(){var s=this._map;s._exitFired=!1,s._isFullscreen?(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.exit():(u.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:s._container,"leaflet-pseudo-fullscreen"),s.invalidateSize()),s.fire("exitFullscreen"),s._exitFired=!0,s._isFullscreen=!1):(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.request(this.options.fullscreenElement?this.options.fullscreenElement:s._container):(u.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:s._container,"leaflet-pseudo-fullscreen"),s.invalidateSize()),s.fire("enterFullscreen"),s._isFullscreen=!0)},_toggleState:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel,this._map._isFullscreen?u.DomUtil.removeClass(this.link,"leaflet-fullscreen-on"):u.DomUtil.addClass(this.link,"leaflet-fullscreen-on")},_handleFullscreenChange:function(){var s=this._map;s.invalidateSize(),!this._screenfull.isFullscreen&&!s._exitFired&&(s.fire("exitFullscreen"),s._exitFired=!0,s._isFullscreen=!1)}});u.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}});u.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(u.control.fullscreen(this.options.fullscreenControlOptions))});u.control.fullscreen=function(s){return new u.Control.FullScreen(s)};const{defineComponent:Gt}=await L("vue"),{resolveComponent:In,openBlock:De,createBlock:Wt,createCommentVNode:Xt,normalizeStyle:Kt,createElementVNode:Qt,createElementBlock:Zt}=await L("vue"),Jt={class:"relative"},{defineComponent:Yt,ref:ae,onMounted:en,watch:Se}=await L("vue"),tn=Yt({name:"LeafletLocation"}),nn=Gt({...tn,props:{coordToHighLight:{default:null},dataList:{default:()=>[]},showFeature:{type:Boolean,default:!0},height:{default:300}},emits:["update:coords","stepAction","markerClick","update:coordToHighLight"],setup(s,{emit:f}){const r=s,t=f,h=we(),{t:g}=se(),E=ae(!1),z=ae(null),B=ae(null),o=ae(null),b=_=>{z.value&&o.value?.removeLayer(z.value);const P=u.icon({iconUrl:jt,iconSize:[35,35]});z.value=u.marker([_.lat,_.lng],{icon:P,draggable:!0}).addTo(o.value).on("dragend",$=>{const F=$.target.getLatLng(),p={lat:F.lat,lng:F.lng};t("update:coords",p)}),o.value?.flyTo([_.lat,_.lng],16),t("update:coords",_)},c=()=>{E.value=!0,navigator.geolocation&&E.value&&navigator.geolocation.watchPosition(y,x)},y=_=>{E.value=!1;const P={lat:_.coords.latitude,lng:_.coords.longitude};b(P)},x=_=>{E.value=!1,h.error(g("anErrorOccurredDuringLocalisationFetch"))},q=_=>{if(_.length==0)return null;let P=0,$=0;for(const U of _)P+=U.lat,$+=U.lng;const F=P/_.length,p=$/_.length;return{lat:F,lng:p}},H=()=>{if(r.dataList){const _=u.icon({iconUrl:Ot,iconSize:[35,35]});u.circle({lat:6.1316,lng:1.224},5),r.dataList.forEach($=>{u.marker([$.lat,$.lng],{icon:_}).addTo(o.value).on("click",function(F){t("markerClick",F.latlng)}).on("mouseover",function(F){})});const P=q(r.dataList);o.value?.flyTo([P?.lat||0,P?.lng||0],12)}};return en(()=>{B.value&&(o.value=u.map(B.value,{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}).setView([6.136629,1.222186],10),u.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(o.value),H(),r.coordToHighLight&&b(r.coordToHighLight))}),Se(()=>r.dataList,()=>{H()},{deep:!0}),Se(()=>r.coordToHighLight,_=>{_&&b(_)},{deep:!0}),(_,P)=>{const $=Ht;return De(),Zt("div",Jt,[r.showFeature?(De(),Wt($,{key:0,onSelectCoords:b,onGetGeoLocation:c})):Xt("",!0),Qt("div",{ref_key:"mapContainer",ref:B,class:"z-[1] mt-3",style:Kt({height:typeof r.height=="number"?`${r.height}px`:r.height})},null,4)])}}}),{defineComponent:ln}=await L("vue"),{unref:w,toDisplayString:Q,createTextVNode:Le,resolveComponent:Rn,createVNode:m,withCtx:d,createElementVNode:N,isRef:an,openBlock:Ne,createBlock:on,createCommentVNode:sn,Fragment:rn,createElementBlock:un}=await L("vue"),{ref:Be,computed:cn}=await L("vue"),dn=ln({__name:"Preferences",setup(s){const{t:f,locale:r}=se(),t=He(),h=we(),g=Qe(),E=Pt(),{languages:z,updateLocale:B,is2XlScreen:o,isXlScreen:b}=Ze(),{defaultPrefs:c}=xt(),y=Be(c.value),x=Be(c.value),q=cn(()=>xe.isEqual(y.value,x.value)),H=()=>{y.value=g.userData?.preferences??c.value,x.value=xe.cloneDeep(y.value)};H();const{mutate:_,isPending:P}=Je(),$=()=>{t.start(),_({id:g.userData?.id,preferences:y.value},{onSuccess:F=>{g.userData=F,H(),h.success(f("success"))},onError:F=>{h.error(f("anErrorOccurred"))},onSettled:()=>{t.finish()}})};return(F,p)=>{const U=he,J=Ge,re=ge,D=je,te=Oe,k=pt,O=We,K=Ke,Y=Xe,ie=Me;return Ne(),un(rn,null,[m(te,{class:"mb-5"},{title:d(()=>[Le(Q(w(f)("accountPreferences")),1)]),extra:d(()=>[m(D,null,{default:d(()=>[m(re,{loading:w(P),disabled:w(q),secondary:"",type:"primary",onClick:p[0]||(p[0]=C=>$())},{icon:d(()=>[m(J,null,{default:d(()=>[m(U,{icon:"carbon:save"})]),_:1})]),default:d(()=>[Le(" "+Q(w(f)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),m(O,{hoverable:""},{default:d(()=>[m(Y,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:d(()=>[m(K,null,{default:d(()=>[m(O,{class:"w-full"},{default:d(()=>[m(D,{align:"center",justify:"space-between"},{default:d(()=>[N("span",null,Q(w(f)("notificationsInApp")),1),m(k,{value:w(y).inAppNotifEnabled,"onUpdate:value":p[1]||(p[1]=C=>w(y).inAppNotifEnabled=C),"checked-value":1,"unchecked-value":0,size:"small"},{checked:d(()=>[...p[5]||(p[5]=[N("div",{class:"w-6"},null,-1)])]),unchecked:d(()=>[...p[6]||(p[6]=[N("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),m(K,null,{default:d(()=>[m(O,{class:"w-full"},{default:d(()=>[m(D,{align:"center",justify:"space-between"},{default:d(()=>[N("span",null,Q(w(f)("notificationsInEmail")),1),m(k,{value:w(y).emailNotifEnabled,"onUpdate:value":p[2]||(p[2]=C=>w(y).emailNotifEnabled=C),"checked-value":1,"unchecked-value":0,size:"small"},{checked:d(()=>[...p[7]||(p[7]=[N("div",{class:"w-6"},null,-1)])]),unchecked:d(()=>[...p[8]||(p[8]=[N("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),p[11]||(p[11]=N("div",{class:"h-2"},null,-1)),w(b)||w(o)?sn("",!0):(Ne(),on(Y,{key:0,cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12},{default:d(()=>[m(K,null,{default:d(()=>[m(O,{class:"w-full"},{default:d(()=>[m(D,{align:"center",justify:"space-between"},{default:d(()=>[N("span",null,Q(w(f)("appLanguage")),1),m(ie,{value:w(r),"onUpdate:value":[p[3]||(p[3]=C=>an(r)?r.value=C:null),w(B)],"consistent-menu-width":!1,size:"tiny",options:w(z)},null,8,["value","options","onUpdate:value"])]),_:1})]),_:1})]),_:1}),m(K,null,{default:d(()=>[m(O,{class:"w-full"},{default:d(()=>[m(D,{align:"center",justify:"space-between"},{default:d(()=>[N("span",null,Q(w(f)("appTheme")),1),m(k,{value:w(E).isLightTheme,"onUpdate:value":p[4]||(p[4]=C=>w(E).isLightTheme=C),size:"small"},{"checked-icon":d(()=>[m(J,{color:"orange"},{default:d(()=>[m(U,{icon:"carbon:sun"})]),_:1})]),"unchecked-icon":d(()=>[m(J,{color:"dimgray"},{default:d(()=>[m(U,{icon:"carbon:moon"})]),_:1})]),checked:d(()=>[...p[9]||(p[9]=[N("div",{class:"w-6"},null,-1)])]),unchecked:d(()=>[...p[10]||(p[10]=[N("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})],64)}}}),{defineComponent:fn}=await L("vue"),{resolveComponent:An,createVNode:n,withCtx:a,unref:e,toDisplayString:A,createTextVNode:W,vShow:Ve,withDirectives:ze,normalizeStyle:Ie,openBlock:T,createBlock:Z,createCommentVNode:Re,createElementBlock:ve,createElementVNode:Ae,renderList:pn,Fragment:Te,isRef:oe}=await L("vue"),mn={key:0,class:"text-6xl"},_n={class:"text-gray-500"},{defineComponent:vn,inject:hn,ref:V,computed:qe,watch:gn}=await L("vue"),wn=vn({name:Lt.ACCOUNT.NAME}),Tn=fn({...wn,setup(s){const f=He(),r=we(),{t}=se(),{pickByTheme:h,fileUrl:g,appPrimaryColor:E}=Ze(),z=hn("appConfig"),B=V(null),o=V({lastname:"",firstname:"",email:"",address:"",location:void 0,avatar:"",phone:""}),b=qe(()=>({lastname:[{required:!0,message:t("fillRequired")}],firstname:[{required:!0,message:t("fillRequired")}],email:[{required:c.userData?c.userData.authType!=$e.PHONE:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&!Fe.isEmail(l)?new Error(t("invalidEmail")):!0}}],phone:[{trigger:["input"],validator(v,l){return l&&!zt(l)?new Error(t("invalidNumber")):!0}}]})),c=Qe(),{data:y,refetch:x,isPending:q}=$t(c.userData?.id||0),{mutate:H,isPending:_}=Je();gn(()=>y.value,v=>{v&&(o.value={lastname:v.lastname,firstname:v.firstname,email:v.email,address:v.address??"",location:v.location,avatar:v.avatar,phone:v.phone??""})},{immediate:!0,deep:!0});const P=v=>{o.value.location=v},$=qe(()=>c.userData?.lastname===o.value.lastname&&c.userData?.firstname===o.value.firstname&&c.userData?.avatar===o.value.avatar&&c.userData?.address===o.value.address&&c.userData?.location===o.value.location&&(c.userData?.phone===o.value.phone||!o.value.phone)),F=async v=>{v.preventDefault(),B.value?.validate(async l=>{l||(f.start(),H({id:c.userData?.id,lastname:o.value.lastname,firstname:o.value.firstname,address:o.value.address,location:o.value.location,avatar:o.value.avatar,phone:o.value.phone},{onSuccess:S=>{c.userData=S,r.success(t("success"))},onError:S=>{r.error(t("anErrorOccurred"))},onSettled:()=>{f.finish()}}))})},p="avatars",U=V(!1),J=async v=>{o.value.avatar=v,U.value=!1},re=()=>{o.value.avatar=""},D=V(!1),te=V(null),k=V({newPassword:"",newPasswordConfirmation:"",currentPassword:""}),O={newPassword:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&["too-weak"].includes(Bt(l,Nt).value)?new Error(t("passwordTooWeak")):!0}}],newPasswordConfirmation:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&l!==k.value.newPassword?new Error(t("nonCompliantPassword")):!0}}],currentPassword:[{required:!0,message:t("fillRequired")}]},{mutate:K,isPending:Y}=Ft(),ie=async()=>(te.value?.validate(async v=>{v||K({newPassword:k.value.newPassword,newPasswordConfirmation:k.value.newPasswordConfirmation,currentPassword:k.value.currentPassword},{onSuccess:()=>{k.value={newPassword:"",newPasswordConfirmation:"",currentPassword:""},D.value=!1}})}),!1),C=V(!1),be=V(null),M=V({email:""}),et={email:[{required:!0,message:t("fillRequired")},{trigger:["input"],validator(v,l){return l&&!Fe.isEmail(l)?new Error(t("invalidEmail")):!0}}]},{mutate:tt,isPending:ke}=Ut(),nt=async()=>(be.value?.validate(async v=>{v||tt(M.value.email,{onSuccess(l,S,I){c.userData&&M.value.email&&(c.userData.email=M.value.email),o.value.email=M.value.email,M.value={email:""},C.value=!1}})}),!1),ee=V(!1),lt=()=>{ee.value=!1,x()};return(v,l)=>{const S=he,I=Ge,j=ge,ue=je,ye=mt,Ce=Ke,R=ht,ne=vt,ce=Xe,at=Et,de=gt,G=wt,ot=nn,Ee=bt,st=kt,fe=_t,rt=We,Pe=yt,it=Oe,ut=ft,ct=dt,pe=Ct;return T(),ve(Te,null,[n(ut,null,{"header-extra":a(()=>[n(ue,null,{default:a(()=>[ze(n(j,{secondary:"",onClick:l[0]||(l[0]=i=>C.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:email"})]),_:1})]),default:a(()=>[W(" "+A(e(t)("editEmail")),1)]),_:1},512),[[Ve,!1]]),ze(n(j,{secondary:"",onClick:l[1]||(l[1]=i=>D.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:password"})]),_:1})]),default:a(()=>[W(" "+A(e(t)("editPassword")),1)]),_:1},512),[[Ve,!1]]),n(j,{loading:e(_),disabled:e($),secondary:"",type:"primary",onClick:F},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:save"})]),_:1})]),default:a(()=>[W(" "+A(e(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),default:a(()=>[n(rt,{hoverable:""},{default:a(()=>[n(ce,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:a(()=>[n(Ce,{class:"text-center"},{default:a(()=>[n(ue,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:a(()=>[e(o).avatar?(T(),Z(ye,{key:0,class:"cursor-pointer","object-fit":"contain",style:Ie("border: 1px dashed "+e(h)(e(E),"white")),size:125,src:e(g)(e(o).avatar),onClick:l[2]||(l[2]=i=>U.value=!0)},null,8,["style","src"])):(T(),Z(ye,{key:1,class:"cursor-pointer",style:Ie("border: 1px dashed "+e(h)(e(E),"white")),size:125,onClick:l[3]||(l[3]=i=>U.value=!0)},{default:a(()=>[e(c).userData?.fullname?(T(),ve("span",mn,A(e(Dt)(e(c).userData?.fullname||"")),1)):(T(),Z(I,{key:1,size:64},{default:a(()=>[n(S,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style"])),e(o).avatar?(T(),Z(j,{key:2,quaternary:"",onClick:l[4]||(l[4]=i=>re())},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:trash-can"})]),_:1})]),default:a(()=>[W(" "+A(e(t)("clear")),1)]),_:1})):Re("",!0)]),_:1})]),_:1}),n(Ce,null,{default:a(()=>[n(fe,{ref_key:"formRef",ref:B,model:e(o),rules:e(b),"show-label":!0,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(ce,{"x-gap":"12",span:24},{default:a(()=>[n(ne,{span:12,label:e(t)("lastname"),path:"lastname"},{default:a(()=>[n(R,{value:e(o).lastname,"onUpdate:value":l[5]||(l[5]=i=>e(o).lastname=i),placeholder:e(t)("lastname"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(ne,{span:12,label:e(t)("firstname_s"),path:"firstname"},{default:a(()=>[n(R,{value:e(o).firstname,"onUpdate:value":l[6]||(l[6]=i=>e(o).firstname=i),placeholder:e(t)("firstname_s"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),n(ce,{"x-gap":"12",span:24},{default:a(()=>[n(ne,{span:12,label:e(t)("phoneNumber"),path:"phone"},{default:a(()=>[n(at,{modelValue:e(o).phone,"onUpdate:modelValue":l[7]||(l[7]=i=>e(o).phone=i),disabled:e(c).userData?.authType==e($e).PHONE},null,8,["modelValue","disabled"])]),_:1},8,["label"]),n(ne,{span:12,label:e(t)("addressEmail"),path:"email"},{default:a(()=>[n(de,null,{default:a(()=>[n(R,{value:e(o).email,"onUpdate:value":l[8]||(l[8]=i=>e(o).email=i),placeholder:e(t)("addressEmail"),disabled:"",class:"w-full"},null,8,["value","placeholder"]),n(j,{secondary:"",type:"primary",loading:e(ke),onClick:l[9]||(l[9]=i=>C.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"])]),_:1}),n(G,{label:e(t)("address"),path:"address"},{default:a(()=>[n(R,{value:e(o).address,"onUpdate:value":l[10]||(l[10]=i=>e(o).address=i),placeholder:e(t)("address"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(G,{label:e(t)("location"),path:"location"},{default:a(()=>[n(ot,{class:"w-full",height:150,"show-feature":!0,"coord-to-high-light":e(o).location,"onUpdate:coords":P},null,8,["coord-to-high-light"])]),_:1},8,["label"]),n(G,{label:e(t)("password"),path:"password"},{default:a(()=>[n(de,null,{default:a(()=>[n(R,{value:"password",placeholder:e(t)("password"),type:"password",disabled:"",class:"w-full"},null,8,["placeholder"]),n(j,{secondary:"",type:"primary",loading:e(Y),onClick:l[11]||(l[11]=i=>D.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"carbon:edit"})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"]),n(de,null,{default:a(()=>[n(Ee,{style:{width:"30%"}},{default:a(()=>[Ae("span",_n,A(e(t)("roles")),1)]),_:1}),n(Ee,{style:{width:"70%"}},{default:a(()=>[(T(!0),ve(Te,null,pn(e(c).userData?.roles||[],i=>(T(),Z(st,{key:i.name,class:"mx-1",size:"small",type:"info",round:!1,bordered:!1,strong:""},{default:a(()=>[W(A(i.displayName),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),n(Pe,{dashed:""}),n(it,{class:"mb-5"},{title:a(()=>[W(A(e(t)("profileInfo")),1)]),extra:a(()=>[n(ue,null,{default:a(()=>[n(j,{secondary:"",type:"primary",onClick:l[12]||(l[12]=i=>ee.value=!0)},{icon:a(()=>[n(I,null,{default:a(()=>[n(S,{icon:"fa-solid:window-restore"})]),_:1})]),default:a(()=>[W(" "+A(e(t)("open")),1)]),_:1})]),_:1})]),_:1}),n(Pe,{dashed:""}),n(dn),l[24]||(l[24]=Ae("div",{class:"h-10"},null,-1))]),_:1}),n(ct,{show:e(U),"onUpdate:show":l[13]||(l[13]=i=>oe(U)?U.value=i:null),title:e(t)("avatar"),"upload-config":{folder:p,limit:0,maxSize:0,baseUrl:e(z)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:J},null,8,["show","title","upload-config"]),n(pe,{show:e(D),"onUpdate:show":l[17]||(l[17]=i=>oe(D)?D.value=i:null),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editPassword"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),loading:e(Y),onPositiveClick:ie,onNegativeClick:l[18]||(l[18]=i=>D.value=!1)},{default:a(()=>[n(fe,{ref_key:"pwdFormRef",ref:te,model:e(k),rules:O,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(G,{label:e(t)("newPassword"),path:"newPassword"},{default:a(()=>[n(R,{value:e(k).newPassword,"onUpdate:value":l[14]||(l[14]=i=>e(k).newPassword=i),placeholder:e(t)("newPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(G,{label:e(t)("confirmPassword"),path:"newPasswordConfirmation"},{default:a(()=>[n(R,{value:e(k).newPasswordConfirmation,"onUpdate:value":l[15]||(l[15]=i=>e(k).newPasswordConfirmation=i),placeholder:e(t)("confirmPassword"),disabled:!e(k).newPassword,"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),n(G,{label:e(t)("currentPassword"),path:"currentPassword"},{default:a(()=>[n(R,{value:e(k).currentPassword,"onUpdate:value":l[16]||(l[16]=i=>e(k).currentPassword=i),placeholder:e(t)("currentPassword"),"show-password-on":"mousedown",type:"password",class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text","loading"]),n(pe,{show:e(C),"onUpdate:show":l[20]||(l[20]=i=>oe(C)?C.value=i:null),preset:"dialog",style:{width:"400px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("editEmail"),"positive-text":e(t)("validate"),"negative-text":e(t)("cancel"),loading:e(ke),onPositiveClick:nt,onNegativeClick:l[21]||(l[21]=i=>C.value=!1)},{default:a(()=>[n(fe,{ref_key:"emailFormRef",ref:be,model:e(M),rules:et,"show-require-mark":!1,size:"medium"},{default:a(()=>[n(G,{label:e(t)("emailAddress"),path:"email"},{default:a(()=>[n(R,{value:e(M).email,"onUpdate:value":l[19]||(l[19]=i=>e(M).email=i),placeholder:e(t)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text","loading"]),n(pe,{show:e(ee),"onUpdate:show":l[23]||(l[23]=i=>oe(ee)?ee.value=i:null),loading:e(q)||e(_),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(t)("profileInfo")},{default:a(()=>[e(c).userData?.profileType==e(St).ADMIN?(T(),Z(Vt,{key:0,mode:"edition","initial-data":e(c).userData?.profile,onBack:l[22]||(l[22]=i=>lt())},null,8,["initial-data"])):Re("",!0)]),_:1},8,["show","loading","title"])],64)}}});export{Tn as default};
