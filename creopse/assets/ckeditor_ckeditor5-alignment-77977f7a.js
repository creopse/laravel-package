import{C as y,P as g,i as m}from"./ckeditor_ckeditor5-core-c8d003a2.js";import{l as w,C as d,f as x}from"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import{c as k,a as E,B as T}from"./ckeditor_ckeditor5-ui-b7ac7aa2.js";import"./color-convert-eee2eef5.js";import"./vanilla-colorful-3f59310b.js";/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const f=["left","right","center","justify"];function h(i){return f.includes(i)}function p(i,t){return t.contentLanguageDirection=="rtl"?i==="right":i==="left"}function A(i){const t=i.map(e=>{let a;return typeof e=="string"?a={name:e}:a=e,a}).filter(e=>{const a=f.includes(e.name);return a||w("alignment-config-name-not-recognized",{option:e}),a}),n=t.filter(e=>!!e.className).length;if(n&&n<t.length)throw new d("alignment-config-classnames-are-missing",{configuredOptions:i});return t.forEach((e,a,o)=>{const s=o.slice(a+1);if(s.some(c=>c.name==e.name))throw new d("alignment-config-name-already-defined",{option:e,configuredOptions:i});if(e.className&&s.some(l=>l.className==e.className))throw new d("alignment-config-classname-already-defined",{option:e,configuredOptions:i})}),t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const b="alignment";class N extends y{refresh(){const n=this.editor.locale,e=x(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!e&&this._canBeAligned(e),this.isEnabled&&e.hasAttribute("alignment")?this.value=e.getAttribute("alignment"):this.value=n.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const n=this.editor,e=n.locale,a=n.model,o=a.document,s=t.value;a.change(r=>{const c=Array.from(o.selection.getSelectedBlocks()).filter(v=>this._canBeAligned(v)),l=c[0].getAttribute("alignment");p(s,e)||l===s||!s?D(c,r):B(c,r,s)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,b)}}function D(i,t){for(const n of i)t.removeAttribute(b,n)}function B(i,t,n){for(const e of i)t.setAttribute(b,n,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C extends g{static get pluginName(){return"AlignmentEditing"}constructor(t){super(t),t.config.define("alignment",{options:f.map(n=>({name:n}))})}init(){const t=this.editor,n=t.locale,e=t.model.schema,o=A(t.config.get("alignment.options")).filter(l=>h(l.name)&&!p(l.name,n)),s=o.some(l=>!!l.className);e.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),s?t.conversion.attributeToAttribute(F(o)):t.conversion.for("downcast").attributeToAttribute(I(o));const r=O(o);for(const l of r)t.conversion.for("upcast").attributeToAttribute(l);const c=V(o);for(const l of c)t.conversion.for("upcast").attributeToAttribute(l);t.commands.add("alignment",new N(t))}}function I(i){const t={};for(const{name:e}of i)t[e]={key:"style",value:{"text-align":e}};return{model:{key:"alignment",values:i.map(e=>e.name)},view:t}}function O(i){const t=[];for(const{name:n}of i)t.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return t}function V(i){const t=[];for(const{name:n}of i)t.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return t}function F(i){const t={};for(const e of i)t[e.name]={key:"class",value:e.className};return{model:{key:"alignment",values:i.map(e=>e.name)},view:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const u=new Map([["left",m.alignLeft],["right",m.alignRight],["center",m.alignCenter],["justify",m.alignJustify]]);class L extends g{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const t=this.editor,n=t.ui.componentFactory,e=t.t,a=A(t.config.get("alignment.options"));a.map(o=>o.name).filter(h).forEach(o=>this._addButton(o)),n.add("alignment",o=>{const s=k(o);E(s,()=>a.map(l=>n.create(`alignment:${l.name}`)),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:e("Text alignment toolbar")}),s.buttonView.set({label:e("Text alignment"),tooltip:!0}),s.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const r=o.contentLanguageDirection==="rtl"?u.get("right"):u.get("left"),c=t.commands.get("alignment");return s.buttonView.bind("icon").to(c,"value",l=>u.get(l)||r),s.bind("isEnabled").to(c,"isEnabled"),this.listenTo(s,"execute",()=>{t.editing.view.focus()}),s})}_addButton(t){const n=this.editor;n.ui.componentFactory.add(`alignment:${t}`,e=>{const a=n.commands.get("alignment"),o=new T(e);return o.set({label:this.localizedOptionTitles[t],icon:u.get(t),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(a),o.bind("isOn").to(a,"value",s=>s===t),this.listenTo(o,"execute",()=>{n.execute("alignment",{value:t}),n.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $ extends g{static get requires(){return[C,L]}static get pluginName(){return"Alignment"}}export{$ as A};
