import{i as b}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as G}from"./index.vue_vue_type_style_index_0_lang-C41Y0L1B.js";import{I as j}from"./iconify_vue-DXPEksg3.js";import{u as D,d as M}from"./main-ViLBltTU.js";import{a as N}from"./axios-DeS043Oz.js";import{B as q,r as H,c as P}from"./naive-ui-dfg6Ko-R.js";import{u as Q}from"./vue-i18n-B92nPylK.js";import{_ as X}from"./fawmi_vue-google-maps-yyESU4s0.js";const{defineComponent:Y}=await b("vue"),{renderSlot:Z,createElementVNode:y,unref:o,resolveComponent:ye,createVNode:g,withCtx:I,openBlock:u,createBlock:v,createCommentVNode:S,Fragment:ee,createElementBlock:E,isRef:h,normalizeStyle:k}=await b("vue"),{defineComponent:te,ref:F,computed:U,watch:T,h:_}=await b("vue"),{defineStore:le}=await b("pinia"),ae={class:"flex justify-between gap-2"},oe={class:"flex gap-0.5"},ne=te({name:"I18nInput"}),se=Y({...ne,props:{type:{default:"text"},size:{default:"medium"},autosize:{type:[Boolean,Object],default:!1},placeholder:{default:""},inputStyles:{default:()=>({width:"100%"})},displayFlag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},rows:{default:2},contentEditorItems:{default:()=>["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo","|","sourceEditing"]},shouldNotGroupEditorWhenFull:{type:Boolean,default:!1},enableUpload:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue","codeChange"],setup(n,{emit:O}){const t=n,c=O,m=le("i18n-input",()=>({langCode:F("")}))(),a=F(""),p=U(()=>{let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e}),s=U({get(){let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e[a.value]||""},set(e){let l;try{l=JSON.parse(t.modelValue||"{}")}catch{l={}}l[a.value]=e,c("update:modelValue",JSON.stringify(l))}});T(()=>a.value,e=>{c("codeChange",e),m.langCode=e}),T(()=>m.langCode,e=>{t.sync&&(a.value=e)}),m.langCode&&(a.value=m.langCode);const{languages:C}=D();C.length&&!a.value&&(a.value=C[0].value);const A=e=>_("div",{class:"flex items-center"},[t.displayFlag?_("img",{src:e.flag,style:{width:"14px",marginRight:"4px"}}):_("span"),_("b",{},{default:()=>`${String(e.value).toUpperCase()}`})]),{t:x,locale:f}=Q(),J=()=>{const e=p.value;e[a.value]=e[f.value],c("update:modelValue",JSON.stringify(e))},{getSettingValue:z}=M(),w=z("translation.googleTranslate.apiKey","string"),V=z("translation.deeplTranslate.apiKey","string"),K=async(e,l)=>{const r="https://api-free.deepl.com/v2/translate";try{return(await N.post(r,new URLSearchParams({auth_key:V,text:e,target_lang:l.toUpperCase()}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.translations[0].text}catch{return""}},L=async(e,l)=>{const r=`https://translation.googleapis.com/language/translate/v2?key=${w}`;try{return(await N.post(r,{q:e,target:l,format:"text"})).data.data.translations[0].translatedText}catch{return""}},W=async()=>{const e=p.value;w?e[a.value]=await L(e[f.value],a.value):V&&(e[a.value]=await K(e[f.value],a.value)),c("update:modelValue",JSON.stringify(e))};return(e,l)=>{const r=j,d=q,$=H,R=G,B=P;return u(),E("div",null,[y("div",ae,[y("div",null,[Z(e.$slots,"label",{},void 0,!0)]),y("div",oe,[o(p)&&o(p)[o(f)]&&!o(p)[o(a)]?(u(),E(ee,{key:0},[o(w)||o(V)?(u(),v(d,{key:0,size:"tiny",secondary:"",title:o(x)("translate"),onClick:W},{icon:I(()=>[g(r,{icon:"carbon:translate"})]),_:1},8,["title"])):S("",!0),g(d,{title:o(x)("fillIn"),secondary:"",size:"tiny",onClick:J},{icon:I(()=>[g(r,{icon:"carbon:container-image-push"})]),_:1},8,["title"])],64)):S("",!0),g($,{value:o(a),"onUpdate:value":l[0]||(l[0]=i=>h(a)?a.value=i:null),disabled:t.disabled,options:o(C),"render-label":A,class:"!w-[80px] !border-t-0",filterable:"",size:"tiny"},null,8,["value","disabled","options"])])]),y("div",null,[t.type=="editor"?(u(),v(R,{key:0,modelValue:o(s),"onUpdate:modelValue":l[1]||(l[1]=i=>h(s)?s.value=i:null),style:k(n.inputStyles),disabled:t.disabled,placeholder:n.placeholder,"toolbar-items":n.contentEditorItems,"should-not-group-when-full":t.shouldNotGroupEditorWhenFull,"enable-upload":t.enableUpload},null,8,["modelValue","style","disabled","placeholder","toolbar-items","should-not-group-when-full","enable-upload"])):t.type=="text"?(u(),v(B,{key:1,value:o(s),"onUpdate:value":l[2]||(l[2]=i=>h(s)?s.value=i:null),size:t.size,type:t.type,style:k(n.inputStyles),placeholder:n.placeholder,disabled:t.disabled},null,8,["value","size","type","style","placeholder","disabled"])):t.type=="textarea"?(u(),v(B,{key:2,value:o(s),"onUpdate:value":l[3]||(l[3]=i=>h(s)?s.value=i:null),autosize:t.autosize,size:t.size,type:t.type,rows:n.rows,style:k(n.inputStyles),placeholder:n.placeholder,disabled:t.disabled},null,8,["value","autosize","size","type","rows","style","placeholder","disabled"])):S("",!0)])])}}}),ge=X(se,[["__scopeId","data-v-28da6e21"]]);export{ge as _};
