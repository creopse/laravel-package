import{C as K,D as it,u as at,E as lt,f as st,R as rt,F as q}from"./index-55665812.js";import{I as u}from"./iconify_vue-6750bec6.js";import{p as ct}from"./vue_runtime-dom-c0cb2070.js";import{u as pt}from"./vue-router-e670704e.js";import{ar as W,f as T,N as m,_ as X,g as Z,am as tt,an as et,al as dt,a as ut,o as mt,l as _t,h as ft,n as ht,ao as yt,a2 as gt}from"./naive-ui-f034a0d9.js";import{d as P,o as p,P as _,aO as e,Y as t,a as G,Q as V,l as C,p as E,w as xt,c as J,h as d,F as wt,ar as bt}from"./vue_runtime-core-4f5fb440.js";import{u as ot}from"./vue-i18n-84a05dd5.js";import{r as L,u as o,c as kt}from"./vue_reactivity-852d8377.js";import{t as w,n as A}from"./vue_shared-7dcc3b7f.js";import{_ as vt}from"./fawmi_vue-google-maps-f303fdec.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-8d91e508.js";import"./axios-8734fada.js";import"./process-199d9cab.js";import"./pinia-5dd13ed8.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-4c8e4bf3.js";import"./validator-c9e97e8e.js";import"./vueuse_core-e3c6c607.js";import"./vueuse_shared-d1f69174.js";import"./parse-domain-15b982e1.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-a01957a7.js";import"./vue-cb9e9a9a.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-a0189596.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-d80203ee.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-7ef0bcf9.js";import"./fast-deep-equal-d48ae8fc.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";const Nt=["innerHTML"],Ct=P({__name:"Item",props:{item:{}},emits:["closeBox"],setup(D,{emit:h}){const n=D,$=h,{t:y,locale:F}=ot(),b=pt(),{markAsRead:I,buildMessage:k,removeNotification:g,isUnread:j}=K(),v=async x=>{if(x.data.target)try{await I(x),b.push(x.data.target),$("closeBox")}catch(a){console.log(a)}},S=L({title:"",content:""}),B=L(!1);return(async()=>{B.value=!0,S.value=await k(n.item),B.value=!1})(),(x,a)=>{const l=W,M=T,s=u,r=m,f=X,N=Z,z=tt,R=et,O=dt;return o(B)?(p(),_(R,{key:0,class:"item w-full"},{default:e(()=>[t(z,null,{header:e(()=>[t(l,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(M,{color:"gray",dot:""})]),description:e(()=>[t(l,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(N,{align:"center",justify:"space-between"},{default:e(()=>[t(f,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(l,{text:"",style:{width:"60px"}})]),_:1}),t(N,{align:"center"},{default:e(()=>[t(f,{text:""},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(l,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(p(),_(R,{key:1,class:"item w-full",style:A(`cursor: ${n.item.data.target?"pointer":"default"}`),onClick:a[3]||(a[3]=i=>v(n.item))},{default:e(()=>[t(z,null,{header:e(()=>[G("span",{class:"title",onClick:a[0]||(a[0]=i=>v(n.item))},w(o(S).title),1)]),"header-extra":e(()=>[o(j)(n.item)?(p(),_(M,{key:0,dot:""})):V("",!0)]),description:e(()=>[G("span",{class:"content",innerHTML:o(S).content},null,8,Nt)]),footer:e(()=>[t(N,{align:"center",justify:"space-between"},{default:e(()=>[t(f,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>{var i;return[C(" "+w(o(it)(((i=n.item)==null?void 0:i.createdAt)||"",{locale:o(F)})),1)]}),_:1}),t(N,{align:"center"},{default:e(()=>[o(j)(n.item)?(p(),_(f,{key:0,text:"",onClick:a[1]||(a[1]=ct(i=>o(I)(n.item),["stop"]))},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"mdi:check"})]),_:1})]),default:e(()=>[C(" "+w(o(y)("read")),1)]),_:1})):V("",!0),n.item.data.removable?(p(),_(O,{key:1,"positive-text":o(y)("yes"),"negative-text":o(y)("no"),trigger:"hover",onPositiveClick:a[2]||(a[2]=i=>o(g)(n.item))},{trigger:e(()=>[t(f,{text:""},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[C(" "+w(o(y)("delete")),1)]),_:1})]),default:e(()=>[C(" "+w(o(y)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),It=P({name:rt.NOTIFICATIONS.NAME}),St=P({...It,setup(D){const{t:h}=ot(),{isMdScreen:n,isSmScreen:$,pickByTheme:y,appPrimaryColor:F}=at(),b=L("all"),I=L(!1),k=ut(),g=lt(),j=st(),{userUnreadNotifications:v,markAllAsRead:S}=K(),B=E(()=>[{label:()=>d("div",{class:"flex justify-between items-center w-full"},[d("span",{class:"mr-1 text-white"},{default:()=>h("all")}),d(T,{value:q(g.notifications.length||0),type:"info"})]),key:"all",icon:()=>d(m,{color:"white"},{default:()=>d(u,{icon:"mdi:email-multiple"})})},{label:()=>d("div",{class:"flex justify-between items-center w-full"},[d("span",{class:"mr-1 text-white"},{default:()=>h("unread")}),d(T,{value:q(v.value.length||0),type:"error"})]),key:"unread",icon:()=>d(m,{color:"white"},{default:()=>d(u,{icon:"mdi:email-open-multiple"})})}]),H=E(()=>{let l;switch(b.value){case"all":l=g.notifications;break;case"unread":l=v.value;break;default:l=[];break}return l}),x=E(()=>j.contentLayoutSize.height-100),a=async()=>{I.value=!0,k.start(),await g.getNotifications(),k.finish(),I.value=!1};return xt(()=>g.firstRefresh,l=>{l?k.start():k.finish()},{immediate:!0}),(l,M)=>{const s=X,r=Z,f=_t,N=ft,z=ht,R=yt,O=gt,i=mt,c=W,Q=tt,Y=et;return p(),J("section",null,[o(g).firstRefresh?(p(),_(i,{key:1,style:A("height: "+o(x)+"px"),embedded:""},{default:e(()=>[t(f,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:e(()=>[t(r,{justify:"space-between",align:"center"},{default:e(()=>[t(c,{text:"",style:{width:"125px"}}),t(c,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),t(i,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:e(()=>[t(z,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:e(()=>[t(c,{height:"35px",width:"100%",class:"mb-1"}),t(c,{height:"35px",width:"100%"})]),_:1}),t(i,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:e(()=>[t(R,{hoverable:"",clickable:"",bordered:""},{default:e(()=>[t(Y,{class:"item w-full"},{default:e(()=>[t(Q,null,{header:e(()=>[t(c,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(o(T),{color:"gray",dot:""})]),description:e(()=>[t(c,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(r,{align:"center",justify:"space-between"},{default:e(()=>[t(s,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1}),t(r,{align:"center"},{default:e(()=>[t(s,{text:""},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Y,{class:"item w-full"},{default:e(()=>[t(Q,null,{header:e(()=>[t(c,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(o(T),{color:"gray",dot:""})]),description:e(()=>[t(c,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(r,{align:"center",justify:"space-between"},{default:e(()=>[t(s,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1}),t(r,{align:"center"},{default:e(()=>[t(s,{text:""},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(p(),_(i,{key:0,style:A("height: "+o(x)+"px"),embedded:""},{default:e(()=>[t(f,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:e(()=>[t(r,{justify:"space-between",align:"center"},{default:e(()=>[t(s,{text:"",onClick:a},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:refresh"})]),_:1})]),default:e(()=>[C(" "+w(o(h)("refresh")),1)]),_:1}),t(s,{text:"",disabled:!o(v).length,onClick:o(S)},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:check"})]),_:1})]),default:e(()=>[C(" "+w(o(h)("allMarkedAsRead")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),t(i,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:e(()=>[t(z,{style:A(`background-color: ${o(y)(o(F),"rgba(24, 24, 28, 1)")}`),"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:o(n)||o($),width:260,bordered:""},{default:e(()=>[t(N,{value:o(b),"onUpdate:value":M[0]||(M[0]=U=>kt(b)?b.value=U:null),collapsed:o(n)||o($),"collapsed-width":64,"collapsed-icon-size":22,options:o(B)},null,8,["value","collapsed","options"])]),_:1},8,["style","collapsed"]),t(i,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:e(()=>[o(H).length?(p(),_(R,{key:0,hoverable:"",clickable:"",bordered:""},{default:e(()=>[(p(!0),J(wt,null,bt(o(H),(U,nt)=>(p(),_(Ct,{key:nt,item:U},null,8,["item"]))),128))]),_:1})):(p(),_(O,{key:1,description:o(h)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:e(()=>[t(o(m),{size:"56"},{default:e(()=>[t(o(u),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}});const Pe=vt(St,[["__scopeId","data-v-84c09678"]]);export{Pe as default};
