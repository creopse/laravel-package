import{i as m}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{I as O}from"./iconify_vue-DXPEksg3.js";import{u as V,a as B,aj as L,az as M,c as z,_ as G,P as Y,f as i,R as y}from"./main-BFQh8EtE.js";import{u as j}from"./vue-router-DjpI5axN.js";import{F as q,u as W,_ as X,f as $,a as J,B as K,h as Q}from"./naive-ui-BrWbllCz.js";import{u as Z}from"./vue-i18n-B92nPylK.js";const{defineComponent:ee}=await m("vue"),{unref:o,toDisplayString:u,createTextVNode:_,resolveComponent:_e,withCtx:t,createVNode:s,createElementVNode:d,openBlock:oe,createBlock:te}=await m("vue"),se={class:"w-full flex"},{ref:C}=await m("vue"),de=ee({__name:"Admin",props:{mode:{default:"creation"}},emits:["back"],setup(v,{emit:D}){const n=v,I=D,{t:e}=Z(),{displayFormErrors:S}=V(),{userHasSuperAdminRole:w}=B(),{mutate:E,isPending:p}=L(),{mutateAsync:P}=M(),c=z(),f=j(),R=q(),r=W(),g=C(null),U=C({}),h={},x=()=>{g.value?.validate(async A=>{A||E({type:Y.ADMIN,id:c.userData?.id,profileData:{}},{onSuccess:async(a,l)=>{w()?(c.userData=a,f.replace(y.HOME.PATH)):(await P(),R.success({title:e("success"),content:e("accountCreatedWithSuccess1"),positiveText:e("ok")}),c.resetAuthData(),f.replace(y.LOGIN.PATH))},onError:(a,l)=>{switch(a?.response?.data?.errorCode){case i.AUTH_PROFILE_ALREADY_EXISTS:r.error(e("profileAlreadyExists"));break;case i.AUTH_MISSING_DATA:r.error(e("missingData"));break;case i.FORM_INVALID_DATA:S(a?.response?.data?.data);break;case i.AUTH_USER_NOT_FOUND:r.error(e("userNotFound"));break;case i.AUTH_PROFILE_TYPE_NOT_FOUND:r.error(e("profileTypeNotFound"));break;default:r.error(e("registerProfileNotSuccessful"))}}})})};return n.mode=="edition",(A,a)=>{const l=$,F=J,k=G,N=O,T=Q,b=K,H=X;return oe(),te(H,{size:"medium",class:"w-full"},{default:t(()=>[s(k,{name:"slide-fade",appear:""},{default:t(()=>[d("section",null,[s(l,{title:n.mode=="edition"?o(e)("update"):o(e)("validation"),type:"success",class:"mb-10"},{default:t(()=>[_(u(n.mode=="edition"?o(e)("updateCompleted"):o(e)("registrationCompleted")),1)]),_:1},8,["title"]),s(F,{ref_key:"formRef",ref:g,model:o(U),rules:h,"show-label":!1,"show-require-mark":!1,size:"medium"},null,8,["model"])])]),_:1}),s(k,{name:"slide-fade",appear:""},{default:t(()=>[d("section",se,[s(b,{secondary:"",class:"flex-1",loading:o(p),onClick:a[0]||(a[0]=ae=>I("back"))},{icon:t(()=>[s(T,null,{default:t(()=>[s(N,{icon:"carbon:arrow-left"})]),_:1})]),default:t(()=>[_(" "+u(n.mode=="edition"?o(e)("close"):o(e)("back")),1)]),_:1},8,["loading"]),a[1]||(a[1]=d("div",{class:"w-2"},null,-1)),s(b,{secondary:"",class:"flex-1",type:"primary","icon-placement":"right",loading:o(p),onClick:x},{icon:t(()=>[s(T,null,{default:t(()=>[s(N,{icon:"carbon:checkmark-outline"})]),_:1})]),default:t(()=>[_(" "+u(n.mode=="edition"?o(e)("save"):o(e)("validate")),1)]),_:1},8,["loading"])])]),_:1})]),_:1})}}});export{de as _};
