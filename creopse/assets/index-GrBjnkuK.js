const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as me}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as xl,a as ms,b as Oi}from"./index.vue_vue_type_script_setup_true_lang-iJoPck6p.js";import{_ as Pc}from"./PageLayout.vue_vue_type_script_setup_true_lang-CA4SA2ip.js";import{_ as Cl}from"./I18nInput-q03qH19U.js";import{a0 as fs,e as et,H as wt,u as ut,f as Ft,t as mn,w as Fl,a1 as pc,a2 as mc,q as Bc,s as Li,_ as Il,v as Lc,d as Fc,A as Oc,B as Rc,R as fc,C as qc,a3 as _c,a4 as ao,L as Qi,I as Ta,p as Io,x as Ri,z as jc,a5 as vc,a6 as Kc,a7 as Gc,a8 as gc,a9 as Yc,aa as Hc,ab as qi,ac as yc,y as bc,ad as Wc,c as Qc,ae as Jc,af as Xc,D as Zc,U as ed,ag as td}from"./main-ViLBltTU.js";import{I as ce}from"./iconify_vue-DXPEksg3.js";import{_ as Ws}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-EDNSTgfY.js";import{u as Ne}from"./vue-i18n-B92nPylK.js";import{u as Xe,t as An,p as ot,H as Wn,l as Ua,S as ya,_ as gn,q as yn,z as cl,D as Vl,B as Le,h as O,F as Sl,a as dl,d as ll,e as ba,c as jt,W as _s,X as vs,b as ul,a6 as nd,a2 as Fi,V as Qs,o as Ol,Y as ld,r as Ml,U as Js,v as Xs,w as ji,f as Ki,x as Rl,y as ql,A as Vo,a7 as ad,a8 as od,C as hc,k as oo,I as wc,Q as so,R as Gi,L as Yi,s as kc,a9 as Hi,aa as sd,ab as $c,ac as xc,m as Wi,ad as Cc,ae as id,af as rd,a3 as cd,ag as dd,Z as ud,$ as pd,a0 as md}from"./naive-ui-dfg6Ko-R.js";import{_ as de}from"./lodash-C_MgVQnG.js";import{_ as So}from"./fawmi_vue-google-maps-yyESU4s0.js";import{F as ps,a as Ic,b as Vc,u as fd,_ as _d,C as _l,c as gs,d as Sc,e as vd,M as vl,f as gd,g as Ec,h as yd,i as bd,j as hd,I as wd,A as kd,k as hs,l as $d}from"./page-CE-Jx-Za.js";import{v as En}from"./uuid-8I8R7izr.js";import{u as xd,a as Cd}from"./article-VfZSc4ZP.js";import{u as Id}from"./tanstack_vue-query-BsmfbQHq.js";import{s as zc}from"./slugify-BFyLO-pG.js";import{_ as Vd}from"./media-file-BRYMEnOE.js";import{r as Sd}from"./vueuse_shared-B0wwFjQU.js";import{_ as Co}from"./jsoneditor-BJ7iDtct.js";import{u as Tc}from"./vueuse_core-DKs1Kb2a.js";import{_ as Uc}from"./UploadExcel-BLd5EB-T.js";import{_ as xo}from"./validator-DC79P2ge.js";import{_ as Ed}from"./VueTelInputWrapper-C3kMu7Qz.js";import{i as zd}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{_ as Td}from"./index.vue_vue_type_style_index_0_lang-C41Y0L1B.js";import{u as Ud}from"./email-Ma2GqSBC.js";import{u as Md}from"./vue-shepherd-CZJ8KBfd.js";import{a as Nd}from"./vue-router-DS5MTONl.js";var ga=(m=>(m.IMAGE="image",m.VIDEO="video",m))(ga||{});const Mc=(m,e)=>fs(["ad-identifiers"],async()=>{const{request:s}=et(),n=await s({url:"/ad-identifiers"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...m}),Dd=(m,e)=>fs(["ads"],async()=>{const{request:s}=et(),n=await s({url:"/ads"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...m}),Ad=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe();return wt({queryKey:["ad-identifiers"],operation:"insert",getItemId:t=>t.id,mutationFn:async t=>{const a=await s({method:"post",url:"/ad-identifiers",data:t});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(t?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Pd=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe();return wt({queryKey:["ad-identifiers"],operation:"update",getItemId:t=>t.id,mutationFn:async t=>{const a=await s({method:"put",url:`/ad-identifiers/${t.id}`,data:t});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(t?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Bd=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe();return wt({queryKey:["ad-identifiers"],operation:"remove",getItemId:i=>i.id,mutationFn:async({id:i})=>{const t=await e({method:"delete",url:`/ad-identifiers/${i}`});if(!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:i=>{n.error(s("anErrorOccurred"))},...m}})},{useModel:Ld,defineComponent:Fd}=await me("vue"),{unref:it,resolveComponent:ky,createVNode:xt,toDisplayString:io,createTextVNode:ei,withCtx:Bt,renderList:Od,Fragment:Ji,openBlock:ro,createElementBlock:ti,createElementVNode:zo,createCommentVNode:Rd,normalizeClass:Xi,createBlock:ni,isRef:qd}=await me("vue"),jd={class:"flex items-center justify-between"},Kd={class:"flex flex-col"},Gd={class:"text-sm font-bold"},Yd={class:"text-xs font-normal"},Hd={key:0,class:"text-xs font-bold"},{ref:To}=await me("vue"),Wd=Fd({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(m){const{t:e}=Ne(),{pickByTheme:s,formatKey:n}=ut(),i=Ld(m,"show"),{data:t,isPending:a}=Mc(),{mutate:c}=Bd(),{mutate:I}=Ad(),{mutate:_e}=Pd(),se=An(),L=ot(),be=To(!1),J=To(!1),T=To(null),r=To(null),U=To({id:"",reusable:!1,contentType:ga.IMAGE,contentSize:"",params:[]}),pe={id:[{required:!0,message:e("fillRequired")}]},ne=te=>{T.value=de.cloneDeep(te),U.value=de.cloneDeep(te||{id:"",reusable:!1,contentType:ga.IMAGE,contentSize:"",params:[]}),J.value=!0},D=async()=>(r.value?.validate(async te=>{if(!te){L.start(),be.value=!0;const M={id:U.value.id,reusable:U.value.reusable,contentType:U.value.contentType,contentSize:U.value.contentSize,params:U.value.params};T.value?_e(M,{onSuccess:()=>{J.value=!1}}):I(M,{onSuccess:()=>{J.value=!1}}),be.value=!1,L.finish()}}),!1),j=async te=>{se.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{c({id:te.id})}})};return(te,M)=>{const z=ce,q=Le,H=yn,A=cl,K=Vl,d=O,V=gn,f=ya,k=Sl,x=Ua,g=Wn,C=jt,le=ba,ge=ll,W=vs,b=_s,h=nd,xe=ul,$=dl;return ro(),ti(Ji,null,[xt(g,{show:i.value,"onUpdate:show":M[2]||(M[2]=S=>i.value=S),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:it(e)("adIdentifiers")},{"header-extra":Bt(()=>[xt(H,{align:"center"},{default:Bt(()=>[xt(q,{secondary:"",size:"small",type:"primary",disabled:it(a),onClick:M[0]||(M[0]=S=>ne(null))},{default:Bt(()=>[xt(z,{icon:"carbon:add-alt",class:"mr-1"}),ei(" "+io(it(e)("add")),1)]),_:1},8,["disabled"]),xt(q,{secondary:"",size:"small",type:"error",disabled:it(a),onClick:M[1]||(M[1]=S=>i.value=!1)},{default:Bt(()=>[xt(z,{icon:"carbon:close",class:"mr-1"}),ei(" "+io(it(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Bt(()=>[xt(x,{show:it(a)},{default:Bt(()=>[it(t)?.length?(ro(),ni(f,{key:0,style:{"max-height":"400px"}},{default:Bt(()=>[(ro(!0),ti(Ji,null,Od(it(t),S=>(ro(),ni(V,{key:S.id,embedded:"",size:"small",class:"mb-2"},{default:Bt(()=>[zo("div",jd,[zo("div",Kd,[zo("span",Gd,io(S.id),1),zo("div",null,[zo("span",Yd,io(S.contentType===it(ga).IMAGE?it(e)("image"):it(e)("video")),1),S.contentSize?(ro(),ti("span",Hd," Â ("+io(S.contentSize)+") ",1)):Rd("",!0)])]),xt(H,null,{default:Bt(()=>[xt(A,{size:"medium",bordered:!1,type:S.reusable?"info":"warning"},{default:Bt(()=>[ei(io(S.reusable?it(e)("reusable"):it(e)("notReusable")),1)]),_:2},1032,["type"]),xt(K,{vertical:"",class:Xi(["!mx-0",it(s)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),xt(q,{size:"small",type:"warning",secondary:"",onClick:l=>ne(S)},{default:Bt(()=>[xt(d,null,{default:Bt(()=>[xt(z,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),xt(q,{size:"small",type:"error",secondary:"",onClick:l=>j(S)},{default:Bt(()=>[xt(d,null,{default:Bt(()=>[xt(z,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ro(),ni(V,{key:1,size:"large",class:Xi(`mb-2 !border-dashed !border-2 ${it(s)("!border-zinc-300","!border-zinc-600")}`)},{default:Bt(()=>[xt(k,{description:it(e)("noIdentifierAdded")},{icon:Bt(()=>[xt(d,{size:"60"},{default:Bt(()=>[xt(z,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),xt(g,{show:it(J),"onUpdate:show":M[8]||(M[8]=S=>qd(J)?J.value=S:null),loading:it(be),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:it(T)?it(e)("editAdIdentifier"):it(e)("addAdIdentifier"),"positive-text":it(e)("validate"),"negative-text":it(e)("cancel"),onPositiveClick:D,onNegativeClick:M[9]||(M[9]=S=>J.value=!1)},{default:Bt(()=>[xt($,{ref_key:"formRef",ref:r,model:it(U),rules:pe,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Bt(()=>[xt(ge,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(le,{span:16,label:it(e)("identifier"),path:"id"},{default:Bt(()=>[xt(C,{value:it(U).id,placeholder:it(e)("identifier"),disabled:it(T)!=null,class:"w-full","onUpdate:value":M[3]||(M[3]=S=>it(U).id=it(n)(S))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),xt(le,{span:8,label:it(e)("contentSize"),path:"contentSize"},{default:Bt(()=>[xt(C,{value:it(U).contentSize,"onUpdate:value":M[4]||(M[4]=S=>it(U).contentSize=S),placeholder:it(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),xt(ge,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(le,{span:12,label:it(e)("status"),path:"reusable"},{default:Bt(()=>[xt(b,{value:it(U).reusable,"onUpdate:value":M[5]||(M[5]=S=>it(U).reusable=S),name:"reusable",class:"w-full"},{default:Bt(()=>[xt(W,{value:!1,label:it(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),xt(W,{value:!0,label:it(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),xt(le,{span:12,label:it(e)("contentType"),path:"contentType"},{default:Bt(()=>[xt(b,{value:it(U).contentType,"onUpdate:value":M[6]||(M[6]=S=>it(U).contentType=S),name:"contentType",class:"w-full"},{default:Bt(()=>[xt(W,{value:it(ga).IMAGE,label:it(e)("image"),class:"w-[50%]"},null,8,["value","label"]),xt(W,{value:it(ga).VIDEO,label:it(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),xt(xe,{label:it(e)("settings"),path:"params"},{default:Bt(()=>[xt(h,{value:it(U).params,"onUpdate:value":M[7]||(M[7]=S=>it(U).params=S),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Qd=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["ads"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/ads",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Jd=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["ads"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/ads/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Xd=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["ads"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/ads/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},{defineComponent:Zd}=await me("vue"),{unref:ie,createVNode:ct,withCtx:Ct,toDisplayString:Ma,createTextVNode:Na,openBlock:jl,createBlock:ws,createCommentVNode:li,resolveComponent:$y,isRef:co,Fragment:ks,createElementBlock:uo,normalizeStyle:Zi,createElementVNode:ai,renderList:eu}=await me("vue"),tu={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},nu={id:"video",autoplay:"",controls:"",style:{width:"100%"}},lu=["src"],{inject:au,ref:pl,h:cn,computed:er}=await me("vue"),ou=Zd({__name:"index",setup(m){const e=Xe(),s=An(),n=au("appConfig"),{data:i}=Mc(),{data:t,isPending:a}=Dd(),{mutate:c,isPending:I}=Xd(),{mutate:_e,isPending:se}=Qd(),{mutate:L,isPending:be}=Jd(),{tr:J,fileUrl:T,pickByTheme:r,appSecondaryColor:U,appPrimaryColor:pe,isInDevMode:ne}=ut(),{t:D,locale:j}=Ne(),te=pl(""),M=pl(),z={pageSize:12,prefix:({itemCount:l})=>cn("div",{class:"font-bold"},{default:()=>`${D("total")}: ${l}`})},q=[{title:D("preview"),key:"image",width:200,fixed:"left",render(l){return l.adIdentifier?.contentType==ga.IMAGE?cn(Fi,{src:l.contentUrl??"",objectFit:"cover",width:200,height:100}):cn("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[cn(O,{size:50,color:U.value},{default:()=>cn(ce,{icon:"carbon:document-video"})})])}},{title:D("identifier"),key:"pid",width:150,fixed:"left",render(l){return cn("small",{},{default:()=>l.pid})}},{title:D("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(l){return cn("div",{},{default:()=>J(l.title)})}},{title:D("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return cn("small",{},{default:()=>J(l.description)})}},{title:D("status"),key:"isActive",width:100,render(l){return cn(cl,{type:l.display?"success":"warning",bordered:!1},{default:()=>l.display?D("visible"):D("hidden")})},sortOrder:!1,sorter:"default"},{title:D("updateAt"),key:"updatedAt",width:125,render(l){return cn("div",{},{default:()=>Fl(l.updatedAt,{locale:j.value,outPattern:"DD MMMM YYYY"})})}},{title:D("createdAt"),key:"createdAt",width:125,render(l){return cn("div",{},{default:()=>Fl(l.createdAt,{locale:j.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>cn(jt,{ref:M,placeholder:D("search"),value:te.value,onInput:l=>{te.value=l}},{suffix:()=>cn(O,{},{default:()=>cn(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return cn("div",{class:"flex justify-end items-center w-full"},[cn(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{le(l)},renderIcon:()=>cn(O,null,{default:()=>cn(ce,{icon:"carbon:edit"})})}),cn("div",{class:"w-2"}),cn(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{s.warning({title:D("confirm"),content:D("confirmDeleteAd"),positiveText:D("yes"),negativeText:D("no"),onPositiveClick:async()=>{l.id&&c({id:l.id})}})},renderIcon:()=>cn(O,null,{default:()=>cn(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],H=er(()=>{if(!te.value)return t.value;const l=t.value?.filter(o=>o.pid.toLowerCase().includes(te.value.toLowerCase())||o.title.toLowerCase().includes(te.value.toLowerCase())||o.description?.toLowerCase().includes(te.value.toLowerCase()));return M.value&&M.value.focus(),l}),A=pl(!1),K=pl(!1),d=pl(ga.IMAGE),V=pl(),f=pl(null),k=pl(null),x=pl({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),g={pid:[{required:!0,message:D("fillRequired")}],title:[{required:!0,message:D("fillRequired")}],content:[{required:!0,message:D("fillRequired")}]},C=er({get:()=>!x.value.broadcastStart||!x.value.broadcastEnd?null:[x.value.broadcastStart||"",x.value.broadcastEnd||""],set:l=>{l?(x.value.broadcastStart=l[0],x.value.broadcastEnd=l[1]):(x.value.broadcastStart=null,x.value.broadcastEnd=null)}}),le=l=>{f.value=de.cloneDeep(l),l?(x.value=de.cloneDeep(l),l.data||(x.value.data={})):x.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},V.value=i.value?.find(o=>o.id==x.value.pid)?.params,A.value=!0},ge=l=>cn("span",{},{default:()=>l.id+(l.contentSize?` (${l.contentSize})`:"")}),W=async()=>(k.value?.validate(async l=>{if(!l){const o={pid:x.value.pid,title:x.value.title,display:x.value.display,content:x.value.content,description:x.value.description,data:x.value.data,broadcastStart:x.value.broadcastStart,broadcastEnd:x.value.broadcastEnd};f.value?f.value.title!==x.value.title&&(t.value||[]).findIndex(y=>y.title==x.value.title)>-1?e.error(D("sameAdTitleMessage")):L({id:f.value.id,...o},{onSuccess:()=>{}}):(t.value||[]).findIndex(y=>y.title==x.value.title)>-1?e.error(D("sameAdTitleMessage")):_e(o,{onSuccess:()=>{}}),A.value=!1}}),!1),b=pl(!1),h=pl(!1),xe=pl(!1),$=pl(""),S=pl("");return(l,o)=>{const y=yn,N=xl,F=Qs,G=Ws,E=Cl,P=ul,we=ld,Ge=Ml,Z=ba,Re=vs,Ce=_s,Ze=ll,B=Ol,w=Js,v=dl,Q=Wn,mt=ms;return jl(),uo(ks,null,[ct(N,{to:"#alt-action"},{default:Ct(()=>[ct(y,null,{default:Ct(()=>[ie(ne)?(jl(),ws(ie(Le),{key:0,secondary:"",type:"warning",onClick:o[0]||(o[0]=oe=>K.value=!0)},{default:Ct(()=>[ct(ie(O),{size:"26"},{default:Ct(()=>[ct(ie(ce),{icon:"carbon:id"})]),_:1}),Na(" "+Ma(ie(D)("identifiers")),1)]),_:1})):li("",!0),ct(ie(Le),{type:"primary",secondary:"",onClick:o[1]||(o[1]=oe=>le(null))},{icon:Ct(()=>[ct(ie(O),{size:"18"},{default:Ct(()=>[ct(ie(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Ct(()=>[Na(" "+Ma(ie(D)("addAd")),1)]),_:1})]),_:1})]),_:1}),ct(G,null,{default:Ct(()=>[ct(F,{columns:q,data:ie(H),pagination:z,loading:ie(a),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),ct(Q,{show:ie(A),"onUpdate:show":o[12]||(o[12]=oe=>co(A)?A.value=oe:null),loading:ie(se)||ie(be)||ie(I),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ie(f)?ie(D)("editAd"):ie(D)("addAd"),"positive-text":ie(D)("validate"),"negative-text":ie(D)("cancel"),onPositiveClick:W,onNegativeClick:o[13]||(o[13]=oe=>A.value=!1)},{default:Ct(()=>[ct(v,{ref_key:"formRef",ref:k,class:"mt-5",model:ie(x),rules:g,"show-require-mark":!1,size:"medium"},{default:Ct(()=>[ct(Ze,{cols:"24","x-gap":12},{default:Ct(()=>[ct(B,{span:"12"},{default:Ct(()=>[ct(P,{"show-label":!1,path:"title"},{default:Ct(()=>[ct(E,{modelValue:ie(x).title,"onUpdate:modelValue":o[2]||(o[2]=oe=>ie(x).title=oe),placeholder:ie(D)("title"),class:"w-full",sync:""},{label:Ct(()=>[Na(Ma(ie(D)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(P,{"show-label":!1,path:"description"},{default:Ct(()=>[ct(E,{modelValue:ie(x).description,"onUpdate:modelValue":o[3]||(o[3]=oe=>ie(x).description=oe),placeholder:ie(D)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ct(()=>[Na(Ma(ie(D)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(P,{label:ie(D)("broadcastPeriod"),path:"broadcastPeriod"},{default:Ct(()=>[ct(we,{"formatted-value":ie(C),"onUpdate:formattedValue":o[4]||(o[4]=oe=>co(C)?C.value=oe:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),ct(Ze,{"x-gap":"12",span:24},{default:Ct(()=>[ct(Z,{span:12,label:ie(D)("identifier"),path:"pid"},{default:Ct(()=>[ct(Ge,{value:ie(x).pid,"onUpdate:value":[o[5]||(o[5]=oe=>ie(x).pid=oe),o[6]||(o[6]=()=>{V.value=ie(i)?.find(oe=>oe.id==ie(x).pid)?.params})],"render-label":ge,options:ie(i)?.map(oe=>({...oe,disabled:!oe.reusable&&(oe.adsCount||0)>0})),placeholder:ie(D)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ct(Z,{span:12,label:ie(D)("status"),path:"display"},{default:Ct(()=>[ct(Ce,{value:ie(x).display,"onUpdate:value":o[7]||(o[7]=oe=>ie(x).display=oe),name:"display",class:"w-full"},{default:Ct(()=>[ct(Re,{value:!1,label:ie(D)("hidden"),class:"w-[50%]"},null,8,["label"]),ct(Re,{value:!0,label:ie(D)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),ct(B,{span:"12"},{default:Ct(()=>[ct(P,{label:ie(D)("content"),path:"content"},{default:Ct(()=>[ie(d)==ie(ga).VIDEO?(jl(),ws(w,{key:0},{default:Ct(()=>[ct(ie(Le),{secondary:"",type:"primary",onClick:o[8]||(o[8]=()=>{h.value=!0})},{default:Ct(()=>[Na(Ma(ie(D)("select")),1)]),_:1}),ct(ie(jt),{value:ie(x).content?ie(pc)(ie(x).content):"",placeholder:ie(D)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),ie(x).content?(jl(),uo(ks,{key:0},[ct(ie(Le),{type:"primary",ghost:"",onClick:o[9]||(o[9]=()=>{$.value=ie(D)("video"),S.value=ie(T)(ie(x).content),xe.value=!0})},{icon:Ct(()=>[ct(ie(O),null,{default:Ct(()=>[ct(ie(ce),{icon:"carbon:play-outline-filled"})]),_:1})]),default:Ct(()=>[Na(" "+Ma(ie(D)("play")),1)]),_:1}),ct(ie(Le),{type:"primary",ghost:"",onClick:o[10]||(o[10]=()=>{ie(x).content=""})},{icon:Ct(()=>[ct(ie(O),null,{default:Ct(()=>[ct(ie(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Ct(()=>[Na(" "+Ma(ie(D)("clear")),1)]),_:1})],64)):li("",!0)]),_:1})):(jl(),uo("div",tu,[ai("div",{class:"cursor-pointer w-full h-[150px]",onClick:o[11]||(o[11]=()=>{b.value=!0})},[ie(x).content?(jl(),ws(ie(Fi),{key:0,"object-fit":"cover","preview-disabled":"",class:"py-1 content-image",style:Zi("border: 1px dashed "+ie(r)(ie(pe),"white")),src:ie(T)(ie(x).content||"")},null,8,["style","src"])):(jl(),uo("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Zi("border: 1px dashed "+ie(r)(ie(pe),"white"))},[ct(ie(O),{size:64},{default:Ct(()=>[ct(ie(ce),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),ie(V)&&Array.isArray(ie(V))?(jl(),ws(P,{key:0,label:ie(D)("data"),path:"data"},{default:Ct(()=>[ct(Ze,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Ct(()=>[(jl(!0),uo(ks,null,eu(ie(V),(oe,_t)=>(jl(),uo(ks,{key:_t},[ct(B,{span:10},{default:Ct(()=>[ct(ie(jt),{value:oe,placeholder:oe,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),ct(B,{span:14},{default:Ct(()=>[ct(ie(jt),{value:ie(x).data[oe],"onUpdate:value":ft=>ie(x).data[oe]=ft,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):li("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ct(Q,{show:ie(xe),"onUpdate:show":o[14]||(o[14]=oe=>co(xe)?xe.value=oe:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:ie($)},{default:Ct(()=>[ai("video",nu,[ai("source",{src:ie(S)},null,8,lu)])]),_:1},8,["show","title"]),ct(mt,{show:ie(b),"onUpdate:show":o[15]||(o[15]=oe=>co(b)?b.value=oe:null),title:ie(D)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:ie(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o[16]||(o[16]=oe=>{ie(x).content=oe,b.value=!1})},null,8,["show","title","upload-config"]),ct(mt,{show:ie(h),"onUpdate:show":o[17]||(o[17]=oe=>co(h)?h.value=oe:null),title:ie(D)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:ie(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o[18]||(o[18]=oe=>{ie(x).content=oe,h.value=!1})},null,8,["show","title","upload-config"]),ct(Wd,{show:ie(K),"onUpdate:show":o[19]||(o[19]=oe=>co(K)?K.value=oe:null)},null,8,["show"])],64)}}}),su=So(ou,[["__scopeId","data-v-ad09a685"]]),{unref:oi}=await me("vue"),{defineComponent:iu}=await me("vue"),{unref:nt,resolveComponent:ru,createVNode:Gt,withCtx:It,openBlock:Zt,createBlock:jn,createCommentVNode:$s,toDisplayString:Kl,createTextVNode:ia,renderList:xs,Fragment:Da,createElementBlock:Aa,normalizeClass:cu,isRef:du,createSlots:uu,createElementVNode:Uo,vShow:si,withDirectives:ii,Transition:ri}=await me("vue"),pu={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},mu={class:"flex items-center justify-start gap-2"},{storeToRefs:fu}=await me("pinia"),{ref:Cs,inject:Gl,watch:ci,reactive:ra,computed:tr}=await me("vue"),_u=iu({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(m){const e=m,s=An(),{sectionsDataBackup:n,sectionsSettingsBackup:i}=fu(mc()),{t}=Ne(),{tr:a,editKeysToCamelCase:c}=ut(),I=Cs("index"),_e=Cs(!1),se=Gl("formValueValidate1"),L=Gl("formValueValidate2"),be=Gl("formValueValidate3"),J=Gl("initialSettings"),T=Gl("initialData"),r=Gl("settings"),U=Gl("data"),pe=Gl("refreshKey"),ne=Gl("isDataJustSaved"),D=Gl("isSettingsJustSaved"),{data:j,isPending:te}=Bc({slug:e.slug,linkId:e.linkId,pageId:e.pageId});ci(()=>j?.value,K=>{const d=de.cloneDeep(K),V=d?.pages?.length?d?.pages[0].pivot:null;if(d&&U&&V&&(de.isObject(V?.data)&&Li(V?.data)?U.value=ra(V?.data):U.value=ra({}),de.forIn(c(d.dataStructure),(f,k)=>{(!U.value[k]||Array.isArray(U.value[k])&&U.value[k].length==0)&&(k==="index"?U.value[k]=ra({}):U.value[k]=ra([]))})),T&&U&&setTimeout(()=>{T.value=de.cloneDeep(U.value)},500),d&&r&&(de.isObject(V?.settings)&&Li(V?.settings)?r.value=ra(V?.settings):r.value=ra({}),de.forIn(c(d.settingsStructure),(f,k)=>{r.value[k]||(r.value[k]=ra({}))})),J&&r&&setTimeout(()=>{J.value=de.cloneDeep(r.value)},500),d)if(c(d.dataStructure)){const f=Object.keys(c(d.dataStructure));f.includes("index")?I.value="index":I.value=f.length>0?f[0]:"_settings"}else I.value="_settings";if(pe&&(pe.value=En()),!_e.value&&(n.value[`${e.slug}__${e.linkId}__${e.pageId}`]||i.value[`${e.slug}__${e.linkId}__${e.pageId}`])){_e.value=!0;const f=()=>{n.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,i.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,pe&&(pe.value=En())};s.warning({title:t("backup"),content:t("sectionDataOrSettingsAvailable"),positiveText:t("restore"),negativeText:t("drop"),onPositiveClick:async()=>{U?.value&&n.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(U.value=ra(de.cloneDeep(n.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),r?.value&&i.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(r.value=ra(de.cloneDeep(i.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),f()},onNegativeClick:async()=>{f()}})}},{immediate:!0,deep:!0});const M=Cs(!1);setTimeout(()=>{M.value=!0},500);const z=tr(()=>!de.isEqual(U?.value,T?.value)),q=tr(()=>!de.isEqual(r?.value,J?.value));ci(()=>U?.value,K=>{z.value&&M.value&&!ne?.value&&(n.value={...n.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:de.cloneDeep(K)}),ne&&(ne.value=!1)},{deep:!0}),ci(()=>r?.value,K=>{q.value&&M.value&&!D?.value&&(i.value={...i.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:de.cloneDeep(K)}),D&&(D.value=!1)},{deep:!0});const H=Cs(!1),A=()=>{H.value=!0,setTimeout(()=>{H.value=!1},3e3)};return(K,d)=>{const V=Ua,f=yn,k=ce,x=O,g=ji,C=Le,le=Xs,ge=Ki,W=gn,b=cl,h=Vo,xe=ql,$=Rl,S=ru("Draggable"),l=Il;return nt(te)?(Zt(),jn(f,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:It(()=>[Gt(V)]),_:1})):(Zt(),Aa(Da,{key:1},[Uo("div",pu,[Gt(le,{value:nt(I),"onUpdate:value":d[1]||(d[1]=o=>du(I)?I.value=o:null),type:"card",size:"small"},uu({default:It(()=>[nt(c)(nt(j)?.dataStructure)?(Zt(),Aa(Da,{key:0},[nt(c)(nt(j)?.dataStructure).index?(Zt(),jn(g,{key:0,name:"index"},{default:It(()=>[Gt(x,{class:"mr-1"},{default:It(()=>[Gt(k,{icon:"carbon:types"})]),_:1}),ia(" "+Kl(nt(t)("general")),1)]),_:1})):$s("",!0),(Zt(!0),Aa(Da,null,xs(nt(mn)(nt(c)(nt(j)?.dataStructure),["index"]),(o,y)=>(Zt(),jn(g,{key:y,name:String(y)},{default:It(()=>[ia(Kl(nt(a)(o.title)),1)]),_:2},1032,["name"]))),128))],64)):$s("",!0),Gt(g,{name:"_settings"},{default:It(()=>[Gt(x,{class:"mr-1"},{default:It(()=>[Gt(k,{icon:"carbon:settings"})]),_:1}),ia(" "+Kl(nt(t)("settings")),1)]),_:1})]),_:2},[nt(I)!=="index"&&nt(I)!=="_settings"?{name:"suffix",fn:It(()=>[Gt(C,{quaternary:"",size:"small",class:cu({"btn-blink":nt(H)}),onClick:d[0]||(d[0]=()=>{nt(U)[nt(I)].push({}),pe.value=("uuidv4"in K?K.uuidv4:oi(En))()})},{icon:It(()=>[Gt(x,null,{default:It(()=>[Gt(k,{icon:"carbon:add-alt"})]),_:1})]),default:It(()=>[ia(" "+Kl(nt(t)("add")),1)]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["value"])]),Gt(l,{appear:"",name:"slide-fade"},{default:It(()=>[Uo("section",null,[(Zt(!0),Aa(Da,null,xs(nt(c)(nt(j)?.dataStructure)||{},(o,y)=>(Zt(),Aa(Da,{key:y},[String(y)==="index"?(Zt(),jn(ri,{key:0,name:"slide-fade",mode:"out-in"},{default:It(()=>[ii(Gt(W,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(c)(nt(j)?.dataStructure).index?.length?(Zt(),jn(ps,{key:`${nt(pe)}-${y}-form-1`,modelValue:nt(U)[y],"onUpdate:modelValue":N=>nt(U)[y]=N,items:o,onUpdate:(N,F)=>{se.value=F}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(Zt(),jn(ge,{key:1,type:"warning","show-icon":""},{default:It(()=>[ia(Kl(nt(t)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[si,nt(I)==="index"]])]),_:2},1024)):(Zt(),jn(ri,{key:1,name:"slide-fade",mode:"out-in"},{default:It(()=>[ii(Gt(W,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(U)[y]&&Array.isArray(nt(U)[y])&&nt(U)[y].length?(Zt(),jn(S,{key:0,list:nt(U)[y],onChange:d[2]||(d[2]=N=>{pe.value=("uuidv4"in K?K.uuidv4:oi(En))()}),class:"w-full"},{default:It(()=>[(Zt(!0),Aa(Da,null,xs(nt(U)[y],(N,F)=>(Zt(),jn(W,{key:F,size:"small",class:"mb-2"},{default:It(()=>[Gt($,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:G})=>[Gt(f,{align:"center",justify:"space-between"},{default:It(()=>[Gt(C,{secondary:"",type:"error",size:"small",onClick:()=>{nt(U)[y].splice(F,1),pe.value=("uuidv4"in K?K.uuidv4:oi(En))()}},{icon:It(()=>[Gt(x,null,{default:It(()=>[Gt(k,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Gt(x,null,{default:It(()=>[G?(Zt(),jn(k,{key:0,icon:"fa-solid:chevron-left"})):(Zt(),jn(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:It(()=>[...d[4]||(d[4]=[Uo("span",null,null,-1)])]),default:It(()=>[Gt(xe,{name:"1"},{header:It(({collapsed:G})=>[Uo("div",mu,[Gt(x,{size:"18",class:"cursor-move mr-2"},{default:It(()=>[Gt(k,{icon:"fa-solid:grip-lines"})]),_:1}),Gt(b,{size:"medium",type:"info"},{default:It(()=>[ia(Kl(String(F+1)),1)]),_:2},1024),G?(Zt(),jn(h,{key:0,"line-clamp":1,"expand-trigger":"click",class:"text-base max-w-[80%]"},{default:It(()=>[ia(Kl(nt(Lc)(nt(U)[y][F],nt(a),"")),1)]),_:2},1024)):$s("",!0)])]),default:It(()=>[(Zt(),jn(ps,{key:`${nt(pe)}-${y}-${F}-form-2`,modelValue:nt(U)[y][F],"onUpdate:modelValue":G=>nt(U)[y][F]=G,items:o.items,onUpdate:(G,E)=>{L.value=E}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list"])):(Zt(),jn(ge,{key:1,type:"info",class:"cursor-pointer","show-icon":"",onClick:d[3]||(d[3]=N=>A())},{default:It(()=>[ia(Kl(nt(t)("emptyCollectionInfoMessage")),1)]),_:1}))]),_:2},1536),[[si,nt(I)===String(y)]])]),_:2},1024))],64))),128)),Gt(ri,{name:"slide-fade",mode:"out-in"},{default:It(()=>[ii(Gt(W,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(j)?.settingsStructure?(Zt(!0),Aa(Da,{key:0},xs(nt(c)(nt(j)?.settingsStructure),(o,y)=>(Zt(),jn(W,{key:y,size:"small",class:"mb-2"},{header:It(()=>[Uo("span",null,Kl(nt(a)(o.title)),1)]),default:It(()=>[nt(r)[y]?(Zt(),jn(ps,{key:`${nt(pe)}-${y}-form-3`,modelValue:nt(r)[y],"onUpdate:modelValue":N=>nt(r)[y]=N,items:o.items,onUpdate:(N,F)=>{be.value=F}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):$s("",!0)]),_:2},1024))),128)):(Zt(),jn(ge,{key:1,type:"warning","show-icon":""},{default:It(()=>[ia(Kl(nt(t)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[si,nt(I)==="_settings"]])]),_:1})])]),_:1})],64))}}}),vu=So(_u,[["__scopeId","data-v-27874ca2"]]),{defineComponent:gu}=await me("vue"),{unref:ze,resolveComponent:yu,createVNode:Te,withCtx:qe,toDisplayString:zn,createTextVNode:Kn,normalizeClass:Pa,openBlock:Jn,createBlock:po,createCommentVNode:Is,createElementVNode:Dl,normalizeStyle:bu,renderList:nr,Fragment:di,createElementBlock:Yl,withModifiers:lr}=await me("vue"),hu={class:"flex items-center justify-between ml-1 mr-2.5"},wu={key:0},ku={key:1},$u={key:0},xu={class:"flex items-center"},Cu={class:"absolute top-[-10px] right-[-10px] z-[10]"},Iu={class:"flex items-center justify-center cursor-pointer gap-2"},Vu={key:1},Su={class:"mt-4"},Eu={key:2,class:"mt-2 text-xs"},{useTemplateRef:zu,ref:Al,computed:ar,onMounted:Tu,provide:Hl}=await me("vue"),{storeToRefs:Uu}=await me("pinia"),Mu=gu({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(m,{emit:e}){const s=m,n=e,i=An(),{t}=Ne(),{tr:a,pickByTheme:c}=ut(),I=zu("sectionActions"),_e=Al({}),se=Al({}),L=Al({}),be=Al({}),J=Al(),T=Al(),r=Al(),U=Al(!1),pe=Al(!1),{sectionsDataBackup:ne,sectionsSettingsBackup:D}=Uu(mc()),{mutate:j,isPending:te}=Ic(),{mutate:M,isPending:z}=Vc(),{page:q,isLoadingPage:H,refreshKey:A,pageSections:K,initialPageSections:d,pageSectionsEnabled:V,initialPageSectionsEnabled:f,getPageSectionTitle:k,deletePage:x,isDeletingPage:g,dataSourcePagesOptions:C,confirmUpdateDataSourcePage:le,isUpdatingDataSourcePage:ge,submitRemoveSection:W,submitDuplicateSection:b,submitFillInFakeData:h,isDuplicatingSection:xe}=fd(s.slug),$=ar(()=>de.isEqual(_e.value,L.value)&&de.isEqual(se.value,be.value)&&de.isEqual(K.value,d.value)&&de.isEqual(V.value,f.value)),S=async()=>{const P=J.value&&await J.value(),we=T.value&&await T.value(),Ge=r.value&&await r.value(),Z=async()=>{l.value&&(M({slug:l.value.slug,dataSourceLinkId:l.value.pivot?.dataSourceLinkId,dataSourcePageId:l.value.pivot?.dataSourcePageId,settings:se.value,data:_e.value}),ne.value[`${l.value.slug}__${l.value.pivot?.dataSourceLinkId}__${l.value.pivot?.dataSourcePageId}`]=null,D.value[`${l.value.slug}__${l.value.pivot?.dataSourceLinkId}__${l.value.pivot?.dataSourcePageId}`]=null),j({slug:s.slug,sectionsOrder:K.value.map(Re=>`${Re.slug}__${Re.pivot?.linkId}`),sectionsDisabled:Object.keys(V.value).filter(Re=>!V.value[Re]),hideSuccessMessage:!!l.value})};!l.value||(!J.value||P)&&(!T.value||we)&&(!r.value||Ge)?(await Z(),U.value=!0,pe.value=!0):i.warning({title:t("confirm"),content:t("mandatoryFieldsNotFilledInConfirmation"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{await Z(),U.value=!0,pe.value=!0}})},l=Al(null),o=P=>{J.value=void 0,T.value=void 0,r.value=void 0,l.value=P},y=()=>{l.value&&(l.value=null)},{getSettingValue:N}=Fc(),F=()=>{const P=`${Oc(Rc())}/${(N("basePath")||"creopse")+fc.VISUAL_EDITOR.PATH}`;qc(P,{page:q.value?.slug||""},{target:"_blank",method:"GET"})},G=ar(()=>te.value||g.value||z.value||ge.value||xe.value),E=Al(!1);return Tu(()=>{setTimeout(()=>{E.value=!0},300)}),Hl("refreshKey",A),Hl("isDataJustSaved",U),Hl("isSettingsJustSaved",pe),Hl("formValueValidate1",J),Hl("formValueValidate2",T),Hl("formValueValidate3",r),Hl("initialSettings",be),Hl("initialData",L),Hl("settings",se),Hl("data",_e),(P,we)=>{const Ge=ce,Z=O,Re=Le,Ce=Vl,Ze=yn,B=xl,w=od,v=Il,Q=ad,mt=gn,oe=hc,_t=oo,ft=cl,yt=Vo,Qe=Ml,St=ql,ve=Rl,Et=yu("Draggable"),fn=Sl;return Jn(),Yl(di,null,[Te(B,{to:"#alt-action"},{default:qe(()=>[Te(Ze,{align:"center"},{default:qe(()=>[Te(Re,{secondary:"",type:"error",disabled:ze(G),onClick:we[0]||(we[0]=ue=>ze(q)?ze(x)(ze(q),()=>{n("delete",ze(q))}):null)},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:trash-can"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("delete")),1)]),_:1},8,["disabled"]),Te(Re,{secondary:"",type:"info",disabled:ze(G),onClick:we[1]||(we[1]=ue=>ze(q)?m.openFormModal(ze(q)):null)},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:edit"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("editPage")),1)]),_:1},8,["disabled"]),Te(Ce,{vertical:"",class:Pa(ze(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Te(Re,{secondary:"",type:"primary",loading:ze(G),disabled:ze($),onClick:we[2]||(we[2]=ue=>S())},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:save"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Dl("section",{class:Pa(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",ze(E)?"opacity-100":"opacity-0"]),style:bu({visibility:ze(E)?"visible":"hidden"})},[Te(mt,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:qe(()=>[Dl("div",hu,[Te(Q,null,{default:qe(()=>[Te(w,{onClick:we[3]||(we[3]=ue=>y())},{default:qe(()=>[Te(Z,{class:"mr-1"},{default:qe(()=>[Te(Ge,{icon:"carbon:document"})]),_:1}),Kn(" "+zn(ze(a)(ze(q)?.title)),1)]),_:1}),Te(v,{appear:"",name:"slide-fade"},{default:qe(()=>[ze(l)?(Jn(),po(w,{key:0},{default:qe(()=>[Kn(zn(ze(k)(ze(l))),1)]),_:1})):Is("",!0)]),_:1})]),_:1}),Te(Ze,null,{default:qe(()=>[Te(Re,{onClick:we[4]||(we[4]=ue=>F()),size:"small",secondary:"",type:"success"},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:view"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("openVisualEditor")),1)]),_:1}),ze(l)?(Jn(),po(Re,{key:0,onClick:we[5]||(we[5]=ue=>y()),size:"small",secondary:"",type:"warning",title:ze(t)("exit")},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):Is("",!0)]),_:1})])]),_:1})],6),Dl("div",{class:Pa(`${ze(l)?"h-[90px]":"h-[50px]"}`)},null,2),ze(l)?(Jn(),po(vu,{key:0,slug:ze(l)?.slug,"link-id":ze(l)?.pivot?.dataSourceLinkId,"page-id":ze(l)?.pivot?.dataSourcePageId},null,8,["slug","link-id","page-id"])):(Jn(),po(v,{key:1,appear:"",name:"slide-fade"},{default:qe(()=>[Dl("section",null,[ze(H)?(Jn(),Yl("section",wu,[(Jn(),Yl(di,null,nr(7,ue=>Te(oe,{key:ue,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(Jn(),Yl("section",ku,[ze(q)&&Array.isArray(ze(q).sections)&&ze(q).sections.length?(Jn(),Yl("section",$u,[Te(Et,{list:ze(K)},{default:qe(()=>[(Jn(!0),Yl(di,null,nr(ze(K),(ue,Kt)=>(Jn(),Yl("section",{key:ue.id},[Te(mt,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:qe(()=>[Te(ve,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":qe(({collapsed:bt})=>[Te(Ze,{align:"center",justify:"space-between"},{default:qe(()=>[Te(Re,{secondary:"",type:"primary",size:"small",onClick:lr(Nl=>o(ue),["stop"])},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:archive"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("dataAndSettings")),1)]),_:1},8,["onClick"]),Te(Z,null,{default:qe(()=>[bt?(Jn(),po(Ge,{key:0,icon:"fa-solid:chevron-left"})):(Jn(),po(Ge,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:qe(()=>[...we[9]||(we[9]=[Dl("span",null,null,-1)])]),default:qe(()=>[Te(St,{name:"1"},{header:qe(()=>[Dl("div",xu,[Te(Z,{size:"21",class:"cursor-move mr-4"},{default:qe(()=>[Te(Ge,{icon:"fa-solid:grip-lines"})]),_:1}),Te(_t,{checked:ze(V)[`${ue.slug}__${ue.pivot?.linkId}`],"onUpdate:checked":bt=>ze(V)[`${ue.slug}__${ue.pivot?.linkId}`]=bt,size:"small",class:"mr-4",onClick:we[6]||(we[6]=lr(()=>{},["stop"]))},{default:qe(()=>[Kn(zn(ze(t)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),Te(ft,{size:"small",type:"info"},{default:qe(()=>[Kn(zn(Kt+1),1)]),_:2},1024),Te(Ce,{vertical:"",class:Pa(ze(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Te(yt,{"line-clamp":1,class:"text-base"},{default:qe(()=>[Kn(zn(ze(k)(ue)),1)]),_:2},1024)])]),default:qe(()=>[Te(Ze,null,{default:qe(()=>[Te(Re,{size:"small",type:"error",secondary:"",onClick:bt=>ze(W)(ue)},{default:qe(()=>[Te(Z,{size:"18",class:"mr-1"},{default:qe(()=>[Te(Ge,{icon:"carbon:close"})]),_:1}),Kn(" "+zn(ze(t)("removeSection")),1)]),_:1},8,["onClick"]),Te(Re,{size:"small",type:"warning",secondary:"",onClick:bt=>ze(b)(ue)},{default:qe(()=>[Te(Z,{size:"18",class:"mr-1"},{default:qe(()=>[Te(Ge,{icon:"carbon:partition-same"})]),_:1}),Kn(" "+zn(ze(t)("duplicateSection")),1)]),_:1},8,["onClick"]),Te(Re,{size:"small",type:"info",secondary:"",onClick:bt=>ze(h)(ue)},{default:qe(()=>[Te(Z,{size:"18",class:"mr-1"},{default:qe(()=>[Te(Ge,{icon:"carbon:magic-wand"})]),_:1}),Kn(" "+zn(ze(t)("fillInFakeData")),1)]),_:1},8,["onClick"]),Te(Re,{size:"small",type:"info",secondary:"",onClick:bt=>ze(I)?.copyData(ue)},{default:qe(()=>[Te(Z,{size:"18",class:"mr-1"},{default:qe(()=>[Te(Ge,{icon:"carbon:copy"})]),_:1}),Kn(" "+zn(ze(t)("copyData")),1)]),_:1},8,["onClick"]),Te(Ce,{vertical:"",class:Pa(ze(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Te(Ze,{align:"center"},{default:qe(()=>[Dl("span",null,zn(ze(t)("dataSource")),1),Te(Qe,{value:`${ue.pivot?.dataSourcePageId}__${ue.pivot?.dataSourceLinkId}`,options:ze(C)(ue.pages||[],ue),placeholder:ze(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":bt=>ze(le)(ue,bt,ze($))},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),Kt<ze(K).length-1?(Jn(),Yl("div",{key:0,class:Pa(`relative border-dashed border-y-2 h-1.5  ${ze(c)("!border-zinc-300","!border-zinc-600")}`)},[Dl("div",Cu,[Te(Re,{size:"tiny",type:"info",title:ze(t)("insertSections"),onClick:bt=>ze(I)?.openInsertSectionsDialog(Kt+1)},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):Is("",!0)]))),128))]),_:1},8,["list"]),Te(mt,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:we[7]||(we[7]=ue=>ze(I)?.openToggleSectionsDialog())},{default:qe(()=>[Dl("div",Iu,[Te(Z,{size:"20"},{default:qe(()=>[Te(Ge,{icon:"carbon:row"})]),_:1}),Kn(" "+zn(ze(t)("insertOrRemoveSections")),1)])]),_:1})])):(Jn(),Yl("section",Vu,[Te(mt,{size:"large",class:Pa(`mb-2 !border-dashed !border-2 ${ze(c)("!border-zinc-300","!border-zinc-600")}`)},{default:qe(()=>[Te(fn,{description:ze(t)("noSectionOnThisPage")},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:page-break"})]),_:1})]),extra:qe(()=>[Dl("div",Su,[Te(Re,{size:"small",secondary:"",onClick:we[8]||(we[8]=ue=>ze(I)?.openToggleSectionsDialog())},{icon:qe(()=>[Te(Z,null,{default:qe(()=>[Te(Ge,{icon:"carbon:row"})]),_:1})]),default:qe(()=>[Kn(" "+zn(ze(t)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),ze(q)?(Jn(),Yl("div",Eu,[Kn(zn(ze(t)("dataRetrievalSlug"))+": ",1),Dl("b",null,zn(ze(q).slug),1)])):Is("",!0)]))])]),_:1})),Te(_d,{ref_key:"sectionActions",ref:I,page:ze(q),slug:s.slug,"page-sections":ze(K)},null,8,["page","slug","page-sections"])],64)}}}),Nu=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu-item-groups"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu-item-groups",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Du=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu-item-groups"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu-item-groups/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Au=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["menu-item-groups"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu-item-groups/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},{useModel:Pu,defineComponent:Bu}=await me("vue"),{unref:At,resolveComponent:xy,createVNode:en,toDisplayString:mo,createTextVNode:Mo,withCtx:dn,renderList:Lu,Fragment:or,openBlock:No,createElementBlock:sr,createElementVNode:ui,createBlock:pi,normalizeClass:Fu,isRef:Ou}=await me("vue"),{ref:Vs}=await me("vue"),Ru={class:"flex items-center justify-between"},qu={class:"flex flex-col"},ju={class:"text-sm font-bold"},Ku=Bu({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(m){const{t:e}=Ne(),{pickByTheme:s,tr:n}=ut(),i=Pu(m,"show"),{data:t,isPending:a}=_c(),{mutate:c,isPending:I}=Nu(),{mutate:_e,isPending:se}=Du(),{mutate:L,isPending:be}=Au(),J=An(),T=Vs(!1),r=Vs(null),U=Vs(null),pe=Vs({name:"",description:""}),ne={name:[{required:!0,message:e("fillRequired")}]},D=M=>{r.value=de.cloneDeep(M),pe.value=de.cloneDeep(M||{name:"",description:""}),T.value=!0},j=async()=>(U.value?.validate(async M=>{if(!M){const z={name:pe.value.name,description:pe.value.description};r.value?_e({id:r.value.id,...z},{onSuccess:()=>{T.value=!1}}):c(z,{onSuccess:()=>{T.value=!1}})}}),!1),te=async M=>{J.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{M.id&&L({id:M.id})}})};return(M,z)=>{const q=ce,H=Le,A=yn,K=Vo,d=O,V=gn,f=ya,k=Sl,x=Ua,g=Wn,C=Cl,le=ul,ge=dl;return No(),sr(or,null,[en(g,{show:i.value,"onUpdate:show":z[2]||(z[2]=W=>i.value=W),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:At(e)("menuItemGroups")},{"header-extra":dn(()=>[en(A,{align:"center"},{default:dn(()=>[en(H,{secondary:"",size:"small",type:"primary",disabled:At(a),onClick:z[0]||(z[0]=W=>D(null))},{default:dn(()=>[en(q,{icon:"carbon:add-alt",class:"mr-1"}),Mo(" "+mo(At(e)("add")),1)]),_:1},8,["disabled"]),en(H,{secondary:"",size:"small",type:"error",disabled:At(a),onClick:z[1]||(z[1]=W=>i.value=!1)},{default:dn(()=>[en(q,{icon:"carbon:close",class:"mr-1"}),Mo(" "+mo(At(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:dn(()=>[en(x,{show:At(a)},{default:dn(()=>[At(t)?.length?(No(),pi(f,{key:0,style:{"max-height":"400px"}},{default:dn(()=>[(No(!0),sr(or,null,Lu(At(t),W=>(No(),pi(V,{key:W.id,embedded:"",size:"small",class:"mb-2"},{default:dn(()=>[ui("div",Ru,[ui("div",qu,[ui("span",ju,mo(At(n)(W.name)),1),en(K,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:dn(()=>[Mo(mo(At(n)(W.description)),1)]),_:2},1024)]),en(A,null,{default:dn(()=>[en(H,{size:"small",type:"warning",secondary:"",onClick:b=>D(W)},{default:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),en(H,{size:"small",type:"error",secondary:"",onClick:b=>te(W)},{default:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(No(),pi(V,{key:1,size:"large",class:Fu(`mb-2 !border-dashed !border-2 ${At(s)("!border-zinc-300","!border-zinc-600")}`)},{default:dn(()=>[en(k,{description:At(e)("noMenuItemGroupAdded")},{icon:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),en(g,{show:At(T),"onUpdate:show":z[5]||(z[5]=W=>Ou(T)?T.value=W:null),loading:At(I)||At(se)||At(be),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:At(r)?At(e)("editMenuItemGroup"):At(e)("addMenuItemGroup"),"positive-text":At(e)("validate"),"negative-text":At(e)("cancel"),onPositiveClick:j,onNegativeClick:z[6]||(z[6]=W=>T.value=!1)},{default:dn(()=>[en(ge,{ref_key:"formRef",ref:U,model:At(pe),rules:ne,"show-require-mark":!1,size:"medium",class:"my-5"},{default:dn(()=>[en(le,{"show-label":!1,path:"name"},{default:dn(()=>[en(C,{modelValue:At(pe).name,"onUpdate:modelValue":z[3]||(z[3]=W=>At(pe).name=W),placeholder:At(e)("name"),class:"w-full",sync:""},{label:dn(()=>[Mo(mo(At(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),en(le,{"show-label":!1,path:"description"},{default:dn(()=>[en(C,{modelValue:At(pe).description,"onUpdate:modelValue":z[4]||(z[4]=W=>At(pe).description=W),placeholder:At(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:dn(()=>[Mo(mo(At(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:ir,mergeModels:Gu,defineComponent:Yu}=await me("vue"),{unref:Rt,resolveComponent:Cy,createVNode:ca,withCtx:Ba,isRef:Hu,Fragment:Wu,openBlock:Do,createElementBlock:Qu,createCommentVNode:Ss,createBlock:Es}=await me("vue"),{ref:Ao,computed:Po,onMounted:Ju,h:Bo}=await me("vue"),Xu=Yu({__name:"ContentFormItems",props:{"content-type":{default:_l.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Gu(["update"],["update:content-type","update:content-id"]),setup(m,{emit:e}){const{t:s}=Ne(),{tr:n,mergeArrays:i}=ut(),{contentTypes:t,extractItemTitle:a}=gs(),{data:c}=ao(),I=e,_e=ir(m,"content-type"),se=ir(m,"content-id"),L=Ao(),be=Ao([]),J=Ao([]),{mutateAsync:T,isPending:r}=Sc(),{mutateAsync:U,isPending:pe}=vd(),ne=Po(()=>r.value||pe.value),D=async(W,b)=>{if(!W.length){J.value=[];return}J.value=await T({query:W,contentModelId:b})},j=Po(()=>i(be.value,J.value,"id")),te=Ao([]),M=Ao([]),{mutateAsync:z,isPending:q}=xd(),{mutateAsync:H,isPending:A}=Cd(),K=Po(()=>A.value||q.value),d=async W=>{if(!W.length){M.value=[];return}M.value=await H(W)},V=Po(()=>i(te.value,M.value,"id")),{categories:f}=Qi(),{tags:k}=Qi();Ju(async()=>{const W=await z({ids:se.value?[se.value]:[]});W&&(te.value=i(te.value,W,"id"));const b=await U({ids:se.value?[se.value]:[]});b&&(be.value=i(be.value,b,"id"),L.value=be.value.find(h=>h.id===se.value)?.contentModelId)});const x=W=>Bo("span",{},{default:()=>`${n(W.name)}`}),g=W=>Bo("span",{},{default:()=>`${n(W.title)}`}),C=W=>Bo("span",{},{default:()=>`${n(W.name)}`}),le=W=>Bo("span",{},{default:()=>n(W.title)}),ge=W=>Po(()=>Bo("span",{},{default:()=>a(W,c.value?.find(b=>b.id===W.contentModelId))}));return(W,b)=>{const h=Ml,xe=ba,$=ll;return Do(),Es($,{"x-gap":"12",span:24},{default:Ba(()=>[ca(xe,{span:8,label:Rt(s)("contentType"),path:"contentType"},{default:Ba(()=>[ca(h,{value:_e.value,"onUpdate:value":[b[0]||(b[0]=S=>_e.value=S),b[1]||(b[1]=()=>se.value=void 0)],options:Rt(t)||[],placeholder:Rt(s)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),_e.value===Rt(_l).CONTENT_MODEL?(Do(),Qu(Wu,{key:0},[ca(xe,{span:8,label:Rt(s)("contentModel")},{default:Ba(()=>[ca(h,{value:Rt(L),"onUpdate:value":b[2]||(b[2]=S=>Hu(L)?L.value=S:null),options:Rt(c),placeholder:Rt(s)("search"),"render-label":le,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ca(xe,{span:8,label:Rt(s)("item"),path:"contentId"},{default:Ba(()=>[ca(h,{value:se.value,"onUpdate:value":[b[3]||(b[3]=S=>se.value=S),b[5]||(b[5]=(S,l)=>I("update",S,l,_e.value))],options:Rt(j)||[],placeholder:Rt(s)("search"),"render-label":S=>ge(S).value,loading:Rt(ne),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:b[4]||(b[4]=S=>D(S,Rt(L)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):Ss("",!0),_e.value===Rt(_l).NEWS_ARTICLE?(Do(),Es(xe,{key:1,span:16,label:Rt(s)("newsArticle"),path:"contentId"},{default:Ba(()=>[ca(h,{value:se.value,"onUpdate:value":[b[6]||(b[6]=S=>se.value=S),b[7]||(b[7]=(S,l)=>I("update",S,l,_e.value))],options:Rt(V)||[],placeholder:Rt(s)("search"),"render-label":g,loading:Rt(K),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:d},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):Ss("",!0),_e.value===Rt(_l).NEWS_CATEGORY?(Do(),Es(xe,{key:2,span:16,label:Rt(s)("newsCategory"),path:"contentId"},{default:Ba(()=>[ca(h,{value:se.value,"onUpdate:value":[b[8]||(b[8]=S=>se.value=S),b[9]||(b[9]=(S,l)=>I("update",S,l,_e.value))],options:Rt(f)||[],placeholder:Rt(s)("select"),"render-label":x,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Ss("",!0),_e.value===Rt(_l).NEWS_TAG?(Do(),Es(xe,{key:3,span:16,label:Rt(s)("newsTag"),path:"contentId"},{default:Ba(()=>[ca(h,{value:se.value,"onUpdate:value":[b[10]||(b[10]=S=>se.value=S),b[11]||(b[11]=(S,l)=>I("update",S,l,_e.value))],options:Rt(k)||[],placeholder:Rt(s)("select"),"render-label":C,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Ss("",!0)]),_:1})}}}),Zu=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu","items"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu/items",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},ep=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu","items"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu/items/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},tp=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["menu","items"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu/items/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},np=()=>{const{request:m}=et(),e=ot();return Ta(async s=>{const n=await m({method:"put",url:"/menu/items/position",data:s});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:lp,defineComponent:ap}=await me("vue"),{unref:p,resolveComponent:mi,createVNode:X,withCtx:fe,toDisplayString:tn,createTextVNode:Xn,openBlock:Yt,createBlock:da,createCommentVNode:La,isRef:zs,renderList:Ts,Fragment:Wl,createElementBlock:Zn,normalizeClass:Fa,withModifiers:Lo,createElementVNode:Tn}=await me("vue"),op={key:0},sp={class:"flex items-center"},ip={class:"flex flex-col"},rp={class:"text-sm font-bold"},cp={key:0,class:"text-sm"},dp={class:"text-xs font-normal"},up={class:"text-xs my-1"},pp={class:"flex items-center"},mp={class:"flex flex-col"},fp={class:"text-sm font-bold"},_p={class:"text-xs font-normal"},vp={key:0,class:"mt-4"},gp={class:"my-8"},yp={class:"flex items-center justify-between"},bp={class:"flex flex-col"},hp={class:"text-sm font-bold"},wp={class:"text-xs font-normal"},kp={class:"flex items-center"},$p={key:0},xp={key:1},Cp={key:2},{storeToRefs:Ip}=await me("pinia"),{ref:gl,watch:Vp,computed:Fo,h:rr}=await me("vue"),Sp=ap({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const{t:e,locale:s}=Ne(),{extractItemTitle:n}=gs(),{tr:i,pickByTheme:t}=ut(),{isLightTheme:a}=Ip(Io()),{data:c,isPending:I}=Ri(),{data:_e}=ao(),{data:se,isPending:L}=_c(),{data:be,isFetching:J,refetch:T}=jc({enabled:!1}),{mutate:r,isPending:U}=Zu(),{mutate:pe,isPending:ne}=ep(),{mutate:D,isPending:j}=tp(),{mutate:te}=np(),M=Xe(),z=An(),q=lp(m,"modelValue"),H=gl([]),A=gl([]),K=gl(""),d=gl();let V=gl(!0);Vp(()=>J.value,B=>{B||(V.value=!1)});const f=Fo(()=>{if(!K.value)return H.value;const B=H.value.filter(w=>w.title.toLowerCase().includes(K.value.toLowerCase())||w.description?.toLowerCase().includes(K.value.toLowerCase())||w.children.some(v=>v.title.toLowerCase().includes(K.value.toLowerCase())||v.description?.toLowerCase().includes(K.value.toLowerCase())));return d.value&&d.value.focus(),B}),k=async()=>{await T(),H.value=be.value?.filter(B=>!B.parentId&&B.menuId===q.value?.id)||[];for(let B=0;B<H.value.length;B++)H.value[B].children=be.value?.filter(w=>w.parentId===H.value[B].id&&w.menuId===q.value?.id)||[];A.value=be.value?.filter(B=>B.menuId!==q.value?.id)||[]};k();const x=gl(24),g=gl(1),C=B=>{x.value=B},le={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:vl.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:_l.CONTENT_MODEL,contentId:void 0},ge=gl(null),W=gl(!1),b=gl(!1),h=gl(null),xe=gl(null),$=gl(le),S=Fo(()=>{const B={title:[{required:!0,message:e("fillRequired")}]};return $.value.targetType===vl.PAGE_LINK?(B.pageId=[{required:!0,message:e("fillRequired")}],B.path=[{required:!0,message:e("fillRequired")}]):$.value.targetType===vl.EXTERNAL_LINK?B.url=[{required:!0,message:e("fillRequired")}]:$.value.targetType===vl.CONTENT_LINK&&(B.contentId=[{required:!0,message:e("fillRequired")}],B.contentType=[{required:!0,message:e("fillRequired")}]),B}),l=Fo(()=>c.value?.find(B=>B.id==$.value.pageId)?.slug||""),{data:o,isPending:y}=Id({queryKey:["pages",l],queryFn:async()=>{const{request:B}=et(),w=await B({url:`/pages/${l.value}`});return w.success&&w.result.data?w.result.data:null},enabled:Fo(()=>!!l.value)}),N=Fo(()=>o.value?.sections?.map(B=>{const Q=(o.value?.sections?.filter(mt=>mt.id===B.id)?.map(mt=>mt.pivot?.createdAt||mt.pivot?.updatedAt||"")?.sort((mt,oe)=>new Date(mt).getTime()-new Date(oe).getTime())||[]).indexOf(B.pivot?.createdAt||B.pivot?.updatedAt||"");return{label:B.pivot?.linkId=="default"?i(B.title):i(B.title)+" ("+(Q+1)+")",value:B.slug+"__"+B.pivot?.linkId}})||[]),F=(B,w=null)=>{h.value=de.cloneDeep(B),ge.value=w,B?($.value=de.cloneDeep(B),W.value=!0):($.value=de.cloneDeep(le),A.value.length>0?b.value=!0:W.value=!0)},G=async B=>{z.warning({title:e("confirm"),content:B.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{B.id&&D({id:B.id})}})},E=async B=>{r({title:B.title,path:B.path,url:B.url,description:B.description,isActive:!0,isVisible:!0,color:B.color,icon:B.icon,position:B.position,targetType:B.targetType,parentId:ge.value,menuId:q.value?.id,sectionKey:B.sectionKey,menuItemGroupId:B.menuItemGroupId,pageId:B.pageId},{onSuccess(){k(),b.value=!1}})},P=async()=>(xe.value?.validate(async B=>{if(!B){const w={title:$.value.title,path:$.value.path,url:$.value.url,description:$.value.description,isActive:$.value.isActive,isVisible:$.value.isVisible,color:$.value.color,icon:$.value.icon,position:$.value.position,targetType:$.value.targetType,parentId:ge.value,menuId:q.value?.id,sectionKey:$.value.sectionKey,menuItemGroupId:$.value.menuItemGroupId,pageId:$.value.pageId,contentId:$.value.contentId,contentType:$.value.contentType};h.value?h.value.title!==$.value.title&&H.value.findIndex(v=>v.title==$.value.title)>-1?M.error(e("sameMenuItemTitleMessage")):pe({id:h.value.id,...w},{onSuccess(){k()}}):H.value.findIndex(v=>v.title==$.value.title)>-1?M.error(e("sameMenuItemTitleMessage")):r(w,{onSuccess(){k()}}),W.value=!1}}),!1),we=async(B,w)=>{te({items:w},{onSuccess(){k()}})},Ge=B=>rr("span",{},{default:()=>i(B.title)}),Z=B=>rr("span",{},{default:()=>i(B.name)}),Re=B=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(B),Ce=B=>{if(B.targetType==vl.EXTERNAL_LINK)return B.url;if(B.targetType==vl.PAGE_LINK)return B.path;if(B.targetType==vl.CONTENT_LINK)switch(B.contentType){case _l.CONTENT_MODEL:return e("contentModel");case _l.NEWS_CATEGORY:return e("newsCategory");case _l.NEWS_ARTICLE:return e("newsArticle");case _l.NEWS_TAG:return e("newsTag")}return""},Ze=async(B,w,v)=>{if(!i($.value.title))switch(v){case _l.CONTENT_MODEL:$.value.title=n(w,_e.value?.find(Q=>Q.id===w.contentModelId));break;case _l.NEWS_ARTICLE:$.value.title=w.title;break;case _l.NEWS_CATEGORY:case _l.NEWS_TAG:$.value.title=w.name;break}};return(B,w)=>{const v=ce,Q=yn,mt=xl,oe=wc,_t=hc,ft=cl,yt=Vl,Qe=gn,St=mi("Draggable"),ve=ql,Et=Rl,fn=so,ue=Sl,Kt=Il,bt=ya,Nl=Wn,El=Cl,zl=ul,st=Gi,Pn=ba,qn=vs,Ye=_s,Qn=ll,ys=mi("IconPicker"),Zs=mi("color-picker"),Eo=Ml,bs=dl;return Yt(),Zn(Wl,null,[X(mt,{to:"#alt-action"},{default:fe(()=>[X(Q,{align:"center"},{default:fe(()=>[p(f).length?(Yt(),da(p(Le),{key:0,secondary:"",type:"primary",onClick:w[0]||(w[0]=ke=>F(null))},{icon:fe(()=>[X(p(O),{size:"18"},{default:fe(()=>[X(v,{icon:"carbon:add-alt"})]),_:1})]),default:fe(()=>[Xn(" "+tn(p(e)("addMenuItem")),1)]),_:1})):La("",!0)]),_:1})]),_:1}),X(oe,{class:"mt-2 mb-5",onBack:w[2]||(w[2]=ke=>q.value=null)},{title:fe(()=>[Xn(tn(p(i)(q.value?.title)),1)]),back:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:fe(()=>[X(p(jt),{ref_key:"searchInputRef",ref:d,value:p(K),"onUpdate:value":w[1]||(w[1]=ke=>zs(K)?K.value=ke:null),clearable:!0,placeholder:p(e)("search")},{suffix:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),X(Kt,{appear:"",name:"slide-fade"},{default:fe(()=>[Tn("section",null,[p(V)?(Yt(),Zn("section",op,[(Yt(),Zn(Wl,null,Ts(7,ke=>X(_t,{key:ke,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(Yt(),Zn(Wl,{key:1},[p(f)&&p(f).length?(Yt(),Zn(Wl,{key:0},[X(St,{list:p(H),onChange:w[3]||(w[3]=ke=>we(ke,p(H)))},{default:fe(()=>[(Yt(!0),Zn(Wl,null,Ts(p(f).slice((p(g)-1)*p(x),p(g)*p(x)),ke=>(Yt(),da(Qe,{key:ke.id,embedded:"",size:"small",class:"mb-1"},{default:fe(()=>[X(Et,{"default-expanded-names":ke.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":fe(({collapsed:Ie})=>[X(Q,{align:"center"},{default:fe(()=>[X(ft,{size:"small",bordered:!1,type:ke.isActive?"success":"error"},{default:fe(()=>[Xn(tn(ke.isActive?p(e)("published"):p(e)("unpublished")),1)]),_:2},1032,["type"]),X(ft,{size:"small",bordered:!1,type:ke.isVisible?"info":"warning"},{default:fe(()=>[Xn(tn(ke.isVisible?p(e)("visible"):p(e)("hidden")),1)]),_:2},1032,["type"]),X(yt,{vertical:"",class:Fa(["!mx-0",p(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),X(p(Le),{size:"small",type:"primary",secondary:"",onClick:Lo(sa=>F(ke),["stop"])},{default:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),X(p(Le),{size:"small",type:"error",secondary:"",onClick:Lo(sa=>G(ke),["stop"])},{default:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),X(p(Le),{size:"small",type:"info",secondary:"",onClick:Lo(sa=>F(null,ke.id),["stop"])},{icon:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:category"})]),_:1})]),default:fe(()=>[Xn(" "+tn(p(e)("subMenuItem"))+" ",1),X(ft,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:fe(()=>[Xn(tn(ke.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),w[27]||(w[27]=Tn("div",{class:"w-6"},null,-1)),X(p(O),null,{default:fe(()=>[Ie?(Yt(),da(v,{key:0,icon:"fa-solid:chevron-left"})):(Yt(),da(v,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:fe(()=>[...w[28]||(w[28]=[Tn("span",null,null,-1)])]),default:fe(()=>[X(ve,{name:"1"},{header:fe(()=>[Tn("div",sp,[X(p(O),{size:"21",class:"cursor-move mr-4"},{default:fe(()=>[X(v,{icon:"fa-solid:grip-lines"})]),_:1}),X(yt,{vertical:"",class:Fa(p(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Tn("div",ip,[Tn("div",null,[Tn("span",rp,tn(p(i)(ke.title)),1),ke.group?(Yt(),Zn("span",cp," Â ("+tn(p(i)(ke.group?.name))+") ",1)):La("",!0)]),Tn("small",dp,tn(Ce(ke)),1)])])]),default:fe(()=>[ke.description?(Yt(),Zn(Wl,{key:0},[X(yt,{class:Fa([p(t)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Tn("div",up,tn(p(i)(ke.description)),1)],64)):La("",!0),ke.children.length?(Yt(),Zn(Wl,{key:1},[X(yt,{class:Fa([p(t)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),X(St,{list:ke.children,onChange:Ie=>we(Ie,ke.children)},{default:fe(()=>[(Yt(!0),Zn(Wl,null,Ts(ke.children,Ie=>(Yt(),da(Qe,{key:Ie.id,size:"small",class:"mb-1"},{header:fe(()=>[Tn("div",pp,[X(p(O),{size:"21",class:"cursor-move mr-4"},{default:fe(()=>[X(v,{icon:"fa-solid:grip-lines"})]),_:1}),X(yt,{vertical:"",class:Fa(p(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Tn("div",mp,[Tn("span",fp,tn(p(i)(Ie.title)),1),Tn("small",_p,tn(Ce(Ie)),1)])])]),"header-extra":fe(()=>[X(Q,{align:"center"},{default:fe(()=>[X(ft,{size:"small",bordered:!1,type:Ie.isActive?"success":"error"},{default:fe(()=>[Xn(tn(Ie.isActive?p(e)("published"):p(e)("unpublished")),1)]),_:2},1032,["type"]),X(ft,{size:"small",bordered:!1,type:Ie.isVisible?"info":"warning"},{default:fe(()=>[Xn(tn(Ie.isVisible?p(e)("visible"):p(e)("hidden")),1)]),_:2},1032,["type"]),X(yt,{vertical:"",class:Fa(["!mx-0",p(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),X(p(Le),{size:"small",type:"primary",secondary:"",onClick:Lo(sa=>F(Ie,ke.id),["stop"])},{default:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),X(p(Le),{size:"small",type:"error",secondary:"",onClick:Lo(sa=>G(Ie),["stop"])},{default:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):La("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),X(fn,{page:p(g),"onUpdate:page":w[4]||(w[4]=ke=>zs(g)?g.value=ke:null),class:"mt-5 justify-end","show-size-picker":"","page-size":p(x),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(p(H).length/p(x)),"onUpdate:pageSize":C},{prefix:fe(()=>[Xn(tn(`${p(H).length} ${p(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Yt(),da(Qe,{key:1,size:"large",class:Fa(`mb-2 !border-dashed !border-2 ${p(t)("!border-zinc-300","!border-zinc-600")}`)},{default:fe(()=>[X(ue,{description:p(e)("noMenuItemAvailable")},{icon:fe(()=>[X(p(O),null,{default:fe(()=>[p(K)?(Yt(),da(v,{key:0,icon:"carbon:search"})):(Yt(),da(v,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:fe(()=>[p(K)?La("",!0):(Yt(),Zn("div",vp,[X(p(Le),{size:"small",secondary:"",onClick:w[5]||(w[5]=ke=>F(null))},{icon:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:add-alt"})]),_:1})]),default:fe(()=>[Xn(" "+tn(p(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),X(Nl,{show:p(b),"onUpdate:show":w[6]||(w[6]=ke=>zs(b)?b.value=ke:null),loading:p(U)||p(ne)||p(j),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:p(e)("menuItems"),"positive-text":p(ge)?p(e)("createSubMenuItem"):p(e)("createMenuItem"),"negative-text":p(e)("cancel"),onPositiveClick:w[7]||(w[7]=()=>{b.value=!1,W.value=!0}),onNegativeClick:w[8]||(w[8]=ke=>b.value=!1)},{default:fe(()=>[Tn("section",gp,[X(bt,{style:{"max-height":"400px"}},{default:fe(()=>[(Yt(!0),Zn(Wl,null,Ts(p(A),ke=>(Yt(),da(Qe,{key:ke.id,embedded:"",size:"small",class:"mb-2"},{default:fe(()=>[Tn("div",yp,[Tn("div",bp,[Tn("span",hp,tn(p(i)(ke.title)),1),Tn("small",wp,tn(Ce(ke)),1)]),X(p(Le),{size:"small",type:"primary",secondary:"",onClick:Ie=>E(ke)},{icon:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:add-alt"})]),_:1})]),default:fe(()=>[Xn(" "+tn(p(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),X(Nl,{show:p(W),"onUpdate:show":w[25]||(w[25]=ke=>zs(W)?W.value=ke:null),loading:p(U)||p(ne)||p(j),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:p(h)?p(ge)?p(e)("editSubMenuItem"):p(e)("editMenuItem"):p(ge)?p(A).length?p(e)("createSubMenuItem"):p(e)("addSubMenuItem"):p(A).length?p(e)("createMenuItem"):p(e)("addMenuItem"),"positive-text":p(e)("validate"),"negative-text":p(e)("cancel"),onPositiveClick:P,onNegativeClick:w[26]||(w[26]=ke=>W.value=!1)},{default:fe(()=>[X(bs,{ref_key:"formRef",ref:xe,class:"mt-5",model:p($),rules:p(S),"show-require-mark":!1,size:"medium"},{default:fe(()=>[X(zl,{"show-label":!1,path:"title"},{default:fe(()=>[X(El,{modelValue:p($).title,"onUpdate:modelValue":w[9]||(w[9]=ke=>p($).title=ke),placeholder:p(e)("title"),class:"w-full",sync:""},{label:fe(()=>[Xn(tn(p(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),X(zl,{"show-label":!1,path:"description"},{default:fe(()=>[X(El,{modelValue:p($).description,"onUpdate:modelValue":w[10]||(w[10]=ke=>p($).description=ke),placeholder:p(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:fe(()=>[Xn(tn(p(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),X(Qn,{"x-gap":"12",span:24},{default:fe(()=>[X(Pn,{span:5,label:p(e)("position"),path:"position"},{default:fe(()=>[X(st,{value:p($).position,"onUpdate:value":w[11]||(w[11]=ke=>p($).position=ke),placeholder:p(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),X(Pn,{span:10,label:p(e)("publication"),path:"isActive"},{default:fe(()=>[X(Ye,{value:p($).isActive,"onUpdate:value":w[12]||(w[12]=ke=>p($).isActive=ke),name:"isActive",class:"w-full"},{default:fe(()=>[X(qn,{value:!1,label:p(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),X(qn,{value:!0,label:p(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),X(Pn,{span:9,label:p(e)("visibility"),path:"isVisible"},{default:fe(()=>[X(Ye,{value:p($).isVisible,"onUpdate:value":w[13]||(w[13]=ke=>p($).isVisible=ke),name:"isVisible",class:"w-full"},{default:fe(()=>[X(qn,{value:!1,label:p(e)("hidden"),class:"w-[50%]"},null,8,["label"]),X(qn,{value:!0,label:p(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),X(yt,{class:"!my-2"}),X(Qn,{"x-gap":"12",span:24},{default:fe(()=>[X(Pn,{span:10,label:p(e)("icon"),path:"icon"},{default:fe(()=>[X(ys,{modelValue:p($).icon,"onUpdate:modelValue":w[14]||(w[14]=ke=>p($).icon=ke),placeholder:p(e)("icon"),"icons-list-placeholder":p(e)("enterIconNameInSearchBar"),"search-placeholder":p(e)("search"),"empty-text":p(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),X(Pn,{span:4,label:p(e)("color"),path:"color"},{default:fe(()=>[Tn("div",kp,[p($).color?(Yt(),Zn(Wl,{key:0},[X(p(Le),{text:"",type:"error",style:{"font-size":"21px"},onClick:w[15]||(w[15]=ke=>p($).color="")},{default:fe(()=>[X(p(O),null,{default:fe(()=>[X(v,{icon:"carbon:trash-can"})]),_:1})]),_:1}),X(yt,{vertical:""})],64)):La("",!0),X(Zs,{"pure-color":p($).color,"onUpdate:pureColor":w[16]||(w[16]=ke=>p($).color=ke),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:p(a)?"white":"black",lang:p(s)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),X(Pn,{span:10,label:p(e)("group"),path:"menuItemGroupId"},{default:fe(()=>[X(Eo,{value:p($).menuItemGroupId,"onUpdate:value":w[17]||(w[17]=ke=>p($).menuItemGroupId=ke),options:p(se),placeholder:p(e)("group"),"render-label":Z,loading:p(L),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),X(Pn,{span:24,label:p(e)("targetType"),path:"targetType"},{default:fe(()=>[X(Ye,{value:p($).targetType,"onUpdate:value":w[18]||(w[18]=ke=>p($).targetType=ke),class:"w-full",size:"small"},{default:fe(()=>[X(qn,{value:p(vl).PAGE_LINK,class:"w-[33.33%]"},{default:fe(()=>[Xn(tn(p(e)("pageLink")),1)]),_:1},8,["value"]),X(qn,{value:p(vl).CONTENT_LINK,class:"w-[33.33%]"},{default:fe(()=>[Xn(tn(p(e)("contentLink")),1)]),_:1},8,["value"]),X(qn,{value:p(vl).EXTERNAL_LINK,class:"w-[33.33%]"},{default:fe(()=>[Xn(tn(p(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),X(Kt,{appear:"",name:"slide-fade"},{default:fe(()=>[p($).targetType===p(vl).PAGE_LINK?(Yt(),Zn("section",$p,[X(Qn,{"x-gap":"12",span:24},{default:fe(()=>[X(Pn,{span:12,label:p(e)("page"),path:"pageId"},{default:fe(()=>[X(Eo,{value:p($).pageId,"onUpdate:value":w[19]||(w[19]=ke=>p($).pageId=ke),options:p(c)||[],placeholder:p(e)("selectPage"),"render-label":Ge,loading:p(I),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),X(Pn,{span:12,label:p(e)("section"),path:"sectionKey"},{default:fe(()=>[X(Eo,{value:p($).sectionKey,"onUpdate:value":w[20]||(w[20]=ke=>p($).sectionKey=ke),options:p(N),placeholder:p(e)("selectSection"),disabled:!p($).pageId,loading:p(y),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),X(zl,{label:p(e)("path"),path:"path"},{default:fe(()=>[X(p(jt),{value:p($).path,"onUpdate:value":w[21]||(w[21]=ke=>p($).path=ke),placeholder:p(e)("path"),"allow-input":Re,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):p($).targetType===p(vl).CONTENT_LINK?(Yt(),Zn("section",xp,[X(Xu,{"content-type":p($).contentType,"onUpdate:contentType":w[22]||(w[22]=ke=>p($).contentType=ke),"content-id":p($).contentId,"onUpdate:contentId":w[23]||(w[23]=ke=>p($).contentId=ke),onUpdate:Ze},null,8,["content-type","content-id"])])):p($).targetType===p(vl).EXTERNAL_LINK?(Yt(),Zn("section",Cp,[X(zl,{label:p(e)("url"),path:"url"},{default:fe(()=>[X(p(jt),{value:p($).url,"onUpdate:value":w[24]||(w[24]=ke=>p($).url=ke),placeholder:p(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):La("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ep=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu-locations"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu-locations",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},zp=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menu-locations"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu-locations/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Tp=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["menu-locations"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu-locations/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},{useModel:Up,defineComponent:Mp}=await me("vue"),{unref:Pt,resolveComponent:Iy,createVNode:qt,withCtx:nn,toDisplayString:Oo,createTextVNode:Us,renderList:Np,Fragment:cr,openBlock:Ro,createElementBlock:dr,createElementVNode:fi,createBlock:_i,normalizeClass:Dp,isRef:Ap}=await me("vue"),{ref:Ms}=await me("vue"),Pp={class:"flex items-center justify-between"},Bp={class:"flex flex-col"},Lp={class:"text-sm font-bold"},Fp=Mp({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(m){const{t:e}=Ne(),{pickByTheme:s,tr:n,formatKey:i}=ut(),t=Up(m,"show"),{data:a,isPending:c}=vc(),{mutate:I,isPending:_e}=Ep(),{mutate:se,isPending:L}=zp(),{mutate:be,isPending:J}=Tp(),T=An(),r=Ms(!1),U=Ms(null),pe=Ms(null),ne=Ms({name:"",description:""}),D={name:[{required:!0,message:e("fillRequired")}]},j=z=>{U.value=de.cloneDeep(z),ne.value=de.cloneDeep(z||{name:"",description:""}),r.value=!0},te=async()=>(pe.value?.validate(async z=>{if(!z){const q={name:ne.value.name,description:ne.value.description};U.value?se({id:U.value.id,...q},{onSuccess:()=>{r.value=!1}}):I(q,{onSuccess:()=>{r.value=!1}})}}),!1),M=async z=>{T.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{z.id&&be({id:z.id})}})};return(z,q)=>{const H=ce,A=O,K=Le,d=yn,V=Vo,f=gn,k=ya,x=Sl,g=Ua,C=Wn,le=jt,ge=ul,W=Cl,b=dl;return Ro(),dr(cr,null,[qt(C,{show:t.value,"onUpdate:show":q[2]||(q[2]=h=>t.value=h),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Pt(e)("menuLocations")},{"header-extra":nn(()=>[qt(d,{align:"center"},{default:nn(()=>[qt(K,{secondary:"",size:"small",type:"primary",disabled:Pt(c),onClick:q[0]||(q[0]=h=>j(null))},{default:nn(()=>[qt(A,{class:"mr-1"},{default:nn(()=>[qt(H,{icon:"carbon:add-alt"})]),_:1}),Us(" "+Oo(Pt(e)("add")),1)]),_:1},8,["disabled"]),qt(K,{secondary:"",size:"small",type:"error",disabled:Pt(c),onClick:q[1]||(q[1]=h=>t.value=!1)},{default:nn(()=>[qt(A,{class:"mr-1"},{default:nn(()=>[qt(H,{icon:"carbon:close"})]),_:1}),Us(" "+Oo(Pt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:nn(()=>[qt(g,{show:Pt(c)},{default:nn(()=>[Pt(a)?.length?(Ro(),_i(k,{key:0,style:{"max-height":"400px"}},{default:nn(()=>[(Ro(!0),dr(cr,null,Np(Pt(a),h=>(Ro(),_i(f,{key:h.id,embedded:"",size:"small",class:"mb-2"},{default:nn(()=>[fi("div",Pp,[fi("div",Bp,[fi("span",Lp,Oo(h.name),1),qt(V,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:nn(()=>[Us(Oo(Pt(n)(h.description)),1)]),_:2},1024)]),qt(d,null,{default:nn(()=>[qt(K,{size:"small",type:"warning",secondary:"",onClick:xe=>j(h)},{default:nn(()=>[qt(A,null,{default:nn(()=>[qt(H,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),qt(K,{size:"small",type:"error",secondary:"",onClick:xe=>M(h)},{default:nn(()=>[qt(A,null,{default:nn(()=>[qt(H,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Ro(),_i(f,{key:1,size:"large",class:Dp(`mb-2 !border-dashed !border-2 ${Pt(s)("!border-zinc-300","!border-zinc-600")}`)},{default:nn(()=>[qt(x,{description:Pt(e)("noMenuLocationAdded")},{icon:nn(()=>[qt(A,null,{default:nn(()=>[qt(H,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),qt(C,{show:Pt(r),"onUpdate:show":q[5]||(q[5]=h=>Ap(r)?r.value=h:null),loading:Pt(_e)||Pt(L)||Pt(J),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Pt(U)?Pt(e)("editMenuLocation"):Pt(e)("addMenuLocation"),"positive-text":Pt(e)("validate"),"negative-text":Pt(e)("cancel"),onPositiveClick:te,onNegativeClick:q[6]||(q[6]=h=>r.value=!1)},{default:nn(()=>[qt(b,{ref_key:"formRef",ref:pe,model:Pt(ne),rules:D,"show-require-mark":!1,size:"medium",class:"my-5"},{default:nn(()=>[qt(ge,{label:Pt(e)("key"),path:"name"},{default:nn(()=>[qt(le,{value:Pt(ne).name,placeholder:Pt(e)("key"),class:"w-full","onUpdate:value":q[3]||(q[3]=h=>Pt(ne).name=Pt(i)(h))},null,8,["value","placeholder"])]),_:1},8,["label"]),qt(ge,{"show-label":!1,path:"description"},{default:nn(()=>[qt(W,{modelValue:Pt(ne).description,"onUpdate:modelValue":q[4]||(q[4]=h=>Pt(ne).description=h),placeholder:Pt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:nn(()=>[Us(Oo(Pt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Op=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menus"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menus",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},Rp=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["menus"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menus/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},qp=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["menus"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menus/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},{defineComponent:jp}=await me("vue"),{unref:Ke,resolveComponent:Vy,createVNode:ht,withCtx:kt,toDisplayString:Ql,createTextVNode:wa,openBlock:Pl,createBlock:fo,createCommentVNode:Ns,renderList:Kp,Fragment:vi,createElementBlock:qo,withModifiers:gi,normalizeClass:yi,createElementVNode:jo,isRef:Ds}=await me("vue"),Gp={key:2},Yp={class:"flex items-center"},Hp={class:"flex flex-col"},Wp={key:0,class:"text-xs font-normal"},Qp={class:"mt-4"},{ref:ua,watch:Jp}=await me("vue"),{defineStore:Xp}=await me("pinia"),Zp=jp({__name:"index",setup(m){const{t:e}=Ne(),{tr:s,pickByTheme:n,isInDevMode:i,formatKey:t}=ut(),{data:a}=vc(),{data:c}=Kc(),{mutate:I,isPending:_e}=qp(),{mutate:se,isPending:L}=Op(),{mutate:be,isPending:J}=Rp(),T=An(),r=ua(24),U=ua(1),pe=f=>{r.value=f},ne={name:"",title:"",description:"",menuLocationId:void 0},D=ua(!1),j=ua(!1),te=ua(!1),M=ua(null),z=ua(ne),q={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},H=ua(null),A=f=>{H.value=de.cloneDeep(f),z.value=de.cloneDeep(f||ne),D.value=!0},K=async()=>(M.value?.validate(async f=>{if(!f){const k={name:z.value.name,title:z.value.title,description:z.value.description,menuLocationId:z.value.menuLocationId};H.value?be({id:H.value.id,...k},{onSuccess:()=>{}}):se(k,{onSuccess:()=>{}}),D.value=!1}}),!1),d=async f=>{T.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{f.id&&I({id:f.id})}})},V=Xp("menus-management",()=>({itemsMenu:ua(null)}))();return Jp(()=>z.value.title,f=>{H.value||z.value.name.length<=21&&(z.value.name=zc(s(f),{trim:!0,lower:!0,strict:!0}))}),(f,k)=>{const x=ce,g=O,C=Le,le=yn,ge=xl,W=Vl,b=gn,h=so,xe=Sl,$=Il,S=Cl,l=ul,o=jt,y=ba,N=Ml,F=ll,G=dl,E=Wn;return Pl(),qo(vi,null,[Ke(V).itemsMenu?Ns("",!0):(Pl(),fo(ge,{key:0,to:"#alt-action"},{default:kt(()=>[ht(le,{align:"center"},{default:kt(()=>[Ke(i)?(Pl(),fo(C,{key:0,type:"success",secondary:"",onClick:k[0]||(k[0]=P=>j.value=!0)},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:template"})]),_:1})]),default:kt(()=>[wa(" "+Ql(Ke(e)("locations")),1)]),_:1})):Ns("",!0),ht(C,{type:"warning",secondary:"",onClick:k[1]||(k[1]=P=>te.value=!0)},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:tag-group"})]),_:1})]),default:kt(()=>[wa(" "+Ql(Ke(e)("groups")),1)]),_:1}),Ke(c)&&Ke(c).length?(Pl(),fo(C,{key:1,type:"primary",secondary:"",onClick:k[2]||(k[2]=P=>A(null))},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[wa(" "+Ql(Ke(e)("addMenu")),1)]),_:1})):Ns("",!0)]),_:1})]),_:1})),Ke(V).itemsMenu?(Pl(),fo(Sp,{key:1,modelValue:Ke(V).itemsMenu,"onUpdate:modelValue":k[3]||(k[3]=P=>Ke(V).itemsMenu=P)},null,8,["modelValue"])):(Pl(),qo("section",Gp,[ht($,{appear:"",name:"slide-fade"},{default:kt(()=>[jo("section",null,[Ke(c)&&Ke(c).length?(Pl(),qo(vi,{key:0},[(Pl(!0),qo(vi,null,Kp(Ke(c).slice((Ke(U)-1)*Ke(r),Ke(U)*Ke(r)),P=>(Pl(),fo(b,{key:P.id,embedded:"",size:"small",class:"mb-2"},{header:kt(()=>[jo("div",Yp,[ht(le,null,{default:kt(()=>[ht(C,{size:"small",type:"primary",secondary:"",onClick:gi(we=>A(P),["stop"])},{default:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ht(C,{size:"small",type:"error",secondary:"",onClick:gi(we=>d(P),["stop"])},{default:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),ht(W,{vertical:"",class:yi(Ke(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),jo("div",Hp,[jo("span",{class:yi(`${P.location?"text-sm":"text-base"} font-bold`)},Ql(Ke(s)(P.title)),3),P.location?(Pl(),qo("small",Wp,Ql(P.location?.name),1)):Ns("",!0)])])]),"header-extra":kt(()=>[ht(C,{size:"small",type:"primary",secondary:"",onClick:gi(we=>Ke(V).itemsMenu=P,["stop"])},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:arrow-right"})]),_:1})]),default:kt(()=>[wa(" "+Ql(Ke(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),ht(h,{page:Ke(U),"onUpdate:page":k[4]||(k[4]=P=>Ds(U)?U.value=P:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Ke(r),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(Ke(c).length/Ke(r)),"onUpdate:pageSize":pe},{prefix:kt(()=>[wa(Ql(`${Ke(c).length} ${Ke(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Pl(),fo(b,{key:1,size:"large",class:yi(`mb-2 !border-dashed !border-2 ${Ke(n)("!border-zinc-300","!border-zinc-600")}`)},{default:kt(()=>[ht(xe,{description:Ke(e)("noMenuAvailable")},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:model-alt"})]),_:1})]),extra:kt(()=>[jo("div",Qp,[ht(C,{size:"small",onClick:k[5]||(k[5]=P=>A(null))},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[wa(" "+Ql(Ke(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),ht(E,{show:Ke(D),"onUpdate:show":k[10]||(k[10]=P=>Ds(D)?D.value=P:null),loading:Ke(L)||Ke(J)||Ke(_e),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ke(H)?Ke(e)("editMenu"):Ke(e)("addMenu"),"positive-text":Ke(e)("validate"),"negative-text":Ke(e)("cancel"),onPositiveClick:K,onNegativeClick:k[11]||(k[11]=P=>D.value=!1)},{default:kt(()=>[ht(G,{ref_key:"formRef",ref:M,model:Ke(z),rules:q,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kt(()=>[ht(l,{"show-label":!1,path:"title"},{default:kt(()=>[ht(S,{modelValue:Ke(z).title,"onUpdate:modelValue":k[6]||(k[6]=P=>Ke(z).title=P),placeholder:Ke(e)("title"),class:"w-full",sync:""},{label:kt(()=>[wa(Ql(Ke(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ht(l,{"show-label":!1,path:"description"},{default:kt(()=>[ht(S,{modelValue:Ke(z).description,"onUpdate:modelValue":k[7]||(k[7]=P=>Ke(z).description=P),placeholder:Ke(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kt(()=>[wa(Ql(Ke(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ht(F,{"x-gap":"12",span:24},{default:kt(()=>[ht(y,{span:12,label:Ke(e)("key"),path:"name"},{default:kt(()=>[ht(o,{value:Ke(z).name,placeholder:Ke(e)("key"),class:"w-full","onUpdate:value":k[8]||(k[8]=P=>Ke(z).name=Ke(t)(P))},null,8,["value","placeholder"])]),_:1},8,["label"]),ht(y,{span:12,label:Ke(e)("location"),path:"menuLocationId"},{default:kt(()=>[ht(N,{value:Ke(z).menuLocationId,"onUpdate:value":k[9]||(k[9]=P=>Ke(z).menuLocationId=P),options:Ke(a),placeholder:Ke(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ht(Fp,{show:Ke(j),"onUpdate:show":k[12]||(k[12]=P=>Ds(j)?j.value=P:null)},null,8,["show"]),ht(Ku,{show:Ke(te),"onUpdate:show":k[13]||(k[13]=P=>Ds(te)?te.value=P:null)},null,8,["show"])]))],64)}}}),em="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var za=(m=>(m.VERTICAL="vertical",m.HORIZONTAL="horizontal",m))(za||{}),$l=(m=>(m.SELF_HOSTED="self-hosted",m.YOUTUBE="youtube",m))($l||{});const tm=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["video-categories"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/video-categories",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},nm=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["video-categories"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/video-categories/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},lm=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["video-categories"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/video-categories/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},am=()=>{const{request:m}=et(),e=ot();return Ta(async s=>{const n=await m({method:"put",url:"/video-categories/position",data:s});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:om}=await me("vue"),{unref:R,isRef:As,createVNode:he,resolveComponent:ur,withCtx:De,toDisplayString:Un,createTextVNode:Tl,openBlock:Bn,createBlock:Jl,createCommentVNode:Oa,renderList:pr,Fragment:Ra,createElementBlock:ka,normalizeClass:qa,withModifiers:Ko,createElementVNode:yl,normalizeStyle:sm}=await me("vue"),im={class:"flex items-center"},rm={class:"flex flex-col"},cm={class:"text-sm font-bold"},dm={class:"text-xs font-normal"},um={class:"text-xs my-1"},pm={class:"flex items-center"},mm={class:"flex flex-col"},fm={class:"text-sm font-bold"},_m={class:"text-xs font-normal"},vm={key:0,class:"mt-4"},gm={class:"flex items-center"},{storeToRefs:ym}=await me("pinia"),{inject:bm,ref:Xl,computed:mr,watch:hm}=await me("vue"),wm="categories",km=om({__name:"Categories",setup(m){const e=ot(),s=Xe(),n=An(),{tr:i,fileUrl:t,pickByTheme:a,appPrimaryColor:c}=ut(),{t:I,locale:_e}=Ne(),{data:se,isPending:L,refetch:be}=Gc(),{mutate:J,isPending:T}=lm(),{mutate:r,isPending:U}=nm(),{mutate:pe,isPending:ne}=tm(),{mutate:D}=am(),{isLightTheme:j}=ym(Io()),te=bm("appConfig"),M=Xl(""),z=Xl(),q=mr(()=>{if(!M.value)return H.value;const S=H.value.filter(l=>l.name.toLowerCase().includes(M.value.toLowerCase())||l.description?.toLowerCase().includes(M.value.toLowerCase())||l.children?.some(o=>o.name.toLowerCase().includes(M.value.toLowerCase())||o.description?.toLowerCase().includes(M.value.toLowerCase())));return z.value&&z.value.focus(),S}),H=mr(()=>{const S=se.value?.filter(l=>!l.parentId)||[];for(let l=0;l<S.length;l++)S[l].children=se.value?.filter(o=>o.parentId===S[l].id);return S});hm(()=>L.value||ne.value||U.value||T.value,S=>{S?e.start():e.finish()});const A=Xl(24),K=Xl(1),d=S=>{A.value=S},V=Xl(null),f=Xl(!1),k=Xl(null),x=Xl(null),g=Xl({name:"",description:"",isActive:!0,position:0,image:"",color:""}),C={name:[{required:!0,message:I("fillRequired")}]},le=(S,l=null)=>{k.value=de.cloneDeep(S),S?g.value=de.cloneDeep(S):g.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},V.value=l,f.value=!0},ge=async S=>{n.warning({title:I("confirm"),content:S.parentId?I("confirmDeleteSubCategory"):I("confirmDeleteCategory"),positiveText:I("yes"),negativeText:I("no"),onPositiveClick:async()=>{S.id&&J({id:S.id})}})},W=async()=>(x.value?.validate(async S=>{if(!S){const l={name:g.value.name,description:g.value.description,isActive:g.value.isActive,position:g.value.position,image:g.value.image,color:g.value.color,parentId:V.value};k.value?k.value.name!==g.value.name&&(se.value||[]).findIndex(o=>o.name==g.value.name)>-1?s.error(I("sameCategoryNameMessage")):r({id:k.value.id,...l}):(se.value||[]).findIndex(o=>o.name==g.value.name)>-1?s.error(I("sameCategoryNameMessage")):pe(l),f.value=!1}}),!1),b=async(S,l)=>{D({items:l},{onSuccess(){be()}})},h=Xl(!1),xe=async S=>{g.value.image=S,h.value=!1},$=()=>{g.value.image=""};return(S,l)=>{const o=ce,y=Js,N=xl,F=Vl,G=yn,E=gn,P=ur("Draggable"),we=ql,Ge=Rl,Z=so,Re=Sl,Ce=Ua,Ze=Il,B=ms,w=Cl,v=ul,Q=Gi,mt=ba,oe=ur("color-picker"),_t=ll,ft=Yi,yt=kc,Qe=dl,St=Wn;return Bn(),ka(Ra,null,[he(N,{to:"#search-category-action"},{default:De(()=>[he(y,{class:"!w-[250px]"},{default:De(()=>[he(R(jt),{ref_key:"searchInputRef",ref:z,value:R(M),"onUpdate:value":l[0]||(l[0]=ve=>As(M)?M.value=ve:null),clearable:!0,placeholder:R(I)("searchCategory")},null,8,["value","placeholder"]),he(R(Le),{type:"primary",secondary:""},{icon:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),he(N,{to:"#add-category-action"},{default:De(()=>[R(q).length?(Bn(),Jl(R(Le),{key:0,type:"primary",secondary:"",onClick:l[1]||(l[1]=ve=>le(null))},{icon:De(()=>[he(R(O),{size:"18"},{default:De(()=>[he(o,{icon:"carbon:add-alt"})]),_:1})]),default:De(()=>[Tl(" "+Un(R(I)("addCategory")),1)]),_:1})):Oa("",!0)]),_:1}),he(Ze,{name:"slide-fade",appear:""},{default:De(()=>[yl("section",null,[he(Ce,{show:R(L)},{default:De(()=>[R(q)&&R(q).length?(Bn(),ka(Ra,{key:0},[he(P,{list:R(H),onChange:l[2]||(l[2]=ve=>b(ve,R(H)))},{default:De(()=>[(Bn(!0),ka(Ra,null,pr(R(q).slice((R(K)-1)*R(A),R(K)*R(A)),ve=>(Bn(),Jl(E,{key:ve.id,embedded:"",size:"small",class:"mb-1"},{default:De(()=>[he(Ge,{"default-expanded-names":ve.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":De(({collapsed:Et})=>[he(G,{align:"center"},{default:De(()=>[he(R(cl),{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:De(()=>[Tl(Un(ve.isActive?R(I)("visible"):R(I)("hidden")),1)]),_:2},1032,["type"]),he(F,{vertical:"",class:qa(["!mx-0",R(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),he(R(Le),{size:"small",type:"primary",secondary:"",onClick:Ko(fn=>le(ve),["stop"])},{default:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),he(R(Le),{size:"small",type:"error",secondary:"",onClick:Ko(fn=>ge(ve),["stop"])},{default:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),he(R(Le),{size:"small",type:"info",secondary:"",onClick:Ko(fn=>le(null,ve.id),["stop"])},{icon:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:category"})]),_:1})]),default:De(()=>[Tl(" "+Un(R(I)("subCategory"))+" ",1),he(R(cl),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:De(()=>[Tl(Un(ve.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),l[16]||(l[16]=yl("div",{class:"w-6"},null,-1)),he(R(O),null,{default:De(()=>[Et?(Bn(),Jl(o,{key:0,icon:"fa-solid:chevron-left"})):(Bn(),Jl(o,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:De(()=>[...l[17]||(l[17]=[yl("span",null,null,-1)])]),default:De(()=>[he(we,{name:"1"},{header:De(()=>[yl("div",im,[he(R(O),{size:"21",class:"cursor-move mr-4"},{default:De(()=>[he(o,{icon:"fa-solid:grip-lines"})]),_:1}),he(F,{vertical:"",class:qa(R(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),yl("div",rm,[yl("span",cm,Un(R(i)(ve.name))+"Â ("+Un(ve.itemsCount)+"Â "+Un(R(I)("video_s"))+") ",1),yl("small",dm,Un(ve.slug),1)])])]),default:De(()=>[ve.description?(Bn(),ka(Ra,{key:0},[he(F,{class:qa([R(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),yl("div",um,Un(R(i)(ve.description)),1)],64)):Oa("",!0),ve.children?.length?(Bn(),ka(Ra,{key:1},[he(F,{class:qa([R(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),he(P,{list:ve.children,onChange:Et=>b(Et,ve.children||[])},{default:De(()=>[(Bn(!0),ka(Ra,null,pr(ve.children,Et=>(Bn(),Jl(E,{key:Et.id,size:"small",class:"mb-1"},{header:De(()=>[yl("div",pm,[he(R(O),{size:"21",class:"cursor-move mr-4"},{default:De(()=>[he(o,{icon:"fa-solid:grip-lines"})]),_:1}),he(F,{vertical:"",class:qa(R(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),yl("div",mm,[yl("span",fm,Un(R(i)(Et.name)),1),yl("small",_m,Un(Et.slug),1)])])]),"header-extra":De(()=>[he(G,{align:"center"},{default:De(()=>[he(R(cl),{size:"small",bordered:!1,type:Et.isActive?"success":"error"},{default:De(()=>[Tl(Un(Et.isActive?R(I)("visible"):R(I)("hidden")),1)]),_:2},1032,["type"]),he(F,{vertical:"",class:qa(["!mx-0",R(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),he(R(Le),{size:"small",type:"primary",secondary:"",onClick:Ko(fn=>le(Et,ve.id),["stop"])},{default:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),he(R(Le),{size:"small",type:"error",secondary:"",onClick:Ko(fn=>ge(Et),["stop"])},{default:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Oa("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),he(Z,{page:R(K),"onUpdate:page":l[3]||(l[3]=ve=>As(K)?K.value=ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":R(A),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(R(H).length/R(A)),"onUpdate:pageSize":d},{prefix:De(()=>[Tl(Un(`${R(H).length} ${R(I)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Bn(),Jl(E,{key:1,size:"large",class:qa(`mb-2 !border-dashed !border-2 ${R(a)("!border-zinc-300","!border-zinc-600")}`)},{default:De(()=>[he(Re,{description:R(I)("noCategoryAvailable")},{icon:De(()=>[he(R(O),null,{default:De(()=>[R(M)?(Bn(),Jl(o,{key:0,icon:"carbon:search"})):(Bn(),Jl(o,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:De(()=>[R(M)?Oa("",!0):(Bn(),ka("div",vm,[he(R(Le),{size:"small",secondary:"",onClick:l[4]||(l[4]=ve=>le(null))},{icon:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:add-alt"})]),_:1})]),default:De(()=>[Tl(" "+Un(R(I)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),he(B,{show:R(h),"onUpdate:show":l[5]||(l[5]=ve=>As(h)?h.value=ve:null),title:R(I)("selectImage"),"upload-config":{folder:wm,limit:0,maxSize:0,baseUrl:R(te)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:xe},null,8,["show","title","upload-config"]),he(St,{show:R(f),"onUpdate:show":l[14]||(l[14]=ve=>As(f)?f.value=ve:null),loading:R(ne)||R(U)||R(T),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:R(k)?R(V)?R(I)("editSubCategory"):R(I)("editCategory"):R(V)?R(I)("addSubCategory"):R(I)("addCategory"),"positive-text":R(I)("validate"),"negative-text":R(I)("cancel"),onPositiveClick:W,onNegativeClick:l[15]||(l[15]=ve=>f.value=!1)},{default:De(()=>[he(Qe,{ref_key:"formRef",ref:x,class:"mt-5",model:R(g),rules:C,"show-require-mark":!1,size:"medium"},{default:De(()=>[he(v,{"show-label":!1,path:"name"},{default:De(()=>[he(w,{modelValue:R(g).name,"onUpdate:modelValue":l[6]||(l[6]=ve=>R(g).name=ve),placeholder:R(I)("name"),class:"w-full",sync:""},{label:De(()=>[Tl(Un(R(I)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),he(v,{"show-label":!1,path:"description"},{default:De(()=>[he(w,{modelValue:R(g).description,"onUpdate:modelValue":l[7]||(l[7]=ve=>R(g).description=ve),placeholder:R(I)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:De(()=>[Tl(Un(R(I)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),he(_t,{"x-gap":"12",span:24},{default:De(()=>[he(mt,{span:12,label:R(I)("position"),path:"position"},{default:De(()=>[he(Q,{value:R(g).position,"onUpdate:value":l[8]||(l[8]=ve=>R(g).position=ve),placeholder:R(I)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),he(mt,{span:12,label:R(I)("color"),path:"color"},{default:De(()=>[yl("div",gm,[R(g).color?(Bn(),ka(Ra,{key:0},[he(R(Le),{text:"",type:"error",style:{"font-size":"21px"},onClick:l[9]||(l[9]=ve=>R(g).color="")},{default:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:trash-can"})]),_:1})]),_:1}),he(F,{vertical:""})],64)):Oa("",!0),he(oe,{"pure-color":R(g).color,"onUpdate:pureColor":l[10]||(l[10]=ve=>R(g).color=ve),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:R(j)?"white":"black",lang:R(_e)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),he(F,{dashed:"",class:"!my-2"}),he(_t,{"x-gap":"12",span:24},{default:De(()=>[he(mt,{span:12,label:R(I)("preview"),path:"image"},{default:De(()=>[he(G,{align:"center",justify:"center",style:{height:"100%"}},{default:De(()=>[he(ft,{class:"cursor-pointer","object-fit":"cover",style:sm("border: 1px dashed "+R(a)(R(c),"white")),size:150,src:R(t)(R(g).image||""),onClick:l[11]||(l[11]=ve=>h.value=!0)},{default:De(()=>[R(g).image?Oa("",!0):(Bn(),Jl(R(O),{key:0,size:64},{default:De(()=>[he(o,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),R(g).image?(Bn(),Jl(R(Le),{key:0,quaternary:"",onClick:l[12]||(l[12]=ve=>$())},{icon:De(()=>[he(R(O),null,{default:De(()=>[he(o,{icon:"carbon:trash-can"})]),_:1})]),default:De(()=>[Tl(" "+Un(R(I)("clear")),1)]),_:1})):Oa("",!0)]),_:1})]),_:1},8,["label"]),he(mt,{span:12,label:R(I)("status"),path:"isActive"},{default:De(()=>[he(yt,{value:R(g).isActive,"onUpdate:value":l[13]||(l[13]=ve=>R(g).isActive=ve),size:"small"},{checked:De(()=>[Tl(Un(R(I)("visible")),1)]),unchecked:De(()=>[Tl(Un(R(I)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),$m=()=>{const{request:m}=et(),{t:e}=Ne(),s=ot(),n=Xe();return Ta(async i=>{const t=await m({url:"/video-settings",method:"put",data:i});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:(i,t)=>{n.success(e("success"))},onError:(i,t)=>{n.error(e("unableToUpdateSettings"))}})};class xm{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,s,n=$l.SELF_HOSTED,i=za.HORIZONTAL,t,a,c,I,_e,se,L,be,J,T,r,U){this.id=a,this.foreignId=se,this.publisherId=_e,this.title=e,this.slug=I,this.description=L,this.thumbnail=be,this.thumbnailUrl=J,this.path=s,this.url=c,this.source=n,this.visible=t,this.displayType=i,this.publishedAt=T,this.createdAt=r,this.updatedAt=U}}const Cm=()=>{const{request:m}=et(),{t:e}=Ne(),s=ot(),n=Xe();return Ta(async()=>{const i=await m({url:"/video-items/youtube/channel-videos",method:"put"});if(i.failure&&i.error)throw new Error(i.error);return i.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:()=>n.success(e("success")),onError:()=>n.error(e("unableToUpdateChannelVideos")),retry:1})},Im=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=ot(),t=Xe();return wt({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:a=>"id"in a&&a.id?a.id:`temp-${crypto.randomUUID()}`,mutationFn:async a=>{i.start();try{const c=await s({method:"post",url:"/video-items",data:mn(a,["id"])});if(!c.success)throw new Error(c.error||n("anErrorOccurred"));return c.result.data}finally{i.finish()}},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{switch(a?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:e(a?.response?.data?.data);break;case Ft.REQUEST_PARAMS_MISSING:t.error(n("pleaseProvideApiKeyAndValidVideoUrl"));break;case Ft.REQUEST_DATA_RETRIEVAL_FAILED:t.error(n("videoDataCantBeRetrieve"));break;case Ft.REQUEST_DATA_ALREADY_EXISTS:t.error(n("videoAlreadyExists"));break;default:t.error(n("anErrorOccurred"))}},...m}})},Vm=m=>{const{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{n.start();try{const a=await e({method:"put",url:`/video-items/${t.id}`,data:mn(t,["id"])});if(!a.success)throw new Error(a.error||s("anErrorOccurred"));return a.result.data}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...m}})},Sm=m=>{const{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{n.start();const a=await e({method:"delete",url:`/video-items/force/${t}`});if(n.finish(),!a.success)throw new Error(a.error);return a.result?.data},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...m}})},Em=m=>{const{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:t=>{if(t instanceof xm){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("VideoItem ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:Object.keys(t).filter(a=>t[a])}),mutationFn:async t=>{n.start();const a=Object.keys(t).filter(c=>t[c]);try{for(const c of a)await e({method:"delete",url:`/video-items/force/${c}`});return a}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...m}})},{defineComponent:zm}=await me("vue"),{unref:un,resolveComponent:Sy,createVNode:Ht,withCtx:ln,toDisplayString:ja,createTextVNode:fr,createElementVNode:Ka,normalizeClass:Tm,Fragment:_r,openBlock:vr,createElementBlock:gr,createCommentVNode:Um}=await me("vue"),{ref:yr,computed:br}=await me("vue"),Mm=zm({__name:"Settings",setup(m){const{t:e,locale:s}=Ne(),n=gc({enabled:!1}),{mutate:i,isPending:t}=$m(),{mutate:a,isPending:c}=Cm(),I=yr({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),_e=yr(I.value),se=br(()=>de.isEqual(I.value,_e.value)),L=async()=>{i(I.value,{onSuccess:()=>be()})},be=async()=>{await n.refetch(),n.data.value?.forEach(r=>{I.value[r.key]!=null&&(I.value[r.key]=r.value)}),_e.value=de.cloneDeep(I.value)};be();const J=()=>{a(void 0,{onSuccess:()=>be()})},T=br(()=>!!(t.value||c.value||n.isPending.value));return(r,U)=>{const pe=ce,ne=O,D=Le,j=xl,te=jt,M=yn,z=gn,q=Ol,H=kc,A=ll,K=Il;return vr(),gr(_r,null,[Ht(j,{to:"#save-settings-action"},{default:ln(()=>[Ht(D,{loading:un(T),disabled:un(se),type:"primary",secondary:"",onClick:L},{icon:ln(()=>[Ht(ne,null,{default:ln(()=>[Ht(pe,{icon:"carbon:save"})]),_:1})]),default:ln(()=>[fr(" "+ja(un(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),Ht(K,{name:"slide-fade",appear:""},{default:ln(()=>[Ht(z,{hoverable:"",embedded:""},{header:ln(()=>[fr(ja(un(e)("youtube")),1)]),default:ln(()=>[Ht(A,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ln(()=>[Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(M,{align:"center",justify:"space-between"},{default:ln(()=>[Ka("span",null,ja(un(e)("apiKey")),1),Ht(te,{value:un(I).youtubeApiKey,"onUpdate:value":U[0]||(U[0]=d=>un(I).youtubeApiKey=d),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full py-1.5",size:"small"},{default:ln(()=>[Ht(M,{align:"center",justify:"space-between"},{default:ln(()=>[Ka("span",null,ja(un(e)("autoUpdateChannelVideos")),1),Ht(H,{value:un(I).youtubeChannelVideosAutoUpdate,"onUpdate:value":U[1]||(U[1]=d=>un(I).youtubeChannelVideosAutoUpdate=d),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ln(()=>[...U[3]||(U[3]=[Ka("div",{class:"w-6"},null,-1)])]),unchecked:ln(()=>[...U[4]||(U[4]=[Ka("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),un(I).youtubeChannelVideosAutoUpdate=="1"?(vr(),gr(_r,{key:0},[Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(M,{align:"center",justify:"space-between"},{default:ln(()=>[Ka("span",null,ja(un(e)("channelId")),1),Ht(te,{value:un(I).youtubeChannelId,"onUpdate:value":U[2]||(U[2]=d=>un(I).youtubeChannelId=d),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(M,{align:"center",justify:"space-between"},{default:ln(()=>[Ka("span",null,ja(un(e)("lastUpdate")),1),Ka("b",null,ja(un(I).youtubeLastChannelVideosUpdate?un(Fl)(un(I).youtubeLastChannelVideosUpdate,{locale:un(s),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):un(e)("never")),1),Ht(D,{strong:"",circle:"",secondary:"",type:"primary",title:un(e)("refresh"),disabled:un(T),onClick:J},{icon:ln(()=>[Ht(ne,null,{default:ln(()=>[Ht(pe,{icon:"carbon:restart",class:Tm({"animate-spin":un(T)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):Um("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),Nm=()=>{const{t:m}=Ne(),e=[{label:m("horizontal"),value:za.HORIZONTAL,tagType:"info"},{label:m("vertical"),value:za.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:i=>e.find(t=>t.value===i)?.tagType||"default",getVideoDisplayTypeLabel:i=>e.find(t=>t.value===i)?.label,videoDisplayTypes:e}},{unref:Dm}=await me("vue"),{defineComponent:Am}=await me("vue"),{unref:_,vShow:Go,createElementVNode:el,withDirectives:Yo,toDisplayString:bn,createTextVNode:xn,resolveComponent:Ey,isRef:pa,withCtx:$e,createVNode:re,openBlock:hn,createElementBlock:al,createCommentVNode:Ps,normalizeClass:Pm,renderList:hr,Fragment:_o,withModifiers:wr,createBlock:vo,normalizeStyle:kr}=await me("vue"),Bm={id:"save-settings-action"},Lm={id:"add-category-action"},Fm={class:"flex items-center gap-3"},Om={id:"search-category-action"},Rm={key:0,class:"w-full flex items-center justify-between mt-2"},qm={class:"flex items-center gap-3"},jm={key:0,class:"mt-12"},Km={key:1,class:"mt-12"},Gm={key:2},Ym={key:0},Hm=["onClick"],Wm={class:"absolute top-0 left-0 w-full h-full bg-black opacity-35 flex items-center justify-center"},Qm={class:"absolute bottom-0 right-0 p-3 w-full"},Jm={class:"text-center text-dimgray text-sm"},Xm={key:1,class:"flex items-center justify-center"},Zm={class:"mt-5"},ef={class:"w-full flex flex-gap-8 items-center justify-start"},tf=["src"],nf={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},lf=["src"],{inject:af,ref:wn,computed:Bs,watch:of,h:$r}=await me("vue"),{defineStore:sf}=await me("pinia"),rf=Am({__name:"index",setup(m){const{t:e}=Ne(),{tr:s,fileUrl:n,pickByTheme:i,getVideoThumbnail:t,appPrimaryColor:a}=ut(),{videoDisplayTypes:c}=Nm(),{orderedCategories:I}=Yc(),_e=gc(),{mutate:se,isPending:L}=Sm(),{mutate:be,isPending:J}=Em(),{mutate:T,isPending:r}=Im(),{mutate:U,isPending:pe}=Vm(),ne=Xe(),D=An(),j=af("appConfig"),te=wn(""),M=Sd(te,500),z=wn(null),q=wn([]),H=wn([]),A=sf("videos-management-store",()=>({currentTab:wn("all")}))(),K=wn(0),d=wn(24),V=wn(1),f=Bs(()=>({pageSize:d.value,query:M.value,source:A.currentTab,page:V.value})),k=v=>{V.value=v,C()},x=v=>{d.value=v,C()},{data:g,refetch:C,isPending:le}=Hc(f);of(()=>g.value,v=>{q.value=v?.videoItems||[],K.value=v?.meta?.total||0,V.value=v?.meta?.currentPage||1},{deep:!0,immediate:!0});const ge=wn(!1),W=wn(null),b=wn(null),h=wn({title:"",description:"",visible:!0,source:$l.SELF_HOSTED,displayType:za.HORIZONTAL,thumbnail:"",path:""}),xe=Bs(()=>({title:[{required:h.value.source==$l.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),$=v=>{W.value=de.cloneDeep(v),v?(h.value=de.cloneDeep(v),H.value=v.categories?.map(Q=>Q.id)??[]):(h.value={title:"",description:"",visible:!0,source:A.currentTab=="youtube"?$l.YOUTUBE:$l.SELF_HOSTED,displayType:za.HORIZONTAL,thumbnail:"",path:""},H.value=[]),ge.value=!0},S=async v=>{D.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{se(v)}})},l=async()=>(b.value?.validate(async v=>{if(!v){const Q={title:h.value.title,description:h.value.description,visible:h.value.visible,source:h.value.source,displayType:h.value.displayType,thumbnail:h.value.thumbnail,path:h.value.path,categories:H.value};W.value?(Q.id=W.value.id,U(Q)):T(Q),ge.value=!1}}),!1),o=wn(!1),y=wn(!1),N=wn(""),F=wn(""),G=wn("classic"),E=v=>{N.value=s(v.title)??e("video"),F.value=n(v.path),G.value=v.source==$l.YOUTUBE?"youtube":"classic",y.value=!0},P=wn(!1),we=wn(!1),Ge=wn(En()),Z=wn({}),Re=Bs(()=>{let v=0;for(const Q in Z.value)Z.value[Q]&&v++;return v});function Ce(){Z.value={},Ge.value=En(),we.value=!1,C()}const Ze=async()=>(Re.value?D.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[Re.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{be(Z.value,{onSuccess:()=>{Z.value={}}})}}):ne.warning(e("noItemSelected")),!1),B=v=>[v.parentId?$r(O,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>$r(ce,{icon:"mdi:arrow-right"})}):null,`${s(v.name)}`],w=Bs(()=>!!(r.value||pe.value||L.value||J.value||_e.isPending.value));return(v,Q)=>{const mt=oo,oe=Le,_t=xl,ft=ji,yt=jt,Qe=Js,St=Xs,ve=Vd,Et=cl,fn=yn,ue=Vo,Kt=gn,bt=Il,Nl=Ol,El=ll,zl=so,st=Ua,Pn=Sl,qn=ul,Ye=ba,Qn=Ml,ys=Cl,Zs=Fi,Eo=dl,bs=Wn,ke=ms;return hn(),al(_o,null,[re(_t,{to:"#alt-action"},{default:$e(()=>[Yo(el("div",Bm,null,512),[[Go,_(A).currentTab=="settings"]]),Yo(el("div",Lm,null,512),[[Go,_(A).currentTab=="categories"]]),Yo(el("div",Fm,[re(mt,{checked:_(we),"onUpdate:checked":[Q[0]||(Q[0]=Ie=>pa(we)?we.value=Ie:null),Q[1]||(Q[1]=Ie=>{for(const sa of _(q))sa.id&&(_(Z)[sa.id]=Ie);Ge.value=("uuidv4"in v?v.uuidv4:Dm(En))()})]},{default:$e(()=>[xn(bn(_(e)("selectAll")),1)]),_:1},8,["checked"]),re(oe,{type:"primary",secondary:"",loading:_(r),disabled:_(w),onClick:Q[2]||(Q[2]=Ie=>$(null))},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:video-add"})]),_:1})]),default:$e(()=>[xn(" "+bn(_(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[Go,["all","self-hosted","youtube"].includes(_(A).currentTab)]])]),_:1}),el("section",{class:Pm(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${_(i)("bg-white","bg-zinc-800")}`)},[re(St,{value:_(A).currentTab,"onUpdate:value":[Q[6]||(Q[6]=Ie=>_(A).currentTab=Ie),Q[7]||(Q[7]=()=>_(C)())],type:"card",size:"medium"},{suffix:$e(()=>[Yo(el("div",null,[re(Qe,{class:"!w-[250px]"},{default:$e(()=>[re(yt,{ref_key:"searchInputRef",ref:z,value:_(te),"onUpdate:value":[Q[3]||(Q[3]=Ie=>pa(te)?te.value=Ie:null),Q[4]||(Q[4]=Ie=>{Ie||_(C)()})],clearable:!0,placeholder:_(e)("searchVideo")},null,8,["value","placeholder"]),re(oe,{type:"primary",secondary:"",onClick:Q[5]||(Q[5]=Ie=>_(C)())},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[Go,["all","self-hosted","youtube"].includes(_(A).currentTab)]]),Yo(el("div",Om,null,512),[[Go,_(A).currentTab=="categories"]])]),default:$e(()=>[re(ft,{name:"all"},{default:$e(()=>[re(_(O),{size:"18",class:"mr-1"},{default:$e(()=>[re(_(ce),{icon:"carbon:collapse-all"})]),_:1}),xn(" "+bn(_(e)("all_")),1)]),_:1}),re(ft,{name:_($l).SELF_HOSTED},{default:$e(()=>[re(_(O),{size:"18",class:"mr-1"},{default:$e(()=>[re(_(ce),{icon:"carbon:document-video"})]),_:1}),xn(" "+bn(_(e)("selfHosted")),1)]),_:1},8,["name"]),re(ft,{name:_($l).YOUTUBE},{default:$e(()=>[re(_(O),{size:"18",class:"mr-1"},{default:$e(()=>[re(_(ce),{icon:"carbon:logo-youtube"})]),_:1}),xn(" "+bn(_(e)("youtube")),1)]),_:1},8,["name"]),re(ft,{name:"categories"},{default:$e(()=>[re(_(O),{size:"18",class:"mr-1"},{default:$e(()=>[re(_(ce),{icon:"carbon:categories"})]),_:1}),xn(" "+bn(_(e)("categories")),1)]),_:1}),re(ft,{name:"settings"},{default:$e(()=>[re(_(O),{size:"18",class:"mr-1"},{default:$e(()=>[re(_(ce),{icon:"carbon:settings-adjust"})]),_:1}),xn(" "+bn(_(e)("settings")),1)]),_:1})]),_:1},8,["value"]),_(Re)>0?(hn(),al("section",Rm,[el("span",null,bn(_(e)("nbItemsSelected",[_(Re)])),1),el("section",qm,[re(oe,{type:"error",size:"small",loading:_(J),secondary:"",onClick:Ze},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:trash-can"})]),_:1})]),default:$e(()=>[xn(" "+bn(_(e)("delete")),1)]),_:1},8,["loading"]),re(oe,{type:"warning",size:"small",secondary:"",onClick:Ce},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:close"})]),_:1})]),default:$e(()=>[xn(" "+bn(_(e)("cancelSelection")),1)]),_:1})])])):Ps("",!0)],2),_(A).currentTab=="settings"?(hn(),al("section",jm,[re(Mm)])):_(A).currentTab=="categories"?(hn(),al("section",Km,[re(km)])):(hn(),al("section",Gm,[re(bt,{name:"slide-fade",appear:""},{default:$e(()=>[re(Kt,{embedded:"",class:"py-10 mt-6"},{default:$e(()=>[_(q).length&&!_(_e).isPending.value?(hn(),al("section",Ym,[re(El,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:$e(()=>[(hn(!0),al(_o,null,hr(_(q),(Ie,sa)=>(hn(),vo(Nl,{key:sa},{default:$e(()=>[re(bt,{name:"slide-fade",appear:""},{default:$e(()=>[re(Kt,{bordered:"",hoverable:""},{cover:$e(()=>[el("div",{class:"flex items-center justify-center w-full h-full relative cursor-pointer",onClick:ha=>E(Ie)},[re(ve,{load:()=>_(t)(Ie.path),fallback:Ie.thumbnailUrl??_(em),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),el("div",Wm,[re(_(O),{size:72},{default:$e(()=>[re(_(ce),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),el("div",Qm,[re(fn,null,{default:$e(()=>[(hn(!0),al(_o,null,hr(Ie.categories,ha=>(hn(),vo(Et,{size:"small",bordered:!1,key:ha.id,onClick:wr(()=>{},["stop"])},{default:$e(()=>[xn(bn(_(s)(ha.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,Hm)]),header:$e(()=>[el("div",Jm,[re(ue,{"line-clamp":1,"expand-trigger":"click"},{default:$e(()=>[Ie.id?(hn(),vo(mt,{key:_(Ge)+Ie.id,checked:_(Z)[Ie.id],"onUpdate:checked":ha=>_(Z)[Ie.id]=ha,class:"mr-1",onClick:Q[8]||(Q[8]=wr(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):Ps("",!0),xn(" "+bn(_(s)(Ie.title)),1)]),_:2},1024)])]),action:$e(()=>[re(fn,{justify:"space-between",align:"center"},{default:$e(()=>[re(fn,null,{default:$e(()=>[re(Et,{bordered:!1,type:Ie.visible?"success":"error"},{default:$e(()=>[xn(bn(Ie.visible?_(e)("visible"):_(e)("hidden")),1)]),_:2},1032,["type"]),re(Et,{bordered:!1,type:Ie.displayType==_(za).HORIZONTAL?"info":"warning"},{default:$e(()=>[xn(bn(Ie.displayType==_(za).HORIZONTAL?_(e)("horizontal"):_(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),re(fn,null,{default:$e(()=>[re(oe,{size:"small",type:"primary",secondary:"",title:_(e)("play"),onClick:ha=>E(Ie)},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),Ie.source!=_($l).YOUTUBE?(hn(),vo(oe,{key:0,size:"small",type:"primary",secondary:"",title:_(e)("edit"),loading:_(pe),onClick:ha=>$(Ie)},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","loading","onClick"])):Ps("",!0),re(oe,{size:"small",type:"error",secondary:"",title:_(e)("delete"),loading:_(L),onClick:ha=>S(Ie)},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),re(zl,{page:_(V),"onUpdate:page":[Q[9]||(Q[9]=Ie=>pa(V)?V.value=Ie:null),k],class:"mt-10 justify-center","show-size-picker":"","page-size":_(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(_(K)/_(d)),"onUpdate:pageSize":x},{prefix:$e(()=>[xn(bn(`${_(K)} ${_(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):_(_e).isPending.value?(hn(),al("section",Xm,[re(st,{size:"medium"})])):(hn(),vo(Pn,{key:2,description:_(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),re(bs,{show:_(ge),"onUpdate:show":Q[22]||(Q[22]=Ie=>pa(ge)?ge.value=Ie:null),loading:_(le),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:_(W)?_(e)("editVideo"):_(e)("addVideo"),"positive-text":_(e)("validate"),"negative-text":_(e)("cancel"),onPositiveClick:l,onNegativeClick:Q[23]||(Q[23]=Ie=>ge.value=!1)},{default:$e(()=>[el("div",Zm,[re(Eo,{ref_key:"formRef",ref:b,model:_(h),rules:_(xe),"show-require-mark":!1,size:"medium"},{default:$e(()=>[re(qn,{label:_(e)("source"),path:"source"},{default:$e(()=>[re(mt,{checked:_(h).source,"onUpdate:checked":Q[10]||(Q[10]=Ie=>_(h).source=Ie),"checked-value":_($l).YOUTUBE,"unchecked-value":_($l).SELF_HOSTED},{default:$e(()=>[xn(bn(_(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),_(h).source==_($l).YOUTUBE?(hn(),al(_o,{key:0},[re(El,{"x-gap":"12",span:24},{default:$e(()=>[re(Ye,{span:16,label:_(e)("videoShareLink"),path:"path"},{default:$e(()=>[re(yt,{value:_(h).path,"onUpdate:value":Q[11]||(Q[11]=Ie=>_(h).path=Ie),placeholder:_(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),re(Ye,{span:8,label:_(e)("displayType"),path:"displayType"},{default:$e(()=>[re(Qn,{value:_(h).displayType,"onUpdate:value":Q[12]||(Q[12]=Ie=>_(h).displayType=Ie),placeholder:_(e)("displayType"),options:_(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),re(qn,{label:_(e)("categories"),path:"categories"},{default:$e(()=>[re(Qn,{value:_(H),"onUpdate:value":Q[13]||(Q[13]=Ie=>pa(H)?H.value=Ie:null),"render-label":B,placeholder:_(e)("categories"),options:_(I),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])],64)):(hn(),al(_o,{key:1},[re(qn,{"show-label":!1,path:"title"},{default:$e(()=>[re(ys,{modelValue:_(h).title,"onUpdate:modelValue":Q[14]||(Q[14]=Ie=>_(h).title=Ie),placeholder:_(e)("title"),class:"w-full",sync:""},{label:$e(()=>[xn(bn(_(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),re(qn,{"show-label":!1,path:"description"},{default:$e(()=>[re(ys,{modelValue:_(h).description,"onUpdate:modelValue":Q[15]||(Q[15]=Ie=>_(h).description=Ie),placeholder:_(e)("description"),class:"w-full",type:"textarea",sync:""},{label:$e(()=>[xn(bn(_(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),re(qn,{label:_(e)("categories"),path:"categories"},{default:$e(()=>[re(Qn,{value:_(H),"onUpdate:value":Q[16]||(Q[16]=Ie=>pa(H)?H.value=Ie:null),"render-label":B,placeholder:_(e)("categories"),options:_(I),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),re(El,{"x-gap":"12",span:24},{default:$e(()=>[re(Ye,{span:16,label:_(e)("content"),path:"path"},{default:$e(()=>[re(Qe,null,{default:$e(()=>[re(oe,{type:"primary",secondary:"",onClick:Q[17]||(Q[17]=()=>{o.value=!0})},{default:$e(()=>[xn(bn(_(e)("select")),1)]),_:1}),re(yt,{value:_(h).path?_(pc)(_(h).path):"",placeholder:_(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),_(h).path?(hn(),al(_o,{key:0},[re(oe,{type:"primary",ghost:"",onClick:Q[18]||(Q[18]=()=>{N.value=_(e)("video"),F.value=_(n)(_(h).path),G.value="classic",y.value=!0})},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:play"})]),_:1})]),default:$e(()=>[xn(" "+bn(_(e)("play")),1)]),_:1}),re(oe,{type:"primary",ghost:"",onClick:Q[19]||(Q[19]=()=>{_(h).path=""})},{icon:$e(()=>[re(_(O),null,{default:$e(()=>[re(_(ce),{icon:"carbon:trash-can"})]),_:1})]),default:$e(()=>[xn(" "+bn(_(e)("clear")),1)]),_:1})],64)):Ps("",!0)]),_:1})]),_:1},8,["label"]),re(Ye,{span:8,label:_(e)("displayType"),path:"displayType"},{default:$e(()=>[re(Qn,{value:_(h).displayType,"onUpdate:value":Q[20]||(Q[20]=Ie=>_(h).displayType=Ie),placeholder:_(e)("displayType"),options:_(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),re(qn,{label:_(e)("thumbnail"),path:"thumbnail"},{default:$e(()=>[el("div",ef,[el("div",{class:"cursor-pointer w-full h-[150px]",onClick:Q[21]||(Q[21]=()=>{P.value=!0})},[_(h).thumbnail?(hn(),vo(Zs,{key:0,"object-fit":"cover","preview-disabled":"",class:"py-2 thumbnail-image",style:kr("border: 1px dashed "+_(i)(_(a),"white")),src:_(n)(_(h).thumbnail||"")},null,8,["style","src"])):(hn(),al("div",{key:1,class:"w-full h-full flex items-center justify-center",style:kr("border: 1px dashed "+_(i)(_(a),"white"))},[re(_(O),{size:64},{default:$e(()=>[re(_(ce),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),re(bs,{show:_(y),"onUpdate:show":Q[24]||(Q[24]=Ie=>pa(y)?y.value=Ie:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:_(N)},{default:$e(()=>[_(G)==="youtube"?(hn(),al("iframe",{key:0,width:"100%",height:"380",src:_(F),frameborder:"0",allowfullscreen:""},null,8,tf)):(hn(),al("video",nf,[el("source",{src:_(F)},null,8,lf)]))]),_:1},8,["show","title"]),re(ke,{show:_(o),"onUpdate:show":Q[25]||(Q[25]=Ie=>pa(o)?o.value=Ie:null),title:_(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:_(j)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:Q[26]||(Q[26]=Ie=>{_(h).path=Ie,o.value=!1})},null,8,["show","title","upload-config"]),re(ke,{show:_(P),"onUpdate:show":Q[27]||(Q[27]=Ie=>pa(P)?P.value=Ie:null),title:_(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:_(j)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:Q[28]||(Q[28]=Ie=>{_(h).thumbnail=Ie,P.value=!1})},null,8,["show","title","upload-config"])],64)}}}),cf=So(rf,[["__scopeId","data-v-016aa835"]]),{t:je}=qi.global,xr=[{key:"maxlength",defaultValue:"",placeholder:je("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:je("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],df={text:xr,textarea:xr,number:[{key:"min",defaultValue:"",placeholder:je("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:je("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:je("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:je("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:je("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:je("maxTagCount")},{key:"max",defaultValue:"",placeholder:je("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"format",defaultValue:"",placeholder:je("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"format",defaultValue:"",placeholder:je("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"format",defaultValue:"",placeholder:je("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"format",defaultValue:"",placeholder:je("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:je("maxTagCount")},{key:"max",defaultValue:"",placeholder:je("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:je("maxTagCount")},{key:"max",defaultValue:"",placeholder:je("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:je("maxTagCount")},{key:"max",defaultValue:"",placeholder:je("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"library",defaultValue:"all",placeholder:je("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:je("maxTagCount")},{key:"max",defaultValue:"",placeholder:je("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:je("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:je("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:je("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:je("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:je("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:je("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:je("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:je("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:je("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:je("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:je("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:je("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:je("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:je("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:je("sliderStep"),isNumber:!0}]},{t:Je}=qi.global,bi=[{type:"group",label:Je("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Je("text"),value:"text"},{label:Je("i18nText"),value:"i18n-text"},{label:Je("textarea"),value:"textarea"},{label:Je("i18nTextarea"),value:"i18n-textarea"},{label:Je("editor"),value:"editor"},{label:Je("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Je("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Je("number"),value:"number"},{label:Je("checkbox"),value:"checkbox"},{label:Je("switch"),value:"switch"},{label:Je("slider"),value:"slider"},{label:Je("rangeSlider"),value:"range-slider"}]},{type:"group",label:Je("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Je("singleSelect"),value:"single-select"},{label:Je("multiSelect"),value:"multi-select"}]},{type:"group",label:Je("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Je("date"),value:"date"},{label:Je("daterange"),value:"daterange"},{label:Je("datetime"),value:"datetime"},{label:Je("datetimerange"),value:"datetimerange"},{label:Je("year"),value:"year"},{label:Je("yearrange"),value:"yearrange"},{label:Je("month"),value:"month"},{label:Je("monthrange"),value:"monthrange"},{label:Je("quarter"),value:"quarter"},{label:Je("quarterrange"),value:"quarterrange"},{label:Je("week"),value:"week"}]},{type:"group",label:Je("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Je("image"),value:"image"},{label:Je("gallery"),value:"gallery"},{label:Je("audio"),value:"audio"},{label:Je("video"),value:"video"},{label:Je("document"),value:"document"},{label:Je("file"),value:"file"}]},{type:"group",label:Je("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Je("newsArticle"),value:"news-article"},{label:Je("newsArticles"),value:"news-articles"},{label:Je("newsCategory"),value:"news-category"},{label:Je("newsCategories"),value:"news-categories"},{label:Je("newsTag"),value:"news-tag"},{label:Je("newsTags"),value:"news-tags"}]},{type:"group",label:Je("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Je("icon"),value:"icon"},{label:Je("icons"),value:"icons"},{label:Je("color"),value:"color"},{label:Je("gradient"),value:"gradient"}]},{type:"group",label:Je("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Je("contentItem"),value:"content-model-item"},{label:Je("contentItems"),value:"content-model-items"},{label:Je("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Je("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Je("list"),value:"list"},{label:Je("i18nList"),value:"i18n-list"},{label:Je("albums"),value:"albums"}]}],{useModel:uf,mergeModels:pf,defineComponent:mf}=await me("vue"),{renderList:Ho,Fragment:ma,openBlock:Wt,createElementBlock:ml,unref:Oe,createVNode:lt,withCtx:at,resolveComponent:Cr,createElementVNode:Gn,createBlock:Bl,createCommentVNode:hi,toDisplayString:Yn,createTextVNode:Ga,normalizeClass:ff,isRef:Ir}=await me("vue"),_f={class:"flex items-center"},vf={class:"flex items-center justify-between w-full"},gf={class:"flex items-center justify-between"},yf={class:"text-base font-semibold ml-4"},bf={class:"text-xs text-slate-400"},hf={class:"text-xs text-slate-400"},wf={class:"text-xs text-slate-400"},kf={class:"text-xs text-slate-400"},$f={key:0},xf={class:"text-xs text-slate-400"},Cf={key:1},If={class:"text-xs text-slate-400"},Vf={key:2},Sf={class:"text-xs text-slate-400"},Ef={key:3},zf={class:"text-xs text-slate-400"},Tf={key:0,class:"w-full flex items-center"},Uf={class:"w-full flex items-center"},Mf={class:"w-full"},Nf={class:"text-sm"},{storeToRefs:Df}=await me("pinia"),{ref:go,computed:wi,h:Wo,inject:Qo}=await me("vue"),Af=mf({__name:"Fields",props:pf({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const{t:e,locale:s}=Ne(),{tr:n,formatKey:i,pickByTheme:t}=ut(),{isLightTheme:a}=Df(Io()),{data:c}=ao(),I=m,_e=uf(m,"modelValue"),se=K=>{for(const d of bi){const V=d.children.find(f=>f.value===K);if(V)return V.label}return null},L=go(!1),be=go(null),J=go(null),T=go(null),r=go(),U=(K,d)=>{J.value=T.value=K,be.value=d;for(const V of bi)V.children.find(k=>k.value===K)&&(r.value=V.key);L.value=!0},pe=K=>{ne(K).value=!ne(K).value},ne=K=>wi({get:()=>K.value===J.value,set:d=>{d?J.value=K.value:J.value=null}}),D=wi(()=>!J.value||J.value===T.value),j=()=>{J.value&&be.value!==null&&(_e.value[be.value].type=J.value),L.value=!1},te=K=>Wo("div",{class:"flex items-center"},[Wo(O,{size:21,class:"text-gray-500"},{default:()=>Wo(ce,{icon:K.icon})}),Wo("span",{class:"font-normal ml-2 "},{default:()=>K.label}),Wo("span",{class:"text-gray-500 ml-1"},{default:()=>`(${K.children.length})`})]),M=Qo("renderSelectLabel"),z=Qo("removeCollectionField"),q=Qo("removeSingleton"),H=Qo("onCreateItemOption"),A=Qo("expandedNames",()=>wi(()=>go([]).value));return(K,d)=>{const V=Le,f=cl,k=jt,x=Ol,g=Cl,C=Js,le=ll,ge=Vl,W=oo,b=Ml,h=Cr("color-picker"),xe=Hi,$=Il,S=Gi,l=ql,o=Rl,y=gn,N=Cr("Draggable"),F=yn,G=xc,E=$c,P=sd,we=Xs,Ge=Wn;return Wt(),ml(ma,null,[lt(N,{list:_e.value,class:"w-full"},{default:at(()=>[(Wt(!0),ml(ma,null,Ho(_e.value,(Z,Re)=>(Wt(),Bl(y,{key:`field-${Re}`,size:"small",class:"my-2",hoverable:""},{default:at(()=>[lt(o,{"expanded-names":Oe(A)(I.type=="collection"?`c-${I.parentItemIndex}-f-${Re}`:`s-${Re}`).value,"onUpdate:expandedNames":Ce=>Oe(A)(I.type=="collection"?`c-${I.parentItemIndex}-f-${Re}`:`s-${Re}`).value=Ce,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":at(({collapsed:Ce})=>[Gn("div",_f,[lt(V,{size:"small",type:"error",secondary:"",onClick:()=>{I.type==="collection"?Oe(z)&&Oe(z)(I.collectionKey,Re):Oe(q)&&Oe(q)(Re)},title:Oe(e)("delete")},{default:at(()=>[lt(Oe(O),null,{default:at(()=>[lt(Oe(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),d[3]||(d[3]=Gn("div",{class:"w-4"},null,-1)),lt(Oe(O),null,{default:at(()=>[Ce?(Wt(),Bl(Oe(ce),{key:0,icon:"fa-solid:chevron-left"})):(Wt(),Bl(Oe(ce),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:at(()=>[...d[4]||(d[4]=[Gn("span",null,null,-1)])]),default:at(()=>[lt(l,{name:"1"},{header:at(()=>[Gn("div",vf,[Gn("div",gf,[lt(Oe(O),{size:"18",class:"cursor-move mr-2"},{default:at(()=>[lt(Oe(ce),{icon:"fa-solid:grip-lines"})]),_:1}),lt(f,{size:"small",type:"info"},{default:at(()=>[Ga(Yn(Re+1),1)]),_:2},1024),Gn("span",yf,Yn(Oe(n)(Z.label)),1)])])]),default:at(()=>[lt(le,{span:24,"x-gap":"6"},{default:at(()=>[lt(x,{span:6},{default:at(()=>[Gn("span",bf,Yn(Oe(e)("fieldKey")),1),lt(k,{value:Z.key,placeholder:Oe(e)("fieldKey"),class:"w-full","onUpdate:value":Ce=>Z.key=Oe(i)(Ce)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),lt(x,{span:10},{default:at(()=>[lt(g,{modelValue:Z.label,"onUpdate:modelValue":Ce=>Z.label=Ce,placeholder:Oe(e)("title"),class:"w-full",sync:""},{label:at(()=>[Gn("span",hf,Yn(Oe(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),lt(x,{span:8},{default:at(()=>[Gn("span",wf,Yn(Oe(e)("type")),1),lt(C,null,{default:at(()=>[lt(k,{value:se(Z.type),placeholder:Oe(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ce=>U(Z.type,Re)},null,8,["value","placeholder","onClick"]),lt(V,{secondary:"",onClick:Ce=>U(Z.type,Re)},{icon:at(()=>[lt(Oe(ce),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),lt(ge,{class:"!mt-4 !mb-2"}),lt(le,{span:24,"x-gap":"6"},{default:at(()=>[lt(x,{span:10,class:"flex items-center"},{default:at(()=>[lt(W,{checked:Z.required,"onUpdate:checked":Ce=>Z.required=Ce,size:"medium"},{default:at(()=>[Ga(Yn(Oe(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),lt(x,{span:14},{default:at(()=>[["content-model-item","content-model-items"].includes(Z.type)?(Wt(),ml(ma,{key:0},[Gn("span",kf,Yn(Oe(e)("contentModel")),1),lt(b,{value:Z.defaultValue,"onUpdate:value":Ce=>Z.defaultValue=Ce,options:Oe(c),placeholder:Oe(e)("contentModel"),"render-label":Oe(M),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(Wt(),ml(ma,{key:1},[Z.type==="color"||Z.type==="gradient"?(Wt(),ml("div",$f,[Gn("span",xf,Yn(Oe(e)("defaultValue")),1),lt(h,{"pure-color":Z.defaultValue,"onUpdate:pureColor":Ce=>Z.defaultValue=Ce,"default-pure-color":"#00000000","picker-type":"chrome","use-type":Z.type==="color"?"pure":"gradient",format:Z.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Oe(a)?"white":"black",lang:Oe(s)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):Z.type==="i18n-text"?(Wt(),ml("div",Cf,[lt(g,{modelValue:Z.defaultValue,"onUpdate:modelValue":Ce=>Z.defaultValue=Ce,placeholder:Oe(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:at(()=>[Gn("span",If,Yn(Oe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):Z.type==="i18n-textarea"?(Wt(),ml("div",Vf,[lt(g,{modelValue:Z.defaultValue,"onUpdate:modelValue":Ce=>Z.defaultValue=Ce,placeholder:Oe(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:at(()=>[Gn("span",Sf,Yn(Oe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):Z.type==="i18n-editor"?(Wt(),ml("div",Ef,[lt(g,{modelValue:Z.defaultValue,"onUpdate:modelValue":Ce=>Z.defaultValue=Ce,placeholder:Oe(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:at(()=>[Gn("span",zf,Yn(Oe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(Wt(),Bl(k,{key:4,value:Z.defaultValue,"onUpdate:value":Ce=>Z.defaultValue=Ce,placeholder:Oe(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),Z.type==="multi-select"||Z.type==="single-select"?(Wt(),Bl(ge,{key:0,"title-placement":"left",class:"!my-4"},{default:at(()=>[Ga(Yn(Oe(e)("options")),1)]),_:1})):hi("",!0),lt($,{name:"slide-fade",appear:""},{default:at(()=>[Z.type==="multi-select"||Z.type==="single-select"?(Wt(),ml("div",Tf,[lt(xe,{value:Z.options,"onUpdate:value":Ce=>Z.options=Ce,placeholder:Oe(e)("addOption"),"on-create":Ce=>Oe(H)?Oe(H)(Ce,Re):null,"show-sort-button":"",class:"w-full"},{"create-button-default":at(()=>[Ga(Yn(Oe(e)("addOption")),1)]),default:at(({value:Ce})=>[Gn("div",Uf,[lt(k,{value:Ce.value,placeholder:Oe(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Ze=>Ce.value=Oe(i)(Ze)},null,8,["value","placeholder","onUpdate:value"]),lt(g,{modelValue:Ce.label,"onUpdate:modelValue":Ze=>Ce.label=Ze,placeholder:Oe(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):hi("",!0)]),_:2},1024),(Wt(!0),ml(ma,null,Ho(Oe(df),(Ce,Ze,B)=>(Wt(),ml(ma,{key:B},[Z.type===Ze?(Wt(),Bl(o,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:at(()=>[lt(Oe(O),{size:"18"},{default:at(()=>[lt(Oe(ce),{icon:"carbon:chevron-right"})]),_:1})]),default:at(()=>[lt(l,{name:"1"},{header:at(()=>[lt(ge,{"title-placement":"left",class:"!my-4"},{default:at(()=>[Ga(Yn(Oe(e)("settings")),1)]),_:1})]),default:at(()=>[lt($,{name:"slide-fade",appear:""},{default:at(()=>[Gn("div",Mf,[(Wt(!0),ml(ma,null,Ho(Ce,w=>(Wt(),Bl(le,{key:w.key,span:24,"x-gap":"12",class:"mb-2"},{default:at(()=>[lt(x,{span:10},{default:at(()=>[lt(k,{value:w.key,placeholder:Oe(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),lt(x,{span:14},{default:at(()=>[w.isNumber?(Wt(),Bl(S,{key:0,value:Z.settings[w.key],"onUpdate:value":v=>Z.settings[w.key]=v,"default-value":w.defaultValue?parseInt(w.defaultValue):void 0,placeholder:w.placeholder||Oe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(Wt(),Bl(k,{key:1,value:Z.settings[w.key],"onUpdate:value":v=>Z.settings[w.key]=v,"default-value":w.defaultValue,placeholder:w.placeholder||Oe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):hi("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),lt(Ge,{show:Oe(L),"onUpdate:show":d[2]||(d[2]=Z=>Ir(L)?L.value=Z:null),preset:"card",size:"medium",style:{width:"650px"},title:Oe(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":at(()=>[lt(F,{align:"center"},{default:at(()=>[lt(V,{secondary:"",size:"small",type:"success",disabled:Oe(D),onClick:j},{default:at(()=>[lt(Oe(ce),{icon:"carbon:checkmark",class:"mr-1"}),Ga(" "+Yn(Oe(e)("select")),1)]),_:1},8,["disabled"]),lt(V,{secondary:"",size:"small",type:"error",onClick:d[0]||(d[0]=Z=>L.value=!1)},{default:at(()=>[lt(Oe(ce),{icon:"carbon:close",class:"mr-1"}),Ga(" "+Yn(Oe(e)("close")),1)]),_:1})]),_:1})]),default:at(()=>[lt(we,{animated:"",type:"line",size:"medium",placement:"left",value:Oe(r),"onUpdate:value":d[1]||(d[1]=Z=>Ir(r)?r.value=Z:null),style:{height:"100%"}},{default:at(()=>[(Wt(!0),ml(ma,null,Ho(Oe(bi),(Z,Re)=>(Wt(),Bl(P,{name:Z.key,tab:te(Z),key:Re},{default:at(()=>[lt(E,{hoverable:"",clickable:"",bordered:""},{default:at(()=>[(Wt(!0),ml(ma,null,Ho(Z.children,Ce=>(Wt(),Bl(G,{class:ff(ne(Ce).value?`${Oe(t)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ce.value,onClick:Ze=>pe(Ce)},{suffix:at(()=>[lt(W,{checked:ne(Ce).value,"onUpdate:checked":Ze=>ne(Ce).value=Ze,size:"medium",onClick:Ze=>pe(Ce)},null,8,["checked","onUpdate:checked","onClick"])]),default:at(()=>[Gn("span",Nf,Yn(Ce.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Vr=So(Af,[["__scopeId","data-v-f2dba27a"]]),{useModel:Pf,mergeModels:Bf,defineComponent:Lf}=await me("vue"),{unref:Ae,toDisplayString:Ln,openBlock:Qt,createElementBlock:Jo,createCommentVNode:yo,createTextVNode:Ll,resolveComponent:zy,withCtx:He,createVNode:tt,createElementVNode:Zl,createBlock:Cn,normalizeStyle:ki,isRef:Ff,renderList:Of,Fragment:Sr,normalizeClass:Rf}=await me("vue"),qf={class:"text-base"},jf={key:0},Kf={key:0},Gf={key:0},Yf={class:"flex items-center"},Hf={class:"flex items-center justify-between w-full"},Wf={class:"text-base font-semibold"},Qf={class:"text-xs text-slate-400"},Jf={class:"text-xs text-slate-400"},Xf={class:"text-xs text-slate-400"},{defineAsyncComponent:Zf,ref:ea,computed:Ls,watch:Fs,h:e_,provide:$a}=await me("vue"),{storeToRefs:t_}=await me("pinia"),Nc=Lf({__name:"index",props:Bf({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(m){const e=Zf(()=>Co(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(l=>l.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:s}=Ne(),{tr:n,pickByTheme:i,formatKey:t}=ut(),{isLightTheme:a}=t_(Io());ao();const c=m,I=Pf(m,"show"),_e=ot(),se=Xe(),L=An(),be=ea(!1),J=ea(null),T=ea({}),r=ea({}),U={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},pe=ea(!1),ne=ea(!1),D=ea(!1),j=ea(!1),te=ea({}),M=l=>Ls({get:()=>te.value[l]?["1"]:[],set:o=>{te.value[l]=o.length>0}}),z=Ls({get:()=>de.omit(T.value,["index"]),set:l=>{T.value=T.value.index!==void 0?{index:T.value.index,...l}:{...l}}});Fs(()=>j.value,l=>{Object.entries(T.value).forEach(([o,y],N)=>{o!=="index"&&(te.value[`c-${N}`]=l,y?.items?.forEach((F,G)=>{te.value[`c-${N}-f-${G}`]=l}))})}),Fs(()=>D.value,l=>{Object.entries(T.value).forEach(([o,y],N)=>{o==="index"&&y?.forEach((F,G)=>{te.value[`s-${G}`]=l})})});const q=Ls(()=>de.isEqual(T.value,r.value)),H=()=>{T.value?T.value.index&&Array.isArray(T.value.index)?T.value.index.push(de.cloneDeep(U)):T.value.index=[de.cloneDeep(U)]:T.value={index:[de.cloneDeep(U)]}},A=l=>{T.value&&Array.isArray(T.value.index)&&T.value.index.splice(l,1)},K=()=>{const l=En();T.value?T.value[l]={key:"",title:"",items:[]}:T.value={[l]:{key:"",title:"",items:[]}}},d=l=>{if(T.value){const{[l]:o,...y}=T.value;T.value=y}},V=l=>{T.value&&T.value[l].items.push(de.cloneDeep(U))},f=(l,o)=>{if(T.value){const y=T.value[l];y&&Array.isArray(y.items)&&y.items.splice(o,1)}},k=l=>l.title&&l.key&&l.key!=="index",x=()=>T.value&&typeof T.value=="object"?Object.keys(T.value).filter(l=>l!=="index").length:0,g=Ls(()=>T.value?Object.keys(T.value).filter(l=>l!=="index"):[]),C=l=>g.value.indexOf(l),le=ea(!1),ge=async()=>{const l=de.cloneDeep(T.value),o=de.cloneDeep(T.value);le.value=!1,be.value=!0,_e.start();const y=[];if(de.forIn(l,(N,F)=>{F!=="index"&&y.push(N.key)}),de.forIn(l,(N,F)=>{if(F!=="index"){const G=de.keys(l).filter(E=>E!=="index").indexOf(F);if(N&&N.key){if(N.key==="index")return se.error(s("keyIndexIsReservedInCollections")),le.value=!0,!1;if(y.filter(P=>P==N.key).length>1)return se.error(s("collectionKeyIsNotUnique",[N.key])),le.value=!0,!1;if(Array.isArray(N.items))for(const[P,we]of N.items.entries())if(we.key){if(N.items.filter(Z=>Z.key===we.key).length>1)return se.error(s("fieldKeyOfCollectionIsNotUnique",[we.key,N.key])),le.value=!0,!1}else return se.error(s("fieldKeyOfCollectionIsRequired",[P+1,N.key])),le.value=!0,!1}else return se.error(s("collectionKeyIsRequired",[G+1])),le.value=!0,!1}else if(Array.isArray(N))for(const[G,E]of N.entries())if(E.key){if(N.filter(we=>we.key===E.key).length>1)return se.error(s("singletonKeyIsNotUnique",[E.key])),le.value=!0,!1}else return se.error(s("singletonKeyIsRequired",[G+1])),le.value=!0,!1}),le.value){be.value=!1,_e.finish();return}de.forIn(o,(N,F)=>{F!=="index"&&F!==N.key&&yc(l,F,N.key)}),await c.updateDataStructure(l),be.value=!1,_e.finish()},W=()=>{de.isEqual(T.value,r.value)?I.value=!1:L.warning({title:s("confirm"),content:s("confirmCloseDataStructure"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{I.value=!1}})};Fs(()=>c.rawDataStructure,l=>{T.value=l?de.cloneDeep(l):{},de.forIn(l,(o,y)=>{y!=="index"?(T.value[y].key=y,o?.items?.forEach((N,F)=>{T.value[y].items[F].settings||(T.value[y].items[F].settings={})})):o?.forEach((N,F)=>{T.value[y][F].settings||(T.value[y][F].settings={})})}),r.value=de.cloneDeep(T.value)},{immediate:!0,deep:!0});const b=l=>e_("span",{},{default:()=>n(l.title)}),h=(l,o)=>({value:`option_${o+1}${l+1}`,label:""}),{copy:xe,copied:$,isSupported:S}=Tc();return Fs(()=>$.value,l=>{l&&se.success(s("dataStructureCopied"))}),$a("removeCollectionField",f),$a("onCreateItemOption",h),$a("renderSelectLabel",b),$a("removeSingleton",A),$a("addSingleton",H),$a("expandCollections",j),$a("expandSingletons",D),$a("expandedNames",M),(l,o)=>{const y=Wi,N=ce,F=O,G=Le,E=yn,P=gn,we=ya,Ge=Ol,Z=cl,Re=jt,Ce=Cl,Ze=ll,B=Vl,w=Ki,v=ql,Q=Rl,mt=Oi;return Qt(),Cn(mt,{modelValue:I.value,"onUpdate:modelValue":o[13]||(o[13]=oe=>I.value=oe),"close-on-esc":!1,closable:!1,onOnSizeChange:o[14]||(o[14]=oe=>{J.value=oe})},{header:He(()=>[Zl("div",qf,[tt(y,{depth:"1"},{default:He(()=>[Ll(Ln(Ae(s)("dataStructure"))+" ",1),m.title?(Qt(),Jo("span",jf,"Â -Â "+Ln(m.title),1)):yo("",!0)]),_:1})])]),"header-extra":He(()=>[tt(E,{align:"center"},{default:He(()=>[tt(G,{secondary:"",title:Ae(s)("save"),loading:Ae(be),disabled:Ae(q),onClick:o[0]||(o[0]=oe=>ge())},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:save"})]),_:1})]),default:He(()=>[Ll(" "+Ln(Ae(s)("save")),1)]),_:1},8,["title","loading","disabled"]),tt(G,{secondary:"",type:"error",title:Ae(s)("close"),disabled:Ae(be),onClick:o[1]||(o[1]=oe=>W())},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:close"})]),_:1})]),default:He(()=>[Ll(" "+Ln(Ae(s)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:He(()=>[Zl("section",{style:ki(`min-height: ${Ae(J)?.windowHeight-Ae(J)?.headerHeight-5}px`),class:Rf(`w-full h-full ${Ae(i)("bg-slate-200","bg-zinc-800")}`)},[tt(Ze,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:He(()=>[tt(Ge,{class:"mx-2 mt-2"},{default:He(()=>[tt(P,{embedded:"",bordered:"",segmented:""},{header:He(()=>[Ll(Ln(Ae(s)("singletons"))+"Â  ",1),Ae(T).index?.length?(Qt(),Jo("span",Kf," ("+Ln(Ae(T).index?.length)+") ",1)):yo("",!0)]),"header-extra":He(()=>[tt(E,null,{default:He(()=>[Ae(S)&&Ae(pe)?(Qt(),Cn(G,{key:0,size:"small",type:"warning",secondary:"",title:Ae(s)("copy"),onClick:o[2]||(o[2]=oe=>Ae(xe)(JSON.stringify(Ae(T).index)))},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):yo("",!0),tt(G,{size:"small",type:"warning",secondary:"",onClick:o[3]||(o[3]=()=>{pe.value=!Ae(pe),Ae(pe)&&(ne.value=!1)})},{default:He(()=>[tt(F,null,{default:He(()=>[Ae(pe)?(Qt(),Cn(N,{key:0,icon:"carbon:code"})):(Qt(),Cn(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),tt(G,{size:"small",type:"primary",secondary:"",onClick:o[4]||(o[4]=oe=>D.value=!Ae(D))},{default:He(()=>[tt(F,null,{default:He(()=>[Ae(D)?(Qt(),Cn(N,{key:0,icon:"carbon:collapse-categories"})):(Qt(),Cn(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),tt(G,{size:"small",type:"primary",secondary:"",onClick:o[5]||(o[5]=oe=>H())},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Ll(" "+Ln(Ae(s)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Ae(pe)?(Qt(),Cn(Ae(e),{key:0,height:Ae(J)?.windowHeight-Ae(J)?.headerHeight-100,"dark-theme":!Ae(a),class:"creopse-json-editor",mode:"tree",json:Ae(T).index,"onUpdate:json":o[6]||(o[6]=oe=>Ae(T).index=oe)},null,8,["height","dark-theme","json"])):(Qt(),Cn(we,{key:1,style:ki(`max-height: ${Ae(J)?.windowHeight-Ae(J)?.headerHeight-100}px`)},{default:He(()=>[tt(Vr,{modelValue:Ae(T).index,"onUpdate:modelValue":o[7]||(o[7]=oe=>Ae(T).index=oe),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),tt(Ge,{class:"mx-2 mt-2"},{default:He(()=>[tt(P,{embedded:"",bordered:"",segmented:""},{header:He(()=>[Ll(Ln(Ae(s)("collections"))+"Â  ",1),x()>0?(Qt(),Jo("span",Gf," ("+Ln(x())+") ",1)):yo("",!0)]),"header-extra":He(()=>[tt(E,null,{default:He(()=>[Ae(S)&&Ae(ne)?(Qt(),Cn(G,{key:0,size:"small",type:"warning",secondary:"",title:Ae(s)("copy"),onClick:o[8]||(o[8]=oe=>Ae(xe)(JSON.stringify(Ae(z))))},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):yo("",!0),tt(G,{size:"small",type:"warning",secondary:"",onClick:o[9]||(o[9]=()=>{ne.value=!Ae(ne),Ae(ne)&&(pe.value=!1)})},{default:He(()=>[tt(F,null,{default:He(()=>[Ae(ne)?(Qt(),Cn(N,{key:0,icon:"carbon:code"})):(Qt(),Cn(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),tt(G,{size:"small",type:"primary",secondary:"",onClick:o[10]||(o[10]=oe=>j.value=!Ae(j))},{default:He(()=>[tt(F,null,{default:He(()=>[Ae(j)?(Qt(),Cn(N,{key:0,icon:"carbon:collapse-categories"})):(Qt(),Cn(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),tt(G,{size:"small",type:"primary",secondary:"",onClick:o[11]||(o[11]=oe=>K())},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Ll(" "+Ln(Ae(s)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Ae(ne)?(Qt(),Cn(Ae(e),{key:0,height:Ae(J)?.windowHeight-Ae(J)?.headerHeight-100,"dark-theme":!Ae(a),class:"creopse-json-editor",mode:"tree",json:Ae(z),"onUpdate:json":o[12]||(o[12]=oe=>Ff(z)?z.value=oe:null)},null,8,["height","dark-theme","json"])):(Qt(),Cn(we,{key:1,style:ki(`max-height: ${Ae(J)?.windowHeight-Ae(J)?.headerHeight-100}px`)},{default:He(()=>[(Qt(!0),Jo(Sr,null,Of(Ae(T)||{},(oe,_t,ft)=>(Qt(),Jo(Sr,{key:ft},[_t!="index"?(Qt(),Cn(P,{key:0,size:"small",class:"my-2",embedded:""},{default:He(()=>[tt(Q,{"expanded-names":M(`c-${ft}`).value,"onUpdate:expandedNames":yt=>M(`c-${ft}`).value=yt,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":He(({collapsed:yt})=>[Zl("div",Yf,[tt(G,{size:"small",type:"error",secondary:"",onClick:Qe=>d(_t)},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:trash-can"})]),_:1}),Ll(" "+Ln(Ae(s)("delete")),1)]),_:1},8,["onClick"]),o[15]||(o[15]=Zl("div",{class:"w-4"},null,-1)),tt(F,null,{default:He(()=>[yt?(Qt(),Cn(N,{key:0,icon:"fa-solid:chevron-left"})):(Qt(),Cn(N,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:He(()=>[...o[16]||(o[16]=[Zl("span",null,null,-1)])]),default:He(()=>[tt(v,{name:"1"},{header:He(()=>[Zl("div",Hf,[tt(E,null,{default:He(()=>[tt(Z,{size:"small",type:"success"},{default:He(()=>[Ll(Ln(C(_t)+1),1)]),_:2},1024),Zl("span",Wf,Ln(Ae(n)(oe.title)),1)]),_:2},1024)])]),default:He(()=>[tt(Ze,{span:24,"x-gap":"6"},{default:He(()=>[tt(Ge,{span:6},{default:He(()=>[Zl("span",Qf,Ln(Ae(s)("fieldKey")),1),tt(Re,{value:oe.key,placeholder:Ae(s)("collectionKey"),class:"w-full",size:"small","onUpdate:value":yt=>oe.key=Ae(t)(yt)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),tt(Ge,{span:11},{default:He(()=>[tt(Ce,{modelValue:oe.title,"onUpdate:modelValue":yt=>oe.title=yt,placeholder:Ae(s)("title"),class:"w-full",size:"small",sync:""},{label:He(()=>[Zl("span",Jf,Ln(Ae(s)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),tt(Ge,{span:7},{default:He(()=>[Zl("span",Xf,Ln(Ae(s)("actions")),1),tt(G,{block:"",size:"small",type:"primary",disabled:!k(oe),secondary:"",class:"w-full",onClick:yt=>V(_t)},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Ll(" "+Ln(Ae(s)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),tt(B,{class:"!my-4.75"}),k(oe)?(Qt(),Cn(Vr,{key:0,modelValue:Ae(T)[_t].items,"onUpdate:modelValue":yt=>Ae(T)[_t].items=yt,"parent-item-index":ft,"collection-key":_t,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(Qt(),Cn(w,{key:1,bordered:"",type:"info"},{default:He(()=>[Ll(Ln(Ae(s)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):yo("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:ol}=qi.global,n_=[{label:ol("text"),value:"text"},{label:ol("textarea"),value:"textarea"},{label:ol("number"),value:"number"},{label:ol("switch"),value:"switch"},{label:ol("singleSelect"),value:"single-select"},{label:ol("multiSelect"),value:"multi-select"},{label:ol("slider"),value:"slider"},{label:ol("image"),value:"image"},{label:ol("icon"),value:"icon"},{label:ol("color"),value:"color"},{label:ol("gradient"),value:"gradient"},{label:ol("dimensions"),value:"dimensions"},{label:ol("background"),value:"background"},{label:ol("border"),value:"border"},{label:ol("shadow"),value:"shadow"}],{useModel:l_,mergeModels:a_,defineComponent:o_}=await me("vue"),{unref:Fe,toDisplayString:an,openBlock:on,createElementBlock:bo,createCommentVNode:Xo,createTextVNode:bl,resolveComponent:Er,withCtx:Pe,createVNode:Be,createElementVNode:kn,createBlock:Fn,isRef:s_,renderList:zr,Fragment:Tr,normalizeStyle:Ur,normalizeClass:i_}=await me("vue"),r_={class:"text-base"},c_={key:0},d_={key:0},u_={class:"flex items-center"},p_={class:"flex items-center justify-between w-full"},m_={class:"text-base font-semibold"},f_={class:"text-xs text-slate-400"},__={class:"text-xs text-slate-400"},v_={class:"text-xs text-slate-400"},g_={class:"flex items-center"},y_={class:"flex items-center justify-between w-full"},b_={class:"flex items-center justify-between"},h_={class:"text-base font-semibold ml-4"},w_={class:"text-xs text-slate-400"},k_={class:"text-xs text-slate-400"},$_={class:"text-xs text-slate-400"},x_={key:0},C_={class:"text-xs text-slate-400"},I_={key:0,class:"w-full flex items-center"},V_={class:"w-full flex items-center"},{defineAsyncComponent:S_,ref:xa,computed:$i,watch:xi}=await me("vue"),{storeToRefs:E_}=await me("pinia"),z_=o_({__name:"index",props:a_({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(m){const e=S_(()=>Co(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(b=>b.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),s=An(),n=Xe(),i=ot(),{t,locale:a}=Ne(),{pickByTheme:c,tr:I,formatKey:_e}=ut(),{isLightTheme:se}=E_(Io()),L=m,be=l_(m,"show"),J=xa(null),T=xa(!1),r=xa({}),U=xa({}),pe={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},ne=xa(!1),D=xa(!1),j=xa({}),te=b=>$i({get:()=>j.value[b]?["1"]:[],set:h=>{j.value[b]=h.length>0}});xi(()=>L.settingsStructure,b=>{r.value=b?de.cloneDeep(b):{},de.forIn(b,(h,xe)=>{r.value[xe].key=xe}),U.value=de.cloneDeep(r.value)},{immediate:!0,deep:!0});const M=$i(()=>de.isEqual(r.value,U.value)),z=xa(!1),q=async()=>{const b=de.cloneDeep(r.value),h=de.cloneDeep(r.value);z.value=!1,T.value=!0,i.start();const xe=Object.values(b).map($=>$.key);if(de.forIn(b,($,S)=>{const l=de.keys(b).indexOf(S);if($&&$.key){if(xe.filter(y=>y==$.key).length>1)return n.error(t("groupKeyIsNotUnique",[$.key])),z.value=!0,!1;if(Array.isArray($.items))for(const[y,N]of $.items.entries())if(N.key){if($.items.filter(G=>G.key===N.key).length>1)return n.error(t("fieldKeyOfGroupIsNotUnique",[N.key,$.key])),z.value=!0,!1}else return n.error(t("fieldKeyOfGroupIsRequired",[y+1,$.key])),z.value=!0,!1}else return n.error(t("groupKeyIsRequired",[l+1])),z.value=!0,!1}),z.value){T.value=!1,i.finish();return}de.forIn(h,($,S)=>{S!==$.key&&yc(b,S,$.key)}),await L.updateSettingsStructure(b),T.value=!1,i.finish()},H=()=>{de.isEqual(r.value,U.value)?be.value=!1:s.warning({title:t("confirm"),content:t("confirmCloseDataStructure"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{be.value=!1}})},A=()=>r.value&&typeof r.value=="object"?Object.keys(r.value).length:0,K=$i(()=>r.value?Object.keys(r.value):[]),d=b=>K.value.indexOf(b),V=()=>{const b=En();r.value?r.value[b]={key:"",title:"",items:[]}:r.value={[b]:{key:"",title:"",items:[]}}},f=b=>{if(r.value){const{[b]:h,...xe}=r.value;r.value=xe}},k=b=>{r.value&&r.value[b].items.push(de.cloneDeep(pe))},x=(b,h)=>{if(r.value){const xe=r.value[b];xe&&Array.isArray(xe.items)&&xe.items.splice(h,1)}},g=b=>b.title&&b.key,C=(b,h)=>({value:`option_${h+1}${b+1}`,label:""});xi(()=>D.value,b=>{Object.entries(r.value).forEach(([h,xe],$)=>{j.value[`c-${$}`]=b,xe?.items?.forEach((S,l)=>{j.value[`c-${$}-f-${l}`]=b})})});const{copy:le,copied:ge,isSupported:W}=Tc();return xi(()=>ge.value,b=>{b&&n.success(t("settingsStructureCopied"))}),(b,h)=>{const xe=Wi,$=ce,S=O,l=Le,o=yn,y=Ol,N=gn,F=cl,G=jt,E=Cl,P=ll,we=Vl,Ge=Ml,Z=oo,Re=Er("color-picker"),Ce=Hi,Ze=Il,B=ql,w=Rl,v=Er("Draggable"),Q=Ki,mt=ya,oe=Oi;return on(),Fn(oe,{modelValue:be.value,"onUpdate:modelValue":h[7]||(h[7]=_t=>be.value=_t),"close-on-esc":!1,closable:!1,onOnSizeChange:h[8]||(h[8]=_t=>{J.value=_t})},{header:Pe(()=>[kn("div",r_,[Be(xe,{depth:"1"},{default:Pe(()=>[bl(an(Fe(t)("sectionSettings"))+" ",1),m.title?(on(),bo("span",c_,"Â -Â "+an(m.title),1)):Xo("",!0)]),_:1})])]),"header-extra":Pe(()=>[Be(o,{align:"center"},{default:Pe(()=>[Be(l,{secondary:"",title:Fe(t)("save"),loading:Fe(T),disabled:Fe(M),onClick:h[0]||(h[0]=_t=>q())},{icon:Pe(()=>[Be(S,null,{default:Pe(()=>[Be($,{icon:"carbon:save"})]),_:1})]),default:Pe(()=>[bl(" "+an(Fe(t)("save")),1)]),_:1},8,["title","loading","disabled"]),Be(l,{secondary:"",type:"error",title:Fe(t)("close"),disabled:Fe(T),onClick:h[1]||(h[1]=_t=>H())},{icon:Pe(()=>[Be(S,null,{default:Pe(()=>[Be($,{icon:"carbon:close"})]),_:1})]),default:Pe(()=>[bl(" "+an(Fe(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Pe(()=>[kn("section",{style:Ur(`min-height: ${Fe(J)?.windowHeight-Fe(J)?.headerHeight-5}px`),class:i_(`w-full h-full ${Fe(c)("bg-slate-200","bg-zinc-800")}`)},[Be(P,{cols:"4","item-responsive":"",responsive:"screen"},{default:Pe(()=>[Be(y,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Be(y,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:Pe(()=>[Be(N,{embedded:"",bordered:"",segmented:""},{header:Pe(()=>[bl(an(Fe(t)("groups"))+"Â  ",1),A()>0?(on(),bo("span",d_," ("+an(A())+") ",1)):Xo("",!0)]),"header-extra":Pe(()=>[Be(o,null,{default:Pe(()=>[Fe(W)&&Fe(ne)?(on(),Fn(l,{key:0,size:"small",type:"warning",secondary:"",title:Fe(t)("copy"),onClick:h[2]||(h[2]=_t=>Fe(le)(JSON.stringify(Fe(r))))},{icon:Pe(()=>[Be(S,null,{default:Pe(()=>[Be($,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Xo("",!0),Be(l,{size:"small",type:"warning",secondary:"",onClick:h[3]||(h[3]=()=>{ne.value=!Fe(ne)})},{default:Pe(()=>[Be(S,null,{default:Pe(()=>[Fe(ne)?(on(),Fn($,{key:0,icon:"carbon:code"})):(on(),Fn($,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Be(l,{size:"small",type:"primary",secondary:"",onClick:h[4]||(h[4]=_t=>D.value=!Fe(D))},{default:Pe(()=>[Be(S,null,{default:Pe(()=>[Fe(D)?(on(),Fn($,{key:0,icon:"carbon:collapse-categories"})):(on(),Fn($,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Be(l,{size:"small",type:"primary",secondary:"",onClick:h[5]||(h[5]=_t=>V())},{default:Pe(()=>[Be(S,{class:"mr-1"},{default:Pe(()=>[Be($,{icon:"carbon:add-alt"})]),_:1}),bl(" "+an(Fe(t)("addGroup")),1)]),_:1})]),_:1})]),_:1}),Fe(ne)?(on(),Fn(Fe(e),{key:0,height:Fe(J)?.windowHeight-Fe(J)?.headerHeight-100,"dark-theme":!Fe(se),class:"creopse-json-editor",mode:"tree",json:Fe(r),"onUpdate:json":h[6]||(h[6]=_t=>s_(r)?r.value=_t:null)},null,8,["height","dark-theme","json"])):(on(),Fn(mt,{key:1,style:Ur(`max-height: ${Fe(J)?.windowHeight-Fe(J)?.headerHeight-100}px`)},{default:Pe(()=>[(on(!0),bo(Tr,null,zr(Fe(r)||{},(_t,ft,yt)=>(on(),Fn(N,{key:yt,size:"small",class:"my-2",embedded:""},{default:Pe(()=>[Be(w,{"expanded-names":te(`c-${yt}`).value,"onUpdate:expandedNames":Qe=>te(`c-${yt}`).value=Qe,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Pe(({collapsed:Qe})=>[kn("div",u_,[Be(l,{size:"small",type:"error",secondary:"",onClick:St=>f(ft)},{default:Pe(()=>[Be(S,{class:"mr-1"},{default:Pe(()=>[Be($,{icon:"carbon:trash-can"})]),_:1}),bl(" "+an(Fe(t)("delete")),1)]),_:1},8,["onClick"]),h[9]||(h[9]=kn("div",{class:"w-4"},null,-1)),Be(S,null,{default:Pe(()=>[Qe?(on(),Fn($,{key:0,icon:"fa-solid:chevron-left"})):(on(),Fn($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Pe(()=>[...h[10]||(h[10]=[kn("span",null,null,-1)])]),default:Pe(()=>[Be(B,{name:"1"},{header:Pe(()=>[kn("div",p_,[Be(o,null,{default:Pe(()=>[Be(F,{size:"small",type:"success"},{default:Pe(()=>[bl(an(d(ft)+1),1)]),_:2},1024),kn("span",m_,an(Fe(I)(_t.title)),1)]),_:2},1024)])]),default:Pe(()=>[Be(P,{span:24,"x-gap":"6"},{default:Pe(()=>[Be(y,{span:6},{default:Pe(()=>[kn("span",f_,an(Fe(t)("fieldKey")),1),Be(G,{value:_t.key,placeholder:Fe(t)("groupKey"),class:"w-full",size:"small","onUpdate:value":Qe=>_t.key=Fe(_e)(Qe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Be(y,{span:11},{default:Pe(()=>[Be(E,{modelValue:_t.title,"onUpdate:modelValue":Qe=>_t.title=Qe,placeholder:Fe(t)("title"),class:"w-full",size:"small",sync:""},{label:Pe(()=>[kn("span",__,an(Fe(t)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Be(y,{span:7},{default:Pe(()=>[kn("span",v_,an(Fe(t)("actions")),1),Be(l,{block:"",size:"small",type:"primary",disabled:!g(_t),secondary:"",class:"w-full",onClick:Qe=>k(ft)},{default:Pe(()=>[Be(S,{class:"mr-1"},{default:Pe(()=>[Be($,{icon:"carbon:add-alt"})]),_:1}),bl(" "+an(Fe(t)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Be(we,{class:"!my-4.75"}),g(_t)?(on(),Fn(v,{key:0,list:Fe(r)[ft].items,class:"w-full"},{default:Pe(()=>[(on(!0),bo(Tr,null,zr(Fe(r)[ft].items,(Qe,St)=>(on(),Fn(N,{key:`field-${St}`,size:"small",class:"my-2",hoverable:""},{default:Pe(()=>[Be(w,{"expanded-names":te(`c-${ft}-f-${St}`).value,"onUpdate:expandedNames":ve=>te(`c-${ft}-f-${St}`).value=ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":Pe(({collapsed:ve})=>[kn("div",g_,[Be(l,{size:"small",type:"error",secondary:"",onClick:()=>{x(ft,St)},title:Fe(t)("delete")},{default:Pe(()=>[Be(S,null,{default:Pe(()=>[Be($,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),h[11]||(h[11]=kn("div",{class:"w-4"},null,-1)),Be(S,null,{default:Pe(()=>[ve?(on(),Fn($,{key:0,icon:"fa-solid:chevron-left"})):(on(),Fn($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Pe(()=>[...h[12]||(h[12]=[kn("span",null,null,-1)])]),default:Pe(()=>[Be(B,{name:"1"},{header:Pe(()=>[kn("div",y_,[kn("div",b_,[Be(S,{size:"18",class:"cursor-move mr-2"},{default:Pe(()=>[Be($,{icon:"fa-solid:grip-lines"})]),_:1}),Be(F,{size:"small",type:"info"},{default:Pe(()=>[bl(an(St+1),1)]),_:2},1024),kn("span",h_,an(Fe(I)(Qe.label)),1)])])]),default:Pe(()=>[Be(P,{span:24,"x-gap":"6"},{default:Pe(()=>[Be(y,{span:6},{default:Pe(()=>[kn("span",w_,an(Fe(t)("fieldKey")),1),Be(G,{value:Qe.key,placeholder:Fe(t)("fieldKey"),class:"w-full","onUpdate:value":ve=>Qe.key=Fe(_e)(ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Be(y,{span:10},{default:Pe(()=>[Be(E,{modelValue:Qe.label,"onUpdate:modelValue":ve=>Qe.label=ve,placeholder:Fe(t)("title"),class:"w-full",sync:""},{label:Pe(()=>[kn("span",k_,an(Fe(t)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Be(y,{span:8},{default:Pe(()=>[kn("span",$_,an(Fe(t)("type")),1),Be(Ge,{value:Qe.type,"onUpdate:value":ve=>Qe.type=ve,options:Fe(n_),placeholder:Fe(t)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Be(we,{class:"!mt-4 !mb-2"}),Be(P,{span:24,"x-gap":"6"},{default:Pe(()=>[Be(y,{span:10,class:"flex items-center"},{default:Pe(()=>[Be(Z,{checked:Qe.required,"onUpdate:checked":ve=>Qe.required=ve,size:"medium"},{default:Pe(()=>[bl(an(Fe(t)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),Be(y,{span:14},{default:Pe(()=>[Qe.type==="color"||Qe.type==="gradient"?(on(),bo("div",x_,[kn("span",C_,an(Fe(t)("defaultValue")),1),Be(Re,{"pure-color":Qe.defaultValue,"onUpdate:pureColor":ve=>Qe.defaultValue=ve,"default-pure-color":"#00000000","picker-type":"chrome","use-type":Qe.type==="color"?"pure":"gradient",format:Qe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Fe(se)?"white":"black",lang:Fe(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(on(),Fn(G,{key:1,value:Qe.defaultValue,"onUpdate:value":ve=>Qe.defaultValue=ve,placeholder:Fe(t)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),Qe.type==="multi-select"||Qe.type==="single-select"?(on(),Fn(we,{key:0,"title-placement":"left",class:"!my-4"},{default:Pe(()=>[bl(an(Fe(t)("options")),1)]),_:1})):Xo("",!0),Be(Ze,{name:"slide-fade",appear:""},{default:Pe(()=>[Qe.type==="multi-select"||Qe.type==="single-select"?(on(),bo("div",I_,[Be(Ce,{value:Qe.options,"onUpdate:value":ve=>Qe.options=ve,placeholder:Fe(t)("addOption"),"on-create":ve=>C?C(ve,St):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Pe(()=>[bl(an(Fe(t)("addOption")),1)]),default:Pe(({value:ve})=>[kn("div",V_,[Be(G,{value:ve.value,placeholder:Fe(t)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Et=>ve.value=Fe(_e)(Et)},null,8,["value","placeholder","onUpdate:value"]),Be(E,{modelValue:ve.label,"onUpdate:modelValue":Et=>ve.label=Et,placeholder:Fe(t)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):Xo("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(on(),Fn(Q,{key:1,bordered:"",type:"info"},{default:Pe(()=>[bl(an(Fe(t)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Be(y,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),T_=So(z_,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:U_}=await me("vue"),{unref:pt,renderList:Mr,Fragment:Zo,openBlock:ta,createElementBlock:es,resolveComponent:Ty,createBlock:ts,createCommentVNode:Nr,withCtx:pn,createVNode:sn,createElementVNode:ns,toDisplayString:Ya,createTextVNode:ls,withModifiers:Ci,normalizeClass:Dr,isRef:Os}=await me("vue"),M_={class:"flex items-center"},N_={class:"text-base"},D_={class:"mt-2"},{ref:na}=await me("vue"),A_=U_({__name:"index",setup(m){const{t:e}=Ne(),{tr:s,pickByTheme:n,isInDevMode:i}=ut(),{data:t}=bc(),{mutate:a,isPending:c}=gd(),{mutate:I,isPending:_e}=Vc(),se=na(24),L=na(1),be=V=>{se.value=V},J={name:"",title:"",content:"",slug:""},T=na(!1),r=na(null),U=na(J),pe={title:[{required:!0,message:e("fillRequired")}]},ne=na(null),D=V=>{ne.value=de.cloneDeep(V),U.value=de.cloneDeep(V||J),T.value=!0},j=async()=>(r.value?.validate(async V=>{if(!V){const f={title:U.value.title};ne.value?I({slug:ne.value.slug,...f},{onSuccess:()=>{}}):a({name:de.startCase(de.camelCase(s(U.value.title))).replace(/\s+/g,""),...f},{onSuccess:()=>{}}),T.value=!1}}),!1),te=na(null),M=na(!1),z=V=>{te.value=V,M.value=!0},q=async V=>{I({slug:te.value?.slug,dataStructure:V},{onSuccess:f=>{z(f)}})},H=na(null),A=na(!1),K=V=>{H.value=V,A.value=!0},d=async V=>{I({slug:H.value?.slug,settingsStructure:V},{onSuccess:f=>{K(f)}})};return(V,f)=>{const k=ce,x=O,g=Le,C=yn,le=Vl,ge=cl,W=ql,b=Rl,h=gn,xe=so,$=Sl,S=Cl,l=ul,o=dl,y=Wn;return ta(),es(Zo,null,[pt(t)&&pt(t).length?(ta(),es(Zo,{key:0},[(ta(!0),es(Zo,null,Mr(pt(t).slice((pt(L)-1)*pt(se),pt(L)*pt(se)),N=>(ta(),ts(h,{key:N.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:pn(()=>[sn(b,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":pn(({collapsed:F})=>[sn(x,null,{default:pn(()=>[F?(ta(),ts(k,{key:0,icon:"fa-solid:chevron-left"})):(ta(),ts(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:pn(()=>[...f[6]||(f[6]=[ns("span",null,null,-1)])]),default:pn(()=>[sn(W,{name:"1"},{header:pn(()=>[ns("div",M_,[sn(C,null,{default:pn(()=>[pt(i)?(ta(),es(Zo,{key:0},[sn(g,{size:"small",type:"primary",secondary:"",onClick:Ci(F=>z(N),["stop"])},{default:pn(()=>[sn(x,{class:"mr-1"},{default:pn(()=>[sn(k,{icon:"carbon:data-1"})]),_:1}),ls(" "+Ya(pt(e)("dataStructure")),1)]),_:1},8,["onClick"]),sn(g,{size:"small",type:"info",secondary:"",title:pt(e)("sectionSettings"),onClick:Ci(F=>K(N),["stop"])},{default:pn(()=>[sn(x,{class:"mr-1"},{default:pn(()=>[sn(k,{icon:"carbon:settings-edit"})]),_:1}),ls(" "+Ya(pt(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Nr("",!0),sn(g,{size:"small",type:"primary",secondary:"",title:pt(e)("edit"),onClick:Ci(F=>D(N),["stop"])},{default:pn(()=>[sn(x,null,{default:pn(()=>[sn(k,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),sn(le,{vertical:"",class:Dr(pt(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ns("span",N_,Ya(pt(s)(N.title)),1)])]),default:pn(()=>[ns("div",null,Ya(pt(e)("sectionUsedXTimesOnPages",[N.pagesCount])),1),ns("section",D_,[(ta(!0),es(Zo,null,Mr(pt(Wc)(N.pages||[],"id"),F=>(ta(),ts(ge,{key:F.id,size:"small",class:"mr-1",type:"success"},{default:pn(()=>[ls(Ya(pt(s)(F.title)),1)]),_:2},1024))),128))]),Nr("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),sn(xe,{page:pt(L),"onUpdate:page":f[0]||(f[0]=N=>Os(L)?L.value=N:null),class:"mt-5 justify-end","show-size-picker":"","page-size":pt(se),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(pt(t).length/pt(se)),"onUpdate:pageSize":be},{prefix:pn(()=>[ls(Ya(`${pt(t).length} ${pt(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(ta(),ts(h,{key:1,size:"large",class:Dr(`mb-2 !border-dashed !border-2 ${pt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:pn(()=>[sn($,{description:pt(e)("noSectionAvailable")},{icon:pn(()=>[sn(x,null,{default:pn(()=>[sn(k,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),sn(y,{show:pt(T),"onUpdate:show":f[2]||(f[2]=N=>Os(T)?T.value=N:null),loading:pt(c)||pt(_e),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:pt(ne)?pt(e)("editSection"):pt(e)("addSection"),"positive-text":pt(e)("validate"),"negative-text":pt(e)("cancel"),onPositiveClick:j,onNegativeClick:f[3]||(f[3]=N=>T.value=!1)},{default:pn(()=>[sn(o,{ref_key:"formRef",ref:r,model:pt(U),rules:pe,"show-require-mark":!1,size:"medium"},{default:pn(()=>[sn(l,{"show-label":!1,path:"title",class:"mt-5"},{default:pn(()=>[sn(S,{modelValue:pt(U).title,"onUpdate:modelValue":f[1]||(f[1]=N=>pt(U).title=N),placeholder:pt(e)("title"),class:"w-full",sync:""},{label:pn(()=>[ls(Ya(pt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),sn(Nc,{show:pt(M),"onUpdate:show":f[4]||(f[4]=N=>Os(M)?M.value=N:null),title:pt(s)(pt(te)?.title),"raw-data-structure":pt(te)?.dataStructure,"update-data-structure":q},null,8,["show","title","raw-data-structure"]),sn(T_,{show:pt(A),"onUpdate:show":f[5]||(f[5]=N=>Os(A)?A.value=N:null),title:pt(s)(pt(H)?.title),"settings-structure":pt(H)?.settingsStructure,"update-settings-structure":d},null,8,["show","title","settings-structure"])],64)}}}),Dc=(m,e)=>fs(["newsletter-emails"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/emails"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...m}),Ac=(m,e)=>fs(["newsletter-phones"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/phones"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...m}),P_=(m,e)=>fs(["newsletter-campaigns"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/campaigns"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...m});class B_{id;email;createdAt;updatedAt;constructor(e,s,n,i){this.email=e,this.id=s,this.createdAt=n,this.updatedAt=i}}const L_=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-emails"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/emails",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},F_=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-emails"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/emails/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},O_=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["newsletter-emails"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/emails/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},R_=m=>{const{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return wt({queryKey:["newsletter-emails"],operation:"batch",getItemId:t=>{if(t instanceof B_){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("NewsletterEmail ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:t}),mutationFn:async t=>{n.start();try{for(let a=0;a<t.length;a++)await e({url:`/newsletter/emails/${t[a]}`,method:"delete"});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...m}})},q_=()=>{const{request:m}=et();return Ta(async e=>{const s=await m({method:"post",url:"/newsletter/emails",data:e});if(s.failure&&s.error)throw new Error(s.error);return s.result.data},{})},{defineComponent:j_}=await me("vue"),{unref:rt,createVNode:zt,withCtx:Tt,toDisplayString:Ca,createTextVNode:Ha,resolveComponent:Uy,createElementVNode:Ar,openBlock:Ii,createBlock:Pr,createCommentVNode:K_,isRef:Br,Fragment:G_,createElementBlock:Y_}=await me("vue"),H_={class:"flex items-center justify-center"},{ref:la,h:sl,computed:W_,onBeforeUnmount:Q_}=await me("vue"),J_=j_({__name:"Email",setup(m){const e=ot(),s=Xe(),n=An(),{data:i,refetch:t,isPending:a}=Dc(),{mutate:c,isPending:I}=R_(),{mutate:_e}=O_(),{mutate:se,isPending:L}=L_(),{mutate:be,isPending:J}=F_(),{mutateAsync:T}=q_(),{t:r,locale:U}=Ne(),pe=la(""),ne=la(),D={pageSize:12,prefix:({itemCount:l})=>sl("div",{class:"font-bold"},{default:()=>`${r("total")}: ${l}`})},j=[{type:"selection"},{title:r("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return sl("div",{},{default:()=>l.email})}},{title:r("updateAt"),key:"updatedAt",width:125,render(l){return sl("div",{},{default:()=>Fl(l.updatedAt,{locale:U.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(l){return sl("div",{},{default:()=>Fl(l.createdAt,{locale:U.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>sl(jt,{ref:ne,placeholder:r("search"),value:pe.value,onInput:l=>{pe.value=l}},{suffix:()=>sl(O,{},{default:()=>sl(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return sl("div",{class:"flex justify-end items-center w-full"},[sl(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{d(l)},renderIcon:()=>sl(O,null,{default:()=>sl(ce,{icon:"carbon:edit"})})}),sl("div",{class:"w-2"}),sl(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:r("confirm"),content:r("confirmDeleteEmailAddress"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{l.id&&_e({id:l.id})}})},renderIcon:()=>sl(O,null,{default:()=>sl(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],te=W_(()=>{if(!pe.value)return i.value;const l=i.value?.filter(o=>o.email.toLowerCase().includes(pe.value.toLowerCase()));return ne.value&&ne.value.focus(),l}),M=la(!1),z=la(!1),q=la(null),H=la(null),A=la({email:""}),K={email:[{required:!0,message:r("fillRequired")},{trigger:["input"],validator(l,o){return o&&!xo.isEmail(o)?new Error(r("invalidEmail")):!0}}]},d=l=>{q.value=de.cloneDeep(l),l?A.value=de.cloneDeep(l):A.value={email:""},z.value=!0},V=async()=>(H.value?.validate(async l=>{if(!l){const o={email:A.value.email};q.value?q.value.email!==A.value.email&&(i.value||[]).findIndex(y=>y.email==A.value.email)>-1?s.error(r("sameEmailAddressMessage")):be({id:q.value.id,...o}):(i.value||[]).findIndex(y=>y.email==A.value.email)>-1?s.error(r("sameEmailAddressMessage")):se(o),z.value=!1}}),!1);let f=null;const k=()=>{f&&(f.destroy(),f=null)};Q_(k);const x=(l,o)=>o.map(y=>l.map(N=>y[N])),g=()=>{f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),Co(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["no","email","createdAt","updatedAt"];const y=de.sortBy(i.value?.map((F,G)=>({no:G+1,...F})),"email"),N=x(o,y);try{l.export_json_to_excel({header:o,data:N,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},C=()=>{f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),Co(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["email"];const y=x(o,[{email:"adresse@email.com"}]);try{l.export_json_to_excel({header:o,data:y,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},le=la(!1),ge=async({results:l})=>{M.value=!0,e.start(),f||(f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<l.length;o++)l[o].email&&i.value?.findIndex(y=>y.email==l[o].email)==-1&&(f&&(f.content=`${r("pleaseBePatient")}: ${o} ${r("task_s")} / ${l.length}`),await T({email:l[o].email}));await t(),k(),e.finish(),M.value=!1,le.value=!1},W=la(En()),b=la([]),h=l=>l.id,xe=l=>{b.value=l},$=()=>{b.value=[],W.value=En()},S=async()=>(b.value.length?n.warning({title:r("confirm"),content:r("deleteSelectionWarningMessage",[b.value.length]),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:()=>{c(b.value,{onSuccess:()=>{$()}})}}):s.warning(r("noItemSelected")),!1);return(l,o)=>{const y=Cc,N=yn,F=xl,G=gn,E=Il,P=Qs,we=Ws,Ge=ul,Z=dl,Re=Wn,Ce=Uc;return Ii(),Y_(G_,null,[zt(F,{to:"#alt-action"},{default:Tt(()=>[zt(N,null,{default:Tt(()=>[zt(y,{onPositiveClick:o[0]||(o[0]=Ze=>g())},{trigger:Tt(()=>[zt(rt(Le),{type:"success",secondary:""},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:upload"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("export")),1)]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("exportDataInExcelFile")),1)]),_:1}),zt(rt(Le),{type:"info",secondary:"",onClick:o[1]||(o[1]=Ze=>le.value=!0)},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:download"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("import")),1)]),_:1}),zt(rt(Le),{type:"primary",secondary:"",onClick:o[2]||(o[2]=Ze=>d(null))},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),zt(E,{name:"slide-fade",appear:""},{default:Tt(()=>[rt(b).length?(Ii(),Pr(G,{key:0,class:"my-2",size:"small",embedded:""},{default:Tt(()=>[zt(N,{align:"center",justify:"space-between"},{default:Tt(()=>[Ar("span",null,Ca(rt(r)("nbItemsSelected",[rt(b).length])),1),zt(N,{align:"center",justify:"space-between"},{default:Tt(()=>[zt(rt(Le),{type:"error",size:"small",secondary:"",onClick:S},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("delete")),1)]),_:1}),zt(rt(Le),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:close"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):K_("",!0)]),_:1}),zt(we,null,{default:Tt(()=>[(Ii(),Pr(P,{key:rt(W),columns:j,data:rt(te),pagination:D,loading:rt(a)||rt(I),"single-line":!1,"scroll-x":800,"row-key":h,size:"small",striped:"","onUpdate:checkedRowKeys":xe},null,8,["data","loading","row-key"]))]),_:1}),zt(Re,{show:rt(z),"onUpdate:show":o[4]||(o[4]=Ze=>Br(z)?z.value=Ze:null),loading:rt(L)||rt(J),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:rt(q)?rt(r)("editEmailAddress"):rt(r)("addEmailAddress"),"positive-text":rt(r)("validate"),"negative-text":rt(r)("cancel"),onPositiveClick:V,onNegativeClick:o[5]||(o[5]=Ze=>z.value=!1)},{default:Tt(()=>[zt(Z,{ref_key:"formRef",ref:H,class:"mt-5",model:rt(A),rules:K,"show-require-mark":!1,size:"medium"},{default:Tt(()=>[zt(Ge,{label:rt(r)("emailAddress"),path:"email"},{default:Tt(()=>[zt(rt(jt),{value:rt(A).email,"onUpdate:value":o[3]||(o[3]=Ze=>rt(A).email=Ze),placeholder:rt(r)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),zt(Re,{show:rt(le),"onUpdate:show":o[7]||(o[7]=Ze=>Br(le)?le.value=Ze:null),loading:rt(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:rt(r)("import")},{default:Tt(()=>[zt(Ce,{class:"my-5","on-success":ge}),Ar("div",H_,[zt(rt(Le),{type:"info",size:"small",secondary:"",onClick:o[6]||(o[6]=Ze=>C())},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:download"})]),_:1})]),default:Tt(()=>[Ha(" "+Ca(rt(r)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class X_{id;phone;createdAt;updatedAt;constructor(e,s,n,i){this.phone=e,this.id=s,this.createdAt=n,this.updatedAt=i}}const Z_=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-phones"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/phones",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},ev=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-phones"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/phones/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},tv=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["newsletter-phones"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/phones/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},nv=m=>{const{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return wt({queryKey:["newsletter-phones"],operation:"batch",getItemId:t=>{if(t instanceof X_){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("NewsletterPhone ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:t}),mutationFn:async t=>{n.start();try{for(let a=0;a<t.length;a++)await e({url:`/newsletter/phones/${t[a]}`,method:"delete"});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...m}})},lv=()=>{const{request:m}=et();return Ta(async e=>{const s=await m({method:"post",url:"/newsletter/phones",data:e});if(s.failure&&s.error)throw new Error(s.error);return s.result.data},{})},{defineComponent:av}=await me("vue"),{unref:dt,createVNode:Ut,withCtx:Mt,toDisplayString:Ia,createTextVNode:Wa,resolveComponent:My,createElementVNode:Lr,openBlock:Vi,createBlock:Fr,createCommentVNode:ov,isRef:Or,Fragment:sv,createElementBlock:iv}=await me("vue"),rv={class:"flex items-center justify-center"},{ref:aa,h:il,computed:cv,onBeforeUnmount:dv}=await me("vue"),uv=av({__name:"Phone",setup(m){const e=ot(),s=Xe(),n=An(),{data:i,refetch:t,isPending:a}=Ac(),{mutate:c,isPending:I}=nv(),{mutate:_e}=tv(),{mutate:se,isPending:L}=Z_(),{mutate:be,isPending:J}=ev(),{mutateAsync:T}=lv(),{t:r,locale:U}=Ne(),pe=aa(""),ne=aa(),D={pageSize:12,prefix:({itemCount:l})=>il("div",{class:"font-bold"},{default:()=>`${r("total")}: ${l}`})},j=[{type:"selection"},{title:r("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return il("div",{},{default:()=>l.phone})}},{title:r("updateAt"),key:"updatedAt",width:125,render(l){return il("div",{},{default:()=>Fl(l.updatedAt,{locale:U.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(l){return il("div",{},{default:()=>Fl(l.createdAt,{locale:U.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>il(jt,{ref:ne,placeholder:r("search"),value:pe.value,onInput:l=>{pe.value=l}},{suffix:()=>il(O,{},{default:()=>il(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return il("div",{class:"flex justify-end items-center w-full"},[il(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{d(l)},renderIcon:()=>il(O,null,{default:()=>il(ce,{icon:"carbon:edit"})})}),il("div",{class:"w-2"}),il(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:r("confirm"),content:r("confirmDeletePhoneNumber"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{l.id&&_e({id:l.id})}})},renderIcon:()=>il(O,null,{default:()=>il(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],te=cv(()=>{if(!pe.value)return i.value;const l=i.value?.filter(o=>o.phone.toLowerCase().includes(pe.value.toLowerCase()));return ne.value&&ne.value.focus(),l}),M=aa(!1),z=aa(!1),q=aa(null),H=aa(null),A=aa({phone:""}),K={phone:[{required:!0,message:r("fillRequired")},{trigger:["input"],validator(l,o){return o&&!zd(o)?new Error(r("invalidNumber")):!0}}]},d=l=>{q.value=de.cloneDeep(l),l?A.value=de.cloneDeep(l):A.value={phone:""},z.value=!0},V=async()=>(H.value?.validate(async l=>{if(!l){const o={phone:A.value.phone.replace(/\s+/g,"")};q.value?q.value.phone!==A.value.phone.replace(/\s+/g,"")&&(i.value||[]).findIndex(y=>y.phone==A.value.phone.replace(/\s+/g,""))>-1?s.error(r("samePhoneNumberMessage")):be({id:q.value.id,...o}):(i.value||[]).findIndex(y=>y.phone==A.value.phone.replace(/\s+/g,""))>-1?s.error(r("samePhoneNumberMessage")):se(o),z.value=!1}}),!1);let f=null;const k=()=>{f&&(f.destroy(),f=null)};dv(k);const x=(l,o)=>o.map(y=>l.map(N=>y[N])),g=()=>{f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),Co(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["no","phone","createdAt","updatedAt"];const y=de.sortBy(i.value?.map((F,G)=>({no:G+1,...F})),"phone"),N=x(o,y);try{l.export_json_to_excel({header:o,data:N,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},C=()=>{f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),Co(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["phone"];const y=x(o,[{phone:"+XXX XXX XXXXX"}]);try{l.export_json_to_excel({header:o,data:y,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},le=aa(!1),ge=async({results:l})=>{M.value=!0,e.start(),f||(f=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<l.length;o++)l[o].phone&&i.value?.findIndex(y=>y.phone.replace(/\s+/g,"")==l[o].phone.replace(/\s+/g,""))==-1&&(f&&(f.content=`${r("pleaseBePatient")}: ${o} ${r("task_s")} / ${l.length}`),await T({phone:l[o].phone.replace(/\s+/g,"")}));await t(),k(),e.finish(),M.value=!1,le.value=!1},W=aa(En()),b=aa([]),h=l=>l.id,xe=l=>{b.value=l},$=()=>{b.value=[],W.value=En()},S=async()=>(b.value.length?n.warning({title:r("confirm"),content:r("deleteSelectionWarningMessage",[b.value.length]),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:()=>{c(b.value,{onSuccess:()=>{$()}})}}):s.warning(r("noItemSelected")),!1);return(l,o)=>{const y=Cc,N=yn,F=xl,G=gn,E=Il,P=Qs,we=Ws,Ge=Ed,Z=ul,Re=dl,Ce=Wn,Ze=Uc;return Vi(),iv(sv,null,[Ut(F,{to:"#alt-action"},{default:Mt(()=>[Ut(N,null,{default:Mt(()=>[Ut(y,{onPositiveClick:o[0]||(o[0]=B=>g())},{trigger:Mt(()=>[Ut(dt(Le),{type:"success",secondary:""},{icon:Mt(()=>[Ut(dt(O),{size:"18"},{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:upload"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("export")),1)]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("exportDataInExcelFile")),1)]),_:1}),Ut(dt(Le),{type:"info",secondary:"",onClick:o[1]||(o[1]=B=>le.value=!0)},{icon:Mt(()=>[Ut(dt(O),{size:"18"},{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:download"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("import")),1)]),_:1}),Ut(dt(Le),{type:"primary",secondary:"",onClick:o[2]||(o[2]=B=>d(null))},{icon:Mt(()=>[Ut(dt(O),{size:"18"},{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Ut(E,{name:"slide-fade",appear:""},{default:Mt(()=>[dt(b).length?(Vi(),Fr(G,{key:0,class:"my-2",size:"small",embedded:""},{default:Mt(()=>[Ut(N,{align:"center",justify:"space-between"},{default:Mt(()=>[Lr("span",null,Ia(dt(r)("nbItemsSelected",[dt(b).length])),1),Ut(N,{align:"center",justify:"space-between"},{default:Mt(()=>[Ut(dt(Le),{type:"error",size:"small",secondary:"",onClick:S},{icon:Mt(()=>[Ut(dt(O),null,{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("delete")),1)]),_:1}),Ut(dt(Le),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Mt(()=>[Ut(dt(O),null,{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:close"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):ov("",!0)]),_:1}),Ut(we,null,{default:Mt(()=>[(Vi(),Fr(P,{key:dt(W),columns:j,data:dt(te),pagination:D,loading:dt(a)||dt(I),"single-line":!1,"scroll-x":800,"row-key":h,size:"small",striped:"","onUpdate:checkedRowKeys":xe},null,8,["data","loading","row-key"]))]),_:1}),Ut(Ce,{show:dt(z),"onUpdate:show":o[4]||(o[4]=B=>Or(z)?z.value=B:null),loading:dt(L)||dt(J),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:dt(q)?dt(r)("editPhoneNumber"):dt(r)("addPhoneNumber"),"positive-text":dt(r)("validate"),"negative-text":dt(r)("cancel"),onPositiveClick:V,onNegativeClick:o[5]||(o[5]=B=>z.value=!1)},{default:Mt(()=>[Ut(Re,{ref_key:"formRef",ref:H,class:"mt-5",model:dt(A),rules:K,"show-require-mark":!1,size:"medium"},{default:Mt(()=>[Ut(Z,{label:dt(r)("phone"),path:"phone"},{default:Mt(()=>[Ut(Ge,{modelValue:dt(A).phone,"onUpdate:modelValue":o[3]||(o[3]=B=>dt(A).phone=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ut(Ce,{show:dt(le),"onUpdate:show":o[7]||(o[7]=B=>Or(le)?le.value=B:null),loading:dt(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:dt(r)("import")},{default:Mt(()=>[Ut(Ze,{class:"my-5","on-success":ge}),Lr("div",rv,[Ut(dt(Le),{type:"info",size:"small",secondary:"",onClick:o[6]||(o[6]=B=>C())},{icon:Mt(()=>[Ut(dt(O),null,{default:Mt(()=>[Ut(dt(ce),{icon:"carbon:download"})]),_:1})]),default:Mt(()=>[Wa(" "+Ia(dt(r)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),pv="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:Rr,mergeModels:mv,defineComponent:fv}=await me("vue"),{unref:Vt,toDisplayString:Qa,openBlock:tl,createElementBlock:Va,createCommentVNode:as,createTextVNode:Rs,resolveComponent:Ny,withCtx:Ot,createVNode:In,createElementVNode:qs,Fragment:ho,renderList:Si,createBlock:Sa,normalizeStyle:Ei,normalizeClass:_v}=await me("vue"),vv={class:"text-base"},gv={key:0},yv={key:1},bv={class:"text-base font-bold"},{ref:Ja,inject:hv,computed:wv,watch:kv,reactive:js}=await me("vue"),$v=fv({__name:"DataForm",props:mv({submitData:{},contentModel:{},readonly:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(m){const e=m,s=Rr(m,"show"),n=Rr(m,"data"),i=ot(),t=Xe(),{t:a}=Ne(),{tr:c,pickByTheme:I,editKeysToCamelCase:_e}=ut(),se=Ja(null),L=Ja(!1),be=hv("currentEditItem"),J=wv(()=>de.isEqual(n.value,be?.value)&&de.isEqual(r.value,pe.value)),T=()=>{s.value=!1,L.value=!1},r=Ja({}),U=Ja(En()),pe=Ja({}),ne=Ja(),D=Ja();kv(()=>s.value,te=>{te&&(Li(n.value.contentModelData)?r.value=js(n.value.contentModelData):r.value=js({}),de.forIn(_e(e.contentModel?.dataStructure??{}),(M,z)=>{(!r.value[z]||Array.isArray(r.value[z])&&r.value[z].length==0)&&(z==="index"?r.value[z]=js({}):r.value[z]=js([]))}),pe.value=de.cloneDeep(r.value),U.value=En())},{immediate:!0});const j=async()=>{L.value=!0,i.start();const te=ne.value&&await ne.value(),M=D.value&&await D.value();(!ne.value||te)&&(!D.value||M)?await e.submitData(r.value):t.error(a("mandatoryFieldsNotFilledIn")),i.finish(),L.value=!1};return(te,M)=>{const z=Wi,q=vs,H=_s,A=ce,K=O,d=Le,V=yn,f=gn,k=ya,x=Ol,g=ll,C=Oi;return tl(),Sa(C,{modelValue:s.value,"onUpdate:modelValue":M[3]||(M[3]=le=>s.value=le),"close-on-esc":!1,closable:!1,onOnSizeChange:M[4]||(M[4]=le=>{se.value=le})},{header:Ot(()=>[qs("div",vv,[In(z,{depth:"1"},{default:Ot(()=>[Rs(Qa(Vt(c)(e.contentModel?.title))+" ",1),e.readonly?(tl(),Va("span",gv," Â -Â "+Qa(Vt(a)("preview")),1)):(tl(),Va("span",yv," Â -Â "+Qa(Vt(be)?Vt(a)("editItem"):Vt(a)("addItem")),1))]),_:1})])]),"header-extra":Ot(()=>[In(V,{align:"center"},{default:Ot(()=>[e.readonly?as("",!0):(tl(),Va(ho,{key:0},[qs("span",bv,Qa(Vt(a)("status"))+":",1),In(H,{value:n.value.isActive,"onUpdate:value":M[0]||(M[0]=le=>n.value.isActive=le),name:"isActive",class:"w-full"},{default:Ot(()=>[In(q,{value:!1,label:Vt(a)("unpublished")},null,8,["label"]),In(q,{value:!0,label:Vt(a)("published")},null,8,["label"])]),_:1},8,["value"]),M[5]||(M[5]=qs("div",{class:"w-4"},null,-1)),In(d,{secondary:"",type:"success",title:Vt(a)("save"),loading:Vt(L),disabled:Vt(J),onClick:M[1]||(M[1]=le=>j())},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:save"})]),_:1})]),default:Ot(()=>[Rs(" "+Qa(Vt(a)("save")),1)]),_:1},8,["title","loading","disabled"])],64)),In(d,{secondary:"",type:"error",title:Vt(a)("close"),disabled:Vt(L),onClick:M[2]||(M[2]=le=>T())},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:close"})]),_:1})]),default:Ot(()=>[Rs(" "+Qa(Vt(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ot(()=>[qs("section",{style:Ei(`min-height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-5}px`),class:_v(`w-full h-full ${Vt(I)("bg-slate-200","bg-zinc-800")}`)},[In(g,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Ot(()=>[In(x,{class:"ml-4 mt-2"},{default:Ot(()=>[In(k,{style:Ei(`height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-50}px`)},{default:Ot(()=>[(tl(!0),Va(ho,null,Si(Vt(_e)(m.contentModel?.dataStructure),(le,ge)=>(tl(),Va(ho,{key:ge},[String(ge)==="index"?(tl(),Sa(f,{key:0,size:"small",class:"mb-2"},{default:Ot(()=>[(tl(),Sa(ps,{key:`${Vt(U)}-${ge}-form-1`,modelValue:Vt(r)[ge],"onUpdate:modelValue":W=>Vt(r)[ge]=W,items:le,onUpdate:(W,b)=>{ne.value=b}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):as("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),In(x,{class:"mr-4 mt-2"},{default:Ot(()=>[In(k,{style:Ei(`height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-50}px`)},{default:Ot(()=>[(tl(!0),Va(ho,null,Si(Vt(_e)(m.contentModel?.dataStructure),(le,ge)=>(tl(),Va(ho,{key:ge},[String(ge)!=="index"?(tl(),Sa(f,{key:0,title:Vt(c)(le.title),size:"small",class:"mb-2"},{"header-extra":Ot(()=>[e.readonly?as("",!0):(tl(),Sa(d,{key:0,quaternary:"",size:"small",onClick:()=>Vt(r)[ge].push({})},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:add-alt"})]),_:1})]),default:Ot(()=>[Rs(" "+Qa(Vt(a)("add")),1)]),_:1},8,["onClick"]))]),default:Ot(()=>[(tl(!0),Va(ho,null,Si(Vt(r)[ge],(W,b)=>(tl(),Sa(f,{key:b,title:String(b+1),size:"small",class:"mb-2"},{"header-extra":Ot(()=>[e.readonly?as("",!0):(tl(),Sa(d,{key:0,secondary:"",type:"error",size:"small",onClick:()=>Vt(r)[ge].splice(b,1)},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]),default:Ot(()=>[(tl(),Sa(ps,{key:`${Vt(U)}-${ge}-${b}-form-2`,modelValue:Vt(r)[ge][b],"onUpdate:modelValue":h=>Vt(r)[ge][b]=h,items:le.items,onUpdate:(h,xe)=>{D.value=xe}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):as("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:xv,mergeModels:Cv,defineComponent:Iv}=await me("vue"),{unref:Nt,resolveComponent:Dy,createVNode:Vn,toDisplayString:Ks,createTextVNode:qr,withCtx:On,renderList:Vv,Fragment:jr,openBlock:os,createElementBlock:Kr,createElementVNode:Gs,createBlock:zi,normalizeClass:Sv,isRef:Ev}=await me("vue"),{inject:zv,ref:ss,h:Gr,computed:Yr}=await me("vue"),Tv={class:"flex items-center justify-between"},Uv={class:"flex flex-col"},Mv={class:"text-sm font-bold"},Nv={class:"text-xs font-normal"},Dv=Iv({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Cv(["update"],["update:show"]),setup(m,{emit:e}){const{t:s}=Ne(),{pickByTheme:n,tr:i,mergeArrays:t}=ut(),{extractItemTitle:a}=gs(),{data:c}=ao(),{mutate:I,isPending:_e}=Ec(),se=An(),L=e,be=xv(m,"show"),J=zv("currentEditItem"),T=async V=>{se.warning({title:s("confirm"),content:s("confirmDeleteLink"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{I({id:J?.value?.id,relatedItems:J?.value?.relatedItems?.filter(f=>f.id!==V.id)?.map(f=>f.id)},{onSuccess:()=>{L("update",J?.value?.id)}})}})},r=V=>c.value?.find(f=>f.id===V.contentModelId),U=ss(!1),pe=ss(null),ne=ss({contentModelId:null,itemId:null}),D={contentModelId:[{required:!0,message:s("fillRequired")}],itemId:[{required:!0,message:s("fillRequired")}]},j=async()=>(pe.value?.validate(async V=>{if(!V){const f=J?.value?.relatedItems?.map(k=>k.id)||[];I({id:J?.value?.id,relatedItems:[...f,ne.value.itemId]},{onSuccess:()=>{L("update",J?.value?.id),U.value=!1}})}}),!1),te=V=>Gr("span",{},{default:()=>i(V.title)}),M=V=>Yr(()=>Gr("span",{},{default:()=>a(V,r(V))})),z=ss([]),q=ss([]),{mutateAsync:H,isPending:A}=Sc(),K=async(V,f)=>{if(!V.length){q.value=[];return}q.value=await H({query:V,contentModelId:f})},d=Yr(()=>t(z.value,q.value,"id").filter(V=>V.id!==J?.value?.id));return(V,f)=>{const k=ce,x=Le,g=yn,C=O,le=gn,ge=ya,W=Sl,b=Ua,h=Wn,xe=Ml,$=ul,S=dl;return os(),Kr(jr,null,[Vn(h,{show:be.value,"onUpdate:show":f[2]||(f[2]=l=>be.value=l),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Nt(s)("linkContentModelItems")},{"header-extra":On(()=>[Vn(g,{align:"center"},{default:On(()=>[Vn(x,{secondary:"",size:"small",type:"primary",disabled:Nt(_e),onClick:f[0]||(f[0]=l=>U.value=!0)},{default:On(()=>[Vn(k,{icon:"carbon:add-alt",class:"mr-1"}),qr(" "+Ks(Nt(s)("add")),1)]),_:1},8,["disabled"]),Vn(x,{secondary:"",size:"small",type:"error",disabled:Nt(_e),onClick:f[1]||(f[1]=l=>be.value=!1)},{default:On(()=>[Vn(k,{icon:"carbon:close",class:"mr-1"}),qr(" "+Ks(Nt(s)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:On(()=>[Vn(b,{show:Nt(_e)},{default:On(()=>[Nt(J)?.relatedItems?.length?(os(),zi(ge,{key:0,style:{"max-height":"400px"}},{default:On(()=>[(os(!0),Kr(jr,null,Vv(Nt(J)?.relatedItems,l=>(os(),zi(le,{key:l.id,embedded:"",size:"small",class:"mb-2"},{default:On(()=>[Gs("div",Tv,[Gs("div",Uv,[Gs("span",Mv,Ks(Nt(a)(l,r(l))),1),Gs("span",Nv,Ks(Nt(i)(r(l)?.title)),1)]),Vn(g,null,{default:On(()=>[Vn(x,{size:"small",type:"error",secondary:"",onClick:o=>T(l)},{default:On(()=>[Vn(C,null,{default:On(()=>[Vn(k,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(os(),zi(le,{key:1,size:"large",class:Sv(`mb-2 !border-dashed !border-2 ${Nt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:On(()=>[Vn(W,{description:Nt(s)("noLinkAdded")},{icon:On(()=>[Vn(C,null,{default:On(()=>[Vn(k,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Vn(h,{show:Nt(U),"onUpdate:show":f[6]||(f[6]=l=>Ev(U)?U.value=l:null),loading:Nt(_e),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Nt(s)("addLink"),"positive-text":Nt(s)("validate"),"negative-text":Nt(s)("cancel"),onPositiveClick:j,onNegativeClick:f[7]||(f[7]=l=>U.value=!1)},{default:On(()=>[Vn(S,{ref_key:"formRef",ref:pe,model:Nt(ne),rules:D,"show-require-mark":!1,size:"medium",class:"my-5"},{default:On(()=>[Vn($,{label:Nt(s)("contentModel"),path:"contentModelId"},{default:On(()=>[Vn(xe,{value:Nt(ne).contentModelId,"onUpdate:value":f[3]||(f[3]=l=>Nt(ne).contentModelId=l),options:Nt(c),placeholder:Nt(s)("contentModel"),"render-label":te,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Vn($,{label:Nt(s)("itemToLink"),path:"itemId"},{default:On(()=>[Vn(xe,{value:Nt(ne).itemId,"onUpdate:value":f[4]||(f[4]=l=>Nt(ne).itemId=l),options:Nt(d)||[],placeholder:Nt(s)("itemToLink"),"render-label":l=>M(l).value,loading:Nt(A),disabled:!Nt(ne).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f[5]||(f[5]=l=>K(l,Nt(ne).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Av}=await me("vue"),{useModel:Pv,defineComponent:Bv}=await me("vue"),{unref:ye,toDisplayString:Jt,createTextVNode:Mn,resolveComponent:Ay,isRef:wo,withCtx:Se,createVNode:Ve,createElementVNode:Nn,openBlock:_n,createElementBlock:Ul,createCommentVNode:Xa,renderList:Hr,Fragment:Za,withModifiers:ko,createBlock:oa,normalizeClass:Wr}=await me("vue"),Lv={key:0,class:"w-full flex items-center justify-between gap-4"},Fv={class:"flex items-center gap-3"},Ov={key:0},Rv={class:"flex items-center justify-center h-full"},qv=["src"],jv={class:"text-center text-dimgray text-sm"},Kv={class:"flex items-center"},Gv={class:"text-base"},Yv={key:1,class:"flex items-center justify-center"},Hv={key:0},Wv={key:1},{ref:fl,computed:Qr,watch:Qv,isReadonly:Py,provide:Jv}=await me("vue"),{defineStore:Xv}=await me("pinia"),Zv=Bv({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const{t:e}=Ne(),{extractItemTitle:s,getContentModelItemCreatorTypeLabel:n,getContentModelItemCreatorTypeTagType:i}=gs(),{tr:t,pickByTheme:a}=ut(),c=An(),I=Xe(),_e=Qc(),se=Pv(m,"modelValue"),L=fl(!1),be=fl(!1),J=fl(!1),T=fl(!1),r=fl([]),{mutate:U}=yd(),{mutate:pe}=bd(),{mutate:ne}=Ec(),{mutate:D}=hd(),j=fl(0),te=fl(24),M=fl(1),z=Qr(()=>({contentModelId:se.value?.id,pageSize:te.value,page:M.value})),q=o=>{M.value=o,K()},H=o=>{te.value=o,K()},{data:A,refetch:K,isPending:d}=Jc(z);Qv(()=>A.value,o=>{r.value=o?.items||[],j.value=o?.meta?.total||0,M.value=o?.meta?.currentPage||1},{deep:!0,immediate:!0});const V=fl(null),f=fl({title:"",contentModelData:"",isActive:!0}),k=(o,y=!1)=>{V.value=de.cloneDeep(o),T.value=y,o?f.value=de.cloneDeep(o):f.value={title:"",contentModelData:"",isActive:!0},L.value=!0},x=o=>{V.value=de.cloneDeep(o),J.value=!0},g=o=>{V.value=de.cloneDeep(o),be.value=!0},C=async o=>{await K();const y=r.value.find(N=>N.id===o);y&&x(y)},le=async o=>{c.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{o.id&&U({id:o.id})}})},ge=async o=>{const y={title:f.value.title,contentModelData:o,isActive:f.value.isActive,contentModelId:se.value?.id,createdByType:wd.ADMIN,createdBy:_e.userData?.id};V.value?ne({id:V.value.id,...y}):pe(y),L.value=!1},W=fl(!1),b=fl(En()),h=fl({}),xe=Qr(()=>{let o=0;for(const y in h.value)h.value[y]&&o++;return o});function $(){h.value={},b.value=En(),W.value=!1,K()}const S=async()=>(xe.value?c.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[xe.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{D(h.value,{onSuccess:()=>{h.value={}}})}}):I.warning(e("noItemSelected")),!1),l=Xv("content-model-items-store",()=>({uiFormat:fl("list")}))();return Jv("currentEditItem",V),(o,y)=>{const N=oo,F=ce,G=O,E=Le,P=yn,we=xl,Ge=vs,Z=_s,Re=wc,Ce=Vo,Ze=cl,B=gn,w=Il,v=Ol,Q=ll,mt=Vl,oe=rd,_t=id,ft=ql,yt=Rl,Qe=so,St=Ua,ve=Sl,Et=cd,fn=Wn;return _n(),Ul(Za,null,[Ve(we,{to:"#alt-action"},{default:Se(()=>[Ve(P,{align:"center"},{default:Se(()=>[Ve(N,{checked:ye(W),"onUpdate:checked":[y[0]||(y[0]=ue=>wo(W)?W.value=ue:null),y[1]||(y[1]=ue=>{for(const Kt of ye(r))Kt.id&&(ye(h)[Kt.id]=ue);b.value=("uuidv4"in o?o.uuidv4:Av(En))()})],disabled:!ye(r).length},{default:Se(()=>[Mn(Jt(ye(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Ve(E,{type:"primary",secondary:"",onClick:y[2]||(y[2]=ue=>k(null))},{icon:Se(()=>[Ve(G,{size:"18"},{default:Se(()=>[Ve(F,{icon:"carbon:add-alt"})]),_:1})]),default:Se(()=>[Mn(" "+Jt(ye(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Ve(Re,{class:"mt-2 mb-5",onBack:y[4]||(y[4]=ue=>se.value=null)},{title:Se(()=>[Mn(Jt(ye(t)(se.value?.title)),1)]),back:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Se(()=>[Ve(P,null,{default:Se(()=>[ye(xe)>0?(_n(),Ul("section",Lv,[Nn("span",null,Jt(ye(e)("nbItemsSelected",[ye(xe)])),1),Nn("section",Fv,[Ve(E,{type:"error",secondary:"",size:"small",onClick:S},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:trash-can"})]),_:1})]),default:Se(()=>[Mn(" "+Jt(ye(e)("delete")),1)]),_:1}),Ve(E,{type:"warning",secondary:"",size:"small",onClick:$},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:close-filled"})]),_:1})]),default:Se(()=>[Mn(" "+Jt(ye(e)("cancelSelection")),1)]),_:1})])])):Xa("",!0),Ve(Z,{value:ye(l).uiFormat,"onUpdate:value":y[3]||(y[3]=ue=>ye(l).uiFormat=ue),size:"small",class:"w-full"},{default:Se(()=>[Ve(Ge,{value:"grid",class:"w-[50%]"},{default:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:grid"})]),_:1})]),_:1}),Ve(Ge,{value:"list",class:"w-[50%]"},{default:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:list"})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),ye(r).length&&!ye(d)?(_n(),Ul("section",Ov,[ye(l).uiFormat=="grid"?(_n(),oa(Q,{key:0,"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Se(()=>[(_n(!0),Ul(Za,null,Hr(ye(r),(ue,Kt)=>(_n(),oa(v,{key:Kt},{default:Se(()=>[Ve(w,{name:"slide-fade",appear:""},{default:Se(()=>[Ve(B,{size:"small",bordered:"",hoverable:""},{cover:Se(()=>[Nn("div",Rv,[Nn("img",{src:se.value?.imageUrl??ye(pv),class:"w-full h-[200px] object-cover"},null,8,qv)])]),header:Se(()=>[Nn("div",jv,[Ve(Ce,{"line-clamp":1,"expand-trigger":"click"},{default:Se(()=>[ue.id?(_n(),oa(N,{key:ye(b)+ue.id,checked:ye(h)[ue.id],"onUpdate:checked":bt=>ye(h)[ue.id]=bt,class:"mr-1",onClick:y[5]||(y[5]=ko(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):Xa("",!0),Mn(" "+Jt(ye(s)(ue,se.value)||`${ye(e)("unnamedItem")} (${Kt+1})`),1)]),_:2},1024)])]),action:Se(()=>[Ve(P,{justify:"space-between",align:"center"},{default:Se(()=>[Ve(Ze,{bordered:!1,type:ue.isActive?"success":"error"},{default:Se(()=>[Mn(Jt(ue.isActive?ye(e)("published"):ye(e)("unpublished")),1)]),_:2},1032,["type"]),Ve(P,null,{default:Se(()=>[Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("about"),onClick:bt=>g(ue)},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:information-filled"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("preview"),onClick:bt=>k(ue,!0)},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("edit"),onClick:bt=>k(ue)},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("links"),onClick:bt=>x(ue)},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"error",secondary:"",title:ye(e)("delete"),onClick:bt=>le(ue)},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_n(!0),Ul(Za,{key:1},Hr(ye(r),(ue,Kt)=>(_n(),oa(B,{key:Kt,embedded:"",size:"small",class:"mb-2"},{default:Se(()=>[Ve(yt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Se(({collapsed:bt})=>[Ve(P,{align:"center",justify:"space-between"},{default:Se(()=>[Ve(Ze,{bordered:!1,type:ue.isActive?"success":"error"},{default:Se(()=>[Mn(Jt(ue.isActive?ye(e)("published"):ye(e)("unpublished")),1)]),_:2},1032,["type"]),Ve(G,null,{default:Se(()=>[bt?(_n(),oa(F,{key:0,icon:"fa-solid:chevron-left"})):(_n(),oa(F,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Se(()=>[...y[12]||(y[12]=[Nn("span",null,null,-1)])]),default:Se(()=>[Ve(ft,{name:"1"},{header:Se(()=>[Nn("div",Kv,[Ve(P,null,{default:Se(()=>[ue.id?(_n(),oa(N,{key:ye(b)+ue.id,checked:ye(h)[ue.id],"onUpdate:checked":bt=>ye(h)[ue.id]=bt,class:"mr-1",onClick:y[6]||(y[6]=ko(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):Xa("",!0)]),_:2},1024),Ve(mt,{vertical:"",class:Wr(ye(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ve(P,null,{default:Se(()=>[Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("preview"),onClick:ko(bt=>k(ue,!0),["stop"])},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("edit"),onClick:ko(bt=>k(ue),["stop"])},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"primary",secondary:"",title:ye(e)("links"),onClick:ko(bt=>x(ue),["stop"])},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Ve(E,{size:"small",type:"error",secondary:"",title:ye(e)("delete"),onClick:ko(bt=>le(ue),["stop"])},{icon:Se(()=>[Ve(G,null,{default:Se(()=>[Ve(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),Ve(mt,{vertical:"",class:Wr(ye(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Nn("span",Gv,Jt(ye(s)(ue,se.value)||`${ye(e)("unnamedItem")} (${Kt+1})`),1)])]),default:Se(()=>[Ve(_t,{"label-placement":"left",bordered:""},{default:Se(()=>[ue?.createdByType?(_n(),oa(oe,{key:0},{label:Se(()=>[Mn(Jt(ye(e)("source")),1)]),default:Se(()=>[Ve(Ze,{size:"small",type:ye(i)(ue?.createdByType)},{default:Se(()=>[Mn(Jt(ye(n)(ue?.createdByType)),1)]),_:2},1032,["type"])]),_:2},1024)):Xa("",!0),Ve(oe,null,{label:Se(()=>[Mn(Jt(ye(e)("addedBy")),1)]),default:Se(()=>[ue?.createdByUser?(_n(),Ul(Za,{key:0},[Mn(Jt(`${ue?.createdByUser?.firstname} ${ue?.createdByUser?.lastname}`),1)],64)):(_n(),Ul(Za,{key:1},[Mn(Jt(ye(e)("undefined")),1)],64))]),_:2},1024),ue?.createdByUser?.createdAt?(_n(),oa(oe,{key:1},{label:Se(()=>[Mn(Jt(ye(e)("date")),1)]),default:Se(()=>[Mn(" "+Jt(ye(Fl)(ue?.createdByUser?.createdAt)),1)]),_:2},1024)):Xa("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Ve(Qe,{page:ye(M),"onUpdate:page":[y[7]||(y[7]=ue=>wo(M)?M.value=ue:null),q],class:"mt-10 justify-center","show-size-picker":"","page-size":ye(te),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(ye(j)/ye(te)),"onUpdate:pageSize":H},{prefix:Se(()=>[Mn(Jt(`${ye(j)} ${ye(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):ye(d)?(_n(),Ul("section",Yv,[Ve(St,{size:"medium"})])):(_n(),oa(ve,{key:2,description:ye(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Ve($v,{show:ye(L),"onUpdate:show":y[8]||(y[8]=ue=>wo(L)?L.value=ue:null),data:ye(f),"onUpdate:data":y[9]||(y[9]=ue=>wo(f)?f.value=ue:null),"content-model":se.value,"submit-data":ge,readonly:ye(T)},null,8,["show","data","content-model","readonly"]),Ve(Dv,{show:ye(J),"onUpdate:show":y[10]||(y[10]=ue=>wo(J)?J.value=ue:null),onUpdate:C},null,8,["show"]),Ve(fn,{show:ye(be),"onUpdate:show":y[11]||(y[11]=ue=>wo(be)?be.value=ue:null),preset:"card",style:{width:"450px"},bordered:!1,"show-icon":!1,title:ye(e)("about")},{default:Se(()=>[Ve(Et,{striped:"","single-line":!1,size:"small"},{default:Se(()=>[Nn("tbody",null,[ye(V)?.createdByType?(_n(),Ul("tr",Hv,[Nn("td",null,[Nn("b",null,Jt(ye(e)("source")),1)]),Nn("td",null,[Ve(Ze,{size:"small",type:ye(i)(ye(V)?.createdByType)},{default:Se(()=>[Mn(Jt(ye(n)(ye(V)?.createdByType)),1)]),_:1},8,["type"])])])):Xa("",!0),Nn("tr",null,[Nn("td",null,[Nn("b",null,Jt(ye(e)("addedBy")),1)]),Nn("td",null,[ye(V)?.createdByUser?(_n(),Ul(Za,{key:0},[Mn(Jt(`${ye(V)?.createdByUser?.firstname} ${ye(V)?.createdByUser?.lastname}`),1)],64)):(_n(),Ul(Za,{key:1},[Mn(Jt(ye(e)("undefined")),1)],64))])]),ye(V)?.createdByUser?.createdAt?(_n(),Ul("tr",Wv,[Nn("td",null,[Nn("b",null,Jt(ye(e)("date")),1)]),Nn("td",null,Jt(ye(Fl)(ye(V)?.createdByUser?.createdAt)),1)])):Xa("",!0)])]),_:1})]),_:1},8,["show","title"])],64)}}}),e1=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["content-models"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/content-models",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},t1=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["content-models"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/content-models/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},n1=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["content-models"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/content-models/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},{defineComponent:l1}=await me("vue"),{unref:ee,resolveComponent:By,createVNode:Ee,withCtx:Ue,toDisplayString:nl,createTextVNode:rl,openBlock:Rn,createBlock:hl,createCommentVNode:eo,isRef:is,renderList:a1,Fragment:Jr,createElementBlock:rs,withModifiers:Ys,createElementVNode:Hs,normalizeClass:Xr,normalizeStyle:o1}=await me("vue"),s1={key:2},i1={key:0},r1={class:"flex items-center"},c1={class:"text-base"},d1={key:0,class:"mt-4"},{inject:u1,ref:wl,computed:Zr,watch:p1}=await me("vue"),{defineStore:ec}=await me("pinia"),m1="previews",f1=l1({__name:"index",setup(m){const{t:e}=Ne(),{contentModelIntents:s,contentModelAccessScopes:n,getContentModelIntentLabel:i,getContentModelIntentTagType:t,getContentModelAccessScopeLabel:a,getContentModelAccessScopeTagType:c}=gs(),{tr:I,pickByTheme:_e,fileUrl:se,isInDevMode:L,formatKey:be,appPrimaryColor:J}=ut(),{data:T}=ao(),{mutate:r,isPending:U}=n1(),{mutate:pe,isPending:ne}=e1(),{mutate:D,isPending:j}=t1(),te=An(),M=u1("appConfig"),z=ec("content-models-store",()=>({currentTab:wl("all")}))(),q=Zr(()=>z.currentTab=="all"?T.value:T.value?.filter(G=>G.intent==z.currentTab)),H=wl(""),A=wl(),K=Zr(()=>{if(!H.value)return q.value||[];const G=(q.value||[]).filter(E=>E.title.toLowerCase().includes(H.value.toLowerCase())||E.description?.toLowerCase().includes(H.value.toLowerCase()));return A.value&&A.value.focus(),G}),d=wl(24),V=wl(1),f=G=>{d.value=G},k={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",intent:hs.EDITORIAL_CONTENT,accessScope:kd.INTERNAL,hasPermalink:!1},x=wl(!1),g=wl(null),C=wl(k),le={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}],intent:[{required:!0,message:e("fillRequired")}],accessScope:[{required:!0,message:e("fillRequired")}]},ge=wl(null),W=G=>{ge.value=de.cloneDeep(G),C.value=de.cloneDeep(G||k),x.value=!0},b=async()=>(g.value?.validate(async G=>{if(!G){const E={id:ge.value?.id||0,name:C.value.name,title:C.value.title,image:C.value.image,description:C.value.description,titleFieldName:C.value.titleFieldName,intent:C.value.intent,accessScope:C.value.accessScope,hasPermalink:C.value.hasPermalink};ge.value?D(E,{onSuccess:()=>{}}):pe(E,{onSuccess:()=>{}}),x.value=!1}}),!1),h=async G=>{te.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{r({id:G.id||0})}})},xe=wl(null),$=wl(!1),S=G=>{xe.value=G,$.value=!0},l=async G=>{D({id:xe.value?.id||0,hasPermalink:xe.value?.hasPermalink,dataStructure:G},{onSuccess:E=>{S(E)}})},o=wl(!1),y=async G=>{C.value.image=G,o.value=!1},N=()=>{C.value.image=""},F=ec("content-models-management",()=>({itemsContentModel:wl(null)}))();return p1(()=>C.value.title,G=>{ge.value||C.value.name.length<=21&&(C.value.name=zc(I(G),{trim:!0,lower:!0,strict:!0}))}),(G,E)=>{const P=ce,we=O,Ge=Le,Z=xl,Re=ji,Ce=jt,Ze=Xs,B=yn,w=Vl,v=cl,Q=ql,mt=Rl,oe=gn,_t=so,ft=Sl,yt=Il,Qe=Cl,St=ul,ve=Ml,Et=Ol,fn=ll,ue=Yi,Kt=ba,bt=oo,Nl=dl,El=Wn,zl=ms;return Rn(),rs(Jr,null,[ee(F).itemsContentModel?eo("",!0):(Rn(),hl(Z,{key:0,to:"#alt-action"},{default:Ue(()=>[ee(T)&&ee(T).length?(Rn(),hl(Ge,{key:0,type:"primary",secondary:"",onClick:E[0]||(E[0]=st=>W(null))},{icon:Ue(()=>[Ee(we,{size:"18"},{default:Ue(()=>[Ee(P,{icon:"carbon:add-alt"})]),_:1})]),default:Ue(()=>[rl(" "+nl(ee(e)("addContentModel")),1)]),_:1})):eo("",!0)]),_:1})),ee(F).itemsContentModel?(Rn(),hl(Zv,{key:1,modelValue:ee(F).itemsContentModel,"onUpdate:modelValue":E[1]||(E[1]=st=>ee(F).itemsContentModel=st)},null,8,["modelValue"])):(Rn(),rs("section",s1,[Ee(yt,{appear:"",name:"slide-fade"},{default:Ue(()=>[Hs("section",null,[Ee(Ze,{value:ee(z).currentTab,"onUpdate:value":E[3]||(E[3]=st=>ee(z).currentTab=st),type:"card",size:"medium",class:"mb-2"},{suffix:Ue(()=>[Ee(Ce,{ref_key:"searchInputRef",ref:A,value:ee(H),"onUpdate:value":E[2]||(E[2]=st=>is(H)?H.value=st:null),clearable:!0,placeholder:ee(e)("search"),class:"!w-[250px]"},{suffix:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),default:Ue(()=>[Ee(Re,{name:"all"},{default:Ue(()=>[Ee(we,{size:"18",class:"mr-1"},{default:Ue(()=>[Ee(P,{icon:"carbon:table-of-contents"})]),_:1}),rl(" "+nl(ee(e)("all")),1)]),_:1}),Ee(Re,{name:ee(hs).EDITORIAL_CONTENT},{default:Ue(()=>[Ee(we,{size:"18",class:"mr-1"},{default:Ue(()=>[Ee(P,{icon:"carbon:blog"})]),_:1}),rl(" "+nl(ee(e)("editorialContent")),1)]),_:1},8,["name"]),Ee(Re,{name:ee(hs).USER_DATA},{default:Ue(()=>[Ee(we,{size:"18",class:"mr-1"},{default:Ue(()=>[Ee(P,{icon:"carbon:group-presentation"})]),_:1}),rl(" "+nl(ee(e)("userEntries")),1)]),_:1},8,["name"]),Ee(Re,{name:ee(hs).SYSTEM_DATA},{default:Ue(()=>[Ee(we,{size:"18",class:"mr-1"},{default:Ue(()=>[Ee(P,{icon:"carbon:terminal"})]),_:1}),rl(" "+nl(ee(e)("systemData")),1)]),_:1},8,["name"])]),_:1},8,["value"]),ee(K)&&ee(K).length?(Rn(),rs("section",i1,[(Rn(!0),rs(Jr,null,a1(ee(K).slice((ee(V)-1)*ee(d),ee(V)*ee(d)),st=>(Rn(),hl(oe,{key:st.id,embedded:"",size:"small",class:"mb-2"},{default:Ue(()=>[Ee(mt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ue(({collapsed:Pn})=>[Ee(B,{align:"center",justify:"space-between"},{default:Ue(()=>[Ee(Ge,{size:"small",type:"primary",secondary:"",onClick:Ys(qn=>ee(F).itemsContentModel=st,["stop"])},{icon:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:arrow-right"})]),_:1})]),default:Ue(()=>[rl(" "+nl(ee(e)("open")),1)]),_:1},8,["onClick"]),Ee(we,null,{default:Ue(()=>[Pn?(Rn(),hl(P,{key:0,icon:"fa-solid:chevron-left"})):(Rn(),hl(P,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ue(()=>[...E[19]||(E[19]=[Hs("span",null,null,-1)])]),default:Ue(()=>[Ee(Q,{name:"1"},{header:Ue(()=>[Hs("div",r1,[ee(L)?(Rn(),hl(B,{key:0},{default:Ue(()=>[Ee(Ge,{size:"small",type:"primary",secondary:"",onClick:Ys(Pn=>S(st),["stop"])},{default:Ue(()=>[Ee(we,{class:"mr-1"},{default:Ue(()=>[Ee(P,{icon:"carbon:data-1"})]),_:1}),rl(" "+nl(ee(e)("dataStructure")),1)]),_:1},8,["onClick"]),Ee(Ge,{size:"small",type:"primary",secondary:"",onClick:Ys(Pn=>W(st),["stop"])},{default:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ee(Ge,{size:"small",type:"error",secondary:"",onClick:Ys(Pn=>h(st),["stop"])},{default:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):eo("",!0),ee(L)?(Rn(),hl(w,{key:1,vertical:"",class:Xr(ee(_e)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):eo("",!0),Hs("span",c1,nl(ee(I)(st.title)),1)])]),default:Ue(()=>[Ee(B,null,{default:Ue(()=>[Ee(v,{size:"small",type:ee(t)(st.intent)},{default:Ue(()=>[rl(nl(ee(i)(st.intent)),1)]),_:2},1032,["type"]),Ee(v,{size:"small",type:ee(c)(st.accessScope)},{default:Ue(()=>[rl(nl(ee(a)(st.accessScope)),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Ee(_t,{page:ee(V),"onUpdate:page":E[4]||(E[4]=st=>is(V)?V.value=st:null),class:"mt-5 justify-end","show-size-picker":"","page-size":ee(d),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(ee(K).length/ee(d)),"onUpdate:pageSize":f},{prefix:Ue(()=>[rl(nl(`${ee(K).length} ${ee(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):(Rn(),hl(oe,{key:1,size:"large",class:Xr(`mb-2 !border-dashed !border-2 ${ee(_e)("!border-zinc-300","!border-zinc-600")}`)},{default:Ue(()=>[Ee(ft,{description:ee(e)("noContentModelAvailable")},{icon:Ue(()=>[Ee(we,null,{default:Ue(()=>[ee(H)?(Rn(),hl(P,{key:0,icon:"carbon:search"})):(Rn(),hl(P,{key:1,icon:"carbon:model-alt"}))]),_:1})]),extra:Ue(()=>[ee(H)?eo("",!0):(Rn(),rs("div",d1,[Ee(Ge,{size:"small",secondary:"",onClick:E[5]||(E[5]=st=>W(null))},{icon:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:add-alt"})]),_:1})]),default:Ue(()=>[rl(" "+nl(ee(e)("addContentModel")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Ee(El,{show:ee(x),"onUpdate:show":E[15]||(E[15]=st=>is(x)?x.value=st:null),loading:ee(ne)||ee(j)||ee(U),preset:"dialog",style:{width:"540px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ee(ge)?ee(e)("editContentModel"):ee(e)("addContentModel"),"positive-text":ee(e)("validate"),"negative-text":ee(e)("cancel"),onPositiveClick:b,onNegativeClick:E[16]||(E[16]=st=>x.value=!1)},{default:Ue(()=>[Ee(Nl,{ref_key:"formRef",ref:g,model:ee(C),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Ue(()=>[Ee(St,{"show-label":!1,path:"title"},{default:Ue(()=>[Ee(Qe,{modelValue:ee(C).title,"onUpdate:modelValue":E[6]||(E[6]=st=>ee(C).title=st),placeholder:ee(e)("title"),class:"w-full",sync:""},{label:Ue(()=>[rl(nl(ee(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ee(St,{"show-label":!1,path:"description"},{default:Ue(()=>[Ee(Qe,{modelValue:ee(C).description,"onUpdate:modelValue":E[7]||(E[7]=st=>ee(C).description=st),placeholder:ee(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Ue(()=>[rl(nl(ee(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ee(fn,{"x-gap":"12",span:24},{default:Ue(()=>[Ee(Et,{span:12},{default:Ue(()=>[Ee(St,{path:"intent",label:ee(e)("finality")},{default:Ue(()=>[Ee(ve,{value:ee(C).intent,"onUpdate:value":E[8]||(E[8]=st=>ee(C).intent=st),options:ee(s)||[],placeholder:ee(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),Ee(Et,{span:12},{default:Ue(()=>[Ee(St,{path:"accessScope",label:ee(e)("accessScope")},{default:Ue(()=>[Ee(ve,{value:ee(C).accessScope,"onUpdate:value":E[9]||(E[9]=st=>ee(C).accessScope=st),options:ee(n)||[],placeholder:ee(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),Ee(fn,{"x-gap":"12",span:24},{default:Ue(()=>[Ee(Et,{span:14},{default:Ue(()=>[Ee(St,{label:ee(e)("contentModelKey"),path:"name"},{default:Ue(()=>[Ee(Ce,{value:ee(C).name,placeholder:ee(e)("contentModelKey"),class:"w-full","onUpdate:value":E[10]||(E[10]=st=>ee(C).name=ee(be)(st))},null,8,["value","placeholder"])]),_:1},8,["label"]),Ee(St,{label:ee(e)("titleSingletonKey"),path:"titleFieldName"},{default:Ue(()=>[Ee(Ce,{value:ee(C).titleFieldName,placeholder:ee(e)("titleSingletonKey"),class:"w-full","onUpdate:value":E[11]||(E[11]=st=>ee(C).titleFieldName=ee(be)(st))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Ee(Kt,{span:10,label:ee(e)("itemsPreview"),path:"image"},{default:Ue(()=>[Ee(B,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:Ue(()=>[Ee(ue,{class:"cursor-pointer","object-fit":"cover",style:o1("border: 1px dashed "+ee(_e)(ee(J),"white")),size:150,src:ee(se)(ee(C).image||""),onClick:E[12]||(E[12]=st=>o.value=!0)},{default:Ue(()=>[ee(C).image?eo("",!0):(Rn(),hl(we,{key:0,size:64},{default:Ue(()=>[Ee(P,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),ee(C).image?(Rn(),hl(Ge,{key:0,quaternary:"",onClick:E[13]||(E[13]=st=>N())},{icon:Ue(()=>[Ee(we,null,{default:Ue(()=>[Ee(P,{icon:"carbon:trash-can"})]),_:1})]),default:Ue(()=>[rl(" "+nl(ee(e)("clear")),1)]),_:1})):eo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),Ee(St,{"show-label":!1,path:"hasPermalink"},{default:Ue(()=>[Ee(bt,{checked:ee(C).hasPermalink,"onUpdate:checked":E[14]||(E[14]=st=>ee(C).hasPermalink=st)},{default:Ue(()=>[rl(nl(ee(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ee(zl,{show:ee(o),"onUpdate:show":E[17]||(E[17]=st=>is(o)?o.value=st:null),title:ee(e)("selectImage"),"upload-config":{folder:m1,limit:0,maxSize:0,baseUrl:ee(M)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:y},null,8,["show","title","upload-config"]),Ee(Nc,{show:ee($),"onUpdate:show":E[18]||(E[18]=st=>is($)?$.value=st:null),title:ee(I)(ee(xe)?.title),"raw-data-structure":ee(xe)?.dataStructure,"update-data-structure":l},null,8,["show","title","raw-data-structure"])]))],64)}}});var va=(m=>(m.NEWS_TAG="news-tag",m.NEWS_CATEGORY="news-category",m.NEWS_ARTICLE="news-article",m.CONTENT_MODEL="content-model",m))(va||{});const _1=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["permalinks"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:"/permalinks",data:a});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},{defineComponent:v1}=await me("vue"),{unref:We,resolveComponent:Ly,createVNode:vt,withCtx:gt,toDisplayString:Dn,createTextVNode:g1,openBlock:Ea,createBlock:$o,createCommentVNode:y1,createElementVNode:Sn,renderList:b1,Fragment:tc,createElementBlock:nc}=await me("vue"),h1={class:"text-base font-bold"},w1={class:"text-sm"},k1={class:"text-xs text-slate-400"},$1={class:"text-xs text-slate-400"},x1={class:"text-xs text-slate-400"},C1={class:"text-sm"},I1={class:"text-xs text-slate-400"},V1={class:"text-xs text-slate-400"},S1={class:"text-xs text-slate-400"},E1={class:"text-sm"},z1={class:"text-xs text-slate-400"},T1={class:"text-xs text-slate-400"},U1={class:"text-xs text-slate-400"},M1={class:"text-base font-bold"},N1={class:"text-sm"},D1={class:"text-xs text-slate-400"},A1={class:"text-xs text-slate-400"},P1={class:"text-xs text-slate-400"},{ref:lc,computed:ac,h:B1}=await me("vue"),L1=v1({__name:"index",setup(m){const{t:e}=Ne(),{tr:s}=ut(),{data:n}=Ri(),{data:i,refetch:t}=ao({enabled:!1}),{data:a,refetch:c}=Xc({enabled:!1}),{mutate:I,isPending:_e}=_1(),se=[{pathPrefix:"/news/article",contentType:va.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:va.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:va.NEWS_TAG,contentParam:"slug",pageId:null}],L=lc(se),be=lc(),J=ac(()=>i.value?.filter(D=>D.hasPermalink)),T=async(D=!1)=>{D&&await t(),await c(),L.value=de.cloneDeep(se);for(let j=0;j<(J.value?.length||0);j++)L.value.push({pathPrefix:`/${J.value?.[j].slug}`,contentType:va.CONTENT_MODEL,contentParam:"id",contentId:J.value?.[j].id,pageId:null});for(let j=0;j<L.value.length;j++)switch(L.value[j].contentType){case va.NEWS_ARTICLE:case va.NEWS_CATEGORY:case va.NEWS_TAG:{const te=a.value?.find(M=>M.contentType===L.value[j].contentType);te&&(L.value[j].pathPrefix=te.pathPrefix,L.value[j].contentParam=te.contentParam,L.value[j].pageId=te.pageId,L.value[j].permalinkId=te.id)}break;case va.CONTENT_MODEL:{const te=a.value?.find(M=>M.contentType===L.value[j].contentType&&M.contentId===L.value[j].contentId);te&&(L.value[j].pathPrefix=te.pathPrefix,L.value[j].contentParam=te.contentParam,L.value[j].pageId=te.pageId,L.value[j].permalinkId=te.id)}break}be.value=de.cloneDeep(L.value)};T(!0);const r=async()=>{I(L.value,{onSuccess:()=>{T()}})},U=ac(()=>de.isEqual(L.value,be.value)),pe=D=>B1("span",{},{default:()=>s(D.title)}),ne=D=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(D);return(D,j)=>{const te=ce,M=O,z=Le,q=xl,H=jt,A=Ol,K=Ml,d=ll,V=gn,f=ql,k=Rl,x=Vl;return Ea(),nc(tc,null,[vt(q,{to:"#alt-action"},{default:gt(()=>[vt(z,{secondary:"",type:"primary",loading:We(_e),disabled:We(U),onClick:j[0]||(j[0]=g=>r())},{icon:gt(()=>[vt(M,null,{default:gt(()=>[vt(te,{icon:"carbon:save"})]),_:1})]),default:gt(()=>[g1(" "+Dn(We(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),vt(V,{embedded:"",size:"small"},{default:gt(()=>[vt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:g})=>[vt(M,null,{default:gt(()=>[g?(Ea(),$o(te,{key:0,icon:"fa-solid:chevron-left"})):(Ea(),$o(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>[...j[10]||(j[10]=[Sn("span",null,null,-1)])]),default:gt(()=>[vt(f,{name:"1"},{header:gt(()=>[Sn("span",h1,Dn(We(e)("news")),1)]),default:gt(()=>[vt(V,{size:"small"},{header:gt(()=>[Sn("span",w1,Dn(We(e)("articles")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",k1,Dn(We(e)("pathPrefix")),1),vt(H,{value:We(L)[0].pathPrefix,"onUpdate:value":j[1]||(j[1]=g=>We(L)[0].pathPrefix=g),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",$1,Dn(We(e)("contentParam")),1),vt(H,{value:We(L)[0].contentParam,"onUpdate:value":j[2]||(j[2]=g=>We(L)[0].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",x1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[0].pageId,"onUpdate:value":j[3]||(j[3]=g=>We(L)[0].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":pe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(V,{size:"small"},{header:gt(()=>[Sn("span",C1,Dn(We(e)("categories")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",I1,Dn(We(e)("pathPrefix")),1),vt(H,{value:We(L)[1].pathPrefix,"onUpdate:value":j[4]||(j[4]=g=>We(L)[1].pathPrefix=g),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",V1,Dn(We(e)("contentParam")),1),vt(H,{value:We(L)[1].contentParam,"onUpdate:value":j[5]||(j[5]=g=>We(L)[1].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",S1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[1].pageId,"onUpdate:value":j[6]||(j[6]=g=>We(L)[1].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":pe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(V,{size:"small"},{header:gt(()=>[Sn("span",E1,Dn(We(e)("tags")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",z1,Dn(We(e)("pathPrefix")),1),vt(H,{value:We(L)[2].pathPrefix,"onUpdate:value":j[7]||(j[7]=g=>We(L)[2].pathPrefix=g),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",T1,Dn(We(e)("contentParam")),1),vt(H,{value:We(L)[2].contentParam,"onUpdate:value":j[8]||(j[8]=g=>We(L)[2].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",U1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[2].pageId,"onUpdate:value":j[9]||(j[9]=g=>We(L)[2].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":pe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),vt(x,{class:"!my-2"}),We(J)?.length&&We(L).length>3?(Ea(),$o(V,{key:0,embedded:"",size:"small"},{default:gt(()=>[vt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:g})=>[vt(M,null,{default:gt(()=>[g?(Ea(),$o(te,{key:0,icon:"fa-solid:chevron-left"})):(Ea(),$o(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>[...j[11]||(j[11]=[Sn("span",null,null,-1)])]),default:gt(()=>[vt(f,{name:"1"},{header:gt(()=>[Sn("span",M1,Dn(We(e)("contentModels")),1)]),default:gt(()=>[(Ea(!0),nc(tc,null,b1(We(J),(g,C)=>(Ea(),$o(V,{key:g.id,size:"small"},{header:gt(()=>[Sn("span",N1,Dn(We(s)(g.title)),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",D1,Dn(We(e)("pathPrefix")),1),vt(H,{value:We(L)[C+3].pathPrefix,"onUpdate:value":le=>We(L)[C+3].pathPrefix=le,"allow-input":ne,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(A,{span:"7"},{default:gt(()=>[Sn("span",A1,Dn(We(e)("contentParam")),1),vt(H,{value:We(L)[C+3].contentParam,"onUpdate:value":le=>We(L)[C+3].contentParam=le,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(A,{span:"7"},{default:gt(()=>[Sn("span",P1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[C+3].pageId,"onUpdate:value":le=>We(L)[C+3].pageId=le,options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":pe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):y1("",!0)],64)}}}),F1=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/campaigns",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},O1=m=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ne(),i=Xe(),t=ot();return wt({queryKey:["newsletter-campaigns"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/campaigns/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...m}})},R1=m=>{const{request:e}=et(),{t:s}=Ne(),n=Xe(),i=ot();return wt({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/campaigns/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...m}})},q1=()=>{const{displayFormErrors:m}=ut(),{request:e}=et(),{t:s}=Ne(),n=ot(),i=Xe();return Ta(async t=>{const a=await e({url:"/sms",method:"post",data:t.data});if(a.failure&&a.error)throw new Error(a.error);return a.result},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(t,a)=>{a.onSuccess?a.onSuccess(t):i.success(s("success"))},onError:(t,a)=>{if(a.onError)a.onError(t);else switch(t?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:m(t?.response?.data?.data);break;default:i.error(s("sendingFailed"))}},retry:2})},{unref:oc}=await me("vue"),{defineComponent:j1}=await me("vue"),{unref:Me,createVNode:rn,withCtx:$n,toDisplayString:cs,createTextVNode:ds,resolveComponent:Fy,createElementVNode:Ti,isRef:sc,renderList:K1,Fragment:ic,openBlock:us,createElementBlock:rc,createBlock:Ui}=await me("vue"),G1={class:"w-full"},{ref:to,h:Xt,computed:cc}=await me("vue"),Y1=j1({__name:"Campaign",setup(m){const e=Xe(),s=An(),{getSettingValue:n}=Zc(),{ckEditorToolbarItems:i}=ut(),{t,locale:a}=Ne(),{data:c}=Dc(),{data:I}=Ac(),{data:_e,isPending:se}=P_(),{mutate:L,isPending:be}=F1(),{mutate:J}=R1(),{mutate:T,isPending:r}=O1(),{mutate:U}=Ud(),{mutate:pe}=q1(),ne=to(""),D=to(),j={pageSize:12,prefix:({itemCount:g})=>Xt("div",{class:"font-bold"},{default:()=>`${t("total")}: ${g}`})},te=[{title:t("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(g){return Xt("div",{},{default:()=>g.title})}},{title:t("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(g){return Xt("small",{},{default:()=>g.subject})}},{title:t("numberOfRecipients"),key:"recipients",width:200,render(g){return Xt("div",{},{default:()=>g.recipients.length})},sortOrder:!1,sorter:"default"},{title:t("updateAt"),key:"updatedAt",width:150,render(g){return Xt("div",{},{default:()=>Fl(g.updatedAt,{locale:a.value,outPattern:"DD MMMM YYYY"})})}},{title:t("createdAt"),key:"createdAt",width:150,render(g){return Xt("div",{},{default:()=>Fl(g.createdAt,{locale:a.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Xt(jt,{ref:D,placeholder:t("search"),value:ne.value,onInput:g=>{ne.value=g}},{suffix:()=>Xt(O,{},{default:()=>Xt(ce,{icon:"carbon:search"})})}),key:"actions",width:175,render(g){return Xt("div",{class:"flex justify-end items-center w-full"},[Xt(Le,{size:"small",type:"primary",secondary:!0,title:t("history"),onClick:()=>{A.value=g,H.value=!0},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"mdi:history"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"info",secondary:!0,title:t("launchCampaign"),onClick:()=>{const C=s.info({title:t("launchCampaign"),content:t("confirmLaunchCampaign",[g.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{C.loading=!0,U({data:{title:g.title,subject:g.subject,content:g.content,recipients:g.recipients.filter(le=>xo.isEmail(le)),tags:[]},onSuccess:le=>{const ge=n("phone","string")?.split(",")[0];pe({data:{from:ge.replace(/\s+/g,""),content:g.rawContent,recipients:g.recipients.filter(W=>!xo.isEmail(W))},onSuccess:W=>{const b=g.history||[];b.push({id:En(),date:ed(new Date,{locale:a.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+le.message+" Phone: "+W.message}),T({id:g.id,history:b}),C.loading=!1},onError:()=>{C.loading=!1}})},onError:()=>{C.loading=!1}})}})},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"mdi:send"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"warning",secondary:!0,title:t("edit"),onClick:()=>{f(g)},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"carbon:edit"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"error",secondary:!0,title:t("delete"),onClick:()=>{s.warning({title:t("confirm"),content:t("confirmDeleteCampaign"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{g.id&&J({id:g.id})}})},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],M=cc(()=>{if(!ne.value)return _e.value;const g=_e.value?.filter(C=>C.title.toLowerCase().includes(ne.value.toLowerCase())||C.subject.toLowerCase().includes(ne.value.toLowerCase()));return D.value&&D.value.focus(),g}),z=cc(()=>[...(c.value||[]).map(g=>({recipient:g.email,type:"email"})),...(I.value||[]).map(g=>({recipient:g.phone,type:"phone"}))]),q=to(!1),H=to(!1),A=to(null),K=to(null),d=to({title:"",subject:"",content:"",rawContent:"",recipients:[]}),V={title:[{required:!0,message:t("fillRequired")}],subject:[{required:!0,message:t("fillRequired")}],content:[{required:!0,message:t("fillRequired")}],rawContent:[{required:!0,message:t("fillRequired")}],recipients:[{required:!0,message:t("fillRequired")}]},f=g=>{A.value=de.cloneDeep(g),g?d.value=de.cloneDeep(g):d.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},q.value=!0},k=async()=>(K.value?.validate(async g=>{if(!g){const C={title:d.value.title,subject:d.value.subject,content:d.value.content,rawContent:d.value.rawContent,recipients:d.value.recipients};A.value?A.value.title!==d.value.title&&(_e.value||[]).findIndex(le=>le.title==d.value.title)>-1?e.error(t("sameCampaignTitleMessage")):T({id:A.value.id,...C}):(_e.value||[]).findIndex(le=>le.title==d.value.title)>-1?e.error(t("sameCampaignTitleMessage")):L(C),q.value=!1}}),!1),x=(g,C)=>de.isEqual(g.slice().sort(),C.slice().sort());return(g,C)=>{const le=xl,ge=Qs,W=Ws,b=ul,h=Td,xe=oo,$=Ml,S=dl,l=Wn,o=dd,y=xc,N=$c,F=ya,G=Sl;return us(),rc(ic,null,[rn(le,{to:"#alt-action"},{default:$n(()=>[rn(Me(Le),{type:"primary",secondary:"",onClick:C[0]||(C[0]=E=>f(null))},{icon:$n(()=>[rn(Me(O),{size:"18"},{default:$n(()=>[rn(Me(ce),{icon:"carbon:add-alt"})]),_:1})]),default:$n(()=>[ds(" "+cs(Me(t)("addCampaign")),1)]),_:1})]),_:1}),rn(W,null,{default:$n(()=>[rn(ge,{columns:te,data:Me(M),pagination:j,loading:Me(se),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),rn(l,{show:Me(q),"onUpdate:show":C[9]||(C[9]=E=>sc(q)?q.value=E:null),loading:Me(be)||Me(r),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Me(A)?Me(t)("editCampaign"):Me(t)("addCampaign"),"positive-text":Me(t)("validate"),"negative-text":Me(t)("cancel"),onPositiveClick:k,onNegativeClick:C[10]||(C[10]=E=>q.value=!1)},{default:$n(()=>[rn(S,{ref_key:"formRef",ref:K,class:"mt-5",model:Me(d),rules:V,"show-require-mark":!1,size:"medium"},{default:$n(()=>[rn(b,{label:Me(t)("title"),path:"title"},{default:$n(()=>[rn(Me(jt),{value:Me(d).title,"onUpdate:value":C[1]||(C[1]=E=>Me(d).title=E),placeholder:Me(t)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(b,{label:Me(t)("subject"),path:"subject"},{default:$n(()=>[rn(Me(jt),{value:Me(d).subject,"onUpdate:value":C[2]||(C[2]=E=>Me(d).subject=E),placeholder:Me(t)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(b,{label:Me(t)("content"),path:"content"},{default:$n(()=>[Ti("div",G1,[rn(h,{modelValue:Me(d).content,"onUpdate:modelValue":C[3]||(C[3]=E=>Me(d).content=E),"toolbar-items":Me(i),placeholder:Me(t)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),rn(b,{label:Me(t)("rawContent"),path:"rawContent"},{default:$n(()=>[rn(Me(jt),{value:Me(d).rawContent,"onUpdate:value":C[4]||(C[4]=E=>Me(d).rawContent=E),placeholder:Me(t)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(b,{label:Me(t)("recipients"),path:"recipients"},{default:$n(()=>[rn($,{value:Me(d).recipients,"onUpdate:value":C[8]||(C[8]=E=>Me(d).recipients=E),options:Me(z),placeholder:Me(t)("recipients"),loading:Me(se),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:$n(()=>[rn(xe,{size:"large",class:"w-full","default-checked":Me(z).length&&x(Me(d).recipients,Me(z).filter(E=>E.type=="email").map(E=>E.recipient)),"onUpdate:checked":C[5]||(C[5]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.type=="email").map(P=>P.recipient):Me(d).recipients=Me(d).recipients.filter(P=>!("_v"in g?g._v:oc(xo)).isEmail(P))})},{default:$n(()=>[ds(cs(Me(t)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),C[12]||(C[12]=Ti("div",{class:"h-2"},null,-1)),rn(xe,{size:"large",class:"w-full","default-checked":Me(z).length&&x(Me(d).recipients,Me(z).filter(E=>E.type=="phone").map(E=>E.recipient)),"onUpdate:checked":C[6]||(C[6]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.type=="phone").map(P=>P.recipient):Me(d).recipients=Me(d).recipients.filter(P=>("_v"in g?g._v:oc(xo)).isEmail(P))})},{default:$n(()=>[ds(cs(Me(t)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),C[13]||(C[13]=Ti("div",{class:"h-2"},null,-1)),rn(xe,{size:"large",class:"w-full","default-checked":Me(z).length&&Me(d).recipients.length===Me(z).length,"onUpdate:checked":C[7]||(C[7]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.recipient).map(P=>P.recipient):Me(d).recipients=[]})},{default:$n(()=>[ds(cs(Me(t)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),rn(l,{show:Me(H),"onUpdate:show":C[11]||(C[11]=E=>sc(H)?H.value=E:null),loading:Me(r),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Me(t)("history")},{default:$n(()=>[Me(A)?.history?.length?(us(),Ui(F,{key:0,style:{"max-height":"400px"}},{default:$n(()=>[rn(N,{hoverable:""},{default:$n(()=>[(us(!0),rc(ic,null,K1(Me(A)?.history.slice().reverse(),E=>(us(),Ui(y,{key:E.id},{default:$n(()=>[rn(o,{title:E.date,"content-style":"margin-top: 10px;"},{default:$n(()=>[ds(cs(E.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(us(),Ui(G,{key:1,description:Me(t)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),H1=()=>{const{request:m}=et(),{t:e}=Ne(),s=ot(),n=Xe();return Ta(async i=>{const t=await m({url:"/app-information",method:"put",data:i});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:(i,t)=>{n.success(e("success"))},onError:(i,t)=>{n.error(e("unableToUpdateAppInformation"))}})},{defineComponent:W1}=await me("vue"),{unref:u,createVNode:Y,withCtx:ae,toDisplayString:Lt,createTextVNode:no,resolveComponent:Q1,openBlock:Dt,createBlock:fa,createCommentVNode:Hn,createElementBlock:vn,createElementVNode:$t,isRef:Mi,vShow:Ni,withDirectives:Di,normalizeStyle:_a,Fragment:lo,renderList:dc,TransitionGroup:J1,withKeys:X1}=await me("vue"),Z1={id:"header-btn"},eg={key:1,id:"alt-action"},tg={key:"basic-info"},ng={class:"text-xs"},lg={class:"text-xs"},ag={class:"text-xs"},og={class:"text-xs"},sg={class:"text-xs"},ig={class:"text-xs"},rg={class:"text-xs"},cg={class:"flex items-center gap-2 w-full"},dg={key:"branding"},ug={class:"text-sm"},pg={class:"text-sm"},mg={class:"flex flex-col items-center justify-center text-gray-400"},fg={class:"text-sm"},_g={class:"flex flex-col items-center justify-center text-gray-400"},vg={class:"text-sm"},gg={class:"flex flex-col items-center justify-center text-gray-400"},yg={class:"text-sm"},bg={class:"flex flex-col items-center justify-center text-gray-400"},hg={class:"text-sm"},wg={class:"flex items-center justify-between"},kg={class:"font-bold"},$g={class:"flex items-center"},xg={class:"flex items-center justify-between"},Cg={class:"font-bold"},Ig={class:"flex items-center"},Vg={class:"flex items-center justify-between"},Sg={class:"font-bold"},Eg={class:"flex items-center"},zg={key:"social-networks"},Tg={class:"text-xs"},Ug={key:"newsletter-email"},Mg={key:"newsletter-phone"},Ng={key:"newsletter-campaign"},Dg={key:"ads"},Ag={key:"videos"},Pg={key:"content-models"},Bg={key:"menus"},Lg={key:"content-permalinks"},Fg={key:"page-sections"},{defineComponent:Og,inject:Rg,ref:kl,h:Ai,computed:Pi,watch:Bi,onMounted:uc}=await me("vue"),{storeToRefs:qg,defineStore:jg}=await me("pinia"),Kg=Og({name:fc.CONTENT_MANAGEMENT.NAME}),Gg=W1({...Kg,setup(m){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],s=w=>e.includes(w),{t:n,locale:i}=Ne(),t=Nd(),a=An(),{appPrimaryColor:c,pickByTheme:I,fileUrl:_e,isLgScreen:se,isMdScreen:L,isSmScreen:be,isXlScreen:J,is2XlScreen:T,tr:r}=ut(),U=td({enabled:!1}),{isLightTheme:pe,contentLayoutSize:ne}=qg(Io());bc();const{data:D,refetch:j}=Ri(),{mutate:te,isPending:M}=H1(),{mutate:z,isPending:q}=Ic(),{mutate:H,isPending:A}=$d(),K=Rg("appConfig"),d=kl({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),V=kl(d.value),f=jg("content-management",()=>({currentMenuItemKey:kl("basic-info")}))(),k=(w,v)=>()=>Ai(O,{},{default:()=>Ai(ce,{icon:w})}),x=(w,v,Q=!1)=>()=>Ai("span",{id:v,class:{"page-menu-item":Q}},{default:()=>w}),g=Pi(()=>{const w=[{label:x(n("basicInfo"),"basic-info"),key:"basic-info",icon:k("carbon:identification")},{label:x(n("branding"),"branding"),key:"branding",icon:k("carbon:color-palette")},{label:x(n("socialNetworks"),"social-networks"),key:"social-networks",icon:k("carbon:share")},{key:"divider",type:"divider"},{label:x(n("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:k("carbon:at")},{label:x(n("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:k("carbon:phone")},{label:x(n("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:k("carbon:bullhorn")},{key:"divider",type:"divider"},{label:x(n("ads"),"ads"),key:"ads",icon:k("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:x(n("videos"),"videos"),key:"videos",icon:k("carbon:video-player")},{key:"divider",type:"divider"},{label:x(n("menusManagement"),"menus"),key:"menus",icon:k("carbon:menu")},{label:x(n("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:k("carbon:link")},{key:"divider",type:"divider"},{label:x(n("contentModels"),"content-models"),key:"content-models",icon:k("carbon:model-alt")},{label:x(n("pageSections"),"page-sections"),key:"page-sections",icon:k("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const v of D.value||[])w.push({label:x(r(v.title).startsWith(n("page"))?r(v.title):`${n("page")} ${r(v.title)}`,`${v.slug}-page`,!0),key:`${v.slug}-page`,icon:k("carbon:document",`${v.slug}-page`)});return D.value&&D.value.length>0&&w.push({key:"divider",type:"divider"}),w.push({label:x(n("addPage"),"add-new-page"),key:"add-new-page",icon:k("carbon:add-alt")}),w}),C=Pi(()=>de.isEqual(d.value,V.value)),le=Pi(()=>ne.value.height-165),ge=kl(null),W={email:[{required:!1,message:n("fillRequired")},{trigger:["input"],validator(w,v){return v&&!xo.isEmail(v)?new Error(n("invalidEmail")):!0}}]},b=kl();Bi(()=>b.value,w=>{d.value.additionalInfo=JSON.stringify(w||"[]")},{deep:!0});const h=kl(null),xe={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],S=kl("logos"),l=kl(!1),o=async w=>{switch(S.value){case"logos":d.value.logo=w;break;case"icons":d.value.icon=w;break;case"monochrome-logos":d.value.oneColorLogo=w;break;case"monochrome-icons":d.value.oneColorIcon=w;break}l.value=!1},y={name:"",title:"",content:"",slug:""},N=kl(!1),F=kl(null),G=kl(y),E={title:[{required:!0,message:n("fillRequired")}]},P=kl(null),we=w=>{P.value=de.cloneDeep(w),G.value=de.cloneDeep(w||y),N.value=!0},Ge=async()=>(F.value?.validate(async w=>{if(!w){const v={title:G.value.title};P.value?z({slug:P.value.slug,...v},{onSuccess:Q=>{f.currentMenuItemKey=`${Q?.slug}-page`,N.value=!1}}):H({name:de.startCase(de.camelCase(r(G.value.title))).replace(/\s+/g,""),...v},{onSuccess:Q=>{f.currentMenuItemKey=`${Q?.slug}-page`,N.value=!1}})}}),!1),Z=async()=>{await U.refetch(),U.data.value?.forEach(w=>{d.value[w.key]!=null&&(d.value[w.key]=w.value)}),V.value=de.cloneDeep(d.value);try{b.value=JSON.parse(d.value.additionalInfo||"[]")}catch{b.value=[]}};Z(),uc(()=>{setTimeout(()=>{t.params.key&&s(t.params.key)&&(f.currentMenuItemKey=t.params.key)},500)});const Re=()=>{te(d.value,{onSuccess:()=>Z()})},Ce=["basic-info","branding","social-networks"];Bi(()=>f.currentMenuItemKey,(w,v)=>{w==="add-new-page"?(f.currentMenuItemKey=v,we(null)):Ce.includes(v)&&!Ce.includes(w)&&(C.value||a.warning({title:n("confirm"),content:n("marketInfoDiscardChangesConfirm"),positiveText:n("yes"),negativeText:n("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{f.currentMenuItemKey=v}}))});const Ze=kl();Bi(()=>[L.value,be.value,se.value,J.value],([w,v,Q,mt])=>{Ze.value=w||v||Q||mt,setTimeout(()=>{Ze.value=void 0},500)},{immediate:!0});const B=Md({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:n("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return uc(()=>{setTimeout(()=>{const w=document.getElementById("sidebar");B.addStep({attachTo:{element:w,on:"left"},title:n("contentManagementGuideTitle1"),text:n("contentManagementGuideText1"),buttons:[{text:n("pass"),label:n("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.cancel()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]});const v=document.getElementsByClassName("page-menu-item");if(v&&v.length>0){const mt=[];for(let oe=0;oe<v.length;oe++)mt.push(v[oe]?.parentNode?.parentNode?.parentNode);B.addStep({attachTo:{element:mt[0],on:"left"},title:n("contentManagementGuideTitle2"),text:n("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.back()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]})}const Q=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;B.addStep({attachTo:{element:Q,on:"left"},title:n("contentManagementGuideTitle3"),text:n("contentManagementGuideText3"),buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.back()}},{text:n("ok"),label:n("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]})},1e3)}),(w,v)=>{const Q=Le,mt=yn,oe=md,_t=pd,ft=jt,yt=ul,Qe=ba,St=ll,ve=Cl,Et=Hi,fn=dl,ue=gn,Kt=Yi,bt=Ol,Nl=Vl,El=Q1("color-picker"),zl=ud,st=Pc,Pn=ms,qn=Wn;return Dt(),vn(lo,null,[Y(st,null,{"header-extra":ae(()=>[Y(mt,null,{default:ae(()=>[$t("div",Z1,[Ce.includes(u(f).currentMenuItemKey)?(Dt(),fa(Q,{key:0,loading:u(M)||u(U).isPending.value,disabled:u(C),type:"primary",secondary:"",onClick:Re},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:save"})]),_:1})]),default:ae(()=>[no(" "+Lt(u(n)("save")),1)]),_:1},8,["loading","disabled"])):(Dt(),vn("div",eg))]),Y(Q,{dashed:"",type:"primary",title:u(n)("help"),onClick:v[0]||(v[0]=Ye=>u(B).start())},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:ae(()=>[Y(zl,{style:_a(`height: ${u(le)}px`)},{default:ae(()=>[Y(zl,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:ae(()=>[Y(_t,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:u(Ze),"default-collapsed":!u(T),"collapsed-width":64,"native-scrollbar":!1,width:u(T)?300:275},{default:ae(()=>[Y(oe,{value:u(f).currentMenuItemKey,"onUpdate:value":v[1]||(v[1]=Ye=>u(f).currentMenuItemKey=Ye),"collapsed-width":64,"collapsed-icon-size":22,options:u(g)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),Y(zl,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:ae(()=>[Y(J1,{name:"slide-fade"},{default:ae(()=>[Di($t("section",tg,[Y(ue,{hoverable:""},{default:ae(()=>[Y(fn,{ref_key:"basicInfoFormRef",ref:ge,model:u(d),rules:W,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:ae(()=>[Y(yt,{path:"name"},{label:ae(()=>[$t("b",ng,Lt(u(n)("websiteName")),1)]),default:ae(()=>[Y(ft,{value:u(d).name,"onUpdate:value":v[2]||(v[2]=Ye=>u(d).name=Ye),placeholder:u(n)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),Y(St,{"x-gap":"12",span:24},{default:ae(()=>[Y(Qe,{span:12,path:"email"},{label:ae(()=>[$t("b",lg,Lt(u(n)("email")),1)]),default:ae(()=>[Y(ft,{value:u(d).email,"onUpdate:value":v[3]||(v[3]=Ye=>u(d).email=Ye),placeholder:u(n)("email"),class:"w-full"},{prefix:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),Y(Qe,{span:12,path:"phone"},{label:ae(()=>[$t("b",ag,Lt(u(n)("phone")),1)]),default:ae(()=>[Y(ft,{value:u(d).phone,"onUpdate:value":v[4]||(v[4]=Ye=>u(d).phone=Ye),placeholder:u(n)("phone"),class:"w-full"},{prefix:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),Y(yt,{path:"address"},{label:ae(()=>[$t("span",og,[$t("b",null,Lt(u(n)("address")),1)])]),default:ae(()=>[Y(ft,{value:u(d).address,"onUpdate:value":v[5]||(v[5]=Ye=>u(d).address=Ye),placeholder:u(n)("address"),class:"w-full"},{prefix:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),Y(St,{"x-gap":"12",span:24},{default:ae(()=>[Y(Qe,{span:12,path:"postalCode"},{label:ae(()=>[$t("b",sg,Lt(u(n)("postalCode")),1)]),default:ae(()=>[Y(ft,{value:u(d).postalCode,"onUpdate:value":v[6]||(v[6]=Ye=>u(d).postalCode=Ye),placeholder:u(n)("postalCode"),class:"w-full"},{prefix:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),Y(yt,{"show-label":!1,path:"description"},{default:ae(()=>[Y(ve,{modelValue:u(d).description,"onUpdate:modelValue":v[7]||(v[7]=Ye=>u(d).description=Ye),placeholder:u(n)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:ae(()=>[$t("b",ig,Lt(u(n)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Y(yt,{path:"additionalInfo"},{label:ae(()=>[$t("b",rg,Lt(u(n)("additionalInfo")),1)]),default:ae(()=>[Y(Et,{value:u(b),"onUpdate:value":v[8]||(v[8]=Ye=>Mi(b)?b.value=Ye:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":ae(()=>[no(Lt(u(n)("add")),1)]),default:ae(({value:Ye})=>[$t("div",cg,[Y(ft,{value:Ye.name,"onUpdate:value":Qn=>Ye.name=Qn,placeholder:u(n)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),Y(ft,{value:Ye.content,"onUpdate:value":Qn=>Ye.content=Qn,placeholder:u(n)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ni,u(f).currentMenuItemKey==="basic-info"]]),Di($t("section",dg,[Y(ue,{segmented:"",size:"small"},{header:ae(()=>[$t("span",ug,Lt(u(n)("graphicElements")),1)]),default:ae(()=>[Y(St,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:ae(()=>[Y(bt,null,{default:ae(()=>[Y(ue,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ae(()=>[$t("span",pg,Lt(u(n)("logo")),1)]),default:ae(()=>[Y(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ae(()=>[u(d).logo?(Dt(),fa(Kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:_a("border: 1px dashed "+u(I)(u(c),"white")),size:125,src:u(_e)(u(d).logo),onClick:v[9]||(v[9]=()=>{S.value="logos",l.value=!0})},null,8,["style","src"])):(Dt(),vn("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:_a(`border: 1px dashed ${u(I)(u(c),"white")}; width: 125px; height: 125px`),onClick:v[10]||(v[10]=()=>{S.value="logos",l.value=!0})},[$t("div",mg,[Y(u(O),{size:"50"},{default:ae(()=>[Y(u(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(u(n)("import")),1)])],4)),u(d).logo?(Dt(),fa(Q,{key:2,quaternary:"",onClick:v[11]||(v[11]=()=>u(d).logo="")},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:ae(()=>[no(" "+Lt(u(n)("clear")),1)]),_:1})):Hn("",!0)]),_:1})]),_:1})]),_:1}),Y(bt,null,{default:ae(()=>[Y(ue,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ae(()=>[$t("span",fg,Lt(u(n)("icon")),1)]),default:ae(()=>[Y(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ae(()=>[u(d).icon?(Dt(),fa(Kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:_a("border: 1px dashed "+u(I)(u(c),"white")),size:125,src:u(_e)(u(d).icon),onClick:v[12]||(v[12]=()=>{S.value="icons",l.value=!0})},null,8,["style","src"])):(Dt(),vn("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:_a(`border: 1px dashed ${u(I)(u(c),"white")}; width: 125px; height: 125px`),onClick:v[13]||(v[13]=()=>{S.value="icons",l.value=!0})},[$t("div",_g,[Y(u(O),{size:"50"},{default:ae(()=>[Y(u(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(u(n)("import")),1)])],4)),u(d).icon?(Dt(),fa(Q,{key:2,quaternary:"",onClick:v[14]||(v[14]=()=>u(d).icon="")},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:ae(()=>[no(" "+Lt(u(n)("clear")),1)]),_:1})):Hn("",!0)]),_:1})]),_:1})]),_:1}),Y(bt,null,{default:ae(()=>[Y(ue,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ae(()=>[$t("span",vg,Lt(u(n)("logoMonochrome")),1)]),default:ae(()=>[Y(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ae(()=>[u(d).oneColorLogo?(Dt(),fa(Kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:_a("border: 1px dashed "+u(I)(u(c),"white")),size:125,src:u(_e)(u(d).oneColorLogo),onClick:v[15]||(v[15]=()=>{S.value="monochrome-logos",l.value=!0})},null,8,["style","src"])):(Dt(),vn("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:_a(`border: 1px dashed ${u(I)(u(c),"white")}; width: 125px; height: 125px`),onClick:v[16]||(v[16]=()=>{S.value="monochrome-logos",l.value=!0})},[$t("div",gg,[Y(u(O),{size:"50"},{default:ae(()=>[Y(u(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(u(n)("import")),1)])],4)),u(d).oneColorLogo?(Dt(),fa(Q,{key:2,quaternary:"",onClick:v[17]||(v[17]=()=>u(d).oneColorLogo="")},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:ae(()=>[no(" "+Lt(u(n)("clear")),1)]),_:1})):Hn("",!0)]),_:1})]),_:1})]),_:1}),Y(bt,null,{default:ae(()=>[Y(ue,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ae(()=>[$t("span",yg,Lt(u(n)("iconMonochrome")),1)]),default:ae(()=>[Y(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ae(()=>[u(d).oneColorIcon?(Dt(),fa(Kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:_a("border: 1px dashed "+u(I)(u(c),"white")),size:125,src:u(_e)(u(d).oneColorIcon),onClick:v[18]||(v[18]=()=>{S.value="monochrome-icons",l.value=!0})},null,8,["style","src"])):(Dt(),vn("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:_a(`border: 1px dashed ${u(I)(u(c),"white")}; width: 125px; height: 125px`),onClick:v[19]||(v[19]=()=>{S.value="monochrome-icons",l.value=!0})},[$t("div",bg,[Y(u(O),{size:"50"},{default:ae(()=>[Y(u(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(u(n)("import")),1)])],4)),u(d).oneColorIcon?(Dt(),fa(Q,{key:2,quaternary:"",onClick:v[20]||(v[20]=()=>u(d).oneColorIcon="")},{icon:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:ae(()=>[no(" "+Lt(u(n)("clear")),1)]),_:1})):Hn("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v[31]||(v[31]=$t("br",null,null,-1)),Y(ue,{hoverable:"",segmented:"",size:"small"},{header:ae(()=>[$t("span",hg,Lt(u(n)("websiteColors")),1)]),default:ae(()=>[Y(St,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:ae(()=>[Y(bt,null,{default:ae(()=>[$t("div",wg,[$t("span",kg,Lt(u(n)("baseColor")),1),$t("div",$g,[u(d).primaryColor?(Dt(),vn(lo,{key:0},[Y(Q,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[21]||(v[21]=Ye=>u(d).primaryColor="")},{default:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),Y(Nl,{vertical:""})],64)):Hn("",!0),Y(El,{"pure-color":u(d).primaryColor,"onUpdate:pureColor":v[22]||(v[22]=Ye=>u(d).primaryColor=Ye),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:u(pe)?"white":"black",lang:u(i)},null,8,["pure-color","theme","lang"])])])]),_:1}),Y(bt,null,{default:ae(()=>[$t("div",xg,[$t("span",Cg,Lt(u(n)("secondaryColor")),1),$t("div",Ig,[u(d).secondaryColor?(Dt(),vn(lo,{key:0},[Y(Q,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[23]||(v[23]=Ye=>u(d).secondaryColor="")},{default:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),Y(Nl,{vertical:""})],64)):Hn("",!0),Y(El,{"pure-color":u(d).secondaryColor,"onUpdate:pureColor":v[24]||(v[24]=Ye=>u(d).secondaryColor=Ye),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:u(pe)?"white":"black",lang:u(i)},null,8,["pure-color","theme","lang"])])])]),_:1}),Y(bt,null,{default:ae(()=>[$t("div",Vg,[$t("span",Sg,Lt(u(n)("tertiaryColor")),1),$t("div",Eg,[u(d).accentColor?(Dt(),vn(lo,{key:0},[Y(Q,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[25]||(v[25]=Ye=>u(d).accentColor="")},{default:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),Y(Nl,{vertical:""})],64)):Hn("",!0),Y(El,{"pure-color":u(d).accentColor,"onUpdate:pureColor":v[26]||(v[26]=Ye=>u(d).accentColor=Ye),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:u(pe)?"white":"black",lang:u(i)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Ni,u(f).currentMenuItemKey==="branding"]]),Di($t("section",zg,[Y(ue,{hoverable:""},{default:ae(()=>[Y(fn,{ref_key:"socialNetworksFormRef",ref:h,model:u(d),rules:xe,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:ae(()=>[Y(St,{"x-gap":"12",span:24},{default:ae(()=>[(Dt(),vn(lo,null,dc($,Ye=>Y(Qe,{key:Ye.name,span:12,path:Ye.name},{label:ae(()=>[$t("b",Tg,Lt(u(n)(Ye.name)),1)]),default:ae(()=>[Y(ft,{value:u(d)[Ye.name],"onUpdate:value":Qn=>u(d)[Ye.name]=Qn,placeholder:u(n)(Ye.name),class:"w-full"},{prefix:ae(()=>[Y(u(O),null,{default:ae(()=>[Y(u(ce),{icon:Ye.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ni,u(f).currentMenuItemKey==="social-networks"]]),u(f).currentMenuItemKey==="newsletter-email"?(Dt(),vn("section",Ug,[Y(J_)])):Hn("",!0),u(f).currentMenuItemKey==="newsletter-phone"?(Dt(),vn("section",Mg,[Y(uv)])):Hn("",!0),u(f).currentMenuItemKey==="newsletter-campaign"?(Dt(),vn("section",Ng,[Y(Y1)])):Hn("",!0),u(f).currentMenuItemKey==="ads"?(Dt(),vn("section",Dg,[Y(su)])):Hn("",!0),u(f).currentMenuItemKey==="videos"?(Dt(),vn("section",Ag,[Y(cf)])):Hn("",!0),u(f).currentMenuItemKey==="content-models"?(Dt(),vn("section",Pg,[Y(f1)])):Hn("",!0),u(f).currentMenuItemKey==="menus"?(Dt(),vn("section",Bg,[Y(Zp)])):Hn("",!0),u(f).currentMenuItemKey==="content-permalinks"?(Dt(),vn("section",Lg,[Y(L1)])):Hn("",!0),u(f).currentMenuItemKey==="page-sections"?(Dt(),vn("section",Fg,[Y(A_)])):Hn("",!0),(Dt(!0),vn(lo,null,dc(u(D),(Ye,Qn)=>(Dt(),vn(lo,{key:`${Ye.slug}-page`},[u(f).currentMenuItemKey===`${Ye.slug}-page`?(Dt(),vn("section",{key:`${Ye.slug}-page`},[Y(Mu,{slug:Ye.slug,"open-form-modal":we,onDelete:()=>{u(f).currentMenuItemKey=(u(D)?.length||0)>1?`${u(D)?.[Qn-1].slug}-page`:e[0],u(j)()}},null,8,["slug","onDelete"])])):Hn("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),Y(Pn,{show:u(l),"onUpdate:show":v[27]||(v[27]=Ye=>Mi(l)?l.value=Ye:null),title:u(n)("selectImage"),"upload-config":{folder:u(S),limit:0,maxSize:0,baseUrl:u(K)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o},null,8,["show","title","upload-config"]),Y(qn,{show:u(N),"onUpdate:show":v[29]||(v[29]=Ye=>Mi(N)?N.value=Ye:null),loading:u(A)||u(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:u(P)?u(n)("editPage"):u(n)("addPage"),"positive-text":u(n)("validate"),"negative-text":u(n)("cancel"),onPositiveClick:Ge,onNegativeClick:v[30]||(v[30]=Ye=>N.value=!1)},{default:ae(()=>[Y(fn,{ref_key:"addPageFormRef",ref:F,model:u(G),rules:E,"show-require-mark":!1,size:"medium"},{default:ae(()=>[Y(yt,{"show-label":!1,path:"title",class:"mt-5"},{default:ae(()=>[Y(ve,{modelValue:u(G).title,"onUpdate:modelValue":v[28]||(v[28]=Ye=>u(G).title=Ye),placeholder:u(n)("title"),class:"w-full",sync:"",onKeydown:X1(Ge,["enter"])},{label:ae(()=>[no(Lt(u(n)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Oy=So(Gg,[["__scopeId","data-v-eb0e0d24"]]);export{Oy as default};
