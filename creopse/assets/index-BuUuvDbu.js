const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-C8auy2Cl.js","assets/jsoneditor-Cyu_lGJP.js","assets/process-Dy-TXDLF.js","assets/ckeditor5-BrgJTJSN.js","assets/ckeditor_ckeditor5-utils-DZhn28Eg.js","assets/es-toolkit-Cge3R0Vb.js","assets/ckeditor_ckeditor5-engine-BHV-Rp_a.js","assets/ckeditor_ckeditor5-widget-yxJBKz4n.js","assets/ckeditor_ckeditor5-core-CWAtyu9P.js","assets/ckeditor_ckeditor5-watchdog-D6_LaQGu.js","assets/ckeditor_ckeditor5-typing-uZoA9pnq.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-C7Ma50Jw.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-0icnFgvj.js","assets/ckeditor_ckeditor5-list-DexonytB.js","assets/ckeditor_ckeditor5-font-DKG9Ffj7.js","assets/ckeditor_ckeditor5-clipboard-CyjGvBno.js","assets/ckeditor_ckeditor5-mention-CRbwimBn.js","assets/ckeditor5-CZCgGaBk.css","assets/ckeditor_ckeditor5-vue-D9YIFk5Z.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-CfVRxHJr.js","assets/export2excel-C7pSMF4U.js","assets/xlsx-DHIYx6t8.js","assets/file-saver-BpnyUUf6.js"])))=>i.map(i=>d[i]);
import{i as me}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{_ as Oa,a as ro,b as di}from"./index.vue_vue_type_script_setup_true_lang-CzGATx8K.js";import{_ as od}from"./PageLayout.vue_vue_type_script_setup_true_lang-Bbo6kS_9.js";import{_ as _a}from"./I18nInput-CgYmSGl_.js";import{Q as zo,e as Le,t as mt,u as tt,f as At,w as ll,y as $n,S as Mo,T as bi,v as Ua,U as Bn,p as Ao,V as Uc,x as sd,J as rd,W as id,X as ci,_ as qa,Y as ui,Z as cd,d as dd,$ as ud,a0 as pd,R as Mc,a1 as md,a2 as Tc,A as ki,a3 as pi,a4 as Nc,a5 as fd,a6 as _d,a7 as mi,a8 as Dc,a9 as vd,aa as yd,ab as gd,q as hd,I as bd,ac as kd}from"./index-5sSKf-sJ.js";import{I as Ce}from"./iconify_vue-DK9FHL8l.js";import{_ as ir}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-0qUAOyH0.js";import{u as we}from"./vue-i18n-DGGON2e6.js";import{a as Oe,l as ea,u as We,a0 as Hl,o as io,af as Ma,x as Cl,O as Ml,Y as Ra,n as ja,B as He,q as pe,$ as Ta,z as ca,D as va,E as Fn,C as il,a5 as cr,a6 as dr,A as da,ag as wd,ab as No,a4 as ur,M as nn,a7 as zc,t as Na,a3 as pr,aa as Ac,a1 as fi,J as On,v as Pc,ah as xd,ai as mr,aj as _i,ak as Lc,F as vi,al as $d,am as Cd,an as Bc,V as co,W as uo,R as fr,P as Fc,Z as Po,ao as Id,ap as Oc,aq as qc,K as yi,ar as Rc,r as jc,as as Vd,a8 as Sd,a9 as Ed,p as Ud}from"./naive-ui-U3LV0D3Q.js";import{_ as ie}from"./lodash-BQQkJTn-.js";import{_ as Cn}from"./fawmi_vue-google-maps-Cpr8dN0B.js";import{C as Ka,S as wi,p as rn,d as Md,v as cn,V as Ts,w as dn,G as yr}from"./ngneat_falso-B0jqjLBt.js";import{h as Td}from"./moment-D0oQX5S1.js";import{_ as Kc}from"./index.vue_vue_type_style_index_0_lang-DxKuGc77.js";import{u as Yc,a as Gc}from"./article-Cop3EsV4.js";import{v as Gl}from"./uuid-8I8R7izr.js";import{a as gi,u as Nd}from"./tanstack_vue-query-DCl0-IN8.js";import{s as Hc}from"./slugify-yIIWNGXu.js";import{_ as Dd}from"./media-file-dGaUbt6f.js";import{r as zd}from"./vueuse_shared-x2l23lLx.js";import{_ as Do}from"./jsoneditor-Cyu_lGJP.js";import{u as Wc}from"./vueuse_core-aA8IVeLX.js";import{_ as Qc}from"./UploadExcel-Dhcau0-q.js";import{_ as To}from"./validator-DwVK3abb.js";import{_ as Ad}from"./VueTelInputWrapper-CvE5lFmZ.js";import{i as Pd}from"./libphonenumber-js-Cbgs1wa0.js";import"./browser-image-compression-DsQCRm9N.js";import{u as Ld}from"./email-Dw0ZDXor.js";import{u as Bd}from"./vue-shepherd-CZJ8KBfd.js";import{u as Fd}from"./vue-router-JM7pifDK.js";var xn=(u=>(u.IMAGE="image",u.VIDEO="video",u))(xn||{});const Xc=(u,e)=>zo(["ad-identifiers"],async()=>{const{request:n}=Le(),l=await n({url:"/ad-identifiers"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Od=(u,e)=>zo(["ads"],async()=>{const{request:n}=Le(),l=await n({url:"/ads"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),qd=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe();return mt({queryKey:["ad-identifiers"],operation:"insert",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"post",url:"/ad-identifiers",data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Rd=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe();return mt({queryKey:["ad-identifiers"],operation:"update",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"put",url:`/ad-identifiers/${a.id}`,data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},jd=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe();return mt({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const a=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:o=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Kd,defineComponent:Yd}=await me("vue"),{unref:st,resolveComponent:sh,createVNode:Vt,toDisplayString:po,createTextVNode:gr,withCtx:Gt,renderList:Gd,Fragment:xi,openBlock:mo,createElementBlock:hr,createElementVNode:Lo,createCommentVNode:Hd,normalizeClass:$i,createBlock:br,isRef:Wd}=await me("vue"),Qd={class:"flex items-center justify-between"},Xd={class:"flex flex-col"},Jd={class:"text-sm font-bold"},Zd={class:"text-xs font-normal"},eu={key:0,class:"text-xs font-bold"},{ref:Bo}=await me("vue"),tu=Yd({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=we(),{pickByTheme:n,formatKey:l}=tt(),o=Kd(u,"show"),{data:a,isPending:t}=Xc(),{mutate:c}=jd(),{mutate:fe}=qd(),{mutate:le}=Rd(),de=ea(),z=We(),ae=Bo(!1),B=Bo(!1),$=Bo(null),d=Bo(null),F=Bo({id:"",reusable:!1,contentType:xn.IMAGE,contentSize:"",params:[]}),Z={id:[{required:!0,message:e("fillRequired")}]},s=W=>{$.value=ie.cloneDeep(W),F.value=ie.cloneDeep(W||{id:"",reusable:!1,contentType:xn.IMAGE,contentSize:"",params:[]}),B.value=!0},re=async()=>(d.value?.validate(async W=>{if(!W){z.start(),ae.value=!0;const k={id:F.value.id,reusable:F.value.reusable,contentType:F.value.contentType,contentSize:F.value.contentSize,params:F.value.params};$.value?le(k,{onSuccess:()=>{B.value=!1}}):fe(k,{onSuccess:()=>{B.value=!1}}),ae.value=!1,z.finish()}}),!1),N=async W=>{de.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{c({id:W.id})}})};return(W,k)=>{const U=Ce,O=He,G=Ml,j=Ra,ee=ja,v=pe,A=Cl,_=Ma,y=Ta,K=io,E=Hl,Y=il,X=Fn,M=va,x=dr,b=cr,P=wd,_e=da,C=ca;return mo(),hr(xi,null,[Vt(E,{show:o.value,"onUpdate:show":k[2]||(k[2]=w=>o.value=w),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:st(e)("adIdentifiers")},{"header-extra":Gt(()=>[Vt(G,{align:"center"},{default:Gt(()=>[Vt(O,{secondary:"",size:"small",type:"primary",disabled:st(t),onClick:k[0]||(k[0]=w=>s(null))},{default:Gt(()=>[Vt(U,{icon:"carbon:add-alt",class:"mr-1"}),gr(" "+po(st(e)("add")),1)]),_:1},8,["disabled"]),Vt(O,{secondary:"",size:"small",type:"error",disabled:st(t),onClick:k[1]||(k[1]=w=>o.value=!1)},{default:Gt(()=>[Vt(U,{icon:"carbon:close",class:"mr-1"}),gr(" "+po(st(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Gt(()=>[Vt(K,{show:st(t)},{default:Gt(()=>[st(a)?.length?(mo(),br(_,{key:0,style:{"max-height":"400px"}},{default:Gt(()=>[(mo(!0),hr(xi,null,Gd(st(a),w=>(mo(),br(A,{key:w.id,embedded:"",size:"small",class:"mb-2"},{default:Gt(()=>[Lo("div",Qd,[Lo("div",Xd,[Lo("span",Jd,po(w.id),1),Lo("div",null,[Lo("span",Zd,po(w.contentType===st(xn).IMAGE?st(e)("image"):st(e)("video")),1),w.contentSize?(mo(),hr("span",eu," Â ("+po(w.contentSize)+") ",1)):Hd("",!0)])]),Vt(G,null,{default:Gt(()=>[Vt(j,{size:"medium",bordered:!1,type:w.reusable?"info":"warning"},{default:Gt(()=>[gr(po(w.reusable?st(e)("reusable"):st(e)("notReusable")),1)]),_:2},1032,["type"]),Vt(ee,{vertical:"",class:$i(["!mx-0",st(n)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Vt(O,{size:"small",type:"warning",secondary:"",onClick:i=>s(w)},{default:Gt(()=>[Vt(v,null,{default:Gt(()=>[Vt(U,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),Vt(O,{size:"small",type:"error",secondary:"",onClick:i=>N(w)},{default:Gt(()=>[Vt(v,null,{default:Gt(()=>[Vt(U,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(mo(),br(A,{key:1,size:"large",class:$i(`mb-2 !border-dashed !border-2 ${st(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Gt(()=>[Vt(y,{description:st(e)("noIdentifierAdded")},{icon:Gt(()=>[Vt(v,{size:"60"},{default:Gt(()=>[Vt(U,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Vt(E,{show:st(B),"onUpdate:show":k[8]||(k[8]=w=>Wd(B)?B.value=w:null),loading:st(ae),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:st($)?st(e)("editAdIdentifier"):st(e)("addAdIdentifier"),"positive-text":st(e)("validate"),"negative-text":st(e)("cancel"),onPositiveClick:re,onNegativeClick:k[9]||(k[9]=w=>B.value=!1)},{default:Gt(()=>[Vt(C,{ref_key:"formRef",ref:d,model:st(F),rules:Z,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Gt(()=>[Vt(M,{span:24,"x-gap":"12"},{default:Gt(()=>[Vt(X,{span:16,label:st(e)("identifier"),path:"id"},{default:Gt(()=>[Vt(Y,{value:st(F).id,placeholder:st(e)("identifier"),disabled:st($)!=null,class:"w-full","onUpdate:value":k[3]||(k[3]=w=>st(F).id=st(l)(w))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),Vt(X,{span:8,label:st(e)("contentSize"),path:"contentSize"},{default:Gt(()=>[Vt(Y,{value:st(F).contentSize,"onUpdate:value":k[4]||(k[4]=w=>st(F).contentSize=w),placeholder:st(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Vt(M,{span:24,"x-gap":"12"},{default:Gt(()=>[Vt(X,{span:12,label:st(e)("status"),path:"reusable"},{default:Gt(()=>[Vt(b,{value:st(F).reusable,"onUpdate:value":k[5]||(k[5]=w=>st(F).reusable=w),name:"reusable",class:"w-full"},{default:Gt(()=>[Vt(x,{value:!1,label:st(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),Vt(x,{value:!0,label:st(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Vt(X,{span:12,label:st(e)("contentType"),path:"contentType"},{default:Gt(()=>[Vt(b,{value:st(F).contentType,"onUpdate:value":k[6]||(k[6]=w=>st(F).contentType=w),name:"contentType",class:"w-full"},{default:Gt(()=>[Vt(x,{value:st(xn).IMAGE,label:st(e)("image"),class:"w-[50%]"},null,8,["value","label"]),Vt(x,{value:st(xn).VIDEO,label:st(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Vt(_e,{label:st(e)("settings"),path:"params"},{default:Gt(()=>[Vt(P,{value:st(F).params,"onUpdate:value":k[7]||(k[7]=w=>st(F).params=w),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),lu=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["ads"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/ads",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},au=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["ads"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/ads/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},nu=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["ads"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/ads/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:ou}=await me("vue"),{unref:se,createVNode:ct,withCtx:St,toDisplayString:Rn,createTextVNode:jn,openBlock:Ya,createBlock:Ns,createCommentVNode:kr,resolveComponent:rh,isRef:fo,Fragment:Ds,createElementBlock:_o,normalizeStyle:Ci,createElementVNode:wr,renderList:su}=await me("vue"),ru={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},iu={id:"video",autoplay:"",controls:"",style:{width:"100%"}},cu=["src"],{inject:du,ref:ma,h:gl,computed:Ii}=await me("vue"),uu=ou({__name:"index",setup(u){const e=Oe(),n=ea(),l=du("appConfig"),{data:o}=Xc(),{data:a,isPending:t}=Od(),{mutate:c,isPending:fe}=nu(),{mutate:le,isPending:de}=lu(),{mutate:z,isPending:ae}=au(),{tr:B,fileUrl:$,pickByTheme:d,appSecondaryColor:F,isInDevMode:Z}=tt(),{t:s,locale:re}=we(),N=ma(""),W=ma(),k={pageSize:12,prefix:({itemCount:w})=>gl("div",{class:"font-bold"},{default:()=>`${s("total")}: ${w}`})},U=[{title:s("preview"),key:"image",width:200,fixed:"left",render(w){return w.adIdentifier?.contentType==xn.IMAGE?gl(No,{src:w.contentUrl??"",objectFit:"cover",width:200,height:100}):gl("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[gl(pe,{size:50,color:F.value},{default:()=>gl(Ce,{icon:"carbon:document-video"})})])}},{title:s("identifier"),key:"pid",width:150,fixed:"left",render(w){return gl("small",{},{default:()=>w.pid})}},{title:s("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(w){return gl("div",{},{default:()=>B(w.title)})}},{title:s("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(w){return gl("small",{},{default:()=>B(w.description)})}},{title:s("status"),key:"isActive",width:100,render(w){return gl(Ra,{type:w.display?"success":"warning",bordered:!1},{default:()=>w.display?s("visible"):s("hidden")})},sortOrder:!1,sorter:"default"},{title:s("updateAt"),key:"updatedAt",width:125,render(w){return gl("div",{},{default:()=>$n(w.updatedAt,{locale:re.value,outPattern:"DD MMMM YYYY"})})}},{title:s("createdAt"),key:"createdAt",width:125,render(w){return gl("div",{},{default:()=>$n(w.createdAt,{locale:re.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>gl(il,{ref:W,placeholder:s("search"),value:N.value,onInput:w=>{N.value=w}},{suffix:()=>gl(pe,{},{default:()=>gl(Ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(w){return gl("div",{class:"flex justify-end items-center w-full"},[gl(He,{size:"small",type:"warning",secondary:!0,onClick:()=>{Y(w)},renderIcon:()=>gl(pe,null,{default:()=>gl(Ce,{icon:"carbon:edit"})})}),gl("div",{class:"w-2"}),gl(He,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:s("confirm"),content:s("confirmDeleteAd"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{w.id&&c({id:w.id})}})},renderIcon:()=>gl(pe,null,{default:()=>gl(Ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],O=Ii(()=>{if(!N.value)return a.value;const w=a.value?.filter(i=>i.pid.toLowerCase().includes(N.value.toLowerCase())||i.title.toLowerCase().includes(N.value.toLowerCase())||i.description?.toLowerCase().includes(N.value.toLowerCase()));return W.value&&W.value.focus(),w}),G=ma(!1),j=ma(!1),ee=ma(xn.IMAGE),v=ma(),A=ma(null),_=ma(null),y=ma({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),K={pid:[{required:!0,message:s("fillRequired")}],title:[{required:!0,message:s("fillRequired")}],content:[{required:!0,message:s("fillRequired")}]},E=Ii({get:()=>!y.value.broadcastStart||!y.value.broadcastEnd?null:[y.value.broadcastStart||"",y.value.broadcastEnd||""],set:w=>{w?(y.value.broadcastStart=w[0],y.value.broadcastEnd=w[1]):(y.value.broadcastStart=null,y.value.broadcastEnd=null)}}),Y=w=>{A.value=ie.cloneDeep(w),w?(y.value=ie.cloneDeep(w),w.data||(y.value.data={})):y.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},v.value=o.value?.find(i=>i.id==y.value.pid)?.params,G.value=!0},X=w=>gl("span",{},{default:()=>w.id+(w.contentSize?` (${w.contentSize})`:"")}),M=async()=>(_.value?.validate(async w=>{if(!w){const i={pid:y.value.pid,title:y.value.title,display:y.value.display,content:y.value.content,description:y.value.description,data:y.value.data,broadcastStart:y.value.broadcastStart,broadcastEnd:y.value.broadcastEnd};A.value?A.value.title!==y.value.title&&(a.value||[]).findIndex(h=>h.title==y.value.title)>-1?e.error(s("sameAdTitleMessage")):z({id:A.value.id,...i},{onSuccess:()=>{}}):(a.value||[]).findIndex(h=>h.title==y.value.title)>-1?e.error(s("sameAdTitleMessage")):le(i,{onSuccess:()=>{}}),G.value=!1}}),!1),x=ma(!1),b=ma(!1),P=ma(!1),_e=ma(""),C=ma("");return(w,i)=>{const h=Ml,oe=Oa,L=ur,ne=ir,Me=_a,ke=da,ye=zc,kt=Na,ut=Fn,xe=dr,qe=cr,Ve=va,Ze=nn,q=pr,I=ca,g=Hl,Xe=ro;return Ya(),_o(Ds,null,[ct(oe,{to:"#alt-action"},{default:St(()=>[ct(h,null,{default:St(()=>[se(Z)?(Ya(),Ns(se(He),{key:0,secondary:"",type:"warning",onClick:i[0]||(i[0]=Se=>j.value=!0)},{default:St(()=>[ct(se(pe),{size:"26"},{default:St(()=>[ct(se(Ce),{icon:"carbon:id"})]),_:1}),jn(" "+Rn(se(s)("identifiers")),1)]),_:1})):kr("",!0),ct(se(He),{type:"primary",secondary:"",onClick:i[1]||(i[1]=Se=>Y(null))},{icon:St(()=>[ct(se(pe),{size:"18"},{default:St(()=>[ct(se(Ce),{icon:"carbon:add-alt"})]),_:1})]),default:St(()=>[jn(" "+Rn(se(s)("addAd")),1)]),_:1})]),_:1})]),_:1}),ct(ne,null,{default:St(()=>[ct(L,{columns:U,data:se(O),pagination:k,loading:se(t),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),ct(g,{show:se(G),"onUpdate:show":i[12]||(i[12]=Se=>fo(G)?G.value=Se:null),loading:se(de)||se(ae)||se(fe),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:se(A)?se(s)("editAd"):se(s)("addAd"),"positive-text":se(s)("validate"),"negative-text":se(s)("cancel"),onPositiveClick:M,onNegativeClick:i[13]||(i[13]=Se=>G.value=!1)},{default:St(()=>[ct(I,{ref_key:"formRef",ref:_,class:"mt-5",model:se(y),rules:K,"show-require-mark":!1,size:"medium"},{default:St(()=>[ct(Ve,{cols:"24","x-gap":12},{default:St(()=>[ct(Ze,{span:"12"},{default:St(()=>[ct(ke,{"show-label":!1,path:"title"},{default:St(()=>[ct(Me,{modelValue:se(y).title,"onUpdate:modelValue":i[2]||(i[2]=Se=>se(y).title=Se),placeholder:se(s)("title"),class:"w-full",sync:""},{label:St(()=>[jn(Rn(se(s)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(ke,{"show-label":!1,path:"description"},{default:St(()=>[ct(Me,{modelValue:se(y).description,"onUpdate:modelValue":i[3]||(i[3]=Se=>se(y).description=Se),placeholder:se(s)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:St(()=>[jn(Rn(se(s)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(ke,{label:se(s)("broadcastPeriod"),path:"broadcastPeriod"},{default:St(()=>[ct(ye,{"formatted-value":se(E),"onUpdate:formattedValue":i[4]||(i[4]=Se=>fo(E)?E.value=Se:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),ct(Ve,{"x-gap":"12",span:24},{default:St(()=>[ct(ut,{span:12,label:se(s)("identifier"),path:"pid"},{default:St(()=>[ct(kt,{value:se(y).pid,"onUpdate:value":[i[5]||(i[5]=Se=>se(y).pid=Se),i[6]||(i[6]=()=>{v.value=se(o)?.find(Se=>Se.id==se(y).pid)?.params})],"render-label":X,options:se(o)?.map(Se=>({...Se,disabled:!Se.reusable&&(Se.adsCount||0)>0})),placeholder:se(s)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ct(ut,{span:12,label:se(s)("status"),path:"display"},{default:St(()=>[ct(qe,{value:se(y).display,"onUpdate:value":i[7]||(i[7]=Se=>se(y).display=Se),name:"display",class:"w-full"},{default:St(()=>[ct(xe,{value:!1,label:se(s)("hidden"),class:"w-[50%]"},null,8,["label"]),ct(xe,{value:!0,label:se(s)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),ct(Ze,{span:"12"},{default:St(()=>[ct(ke,{label:se(s)("content"),path:"content"},{default:St(()=>[se(ee)==se(xn).VIDEO?(Ya(),Ns(q,{key:0},{default:St(()=>[ct(se(He),{secondary:"",type:"primary",onClick:i[8]||(i[8]=()=>{b.value=!0})},{default:St(()=>[jn(Rn(se(s)("select")),1)]),_:1}),ct(se(il),{value:se(y).content?se(Mo)(se(y).content):"",placeholder:se(s)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),se(y).content?(Ya(),_o(Ds,{key:0},[ct(se(He),{type:"primary",ghost:"",onClick:i[9]||(i[9]=()=>{_e.value=se(s)("video"),C.value=se($)(se(y).content),P.value=!0})},{icon:St(()=>[ct(se(pe),null,{default:St(()=>[ct(se(Ce),{icon:"carbon:play-filled"})]),_:1})]),default:St(()=>[jn(" "+Rn(se(s)("play")),1)]),_:1}),ct(se(He),{type:"primary",ghost:"",onClick:i[10]||(i[10]=()=>{se(y).content=""})},{icon:St(()=>[ct(se(pe),null,{default:St(()=>[ct(se(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[jn(" "+Rn(se(s)("clear")),1)]),_:1})],64)):kr("",!0)]),_:1})):(Ya(),_o("div",ru,[wr("div",{class:"cursor-pointer w-full h-[150px]",onClick:i[11]||(i[11]=()=>{x.value=!0})},[se(y).content?(Ya(),Ns(se(No),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Ci("border: 1px dashed "+se(d)("green","white")),src:se($)(se(y).content||"")},null,8,["style","src"])):(Ya(),_o("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Ci("border: 1px dashed "+se(d)("green","white"))},[ct(se(pe),{size:64},{default:St(()=>[ct(se(Ce),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),se(v)&&Array.isArray(se(v))?(Ya(),Ns(ke,{key:0,label:se(s)("data"),path:"data"},{default:St(()=>[ct(Ve,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:St(()=>[(Ya(!0),_o(Ds,null,su(se(v),(Se,ft)=>(Ya(),_o(Ds,{key:ft},[ct(Ze,{span:10},{default:St(()=>[ct(se(il),{value:Se,placeholder:Se,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),ct(Ze,{span:14},{default:St(()=>[ct(se(il),{value:se(y).data[Se],"onUpdate:value":Ct=>se(y).data[Se]=Ct,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):kr("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ct(g,{show:se(P),"onUpdate:show":i[14]||(i[14]=Se=>fo(P)?P.value=Se:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:se(_e)},{default:St(()=>[wr("video",iu,[wr("source",{src:se(C)},null,8,cu)])]),_:1},8,["show","title"]),ct(Xe,{show:se(x),"onUpdate:show":i[15]||(i[15]=Se=>fo(x)?x.value=Se:null),title:se(s)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:se(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:i[16]||(i[16]=Se=>{se(y).content=Se,x.value=!1})},null,8,["show","title","upload-config"]),ct(Xe,{show:se(b),"onUpdate:show":i[17]||(i[17]=Se=>fo(b)?b.value=Se:null),title:se(s)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:se(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:i[18]||(i[18]=Se=>{se(y).content=Se,b.value=!1})},null,8,["show","title","upload-config"]),ct(tu,{show:se(j),"onUpdate:show":i[19]||(i[19]=Se=>fo(j)?j.value=Se:null)},null,8,["show"])],64)}}}),pu=Cn(uu,[["__scopeId","data-v-d7bbc8c8"]]),Vi=u=>{const e=Td();switch(u){case"text":return yr({min:40,max:80});case"i18n-text":return`{ "fr": "${yr({min:40,max:80})}", "en": "${yr({min:40,max:80})}" }`;case"textarea":return dn();case"i18n-textarea":return`{ "fr": "${dn()}", "en": "${dn()}" }`;case"number":return Ka({min:10,max:1e4});case"checkbox":return wi();case"single-select":return rn();case"multi-select":return[rn(),rn(),rn()];case"date":return e.format("YYYY-MM-DD");case"daterange":return[e.format("YYYY-MM-DD"),e.add(5,"years").format("YYYY-MM-DD")];case"datetime":return e.format("YYYY-MM-DD HH:mm:ss");case"datetimerange":return[e.format("YYYY-MM-DD HH:mm:ss"),e.clone().add(5,"years").format("YYYY-MM-DD HH:mm:ss")];case"year":return e.format("YYYY");case"yearrange":return[e.format("YYYY"),e.clone().add(5,"years").format("YYYY")];case"month":return e.format("YYYY-MM");case"monthrange":return[e.format("YYYY-MM"),e.clone().add(5,"years").format("YYYY-MM")];case"quarter":return`${e.format("YYYY")}-Q${e.quarter()}`;case"quarterrange":const n=e.clone().add(5,"years");return[`${e.format("YYYY")}-Q${e.quarter()}`,`${n.format("YYYY")}-Q${n.quarter()}`];case"week":return`${e.format("YYYY")}-${e.week()}`;case"editor":return`<p>${dn()}</p><p>${dn()}</p>`;case"i18n-editor":return`{ "fr": "<p>${dn()}</p><p>${dn()}</p>", "en": "<p>${dn()}</p><p>${dn()}</p>" }`;case"image":return cn({width:1200,height:800});case"gallery":return[cn({width:1200,height:800}),cn({width:1200,height:800}),cn({width:1200,height:800}),cn({width:1200,height:800})];case"news-article":return Ka({min:0,max:10});case"news-articles":{let o=Ka({min:0,max:5});return[o,o+1,o+2]}case"news-category":return Ka({min:0,max:10});case"news-categories":{let o=Ka({min:0,max:5});return[o,o+1,o+2]}case"news-tag":return Ka({min:0,max:10});case"news-tags":{let o=Ka({min:0,max:5});return[o,o+1,o+2]}case"icon":return Ts();case"icons":return[Ts(),Ts(),Ts()];case"albums":return[{name:"album",medias:[cn(),cn(),cn(),cn()]}];case"audio":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/mp3/mp31mb.mp3";case"video":return"https://testfilehub.github.io/files/MP4/1mb.MP4";case"document":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/pdf/pdf1mb.pdf";case"file":return"https://testfilehub.github.io/files/TXT/1mb.TXT";case"color":return Md();case"content-model-item":return;case"content-model-items":return[];case"menu-item-link":return 0;case"list":return[{value:rn()},{value:rn()},{value:rn()}];case"i18n-list":return[{value:`{ "fr": "${rn()}", en: "${rn()}" }`}];case"switch":return wi();case"slider":return Ka({min:0,max:100});case"range-slider":return[Ka({min:0,max:100}),Ka({min:0,max:100})];case"gradient":return"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)";default:return u}},{useModel:mu,mergeModels:fu,defineComponent:_u}=await me("vue"),{toDisplayString:zs,createElementVNode:xr,resolveComponent:vu,createVNode:ta,withCtx:Il,unref:Wl,createTextVNode:$r,openBlock:Da,createBlock:Fo,createCommentVNode:As,renderList:Si,Fragment:Ei,createElementBlock:vo,createSlots:yu,isRef:Ui}=await me("vue"),{defineComponent:gu,ref:Ps,inject:hu}=await me("vue"),bu={class:"w-full"},ku={class:"mb-2"},wu={class:"text-base text-left"},xu=["src","onClick"],$u=["src"],Cu=gu({name:"AlbumsPicker"}),Iu=_u({...Cu,props:fu({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=mu(u,"modelValue"),n=u,{t:l}=we(),{fileUrl:o}=tt(),a=Ps(!1),t=Ps(!1),c=Ps(0),fe=Ps(""),le=hu("appConfig"),de=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},z=$=>{e.value&&Array.isArray(e.value)?e.value.splice($,1):e.value=[]},ae=($,d)=>{e.value&&Array.isArray(e.value[d].medias)?e.value[d].medias.splice($,1):e.value&&(e.value[d].medias=[])},B=$=>{const d=$.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(d)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(d)?"video":"unknown"};return($,d)=>{const F=Ce,Z=pe,s=He,re=_a,N=No,W=vu("Draggable"),k=Ac,U=Ma,O=Cl,G=ro,j=Hl;return Da(),vo("section",bu,[xr("section",ku,[ta(O,{size:"small",segmented:e.value&&e.value.length>0},{header:Il(()=>[xr("div",wu,zs(n.title),1)]),"header-extra":Il(()=>[n.readonly?As("",!0):(Da(),Fo(s,{key:0,quaternary:"",onClick:de},{icon:Il(()=>[ta(Z,{size:"18"},{default:Il(()=>[ta(F,{icon:"carbon:folder-add"})]),_:1})]),default:Il(()=>[$r(" "+zs(Wl(l)("addAlbum")),1)]),_:1}))]),default:Il(()=>[(Da(!0),vo(Ei,null,Si(e.value,(ee,v)=>(Da(),Fo(O,{key:v,size:"small",embedded:"",hoverable:"",segmented:ee.medias&&ee.medias.length>0,class:"mb-4"},yu({header:Il(()=>[ta(re,{modelValue:ee.name,"onUpdate:modelValue":A=>ee.name=A,placeholder:Wl(l)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:Il(()=>[ta(U,{style:{"max-height":"100%"}},{default:Il(()=>[ee.medias&&ee.medias.length>0?(Da(),Fo(k,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Il(()=>[ta(W,{list:ee.medias,class:"w-full grid grid-cols-3 gap-4"},{default:Il(()=>[(Da(!0),vo(Ei,null,Si(ee.medias,(A,_)=>(Da(),vo("div",{key:"img-"+_,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[B(A)==="image"?(Da(),Fo(N,{key:0,"object-fit":"cover",src:Wl(o)(A)},null,8,["src"])):(Da(),vo("video",{key:1,muted:"",src:Wl(o)(A),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{fe.value=Wl(o)(A),t.value=!0}},null,8,xu)),n.readonly?As("",!0):(Da(),Fo(s,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:y=>ae(_,v)},{icon:Il(()=>[ta(Z,null,{default:Il(()=>[ta(F,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):As("",!0)]),_:2},1024)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:Il(()=>[ta(s,{quaternary:"",class:"mr-2",onClick:()=>{c.value=v,a.value=!0}},{icon:Il(()=>[ta(Z,null,{default:Il(()=>[ta(F,{icon:"carbon:add-alt"})]),_:1})]),default:Il(()=>[$r(" "+zs(Wl(l)("add")),1)]),_:2},1032,["onClick"]),d[3]||(d[3]=xr("div",{class:"w-2"},null,-1)),ta(s,{quaternary:"",type:"error",onClick:A=>z(v)},{icon:Il(()=>[ta(Z,null,{default:Il(()=>[ta(F,{icon:"carbon:trash-can"})]),_:1})]),default:Il(()=>[$r(" "+zs(Wl(l)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),ta(G,{show:Wl(a),"onUpdate:show":d[0]||(d[0]=ee=>Ui(a)?a.value=ee:null),title:Wl(l)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:Wl(le)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:d[1]||(d[1]=ee=>{e.value&&Array.isArray(e.value[Wl(c)].medias)?e.value[Wl(c)].medias.push(ee):e.value&&(e.value[Wl(c)].medias=[ee]),a.value=!1})},null,8,["show","title","upload-config"]),ta(j,{show:Wl(t),"onUpdate:show":d[2]||(d[2]=ee=>Ui(t)?t.value=ee:null),preset:"card",style:{width:"500px"},title:Wl(l)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:Il(()=>[Wl(fe)?(Da(),vo("video",{key:0,controls:"",autoplay:"",class:"w-full",src:Wl(fe)},null,8,$u)):As("",!0)]),_:1},8,["show","title"])])}}}),Vu=Cn(Iu,[["__scopeId","data-v-d07ac32a"]]),{useModel:Su,mergeModels:Eu,defineComponent:Uu}=await me("vue"),{toDisplayString:Mi,createElementVNode:Ti,resolveComponent:Mu,createVNode:un,withCtx:za,unref:Oo,createTextVNode:Tu,openBlock:yo,createBlock:Cr,createCommentVNode:Ir,renderList:Nu,Fragment:Du,createElementBlock:Vr,isRef:zu}=await me("vue"),{defineComponent:Au,inject:Pu,ref:Lu}=await me("vue"),Bu={class:"w-full"},Fu={class:"mb-2"},Ou={class:"text-base text-left"},qu=Au({name:"GridImagesPicker"}),Ru=Uu({...qu,props:Eu({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=Su(u,"modelValue"),n=Pu("appConfig"),l=u,{t:o}=we(),{fileUrl:a}=tt(),t=Lu(!1),c=le=>{Array.isArray(e.value)?e.value.splice(le,1):e.value=[]},fe=async le=>{Array.isArray(e.value)?e.value.push(...le):e.value=[...le],t.value=!1};return(le,de)=>{const z=Ce,ae=pe,B=He,$=No,d=Mu("Draggable"),F=Ac,Z=Ma,s=Cl,re=ro;return yo(),Vr("section",Bu,[Ti("section",Fu,[un(s,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:za(()=>[Ti("div",Ou,Mi(l.title),1)]),"header-extra":za(()=>[l.readonly?Ir("",!0):(yo(),Cr(B,{key:0,quaternary:"",onClick:de[0]||(de[0]=N=>t.value=!0)},{icon:za(()=>[un(ae,{size:"18"},{default:za(()=>[un(z,{icon:"carbon:add-alt"})]),_:1})]),default:za(()=>[Tu(" "+Mi(Oo(o)("add")),1)]),_:1}))]),default:za(()=>[un(Z,{style:{"max-height":"100%"}},{default:za(()=>[e.value&&e.value.length?(yo(),Cr(F,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:za(()=>[un(d,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:za(()=>[(yo(!0),Vr(Du,null,Nu(e.value,(N,W)=>(yo(),Vr("div",{key:"img-"+W,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[un($,{width:"100","object-fit":"cover",src:Oo(a)(N)},null,8,["src"]),l.readonly?Ir("",!0):(yo(),Cr(B,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:k=>c(W)},{icon:za(()=>[un(ae,null,{default:za(()=>[un(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):Ir("",!0)]),_:1})]),_:1},8,["segmented"])]),un(re,{show:Oo(t),"onUpdate:show":de[1]||(de[1]=N=>zu(t)?t.value=N:null),title:Oo(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:Oo(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:fe},null,8,["show","title","upload-config"])])}}}),ju=Cn(Ru,[["__scopeId","data-v-721b1ffd"]]);var Zl=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(Zl||{}),ql=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(ql||{});const Us=()=>{const{t:u}=we(),{tr:e}=tt(),n=(t,c)=>{if(c&&c.titleFieldName)return bi(t.contentModelData.index[c.titleFieldName])?e(t.contentModelData.index[c.titleFieldName]):t.contentModelData.index[c.titleFieldName];if(t.contentModelData&&t.contentModelData.index){const fe=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const le of fe)if(t.contentModelData.index[le])return bi(t.contentModelData.index[le])?e(t.contentModelData.index[le]):t.contentModelData.index[le]}return e(t.title)},l=[{label:u("contentModel"),value:ql.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:ql.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:ql.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:ql.NEWS_TAG,tagType:"error"}];return{contentTypes:l,getContentTypeLabel:t=>l.find(c=>c.value===t)?.label,getContentTypeTagType:t=>l.find(c=>c.value===t)?.tagType||"default",extractItemTitle:n}};class Ku{id;contentModelId;title;contentModelData;data;isActive;createdAt;updatedAt;contentModel;relatedItems;relatedTo;constructor(e,n,l,o,a,t,c,fe){this.id=t,this.contentModelId=a,this.title=e,this.data=o,this.contentModelData=n,this.isActive=l,this.createdAt=c,this.updatedAt=fe}}const Yu=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["content-model","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/content-model/items",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Jc=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["content-model","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/content-model/items/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Gu=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["content-model","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-model/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Hu=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof Ku){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("ContentModelItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(c=>a[c]);try{for(const c of t)await e({method:"delete",url:`/content-model/items/${c}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},hi=()=>{const{request:u}=Le();return Ua(async({query:e,contentModelId:n})=>{const l=await u({url:`/content-model-items/search/${e}/${n}`});return l.failure&&l.error?[]:l.result.data})},Zc=()=>{const{request:u}=Le();return Ua(async e=>{const n=await u({url:"/content-model-items/list",method:"post",data:e});return n.failure&&n.error?[]:n.result.data})},{defineComponent:Wu}=await me("vue"),{unref:p,renderList:Qu,Fragment:qo,openBlock:lt,createElementBlock:Ga,resolveComponent:Ni,createBlock:ht,createCommentVNode:go,createVNode:_t,withCtx:wt,normalizeStyle:Sr,createElementVNode:Ro,toDisplayString:$a,createTextVNode:Ca,isRef:Kn}=await me("vue"),Xu={key:4,class:"w-full"},Ju={key:5,class:"w-full"},Zu={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},ep=["onClick"],tp={key:0,class:"w-full"},lp={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},ap=["src"],np={id:"video",autoplay:"",controls:"",style:{width:"100%"}},op=["src"],{defineComponent:sp,inject:rp,ref:Nl,h:pn,watch:Di,computed:jo,onMounted:ip}=await me("vue"),{storeToRefs:cp}=await me("pinia"),dp=sp({name:"FormGenerator"}),up=Wu({...dp,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const n=u,l=e,{t:o,locale:a}=we(),{tr:t,pickByTheme:c,fileUrl:fe,mergeArrays:le}=tt(),{extractItemTitle:de}=Us(),{data:z}=Bn(),ae=rp("appConfig");let B=[];if(typeof n.items=="string")try{B=JSON.parse(n.items)}catch{B=[]}else B=ie.cloneDeep(n.items);let $={};if(n.useJson)try{$=JSON.parse(n.modelValue)}catch{$={}}const d=Nl(""),F=Nl(Gl()),Z=Nl(null),s=Nl(n.useJson?$:n.modelValue),re={};B.forEach(D=>{D.key in s.value||(D.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(D.type)?s.value[D.key]=JSON.parse(D.defaultValue):D.type=="number"||D.type=="slider"?s.value[D.key]=parseFloat(D.defaultValue):D.type=="content-model-item"?s.value[D.key]=void 0:D.type=="content-model-items"?s.value[D.key]=[]:D.type=="list"?s.value[D.key]=D.defaultValue.split(",").map(H=>({value:H})):D.type=="i18n-list"?s.value[D.key]=D.defaultValue.split(",").map(H=>({value:`{ "fr": "${H}", "en": "${H}" }`})):s.value[D.key]=D.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(D.type)?s.value[D.key]="":["number","slider"].includes(D.type)?s.value[D.key]=0:["checkbox","switch"].includes(D.type)?s.value[D.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(D.type)?s.value[D.key]=[]:["range-slider"].includes(D.type)?s.value[D.key]=[0,100]:s.value[D.key]=void 0),D.required&&(re[D.key]=[{required:!0,message:o("fillRequired")}]),F.value=Gl()});const N=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],W=D=>pn("span",{},{default:()=>t(D.label)});Di(()=>s.value,D=>{const H=n.useJson?JSON.stringify(D):D,T=async()=>{if(B.length==0)return!0;let it=!1;try{await Z.value?.validate(et=>{it=!et})}catch{it=!1}return it};l("update:modelValue",H),l("update",H,T)},{immediate:!0,deep:!0});const{isLightTheme:k}=cp(Ao()),U=Nl(!1),O=Nl(!1),G=Nl(!1),j=Nl(""),ee=Nl(""),v=Nl(!1),A=Nl(!1),_=Nl(""),y=Nl(""),K=Nl(!1),E=D=>{window.open(D,"_blank")},Y=Nl(!1),X=Nl([]),{data:M,isPending:x}=Uc();Di(()=>M.value,D=>{const H=ie.cloneDeep(D);if(H){X.value=[];for(let T=0;T<H?.length;T++)switch(H[T].targetType){case Zl.EXTERNAL_LINK:X.value.findIndex(it=>it.url===H[T].url)===-1&&X.value.push(H[T]);break;case Zl.PAGE_LINK:X.value.findIndex(it=>it.path===H[T].path)===-1&&X.value.push(H[T]);break}}},{immediate:!0,deep:!0});const b=Nl([]),P=Nl([]),{mutateAsync:_e,isPending:C}=hi(),{mutateAsync:w,isPending:i}=Zc(),h=jo(()=>C.value||i.value),oe=async(D,H)=>{if(!D.length){P.value=[];return}P.value=await _e({query:D,contentModelId:H})},L=jo(()=>le(b.value,P.value,"id")),ne=Nl([]),Me=Nl([]),{mutateAsync:ke,isPending:ye}=Yc(),{mutateAsync:kt,isPending:ut}=Gc(),xe=jo(()=>ut.value||ye.value),qe=async D=>{if(!D.length){Me.value=[];return}Me.value=await kt(D)},Ve=jo(()=>le(ne.value,Me.value,"id")),Ze=sd({enabled:!1}),q=rd({enabled:!1});ip(async()=>{B.find(D=>D.type==="news-categories"||D.type==="news-category")&&(Ze.refetch(),q.refetch());for(let D=0;D<B.length;D++)if(B[D].type==="news-articles"||B[D].type==="news-article"){const H=s.value[B[D].key],T=await ke({ids:B[D].type==="news-articles"?H:[H]});T&&(ne.value=le(ne.value,T,"id"))}else if(B[D].type==="content-model-items"||B[D].type==="content-model-item"){const H=s.value[B[D].key],T=await w({ids:B[D].type==="content-model-items"?H:[H]});T&&(b.value=le(b.value,T,"id"))}});const I=D=>pn("span",{},{default:()=>`${t(D.name)}`}),g=D=>pn("span",{},{default:()=>`${t(D.title)}`}),Xe=D=>pn("span",{},{default:()=>`${t(D.name)}`}),Se=D=>jo(()=>pn("span",{},{default:()=>de(D,z.value?.find(H=>H.id===D.contentModelId))})),ft=({option:D})=>pn("div",{style:{display:"flex",alignItems:"center"}},[`${t(D.title)}`]),Ct=D=>pn("div",{style:{marginLeft:"12px",padding:"4px 0"}},[pn("div",{},{default:()=>`${t(D.title)}`}),pn("small",{},{default:()=>`${D.targetType==Zl.EXTERNAL_LINK?D.url:D.path}`})]);return(D,H)=>{const T=il,it=_a,et=Kc,Jt=fi,ce=On,ve=Pc,je=Ml,ge=xd,Pe=zc,Dt=Na,Rt=No,al=Ce,zt=pe,Yt=He,Te=ju,cl=Ni("IconPicker"),qn=Vu,ya=pr,on=Ni("color-picker"),sn=mr,$e=da,Tl=ca,ua=Hl,pa=ro;return lt(),Ga(qo,null,[(lt(),ht(Tl,{ref_key:"formRef",ref:Z,key:p(F),model:p(s),rules:re,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Sr(n.formStyle)},{default:wt(()=>[(lt(!0),Ga(qo,null,Qu(p(B),(r,In)=>(lt(),ht($e,{key:In,label:p(t)(r.label),path:r.key,"label-style":n.labelStyle,"show-require-mark":r.required,class:"w-full"},{default:wt(()=>[r.type=="text"?(lt(),ht(T,{key:0,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),maxlength:r.settings?.maxLength||void 0,minlength:r.settings?.minLength||void 0,clearable:r.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):r.type=="i18n-text"?(lt(),ht(it,{key:1,modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):r.type=="textarea"?(lt(),ht(T,{key:2,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),maxlength:r.settings?.maxLength||void 0,minlength:r.settings?.minLength||void 0,clearable:r.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):r.type=="i18n-textarea"?(lt(),ht(it,{key:3,modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):r.type=="editor"?(lt(),Ga("div",Xu,[_t(et,{modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),"toolbar-items":N,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):r.type=="i18n-editor"?(lt(),Ga("div",Ju,[_t(it,{modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):r.type=="number"?(lt(),ht(Jt,{key:6,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,max:r.settings?.max||void 0,min:r.settings?.min||void 0,step:r.settings?.step||1,clearable:r.settings?.clearable||!1,placeholder:p(t)(r.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):r.type=="checkbox"?(lt(),ht(ce,{key:7,checked:p(s)[r.key],"onUpdate:checked":V=>p(s)[r.key]=V,"checked-value":r.settings?.["checked-value"]||!0,"unchecked-value":r.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):r.type=="switch"?(lt(),ht(je,{key:8},{default:wt(()=>[_t(ve,{value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,"checked-value":r.settings?.["checked-value"]||!0,"unchecked-value":r.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):r.type=="slider"?(lt(),ht(ge,{key:9,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,min:r.settings?.min||0,max:r.settings?.max||100,step:r.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):r.type=="range-slider"?(lt(),ht(ge,{key:10,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,min:r.settings?.min||0,max:r.settings?.max||100,step:r.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):r.type=="date"?(lt(),ht(Pe,{key:11,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM-dd",format:r.settings?.format||"dd MMMM yyyy",type:"date",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):r.type=="daterange"?(lt(),ht(Pe,{key:12,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM-dd",format:r.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):r.type=="datetime"?(lt(),ht(Pe,{key:13,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM-dd HH:mm:ss",format:r.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):r.type=="datetimerange"?(lt(),ht(Pe,{key:14,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM-dd HH:mm:ss",format:r.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):r.type=="year"?(lt(),ht(Pe,{key:15,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy",type:"year",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="yearrange"?(lt(),ht(Pe,{key:16,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy",type:"yearrange",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="month"?(lt(),ht(Pe,{key:17,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM",type:"month",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="monthrange"?(lt(),ht(Pe,{key:18,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-MM",type:"monthrange",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="quarter"?(lt(),ht(Pe,{key:19,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-Q",type:"quarter",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="quarterrange"?(lt(),ht(Pe,{key:20,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,"value-format":"yyyy-Q",type:"quarterrange",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):r.type=="week"?(lt(),ht(Pe,{key:21,"formatted-value":p(s)[r.key],"onUpdate:formattedValue":V=>p(s)[r.key]=V,type:"week",clearable:r.settings?.clearable||!0,placeholder:p(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):r.type=="single-select"||r.type=="multi-select"?(lt(),ht(Dt,{key:22,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:(r.options||[])?.map(V=>{if(r.type=="multi-select"&&r.settings&&p(s)[r.key]){const Wt=r.settings?.max||1/0;return{...V,disabled:p(s)[r.key].length>=Wt&&!p(s)[r.key].includes(V.value)}}return V}),multiple:r.type=="multi-select",placeholder:p(t)(r.label),"render-label":W,"label-field":"label","value-field":"value",filterable:"",clearable:r.settings?.clearable||!0,"max-tag-count":r.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):r.type=="image"?(lt(),Ga("div",Zu,[Ro("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{d.value=r.key,U.value=!0}},[p(s)[r.key]?(lt(),ht(Rt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Sr("border: 1px dashed "+p(c)("green","white")),src:p(fe)(p(s)[r.key]||"")},null,8,["style","src"])):(lt(),Ga("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Sr("border: 1px dashed "+p(c)("green","white"))},[_t(zt,{size:64},{default:wt(()=>[_t(al,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,ep),p(s)[r.key]?(lt(),ht(Yt,{key:0,quaternary:"",onClick:()=>{d.value=r.key,p(s)[p(d)]=""}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("clear")),1)]),_:2},1032,["onClick"])):go("",!0)])):r.type=="gallery"?(lt(),ht(Te,{key:24,modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,"upload-folder":"images",title:p(t)(r.label)},null,8,["modelValue","onUpdate:modelValue","title"])):r.type=="news-category"||r.type=="news-categories"?(lt(),ht(Dt,{key:25,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:(p(Ze).data.value||[])?.map(V=>{if(r.type=="news-categories"&&r.settings&&p(s)[r.key]){const Wt=r.settings?.max||1/0;return{...V,disabled:p(s)[r.key].length>=Wt&&!p(s)[r.key].includes(V.id)}}return V}),multiple:r.type=="news-categories",placeholder:p(t)(r.label),"render-label":I,"label-field":"name","value-field":"id",filterable:"",clearable:r.settings?.clearable||!0,"max-tag-count":r.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):r.type=="news-tag"||r.type=="news-tags"?(lt(),ht(Dt,{key:26,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:(p(q).data.value||[])?.map(V=>{if(r.type=="news-tags"&&r.settings&&p(s)[r.key]){const Wt=r.settings?.max||1/0;return{...V,disabled:p(s)[r.key].length>=Wt&&!p(s)[r.key].includes(V.id)}}return V}),multiple:r.type=="news-tags",placeholder:p(t)(r.label),"render-label":Xe,"label-field":"name","value-field":"id",filterable:"",clearable:r.settings?.clearable||!0,"max-tag-count":r.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):r.type=="news-article"||r.type=="news-articles"?(lt(),ht(Dt,{key:27,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:(p(Ve)||[])?.map(V=>{if(r.type=="news-articles"&&r.settings&&p(s)[r.key]){const Wt=r.settings?.max||1/0;return{...V,disabled:p(s)[r.key].length>=Wt&&!p(s)[r.key].includes(V.id)}}return V}),multiple:r.type=="news-articles",placeholder:p(t)(r.label),"render-label":g,loading:p(xe),"value-field":"id",filterable:"",clearable:r.settings?.clearable||!0,"max-tag-count":r.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:qe},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):r.type=="icon"||r.type=="icons"?(lt(),ht(cl,{key:28,modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),multiple:r.type=="icons","icons-list-placeholder":p(o)("enterIconNameInSearchBar"),"search-placeholder":p(o)("search"),"empty-text":p(o)("noIconsFound"),"icon-library":r.settings?.library||"all",clearable:r.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):r.type=="albums"?(lt(),ht(qn,{key:29,modelValue:p(s)[r.key],"onUpdate:modelValue":V=>p(s)[r.key]=V,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):r.type=="audio"?(lt(),ht(ya,{key:30},{default:wt(()=>[_t(Yt,{type:"primary",secondary:"",onClick:()=>{d.value=r.key,v.value=!0}},{default:wt(()=>[Ca($a(p(o)("select")),1)]),_:2},1032,["onClick"]),_t(T,{value:p(s)[r.key]?p(Mo)(p(s)[r.key]):"",placeholder:p(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(s)[r.key]?(lt(),Ga(qo,{key:0},[_t(Yt,{type:"primary",ghost:"",onClick:()=>{_.value=p(t)(r.label),y.value=p(fe)(p(s)[r.key]),A.value=!0}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:play"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("play")),1)]),_:2},1032,["onClick"]),_t(Yt,{type:"primary",ghost:"",onClick:()=>{d.value=r.key,p(s)[p(d)]=""}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):go("",!0)]),_:2},1024)):r.type=="video"?(lt(),ht(ya,{key:31},{default:wt(()=>[_t(Yt,{type:"primary",secondary:"",onClick:()=>{d.value=r.key,O.value=!0}},{default:wt(()=>[Ca($a(p(o)("select")),1)]),_:2},1032,["onClick"]),_t(T,{value:p(s)[r.key]?p(Mo)(p(s)[r.key]):"",placeholder:p(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(s)[r.key]?(lt(),Ga(qo,{key:0},[_t(Yt,{type:"primary",ghost:"",onClick:()=>{j.value=p(t)(r.label),ee.value=p(fe)(p(s)[r.key]),G.value=!0}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:play"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("play")),1)]),_:2},1032,["onClick"]),_t(Yt,{type:"primary",ghost:"",onClick:()=>{d.value=r.key,p(s)[p(d)]=""}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):go("",!0)]),_:2},1024)):r.type=="document"?(lt(),ht(ya,{key:32},{default:wt(()=>[_t(Yt,{type:"primary",secondary:"",onClick:()=>{d.value=r.key,K.value=!0}},{default:wt(()=>[Ca($a(p(o)("select")),1)]),_:2},1032,["onClick"]),_t(T,{value:p(s)[r.key]?p(Mo)(p(s)[r.key]):"",placeholder:p(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(s)[r.key]?(lt(),Ga(qo,{key:0},[_t(Yt,{type:"primary",ghost:"",onClick:V=>E(p(fe)(p(s)[r.key]))},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"mdi:open-in-new"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("open")),1)]),_:2},1032,["onClick"]),_t(Yt,{type:"primary",ghost:"",onClick:()=>{d.value=r.key,p(s)[p(d)]=""}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):go("",!0)]),_:2},1024)):r.type=="file"?(lt(),ht(ya,{key:33},{default:wt(()=>[_t(Yt,{type:"primary",secondary:"",onClick:()=>{d.value=r.key,Y.value=!0}},{default:wt(()=>[Ca($a(p(o)("select")),1)]),_:2},1032,["onClick"]),_t(T,{value:p(s)[r.key]?p(Mo)(p(s)[r.key]):"",placeholder:p(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(s)[r.key]?(lt(),ht(Yt,{key:0,type:"primary",ghost:"",onClick:()=>{d.value=r.key,p(s)[p(d)]=""}},{icon:wt(()=>[_t(zt,null,{default:wt(()=>[_t(al,{icon:"carbon:trash-can"})]),_:1})]),default:wt(()=>[Ca(" "+$a(p(o)("clear")),1)]),_:2},1032,["onClick"])):go("",!0)]),_:2},1024)):r.type=="color"||r.type=="gradient"?(lt(),ht(on,{key:34,"pure-color":p(s)[r.key],"onUpdate:pureColor":V=>p(s)[r.key]=V,"default-pure-color":"#00000000","picker-type":"chrome","use-type":r.type=="color"?"pure":"gradient",format:r.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:p(k)?"white":"black",lang:p(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):r.type=="content-model-item"||r.type=="content-model-items"?(lt(),ht(Dt,{key:35,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:(p(L)||[])?.map(V=>{if(r.type=="content-model-items"&&r.settings&&p(s)[r.key]){const Wt=r.settings?.max||1/0;return{...V,disabled:p(s)[r.key].length>=Wt&&!p(s)[r.key].includes(V.id)}}return V}),multiple:r.type=="content-model-items",placeholder:p(t)(r.label),"render-label":V=>Se(V).value,loading:p(h),"value-field":"id",filterable:"",clearable:r.settings?.clearable||!0,"max-tag-count":r.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:V=>oe(V,r.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):r.type=="menu-item-link"?(lt(),ht(Dt,{key:36,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,options:p(X)||[],placeholder:p(t)(r.label),"render-label":Ct,"render-tag":ft,loading:p(x),"label-field":"title","value-field":"id",filterable:"",clearable:r.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):r.type=="list"?(lt(),ht(sn,{key:37,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),max:r.settings?.max||void 0,min:r.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:wt(({value:V})=>[r.settings?.type=="editor"?(lt(),Ga("div",tp,[_t(et,{modelValue:V.value,"onUpdate:modelValue":Wt=>V.value=Wt,"toolbar-items":N,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(lt(),ht(T,{key:1,value:V.value,"onUpdate:value":Wt=>V.value=Wt,type:r.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):r.type=="i18n-list"?(lt(),ht(sn,{key:38,value:p(s)[r.key],"onUpdate:value":V=>p(s)[r.key]=V,placeholder:p(t)(r.label),max:r.settings?.max||void 0,min:r.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:wt(({value:V})=>[_t(it,{modelValue:V.value,"onUpdate:modelValue":Wt=>V.value=Wt,type:r.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):go("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),_t(ua,{show:p(A),"onUpdate:show":H[0]||(H[0]=r=>Kn(A)?A.value=r:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:p(_)},{default:wt(()=>[Ro("audio",lp,[Ro("source",{src:p(y)},null,8,ap)])]),_:1},8,["show","title"]),_t(ua,{show:p(G),"onUpdate:show":H[1]||(H[1]=r=>Kn(G)?G.value=r:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:p(j)},{default:wt(()=>[Ro("video",np,[Ro("source",{src:p(ee)},null,8,op)])]),_:1},8,["show","title"]),_t(pa,{show:p(U),"onUpdate:show":H[2]||(H[2]=r=>Kn(U)?U.value=r:null),title:p(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:p(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[3]||(H[3]=r=>{p(s)[p(d)]=r,U.value=!1})},null,8,["show","title","upload-config"]),_t(pa,{show:p(O),"onUpdate:show":H[4]||(H[4]=r=>Kn(O)?O.value=r:null),title:p(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:p(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[5]||(H[5]=r=>{p(s)[p(d)]=r,O.value=!1})},null,8,["show","title","upload-config"]),_t(pa,{show:p(v),"onUpdate:show":H[6]||(H[6]=r=>Kn(v)?v.value=r:null),title:p(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:p(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[7]||(H[7]=r=>{p(s)[p(d)]=r,v.value=!1})},null,8,["show","title","upload-config"]),_t(pa,{show:p(K),"onUpdate:show":H[8]||(H[8]=r=>Kn(K)?K.value=r:null),title:p(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:p(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[9]||(H[9]=r=>{p(s)[p(d)]=r,K.value=!1})},null,8,["show","title","upload-config"]),_t(pa,{show:p(Y),"onUpdate:show":H[10]||(H[10]=r=>Kn(Y)?Y.value=r:null),title:p(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:p(ae)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[11]||(H[11]=r=>{p(s)[p(d)]=r,Y.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Es=Cn(up,[["__scopeId","data-v-e0ec8f81"]]),{defineComponent:pp}=await me("vue"),{unref:Et,resolveComponent:ih,createVNode:Rl,withCtx:Qt,openBlock:Bl,createBlock:Ia,createCommentVNode:zi,renderList:Ls,Fragment:ho,createElementBlock:Yn,toDisplayString:Gn,createTextVNode:bo,isRef:mp,createSlots:fp,createElementVNode:Er,vShow:Ur,withDirectives:Mr,Transition:Tr}=await me("vue"),_p={key:0},vp={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},{ref:yp,inject:Vn,watch:gp,reactive:Hn}=await me("vue"),hp=pp({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(u){const e=u,{t:n}=we(),{tr:l,editKeysToCamelCase:o}=tt(),a=yp("index"),t=Vn("formValueValidate1"),c=Vn("formValueValidate2"),fe=Vn("formValueValidate3"),le=Vn("initialSettings"),de=Vn("initialData"),z=Vn("settings"),ae=Vn("data"),B=Vn("refreshKey"),{data:$,isPending:d}=id({slug:e.slug,linkId:e.linkId,pageId:e.pageId});return gp(()=>$?.value,F=>{const Z=ie.cloneDeep(F),s=Z?.pages?.length?Z?.pages[0].pivot:null;Z&&ae&&s&&(ie.isObject(s?.data)&&ci(s?.data)?ae.value=Hn(s?.data):ae.value=Hn({}),ie.forIn(o(Z.dataStructure),(re,N)=>{(!ae.value[N]||Array.isArray(ae.value[N])&&ae.value[N].length==0)&&(N==="index"?ae.value[N]=Hn({}):ae.value[N]=Hn([]))})),de&&ae&&(de.value=ie.cloneDeep(ae.value)),Z&&z&&(ie.isObject(s?.settings)&&ci(s?.settings)?z.value=Hn(s?.settings):z.value=Hn({}),ie.forIn(o(Z.settingsStructure),(re,N)=>{z.value[N]||(z.value[N]=Hn({}))})),le&&z&&(le.value=ie.cloneDeep(z.value)),B&&(B.value=Gl())},{immediate:!0,deep:!0}),(F,Z)=>{const s=io,re=Ml,N=Ce,W=pe,k=Lc,U=He,O=_i,G=Cl,j=Ra,ee=vi,v=qa;return Et(d)?(Bl(),Ia(re,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:Qt(()=>[Rl(s)]),_:1})):(Bl(),Yn(ho,{key:1},[Et(o)(Et($)?.dataStructure)?(Bl(),Yn("section",_p,[Er("div",vp,[Rl(O,{value:Et(a),"onUpdate:value":Z[1]||(Z[1]=A=>mp(a)?a.value=A:null),type:"card",size:"small"},fp({default:Qt(()=>[(Bl(!0),Yn(ho,null,Ls(Et(o)(Et($)?.dataStructure),(A,_)=>(Bl(),Ia(k,{key:_,name:String(_)},{default:Qt(()=>[String(_)==="index"?(Bl(),Ia(W,{key:0,class:"mr-1"},{default:Qt(()=>[Rl(N,{icon:"carbon:types"})]),_:1})):zi("",!0),bo(" "+Gn(String(_)==="index"?Et(n)("general"):Et(l)(A.title)),1)]),_:2},1032,["name"]))),128)),Rl(k,{name:"_settings"},{default:Qt(()=>[Rl(W,{class:"mr-1"},{default:Qt(()=>[Rl(N,{icon:"carbon:settings"})]),_:1}),bo(" "+Gn(Et(n)("settings")),1)]),_:1})]),_:2},[Et(a)!=="index"?{name:"suffix",fn:Qt(()=>[Rl(U,{quaternary:"",size:"small",onClick:Z[0]||(Z[0]=()=>Et(ae)[Et(a)].push({}))},{icon:Qt(()=>[Rl(W,null,{default:Qt(()=>[Rl(N,{icon:"carbon:add-alt"})]),_:1})]),default:Qt(()=>[bo(" "+Gn(Et(n)("add")),1)]),_:1})]),key:"0"}:void 0]),1032,["value"])]),Rl(v,{appear:"",name:"slide-fade"},{default:Qt(()=>[Er("section",null,[(Bl(!0),Yn(ho,null,Ls(Et(o)(Et($)?.dataStructure),(A,_)=>(Bl(),Yn(ho,{key:_},[String(_)==="index"?(Bl(),Ia(Tr,{key:0,name:"slide-fade",mode:"out-in"},{default:Qt(()=>[Mr(Rl(G,{size:"small",class:"mb-2",embedded:""},{default:Qt(()=>[(Bl(),Ia(Es,{key:`${Et(B)}-${_}-form-1`,modelValue:Et(ae)[_],"onUpdate:modelValue":y=>Et(ae)[_]=y,items:A,onUpdate:(y,K)=>{t.value=K}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1536),[[Ur,Et(a)==="index"]])]),_:2},1024)):(Bl(),Ia(Tr,{key:1,name:"slide-fade",mode:"out-in"},{default:Qt(()=>[Mr(Rl(G,{size:"small",class:"mb-2",embedded:""},{default:Qt(()=>[(Bl(!0),Yn(ho,null,Ls(Et(ae)[_],(y,K)=>(Bl(),Ia(G,{key:K,size:"small",class:"mb-2"},{header:Qt(()=>[Rl(j,{size:"medium",type:"info"},{default:Qt(()=>[bo(Gn(String(K+1)),1)]),_:2},1024)]),"header-extra":Qt(()=>[Rl(U,{secondary:"",type:"error",size:"small",onClick:()=>Et(ae)[_].splice(K,1)},{icon:Qt(()=>[Rl(W,null,{default:Qt(()=>[Rl(N,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:Qt(()=>[(Bl(),Ia(Es,{key:`${Et(B)}-${_}-${K}-form-2`,modelValue:Et(ae)[_][K],"onUpdate:modelValue":E=>Et(ae)[_][K]=E,items:A.items,onUpdate:(E,Y)=>{c.value=Y}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024))),128))]),_:2},1536),[[Ur,Et(a)===String(_)]])]),_:2},1024))],64))),128)),Rl(Tr,{name:"slide-fade",mode:"out-in"},{default:Qt(()=>[Mr(Rl(G,{size:"small",class:"mb-2",embedded:""},{default:Qt(()=>[Et($)?.settingsStructure?(Bl(!0),Yn(ho,{key:0},Ls(Et(o)(Et($)?.settingsStructure),(A,_)=>(Bl(),Ia(G,{key:_,size:"small",class:"mb-2"},{header:Qt(()=>[Er("span",null,Gn(Et(l)(A.title)),1)]),default:Qt(()=>[Et(z)[_]?(Bl(),Ia(Es,{key:`${Et(B)}-${_}-form-3`,modelValue:Et(z)[_],"onUpdate:modelValue":y=>Et(z)[_]=y,items:A.items,onUpdate:(y,K)=>{fe.value=K}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):zi("",!0)]),_:2},1024))),128)):(Bl(),Ia(ee,{key:1,type:"warning","show-icon":""},{default:Qt(()=>[bo(Gn(Et(n)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[Ur,Et(a)==="_settings"]])]),_:1})])]),_:1})])):(Bl(),Ia(ee,{key:1,type:"warning","show-icon":""},{default:Qt(()=>[bo(Gn(Et(n)("noDataStructure")),1)]),_:1}))],64))}}}),bp=Cn(hp,[["__scopeId","data-v-5a3cab89"]]),kp=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["pages"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/pages",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},ed=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["pages"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/pages/${t.slug}`,data:ll(t,["id","slug"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},wp=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["pages"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:a})=>{o.start();const t=await e({method:"delete",url:`/pages/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},xp=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["sections"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/sections",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},td=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["sections"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/sections/${t.slug}`,data:ll(t,["id","slug"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},$p=()=>{const{request:u}=Le(),{t:e}=we(),n=gi(),l=We(),o=Oe();return Ua(async a=>{const t=await u({url:`/sections/${a.slug}/data-source-page`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},Cp=()=>{const{request:u}=Le(),{t:e}=we(),n=gi(),l=We(),o=Oe();return Ua(async a=>{const t=await u({url:`/sections/${a.slug}/duplicate`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},Ip=()=>{const{request:u}=Le(),{t:e}=we(),n=gi(),l=We(),o=Oe();return Ua(async a=>{const t=await u({url:`/sections/${a.slug}/copy-data`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},{defineComponent:Vp}=await me("vue"),{unref:be,resolveComponent:Sp,createVNode:Ie,withCtx:Ue,toDisplayString:kl,createTextVNode:la,normalizeClass:ko,openBlock:dl,createBlock:Va,createCommentVNode:Bs,vShow:Ep,withDirectives:Up,createElementVNode:Dl,renderList:Fs,Fragment:Ko,createElementBlock:Sa,withModifiers:Ai,isRef:Os}=await me("vue"),Mp={class:"absolute top-0 left-0 z-10 w-full"},Tp={class:"flex items-center justify-between ml-1 mr-2.5"},Np={key:0},Dp={key:1},zp={key:0},Ap={class:"flex items-center"},Pp={class:"text-base"},Lp={class:"absolute top-[-10px] right-[-10px] z-[10]"},Bp={class:"flex items-center justify-center cursor-pointer gap-2"},Fp={key:1},Op={class:"mt-4"},qp={key:2,class:"mt-2 text-xs"},Rp={class:"my-8"},jp={class:"flex items-center justify-between"},Kp={class:"text-base"},Yp={class:"my-8"},Gp={class:"flex items-center justify-between"},Hp={class:"text-base"},Wp={class:"my-8"},{ref:Vl,watch:Qp,computed:Yo,provide:Sn}=await me("vue"),Xp=Vp({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const n=ea(),{t:l}=we(),o=u,a=e,t=Vl(Gl()),c=Vl({}),fe=Vl({}),le=Vl({}),de=Vl({}),z=Vl(),ae=Vl(),B=Vl(),$=Vl([]),d=Vl([]),F=Vl({}),Z=Vl({}),{tr:s,pickByTheme:re,editKeysToCamelCase:N}=tt(),{data:W}=ui(),{data:k,isPending:U}=cd(o.slug),{mutate:O,isPending:G}=ed(),{mutate:j,isPending:ee}=wp(),{mutate:v,isPending:A}=$p(),{mutate:_,isPending:y}=td(),{mutate:K,isPending:E}=Cp(),{mutate:Y,isPending:X}=Ip();Qp(()=>k.value,ce=>{const ve=ie.cloneDeep(ce);if(ve&&Array.isArray(ve?.sections)){const je=ve.sections;if(Array.isArray(ve?.sectionsOrder)){$.value=[];for(const ge of ve.sectionsOrder)if(ge){const Pe=je.find(Dt=>`${Dt.slug}__${Dt.pivot?.linkId}`===ge);Pe&&$.value.push(Pe)}for(const ge of je)$.value.map(Pe=>`${Pe.slug}__${Pe.pivot?.linkId}`).includes(`${ge.slug}__${ge.pivot?.linkId}`)||$.value.push(ge)}else $.value=ie.cloneDeep(je);if(Array.isArray(ve.sectionsDisabled))for(const ge of ve.sections)ge&&(F.value[`${ge.slug}__${ge.pivot?.linkId}`]=!ve.sectionsDisabled.includes(`${ge.slug}__${ge.pivot?.linkId}`));else for(const ge of ve.sections)ge&&(F.value[`${ge.slug}__${ge.pivot?.linkId}`]=!0)}Z.value=ie.cloneDeep(F.value),d.value=ie.cloneDeep($.value),t.value=Gl()},{immediate:!0,deep:!0});const M=Yo(()=>ie.isEqual(c.value,le.value)&&ie.isEqual(fe.value,de.value)&&ie.isEqual($.value,d.value)&&ie.isEqual(F.value,Z.value)),x=async()=>{const ce=z.value&&await z.value(),ve=ae.value&&await ae.value(),je=B.value&&await B.value(),ge=async()=>{D.value&&_({slug:D.value.slug,dataSourceLinkId:D.value.pivot?.dataSourceLinkId,dataSourcePageId:D.value.pivot?.dataSourcePageId,settings:fe.value,data:c.value}),O({slug:o.slug,sectionsOrder:$.value.map(Pe=>`${Pe.slug}__${Pe.pivot?.linkId}`),sectionsDisabled:Object.keys(F.value).filter(Pe=>!F.value[Pe])})};!D.value||(!z.value||ce)&&(!ae.value||ve)&&(!B.value||je)?await ge():n.warning({title:l("confirm"),content:l("mandatoryFieldsNotFilledInConfirmation"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{await ge()}})},b=ce=>{const ge=$.value.filter(Pe=>Pe.id===ce.id).map(Pe=>Pe.pivot?.createdAt||Pe.pivot?.updatedAt||"").sort((Pe,Dt)=>new Date(Pe).getTime()-new Date(Dt).getTime()).indexOf(ce.pivot?.createdAt||ce.pivot?.updatedAt||"");return ce.pivot?.linkId=="default"?s(ce.title):s(ce.title)+" ("+(ge+1)+")"},P=async ce=>{n.warning({title:l("confirm"),content:l("confirmDeletePage"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{ce.id&&j({id:ce.id,slug:ce.slug},{onSuccess:()=>{a("delete",k.value)}})}})},_e=Vl([]),C=Vl(!1),w=()=>{_e.value=[],$.value.forEach(ce=>{ce.id&&_e.value.push(ce.id)}),C.value=!0},i=ce=>{ce.id&&(_e.value.includes(ce.id)?_e.value=_e.value.filter(ve=>ve!==ce.id):_e.value.push(ce.id))},h=ce=>Yo({get:()=>ce.id?_e.value.includes(ce.id):!1,set:ve=>{ce.id&&(ve?_e.value=_e.value.filter(je=>je!==ce.id):_e.value.includes(ce.id)||_e.value.push(ce.id))}}),oe=async()=>{O({slug:o.slug,sectionsIds:_e.value})},L=Vl(0),ne=Vl([]),Me=Vl(!1),ke=ce=>{L.value=ce,ne.value=[],Me.value=!0},ye=ce=>{ce.id&&(ne.value.includes(ce.id)?ne.value=ne.value.filter(ve=>ve!==ce.id):ne.value.push(ce.id))},kt=ce=>Yo({get:()=>ce.id?ne.value.includes(ce.id):!1,set:ve=>{ce.id&&(ve?ne.value=ne.value.filter(je=>je!==ce.id):ne.value.includes(ce.id)||ne.value.push(ce.id))}}),ut=async()=>{if(!ne.value.length)return!1;const ce=$.value.map(ge=>`${ge.slug}__${ge.pivot?.linkId}`),ve=ne.value.map(ge=>{const Pe=W.value?.find(Dt=>Dt.id===ge);return`${Pe?.slug}__${Pe?.pivot?.linkId}`}),je=[...ce.slice(0,L.value),...ve,...ce.slice(L.value)];O({slug:o.slug,sectionsIds:[...$.value.map(ge=>ge.id),...ne.value],sectionsOrder:je})},xe=Yo(()=>(W.value||[]).filter(ce=>!$.value.find(ve=>ve.id===ce.id))),qe=(ce,ve,je=!1)=>ce.map(ge=>{const Dt=ce.filter(Te=>Te.id===ge.id).map(Te=>Te.pivot?.createdAt||Te.pivot?.updatedAt||"").sort((Te,cl)=>new Date(Te).getTime()-new Date(cl).getTime()),Rt=Dt.indexOf(ge.pivot?.createdAt||ge.pivot?.updatedAt||""),al=k.value?.id==ge.id?l("currentPage"):s(ge.title),zt=Dt.length>1?" - "+s(ve?.title):"",Yt=ge.pivot?.linkId!="default"?" ("+(Rt+1)+")":"";return{label:al+zt+Yt,value:ge.id+"__"+ge.pivot?.linkId,disabled:je?k.value?.id==ge.id&&ve?.id==ge.pivot?.sectionId&&ve?.pivot?.dataSourceLinkId==ge.pivot?.linkId:!1}}),Ve=async(ce,ve)=>{const je=ve?.split("__")||[],ge=je.length?je[0]:null,Pe=je.length>1?je[1]:null;M.value?v({slug:ce.slug,data:{pageId:k.value?.id,linkId:ce.pivot?.linkId,sourcePageId:ge,sourceLinkId:Pe}}):n.warning({title:l("confirm"),content:l("confirmUpdateDataSourcePage"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:()=>v({slug:ce.slug,data:{pageId:k.value?.id,linkId:ce.pivot?.linkId,sourcePageId:ge,sourceLinkId:Pe}})})},Ze=ce=>{n.warning({title:l("confirm"),content:l("confirmRemoveSection"),positiveText:l("remove"),negativeText:l("cancel"),onPositiveClick:()=>O({slug:o.slug,removedSectionsIds:[{id:ce.id,linkId:ce.pivot?.linkId}]})})},q=ce=>{n.warning({title:l("confirm"),content:l("confirmDuplicateSection"),positiveText:l("duplicate"),negativeText:l("cancel"),onPositiveClick:()=>K({slug:ce.slug,data:{pageId:k.value?.id,linkId:ce.pivot?.linkId}})})},I=ce=>{n.warning({title:l("confirm"),content:l("confirmFillInFakeData"),positiveText:l("generate"),negativeText:l("cancel"),onPositiveClick:()=>{const ve={};ie.forIn(N(ce?.dataStructure),(je,ge)=>{if(ge==="index"){ve[ge]={};for(const Pe of je)ve.index[Pe.key]=Vi(Pe.type)}else{ve[ge]=[];for(let Pe=0;Pe<3;Pe++){const Dt={};for(const Rt of je.items)Dt[Rt.key]=Vi(Rt.type);ve[ge].push(Dt)}}}),_({slug:ce.slug,dataSourceLinkId:ce.pivot?.dataSourceLinkId,dataSourcePageId:ce.pivot?.dataSourcePageId,data:ve})}})},g=Vl(!1),Xe=Vl(null),Se=Vl(null),ft=ce=>{Xe.value=ce,Se.value=null,g.value=!0},Ct=async()=>{if(!Se.value)return!1;const ce=Se.value.split("__")||[],ve=ce.length?ce[0]:null,je=ce.length>1?ce[1]:null;Y({slug:Xe.value?.slug,data:{fromPageId:ve,fromLinkId:je,toPageId:k.value?.id,toLinkId:Xe.value?.pivot?.linkId}})},D=Vl(null),H=ce=>{D.value=ce},T=()=>{D.value&&(D.value=null)},{getSettingValue:it}=dd(),et=()=>{const ce=`${ud(pd())}/${(it("basePath")||"creopse")+Mc.VISUAL_EDITOR.PATH}?page=${k.value?.slug}`;md(ce,[],{target:"_blank",method:"GET"})},Jt=Yo(()=>G.value||ee.value||y.value||A.value||E.value);return Sn("refreshKey",t),Sn("formValueValidate1",z),Sn("formValueValidate2",ae),Sn("formValueValidate3",B),Sn("initialSettings",de),Sn("initialData",le),Sn("settings",fe),Sn("data",c),(ce,ve)=>{const je=Ce,ge=pe,Pe=He,Dt=ja,Rt=Ml,al=Oa,zt=Cd,Yt=qa,Te=$d,cl=Cl,qn=Bc,ya=On,on=Ra,sn=Na,$e=uo,Tl=co,ua=Sp("Draggable"),pa=Ta,r=Ma,In=Hl;return dl(),Sa(Ko,null,[Ie(al,{to:"#alt-action"},{default:Ue(()=>[Ie(Rt,{align:"center"},{default:Ue(()=>[Ie(Pe,{secondary:"",type:"error",disabled:be(Jt),onClick:ve[0]||(ve[0]=V=>be(k)?P(be(k)):null)},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:trash-can"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("delete")),1)]),_:1},8,["disabled"]),Ie(Pe,{secondary:"",type:"info",disabled:be(Jt),onClick:ve[1]||(ve[1]=V=>be(k)?ce.openFormModal(be(k)):null)},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:edit"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("editPage")),1)]),_:1},8,["disabled"]),Ie(Dt,{vertical:"",class:ko(be(re)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ie(Pe,{secondary:"",type:"primary",loading:be(Jt),disabled:be(M),onClick:ve[2]||(ve[2]=V=>x())},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:save"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Dl("section",Mp,[Ie(cl,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:Ue(()=>[Dl("div",Tp,[Ie(Te,null,{default:Ue(()=>[Ie(zt,{onClick:ve[3]||(ve[3]=V=>T())},{default:Ue(()=>[Ie(ge,{class:"mr-1"},{default:Ue(()=>[Ie(je,{icon:"carbon:document"})]),_:1}),la(" "+kl(be(s)(be(k)?.title)),1)]),_:1}),Ie(Yt,{appear:"",name:"slide-fade"},{default:Ue(()=>[be(D)?(dl(),Va(zt,{key:0},{default:Ue(()=>[la(kl(b(be(D))),1)]),_:1})):Bs("",!0)]),_:1})]),_:1}),Ie(Rt,null,{default:Ue(()=>[Up(Ie(Pe,{onClick:ve[4]||(ve[4]=V=>et()),size:"small",secondary:"",type:"success"},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:view"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("openVisualEditor")),1)]),_:1},512),[[Ep,!1]]),be(D)?(dl(),Va(Pe,{key:0,onClick:ve[5]||(ve[5]=V=>T()),size:"small",secondary:"",type:"warning",title:be(l)("exit")},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):Bs("",!0)]),_:1})])]),_:1})]),Dl("div",{class:ko(`${be(D)?"h-[90px]":"h-[50px]"}`)},null,2),be(D)?(dl(),Va(bp,{key:0,"page-id":be(k)?.id,slug:be(D)?.slug,"link-id":be(D)?.pivot?.dataSourceLinkId},null,8,["page-id","slug","link-id"])):(dl(),Va(Yt,{key:1,appear:"",name:"slide-fade"},{default:Ue(()=>[Dl("section",null,[be(U)?(dl(),Sa("section",Np,[(dl(),Sa(Ko,null,Fs(7,V=>Ie(qn,{key:V,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(dl(),Sa("section",Dp,[be(k)&&Array.isArray(be(k).sections)&&be(k).sections.length?(dl(),Sa("section",zp,[Ie(ua,{list:be($)},{default:Ue(()=>[(dl(!0),Sa(Ko,null,Fs(be($),(V,Wt)=>(dl(),Sa("section",{key:V.id},[Ie(cl,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:Ue(()=>[Ie(Tl,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ue(({collapsed:ga})=>[Ie(Rt,{align:"center",justify:"space-between"},{default:Ue(()=>[Ie(Pe,{secondary:"",type:"primary",size:"small",onClick:Ai(_r=>H(V),["stop"])},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:archive"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("dataAndSettings")),1)]),_:2},1032,["onClick"]),Ie(ge,null,{default:Ue(()=>[ga?(dl(),Va(je,{key:0,icon:"fa-solid:chevron-left"})):(dl(),Va(je,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ue(()=>ve[16]||(ve[16]=[Dl("span",null,null,-1)])),default:Ue(()=>[Ie($e,{name:"1"},{header:Ue(()=>[Dl("div",Ap,[Ie(ge,{size:"21",class:"cursor-move mr-4"},{default:Ue(()=>[Ie(je,{icon:"fa-solid:grip-lines"})]),_:1}),Ie(ya,{checked:be(F)[`${V.slug}__${V.pivot?.linkId}`],"onUpdate:checked":ga=>be(F)[`${V.slug}__${V.pivot?.linkId}`]=ga,size:"small",class:"mr-4",onClick:ve[6]||(ve[6]=Ai(()=>{},["stop"]))},{default:Ue(()=>[la(kl(be(l)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),Ie(on,{size:"small",type:"info"},{default:Ue(()=>[la(kl(Wt+1),1)]),_:2},1024),Ie(Dt,{vertical:"",class:ko(be(re)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Dl("span",Pp,kl(b(V)),1)])]),default:Ue(()=>[Ie(Rt,null,{default:Ue(()=>[Ie(Pe,{size:"small",type:"error",secondary:"",onClick:ga=>Ze(V)},{default:Ue(()=>[Ie(ge,{size:"18",class:"mr-1"},{default:Ue(()=>[Ie(je,{icon:"carbon:close"})]),_:1}),la(" "+kl(be(l)("removeSection")),1)]),_:2},1032,["onClick"]),Ie(Pe,{size:"small",type:"warning",secondary:"",onClick:ga=>q(V)},{default:Ue(()=>[Ie(ge,{size:"18",class:"mr-1"},{default:Ue(()=>[Ie(je,{icon:"carbon:partition-same"})]),_:1}),la(" "+kl(be(l)("duplicateSection")),1)]),_:2},1032,["onClick"]),Ie(Pe,{size:"small",type:"info",secondary:"",onClick:ga=>I(V)},{default:Ue(()=>[Ie(ge,{size:"18",class:"mr-1"},{default:Ue(()=>[Ie(je,{icon:"carbon:magic-wand"})]),_:1}),la(" "+kl(be(l)("fillInFakeData")),1)]),_:2},1032,["onClick"]),Ie(Pe,{size:"small",type:"info",secondary:"",onClick:ga=>ft(V)},{default:Ue(()=>[Ie(ge,{size:"18",class:"mr-1"},{default:Ue(()=>[Ie(je,{icon:"carbon:copy"})]),_:1}),la(" "+kl(be(l)("copyData")),1)]),_:2},1032,["onClick"]),Ie(Dt,{vertical:"",class:ko(be(re)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ie(Rt,{align:"center"},{default:Ue(()=>[Dl("span",null,kl(be(l)("dataSource")),1),Ie(sn,{value:`${V.pivot?.dataSourcePageId}__${V.pivot?.dataSourceLinkId}`,options:qe(V.pages||[],V),placeholder:be(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ga=>Ve(V,ga)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),Wt<be($).length-1?(dl(),Sa("div",{key:0,class:ko(`relative border-dashed border-y-2 h-1.5  ${be(re)("!border-zinc-300","!border-zinc-600")}`)},[Dl("div",Lp,[Ie(Pe,{size:"tiny",type:"info",title:be(l)("insertSections"),onClick:ga=>ke(Wt+1)},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:insert-page"})]),_:1})]),_:2},1032,["title","onClick"])])],2)):Bs("",!0)]))),128))]),_:1},8,["list"]),Ie(cl,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:ve[7]||(ve[7]=V=>w())},{default:Ue(()=>[Dl("div",Bp,[Ie(ge,{size:"20"},{default:Ue(()=>[Ie(je,{icon:"carbon:row"})]),_:1}),la(" "+kl(be(l)("insertOrRemoveSections")),1)])]),_:1})])):(dl(),Sa("section",Fp,[Ie(cl,{size:"large",class:ko(`mb-2 !border-dashed !border-2 ${be(re)("!border-zinc-300","!border-zinc-600")}`)},{default:Ue(()=>[Ie(pa,{description:be(l)("noSectionOnThisPage")},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:page-break"})]),_:1})]),extra:Ue(()=>[Dl("div",Op,[Ie(Pe,{size:"small",secondary:"",onClick:ve[8]||(ve[8]=V=>w())},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:row"})]),_:1})]),default:Ue(()=>[la(" "+kl(be(l)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),be(k)?(dl(),Sa("div",qp,[la(kl(be(l)("dataRetrievalSlug"))+": ",1),Dl("b",null,kl(be(k).slug),1)])):Bs("",!0)]))])]),_:1})),Ie(In,{show:be(C),"onUpdate:show":ve[9]||(ve[9]=V=>Os(C)?C.value=V:null),loading:be(G)||be(A),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:be(l)("insertOrRemoveSections"),"positive-text":be(l)("validate"),"negative-text":be(l)("cancel"),onPositiveClick:oe,onNegativeClick:ve[10]||(ve[10]=V=>C.value=!1)},{default:Ue(()=>[Dl("section",Rp,[be(W)?.length?(dl(),Va(r,{key:0,style:{"max-height":"400px"}},{default:Ue(()=>[(dl(!0),Sa(Ko,null,Fs(be(W),V=>(dl(),Va(cl,{key:V.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Wt=>i(V)},{default:Ue(()=>[Dl("div",jp,[Dl("span",Kp,kl(be(s)(V.title)),1),Ie(ya,{checked:h(V).value,"onUpdate:checked":Wt=>h(V).value=Wt,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(dl(),Va(pa,{key:1,description:be(l)("noAvailableSection")},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ie(In,{show:be(Me),"onUpdate:show":ve[11]||(ve[11]=V=>Os(Me)?Me.value=V:null),loading:be(G)||be(A),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:be(l)("insertSections"),"positive-text":be(l)("validate"),"negative-text":be(l)("cancel"),onPositiveClick:ut,onNegativeClick:ve[12]||(ve[12]=V=>Me.value=!1)},{default:Ue(()=>[Dl("section",Yp,[be(xe)?.length?(dl(),Va(r,{key:0,style:{"max-height":"400px"}},{default:Ue(()=>[(dl(!0),Sa(Ko,null,Fs(be(xe),V=>(dl(),Va(cl,{key:V.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Wt=>ye(V)},{default:Ue(()=>[Dl("div",Gp,[Dl("span",Hp,kl(be(s)(V.title)),1),Ie(ya,{checked:kt(V).value,"onUpdate:checked":Wt=>kt(V).value=Wt,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(dl(),Va(pa,{key:1,description:be(l)("noAvailableSection")},{icon:Ue(()=>[Ie(ge,null,{default:Ue(()=>[Ie(je,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ie(In,{show:be(g),"onUpdate:show":ve[14]||(ve[14]=V=>Os(g)?g.value=V:null),loading:be(G)||be(X),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:be(l)("copyData"),"positive-text":be(l)("validate"),"negative-text":be(l)("cancel"),onPositiveClick:Ct,onNegativeClick:ve[15]||(ve[15]=V=>g.value=!1)},{default:Ue(()=>[Dl("section",Wp,[Ie(Rt,{align:"start",vertical:""},{default:Ue(()=>[Dl("span",null,kl(be(l)("dataWillBeCopiedFrom"))+":",1),Ie(sn,{value:be(Se),"onUpdate:value":ve[13]||(ve[13]=V=>Os(Se)?Se.value=V:null),options:qe(be(Xe)?.pages||[],be(Xe),!0),placeholder:be(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[300px]"},null,8,["value","options","placeholder"])]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Jp=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu-item-groups"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/menu-item-groups",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Zp=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu-item-groups"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/menu-item-groups/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},em=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["menu-item-groups"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-item-groups/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:tm,defineComponent:lm}=await me("vue"),{unref:jt,resolveComponent:ch,createVNode:ul,toDisplayString:wo,createTextVNode:Go,withCtx:hl,renderList:am,Fragment:Pi,openBlock:Ho,createElementBlock:Li,createElementVNode:Nr,createBlock:Dr,normalizeClass:nm,isRef:om}=await me("vue"),{ref:qs}=await me("vue"),sm={class:"flex items-center justify-between"},rm={class:"flex flex-col"},im={class:"text-sm font-bold"},cm=lm({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=we(),{pickByTheme:n,tr:l}=tt(),o=tm(u,"show"),{data:a,isPending:t}=Tc(),{mutate:c,isPending:fe}=Jp(),{mutate:le,isPending:de}=Zp(),{mutate:z,isPending:ae}=em(),B=ea(),$=qs(!1),d=qs(null),F=qs(null),Z=qs({name:"",description:""}),s={name:[{required:!0,message:e("fillRequired")}]},re=k=>{d.value=ie.cloneDeep(k),Z.value=ie.cloneDeep(k||{name:"",description:""}),$.value=!0},N=async()=>(F.value?.validate(async k=>{if(!k){const U={name:Z.value.name,description:Z.value.description};d.value?le({id:d.value.id,...U},{onSuccess:()=>{$.value=!1}}):c(U,{onSuccess:()=>{$.value=!1}})}}),!1),W=async k=>{B.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{k.id&&z({id:k.id})}})};return(k,U)=>{const O=Ce,G=He,j=Ml,ee=fr,v=pe,A=Cl,_=Ma,y=Ta,K=io,E=Hl,Y=_a,X=da,M=ca;return Ho(),Li(Pi,null,[ul(E,{show:o.value,"onUpdate:show":U[2]||(U[2]=x=>o.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:jt(e)("menuItemGroups")},{"header-extra":hl(()=>[ul(j,{align:"center"},{default:hl(()=>[ul(G,{secondary:"",size:"small",type:"primary",disabled:jt(t),onClick:U[0]||(U[0]=x=>re(null))},{default:hl(()=>[ul(O,{icon:"carbon:add-alt",class:"mr-1"}),Go(" "+wo(jt(e)("add")),1)]),_:1},8,["disabled"]),ul(G,{secondary:"",size:"small",type:"error",disabled:jt(t),onClick:U[1]||(U[1]=x=>o.value=!1)},{default:hl(()=>[ul(O,{icon:"carbon:close",class:"mr-1"}),Go(" "+wo(jt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:hl(()=>[ul(K,{show:jt(t)},{default:hl(()=>[jt(a)?.length?(Ho(),Dr(_,{key:0,style:{"max-height":"400px"}},{default:hl(()=>[(Ho(!0),Li(Pi,null,am(jt(a),x=>(Ho(),Dr(A,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:hl(()=>[Nr("div",sm,[Nr("div",rm,[Nr("span",im,wo(jt(l)(x.name)),1),ul(ee,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:hl(()=>[Go(wo(jt(l)(x.description)),1)]),_:2},1024)]),ul(j,null,{default:hl(()=>[ul(G,{size:"small",type:"warning",secondary:"",onClick:b=>re(x)},{default:hl(()=>[ul(v,null,{default:hl(()=>[ul(O,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),ul(G,{size:"small",type:"error",secondary:"",onClick:b=>W(x)},{default:hl(()=>[ul(v,null,{default:hl(()=>[ul(O,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Ho(),Dr(A,{key:1,size:"large",class:nm(`mb-2 !border-dashed !border-2 ${jt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:hl(()=>[ul(y,{description:jt(e)("noMenuItemGroupAdded")},{icon:hl(()=>[ul(v,null,{default:hl(()=>[ul(O,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),ul(E,{show:jt($),"onUpdate:show":U[5]||(U[5]=x=>om($)?$.value=x:null),loading:jt(fe)||jt(de)||jt(ae),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:jt(d)?jt(e)("editMenuItemGroup"):jt(e)("addMenuItemGroup"),"positive-text":jt(e)("validate"),"negative-text":jt(e)("cancel"),onPositiveClick:N,onNegativeClick:U[6]||(U[6]=x=>$.value=!1)},{default:hl(()=>[ul(M,{ref_key:"formRef",ref:F,model:jt(Z),rules:s,"show-require-mark":!1,size:"medium",class:"my-5"},{default:hl(()=>[ul(X,{"show-label":!1,path:"name"},{default:hl(()=>[ul(Y,{modelValue:jt(Z).name,"onUpdate:modelValue":U[3]||(U[3]=x=>jt(Z).name=x),placeholder:jt(e)("name"),class:"w-full",sync:""},{label:hl(()=>[Go(wo(jt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ul(X,{"show-label":!1,path:"description"},{default:hl(()=>[ul(Y,{modelValue:jt(Z).description,"onUpdate:modelValue":U[4]||(U[4]=x=>jt(Z).description=x),placeholder:jt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:hl(()=>[Go(wo(jt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:Bi,mergeModels:dm,defineComponent:um}=await me("vue"),{unref:Zt,resolveComponent:dh,createVNode:mn,withCtx:Wn,isRef:pm,Fragment:mm,openBlock:Wo,createElementBlock:fm,createCommentVNode:Rs,createBlock:js}=await me("vue"),{ref:Qo,computed:Xo,onMounted:_m,h:Jo}=await me("vue"),vm=um({__name:"ContentFormItems",props:{"content-type":{default:ql.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:dm(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:n}=we(),{tr:l,mergeArrays:o}=tt(),{contentTypes:a,extractItemTitle:t}=Us(),{data:c}=Bn(),fe=e,le=Bi(u,"content-type"),de=Bi(u,"content-id"),z=Qo(),ae=Qo([]),B=Qo([]),{mutateAsync:$,isPending:d}=hi(),{mutateAsync:F,isPending:Z}=Zc(),s=Xo(()=>d.value||Z.value),re=async(x,b)=>{if(!x.length){B.value=[];return}B.value=await $({query:x,contentModelId:b})},N=Xo(()=>o(ae.value,B.value,"id")),W=Qo([]),k=Qo([]),{mutateAsync:U,isPending:O}=Yc(),{mutateAsync:G,isPending:j}=Gc(),ee=Xo(()=>j.value||O.value),v=async x=>{if(!x.length){k.value=[];return}k.value=await G(x)},A=Xo(()=>o(W.value,k.value,"id")),{categories:_}=ki(),{tags:y}=ki();_m(async()=>{const x=await U({ids:de.value?[de.value]:[]});x&&(W.value=o(W.value,x,"id"));const b=await F({ids:de.value?[de.value]:[]});b&&(ae.value=o(ae.value,b,"id"),z.value=ae.value.find(P=>P.id===de.value)?.contentModelId)});const K=x=>Jo("span",{},{default:()=>`${l(x.name)}`}),E=x=>Jo("span",{},{default:()=>`${l(x.title)}`}),Y=x=>Jo("span",{},{default:()=>`${l(x.name)}`}),X=x=>Jo("span",{},{default:()=>l(x.title)}),M=x=>Xo(()=>Jo("span",{},{default:()=>t(x,c.value?.find(b=>b.id===x.contentModelId))}));return(x,b)=>{const P=Na,_e=Fn,C=va;return Wo(),js(C,{"x-gap":"12",span:24},{default:Wn(()=>[mn(_e,{span:8,label:Zt(n)("contentType"),path:"contentType"},{default:Wn(()=>[mn(P,{value:le.value,"onUpdate:value":[b[0]||(b[0]=w=>le.value=w),b[1]||(b[1]=()=>de.value=void 0)],options:Zt(a)||[],placeholder:Zt(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),le.value===Zt(ql).CONTENT_MODEL?(Wo(),fm(mm,{key:0},[mn(_e,{span:8,label:Zt(n)("contentModel")},{default:Wn(()=>[mn(P,{value:Zt(z),"onUpdate:value":b[2]||(b[2]=w=>pm(z)?z.value=w:null),options:Zt(c),placeholder:Zt(n)("search"),"render-label":X,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),mn(_e,{span:8,label:Zt(n)("item"),path:"contentId"},{default:Wn(()=>[mn(P,{value:de.value,"onUpdate:value":[b[3]||(b[3]=w=>de.value=w),b[5]||(b[5]=(w,i)=>fe("update",w,i,le.value))],options:Zt(N)||[],placeholder:Zt(n)("search"),"render-label":w=>M(w).value,loading:Zt(s),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:b[4]||(b[4]=w=>re(w,Zt(z)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):Rs("",!0),le.value===Zt(ql).NEWS_ARTICLE?(Wo(),js(_e,{key:1,span:16,label:Zt(n)("newsArticle"),path:"contentId"},{default:Wn(()=>[mn(P,{value:de.value,"onUpdate:value":[b[6]||(b[6]=w=>de.value=w),b[7]||(b[7]=(w,i)=>fe("update",w,i,le.value))],options:Zt(A)||[],placeholder:Zt(n)("search"),"render-label":E,loading:Zt(ee),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:v},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):Rs("",!0),le.value===Zt(ql).NEWS_CATEGORY?(Wo(),js(_e,{key:2,span:16,label:Zt(n)("newsCategory"),path:"contentId"},{default:Wn(()=>[mn(P,{value:de.value,"onUpdate:value":[b[8]||(b[8]=w=>de.value=w),b[9]||(b[9]=(w,i)=>fe("update",w,i,le.value))],options:Zt(_)||[],placeholder:Zt(n)("select"),"render-label":K,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Rs("",!0),le.value===Zt(ql).NEWS_TAG?(Wo(),js(_e,{key:3,span:16,label:Zt(n)("newsTag"),path:"contentId"},{default:Wn(()=>[mn(P,{value:de.value,"onUpdate:value":[b[10]||(b[10]=w=>de.value=w),b[11]||(b[11]=(w,i)=>fe("update",w,i,le.value))],options:Zt(y)||[],placeholder:Zt(n)("select"),"render-label":Y,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Rs("",!0)]),_:1})}}}),ym=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/menu/items",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},gm=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/menu/items/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},hm=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["menu","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},bm=()=>{const{request:u}=Le(),e=We();return Ua(async n=>{const l=await u({method:"put",url:"/menu/items/position",data:n});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:km,defineComponent:wm}=await me("vue"),{unref:f,resolveComponent:zr,createVNode:Q,withCtx:he,toDisplayString:pl,createTextVNode:aa,openBlock:nl,createBlock:fn,createCommentVNode:Qn,isRef:Ks,renderList:Ys,Fragment:Ha,createElementBlock:na,normalizeClass:Xn,withModifiers:Zo,createElementVNode:Fl}=await me("vue"),xm={key:0},$m={class:"flex items-center"},Cm={class:"flex flex-col"},Im={class:"text-sm font-bold"},Vm={key:0,class:"text-sm"},Sm={class:"text-xs font-normal"},Em={class:"text-xs my-1"},Um={class:"flex items-center"},Mm={class:"flex flex-col"},Tm={class:"text-sm font-bold"},Nm={class:"text-xs font-normal"},Dm={key:0,class:"mt-4"},zm={class:"my-8"},Am={class:"flex items-center justify-between"},Pm={class:"flex flex-col"},Lm={class:"text-sm font-bold"},Bm={class:"text-xs font-normal"},Fm={class:"flex items-center"},Om={key:0},qm={key:1},Rm={key:2},{storeToRefs:jm}=await me("pinia"),{ref:ha,watch:Km,computed:es,h:Fi}=await me("vue"),Ym=wm({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:n}=we(),{extractItemTitle:l}=Us(),{tr:o,pickByTheme:a}=tt(),{isLightTheme:t}=jm(Ao()),{data:c,isPending:fe}=pi(),{data:le}=Bn(),{data:de,isPending:z}=Tc(),{data:ae,isFetching:B,refetch:$}=Uc({enabled:!1}),{mutate:d,isPending:F}=ym(),{mutate:Z,isPending:s}=gm(),{mutate:re,isPending:N}=hm(),{mutate:W}=bm(),k=Oe(),U=ea(),O=km(u,"modelValue"),G=ha([]),j=ha([]),ee=ha(""),v=ha();let A=ha(!0);Km(()=>B.value,q=>{q||(A.value=!1)});const _=es(()=>{if(!ee.value)return G.value;const q=G.value.filter(I=>I.title.toLowerCase().includes(ee.value.toLowerCase())||I.description?.toLowerCase().includes(ee.value.toLowerCase())||I.children.some(g=>g.title.toLowerCase().includes(ee.value.toLowerCase())||g.description?.toLowerCase().includes(ee.value.toLowerCase())));return v.value&&v.value.focus(),q}),y=async()=>{await $(),G.value=ae.value?.filter(q=>!q.parentId&&q.menuId===O.value?.id)||[];for(let q=0;q<G.value.length;q++)G.value[q].children=ae.value?.filter(I=>I.parentId===G.value[q].id&&I.menuId===O.value?.id)||[];j.value=ae.value?.filter(q=>q.menuId!==O.value?.id)||[]};y();const K=ha(12),E=ha(1),Y=q=>{K.value=q},X={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:Zl.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:ql.CONTENT_MODEL,contentId:void 0},M=ha(null),x=ha(!1),b=ha(!1),P=ha(null),_e=ha(null),C=ha(X),w=es(()=>{const q={title:[{required:!0,message:e("fillRequired")}]};return C.value.targetType===Zl.PAGE_LINK?(q.pageId=[{required:!0,message:e("fillRequired")}],q.path=[{required:!0,message:e("fillRequired")}]):C.value.targetType===Zl.EXTERNAL_LINK?q.url=[{required:!0,message:e("fillRequired")}]:C.value.targetType===Zl.CONTENT_LINK&&(q.contentId=[{required:!0,message:e("fillRequired")}],q.contentType=[{required:!0,message:e("fillRequired")}]),q}),i=es(()=>c.value?.find(q=>q.id==C.value.pageId)?.slug||""),{data:h,isPending:oe}=Nd({queryKey:["pages",i],queryFn:async()=>{const{request:q}=Le(),I=await q({url:`/pages/${i.value}`});return I.success&&I.result.data?I.result.data:null},enabled:es(()=>!!i.value)}),L=es(()=>h.value?.sections?.map(q=>{const Xe=(h.value?.sections?.filter(Se=>Se.id===q.id)?.map(Se=>Se.pivot?.createdAt||Se.pivot?.updatedAt||"")?.sort((Se,ft)=>new Date(Se).getTime()-new Date(ft).getTime())||[]).indexOf(q.pivot?.createdAt||q.pivot?.updatedAt||"");return{label:q.pivot?.linkId=="default"?o(q.title):o(q.title)+" ("+(Xe+1)+")",value:q.slug+"__"+q.pivot?.linkId}})||[]),ne=(q,I=null)=>{P.value=ie.cloneDeep(q),M.value=I,q?(C.value=ie.cloneDeep(q),x.value=!0):(C.value=ie.cloneDeep(X),j.value.length>0?b.value=!0:x.value=!0)},Me=async q=>{U.warning({title:e("confirm"),content:q.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{q.id&&re({id:q.id})}})},ke=async q=>{d({title:q.title,path:q.path,url:q.url,description:q.description,isActive:!0,isVisible:!0,color:q.color,icon:q.icon,position:q.position,targetType:q.targetType,parentId:M.value,menuId:O.value?.id,sectionKey:q.sectionKey,menuItemGroupId:q.menuItemGroupId,pageId:q.pageId},{onSuccess(){y(),b.value=!1}})},ye=async()=>(_e.value?.validate(async q=>{if(!q){const I={title:C.value.title,path:C.value.path,url:C.value.url,description:C.value.description,isActive:C.value.isActive,isVisible:C.value.isVisible,color:C.value.color,icon:C.value.icon,position:C.value.position,targetType:C.value.targetType,parentId:M.value,menuId:O.value?.id,sectionKey:C.value.sectionKey,menuItemGroupId:C.value.menuItemGroupId,pageId:C.value.pageId,contentId:C.value.contentId,contentType:C.value.contentType};P.value?P.value.title!==C.value.title&&G.value.findIndex(g=>g.title==C.value.title)>-1?k.error(e("sameMenuItemTitleMessage")):Z({id:P.value.id,...I},{onSuccess(){y()}}):G.value.findIndex(g=>g.title==C.value.title)>-1?k.error(e("sameMenuItemTitleMessage")):d(I,{onSuccess(){y()}}),x.value=!1}}),!1),kt=async(q,I)=>{W({items:I},{onSuccess(){y()}})},ut=q=>Fi("span",{},{default:()=>o(q.title)}),xe=q=>Fi("span",{},{default:()=>o(q.name)}),qe=q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(q),Ve=q=>{if(q.targetType==Zl.EXTERNAL_LINK)return q.url;if(q.targetType==Zl.PAGE_LINK)return q.path;if(q.targetType==Zl.CONTENT_LINK)switch(q.contentType){case ql.CONTENT_MODEL:return e("contentModel");case ql.NEWS_CATEGORY:return e("newsCategory");case ql.NEWS_ARTICLE:return e("newsArticle");case ql.NEWS_TAG:return e("newsTag")}return""},Ze=async(q,I,g)=>{if(!o(C.value.title))switch(g){case ql.CONTENT_MODEL:C.value.title=l(I,le.value?.find(Xe=>Xe.id===I.contentModelId));break;case ql.NEWS_ARTICLE:C.value.title=I.title;break;case ql.NEWS_CATEGORY:case ql.NEWS_TAG:C.value.title=I.name;break}};return(q,I)=>{const g=Ce,Xe=Ml,Se=Oa,ft=Fc,Ct=Bc,D=Ra,H=ja,T=Cl,it=zr("Draggable"),et=uo,Jt=co,ce=Po,ve=Ta,je=qa,ge=Ma,Pe=Hl,Dt=_a,Rt=da,al=fi,zt=Fn,Yt=dr,Te=cr,cl=va,qn=zr("IconPicker"),ya=zr("color-picker"),on=Na,sn=ca;return nl(),na(Ha,null,[Q(Se,{to:"#alt-action"},{default:he(()=>[Q(Xe,{align:"center"},{default:he(()=>[f(_).length?(nl(),fn(f(He),{key:0,secondary:"",type:"primary",onClick:I[0]||(I[0]=$e=>ne(null))},{icon:he(()=>[Q(f(pe),{size:"18"},{default:he(()=>[Q(g,{icon:"carbon:add-alt"})]),_:1})]),default:he(()=>[aa(" "+pl(f(e)("addMenuItem")),1)]),_:1})):Qn("",!0)]),_:1})]),_:1}),Q(ft,{class:"mt-2 mb-5",onBack:I[2]||(I[2]=$e=>O.value=null)},{title:he(()=>[aa(pl(f(o)(O.value?.title)),1)]),back:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:he(()=>[Q(f(il),{ref_key:"searchInputRef",ref:v,value:f(ee),"onUpdate:value":I[1]||(I[1]=$e=>Ks(ee)?ee.value=$e:null),clearable:!0,placeholder:f(e)("search")},{suffix:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),Q(je,{appear:"",name:"slide-fade"},{default:he(()=>[Fl("section",null,[f(A)?(nl(),na("section",xm,[(nl(),na(Ha,null,Ys(7,$e=>Q(Ct,{key:$e,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(nl(),na(Ha,{key:1},[f(_)&&f(_).length?(nl(),na(Ha,{key:0},[Q(it,{list:f(G),onChange:I[3]||(I[3]=$e=>kt($e,f(G)))},{default:he(()=>[(nl(!0),na(Ha,null,Ys(f(_).slice((f(E)-1)*f(K),f(E)*f(K)),$e=>(nl(),fn(T,{key:$e.id,embedded:"",size:"small",class:"mb-1"},{default:he(()=>[Q(Jt,{"default-expanded-names":$e.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":he(({collapsed:Tl})=>[Q(Xe,{align:"center"},{default:he(()=>[Q(D,{size:"small",bordered:!1,type:$e.isActive?"success":"error"},{default:he(()=>[aa(pl($e.isActive?f(e)("published"):f(e)("unpublished")),1)]),_:2},1032,["type"]),Q(D,{size:"small",bordered:!1,type:$e.isVisible?"info":"warning"},{default:he(()=>[aa(pl($e.isVisible?f(e)("visible"):f(e)("hidden")),1)]),_:2},1032,["type"]),Q(H,{vertical:"",class:Xn(["!mx-0",f(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Q(f(He),{size:"small",type:"primary",secondary:"",onClick:Zo(ua=>ne($e),["stop"])},{default:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),Q(f(He),{size:"small",type:"error",secondary:"",onClick:Zo(ua=>Me($e),["stop"])},{default:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]),Q(f(He),{size:"small",type:"info",secondary:"",onClick:Zo(ua=>ne(null,$e.id),["stop"])},{icon:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:category"})]),_:1})]),default:he(()=>[aa(" "+pl(f(e)("subMenuItem"))+" ",1),Q(D,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:he(()=>[aa(pl($e.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),I[27]||(I[27]=Fl("div",{class:"w-6"},null,-1)),Q(f(pe),null,{default:he(()=>[Tl?(nl(),fn(g,{key:0,icon:"fa-solid:chevron-left"})):(nl(),fn(g,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:he(()=>I[28]||(I[28]=[Fl("span",null,null,-1)])),default:he(()=>[Q(et,{name:"1"},{header:he(()=>[Fl("div",$m,[Q(f(pe),{size:"21",class:"cursor-move mr-4"},{default:he(()=>[Q(g,{icon:"fa-solid:grip-lines"})]),_:1}),Q(H,{vertical:"",class:Xn(f(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Fl("div",Cm,[Fl("div",null,[Fl("span",Im,pl(f(o)($e.title)),1),$e.group?(nl(),na("span",Vm," Â ("+pl(f(o)($e.group?.name))+") ",1)):Qn("",!0)]),Fl("small",Sm,pl(Ve($e)),1)])])]),default:he(()=>[$e.description?(nl(),na(Ha,{key:0},[Q(H,{class:Xn([f(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Fl("div",Em,pl(f(o)($e.description)),1)],64)):Qn("",!0),$e.children.length?(nl(),na(Ha,{key:1},[Q(H,{class:Xn([f(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Q(it,{list:$e.children,onChange:Tl=>kt(Tl,$e.children)},{default:he(()=>[(nl(!0),na(Ha,null,Ys($e.children,Tl=>(nl(),fn(T,{key:Tl.id,size:"small",class:"mb-1"},{header:he(()=>[Fl("div",Um,[Q(f(pe),{size:"21",class:"cursor-move mr-4"},{default:he(()=>[Q(g,{icon:"fa-solid:grip-lines"})]),_:1}),Q(H,{vertical:"",class:Xn(f(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Fl("div",Mm,[Fl("span",Tm,pl(f(o)(Tl.title)),1),Fl("small",Nm,pl(Ve(Tl)),1)])])]),"header-extra":he(()=>[Q(Xe,{align:"center"},{default:he(()=>[Q(D,{size:"small",bordered:!1,type:Tl.isActive?"success":"error"},{default:he(()=>[aa(pl(Tl.isActive?f(e)("published"):f(e)("unpublished")),1)]),_:2},1032,["type"]),Q(D,{size:"small",bordered:!1,type:Tl.isVisible?"info":"warning"},{default:he(()=>[aa(pl(Tl.isVisible?f(e)("visible"):f(e)("hidden")),1)]),_:2},1032,["type"]),Q(H,{vertical:"",class:Xn(["!mx-0",f(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Q(f(He),{size:"small",type:"primary",secondary:"",onClick:Zo(ua=>ne(Tl,$e.id),["stop"])},{default:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),Q(f(He),{size:"small",type:"error",secondary:"",onClick:Zo(ua=>Me(Tl),["stop"])},{default:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Qn("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Q(ce,{page:f(E),"onUpdate:page":I[4]||(I[4]=$e=>Ks(E)?E.value=$e:null),class:"mt-5 justify-end","show-size-picker":"","page-size":f(K),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(f(G).length/f(K)),"onUpdate:pageSize":Y},{prefix:he(()=>[aa(pl(`${f(G).length} ${f(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(nl(),fn(T,{key:1,size:"large",class:Xn(`mb-2 !border-dashed !border-2 ${f(a)("!border-zinc-300","!border-zinc-600")}`)},{default:he(()=>[Q(ve,{description:f(e)("noMenuItemAvailable")},{icon:he(()=>[Q(f(pe),null,{default:he(()=>[f(ee)?(nl(),fn(g,{key:0,icon:"carbon:search"})):(nl(),fn(g,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:he(()=>[f(ee)?Qn("",!0):(nl(),na("div",Dm,[Q(f(He),{size:"small",secondary:"",onClick:I[5]||(I[5]=$e=>ne(null))},{icon:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:add-alt"})]),_:1})]),default:he(()=>[aa(" "+pl(f(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),Q(Pe,{show:f(b),"onUpdate:show":I[6]||(I[6]=$e=>Ks(b)?b.value=$e:null),loading:f(F)||f(s)||f(N),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:f(e)("menuItems"),"positive-text":f(M)?f(e)("createSubMenuItem"):f(e)("createMenuItem"),"negative-text":f(e)("cancel"),onPositiveClick:I[7]||(I[7]=()=>{b.value=!1,x.value=!0}),onNegativeClick:I[8]||(I[8]=$e=>b.value=!1)},{default:he(()=>[Fl("section",zm,[Q(ge,{style:{"max-height":"400px"}},{default:he(()=>[(nl(!0),na(Ha,null,Ys(f(j),$e=>(nl(),fn(T,{key:$e.id,embedded:"",size:"small",class:"mb-2"},{default:he(()=>[Fl("div",Am,[Fl("div",Pm,[Fl("span",Lm,pl(f(o)($e.title)),1),Fl("small",Bm,pl(Ve($e)),1)]),Q(f(He),{size:"small",type:"primary",secondary:"",onClick:Tl=>ke($e)},{icon:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:add-alt"})]),_:1})]),default:he(()=>[aa(" "+pl(f(e)("add")),1)]),_:2},1032,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Q(Pe,{show:f(x),"onUpdate:show":I[25]||(I[25]=$e=>Ks(x)?x.value=$e:null),loading:f(F)||f(s)||f(N),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:f(P)?f(M)?f(e)("editSubMenuItem"):f(e)("editMenuItem"):f(M)?f(j).length?f(e)("createSubMenuItem"):f(e)("addSubMenuItem"):f(j).length?f(e)("createMenuItem"):f(e)("addMenuItem"),"positive-text":f(e)("validate"),"negative-text":f(e)("cancel"),onPositiveClick:ye,onNegativeClick:I[26]||(I[26]=$e=>x.value=!1)},{default:he(()=>[Q(sn,{ref_key:"formRef",ref:_e,class:"mt-5",model:f(C),rules:f(w),"show-require-mark":!1,size:"medium"},{default:he(()=>[Q(Rt,{"show-label":!1,path:"title"},{default:he(()=>[Q(Dt,{modelValue:f(C).title,"onUpdate:modelValue":I[9]||(I[9]=$e=>f(C).title=$e),placeholder:f(e)("title"),class:"w-full",sync:""},{label:he(()=>[aa(pl(f(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Q(Rt,{"show-label":!1,path:"description"},{default:he(()=>[Q(Dt,{modelValue:f(C).description,"onUpdate:modelValue":I[10]||(I[10]=$e=>f(C).description=$e),placeholder:f(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:he(()=>[aa(pl(f(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Q(cl,{"x-gap":"12",span:24},{default:he(()=>[Q(zt,{span:5,label:f(e)("position"),path:"position"},{default:he(()=>[Q(al,{value:f(C).position,"onUpdate:value":I[11]||(I[11]=$e=>f(C).position=$e),placeholder:f(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Q(zt,{span:10,label:f(e)("publication"),path:"isActive"},{default:he(()=>[Q(Te,{value:f(C).isActive,"onUpdate:value":I[12]||(I[12]=$e=>f(C).isActive=$e),name:"isActive",class:"w-full"},{default:he(()=>[Q(Yt,{value:!1,label:f(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),Q(Yt,{value:!0,label:f(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Q(zt,{span:9,label:f(e)("visibility"),path:"isVisible"},{default:he(()=>[Q(Te,{value:f(C).isVisible,"onUpdate:value":I[13]||(I[13]=$e=>f(C).isVisible=$e),name:"isVisible",class:"w-full"},{default:he(()=>[Q(Yt,{value:!1,label:f(e)("hidden"),class:"w-[50%]"},null,8,["label"]),Q(Yt,{value:!0,label:f(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Q(H,{class:"!my-2"}),Q(cl,{"x-gap":"12",span:24},{default:he(()=>[Q(zt,{span:10,label:f(e)("icon"),path:"icon"},{default:he(()=>[Q(qn,{modelValue:f(C).icon,"onUpdate:modelValue":I[14]||(I[14]=$e=>f(C).icon=$e),placeholder:f(e)("icon"),"icons-list-placeholder":f(e)("enterIconNameInSearchBar"),"search-placeholder":f(e)("search"),"empty-text":f(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),Q(zt,{span:4,label:f(e)("color"),path:"color"},{default:he(()=>[Fl("div",Fm,[f(C).color?(nl(),na(Ha,{key:0},[Q(f(He),{text:"",type:"error",style:{"font-size":"21px"},onClick:I[15]||(I[15]=$e=>f(C).color="")},{default:he(()=>[Q(f(pe),null,{default:he(()=>[Q(g,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Q(H,{vertical:""})],64)):Qn("",!0),Q(ya,{"pure-color":f(C).color,"onUpdate:pureColor":I[16]||(I[16]=$e=>f(C).color=$e),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:f(t)?"white":"black",lang:f(n)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),Q(zt,{span:10,label:f(e)("group"),path:"menuItemGroupId"},{default:he(()=>[Q(on,{value:f(C).menuItemGroupId,"onUpdate:value":I[17]||(I[17]=$e=>f(C).menuItemGroupId=$e),options:f(de),placeholder:f(e)("group"),"render-label":xe,loading:f(z),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),Q(zt,{span:24,label:f(e)("targetType"),path:"targetType"},{default:he(()=>[Q(Te,{value:f(C).targetType,"onUpdate:value":I[18]||(I[18]=$e=>f(C).targetType=$e),class:"w-full",size:"small"},{default:he(()=>[Q(Yt,{value:f(Zl).PAGE_LINK,class:"w-[33.33%]"},{default:he(()=>[aa(pl(f(e)("pageLink")),1)]),_:1},8,["value"]),Q(Yt,{value:f(Zl).CONTENT_LINK,class:"w-[33.33%]"},{default:he(()=>[aa(pl(f(e)("contentLink")),1)]),_:1},8,["value"]),Q(Yt,{value:f(Zl).EXTERNAL_LINK,class:"w-[33.33%]"},{default:he(()=>[aa(pl(f(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Q(je,{appear:"",name:"slide-fade"},{default:he(()=>[f(C).targetType===f(Zl).PAGE_LINK?(nl(),na("section",Om,[Q(cl,{"x-gap":"12",span:24},{default:he(()=>[Q(zt,{span:12,label:f(e)("page"),path:"pageId"},{default:he(()=>[Q(on,{value:f(C).pageId,"onUpdate:value":I[19]||(I[19]=$e=>f(C).pageId=$e),options:f(c)||[],placeholder:f(e)("selectPage"),"render-label":ut,loading:f(fe),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),Q(zt,{span:12,label:f(e)("section"),path:"sectionKey"},{default:he(()=>[Q(on,{value:f(C).sectionKey,"onUpdate:value":I[20]||(I[20]=$e=>f(C).sectionKey=$e),options:f(L),placeholder:f(e)("selectSection"),disabled:!f(C).pageId,loading:f(oe),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),Q(Rt,{label:f(e)("path"),path:"path"},{default:he(()=>[Q(f(il),{value:f(C).path,"onUpdate:value":I[21]||(I[21]=$e=>f(C).path=$e),placeholder:f(e)("path"),"allow-input":qe,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):f(C).targetType===f(Zl).CONTENT_LINK?(nl(),na("section",qm,[Q(vm,{"content-type":f(C).contentType,"onUpdate:contentType":I[22]||(I[22]=$e=>f(C).contentType=$e),"content-id":f(C).contentId,"onUpdate:contentId":I[23]||(I[23]=$e=>f(C).contentId=$e),onUpdate:Ze},null,8,["content-type","content-id"])])):f(C).targetType===f(Zl).EXTERNAL_LINK?(nl(),na("section",Rm,[Q(Rt,{label:f(e)("url"),path:"url"},{default:he(()=>[Q(f(il),{value:f(C).url,"onUpdate:value":I[24]||(I[24]=$e=>f(C).url=$e),placeholder:f(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):Qn("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Gm=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu-locations"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/menu-locations",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Hm=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menu-locations"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/menu-locations/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Wm=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["menu-locations"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-locations/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Qm,defineComponent:Xm}=await me("vue"),{unref:Kt,resolveComponent:uh,createVNode:el,withCtx:ml,toDisplayString:ts,createTextVNode:Gs,renderList:Jm,Fragment:Oi,openBlock:ls,createElementBlock:qi,createElementVNode:Ar,createBlock:Pr,normalizeClass:Zm,isRef:ef}=await me("vue"),{ref:Hs}=await me("vue"),tf={class:"flex items-center justify-between"},lf={class:"flex flex-col"},af={class:"text-sm font-bold"},nf=Xm({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=we(),{pickByTheme:n,tr:l,formatKey:o}=tt(),a=Qm(u,"show"),{data:t,isPending:c}=Nc(),{mutate:fe,isPending:le}=Gm(),{mutate:de,isPending:z}=Hm(),{mutate:ae,isPending:B}=Wm(),$=ea(),d=Hs(!1),F=Hs(null),Z=Hs(null),s=Hs({name:"",description:""}),re={name:[{required:!0,message:e("fillRequired")}]},N=U=>{F.value=ie.cloneDeep(U),s.value=ie.cloneDeep(U||{name:"",description:""}),d.value=!0},W=async()=>(Z.value?.validate(async U=>{if(!U){const O={name:s.value.name,description:s.value.description};F.value?de({id:F.value.id,data:O},{onSuccess:()=>{d.value=!1}}):fe(O,{onSuccess:()=>{d.value=!1}})}}),!1),k=async U=>{$.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{U.id&&ae({id:U.id})}})};return(U,O)=>{const G=Ce,j=pe,ee=He,v=Ml,A=fr,_=Cl,y=Ma,K=Ta,E=io,Y=Hl,X=il,M=da,x=_a,b=ca;return ls(),qi(Oi,null,[el(Y,{show:a.value,"onUpdate:show":O[2]||(O[2]=P=>a.value=P),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Kt(e)("menuLocations")},{"header-extra":ml(()=>[el(v,{align:"center"},{default:ml(()=>[el(ee,{secondary:"",size:"small",type:"primary",disabled:Kt(c),onClick:O[0]||(O[0]=P=>N(null))},{default:ml(()=>[el(j,{class:"mr-1"},{default:ml(()=>[el(G,{icon:"carbon:add-alt"})]),_:1}),Gs(" "+ts(Kt(e)("add")),1)]),_:1},8,["disabled"]),el(ee,{secondary:"",size:"small",type:"error",disabled:Kt(c),onClick:O[1]||(O[1]=P=>a.value=!1)},{default:ml(()=>[el(j,{class:"mr-1"},{default:ml(()=>[el(G,{icon:"carbon:close"})]),_:1}),Gs(" "+ts(Kt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:ml(()=>[el(E,{show:Kt(c)},{default:ml(()=>[Kt(t)?.length?(ls(),Pr(y,{key:0,style:{"max-height":"400px"}},{default:ml(()=>[(ls(!0),qi(Oi,null,Jm(Kt(t),P=>(ls(),Pr(_,{key:P.id,embedded:"",size:"small",class:"mb-2"},{default:ml(()=>[Ar("div",tf,[Ar("div",lf,[Ar("span",af,ts(P.name),1),el(A,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:ml(()=>[Gs(ts(Kt(l)(P.description)),1)]),_:2},1024)]),el(v,null,{default:ml(()=>[el(ee,{size:"small",type:"warning",secondary:"",onClick:_e=>N(P)},{default:ml(()=>[el(j,null,{default:ml(()=>[el(G,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),el(ee,{size:"small",type:"error",secondary:"",onClick:_e=>k(P)},{default:ml(()=>[el(j,null,{default:ml(()=>[el(G,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ls(),Pr(_,{key:1,size:"large",class:Zm(`mb-2 !border-dashed !border-2 ${Kt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:ml(()=>[el(K,{description:Kt(e)("noMenuLocationAdded")},{icon:ml(()=>[el(j,null,{default:ml(()=>[el(G,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),el(Y,{show:Kt(d),"onUpdate:show":O[5]||(O[5]=P=>ef(d)?d.value=P:null),loading:Kt(le)||Kt(z)||Kt(B),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Kt(F)?Kt(e)("editMenuLocation"):Kt(e)("addMenuLocation"),"positive-text":Kt(e)("validate"),"negative-text":Kt(e)("cancel"),onPositiveClick:W,onNegativeClick:O[6]||(O[6]=P=>d.value=!1)},{default:ml(()=>[el(b,{ref_key:"formRef",ref:Z,model:Kt(s),rules:re,"show-require-mark":!1,size:"medium",class:"my-5"},{default:ml(()=>[el(M,{label:Kt(e)("key"),path:"name"},{default:ml(()=>[el(X,{value:Kt(s).name,placeholder:Kt(e)("key"),class:"w-full","onUpdate:value":O[3]||(O[3]=P=>Kt(s).name=Kt(o)(P))},null,8,["value","placeholder"])]),_:1},8,["label"]),el(M,{"show-label":!1,path:"description"},{default:ml(()=>[el(x,{modelValue:Kt(s).description,"onUpdate:modelValue":O[4]||(O[4]=P=>Kt(s).description=P),placeholder:Kt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:ml(()=>[Gs(ts(Kt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),of=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menus"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/menus",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},sf=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["menus"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/menus/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},rf=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["menus"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menus/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:cf}=await me("vue"),{unref:Ye,resolveComponent:ph,createVNode:xt,withCtx:$t,toDisplayString:Wa,createTextVNode:En,openBlock:Aa,createBlock:xo,createCommentVNode:Ws,renderList:df,Fragment:Lr,createElementBlock:as,withModifiers:Br,normalizeClass:Fr,createElementVNode:ns,isRef:Qs}=await me("vue"),uf={key:2},pf={class:"flex items-center"},mf={class:"flex flex-col"},ff={key:0,class:"text-xs font-normal"},_f={class:"mt-4"},{ref:_n,watch:vf}=await me("vue"),{defineStore:yf}=await me("pinia"),gf=cf({__name:"index",setup(u){const{t:e}=we(),{tr:n,pickByTheme:l,isInDevMode:o,formatKey:a}=tt(),{data:t}=Nc(),{data:c}=fd(),{mutate:fe,isPending:le}=rf(),{mutate:de,isPending:z}=of(),{mutate:ae,isPending:B}=sf(),$=ea(),d=_n(12),F=_n(1),Z=_=>{d.value=_},s={name:"",title:"",description:"",menuLocationId:void 0},re=_n(!1),N=_n(!1),W=_n(!1),k=_n(null),U=_n(s),O={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},G=_n(null),j=_=>{G.value=ie.cloneDeep(_),U.value=ie.cloneDeep(_||s),re.value=!0},ee=async()=>(k.value?.validate(async _=>{if(!_){const y={name:U.value.name,title:U.value.title,description:U.value.description,menuLocationId:U.value.menuLocationId};G.value?ae({id:G.value.id,...y},{onSuccess:()=>{}}):de(y,{onSuccess:()=>{}}),re.value=!1}}),!1),v=async _=>{$.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{_.id&&fe({id:_.id})}})},A=yf("menus-management",()=>({itemsMenu:_n(null)}))();return vf(()=>U.value.title,_=>{G.value||U.value.name.length<=21&&(U.value.name=Hc(n(_),{trim:!0,lower:!0,strict:!0}))}),(_,y)=>{const K=Ce,E=pe,Y=He,X=Ml,M=Oa,x=ja,b=Cl,P=Po,_e=Ta,C=qa,w=_a,i=da,h=il,oe=Fn,L=Na,ne=va,Me=ca,ke=Hl;return Aa(),as(Lr,null,[Ye(A).itemsMenu?Ws("",!0):(Aa(),xo(M,{key:0,to:"#alt-action"},{default:$t(()=>[xt(X,{align:"center"},{default:$t(()=>[Ye(o)?(Aa(),xo(Y,{key:0,type:"success",secondary:"",onClick:y[0]||(y[0]=ye=>N.value=!0)},{icon:$t(()=>[xt(E,{size:"18"},{default:$t(()=>[xt(K,{icon:"carbon:template"})]),_:1})]),default:$t(()=>[En(" "+Wa(Ye(e)("locations")),1)]),_:1})):Ws("",!0),xt(Y,{type:"warning",secondary:"",onClick:y[1]||(y[1]=ye=>W.value=!0)},{icon:$t(()=>[xt(E,{size:"18"},{default:$t(()=>[xt(K,{icon:"carbon:tag-group"})]),_:1})]),default:$t(()=>[En(" "+Wa(Ye(e)("groups")),1)]),_:1}),Ye(c)&&Ye(c).length?(Aa(),xo(Y,{key:1,type:"primary",secondary:"",onClick:y[2]||(y[2]=ye=>j(null))},{icon:$t(()=>[xt(E,{size:"18"},{default:$t(()=>[xt(K,{icon:"carbon:add-alt"})]),_:1})]),default:$t(()=>[En(" "+Wa(Ye(e)("addMenu")),1)]),_:1})):Ws("",!0)]),_:1})]),_:1})),Ye(A).itemsMenu?(Aa(),xo(Ym,{key:1,modelValue:Ye(A).itemsMenu,"onUpdate:modelValue":y[3]||(y[3]=ye=>Ye(A).itemsMenu=ye)},null,8,["modelValue"])):(Aa(),as("section",uf,[xt(C,{appear:"",name:"slide-fade"},{default:$t(()=>[ns("section",null,[Ye(c)&&Ye(c).length?(Aa(),as(Lr,{key:0},[(Aa(!0),as(Lr,null,df(Ye(c).slice((Ye(F)-1)*Ye(d),Ye(F)*Ye(d)),ye=>(Aa(),xo(b,{key:ye.id,embedded:"",size:"small",class:"mb-2"},{header:$t(()=>[ns("div",pf,[xt(X,null,{default:$t(()=>[xt(Y,{size:"small",type:"primary",secondary:"",onClick:Br(kt=>j(ye),["stop"])},{default:$t(()=>[xt(E,null,{default:$t(()=>[xt(K,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),xt(Y,{size:"small",type:"error",secondary:"",onClick:Br(kt=>v(ye),["stop"])},{default:$t(()=>[xt(E,null,{default:$t(()=>[xt(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),xt(x,{vertical:"",class:Fr(Ye(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ns("div",mf,[ns("span",{class:Fr(`${ye.location?"text-sm":"text-base"} font-bold`)},Wa(Ye(n)(ye.title)),3),ye.location?(Aa(),as("small",ff,Wa(ye.location?.name),1)):Ws("",!0)])])]),"header-extra":$t(()=>[xt(Y,{size:"small",type:"primary",secondary:"",onClick:Br(kt=>Ye(A).itemsMenu=ye,["stop"])},{icon:$t(()=>[xt(E,null,{default:$t(()=>[xt(K,{icon:"carbon:arrow-right"})]),_:1})]),default:$t(()=>[En(" "+Wa(Ye(e)("open")),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),xt(P,{page:Ye(F),"onUpdate:page":y[4]||(y[4]=ye=>Qs(F)?F.value=ye:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Ye(d),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(Ye(c).length/Ye(d)),"onUpdate:pageSize":Z},{prefix:$t(()=>[En(Wa(`${Ye(c).length} ${Ye(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Aa(),xo(b,{key:1,size:"large",class:Fr(`mb-2 !border-dashed !border-2 ${Ye(l)("!border-zinc-300","!border-zinc-600")}`)},{default:$t(()=>[xt(_e,{description:Ye(e)("noMenuAvailable")},{icon:$t(()=>[xt(E,null,{default:$t(()=>[xt(K,{icon:"carbon:model-alt"})]),_:1})]),extra:$t(()=>[ns("div",_f,[xt(Y,{size:"small",onClick:y[5]||(y[5]=ye=>j(null))},{icon:$t(()=>[xt(E,null,{default:$t(()=>[xt(K,{icon:"carbon:add-alt"})]),_:1})]),default:$t(()=>[En(" "+Wa(Ye(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),xt(ke,{show:Ye(re),"onUpdate:show":y[10]||(y[10]=ye=>Qs(re)?re.value=ye:null),loading:Ye(z)||Ye(B)||Ye(le),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ye(G)?Ye(e)("editMenu"):Ye(e)("addMenu"),"positive-text":Ye(e)("validate"),"negative-text":Ye(e)("cancel"),onPositiveClick:ee,onNegativeClick:y[11]||(y[11]=ye=>re.value=!1)},{default:$t(()=>[xt(Me,{ref_key:"formRef",ref:k,model:Ye(U),rules:O,"show-require-mark":!1,size:"medium",class:"my-5"},{default:$t(()=>[xt(i,{"show-label":!1,path:"title"},{default:$t(()=>[xt(w,{modelValue:Ye(U).title,"onUpdate:modelValue":y[6]||(y[6]=ye=>Ye(U).title=ye),placeholder:Ye(e)("title"),class:"w-full",sync:""},{label:$t(()=>[En(Wa(Ye(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),xt(i,{"show-label":!1,path:"description"},{default:$t(()=>[xt(w,{modelValue:Ye(U).description,"onUpdate:modelValue":y[7]||(y[7]=ye=>Ye(U).description=ye),placeholder:Ye(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:$t(()=>[En(Wa(Ye(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),xt(ne,{"x-gap":"12",span:24},{default:$t(()=>[xt(oe,{span:12,label:Ye(e)("key"),path:"name"},{default:$t(()=>[xt(h,{value:Ye(U).name,placeholder:Ye(e)("key"),class:"w-full","onUpdate:value":y[8]||(y[8]=ye=>Ye(U).name=Ye(a)(ye))},null,8,["value","placeholder"])]),_:1},8,["label"]),xt(oe,{span:12,label:Ye(e)("location"),path:"menuLocationId"},{default:$t(()=>[xt(L,{value:Ye(U).menuLocationId,"onUpdate:value":y[9]||(y[9]=ye=>Ye(U).menuLocationId=ye),options:Ye(t),placeholder:Ye(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),xt(nf,{show:Ye(N),"onUpdate:show":y[12]||(y[12]=ye=>Qs(N)?N.value=ye:null)},null,8,["show"]),xt(cm,{show:Ye(W),"onUpdate:show":y[13]||(y[13]=ye=>Qs(W)?W.value=ye:null)},null,8,["show"])]))],64)}}}),hf="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var Ln=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(Ln||{}),Ea=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(Ea||{});const bf=()=>{const{t:u}=we(),e=[{label:u("horizontal"),value:Ln.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:Ln.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(a=>a.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(a=>a.value===o)?.label,videoDisplayTypes:e}};class kf{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;constructor(e,n,l=Ea.SELF_HOSTED,o=Ln.HORIZONTAL,a,t,c,fe,le,de,z,ae,B,$,d,F){this.id=t,this.foreignId=de,this.publisherId=le,this.title=e,this.slug=fe,this.description=z,this.thumbnail=ae,this.thumbnailUrl=B,this.path=n,this.url=c,this.source=l,this.visible=a,this.displayType=o,this.publishedAt=$,this.createdAt=d,this.updatedAt=F}}const wf=()=>{const{request:u}=Le(),{t:e}=we(),n=We(),l=Oe();return Ua(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:()=>l.success(e("success")),onError:()=>l.error(e("unableToUpdateChannelVideos")),retry:1})},xf=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=We(),a=Oe();return mt({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:t=>"id"in t&&t.id?t.id:`temp-${crypto.randomUUID()}`,mutationFn:async t=>{o.start();try{const c=await n({method:"post",url:"/video-items",data:ll(t,["id"])});if(!c.success)throw new Error(c.error||l("anErrorOccurred"));return c.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{a.success(l("success"))},onError:t=>{switch(t?.response?.data?.errorCode){case At.FORM_INVALID_DATA:e(t?.response?.data?.data);break;case At.REQUEST_PARAMS_MISSING:a.error(l("pleaseProvideApiKeyAndValidVideoUrl"));break;case At.REQUEST_DATA_RETRIEVAL_FAILED:a.error(l("videoDataCantBeRetrieve"));break;case At.REQUEST_DATA_ALREADY_EXISTS:a.error(l("videoAlreadyExists"));break;default:a.error(l("anErrorOccurred"))}},...u}})},$f=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{l.start();try{const t=await e({method:"put",url:`/video-items/${a.id}`,data:ll(a,["id"])});if(!t.success)throw new Error(t.error||n("anErrorOccurred"));return t.result.data}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Cf=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{l.start();const t=await e({method:"delete",url:`/video-items/force/${a}`});if(l.finish(),!t.success)throw new Error(t.error);return t.result?.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},If=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof kf){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("VideoItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(c=>a[c]);try{for(const c of t)await e({method:"delete",url:`/video-items/force/${c}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Vf=(u,e,n)=>_d(["video-items"],u,o=>{const a=new URLSearchParams;return Object.entries(o).forEach(([t,c])=>{c!==void 0&&a.set(t,String(c))}),`/video-items?${a.toString()}`},{keepPreviousData:!0,staleTime:5e3,...e}),Sf=(u,e)=>zo(["video-settings"],async()=>{const{request:n}=Le(),l=await n({url:"/video-settings"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Ef=()=>{const{request:u}=Le(),{t:e}=we(),n=We(),l=Oe();return Ua(async o=>{const a=await u({url:"/video-settings",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateSettings"))}})},{unref:Uf}=await me("vue"),{defineComponent:Mf}=await me("vue"),{unref:S,resolveComponent:mh,createVNode:J,withCtx:ue,toDisplayString:tl,createTextVNode:zl,openBlock:Sl,createBlock:Un,createCommentVNode:os,isRef:Jn,createElementBlock:ba,createSlots:Tf,createElementVNode:oa,normalizeClass:Nf,Fragment:ss,renderList:Df,normalizeStyle:Ri}=await me("vue"),zf={key:1,class:"flex items-center gap-3"},Af={key:0,class:"w-full flex items-center justify-between mt-4"},Pf={class:"flex items-center gap-3"},Lf={key:1,class:"mt-4"},Bf={key:0},Ff={class:"flex items-center justify-center h-full"},Of={class:"text-center text-dimgray text-sm"},qf={key:1,class:"flex items-center justify-center"},Rf={class:"mt-5"},jf={class:"w-full flex flex-gap-8 items-center justify-start"},Kf=["src"],Yf={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Gf=["src"],{inject:Hf,ref:wl,computed:rs,watch:Wf}=await me("vue"),{defineStore:Qf}=await me("pinia"),Xf=Mf({__name:"index",setup(u){const{t:e,locale:n}=we(),{tr:l,fileUrl:o,pickByTheme:a,getVideoThumbnail:t}=tt(),{videoDisplayTypes:c}=bf(),{mutate:fe,isPending:le}=Cf(),{mutate:de,isPending:z}=If(),{mutate:ae,isPending:B}=xf(),{mutate:$,isPending:d}=$f(),F=Oe(),Z=ea(),s=Hf("appConfig"),re=wl(""),N=zd(re,500),W=wl(null),k=wl([]),U=Qf("videos-management-store",()=>({currentTab:wl("all")}))(),O=wl(0),G=wl(6),j=wl(1),ee=rs(()=>({pageSize:G.value,query:N.value,source:U.currentTab,page:j.value})),v=H=>{j.value=H,y()},A=H=>{G.value=H,y()},{data:_,refetch:y,isPending:K}=Vf(ee);Wf(()=>_.value,H=>{k.value=H?.videoItems||[],O.value=H?.meta?.total||0,j.value=H?.meta?.currentPage||1},{deep:!0,immediate:!0});const E=wl(!1),Y=wl(null),X=wl(null),M=wl({title:"",description:"",visible:!0,source:Ea.SELF_HOSTED,displayType:Ln.HORIZONTAL,thumbnail:"",path:""}),x=rs(()=>({title:[{required:M.value.source==Ea.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),b=H=>{Y.value=ie.cloneDeep(H),H?M.value=ie.cloneDeep(H):M.value={title:"",description:"",visible:!0,source:Ea.SELF_HOSTED,displayType:Ln.HORIZONTAL,thumbnail:"",path:""},E.value=!0},P=async H=>{Z.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{fe(H)}})},_e=async()=>(X.value?.validate(async H=>{if(!H){const T={title:M.value.title,description:M.value.description,visible:M.value.visible,source:M.value.source,displayType:M.value.displayType,thumbnail:M.value.thumbnail,path:M.value.path};Y.value?(T.id=Y.value.id,$(T)):ae(T),E.value=!1}}),!1),C=wl(!1),w=wl(!1),i=wl(""),h=wl(""),oe=wl("classic"),L=wl(!1),ne=Sf({enabled:!1}),{mutate:Me,isPending:ke}=Ef(),{mutate:ye,isPending:kt}=wf(),ut=wl({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),xe=wl(ut.value),qe=rs(()=>ie.isEqual(ut.value,xe.value)),Ve=async()=>{Me(ut.value,{onSuccess:()=>Ze()})},Ze=async()=>{await ne.refetch(),ne.data.value?.forEach(H=>{ut.value[H.key]!=null&&(ut.value[H.key]=H.value)}),xe.value=ie.cloneDeep(ut.value)};Ze();const q=()=>{ye(void 0,{onSuccess:()=>Ze()})},I=wl(!1),g=wl(Gl()),Xe=wl({}),Se=rs(()=>{let H=0;for(const T in Xe.value)Xe.value[T]&&H++;return H});function ft(){Xe.value={},y()}const Ct=async()=>(Se.value?Z.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[Se.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{de(Xe.value,{onSuccess:()=>{Xe.value={}}})}}):F.warning(e("noItemSelected")),!1),D=rs(()=>!!(B.value||d.value||le.value||z.value||ke.value||kt.value||ne.isPending.value));return(H,T)=>{const it=Ce,et=pe,Jt=He,ce=On,ve=Oa,je=Lc,ge=il,Pe=pr,Dt=_i,Rt=Ml,al=Cl,zt=nn,Yt=Pc,Te=va,cl=Dd,qn=fr,ya=Ra,on=qa,sn=Po,$e=io,Tl=Ta,ua=da,pa=Fn,r=Na,In=_a,V=No,Wt=ca,ga=Hl,_r=ro;return Sl(),ba(ss,null,[J(ve,{to:"#alt-action"},{default:ue(()=>[S(U).currentTab=="settings"?(Sl(),Un(Jt,{key:0,loading:S(D),disabled:S(qe),type:"primary",secondary:"",onClick:Ve},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:save"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(Sl(),ba("div",zf,[J(ce,{checked:S(I),"onUpdate:checked":[T[0]||(T[0]=Ke=>Jn(I)?I.value=Ke:null),T[1]||(T[1]=Ke=>{for(const Ms of S(k))Ms.id&&(S(Xe)[Ms.id]=Ke);g.value=("uuidv4"in H?H.uuidv4:Uf(Gl))()})]},{default:ue(()=>[zl(tl(S(e)("selectAll")),1)]),_:1},8,["checked"]),J(Jt,{type:"primary",secondary:"",onClick:T[2]||(T[2]=Ke=>b(null))},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:video-add"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("addVideo")),1)]),_:1})]))]),_:1}),J(Dt,{value:S(U).currentTab,"onUpdate:value":[T[6]||(T[6]=Ke=>S(U).currentTab=Ke),T[7]||(T[7]=()=>S(y)())],type:"card",size:"medium"},Tf({default:ue(()=>[J(je,{name:"all"},{default:ue(()=>[J(et,{size:"18",class:"mr-1"},{default:ue(()=>[J(it,{icon:"carbon:collapse-all"})]),_:1}),zl(" "+tl(S(e)("all_")),1)]),_:1}),J(je,{name:S(Ea).SELF_HOSTED},{default:ue(()=>[J(et,{size:"18",class:"mr-1"},{default:ue(()=>[J(it,{icon:"carbon:document-video"})]),_:1}),zl(" "+tl(S(e)("selfHosted")),1)]),_:1},8,["name"]),J(je,{name:S(Ea).YOUTUBE},{default:ue(()=>[J(et,{size:"18",class:"mr-1"},{default:ue(()=>[J(it,{icon:"carbon:logo-youtube"})]),_:1}),zl(" "+tl(S(e)("youtube")),1)]),_:1},8,["name"]),J(je,{name:"settings"},{default:ue(()=>[J(et,{size:"18",class:"mr-1"},{default:ue(()=>[J(it,{icon:"carbon:settings-adjust"})]),_:1}),zl(" "+tl(S(e)("settings")),1)]),_:1})]),_:2},[S(U).currentTab!="settings"?{name:"suffix",fn:ue(()=>[J(Pe,{class:"!w-[250px]"},{default:ue(()=>[J(ge,{ref_key:"searchInputRef",ref:W,value:S(re),"onUpdate:value":[T[3]||(T[3]=Ke=>Jn(re)?re.value=Ke:null),T[4]||(T[4]=Ke=>{Ke||S(y)()})],clearable:!0,placeholder:S(e)("searchVideo")},null,8,["value","placeholder"]),J(Jt,{type:"primary",secondary:"",onClick:T[5]||(T[5]=Ke=>S(y)())},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),S(Se)>0?(Sl(),ba("section",Af,[oa("span",null,tl(S(e)("nbItemsSelected",[S(Se)])),1),oa("section",Pf,[J(Jt,{type:"error",size:"small",secondary:"",onClick:Ct},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:trash-can"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("delete")),1)]),_:1}),J(Jt,{type:"warning",size:"small",secondary:"",onClick:ft},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:close"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("cancelSelection")),1)]),_:1})])])):os("",!0),S(U).currentTab=="settings"?(Sl(),ba("section",Lf,[J(al,{hoverable:"",embedded:""},{header:ue(()=>[zl(tl(S(e)("youtube")),1)]),default:ue(()=>[J(Te,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ue(()=>[J(zt,null,{default:ue(()=>[J(al,{class:"w-full h-full",size:"small"},{default:ue(()=>[J(Rt,{align:"center",justify:"space-between"},{default:ue(()=>[oa("span",null,tl(S(e)("apiKey")),1),J(ge,{value:S(ut).youtubeApiKey,"onUpdate:value":T[8]||(T[8]=Ke=>S(ut).youtubeApiKey=Ke),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),J(zt,null,{default:ue(()=>[J(al,{class:"w-full h-full py-1.5",size:"small"},{default:ue(()=>[J(Rt,{align:"center",justify:"space-between"},{default:ue(()=>[oa("span",null,tl(S(e)("autoUpdateChannelVideos")),1),J(Yt,{value:S(ut).youtubeChannelVideosAutoUpdate,"onUpdate:value":T[9]||(T[9]=Ke=>S(ut).youtubeChannelVideosAutoUpdate=Ke),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ue(()=>T[29]||(T[29]=[oa("div",{class:"w-6"},null,-1)])),unchecked:ue(()=>T[30]||(T[30]=[oa("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),S(ut).youtubeChannelVideosAutoUpdate=="1"?(Sl(),ba(ss,{key:0},[J(zt,null,{default:ue(()=>[J(al,{class:"w-full h-full",size:"small"},{default:ue(()=>[J(Rt,{align:"center",justify:"space-between"},{default:ue(()=>[oa("span",null,tl(S(e)("channelId")),1),J(ge,{value:S(ut).youtubeChannelId,"onUpdate:value":T[10]||(T[10]=Ke=>S(ut).youtubeChannelId=Ke),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),J(zt,null,{default:ue(()=>[J(al,{class:"w-full h-full",size:"small"},{default:ue(()=>[J(Rt,{align:"center",justify:"space-between"},{default:ue(()=>[oa("span",null,tl(S(e)("lastUpdate")),1),oa("b",null,tl(S(ut).youtubeLastChannelVideosUpdate?S($n)(S(ut).youtubeLastChannelVideosUpdate,{locale:S(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):S(e)("never")),1),J(Jt,{strong:"",circle:"",secondary:"",type:"primary",title:S(e)("refresh"),disabled:S(D),onClick:q},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:restart",class:Nf({"animate-spin":S(D)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):os("",!0)]),_:1})]),_:1})])):(Sl(),Un(al,{key:2,embedded:"",class:"py-10 mt-4"},{default:ue(()=>[S(k).length&&!S(ne).isPending.value?(Sl(),ba("section",Bf,[J(Te,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:ue(()=>[(Sl(!0),ba(ss,null,Df(S(k),(Ke,Ms)=>(Sl(),Un(zt,{key:Ms},{default:ue(()=>[J(on,{name:"slide-fade",appear:""},{default:ue(()=>[J(al,{bordered:"",hoverable:""},{cover:ue(()=>[oa("div",Ff,[J(cl,{load:()=>S(t)(Ke.path),fallback:Ke.thumbnailUrl??S(hf),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"])])]),header:ue(()=>[oa("div",Of,[J(qn,{"line-clamp":1,"expand-trigger":"click"},{default:ue(()=>[Ke.id?(Sl(),Un(ce,{key:S(g),checked:S(Xe)[Ke.id],"onUpdate:checked":vr=>S(Xe)[Ke.id]=vr,class:"mr-1"},null,8,["checked","onUpdate:checked"])):os("",!0),zl(" "+tl(S(l)(Ke.title)),1)]),_:2},1024)])]),action:ue(()=>[J(Rt,{justify:"space-between",align:"center"},{default:ue(()=>[J(Rt,null,{default:ue(()=>[J(ya,{bordered:!1,type:Ke.visible?"success":"error"},{default:ue(()=>[zl(tl(Ke.visible?S(e)("visible"):S(e)("hidden")),1)]),_:2},1032,["type"]),J(ya,{bordered:!1,type:Ke.displayType==S(Ln).HORIZONTAL?"info":"warning"},{default:ue(()=>[zl(tl(Ke.displayType==S(Ln).HORIZONTAL?S(e)("horizontal"):S(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),J(Rt,null,{default:ue(()=>[J(Jt,{ternary:"",circle:"",title:S(e)("play"),onClick:()=>{i.value=S(e)("video"),h.value=S(o)(Ke.path),oe.value=Ke.source==S(Ea).YOUTUBE?"youtube":"classic",w.value=!0}},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Ke.source!=S(Ea).YOUTUBE?(Sl(),Un(Jt,{key:0,ternary:"",circle:"",title:S(e)("edit"),onClick:vr=>b(Ke)},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):os("",!0),J(Jt,{ternary:"",circle:"",title:S(e)("delete"),onClick:vr=>P(Ke)},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),J(sn,{page:S(j),"onUpdate:page":[T[11]||(T[11]=Ke=>Jn(j)?j.value=Ke:null),v],class:"mt-10 justify-center","show-size-picker":"","page-size":S(G),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(S(O)/S(G)),"onUpdate:pageSize":A},{prefix:ue(()=>[zl(tl(`${S(O)} ${S(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):S(ne).isPending.value?(Sl(),ba("section",qf,[J($e,{size:"medium"})])):(Sl(),Un(Tl,{key:2,description:S(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),J(ga,{show:S(E),"onUpdate:show":T[22]||(T[22]=Ke=>Jn(E)?E.value=Ke:null),loading:S(K),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:S(Y)?S(e)("editVideo"):S(e)("addVideo"),"positive-text":S(e)("validate"),"negative-text":S(e)("cancel"),onPositiveClick:_e,onNegativeClick:T[23]||(T[23]=Ke=>E.value=!1)},{default:ue(()=>[oa("div",Rf,[J(Wt,{ref_key:"formRef",ref:X,model:S(M),rules:S(x),"show-require-mark":!1,size:"medium"},{default:ue(()=>[J(ua,{label:S(e)("source"),path:"source"},{default:ue(()=>[J(ce,{checked:S(M).source,"onUpdate:checked":T[12]||(T[12]=Ke=>S(M).source=Ke),"checked-value":S(Ea).YOUTUBE,"unchecked-value":S(Ea).SELF_HOSTED},{default:ue(()=>[zl(tl(S(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),S(M).source==S(Ea).YOUTUBE?(Sl(),Un(Te,{key:0,"x-gap":"12",span:24},{default:ue(()=>[J(pa,{span:16,label:S(e)("videoShareLink"),path:"path"},{default:ue(()=>[J(ge,{value:S(M).path,"onUpdate:value":T[13]||(T[13]=Ke=>S(M).path=Ke),placeholder:S(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),J(pa,{span:8,label:S(e)("displayType"),path:"displayType"},{default:ue(()=>[J(r,{value:S(M).displayType,"onUpdate:value":T[14]||(T[14]=Ke=>S(M).displayType=Ke),placeholder:S(e)("displayType"),options:S(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(Sl(),ba(ss,{key:1},[J(ua,{"show-label":!1,path:"title"},{default:ue(()=>[J(In,{modelValue:S(M).title,"onUpdate:modelValue":T[15]||(T[15]=Ke=>S(M).title=Ke),placeholder:S(e)("title"),class:"w-full",sync:""},{label:ue(()=>[zl(tl(S(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(ua,{"show-label":!1,path:"description"},{default:ue(()=>[J(In,{modelValue:S(M).description,"onUpdate:modelValue":T[16]||(T[16]=Ke=>S(M).description=Ke),placeholder:S(e)("description"),class:"w-full",type:"textarea",sync:""},{label:ue(()=>[zl(tl(S(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(Te,{"x-gap":"12",span:24},{default:ue(()=>[J(pa,{span:16,label:S(e)("content"),path:"path"},{default:ue(()=>[J(Pe,null,{default:ue(()=>[J(Jt,{type:"primary",secondary:"",onClick:T[17]||(T[17]=()=>{C.value=!0})},{default:ue(()=>[zl(tl(S(e)("select")),1)]),_:1}),J(ge,{value:S(M).path?S(Mo)(S(M).path):"",placeholder:S(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),S(M).path?(Sl(),ba(ss,{key:0},[J(Jt,{type:"primary",ghost:"",onClick:T[18]||(T[18]=()=>{i.value=S(e)("video"),h.value=S(o)(S(M).path),oe.value="classic",w.value=!0})},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:play"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("play")),1)]),_:1}),J(Jt,{type:"primary",ghost:"",onClick:T[19]||(T[19]=()=>{S(M).path=""})},{icon:ue(()=>[J(et,null,{default:ue(()=>[J(it,{icon:"carbon:trash-can"})]),_:1})]),default:ue(()=>[zl(" "+tl(S(e)("clear")),1)]),_:1})],64)):os("",!0)]),_:1})]),_:1},8,["label"]),J(pa,{span:8,label:S(e)("displayType"),path:"displayType"},{default:ue(()=>[J(r,{value:S(M).displayType,"onUpdate:value":T[20]||(T[20]=Ke=>S(M).displayType=Ke),placeholder:S(e)("displayType"),options:S(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),J(ua,{label:S(e)("thumbnail"),path:"thumbnail"},{default:ue(()=>[oa("div",jf,[oa("div",{class:"cursor-pointer w-full h-[150px]",onClick:T[21]||(T[21]=()=>{L.value=!0})},[S(M).thumbnail?(Sl(),Un(V,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Ri("border: 1px dashed "+S(a)("green","white")),src:S(o)(S(M).thumbnail||"")},null,8,["style","src"])):(Sl(),ba("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Ri("border: 1px dashed "+S(a)("green","white"))},[J(et,{size:64},{default:ue(()=>[J(it,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),J(ga,{show:S(w),"onUpdate:show":T[24]||(T[24]=Ke=>Jn(w)?w.value=Ke:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:S(i)},{default:ue(()=>[S(oe)==="youtube"?(Sl(),ba("iframe",{key:0,width:"100%",height:"380",src:S(h),frameborder:"0",allowfullscreen:""},null,8,Kf)):(Sl(),ba("video",Yf,[oa("source",{src:S(h)},null,8,Gf)]))]),_:1},8,["show","title"]),J(_r,{show:S(C),"onUpdate:show":T[25]||(T[25]=Ke=>Jn(C)?C.value=Ke:null),title:S(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:S(s)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:T[26]||(T[26]=Ke=>{S(M).path=Ke,C.value=!1})},null,8,["show","title","upload-config"]),J(_r,{show:S(L),"onUpdate:show":T[27]||(T[27]=Ke=>Jn(L)?L.value=Ke:null),title:S(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:S(s)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:T[28]||(T[28]=Ke=>{S(M).thumbnail=Ke,L.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Jf=Cn(Xf,[["__scopeId","data-v-1480f5d7"]]),{t:Re}=mi.global,ji=[{key:"maxlength",defaultValue:"",placeholder:Re("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Re("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],Zf={text:ji,textarea:ji,number:[{key:"min",defaultValue:"",placeholder:Re("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Re("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Re("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Re("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Re("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Re("maxTagCount")},{key:"max",defaultValue:"",placeholder:Re("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"format",defaultValue:"",placeholder:Re("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"format",defaultValue:"",placeholder:Re("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"format",defaultValue:"",placeholder:Re("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"format",defaultValue:"",placeholder:Re("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Re("maxTagCount")},{key:"max",defaultValue:"",placeholder:Re("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Re("maxTagCount")},{key:"max",defaultValue:"",placeholder:Re("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Re("maxTagCount")},{key:"max",defaultValue:"",placeholder:Re("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"library",defaultValue:"all",placeholder:Re("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Re("maxTagCount")},{key:"max",defaultValue:"",placeholder:Re("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Re("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Re("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Re("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Re("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Re("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Re("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Re("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Re("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Re("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Re("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Re("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Re("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Re("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Re("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Re("sliderStep"),isNumber:!0}]},{t:Je}=mi.global,Or=[{type:"group",label:Je("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Je("text"),value:"text"},{label:Je("i18nText"),value:"i18n-text"},{label:Je("textarea"),value:"textarea"},{label:Je("i18nTextarea"),value:"i18n-textarea"},{label:Je("editor"),value:"editor"},{label:Je("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Je("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Je("number"),value:"number"},{label:Je("checkbox"),value:"checkbox"},{label:Je("switch"),value:"switch"},{label:Je("slider"),value:"slider"},{label:Je("rangeSlider"),value:"range-slider"}]},{type:"group",label:Je("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Je("singleSelect"),value:"single-select"},{label:Je("multiSelect"),value:"multi-select"}]},{type:"group",label:Je("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Je("date"),value:"date"},{label:Je("daterange"),value:"daterange"},{label:Je("datetime"),value:"datetime"},{label:Je("datetimerange"),value:"datetimerange"},{label:Je("year"),value:"year"},{label:Je("yearrange"),value:"yearrange"},{label:Je("month"),value:"month"},{label:Je("monthrange"),value:"monthrange"},{label:Je("quarter"),value:"quarter"},{label:Je("quarterrange"),value:"quarterrange"},{label:Je("week"),value:"week"}]},{type:"group",label:Je("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Je("image"),value:"image"},{label:Je("gallery"),value:"gallery"},{label:Je("audio"),value:"audio"},{label:Je("video"),value:"video"},{label:Je("document"),value:"document"},{label:Je("file"),value:"file"}]},{type:"group",label:Je("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Je("newsArticle"),value:"news-article"},{label:Je("newsArticles"),value:"news-articles"},{label:Je("newsCategory"),value:"news-category"},{label:Je("newsCategories"),value:"news-categories"},{label:Je("newsTag"),value:"news-tag"},{label:Je("newsTags"),value:"news-tags"}]},{type:"group",label:Je("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Je("icon"),value:"icon"},{label:Je("icons"),value:"icons"},{label:Je("color"),value:"color"},{label:Je("gradient"),value:"gradient"}]},{type:"group",label:Je("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Je("contentItem"),value:"content-model-item"},{label:Je("contentItems"),value:"content-model-items"},{label:Je("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Je("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Je("list"),value:"list"},{label:Je("i18nList"),value:"i18n-list"},{label:Je("albums"),value:"albums"}]}],{useModel:e_,mergeModels:t_,defineComponent:l_}=await me("vue"),{renderList:is,Fragment:vn,openBlock:ol,createElementBlock:fa,unref:Fe,createVNode:nt,withCtx:ot,resolveComponent:Ki,createElementVNode:Ql,createBlock:Pa,createCommentVNode:qr,toDisplayString:Xl,createTextVNode:Zn,normalizeClass:a_,isRef:Yi}=await me("vue"),n_={class:"flex items-center"},o_={class:"flex items-center justify-between w-full"},s_={class:"flex items-center justify-between"},r_={class:"text-base font-semibold ml-4"},i_={class:"text-xs text-slate-400"},c_={class:"text-xs text-slate-400"},d_={class:"text-xs text-slate-400"},u_={class:"text-xs text-slate-400"},p_={key:0},m_={class:"text-xs text-slate-400"},f_={key:1},__={class:"text-xs text-slate-400"},v_={key:2},y_={class:"text-xs text-slate-400"},g_={key:3},h_={class:"text-xs text-slate-400"},b_={key:0,class:"w-full flex items-center"},k_={class:"w-full flex items-center"},w_={class:"w-full"},x_={class:"text-sm"},{storeToRefs:$_}=await me("pinia"),{ref:$o,computed:Rr,h:cs,inject:ds}=await me("vue"),C_=l_({__name:"Fields",props:t_({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:n}=we(),{tr:l,formatKey:o,pickByTheme:a}=tt(),{isLightTheme:t}=$_(Ao()),{data:c}=Bn(),fe=u,le=e_(u,"modelValue"),de=ee=>{for(const v of Or){const A=v.children.find(_=>_.value===ee);if(A)return A.label}return null},z=$o(!1),ae=$o(null),B=$o(null),$=$o(null),d=$o(),F=(ee,v)=>{B.value=$.value=ee,ae.value=v;for(const A of Or)A.children.find(y=>y.value===ee)&&(d.value=A.key);z.value=!0},Z=ee=>{s(ee).value=!s(ee).value},s=ee=>Rr({get:()=>ee.value===B.value,set:v=>{v?B.value=ee.value:B.value=null}}),re=Rr(()=>!B.value||B.value===$.value),N=()=>{B.value&&ae.value!==null&&(le.value[ae.value].type=B.value),z.value=!1},W=ee=>cs("div",{class:"flex items-center"},[cs(pe,{size:21,class:"text-gray-500"},{default:()=>cs(Ce,{icon:ee.icon})}),cs("span",{class:"font-normal ml-2 "},{default:()=>ee.label}),cs("span",{class:"text-gray-500 ml-1"},{default:()=>`(${ee.children.length})`})]),k=ds("renderSelectLabel"),U=ds("removeCollectionField"),O=ds("removeSingleton"),G=ds("onCreateItemOption"),j=ds("expandedNames",()=>Rr(()=>$o([]).value));return(ee,v)=>{const A=He,_=Ra,y=il,K=nn,E=_a,Y=pr,X=va,M=ja,x=On,b=Na,P=Ki("color-picker"),_e=mr,C=qa,w=fi,i=uo,h=co,oe=Cl,L=Ki("Draggable"),ne=Ml,Me=qc,ke=Oc,ye=Id,kt=_i,ut=Hl;return ol(),fa(vn,null,[nt(L,{list:le.value,class:"w-full"},{default:ot(()=>[(ol(!0),fa(vn,null,is(le.value,(xe,qe)=>(ol(),Pa(oe,{key:`field-${qe}`,size:"small",class:"my-2",hoverable:""},{default:ot(()=>[nt(h,{"expanded-names":Fe(j)(fe.type=="collection"?`c-${fe.parentItemIndex}-f-${qe}`:`s-${qe}`).value,"onUpdate:expandedNames":Ve=>Fe(j)(fe.type=="collection"?`c-${fe.parentItemIndex}-f-${qe}`:`s-${qe}`).value=Ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":ot(({collapsed:Ve})=>[Ql("div",n_,[nt(A,{size:"small",type:"error",secondary:"",onClick:()=>{fe.type==="collection"?Fe(U)&&Fe(U)(fe.collectionKey,qe):Fe(O)&&Fe(O)(qe)},title:Fe(e)("delete")},{default:ot(()=>[nt(Fe(pe),null,{default:ot(()=>[nt(Fe(Ce),{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick","title"]),v[3]||(v[3]=Ql("div",{class:"w-4"},null,-1)),nt(Fe(pe),null,{default:ot(()=>[Ve?(ol(),Pa(Fe(Ce),{key:0,icon:"fa-solid:chevron-left"})):(ol(),Pa(Fe(Ce),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:ot(()=>v[4]||(v[4]=[Ql("span",null,null,-1)])),default:ot(()=>[nt(i,{name:"1"},{header:ot(()=>[Ql("div",o_,[Ql("div",s_,[nt(Fe(pe),{size:"18",class:"cursor-move mr-2"},{default:ot(()=>[nt(Fe(Ce),{icon:"fa-solid:grip-lines"})]),_:1}),nt(_,{size:"small",type:"info"},{default:ot(()=>[Zn(Xl(qe+1),1)]),_:2},1024),Ql("span",r_,Xl(Fe(l)(xe.label)),1)])])]),default:ot(()=>[nt(X,{span:24,"x-gap":"6"},{default:ot(()=>[nt(K,{span:6},{default:ot(()=>[Ql("span",i_,Xl(Fe(e)("fieldKey")),1),nt(y,{value:xe.key,placeholder:Fe(e)("fieldKey"),class:"w-full","onUpdate:value":Ve=>xe.key=Fe(o)(Ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),nt(K,{span:10},{default:ot(()=>[nt(E,{modelValue:xe.label,"onUpdate:modelValue":Ve=>xe.label=Ve,placeholder:Fe(e)("title"),class:"w-full",sync:""},{label:ot(()=>[Ql("span",c_,Xl(Fe(e)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),nt(K,{span:8},{default:ot(()=>[Ql("span",d_,Xl(Fe(e)("type")),1),nt(Y,null,{default:ot(()=>[nt(y,{value:de(xe.type),placeholder:Fe(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ve=>F(xe.type,qe)},null,8,["value","placeholder","onClick"]),nt(A,{secondary:"",onClick:Ve=>F(xe.type,qe)},{icon:ot(()=>[nt(Fe(Ce),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),nt(M,{class:"!mt-4 !mb-2"}),nt(X,{span:24,"x-gap":"6"},{default:ot(()=>[nt(K,{span:10,class:"flex items-center"},{default:ot(()=>[nt(x,{checked:xe.required,"onUpdate:checked":Ve=>xe.required=Ve,size:"medium"},{default:ot(()=>[Zn(Xl(Fe(e)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),nt(K,{span:14},{default:ot(()=>[["content-model-item","content-model-items"].includes(xe.type)?(ol(),fa(vn,{key:0},[Ql("span",u_,Xl(Fe(e)("contentModel")),1),nt(b,{value:xe.defaultValue,"onUpdate:value":Ve=>xe.defaultValue=Ve,options:Fe(c),placeholder:Fe(e)("contentModel"),"render-label":Fe(k),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(ol(),fa(vn,{key:1},[xe.type==="color"||xe.type==="gradient"?(ol(),fa("div",p_,[Ql("span",m_,Xl(Fe(e)("defaultValue")),1),nt(P,{"pure-color":xe.defaultValue,"onUpdate:pureColor":Ve=>xe.defaultValue=Ve,"default-pure-color":"#00000000","picker-type":"chrome","use-type":xe.type==="color"?"pure":"gradient",format:xe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Fe(t)?"white":"black",lang:Fe(n)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):xe.type==="i18n-text"?(ol(),fa("div",f_,[nt(E,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Fe(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:ot(()=>[Ql("span",__,Xl(Fe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-textarea"?(ol(),fa("div",v_,[nt(E,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Fe(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:ot(()=>[Ql("span",y_,Xl(Fe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-editor"?(ol(),fa("div",g_,[nt(E,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ve=>xe.defaultValue=Ve,placeholder:Fe(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:ot(()=>[Ql("span",h_,Xl(Fe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):(ol(),Pa(y,{key:4,value:xe.defaultValue,"onUpdate:value":Ve=>xe.defaultValue=Ve,placeholder:Fe(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),xe.type==="multi-select"||xe.type==="single-select"?(ol(),Pa(M,{key:0,"title-placement":"left",class:"!my-4"},{default:ot(()=>[Zn(Xl(Fe(e)("options")),1)]),_:1})):qr("",!0),nt(C,{name:"slide-fade",appear:""},{default:ot(()=>[xe.type==="multi-select"||xe.type==="single-select"?(ol(),fa("div",b_,[nt(_e,{value:xe.options,"onUpdate:value":Ve=>xe.options=Ve,placeholder:Fe(e)("addOption"),"on-create":Ve=>Fe(G)?Fe(G)(Ve,qe):null,"show-sort-button":"",class:"w-full"},{"create-button-default":ot(()=>[Zn(Xl(Fe(e)("addOption")),1)]),default:ot(({value:Ve})=>[Ql("div",k_,[nt(y,{value:Ve.value,placeholder:Fe(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Ze=>Ve.value=Fe(o)(Ze)},null,8,["value","placeholder","onUpdate:value"]),nt(E,{modelValue:Ve.label,"onUpdate:modelValue":Ze=>Ve.label=Ze,placeholder:Fe(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):qr("",!0)]),_:2},1024),(ol(!0),fa(vn,null,is(Fe(Zf),(Ve,Ze,q)=>(ol(),fa(vn,{key:q},[xe.type===Ze?(ol(),Pa(h,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:ot(()=>[nt(Fe(pe),{size:"18"},{default:ot(()=>[nt(Fe(Ce),{icon:"carbon:chevron-right"})]),_:1})]),default:ot(()=>[nt(i,{name:"1"},{header:ot(()=>[nt(M,{"title-placement":"left",class:"!my-4"},{default:ot(()=>[Zn(Xl(Fe(e)("settings")),1)]),_:1})]),default:ot(()=>[nt(C,{name:"slide-fade",appear:""},{default:ot(()=>[Ql("div",w_,[(ol(!0),fa(vn,null,is(Ve,I=>(ol(),Pa(X,{key:I.key,span:24,"x-gap":"12",class:"mb-2"},{default:ot(()=>[nt(K,{span:10},{default:ot(()=>[nt(y,{value:I.key,placeholder:Fe(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),nt(K,{span:14},{default:ot(()=>[I.isNumber?(ol(),Pa(w,{key:0,value:xe.settings[I.key],"onUpdate:value":g=>xe.settings[I.key]=g,"default-value":I.defaultValue?parseInt(I.defaultValue):void 0,placeholder:I.placeholder||Fe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(ol(),Pa(y,{key:1,value:xe.settings[I.key],"onUpdate:value":g=>xe.settings[I.key]=g,"default-value":I.defaultValue,placeholder:I.placeholder||Fe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):qr("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),nt(ut,{show:Fe(z),"onUpdate:show":v[2]||(v[2]=xe=>Yi(z)?z.value=xe:null),preset:"card",size:"medium",style:{width:"650px"},title:Fe(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":ot(()=>[nt(ne,{align:"center"},{default:ot(()=>[nt(A,{secondary:"",size:"small",type:"success",disabled:Fe(re),onClick:N},{default:ot(()=>[nt(Fe(Ce),{icon:"carbon:checkmark",class:"mr-1"}),Zn(" "+Xl(Fe(e)("select")),1)]),_:1},8,["disabled"]),nt(A,{secondary:"",size:"small",type:"error",onClick:v[0]||(v[0]=xe=>z.value=!1)},{default:ot(()=>[nt(Fe(Ce),{icon:"carbon:close",class:"mr-1"}),Zn(" "+Xl(Fe(e)("close")),1)]),_:1})]),_:1})]),default:ot(()=>[nt(kt,{animated:"",type:"line",size:"medium",placement:"left",value:Fe(d),"onUpdate:value":v[1]||(v[1]=xe=>Yi(d)?d.value=xe:null),style:{height:"100%"}},{default:ot(()=>[(ol(!0),fa(vn,null,is(Fe(Or),(xe,qe)=>(ol(),Pa(ye,{name:xe.key,tab:W(xe),key:qe},{default:ot(()=>[nt(ke,{hoverable:"",clickable:"",bordered:""},{default:ot(()=>[(ol(!0),fa(vn,null,is(xe.children,Ve=>(ol(),Pa(Me,{class:a_(s(Ve).value?`${Fe(a)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ve.value,onClick:Ze=>Z(Ve)},{suffix:ot(()=>[nt(x,{checked:s(Ve).value,"onUpdate:checked":Ze=>s(Ve).value=Ze,size:"medium",onClick:Ze=>Z(Ve)},null,8,["checked","onUpdate:checked","onClick"])]),default:ot(()=>[Ql("span",x_,Xl(Ve.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Gi=Cn(C_,[["__scopeId","data-v-f2dba27a"]]),{useModel:I_,mergeModels:V_,defineComponent:S_}=await me("vue"),{unref:De,toDisplayString:jl,openBlock:sl,createElementBlock:us,createCommentVNode:Co,createTextVNode:La,resolveComponent:fh,withCtx:Ge,createVNode:at,createElementVNode:Qa,createBlock:Al,normalizeStyle:jr,isRef:E_,renderList:U_,Fragment:Hi,normalizeClass:M_}=await me("vue"),T_={class:"text-base"},N_={key:0},D_={key:0},z_={key:0},A_={class:"flex items-center"},P_={class:"flex items-center justify-between w-full"},L_={class:"text-base font-semibold"},B_={class:"text-xs text-slate-400"},F_={class:"text-xs text-slate-400"},O_={class:"text-xs text-slate-400"},{defineAsyncComponent:q_,ref:Xa,computed:Xs,watch:Js,h:R_,provide:Mn}=await me("vue"),{storeToRefs:j_}=await me("pinia"),ld=S_({__name:"index",props:V_({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=q_(()=>Do(()=>import("./vue3-ts-jsoneditor-C8auy2Cl.js").then(i=>i.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:n}=we(),{tr:l,pickByTheme:o,formatKey:a}=tt(),{isLightTheme:t}=j_(Ao());Bn();const c=u,fe=I_(u,"show"),le=We(),de=Oe(),z=ea(),ae=Xa(!1),B=Xa(null),$=Xa({}),d=Xa({}),F={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},Z=Xa(!1),s=Xa(!1),re=Xa(!1),N=Xa(!1),W=Xa({}),k=i=>Xs({get:()=>W.value[i]?["1"]:[],set:h=>{W.value[i]=h.length>0}}),U=Xs({get:()=>ie.omit($.value,["index"]),set:i=>{$.value=$.value.index!==void 0?{index:$.value.index,...i}:{...i}}});Js(()=>N.value,i=>{Object.entries($.value).forEach(([h,oe],L)=>{h!=="index"&&(W.value[`c-${L}`]=i,oe?.items?.forEach((ne,Me)=>{W.value[`c-${L}-f-${Me}`]=i}))})}),Js(()=>re.value,i=>{Object.entries($.value).forEach(([h,oe],L)=>{h==="index"&&oe?.forEach((ne,Me)=>{W.value[`s-${Me}`]=i})})});const O=Xs(()=>ie.isEqual($.value,d.value)),G=()=>{$.value?$.value.index&&Array.isArray($.value.index)?$.value.index.push(ie.cloneDeep(F)):$.value.index=[ie.cloneDeep(F)]:$.value={index:[ie.cloneDeep(F)]}},j=i=>{$.value&&Array.isArray($.value.index)&&$.value.index.splice(i,1)},ee=()=>{const i=Gl();$.value?$.value[i]={key:"",title:"",items:[]}:$.value={[i]:{key:"",title:"",items:[]}}},v=i=>{if($.value){const{[i]:h,...oe}=$.value;$.value=oe}},A=i=>{$.value&&$.value[i].items.push(ie.cloneDeep(F))},_=(i,h)=>{if($.value){const oe=$.value[i];oe&&Array.isArray(oe.items)&&oe.items.splice(h,1)}},y=i=>i.title&&i.key&&i.key!=="index",K=()=>$.value&&typeof $.value=="object"?Object.keys($.value).filter(i=>i!=="index").length:0,E=Xs(()=>$.value?Object.keys($.value).filter(i=>i!=="index"):[]),Y=i=>E.value.indexOf(i),X=Xa(!1),M=async()=>{const i=ie.cloneDeep($.value),h=ie.cloneDeep($.value);X.value=!1,ae.value=!0,le.start();const oe=[];if(ie.forIn(i,(L,ne)=>{ne!=="index"&&oe.push(L.key)}),ie.forIn(i,(L,ne)=>{if(ne!=="index"){const Me=ie.keys(i).filter(ke=>ke!=="index").indexOf(ne);if(L&&L.key){if(L.key==="index")return de.error(n("keyIndexIsReservedInCollections")),X.value=!0,!1;if(oe.filter(ye=>ye==L.key).length>1)return de.error(n("collectionKeyIsNotUnique",[L.key])),X.value=!0,!1;if(Array.isArray(L.items))for(const[ye,kt]of L.items.entries())if(kt.key){if(L.items.filter(xe=>xe.key===kt.key).length>1)return de.error(n("fieldKeyOfCollectionIsNotUnique",[kt.key,L.key])),X.value=!0,!1}else return de.error(n("fieldKeyOfCollectionIsRequired",[ye+1,L.key])),X.value=!0,!1}else return de.error(n("collectionKeyIsRequired",[Me+1])),X.value=!0,!1}else if(Array.isArray(L))for(const[Me,ke]of L.entries())if(ke.key){if(L.filter(kt=>kt.key===ke.key).length>1)return de.error(n("singletonKeyIsNotUnique",[ke.key])),X.value=!0,!1}else return de.error(n("singletonKeyIsRequired",[Me+1])),X.value=!0,!1}),X.value){ae.value=!1,le.finish();return}ie.forIn(h,(L,ne)=>{ne!=="index"&&ne!==L.key&&Dc(i,ne,L.key)}),await c.updateDataStructure(i),ae.value=!1,le.finish()},x=()=>{ie.isEqual($.value,d.value)?fe.value=!1:z.warning({title:n("confirm"),content:n("confirmCloseDataStructure"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{fe.value=!1}})};Js(()=>c.rawDataStructure,i=>{$.value=i?ie.cloneDeep(i):{},ie.forIn(i,(h,oe)=>{oe!=="index"?($.value[oe].key=oe,h?.items?.forEach((L,ne)=>{$.value[oe].items[ne].settings||($.value[oe].items[ne].settings={})})):h?.forEach((L,ne)=>{$.value[oe][ne].settings||($.value[oe][ne].settings={})})}),d.value=ie.cloneDeep($.value)},{immediate:!0,deep:!0});const b=i=>R_("span",{},{default:()=>l(i.title)}),P=(i,h)=>({value:`option_${h+1}${i+1}`,label:""}),{copy:_e,copied:C,isSupported:w}=Wc();return Js(()=>C.value,i=>{i&&de.success(n("dataStructureCopied"))}),Mn("removeCollectionField",_),Mn("onCreateItemOption",P),Mn("renderSelectLabel",b),Mn("removeSingleton",j),Mn("addSingleton",G),Mn("expandCollections",N),Mn("expandSingletons",re),Mn("expandedNames",k),(i,h)=>{const oe=yi,L=Ce,ne=pe,Me=He,ke=Ml,ye=Cl,kt=Ma,ut=nn,xe=Ra,qe=il,Ve=_a,Ze=va,q=ja,I=vi,g=uo,Xe=co,Se=di;return sl(),Al(Se,{modelValue:fe.value,"onUpdate:modelValue":h[13]||(h[13]=ft=>fe.value=ft),"close-on-esc":!1,closable:!1,onOnSizeChange:h[14]||(h[14]=ft=>{B.value=ft})},{header:Ge(()=>[Qa("div",T_,[at(oe,{depth:"1"},{default:Ge(()=>[La(jl(De(n)("dataStructure"))+" ",1),i.title?(sl(),us("span",N_,"Â -Â "+jl(i.title),1)):Co("",!0)]),_:1})])]),"header-extra":Ge(()=>[at(ke,{align:"center"},{default:Ge(()=>[at(Me,{secondary:"",title:De(n)("save"),loading:De(ae),disabled:De(O),onClick:h[0]||(h[0]=ft=>M())},{icon:Ge(()=>[at(ne,null,{default:Ge(()=>[at(L,{icon:"carbon:save"})]),_:1})]),default:Ge(()=>[La(" "+jl(De(n)("save")),1)]),_:1},8,["title","loading","disabled"]),at(Me,{secondary:"",type:"error",title:De(n)("close"),disabled:De(ae),onClick:h[1]||(h[1]=ft=>x())},{icon:Ge(()=>[at(ne,null,{default:Ge(()=>[at(L,{icon:"carbon:close"})]),_:1})]),default:Ge(()=>[La(" "+jl(De(n)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ge(()=>[Qa("section",{style:jr(`min-height: ${De(B)?.windowHeight-De(B)?.headerHeight-5}px`),class:M_(`w-full h-full ${De(o)("bg-slate-200","bg-zinc-800")}`)},[at(Ze,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Ge(()=>[at(ut,{class:"mx-2 mt-2"},{default:Ge(()=>[at(ye,{embedded:"",bordered:"",segmented:""},{header:Ge(()=>[La(jl(De(n)("singletons"))+"Â  ",1),De($).index?.length?(sl(),us("span",D_," ("+jl(De($).index?.length)+") ",1)):Co("",!0)]),"header-extra":Ge(()=>[at(ke,null,{default:Ge(()=>[De(w)&&De(Z)?(sl(),Al(Me,{key:0,size:"small",type:"warning",secondary:"",title:De(n)("copy"),onClick:h[2]||(h[2]=ft=>De(_e)(JSON.stringify(De($).index)))},{icon:Ge(()=>[at(ne,null,{default:Ge(()=>[at(L,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Co("",!0),at(Me,{size:"small",type:"warning",secondary:"",onClick:h[3]||(h[3]=()=>{Z.value=!De(Z),De(Z)&&(s.value=!1)})},{default:Ge(()=>[at(ne,null,{default:Ge(()=>[De(Z)?(sl(),Al(L,{key:0,icon:"carbon:code"})):(sl(),Al(L,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),at(Me,{size:"small",type:"primary",secondary:"",onClick:h[4]||(h[4]=ft=>re.value=!De(re))},{default:Ge(()=>[at(ne,null,{default:Ge(()=>[De(re)?(sl(),Al(L,{key:0,icon:"carbon:collapse-categories"})):(sl(),Al(L,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),at(Me,{size:"small",type:"primary",secondary:"",onClick:h[5]||(h[5]=ft=>G())},{default:Ge(()=>[at(ne,{class:"mr-1"},{default:Ge(()=>[at(L,{icon:"carbon:add-alt"})]),_:1}),La(" "+jl(De(n)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),De(Z)?(sl(),Al(De(e),{key:0,height:De(B)?.windowHeight-De(B)?.headerHeight-100,"dark-theme":!De(t),class:"creopse-json-editor",mode:"tree",json:De($).index,"onUpdate:json":h[6]||(h[6]=ft=>De($).index=ft)},null,8,["height","dark-theme","json"])):(sl(),Al(kt,{key:1,style:jr(`max-height: ${De(B)?.windowHeight-De(B)?.headerHeight-100}px`)},{default:Ge(()=>[at(Gi,{modelValue:De($).index,"onUpdate:modelValue":h[7]||(h[7]=ft=>De($).index=ft),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),at(ut,{class:"mx-2 mt-2"},{default:Ge(()=>[at(ye,{embedded:"",bordered:"",segmented:""},{header:Ge(()=>[La(jl(De(n)("collections"))+"Â  ",1),K()>0?(sl(),us("span",z_," ("+jl(K())+") ",1)):Co("",!0)]),"header-extra":Ge(()=>[at(ke,null,{default:Ge(()=>[De(w)&&De(s)?(sl(),Al(Me,{key:0,size:"small",type:"warning",secondary:"",title:De(n)("copy"),onClick:h[8]||(h[8]=ft=>De(_e)(JSON.stringify(De(U))))},{icon:Ge(()=>[at(ne,null,{default:Ge(()=>[at(L,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Co("",!0),at(Me,{size:"small",type:"warning",secondary:"",onClick:h[9]||(h[9]=()=>{s.value=!De(s),De(s)&&(Z.value=!1)})},{default:Ge(()=>[at(ne,null,{default:Ge(()=>[De(s)?(sl(),Al(L,{key:0,icon:"carbon:code"})):(sl(),Al(L,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),at(Me,{size:"small",type:"primary",secondary:"",onClick:h[10]||(h[10]=ft=>N.value=!De(N))},{default:Ge(()=>[at(ne,null,{default:Ge(()=>[De(N)?(sl(),Al(L,{key:0,icon:"carbon:collapse-categories"})):(sl(),Al(L,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),at(Me,{size:"small",type:"primary",secondary:"",onClick:h[11]||(h[11]=ft=>ee())},{default:Ge(()=>[at(ne,{class:"mr-1"},{default:Ge(()=>[at(L,{icon:"carbon:add-alt"})]),_:1}),La(" "+jl(De(n)("addCollection")),1)]),_:1})]),_:1})]),_:1}),De(s)?(sl(),Al(De(e),{key:0,height:De(B)?.windowHeight-De(B)?.headerHeight-100,"dark-theme":!De(t),class:"creopse-json-editor",mode:"tree",json:De(U),"onUpdate:json":h[12]||(h[12]=ft=>E_(U)?U.value=ft:null)},null,8,["height","dark-theme","json"])):(sl(),Al(kt,{key:1,style:jr(`max-height: ${De(B)?.windowHeight-De(B)?.headerHeight-100}px`)},{default:Ge(()=>[(sl(!0),us(Hi,null,U_(De($)||{},(ft,Ct,D)=>(sl(),us(Hi,{key:D},[Ct!="index"?(sl(),Al(ye,{key:0,size:"small",class:"my-2",embedded:""},{default:Ge(()=>[at(Xe,{"expanded-names":k(`c-${D}`).value,"onUpdate:expandedNames":H=>k(`c-${D}`).value=H,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Ge(({collapsed:H})=>[Qa("div",A_,[at(Me,{size:"small",type:"error",secondary:"",onClick:T=>v(Ct)},{default:Ge(()=>[at(ne,{class:"mr-1"},{default:Ge(()=>[at(L,{icon:"carbon:trash-can"})]),_:1}),La(" "+jl(De(n)("delete")),1)]),_:2},1032,["onClick"]),h[15]||(h[15]=Qa("div",{class:"w-4"},null,-1)),at(ne,null,{default:Ge(()=>[H?(sl(),Al(L,{key:0,icon:"fa-solid:chevron-left"})):(sl(),Al(L,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Ge(()=>h[16]||(h[16]=[Qa("span",null,null,-1)])),default:Ge(()=>[at(g,{name:"1"},{header:Ge(()=>[Qa("div",P_,[at(ke,null,{default:Ge(()=>[at(xe,{size:"small",type:"success"},{default:Ge(()=>[La(jl(Y(Ct)+1),1)]),_:2},1024),Qa("span",L_,jl(De(l)(ft.title)),1)]),_:2},1024)])]),default:Ge(()=>[at(Ze,{span:24,"x-gap":"6"},{default:Ge(()=>[at(ut,{span:6},{default:Ge(()=>[Qa("span",B_,jl(De(n)("fieldKey")),1),at(qe,{value:ft.key,placeholder:De(n)("collectionKey"),class:"w-full",size:"small","onUpdate:value":H=>ft.key=De(a)(H)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),at(ut,{span:11},{default:Ge(()=>[at(Ve,{modelValue:ft.title,"onUpdate:modelValue":H=>ft.title=H,placeholder:De(n)("title"),class:"w-full",size:"small",sync:""},{label:Ge(()=>[Qa("span",F_,jl(De(n)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),at(ut,{span:7},{default:Ge(()=>[Qa("span",O_,jl(De(n)("actions")),1),at(Me,{block:"",size:"small",type:"primary",disabled:!y(ft),secondary:"",class:"w-full",onClick:H=>A(Ct)},{default:Ge(()=>[at(ne,{class:"mr-1"},{default:Ge(()=>[at(L,{icon:"carbon:add-alt"})]),_:1}),La(" "+jl(De(n)("addField")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024),at(q,{class:"!my-4.75"}),y(ft)?(sl(),Al(Gi,{key:0,modelValue:De($)[Ct].items,"onUpdate:modelValue":H=>De($)[Ct].items=H,"parent-item-index":D,"collection-key":Ct,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(sl(),Al(I,{key:1,bordered:"",type:"info"},{default:Ge(()=>[La(jl(De(n)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):Co("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:sa}=mi.global,K_=[{label:sa("text"),value:"text"},{label:sa("textarea"),value:"textarea"},{label:sa("number"),value:"number"},{label:sa("switch"),value:"switch"},{label:sa("singleSelect"),value:"single-select"},{label:sa("multiSelect"),value:"multi-select"},{label:sa("slider"),value:"slider"},{label:sa("image"),value:"image"},{label:sa("icon"),value:"icon"},{label:sa("color"),value:"color"},{label:sa("gradient"),value:"gradient"},{label:sa("dimensions"),value:"dimensions"},{label:sa("background"),value:"background"},{label:sa("border"),value:"border"},{label:sa("shadow"),value:"shadow"}],{useModel:Y_,mergeModels:G_,defineComponent:H_}=await me("vue"),{unref:Be,toDisplayString:fl,openBlock:_l,createElementBlock:Io,createCommentVNode:ps,createTextVNode:ka,resolveComponent:Wi,withCtx:ze,createVNode:Ae,createElementVNode:El,createBlock:Kl,isRef:W_,renderList:Qi,Fragment:Xi,normalizeStyle:Ji,normalizeClass:Q_}=await me("vue"),X_={class:"text-base"},J_={key:0},Z_={key:0},ev={class:"flex items-center"},tv={class:"flex items-center justify-between w-full"},lv={class:"text-base font-semibold"},av={class:"text-xs text-slate-400"},nv={class:"text-xs text-slate-400"},ov={class:"text-xs text-slate-400"},sv={class:"flex items-center"},rv={class:"flex items-center justify-between w-full"},iv={class:"flex items-center justify-between"},cv={class:"text-base font-semibold ml-4"},dv={class:"text-xs text-slate-400"},uv={class:"text-xs text-slate-400"},pv={class:"text-xs text-slate-400"},mv={key:0},fv={class:"text-xs text-slate-400"},_v={key:0,class:"w-full flex items-center"},vv={class:"w-full flex items-center"},{defineAsyncComponent:yv,ref:Tn,computed:Kr,watch:Yr}=await me("vue"),{storeToRefs:gv}=await me("pinia"),hv=H_({__name:"index",props:G_({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=yv(()=>Do(()=>import("./vue3-ts-jsoneditor-C8auy2Cl.js").then(b=>b.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),n=ea(),l=Oe(),o=We(),{t:a,locale:t}=we(),{pickByTheme:c,tr:fe,formatKey:le}=tt(),{isLightTheme:de}=gv(Ao()),z=u,ae=Y_(u,"show"),B=Tn(null),$=Tn(!1),d=Tn({}),F=Tn({}),Z={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},s=Tn(!1),re=Tn(!1),N=Tn({}),W=b=>Kr({get:()=>N.value[b]?["1"]:[],set:P=>{N.value[b]=P.length>0}});Yr(()=>z.settingsStructure,b=>{d.value=b?ie.cloneDeep(b):{},ie.forIn(b,(P,_e)=>{d.value[_e].key=_e}),F.value=ie.cloneDeep(d.value)},{immediate:!0,deep:!0});const k=Kr(()=>ie.isEqual(d.value,F.value)),U=Tn(!1),O=async()=>{const b=ie.cloneDeep(d.value),P=ie.cloneDeep(d.value);U.value=!1,$.value=!0,o.start();const _e=Object.values(b).map(C=>C.key);if(ie.forIn(b,(C,w)=>{const i=ie.keys(b).indexOf(w);if(C&&C.key){if(_e.filter(oe=>oe==C.key).length>1)return l.error(a("groupKeyIsNotUnique",[C.key])),U.value=!0,!1;if(Array.isArray(C.items))for(const[oe,L]of C.items.entries())if(L.key){if(C.items.filter(Me=>Me.key===L.key).length>1)return l.error(a("fieldKeyOfGroupIsNotUnique",[L.key,C.key])),U.value=!0,!1}else return l.error(a("fieldKeyOfGroupIsRequired",[oe+1,C.key])),U.value=!0,!1}else return l.error(a("groupKeyIsRequired",[i+1])),U.value=!0,!1}),U.value){$.value=!1,o.finish();return}ie.forIn(P,(C,w)=>{w!==C.key&&Dc(b,w,C.key)}),await z.updateSettingsStructure(b),$.value=!1,o.finish()},G=()=>{ie.isEqual(d.value,F.value)?ae.value=!1:n.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{ae.value=!1}})},j=()=>d.value&&typeof d.value=="object"?Object.keys(d.value).length:0,ee=Kr(()=>d.value?Object.keys(d.value):[]),v=b=>ee.value.indexOf(b),A=()=>{const b=Gl();d.value?d.value[b]={key:"",title:"",items:[]}:d.value={[b]:{key:"",title:"",items:[]}}},_=b=>{if(d.value){const{[b]:P,..._e}=d.value;d.value=_e}},y=b=>{d.value&&d.value[b].items.push(ie.cloneDeep(Z))},K=(b,P)=>{if(d.value){const _e=d.value[b];_e&&Array.isArray(_e.items)&&_e.items.splice(P,1)}},E=b=>b.title&&b.key,Y=(b,P)=>({value:`option_${P+1}${b+1}`,label:""});Yr(()=>re.value,b=>{Object.entries(d.value).forEach(([P,_e],C)=>{N.value[`c-${C}`]=b,_e?.items?.forEach((w,i)=>{N.value[`c-${C}-f-${i}`]=b})})});const{copy:X,copied:M,isSupported:x}=Wc();return Yr(()=>M.value,b=>{b&&l.success(a("settingsStructureCopied"))}),(b,P)=>{const _e=yi,C=Ce,w=pe,i=He,h=Ml,oe=nn,L=Cl,ne=Ra,Me=il,ke=_a,ye=va,kt=ja,ut=Na,xe=On,qe=Wi("color-picker"),Ve=mr,Ze=qa,q=uo,I=co,g=Wi("Draggable"),Xe=vi,Se=Ma,ft=di;return _l(),Kl(ft,{modelValue:ae.value,"onUpdate:modelValue":P[7]||(P[7]=Ct=>ae.value=Ct),"close-on-esc":!1,closable:!1,onOnSizeChange:P[8]||(P[8]=Ct=>{B.value=Ct})},{header:ze(()=>[El("div",X_,[Ae(_e,{depth:"1"},{default:ze(()=>[ka(fl(Be(a)("sectionSettings"))+" ",1),b.title?(_l(),Io("span",J_,"Â -Â "+fl(b.title),1)):ps("",!0)]),_:1})])]),"header-extra":ze(()=>[Ae(h,{align:"center"},{default:ze(()=>[Ae(i,{secondary:"",title:Be(a)("save"),loading:Be($),disabled:Be(k),onClick:P[0]||(P[0]=Ct=>O())},{icon:ze(()=>[Ae(w,null,{default:ze(()=>[Ae(C,{icon:"carbon:save"})]),_:1})]),default:ze(()=>[ka(" "+fl(Be(a)("save")),1)]),_:1},8,["title","loading","disabled"]),Ae(i,{secondary:"",type:"error",title:Be(a)("close"),disabled:Be($),onClick:P[1]||(P[1]=Ct=>G())},{icon:ze(()=>[Ae(w,null,{default:ze(()=>[Ae(C,{icon:"carbon:close"})]),_:1})]),default:ze(()=>[ka(" "+fl(Be(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:ze(()=>[El("section",{style:Ji(`min-height: ${Be(B)?.windowHeight-Be(B)?.headerHeight-5}px`),class:Q_(`w-full h-full ${Be(c)("bg-slate-200","bg-zinc-800")}`)},[Ae(ye,{cols:"4","item-responsive":"",responsive:"screen"},{default:ze(()=>[Ae(oe,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Ae(oe,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:ze(()=>[Ae(L,{embedded:"",bordered:"",segmented:""},{header:ze(()=>[ka(fl(Be(a)("groups"))+"Â  ",1),j()>0?(_l(),Io("span",Z_," ("+fl(j())+") ",1)):ps("",!0)]),"header-extra":ze(()=>[Ae(h,null,{default:ze(()=>[Be(x)&&Be(s)?(_l(),Kl(i,{key:0,size:"small",type:"warning",secondary:"",title:Be(a)("copy"),onClick:P[2]||(P[2]=Ct=>Be(X)(JSON.stringify(Be(d))))},{icon:ze(()=>[Ae(w,null,{default:ze(()=>[Ae(C,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):ps("",!0),Ae(i,{size:"small",type:"warning",secondary:"",onClick:P[3]||(P[3]=()=>{s.value=!Be(s)})},{default:ze(()=>[Ae(w,null,{default:ze(()=>[Be(s)?(_l(),Kl(C,{key:0,icon:"carbon:code"})):(_l(),Kl(C,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Ae(i,{size:"small",type:"primary",secondary:"",onClick:P[4]||(P[4]=Ct=>re.value=!Be(re))},{default:ze(()=>[Ae(w,null,{default:ze(()=>[Be(re)?(_l(),Kl(C,{key:0,icon:"carbon:collapse-categories"})):(_l(),Kl(C,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Ae(i,{size:"small",type:"primary",secondary:"",onClick:P[5]||(P[5]=Ct=>A())},{default:ze(()=>[Ae(w,{class:"mr-1"},{default:ze(()=>[Ae(C,{icon:"carbon:add-alt"})]),_:1}),ka(" "+fl(Be(a)("addGroup")),1)]),_:1})]),_:1})]),_:1}),Be(s)?(_l(),Kl(Be(e),{key:0,height:Be(B)?.windowHeight-Be(B)?.headerHeight-100,"dark-theme":!Be(de),class:"creopse-json-editor",mode:"tree",json:Be(d),"onUpdate:json":P[6]||(P[6]=Ct=>W_(d)?d.value=Ct:null)},null,8,["height","dark-theme","json"])):(_l(),Kl(Se,{key:1,style:Ji(`max-height: ${Be(B)?.windowHeight-Be(B)?.headerHeight-100}px`)},{default:ze(()=>[(_l(!0),Io(Xi,null,Qi(Be(d)||{},(Ct,D,H)=>(_l(),Kl(L,{key:H,size:"small",class:"my-2",embedded:""},{default:ze(()=>[Ae(I,{"expanded-names":W(`c-${H}`).value,"onUpdate:expandedNames":T=>W(`c-${H}`).value=T,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":ze(({collapsed:T})=>[El("div",ev,[Ae(i,{size:"small",type:"error",secondary:"",onClick:it=>_(D)},{default:ze(()=>[Ae(w,{class:"mr-1"},{default:ze(()=>[Ae(C,{icon:"carbon:trash-can"})]),_:1}),ka(" "+fl(Be(a)("delete")),1)]),_:2},1032,["onClick"]),P[9]||(P[9]=El("div",{class:"w-4"},null,-1)),Ae(w,null,{default:ze(()=>[T?(_l(),Kl(C,{key:0,icon:"fa-solid:chevron-left"})):(_l(),Kl(C,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:ze(()=>P[10]||(P[10]=[El("span",null,null,-1)])),default:ze(()=>[Ae(q,{name:"1"},{header:ze(()=>[El("div",tv,[Ae(h,null,{default:ze(()=>[Ae(ne,{size:"small",type:"success"},{default:ze(()=>[ka(fl(v(D)+1),1)]),_:2},1024),El("span",lv,fl(Be(fe)(Ct.title)),1)]),_:2},1024)])]),default:ze(()=>[Ae(ye,{span:24,"x-gap":"6"},{default:ze(()=>[Ae(oe,{span:6},{default:ze(()=>[El("span",av,fl(Be(a)("fieldKey")),1),Ae(Me,{value:Ct.key,placeholder:Be(a)("groupKey"),class:"w-full",size:"small","onUpdate:value":T=>Ct.key=Be(le)(T)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Ae(oe,{span:11},{default:ze(()=>[Ae(ke,{modelValue:Ct.title,"onUpdate:modelValue":T=>Ct.title=T,placeholder:Be(a)("title"),class:"w-full",size:"small",sync:""},{label:ze(()=>[El("span",nv,fl(Be(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Ae(oe,{span:7},{default:ze(()=>[El("span",ov,fl(Be(a)("actions")),1),Ae(i,{block:"",size:"small",type:"primary",disabled:!E(Ct),secondary:"",class:"w-full",onClick:T=>y(D)},{default:ze(()=>[Ae(w,{class:"mr-1"},{default:ze(()=>[Ae(C,{icon:"carbon:add-alt"})]),_:1}),ka(" "+fl(Be(a)("addField")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Ae(kt,{class:"!my-4.75"}),E(Ct)?(_l(),Kl(g,{key:0,list:Be(d)[D].items,class:"w-full"},{default:ze(()=>[(_l(!0),Io(Xi,null,Qi(Be(d)[D].items,(T,it)=>(_l(),Kl(L,{key:`field-${it}`,size:"small",class:"my-2",hoverable:""},{default:ze(()=>[Ae(I,{"expanded-names":W(`c-${D}-f-${it}`).value,"onUpdate:expandedNames":et=>W(`c-${D}-f-${it}`).value=et,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":ze(({collapsed:et})=>[El("div",sv,[Ae(i,{size:"small",type:"error",secondary:"",onClick:()=>{K(D,it)},title:Be(a)("delete")},{default:ze(()=>[Ae(w,null,{default:ze(()=>[Ae(C,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick","title"]),P[11]||(P[11]=El("div",{class:"w-4"},null,-1)),Ae(w,null,{default:ze(()=>[et?(_l(),Kl(C,{key:0,icon:"fa-solid:chevron-left"})):(_l(),Kl(C,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:ze(()=>P[12]||(P[12]=[El("span",null,null,-1)])),default:ze(()=>[Ae(q,{name:"1"},{header:ze(()=>[El("div",rv,[El("div",iv,[Ae(w,{size:"18",class:"cursor-move mr-2"},{default:ze(()=>[Ae(C,{icon:"fa-solid:grip-lines"})]),_:1}),Ae(ne,{size:"small",type:"info"},{default:ze(()=>[ka(fl(it+1),1)]),_:2},1024),El("span",cv,fl(Be(fe)(T.label)),1)])])]),default:ze(()=>[Ae(ye,{span:24,"x-gap":"6"},{default:ze(()=>[Ae(oe,{span:6},{default:ze(()=>[El("span",dv,fl(Be(a)("fieldKey")),1),Ae(Me,{value:T.key,placeholder:Be(a)("fieldKey"),class:"w-full","onUpdate:value":et=>T.key=Be(le)(et)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Ae(oe,{span:10},{default:ze(()=>[Ae(ke,{modelValue:T.label,"onUpdate:modelValue":et=>T.label=et,placeholder:Be(a)("title"),class:"w-full",sync:""},{label:ze(()=>[El("span",uv,fl(Be(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Ae(oe,{span:8},{default:ze(()=>[El("span",pv,fl(Be(a)("type")),1),Ae(ut,{value:T.type,"onUpdate:value":et=>T.type=et,options:Be(K_),placeholder:Be(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Ae(kt,{class:"!mt-4 !mb-2"}),Ae(ye,{span:24,"x-gap":"6"},{default:ze(()=>[Ae(oe,{span:10,class:"flex items-center"},{default:ze(()=>[Ae(xe,{checked:T.required,"onUpdate:checked":et=>T.required=et,size:"medium"},{default:ze(()=>[ka(fl(Be(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),Ae(oe,{span:14},{default:ze(()=>[T.type==="color"||T.type==="gradient"?(_l(),Io("div",mv,[El("span",fv,fl(Be(a)("defaultValue")),1),Ae(qe,{"pure-color":T.defaultValue,"onUpdate:pureColor":et=>T.defaultValue=et,"default-pure-color":"#00000000","picker-type":"chrome","use-type":T.type==="color"?"pure":"gradient",format:T.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Be(de)?"white":"black",lang:Be(t)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(_l(),Kl(Me,{key:1,value:T.defaultValue,"onUpdate:value":et=>T.defaultValue=et,placeholder:Be(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),T.type==="multi-select"||T.type==="single-select"?(_l(),Kl(kt,{key:0,"title-placement":"left",class:"!my-4"},{default:ze(()=>[ka(fl(Be(a)("options")),1)]),_:1})):ps("",!0),Ae(Ze,{name:"slide-fade",appear:""},{default:ze(()=>[T.type==="multi-select"||T.type==="single-select"?(_l(),Io("div",_v,[Ae(Ve,{value:T.options,"onUpdate:value":et=>T.options=et,placeholder:Be(a)("addOption"),"on-create":et=>Y?Y(et,it):null,"show-sort-button":"",class:"w-full"},{"create-button-default":ze(()=>[ka(fl(Be(a)("addOption")),1)]),default:ze(({value:et})=>[El("div",vv,[Ae(Me,{value:et.value,placeholder:Be(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Jt=>et.value=Be(le)(Jt)},null,8,["value","placeholder","onUpdate:value"]),Ae(ke,{modelValue:et.label,"onUpdate:modelValue":Jt=>et.label=Jt,placeholder:Be(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):ps("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(_l(),Kl(Xe,{key:1,bordered:"",type:"info"},{default:ze(()=>[ka(fl(Be(a)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Ae(oe,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),bv=Cn(hv,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:kv}=await me("vue"),{unref:pt,renderList:Zi,Fragment:ms,openBlock:Ja,createElementBlock:fs,resolveComponent:_h,createBlock:_s,createCommentVNode:ec,withCtx:bl,createVNode:vl,createElementVNode:vs,toDisplayString:eo,createTextVNode:ys,withModifiers:Gr,normalizeClass:tc,isRef:Zs}=await me("vue"),wv={class:"flex items-center"},xv={class:"text-base"},$v={class:"mt-2"},{ref:Za}=await me("vue"),Cv=kv({__name:"index",setup(u){const{t:e}=we(),{tr:n,pickByTheme:l,isInDevMode:o}=tt(),{data:a}=ui(),{mutate:t,isPending:c}=xp(),{mutate:fe,isPending:le}=td(),de=Za(12),z=Za(1),ae=A=>{de.value=A},B={name:"",title:"",content:"",slug:""},$=Za(!1),d=Za(null),F=Za(B),Z={title:[{required:!0,message:e("fillRequired")}]},s=Za(null),re=A=>{s.value=ie.cloneDeep(A),F.value=ie.cloneDeep(A||B),$.value=!0},N=async()=>(d.value?.validate(async A=>{if(!A){const _={title:F.value.title};s.value?fe({slug:s.value.slug,..._},{onSuccess:()=>{}}):t({name:ie.startCase(ie.camelCase(n(F.value.title))).replace(/\s+/g,""),..._},{onSuccess:()=>{}}),$.value=!1}}),!1),W=Za(null),k=Za(!1),U=A=>{W.value=A,k.value=!0},O=async A=>{fe({slug:W.value?.slug,dataStructure:A},{onSuccess:_=>{U(_)}})},G=Za(null),j=Za(!1),ee=A=>{G.value=A,j.value=!0},v=async A=>{fe({slug:G.value?.slug,settingsStructure:A},{onSuccess:_=>{ee(_)}})};return(A,_)=>{const y=Ce,K=pe,E=He,Y=Ml,X=ja,M=Ra,x=uo,b=co,P=Cl,_e=Po,C=Ta,w=_a,i=da,h=ca,oe=Hl;return Ja(),fs(ms,null,[pt(a)&&pt(a).length?(Ja(),fs(ms,{key:0},[(Ja(!0),fs(ms,null,Zi(pt(a).slice((pt(z)-1)*pt(de),pt(z)*pt(de)),L=>(Ja(),_s(P,{key:L.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:bl(()=>[vl(b,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":bl(({collapsed:ne})=>[vl(K,null,{default:bl(()=>[ne?(Ja(),_s(y,{key:0,icon:"fa-solid:chevron-left"})):(Ja(),_s(y,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:bl(()=>_[6]||(_[6]=[vs("span",null,null,-1)])),default:bl(()=>[vl(x,{name:"1"},{header:bl(()=>[vs("div",wv,[vl(Y,null,{default:bl(()=>[pt(o)?(Ja(),fs(ms,{key:0},[vl(E,{size:"small",type:"primary",secondary:"",onClick:Gr(ne=>U(L),["stop"])},{default:bl(()=>[vl(K,{class:"mr-1"},{default:bl(()=>[vl(y,{icon:"carbon:data-1"})]),_:1}),ys(" "+eo(pt(e)("dataStructure")),1)]),_:2},1032,["onClick"]),vl(E,{size:"small",type:"info",secondary:"",title:pt(e)("sectionSettings"),onClick:Gr(ne=>ee(L),["stop"])},{default:bl(()=>[vl(K,{class:"mr-1"},{default:bl(()=>[vl(y,{icon:"carbon:settings-edit"})]),_:1}),ys(" "+eo(pt(e)("settings")),1)]),_:2},1032,["title","onClick"])],64)):ec("",!0),vl(E,{size:"small",type:"primary",secondary:"",title:pt(e)("edit"),onClick:Gr(ne=>re(L),["stop"])},{default:bl(()=>[vl(K,null,{default:bl(()=>[vl(y,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024),vl(X,{vertical:"",class:tc(pt(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),vs("span",xv,eo(pt(n)(L.title)),1)])]),default:bl(()=>[vs("div",null,eo(pt(e)("sectionUsedXTimesOnPages",[L.pagesCount])),1),vs("section",$v,[(Ja(!0),fs(ms,null,Zi(pt(vd)(L.pages||[],"id"),ne=>(Ja(),_s(M,{key:ne.id,size:"small",class:"mr-1",type:"success"},{default:bl(()=>[ys(eo(pt(n)(ne.title)),1)]),_:2},1024))),128))]),ec("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),vl(_e,{page:pt(z),"onUpdate:page":_[0]||(_[0]=L=>Zs(z)?z.value=L:null),class:"mt-5 justify-end","show-size-picker":"","page-size":pt(de),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(pt(a).length/pt(de)),"onUpdate:pageSize":ae},{prefix:bl(()=>[ys(eo(`${pt(a).length} ${pt(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Ja(),_s(P,{key:1,size:"large",class:tc(`mb-2 !border-dashed !border-2 ${pt(l)("!border-zinc-300","!border-zinc-600")}`)},{default:bl(()=>[vl(C,{description:pt(e)("noSectionAvailable")},{icon:bl(()=>[vl(K,null,{default:bl(()=>[vl(y,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),vl(oe,{show:pt($),"onUpdate:show":_[2]||(_[2]=L=>Zs($)?$.value=L:null),loading:pt(c)||pt(le),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:pt(s)?pt(e)("editSection"):pt(e)("addSection"),"positive-text":pt(e)("validate"),"negative-text":pt(e)("cancel"),onPositiveClick:N,onNegativeClick:_[3]||(_[3]=L=>$.value=!1)},{default:bl(()=>[vl(h,{ref_key:"formRef",ref:d,model:pt(F),rules:Z,"show-require-mark":!1,size:"medium"},{default:bl(()=>[vl(i,{"show-label":!1,path:"title",class:"mt-5"},{default:bl(()=>[vl(w,{modelValue:pt(F).title,"onUpdate:modelValue":_[1]||(_[1]=L=>pt(F).title=L),placeholder:pt(e)("title"),class:"w-full",sync:""},{label:bl(()=>[ys(eo(pt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),vl(ld,{show:pt(k),"onUpdate:show":_[4]||(_[4]=L=>Zs(k)?k.value=L:null),title:pt(n)(pt(W)?.title),"raw-data-structure":pt(W)?.dataStructure,"update-data-structure":O},null,8,["show","title","raw-data-structure"]),vl(bv,{show:pt(j),"onUpdate:show":_[5]||(_[5]=L=>Zs(j)?j.value=L:null),title:pt(n)(pt(G)?.title),"settings-structure":pt(G)?.settingsStructure,"update-settings-structure":v},null,8,["show","title","settings-structure"])],64)}}}),ad=(u,e)=>zo(["newsletter-emails"],async()=>{const{request:n}=Le(),l=await n({url:"/newsletter/emails"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),nd=(u,e)=>zo(["newsletter-phones"],async()=>{const{request:n}=Le(),l=await n({url:"/newsletter/phones"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Iv=(u,e)=>zo(["newsletter-campaigns"],async()=>{const{request:n}=Le(),l=await n({url:"/newsletter/campaigns"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u});class Vv{id;email;createdAt;updatedAt;constructor(e,n,l,o){this.email=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const Sv=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-emails"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/newsletter/emails",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ev=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-emails"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/newsletter/emails/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Uv=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["newsletter-emails"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/emails/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Mv=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["newsletter-emails"],operation:"batch",getItemId:a=>{if(a instanceof Vv){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterEmail ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/emails/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Tv=()=>{const{request:u}=Le();return Ua(async e=>{const n=await u({method:"post",url:"/newsletter/emails",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Nv}=await me("vue"),{unref:rt,createVNode:Pt,withCtx:Lt,toDisplayString:Nn,createTextVNode:to,resolveComponent:vh,createElementVNode:lc,openBlock:Hr,createBlock:ac,createCommentVNode:Dv,isRef:nc,Fragment:zv,createElementBlock:Av}=await me("vue"),Pv={class:"flex items-center justify-center"},{ref:en,h:ra,computed:Lv,onBeforeUnmount:Bv}=await me("vue"),Fv=Nv({__name:"Email",setup(u){const e=We(),n=Oe(),l=ea(),{data:o,refetch:a,isPending:t}=ad(),{mutate:c,isPending:fe}=Mv(),{mutate:le}=Uv(),{mutate:de,isPending:z}=Sv(),{mutate:ae,isPending:B}=Ev(),{mutateAsync:$}=Tv(),{t:d,locale:F}=we(),Z=en(""),s=en(),re={pageSize:12,prefix:({itemCount:i})=>ra("div",{class:"font-bold"},{default:()=>`${d("total")}: ${i}`})},N=[{type:"selection"},{title:d("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(i){return ra("div",{},{default:()=>i.email})}},{title:d("updateAt"),key:"updatedAt",width:125,render(i){return ra("div",{},{default:()=>$n(i.updatedAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(i){return ra("div",{},{default:()=>$n(i.createdAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ra(il,{ref:s,placeholder:d("search"),value:Z.value,onInput:i=>{Z.value=i}},{suffix:()=>ra(pe,{},{default:()=>ra(Ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(i){return ra("div",{class:"flex justify-end items-center w-full"},[ra(He,{size:"small",type:"warning",secondary:!0,onClick:()=>{v(i)},renderIcon:()=>ra(pe,null,{default:()=>ra(Ce,{icon:"carbon:edit"})})}),ra("div",{class:"w-2"}),ra(He,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeleteEmailAddress"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{i.id&&le({id:i.id})}})},renderIcon:()=>ra(pe,null,{default:()=>ra(Ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],W=Lv(()=>{if(!Z.value)return o.value;const i=o.value?.filter(h=>h.email.toLowerCase().includes(Z.value.toLowerCase()));return s.value&&s.value.focus(),i}),k=en(!1),U=en(!1),O=en(null),G=en(null),j=en({email:""}),ee={email:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(i,h){return h&&!To.isEmail(h)?new Error(d("invalidEmail")):!0}}]},v=i=>{O.value=ie.cloneDeep(i),i?j.value=ie.cloneDeep(i):j.value={email:""},U.value=!0},A=async()=>(G.value?.validate(async i=>{if(!i){const h={email:j.value.email};O.value?O.value.email!==j.value.email&&(o.value||[]).findIndex(oe=>oe.email==j.value.email)>-1?n.error(d("sameEmailAddressMessage")):ae({id:O.value.id,...h}):(o.value||[]).findIndex(oe=>oe.email==j.value.email)>-1?n.error(d("sameEmailAddressMessage")):de(h),U.value=!1}}),!1);let _=null;const y=()=>{_&&(_.destroy(),_=null)};Bv(y);const K=(i,h)=>h.map(oe=>i.map(L=>oe[L])),E=()=>{_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),Do(()=>import("./export2excel-C7pSMF4U.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(i=>{var h=["no","email","createdAt","updatedAt"];const oe=ie.sortBy(o.value?.map((ne,Me)=>({no:Me+1,...ne})),"email"),L=K(h,oe);try{i.export_json_to_excel({header:h,data:L,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),y()}catch{y(),n.error(d("anErrorOccurred"))}})},Y=()=>{_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),Do(()=>import("./export2excel-C7pSMF4U.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(i=>{var h=["email"];const oe=K(h,[{email:"adresse@email.com"}]);try{i.export_json_to_excel({header:h,data:oe,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),y()}catch{y(),n.error(d("anErrorOccurred"))}})},X=en(!1),M=async({results:i})=>{k.value=!0,e.start(),_||(_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let h=0;h<i.length;h++)i[h].email&&o.value?.findIndex(oe=>oe.email==i[h].email)==-1&&(_&&(_.content=`${d("pleaseBePatient")}: ${h} ${d("task_s")} / ${i.length}`),await $({email:i[h].email}));await a(),y(),e.finish(),k.value=!1,X.value=!1},x=en(Gl()),b=en([]),P=i=>i.id,_e=i=>{b.value=i},C=()=>{b.value=[],x.value=Gl()},w=async()=>(b.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[b.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{c(b.value,{onSuccess:()=>{C()}})}}):n.warning(d("noItemSelected")),!1);return(i,h)=>{const oe=Rc,L=Ml,ne=Oa,Me=Cl,ke=qa,ye=ur,kt=ir,ut=da,xe=ca,qe=Hl,Ve=Qc;return Hr(),Av(zv,null,[Pt(ne,{to:"#alt-action"},{default:Lt(()=>[Pt(L,null,{default:Lt(()=>[Pt(oe,{onPositiveClick:h[0]||(h[0]=Ze=>E())},{trigger:Lt(()=>[Pt(rt(He),{type:"success",secondary:""},{icon:Lt(()=>[Pt(rt(pe),{size:"18"},{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:upload"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("export")),1)]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("exportDataInExcelFile")),1)]),_:1}),Pt(rt(He),{type:"info",secondary:"",onClick:h[1]||(h[1]=Ze=>X.value=!0)},{icon:Lt(()=>[Pt(rt(pe),{size:"18"},{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:download"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("import")),1)]),_:1}),Pt(rt(He),{type:"primary",secondary:"",onClick:h[2]||(h[2]=Ze=>v(null))},{icon:Lt(()=>[Pt(rt(pe),{size:"18"},{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:add-alt"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),Pt(ke,{name:"slide-fade",appear:""},{default:Lt(()=>[rt(b).length?(Hr(),ac(Me,{key:0,class:"my-2",size:"small",embedded:""},{default:Lt(()=>[Pt(L,{align:"center",justify:"space-between"},{default:Lt(()=>[lc("span",null,Nn(rt(d)("nbItemsSelected",[rt(b).length])),1),Pt(L,{align:"center",justify:"space-between"},{default:Lt(()=>[Pt(rt(He),{type:"error",size:"small",secondary:"",onClick:w},{icon:Lt(()=>[Pt(rt(pe),null,{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("delete")),1)]),_:1}),Pt(rt(He),{type:"warning",size:"small",secondary:"",onClick:C},{icon:Lt(()=>[Pt(rt(pe),null,{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:close"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Dv("",!0)]),_:1}),Pt(kt,null,{default:Lt(()=>[(Hr(),ac(ye,{key:rt(x),columns:N,data:rt(W),pagination:re,loading:rt(t)||rt(fe),"single-line":!1,"scroll-x":800,"row-key":P,size:"small",striped:"","onUpdate:checkedRowKeys":_e},null,8,["data","loading","row-key"]))]),_:1}),Pt(qe,{show:rt(U),"onUpdate:show":h[4]||(h[4]=Ze=>nc(U)?U.value=Ze:null),loading:rt(z)||rt(B),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:rt(O)?rt(d)("editEmailAddress"):rt(d)("addEmailAddress"),"positive-text":rt(d)("validate"),"negative-text":rt(d)("cancel"),onPositiveClick:A,onNegativeClick:h[5]||(h[5]=Ze=>U.value=!1)},{default:Lt(()=>[Pt(xe,{ref_key:"formRef",ref:G,class:"mt-5",model:rt(j),rules:ee,"show-require-mark":!1,size:"medium"},{default:Lt(()=>[Pt(ut,{label:rt(d)("emailAddress"),path:"email"},{default:Lt(()=>[Pt(rt(il),{value:rt(j).email,"onUpdate:value":h[3]||(h[3]=Ze=>rt(j).email=Ze),placeholder:rt(d)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Pt(qe,{show:rt(X),"onUpdate:show":h[7]||(h[7]=Ze=>nc(X)?X.value=Ze:null),loading:rt(k),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:rt(d)("import")},{default:Lt(()=>[Pt(Ve,{class:"my-5","on-success":M}),lc("div",Pv,[Pt(rt(He),{type:"info",size:"small",secondary:"",onClick:h[6]||(h[6]=Ze=>Y())},{icon:Lt(()=>[Pt(rt(pe),null,{default:Lt(()=>[Pt(rt(Ce),{icon:"carbon:download"})]),_:1})]),default:Lt(()=>[to(" "+Nn(rt(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class Ov{id;phone;createdAt;updatedAt;constructor(e,n,l,o){this.phone=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const qv=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-phones"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/newsletter/phones",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Rv=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-phones"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/newsletter/phones/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},jv=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["newsletter-phones"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/phones/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Kv=u=>{const{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return mt({queryKey:["newsletter-phones"],operation:"batch",getItemId:a=>{if(a instanceof Ov){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterPhone ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/phones/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Yv=()=>{const{request:u}=Le();return Ua(async e=>{const n=await u({method:"post",url:"/newsletter/phones",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Gv}=await me("vue"),{unref:dt,createVNode:Bt,withCtx:Ft,toDisplayString:Dn,createTextVNode:lo,resolveComponent:yh,createElementVNode:oc,openBlock:Wr,createBlock:sc,createCommentVNode:Hv,isRef:rc,Fragment:Wv,createElementBlock:Qv}=await me("vue"),Xv={class:"flex items-center justify-center"},{ref:tn,h:ia,computed:Jv,onBeforeUnmount:Zv}=await me("vue"),ey=Gv({__name:"Phone",setup(u){const e=We(),n=Oe(),l=ea(),{data:o,refetch:a,isPending:t}=nd(),{mutate:c,isPending:fe}=Kv(),{mutate:le}=jv(),{mutate:de,isPending:z}=qv(),{mutate:ae,isPending:B}=Rv(),{mutateAsync:$}=Yv(),{t:d,locale:F}=we(),Z=tn(""),s=tn(),re={pageSize:12,prefix:({itemCount:i})=>ia("div",{class:"font-bold"},{default:()=>`${d("total")}: ${i}`})},N=[{type:"selection"},{title:d("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(i){return ia("div",{},{default:()=>i.phone})}},{title:d("updateAt"),key:"updatedAt",width:125,render(i){return ia("div",{},{default:()=>$n(i.updatedAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(i){return ia("div",{},{default:()=>$n(i.createdAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ia(il,{ref:s,placeholder:d("search"),value:Z.value,onInput:i=>{Z.value=i}},{suffix:()=>ia(pe,{},{default:()=>ia(Ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(i){return ia("div",{class:"flex justify-end items-center w-full"},[ia(He,{size:"small",type:"warning",secondary:!0,onClick:()=>{v(i)},renderIcon:()=>ia(pe,null,{default:()=>ia(Ce,{icon:"carbon:edit"})})}),ia("div",{class:"w-2"}),ia(He,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeletePhoneNumber"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{i.id&&le({id:i.id})}})},renderIcon:()=>ia(pe,null,{default:()=>ia(Ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],W=Jv(()=>{if(!Z.value)return o.value;const i=o.value?.filter(h=>h.phone.toLowerCase().includes(Z.value.toLowerCase()));return s.value&&s.value.focus(),i}),k=tn(!1),U=tn(!1),O=tn(null),G=tn(null),j=tn({phone:""}),ee={phone:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(i,h){return h&&!Pd(h)?new Error(d("invalidNumber")):!0}}]},v=i=>{O.value=ie.cloneDeep(i),i?j.value=ie.cloneDeep(i):j.value={phone:""},U.value=!0},A=async()=>(G.value?.validate(async i=>{if(!i){const h={phone:j.value.phone.replace(/\s+/g,"")};O.value?O.value.phone!==j.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(oe=>oe.phone==j.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):ae({id:O.value.id,...h}):(o.value||[]).findIndex(oe=>oe.phone==j.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):de(h),U.value=!1}}),!1);let _=null;const y=()=>{_&&(_.destroy(),_=null)};Zv(y);const K=(i,h)=>h.map(oe=>i.map(L=>oe[L])),E=()=>{_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),Do(()=>import("./export2excel-C7pSMF4U.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(i=>{var h=["no","phone","createdAt","updatedAt"];const oe=ie.sortBy(o.value?.map((ne,Me)=>({no:Me+1,...ne})),"phone"),L=K(h,oe);try{i.export_json_to_excel({header:h,data:L,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),y()}catch{y(),n.error(d("anErrorOccurred"))}})},Y=()=>{_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),Do(()=>import("./export2excel-C7pSMF4U.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(i=>{var h=["phone"];const oe=K(h,[{phone:"+XXX XXX XXXXX"}]);try{i.export_json_to_excel({header:h,data:oe,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),y()}catch{y(),n.error(d("anErrorOccurred"))}})},X=tn(!1),M=async({results:i})=>{k.value=!0,e.start(),_||(_=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let h=0;h<i.length;h++)i[h].phone&&o.value?.findIndex(oe=>oe.phone.replace(/\s+/g,"")==i[h].phone.replace(/\s+/g,""))==-1&&(_&&(_.content=`${d("pleaseBePatient")}: ${h} ${d("task_s")} / ${i.length}`),await $({phone:i[h].phone.replace(/\s+/g,"")}));await a(),y(),e.finish(),k.value=!1,X.value=!1},x=tn(Gl()),b=tn([]),P=i=>i.id,_e=i=>{b.value=i},C=()=>{b.value=[],x.value=Gl()},w=async()=>(b.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[b.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{c(b.value,{onSuccess:()=>{C()}})}}):n.warning(d("noItemSelected")),!1);return(i,h)=>{const oe=Rc,L=Ml,ne=Oa,Me=Cl,ke=qa,ye=ur,kt=ir,ut=Ad,xe=da,qe=ca,Ve=Hl,Ze=Qc;return Wr(),Qv(Wv,null,[Bt(ne,{to:"#alt-action"},{default:Ft(()=>[Bt(L,null,{default:Ft(()=>[Bt(oe,{onPositiveClick:h[0]||(h[0]=q=>E())},{trigger:Ft(()=>[Bt(dt(He),{type:"success",secondary:""},{icon:Ft(()=>[Bt(dt(pe),{size:"18"},{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:upload"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("export")),1)]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("exportDataInExcelFile")),1)]),_:1}),Bt(dt(He),{type:"info",secondary:"",onClick:h[1]||(h[1]=q=>X.value=!0)},{icon:Ft(()=>[Bt(dt(pe),{size:"18"},{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:download"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("import")),1)]),_:1}),Bt(dt(He),{type:"primary",secondary:"",onClick:h[2]||(h[2]=q=>v(null))},{icon:Ft(()=>[Bt(dt(pe),{size:"18"},{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:add-alt"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Bt(ke,{name:"slide-fade",appear:""},{default:Ft(()=>[dt(b).length?(Wr(),sc(Me,{key:0,class:"my-2",size:"small",embedded:""},{default:Ft(()=>[Bt(L,{align:"center",justify:"space-between"},{default:Ft(()=>[oc("span",null,Dn(dt(d)("nbItemsSelected",[dt(b).length])),1),Bt(L,{align:"center",justify:"space-between"},{default:Ft(()=>[Bt(dt(He),{type:"error",size:"small",secondary:"",onClick:w},{icon:Ft(()=>[Bt(dt(pe),null,{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("delete")),1)]),_:1}),Bt(dt(He),{type:"warning",size:"small",secondary:"",onClick:C},{icon:Ft(()=>[Bt(dt(pe),null,{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:close"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Hv("",!0)]),_:1}),Bt(kt,null,{default:Ft(()=>[(Wr(),sc(ye,{key:dt(x),columns:N,data:dt(W),pagination:re,loading:dt(t)||dt(fe),"single-line":!1,"scroll-x":800,"row-key":P,size:"small",striped:"","onUpdate:checkedRowKeys":_e},null,8,["data","loading","row-key"]))]),_:1}),Bt(Ve,{show:dt(U),"onUpdate:show":h[4]||(h[4]=q=>rc(U)?U.value=q:null),loading:dt(z)||dt(B),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:dt(O)?dt(d)("editPhoneNumber"):dt(d)("addPhoneNumber"),"positive-text":dt(d)("validate"),"negative-text":dt(d)("cancel"),onPositiveClick:A,onNegativeClick:h[5]||(h[5]=q=>U.value=!1)},{default:Ft(()=>[Bt(qe,{ref_key:"formRef",ref:G,class:"mt-5",model:dt(j),rules:ee,"show-require-mark":!1,size:"medium"},{default:Ft(()=>[Bt(xe,{label:dt(d)("phone"),path:"phone"},{default:Ft(()=>[Bt(ut,{modelValue:dt(j).phone,"onUpdate:modelValue":h[3]||(h[3]=q=>dt(j).phone=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Bt(Ve,{show:dt(X),"onUpdate:show":h[7]||(h[7]=q=>rc(X)?X.value=q:null),loading:dt(k),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:dt(d)("import")},{default:Ft(()=>[Bt(Ze,{class:"my-5","on-success":M}),oc("div",Xv,[Bt(dt(He),{type:"info",size:"small",secondary:"",onClick:h[6]||(h[6]=q=>Y())},{icon:Ft(()=>[Bt(dt(pe),null,{default:Ft(()=>[Bt(dt(Ce),{icon:"carbon:download"})]),_:1})]),default:Ft(()=>[lo(" "+Dn(dt(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),ty="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:ic,mergeModels:ly,defineComponent:ay}=await me("vue"),{unref:Tt,toDisplayString:Vo,createElementVNode:gs,createTextVNode:er,resolveComponent:gh,withCtx:Xt,createVNode:xl,renderList:Qr,Fragment:hs,openBlock:Ba,createElementBlock:bs,createBlock:So,createCommentVNode:cc,normalizeStyle:Xr,normalizeClass:ny}=await me("vue"),oy={class:"text-base"},sy={class:"text-base"},{ref:ao,inject:ry,computed:iy,watch:cy,reactive:tr}=await me("vue"),dy=ay({__name:"DataForm",props:ly({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,n=ic(u,"show"),l=ic(u,"data"),o=We(),a=Oe(),{t}=we(),{tr:c,pickByTheme:fe,editKeysToCamelCase:le}=tt(),de=ao(null),z=ao(!1),ae=ry("currentEditItem"),B=iy(()=>ie.isEqual(l.value,ae?.value)&&ie.isEqual(d.value,Z.value)),$=()=>{n.value=!1,z.value=!1},d=ao({}),F=ao(Gl()),Z=ao({}),s=ao(),re=ao();cy(()=>n.value,W=>{W&&(ci(l.value.contentModelData)?d.value=tr(l.value.contentModelData):d.value=tr({}),ie.forIn(le(e.contentModel?.dataStructure??{}),(k,U)=>{(!d.value[U]||Array.isArray(d.value[U])&&d.value[U].length==0)&&(U==="index"?d.value[U]=tr({}):d.value[U]=tr([]))}),Z.value=ie.cloneDeep(d.value),F.value=Gl())},{immediate:!0});const N=async()=>{z.value=!0,o.start();const W=s.value&&await s.value(),k=re.value&&await re.value();(!s.value||W)&&(!re.value||k)?await e.submitData(d.value):a.error(t("mandatoryFieldsNotFilledIn")),o.finish(),z.value=!1};return(W,k)=>{const U=yi,O=dr,G=cr,j=Ce,ee=pe,v=He,A=Ml,_=Cl,y=Ma,K=nn,E=va,Y=di;return Ba(),So(Y,{modelValue:n.value,"onUpdate:modelValue":k[3]||(k[3]=X=>n.value=X),"close-on-esc":!1,closable:!1,onOnSizeChange:k[4]||(k[4]=X=>{de.value=X})},{header:Xt(()=>[gs("div",oy,[xl(U,{depth:"1"},{default:Xt(()=>[er(Vo(Tt(c)(e.contentModel?.title))+" ",1),gs("span",null," Â -Â "+Vo(Tt(ae)?Tt(t)("editItem"):Tt(t)("addItem")),1)]),_:1})])]),"header-extra":Xt(()=>[xl(A,{align:"center"},{default:Xt(()=>[gs("span",sy,Vo(Tt(t)("status"))+":",1),xl(G,{value:l.value.isActive,"onUpdate:value":k[0]||(k[0]=X=>l.value.isActive=X),name:"isActive",class:"w-full"},{default:Xt(()=>[xl(O,{value:!1,label:Tt(t)("hidden"),class:"w-[50%]"},null,8,["label"]),xl(O,{value:!0,label:Tt(t)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),k[5]||(k[5]=gs("div",{class:"w-4"},null,-1)),xl(v,{secondary:"",type:"success",title:Tt(t)("save"),loading:Tt(z),disabled:Tt(B),onClick:k[1]||(k[1]=X=>N())},{icon:Xt(()=>[xl(ee,null,{default:Xt(()=>[xl(j,{icon:"carbon:save"})]),_:1})]),default:Xt(()=>[er(" "+Vo(Tt(t)("save")),1)]),_:1},8,["title","loading","disabled"]),xl(v,{secondary:"",type:"error",title:Tt(t)("close"),disabled:Tt(z),onClick:k[2]||(k[2]=X=>$())},{icon:Xt(()=>[xl(ee,null,{default:Xt(()=>[xl(j,{icon:"carbon:close"})]),_:1})]),default:Xt(()=>[er(" "+Vo(Tt(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1,__:[5]})]),default:Xt(()=>[gs("section",{style:Xr(`min-height: ${Tt(de)?.windowHeight-Tt(de)?.headerHeight-5}px`),class:ny(`w-full h-full ${Tt(fe)("bg-slate-200","bg-zinc-800")}`)},[xl(E,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Xt(()=>[xl(K,{class:"ml-4 mt-2"},{default:Xt(()=>[xl(y,{style:Xr(`height: ${Tt(de)?.windowHeight-Tt(de)?.headerHeight-50}px`)},{default:Xt(()=>[(Ba(!0),bs(hs,null,Qr(Tt(le)(W.contentModel?.dataStructure),(X,M)=>(Ba(),bs(hs,{key:M},[String(M)==="index"?(Ba(),So(_,{key:0,size:"small",class:"mb-2"},{default:Xt(()=>[(Ba(),So(Es,{key:`${Tt(F)}-${M}-form-1`,modelValue:Tt(d)[M],"onUpdate:modelValue":x=>Tt(d)[M]=x,items:X,onUpdate:(x,b)=>{s.value=b}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):cc("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),xl(K,{class:"mr-4 mt-2"},{default:Xt(()=>[xl(y,{style:Xr(`height: ${Tt(de)?.windowHeight-Tt(de)?.headerHeight-50}px`)},{default:Xt(()=>[(Ba(!0),bs(hs,null,Qr(Tt(le)(W.contentModel?.dataStructure),(X,M)=>(Ba(),bs(hs,{key:M},[String(M)!=="index"?(Ba(),So(_,{key:0,title:Tt(c)(X.title),size:"small",class:"mb-2"},{"header-extra":Xt(()=>[xl(v,{quaternary:"",size:"small",onClick:()=>Tt(d)[M].push({})},{icon:Xt(()=>[xl(ee,null,{default:Xt(()=>[xl(j,{icon:"carbon:add-alt"})]),_:1})]),default:Xt(()=>[er(" "+Vo(Tt(t)("add")),1)]),_:2},1032,["onClick"])]),default:Xt(()=>[(Ba(!0),bs(hs,null,Qr(Tt(d)[M],(x,b)=>(Ba(),So(_,{key:b,title:String(b+1),size:"small",class:"mb-2"},{"header-extra":Xt(()=>[xl(v,{secondary:"",type:"error",size:"small",onClick:()=>Tt(d)[M].splice(b,1)},{icon:Xt(()=>[xl(ee,null,{default:Xt(()=>[xl(j,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:Xt(()=>[(Ba(),So(Es,{key:`${Tt(F)}-${M}-${b}-form-2`,modelValue:Tt(d)[M][b],"onUpdate:modelValue":P=>Tt(d)[M][b]=P,items:X.items,onUpdate:(P,_e)=>{re.value=_e}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):cc("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:uy,mergeModels:py,defineComponent:my}=await me("vue"),{unref:Ot,resolveComponent:hh,createVNode:Pl,toDisplayString:lr,createTextVNode:dc,withCtx:Yl,renderList:fy,Fragment:uc,openBlock:ks,createElementBlock:pc,createElementVNode:ar,createBlock:Jr,normalizeClass:_y,isRef:vy}=await me("vue"),{inject:yy,ref:ws,h:mc,computed:fc}=await me("vue"),gy={class:"flex items-center justify-between"},hy={class:"flex flex-col"},by={class:"text-sm font-bold"},ky={class:"text-xs font-normal"},wy=my({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:py(["update"],["update:show"]),setup(u,{emit:e}){const{t:n}=we(),{pickByTheme:l,tr:o,mergeArrays:a}=tt(),{extractItemTitle:t}=Us(),{data:c}=Bn(),{mutate:fe,isPending:le}=Jc(),de=ea(),z=e,ae=uy(u,"show"),B=yy("currentEditItem"),$=async A=>{de.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{fe({id:B?.value?.id,relatedItems:B?.value?.relatedItems?.filter(_=>_.id!==A.id)?.map(_=>_.id)},{onSuccess:()=>{z("update",B?.value?.id)}})}})},d=A=>c.value?.find(_=>_.id===A.contentModelId),F=ws(!1),Z=ws(null),s=ws({contentModelId:null,itemId:null}),re={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},N=async()=>(Z.value?.validate(async A=>{if(!A){const _=B?.value?.relatedItems?.map(y=>y.id)||[];fe({id:B?.value?.id,relatedItems:[..._,s.value.itemId]},{onSuccess:()=>{z("update",B?.value?.id),F.value=!1}})}}),!1),W=A=>mc("span",{},{default:()=>o(A.title)}),k=A=>fc(()=>mc("span",{},{default:()=>t(A,d(A))})),U=ws([]),O=ws([]),{mutateAsync:G,isPending:j}=hi(),ee=async(A,_)=>{if(!A.length){O.value=[];return}O.value=await G({query:A,contentModelId:_})},v=fc(()=>a(U.value,O.value,"id").filter(A=>A.id!==B?.value?.id));return(A,_)=>{const y=Ce,K=He,E=Ml,Y=pe,X=Cl,M=Ma,x=Ta,b=io,P=Hl,_e=Na,C=da,w=ca;return ks(),pc(uc,null,[Pl(P,{show:ae.value,"onUpdate:show":_[2]||(_[2]=i=>ae.value=i),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Ot(n)("linkContentModelItems")},{"header-extra":Yl(()=>[Pl(E,{align:"center"},{default:Yl(()=>[Pl(K,{secondary:"",size:"small",type:"primary",disabled:Ot(le),onClick:_[0]||(_[0]=i=>F.value=!0)},{default:Yl(()=>[Pl(y,{icon:"carbon:add-alt",class:"mr-1"}),dc(" "+lr(Ot(n)("add")),1)]),_:1},8,["disabled"]),Pl(K,{secondary:"",size:"small",type:"error",disabled:Ot(le),onClick:_[1]||(_[1]=i=>ae.value=!1)},{default:Yl(()=>[Pl(y,{icon:"carbon:close",class:"mr-1"}),dc(" "+lr(Ot(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Yl(()=>[Pl(b,{show:Ot(le)},{default:Yl(()=>[Ot(B)?.relatedItems?.length?(ks(),Jr(M,{key:0,style:{"max-height":"400px"}},{default:Yl(()=>[(ks(!0),pc(uc,null,fy(Ot(B)?.relatedItems,i=>(ks(),Jr(X,{key:i.id,embedded:"",size:"small",class:"mb-2"},{default:Yl(()=>[ar("div",gy,[ar("div",hy,[ar("span",by,lr(Ot(t)(i,d(i))),1),ar("span",ky,lr(Ot(o)(d(i)?.title)),1)]),Pl(E,null,{default:Yl(()=>[Pl(K,{size:"small",type:"error",secondary:"",onClick:h=>$(i)},{default:Yl(()=>[Pl(Y,null,{default:Yl(()=>[Pl(y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ks(),Jr(X,{key:1,size:"large",class:_y(`mb-2 !border-dashed !border-2 ${Ot(l)("!border-zinc-300","!border-zinc-600")}`)},{default:Yl(()=>[Pl(x,{description:Ot(n)("noLinkAdded")},{icon:Yl(()=>[Pl(Y,null,{default:Yl(()=>[Pl(y,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Pl(P,{show:Ot(F),"onUpdate:show":_[6]||(_[6]=i=>vy(F)?F.value=i:null),loading:Ot(le),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ot(n)("addLink"),"positive-text":Ot(n)("validate"),"negative-text":Ot(n)("cancel"),onPositiveClick:N,onNegativeClick:_[7]||(_[7]=i=>F.value=!1)},{default:Yl(()=>[Pl(w,{ref_key:"formRef",ref:Z,model:Ot(s),rules:re,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Yl(()=>[Pl(C,{label:Ot(n)("contentModel"),path:"contentModelId"},{default:Yl(()=>[Pl(_e,{value:Ot(s).contentModelId,"onUpdate:value":_[3]||(_[3]=i=>Ot(s).contentModelId=i),options:Ot(c),placeholder:Ot(n)("contentModel"),"render-label":W,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Pl(C,{label:Ot(n)("itemToLink"),path:"itemId"},{default:Yl(()=>[Pl(_e,{value:Ot(s).itemId,"onUpdate:value":_[4]||(_[4]=i=>Ot(s).itemId=i),options:Ot(v)||[],placeholder:Ot(n)("itemToLink"),"render-label":i=>k(i).value,loading:Ot(j),disabled:!Ot(s).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:_[5]||(_[5]=i=>ee(i,Ot(s).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:xy}=await me("vue"),{useModel:$y,defineComponent:Cy}=await me("vue"),{unref:Ut,toDisplayString:yn,createTextVNode:zn,resolveComponent:bh,isRef:xs,withCtx:Nt,createVNode:Mt,createElementVNode:$s,openBlock:An,createElementBlock:Cs,createCommentVNode:_c,renderList:Iy,Fragment:vc,createBlock:Zr}=await me("vue"),Vy={key:0,class:"w-full flex items-center justify-between gap-4"},Sy={class:"flex items-center gap-3"},Ey={key:0},Uy={class:"flex items-center justify-center h-full"},My=["src"],Ty={class:"text-center text-dimgray text-sm"},Ny={key:1,class:"flex items-center justify-center"},{ref:Fa,computed:yc,watch:Dy,provide:zy}=await me("vue"),Ay=Cy({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=we(),{extractItemTitle:n}=Us(),{tr:l}=tt(),o=ea(),a=Oe(),t=$y(u,"modelValue"),c=Fa(!1),fe=Fa(!1),le=Fa([]),{mutate:de}=Gu(),{mutate:z}=Yu(),{mutate:ae}=Jc(),{mutate:B}=Hu(),$=Fa(0),d=Fa(12),F=Fa(1),Z=yc(()=>({contentModelId:t.value?.id,pageSize:d.value,page:F.value})),s=M=>{F.value=M,W()},re=M=>{d.value=M,W()},{data:N,refetch:W,isPending:k}=yd(Z);Dy(()=>N.value,M=>{le.value=M?.items||[],$.value=M?.meta?.total||0,F.value=M?.meta?.currentPage||1},{deep:!0,immediate:!0});const U=Fa(null),O=Fa({title:"",contentModelData:"",isActive:!0}),G=M=>{U.value=ie.cloneDeep(M),M?O.value=ie.cloneDeep(M):O.value={title:"",contentModelData:"",isActive:!0},c.value=!0},j=M=>{U.value=ie.cloneDeep(M),fe.value=!0},ee=async M=>{await W();const x=le.value.find(b=>b.id===M);x&&j(x)},v=async M=>{o.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{M.id&&de({id:M.id})}})},A=async M=>{const x={title:O.value.title,contentModelData:M,isActive:O.value.isActive,contentModelId:t.value?.id};U.value?ae({id:U.value.id,...x}):z(x),c.value=!1},_=Fa(!1),y=Fa(Gl()),K=Fa({}),E=yc(()=>{let M=0;for(const x in K.value)K.value[x]&&M++;return M});function Y(){K.value={},W()}const X=async()=>(E.value?o.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[E.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{B(K.value,{onSuccess:()=>{K.value={}}})}}):a.warning(e("noItemSelected")),!1);return zy("currentEditItem",U),(M,x)=>{const b=On,P=Ce,_e=pe,C=He,w=Ml,i=Oa,h=Fc,oe=fr,L=Ra,ne=Cl,Me=qa,ke=nn,ye=va,kt=Po,ut=io,xe=Ta;return An(),Cs(vc,null,[Mt(i,{to:"#alt-action"},{default:Nt(()=>[Mt(w,{align:"center"},{default:Nt(()=>[Mt(b,{checked:Ut(_),"onUpdate:checked":[x[0]||(x[0]=qe=>xs(_)?_.value=qe:null),x[1]||(x[1]=qe=>{for(const Ve of Ut(le))Ve.id&&(Ut(K)[Ve.id]=qe);y.value=("uuidv4"in M?M.uuidv4:xy(Gl))()})],disabled:!Ut(le).length},{default:Nt(()=>[zn(yn(Ut(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Mt(C,{type:"primary",secondary:"",onClick:x[2]||(x[2]=qe=>G(null))},{icon:Nt(()=>[Mt(_e,{size:"18"},{default:Nt(()=>[Mt(P,{icon:"carbon:add-alt"})]),_:1})]),default:Nt(()=>[zn(" "+yn(Ut(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Mt(h,{class:"mt-2 mb-5",onBack:x[3]||(x[3]=qe=>t.value=null)},{title:Nt(()=>[zn(yn(Ut(l)(t.value?.title)),1)]),back:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Nt(()=>[Ut(E)>0?(An(),Cs("section",Vy,[$s("span",null,yn(Ut(e)("nbItemsSelected",[Ut(E)])),1),$s("section",Sy,[Mt(C,{type:"error",secondary:"",size:"small",onClick:X},{icon:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[zn(" "+yn(Ut(e)("delete")),1)]),_:1}),Mt(C,{type:"warning",secondary:"",size:"small",onClick:Y},{icon:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"carbon:close-filled"})]),_:1})]),default:Nt(()=>[zn(" "+yn(Ut(e)("cancelSelection")),1)]),_:1})])])):_c("",!0)]),_:1}),Ut(le).length&&!Ut(k)?(An(),Cs("section",Ey,[Mt(ye,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Nt(()=>[(An(!0),Cs(vc,null,Iy(Ut(le),(qe,Ve)=>(An(),Zr(ke,{key:Ve},{default:Nt(()=>[Mt(Me,{name:"slide-fade",appear:""},{default:Nt(()=>[Mt(ne,{size:"small",bordered:"",hoverable:""},{cover:Nt(()=>[$s("div",Uy,[$s("img",{src:t.value?.imageUrl??Ut(ty),class:"w-full h-[200px] object-cover"},null,8,My)])]),header:Nt(()=>[$s("div",Ty,[Mt(oe,{"line-clamp":1,"expand-trigger":"click"},{default:Nt(()=>[qe.id?(An(),Zr(b,{key:Ut(y),checked:Ut(K)[qe.id],"onUpdate:checked":Ze=>Ut(K)[qe.id]=Ze,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_c("",!0),zn(" "+yn(Ut(n)(qe,t.value)),1)]),_:2},1024)])]),action:Nt(()=>[Mt(w,{justify:"space-between",align:"center"},{default:Nt(()=>[Mt(L,{bordered:!1,type:qe.isActive?"success":"error"},{default:Nt(()=>[zn(yn(qe.isActive?Ut(e)("visible"):Ut(e)("hidden")),1)]),_:2},1032,["type"]),Mt(w,null,{default:Nt(()=>[Mt(C,{ternary:"",circle:"",title:Ut(e)("edit"),onClick:Ze=>G(qe)},{icon:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),Mt(C,{ternary:"",circle:"",title:Ut(e)("links"),onClick:Ze=>j(qe)},{icon:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),Mt(C,{ternary:"",circle:"",title:Ut(e)("delete"),onClick:Ze=>v(qe)},{icon:Nt(()=>[Mt(_e,null,{default:Nt(()=>[Mt(P,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),Mt(kt,{page:Ut(F),"onUpdate:page":[x[4]||(x[4]=qe=>xs(F)?F.value=qe:null),s],class:"mt-10 justify-center","show-size-picker":"","page-size":Ut(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(Ut($)/Ut(d)),"onUpdate:pageSize":re},{prefix:Nt(()=>[zn(yn(`${Ut($)} ${Ut(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):Ut(k)?(An(),Cs("section",Ny,[Mt(ut,{size:"medium"})])):(An(),Zr(xe,{key:2,description:Ut(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Mt(dy,{show:Ut(c),"onUpdate:show":x[5]||(x[5]=qe=>xs(c)?c.value=qe:null),data:Ut(O),"onUpdate:data":x[6]||(x[6]=qe=>xs(O)?O.value=qe:null),"content-model":t.value,"submit-data":A},null,8,["show","data","content-model"]),Mt(wy,{show:Ut(fe),"onUpdate:show":x[7]||(x[7]=qe=>xs(fe)?fe.value=qe:null),onUpdate:ee},null,8,["show"])],64)}}}),Py=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["content-models"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/content-models",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ly=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["content-models"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/content-models/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},By=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["content-models"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-models/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:Fy}=await me("vue"),{unref:Ee,resolveComponent:kh,createVNode:vt,withCtx:yt,toDisplayString:ln,createTextVNode:gn,openBlock:wa,createBlock:hn,createCommentVNode:Eo,renderList:Oy,Fragment:ei,createElementBlock:nr,withModifiers:or,normalizeClass:gc,createElementVNode:sr,isRef:rr,normalizeStyle:qy}=await me("vue"),Ry={key:2},jy={class:"flex items-center"},Ky={class:"text-base"},Yy={class:"mt-4"},{inject:Gy,ref:an,watch:Hy}=await me("vue"),{defineStore:Wy}=await me("pinia"),Qy="previews",Xy=Fy({__name:"index",setup(u){const{t:e}=we(),{tr:n,pickByTheme:l,fileUrl:o,isInDevMode:a,formatKey:t}=tt(),{data:c}=Bn(),{mutate:fe,isPending:le}=By(),{mutate:de,isPending:z}=Py(),{mutate:ae,isPending:B}=Ly(),$=ea(),d=Gy("appConfig"),F=an(12),Z=an(1),s=M=>{F.value=M},re={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},N=an(!1),W=an(null),k=an(re),U={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},O=an(null),G=M=>{O.value=ie.cloneDeep(M),k.value=ie.cloneDeep(M||re),N.value=!0},j=async()=>(W.value?.validate(async M=>{if(!M){const x={id:O.value?.id||0,name:k.value.name,title:k.value.title,image:k.value.image,description:k.value.description,titleFieldName:k.value.titleFieldName,hasPermalink:k.value.hasPermalink};O.value?ae(x,{onSuccess:()=>{}}):de(x,{onSuccess:()=>{}}),N.value=!1}}),!1),ee=async M=>{$.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{fe({id:M.id||0})}})},v=an(null),A=an(!1),_=M=>{v.value=M,A.value=!0},y=async M=>{ae({id:v.value?.id||0,hasPermalink:v.value?.hasPermalink,dataStructure:M},{onSuccess:x=>{_(x)}})},K=an(!1),E=async M=>{k.value.image=M,K.value=!1},Y=()=>{k.value.image=""},X=Wy("content-models-management",()=>({itemsContentModel:an(null)}))();return Hy(()=>k.value.title,M=>{O.value||k.value.name.length<=21&&(k.value.name=Hc(n(M),{trim:!0,lower:!0,strict:!0}))}),(M,x)=>{const b=Ce,P=pe,_e=He,C=Oa,w=Ml,i=ja,h=Cl,oe=Po,L=Ta,ne=qa,Me=_a,ke=da,ye=il,kt=nn,ut=jc,xe=Fn,qe=va,Ve=On,Ze=ca,q=Hl,I=ro;return wa(),nr(ei,null,[Ee(X).itemsContentModel?Eo("",!0):(wa(),hn(C,{key:0,to:"#alt-action"},{default:yt(()=>[Ee(c)&&Ee(c).length?(wa(),hn(_e,{key:0,type:"primary",secondary:"",onClick:x[0]||(x[0]=g=>G(null))},{icon:yt(()=>[vt(P,{size:"18"},{default:yt(()=>[vt(b,{icon:"carbon:add-alt"})]),_:1})]),default:yt(()=>[gn(" "+ln(Ee(e)("addContentModel")),1)]),_:1})):Eo("",!0)]),_:1})),Ee(X).itemsContentModel?(wa(),hn(Ay,{key:1,modelValue:Ee(X).itemsContentModel,"onUpdate:modelValue":x[1]||(x[1]=g=>Ee(X).itemsContentModel=g)},null,8,["modelValue"])):(wa(),nr("section",Ry,[vt(ne,{appear:"",name:"slide-fade"},{default:yt(()=>[sr("section",null,[Ee(c)&&Ee(c).length?(wa(),nr(ei,{key:0},[(wa(!0),nr(ei,null,Oy(Ee(c).slice((Ee(Z)-1)*Ee(F),Ee(Z)*Ee(F)),g=>(wa(),hn(h,{key:g.id,embedded:"",size:"small",class:"mb-2"},{header:yt(()=>[sr("div",jy,[Ee(a)?(wa(),hn(w,{key:0},{default:yt(()=>[vt(_e,{size:"small",type:"primary",secondary:"",onClick:or(Xe=>_(g),["stop"])},{default:yt(()=>[vt(P,{class:"mr-1"},{default:yt(()=>[vt(b,{icon:"carbon:data-1"})]),_:1}),gn(" "+ln(Ee(e)("dataStructure")),1)]),_:2},1032,["onClick"]),vt(_e,{size:"small",type:"primary",secondary:"",onClick:or(Xe=>G(g),["stop"])},{default:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),vt(_e,{size:"small",type:"error",secondary:"",onClick:or(Xe=>ee(g),["stop"])},{default:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):Eo("",!0),Ee(a)?(wa(),hn(i,{key:1,vertical:"",class:gc(Ee(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):Eo("",!0),sr("span",Ky,ln(Ee(n)(g.title)),1)])]),"header-extra":yt(()=>[vt(_e,{size:"small",type:"primary",secondary:"",onClick:or(Xe=>Ee(X).itemsContentModel=g,["stop"])},{icon:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:arrow-right"})]),_:1})]),default:yt(()=>[gn(" "+ln(Ee(e)("open")),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),vt(oe,{page:Ee(Z),"onUpdate:page":x[2]||(x[2]=g=>rr(Z)?Z.value=g:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Ee(F),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(Ee(c).length/Ee(F)),"onUpdate:pageSize":s},{prefix:yt(()=>[gn(ln(`${Ee(c).length} ${Ee(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(wa(),hn(h,{key:1,size:"large",class:gc(`mb-2 !border-dashed !border-2 ${Ee(l)("!border-zinc-300","!border-zinc-600")}`)},{default:yt(()=>[vt(L,{description:Ee(e)("noContentModelAvailable")},{icon:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:model-alt"})]),_:1})]),extra:yt(()=>[sr("div",Yy,[vt(_e,{size:"small",secondary:"",onClick:x[3]||(x[3]=g=>G(null))},{icon:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:add-alt"})]),_:1})]),default:yt(()=>[gn(" "+ln(Ee(e)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),vt(q,{show:Ee(N),"onUpdate:show":x[11]||(x[11]=g=>rr(N)?N.value=g:null),loading:Ee(z)||Ee(B)||Ee(le),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ee(O)?Ee(e)("editContentModel"):Ee(e)("addContentModel"),"positive-text":Ee(e)("validate"),"negative-text":Ee(e)("cancel"),onPositiveClick:j,onNegativeClick:x[12]||(x[12]=g=>N.value=!1)},{default:yt(()=>[vt(Ze,{ref_key:"formRef",ref:W,model:Ee(k),rules:U,"show-require-mark":!1,size:"medium",class:"my-5"},{default:yt(()=>[vt(ke,{"show-label":!1,path:"title"},{default:yt(()=>[vt(Me,{modelValue:Ee(k).title,"onUpdate:modelValue":x[4]||(x[4]=g=>Ee(k).title=g),placeholder:Ee(e)("title"),class:"w-full",sync:""},{label:yt(()=>[gn(ln(Ee(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),vt(ke,{"show-label":!1,path:"description"},{default:yt(()=>[vt(Me,{modelValue:Ee(k).description,"onUpdate:modelValue":x[5]||(x[5]=g=>Ee(k).description=g),placeholder:Ee(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:yt(()=>[gn(ln(Ee(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),vt(qe,{"x-gap":"12",span:24},{default:yt(()=>[vt(kt,{span:14},{default:yt(()=>[vt(ke,{label:Ee(e)("contentModelKey"),path:"name"},{default:yt(()=>[vt(ye,{value:Ee(k).name,placeholder:Ee(e)("contentModelKey"),class:"w-full","onUpdate:value":x[6]||(x[6]=g=>Ee(k).name=Ee(t)(g))},null,8,["value","placeholder"])]),_:1},8,["label"]),vt(ke,{label:Ee(e)("titleSingletonKey"),path:"titleFieldName"},{default:yt(()=>[vt(ye,{value:Ee(k).titleFieldName,placeholder:Ee(e)("titleSingletonKey"),class:"w-full","onUpdate:value":x[7]||(x[7]=g=>Ee(k).titleFieldName=Ee(t)(g))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),vt(xe,{span:10,label:Ee(e)("itemsPreview"),path:"image"},{default:yt(()=>[vt(w,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:yt(()=>[vt(ut,{class:"cursor-pointer","object-fit":"cover",style:qy("border: 1px dashed "+Ee(l)("green","white")),size:150,src:Ee(o)(Ee(k).image||""),onClick:x[8]||(x[8]=g=>K.value=!0)},{default:yt(()=>[Ee(k).image?Eo("",!0):(wa(),hn(P,{key:0,size:64},{default:yt(()=>[vt(b,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),Ee(k).image?(wa(),hn(_e,{key:0,quaternary:"",onClick:x[9]||(x[9]=g=>Y())},{icon:yt(()=>[vt(P,null,{default:yt(()=>[vt(b,{icon:"carbon:trash-can"})]),_:1})]),default:yt(()=>[gn(" "+ln(Ee(e)("clear")),1)]),_:1})):Eo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),vt(ke,{"show-label":!1,path:"hasPermalink"},{default:yt(()=>[vt(Ve,{checked:Ee(k).hasPermalink,"onUpdate:checked":x[10]||(x[10]=g=>Ee(k).hasPermalink=g)},{default:yt(()=>[gn(ln(Ee(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),vt(I,{show:Ee(K),"onUpdate:show":x[13]||(x[13]=g=>rr(K)?K.value=g:null),title:Ee(e)("selectImage"),"upload-config":{folder:Qy,limit:0,maxSize:0,baseUrl:Ee(d)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:E},null,8,["show","title","upload-config"]),vt(ld,{show:Ee(A),"onUpdate:show":x[14]||(x[14]=g=>rr(A)?A.value=g:null),title:Ee(n)(Ee(v)?.title),"raw-data-structure":Ee(v)?.dataStructure,"update-data-structure":y},null,8,["show","title","raw-data-structure"])]))],64)}}});var wn=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(wn||{});const Jy=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["permalinks"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:"/permalinks",data:t});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},{defineComponent:Zy}=await me("vue"),{unref:Qe,resolveComponent:wh,createVNode:gt,withCtx:bt,toDisplayString:Ol,createTextVNode:eg,openBlock:Pn,createBlock:Uo,createCommentVNode:tg,createElementVNode:Ll,renderList:lg,Fragment:hc,createElementBlock:bc}=await me("vue"),ag={class:"text-base font-bold"},ng={class:"text-sm"},og={class:"text-xs text-slate-400"},sg={class:"text-xs text-slate-400"},rg={class:"text-xs text-slate-400"},ig={class:"text-sm"},cg={class:"text-xs text-slate-400"},dg={class:"text-xs text-slate-400"},ug={class:"text-xs text-slate-400"},pg={class:"text-sm"},mg={class:"text-xs text-slate-400"},fg={class:"text-xs text-slate-400"},_g={class:"text-xs text-slate-400"},vg={class:"text-base font-bold"},yg={class:"text-sm"},gg={class:"text-xs text-slate-400"},hg={class:"text-xs text-slate-400"},bg={class:"text-xs text-slate-400"},{ref:kc,computed:wc,h:kg}=await me("vue"),wg=Zy({__name:"index",setup(u){const{t:e}=we(),{tr:n}=tt(),{data:l}=pi(),{data:o,refetch:a}=Bn({enabled:!1}),{data:t,refetch:c}=gd({enabled:!1}),{mutate:fe,isPending:le}=Jy(),de=[{pathPrefix:"/news/article",contentType:wn.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:wn.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:wn.NEWS_TAG,contentParam:"slug",pageId:null}],z=kc(de),ae=kc(),B=wc(()=>o.value?.filter(re=>re.hasPermalink)),$=async(re=!1)=>{re&&await a(),await c(),z.value=ie.cloneDeep(de);for(let N=0;N<(B.value?.length||0);N++)z.value.push({pathPrefix:`/${B.value?.[N].slug}`,contentType:wn.CONTENT_MODEL,contentParam:"id",contentId:B.value?.[N].id,pageId:null});for(let N=0;N<z.value.length;N++)switch(z.value[N].contentType){case wn.NEWS_ARTICLE:case wn.NEWS_CATEGORY:case wn.NEWS_TAG:{const W=t.value?.find(k=>k.contentType===z.value[N].contentType);W&&(z.value[N].pathPrefix=W.pathPrefix,z.value[N].contentParam=W.contentParam,z.value[N].pageId=W.pageId,z.value[N].permalinkId=W.id)}break;case wn.CONTENT_MODEL:{const W=t.value?.find(k=>k.contentType===z.value[N].contentType&&k.contentId===z.value[N].contentId);W&&(z.value[N].pathPrefix=W.pathPrefix,z.value[N].contentParam=W.contentParam,z.value[N].pageId=W.pageId,z.value[N].permalinkId=W.id)}break}ae.value=ie.cloneDeep(z.value)};$(!0);const d=async()=>{fe(z.value,{onSuccess:()=>{$()}})},F=wc(()=>ie.isEqual(z.value,ae.value)),Z=re=>kg("span",{},{default:()=>n(re.title)}),s=re=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(re);return(re,N)=>{const W=Ce,k=pe,U=He,O=Oa,G=il,j=nn,ee=Na,v=va,A=Cl,_=uo,y=co,K=ja;return Pn(),bc(hc,null,[gt(O,{to:"#alt-action"},{default:bt(()=>[gt(U,{secondary:"",type:"primary",loading:Qe(le),disabled:Qe(F),onClick:N[0]||(N[0]=E=>d())},{icon:bt(()=>[gt(k,null,{default:bt(()=>[gt(W,{icon:"carbon:save"})]),_:1})]),default:bt(()=>[eg(" "+Ol(Qe(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),gt(A,{embedded:"",size:"small"},{default:bt(()=>[gt(y,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":bt(({collapsed:E})=>[gt(k,null,{default:bt(()=>[E?(Pn(),Uo(W,{key:0,icon:"fa-solid:chevron-left"})):(Pn(),Uo(W,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:bt(()=>N[10]||(N[10]=[Ll("span",null,null,-1)])),default:bt(()=>[gt(_,{name:"1"},{header:bt(()=>[Ll("span",ag,Ol(Qe(e)("news")),1)]),default:bt(()=>[gt(A,{size:"small"},{header:bt(()=>[Ll("span",ng,Ol(Qe(e)("articles")),1)]),default:bt(()=>[gt(v,{cols:"24","x-gap":"12"},{default:bt(()=>[gt(j,{span:"10"},{default:bt(()=>[Ll("span",og,Ol(Qe(e)("pathPrefix")),1),gt(G,{value:Qe(z)[0].pathPrefix,"onUpdate:value":N[1]||(N[1]=E=>Qe(z)[0].pathPrefix=E),"allow-input":s,size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",sg,Ol(Qe(e)("contentParam")),1),gt(G,{value:Qe(z)[0].contentParam,"onUpdate:value":N[2]||(N[2]=E=>Qe(z)[0].contentParam=E),readonly:"",size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",rg,Ol(Qe(e)("contentPage")),1),gt(ee,{value:Qe(z)[0].pageId,"onUpdate:value":N[3]||(N[3]=E=>Qe(z)[0].pageId=E),options:Qe(l)||[],placeholder:Qe(e)("selectPage"),"render-label":Z,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),gt(A,{size:"small"},{header:bt(()=>[Ll("span",ig,Ol(Qe(e)("categories")),1)]),default:bt(()=>[gt(v,{cols:"24","x-gap":"12"},{default:bt(()=>[gt(j,{span:"10"},{default:bt(()=>[Ll("span",cg,Ol(Qe(e)("pathPrefix")),1),gt(G,{value:Qe(z)[1].pathPrefix,"onUpdate:value":N[4]||(N[4]=E=>Qe(z)[1].pathPrefix=E),"allow-input":s,size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",dg,Ol(Qe(e)("contentParam")),1),gt(G,{value:Qe(z)[1].contentParam,"onUpdate:value":N[5]||(N[5]=E=>Qe(z)[1].contentParam=E),readonly:"",size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",ug,Ol(Qe(e)("contentPage")),1),gt(ee,{value:Qe(z)[1].pageId,"onUpdate:value":N[6]||(N[6]=E=>Qe(z)[1].pageId=E),options:Qe(l)||[],placeholder:Qe(e)("selectPage"),"render-label":Z,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),gt(A,{size:"small"},{header:bt(()=>[Ll("span",pg,Ol(Qe(e)("tags")),1)]),default:bt(()=>[gt(v,{cols:"24","x-gap":"12"},{default:bt(()=>[gt(j,{span:"10"},{default:bt(()=>[Ll("span",mg,Ol(Qe(e)("pathPrefix")),1),gt(G,{value:Qe(z)[2].pathPrefix,"onUpdate:value":N[7]||(N[7]=E=>Qe(z)[2].pathPrefix=E),"allow-input":s,size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",fg,Ol(Qe(e)("contentParam")),1),gt(G,{value:Qe(z)[2].contentParam,"onUpdate:value":N[8]||(N[8]=E=>Qe(z)[2].contentParam=E),readonly:"",size:"small"},null,8,["value"])]),_:1}),gt(j,{span:"7"},{default:bt(()=>[Ll("span",_g,Ol(Qe(e)("contentPage")),1),gt(ee,{value:Qe(z)[2].pageId,"onUpdate:value":N[9]||(N[9]=E=>Qe(z)[2].pageId=E),options:Qe(l)||[],placeholder:Qe(e)("selectPage"),"render-label":Z,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),gt(K,{class:"!my-2"}),Qe(B)?.length&&Qe(z).length>3?(Pn(),Uo(A,{key:0,embedded:"",size:"small"},{default:bt(()=>[gt(y,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":bt(({collapsed:E})=>[gt(k,null,{default:bt(()=>[E?(Pn(),Uo(W,{key:0,icon:"fa-solid:chevron-left"})):(Pn(),Uo(W,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:bt(()=>N[11]||(N[11]=[Ll("span",null,null,-1)])),default:bt(()=>[gt(_,{name:"1"},{header:bt(()=>[Ll("span",vg,Ol(Qe(e)("contentModels")),1)]),default:bt(()=>[(Pn(!0),bc(hc,null,lg(Qe(B),(E,Y)=>(Pn(),Uo(A,{key:E.id,size:"small"},{header:bt(()=>[Ll("span",yg,Ol(Qe(n)(E.title)),1)]),default:bt(()=>[gt(v,{cols:"24","x-gap":"12"},{default:bt(()=>[gt(j,{span:"10"},{default:bt(()=>[Ll("span",gg,Ol(Qe(e)("pathPrefix")),1),gt(G,{value:Qe(z)[Y+3].pathPrefix,"onUpdate:value":X=>Qe(z)[Y+3].pathPrefix=X,"allow-input":s,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),gt(j,{span:"7"},{default:bt(()=>[Ll("span",hg,Ol(Qe(e)("contentParam")),1),gt(G,{value:Qe(z)[Y+3].contentParam,"onUpdate:value":X=>Qe(z)[Y+3].contentParam=X,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),gt(j,{span:"7"},{default:bt(()=>[Ll("span",bg,Ol(Qe(e)("contentPage")),1),gt(ee,{value:Qe(z)[Y+3].pageId,"onUpdate:value":X=>Qe(z)[Y+3].pageId=X,options:Qe(l)||[],placeholder:Qe(e)("selectPage"),"render-label":Z,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):tg("",!0)],64)}}}),xg=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"post",url:"/newsletter/campaigns",data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},$g=u=>{const{displayFormErrors:e}=tt(),{request:n}=Le(),{t:l}=we(),o=Oe(),a=We();return mt({queryKey:["newsletter-campaigns"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const c=await n({method:"put",url:`/newsletter/campaigns/${t.id}`,data:ll(t,["id"])});if(a.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===At.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Cg=u=>{const{request:e}=Le(),{t:n}=we(),l=Oe(),o=We();return mt({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/campaigns/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Ig=()=>{const{displayFormErrors:u}=tt(),{request:e}=Le(),{t:n}=we(),l=We(),o=Oe();return Ua(async a=>{const t=await e({url:"/sms",method:"post",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{t.onSuccess?t.onSuccess(a):o.success(n("success"))},onError:(a,t)=>{if(t.onError)t.onError(a);else switch(a?.response?.data?.errorCode){case At.FORM_INVALID_DATA:u(a?.response?.data?.data);break;default:o.error(n("sendingFailed"))}},retry:2})},{unref:xc}=await me("vue"),{defineComponent:Vg}=await me("vue"),{unref:Ne,createVNode:yl,withCtx:Ul,toDisplayString:Is,createTextVNode:Vs,resolveComponent:xh,createElementVNode:ti,isRef:$c,renderList:Sg,Fragment:Cc,openBlock:Ss,createElementBlock:Ic,createBlock:li}=await me("vue"),Eg={class:"w-full"},{ref:no,h:rl,computed:Vc}=await me("vue"),Ug=Vg({__name:"Campaign",setup(u){const e=Oe(),n=ea(),{getSettingValue:l}=hd(),{ckEditorToolbarItems:o}=tt(),{t:a,locale:t}=we(),{data:c}=ad(),{data:fe}=nd(),{data:le,isPending:de}=Iv(),{mutate:z,isPending:ae}=xg(),{mutate:B}=Cg(),{mutate:$,isPending:d}=$g(),{mutate:F}=Ld(),{mutate:Z}=Ig(),s=no(""),re=no(),N={pageSize:12,prefix:({itemCount:E})=>rl("div",{class:"font-bold"},{default:()=>`${a("total")}: ${E}`})},W=[{title:a("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(E){return rl("div",{},{default:()=>E.title})}},{title:a("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(E){return rl("small",{},{default:()=>E.subject})}},{title:a("numberOfRecipients"),key:"recipients",width:200,render(E){return rl("div",{},{default:()=>E.recipients.length})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:150,render(E){return rl("div",{},{default:()=>$n(E.updatedAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:150,render(E){return rl("div",{},{default:()=>$n(E.createdAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>rl(il,{ref:re,placeholder:a("search"),value:s.value,onInput:E=>{s.value=E}},{suffix:()=>rl(pe,{},{default:()=>rl(Ce,{icon:"carbon:search"})})}),key:"actions",width:175,render(E){return rl("div",{class:"flex justify-end items-center w-full"},[rl(He,{size:"small",type:"primary",secondary:!0,title:a("history"),onClick:()=>{j.value=E,G.value=!0},renderIcon:()=>rl(pe,null,{default:()=>rl(Ce,{icon:"mdi:history"})})}),rl("div",{class:"w-2"}),rl(He,{size:"small",type:"info",secondary:!0,title:a("launchCampaign"),onClick:()=>{const Y=n.info({title:a("launchCampaign"),content:a("confirmLaunchCampaign",[E.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:a("yes"),negativeText:a("cancel"),onPositiveClick:async()=>{Y.loading=!0,F({data:{title:E.title,subject:E.subject,content:E.content,recipients:E.recipients.filter(X=>To.isEmail(X)),tags:[]},onSuccess:X=>{const M=l("phone","string")?.split(",")[0];Z({data:{from:M.replace(/\s+/g,""),content:E.rawContent,recipients:E.recipients.filter(x=>!To.isEmail(x))},onSuccess:x=>{const b=E.history||[];b.push({id:Gl(),date:bd(new Date,{locale:t.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+X.message+" Phone: "+x.message}),$({id:E.id,history:b}),Y.loading=!1},onError:()=>{Y.loading=!1}})},onError:()=>{Y.loading=!1}})}})},renderIcon:()=>rl(pe,null,{default:()=>rl(Ce,{icon:"mdi:send"})})}),rl("div",{class:"w-2"}),rl(He,{size:"small",type:"warning",secondary:!0,title:a("edit"),onClick:()=>{_(E)},renderIcon:()=>rl(pe,null,{default:()=>rl(Ce,{icon:"carbon:edit"})})}),rl("div",{class:"w-2"}),rl(He,{size:"small",type:"error",secondary:!0,title:a("delete"),onClick:()=>{n.warning({title:a("confirm"),content:a("confirmDeleteCampaign"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{E.id&&B({id:E.id})}})},renderIcon:()=>rl(pe,null,{default:()=>rl(Ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],k=Vc(()=>{if(!s.value)return le.value;const E=le.value?.filter(Y=>Y.title.toLowerCase().includes(s.value.toLowerCase())||Y.subject.toLowerCase().includes(s.value.toLowerCase()));return re.value&&re.value.focus(),E}),U=Vc(()=>[...(c.value||[]).map(E=>({recipient:E.email,type:"email"})),...(fe.value||[]).map(E=>({recipient:E.phone,type:"phone"}))]),O=no(!1),G=no(!1),j=no(null),ee=no(null),v=no({title:"",subject:"",content:"",rawContent:"",recipients:[]}),A={title:[{required:!0,message:a("fillRequired")}],subject:[{required:!0,message:a("fillRequired")}],content:[{required:!0,message:a("fillRequired")}],rawContent:[{required:!0,message:a("fillRequired")}],recipients:[{required:!0,message:a("fillRequired")}]},_=E=>{j.value=ie.cloneDeep(E),E?v.value=ie.cloneDeep(E):v.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},O.value=!0},y=async()=>(ee.value?.validate(async E=>{if(!E){const Y={title:v.value.title,subject:v.value.subject,content:v.value.content,rawContent:v.value.rawContent,recipients:v.value.recipients};j.value?j.value.title!==v.value.title&&(le.value||[]).findIndex(X=>X.title==v.value.title)>-1?e.error(a("sameCampaignTitleMessage")):$({id:j.value.id,...Y}):(le.value||[]).findIndex(X=>X.title==v.value.title)>-1?e.error(a("sameCampaignTitleMessage")):z(Y),O.value=!1}}),!1),K=(E,Y)=>ie.isEqual(E.slice().sort(),Y.slice().sort());return(E,Y)=>{const X=Oa,M=ur,x=ir,b=da,P=Kc,_e=On,C=Na,w=ca,i=Hl,h=Vd,oe=qc,L=Oc,ne=Ma,Me=Ta;return Ss(),Ic(Cc,null,[yl(X,{to:"#alt-action"},{default:Ul(()=>[yl(Ne(He),{type:"primary",secondary:"",onClick:Y[0]||(Y[0]=ke=>_(null))},{icon:Ul(()=>[yl(Ne(pe),{size:"18"},{default:Ul(()=>[yl(Ne(Ce),{icon:"carbon:add-alt"})]),_:1})]),default:Ul(()=>[Vs(" "+Is(Ne(a)("addCampaign")),1)]),_:1})]),_:1}),yl(x,null,{default:Ul(()=>[yl(M,{columns:W,data:Ne(k),pagination:N,loading:Ne(de),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),yl(i,{show:Ne(O),"onUpdate:show":Y[9]||(Y[9]=ke=>$c(O)?O.value=ke:null),loading:Ne(ae)||Ne(d),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ne(j)?Ne(a)("editCampaign"):Ne(a)("addCampaign"),"positive-text":Ne(a)("validate"),"negative-text":Ne(a)("cancel"),onPositiveClick:y,onNegativeClick:Y[10]||(Y[10]=ke=>O.value=!1)},{default:Ul(()=>[yl(w,{ref_key:"formRef",ref:ee,class:"mt-5",model:Ne(v),rules:A,"show-require-mark":!1,size:"medium"},{default:Ul(()=>[yl(b,{label:Ne(a)("title"),path:"title"},{default:Ul(()=>[yl(Ne(il),{value:Ne(v).title,"onUpdate:value":Y[1]||(Y[1]=ke=>Ne(v).title=ke),placeholder:Ne(a)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),yl(b,{label:Ne(a)("subject"),path:"subject"},{default:Ul(()=>[yl(Ne(il),{value:Ne(v).subject,"onUpdate:value":Y[2]||(Y[2]=ke=>Ne(v).subject=ke),placeholder:Ne(a)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),yl(b,{label:Ne(a)("content"),path:"content"},{default:Ul(()=>[ti("div",Eg,[yl(P,{modelValue:Ne(v).content,"onUpdate:modelValue":Y[3]||(Y[3]=ke=>Ne(v).content=ke),"toolbar-items":Ne(o),placeholder:Ne(a)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),yl(b,{label:Ne(a)("rawContent"),path:"rawContent"},{default:Ul(()=>[yl(Ne(il),{value:Ne(v).rawContent,"onUpdate:value":Y[4]||(Y[4]=ke=>Ne(v).rawContent=ke),placeholder:Ne(a)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),yl(b,{label:Ne(a)("recipients"),path:"recipients"},{default:Ul(()=>[yl(C,{value:Ne(v).recipients,"onUpdate:value":Y[8]||(Y[8]=ke=>Ne(v).recipients=ke),options:Ne(U),placeholder:Ne(a)("recipients"),loading:Ne(de),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:Ul(()=>[yl(_e,{size:"large",class:"w-full","default-checked":Ne(U).length&&K(Ne(v).recipients,Ne(U).filter(ke=>ke.type=="email").map(ke=>ke.recipient)),"onUpdate:checked":Y[5]||(Y[5]=ke=>{ke?Ne(v).recipients=Ne(U).filter(ye=>ye.type=="email").map(ye=>ye.recipient):Ne(v).recipients=Ne(v).recipients.filter(ye=>!("_v"in E?E._v:xc(To)).isEmail(ye))})},{default:Ul(()=>[Vs(Is(Ne(a)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),Y[12]||(Y[12]=ti("div",{class:"h-2"},null,-1)),yl(_e,{size:"large",class:"w-full","default-checked":Ne(U).length&&K(Ne(v).recipients,Ne(U).filter(ke=>ke.type=="phone").map(ke=>ke.recipient)),"onUpdate:checked":Y[6]||(Y[6]=ke=>{ke?Ne(v).recipients=Ne(U).filter(ye=>ye.type=="phone").map(ye=>ye.recipient):Ne(v).recipients=Ne(v).recipients.filter(ye=>("_v"in E?E._v:xc(To)).isEmail(ye))})},{default:Ul(()=>[Vs(Is(Ne(a)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),Y[13]||(Y[13]=ti("div",{class:"h-2"},null,-1)),yl(_e,{size:"large",class:"w-full","default-checked":Ne(U).length&&Ne(v).recipients.length===Ne(U).length,"onUpdate:checked":Y[7]||(Y[7]=ke=>{ke?Ne(v).recipients=Ne(U).filter(ye=>ye.recipient).map(ye=>ye.recipient):Ne(v).recipients=[]})},{default:Ul(()=>[Vs(Is(Ne(a)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),yl(i,{show:Ne(G),"onUpdate:show":Y[11]||(Y[11]=ke=>$c(G)?G.value=ke:null),loading:Ne(d),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ne(a)("history")},{default:Ul(()=>[Ne(j)?.history?.length?(Ss(),li(ne,{key:0,style:{"max-height":"400px"}},{default:Ul(()=>[yl(L,{hoverable:""},{default:Ul(()=>[(Ss(!0),Ic(Cc,null,Sg(Ne(j)?.history.slice().reverse(),ke=>(Ss(),li(oe,{key:ke.id},{default:Ul(()=>[yl(h,{title:ke.date,"content-style":"margin-top: 10px;"},{default:Ul(()=>[Vs(Is(ke.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(Ss(),li(Me,{key:1,description:Ne(a)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),Mg=()=>{const{request:u}=Le(),{t:e}=we(),n=We(),l=Oe();return Ua(async o=>{const a=await u({url:"/app-information",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateAppInformation"))}})},{defineComponent:Tg}=await me("vue"),{unref:m,createVNode:R,withCtx:te,toDisplayString:Ht,createTextVNode:oo,resolveComponent:Ng,openBlock:qt,createBlock:bn,createCommentVNode:Jl,createElementBlock:$l,createElementVNode:It,isRef:ai,vShow:ni,withDirectives:oi,normalizeStyle:kn,Fragment:so,renderList:Sc,TransitionGroup:Dg,withKeys:zg}=await me("vue"),Ag={id:"header-btn"},Pg={key:1,id:"alt-action"},Lg={key:"basic-info"},Bg={class:"text-xs"},Fg={class:"text-xs"},Og={class:"text-xs"},qg={class:"text-xs"},Rg={class:"text-xs"},jg={class:"text-xs"},Kg={class:"text-xs"},Yg={class:"flex items-center gap-2 w-full"},Gg={key:"branding"},Hg={class:"text-sm"},Wg={class:"text-sm"},Qg={class:"flex flex-col items-center justify-center text-gray-400"},Xg={class:"text-sm"},Jg={class:"flex flex-col items-center justify-center text-gray-400"},Zg={class:"text-sm"},e1={class:"flex flex-col items-center justify-center text-gray-400"},t1={class:"text-sm"},l1={class:"flex flex-col items-center justify-center text-gray-400"},a1={class:"text-sm"},n1={class:"flex items-center justify-between"},o1={class:"font-bold"},s1={class:"flex items-center"},r1={class:"flex items-center justify-between"},i1={class:"font-bold"},c1={class:"flex items-center"},d1={class:"flex items-center justify-between"},u1={class:"font-bold"},p1={class:"flex items-center"},m1={key:"social-networks"},f1={class:"text-xs"},_1={key:"newsletter-email"},v1={key:"newsletter-phone"},y1={key:"newsletter-campaign"},g1={key:"ads"},h1={key:"videos"},b1={key:"content-models"},k1={key:"menus"},w1={key:"content-permalinks"},x1={key:"page-sections"},{defineComponent:$1,inject:C1,ref:xa,h:si,computed:ri,watch:ii,onMounted:Ec}=await me("vue"),{storeToRefs:I1,defineStore:V1}=await me("pinia"),S1=$1({name:Mc.CONTENT_MANAGEMENT.NAME}),E1=Tg({...S1,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=I=>e.includes(I),{t:l,locale:o}=we(),a=Fd(),t=ea(),{appPrimaryColor:c,pickByTheme:fe,fileUrl:le,isLgScreen:de,isMdScreen:z,isSmScreen:ae,isXlScreen:B,is2XlScreen:$,tr:d}=tt(),F=kd({enabled:!1}),{isLightTheme:Z,contentLayoutSize:s}=I1(Ao());ui();const{data:re,refetch:N}=pi(),{mutate:W,isPending:k}=Mg(),{mutate:U,isPending:O}=ed(),{mutate:G,isPending:j}=kp(),ee=C1("appConfig"),v=xa({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),A=xa(v.value),_=V1("content-management",()=>({currentMenuItemKey:xa("basic-info")}))(),y=(I,g)=>()=>si(pe,{},{default:()=>si(Ce,{icon:I})}),K=(I,g,Xe=!1)=>()=>si("span",{id:g,class:{"page-menu-item":Xe}},{default:()=>I}),E=ri(()=>{const I=[{label:K(l("basicInfo"),"basic-info"),key:"basic-info",icon:y("carbon:identification")},{label:K(l("branding"),"branding"),key:"branding",icon:y("carbon:color-palette")},{label:K(l("socialNetworks"),"social-networks"),key:"social-networks",icon:y("carbon:share")},{key:"divider",type:"divider"},{label:K(l("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:y("carbon:at")},{label:K(l("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:y("carbon:phone")},{label:K(l("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:y("carbon:bullhorn")},{key:"divider",type:"divider"},{label:K(l("ads"),"ads"),key:"ads",icon:y("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:K(l("videos"),"videos"),key:"videos",icon:y("carbon:video-player")},{key:"divider",type:"divider"},{label:K(l("menusManagement"),"menus"),key:"menus",icon:y("carbon:menu")},{label:K(l("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:y("carbon:link")},{key:"divider",type:"divider"},{label:K(l("contentModels"),"content-models"),key:"content-models",icon:y("carbon:model-alt")},{label:K(l("pageSections"),"page-sections"),key:"page-sections",icon:y("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const g of re.value||[])I.push({label:K(d(g.title).startsWith(l("page"))?d(g.title):`${l("page")} ${d(g.title)}`,`${g.slug}-page`,!0),key:`${g.slug}-page`,icon:y("carbon:document",`${g.slug}-page`)});return re.value&&re.value.length>0&&I.push({key:"divider",type:"divider"}),I.push({label:K(l("addPage"),"add-new-page"),key:"add-new-page",icon:y("carbon:add-alt")}),I}),Y=ri(()=>ie.isEqual(v.value,A.value)),X=ri(()=>s.value.height-165),M=xa(null),x={email:[{required:!1,message:l("fillRequired")},{trigger:["input"],validator(I,g){return g&&!To.isEmail(g)?new Error(l("invalidEmail")):!0}}]},b=xa();ii(()=>b.value,I=>{v.value.additionalInfo=JSON.stringify(I||"[]")},{deep:!0});const P=xa(null),_e={},C=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],w=xa("logos"),i=xa(!1),h=async I=>{switch(w.value){case"logos":v.value.logo=I;break;case"icons":v.value.icon=I;break;case"monochrome-logos":v.value.oneColorLogo=I;break;case"monochrome-icons":v.value.oneColorIcon=I;break}i.value=!1},oe={name:"",title:"",content:"",slug:""},L=xa(!1),ne=xa(null),Me=xa(oe),ke={title:[{required:!0,message:l("fillRequired")}]},ye=xa(null),kt=I=>{ye.value=ie.cloneDeep(I),Me.value=ie.cloneDeep(I||oe),L.value=!0},ut=async()=>(ne.value?.validate(async I=>{if(!I){const g={title:Me.value.title};ye.value?U({slug:ye.value.slug,...g},{onSuccess:Xe=>{_.currentMenuItemKey=`${Xe?.slug}-page`,L.value=!1}}):G({name:ie.startCase(ie.camelCase(d(Me.value.title))).replace(/\s+/g,""),...g},{onSuccess:Xe=>{_.currentMenuItemKey=`${Xe?.slug}-page`,L.value=!1}})}}),!1),xe=async()=>{await F.refetch(),F.data.value?.forEach(I=>{v.value[I.key]!=null&&(v.value[I.key]=I.value)}),A.value=ie.cloneDeep(v.value);try{b.value=JSON.parse(v.value.additionalInfo||"[]")}catch{b.value=[]}};xe(),Ec(()=>{setTimeout(()=>{a.params.key&&n(a.params.key)&&(_.currentMenuItemKey=a.params.key)},500)});const qe=()=>{W(v.value,{onSuccess:()=>xe()})},Ve=["basic-info","branding","social-networks"];ii(()=>_.currentMenuItemKey,(I,g)=>{I==="add-new-page"?(_.currentMenuItemKey=g,kt(null)):Ve.includes(g)&&!Ve.includes(I)&&(Y.value||t.warning({title:l("confirm"),content:l("marketInfoDiscardChangesConfirm"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{_.currentMenuItemKey=g}}))});const Ze=xa();ii(()=>[z.value,ae.value,de.value,B.value],([I,g,Xe,Se])=>{Ze.value=I||g||Xe||Se,setTimeout(()=>{Ze.value=void 0},500)},{immediate:!0});const q=Bd({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:l("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return Ec(()=>{setTimeout(()=>{const I=document.getElementById("sidebar");q.addStep({attachTo:{element:I,on:"left"},title:l("contentManagementGuideTitle1"),text:l("contentManagementGuideText1"),buttons:[{text:l("pass"),label:l("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.cancel()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]});const g=document.getElementsByClassName("page-menu-item");if(g&&g.length>0){const Se=[];for(let ft=0;ft<g.length;ft++)Se.push(g[ft]?.parentNode?.parentNode?.parentNode);q.addStep({attachTo:{element:Se[0],on:"left"},title:l("contentManagementGuideTitle2"),text:l("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.back()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]})}const Xe=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;q.addStep({attachTo:{element:Xe,on:"left"},title:l("contentManagementGuideTitle3"),text:l("contentManagementGuideText3"),buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.back()}},{text:l("ok"),label:l("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]})},1e3)}),(I,g)=>{const Xe=He,Se=Ml,ft=Ud,Ct=Ed,D=il,H=da,T=Fn,it=va,et=_a,Jt=mr,ce=ca,ve=Cl,je=jc,ge=nn,Pe=ja,Dt=Ng("color-picker"),Rt=Sd,al=od,zt=ro,Yt=Hl;return qt(),$l(so,null,[R(al,null,{"header-extra":te(()=>[R(Se,null,{default:te(()=>[It("div",Ag,[Ve.includes(m(_).currentMenuItemKey)?(qt(),bn(Xe,{key:0,loading:m(k)||m(F).isPending.value,disabled:m(Y),type:"primary",secondary:"",onClick:qe},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:save"})]),_:1})]),default:te(()=>[oo(" "+Ht(m(l)("save")),1)]),_:1},8,["loading","disabled"])):(qt(),$l("div",Pg))]),R(Xe,{dashed:"",type:"primary",title:m(l)("help"),onClick:g[0]||(g[0]=Te=>m(q).start())},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:te(()=>[R(Rt,{style:kn(`height: ${m(X)}px`)},{default:te(()=>[R(Rt,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:te(()=>[R(Ct,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:m(Ze),"default-collapsed":!m($),"collapsed-width":64,"native-scrollbar":!1,width:m($)?300:275},{default:te(()=>[R(ft,{value:m(_).currentMenuItemKey,"onUpdate:value":g[1]||(g[1]=Te=>m(_).currentMenuItemKey=Te),"collapsed-width":64,"collapsed-icon-size":22,options:m(E)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),R(Rt,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:te(()=>[R(Dg,{name:"slide-fade"},{default:te(()=>[oi(It("section",Lg,[R(ve,{hoverable:""},{default:te(()=>[R(ce,{ref_key:"basicInfoFormRef",ref:M,model:m(v),rules:x,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:te(()=>[R(H,{path:"name"},{label:te(()=>[It("b",Bg,Ht(m(l)("websiteName")),1)]),default:te(()=>[R(D,{value:m(v).name,"onUpdate:value":g[2]||(g[2]=Te=>m(v).name=Te),placeholder:m(l)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),R(it,{"x-gap":"12",span:24},{default:te(()=>[R(T,{span:12,path:"email"},{label:te(()=>[It("b",Fg,Ht(m(l)("email")),1)]),default:te(()=>[R(D,{value:m(v).email,"onUpdate:value":g[3]||(g[3]=Te=>m(v).email=Te),placeholder:m(l)("email"),class:"w-full"},{prefix:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),R(T,{span:12,path:"phone"},{label:te(()=>[It("b",Og,Ht(m(l)("phone")),1)]),default:te(()=>[R(D,{value:m(v).phone,"onUpdate:value":g[4]||(g[4]=Te=>m(v).phone=Te),placeholder:m(l)("phone"),class:"w-full"},{prefix:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),R(H,{path:"address"},{label:te(()=>[It("span",qg,[It("b",null,Ht(m(l)("address")),1)])]),default:te(()=>[R(D,{value:m(v).address,"onUpdate:value":g[5]||(g[5]=Te=>m(v).address=Te),placeholder:m(l)("address"),class:"w-full"},{prefix:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),R(it,{"x-gap":"12",span:24},{default:te(()=>[R(T,{span:12,path:"postalCode"},{label:te(()=>[It("b",Rg,Ht(m(l)("postalCode")),1)]),default:te(()=>[R(D,{value:m(v).postalCode,"onUpdate:value":g[6]||(g[6]=Te=>m(v).postalCode=Te),placeholder:m(l)("postalCode"),class:"w-full"},{prefix:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),R(H,{"show-label":!1,path:"description"},{default:te(()=>[R(et,{modelValue:m(v).description,"onUpdate:modelValue":g[7]||(g[7]=Te=>m(v).description=Te),placeholder:m(l)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:te(()=>[It("b",jg,Ht(m(l)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),R(H,{path:"additionalInfo"},{label:te(()=>[It("b",Kg,Ht(m(l)("additionalInfo")),1)]),default:te(()=>[R(Jt,{value:m(b),"onUpdate:value":g[8]||(g[8]=Te=>ai(b)?b.value=Te:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":te(()=>[oo(Ht(m(l)("add")),1)]),default:te(({value:Te})=>[It("div",Yg,[R(D,{value:Te.name,"onUpdate:value":cl=>Te.name=cl,placeholder:m(l)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),R(D,{value:Te.content,"onUpdate:value":cl=>Te.content=cl,placeholder:m(l)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[ni,m(_).currentMenuItemKey==="basic-info"]]),oi(It("section",Gg,[R(ve,{segmented:"",size:"small"},{header:te(()=>[It("span",Hg,Ht(m(l)("graphicElements")),1)]),default:te(()=>[R(it,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:te(()=>[R(ge,null,{default:te(()=>[R(ve,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[It("span",Wg,Ht(m(l)("logo")),1)]),default:te(()=>[R(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(v).logo?(qt(),bn(je,{key:0,class:"cursor-pointer","object-fit":"contain",style:kn("border: 1px dashed "+m(fe)(m(c),"white")),size:125,src:m(le)(m(v).logo),onClick:g[9]||(g[9]=()=>{w.value="logos",i.value=!0})},null,8,["style","src"])):(qt(),$l("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:kn(`border: 1px dashed ${m(fe)(m(c),"white")}; width: 125px; height: 125px`),onClick:g[10]||(g[10]=()=>{w.value="logos",i.value=!0})},[It("div",Qg,[R(m(pe),{size:"50"},{default:te(()=>[R(m(Ce),{icon:"carbon:image"})]),_:1}),It("span",null,Ht(m(l)("import")),1)])],4)),m(v).logo?(qt(),bn(Xe,{key:2,quaternary:"",onClick:g[11]||(g[11]=()=>m(v).logo="")},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[oo(" "+Ht(m(l)("clear")),1)]),_:1})):Jl("",!0)]),_:1})]),_:1})]),_:1}),R(ge,null,{default:te(()=>[R(ve,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[It("span",Xg,Ht(m(l)("icon")),1)]),default:te(()=>[R(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(v).icon?(qt(),bn(je,{key:0,class:"cursor-pointer","object-fit":"contain",style:kn("border: 1px dashed "+m(fe)(m(c),"white")),size:125,src:m(le)(m(v).icon),onClick:g[12]||(g[12]=()=>{w.value="icons",i.value=!0})},null,8,["style","src"])):(qt(),$l("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:kn(`border: 1px dashed ${m(fe)(m(c),"white")}; width: 125px; height: 125px`),onClick:g[13]||(g[13]=()=>{w.value="icons",i.value=!0})},[It("div",Jg,[R(m(pe),{size:"50"},{default:te(()=>[R(m(Ce),{icon:"carbon:image"})]),_:1}),It("span",null,Ht(m(l)("import")),1)])],4)),m(v).icon?(qt(),bn(Xe,{key:2,quaternary:"",onClick:g[14]||(g[14]=()=>m(v).icon="")},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[oo(" "+Ht(m(l)("clear")),1)]),_:1})):Jl("",!0)]),_:1})]),_:1})]),_:1}),R(ge,null,{default:te(()=>[R(ve,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[It("span",Zg,Ht(m(l)("logoMonochrome")),1)]),default:te(()=>[R(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(v).oneColorLogo?(qt(),bn(je,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:kn("border: 1px dashed "+m(fe)(m(c),"white")),size:125,src:m(le)(m(v).oneColorLogo),onClick:g[15]||(g[15]=()=>{w.value="monochrome-logos",i.value=!0})},null,8,["style","src"])):(qt(),$l("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:kn(`border: 1px dashed ${m(fe)(m(c),"white")}; width: 125px; height: 125px`),onClick:g[16]||(g[16]=()=>{w.value="monochrome-logos",i.value=!0})},[It("div",e1,[R(m(pe),{size:"50"},{default:te(()=>[R(m(Ce),{icon:"carbon:image"})]),_:1}),It("span",null,Ht(m(l)("import")),1)])],4)),m(v).oneColorLogo?(qt(),bn(Xe,{key:2,quaternary:"",onClick:g[17]||(g[17]=()=>m(v).oneColorLogo="")},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[oo(" "+Ht(m(l)("clear")),1)]),_:1})):Jl("",!0)]),_:1})]),_:1})]),_:1}),R(ge,null,{default:te(()=>[R(ve,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[It("span",t1,Ht(m(l)("iconMonochrome")),1)]),default:te(()=>[R(Se,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(v).oneColorIcon?(qt(),bn(je,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:kn("border: 1px dashed "+m(fe)(m(c),"white")),size:125,src:m(le)(m(v).oneColorIcon),onClick:g[18]||(g[18]=()=>{w.value="monochrome-icons",i.value=!0})},null,8,["style","src"])):(qt(),$l("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:kn(`border: 1px dashed ${m(fe)(m(c),"white")}; width: 125px; height: 125px`),onClick:g[19]||(g[19]=()=>{w.value="monochrome-icons",i.value=!0})},[It("div",l1,[R(m(pe),{size:"50"},{default:te(()=>[R(m(Ce),{icon:"carbon:image"})]),_:1}),It("span",null,Ht(m(l)("import")),1)])],4)),m(v).oneColorIcon?(qt(),bn(Xe,{key:2,quaternary:"",onClick:g[20]||(g[20]=()=>m(v).oneColorIcon="")},{icon:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[oo(" "+Ht(m(l)("clear")),1)]),_:1})):Jl("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),g[31]||(g[31]=It("br",null,null,-1)),R(ve,{hoverable:"",segmented:"",size:"small"},{header:te(()=>[It("span",a1,Ht(m(l)("websiteColors")),1)]),default:te(()=>[R(it,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:te(()=>[R(ge,null,{default:te(()=>[It("div",n1,[It("span",o1,Ht(m(l)("baseColor")),1),It("div",s1,[m(v).primaryColor?(qt(),$l(so,{key:0},[R(Xe,{text:"",type:"error",style:{"font-size":"21px"},onClick:g[21]||(g[21]=Te=>m(v).primaryColor="")},{default:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),R(Pe,{vertical:""})],64)):Jl("",!0),R(Dt,{"pure-color":m(v).primaryColor,"onUpdate:pureColor":g[22]||(g[22]=Te=>m(v).primaryColor=Te),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(Z)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),R(ge,null,{default:te(()=>[It("div",r1,[It("span",i1,Ht(m(l)("secondaryColor")),1),It("div",c1,[m(v).secondaryColor?(qt(),$l(so,{key:0},[R(Xe,{text:"",type:"error",style:{"font-size":"21px"},onClick:g[23]||(g[23]=Te=>m(v).secondaryColor="")},{default:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),R(Pe,{vertical:""})],64)):Jl("",!0),R(Dt,{"pure-color":m(v).secondaryColor,"onUpdate:pureColor":g[24]||(g[24]=Te=>m(v).secondaryColor=Te),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(Z)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),R(ge,null,{default:te(()=>[It("div",d1,[It("span",u1,Ht(m(l)("tertiaryColor")),1),It("div",p1,[m(v).accentColor?(qt(),$l(so,{key:0},[R(Xe,{text:"",type:"error",style:{"font-size":"21px"},onClick:g[25]||(g[25]=Te=>m(v).accentColor="")},{default:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),R(Pe,{vertical:""})],64)):Jl("",!0),R(Dt,{"pure-color":m(v).accentColor,"onUpdate:pureColor":g[26]||(g[26]=Te=>m(v).accentColor=Te),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(Z)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[ni,m(_).currentMenuItemKey==="branding"]]),oi(It("section",m1,[R(ve,{hoverable:""},{default:te(()=>[R(ce,{ref_key:"socialNetworksFormRef",ref:P,model:m(v),rules:_e,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:te(()=>[R(it,{"x-gap":"12",span:24},{default:te(()=>[(qt(),$l(so,null,Sc(C,Te=>R(T,{key:Te.name,span:12,path:Te.name},{label:te(()=>[It("b",f1,Ht(m(l)(Te.name)),1)]),default:te(()=>[R(D,{value:m(v)[Te.name],"onUpdate:value":cl=>m(v)[Te.name]=cl,placeholder:m(l)(Te.name),class:"w-full"},{prefix:te(()=>[R(m(pe),null,{default:te(()=>[R(m(Ce),{icon:Te.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[ni,m(_).currentMenuItemKey==="social-networks"]]),m(_).currentMenuItemKey==="newsletter-email"?(qt(),$l("section",_1,[R(Fv)])):Jl("",!0),m(_).currentMenuItemKey==="newsletter-phone"?(qt(),$l("section",v1,[R(ey)])):Jl("",!0),m(_).currentMenuItemKey==="newsletter-campaign"?(qt(),$l("section",y1,[R(Ug)])):Jl("",!0),m(_).currentMenuItemKey==="ads"?(qt(),$l("section",g1,[R(pu)])):Jl("",!0),m(_).currentMenuItemKey==="videos"?(qt(),$l("section",h1,[R(Jf)])):Jl("",!0),m(_).currentMenuItemKey==="content-models"?(qt(),$l("section",b1,[R(Xy)])):Jl("",!0),m(_).currentMenuItemKey==="menus"?(qt(),$l("section",k1,[R(gf)])):Jl("",!0),m(_).currentMenuItemKey==="content-permalinks"?(qt(),$l("section",w1,[R(wg)])):Jl("",!0),m(_).currentMenuItemKey==="page-sections"?(qt(),$l("section",x1,[R(Cv)])):Jl("",!0),(qt(!0),$l(so,null,Sc(m(re),(Te,cl)=>(qt(),$l(so,{key:`${Te.slug}-page`},[m(_).currentMenuItemKey===`${Te.slug}-page`?(qt(),$l("section",{key:`${Te.slug}-page`},[R(Xp,{slug:Te.slug,"open-form-modal":kt,onDelete:()=>{m(_).currentMenuItemKey=(m(re)?.length||0)>1?`${m(re)?.[cl-1].slug}-page`:e[0],m(N)()}},null,8,["slug","onDelete"])])):Jl("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),R(zt,{show:m(i),"onUpdate:show":g[27]||(g[27]=Te=>ai(i)?i.value=Te:null),title:m(l)("selectImage"),"upload-config":{folder:m(w),limit:0,maxSize:0,baseUrl:m(ee)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:h},null,8,["show","title","upload-config"]),R(Yt,{show:m(L),"onUpdate:show":g[29]||(g[29]=Te=>ai(L)?L.value=Te:null),loading:m(j)||m(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:m(ye)?m(l)("editPage"):m(l)("addPage"),"positive-text":m(l)("validate"),"negative-text":m(l)("cancel"),onPositiveClick:ut,onNegativeClick:g[30]||(g[30]=Te=>L.value=!1)},{default:te(()=>[R(ce,{ref_key:"addPageFormRef",ref:ne,model:m(Me),rules:ke,"show-require-mark":!1,size:"medium"},{default:te(()=>[R(H,{"show-label":!1,path:"title",class:"mt-5"},{default:te(()=>[R(et,{modelValue:m(Me).title,"onUpdate:modelValue":g[28]||(g[28]=Te=>m(Me).title=Te),placeholder:m(l)("title"),class:"w-full",sync:"",onKeydown:zg(ut,["enter"])},{label:te(()=>[oo(Ht(m(l)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),$h=Cn(E1,[["__scopeId","data-v-eb0e0d24"]]);export{$h as default};
