import{P as f,C as H}from"./ckeditor_ckeditor5-core-Cqajz_gD.js";import{P as v}from"./ckeditor_ckeditor5-paragraph-L_slNwdI.js";import{W as E,h as V,f as x}from"./ckeditor_ckeditor5-utils-Bp8opE8z.js";import{U as C,c as M,f as k,M as P,b as L,d as T,e as y}from"./ckeditor_ckeditor5-ui-wSLROq0V.js";import"./ckeditor_ckeditor5-engine-CS7i4Bo_.js";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class B extends H{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){const e=x(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>b(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,r=t.document,s=e.value;t.change(c=>{const l=Array.from(r.selection.getSelectedBlocks()).filter(a=>b(a,s,t.schema));for(const a of l)a.is("element",s)||c.rename(a,s)})}}function b(m,e,t){return t.checkChild(m.parent,e)&&!t.isObject(m)}const w="paragraph";class O extends f{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[v]}init(){const e=this.editor,t=e.config.get("heading.options"),r=[];for(const s of t)s.model!=="paragraph"&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),r.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new B(e,r))}afterInit(){const e=this.editor,t=e.commands.get("enter"),r=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(s,c)=>{const l=e.model.document.selection.getFirstPosition().parent;r.some(g=>l.is("element",g.model))&&!l.is("element",w)&&l.childCount===0&&c.writer.rename(l,w)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:E.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function I(m){const e=m.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return m.config.get("heading.options").map(r=>{const s=t[r.title];return s&&s!=r.title&&(r.title=s),r})}class N extends f{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,r=I(e),s=t("Choose heading"),c=t("Heading");e.ui.componentFactory.add("heading",l=>{const a={},g=new V,u=e.commands.get("heading"),h=e.commands.get("paragraph"),p=[u];for(const n of r){const i={type:"button",model:new C({label:n.title,class:n.class,role:"menuitemradio",withText:!0})};n.model==="paragraph"?(i.model.bind("isOn").to(h,"value"),i.model.set("commandName","paragraph"),p.push(h)):(i.model.bind("isOn").to(u,"value",d=>d===n.model),i.model.set({commandName:"heading",commandValue:n.model})),g.add(i),a[n.model]=n.title}const o=M(l);return k(o,g,{ariaLabel:c,role:"menu"}),o.buttonView.set({ariaLabel:c,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:c}),o.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),o.bind("isEnabled").toMany(p,"isEnabled",(...n)=>n.some(i=>i)),o.buttonView.bind("label").to(u,"value",h,"value",(n,i)=>{const d=i?"paragraph":n;return typeof d=="boolean"||!a[d]?s:a[d]}),o.buttonView.bind("ariaLabel").to(u,"value",h,"value",(n,i)=>{const d=i?"paragraph":n;return typeof d=="boolean"||!a[d]?c:`${a[d]}, ${c}`}),this.listenTo(o,"execute",n=>{const{commandName:i,commandValue:d}=n.source;e.execute(i,d?{value:d}:void 0),e.editing.view.focus()}),o}),e.ui.componentFactory.add("menuBar:heading",l=>{const a=new P(l),g=e.commands.get("heading"),u=e.commands.get("paragraph"),h=[g],p=new L(l);a.set({class:"ck-heading-dropdown"}),p.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(p);for(const o of r){const n=new T(l,a),i=new y(l);n.children.add(i),p.items.add(n),i.set({isToggleable:!0,label:o.title,role:"menuitemradio",class:o.class}),i.delegate("execute").to(a),i.on("execute",()=>{const d=o.model==="paragraph"?"paragraph":"heading";e.execute(d,{value:o.model}),e.editing.view.focus()}),o.model==="paragraph"?(i.bind("isOn").to(u,"value"),h.push(u)):i.bind("isOn").to(g,"value",d=>d===o.model)}return a.bind("isEnabled").toMany(h,"isEnabled",(...o)=>o.some(n=>n)),a})}}class q extends f{static get requires(){return[O,N]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}export{q as H};
