import{r as de}from"./strnum-DFcM6N3c.js";var L={},X={},H;function Q(){return H||(H=1,function(P){const w=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=w+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A="["+w+"]["+y+"]*",x=new RegExp("^"+A+"$"),v=function(i,r){const t=[];let e=r.exec(i);for(;e;){const d=[];d.startIndex=r.lastIndex-e[0].length;const l=e.length;for(let g=0;g<l;g++)d.push(e[g]);t.push(d),e=r.exec(i)}return t},T=function(i){const r=x.exec(i);return!(r===null||typeof r>"u")};P.isExist=function(i){return typeof i<"u"},P.isEmptyObject=function(i){return Object.keys(i).length===0},P.merge=function(i,r,t){if(r){const e=Object.keys(r),d=e.length;for(let l=0;l<d;l++)t==="strict"?i[e[l]]=[r[e[l]]]:i[e[l]]=r[e[l]]}},P.getValue=function(i){return P.isExist(i)?i:""},P.isName=T,P.getAllMatches=v,P.nameRegexp=A}(X)),X}var j;function ae(){if(j)return L;j=1;const P=Q(),w={allowBooleanAttributes:!1,unpairedTags:[]};L.validate=function(s,u){u=Object.assign({},w,u);const p=[];let C=!1,n=!1;s[0]==="\uFEFF"&&(s=s.substr(1));for(let o=0;o<s.length;o++)if(s[o]==="<"&&s[o+1]==="?"){if(o+=2,o=A(s,o),o.err)return o}else if(s[o]==="<"){let f=o;if(o++,s[o]==="!"){o=x(s,o);continue}else{let b=!1;s[o]==="/"&&(b=!0,o++);let a="";for(;o<s.length&&s[o]!==">"&&s[o]!==" "&&s[o]!=="	"&&s[o]!==`
`&&s[o]!=="\r";o++)a+=s[o];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),o--),!m(a)){let N;return a.trim().length===0?N="Invalid space after '<'.":N="Tag '"+a+"' is an invalid name.",l("InvalidTag",N,E(s,o))}const h=i(s,o);if(h===!1)return l("InvalidAttr","Attributes for '"+a+"' have open quote.",E(s,o));let O=h.value;if(o=h.index,O[O.length-1]==="/"){const N=o-O.length;O=O.substring(0,O.length-1);const c=t(O,u);if(c===!0)C=!0;else return l(c.err.code,c.err.msg,E(s,N+c.err.line))}else if(b)if(h.tagClosed){if(O.trim().length>0)return l("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",E(s,f));if(p.length===0)return l("InvalidTag","Closing tag '"+a+"' has not been opened.",E(s,f));{const N=p.pop();if(a!==N.tagName){let c=E(s,N.tagStartPos);return l("InvalidTag","Expected closing tag '"+N.tagName+"' (opened in line "+c.line+", col "+c.col+") instead of closing tag '"+a+"'.",E(s,f))}p.length==0&&(n=!0)}}else return l("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",E(s,o));else{const N=t(O,u);if(N!==!0)return l(N.err.code,N.err.msg,E(s,o-O.length+N.err.line));if(n===!0)return l("InvalidXml","Multiple possible root nodes found.",E(s,o));u.unpairedTags.indexOf(a)!==-1||p.push({tagName:a,tagStartPos:f}),C=!0}for(o++;o<s.length;o++)if(s[o]==="<")if(s[o+1]==="!"){o++,o=x(s,o);continue}else if(s[o+1]==="?"){if(o=A(s,++o),o.err)return o}else break;else if(s[o]==="&"){const N=d(s,o);if(N==-1)return l("InvalidChar","char '&' is not expected.",E(s,o));o=N}else if(n===!0&&!y(s[o]))return l("InvalidXml","Extra text at the end",E(s,o));s[o]==="<"&&o--}}else{if(y(s[o]))continue;return l("InvalidChar","char '"+s[o]+"' is not expected.",E(s,o))}if(C){if(p.length==1)return l("InvalidTag","Unclosed tag '"+p[0].tagName+"'.",E(s,p[0].tagStartPos));if(p.length>0)return l("InvalidXml","Invalid '"+JSON.stringify(p.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return l("InvalidXml","Start tag expected.",1);return!0};function y(s){return s===" "||s==="	"||s===`
`||s==="\r"}function A(s,u){const p=u;for(;u<s.length;u++)if(s[u]=="?"||s[u]==" "){const C=s.substr(p,u-p);if(u>5&&C==="xml")return l("InvalidXml","XML declaration allowed only at the start of the document.",E(s,u));if(s[u]=="?"&&s[u+1]==">"){u++;break}else continue}return u}function x(s,u){if(s.length>u+5&&s[u+1]==="-"&&s[u+2]==="-"){for(u+=3;u<s.length;u++)if(s[u]==="-"&&s[u+1]==="-"&&s[u+2]===">"){u+=2;break}}else if(s.length>u+8&&s[u+1]==="D"&&s[u+2]==="O"&&s[u+3]==="C"&&s[u+4]==="T"&&s[u+5]==="Y"&&s[u+6]==="P"&&s[u+7]==="E"){let p=1;for(u+=8;u<s.length;u++)if(s[u]==="<")p++;else if(s[u]===">"&&(p--,p===0))break}else if(s.length>u+9&&s[u+1]==="["&&s[u+2]==="C"&&s[u+3]==="D"&&s[u+4]==="A"&&s[u+5]==="T"&&s[u+6]==="A"&&s[u+7]==="["){for(u+=8;u<s.length;u++)if(s[u]==="]"&&s[u+1]==="]"&&s[u+2]===">"){u+=2;break}}return u}const v='"',T="'";function i(s,u){let p="",C="",n=!1;for(;u<s.length;u++){if(s[u]===v||s[u]===T)C===""?C=s[u]:C!==s[u]||(C="");else if(s[u]===">"&&C===""){n=!0;break}p+=s[u]}return C!==""?!1:{value:p,index:u,tagClosed:n}}const r=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function t(s,u){const p=P.getAllMatches(s,r),C={};for(let n=0;n<p.length;n++){if(p[n][1].length===0)return l("InvalidAttr","Attribute '"+p[n][2]+"' has no space in starting.",S(p[n]));if(p[n][3]!==void 0&&p[n][4]===void 0)return l("InvalidAttr","Attribute '"+p[n][2]+"' is without value.",S(p[n]));if(p[n][3]===void 0&&!u.allowBooleanAttributes)return l("InvalidAttr","boolean attribute '"+p[n][2]+"' is not allowed.",S(p[n]));const o=p[n][2];if(!g(o))return l("InvalidAttr","Attribute '"+o+"' is an invalid name.",S(p[n]));if(!C.hasOwnProperty(o))C[o]=1;else return l("InvalidAttr","Attribute '"+o+"' is repeated.",S(p[n]))}return!0}function e(s,u){let p=/\d/;for(s[u]==="x"&&(u++,p=/[\da-fA-F]/);u<s.length;u++){if(s[u]===";")return u;if(!s[u].match(p))break}return-1}function d(s,u){if(u++,s[u]===";")return-1;if(s[u]==="#")return u++,e(s,u);let p=0;for(;u<s.length;u++,p++)if(!(s[u].match(/\w/)&&p<20)){if(s[u]===";")break;return-1}return u}function l(s,u,p){return{err:{code:s,msg:u,line:p.line||p,col:p.col}}}function g(s){return P.isName(s)}function m(s){return P.isName(s)}function E(s,u){const p=s.substring(0,u).split(/\r?\n/);return{line:p.length,col:p[p.length-1].length+1}}function S(s){return s.startIndex+s[1].length}return L}var R={},D;function ce(){if(D)return R;D=1;const P={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(y,A){return A},attributeValueProcessor:function(y,A){return A},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(y,A,x){return y}},w=function(y){return Object.assign({},P,y)};return R.buildOptions=w,R.defaultOptions=P,R}var B,ee;function he(){if(ee)return B;ee=1;class P{constructor(y){this.tagname=y,this.child=[],this[":@"]={}}add(y,A){y==="__proto__"&&(y="#__proto__"),this.child.push({[y]:A})}addChild(y){y.tagname==="__proto__"&&(y.tagname="#__proto__"),y[":@"]&&Object.keys(y[":@"]).length>0?this.child.push({[y.tagname]:y.child,":@":y[":@"]}):this.child.push({[y.tagname]:y.child})}}return B=P,B}var M,te;function ge(){if(te)return M;te=1;const P=Q();function w(t,e){const d={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let l=1,g=!1,m=!1,E="";for(;e<t.length;e++)if(t[e]==="<"&&!m){if(g&&x(t,e)){e+=7;let S,s;[S,s,e]=y(t,e+1),s.indexOf("&")===-1&&(d[r(S)]={regx:RegExp(`&${S};`,"g"),val:s})}else if(g&&v(t,e))e+=8;else if(g&&T(t,e))e+=8;else if(g&&i(t,e))e+=9;else if(A)m=!0;else throw new Error("Invalid DOCTYPE");l++,E=""}else if(t[e]===">"){if(m?t[e-1]==="-"&&t[e-2]==="-"&&(m=!1,l--):l--,l===0)break}else t[e]==="["?g=!0:E+=t[e];if(l!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:d,i:e}}function y(t,e){let d="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)d+=t[e];if(d=d.trim(),d.indexOf(" ")!==-1)throw new Error("External entites are not supported");const l=t[e++];let g="";for(;e<t.length&&t[e]!==l;e++)g+=t[e];return[d,g,e]}function A(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function x(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function v(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function T(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function i(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function r(t){if(P.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}return M=w,M}var k,se;function le(){if(se)return k;se=1;function P(w){return typeof w=="function"?w:Array.isArray(w)?y=>{for(const A of w)if(typeof A=="string"&&y===A||A instanceof RegExp&&A.test(y))return!0}:()=>!1}return k=P,k}var G,re;function pe(){if(re)return G;re=1;const P=Q(),w=he(),y=ge(),A=de(),x=le();class v{constructor(o){this.options=o,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(f,b)=>String.fromCharCode(Number.parseInt(b,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(f,b)=>String.fromCharCode(Number.parseInt(b,16))}},this.addExternalEntities=T,this.parseXml=d,this.parseTextData=i,this.resolveNameSpace=r,this.buildAttributesMap=e,this.isItStopNode=E,this.replaceEntitiesValue=g,this.readStopNodeData=p,this.saveTextToParentTag=m,this.addChild=l,this.ignoreAttributesFn=x(this.options.ignoreAttributes)}}function T(n){const o=Object.keys(n);for(let f=0;f<o.length;f++){const b=o[f];this.lastEntities[b]={regex:new RegExp("&"+b+";","g"),val:n[b]}}}function i(n,o,f,b,a,h,O){if(n!==void 0&&(this.options.trimValues&&!b&&(n=n.trim()),n.length>0)){O||(n=this.replaceEntitiesValue(n));const N=this.options.tagValueProcessor(o,n,f,a,h);return N==null?n:typeof N!=typeof n||N!==n?N:this.options.trimValues?C(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?C(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function r(n){if(this.options.removeNSPrefix){const o=n.split(":"),f=n.charAt(0)==="/"?"/":"";if(o[0]==="xmlns")return"";o.length===2&&(n=f+o[1])}return n}const t=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function e(n,o,f){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const b=P.getAllMatches(n,t),a=b.length,h={};for(let O=0;O<a;O++){const N=this.resolveNameSpace(b[O][1]);if(this.ignoreAttributesFn(N,o))continue;let c=b[O][4],V=this.options.attributeNamePrefix+N;if(N.length)if(this.options.transformAttributeName&&(V=this.options.transformAttributeName(V)),V==="__proto__"&&(V="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const I=this.options.attributeValueProcessor(N,c,o);I==null?h[V]=c:typeof I!=typeof c||I!==c?h[V]=I:h[V]=C(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(h[V]=!0)}if(!Object.keys(h).length)return;if(this.options.attributesGroupName){const O={};return O[this.options.attributesGroupName]=h,O}return h}}const d=function(n){n=n.replace(/\r\n?/g,`
`);const o=new w("!xml");let f=o,b="",a="";for(let h=0;h<n.length;h++)if(n[h]==="<")if(n[h+1]==="/"){const N=s(n,">",h,"Closing Tag is not closed.");let c=n.substring(h+2,N).trim();if(this.options.removeNSPrefix){const _=c.indexOf(":");_!==-1&&(c=c.substr(_+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),f&&(b=this.saveTextToParentTag(b,f,a));const V=a.substring(a.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let I=0;V&&this.options.unpairedTags.indexOf(V)!==-1?(I=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):I=a.lastIndexOf("."),a=a.substring(0,I),f=this.tagsNodeStack.pop(),b="",h=N}else if(n[h+1]==="?"){let N=u(n,h,!1,"?>");if(!N)throw new Error("Pi Tag is not closed.");if(b=this.saveTextToParentTag(b,f,a),!(this.options.ignoreDeclaration&&N.tagName==="?xml"||this.options.ignorePiTags)){const c=new w(N.tagName);c.add(this.options.textNodeName,""),N.tagName!==N.tagExp&&N.attrExpPresent&&(c[":@"]=this.buildAttributesMap(N.tagExp,a,N.tagName)),this.addChild(f,c,a)}h=N.closeIndex+1}else if(n.substr(h+1,3)==="!--"){const N=s(n,"-->",h+4,"Comment is not closed.");if(this.options.commentPropName){const c=n.substring(h+4,N-2);b=this.saveTextToParentTag(b,f,a),f.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}h=N}else if(n.substr(h+1,2)==="!D"){const N=y(n,h);this.docTypeEntities=N.entities,h=N.i}else if(n.substr(h+1,2)==="!["){const N=s(n,"]]>",h,"CDATA is not closed.")-2,c=n.substring(h+9,N);b=this.saveTextToParentTag(b,f,a);let V=this.parseTextData(c,f.tagname,a,!0,!1,!0,!0);V==null&&(V=""),this.options.cdataPropName?f.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):f.add(this.options.textNodeName,V),h=N+2}else{let N=u(n,h,this.options.removeNSPrefix),c=N.tagName;const V=N.rawTagName;let I=N.tagExp,_=N.attrExpPresent,Z=N.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),f&&b&&f.tagname!=="!xml"&&(b=this.saveTextToParentTag(b,f,a,!1));const z=f;if(z&&this.options.unpairedTags.indexOf(z.tagname)!==-1&&(f=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),c!==o.tagname&&(a+=a?"."+c:c),this.isItStopNode(this.options.stopNodes,a,c)){let F="";if(I.length>0&&I.lastIndexOf("/")===I.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),I=c):I=I.substr(0,I.length-1),h=N.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)h=N.closeIndex;else{const $=this.readStopNodeData(n,V,Z+1);if(!$)throw new Error(`Unexpected end of ${V}`);h=$.i,F=$.tagContent}const q=new w(c);c!==I&&_&&(q[":@"]=this.buildAttributesMap(I,a,c)),F&&(F=this.parseTextData(F,c,a,!0,_,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),q.add(this.options.textNodeName,F),this.addChild(f,q,a)}else{if(I.length>0&&I.lastIndexOf("/")===I.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),I=c):I=I.substr(0,I.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const F=new w(c);c!==I&&_&&(F[":@"]=this.buildAttributesMap(I,a,c)),this.addChild(f,F,a),a=a.substr(0,a.lastIndexOf("."))}else{const F=new w(c);this.tagsNodeStack.push(f),c!==I&&_&&(F[":@"]=this.buildAttributesMap(I,a,c)),this.addChild(f,F,a),f=F}b="",h=Z}}else b+=n[h];return o.child};function l(n,o,f){const b=this.options.updateTag(o.tagname,f,o[":@"]);b===!1||(typeof b=="string"&&(o.tagname=b),n.addChild(o))}const g=function(n){if(this.options.processEntities){for(let o in this.docTypeEntities){const f=this.docTypeEntities[o];n=n.replace(f.regx,f.val)}for(let o in this.lastEntities){const f=this.lastEntities[o];n=n.replace(f.regex,f.val)}if(this.options.htmlEntities)for(let o in this.htmlEntities){const f=this.htmlEntities[o];n=n.replace(f.regex,f.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function m(n,o,f,b){return n&&(b===void 0&&(b=o.child.length===0),n=this.parseTextData(n,o.tagname,f,!1,o[":@"]?Object.keys(o[":@"]).length!==0:!1,b),n!==void 0&&n!==""&&o.add(this.options.textNodeName,n),n=""),n}function E(n,o,f){const b="*."+f;for(const a in n){const h=n[a];if(b===h||o===h)return!0}return!1}function S(n,o,f=">"){let b,a="";for(let h=o;h<n.length;h++){let O=n[h];if(b)O===b&&(b="");else if(O==='"'||O==="'")b=O;else if(O===f[0])if(f[1]){if(n[h+1]===f[1])return{data:a,index:h}}else return{data:a,index:h};else O==="	"&&(O=" ");a+=O}}function s(n,o,f,b){const a=n.indexOf(o,f);if(a===-1)throw new Error(b);return a+o.length-1}function u(n,o,f,b=">"){const a=S(n,o+1,b);if(!a)return;let h=a.data;const O=a.index,N=h.search(/\s/);let c=h,V=!0;N!==-1&&(c=h.substring(0,N),h=h.substring(N+1).trimStart());const I=c;if(f){const _=c.indexOf(":");_!==-1&&(c=c.substr(_+1),V=c!==a.data.substr(_+1))}return{tagName:c,tagExp:h,closeIndex:O,attrExpPresent:V,rawTagName:I}}function p(n,o,f){const b=f;let a=1;for(;f<n.length;f++)if(n[f]==="<")if(n[f+1]==="/"){const h=s(n,">",f,`${o} is not closed`);if(n.substring(f+2,h).trim()===o&&(a--,a===0))return{tagContent:n.substring(b,f),i:h};f=h}else if(n[f+1]==="?")f=s(n,"?>",f+1,"StopNode is not closed.");else if(n.substr(f+1,3)==="!--")f=s(n,"-->",f+3,"StopNode is not closed.");else if(n.substr(f+1,2)==="![")f=s(n,"]]>",f,"StopNode is not closed.")-2;else{const h=u(n,f,">");h&&((h&&h.tagName)===o&&h.tagExp[h.tagExp.length-1]!=="/"&&a++,f=h.closeIndex)}}function C(n,o,f){if(o&&typeof n=="string"){const b=n.trim();return b==="true"?!0:b==="false"?!1:A(n,f)}else return P.isExist(n)?n:""}return G=v,G}var J={},ne;function Ne(){if(ne)return J;ne=1;function P(v,T){return w(v,T)}function w(v,T,i){let r;const t={};for(let e=0;e<v.length;e++){const d=v[e],l=y(d);let g="";if(i===void 0?g=l:g=i+"."+l,l===T.textNodeName)r===void 0?r=d[l]:r+=""+d[l];else{if(l===void 0)continue;if(d[l]){let m=w(d[l],T,g);const E=x(m,T);d[":@"]?A(m,d[":@"],g,T):Object.keys(m).length===1&&m[T.textNodeName]!==void 0&&!T.alwaysCreateTextNode?m=m[T.textNodeName]:Object.keys(m).length===0&&(T.alwaysCreateTextNode?m[T.textNodeName]="":m=""),t[l]!==void 0&&t.hasOwnProperty(l)?(Array.isArray(t[l])||(t[l]=[t[l]]),t[l].push(m)):T.isArray(l,g,E)?t[l]=[m]:t[l]=m}}}return typeof r=="string"?r.length>0&&(t[T.textNodeName]=r):r!==void 0&&(t[T.textNodeName]=r),t}function y(v){const T=Object.keys(v);for(let i=0;i<T.length;i++){const r=T[i];if(r!==":@")return r}}function A(v,T,i,r){if(T){const t=Object.keys(T),e=t.length;for(let d=0;d<e;d++){const l=t[d];r.isArray(l,i+"."+l,!0,!0)?v[l]=[T[l]]:v[l]=T[l]}}}function x(v,T){const{textNodeName:i}=T,r=Object.keys(v).length;return!!(r===0||r===1&&(v[i]||typeof v[i]=="boolean"||v[i]===0))}return J.prettify=P,J}var U,ie;function be(){if(ie)return U;ie=1;const{buildOptions:P}=ce(),w=pe(),{prettify:y}=Ne(),A=ae();class x{constructor(T){this.externalEntities={},this.options=P(T)}parse(T,i){if(typeof T!="string")if(T.toString)T=T.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(i){i===!0&&(i={});const e=A.validate(T,i);if(e!==!0)throw Error(`${e.err.msg}:${e.err.line}:${e.err.col}`)}const r=new w(this.options);r.addExternalEntities(this.externalEntities);const t=r.parseXml(T);return this.options.preserveOrder||t===void 0?t:y(t,this.options)}addEntity(T,i){if(i.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(T.indexOf("&")!==-1||T.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(i==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[T]=i}}return U=x,U}var Y,oe;function Ee(){if(oe)return Y;oe=1;const P=`
`;function w(i,r){let t="";return r.format&&r.indentBy.length>0&&(t=P),y(i,r,"",t)}function y(i,r,t,e){let d="",l=!1;for(let g=0;g<i.length;g++){const m=i[g],E=A(m);if(E===void 0)continue;let S="";if(t.length===0?S=E:S=`${t}.${E}`,E===r.textNodeName){let n=m[E];v(S,r)||(n=r.tagValueProcessor(E,n),n=T(n,r)),l&&(d+=e),d+=n,l=!1;continue}else if(E===r.cdataPropName){l&&(d+=e),d+=`<![CDATA[${m[E][0][r.textNodeName]}]]>`,l=!1;continue}else if(E===r.commentPropName){d+=e+`<!--${m[E][0][r.textNodeName]}-->`,l=!0;continue}else if(E[0]==="?"){const n=x(m[":@"],r),o=E==="?xml"?"":e;let f=m[E][0][r.textNodeName];f=f.length!==0?" "+f:"",d+=o+`<${E}${f}${n}?>`,l=!0;continue}let s=e;s!==""&&(s+=r.indentBy);const u=x(m[":@"],r),p=e+`<${E}${u}`,C=y(m[E],r,S,s);r.unpairedTags.indexOf(E)!==-1?r.suppressUnpairedNode?d+=p+">":d+=p+"/>":(!C||C.length===0)&&r.suppressEmptyNode?d+=p+"/>":C&&C.endsWith(">")?d+=p+`>${C}${e}</${E}>`:(d+=p+">",C&&e!==""&&(C.includes("/>")||C.includes("</"))?d+=e+r.indentBy+C+e:d+=C,d+=`</${E}>`),l=!0}return d}function A(i){const r=Object.keys(i);for(let t=0;t<r.length;t++){const e=r[t];if(i.hasOwnProperty(e)&&e!==":@")return e}}function x(i,r){let t="";if(i&&!r.ignoreAttributes)for(let e in i){if(!i.hasOwnProperty(e))continue;let d=r.attributeValueProcessor(e,i[e]);d=T(d,r),d===!0&&r.suppressBooleanAttributes?t+=` ${e.substr(r.attributeNamePrefix.length)}`:t+=` ${e.substr(r.attributeNamePrefix.length)}="${d}"`}return t}function v(i,r){i=i.substr(0,i.length-r.textNodeName.length-1);let t=i.substr(i.lastIndexOf(".")+1);for(let e in r.stopNodes)if(r.stopNodes[e]===i||r.stopNodes[e]==="*."+t)return!0;return!1}function T(i,r){if(i&&i.length>0&&r.processEntities)for(let t=0;t<r.entities.length;t++){const e=r.entities[t];i=i.replace(e.regex,e.val)}return i}return Y=w,Y}var W,ue;function Te(){if(ue)return W;ue=1;const P=Ee(),w=le(),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(i,r){return r},attributeValueProcessor:function(i,r){return r},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function A(i){this.options=Object.assign({},y,i),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=w(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=T),this.processTextOrObjNode=x,this.options.format?(this.indentate=v,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}A.prototype.build=function(i){return this.options.preserveOrder?P(i,this.options):(Array.isArray(i)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(i={[this.options.arrayNodeName]:i}),this.j2x(i,0,[]).val)},A.prototype.j2x=function(i,r,t){let e="",d="";const l=t.join(".");for(let g in i)if(Object.prototype.hasOwnProperty.call(i,g))if(typeof i[g]>"u")this.isAttribute(g)&&(d+="");else if(i[g]===null)this.isAttribute(g)||g===this.options.cdataPropName?d+="":g[0]==="?"?d+=this.indentate(r)+"<"+g+"?"+this.tagEndChar:d+=this.indentate(r)+"<"+g+"/"+this.tagEndChar;else if(i[g]instanceof Date)d+=this.buildTextValNode(i[g],g,"",r);else if(typeof i[g]!="object"){const m=this.isAttribute(g);if(m&&!this.ignoreAttributesFn(m,l))e+=this.buildAttrPairStr(m,""+i[g]);else if(!m)if(g===this.options.textNodeName){let E=this.options.tagValueProcessor(g,""+i[g]);d+=this.replaceEntitiesValue(E)}else d+=this.buildTextValNode(i[g],g,"",r)}else if(Array.isArray(i[g])){const m=i[g].length;let E="",S="";for(let s=0;s<m;s++){const u=i[g][s];if(!(typeof u>"u"))if(u===null)g[0]==="?"?d+=this.indentate(r)+"<"+g+"?"+this.tagEndChar:d+=this.indentate(r)+"<"+g+"/"+this.tagEndChar;else if(typeof u=="object")if(this.options.oneListGroup){const p=this.j2x(u,r+1,t.concat(g));E+=p.val,this.options.attributesGroupName&&u.hasOwnProperty(this.options.attributesGroupName)&&(S+=p.attrStr)}else E+=this.processTextOrObjNode(u,g,r,t);else if(this.options.oneListGroup){let p=this.options.tagValueProcessor(g,u);p=this.replaceEntitiesValue(p),E+=p}else E+=this.buildTextValNode(u,g,"",r)}this.options.oneListGroup&&(E=this.buildObjectNode(E,g,S,r)),d+=E}else if(this.options.attributesGroupName&&g===this.options.attributesGroupName){const m=Object.keys(i[g]),E=m.length;for(let S=0;S<E;S++)e+=this.buildAttrPairStr(m[S],""+i[g][m[S]])}else d+=this.processTextOrObjNode(i[g],g,r,t);return{attrStr:e,val:d}},A.prototype.buildAttrPairStr=function(i,r){return r=this.options.attributeValueProcessor(i,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+i:" "+i+'="'+r+'"'};function x(i,r,t,e){const d=this.j2x(i,t+1,e.concat(r));return i[this.options.textNodeName]!==void 0&&Object.keys(i).length===1?this.buildTextValNode(i[this.options.textNodeName],r,d.attrStr,t):this.buildObjectNode(d.val,r,d.attrStr,t)}A.prototype.buildObjectNode=function(i,r,t,e){if(i==="")return r[0]==="?"?this.indentate(e)+"<"+r+t+"?"+this.tagEndChar:this.indentate(e)+"<"+r+t+this.closeTag(r)+this.tagEndChar;{let d="</"+r+this.tagEndChar,l="";return r[0]==="?"&&(l="?",d=""),(t||t==="")&&i.indexOf("<")===-1?this.indentate(e)+"<"+r+t+l+">"+i+d:this.options.commentPropName!==!1&&r===this.options.commentPropName&&l.length===0?this.indentate(e)+`<!--${i}-->`+this.newLine:this.indentate(e)+"<"+r+t+l+this.tagEndChar+i+this.indentate(e)+d}},A.prototype.closeTag=function(i){let r="";return this.options.unpairedTags.indexOf(i)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r=`></${i}`,r},A.prototype.buildTextValNode=function(i,r,t,e){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(e)+`<![CDATA[${i}]]>`+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(e)+`<!--${i}-->`+this.newLine;if(r[0]==="?")return this.indentate(e)+"<"+r+t+"?"+this.tagEndChar;{let d=this.options.tagValueProcessor(r,i);return d=this.replaceEntitiesValue(d),d===""?this.indentate(e)+"<"+r+t+this.closeTag(r)+this.tagEndChar:this.indentate(e)+"<"+r+t+">"+d+"</"+r+this.tagEndChar}},A.prototype.replaceEntitiesValue=function(i){if(i&&i.length>0&&this.options.processEntities)for(let r=0;r<this.options.entities.length;r++){const t=this.options.entities[r];i=i.replace(t.regex,t.val)}return i};function v(i){return this.options.indentBy.repeat(i)}function T(i){return i.startsWith(this.options.attributeNamePrefix)&&i!==this.options.textNodeName?i.substr(this.attrPrefixLen):!1}return W=A,W}var K,fe;function ye(){if(fe)return K;fe=1;const P=ae(),w=be(),y=Te();return K={XMLParser:w,XMLValidator:P,XMLBuilder:y},K}var Ae=ye();export{Ae as f};
