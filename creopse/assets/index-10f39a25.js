import{_ as Ct,a as Bt,b as la}from"./index.vue_vue_type_script_setup_true_lang-21da2803.js";import{_ as ka}from"./PageLayout.vue_vue_type_script_setup_true_lang-eed064f8.js";import{_ as gt}from"./I18nInput-4c64dbc5.js";import{f as wl,p as ot,o as wa,v as pl,T as xa,a as Ca,w as Ia}from"./vue_runtime-dom-c0cb2070.js";import{e as Qe,u as Je,f as yt,r as Et,p as Wt,q as Zl,s as We,i as Jt,t as aa,_ as Ot,v as na,w as $a,x as fl,h as sa,j as Va,R as Ta}from"./index-b41c7da9.js";import{I as ge}from"./iconify_vue-6750bec6.js";import{R as et}from"./response-error-code-87d1097e.js";import{d as el,a as Fe}from"./pinia-5dd13ed8.js";import{_ as be}from"./lodash-a9971f22.js";import{c as pt,b as at,a as nt,_ as Ve,g as it,$ as Dt,O as Tt,N as de,L as tt,ag as It,a3 as kt,P as Kt,Q as ut,E as Ze,H as qt,I as bt,a8 as _l,a9 as yl,ah as za,F as ft,G as mt,ab as Qt,a7 as gl,aa as oa,j as $t,T as Lt,a5 as xl,ac as ia,a4 as Cl,M as Yt,a0 as tl,a1 as ll,X as bl,W as ra,a2 as al,ai as Ua,aj as Sa,k as Ma,ak as ua,R as da,J as Aa,al as ca,e as pa,am as Ea,an as Da,ao as La,h as Pa,n as Na,o as Ra}from"./naive-ui-17a84883.js";import{d as je,aF as _t,o as n,c as D,Y as t,aO as l,l as P,P as E,F as me,ar as Ne,a as y,Q as ve,i as vt,h as ie,p as Ae,ag as Gt,as as hl,W as fa,w as ht,aH as Oa,v as il,r as qa,b as Il,s as St,e as ma}from"./vue_runtime-core-4f5fb440.js";import{u as He}from"./vue-i18n-84a05dd5.js";import{r as o,u as e,c as $e,a as Rt}from"./vue_reactivity-852d8377.js";import{t as i,a as Ye,n as Oe}from"./vue_shared-7dcc3b7f.js";import{_ as zt}from"./fawmi_vue-google-maps-52673af8.js";import{o as Fa,a as ja}from"./vueuse_core-a611fd48.js";import{s as Ba}from"./vue-virtual-scroller-50f85086.js";import{i as Ql}from"./is-svg-36c6b3ab.js";import{_ as va}from"./index.vue_vue_type_style_index_0_lang-83371041.js";import{M as Zt}from"./vue-pick-colors-f58bc48b.js";import{v as ct}from"./uuid-cf522c50.js";import{s as _a}from"./slugify-ce681755.js";import{r as Ka,u as cl}from"./xlsx-83e6f69b.js";import{_ as Xt}from"./validator-c0254ba9.js";import{_ as Ya}from"./VueTelInputWrapper-26bf9be6.js";import{i as Ga}from"./libphonenumber-js-f65e98d1.js";import{a as Ha}from"./vue-router-e670704e.js";import"./media-library-02d9d105.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-15b982e1.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./vue3-google-login-7712408e.js";import"./vue-draggable-next-d31a77b2.js";import"./vue-recaptcha-486cc690.js";import"./vueuse_shared-5de4c6d8.js";import"./p-defer-64bd7c04.js";import"./defu-573334b8.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var At=(ue=>(ue.IMAGE="image",ue.VIDEO="video",ue))(At||{});const ml=el("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:ue}=Qe(),a=await ue({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),Wa={class:"flex items-center justify-between"},Ja={class:"flex flex-col"},Xa={class:"text-sm font-bold"},Za={class:"text-xs font-normal"},Qa={key:0,class:"text-xs font-bold"},en=je({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,displayFormErrors:X,formatKey:Q}=Je(),v=_t(ue,"show"),{adIdentifiers:K}=Fe(ml()),{loadAdIdentifiers:T}=ml(),{isLightTheme:ne}=Fe(yt()),F=o(!1),W=async()=>{F.value=!0,await T(),F.value=!1};W();const Y=pt(),S=at(),m=nt(),O=o(!1),z=o(!1),q=o(null),B=o(null),g=o({id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),te={id:[{required:!0,message:a("fillRequired")}]},R=G=>{q.value=be.cloneDeep(G),g.value=be.cloneDeep(G||{id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),z.value=!0},L=async()=>{var G;return(G=B.value)==null||G.validate(async U=>{var M,x,H,J,le,s;if(!U){m.start(),O.value=!0;const N={id:g.value.id,reusable:g.value.reusable,contentType:g.value.contentType,contentSize:g.value.contentSize,params:g.value.params},A=await d({method:q.value?"put":"post",url:q.value?`/ad-identifiers/${q.value.id}`:"/ad-identifiers",data:N});if(A.failure&&A.error)switch((H=(x=(M=A.error)==null?void 0:M.response)==null?void 0:x.data)==null?void 0:H.errorCode){case et.FORM_INVALID_DATA:X((s=(le=(J=A.error)==null?void 0:J.response)==null?void 0:le.data)==null?void 0:s.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),W(),z.value=!1;O.value=!1,m.finish()}}),!1},ee=async G=>{Y.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/ad-identifiers/${G.id}`})).success?(S.success(a("success")),W()):S.error(a("anErrorOccurred"))}})};return(G,U)=>{const M=ge,x=Ve,H=it,J=Dt,le=Tt,s=de,N=tt,A=It,c=kt,_=Kt,Z=ut,u=Ze,r=qt,V=bt,f=_l,$=yl,C=za,b=ft,_e=mt;return n(),D(me,null,[t(Z,{show:v.value,"onUpdate:show":U[2]||(U[2]=ae=>v.value=ae),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(x,{size:"small",type:"primary",disabled:e(F),onClick:U[0]||(U[0]=ae=>R(null))},{default:l(()=>[t(M,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(x,{size:"small",type:"error",disabled:e(F),onClick:U[1]||(U[1]=ae=>v.value=!1)},{default:l(()=>[t(M,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(_,{show:e(F)},{default:l(()=>[e(K).length?(n(),E(A,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(K),ae=>(n(),E(N,{key:ae.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[y("div",Wa,[y("div",Ja,[y("span",Xa,i(ae.id),1),y("div",null,[y("span",Za,i(ae.contentType===e(At).IMAGE?e(a)("image"):e(a)("video")),1),ae.contentSize?(n(),D("span",Qa," Â ("+i(ae.contentSize)+") ",1)):ve("",!0)])]),t(H,null,{default:l(()=>[t(J,{size:"medium",bordered:!1,type:ae.reusable?"info":"warning"},{default:l(()=>[P(i(ae.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(le,{vertical:"",class:Ye(["!mx-0",e(p)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(x,{size:"small",type:"warning",secondary:e(ne),onClick:k=>R(ae)},{default:l(()=>[t(s,null,{default:l(()=>[t(M,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(x,{size:"small",type:"error",secondary:e(ne),onClick:k=>ee(ae)},{default:l(()=>[t(s,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),E(N,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(s,{size:"60"},{default:l(()=>[t(M,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(z),"onUpdate:show":U[8]||(U[8]=ae=>$e(z)?z.value=ae:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:U[9]||(U[9]=ae=>z.value=!1)},{default:l(()=>[t(_e,{ref_key:"formRef",ref:B,model:e(g),rules:te,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(u,{value:e(g).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":U[3]||(U[3]=ae=>e(g).id=e(Q)(ae))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(u,{value:e(g).contentSize,"onUpdate:value":U[4]||(U[4]=ae=>e(g).contentSize=ae),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t($,{value:e(g).reusable,"onUpdate:value":U[5]||(U[5]=ae=>e(g).reusable=ae),name:"reusable",class:"w-full"},{default:l(()=>[t(f,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(f,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(r,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t($,{value:e(g).contentType,"onUpdate:value":U[6]||(U[6]=ae=>e(g).contentType=ae),name:"contentType",class:"w-full"},{default:l(()=>[t(f,{value:e(At).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(f,{value:e(At).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(b,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(C,{value:e(g).params,"onUpdate:value":U[7]||(U[7]=ae=>e(g).params=ae),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),tn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},ln={id:"video",autoplay:"",controls:"",style:{width:"100%"}},an=["src"],nn=je({__name:"index",setup(ue){const a=nt(),d=at(),p=pt(),X=vt("appConfig"),{adIdentifiers:Q}=Fe(ml()),{loadAdIdentifiers:v}=ml(),{displayFormErrors:K,tr:T,fileUrl:ne,pickByTheme:F,appSecondaryColor:W,isInDevMode:Y}=Je(),{request:S}=Qe(),{t:m,locale:O}=He(),z=o(!1),q=o([]),B=o(""),g=o(),te={pageSize:12,prefix:({itemCount:C})=>ie("div",{class:"font-bold"},{default:()=>`${m("total")}: ${C}`})},R=[{title:m("preview"),key:"image",width:200,fixed:"left",render(C){var b;return((b=C.adIdentifier)==null?void 0:b.contentType)==At.IMAGE?ie(Qt,{src:C.contentUrl??"",objectFit:"cover",width:200,height:100}):ie("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[ie(de,{size:50,color:W.value},{default:()=>ie(ge,{icon:"carbon:document-video"})})])}},{title:m("identifier"),key:"pid",width:150,fixed:"left",render(C){return ie("small",{},{default:()=>C.pid})}},{title:m("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(C){return ie("div",{},{default:()=>T(C.title)})}},{title:m("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(C){return ie("small",{},{default:()=>T(C.description)})}},{title:m("status"),key:"isActive",width:100,render(C){return ie(Dt,{type:C.display?"success":"warning",bordered:!1},{default:()=>C.display?m("visible"):m("hidden")})},sortOrder:!1,sorter:"default"},{title:m("updateAt"),key:"updatedAt",width:125,render(C){return ie("div",{},{default:()=>Et(C.updatedAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:m("createdAt"),key:"createdAt",width:125,render(C){return ie("div",{},{default:()=>Et(C.createdAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ie(Ze,{ref:g,placeholder:m("search"),value:B.value,onInput:C=>{B.value=C}},{suffix:()=>ie(de,{},{default:()=>ie(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(C){return ie("div",{class:"flex justify-end items-center w-full"},[ie(Ve,{size:"small",type:"warning",onClick:()=>{c(C)},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:edit"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:m("confirm"),content:m("confirmDeleteAd"),positiveText:m("yes"),negativeText:m("no"),onPositiveClick:async()=>{(await S({method:"delete",url:`/ads/${C.id}`})).success?(d.success(m("success")),ee()):d.error(m("anErrorOccurred"))}})},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=Ae(()=>{if(!B.value)return q.value;const C=q.value.filter(b=>{var _e;return b.pid.toLowerCase().includes(B.value.toLowerCase())||b.title.toLowerCase().includes(B.value.toLowerCase())||((_e=b.description)==null?void 0:_e.toLowerCase().includes(B.value.toLowerCase()))});return g.value&&g.value.focus(),C}),ee=async()=>{z.value=!0;const C=await S({url:"/ads"});C.success&&C.result&&(q.value=C.result.data),await v(),z.value=!1};ee();const G=o(!1),U=o(!1),M=o(!1),x=o(At.IMAGE),H=o(),J=o(null),le=o(null),s=o({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),N={pid:[{required:!0,message:m("fillRequired")}],title:[{required:!0,message:m("fillRequired")}],content:[{required:!0,message:m("fillRequired")}]},A=Ae({get:()=>!s.value.broadcastStart||!s.value.broadcastEnd?null:[s.value.broadcastStart||"",s.value.broadcastEnd||""],set:C=>{C?(s.value.broadcastStart=C[0],s.value.broadcastEnd=C[1]):(s.value.broadcastStart=null,s.value.broadcastEnd=null)}}),c=C=>{var b;J.value=be.cloneDeep(C),C?(s.value=be.cloneDeep(C),C.data||(s.value.data={})):s.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},H.value=(b=Q.value.find(_e=>_e.id==s.value.pid))==null?void 0:b.params,U.value=!0},_=C=>ie("span",{},{default:()=>C.id+(C.contentSize?` (${C.contentSize})`:"")}),Z=async()=>{var C;return(C=le.value)==null||C.validate(async b=>{var _e,ae,k,h,oe,ke;if(!b)if(J.value)if(J.value.title!==s.value.title&&q.value.findIndex(he=>he.title==s.value.title)>-1)d.error(m("sameAdTitleMessage"));else{a.start(),G.value=!0;const he={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Ue=await S({method:"put",url:`/ads/${J.value.id}`,data:he});Ue.success&&Ue.result.data&&(d.success(m("success")),ee()),G.value=!1,a.finish(),U.value=!1}else if(q.value.findIndex(he=>he.title==s.value.title)>-1)d.error(m("sameAdTitleMessage"));else{a.start(),G.value=!0;const he={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Ue=await S({method:"post",url:"/ads",data:he});if(Ue.failure&&Ue.error)switch((k=(ae=(_e=Ue.error)==null?void 0:_e.response)==null?void 0:ae.data)==null?void 0:k.errorCode){case et.FORM_INVALID_DATA:K((ke=(oe=(h=Ue.error)==null?void 0:h.response)==null?void 0:oe.data)==null?void 0:ke.data);break;default:d.error(m("anErrorOccurred"))}else d.success(m("success")),ee();G.value=!1,a.finish(),U.value=!1}}),!1},u=o(!1),r=o(!1),V=o(!1),f=o(""),$=o("");return(C,b)=>{var j,pe;const _e=it,ae=Ct,k=gl,h=gt,oe=ft,ke=oa,he=$t,Ue=qt,Me=_l,ce=yl,Le=bt,we=Lt,se=xl,ye=mt,I=ut,Ce=Bt;return n(),D(me,null,[t(ae,{to:"#alt-action"},{default:l(()=>[t(_e,null,{default:l(()=>[e(Y)?(n(),E(e(Ve),{key:0,type:"warning",onClick:b[0]||(b[0]=re=>M.value=!0)},{default:l(()=>[t(e(de),{size:"26"},{default:l(()=>[t(e(ge),{icon:"carbon:id"})]),_:1}),P(" "+i(e(m)("identifiers")),1)]),_:1})):ve("",!0),t(e(Ve),{type:"primary",onClick:b[1]||(b[1]=re=>c(null))},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(k,{columns:R,data:e(L),pagination:te,loading:e(z),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"]),t(I,{show:e(U),"onUpdate:show":b[12]||(b[12]=re=>$e(U)?U.value=re:null),loading:e(G),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(m)("editAd"):e(m)("addAd"),"positive-text":e(m)("validate"),"negative-text":e(m)("cancel"),onPositiveClick:Z,onNegativeClick:b[13]||(b[13]=re=>U.value=!1)},{default:l(()=>[t(ye,{ref_key:"formRef",ref:le,class:"mt-5",model:e(s),rules:N,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Le,{cols:"24","x-gap":12},{default:l(()=>[t(we,{span:"12"},{default:l(()=>[t(oe,{label:e(m)("title"),path:"title"},{default:l(()=>[t(h,{modelValue:e(s).title,"onUpdate:modelValue":b[2]||(b[2]=re=>e(s).title=re),placeholder:e(m)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(oe,{label:e(m)("description"),path:"description"},{default:l(()=>[t(h,{modelValue:e(s).description,"onUpdate:modelValue":b[3]||(b[3]=re=>e(s).description=re),placeholder:e(m)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(oe,{label:e(m)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(ke,{"formatted-value":e(A),"onUpdate:formattedValue":b[4]||(b[4]=re=>$e(A)?A.value=re:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Le,{"x-gap":"12",span:24},{default:l(()=>[t(Ue,{span:12,label:e(m)("identifier"),path:"pid"},{default:l(()=>[t(he,{value:e(s).pid,"onUpdate:value":[b[5]||(b[5]=re=>e(s).pid=re),b[6]||(b[6]=()=>{var re;H.value=(re=e(Q).find(xe=>xe.id==e(s).pid))==null?void 0:re.params})],"render-label":_,options:e(Q).map(re=>({...re,disabled:!re.reusable&&(re.adsCount||0)>0})),placeholder:e(m)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ue,{span:12,label:e(m)("status"),path:"display"},{default:l(()=>[t(ce,{value:e(s).display,"onUpdate:value":b[7]||(b[7]=re=>e(s).display=re),name:"display",class:"w-full"},{default:l(()=>[t(Me,{value:!1,label:e(m)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Me,{value:!0,label:e(m)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(we,{span:"12"},{default:l(()=>[t(oe,{label:e(m)("content"),path:"content"},{default:l(()=>[e(x)==e(At).VIDEO?(n(),E(se,{key:0},{default:l(()=>[t(e(Ve),{type:"primary",onClick:b[8]||(b[8]=()=>{r.value=!0})},{default:l(()=>[P(i(e(m)("select")),1)]),_:1}),t(e(Ze),{value:e(s).content?e(Wt)(e(s).content):"",placeholder:e(m)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(s).content?(n(),D(me,{key:0},[t(e(Ve),{type:"primary",ghost:"",onClick:b[9]||(b[9]=()=>{f.value=e(m)("video"),$.value=e(ne)(e(s).content),V.value=!0})},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("play")),1)]),_:1}),t(e(Ve),{type:"primary",ghost:"",onClick:b[10]||(b[10]=()=>{e(s).content=""})},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(m)("clear")),1)]),_:1})],64)):ve("",!0)]),_:1})):(n(),D("div",tn,[y("div",{class:"cursor-pointer w-full h-[150px]",onClick:b[11]||(b[11]=()=>{u.value=!0})},[e(s).content?(n(),E(e(Qt),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Oe("border: 1px dashed "+e(F)("green","white")),src:e(ne)(e(s).content||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(F)("green","white"))},[t(e(de),{size:64},{default:l(()=>[t(e(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(H)&&Array.isArray(e(H))?(n(),E(oe,{key:0,label:e(m)("data"),path:"data"},{default:l(()=>[t(Le,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),D(me,null,Ne(e(H),(re,xe)=>(n(),D(me,{key:xe},[t(we,{span:10},{default:l(()=>[t(e(Ze),{value:re,placeholder:re,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(we,{span:14},{default:l(()=>[t(e(Ze),{value:e(s).data[re],"onUpdate:value":Ee=>e(s).data[re]=Ee,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):ve("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(I,{show:e(V),"onUpdate:show":b[14]||(b[14]=re=>$e(V)?V.value=re:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(f)},{default:l(()=>[y("video",ln,[y("source",{src:e($)},null,8,an)])]),_:1},8,["show","title"]),t(Ce,{show:e(u),"onUpdate:show":b[15]||(b[15]=re=>$e(u)?u.value=re:null),title:e(m)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((j=e(X))==null?void 0:j.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:b[16]||(b[16]=re=>{e(s).content=re,u.value=!1})},null,8,["show","title","upload-config"]),t(Ce,{show:e(r),"onUpdate:show":b[17]||(b[17]=re=>$e(r)?r.value=re:null),title:e(m)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((pe=e(X))==null?void 0:pe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:b[18]||(b[18]=re=>{e(s).content=re,r.value=!1})},null,8,["show","title","upload-config"]),t(en,{show:e(M),"onUpdate:show":b[19]||(b[19]=re=>$e(M)?M.value=re:null)},null,8,["show"])],64)}}});const sn=zt(nn,[["__scopeId","data-v-395e350d"]]),on={class:"w-full"},rn={class:"mb-2"},un={class:"text-base text-left"},dn=["src","onClick"],cn=["src"],pn=je({name:"AlbumsPicker"}),fn=je({...pn,props:Gt({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const a=_t(ue,"modelValue"),d=ue,{t:p}=He(),{fileUrl:X}=Je(),Q=o(!1),v=o(!1),K=o(0),T=o(""),ne=vt("appConfig"),F=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},W=m=>{a.value&&Array.isArray(a.value)?a.value.splice(m,1):a.value=[]},Y=(m,O)=>{a.value&&Array.isArray(a.value[O].medias)?a.value[O].medias.splice(m,1):a.value&&(a.value[O].medias=[])},S=m=>{var z,q;const O=((q=(z=m.split("."))==null?void 0:z.pop())==null?void 0:q.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(O)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(O)?"video":"unknown"};return(m,O)=>{var x;const z=ge,q=de,B=Ve,g=gt,te=Qt,R=hl("Draggable"),L=ia,ee=It,G=tt,U=Bt,M=ut;return n(),D("section",on,[y("section",rn,[t(G,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[y("div",un,i(d.title),1)]),"header-extra":l(()=>[d.readonly?ve("",!0):(n(),E(B,{key:0,quaternary:"",onClick:F},{icon:l(()=>[t(q,{size:"18"},{default:l(()=>[t(z,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),D(me,null,Ne(a.value,(H,J)=>(n(),E(G,{key:J,size:"small",embedded:"",hoverable:"",segmented:H.medias&&H.medias.length>0,class:"mb-4"},fa({header:l(()=>[t(g,{modelValue:H.name,"onUpdate:modelValue":le=>H.name=le,placeholder:e(p)("albumName"),"selector-span":5,disabled:d.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(ee,{style:{"max-height":"100%"}},{default:l(()=>[H.medias&&H.medias.length>0?(n(),E(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(R,{list:H.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),D(me,null,Ne(H.medias,(le,s)=>(n(),D("div",{key:"img-"+s,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[S(le)==="image"?(n(),E(te,{key:0,"object-fit":"cover",src:e(X)(le)},null,8,["src"])):(n(),D("video",{key:1,muted:"",src:e(X)(le),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{T.value=e(X)(le),v.value=!0}},null,8,dn)),d.readonly?ve("",!0):(n(),E(B,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:N=>Y(s,J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):ve("",!0)]),_:2},1024)]),_:2},[d.readonly?void 0:{name:"header-extra",fn:l(()=>[t(B,{quaternary:"",class:"mr-2",onClick:()=>{K.value=J,Q.value=!0}},{icon:l(()=>[t(q,null,{default:l(()=>[t(z,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"]),O[3]||(O[3]=y("div",{class:"w-2"},null,-1)),t(B,{quaternary:"",type:"error",onClick:le=>W(J)},{icon:l(()=>[t(q,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(U,{show:e(Q),"onUpdate:show":O[0]||(O[0]=H=>$e(Q)?Q.value=H:null),title:e(p)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((x=e(ne))==null?void 0:x.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:O[1]||(O[1]=H=>{a.value&&Array.isArray(a.value[e(K)].medias)?a.value[e(K)].medias.push(H):a.value&&(a.value[e(K)].medias=[H]),Q.value=!1})},null,8,["show","title","upload-config"]),t(M,{show:e(v),"onUpdate:show":O[2]||(O[2]=H=>$e(v)?v.value=H:null),preset:"card",style:{width:"500px"},title:e(p)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e(T)?(n(),D("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e(T)},null,8,cn)):ve("",!0)]),_:1},8,["show","title"])])}}});const mn=zt(fn,[["__scopeId","data-v-338a28a2"]]);function ya(){const{request:ue}=Qe(),a=o([]),d=K=>{const T=K.split("_"),ne={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},F={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(Y=>Y.replace(/([A-Z])(?=\.\w+$)/,(S,m)=>F[m]||m))(T[0]),T.length>1?ne[T[1]]:""]},p=()=>new Promise(K=>setTimeout(K)),X=async K=>{a.value=[];let T=1;for(const[ne,F]of Object.entries(K)){T&&T%5e3===0&&await p();const[W,Y]=d(ne);a.value.push({id:T,name:W,svgCode:F,library:Y}),T+=1}return a.value},Q=o(!1);return{searchIcons:async K=>{let T={};Q.value=!0;const ne=await ue({url:"/search-icons",method:"post",data:{query:K,decode:!1}});if(ne.success&&ne.result){try{T=JSON.parse(ne.result.data)}catch(F){T={},console.error(F)}T=await X(T)}return Q.value=!1,T},isSearching:Q,currentIconsList:a}}const vn=["innerHTML"],_n=je({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(ue){wl(Q=>({"95b6e21e":e(p),"22e3431a":e(d)}));const a=ue,d=Ae(()=>a.color),p=Ae(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),X=o();return ht(()=>a.data,async Q=>{var v,K;if(!Ql(Q||"")){const{currentIconsList:T}=ya();X.value=((K=(v=T.value)==null?void 0:v.find(ne=>ne.name==Q))==null?void 0:K.svgCode)||""}},{immediate:!0}),(Q,v)=>(n(),D("i",{innerHTML:e(Ql)(a.data||"")?a.data:e(X)},null,8,vn))}});const kl=zt(_n,[["__scopeId","data-v-09747f05"]]),yn={key:0,class:"multiple"},gn={key:0,class:"item"},bn={key:2,class:"flex items-center ml-2"},hn={key:1,class:"placeholder"},kn={class:"v3ip__search"},wn=["placeholder"],xn={key:0,class:"v3ip__loader"},Cn=["onClick"],In={key:1,class:"v3ip__empty"},$n={key:1,class:"default-text"},Vn={key:1,class:"default-text"},Tn=je({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(ue,{emit:a}){wl(R=>({86121764:e(p),24235862:e(Q)}));const d=ue,p=Ae(()=>typeof d.selectorHeight=="number"?`${d.selectorHeight}px`:d.selectorHeight),X=a,Q=o(d.selectedIconBgColor),v=o(""),K=o(!1),{currentIconsList:T,searchIcons:ne,isSearching:F}=ya();ht(()=>v.value,R=>{ne(R)},{immediate:!0});const W=Ae(()=>be.uniqBy(be.uniqBy(T.value.filter(R=>{var x,H;const L=typeof d.iconLibrary=="string"&&R.library==d.iconLibrary||Array.isArray(d.iconLibrary)&&d.iconLibrary.includes(R.library)||d.iconLibrary=="all",ee=!d.includeIcons||!d.includeIcons.length||d.includeIcons.includes(R.name),G=!d.includeSearch||((x=R.name)==null?void 0:x.toLocaleLowerCase().includes(d.includeSearch)),U=!d.excludeIcons||!d.excludeIcons.length||!d.excludeIcons.includes(R.name),M=!d.excludeSearch||!((H=R.name)!=null&&H.toLocaleLowerCase().includes(d.excludeSearch));return L&&ee&&G&&U&&M}),"svgCode"),"name")),Y=R=>d.valueType=="name"?R.name:R.svgCode,S=R=>{var L,ee;return d.valueType=="name"?((ee=(L=T.value)==null?void 0:L.find(G=>G.name==R))==null?void 0:ee.svgCode)||"":R},m=R=>d.multiple?d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length?d.modelValue.findIndex(L=>L==Y(R))>-1:!1:d.modelValue==Y(R),O=R=>{if(R)if(d.multiple)if(d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length){const L=d.modelValue,ee=d.modelValue.findIndex(G=>G==Y(R));ee>-1?L.splice(ee,1):d.modelValue.length<d.multipleLimit&&typeof Y(R)<"u"&&L.push(Y(R)),X("update:modelValue",L),X("change",L,R)}else d.multipleLimit>0&&(X("update:modelValue",[Y(R)]),X("change",[Y(R)],R));else Y(R)==d.modelValue?d.clearable&&X("update:modelValue",null):X("update:modelValue",Y(R)),X("change",R)},z=o();Fa(z,()=>K.value=!1);const q=o(),{width:B}=ja(q),g=Oa(),te=R=>!!g[R];return(R,L)=>{var x,H,J,le;const ee=ge,G=de,U=Ve,M=Kt;return n(),D("div",{ref_key:"picker",ref:z,class:"v3ip__custom-select",onBlur:L[4]||(L[4]=s=>K.value=!1)},[y("div",{class:Ye(["v3ip__selected",{open:e(K),disabled:d.disabled}]),onClick:L[2]||(L[2]=s=>K.value=d.disabled?!1:!e(K))},[!d.multiple&&d.modelValue||d.multiple&&Array.isArray(d.modelValue)&&((x=d.modelValue)!=null&&x.length)?(n(),D(me,{key:0},[d.multiple?(n(),D("div",yn,[Array.isArray(d.modelValue)?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(d.modelValue||[],(s,N)=>(n(),D(me,{key:N},[N<d.selectedItemsToDisplay?(n(),E(kl,{key:0,class:"item",data:typeof S(s)=="string"?S(s):null,size:20,onClick:ot(A=>{var c;return O((c=e(T))==null?void 0:c.find(_=>Y(_)==s))},["stop"])},null,8,["data","onClick"])):ve("",!0)],64))),128)),((H=d.modelValue)==null?void 0:H.length)>d.selectedItemsToDisplay?(n(),D("div",gn,[y("b",null," +"+i(((J=d.modelValue)==null?void 0:J.length)-d.selectedItemsToDisplay),1)])):ve("",!0)],64)):ve("",!0)])):(n(),E(kl,{key:1,data:typeof S(d.modelValue)=="string"?S(d.modelValue):null,size:20,onClick:L[0]||(L[0]=ot(s=>{var N;return O((N=e(T))==null?void 0:N.find(A=>Y(A)==d.modelValue))},["stop"]))},null,8,["data"])),(le=d.modelValue)!=null&&le.length&&d.clearable?(n(),D("div",bn,[t(U,{type:"error",size:"tiny",secondary:"",onClick:L[1]||(L[1]=ot(()=>{X("update:modelValue",d.multiple?[]:null)},["stop"]))},{default:l(()=>[t(G,null,{default:l(()=>[t(ee,{icon:"mdi:close"})]),_:1})]),_:1})])):ve("",!0)],64)):(n(),D("span",hn,i(d.placeholder),1))],2),t(xa,{name:"fade"},{default:l(()=>[il(y("div",null,[y("div",kn,[il(y("input",{"onUpdate:modelValue":L[3]||(L[3]=s=>$e(v)?v.value=s:null),type:"text",name:"search",placeholder:d.searchPlaceholder},null,8,wn),[[wa,e(v)]])]),e(F)?(n(),D("div",xn,[t(M,{size:"small"})])):(n(),D(me,{key:1},[e(W)&&e(W).length?(n(),E(e(Ba),{key:0,ref_key:"scroller",ref:q,class:"v3ip__items",items:e(W),"item-size":40,"grid-items":4,"item-secondary-size":e(B)/4},{default:l(({item:s})=>[y("div",{class:Ye({active:m(s)}),onClick:N=>O(s)},[t(kl,{data:typeof s.svgCode=="string"?s.svgCode:null,size:24,color:m(s)?d.selectedIconColor:void 0},null,8,["data","color"])],10,Cn)]),_:1},8,["items","item-secondary-size"])):(n(),D("div",In,[e(v)?(n(),D(me,{key:0},[te("empty")?qa(R.$slots,"empty",{key:0},void 0,!0):(n(),D("div",$n,[y("small",null,i(d.emptyText),1)]))],64)):(n(),D("div",Vn,[y("small",null,i(d.iconsListPlaceholder),1)]))]))],64))],512),[[pl,e(K)]])]),_:3})],544)}}});const ga=zt(Tn,[["__scopeId","data-v-20cc11c7"]]),zn={class:"w-full"},Un={class:"mb-2"},Sn={class:"text-base text-left"},Mn=je({name:"GridImagesPicker"}),An=je({...Mn,props:Gt({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const a=_t(ue,"modelValue"),d=vt("appConfig"),p=ue,{t:X}=He(),{fileUrl:Q}=Je(),v=o(!1),K=ne=>{Array.isArray(a.value)?a.value.splice(ne,1):a.value=[]},T=async ne=>{Array.isArray(a.value)?a.value.push(...ne):a.value=[...ne],v.value=!1};return(ne,F)=>{var te;const W=ge,Y=de,S=Ve,m=Qt,O=hl("Draggable"),z=ia,q=It,B=tt,g=Bt;return n(),D("section",zn,[y("section",Un,[t(B,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[y("div",Sn,i(p.title),1)]),"header-extra":l(()=>[p.readonly?ve("",!0):(n(),E(S,{key:0,quaternary:"",onClick:F[0]||(F[0]=R=>v.value=!0)},{icon:l(()=>[t(Y,{size:"18"},{default:l(()=>[t(W,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("add")),1)]),_:1}))]),default:l(()=>[t(q,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),E(z,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(O,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),D(me,null,Ne(a.value,(R,L)=>(n(),D("div",{key:"img-"+L,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(m,{width:"100","object-fit":"cover",src:e(Q)(R)},null,8,["src"]),p.readonly?ve("",!0):(n(),E(S,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:ee=>K(L)},{icon:l(()=>[t(Y,null,{default:l(()=>[t(W,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):ve("",!0)]),_:1})]),_:1},8,["segmented"])]),t(g,{show:e(v),"onUpdate:show":F[1]||(F[1]=R=>$e(v)?v.value=R:null),title:e(X)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((te=e(d))==null?void 0:te.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:T},null,8,["show","title","upload-config"])])}}});const En=zt(An,[["__scopeId","data-v-12efa615"]]);var rt=(ue=>(ue.EXTERNAL_LINK="external-link",ue.PAGE_LINK="page-link",ue.CONTENT_LINK="content-link",ue))(rt||{}),lt=(ue=>(ue.NEWS_TAG="news-tag",ue.NEWS_CATEGORY="news-category",ue.NEWS_ARTICLE="news-article",ue.CONTENT_MODEL="content-model",ue))(lt||{});const rl=()=>{const{t:ue}=He(),{tr:a}=Je(),d=(v,K)=>{if(K&&K.titleFieldName)return Zl(v.contentModelData.index[K.titleFieldName])?a(v.contentModelData.index[K.titleFieldName]):v.contentModelData.index[K.titleFieldName];if(v.contentModelData&&v.contentModelData.index){const T=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const ne of T)if(v.contentModelData.index[ne])return Zl(v.contentModelData.index[ne])?a(v.contentModelData.index[ne]):v.contentModelData.index[ne]}return a(v.title)},p=[{label:ue("contentModel"),value:lt.CONTENT_MODEL,tagType:"warning"},{label:ue("newsArticle"),value:lt.NEWS_ARTICLE,tagType:"info"},{label:ue("newsCategory"),value:lt.NEWS_CATEGORY,tagType:"success"},{label:ue("newsTag"),value:lt.NEWS_TAG,tagType:"error"}];return{contentTypes:p,getContentTypeLabel:v=>{var K;return(K=p.find(T=>T.value===v))==null?void 0:K.label},getContentTypeTagType:v=>{var K;return((K=p.find(T=>T.value===v))==null?void 0:K.tagType)||"default"},extractItemTitle:d}},Dn={key:4,class:"w-full"},Ln={key:5,class:"w-full"},Pn={key:11,class:"w-full flex flex-gap-8 items-center justify-start"},Nn=["onClick"],Rn={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},On=["src"],qn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Fn=["src"],jn=je({name:"FormGenerator"}),Bn=je({...jn,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(ue,{emit:a}){const d=ue,p=a,{t:X}=He(),{tr:Q,pickByTheme:v,fileUrl:K,mergeArrays:T}=Je(),{extractItemTitle:ne}=rl(),{request:F}=Qe(),{loadContentModels:W}=We(),{contentModels:Y}=Fe(We());W();const S=vt("appConfig");let m=[];if(typeof d.items=="string")try{m=JSON.parse(d.items)}catch{m=[]}else m=be.cloneDeep(d.items);let O={};if(d.useJson)try{O=JSON.parse(d.modelValue)}catch{O={}}const z=o(""),q=o(ct()),B=o(null),g=o(d.useJson?O:d.modelValue),te={};m.forEach(j=>{j.key in g.value||(j.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(j.type)?g.value[j.key]=JSON.parse(j.defaultValue):j.type=="number"?g.value[j.key]=parseFloat(j.defaultValue):j.type=="content-model-item"?g.value[j.key]=void 0:j.type=="content-model-items"?g.value[j.key]=[]:g.value[j.key]=j.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(j.type)?g.value[j.key]="":["number"].includes(j.type)?g.value[j.key]=0:["checkbox"].includes(j.type)?g.value[j.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums"].includes(j.type)?g.value[j.key]=[]:g.value[j.key]=void 0),j.required&&(te[j.key]=[{required:!0,message:X("fillRequired")}]),q.value=ct()});const R=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],L=j=>ie("span",{},{default:()=>Q(j.label)});ht(()=>g.value,j=>{const pe=d.useJson?JSON.stringify(j):j,re=async()=>{var Ee;if(m.length==0)return!0;let xe=!1;try{await((Ee=B.value)==null?void 0:Ee.validate(ze=>{xe=!ze}))}catch{xe=!1}return xe};p("update:modelValue",pe),p("update",pe,re)},{immediate:!0,deep:!0});const ee=yt(),G=Ae(()=>ee.isLightTheme?"light":"dark"),U=o(!1),M=o(!1),x=o(!1),H=o(""),J=o(""),le=o(!1),s=o(!1),N=o(""),A=o(""),c=o(!1),_=j=>{window.open(j,"_blank")},Z=o(!1),u=o(!1),r=o([]);(async()=>{var pe;u.value=!0;const j=await F({url:"/menu/items"});if(j.success&&j.result)for(let re=0;re<((pe=j.result.data)==null?void 0:pe.length);re++)switch(j.result.data[re].targetType){case rt.EXTERNAL_LINK:r.value.findIndex(xe=>xe.url===j.result.data[re].url)===-1&&r.value.push(j.result.data[re]);break;case rt.PAGE_LINK:r.value.findIndex(xe=>xe.path===j.result.data[re].path)===-1&&r.value.push(j.result.data[re]);break}u.value=!1})();const f=o(!1),$=o([]),C=o([]),b=async(j,pe)=>{if(!j.length){C.value=[];return}f.value=!0;const re=await F({url:`/content-model-items/search/${j}/${pe}`});re.success&&re.result&&(C.value=re.result.data),f.value=!1},_e=Ae(()=>T($.value,C.value,"id")),ae=o(!1),k=o([]),h=o([]),oe=async j=>{if(!j.length){h.value=[];return}ae.value=!0;const pe=await F({url:`/news-articles/search/${j}`});pe.success&&pe.result&&(h.value=pe.result.data),ae.value=!1},ke=Ae(()=>T(k.value,h.value,"id")),{categories:he,tags:Ue}=Fe(Jt()),{loadCategories:Me,loadTags:ce}=Jt();Il(async()=>{m.find(j=>j.type==="news-categories"||j.type==="news-category")&&(Me(),ce());for(let j=0;j<m.length;j++)if(m[j].type==="news-articles"||m[j].type==="news-article"){ae.value=!0;const pe=g.value[m[j].key],re=await F({url:"/news-articles/list",method:"post",data:{ids:m[j].type==="news-articles"?pe:[pe]}});re.success&&re.result&&(k.value=T(k.value,re.result.data,"id")),ae.value=!1}else if(m[j].type==="content-model-items"||m[j].type==="content-model-item"){f.value=!0;const pe=g.value[m[j].key],re=await F({url:"/content-model-items/list",method:"post",data:{ids:m[j].type==="content-model-items"?pe:[pe]}});re.success&&re.result&&($.value=T($.value,re.result.data,"id")),f.value=!1}});const Le=j=>ie("span",{},{default:()=>`${Q(j.name)}`}),we=j=>ie("span",{},{default:()=>`${Q(j.title)}`}),se=j=>ie("span",{},{default:()=>`${Q(j.name)}`}),ye=j=>Ae(()=>ie("span",{},{default:()=>{var pe;return ne(j,(pe=Y.value)==null?void 0:pe.find(re=>re.id===j.contentModelId))}})),I=({option:j})=>ie("div",{style:{display:"flex",alignItems:"center"}},[`${Q(j.title)}`]),Ce=j=>ie("div",{style:{marginLeft:"12px",padding:"4px 0"}},[ie("div",{},{default:()=>`${Q(j.title)}`}),ie("small",{},{default:()=>`${j.targetType==rt.EXTERNAL_LINK?j.url:j.path}`})]);return(j,pe)=>{var ul,dl,nl,sl,ol;const re=Ze,xe=gt,Ee=va,ze=Cl,Pe=Yt,Ge=oa,st=$t,wt=Qt,De=ge,Xe=de,Be=Ve,fe=En,Ke=ga,Vt=mn,Pt=xl,Nt=ft,Ut=mt,Te=ut,dt=Bt;return n(),D(me,null,[(n(),E(Ut,{ref_key:"formRef",ref:B,key:e(q),model:e(g),rules:te,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Oe(d.formStyle)},{default:l(()=>[(n(!0),D(me,null,Ne(e(m),(w,Ie)=>(n(),E(Nt,{key:Ie,label:e(Q)(w.label),path:w.key,"label-style":d.labelStyle,"show-require-mark":w.required,class:"w-full"},{default:l(()=>{var Ft,Ht,$l,Vl,Tl,zl,Ul,Sl,Ml,Al,El,Dl,Ll,Pl,Nl,Rl,Ol,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl;return[w.type=="text"?(n(),E(re,{key:0,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),maxlength:((Ft=w.settings)==null?void 0:Ft.maxLength)||void 0,minlength:((Ht=w.settings)==null?void 0:Ht.minLength)||void 0,clearable:(($l=w.settings)==null?void 0:$l.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):w.type=="i18n-text"?(n(),E(xe,{key:1,modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):w.type=="textarea"?(n(),E(re,{key:2,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),maxlength:((Vl=w.settings)==null?void 0:Vl.maxLength)||void 0,minlength:((Tl=w.settings)==null?void 0:Tl.minLength)||void 0,clearable:((zl=w.settings)==null?void 0:zl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):w.type=="i18n-textarea"?(n(),E(xe,{key:3,modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):w.type=="editor"?(n(),D("div",Dn,[t(Ee,{modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),"toolbar-items":R,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):w.type=="i18n-editor"?(n(),D("div",Ln,[t(xe,{modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):w.type=="number"?(n(),E(ze,{key:6,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,max:((Ul=w.settings)==null?void 0:Ul.max)||void 0,min:((Sl=w.settings)==null?void 0:Sl.min)||void 0,step:((Ml=w.settings)==null?void 0:Ml.step)||1,clearable:((Al=w.settings)==null?void 0:Al.clearable)||!1,placeholder:e(Q)(w.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):w.type=="checkbox"?(n(),E(Pe,{key:7,checked:e(g)[w.key],"onUpdate:checked":Se=>e(g)[w.key]=Se,"checked-value":((El=w.settings)==null?void 0:El["checked-value"])||!0,"unchecked-value":((Dl=w.settings)==null?void 0:Dl["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):w.type=="date"?(n(),E(Ge,{key:8,"formatted-value":e(g)[w.key],"onUpdate:formattedValue":Se=>e(g)[w.key]=Se,"value-format":"yyyy-MM-dd",format:((Ll=w.settings)==null?void 0:Ll.format)||"dd MMMM yyyy",type:"date",clearable:((Pl=w.settings)==null?void 0:Pl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):w.type=="year"?(n(),E(Ge,{key:9,"formatted-value":e(g)[w.key],"onUpdate:formattedValue":Se=>e(g)[w.key]=Se,"value-format":"yyyy",type:"year",clearable:((Nl=w.settings)==null?void 0:Nl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):w.type=="single-select"||w.type=="multi-select"?(n(),E(st,{key:10,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:w.options||[],multiple:w.type=="multi-select",placeholder:e(Q)(w.label),"render-label":L,"label-field":"label","value-field":"value",filterable:"",clearable:((Rl=w.settings)==null?void 0:Rl.clearable)||!0,"max-tag-count":((Ol=w.settings)==null?void 0:Ol["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):w.type=="image"?(n(),D("div",Pn,[y("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{z.value=w.key,U.value=!0}},[e(g)[w.key]?(n(),E(wt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Oe("border: 1px dashed "+e(v)("green","white")),src:e(K)(e(g)[w.key]||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(v)("green","white"))},[t(Xe,{size:64},{default:l(()=>[t(De,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Nn),e(g)[w.key]?(n(),E(Be,{key:0,quaternary:"",onClick:()=>{z.value=w.key,e(g)[e(z)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])):ve("",!0)])):w.type=="gallery"?(n(),E(fe,{key:12,modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,"upload-folder":"images",title:e(Q)(w.label)},null,8,["modelValue","onUpdate:modelValue","title"])):w.type=="news-category"||w.type=="news-categories"?(n(),E(st,{key:13,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:e(he)||[],multiple:w.type=="news-categories",placeholder:e(Q)(w.label),"render-label":Le,"label-field":"name","value-field":"id",filterable:"",clearable:((ql=w.settings)==null?void 0:ql.clearable)||!0,"max-tag-count":((Fl=w.settings)==null?void 0:Fl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):w.type=="news-tag"||w.type=="news-tags"?(n(),E(st,{key:14,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:e(Ue)||[],multiple:w.type=="news-tags",placeholder:e(Q)(w.label),"render-label":se,"label-field":"name","value-field":"id",filterable:"",clearable:((jl=w.settings)==null?void 0:jl.clearable)||!0,"max-tag-count":((Bl=w.settings)==null?void 0:Bl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):w.type=="news-article"||w.type=="news-articles"?(n(),E(st,{key:15,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:e(ke)||[],multiple:w.type=="news-articles",placeholder:e(Q)(w.label),"render-label":we,loading:e(ae),"value-field":"id",filterable:"",clearable:((Kl=w.settings)==null?void 0:Kl.clearable)||!0,"max-tag-count":((Yl=w.settings)==null?void 0:Yl["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:oe},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):w.type=="icon"||w.type=="icons"?(n(),E(Ke,{key:16,modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,placeholder:e(Q)(w.label),multiple:w.type=="icons","icons-list-placeholder":e(X)("enterIconNameInSearchBar"),"search-placeholder":e(X)("search"),"empty-text":e(X)("noIconsFound"),"icon-library":((Gl=w.settings)==null?void 0:Gl.library)||"all",clearable:((Hl=w.settings)==null?void 0:Hl.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):w.type=="albums"?(n(),E(Vt,{key:17,modelValue:e(g)[w.key],"onUpdate:modelValue":Se=>e(g)[w.key]=Se,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):w.type=="audio"?(n(),E(Pt,{key:18},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{z.value=w.key,le.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(re,{value:e(g)[w.key]?e(Wt)(e(g)[w.key]):"",placeholder:e(X)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(g)[w.key]?(n(),D(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:()=>{N.value=e(Q)(w.label),A.value=e(K)(e(g)[w.key]),s.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{z.value=w.key,e(g)[e(z)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):ve("",!0)]),_:2},1024)):w.type=="video"?(n(),E(Pt,{key:19},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{z.value=w.key,M.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(re,{value:e(g)[w.key]?e(Wt)(e(g)[w.key]):"",placeholder:e(X)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(g)[w.key]?(n(),D(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:()=>{H.value=e(Q)(w.label),J.value=e(K)(e(g)[w.key]),x.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{z.value=w.key,e(g)[e(z)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):ve("",!0)]),_:2},1024)):w.type=="document"?(n(),E(Pt,{key:20},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{z.value=w.key,c.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(re,{value:e(g)[w.key]?e(Wt)(e(g)[w.key]):"",placeholder:e(X)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(g)[w.key]?(n(),D(me,{key:0},[t(Be,{type:"primary",ghost:"",onClick:Se=>_(e(K)(e(g)[w.key]))},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("open")),1)]),_:2},1032,["onClick"]),t(Be,{type:"primary",ghost:"",onClick:()=>{z.value=w.key,e(g)[e(z)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):ve("",!0)]),_:2},1024)):w.type=="file"?(n(),E(Pt,{key:21},{default:l(()=>[t(Be,{type:"primary",onClick:()=>{z.value=w.key,Z.value=!0}},{default:l(()=>[P(i(e(X)("select")),1)]),_:2},1032,["onClick"]),t(re,{value:e(g)[w.key]?e(Wt)(e(g)[w.key]):"",placeholder:e(X)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(g)[w.key]?(n(),E(Be,{key:0,type:"primary",ghost:"",onClick:()=>{z.value=w.key,e(g)[e(z)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(De,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(X)("clear")),1)]),_:2},1032,["onClick"])):ve("",!0)]),_:2},1024)):w.type=="color"?(n(),E(e(Zt),{key:22,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,class:"cursor-pointer",theme:e(G),format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):w.type=="content-model-item"||w.type=="content-model-items"?(n(),E(st,{key:23,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:e(_e)||[],multiple:w.type=="content-model-items",placeholder:e(Q)(w.label),"render-label":Se=>ye(Se).value,loading:e(f),"value-field":"id",filterable:"",clearable:((Wl=w.settings)==null?void 0:Wl.clearable)||!0,"max-tag-count":((Jl=w.settings)==null?void 0:Jl["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:Se=>b(Se,w.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):w.type=="menu-item-link"?(n(),E(st,{key:24,value:e(g)[w.key],"onUpdate:value":Se=>e(g)[w.key]=Se,options:e(r)||[],placeholder:e(Q)(w.label),"render-label":Ce,"render-tag":I,loading:e(u),"label-field":"title","value-field":"id",filterable:"",clearable:((Xl=w.settings)==null?void 0:Xl.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):ve("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(Te,{show:e(s),"onUpdate:show":pe[0]||(pe[0]=w=>$e(s)?s.value=w:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(N)},{default:l(()=>[y("audio",Rn,[y("source",{src:e(A)},null,8,On)])]),_:1},8,["show","title"]),t(Te,{show:e(x),"onUpdate:show":pe[1]||(pe[1]=w=>$e(x)?x.value=w:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(H)},{default:l(()=>[y("video",qn,[y("source",{src:e(J)},null,8,Fn)])]),_:1},8,["show","title"]),t(dt,{show:e(U),"onUpdate:show":pe[2]||(pe[2]=w=>$e(U)?U.value=w:null),title:e(X)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(S))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe[3]||(pe[3]=w=>{e(g)[e(z)]=w,U.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(M),"onUpdate:show":pe[4]||(pe[4]=w=>$e(M)?M.value=w:null),title:e(X)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((dl=e(S))==null?void 0:dl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe[5]||(pe[5]=w=>{e(g)[e(z)]=w,M.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(le),"onUpdate:show":pe[6]||(pe[6]=w=>$e(le)?le.value=w:null),title:e(X)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((nl=e(S))==null?void 0:nl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe[7]||(pe[7]=w=>{e(g)[e(z)]=w,le.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(c),"onUpdate:show":pe[8]||(pe[8]=w=>$e(c)?c.value=w:null),title:e(X)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((sl=e(S))==null?void 0:sl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe[9]||(pe[9]=w=>{e(g)[e(z)]=w,c.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(Z),"onUpdate:show":pe[10]||(pe[10]=w=>$e(Z)?Z.value=w:null),title:e(X)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ol=e(S))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe[11]||(pe[11]=w=>{e(g)[e(z)]=w,Z.value=!1})},null,8,["show","title","upload-config"])],64)}}});const vl=zt(Bn,[["__scopeId","data-v-8b81ecc9"]]),Kn={key:0},Yn={class:"flex items-center"},Gn={class:"text-base"},Hn={class:"flex items-center justify-center cursor-pointer gap-2"},Wn={key:1},Jn={class:"mt-4"},Xn={class:"my-8"},Zn={class:"flex items-center justify-between"},Qn={class:"text-base"},es=je({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(ue,{emit:a}){const d=pt(),{t:p}=He(),X=ue,Q=a,v=o(ct()),K=o({}),T=o({}),ne=o(),F=o(),W=o(),Y=o([]),S=o([]),m=o({}),O=o({}),z=o(!1),q=at(),B=nt(),{request:g}=Qe(),{tr:te,pickByTheme:R,editKeysToCamelCase:L}=Je(),{sections:ee}=Fe(We()),{isLightTheme:G}=Fe(yt()),U=async()=>{var $,C,b,_e;z.value=!0,B.start();const f=await g({url:`/pages/${X.slug}`});if(f.success&&f.result){if(W.value=f.result.data,($=W.value)!=null&&$.sections&&Array.isArray((C=W.value)==null?void 0:C.sections)){const ae={};for(const k of W.value.sections)k&&(ae[k.slug]=k.dataSourcePageSectionsData??{});for(const k of W.value.sections)k&&(be.isObject(ae)&&be.has(ae,k.slug)&&aa(ae[k.slug])?K.value[k.slug]=Rt(ae[k.slug]):K.value[k.slug]=Rt({}),be.forIn(L(k.dataStructure),(h,oe)=>{(!K.value[k.slug][oe]||Array.isArray(K.value[k.slug][oe])&&K.value[k.slug][oe].length==0)&&(oe==="index"?K.value[k.slug][oe]=Rt({}):K.value[k.slug][oe]=Rt([]))}))}if(W.value&&Array.isArray((b=W.value)==null?void 0:b.sections)){const ae=W.value.sections;if(Array.isArray((_e=W.value)==null?void 0:_e.sectionsOrder)){Y.value=[];for(const k of W.value.sectionsOrder)if(k){const h=ae.find(oe=>oe.slug===k);h&&Y.value.push(h)}for(const k of ae)Y.value.map(h=>h.slug).includes(k.slug)||Y.value.push(k)}else Y.value=be.cloneDeep(ae);if(Array.isArray(W.value.sectionsDisabled))for(const k of W.value.sections)k&&(m.value[k.slug]=!W.value.sectionsDisabled.includes(k.slug));else for(const k of W.value.sections)k&&(m.value[k.slug]=!0)}O.value=be.cloneDeep(m.value),S.value=be.cloneDeep(Y.value),T.value=be.cloneDeep(K.value)}v.value=ct(),B.finish(),z.value=!1};U();const M=f=>ie("span",{},{default:()=>{var $;return f.id===(($=W.value)==null?void 0:$.id)?p("currentPage"):te(f.title)}}),x=Ae(()=>be.isEqual(K.value,T.value)&&be.isEqual(Y.value,S.value)&&be.isEqual(m.value,O.value)),H=async()=>{z.value=!0,B.start();const f=ne.value&&await ne.value(),$=F.value&&await F.value();if((!ne.value||f)&&(!F.value||$)){const C=await g({url:`/pages/${X.slug}`,method:"put",data:{dispatchData:!0,sectionsData:K.value,sectionsOrder:Y.value.map(b=>b.slug),sectionsDisabled:Object.keys(m.value).filter(b=>!m.value[b])}});C.success&&C.result?(q.success(p("success")),U()):q.error(p("anErrorOccurred"))}else q.error(p("mandatoryFieldsNotFilledIn"));B.finish(),z.value=!1},J=async f=>{d.warning({title:p("confirm"),content:p("confirmDeletePage"),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{(await g({method:"delete",url:`/pages/${f.slug}`})).success?(Q("delete",W.value),q.success(p("success"))):q.error(p("anErrorOccurred"))}})},le=o(!1),s=o([]),N=o(!1),A=()=>{s.value=[],Y.value.forEach(f=>{f.id&&s.value.push(f.id)}),N.value=!0},c=f=>{f.id&&(s.value.includes(f.id)?s.value=s.value.filter($=>$!==f.id):s.value.push(f.id))},_=f=>Ae({get:()=>f.id?s.value.includes(f.id):!1,set:$=>{f.id&&($?s.value=s.value.filter(C=>C!==f.id):s.value.includes(f.id)||s.value.push(f.id))}}),Z=f=>{f.id&&(s.value=[],Y.value.forEach($=>{$.id&&$.id!==f.id&&s.value.push($.id)}),u())},u=async()=>{le.value=!0,B.start();const f=await g({url:`/pages/${X.slug}`,method:"put",data:{sectionsIds:s.value}});f.success&&f.result?(q.success(p("success")),U()):q.error(p("anErrorOccurred")),B.finish(),le.value=!1},r=async(f,$)=>{var b;le.value=!0,B.start();const C=await g({url:`/sections/${f.slug}/data-source-page`,method:"put",data:{pageId:(b=W.value)==null?void 0:b.id,sourcePageId:$}});C.success&&C.result?(q.success(p("success")),U()):q.error(p("anErrorOccurred")),B.finish(),le.value=!1},V=async(f,$)=>{x.value?r(f,$):d.warning({title:p("confirm"),content:p("confirmUpdateDataSourcePage"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:()=>r(f,$)})};return(f,$)=>{const C=ge,b=de,_e=Ve,ae=Tt,k=it,h=Ct,oe=Yt,ke=Dt,he=tt,Ue=$t,Me=tl,ce=ll,Le=hl("Draggable"),we=kt,se=It,ye=ut;return n(),D(me,null,[t(h,{to:"#alt-action"},{default:l(()=>[t(k,{align:"center"},{default:l(()=>[t(_e,{type:"error",disabled:e(z),onClick:$[0]||($[0]=I=>e(W)?J(e(W)):null)},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("delete")),1)]),_:1},8,["disabled"]),t(_e,{type:"info",disabled:e(z),onClick:$[1]||($[1]=I=>e(W)?f.openFormModal(e(W)):null)},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("editPage")),1)]),_:1},8,["disabled"]),t(ae,{vertical:"",class:Ye(e(R)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(_e,{type:"primary",loading:e(z),disabled:e(x),onClick:$[2]||($[2]=I=>H())},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),e(W)&&Array.isArray(e(W).sections)&&e(W).sections.length?(n(),D("section",Kn,[t(Le,{list:e(Y)},{default:l(()=>[(n(!0),D(me,null,Ne(e(Y),(I,Ce)=>(n(),E(he,{key:I.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(ce,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:j})=>[t(b,null,{default:l(()=>[j?(n(),E(C,{key:0,icon:"fa-solid:chevron-left"})):(n(),E(C,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>$[8]||($[8]=[y("span",null,null,-1)])),default:l(()=>[t(Me,{name:"1"},{header:l(()=>[y("div",Yn,[t(b,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(C,{icon:"fa-solid:grip-lines"})]),_:1}),t(oe,{checked:e(m)[I.slug],"onUpdate:checked":j=>e(m)[I.slug]=j,size:"small",class:"mr-4",onClick:$[3]||($[3]=ot(()=>{},["stop"]))},{default:l(()=>[P(i(e(p)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(ke,{size:"small",type:"info"},{default:l(()=>[P(i(Ce+1),1)]),_:2},1024),t(ae,{vertical:"",class:Ye(e(R)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),y("span",Gn,i(e(te)(I.title)),1)])]),default:l(()=>[(n(!0),D(me,null,Ne(e(L)(I.dataStructure),(j,pe)=>(n(),D(me,{key:pe},[String(pe)==="index"?(n(),E(he,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),E(vl,{key:`${e(v)}-${pe}-form-1`,modelValue:e(K)[I.slug][pe],"onUpdate:modelValue":re=>e(K)[I.slug][pe]=re,items:j,onUpdate:(re,xe)=>{ne.value=xe}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),E(he,{key:1,title:e(te)(j.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(_e,{quaternary:"",size:"small",onClick:()=>e(K)[I.slug][pe].push({})},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),D(me,null,Ne(e(K)[I.slug][pe],(re,xe)=>(n(),E(he,{key:xe,title:String(xe+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(_e,{type:"error",size:"small",onClick:()=>e(K)[I.slug][pe].splice(xe,1)},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),E(vl,{key:`${e(v)}-${pe}-${xe}-form-2`,modelValue:e(K)[I.slug][pe][xe],"onUpdate:modelValue":Ee=>e(K)[I.slug][pe][xe]=Ee,items:j.items,onUpdate:(Ee,ze)=>{F.value=ze}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(k,null,{default:l(()=>[t(_e,{size:"small",type:"error",secondary:e(G),onClick:j=>Z(I)},{default:l(()=>[t(b,{size:"21"},{default:l(()=>[t(C,{icon:"carbon:close"})]),_:1}),P(" "+i(e(p)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(ae,{vertical:"",class:Ye(e(R)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(k,{align:"center"},{default:l(()=>[y("span",null,i(e(p)("dataSourcePage")),1),t(Ue,{value:I.dataSourcePageId,options:I.pages||[],placeholder:e(p)("select"),"render-label":M,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":j=>V(I,j)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(he,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:$[4]||($[4]=I=>A())},{default:l(()=>[y("div",Hn,[t(b,{size:"20"},{default:l(()=>[t(C,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(p)("addSection")),1)])]),_:1})])):(n(),D("section",Wn,[t(he,{size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(R)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(we,{description:e(p)("noSectionOnThisPage")},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[y("div",Jn,[t(_e,{size:"small",onClick:$[5]||($[5]=I=>A())},{icon:l(()=>[t(b,null,{default:l(()=>[t(C,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),t(ye,{show:e(N),"onUpdate:show":$[6]||($[6]=I=>$e(N)?N.value=I:null),loading:e(le),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(p)("addSections"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:u,onNegativeClick:$[7]||($[7]=I=>N.value=!1)},{default:l(()=>[y("section",Xn,[t(se,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(ee),I=>(n(),E(he,{key:I.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Ce=>c(I)},{default:l(()=>[y("div",Zn,[y("span",Qn,i(e(te)(I.title)),1),t(oe,{checked:_(I).value,"onUpdate:checked":Ce=>_(I).value=Ce,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ts={class:"flex items-center justify-between"},ls={class:"flex flex-col"},as={class:"text-sm font-bold"},ns=je({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:X,displayFormErrors:Q}=Je(),v=_t(ue,"show"),{menuItemGroups:K}=Fe(We()),{loadMenuItemGroups:T}=We(),{isLightTheme:ne}=Fe(yt()),F=o(!1),W=async()=>{F.value=!0,await T(),F.value=!1};W();const Y=pt(),S=at(),m=nt(),O=o(!1),z=o(!1),q=o(null),B=o(null),g=o({name:"",description:""}),te={name:[{required:!0,message:a("fillRequired")}]},R=G=>{q.value=be.cloneDeep(G),g.value=be.cloneDeep(G||{name:"",description:""}),z.value=!0},L=async()=>{var G;return(G=B.value)==null||G.validate(async U=>{var M,x,H,J,le,s;if(!U){m.start(),O.value=!0;const N={name:g.value.name,description:g.value.description},A=await d({method:q.value?"put":"post",url:q.value?`/menu-item-groups/${q.value.id}`:"/menu-item-groups",data:N});if(A.failure&&A.error)switch((H=(x=(M=A.error)==null?void 0:M.response)==null?void 0:x.data)==null?void 0:H.errorCode){case et.FORM_INVALID_DATA:Q((s=(le=(J=A.error)==null?void 0:J.response)==null?void 0:le.data)==null?void 0:s.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),W(),z.value=!1;O.value=!1,m.finish()}}),!1},ee=async G=>{Y.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-item-groups/${G.id}`})).success?(S.success(a("success")),W()):S.error(a("anErrorOccurred"))}})};return(G,U)=>{const M=ge,x=Ve,H=it,J=bl,le=de,s=tt,N=It,A=kt,c=Kt,_=ut,Z=gt,u=ft,r=mt;return n(),D(me,null,[t(_,{show:v.value,"onUpdate:show":U[2]||(U[2]=V=>v.value=V),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(x,{size:"small",type:"primary",disabled:e(F),onClick:U[0]||(U[0]=V=>R(null))},{default:l(()=>[t(M,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(x,{size:"small",type:"error",disabled:e(F),onClick:U[1]||(U[1]=V=>v.value=!1)},{default:l(()=>[t(M,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(c,{show:e(F)},{default:l(()=>[e(K).length?(n(),E(N,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(K),V=>(n(),E(s,{key:V.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[y("div",ts,[y("div",ls,[y("span",as,i(e(X)(V.name)),1),t(J,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(i(e(X)(V.description)),1)]),_:2},1024)]),t(H,null,{default:l(()=>[t(x,{size:"small",type:"warning",secondary:e(ne),onClick:f=>R(V)},{default:l(()=>[t(le,null,{default:l(()=>[t(M,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(x,{size:"small",type:"error",secondary:e(ne),onClick:f=>ee(V)},{default:l(()=>[t(le,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),E(s,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(A,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(le,null,{default:l(()=>[t(M,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(_,{show:e(z),"onUpdate:show":U[5]||(U[5]=V=>$e(z)?z.value=V:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:U[6]||(U[6]=V=>z.value=!1)},{default:l(()=>[t(r,{ref_key:"formRef",ref:B,model:e(g),rules:te,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("name"),path:"name"},{default:l(()=>[t(Z,{modelValue:e(g).name,"onUpdate:modelValue":U[3]||(U[3]=V=>e(g).name=V),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Z,{modelValue:e(g).description,"onUpdate:modelValue":U[4]||(U[4]=V=>e(g).description=V),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ss=je({__name:"ContentFormItems",props:{"content-type":{default:lt.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Gt(["update"],["update:content-type","update:content-id"]),setup(ue,{emit:a}){const{t:d}=He(),{tr:p,mergeArrays:X}=Je(),{request:Q}=Qe(),{contentTypes:v,extractItemTitle:K}=rl(),{loadContentModels:T}=We(),{contentModels:ne}=Fe(We()),F=a;T();const W=_t(ue,"content-type"),Y=_t(ue,"content-id"),S=o(),m=o(!1),O=o([]),z=o([]),q=async(A,c)=>{if(!A.length){z.value=[];return}m.value=!0;const _=await Q({url:`/content-model-items/search/${A}/${c}`});_.success&&_.result&&(z.value=_.result.data),m.value=!1},B=Ae(()=>X(O.value,z.value,"id")),g=o(!1),te=o([]),R=o([]),L=async A=>{if(!A.length){R.value=[];return}g.value=!0;const c=await Q({url:`/news-articles/search/${A}`});c.success&&c.result&&(R.value=c.result.data),g.value=!1},ee=Ae(()=>X(te.value,R.value,"id")),{categories:G}=Fe(Jt()),{loadCategories:U}=Jt(),{tags:M}=Fe(Jt()),{loadTags:x}=Jt();Il(async()=>{var _;U(),x(),g.value=!0;const A=await Q({url:"/news-articles/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});A.success&&A.result&&(te.value=X(te.value,A.result.data,"id")),g.value=!1,m.value=!0;const c=await Q({url:"/content-model-items/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});c.success&&c.result&&(O.value=X(O.value,c.result.data,"id"),S.value=(_=O.value.find(Z=>Z.id===Y.value))==null?void 0:_.contentModelId),m.value=!1});const H=A=>ie("span",{},{default:()=>`${p(A.name)}`}),J=A=>ie("span",{},{default:()=>`${p(A.title)}`}),le=A=>ie("span",{},{default:()=>`${p(A.name)}`}),s=A=>ie("span",{},{default:()=>p(A.title)}),N=A=>Ae(()=>ie("span",{},{default:()=>{var c;return K(A,(c=ne.value)==null?void 0:c.find(_=>_.id===A.contentModelId))}}));return(A,c)=>{const _=$t,Z=qt,u=bt;return n(),E(u,{"x-gap":"12",span:24},{default:l(()=>[t(Z,{span:8,label:e(d)("contentType"),path:"contentType"},{default:l(()=>[t(_,{value:W.value,"onUpdate:value":[c[0]||(c[0]=r=>W.value=r),c[1]||(c[1]=()=>Y.value=void 0)],options:e(v)||[],placeholder:e(d)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),W.value===e(lt).CONTENT_MODEL?(n(),D(me,{key:0},[t(Z,{span:8,label:e(d)("contentModel")},{default:l(()=>[t(_,{value:e(S),"onUpdate:value":c[2]||(c[2]=r=>$e(S)?S.value=r:null),options:e(ne),placeholder:e(d)("search"),"render-label":s,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Z,{span:8,label:e(d)("item"),path:"contentId"},{default:l(()=>[t(_,{value:Y.value,"onUpdate:value":[c[3]||(c[3]=r=>Y.value=r),c[5]||(c[5]=(r,V)=>F("update",r,V,W.value))],options:e(B)||[],placeholder:e(d)("search"),"render-label":r=>N(r).value,loading:e(m),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[4]||(c[4]=r=>q(r,e(S)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):ve("",!0),W.value===e(lt).NEWS_ARTICLE?(n(),E(Z,{key:1,span:16,label:e(d)("newsArticle"),path:"contentId"},{default:l(()=>[t(_,{value:Y.value,"onUpdate:value":[c[6]||(c[6]=r=>Y.value=r),c[7]||(c[7]=(r,V)=>F("update",r,V,W.value))],options:e(ee)||[],placeholder:e(d)("search"),"render-label":J,loading:e(g),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:L},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):ve("",!0),W.value===e(lt).NEWS_CATEGORY?(n(),E(Z,{key:2,span:16,label:e(d)("newsCategory"),path:"contentId"},{default:l(()=>[t(_,{value:Y.value,"onUpdate:value":[c[8]||(c[8]=r=>Y.value=r),c[9]||(c[9]=(r,V)=>F("update",r,V,W.value))],options:e(G)||[],placeholder:e(d)("select"),"render-label":H,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):ve("",!0),W.value===e(lt).NEWS_TAG?(n(),E(Z,{key:3,span:16,label:e(d)("newsTag"),path:"contentId"},{default:l(()=>[t(_,{value:Y.value,"onUpdate:value":[c[10]||(c[10]=r=>Y.value=r),c[11]||(c[11]=(r,V)=>F("update",r,V,W.value))],options:e(M)||[],placeholder:e(d)("select"),"render-label":le,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):ve("",!0)]),_:1})}}}),os={class:"flex items-center"},is={class:"flex flex-col"},rs={class:"text-sm font-bold"},us={key:0,class:"text-sm"},ds={class:"text-xs font-normal"},cs={class:"text-xs my-1"},ps={class:"flex items-center"},fs={class:"flex flex-col"},ms={class:"text-sm font-bold"},vs={class:"text-xs font-normal"},_s={key:0,class:"mt-4"},ys={class:"my-8"},gs={class:"flex items-center justify-between"},bs={class:"flex flex-col"},hs={class:"text-sm font-bold"},ks={class:"text-xs font-normal"},ws={class:"flex items-center"},xs={key:0},Cs={key:1},Is={key:2},$s=je({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=rl(),{tr:X,displayFormErrors:Q,pickByTheme:v}=Je(),{isLightTheme:K}=Fe(yt()),{pages:T,menuItemGroups:ne,contentModels:F}=Fe(We()),{loadPages:W,loadMenuItemGroups:Y}=We(),S=nt(),m=at(),O=pt(),z=_t(ue,"modelValue"),q=o([]),B=o([]),g=o(!1),te=o(""),R=o(),L=Ae(()=>{if(!te.value)return q.value;const k=q.value.filter(h=>{var oe;return h.title.toLowerCase().includes(te.value.toLowerCase())||((oe=h.description)==null?void 0:oe.toLowerCase().includes(te.value.toLowerCase()))||h.children.some(ke=>{var he;return ke.title.toLowerCase().includes(te.value.toLowerCase())||((he=ke.description)==null?void 0:he.toLowerCase().includes(te.value.toLowerCase()))})});return R.value&&R.value.focus(),k}),ee=async(k=!1)=>{S.start(),g.value=!0;const h=await d({url:"/menu/items"});if(h.success&&h.result){q.value=h.result.data.filter(oe=>{var ke;return!oe.parentId&&oe.menuId===((ke=z.value)==null?void 0:ke.id)});for(let oe=0;oe<q.value.length;oe++)q.value[oe].children=h.result.data.filter(ke=>{var he;return ke.parentId===q.value[oe].id&&ke.menuId===((he=z.value)==null?void 0:he.id)});B.value=h.result.data.filter(oe=>{var ke;return oe.menuId!==((ke=z.value)==null?void 0:ke.id)})}k&&(W(),await Y()),g.value=!1,S.finish()};ee(!0);const G=o(12),U=o(1),M=k=>{G.value=k},x={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:rt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:lt.CONTENT_MODEL,contentId:void 0},H=o(null),J=o(!1),le=o(!1),s=o(!1),N=o(null),A=o(null),c=o(x),_=Ae(()=>{const k={title:[{required:!0,message:a("fillRequired")}]};return c.value.targetType===rt.PAGE_LINK?(k.pageId=[{required:!0,message:a("fillRequired")}],k.path=[{required:!0,message:a("fillRequired")}]):c.value.targetType===rt.EXTERNAL_LINK?k.url=[{required:!0,message:a("fillRequired")}]:c.value.targetType===rt.CONTENT_LINK&&(k.contentId=[{required:!0,message:a("fillRequired")}],k.contentType=[{required:!0,message:a("fillRequired")}]),k}),Z=(k,h=null)=>{N.value=be.cloneDeep(k),H.value=h,k?(c.value=be.cloneDeep(k),le.value=!0):(c.value=be.cloneDeep(x),B.value.length>0?s.value=!0:le.value=!0)},u=async k=>{O.warning({title:a("confirm"),content:k.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu/items/${k.id}`})).success?(m.success(a("success")),ee()):m.error(a("anErrorOccurred"))}})},r=async k=>{var oe,ke,he,Ue,Me,ce,Le;S.start(),J.value=!0;const h=await d({method:"post",url:"/menu/items",data:{title:k.title,path:k.path,url:k.url,description:k.description,isActive:!0,isVisible:!0,color:k.color,icon:k.icon,position:k.position,targetType:k.targetType,parentId:H.value,menuId:(oe=z.value)==null?void 0:oe.id,sectionId:k.sectionId,menuItemGroupId:k.menuItemGroupId,pageId:k.pageId}});if(h.failure&&h.error)switch((Ue=(he=(ke=h.error)==null?void 0:ke.response)==null?void 0:he.data)==null?void 0:Ue.errorCode){case et.FORM_INVALID_DATA:Q((Le=(ce=(Me=h.error)==null?void 0:Me.response)==null?void 0:ce.data)==null?void 0:Le.data);break;default:m.error(a("anErrorOccurred"))}else m.success(a("success")),ee();J.value=!1,S.finish(),s.value=!1},V=async()=>{var k;return(k=A.value)==null||k.validate(async h=>{var oe,ke,he,Ue,Me,ce,Le;if(!h){const we={title:c.value.title,path:c.value.path,url:c.value.url,description:c.value.description,isActive:c.value.isActive,isVisible:c.value.isVisible,color:c.value.color,icon:c.value.icon,position:c.value.position,targetType:c.value.targetType,parentId:H.value,menuId:(oe=z.value)==null?void 0:oe.id,sectionId:c.value.sectionId,menuItemGroupId:c.value.menuItemGroupId,pageId:c.value.pageId,contentId:c.value.contentId,contentType:c.value.contentType};if(N.value)if(N.value.title!==c.value.title&&q.value.findIndex(se=>se.title==c.value.title)>-1)m.error(a("sameMenuItemTitleMessage"));else{S.start(),J.value=!0;const se=await d({method:"put",url:`/menu/items/${N.value.id}`,data:we});se.success&&se.result.data&&(m.success(a("success")),ee()),J.value=!1,S.finish(),le.value=!1}else if(q.value.findIndex(se=>se.title==c.value.title)>-1)m.error(a("sameMenuItemTitleMessage"));else{S.start(),J.value=!0;const se=await d({method:"post",url:"/menu/items",data:we});if(se.failure&&se.error)switch((Ue=(he=(ke=se.error)==null?void 0:ke.response)==null?void 0:he.data)==null?void 0:Ue.errorCode){case et.FORM_INVALID_DATA:Q((Le=(ce=(Me=se.error)==null?void 0:Me.response)==null?void 0:ce.data)==null?void 0:Le.data);break;default:m.error(a("anErrorOccurred"))}else m.success(a("success")),ee();J.value=!1,S.finish(),le.value=!1}}}),!1},f=async(k,h)=>{(await d({method:"put",url:"/menu/items/position",data:{items:h}})).success&&ee()},$=k=>ie("span",{},{default:()=>X(k.title)}),C=k=>ie("span",{},{default:()=>X(k.name)}),b=k=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(k),_e=k=>{if(k.targetType==rt.EXTERNAL_LINK)return k.url;if(k.targetType==rt.PAGE_LINK)return k.path;if(k.targetType==rt.CONTENT_LINK)switch(k.contentType){case lt.CONTENT_MODEL:return a("contentModel");case lt.NEWS_CATEGORY:return a("newsCategory");case lt.NEWS_ARTICLE:return a("newsArticle");case lt.NEWS_TAG:return a("newsTag")}return""},ae=async(k,h,oe)=>{var ke;if(!X(c.value.title))switch(oe){case lt.CONTENT_MODEL:c.value.title=p(h,(ke=F.value)==null?void 0:ke.find(he=>he.id===h.contentModelId));break;case lt.NEWS_ARTICLE:c.value.title=h.title;break;case lt.NEWS_CATEGORY:case lt.NEWS_TAG:c.value.title=h.name;break}};return(k,h)=>{const oe=ge,ke=it,he=Ct,Ue=ra,Me=Dt,ce=Tt,Le=tt,we=hl("Draggable"),se=tl,ye=ll,I=al,Ce=kt,j=Ot,pe=It,re=ut,xe=gt,Ee=ft,ze=Cl,Pe=qt,Ge=_l,st=yl,wt=bt,De=ga,Xe=$t,Be=mt;return n(),D(me,null,[t(he,{to:"#alt-action"},{default:l(()=>[t(ke,{align:"center"},{default:l(()=>[e(L).length?(n(),E(e(Ve),{key:0,type:"primary",onClick:h[0]||(h[0]=fe=>Z(null))},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(oe,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenuItem")),1)]),_:1})):ve("",!0)]),_:1})]),_:1}),t(Ue,{class:"mt-2 mb-5",onBack:h[2]||(h[2]=fe=>z.value=null)},{title:l(()=>{var fe;return[P(i(e(X)((fe=z.value)==null?void 0:fe.title)),1)]}),back:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Ze),{ref_key:"searchInputRef",ref:R,value:e(te),"onUpdate:value":h[1]||(h[1]=fe=>$e(te)?te.value=fe:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(j,{appear:"",name:"slide-fade"},{default:l(()=>[y("section",null,[e(L)&&e(L).length?(n(),D(me,{key:0},[t(we,{list:e(q),onChange:h[3]||(h[3]=fe=>f(fe,e(q)))},{default:l(()=>[(n(!0),D(me,null,Ne(e(L).slice((e(U)-1)*e(G),e(U)*e(G)),fe=>(n(),E(Le,{key:fe.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ye,{"default-expanded-names":fe.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ke})=>[t(ke,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:fe.isActive?"success":"error"},{default:l(()=>[P(i(fe.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:fe.isVisible?"info":"warning"},{default:l(()=>[P(i(fe.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(ce,{vertical:"",class:Ye(["!mx-0",e(v)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Ve),{size:"small",type:"primary",secondary:e(K),onClick:ot(Vt=>Z(fe),["stop"])},{default:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"error",secondary:e(K),onClick:ot(Vt=>u(fe),["stop"])},{default:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"info",secondary:e(K),onClick:ot(Vt=>Z(null,fe.id),["stop"])},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:category"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("subMenuItem"))+" ",1),t(Me,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[P(i(fe.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),h[27]||(h[27]=y("div",{class:"w-6"},null,-1)),t(e(de),null,{default:l(()=>[Ke?(n(),E(oe,{key:0,icon:"fa-solid:chevron-left"})):(n(),E(oe,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>h[28]||(h[28]=[y("span",null,null,-1)])),default:l(()=>[t(se,{name:"1"},{header:l(()=>{var Ke;return[y("div",os,[t(e(de),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(oe,{icon:"fa-solid:grip-lines"})]),_:1}),t(ce,{vertical:"",class:Ye(e(v)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),y("div",is,[y("div",null,[y("span",rs,i(e(X)(fe.title)),1),fe.group?(n(),D("span",us," Â ("+i(e(X)((Ke=fe.group)==null?void 0:Ke.name))+") ",1)):ve("",!0)]),y("small",ds,i(_e(fe)),1)])])]}),default:l(()=>[fe.description?(n(),D(me,{key:0},[t(ce,{class:Ye([e(v)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),y("div",cs,i(e(X)(fe.description)),1)],64)):ve("",!0),fe.children.length?(n(),D(me,{key:1},[t(ce,{class:Ye([e(v)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(we,{list:fe.children,onChange:Ke=>f(Ke,fe.children)},{default:l(()=>[(n(!0),D(me,null,Ne(fe.children,Ke=>(n(),E(Le,{key:Ke.id,size:"small",class:"mb-1"},{header:l(()=>[y("div",ps,[t(e(de),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(oe,{icon:"fa-solid:grip-lines"})]),_:1}),t(ce,{vertical:"",class:Ye(e(v)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),y("div",fs,[y("span",ms,i(e(X)(Ke.title)),1),y("small",vs,i(_e(Ke)),1)])])]),"header-extra":l(()=>[t(ke,{align:"center"},{default:l(()=>[t(Me,{size:"small",bordered:!1,type:Ke.isActive?"success":"error"},{default:l(()=>[P(i(Ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Me,{size:"small",bordered:!1,type:Ke.isVisible?"info":"warning"},{default:l(()=>[P(i(Ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(ce,{vertical:"",class:Ye(["!mx-0",e(v)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Ve),{size:"small",type:"primary",secondary:e(K),onClick:ot(Vt=>Z(Ke,fe.id),["stop"])},{default:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Ve),{size:"small",type:"error",secondary:e(K),onClick:ot(Vt=>u(Ke),["stop"])},{default:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):ve("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(I,{page:e(U),"onUpdate:page":h[4]||(h[4]=fe=>$e(U)?U.value=fe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(G),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(G)),"onUpdate:pageSize":M},{prefix:l(()=>[P(i(`${e(q).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),E(Le,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(v)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ce,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(de),null,{default:l(()=>[e(te)?(n(),E(oe,{key:0,icon:"carbon:search"})):(n(),E(oe,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(te)?ve("",!0):(n(),D("div",_s,[t(e(Ve),{size:"small",onClick:h[5]||(h[5]=fe=>Z(null))},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(re,{show:e(s),"onUpdate:show":h[6]||(h[6]=fe=>$e(s)?s.value=fe:null),loading:e(J),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(H)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:h[7]||(h[7]=()=>{s.value=!1,le.value=!0}),onNegativeClick:h[8]||(h[8]=fe=>s.value=!1)},{default:l(()=>[y("section",ys,[t(pe,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(B),fe=>(n(),E(Le,{key:fe.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[y("div",gs,[y("div",bs,[y("span",hs,i(e(X)(fe.title)),1),y("small",ks,i(_e(fe)),1)]),t(e(Ve),{size:"small",type:"primary",secondary:e(K),onClick:Ke=>r(fe)},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(re,{show:e(le),"onUpdate:show":h[25]||(h[25]=fe=>$e(le)?le.value=fe:null),loading:e(J),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(N)?e(H)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(H)?e(B).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(B).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:V,onNegativeClick:h[26]||(h[26]=fe=>le.value=!1)},{default:l(()=>[t(Be,{ref_key:"formRef",ref:A,class:"mt-5",model:e(c),rules:e(_),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{label:e(a)("title"),path:"title"},{default:l(()=>[t(xe,{modelValue:e(c).title,"onUpdate:modelValue":h[9]||(h[9]=fe=>e(c).title=fe),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Ee,{label:e(a)("description"),path:"description"},{default:l(()=>[t(xe,{modelValue:e(c).description,"onUpdate:modelValue":h[10]||(h[10]=fe=>e(c).description=fe),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Pe,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(ze,{value:e(c).position,"onUpdate:value":h[11]||(h[11]=fe=>e(c).position=fe),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Pe,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(st,{value:e(c).isActive,"onUpdate:value":h[12]||(h[12]=fe=>e(c).isActive=fe),name:"isActive",class:"w-full"},{default:l(()=>[t(Ge,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(Ge,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Pe,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(st,{value:e(c).isVisible,"onUpdate:value":h[13]||(h[13]=fe=>e(c).isVisible=fe),name:"isVisible",class:"w-full"},{default:l(()=>[t(Ge,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Ge,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(ce,{class:"!my-2"}),t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Pe,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(De,{modelValue:e(c).icon,"onUpdate:modelValue":h[14]||(h[14]=fe=>e(c).icon=fe),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Pe,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[y("div",ws,[e(c).color?(n(),D(me,{key:0},[t(e(Ve),{text:"",type:"error",style:{"font-size":"21px"},onClick:h[15]||(h[15]=fe=>e(c).color="")},{default:l(()=>[t(e(de),null,{default:l(()=>[t(oe,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ce,{vertical:""})],64)):ve("",!0),t(e(Zt),{value:e(c).color,"onUpdate:value":h[16]||(h[16]=fe=>e(c).color=fe),class:"cursor-pointer",theme:e(K)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Pe,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Xe,{value:e(c).menuItemGroupId,"onUpdate:value":h[17]||(h[17]=fe=>e(c).menuItemGroupId=fe),options:e(ne),placeholder:e(a)("group"),"render-label":C,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Pe,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(st,{value:e(c).targetType,"onUpdate:value":h[18]||(h[18]=fe=>e(c).targetType=fe),class:"w-full",size:"small"},{default:l(()=>[t(Ge,{value:e(rt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("pageLink")),1)]),_:1},8,["value"]),t(Ge,{value:e(rt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("contentLink")),1)]),_:1},8,["value"]),t(Ge,{value:e(rt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[P(i(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(j,{appear:"",name:"slide-fade"},{default:l(()=>[e(c).targetType===e(rt).PAGE_LINK?(n(),D("section",xs,[t(wt,{"x-gap":"12",span:24},{default:l(()=>[t(Pe,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Xe,{value:e(c).pageId,"onUpdate:value":h[19]||(h[19]=fe=>e(c).pageId=fe),options:e(T)||[],placeholder:e(a)("selectPage"),"render-label":$,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Pe,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var fe;return[t(Xe,{value:e(c).sectionId,"onUpdate:value":h[20]||(h[20]=Ke=>e(c).sectionId=Ke),options:((fe=(e(T)||[]).find(Ke=>Ke.id===e(c).pageId))==null?void 0:fe.sections)||[],placeholder:e(a)("selectSection"),"render-label":$,disabled:!e(c).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Ee,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Ze),{value:e(c).path,"onUpdate:value":h[21]||(h[21]=fe=>e(c).path=fe),placeholder:e(a)("path"),"allow-input":b,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(c).targetType===e(rt).CONTENT_LINK?(n(),D("section",Cs,[t(ss,{"content-type":e(c).contentType,"onUpdate:contentType":h[22]||(h[22]=fe=>e(c).contentType=fe),"content-id":e(c).contentId,"onUpdate:contentId":h[23]||(h[23]=fe=>e(c).contentId=fe),onUpdate:ae},null,8,["content-type","content-id"])])):e(c).targetType===e(rt).EXTERNAL_LINK?(n(),D("section",Is,[t(Ee,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Ze),{value:e(c).url,"onUpdate:value":h[24]||(h[24]=fe=>e(c).url=fe),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):ve("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Vs={class:"flex items-center justify-between"},Ts={class:"flex flex-col"},zs={class:"text-sm font-bold"},Us=je({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:X,displayFormErrors:Q,formatKey:v}=Je(),K=_t(ue,"show"),{menuLocations:T}=Fe(We()),{loadMenuLocations:ne}=We(),{isLightTheme:F}=Fe(yt()),W=o(!1),Y=async()=>{W.value=!0,await ne(),W.value=!1};Y();const S=pt(),m=at(),O=nt(),z=o(!1),q=o(!1),B=o(null),g=o(null),te=o({name:"",description:""}),R={name:[{required:!0,message:a("fillRequired")}]},L=U=>{B.value=be.cloneDeep(U),te.value=be.cloneDeep(U||{name:"",description:""}),q.value=!0},ee=async()=>{var U;return(U=g.value)==null||U.validate(async M=>{var x,H,J,le,s,N;if(!M){O.start(),z.value=!0;const A={name:te.value.name,description:te.value.description},c=await d({method:B.value?"put":"post",url:B.value?`/menu-locations/${B.value.id}`:"/menu-locations",data:A});if(c.failure&&c.error)switch((J=(H=(x=c.error)==null?void 0:x.response)==null?void 0:H.data)==null?void 0:J.errorCode){case et.FORM_INVALID_DATA:Q((N=(s=(le=c.error)==null?void 0:le.response)==null?void 0:s.data)==null?void 0:N.data);break;default:m.error(a("anErrorOccurred"))}else m.success(a("success")),Y(),q.value=!1;z.value=!1,O.finish()}}),!1},G=async U=>{S.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-locations/${U.id}`})).success?(m.success(a("success")),Y()):m.error(a("anErrorOccurred"))}})};return(U,M)=>{const x=ge,H=de,J=Ve,le=it,s=bl,N=tt,A=It,c=kt,_=Kt,Z=ut,u=Ze,r=ft,V=gt,f=mt;return n(),D(me,null,[t(Z,{show:K.value,"onUpdate:show":M[2]||(M[2]=$=>K.value=$),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(le,{align:"center"},{default:l(()=>[t(J,{size:"small",type:"primary",disabled:e(W),onClick:M[0]||(M[0]=$=>L(null))},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(J,{size:"small",type:"error",disabled:e(W),onClick:M[1]||(M[1]=$=>K.value=!1)},{default:l(()=>[t(H,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:close"})]),_:1}),P(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(_,{show:e(W)},{default:l(()=>[e(T).length?(n(),E(A,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),D(me,null,Ne(e(T),$=>(n(),E(N,{key:$.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[y("div",Vs,[y("div",Ts,[y("span",zs,i($.name),1),t(s,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[P(i(e(X)($.description)),1)]),_:2},1024)]),t(le,null,{default:l(()=>[t(J,{size:"small",type:"warning",secondary:e(F),onClick:C=>L($)},{default:l(()=>[t(H,null,{default:l(()=>[t(x,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(J,{size:"small",type:"error",secondary:e(F),onClick:C=>G($)},{default:l(()=>[t(H,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),E(N,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(H,null,{default:l(()=>[t(x,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(q),"onUpdate:show":M[5]||(M[5]=$=>$e(q)?q.value=$:null),loading:e(z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(B)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ee,onNegativeClick:M[6]||(M[6]=$=>q.value=!1)},{default:l(()=>[t(f,{ref_key:"formRef",ref:g,model:e(te),rules:R,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(r,{label:e(a)("key"),path:"name"},{default:l(()=>[t(u,{value:e(te).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":M[3]||(M[3]=$=>e(te).name=e(v)($))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{label:e(a)("description"),path:"description"},{default:l(()=>[t(V,{modelValue:e(te).description,"onUpdate:modelValue":M[4]||(M[4]=$=>e(te).description=$),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ss={key:2},Ms={class:"flex items-center"},As={class:"flex flex-col"},Es={key:0,class:"text-xs font-normal"},Ds={class:"mt-4"},Ls=je({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:Q,isInDevMode:v,formatKey:K}=Je(),{isLightTheme:T}=Fe(yt()),{menuLocations:ne}=Fe(We()),{loadMenuLocations:F}=We(),W=nt(),Y=at(),S=pt(),m=o(!1),O=o(!1),z=o([]),q=async(A=!1)=>{W.start(),m.value=!0;const c=await d({url:"/menus"});c.success&&c.result&&(z.value=c.result.data),A&&await F(),m.value=!1,W.finish()};q(!0);const B=o(12),g=o(1),te=A=>{B.value=A},R={name:"",title:"",description:"",menuLocationId:void 0},L=o(!1),ee=o(!1),G=o(!1),U=o(null),M=o(R),x={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},H=o(null),J=A=>{H.value=be.cloneDeep(A),M.value=be.cloneDeep(A||R),L.value=!0},le=async()=>{var A;return(A=U.value)==null||A.validate(async c=>{var _,Z,u,r,V,f;if(!c){W.start(),O.value=!0;const $={name:M.value.name,title:M.value.title,description:M.value.description,menuLocationId:M.value.menuLocationId},C=await d({method:H.value?"put":"post",url:H.value?`/menus/${H.value.id}`:"/menus",data:$});if(C.failure&&C.error)switch((u=(Z=(_=C.error)==null?void 0:_.response)==null?void 0:Z.data)==null?void 0:u.errorCode){case et.FORM_INVALID_DATA:Q((f=(V=(r=C.error)==null?void 0:r.response)==null?void 0:V.data)==null?void 0:f.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),q(),L.value=!1;O.value=!1,W.finish()}}),!1},s=async A=>{S.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menus/${A.id}`})).success?(Y.success(a("success")),q()):Y.error(a("anErrorOccurred"))}})},N=el("menus-management",()=>({itemsMenu:o(null)}))();return ht(()=>M.value.title,A=>{H.value||M.value.name.length<=21&&(M.value.name=_a(p(A),{trim:!0,lower:!0,strict:!0}))}),(A,c)=>{const _=ge,Z=de,u=Ve,r=it,V=Ct,f=Tt,$=tt,C=al,b=kt,_e=Ot,ae=gt,k=ft,h=Ze,oe=qt,ke=$t,he=bt,Ue=mt,Me=ut;return n(),D(me,null,[e(N).itemsMenu?ve("",!0):(n(),E(V,{key:0,to:"#alt-action"},{default:l(()=>[t(r,{align:"center"},{default:l(()=>[e(v)?(n(),E(u,{key:0,type:"success",onClick:c[0]||(c[0]=ce=>ee.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(_,{icon:"carbon:template"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("locations")),1)]),_:1})):ve("",!0),t(u,{type:"warning",onClick:c[1]||(c[1]=ce=>G.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(_,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("groups")),1)]),_:1}),e(z)&&e(z).length?(n(),E(u,{key:1,type:"primary",onClick:c[2]||(c[2]=ce=>J(null))},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t(_,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenu")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})),e(N).itemsMenu?(n(),E($s,{key:1,modelValue:e(N).itemsMenu,"onUpdate:modelValue":c[3]||(c[3]=ce=>e(N).itemsMenu=ce)},null,8,["modelValue"])):(n(),D("section",Ss,[t(_e,{appear:"",name:"slide-fade"},{default:l(()=>[y("section",null,[e(z)&&e(z).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(z).slice((e(g)-1)*e(B),e(g)*e(B)),ce=>(n(),E($,{key:ce.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Le;return[y("div",Ms,[t(r,null,{default:l(()=>[t(u,{size:"small",type:"primary",secondary:e(T),onClick:ot(we=>J(ce),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t(_,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(u,{size:"small",type:"error",secondary:e(T),onClick:ot(we=>s(ce),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t(_,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(f,{vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),y("div",As,[y("span",{class:Ye(`${ce.location?"text-sm":"text-base"} font-bold`)},i(e(p)(ce.title)),3),ce.location?(n(),D("small",Es,i((Le=ce.location)==null?void 0:Le.name),1)):ve("",!0)])])]}),"header-extra":l(()=>[t(u,{size:"small",type:"primary",secondary:e(T),onClick:ot(Le=>e(N).itemsMenu=ce,["stop"])},{icon:l(()=>[t(Z,null,{default:l(()=>[t(_,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(C,{page:e(g),"onUpdate:page":c[4]||(c[4]=ce=>$e(g)?g.value=ce:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(B),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(z).length/e(B)),"onUpdate:pageSize":te},{prefix:l(()=>[P(i(`${e(z).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),E($,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(b,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(Z,null,{default:l(()=>[t(_,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[y("div",Ds,[t(u,{size:"small",onClick:c[5]||(c[5]=ce=>J(null))},{icon:l(()=>[t(Z,null,{default:l(()=>[t(_,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(Me,{show:e(L),"onUpdate:show":c[10]||(c[10]=ce=>$e(L)?L.value=ce:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:le,onNegativeClick:c[11]||(c[11]=ce=>L.value=!1)},{default:l(()=>[t(Ue,{ref_key:"formRef",ref:U,model:e(M),rules:x,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(k,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ae,{modelValue:e(M).title,"onUpdate:modelValue":c[6]||(c[6]=ce=>e(M).title=ce),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(k,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ae,{modelValue:e(M).description,"onUpdate:modelValue":c[7]||(c[7]=ce=>e(M).description=ce),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(he,{"x-gap":"12",span:24},{default:l(()=>[t(oe,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(h,{value:e(M).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":c[8]||(c[8]=ce=>e(M).name=e(K)(ce))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(oe,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(ke,{value:e(M).menuLocationId,"onUpdate:value":c[9]||(c[9]=ce=>e(M).menuLocationId=ce),options:e(ne),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Us,{show:e(ee),"onUpdate:show":c[12]||(c[12]=ce=>$e(ee)?ee.value=ce:null)},null,8,["show"]),t(ns,{show:e(G),"onUpdate:show":c[13]||(c[13]=ce=>$e(G)?G.value=ce:null)},null,8,["show"])]))],64)}}}),Ps="/creopse/assets/video-thumbnail-86f60cc7.svg";var jt=(ue=>(ue.VERTICAL="vertical",ue.HORIZONTAL="horizontal",ue))(jt||{}),xt=(ue=>(ue.SELF_HOSTED="self-hosted",ue.YOUTUBE="youtube",ue))(xt||{});const Ns=()=>{const{t:ue}=He(),a=[{label:ue("horizontal"),value:jt.HORIZONTAL,tagType:"info"},{label:ue("vertical"),value:jt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:X=>{var Q;return((Q=a.find(v=>v.value===X))==null?void 0:Q.tagType)||"default"},getVideoDisplayTypeLabel:X=>{var Q;return(Q=a.find(v=>v.value===X))==null?void 0:Q.label},videoDisplayTypes:a}},Rs=el("video-setting",{state:()=>({settings:[]}),getters:{getSetting:ue=>a=>ue.settings.find(d=>d.key===a),getSettingValue:ue=>(a,d="string")=>{const p=ue.settings.find(Q=>Q.key===a);let X="";switch(d){case"number":X=p&&parseInt(p.value)&&!isNaN(parseInt(p.value))?parseInt(p.value):0;break;case"boolean":X=p&&!isNaN(parseInt(p.value))&&parseInt(p.value)>0;break;case"object":X=p&&p.value?JSON.parse(p.value):{};break;case"array":X=p&&p.value?JSON.parse(p.value):[];break;default:X=p&&p.value?p.value:"";break}return X}},actions:{async initDefaultSettings(){await this.loadSettings();const ue={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Qe();await a({url:"/video-settings",method:"put",data:ue}),await this.loadSettings()},async loadSettings(){const{request:ue}=Qe(),a=await ue({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),Os={key:1,class:"flex items-center gap-3"},qs={key:0,class:"w-full flex items-center justify-between mt-4"},Fs={class:"flex items-center gap-3"},js={key:1,class:"mt-4"},Bs={key:0},Ks={class:"flex items-center justify-center h-full"},Ys=["src"],Gs={class:"text-center text-dimgray text-sm"},Hs={key:1,class:"flex items-center justify-center"},Ws={class:"mt-5"},Js={class:"w-full flex flex-gap-8 items-center justify-start"},Xs=["src"],Zs={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Qs=["src"],eo=je({__name:"index",setup(ue){const{t:a,locale:d}=He(),{tr:p,fileUrl:X,pickByTheme:Q,displayFormErrors:v}=Je(),{videoDisplayTypes:K}=Ns(),{request:T}=Qe(),{isLightTheme:ne}=Fe(yt()),F=nt(),W=at(),Y=pt(),S=vt("appConfig"),m=o(""),O=o(null),z=o(!1),q=o([]),B=el("videos-management-store",()=>({currentTab:o("all")}))(),g=()=>{M()},te=o(0),R=o(12),L=o(1),ee=Ae(()=>`/video-items?pageSize=${R.value}&query=${m.value}&source=${B.currentTab}`),G=we=>{M(`${ee.value}&page=${we}`)},U=we=>{R.value=we,M()},M=async(we=null,se=!1)=>{var I,Ce,j,pe,re;z.value=!0,F.start();const ye=await T({url:we??ee.value});ye.success&&ye.result&&(q.value=((I=ye.result.data)==null?void 0:I.videoItems)||[],te.value=((j=(Ce=ye.result.data)==null?void 0:Ce.meta)==null?void 0:j.total)||0,L.value=((re=(pe=ye.result.data)==null?void 0:pe.meta)==null?void 0:re.currentPage)||1),F.finish(),z.value=!1};M(null,!0);const x=o(!1),H=o(!1),J=o(null),le=o(null),s=o({title:"",description:"",visible:!0,source:xt.SELF_HOSTED,displayType:jt.HORIZONTAL,thumbnail:"",path:""}),N=Ae(()=>({title:[{required:s.value.source==xt.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),A=we=>{J.value=be.cloneDeep(we),we?s.value=be.cloneDeep(we):s.value={title:"",description:"",visible:!0,source:xt.SELF_HOSTED,displayType:jt.HORIZONTAL,thumbnail:"",path:""},H.value=!0},c=async we=>{Y.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await T({method:"delete",url:`/video-items/force/${we.id}`})).success?(W.success(a("success")),M()):W.error(a("anErrorOccurred"))}})},_=async()=>{var we;return(we=le.value)==null||we.validate(async se=>{var ye,I,Ce,j,pe,re;if(!se)if(J.value){F.start(),x.value=!0;const xe={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Ee=await T({method:"put",url:`/video-items/${J.value.id}`,data:xe});Ee.success&&Ee.result.data&&(W.success(a("success")),M(`${ee.value}&page=${L.value}`)),x.value=!1,F.finish(),H.value=!1}else{F.start(),x.value=!0;const xe={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Ee=await T({method:"post",url:"/video-items",data:xe});if(Ee.failure&&Ee.error)switch((Ce=(I=(ye=Ee.error)==null?void 0:ye.response)==null?void 0:I.data)==null?void 0:Ce.errorCode){case et.FORM_INVALID_DATA:v((re=(pe=(j=Ee.error)==null?void 0:j.response)==null?void 0:pe.data)==null?void 0:re.data);break;case et.REQUEST_PARAMS_MISSING:W.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case et.REQUEST_DATA_RETRIEVAL_FAILED:W.error(a("videoDataCantBeRetrieve"));break;case et.REQUEST_DATA_ALREADY_EXISTS:W.error(a("videoAlreadyExists"));break;default:W.error(a("anErrorOccurred"))}else W.success(a("success")),M(`${ee.value}&page=${L.value}`),H.value=!1;x.value=!1,F.finish()}}),!1},Z=o(!1),u=o(!1),r=o(""),V=o(""),f=o("classic"),$=o(!1),C=Rs(),b=o({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),_e=o(b.value),ae=Ae(()=>be.isEqual(b.value,_e.value)),k=async()=>{x.value=!0;const we=await T({url:"/video-settings",method:"put",data:b.value});we.success&&we.result?W.success(a("success")):W.error(a("unableToUpdateSettings")),await h()},h=async()=>{var we;F.start(),x.value=!0,await C.loadSettings(),(we=C.settings)==null||we.forEach(se=>{b.value[se.key]!=null&&(b.value[se.key]=se.value)}),_e.value=be.cloneDeep(b.value),x.value=!1,F.finish()};h();const oe=async()=>{F.start(),x.value=!0,(await T({url:"/video-items/youtube/channel-videos",method:"put"})).success?(W.success(a("success")),await h()):W.error(a("unableToUpdateChannelVideos")),x.value=!1,F.finish()},ke=o(!1),he=o(ct()),Ue=o({}),Me=Ae(()=>{let we=0;for(const se in Ue.value)Ue.value[se]&&we++;return we});function ce(){Ue.value={},M()}const Le=async()=>(Me.value?Y.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[Me.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{x.value=!0,F.start();for(const we in Ue.value)Ue.value[we]&&await T({url:`/video-items/force/${we}`,method:"delete"});F.finish(),x.value=!1,W.success(a("success")),Ue.value={},M(null,!0)}}):W.warning(a("noItemSelected")),!1);return(we,se)=>{var ol,w;const ye=ge,I=de,Ce=Ve,j=Yt,pe=Ct,re=Ua,xe=Ze,Ee=xl,ze=Sa,Pe=it,Ge=tt,st=Lt,wt=Ma,De=bt,Xe=bl,Be=Dt,fe=Ot,Ke=al,Vt=Kt,Pt=kt,Nt=ft,Ut=qt,Te=$t,dt=gt,ul=Qt,dl=mt,nl=ut,sl=Bt;return n(),D(me,null,[t(pe,{to:"#alt-action"},{default:l(()=>[e(B).currentTab=="settings"?(n(),E(Ce,{key:0,loading:e(x),disabled:e(ae),type:"primary",onClick:k},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),D("div",Os,[t(j,{checked:e(ke),"onUpdate:checked":[se[0]||(se[0]=Ie=>$e(ke)?ke.value=Ie:null),se[1]||(se[1]=Ie=>{for(const Ft of e(q))Ft.id&&(e(Ue)[Ft.id]=Ie);he.value=("uuidv4"in we?we.uuidv4:e(ct))()})]},{default:l(()=>[P(i(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(Ce,{type:"primary",onClick:se[2]||(se[2]=Ie=>A(null))},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(ze,{value:e(B).currentTab,"onUpdate:value":[se[6]||(se[6]=Ie=>e(B).currentTab=Ie),g],type:"card",size:"medium"},fa({default:l(()=>[t(re,{name:"all"},{default:l(()=>[t(I,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:collapse-all"})]),_:1}),P(" "+i(e(a)("all_")),1)]),_:1}),t(re,{name:e(xt).SELF_HOSTED},{default:l(()=>[t(I,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:document-video"})]),_:1}),P(" "+i(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(re,{name:e(xt).YOUTUBE},{default:l(()=>[t(I,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:logo-youtube"})]),_:1}),P(" "+i(e(a)("youtube")),1)]),_:1},8,["name"]),t(re,{name:"settings"},{default:l(()=>[t(I,{size:"18",class:"mr-1"},{default:l(()=>[t(ye,{icon:"carbon:settings-adjust"})]),_:1}),P(" "+i(e(a)("settings")),1)]),_:1})]),_:2},[e(B).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Ee,{class:"!w-[250px]"},{default:l(()=>[t(xe,{ref_key:"searchInputRef",ref:O,value:e(m),"onUpdate:value":[se[3]||(se[3]=Ie=>$e(m)?m.value=Ie:null),se[4]||(se[4]=Ie=>{Ie||M()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(Ce,{type:"primary",onClick:se[5]||(se[5]=Ie=>M())},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(Me)>0?(n(),D("section",qs,[y("span",null,i(e(a)("nbItemsSelected",[e(Me)])),1),y("section",Fs,[t(Ce,{type:"error",size:"small",onClick:Le},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("delete")),1)]),_:1}),t(Ce,{type:"warning",size:"small",onClick:ce},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):ve("",!0),e(B).currentTab=="settings"?(n(),D("section",js,[t(Ge,{hoverable:"",embedded:""},{header:l(()=>[P(i(e(a)("youtube")),1)]),default:l(()=>[t(De,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(st,null,{default:l(()=>[t(Ge,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(a)("apiKey")),1),t(xe,{value:e(b).youtubeApiKey,"onUpdate:value":se[7]||(se[7]=Ie=>e(b).youtubeApiKey=Ie),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(st,null,{default:l(()=>[t(Ge,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(a)("autoUpdateChannelVideos")),1),t(wt,{value:e(b).youtubeChannelVideosAutoUpdate,"onUpdate:value":se[8]||(se[8]=Ie=>e(b).youtubeChannelVideosAutoUpdate=Ie),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>se[28]||(se[28]=[y("div",{class:"w-6"},null,-1)])),unchecked:l(()=>se[29]||(se[29]=[y("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(b).youtubeChannelVideosAutoUpdate=="1"?(n(),D(me,{key:0},[t(st,null,{default:l(()=>[t(Ge,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(a)("channelId")),1),t(xe,{value:e(b).youtubeChannelId,"onUpdate:value":se[9]||(se[9]=Ie=>e(b).youtubeChannelId=Ie),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(st,null,{default:l(()=>[t(Ge,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(a)("lastUpdate")),1),y("b",null,i(e(b).youtubeLastChannelVideosUpdate?e(Et)(e(b).youtubeLastChannelVideosUpdate,{locale:e(d),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(Ce,{strong:"",circle:"",secondary:e(ne),type:"primary",title:e(a)("refresh"),disabled:e(x),onClick:oe},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:restart",class:Ye({"animate-spin":e(x)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):ve("",!0)]),_:1})]),_:1})])):(n(),E(Ge,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(q).length&&!e(z)?(n(),D("section",Bs,[t(De,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),D(me,null,Ne(e(q),(Ie,Ft)=>(n(),E(st,{key:Ft},{default:l(()=>[t(fe,{name:"slide-fade",appear:""},{default:l(()=>[t(Ge,{bordered:"",hoverable:""},{cover:l(()=>[y("div",Ks,[y("img",{src:Ie.thumbnailUrl??e(Ps),class:"w-full h-[200px] object-cover"},null,8,Ys)])]),header:l(()=>[y("div",Gs,[t(Xe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[Ie.id?(n(),E(j,{key:e(he),checked:e(Ue)[Ie.id],"onUpdate:checked":Ht=>e(Ue)[Ie.id]=Ht,class:"mr-1"},null,8,["checked","onUpdate:checked"])):ve("",!0),P(" "+i(e(p)(Ie.title)),1)]),_:2},1024)])]),action:l(()=>[t(Pe,{justify:"space-between",align:"center"},{default:l(()=>[t(Pe,null,{default:l(()=>[t(Be,{bordered:!1,type:Ie.visible?"success":"error"},{default:l(()=>[P(i(Ie.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Be,{bordered:!1,type:Ie.displayType==e(jt).HORIZONTAL?"info":"warning"},{default:l(()=>[P(i(Ie.displayType==e(jt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Pe,null,{default:l(()=>[t(Ce,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{r.value=e(a)("video"),V.value=e(X)(Ie.path),f.value=Ie.source==e(xt).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Ie.source!=e(xt).YOUTUBE?(n(),E(Ce,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Ht=>A(Ie)},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):ve("",!0),t(Ce,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ht=>c(Ie)},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ke,{page:e(L),"onUpdate:page":[se[10]||(se[10]=Ie=>$e(L)?L.value=Ie:null),G],class:"mt-10 justify-center","show-size-picker":"","page-size":e(R),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(te)/e(R)),"onUpdate:pageSize":U},{prefix:l(()=>[P(i(`${e(te)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(z)?(n(),D("section",Hs,[t(Vt,{size:"medium"})])):(n(),E(Pt,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(nl,{show:e(H),"onUpdate:show":se[21]||(se[21]=Ie=>$e(H)?H.value=Ie:null),loading:e(x),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:_,onNegativeClick:se[22]||(se[22]=Ie=>H.value=!1)},{default:l(()=>[y("div",Ws,[t(dl,{ref_key:"formRef",ref:le,model:e(s),rules:e(N),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Nt,{label:e(a)("source"),path:"source"},{default:l(()=>[t(j,{checked:e(s).source,"onUpdate:checked":se[11]||(se[11]=Ie=>e(s).source=Ie),"checked-value":e(xt).YOUTUBE,"unchecked-value":e(xt).SELF_HOSTED},{default:l(()=>[P(i(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(s).source==e(xt).YOUTUBE?(n(),E(De,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(Ut,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(xe,{value:e(s).path,"onUpdate:value":se[12]||(se[12]=Ie=>e(s).path=Ie),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ut,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Te,{value:e(s).displayType,"onUpdate:value":se[13]||(se[13]=Ie=>e(s).displayType=Ie),placeholder:e(a)("displayType"),options:e(K),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),D(me,{key:1},[t(Nt,{label:e(a)("title"),path:"title"},{default:l(()=>[t(dt,{modelValue:e(s).title,"onUpdate:modelValue":se[14]||(se[14]=Ie=>e(s).title=Ie),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Nt,{label:e(a)("description"),path:"description"},{default:l(()=>[t(dt,{modelValue:e(s).description,"onUpdate:modelValue":se[15]||(se[15]=Ie=>e(s).description=Ie),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(Ut,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(Ce,{type:"primary",onClick:se[16]||(se[16]=()=>{Z.value=!0})},{default:l(()=>[P(i(e(a)("select")),1)]),_:1}),t(xe,{value:e(s).path?e(Wt)(e(s).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(s).path?(n(),D(me,{key:0},[t(Ce,{type:"primary",ghost:"",onClick:se[17]||(se[17]=()=>{r.value=e(a)("video"),V.value=e(X)(e(s).path),f.value="classic",u.value=!0})},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:play"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("play")),1)]),_:1}),t(Ce,{type:"primary",ghost:"",onClick:se[18]||(se[18]=()=>{e(s).path=""})},{icon:l(()=>[t(I,null,{default:l(()=>[t(ye,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("clear")),1)]),_:1})],64)):ve("",!0)]),_:1})]),_:1},8,["label"]),t(Ut,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Te,{value:e(s).displayType,"onUpdate:value":se[19]||(se[19]=Ie=>e(s).displayType=Ie),placeholder:e(a)("displayType"),options:e(K),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(Nt,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[y("div",Js,[y("div",{class:"cursor-pointer w-full h-[150px]",onClick:se[20]||(se[20]=()=>{$.value=!0})},[e(s).thumbnail?(n(),E(ul,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Oe("border: 1px dashed "+e(Q)("green","white")),src:e(X)(e(s).thumbnail||"")},null,8,["style","src"])):(n(),D("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Oe("border: 1px dashed "+e(Q)("green","white"))},[t(I,{size:64},{default:l(()=>[t(ye,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(nl,{show:e(u),"onUpdate:show":se[23]||(se[23]=Ie=>$e(u)?u.value=Ie:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(r)},{default:l(()=>[e(f)==="youtube"?(n(),D("iframe",{key:0,width:"100%",height:"380",src:e(V),frameborder:"0",allowfullscreen:""},null,8,Xs)):(n(),D("video",Zs,[y("source",{src:e(V)},null,8,Qs)]))]),_:1},8,["show","title"]),t(sl,{show:e(Z),"onUpdate:show":se[24]||(se[24]=Ie=>$e(Z)?Z.value=Ie:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(S))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[25]||(se[25]=Ie=>{e(s).path=Ie,Z.value=!1})},null,8,["show","title","upload-config"]),t(sl,{show:e($),"onUpdate:show":se[26]||(se[26]=Ie=>$e($)?$.value=Ie:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((w=e(S))==null?void 0:w.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[27]||(se[27]=Ie=>{e(s).thumbnail=Ie,$.value=!1})},null,8,["show","title","upload-config"])],64)}}});const to=zt(eo,[["__scopeId","data-v-42abee62"]]),{t:qe}=na.global,ea=[{key:"maxlength",defaultValue:"",placeholder:qe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:qe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],lo={text:ea,textarea:ea,number:[{key:"min",defaultValue:"",placeholder:qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:qe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:qe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:qe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:qe("maxTagCount")}],date:[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"format",defaultValue:"",placeholder:qe("dateFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:qe("maxTagCount")}],"news-category":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:qe("maxTagCount")}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:qe("maxTagCount")}],icon:[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"library",defaultValue:"all",placeholder:qe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:qe("maxTagCount")}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:qe("inputClearable")}]},{t:Re}=na.global,ao=[{label:Re("text"),value:"text"},{label:Re("i18nText"),value:"i18n-text"},{label:Re("textarea"),value:"textarea"},{label:Re("i18nTextarea"),value:"i18n-textarea"},{label:Re("number"),value:"number"},{label:Re("checkbox"),value:"checkbox"},{label:Re("singleSelect"),value:"single-select"},{label:Re("multiSelect"),value:"multi-select"},{label:Re("date"),value:"date"},{label:Re("year"),value:"year"},{label:Re("editor"),value:"editor"},{label:Re("i18nEditor"),value:"i18n-editor"},{label:Re("image"),value:"image"},{label:Re("gallery"),value:"gallery"},{label:Re("newsArticle"),value:"news-article"},{label:Re("newsArticles"),value:"news-articles"},{label:Re("newsCategory"),value:"news-category"},{label:Re("newsCategories"),value:"news-categories"},{label:Re("newsTag"),value:"news-tag"},{label:Re("newsTags"),value:"news-tags"},{label:Re("icon"),value:"icon"},{label:Re("icons"),value:"icons"},{label:Re("albums"),value:"albums"},{label:Re("audio"),value:"audio"},{label:Re("video"),value:"video"},{label:Re("document"),value:"document"},{label:Re("file"),value:"file"},{label:Re("color"),value:"color"},{label:Re("contentItem"),value:"content-model-item"},{label:Re("contentItems"),value:"content-model-items"},{label:Re("menuItemLink"),value:"menu-item-link"}],no={class:"flex items-center justify-between w-full"},so={class:"text-base font-semibold"},oo={class:"text-xs text-slate-400"},io={class:"text-xs text-slate-400"},ro={class:"text-xs text-slate-400"},uo={class:"text-xs text-slate-400"},co={class:"text-xs text-slate-400"},po={key:0},fo={key:0,class:"w-full flex items-center"},mo={class:"w-full flex items-center"},vo={class:"w-full"},_o=je({__name:"Fields",props:Gt({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const{t:a}=He(),{tr:d,formatKey:p}=Je(),{isLightTheme:X}=Fe(yt()),{contentModels:Q}=Fe(We()),v=ue,K=_t(ue,"modelValue"),T=vt("renderSelectLabel"),ne=vt("removeCollectionField"),F=vt("removeSingleton"),W=vt("onCreateItemOption"),Y=vt("expandedNames",()=>Ae(()=>o([]).value));return(S,m)=>{const O=Dt,z=it,q=ge,B=de,g=Ve,te=Ze,R=Lt,L=gt,ee=$t,G=bt,U=Tt,M=Yt,x=ua,H=Ot,J=Cl,le=tl,s=ll,N=tt;return n(!0),D(me,null,Ne(K.value,(A,c)=>(n(),E(N,{key:`field-${c}`,size:"small",class:"my-2"},{default:l(()=>[t(s,{"expanded-names":e(Y)(v.type=="collection"?`c-${v.parentItemIndex}-f-${c}`:`s-${c}`).value,"onUpdate:expandedNames":_=>e(Y)(v.type=="collection"?`c-${v.parentItemIndex}-f-${c}`:`s-${c}`).value=_,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(le,{name:"1"},{header:l(()=>[y("div",no,[t(z,null,{default:l(()=>[t(O,{size:"small",type:"info"},{default:l(()=>[P(i(c+1),1)]),_:2},1024),y("span",so,i(e(d)(A.label)),1)]),_:2},1024),t(g,{size:"small",type:"error",secondary:e(X),onClick:()=>{v.type==="collection"?e(ne)&&e(ne)(v.collectionKey,c):e(F)&&e(F)(c)}},{default:l(()=>[t(B,{class:"mr-1"},{default:l(()=>[t(q,{icon:"carbon:trash-can"})]),_:1}),P(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(G,{span:24,"x-gap":"6"},{default:l(()=>[t(R,{span:6},{default:l(()=>[y("span",oo,i(e(a)("fieldKey")),1),t(te,{value:A.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":_=>A.key=e(p)(_)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(R,{span:10},{default:l(()=>[y("span",io,i(e(a)("title")),1),t(L,{modelValue:A.label,"onUpdate:modelValue":_=>A.label=_,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(R,{span:8},{default:l(()=>[y("span",ro,i(e(a)("type")),1),t(ee,{value:A.type,"onUpdate:value":_=>A.type=_,options:e(ao),placeholder:e(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),t(U,{class:"!mt-4 !mb-2"}),t(G,{span:24,"x-gap":"6"},{default:l(()=>[t(R,{span:10,class:"flex items-center"},{default:l(()=>[t(M,{checked:A.required,"onUpdate:checked":_=>A.required=_,size:"medium"},{default:l(()=>[P(i(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(R,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(A.type)?(n(),D(me,{key:0},[y("span",uo,i(e(a)("contentModel")),1),t(ee,{value:A.defaultValue,"onUpdate:value":_=>A.defaultValue=_,options:e(Q),placeholder:e(a)("contentModel"),"render-label":e(T),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),D(me,{key:1},[y("span",co,i(e(a)("defaultValue")),1),A.type==="color"?(n(),D("div",po,[t(e(Zt),{value:A.defaultValue,"onUpdate:value":_=>A.defaultValue=_,class:"cursor-pointer",theme:e(X)?"light":"dark",format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):(n(),E(te,{key:1,value:A.defaultValue,"onUpdate:value":_=>A.defaultValue=_,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),A.type==="multi-select"||A.type==="single-select"?(n(),E(U,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[P(i(e(a)("options")),1)]),_:1})):ve("",!0),t(H,{name:"slide-fade",appear:""},{default:l(()=>[A.type==="multi-select"||A.type==="single-select"?(n(),D("div",fo,[t(x,{value:A.options,"onUpdate:value":_=>A.options=_,placeholder:e(a)("addOption"),"on-create":_=>e(W)?e(W)(_,c):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[P(i(e(a)("addOption")),1)]),default:l(({value:_})=>[y("div",mo,[t(te,{value:_.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Z=>_.value=e(p)(Z)},null,8,["value","placeholder","onUpdate:value"]),t(L,{modelValue:_.label,"onUpdate:modelValue":Z=>_.label=Z,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):ve("",!0)]),_:2},1024),(n(!0),D(me,null,Ne(e(lo),(_,Z,u)=>(n(),D(me,{key:u},[A.type===Z?(n(),E(s,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(B,{size:"18"},{default:l(()=>[t(q,{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(le,{name:"1"},{header:l(()=>[t(U,{"title-placement":"left",class:"!my-4"},{default:l(()=>[P(i(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(H,{name:"slide-fade",appear:""},{default:l(()=>[y("div",vo,[(n(!0),D(me,null,Ne(_,r=>(n(),E(G,{key:r.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(R,{span:10},{default:l(()=>[t(te,{value:r.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(R,{span:14},{default:l(()=>[r.isNumber?(n(),E(J,{key:0,value:A.settings[r.key],"onUpdate:value":V=>A.settings[r.key]=V,"default-value":r.defaultValue?parseInt(r.defaultValue):void 0,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),E(te,{key:1,value:A.settings[r.key],"onUpdate:value":V=>A.settings[r.key]=V,"default-value":r.defaultValue,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):ve("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)}}});const ta=zt(_o,[["__scopeId","data-v-a507c7a3"]]),yo={class:"text-base"},go={key:0},bo={key:0},ho={key:0},ko={class:"flex items-center justify-between w-full"},wo={class:"text-base font-semibold"},xo={class:"text-xs text-slate-400"},Co={class:"text-xs text-slate-400"},Io={class:"text-xs text-slate-400"},ba=je({__name:"index",props:Gt({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(ue){const{t:a}=He(),{tr:d,pickByTheme:p,formatKey:X}=Je(),{isLightTheme:Q}=Fe(yt()),{loadContentModels:v}=We();v();const K=ue,T=_t(ue,"show"),ne=nt(),F=at(),W=pt(),Y=o(!1),S=o(null),m=o({}),O=o({}),z={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},q=o(!1),B=o(!1),g=o({}),te=u=>Ae({get:()=>g.value[u]?["1"]:[],set:r=>{g.value[u]=r.length>0}});ht(()=>B.value,u=>{Object.entries(m.value).forEach(([r,V],f)=>{var $;r!=="index"&&(g.value[`c-${f}`]=u,($=V==null?void 0:V.items)==null||$.forEach((C,b)=>{g.value[`c-${f}-f-${b}`]=u}))})}),ht(()=>q.value,u=>{Object.entries(m.value).forEach(([r,V],f)=>{r==="index"&&(V==null||V.forEach(($,C)=>{g.value[`s-${C}`]=u}))})});const R=Ae(()=>be.isEqual(m.value,O.value)),L=()=>{m.value?m.value.index&&Array.isArray(m.value.index)?m.value.index.push(be.cloneDeep(z)):m.value.index=[be.cloneDeep(z)]:m.value={index:[be.cloneDeep(z)]}},ee=u=>{m.value&&Array.isArray(m.value.index)&&m.value.index.splice(u,1)},G=()=>{const u=ct();m.value?m.value[u]={key:"",title:"",items:[]}:m.value={[u]:{key:"",title:"",items:[]}}},U=u=>{if(m.value){const{[u]:r,...V}=m.value;m.value=V}},M=u=>{m.value&&m.value[u].items.push(be.cloneDeep(z))},x=(u,r)=>{if(m.value){const V=m.value[u];V&&Array.isArray(V.items)&&V.items.splice(r,1)}},H=u=>u.title&&u.key&&u.key!=="index",J=()=>m.value&&typeof m.value=="object"?Object.keys(m.value).filter(u=>u!=="index").length:0,le=Ae(()=>m.value?Object.keys(m.value).filter(u=>u!=="index"):[]),s=u=>le.value.indexOf(u),N=o(!1),A=async()=>{const u=be.cloneDeep(m.value),r=be.cloneDeep(m.value);N.value=!1,Y.value=!0,ne.start();const V=[];if(be.forIn(u,(f,$)=>{$!=="index"&&V.push(f.key)}),be.forIn(u,(f,$)=>{if($!=="index"){const C=be.keys(u).filter(b=>b!=="index").indexOf($);if(f&&f.key){if(f.key==="index")return F.error(a("keyIndexIsReservedInCollections")),N.value=!0,!1;if(V.filter(_e=>_e==f.key).length>1)return F.error(a("collectionKeyIsNotUnique",[f.key])),N.value=!0,!1;if(Array.isArray(f.items))for(const[_e,ae]of f.items.entries())if(ae.key){if(f.items.filter(h=>h.key===ae.key).length>1)return F.error(a("fieldKeyOfCollectionIsNotUnique",[ae.key,f.key])),N.value=!0,!1}else return F.error(a("fieldKeyOfCollectionIsRequired",[_e+1,f.key])),N.value=!0,!1}else return F.error(a("collectionKeyIsRequired",[C+1])),N.value=!0,!1}else if(Array.isArray(f))for(const[C,b]of f.entries())if(b.key){if(f.filter(ae=>ae.key===b.key).length>1)return F.error(a("singletonKeyIsNotUnique",[b.key])),N.value=!0,!1}else return F.error(a("singletonKeyIsRequired",[C+1])),N.value=!0,!1}),N.value){Y.value=!1,ne.finish();return}be.forIn(r,(f,$)=>{$!=="index"&&$!==f.key&&$a(u,$,f.key)}),await K.updateDataStructure(u),Y.value=!1,ne.finish()},c=()=>{be.isEqual(m.value,O.value)?T.value=!1:W.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{T.value=!1}})};ht(()=>K.rawDataStructure,u=>{m.value=u?be.cloneDeep(u):{},be.forIn(u,(r,V)=>{var f;V!=="index"?(m.value[V].key=V,(f=r==null?void 0:r.items)==null||f.forEach(($,C)=>{m.value[V].items[C].settings||(m.value[V].items[C].settings={})})):r==null||r.forEach(($,C)=>{m.value[V][C].settings||(m.value[V][C].settings={})})}),O.value=be.cloneDeep(m.value)},{immediate:!0,deep:!0});const _=u=>ie("span",{},{default:()=>d(u.title)}),Z=(u,r)=>({value:`option_${r+1}${u+1}`,label:""});return St("removeCollectionField",x),St("onCreateItemOption",Z),St("renderSelectLabel",_),St("removeSingleton",ee),St("addSingleton",L),St("expandCollections",B),St("expandSingletons",q),St("expandedNames",te),(u,r)=>{const V=da,f=ge,$=de,C=Ve,b=it,_e=tt,ae=It,k=Lt,h=Dt,oe=Ze,ke=gt,he=bt,Ue=Tt,Me=Aa,ce=tl,Le=ll,we=la;return n(),E(we,{modelValue:T.value,"onUpdate:modelValue":r[7]||(r[7]=se=>T.value=se),"close-on-esc":!1,closable:!1,onOnSizeChange:r[8]||(r[8]=se=>{S.value=se})},{header:l(()=>[y("div",yo,[t(V,{depth:"1"},{default:l(()=>[P(i(e(a)("dataStructure"))+" ",1),u.title?(n(),D("span",go,"Â -Â "+i(u.title),1)):ve("",!0)]),_:1})])]),"header-extra":l(()=>[t(b,{align:"center"},{default:l(()=>[t(C,{type:"success",title:e(a)("save"),loading:e(Y),disabled:e(R),onClick:r[0]||(r[0]=se=>A())},{icon:l(()=>[t($,null,{default:l(()=>[t(f,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(C,{type:"error",title:e(a)("close"),disabled:e(Y),onClick:r[1]||(r[1]=se=>c())},{icon:l(()=>[t($,null,{default:l(()=>[t(f,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var se,ye;return[y("section",{style:Oe(`min-height: ${((se=e(S))==null?void 0:se.windowHeight)-((ye=e(S))==null?void 0:ye.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(p)("bg-slate-200","bg-zinc-800")}`)},[t(he,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(k,{class:"ml-4 mt-2"},{default:l(()=>{var I,Ce;return[t(_e,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var j,pe;return[P(i(e(a)("singletons"))+"Â  ",1),(j=e(m).index)!=null&&j.length?(n(),D("span",bo," ("+i((pe=e(m).index)==null?void 0:pe.length)+") ",1)):ve("",!0)]}),"header-extra":l(()=>[t(b,null,{default:l(()=>[t(C,{size:"small",type:"primary",secondary:e(Q),onClick:r[2]||(r[2]=j=>q.value=!e(q))},{default:l(()=>[t($,null,{default:l(()=>[e(q)?(n(),E(f,{key:0,icon:"carbon:collapse-categories"})):(n(),E(f,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(C,{size:"small",type:"primary",secondary:e(Q),onClick:r[3]||(r[3]=j=>L())},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(f,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ae,{style:Oe(`max-height: ${((I=e(S))==null?void 0:I.windowHeight)-((Ce=e(S))==null?void 0:Ce.headerHeight)-100}px`)},{default:l(()=>[t(ta,{modelValue:e(m).index,"onUpdate:modelValue":r[4]||(r[4]=j=>e(m).index=j),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(k,{class:"mr-4 mt-2"},{default:l(()=>{var I,Ce;return[t(_e,{embedded:"",bordered:"",segmented:""},{header:l(()=>[P(i(e(a)("collections"))+"Â  ",1),J()>0?(n(),D("span",ho," ("+i(J())+") ",1)):ve("",!0)]),"header-extra":l(()=>[t(b,null,{default:l(()=>[t(C,{size:"small",type:"primary",secondary:e(Q),onClick:r[5]||(r[5]=j=>B.value=!e(B))},{default:l(()=>[t($,null,{default:l(()=>[e(B)?(n(),E(f,{key:0,icon:"carbon:collapse-categories"})):(n(),E(f,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(C,{size:"small",type:"primary",secondary:e(Q),onClick:r[6]||(r[6]=j=>G())},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(f,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ae,{style:Oe(`max-height: ${((I=e(S))==null?void 0:I.windowHeight)-((Ce=e(S))==null?void 0:Ce.headerHeight)-100}px`)},{default:l(()=>[(n(!0),D(me,null,Ne(e(m)||{},(j,pe,re)=>(n(),D(me,{key:re},[pe!="index"?(n(),E(_e,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Le,{"expanded-names":te(`c-${re}`).value,"onUpdate:expandedNames":xe=>te(`c-${re}`).value=xe,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(ce,{name:"1"},{header:l(()=>[y("div",ko,[t(b,null,{default:l(()=>[t(h,{size:"small",type:"success"},{default:l(()=>[P(i(s(pe)+1),1)]),_:2},1024),y("span",wo,i(e(d)(j.title)),1)]),_:2},1024),t(C,{size:"small",type:"error",secondary:e(Q),onClick:xe=>U(pe)},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(f,{icon:"carbon:trash-can"})]),_:1}),P(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(he,{span:24,"x-gap":"6"},{default:l(()=>[t(k,{span:6},{default:l(()=>[y("span",xo,i(e(a)("fieldKey")),1),t(oe,{value:j.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":xe=>j.key=e(X)(xe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(k,{span:11},{default:l(()=>[y("span",Co,i(e(a)("title")),1),t(ke,{modelValue:j.title,"onUpdate:modelValue":xe=>j.title=xe,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(k,{span:7},{default:l(()=>[y("span",Io,i(e(a)("actions")),1),t(C,{block:"",size:"small",type:"primary",disabled:!H(j),secondary:e(Q),class:"w-full",onClick:xe=>M(pe)},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(f,{icon:"carbon:add-alt"})]),_:1}),P(" "+i(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Ue,{class:"!my-4.75"}),H(j)?(n(),E(ta,{key:0,modelValue:e(m)[pe].items,"onUpdate:modelValue":xe=>e(m)[pe].items=xe,"parent-item-index":re,"collection-key":pe,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),E(Me,{key:1,bordered:"",type:"info"},{default:l(()=>[P(i(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):ve("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),$o={class:"flex items-center"},Vo={class:"text-base"},To={class:"mt-2"},zo={class:"mt-2 text-xs"},Uo=je({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:Q,isInDevMode:v}=Je(),{sections:K}=Fe(We()),{loadSections:T}=We(),{isLightTheme:ne}=Fe(yt()),F=nt(),W=at(),Y=o(!1);T();const S=o(12),m=o(1),O=H=>{S.value=H},z={name:"",title:"",content:"",slug:""},q=o(!1),B=o(null),g=o(z),te={title:[{required:!0,message:a("fillRequired")}]},R=o(null),L=H=>{R.value=be.cloneDeep(H),g.value=be.cloneDeep(H||z),q.value=!0},ee=async()=>{var H;return(H=B.value)==null||H.validate(async J=>{var le,s,N,A,c,_;if(!J){F.start(),Y.value=!0;const Z={title:g.value.title};R.value||(Z.name=be.startCase(be.camelCase(p(g.value.title))).replace(/\s+/g,""));const u=await d({method:R.value?"put":"post",url:R.value?`/sections/${R.value.slug}`:"/sections",data:Z});if(u.failure&&u.error)switch((N=(s=(le=u.error)==null?void 0:le.response)==null?void 0:s.data)==null?void 0:N.errorCode){case et.FORM_INVALID_DATA:Q((_=(c=(A=u.error)==null?void 0:A.response)==null?void 0:c.data)==null?void 0:_.data);break;default:W.error(a("anErrorOccurred"))}else W.success(a("success")),T(),q.value=!1;Y.value=!1,F.finish()}}),!1},G=o(null),U=o(!1),M=async H=>{var le;Y.value=!0,F.start();const J=await d({url:`/sections/${(le=G.value)==null?void 0:le.slug}`,method:"put",data:{dataStructure:H}});J.success&&J.result?(W.success(a("success")),T(),x(J.result.data)):W.error(a("anErrorOccurred")),Y.value=!1,F.finish()},x=H=>{G.value=H,U.value=!0};return(H,J)=>{var ae,k;const le=ge,s=de,N=Ve,A=it,c=Tt,_=Dt,Z=tl,u=ll,r=tt,V=al,f=kt,$=gt,C=ft,b=mt,_e=ut;return n(),D(me,null,[e(K)&&e(K).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(K).slice((e(m)-1)*e(S),e(m)*e(S)),h=>(n(),E(r,{key:h.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(u,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:oe})=>[t(s,null,{default:l(()=>[oe?(n(),E(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),E(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>J[5]||(J[5]=[y("span",null,null,-1)])),default:l(()=>[t(Z,{name:"1"},{header:l(()=>[y("div",$o,[t(A,null,{default:l(()=>[e(v)?(n(),E(N,{key:0,size:"small",type:"primary",secondary:e(ne),onClick:ot(oe=>x(h),["stop"])},{default:l(()=>[t(s,{class:"mr-1"},{default:l(()=>[t(le,{icon:"carbon:data-1"})]),_:1}),P(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):ve("",!0),t(N,{size:"small",type:"primary",secondary:e(ne),onClick:ot(oe=>L(h),["stop"])},{default:l(()=>[t(s,null,{default:l(()=>[t(le,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(c,{vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),y("span",Vo,i(e(p)(h.title)),1)])]),default:l(()=>[y("div",null,i(e(a)("sectionUsedInXPages",[h.pagesCount])),1),y("section",To,[(n(!0),D(me,null,Ne(h.pages,oe=>(n(),E(_,{key:oe.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[P(i(e(p)(oe.title)),1)]),_:2},1024))),128))]),y("div",zo,[P(i(e(a)("dataRetrievalSlug"))+": ",1),y("b",null,i(h.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,{page:e(m),"onUpdate:page":J[0]||(J[0]=h=>$e(m)?m.value=h:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(S),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(K).length/e(S)),"onUpdate:pageSize":O},{prefix:l(()=>[P(i(`${e(K).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),E(r,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(f,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(s,null,{default:l(()=>[t(le,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(_e,{show:e(q),"onUpdate:show":J[2]||(J[2]=h=>$e(q)?q.value=h:null),loading:e(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(R)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ee,onNegativeClick:J[3]||(J[3]=h=>q.value=!1)},{default:l(()=>[t(b,{ref_key:"formRef",ref:B,model:e(g),rules:te,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(C,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t($,{modelValue:e(g).title,"onUpdate:modelValue":J[1]||(J[1]=h=>e(g).title=h),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ba,{show:e(U),"onUpdate:show":J[4]||(J[4]=h=>$e(U)?U.value=h:null),title:e(p)((ae=e(G))==null?void 0:ae.title),"raw-data-structure":(k=e(G))==null?void 0:k.dataStructure,"update-data-structure":M},null,8,["show","title","raw-data-structure"])],64)}}});const So={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(ue){const a=ue,{t:d}=He(),p=o(!1),X=o(null),Q=o({header:null,results:null});function v({header:O,results:z}){Q.value={header:O,results:z},a.onSuccess&&a.onSuccess(Q.value)}function K(O){if(O.stopPropagation(),O.preventDefault(),p.value)return;const z=O.dataTransfer.files;if(z.length!==1){console.log(d("supportUploadingOneFile"));return}const q=z[0];if(!m(q))return console.log(d("formatNotSupported")),!1;W(q),O.stopPropagation(),O.preventDefault()}function T(O){O.stopPropagation(),O.preventDefault(),O.dataTransfer.dropEffect="copy"}function ne(){X.value.click()}function F(O){const q=O.target.files[0];q&&W(q)}function W(O){if(X.value=null,!a.beforeUpload){Y(O);return}a.beforeUpload(O)&&Y(O)}function Y(O){return p.value=!0,new Promise((z,q)=>{const B=new FileReader;B.onload=g=>{const te=g.target.result,R=Ka(te,{type:"array"}),L=R.SheetNames[0],ee=R.Sheets[L],G=S(ee),U=cl.sheet_to_json(ee);v({header:G,results:U}),p.value=!1,z()},B.readAsArrayBuffer(O)})}function S(O){const z=[],q=cl.decode_range(O["!ref"]);let B;const g=q.s.r;for(B=q.s.c;B<=q.e.c;++B){const te=O[cl.encode_cell({c:B,r:g})];let R="UNKNOWN "+B;te&&te.t&&(R=cl.format_cell(te)),z.push(R)}return z}function m(O){return/\.(xlsx|xls|csv)$/.test(O.name)}return(O,z)=>{const q=Ve;return n(),D("div",null,[y("input",{ref_key:"excelUploadInput",ref:X,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:F},null,544),y("div",{class:"drop",onDrop:K,onDragover:T,onDragenter:T},[P(i(e(d)("dropExcelFileHereOr"))+" ",1),t(q,{loading:e(p),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:ne},{default:l(()=>[P(i(e(d)("browse")),1)]),_:1},8,["loading"])],32)])}}},ha=zt(So,[["__scopeId","data-v-c15025e0"]]),Mo={class:"flex items-center justify-center"},Ao=je({__name:"Email",setup(ue){const a=nt(),d=at(),p=pt(),{displayFormErrors:X}=Je(),{request:Q}=Qe(),{t:v,locale:K}=He(),T=o(!1),ne=o([]),F=o(""),W=o(),Y={pageSize:12,prefix:({itemCount:u})=>ie("div",{class:"font-bold"},{default:()=>`${v("total")}: ${u}`})},S=[{type:"selection"},{title:v("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return ie("div",{},{default:()=>u.email})}},{title:v("updateAt"),key:"updatedAt",width:125,render(u){return ie("div",{},{default:()=>Et(u.updatedAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(u){return ie("div",{},{default:()=>Et(u.createdAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ie(Ze,{ref:W,placeholder:v("search"),value:F.value,onInput:u=>{F.value=u}},{suffix:()=>ie(de,{},{default:()=>ie(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return ie("div",{class:"flex justify-end items-center w-full"},[ie(Ve,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:edit"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:v("confirm"),content:v("confirmDeleteEmailAddress"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await Q({method:"delete",url:`/newsletter/emails/${u.id}`})).success?(d.success(v("success")),O()):d.error(v("anErrorOccurred"))}})},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],m=Ae(()=>{if(!F.value)return ne.value;const u=ne.value.filter(r=>r.email.toLowerCase().includes(F.value.toLowerCase()));return W.value&&W.value.focus(),u}),O=async()=>{T.value=!0;const u=await Q({url:"/newsletter/emails"});u.success&&u.result&&(ne.value=u.result.data),T.value=!1};O();const z=o(!1),q=o(!1),B=o(null),g=o(null),te=o({email:""}),R={email:[{required:!0,message:v("fillRequired")},{trigger:["input"],validator(u,r){return r&&!Xt.isEmail(r)?new Error(v("invalidEmail")):!0}}]},L=u=>{B.value=be.cloneDeep(u),u?te.value=be.cloneDeep(u):te.value={email:""},q.value=!0},ee=async()=>{var u;return(u=g.value)==null||u.validate(async r=>{var V,f,$,C,b,_e;if(!r)if(B.value)if(B.value.email!==te.value.email&&ne.value.findIndex(ae=>ae.email==te.value.email)>-1)d.error(v("sameEmailAddressMessage"));else{a.start(),z.value=!0;const ae={email:te.value.email},k=await Q({method:"put",url:`/newsletter/emails/${B.value.id}`,data:ae});k.success&&k.result.data&&(d.success(v("success")),O()),z.value=!1,a.finish(),q.value=!1}else if(ne.value.findIndex(ae=>ae.email==te.value.email)>-1)d.error(v("sameEmailAddressMessage"));else{a.start(),z.value=!0;const ae={email:te.value.email},k=await Q({method:"post",url:"/newsletter/emails",data:ae});if(k.failure&&k.error)switch(($=(f=(V=k.error)==null?void 0:V.response)==null?void 0:f.data)==null?void 0:$.errorCode){case et.FORM_INVALID_DATA:X((_e=(b=(C=k.error)==null?void 0:C.response)==null?void 0:b.data)==null?void 0:_e.data);break;default:d.error(v("anErrorOccurred"))}else d.success(v("success")),O();z.value=!1,a.finish(),q.value=!1}}),!1};let G=null;const U=()=>{G&&(G.destroy(),G=null)};ma(U);const M=(u,r)=>r.map(V=>u.map(f=>V[f])),x=()=>{G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","email","createdAt","updatedAt"];const V=be.sortBy(ne.value.map(($,C)=>({no:C+1,...$})),"email"),f=M(r,V);try{u.export_json_to_excel({header:r,data:f,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(v("anErrorOccurred"))}})},H=()=>{G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["email"];const V=M(r,[{email:"adresse@email.com"}]);try{u.export_json_to_excel({header:r,data:V,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(v("anErrorOccurred"))}})},J=o(!1),le=async({results:u})=>{z.value=!0,a.start(),G||(G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].email&&ne.value.findIndex(V=>V.email==u[r].email)==-1&&(G&&(G.content=`${v("pleaseBePatient")}: ${r} ${v("task_s")} / ${u.length}`),await Q({method:"post",url:"/newsletter/emails",data:{email:u[r].email}}));await O(),U(),a.finish(),z.value=!1,J.value=!1},s=o(ct()),N=o([]),A=u=>u.id,c=u=>{N.value=u},_=()=>{N.value=[],s.value=ct()},Z=async()=>(N.value.length?p.warning({title:v("confirm"),content:v("deleteSelectionWarningMessage",[N.value.length]),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{z.value=!0,a.start();for(let u=0;u<N.value.length;u++)(await Q({url:`/newsletter/emails/${N.value[u]}`,method:"delete"})).success;O(),a.finish(),z.value=!1,d.success(v("success")),_()}}):d.warning(v("noItemSelected")),!1);return(u,r)=>{const V=ca,f=it,$=Ct,C=tt,b=Ot,_e=gl,ae=ft,k=mt,h=ut,oe=ha;return n(),D(me,null,[t($,{to:"#alt-action"},{default:l(()=>[t(f,null,{default:l(()=>[t(V,{onPositiveClick:r[0]||(r[0]=ke=>x())},{trigger:l(()=>[t(e(Ve),{type:"success"},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("export")),1)]),_:1})]),default:l(()=>[P(" "+i(e(v)("exportDataInExcelFile")),1)]),_:1}),t(e(Ve),{type:"info",onClick:r[1]||(r[1]=ke=>J.value=!0)},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("import")),1)]),_:1}),t(e(Ve),{type:"primary",onClick:r[2]||(r[2]=ke=>L(null))},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(b,{name:"slide-fade",appear:""},{default:l(()=>[e(N).length?(n(),E(C,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(f,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(v)("nbItemsSelected",[e(N).length])),1),t(f,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Ve),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("delete")),1)]),_:1}),t(e(Ve),{type:"warning",size:"small",onClick:_},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):ve("",!0)]),_:1}),(n(),E(_e,{key:e(s),columns:S,data:e(m),pagination:Y,loading:e(T),"single-line":!1,"scroll-x":800,"row-key":A,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"])),t(h,{show:e(q),"onUpdate:show":r[4]||(r[4]=ke=>$e(q)?q.value=ke:null),loading:e(z),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(B)?e(v)("editEmailAddress"):e(v)("addEmailAddress"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:ee,onNegativeClick:r[5]||(r[5]=ke=>q.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:g,class:"mt-5",model:e(te),rules:R,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(ae,{label:e(v)("emailAddress"),path:"email"},{default:l(()=>[t(e(Ze),{value:e(te).email,"onUpdate:value":r[3]||(r[3]=ke=>e(te).email=ke),placeholder:e(v)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(h,{show:e(J),"onUpdate:show":r[7]||(r[7]=ke=>$e(J)?J.value=ke:null),loading:e(z),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(v)("import")},{default:l(()=>[t(oe,{class:"my-5","on-success":le}),y("div",Mo,[t(e(Ve),{type:"info",size:"small",onClick:r[6]||(r[6]=ke=>H())},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Eo={class:"flex items-center justify-center"},Do=je({__name:"Phone",setup(ue){const a=nt(),d=at(),p=pt(),{displayFormErrors:X}=Je(),{request:Q}=Qe(),{t:v,locale:K}=He(),T=o(!1),ne=o([]),F=o(""),W=o(),Y={pageSize:12,prefix:({itemCount:u})=>ie("div",{class:"font-bold"},{default:()=>`${v("total")}: ${u}`})},S=[{type:"selection"},{title:v("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return ie("div",{},{default:()=>u.phone})}},{title:v("updateAt"),key:"updatedAt",width:125,render(u){return ie("div",{},{default:()=>Et(u.updatedAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(u){return ie("div",{},{default:()=>Et(u.createdAt,{locale:K.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ie(Ze,{ref:W,placeholder:v("search"),value:F.value,onInput:u=>{F.value=u}},{suffix:()=>ie(de,{},{default:()=>ie(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return ie("div",{class:"flex justify-end items-center w-full"},[ie(Ve,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:edit"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"error",onClick:()=>{p.warning({title:v("confirm"),content:v("confirmDeletePhoneNumber"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await Q({method:"delete",url:`/newsletter/phones/${u.id}`})).success?(d.success(v("success")),O()):d.error(v("anErrorOccurred"))}})},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],m=Ae(()=>{if(!F.value)return ne.value;const u=ne.value.filter(r=>r.phone.toLowerCase().includes(F.value.toLowerCase()));return W.value&&W.value.focus(),u}),O=async()=>{T.value=!0;const u=await Q({url:"/newsletter/phones"});u.success&&u.result&&(ne.value=u.result.data),T.value=!1};O();const z=o(!1),q=o(!1),B=o(null),g=o(null),te=o({phone:""}),R={phone:[{required:!0,message:v("fillRequired")},{trigger:["input"],validator(u,r){return r&&!Ga(r)?new Error(v("invalidNumber")):!0}}]},L=u=>{B.value=be.cloneDeep(u),u?te.value=be.cloneDeep(u):te.value={phone:""},q.value=!0},ee=async()=>{var u;return(u=g.value)==null||u.validate(async r=>{var V,f,$,C,b,_e;if(!r)if(B.value)if(B.value.phone!==te.value.phone.replace(/\s+/g,"")&&ne.value.findIndex(ae=>ae.phone==te.value.phone.replace(/\s+/g,""))>-1)d.error(v("samePhoneNumberMessage"));else{a.start(),z.value=!0;const ae={phone:te.value.phone.replace(/\s+/g,"")},k=await Q({method:"put",url:`/newsletter/phones/${B.value.id}`,data:ae});k.success&&k.result.data&&(d.success(v("success")),O()),z.value=!1,a.finish(),q.value=!1}else if(ne.value.findIndex(ae=>ae.phone==te.value.phone.replace(/\s+/g,""))>-1)d.error(v("samePhoneNumberMessage"));else{a.start(),z.value=!0;const ae={phone:te.value.phone.replace(/\s+/g,"")},k=await Q({method:"post",url:"/newsletter/phones",data:ae});if(k.failure&&k.error)switch(($=(f=(V=k.error)==null?void 0:V.response)==null?void 0:f.data)==null?void 0:$.errorCode){case et.FORM_INVALID_DATA:X((_e=(b=(C=k.error)==null?void 0:C.response)==null?void 0:b.data)==null?void 0:_e.data);break;default:d.error(v("anErrorOccurred"))}else d.success(v("success")),O();z.value=!1,a.finish(),q.value=!1}}),!1};let G=null;const U=()=>{G&&(G.destroy(),G=null)};ma(U);const M=(u,r)=>r.map(V=>u.map(f=>V[f])),x=()=>{G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","phone","createdAt","updatedAt"];const V=be.sortBy(ne.value.map(($,C)=>({no:C+1,...$})),"phone"),f=M(r,V);try{u.export_json_to_excel({header:r,data:f,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(v("anErrorOccurred"))}})},H=()=>{G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}),fl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["phone"];const V=M(r,[{phone:"+22899999999"}]);try{u.export_json_to_excel({header:r,data:V,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(v("anErrorOccurred"))}})},J=o(!1),le=async({results:u})=>{z.value=!0,a.start(),G||(G=d.info(v("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].phone&&ne.value.findIndex(V=>V.phone.replace(/\s+/g,"")==u[r].phone.replace(/\s+/g,""))==-1&&(G&&(G.content=`${v("pleaseBePatient")}: ${r} ${v("task_s")} / ${u.length}`),await Q({method:"post",url:"/newsletter/phones",data:{phone:u[r].phone.replace(/\s+/g,"")}}));await O(),U(),a.finish(),z.value=!1,J.value=!1},s=o(ct()),N=o([]),A=u=>u.id,c=u=>{N.value=u},_=()=>{N.value=[],s.value=ct()},Z=async()=>(N.value.length?p.warning({title:v("confirm"),content:v("deleteSelectionWarningMessage",[N.value.length]),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{z.value=!0,a.start();for(let u=0;u<N.value.length;u++)(await Q({url:`/newsletter/phones/${N.value[u]}`,method:"delete"})).success;O(),a.finish(),z.value=!1,d.success(v("success")),_()}}):d.warning(v("noItemSelected")),!1);return(u,r)=>{const V=ca,f=it,$=Ct,C=tt,b=Ot,_e=gl,ae=Ya,k=ft,h=mt,oe=ut,ke=ha;return n(),D(me,null,[t($,{to:"#alt-action"},{default:l(()=>[t(f,null,{default:l(()=>[t(V,{onPositiveClick:r[0]||(r[0]=he=>x())},{trigger:l(()=>[t(e(Ve),{type:"success"},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("export")),1)]),_:1})]),default:l(()=>[P(" "+i(e(v)("exportDataInExcelFile")),1)]),_:1}),t(e(Ve),{type:"info",onClick:r[1]||(r[1]=he=>J.value=!0)},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("import")),1)]),_:1}),t(e(Ve),{type:"primary",onClick:r[2]||(r[2]=he=>L(null))},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(b,{name:"slide-fade",appear:""},{default:l(()=>[e(N).length?(n(),E(C,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(f,{align:"center",justify:"space-between"},{default:l(()=>[y("span",null,i(e(v)("nbItemsSelected",[e(N).length])),1),t(f,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Ve),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("delete")),1)]),_:1}),t(e(Ve),{type:"warning",size:"small",onClick:_},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"mdi:close"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):ve("",!0)]),_:1}),(n(),E(_e,{key:e(s),columns:S,data:e(m),pagination:Y,loading:e(T),"single-line":!1,"scroll-x":800,"row-key":A,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"])),t(oe,{show:e(q),"onUpdate:show":r[4]||(r[4]=he=>$e(q)?q.value=he:null),loading:e(z),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(B)?e(v)("editPhoneNumber"):e(v)("addPhoneNumber"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:ee,onNegativeClick:r[5]||(r[5]=he=>q.value=!1)},{default:l(()=>[t(h,{ref_key:"formRef",ref:g,class:"mt-5",model:e(te),rules:R,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(k,{label:e(v)("phone"),path:"phone"},{default:l(()=>[t(ae,{modelValue:e(te).phone,"onUpdate:modelValue":r[3]||(r[3]=he=>e(te).phone=he)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(oe,{show:e(J),"onUpdate:show":r[7]||(r[7]=he=>$e(J)?J.value=he:null),loading:e(z),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(v)("import")},{default:l(()=>[t(ke,{class:"my-5","on-success":le}),y("div",Eo,[t(e(Ve),{type:"info",size:"small",onClick:r[6]||(r[6]=he=>H())},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"mdi:download"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Lo="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",Po={class:"text-base"},No={class:"text-base"},Ro=je({__name:"DataForm",props:Gt({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(ue){const a=ue,d=_t(ue,"show"),p=_t(ue,"data"),X=nt(),Q=at(),{t:v}=He(),{tr:K,pickByTheme:T,editKeysToCamelCase:ne}=Je(),F=o(null),W=o(!1),Y=vt("currentEditItem"),S=Ae(()=>be.isEqual(p.value,Y==null?void 0:Y.value)&&be.isEqual(O.value,q.value)),m=()=>{d.value=!1,W.value=!1},O=o({}),z=o(ct()),q=o({}),B=o(),g=o();ht(()=>d.value,R=>{var L;R&&(aa(p.value.contentModelData)?O.value=Rt(p.value.contentModelData):O.value=Rt({}),be.forIn(ne(((L=a.contentModel)==null?void 0:L.dataStructure)??{}),(ee,G)=>{(!O.value[G]||Array.isArray(O.value[G])&&O.value[G].length==0)&&(G==="index"?O.value[G]=Rt({}):O.value[G]=Rt([]))}),q.value=be.cloneDeep(O.value),z.value=ct())},{immediate:!0});const te=async()=>{W.value=!0,X.start();const R=B.value&&await B.value(),L=g.value&&await g.value();(!B.value||R)&&(!g.value||L)?await a.submitData(O.value):Q.error(v("mandatoryFieldsNotFilledIn")),X.finish(),W.value=!1};return(R,L)=>{const ee=da,G=_l,U=yl,M=ge,x=de,H=Ve,J=it,le=tt,s=It,N=Lt,A=bt,c=la;return n(),E(c,{modelValue:d.value,"onUpdate:modelValue":L[3]||(L[3]=_=>d.value=_),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=_=>{F.value=_})},{header:l(()=>[y("div",Po,[t(ee,{depth:"1"},{default:l(()=>{var _;return[P(i(e(K)((_=a.contentModel)==null?void 0:_.title))+" ",1),y("span",null," Â -Â "+i(e(Y)?e(v)("editItem"):e(v)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(J,{align:"center"},{default:l(()=>[y("span",No,i(e(v)("status"))+":",1),t(U,{value:p.value.isActive,"onUpdate:value":L[0]||(L[0]=_=>p.value.isActive=_),name:"isActive",class:"w-full"},{default:l(()=>[t(G,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(G,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=y("div",{class:"w-4"},null,-1)),t(H,{type:"success",title:e(v)("save"),loading:e(W),disabled:e(S),onClick:L[1]||(L[1]=_=>te())},{icon:l(()=>[t(x,null,{default:l(()=>[t(M,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("save")),1)]),_:1},8,["title","loading","disabled"]),t(H,{type:"error",title:e(v)("close"),disabled:e(W),onClick:L[2]||(L[2]=_=>m())},{icon:l(()=>[t(x,null,{default:l(()=>[t(M,{icon:"carbon:close"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var _,Z;return[y("section",{style:Oe(`min-height: ${((_=e(F))==null?void 0:_.windowHeight)-((Z=e(F))==null?void 0:Z.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(T)("bg-slate-200","bg-zinc-800")}`)},[t(A,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(N,{class:"ml-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:Oe(`height: ${((u=e(F))==null?void 0:u.windowHeight)-((r=e(F))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),D(me,null,Ne(e(ne)((V=R.contentModel)==null?void 0:V.dataStructure),(f,$)=>(n(),D(me,{key:$},[String($)==="index"?(n(),E(le,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),E(vl,{key:`${e(z)}-${$}-form-1`,modelValue:e(O)[$],"onUpdate:modelValue":C=>e(O)[$]=C,items:f,onUpdate:(C,b)=>{B.value=b}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):ve("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(N,{class:"mr-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:Oe(`height: ${((u=e(F))==null?void 0:u.windowHeight)-((r=e(F))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),D(me,null,Ne(e(ne)((V=R.contentModel)==null?void 0:V.dataStructure),(f,$)=>(n(),D(me,{key:$},[String($)!=="index"?(n(),E(le,{key:0,title:e(K)(f.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{quaternary:"",size:"small",onClick:()=>e(O)[$].push({})},{icon:l(()=>[t(x,null,{default:l(()=>[t(M,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(v)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),D(me,null,Ne(e(O)[$],(C,b)=>(n(),E(le,{key:b,title:String(b+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(H,{type:"error",size:"small",onClick:()=>e(O)[$].splice(b,1)},{icon:l(()=>[t(x,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),E(vl,{key:`${e(z)}-${$}-${b}-form-2`,modelValue:e(O)[$][b],"onUpdate:modelValue":_e=>e(O)[$][b]=_e,items:f.items,onUpdate:(_e,ae)=>{g.value=ae}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):ve("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Oo={class:"flex items-center justify-between"},qo={class:"flex flex-col"},Fo={class:"text-sm font-bold"},jo={class:"text-xs font-normal"},Bo=je({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Gt(["update"],["update:show"]),setup(ue,{emit:a}){const{t:d}=He(),{request:p}=Qe(),{pickByTheme:X,tr:Q,displayFormErrors:v,mergeArrays:K}=Je(),{extractItemTitle:T}=rl(),{loadContentModels:ne}=We(),{contentModels:F}=Fe(We()),{isLightTheme:W}=Fe(yt()),Y=pt(),S=at(),m=nt(),O=a;ne();const z=_t(ue,"show"),q=o(!1),B=vt("currentEditItem"),g=async A=>{Y.warning({title:d("confirm"),content:d("confirmDeleteLink"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{var _,Z,u,r,V;m.start(),(await p({method:"put",url:`/content-model/items/${(_=B==null?void 0:B.value)==null?void 0:_.id}`,data:{relatedItems:(r=(u=(Z=B==null?void 0:B.value)==null?void 0:Z.relatedItems)==null?void 0:u.filter(f=>f.id!==A.id))==null?void 0:r.map(f=>f.id)}})).success?(S.success(d("success")),O("update",(V=B==null?void 0:B.value)==null?void 0:V.id)):S.error(d("anErrorOccurred")),m.finish()}})},te=A=>{var c;return(c=F.value)==null?void 0:c.find(_=>_.id===A.contentModelId)},R=o(!1),L=o(null),ee=o({contentModelId:null,itemId:null}),G={contentModelId:[{required:!0,message:d("fillRequired")}],itemId:[{required:!0,message:d("fillRequired")}]},U=async()=>{var A;return(A=L.value)==null||A.validate(async c=>{var _,Z,u,r,V,f,$,C,b,_e;if(!c){m.start(),q.value=!0;const ae=((Z=(_=B==null?void 0:B.value)==null?void 0:_.relatedItems)==null?void 0:Z.map(h=>h.id))||[],k=await p({method:"put",url:`/content-model/items/${(u=B==null?void 0:B.value)==null?void 0:u.id}`,data:{relatedItems:[...ae,ee.value.itemId]}});if(k.failure&&k.error)switch((f=(V=(r=k.error)==null?void 0:r.response)==null?void 0:V.data)==null?void 0:f.errorCode){case et.FORM_INVALID_DATA:v((b=(C=($=k.error)==null?void 0:$.response)==null?void 0:C.data)==null?void 0:b.data);break;default:S.error(d("anErrorOccurred"))}else S.success(d("success")),O("update",(_e=B==null?void 0:B.value)==null?void 0:_e.id),R.value=!1;q.value=!1,m.finish()}}),!1},M=A=>ie("span",{},{default:()=>Q(A.title)}),x=A=>Ae(()=>ie("span",{},{default:()=>T(A,te(A))})),H=o(!1),J=o([]),le=o([]),s=async(A,c)=>{if(!A.length){le.value=[];return}H.value=!0;const _=await p({url:`/content-model-items/search/${A}/${c}`});_.success&&_.result&&(le.value=_.result.data),H.value=!1},N=Ae(()=>K(J.value,le.value,"id").filter(A=>{var c;return A.id!==((c=B==null?void 0:B.value)==null?void 0:c.id)}));return(A,c)=>{const _=ge,Z=Ve,u=it,r=de,V=tt,f=It,$=kt,C=Kt,b=ut,_e=$t,ae=ft,k=mt;return n(),D(me,null,[t(b,{show:z.value,"onUpdate:show":c[2]||(c[2]=h=>z.value=h),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(d)("linkContentModelItems")},{"header-extra":l(()=>[t(u,{align:"center"},{default:l(()=>[t(Z,{size:"small",type:"primary",disabled:e(q),onClick:c[0]||(c[0]=h=>R.value=!0)},{default:l(()=>[t(_,{icon:"carbon:add-alt",class:"mr-1"}),P(" "+i(e(d)("add")),1)]),_:1},8,["disabled"]),t(Z,{size:"small",type:"error",disabled:e(q),onClick:c[1]||(c[1]=h=>z.value=!1)},{default:l(()=>[t(_,{icon:"carbon:close",class:"mr-1"}),P(" "+i(e(d)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(C,{show:e(q)},{default:l(()=>{var h,oe;return[(oe=(h=e(B))==null?void 0:h.relatedItems)!=null&&oe.length?(n(),E(f,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var ke;return[(n(!0),D(me,null,Ne((ke=e(B))==null?void 0:ke.relatedItems,he=>(n(),E(V,{key:he.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Ue;return[y("div",Oo,[y("div",qo,[y("span",Fo,i(e(T)(he,te(he))),1),y("span",jo,i(e(Q)((Ue=te(he))==null?void 0:Ue.title)),1)]),t(u,null,{default:l(()=>[t(Z,{size:"small",type:"error",secondary:e(W),onClick:Me=>g(he)},{default:l(()=>[t(r,null,{default:l(()=>[t(_,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),E(V,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t($,{description:e(d)("noLinkAdded")},{icon:l(()=>[t(r,null,{default:l(()=>[t(_,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(b,{show:e(R),"onUpdate:show":c[6]||(c[6]=h=>$e(R)?R.value=h:null),loading:e(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(d)("addLink"),"positive-text":e(d)("validate"),"negative-text":e(d)("cancel"),onPositiveClick:U,onNegativeClick:c[7]||(c[7]=h=>R.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:L,model:e(ee),rules:G,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ae,{label:e(d)("contentModel"),path:"contentModelId"},{default:l(()=>[t(_e,{value:e(ee).contentModelId,"onUpdate:value":c[3]||(c[3]=h=>e(ee).contentModelId=h),options:e(F),placeholder:e(d)("contentModel"),"render-label":M,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(ae,{label:e(d)("itemToLink"),path:"itemId"},{default:l(()=>[t(_e,{value:e(ee).itemId,"onUpdate:value":c[4]||(c[4]=h=>e(ee).itemId=h),options:e(N)||[],placeholder:e(d)("itemToLink"),"render-label":h=>x(h).value,loading:e(H),disabled:!e(ee).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[5]||(c[5]=h=>s(h,e(ee).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ko={key:0,class:"w-full flex items-center justify-between gap-4"},Yo={class:"flex items-center gap-3"},Go={key:0},Ho={class:"flex items-center justify-center h-full"},Wo=["src"],Jo={class:"text-center text-dimgray text-sm"},Xo={key:1,class:"flex items-center justify-center"},Zo=je({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=rl(),{tr:X,displayFormErrors:Q}=Je(),v=pt(),K=at(),T=nt(),ne=_t(ue,"modelValue"),F=o(!1),W=o(!1),Y=o(!1),S=o(!1),m=o([]),O=o(0),z=o(12),q=o(1),B=Ae(()=>{var _;return`/content-model/items?pageSize=${z.value}&contentModelId=${(_=ne.value)==null?void 0:_.id}`}),g=_=>{R(`${B.value}&page=${_}`)},te=_=>{z.value=_,R()},R=async(_=null,Z=!1)=>{var r,V,f,$,C;F.value=!0,T.start();const u=await d({url:_??B.value});u.success&&u.result&&(m.value=((r=u.result.data)==null?void 0:r.items)||[],O.value=((f=(V=u.result.data)==null?void 0:V.meta)==null?void 0:f.total)||0,q.value=((C=($=u.result.data)==null?void 0:$.meta)==null?void 0:C.currentPage)||1),T.finish(),F.value=!1};R(null,!0);const L=o(null),ee=o({title:"",contentModelData:"",isActive:!0}),G=_=>{L.value=be.cloneDeep(_),_?ee.value=be.cloneDeep(_):ee.value={title:"",contentModelData:"",isActive:!0},Y.value=!0},U=_=>{L.value=be.cloneDeep(_),S.value=!0},M=async _=>{await R();const Z=m.value.find(u=>u.id===_);Z&&U(Z)},x=async _=>{v.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-model/items/${_.id}`})).success?(K.success(a("success")),R()):K.error(a("anErrorOccurred"))}})},H=async _=>{var r,V,f,$,C,b,_e;T.start(),W.value=!0;const Z={title:ee.value.title,contentModelData:_,isActive:ee.value.isActive,contentModelId:(r=ne.value)==null?void 0:r.id},u=await d({method:L.value?"put":"post",url:L.value?`/content-model/items/${L.value.id}`:"/content-model/items",data:Z});if(u.failure&&u.error)switch(($=(f=(V=u.error)==null?void 0:V.response)==null?void 0:f.data)==null?void 0:$.errorCode){case et.FORM_INVALID_DATA:Q((_e=(b=(C=u.error)==null?void 0:C.response)==null?void 0:b.data)==null?void 0:_e.data);break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),R(`${B.value}&page=${q.value}`),Y.value=!1;W.value=!1,T.finish()},J=o(!1),le=o(ct()),s=o({}),N=Ae(()=>{let _=0;for(const Z in s.value)s.value[Z]&&_++;return _});function A(){s.value={},R()}const c=async()=>(N.value?v.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[N.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{W.value=!0,T.start();for(const _ in s.value)s.value[_]&&await d({url:`/content-model/items/${_}`,method:"delete"});T.finish(),W.value=!1,K.success(a("success")),s.value={},R(null,!0)}}):K.warning(a("noItemSelected")),!1);return St("currentEditItem",L),(_,Z)=>{const u=Yt,r=ge,V=de,f=Ve,$=it,C=Ct,b=ra,_e=bl,ae=Dt,k=tt,h=Ot,oe=Lt,ke=bt,he=al,Ue=Kt,Me=kt;return n(),D(me,null,[t(C,{to:"#alt-action"},{default:l(()=>[t($,{align:"center"},{default:l(()=>[t(u,{checked:e(J),"onUpdate:checked":[Z[0]||(Z[0]=ce=>$e(J)?J.value=ce:null),Z[1]||(Z[1]=ce=>{for(const Le of e(m))Le.id&&(e(s)[Le.id]=ce);le.value=("uuidv4"in _?_.uuidv4:e(ct))()})],disabled:!e(m).length},{default:l(()=>[P(i(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(f,{type:"primary",onClick:Z[2]||(Z[2]=ce=>G(null))},{icon:l(()=>[t(V,{size:"18"},{default:l(()=>[t(r,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(b,{class:"mt-2 mb-5",onBack:Z[3]||(Z[3]=ce=>ne.value=null)},{title:l(()=>{var ce;return[P(i(e(X)((ce=ne.value)==null?void 0:ce.title)),1)]}),back:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(N)>0?(n(),D("section",Ko,[y("span",null,i(e(a)("nbItemsSelected",[e(N)])),1),y("section",Yo,[t(f,{type:"error",size:"small",onClick:c},{icon:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("delete")),1)]),_:1}),t(f,{type:"warning",size:"small",onClick:A},{icon:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):ve("",!0)]),_:1}),e(m).length&&!e(F)?(n(),D("section",Go,[t(ke,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),D(me,null,Ne(e(m),(ce,Le)=>(n(),E(oe,{key:Le},{default:l(()=>[t(h,{name:"slide-fade",appear:""},{default:l(()=>[t(k,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var we;return[y("div",Ho,[y("img",{src:((we=ne.value)==null?void 0:we.imageUrl)??e(Lo),class:"w-full h-[200px] object-cover"},null,8,Wo)])]}),header:l(()=>[y("div",Jo,[t(_e,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[ce.id?(n(),E(u,{key:e(le),checked:e(s)[ce.id],"onUpdate:checked":we=>e(s)[ce.id]=we,class:"mr-1"},null,8,["checked","onUpdate:checked"])):ve("",!0),P(" "+i(e(p)(ce,ne.value)),1)]),_:2},1024)])]),action:l(()=>[t($,{justify:"space-between",align:"center"},{default:l(()=>[t(ae,{bordered:!1,type:ce.isActive?"success":"error"},{default:l(()=>[P(i(ce.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t($,null,{default:l(()=>[t(f,{ternary:"",circle:"",title:e(a)("edit"),onClick:we=>G(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(f,{ternary:"",circle:"",title:e(a)("links"),onClick:we=>U(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(f,{ternary:"",circle:"",title:e(a)("delete"),onClick:we=>x(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(he,{page:e(q),"onUpdate:page":[Z[4]||(Z[4]=ce=>$e(q)?q.value=ce:null),g],class:"mt-10 justify-center","show-size-picker":"","page-size":e(z),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(O)/e(z)),"onUpdate:pageSize":te},{prefix:l(()=>[P(i(`${e(O)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(F)?(n(),D("section",Xo,[t(Ue,{size:"medium"})])):(n(),E(Me,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(Ro,{show:e(Y),"onUpdate:show":Z[5]||(Z[5]=ce=>$e(Y)?Y.value=ce:null),data:e(ee),"onUpdate:data":Z[6]||(Z[6]=ce=>$e(ee)?ee.value=ce:null),"content-model":ne.value,"submit-data":H},null,8,["show","data","content-model"]),t(Bo,{show:e(S),"onUpdate:show":Z[7]||(Z[7]=ce=>$e(S)?S.value=ce:null),onUpdate:M},null,8,["show"])],64)}}}),Qo={key:2},ei={class:"flex items-center"},ti={class:"text-base"},li={class:"mt-4"},ai="previews",ni=je({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:X,displayFormErrors:Q,fileUrl:v,isInDevMode:K,formatKey:T}=Je(),{isLightTheme:ne}=Fe(yt()),{contentModels:F}=Fe(We()),{loadContentModels:W}=We(),Y=nt(),S=at(),m=pt(),O=o(!1),z=o(!1),q=vt("appConfig"),B=async()=>{Y.start(),O.value=!0,await W(),O.value=!1,Y.finish()};B();const g=o(12),te=o(1),R=V=>{g.value=V},L={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},ee=o(!1),G=o(null),U=o(L),M={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},x=o(null),H=V=>{x.value=be.cloneDeep(V),U.value=be.cloneDeep(V||L),ee.value=!0},J=async()=>{var V;return(V=G.value)==null||V.validate(async f=>{var $,C,b,_e,ae,k;if(!f){Y.start(),z.value=!0;const h={name:U.value.name,title:U.value.title,image:U.value.image,description:U.value.description,titleFieldName:U.value.titleFieldName,hasPermalink:U.value.hasPermalink},oe=await d({method:x.value?"put":"post",url:x.value?`/content-models/${x.value.id}`:"/content-models",data:h});if(oe.failure&&oe.error)switch((b=(C=($=oe.error)==null?void 0:$.response)==null?void 0:C.data)==null?void 0:b.errorCode){case et.FORM_INVALID_DATA:Q((k=(ae=(_e=oe.error)==null?void 0:_e.response)==null?void 0:ae.data)==null?void 0:k.data);break;default:S.error(a("anErrorOccurred"))}else S.success(a("success")),B(),ee.value=!1;z.value=!1,Y.finish()}}),!1},le=async V=>{m.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-models/${V.id}`})).success?(S.success(a("success")),B()):S.error(a("anErrorOccurred"))}})},s=o(null),N=o(!1),A=async V=>{var $;z.value=!0,Y.start();const f=await d({url:`/content-models/${($=s.value)==null?void 0:$.id}`,method:"put",data:{dataStructure:V}});f.success&&f.result?(S.success(a("success")),B(),c(f.result.data)):S.error(a("anErrorOccurred")),z.value=!1,Y.finish()},c=V=>{s.value=V,N.value=!0},_=o(!1),Z=async V=>{U.value.image=V,_.value=!1},u=()=>{U.value.image=""},r=el("content-models-management",()=>({itemsContentModel:o(null)}))();return ht(()=>U.value.title,V=>{x.value||U.value.name.length<=21&&(U.value.name=_a(p(V),{trim:!0,lower:!0,strict:!0}))}),(V,f)=>{var re,xe,Ee;const $=ge,C=de,b=Ve,_e=Ct,ae=it,k=Tt,h=tt,oe=al,ke=kt,he=Ot,Ue=gt,Me=ft,ce=Ze,Le=Lt,we=pa,se=qt,ye=bt,I=Yt,Ce=mt,j=ut,pe=Bt;return n(),D(me,null,[e(r).itemsContentModel?ve("",!0):(n(),E(_e,{key:0,to:"#alt-action"},{default:l(()=>[e(F)&&e(F).length?(n(),E(b,{key:0,type:"primary",onClick:f[0]||(f[0]=ze=>H(null))},{icon:l(()=>[t(C,{size:"18"},{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addContentModel")),1)]),_:1})):ve("",!0)]),_:1})),e(r).itemsContentModel?(n(),E(Zo,{key:1,modelValue:e(r).itemsContentModel,"onUpdate:modelValue":f[1]||(f[1]=ze=>e(r).itemsContentModel=ze)},null,8,["modelValue"])):(n(),D("section",Qo,[t(he,{appear:"",name:"slide-fade"},{default:l(()=>[y("section",null,[e(F)&&e(F).length?(n(),D(me,{key:0},[(n(!0),D(me,null,Ne(e(F).slice((e(te)-1)*e(g),e(te)*e(g)),ze=>(n(),E(h,{key:ze.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[y("div",ei,[e(K)?(n(),E(ae,{key:0},{default:l(()=>[t(b,{size:"small",type:"primary",secondary:e(ne),onClick:ot(Pe=>c(ze),["stop"])},{default:l(()=>[t(C,{class:"mr-1"},{default:l(()=>[t($,{icon:"carbon:data-1"})]),_:1}),P(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(b,{size:"small",type:"primary",secondary:e(ne),onClick:ot(Pe=>H(ze),["stop"])},{default:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(b,{size:"small",type:"error",secondary:e(ne),onClick:ot(Pe=>le(ze),["stop"])},{default:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):ve("",!0),e(K)?(n(),E(k,{key:1,vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):ve("",!0),y("span",ti,i(e(p)(ze.title)),1)])]),"header-extra":l(()=>[t(b,{size:"small",type:"primary",secondary:e(ne),onClick:ot(Pe=>e(r).itemsContentModel=ze,["stop"])},{icon:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(oe,{page:e(te),"onUpdate:page":f[2]||(f[2]=ze=>$e(te)?te.value=ze:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(g),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(F).length/e(g)),"onUpdate:pageSize":R},{prefix:l(()=>[P(i(`${e(F).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),E(h,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ke,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[y("div",li,[t(b,{size:"small",onClick:f[3]||(f[3]=ze=>H(null))},{icon:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(j,{show:e(ee),"onUpdate:show":f[11]||(f[11]=ze=>$e(ee)?ee.value=ze:null),loading:e(z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(x)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:J,onNegativeClick:f[12]||(f[12]=ze=>ee.value=!1)},{default:l(()=>[t(Ce,{ref_key:"formRef",ref:G,model:e(U),rules:M,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Me,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Ue,{modelValue:e(U).title,"onUpdate:modelValue":f[4]||(f[4]=ze=>e(U).title=ze),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Ue,{modelValue:e(U).description,"onUpdate:modelValue":f[5]||(f[5]=ze=>e(U).description=ze),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ye,{"x-gap":"12",span:24},{default:l(()=>[t(Le,{span:14},{default:l(()=>[t(Me,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(ce,{value:e(U).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":f[6]||(f[6]=ze=>e(U).name=e(T)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(ce,{value:e(U).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":f[7]||(f[7]=ze=>e(U).titleFieldName=e(T)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(se,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(ae,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(we,{class:"cursor-pointer","object-fit":"cover",style:Oe("border: 1px dashed "+e(X)("green","white")),size:150,src:e(v)(e(U).image||""),onClick:f[8]||(f[8]=ze=>_.value=!0)},{default:l(()=>[e(U).image?ve("",!0):(n(),E(C,{key:0,size:64},{default:l(()=>[t($,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(U).image?(n(),E(b,{key:0,quaternary:"",onClick:f[9]||(f[9]=ze=>u())},{icon:l(()=>[t(C,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(Me,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(I,{checked:e(U).hasPermalink,"onUpdate:checked":f[10]||(f[10]=ze=>e(U).hasPermalink=ze)},{default:l(()=>[P(i(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(pe,{show:e(_),"onUpdate:show":f[13]||(f[13]=ze=>$e(_)?_.value=ze:null),title:e(a)("selectImage"),"upload-config":{folder:ai,limit:0,maxSize:0,baseUrl:((re=e(q))==null?void 0:re.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:Z},null,8,["show","title","upload-config"]),t(ba,{show:e(N),"onUpdate:show":f[14]||(f[14]=ze=>$e(N)?N.value=ze:null),title:e(p)((xe=e(s))==null?void 0:xe.title),"raw-data-structure":(Ee=e(s))==null?void 0:Ee.dataStructure,"update-data-structure":A},null,8,["show","title","raw-data-structure"])]))],64)}}});var Mt=(ue=>(ue.NEWS_TAG="news-tag",ue.NEWS_CATEGORY="news-category",ue.NEWS_ARTICLE="news-article",ue.CONTENT_MODEL="content-model",ue))(Mt||{});const si={class:"text-base font-bold"},oi={class:"text-sm"},ii={class:"text-xs text-slate-400"},ri={class:"text-xs text-slate-400"},ui={class:"text-xs text-slate-400"},di={class:"text-sm"},ci={class:"text-xs text-slate-400"},pi={class:"text-xs text-slate-400"},fi={class:"text-xs text-slate-400"},mi={class:"text-sm"},vi={class:"text-xs text-slate-400"},_i={class:"text-xs text-slate-400"},yi={class:"text-xs text-slate-400"},gi={class:"text-base font-bold"},bi={class:"text-sm"},hi={class:"text-xs text-slate-400"},ki={class:"text-xs text-slate-400"},wi={class:"text-xs text-slate-400"},xi=je({__name:"index",setup(ue){const{t:a}=He(),{tr:d}=Je(),{request:p}=Qe(),{contentModels:X,pages:Q}=Fe(We()),{loadContentModels:v,loadPages:K}=We(),T=at(),ne=nt(),F=[{pathPrefix:"/news/article",contentType:Mt.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Mt.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Mt.NEWS_TAG,contentParam:"slug",pageId:null}],W=o(!1),Y=o([]),S=o(F),m=o(),O=Ae(()=>X.value.filter(R=>R.hasPermalink)),z=async(R=!1)=>{ne.start(),W.value=!0,R&&(await v(),await K());const L=await p({url:"/permalinks"});if(L.success&&L.result){Y.value=L.result.data,S.value=be.cloneDeep(F);for(let ee=0;ee<O.value.length;ee++)S.value.push({pathPrefix:`/${O.value[ee].slug}`,contentType:Mt.CONTENT_MODEL,contentParam:"id",contentId:O.value[ee].id,pageId:null});for(let ee=0;ee<S.value.length;ee++)switch(S.value[ee].contentType){case Mt.NEWS_ARTICLE:case Mt.NEWS_CATEGORY:case Mt.NEWS_TAG:{const G=Y.value.find(U=>U.contentType===S.value[ee].contentType);G&&(S.value[ee].pathPrefix=G.pathPrefix,S.value[ee].contentParam=G.contentParam,S.value[ee].pageId=G.pageId,S.value[ee].permalinkId=G.id)}break;case Mt.CONTENT_MODEL:{const G=Y.value.find(U=>U.contentType===S.value[ee].contentType&&U.contentId===S.value[ee].contentId);G&&(S.value[ee].pathPrefix=G.pathPrefix,S.value[ee].contentParam=G.contentParam,S.value[ee].pageId=G.pageId,S.value[ee].permalinkId=G.id)}break}m.value=be.cloneDeep(S.value)}W.value=!1,ne.finish()};z(!0);const q=async()=>{ne.start(),W.value=!0,(await p({method:"put",url:"/permalinks",data:S.value})).success&&(T.success(a("success")),z()),W.value=!1,ne.finish()},B=Ae(()=>be.isEqual(S.value,m.value)),g=R=>ie("span",{},{default:()=>d(R.title)}),te=R=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(R);return(R,L)=>{const ee=ge,G=de,U=Ve,M=Ct,x=Ze,H=Lt,J=$t,le=bt,s=tt,N=tl,A=ll,c=Tt;return n(),D(me,null,[t(M,{to:"#alt-action"},{default:l(()=>[t(U,{type:"primary",loading:e(W),disabled:e(B),onClick:L[0]||(L[0]=_=>q())},{icon:l(()=>[t(G,null,{default:l(()=>[t(ee,{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(s,{embedded:"",size:"small"},{default:l(()=>[t(A,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:_})=>[t(G,null,{default:l(()=>[_?(n(),E(ee,{key:0,icon:"fa-solid:chevron-left"})):(n(),E(ee,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[10]||(L[10]=[y("span",null,null,-1)])),default:l(()=>[t(N,{name:"1"},{header:l(()=>[y("span",si,i(e(a)("news")),1)]),default:l(()=>[t(s,{size:"small"},{header:l(()=>[y("span",oi,i(e(a)("articles")),1)]),default:l(()=>[t(le,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[y("span",ii,i(e(a)("pathPrefix")),1),t(x,{value:e(S)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=_=>e(S)[0].pathPrefix=_),"allow-input":te,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",ri,i(e(a)("contentParam")),1),t(x,{value:e(S)[0].contentParam,"onUpdate:value":L[2]||(L[2]=_=>e(S)[0].contentParam=_),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",ui,i(e(a)("contentPage")),1),t(J,{value:e(S)[0].pageId,"onUpdate:value":L[3]||(L[3]=_=>e(S)[0].pageId=_),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":g,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[y("span",di,i(e(a)("categories")),1)]),default:l(()=>[t(le,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[y("span",ci,i(e(a)("pathPrefix")),1),t(x,{value:e(S)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=_=>e(S)[1].pathPrefix=_),"allow-input":te,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",pi,i(e(a)("contentParam")),1),t(x,{value:e(S)[1].contentParam,"onUpdate:value":L[5]||(L[5]=_=>e(S)[1].contentParam=_),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",fi,i(e(a)("contentPage")),1),t(J,{value:e(S)[1].pageId,"onUpdate:value":L[6]||(L[6]=_=>e(S)[1].pageId=_),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":g,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[y("span",mi,i(e(a)("tags")),1)]),default:l(()=>[t(le,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[y("span",vi,i(e(a)("pathPrefix")),1),t(x,{value:e(S)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=_=>e(S)[2].pathPrefix=_),"allow-input":te,size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",_i,i(e(a)("contentParam")),1),t(x,{value:e(S)[2].contentParam,"onUpdate:value":L[8]||(L[8]=_=>e(S)[2].contentParam=_),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(H,{span:"7"},{default:l(()=>[y("span",yi,i(e(a)("contentPage")),1),t(J,{value:e(S)[2].pageId,"onUpdate:value":L[9]||(L[9]=_=>e(S)[2].pageId=_),options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":g,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{class:"!my-2"}),e(O).length&&e(S).length>3?(n(),E(s,{key:0,embedded:"",size:"small"},{default:l(()=>[t(A,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:_})=>[t(G,null,{default:l(()=>[_?(n(),E(ee,{key:0,icon:"fa-solid:chevron-left"})):(n(),E(ee,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[11]||(L[11]=[y("span",null,null,-1)])),default:l(()=>[t(N,{name:"1"},{header:l(()=>[y("span",gi,i(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),D(me,null,Ne(e(O),(_,Z)=>(n(),E(s,{key:_.id,size:"small"},{header:l(()=>[y("span",bi,i(e(d)(_.title)),1)]),default:l(()=>[t(le,{cols:"24","x-gap":"12"},{default:l(()=>[t(H,{span:"10"},{default:l(()=>[y("span",hi,i(e(a)("pathPrefix")),1),t(x,{value:e(S)[Z+3].pathPrefix,"onUpdate:value":u=>e(S)[Z+3].pathPrefix=u,"allow-input":te,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[y("span",ki,i(e(a)("contentParam")),1),t(x,{value:e(S)[Z+3].contentParam,"onUpdate:value":u=>e(S)[Z+3].contentParam=u,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(H,{span:"7"},{default:l(()=>[y("span",wi,i(e(a)("contentPage")),1),t(J,{value:e(S)[Z+3].pageId,"onUpdate:value":u=>e(S)[Z+3].pageId=u,options:e(Q)||[],placeholder:e(a)("selectPage"),"render-label":g,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):ve("",!0)],64)}}}),Ci={class:"w-full"},Ii=je({__name:"Campaign",setup(ue){const a=nt(),d=at(),p=pt(),X=sa(),{displayFormErrors:Q,ckEditorToolbarItems:v}=Je(),{request:K}=Qe(),{t:T,locale:ne}=He(),F=o(!1),W=o([]),Y=o([]),S=o([]),m=o([]),O=o(""),z=o(),q={pageSize:12,prefix:({itemCount:s})=>ie("div",{class:"font-bold"},{default:()=>`${T("total")}: ${s}`})},B=[{title:T("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(s){return ie("div",{},{default:()=>s.title})}},{title:T("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(s){return ie("small",{},{default:()=>s.subject})}},{title:T("numberOfRecipients"),key:"recipients",width:200,render(s){return ie("div",{},{default:()=>s.recipients.length})},sortOrder:!1,sorter:"default"},{title:T("updateAt"),key:"updatedAt",width:150,render(s){return ie("div",{},{default:()=>Et(s.updatedAt,{locale:ne.value,outPattern:"DD MMMM YYYY"})})}},{title:T("createdAt"),key:"createdAt",width:150,render(s){return ie("div",{},{default:()=>Et(s.createdAt,{locale:ne.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ie(Ze,{ref:z,placeholder:T("search"),value:O.value,onInput:s=>{O.value=s}},{suffix:()=>ie(de,{},{default:()=>ie(ge,{icon:"carbon:search"})})}),key:"actions",width:175,render(s){return ie("div",{class:"flex justify-end items-center w-full"},[ie(Ve,{size:"small",type:"primary",title:T("history"),onClick:()=>{G.value=s,ee.value=!0},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"mdi:history"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"info",title:T("launchCampaign"),onClick:()=>{const N=p.info({title:T("launchCampaign"),content:T("confirmLaunchCampaign",[s.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:T("yes"),negativeText:T("cancel"),onPositiveClick:async()=>{var Z,u,r,V,f,$,C;N.loading=!0;const A=await K({url:"/email",method:"post",data:{title:s.title,subject:s.subject,content:s.content,recipients:s.recipients.filter(b=>Xt.isEmail(b)),tags:[]}}),c=(Z=X.getSettingValue("phone","string"))==null?void 0:Z.split(",")[0],_=await K({url:"/sms",method:"post",data:{from:c.replace(/\s+/g,""),content:s.rawContent,recipients:s.recipients.filter(b=>!Xt.isEmail(b))}});if(A.failure&&A.error)switch((V=(r=(u=A.error)==null?void 0:u.response)==null?void 0:r.data)==null?void 0:V.errorCode){case et.FORM_INVALID_DATA:d.error(T("invalidData"));break;default:d.error(T("sendingFailed"))}else if(_.failure&&_.error)switch((C=($=(f=_.error)==null?void 0:f.response)==null?void 0:$.data)==null?void 0:C.errorCode){case et.FORM_INVALID_DATA:d.error(T("invalidData"));break;default:d.error(T("sendingFailed"))}else{const b=s.history||[];b.push({id:ct(),date:Va(new Date,{locale:ne.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+A.result.message+" Phone: "+_.result.message});const _e=await K({method:"put",url:`/newsletter/campaigns/${s.id}`,data:{history:b}});_e.success&&_e.result.data?(d.success(T("success")),te()):d.error(T("anErrorOccurred"))}N.loading=!1}})},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"mdi:send"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"warning",title:T("edit"),onClick:()=>{H(s)},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:edit"})})}),ie("div",{class:"w-2"}),ie(Ve,{size:"small",type:"error",title:T("delete"),onClick:()=>{p.warning({title:T("confirm"),content:T("confirmDeleteCampaign"),positiveText:T("yes"),negativeText:T("no"),onPositiveClick:async()=>{(await K({method:"delete",url:`/newsletter/campaigns/${s.id}`})).success?(d.success(T("success")),te()):d.error(T("anErrorOccurred"))}})},renderIcon:()=>ie(de,null,{default:()=>ie(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],g=Ae(()=>{if(!O.value)return m.value;const s=m.value.filter(N=>N.title.toLowerCase().includes(O.value.toLowerCase())||N.subject.toLowerCase().includes(O.value.toLowerCase()));return z.value&&z.value.focus(),s}),te=async(s=!1)=>{F.value=!0;const N=await K({url:"/newsletter/campaigns"});if(N.success&&N.result&&(m.value=N.result.data),s){const A=await K({url:"/newsletter/emails"});A.success&&A.result&&(W.value=A.result.data);const c=await K({url:"/newsletter/phones"});c.success&&c.result&&(Y.value=c.result.data),S.value=[...W.value.map(_=>({recipient:_.email,type:"email"})),...Y.value.map(_=>({recipient:_.phone,type:"phone"}))]}F.value=!1};te(!0);const R=o(!1),L=o(!1),ee=o(!1),G=o(null),U=o(null),M=o({title:"",subject:"",content:"",rawContent:"",recipients:[]}),x={title:[{required:!0,message:T("fillRequired")}],subject:[{required:!0,message:T("fillRequired")}],content:[{required:!0,message:T("fillRequired")}],rawContent:[{required:!0,message:T("fillRequired")}],recipients:[{required:!0,message:T("fillRequired")}]},H=s=>{G.value=be.cloneDeep(s),s?M.value=be.cloneDeep(s):M.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},L.value=!0},J=async()=>{var s;return(s=U.value)==null||s.validate(async N=>{var A,c,_,Z,u,r;if(!N)if(G.value)if(G.value.title!==M.value.title&&m.value.findIndex(V=>V.title==M.value.title)>-1)d.error(T("sameCampaignTitleMessage"));else{a.start(),R.value=!0;const V={title:M.value.title,subject:M.value.subject,content:M.value.content,rawContent:M.value.rawContent,recipients:M.value.recipients},f=await K({method:"put",url:`/newsletter/campaigns/${G.value.id}`,data:V});f.success&&f.result.data&&(d.success(T("success")),te()),R.value=!1,a.finish(),L.value=!1}else if(m.value.findIndex(V=>V.title==M.value.title)>-1)d.error(T("sameCampaignTitleMessage"));else{a.start(),R.value=!0;const V={title:M.value.title,subject:M.value.subject,content:M.value.content,rawContent:M.value.rawContent,recipients:M.value.recipients},f=await K({method:"post",url:"/newsletter/campaigns",data:V});if(f.failure&&f.error)switch((_=(c=(A=f.error)==null?void 0:A.response)==null?void 0:c.data)==null?void 0:_.errorCode){case et.FORM_INVALID_DATA:Q((r=(u=(Z=f.error)==null?void 0:Z.response)==null?void 0:u.data)==null?void 0:r.data);break;default:d.error(T("anErrorOccurred"))}else d.success(T("success")),te();R.value=!1,a.finish(),L.value=!1}}),!1},le=(s,N)=>be.isEqual(s.slice().sort(),N.slice().sort());return(s,N)=>{const A=Ct,c=gl,_=ft,Z=va,u=Yt,r=$t,V=mt,f=ut,$=Ea,C=Da,b=La,_e=It,ae=kt;return n(),D(me,null,[t(A,{to:"#alt-action"},{default:l(()=>[t(e(Ve),{type:"primary",onClick:N[0]||(N[0]=k=>H(null))},{icon:l(()=>[t(e(de),{size:"18"},{default:l(()=>[t(e(ge),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[P(" "+i(e(T)("addCampaign")),1)]),_:1})]),_:1}),t(c,{columns:B,data:e(g),pagination:q,loading:e(F),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"]),t(f,{show:e(L),"onUpdate:show":N[9]||(N[9]=k=>$e(L)?L.value=k:null),loading:e(R),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(T)("editCampaign"):e(T)("addCampaign"),"positive-text":e(T)("validate"),"negative-text":e(T)("cancel"),onPositiveClick:J,onNegativeClick:N[10]||(N[10]=k=>L.value=!1)},{default:l(()=>[t(V,{ref_key:"formRef",ref:U,class:"mt-5",model:e(M),rules:x,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(_,{label:e(T)("title"),path:"title"},{default:l(()=>[t(e(Ze),{value:e(M).title,"onUpdate:value":N[1]||(N[1]=k=>e(M).title=k),placeholder:e(T)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{label:e(T)("subject"),path:"subject"},{default:l(()=>[t(e(Ze),{value:e(M).subject,"onUpdate:value":N[2]||(N[2]=k=>e(M).subject=k),placeholder:e(T)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{label:e(T)("content"),path:"content"},{default:l(()=>[y("div",Ci,[t(Z,{modelValue:e(M).content,"onUpdate:modelValue":N[3]||(N[3]=k=>e(M).content=k),"toolbar-items":e(v),placeholder:e(T)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(_,{label:e(T)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Ze),{value:e(M).rawContent,"onUpdate:value":N[4]||(N[4]=k=>e(M).rawContent=k),placeholder:e(T)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{label:e(T)("recipients"),path:"recipients"},{default:l(()=>[t(r,{value:e(M).recipients,"onUpdate:value":N[8]||(N[8]=k=>e(M).recipients=k),options:e(S),placeholder:e(T)("recipients"),loading:e(F),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(u,{size:"large",class:"w-full","default-checked":e(S).length&&le(e(M).recipients,e(S).filter(k=>k.type=="email").map(k=>k.recipient)),"onUpdate:checked":N[5]||(N[5]=k=>{k?e(M).recipients=e(S).filter(h=>h.type=="email").map(h=>h.recipient):e(M).recipients=e(M).recipients.filter(h=>!("_v"in s?s._v:e(Xt)).isEmail(h))})},{default:l(()=>[P(i(e(T)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),N[12]||(N[12]=y("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(S).length&&le(e(M).recipients,e(S).filter(k=>k.type=="phone").map(k=>k.recipient)),"onUpdate:checked":N[6]||(N[6]=k=>{k?e(M).recipients=e(S).filter(h=>h.type=="phone").map(h=>h.recipient):e(M).recipients=e(M).recipients.filter(h=>("_v"in s?s._v:e(Xt)).isEmail(h))})},{default:l(()=>[P(i(e(T)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),N[13]||(N[13]=y("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(S).length&&e(M).recipients.length===e(S).length,"onUpdate:checked":N[7]||(N[7]=k=>{k?e(M).recipients=e(S).filter(h=>h.recipient).map(h=>h.recipient):e(M).recipients=[]})},{default:l(()=>[P(i(e(T)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(f,{show:e(ee),"onUpdate:show":N[11]||(N[11]=k=>$e(ee)?ee.value=k:null),loading:e(R),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(T)("history")},{default:l(()=>{var k,h;return[(h=(k=e(G))==null?void 0:k.history)!=null&&h.length?(n(),E(_e,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(b,{hoverable:""},{default:l(()=>{var oe;return[(n(!0),D(me,null,Ne((oe=e(G))==null?void 0:oe.history.slice().reverse(),ke=>(n(),E(C,{key:ke.id},{default:l(()=>[t($,{title:ke.date,"content-style":"margin-top: 10px;"},{default:l(()=>[P(i(ke.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),E(ae,{key:1,description:e(T)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),$i={id:"header-btn"},Vi={key:1,id:"alt-action"},Ti={key:"contact-info"},zi={class:"text-xs"},Ui={class:"text-xs"},Si={class:"text-xs"},Mi={class:"text-xs"},Ai={class:"text-xs"},Ei={class:"text-xs"},Di={class:"text-xs"},Li={class:"flex items-center gap-2 w-full"},Pi={key:"appearance"},Ni={class:"text-sm"},Ri={class:"flex flex-col items-center justify-center text-gray-400"},Oi={class:"text-sm"},qi={class:"flex flex-col items-center justify-center text-gray-400"},Fi={class:"text-sm"},ji={class:"flex flex-col items-center justify-center text-gray-400"},Bi={class:"text-sm"},Ki={class:"flex flex-col items-center justify-center text-gray-400"},Yi={class:"text-sm"},Gi={class:"flex flex-col items-center justify-center text-gray-400"},Hi={class:"text-sm"},Wi={class:"flex flex-col items-center justify-center text-gray-400"},Ji={class:"text-sm"},Xi={class:"text-sm"},Zi={class:"flex flex-col items-center justify-center text-gray-400"},Qi={class:"text-sm"},er={class:"flex flex-col items-center justify-center text-gray-400"},tr={class:"text-sm"},lr={class:"flex items-center justify-between"},ar={class:"font-bold"},nr={class:"flex items-center"},sr={class:"flex items-center justify-between"},or={class:"font-bold"},ir={class:"flex items-center"},rr={class:"flex items-center justify-between"},ur={class:"font-bold"},dr={class:"flex items-center"},cr={key:"social-networks"},pr={class:"text-xs"},fr={key:"newsletter-email"},mr={key:"newsletter-phone"},vr={key:"newsletter-campaign"},_r={key:"ads"},yr={key:"videos"},gr={key:"content-models"},br={key:"menus"},hr={key:"content-permalinks"},kr={key:"page-sections"},wr=je({name:Ta.CONTENT_MANAGEMENT.NAME}),xr=je({...wr,setup(ue){wl(ye=>({d005cb5c:e(W)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],d=ye=>a.includes(ye),{t:p}=He(),X=Ha(),Q=pt(),v=at(),K=nt(),{request:T}=Qe(),{displayFormErrors:ne,appPrimaryColor:F,appSecondaryColor:W,pickByTheme:Y,fileUrl:S,isLgScreen:m,isMdScreen:O,isSmScreen:z,isXlScreen:q,is2XlScreen:B,tr:g}=Je(),te=yt(),R=sa(),{pages:L}=Fe(We()),{loadPages:ee,loadSections:G}=We(),U=vt("appConfig"),M=o(!1),x=o({name:"",icon:"",adminIcon:"",oneColorIcon:"",logo:"",adminLogo:"",oneColorLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),H=o(x.value),J=el("content-management",()=>({currentMenuItemKey:o("contact-info")}))(),le=(ye,I)=>()=>ie(de,{color:J.currentMenuItemKey==I?"white":""},{default:()=>ie(ge,{icon:ye})}),s=(ye,I)=>()=>ie("span",{class:`${J.currentMenuItemKey==I?"text-white":""}`,id:be.camelCase(I)},{default:()=>ye}),N=Ae(()=>{const ye=[{label:s(p("contactInfo"),"contact-info"),key:"contact-info",icon:le("carbon:identification","contact-info")},{label:s(p("appearance"),"appearance"),key:"appearance",icon:le("carbon:color-palette","appearance")},{label:s(p("socialNetworks"),"social-networks"),key:"social-networks",icon:le("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:s(p("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:le("carbon:at","newsletter-email")},{label:s(p("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:le("carbon:phone","newsletter-phone")},{label:s(p("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:le("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:s(p("ads"),"ads"),key:"ads",icon:le("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:s(p("videos"),"videos"),key:"videos",icon:le("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:s(p("menusManagement"),"menus"),key:"menus",icon:le("carbon:menu","menus")},{label:s(p("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:le("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:s(p("contentModels"),"content-models"),key:"content-models",icon:le("carbon:model-alt","content-models")},{label:s(p("pageSections"),"page-sections"),key:"page-sections",icon:le("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const I of L.value)ye.push({label:s(`${p("page")} ${g(I.title)}`,`${I.slug}-page`),key:`${I.slug}-page`,icon:le("carbon:document",`${I.slug}-page`)});return ye.push({key:"divider",type:"divider"},{label:s(p("addPage"),"add-new-page"),key:"add-new-page",icon:le("carbon:add-alt","add-new-page")}),ye}),A=Ae(()=>be.isEqual(x.value,H.value)),c=Ae(()=>te.contentLayoutSize.height-200),_=Ae(()=>te.isLightTheme?"light":"dark"),Z=o(null),u={email:[{required:!1,message:p("fillRequired")},{trigger:["input"],validator(ye,I){return I&&!Xt.isEmail(I)?new Error(p("invalidEmail")):!0}}]},r=o();ht(()=>r.value,ye=>{x.value.additionalInfo=JSON.stringify(ye||"[]")},{deep:!0});const V=o(null),f={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],C=o("logos"),b=o(!1),_e=async ye=>{switch(C.value){case"logos":x.value.logo=ye;break;case"icons":x.value.icon=ye;break;case"admin-logos":x.value.adminLogo=ye;break;case"admin-icons":x.value.adminIcon=ye;break;case"monochrome-logos":x.value.oneColorLogo=ye;break;case"monochrome-icons":x.value.oneColorIcon=ye;break;case"dark-backgrounds":x.value.adminAuthDarkBg=ye;break;case"light-backgrounds":x.value.adminAuthLightBg=ye;break}b.value=!1},ae={name:"",title:"",content:"",slug:""},k=o(!1),h=o(null),oe=o(ae),ke={title:[{required:!0,message:p("fillRequired")}]},he=o(null),Ue=ye=>{he.value=be.cloneDeep(ye),oe.value=be.cloneDeep(ye||ae),k.value=!0},Me=async()=>{var ye;return(ye=h.value)==null||ye.validate(async I=>{var Ce,j,pe,re,xe,Ee,ze;if(!I){K.start(),M.value=!0;const Pe={title:oe.value.title};he.value||(Pe.name=be.startCase(be.camelCase(g(oe.value.title))).replace(/\s+/g,""));const Ge=await T({method:he.value?"put":"post",url:he.value?`/pages/${he.value.slug}`:"/pages",data:Pe});if(Ge.failure&&Ge.error)switch((pe=(j=(Ce=Ge.error)==null?void 0:Ce.response)==null?void 0:j.data)==null?void 0:pe.errorCode){case et.FORM_INVALID_DATA:ne((Ee=(xe=(re=Ge.error)==null?void 0:re.response)==null?void 0:xe.data)==null?void 0:Ee.data);break;default:v.error(p("anErrorOccurred"))}else v.success(p("success")),ee(),J.currentMenuItemKey=`${(ze=Ge.result.data)==null?void 0:ze.slug}-page`,k.value=!1;M.value=!1,K.finish()}}),!1},ce=async(ye=!1)=>{var I;K.start(),M.value=!0,ee(),ye&&G(),await R.loadInformation(),(I=R.items)==null||I.forEach(Ce=>{x.value[Ce.key]!=null&&(x.value[Ce.key]=Ce.value)}),H.value=be.cloneDeep(x.value);try{r.value=JSON.parse(x.value.additionalInfo||"[]")}catch{r.value=[]}M.value=!1,K.finish()};ce(!0),Il(()=>{X.params.key&&d(X.params.key)&&(J.currentMenuItemKey=X.params.key)});const Le=async()=>{M.value=!0;const ye=await T({url:"/app-information",method:"put",data:x.value});ye.success&&ye.result?v.success(p("success")):v.error(p("unableToUpdateSettings")),await ce()},we=["contact-info","appearance","social-networks"];ht(()=>J.currentMenuItemKey,(ye,I)=>{ye==="add-new-page"?(J.currentMenuItemKey=I,Ue(null)):we.includes(I)&&!we.includes(ye)&&(A.value||Q.warning({title:p("confirm"),content:p("marketInfoDiscardChangesConfirm"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{J.currentMenuItemKey=I}}))});const se=o();return ht(()=>[O.value,z.value,m.value,q.value],([ye,I,Ce,j])=>{se.value=ye||I||Ce||j,setTimeout(()=>{se.value=void 0},500)},{immediate:!0}),(ye,I)=>{var Ut;const Ce=Ve,j=it,pe=Pa,re=Na,xe=Ze,Ee=ft,ze=qt,Pe=bt,Ge=gt,st=ua,wt=mt,De=tt,Xe=pa,Be=Lt,fe=Tt,Ke=Ra,Vt=ka,Pt=Bt,Nt=ut;return n(),D(me,null,[t(Vt,null,{"header-extra":l(()=>[t(j,null,{default:l(()=>[y("div",$i,[we.includes(e(J).currentMenuItemKey)?(n(),E(Ce,{key:0,loading:e(M),disabled:e(A),type:"primary",onClick:Le},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:save"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])):(n(),D("div",Vi))])]),_:1})]),default:l(()=>[t(De,{embedded:""},{default:l(()=>[t(Ke,{style:Oe(`height: ${e(c)}px`)},{default:l(()=>[t(Ke,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t(re,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(se),"default-collapsed":!e(B),"collapsed-width":64,"native-scrollbar":!1,width:e(B)?300:275},{default:l(()=>[t(pe,{value:e(J).currentMenuItemKey,"onUpdate:value":I[0]||(I[0]=Te=>e(J).currentMenuItemKey=Te),"collapsed-width":64,"collapsed-icon-size":22,options:e(N)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ke,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Ca,{name:"slide-fade"},{default:l(()=>[il(y("section",Ti,[t(De,{embedded:""},{default:l(()=>[t(De,{hoverable:""},{default:l(()=>[t(wt,{ref_key:"contactInfoFormRef",ref:Z,model:e(x),rules:u,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{path:"name"},{label:l(()=>[y("b",zi,i(e(p)("websiteName")),1)]),default:l(()=>[t(xe,{value:e(x).name,"onUpdate:value":I[1]||(I[1]=Te=>e(x).name=Te),placeholder:e(p)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Pe,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"email"},{label:l(()=>[y("b",Ui,i(e(p)("email")),1)]),default:l(()=>[t(xe,{value:e(x).email,"onUpdate:value":I[2]||(I[2]=Te=>e(x).email=Te),placeholder:e(p)("email"),class:"w-full"},{prefix:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(ze,{span:12,path:"phone"},{label:l(()=>[y("b",Si,i(e(p)("phone")),1)]),default:l(()=>[t(xe,{value:e(x).phone,"onUpdate:value":I[3]||(I[3]=Te=>e(x).phone=Te),placeholder:e(p)("phone"),class:"w-full"},{prefix:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"address"},{label:l(()=>[y("span",Mi,[y("b",null,i(e(p)("address")),1)])]),default:l(()=>[t(xe,{value:e(x).address,"onUpdate:value":I[4]||(I[4]=Te=>e(x).address=Te),placeholder:e(p)("address"),class:"w-full"},{prefix:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Pe,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"postalCode"},{label:l(()=>[y("b",Ai,i(e(p)("postalCode")),1)]),default:l(()=>[t(xe,{value:e(x).postalCode,"onUpdate:value":I[5]||(I[5]=Te=>e(x).postalCode=Te),placeholder:e(p)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"description"},{label:l(()=>[y("b",Ei,i(e(p)("description")),1)]),default:l(()=>[t(Ge,{modelValue:e(x).description,"onUpdate:modelValue":I[6]||(I[6]=Te=>e(x).description=Te),placeholder:e(p)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Ee,{path:"additionalInfo"},{label:l(()=>[y("b",Di,i(e(p)("additionalInfo")),1)]),default:l(()=>[t(st,{value:e(r),"onUpdate:value":I[7]||(I[7]=Te=>$e(r)?r.value=Te:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[P(i(e(p)("add")),1)]),default:l(({value:Te})=>[y("div",Li,[t(xe,{value:Te.name,"onUpdate:value":dt=>Te.name=dt,placeholder:e(p)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(xe,{value:Te.content,"onUpdate:value":dt=>Te.content=dt,placeholder:e(p)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[pl,e(J).currentMenuItemKey==="contact-info"]]),il(y("section",Pi,[t(De,{embedded:""},{default:l(()=>[t(Pe,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Ni,i(e(p)("websiteLogo")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).logo?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).logo),onClick:I[8]||(I[8]=()=>{C.value="logos",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[9]||(I[9]=()=>{C.value="logos",b.value=!0})},[y("div",Ri,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).logo?(n(),E(Ce,{key:2,quaternary:"",onClick:I[10]||(I[10]=()=>e(x).logo="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Oi,i(e(p)("websiteIcon")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).icon?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).icon),onClick:I[11]||(I[11]=()=>{C.value="icons",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[12]||(I[12]=()=>{C.value="icons",b.value=!0})},[y("div",qi,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).icon?(n(),E(Ce,{key:2,quaternary:"",onClick:I[13]||(I[13]=()=>e(x).icon="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Fi,i(e(p)("adminLogo")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).adminLogo?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).adminLogo),onClick:I[14]||(I[14]=()=>{C.value="admin-logos",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[15]||(I[15]=()=>{C.value="admin-logos",b.value=!0})},[y("div",ji,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).adminLogo?(n(),E(Ce,{key:2,quaternary:"",onClick:I[16]||(I[16]=()=>e(x).adminLogo="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Bi,i(e(p)("adminIcon")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).adminIcon?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).adminIcon),onClick:I[17]||(I[17]=()=>{C.value="admin-icons",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[18]||(I[18]=()=>{C.value="admin-icons",b.value=!0})},[y("div",Ki,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).adminIcon?(n(),E(Ce,{key:2,quaternary:"",onClick:I[19]||(I[19]=()=>e(x).adminIcon="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Yi,i(e(p)("websiteLogoMonochrome")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).oneColorLogo?(n(),E(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).oneColorLogo),onClick:I[20]||(I[20]=()=>{C.value="monochrome-logos",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[21]||(I[21]=()=>{C.value="monochrome-logos",b.value=!0})},[y("div",Gi,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).oneColorLogo?(n(),E(Ce,{key:2,quaternary:"",onClick:I[22]||(I[22]=()=>e(x).oneColorLogo="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Hi,i(e(p)("websiteIconMonochrome")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).oneColorIcon?(n(),E(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).oneColorIcon),onClick:I[23]||(I[23]=()=>{C.value="monochrome-icons",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[24]||(I[24]=()=>{C.value="monochrome-icons",b.value=!0})},[y("div",Wi,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).oneColorIcon?(n(),E(Ce,{key:2,quaternary:"",onClick:I[25]||(I[25]=()=>e(x).oneColorIcon="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(De,{segmented:"",size:"small"},{header:l(()=>[y("span",Ji,i(e(p)("adminAuthPagesBg")),1)]),default:l(()=>[t(Pe,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Xi,i(e(p)("lightMode")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).adminAuthLightBg?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).adminAuthLightBg),onClick:I[26]||(I[26]=()=>{C.value="light-backgrounds",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[27]||(I[27]=()=>{C.value="light-backgrounds",b.value=!0})},[y("div",Zi,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).adminAuthLightBg?(n(),E(Ce,{key:2,quaternary:"",onClick:I[28]||(I[28]=()=>e(x).adminAuthLightBg="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1}),t(Be,null,{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[y("span",Qi,i(e(p)("darkMode")),1)]),default:l(()=>[t(j,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(x).adminAuthDarkBg?(n(),E(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:Oe("border: 1px dashed "+e(Y)(e(F),"white")),size:125,src:e(S)(e(x).adminAuthDarkBg),onClick:I[29]||(I[29]=()=>{C.value="dark-backgrounds",b.value=!0})},null,8,["style","src"])):(n(),D("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Oe(`border: 1px dashed ${e(Y)(e(F),"white")}; width: 125px; height: 125px`),onClick:I[30]||(I[30]=()=>{C.value="dark-backgrounds",b.value=!0})},[y("div",er,[t(e(de),{size:"50"},{default:l(()=>[t(e(ge),{icon:"carbon:image"})]),_:1}),y("span",null,i(e(p)("import")),1)])],4)),e(x).adminAuthDarkBg?(n(),E(Ce,{key:2,quaternary:"",onClick:I[31]||(I[31]=()=>e(x).adminAuthDarkBg="")},{icon:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[P(" "+i(e(p)("clear")),1)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(De,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[y("span",tr,i(e(p)("adminColors")),1)]),default:l(()=>[t(Pe,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Be,null,{default:l(()=>[y("div",lr,[y("span",ar,i(e(p)("baseColor")),1),y("div",nr,[e(x).primaryColor?(n(),D(me,{key:0},[t(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:I[32]||(I[32]=Te=>e(x).primaryColor="")},{default:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):ve("",!0),t(e(Zt),{value:e(x).primaryColor,"onUpdate:value":I[33]||(I[33]=Te=>e(x).primaryColor=Te),class:"cursor-pointer",theme:e(_),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Be,null,{default:l(()=>[y("div",sr,[y("span",or,i(e(p)("secondaryColor")),1),y("div",ir,[e(x).secondaryColor?(n(),D(me,{key:0},[t(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:I[34]||(I[34]=Te=>e(x).secondaryColor="")},{default:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):ve("",!0),t(e(Zt),{value:e(x).secondaryColor,"onUpdate:value":I[35]||(I[35]=Te=>e(x).secondaryColor=Te),class:"cursor-pointer",theme:e(_),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Be,null,{default:l(()=>[y("div",rr,[y("span",ur,i(e(p)("tertiaryColor")),1),y("div",dr,[e(x).accentColor?(n(),D(me,{key:0},[t(Ce,{text:"",type:"error",style:{"font-size":"21px"},onClick:I[36]||(I[36]=Te=>e(x).accentColor="")},{default:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):ve("",!0),t(e(Zt),{value:e(x).accentColor,"onUpdate:value":I[37]||(I[37]=Te=>e(x).accentColor=Te),class:"cursor-pointer",theme:e(_),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[pl,e(J).currentMenuItemKey==="appearance"]]),il(y("section",cr,[t(De,{embedded:""},{default:l(()=>[t(De,{hoverable:""},{default:l(()=>[t(wt,{ref_key:"socialNetworksFormRef",ref:V,model:e(x),rules:f,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Pe,{"x-gap":"12",span:24},{default:l(()=>[(n(),D(me,null,Ne($,Te=>t(ze,{key:Te.name,span:12,path:Te.name},{label:l(()=>[y("b",pr,i(e(p)(Te.name)),1)]),default:l(()=>[t(xe,{value:e(x)[Te.name],"onUpdate:value":dt=>e(x)[Te.name]=dt,placeholder:e(p)(Te.name),class:"w-full"},{prefix:l(()=>[t(e(de),null,{default:l(()=>[t(e(ge),{icon:Te.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[pl,e(J).currentMenuItemKey==="social-networks"]]),e(J).currentMenuItemKey==="newsletter-email"?(n(),D("section",fr,[t(Ao)])):ve("",!0),e(J).currentMenuItemKey==="newsletter-phone"?(n(),D("section",mr,[t(Do)])):ve("",!0),e(J).currentMenuItemKey==="newsletter-campaign"?(n(),D("section",vr,[t(Ii)])):ve("",!0),e(J).currentMenuItemKey==="ads"?(n(),D("section",_r,[t(sn)])):ve("",!0),e(J).currentMenuItemKey==="videos"?(n(),D("section",yr,[t(to)])):ve("",!0),e(J).currentMenuItemKey==="content-models"?(n(),D("section",gr,[t(ni)])):ve("",!0),e(J).currentMenuItemKey==="menus"?(n(),D("section",br,[t(Ls)])):ve("",!0),e(J).currentMenuItemKey==="content-permalinks"?(n(),D("section",hr,[t(xi)])):ve("",!0),e(J).currentMenuItemKey==="page-sections"?(n(),D("section",kr,[t(Uo)])):ve("",!0),(n(!0),D(me,null,Ne(e(L),(Te,dt)=>(n(),D(me,{key:`${Te.slug}-page`},[e(J).currentMenuItemKey===`${Te.slug}-page`?(n(),D("section",{key:`${Te.slug}-page`},[t(es,{slug:Te.slug,"open-form-modal":Ue,onDelete:()=>{e(J).currentMenuItemKey=e(L).length>1?`${e(L)[dt-1].slug}-page`:a[0],e(ee)()}},null,8,["slug","onDelete"])])):ve("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Pt,{show:e(b),"onUpdate:show":I[38]||(I[38]=Te=>$e(b)?b.value=Te:null),title:e(p)("selectImage"),"upload-config":{folder:e(C),limit:0,maxSize:0,baseUrl:((Ut=e(U))==null?void 0:Ut.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:_e},null,8,["show","title","upload-config"]),t(Nt,{show:e(k),"onUpdate:show":I[40]||(I[40]=Te=>$e(k)?k.value=Te:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(he)?e(p)("editPage"):e(p)("addPage"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:Me,onNegativeClick:I[41]||(I[41]=Te=>k.value=!1)},{default:l(()=>[t(wt,{ref_key:"addPageFormRef",ref:h,model:e(oe),rules:ke,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{label:e(p)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(Ge,{modelValue:e(oe).title,"onUpdate:modelValue":I[39]||(I[39]=Te=>e(oe).title=Te),placeholder:e(p)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:Ia(Me,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const Kd=zt(xr,[["__scopeId","data-v-9b4bc774"]]);export{Kd as default};
