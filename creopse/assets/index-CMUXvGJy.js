const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-C8auy2Cl.js","assets/jsoneditor-Cyu_lGJP.js","assets/process-Dy-TXDLF.js","assets/ckeditor5-BrgJTJSN.js","assets/ckeditor_ckeditor5-utils-DZhn28Eg.js","assets/es-toolkit-Cge3R0Vb.js","assets/ckeditor_ckeditor5-engine-BHV-Rp_a.js","assets/ckeditor_ckeditor5-widget-yxJBKz4n.js","assets/ckeditor_ckeditor5-core-CWAtyu9P.js","assets/ckeditor_ckeditor5-watchdog-D6_LaQGu.js","assets/ckeditor_ckeditor5-typing-uZoA9pnq.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-C7Ma50Jw.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-0icnFgvj.js","assets/ckeditor_ckeditor5-list-DexonytB.js","assets/ckeditor_ckeditor5-font-DKG9Ffj7.js","assets/ckeditor_ckeditor5-clipboard-CyjGvBno.js","assets/ckeditor_ckeditor5-mention-CRbwimBn.js","assets/ckeditor5-CZCgGaBk.css","assets/ckeditor_ckeditor5-vue-D9YIFk5Z.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-CfVRxHJr.js","assets/export2excel-5gGdj0tl.js","assets/xlsx-CYHfUiaK.js","assets/crypto-js-dnUpYZrf.js","assets/file-saver-BpnyUUf6.js"])))=>i.map(i=>d[i]);
import{i as pe}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{_ as zn,a as Ga,b as Wr}from"./index.vue_vue_type_script_setup_true_lang-DjxQ40YE.js";import{_ as jc}from"./PageLayout.vue_vue_type_script_setup_true_lang-PAUYRhpU.js";import{_ as sn}from"./I18nInput-EteT6JpM.js";import{Q as go,e as Be,t as dt,u as Je,f as Et,w as Yt,y as pa,S as fo,T as si,v as Qn,U as Ca,p as ho,V as yc,x as Kc,J as Gc,_ as Dn,W as Qr,X as Yc,Y as gc,Z as hc,A as ri,$ as Xr,a0 as bc,a1 as Hc,a2 as Wc,a3 as Jr,a4 as kc,a5 as Qc,a6 as Xc,q as Jc,I as Zc,a7 as ed,R as td}from"./index-BkcZCWEr.js";import{I as we}from"./iconify_vue-DK9FHL8l.js";import{_ as Hs}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-dnTevVbV.js";import{u as xe}from"./vue-i18n-DGGON2e6.js";import{a as Fe,l as Yl,u as Xe,a0 as Bl,o as bo,af as $n,x as gl,O as Sl,Y as An,n as Pn,B as Ge,q as ue,$ as Cn,z as ln,D as rn,E as Ia,C as Xt,a5 as Ws,a6 as Qs,A as nn,ag as ld,ab as vo,a4 as Xs,M as Xn,a7 as wc,t as In,a3 as Js,aa as xc,a1 as Zr,J as Va,v as $c,ah as nd,ai as Zs,aj as ei,ak as Cc,F as ti,al as ad,am as od,an as sd,V as Ya,W as Ha,R as er,P as Ic,Z as ko,ao as rd,ap as Vc,aq as Sc,K as li,ar as Ec,r as Uc,as as id,a8 as cd,a9 as dd,p as ud}from"./naive-ui-U3LV0D3Q.js";import{_ as ve}from"./lodash-BQQkJTn-.js";import{_ as Sa}from"./fawmi_vue-google-maps-Cpr8dN0B.js";import{_ as Mc}from"./index.vue_vue_type_style_index_0_lang-ClsakzZz.js";import{u as Nc,a as Tc}from"./article-B-RdjU4y.js";import{v as Gl}from"./uuid-8I8R7izr.js";import{a as pd}from"./tanstack_vue-query-DCl0-IN8.js";import{s as zc}from"./slugify-yIIWNGXu.js";import{_ as md}from"./media-file-DZbnU6_U.js";import{r as fd}from"./vueuse_shared-x2l23lLx.js";import{_ as yo}from"./jsoneditor-Cyu_lGJP.js";import{u as Dc}from"./vueuse_core-aA8IVeLX.js";import{_ as Ac}from"./UploadExcel-rGaejCg2.js";import{_ as _o}from"./validator-DwVK3abb.js";import{_ as _d}from"./VueTelInputWrapper-DY2l15w0.js";import{i as vd}from"./libphonenumber-js-Cbgs1wa0.js";import"./browser-image-compression-DsQCRm9N.js";import{u as yd}from"./email-B0XH2Jv3.js";import{u as gd}from"./vue-shepherd-CZJ8KBfd.js";import{u as hd}from"./vue-router-JM7pifDK.js";var ua=(u=>(u.IMAGE="image",u.VIDEO="video",u))(ua||{});const Pc=(u,e)=>go(["ad-identifiers"],async()=>{const{request:a}=Be(),n=await a({url:"/ad-identifiers"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u}),bd=(u,e)=>go(["ads"],async()=>{const{request:a}=Be(),n=await a({url:"/ads"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u}),kd=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe();return dt({queryKey:["ad-identifiers"],operation:"insert",getItemId:l=>l.id,mutationFn:async l=>{const t=await a({method:"post",url:"/ad-identifiers",data:l});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:l=>{l?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},wd=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe();return dt({queryKey:["ad-identifiers"],operation:"update",getItemId:l=>l.id,mutationFn:async l=>{const t=await a({method:"put",url:`/ad-identifiers/${l.id}`,data:l});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:l=>{l?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},xd=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe();return dt({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const l=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:o=>{n.error(a("anErrorOccurred"))},...u}})},{useModel:$d,defineComponent:Cd}=await pe("vue"),{unref:nt,resolveComponent:T1,createVNode:xt,toDisplayString:Wa,createTextVNode:sr,withCtx:Bt,renderList:Id,Fragment:ii,openBlock:Qa,createElementBlock:rr,createElementVNode:wo,createCommentVNode:Vd,normalizeClass:ci,createBlock:ir,isRef:Sd}=await pe("vue"),Ed={class:"flex items-center justify-between"},Ud={class:"flex flex-col"},Md={class:"text-sm font-bold"},Nd={class:"text-xs font-normal"},Td={key:0,class:"text-xs font-bold"},{ref:xo}=await pe("vue"),zd=Cd({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=xe(),{pickByTheme:a,formatKey:n}=Je(),o=$d(u,"show"),{data:l,isPending:t}=Pc(),{mutate:c}=xd(),{mutate:de}=kd(),{mutate:Y}=wd(),se=Yl(),T=Xe(),he=xo(!1),A=xo(!1),M=xo(null),d=xo(null),F=xo({id:"",reusable:!1,contentType:ua.IMAGE,contentSize:"",params:[]}),re={id:[{required:!0,message:e("fillRequired")}]},r=G=>{M.value=ve.cloneDeep(G),F.value=ve.cloneDeep(G||{id:"",reusable:!1,contentType:ua.IMAGE,contentSize:"",params:[]}),A.value=!0},Q=async()=>(d.value?.validate(async G=>{if(!G){T.start(),he.value=!0;const $={id:F.value.id,reusable:F.value.reusable,contentType:F.value.contentType,contentSize:F.value.contentSize,params:F.value.params};M.value?Y($,{onSuccess:()=>{A.value=!1}}):de($,{onSuccess:()=>{A.value=!1}}),he.value=!1,T.finish()}}),!1),L=async G=>{se.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{c({id:G.id})}})};return(G,$)=>{const I=we,D=Ge,le=Sl,B=An,me=Pn,y=ue,O=gl,w=$n,_=Cn,Z=bo,U=Bl,q=Xt,K=Ia,E=rn,C=Qs,h=Ws,f=ld,$e=nn,fe=ln;return Qa(),rr(ii,null,[xt(U,{show:o.value,"onUpdate:show":$[2]||($[2]=x=>o.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:nt(e)("adIdentifiers")},{"header-extra":Bt(()=>[xt(le,{align:"center"},{default:Bt(()=>[xt(D,{secondary:"",size:"small",type:"primary",disabled:nt(t),onClick:$[0]||($[0]=x=>r(null))},{default:Bt(()=>[xt(I,{icon:"carbon:add-alt",class:"mr-1"}),sr(" "+Wa(nt(e)("add")),1)]),_:1},8,["disabled"]),xt(D,{secondary:"",size:"small",type:"error",disabled:nt(t),onClick:$[1]||($[1]=x=>o.value=!1)},{default:Bt(()=>[xt(I,{icon:"carbon:close",class:"mr-1"}),sr(" "+Wa(nt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Bt(()=>[xt(Z,{show:nt(t)},{default:Bt(()=>[nt(l)?.length?(Qa(),ir(w,{key:0,style:{"max-height":"400px"}},{default:Bt(()=>[(Qa(!0),rr(ii,null,Id(nt(l),x=>(Qa(),ir(O,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:Bt(()=>[wo("div",Ed,[wo("div",Ud,[wo("span",Md,Wa(x.id),1),wo("div",null,[wo("span",Nd,Wa(x.contentType===nt(ua).IMAGE?nt(e)("image"):nt(e)("video")),1),x.contentSize?(Qa(),rr("span",Td," Â ("+Wa(x.contentSize)+") ",1)):Vd("",!0)])]),xt(le,null,{default:Bt(()=>[xt(B,{size:"medium",bordered:!1,type:x.reusable?"info":"warning"},{default:Bt(()=>[sr(Wa(x.reusable?nt(e)("reusable"):nt(e)("notReusable")),1)]),_:2},1032,["type"]),xt(me,{vertical:"",class:ci(["!mx-0",nt(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),xt(D,{size:"small",type:"warning",secondary:"",onClick:i=>r(x)},{default:Bt(()=>[xt(y,null,{default:Bt(()=>[xt(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),xt(D,{size:"small",type:"error",secondary:"",onClick:i=>L(x)},{default:Bt(()=>[xt(y,null,{default:Bt(()=>[xt(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Qa(),ir(O,{key:1,size:"large",class:ci(`mb-2 !border-dashed !border-2 ${nt(a)("!border-zinc-300","!border-zinc-600")}`)},{default:Bt(()=>[xt(_,{description:nt(e)("noIdentifierAdded")},{icon:Bt(()=>[xt(y,{size:"60"},{default:Bt(()=>[xt(I,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),xt(U,{show:nt(A),"onUpdate:show":$[8]||($[8]=x=>Sd(A)?A.value=x:null),loading:nt(he),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:nt(M)?nt(e)("editAdIdentifier"):nt(e)("addAdIdentifier"),"positive-text":nt(e)("validate"),"negative-text":nt(e)("cancel"),onPositiveClick:Q,onNegativeClick:$[9]||($[9]=x=>A.value=!1)},{default:Bt(()=>[xt(fe,{ref_key:"formRef",ref:d,model:nt(F),rules:re,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Bt(()=>[xt(E,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(K,{span:16,label:nt(e)("identifier"),path:"id"},{default:Bt(()=>[xt(q,{value:nt(F).id,placeholder:nt(e)("identifier"),disabled:nt(M)!=null,class:"w-full","onUpdate:value":$[3]||($[3]=x=>nt(F).id=nt(n)(x))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),xt(K,{span:8,label:nt(e)("contentSize"),path:"contentSize"},{default:Bt(()=>[xt(q,{value:nt(F).contentSize,"onUpdate:value":$[4]||($[4]=x=>nt(F).contentSize=x),placeholder:nt(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),xt(E,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(K,{span:12,label:nt(e)("status"),path:"reusable"},{default:Bt(()=>[xt(h,{value:nt(F).reusable,"onUpdate:value":$[5]||($[5]=x=>nt(F).reusable=x),name:"reusable",class:"w-full"},{default:Bt(()=>[xt(C,{value:!1,label:nt(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),xt(C,{value:!0,label:nt(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),xt(K,{span:12,label:nt(e)("contentType"),path:"contentType"},{default:Bt(()=>[xt(h,{value:nt(F).contentType,"onUpdate:value":$[6]||($[6]=x=>nt(F).contentType=x),name:"contentType",class:"w-full"},{default:Bt(()=>[xt(C,{value:nt(ua).IMAGE,label:nt(e)("image"),class:"w-[50%]"},null,8,["value","label"]),xt(C,{value:nt(ua).VIDEO,label:nt(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),xt($e,{label:nt(e)("settings"),path:"params"},{default:Bt(()=>[xt(f,{value:nt(F).params,"onUpdate:value":$[7]||($[7]=x=>nt(F).params=x),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Dd=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["ads"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/ads",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Ad=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["ads"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/ads/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Pd=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["ads"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/ads/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{defineComponent:Ld}=await pe("vue"),{unref:oe,createVNode:rt,withCtx:$t,toDisplayString:Ma,createTextVNode:Na,openBlock:Bn,createBlock:ys,createCommentVNode:cr,resolveComponent:z1,isRef:Xa,Fragment:gs,createElementBlock:Ja,normalizeStyle:di,createElementVNode:dr,renderList:Bd}=await pe("vue"),Od={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Fd={id:"video",autoplay:"",controls:"",style:{width:"100%"}},qd=["src"],{inject:Rd,ref:an,h:dl,computed:ui}=await pe("vue"),jd=Ld({__name:"index",setup(u){const e=Fe(),a=Yl(),n=Rd("appConfig"),{data:o}=Pc(),{data:l,isPending:t}=bd(),{mutate:c,isPending:de}=Pd(),{mutate:Y,isPending:se}=Dd(),{mutate:T,isPending:he}=Ad(),{tr:A,fileUrl:M,pickByTheme:d,appSecondaryColor:F,isInDevMode:re}=Je(),{t:r,locale:Q}=xe(),L=an(""),G=an(),$={pageSize:12,prefix:({itemCount:x})=>dl("div",{class:"font-bold"},{default:()=>`${r("total")}: ${x}`})},I=[{title:r("preview"),key:"image",width:200,fixed:"left",render(x){return x.adIdentifier?.contentType==ua.IMAGE?dl(vo,{src:x.contentUrl??"",objectFit:"cover",width:200,height:100}):dl("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[dl(ue,{size:50,color:F.value},{default:()=>dl(we,{icon:"carbon:document-video"})})])}},{title:r("identifier"),key:"pid",width:150,fixed:"left",render(x){return dl("small",{},{default:()=>x.pid})}},{title:r("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(x){return dl("div",{},{default:()=>A(x.title)})}},{title:r("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(x){return dl("small",{},{default:()=>A(x.description)})}},{title:r("status"),key:"isActive",width:100,render(x){return dl(An,{type:x.display?"success":"warning",bordered:!1},{default:()=>x.display?r("visible"):r("hidden")})},sortOrder:!1,sorter:"default"},{title:r("updateAt"),key:"updatedAt",width:125,render(x){return dl("div",{},{default:()=>pa(x.updatedAt,{locale:Q.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(x){return dl("div",{},{default:()=>pa(x.createdAt,{locale:Q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>dl(Xt,{ref:G,placeholder:r("search"),value:L.value,onInput:x=>{L.value=x}},{suffix:()=>dl(ue,{},{default:()=>dl(we,{icon:"carbon:search"})})}),key:"actions",width:150,render(x){return dl("div",{class:"flex justify-end items-center w-full"},[dl(Ge,{size:"small",type:"warning",secondary:!0,onClick:()=>{q(x)},renderIcon:()=>dl(ue,null,{default:()=>dl(we,{icon:"carbon:edit"})})}),dl("div",{class:"w-2"}),dl(Ge,{size:"small",type:"error",secondary:!0,onClick:()=>{a.warning({title:r("confirm"),content:r("confirmDeleteAd"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{x.id&&c({id:x.id})}})},renderIcon:()=>dl(ue,null,{default:()=>dl(we,{icon:"carbon:trash-can"})})})])},fixed:"right"}],D=ui(()=>{if(!L.value)return l.value;const x=l.value?.filter(i=>i.pid.toLowerCase().includes(L.value.toLowerCase())||i.title.toLowerCase().includes(L.value.toLowerCase())||i.description?.toLowerCase().includes(L.value.toLowerCase()));return G.value&&G.value.focus(),x}),le=an(!1),B=an(!1),me=an(ua.IMAGE),y=an(),O=an(null),w=an(null),_=an({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),Z={pid:[{required:!0,message:r("fillRequired")}],title:[{required:!0,message:r("fillRequired")}],content:[{required:!0,message:r("fillRequired")}]},U=ui({get:()=>!_.value.broadcastStart||!_.value.broadcastEnd?null:[_.value.broadcastStart||"",_.value.broadcastEnd||""],set:x=>{x?(_.value.broadcastStart=x[0],_.value.broadcastEnd=x[1]):(_.value.broadcastStart=null,_.value.broadcastEnd=null)}}),q=x=>{O.value=ve.cloneDeep(x),x?(_.value=ve.cloneDeep(x),x.data||(_.value.data={})):_.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},y.value=o.value?.find(i=>i.id==_.value.pid)?.params,le.value=!0},K=x=>dl("span",{},{default:()=>x.id+(x.contentSize?` (${x.contentSize})`:"")}),E=async()=>(w.value?.validate(async x=>{if(!x){const i={pid:_.value.pid,title:_.value.title,display:_.value.display,content:_.value.content,description:_.value.description,data:_.value.data,broadcastStart:_.value.broadcastStart,broadcastEnd:_.value.broadcastEnd};O.value?O.value.title!==_.value.title&&(l.value||[]).findIndex(b=>b.title==_.value.title)>-1?e.error(r("sameAdTitleMessage")):T({id:O.value.id,...i},{onSuccess:()=>{}}):(l.value||[]).findIndex(b=>b.title==_.value.title)>-1?e.error(r("sameAdTitleMessage")):Y(i,{onSuccess:()=>{}}),le.value=!1}}),!1),C=an(!1),h=an(!1),f=an(!1),$e=an(""),fe=an("");return(x,i)=>{const b=Sl,ae=zn,P=Xs,be=Hs,Ie=sn,ge=nn,_e=wc,ne=In,g=Ia,k=Qs,ee=Ws,z=rn,Se=Xn,Ye=Js,ke=ln,S=Bl,st=Ga;return Bn(),Ja(gs,null,[rt(ae,{to:"#alt-action"},{default:$t(()=>[rt(b,null,{default:$t(()=>[oe(re)?(Bn(),ys(oe(Ge),{key:0,secondary:"",type:"warning",onClick:i[0]||(i[0]=De=>B.value=!0)},{default:$t(()=>[rt(oe(ue),{size:"26"},{default:$t(()=>[rt(oe(we),{icon:"carbon:id"})]),_:1}),Na(" "+Ma(oe(r)("identifiers")),1)]),_:1})):cr("",!0),rt(oe(Ge),{type:"primary",secondary:"",onClick:i[1]||(i[1]=De=>q(null))},{icon:$t(()=>[rt(oe(ue),{size:"18"},{default:$t(()=>[rt(oe(we),{icon:"carbon:add-alt"})]),_:1})]),default:$t(()=>[Na(" "+Ma(oe(r)("addAd")),1)]),_:1})]),_:1})]),_:1}),rt(be,null,{default:$t(()=>[rt(P,{columns:I,data:oe(D),pagination:$,loading:oe(t),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),rt(S,{show:oe(le),"onUpdate:show":i[12]||(i[12]=De=>Xa(le)?le.value=De:null),loading:oe(se)||oe(he)||oe(de),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:oe(O)?oe(r)("editAd"):oe(r)("addAd"),"positive-text":oe(r)("validate"),"negative-text":oe(r)("cancel"),onPositiveClick:E,onNegativeClick:i[13]||(i[13]=De=>le.value=!1)},{default:$t(()=>[rt(ke,{ref_key:"formRef",ref:w,class:"mt-5",model:oe(_),rules:Z,"show-require-mark":!1,size:"medium"},{default:$t(()=>[rt(z,{cols:"24","x-gap":12},{default:$t(()=>[rt(Se,{span:"12"},{default:$t(()=>[rt(ge,{"show-label":!1,path:"title"},{default:$t(()=>[rt(Ie,{modelValue:oe(_).title,"onUpdate:modelValue":i[2]||(i[2]=De=>oe(_).title=De),placeholder:oe(r)("title"),class:"w-full",sync:""},{label:$t(()=>[Na(Ma(oe(r)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),rt(ge,{"show-label":!1,path:"description"},{default:$t(()=>[rt(Ie,{modelValue:oe(_).description,"onUpdate:modelValue":i[3]||(i[3]=De=>oe(_).description=De),placeholder:oe(r)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:$t(()=>[Na(Ma(oe(r)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),rt(ge,{label:oe(r)("broadcastPeriod"),path:"broadcastPeriod"},{default:$t(()=>[rt(_e,{"formatted-value":oe(U),"onUpdate:formattedValue":i[4]||(i[4]=De=>Xa(U)?U.value=De:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),rt(z,{"x-gap":"12",span:24},{default:$t(()=>[rt(g,{span:12,label:oe(r)("identifier"),path:"pid"},{default:$t(()=>[rt(ne,{value:oe(_).pid,"onUpdate:value":[i[5]||(i[5]=De=>oe(_).pid=De),i[6]||(i[6]=()=>{y.value=oe(o)?.find(De=>De.id==oe(_).pid)?.params})],"render-label":K,options:oe(o)?.map(De=>({...De,disabled:!De.reusable&&(De.adsCount||0)>0})),placeholder:oe(r)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),rt(g,{span:12,label:oe(r)("status"),path:"display"},{default:$t(()=>[rt(ee,{value:oe(_).display,"onUpdate:value":i[7]||(i[7]=De=>oe(_).display=De),name:"display",class:"w-full"},{default:$t(()=>[rt(k,{value:!1,label:oe(r)("hidden"),class:"w-[50%]"},null,8,["label"]),rt(k,{value:!0,label:oe(r)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),rt(Se,{span:"12"},{default:$t(()=>[rt(ge,{label:oe(r)("content"),path:"content"},{default:$t(()=>[oe(me)==oe(ua).VIDEO?(Bn(),ys(Ye,{key:0},{default:$t(()=>[rt(oe(Ge),{secondary:"",type:"primary",onClick:i[8]||(i[8]=()=>{h.value=!0})},{default:$t(()=>[Na(Ma(oe(r)("select")),1)]),_:1}),rt(oe(Xt),{value:oe(_).content?oe(fo)(oe(_).content):"",placeholder:oe(r)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),oe(_).content?(Bn(),Ja(gs,{key:0},[rt(oe(Ge),{type:"primary",ghost:"",onClick:i[9]||(i[9]=()=>{$e.value=oe(r)("video"),fe.value=oe(M)(oe(_).content),f.value=!0})},{icon:$t(()=>[rt(oe(ue),null,{default:$t(()=>[rt(oe(we),{icon:"carbon:play-filled"})]),_:1})]),default:$t(()=>[Na(" "+Ma(oe(r)("play")),1)]),_:1}),rt(oe(Ge),{type:"primary",ghost:"",onClick:i[10]||(i[10]=()=>{oe(_).content=""})},{icon:$t(()=>[rt(oe(ue),null,{default:$t(()=>[rt(oe(we),{icon:"carbon:trash-can"})]),_:1})]),default:$t(()=>[Na(" "+Ma(oe(r)("clear")),1)]),_:1})],64)):cr("",!0)]),_:1})):(Bn(),Ja("div",Od,[dr("div",{class:"cursor-pointer w-full h-[150px]",onClick:i[11]||(i[11]=()=>{C.value=!0})},[oe(_).content?(Bn(),ys(oe(vo),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:di("border: 1px dashed "+oe(d)("green","white")),src:oe(M)(oe(_).content||"")},null,8,["style","src"])):(Bn(),Ja("div",{key:1,class:"w-full h-full flex items-center justify-center",style:di("border: 1px dashed "+oe(d)("green","white"))},[rt(oe(ue),{size:64},{default:$t(()=>[rt(oe(we),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),oe(y)&&Array.isArray(oe(y))?(Bn(),ys(ge,{key:0,label:oe(r)("data"),path:"data"},{default:$t(()=>[rt(z,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:$t(()=>[(Bn(!0),Ja(gs,null,Bd(oe(y),(De,ft)=>(Bn(),Ja(gs,{key:ft},[rt(Se,{span:10},{default:$t(()=>[rt(oe(Xt),{value:De,placeholder:De,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),rt(Se,{span:14},{default:$t(()=>[rt(oe(Xt),{value:oe(_).data[De],"onUpdate:value":_t=>oe(_).data[De]=_t,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):cr("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),rt(S,{show:oe(f),"onUpdate:show":i[14]||(i[14]=De=>Xa(f)?f.value=De:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:oe($e)},{default:$t(()=>[dr("video",Fd,[dr("source",{src:oe(fe)},null,8,qd)])]),_:1},8,["show","title"]),rt(st,{show:oe(C),"onUpdate:show":i[15]||(i[15]=De=>Xa(C)?C.value=De:null),title:oe(r)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:oe(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:i[16]||(i[16]=De=>{oe(_).content=De,C.value=!1})},null,8,["show","title","upload-config"]),rt(st,{show:oe(h),"onUpdate:show":i[17]||(i[17]=De=>Xa(h)?h.value=De:null),title:oe(r)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:oe(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:i[18]||(i[18]=De=>{oe(_).content=De,h.value=!1})},null,8,["show","title","upload-config"]),rt(zd,{show:oe(B),"onUpdate:show":i[19]||(i[19]=De=>Xa(B)?B.value=De:null)},null,8,["show"])],64)}}}),Kd=Sa(jd,[["__scopeId","data-v-d7bbc8c8"]]),{useModel:Gd,mergeModels:Yd,defineComponent:Hd}=await pe("vue"),{toDisplayString:hs,createElementVNode:ur,resolveComponent:Wd,createVNode:Wl,withCtx:hl,unref:Fl,createTextVNode:pr,openBlock:Vn,createBlock:$o,createCommentVNode:bs,renderList:pi,Fragment:mi,createElementBlock:Za,createSlots:Qd,isRef:fi}=await pe("vue"),{defineComponent:Xd,ref:ks,inject:Jd}=await pe("vue"),Zd={class:"w-full"},eu={class:"mb-2"},tu={class:"text-base text-left"},lu=["src","onClick"],nu=["src"],au=Xd({name:"AlbumsPicker"}),ou=Hd({...au,props:Yd({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=Gd(u,"modelValue"),a=u,{t:n}=xe(),{fileUrl:o}=Je(),l=ks(!1),t=ks(!1),c=ks(0),de=ks(""),Y=Jd("appConfig"),se=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},T=M=>{e.value&&Array.isArray(e.value)?e.value.splice(M,1):e.value=[]},he=(M,d)=>{e.value&&Array.isArray(e.value[d].medias)?e.value[d].medias.splice(M,1):e.value&&(e.value[d].medias=[])},A=M=>{const d=M.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(d)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(d)?"video":"unknown"};return(M,d)=>{const F=we,re=ue,r=Ge,Q=sn,L=vo,G=Wd("Draggable"),$=xc,I=$n,D=gl,le=Ga,B=Bl;return Vn(),Za("section",Zd,[ur("section",eu,[Wl(D,{size:"small",segmented:e.value&&e.value.length>0},{header:hl(()=>[ur("div",tu,hs(a.title),1)]),"header-extra":hl(()=>[a.readonly?bs("",!0):(Vn(),$o(r,{key:0,quaternary:"",onClick:se},{icon:hl(()=>[Wl(re,{size:"18"},{default:hl(()=>[Wl(F,{icon:"carbon:folder-add"})]),_:1})]),default:hl(()=>[pr(" "+hs(Fl(n)("addAlbum")),1)]),_:1}))]),default:hl(()=>[(Vn(!0),Za(mi,null,pi(e.value,(me,y)=>(Vn(),$o(D,{key:y,size:"small",embedded:"",hoverable:"",segmented:me.medias&&me.medias.length>0,class:"mb-4"},Qd({header:hl(()=>[Wl(Q,{modelValue:me.name,"onUpdate:modelValue":O=>me.name=O,placeholder:Fl(n)("albumName"),disabled:a.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:hl(()=>[Wl(I,{style:{"max-height":"100%"}},{default:hl(()=>[me.medias&&me.medias.length>0?(Vn(),$o($,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:hl(()=>[Wl(G,{list:me.medias,class:"w-full grid grid-cols-3 gap-4"},{default:hl(()=>[(Vn(!0),Za(mi,null,pi(me.medias,(O,w)=>(Vn(),Za("div",{key:"img-"+w,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[A(O)==="image"?(Vn(),$o(L,{key:0,"object-fit":"cover",src:Fl(o)(O)},null,8,["src"])):(Vn(),Za("video",{key:1,muted:"",src:Fl(o)(O),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{de.value=Fl(o)(O),t.value=!0}},null,8,lu)),a.readonly?bs("",!0):(Vn(),$o(r,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:_=>he(w,y)},{icon:hl(()=>[Wl(re,null,{default:hl(()=>[Wl(F,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):bs("",!0)]),_:2},1024)]),_:2},[a.readonly?void 0:{name:"header-extra",fn:hl(()=>[Wl(r,{quaternary:"",class:"mr-2",onClick:()=>{c.value=y,l.value=!0}},{icon:hl(()=>[Wl(re,null,{default:hl(()=>[Wl(F,{icon:"carbon:add-alt"})]),_:1})]),default:hl(()=>[pr(" "+hs(Fl(n)("add")),1)]),_:2},1032,["onClick"]),d[3]||(d[3]=ur("div",{class:"w-2"},null,-1)),Wl(r,{quaternary:"",type:"error",onClick:O=>T(y)},{icon:hl(()=>[Wl(re,null,{default:hl(()=>[Wl(F,{icon:"carbon:trash-can"})]),_:1})]),default:hl(()=>[pr(" "+hs(Fl(n)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),Wl(le,{show:Fl(l),"onUpdate:show":d[0]||(d[0]=me=>fi(l)?l.value=me:null),title:Fl(n)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:Fl(Y)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:d[1]||(d[1]=me=>{e.value&&Array.isArray(e.value[Fl(c)].medias)?e.value[Fl(c)].medias.push(me):e.value&&(e.value[Fl(c)].medias=[me]),l.value=!1})},null,8,["show","title","upload-config"]),Wl(B,{show:Fl(t),"onUpdate:show":d[2]||(d[2]=me=>fi(t)?t.value=me:null),preset:"card",style:{width:"500px"},title:Fl(n)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:hl(()=>[Fl(de)?(Vn(),Za("video",{key:0,controls:"",autoplay:"",class:"w-full",src:Fl(de)},null,8,nu)):bs("",!0)]),_:1},8,["show","title"])])}}}),su=Sa(ou,[["__scopeId","data-v-d07ac32a"]]),{useModel:ru,mergeModels:iu,defineComponent:cu}=await pe("vue"),{toDisplayString:_i,createElementVNode:vi,resolveComponent:du,createVNode:Jn,withCtx:Sn,unref:Co,createTextVNode:uu,openBlock:eo,createBlock:mr,createCommentVNode:fr,renderList:pu,Fragment:mu,createElementBlock:_r,isRef:fu}=await pe("vue"),{defineComponent:_u,inject:vu,ref:yu}=await pe("vue"),gu={class:"w-full"},hu={class:"mb-2"},bu={class:"text-base text-left"},ku=_u({name:"GridImagesPicker"}),wu=cu({...ku,props:iu({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=ru(u,"modelValue"),a=vu("appConfig"),n=u,{t:o}=xe(),{fileUrl:l}=Je(),t=yu(!1),c=Y=>{Array.isArray(e.value)?e.value.splice(Y,1):e.value=[]},de=async Y=>{Array.isArray(e.value)?e.value.push(...Y):e.value=[...Y],t.value=!1};return(Y,se)=>{const T=we,he=ue,A=Ge,M=vo,d=du("Draggable"),F=xc,re=$n,r=gl,Q=Ga;return eo(),_r("section",gu,[vi("section",hu,[Jn(r,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:Sn(()=>[vi("div",bu,_i(n.title),1)]),"header-extra":Sn(()=>[n.readonly?fr("",!0):(eo(),mr(A,{key:0,quaternary:"",onClick:se[0]||(se[0]=L=>t.value=!0)},{icon:Sn(()=>[Jn(he,{size:"18"},{default:Sn(()=>[Jn(T,{icon:"carbon:add-alt"})]),_:1})]),default:Sn(()=>[uu(" "+_i(Co(o)("add")),1)]),_:1}))]),default:Sn(()=>[Jn(re,{style:{"max-height":"100%"}},{default:Sn(()=>[e.value&&e.value.length?(eo(),mr(F,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Sn(()=>[Jn(d,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:Sn(()=>[(eo(!0),_r(mu,null,pu(e.value,(L,G)=>(eo(),_r("div",{key:"img-"+G,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[Jn(M,{width:"100","object-fit":"cover",src:Co(l)(L)},null,8,["src"]),n.readonly?fr("",!0):(eo(),mr(A,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:$=>c(G)},{icon:Sn(()=>[Jn(he,null,{default:Sn(()=>[Jn(T,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):fr("",!0)]),_:1})]),_:1},8,["segmented"])]),Jn(Q,{show:Co(t),"onUpdate:show":se[1]||(se[1]=L=>fu(t)?t.value=L:null),title:Co(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:Co(a)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:de},null,8,["show","title","upload-config"])])}}}),xu=Sa(wu,[["__scopeId","data-v-721b1ffd"]]);var Kl=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(Kl||{}),Tl=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Tl||{});const ms=()=>{const{t:u}=xe(),{tr:e}=Je(),a=(t,c)=>{if(c&&c.titleFieldName)return si(t.contentModelData.index[c.titleFieldName])?e(t.contentModelData.index[c.titleFieldName]):t.contentModelData.index[c.titleFieldName];if(t.contentModelData&&t.contentModelData.index){const de=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const Y of de)if(t.contentModelData.index[Y])return si(t.contentModelData.index[Y])?e(t.contentModelData.index[Y]):t.contentModelData.index[Y]}return e(t.title)},n=[{label:u("contentModel"),value:Tl.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:Tl.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:Tl.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:Tl.NEWS_TAG,tagType:"error"}];return{contentTypes:n,getContentTypeLabel:t=>n.find(c=>c.value===t)?.label,getContentTypeTagType:t=>n.find(c=>c.value===t)?.tagType||"default",extractItemTitle:a}};class $u{id;contentModelId;title;contentModelData;data;isActive;createdAt;updatedAt;contentModel;relatedItems;relatedTo;constructor(e,a,n,o,l,t,c,de){this.id=t,this.contentModelId=l,this.title=e,this.data=o,this.contentModelData=a,this.isActive=n,this.createdAt=c,this.updatedAt=de}}const Cu=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["content-model","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/content-model/items",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Lc=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["content-model","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/content-model/items/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Iu=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["content-model","items"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/content-model/items/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},Vu=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:l=>{if(l instanceof $u){if(typeof l.id!="string"&&typeof l.id!="number")throw new Error("ContentModelItem ID must be string or number");return l.id}return`temp-${crypto.randomUUID()}`},getBatchData:l=>({type:"remove",ids:Object.keys(l).filter(t=>l[t])}),mutationFn:async l=>{n.start();const t=Object.keys(l).filter(c=>l[c]);try{for(const c of t)await e({method:"delete",url:`/content-model/items/${c}`});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},ni=()=>{const{request:u}=Be();return Qn(async({query:e,contentModelId:a})=>{const n=await u({url:`/content-model-items/search/${e}/${a}`});return n.failure&&n.error?[]:n.result.data})},Bc=()=>{const{request:u}=Be();return Qn(async e=>{const a=await u({url:"/content-model-items/list",method:"post",data:e});return a.failure&&a.error?[]:a.result.data})},{defineComponent:Su}=await pe("vue"),{unref:p,renderList:Eu,Fragment:Io,openBlock:Ze,createElementBlock:On,resolveComponent:yi,createBlock:yt,createCommentVNode:to,createVNode:ut,withCtx:ht,normalizeStyle:vr,createElementVNode:Vo,toDisplayString:yn,createTextVNode:gn,isRef:Ta}=await pe("vue"),Uu={key:4,class:"w-full"},Mu={key:5,class:"w-full"},Nu={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},Tu=["onClick"],zu={key:0,class:"w-full"},Du={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},Au=["src"],Pu={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Lu=["src"],{defineComponent:Bu,inject:Ou,ref:xl,h:Zn,watch:gi,computed:So,onMounted:Fu}=await pe("vue"),{storeToRefs:qu}=await pe("pinia"),Ru=Bu({name:"FormGenerator"}),ju=Su({...Ru,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const a=u,n=e,{t:o,locale:l}=xe(),{tr:t,pickByTheme:c,fileUrl:de,mergeArrays:Y}=Je(),{extractItemTitle:se}=ms(),{data:T}=Ca(),he=Ou("appConfig");let A=[];if(typeof a.items=="string")try{A=JSON.parse(a.items)}catch{A=[]}else A=ve.cloneDeep(a.items);let M={};if(a.useJson)try{M=JSON.parse(a.modelValue)}catch{M={}}const d=xl(""),F=xl(Gl()),re=xl(null),r=xl(a.useJson?M:a.modelValue),Q={};A.forEach(R=>{R.key in r.value||(R.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(R.type)?r.value[R.key]=JSON.parse(R.defaultValue):R.type=="number"||R.type=="slider"?r.value[R.key]=parseFloat(R.defaultValue):R.type=="content-model-item"?r.value[R.key]=void 0:R.type=="content-model-items"?r.value[R.key]=[]:R.type=="list"?r.value[R.key]=R.defaultValue.split(",").map(H=>({value:H})):R.type=="i18n-list"?r.value[R.key]=R.defaultValue.split(",").map(H=>({value:`{ "fr": "${H}", "en": "${H}" }`})):r.value[R.key]=R.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(R.type)?r.value[R.key]="":["number","slider"].includes(R.type)?r.value[R.key]=0:["checkbox","switch"].includes(R.type)?r.value[R.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(R.type)?r.value[R.key]=[]:["range-slider"].includes(R.type)?r.value[R.key]=[0,100]:r.value[R.key]=void 0),R.required&&(Q[R.key]=[{required:!0,message:o("fillRequired")}]),F.value=Gl()});const L=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],G=R=>Zn("span",{},{default:()=>t(R.label)});gi(()=>r.value,R=>{const H=a.useJson?JSON.stringify(R):R,N=async()=>{if(A.length==0)return!0;let ot=!1;try{await re.value?.validate(We=>{ot=!We})}catch{ot=!1}return ot};n("update:modelValue",H),n("update",H,N)},{immediate:!0,deep:!0});const{isLightTheme:$}=qu(ho()),I=xl(!1),D=xl(!1),le=xl(!1),B=xl(""),me=xl(""),y=xl(!1),O=xl(!1),w=xl(""),_=xl(""),Z=xl(!1),U=R=>{window.open(R,"_blank")},q=xl(!1),K=xl([]),{data:E,isPending:C}=yc();gi(()=>E.value,R=>{const H=ve.cloneDeep(R);if(H){K.value=[];for(let N=0;N<H?.length;N++)switch(H[N].targetType){case Kl.EXTERNAL_LINK:K.value.findIndex(ot=>ot.url===H[N].url)===-1&&K.value.push(H[N]);break;case Kl.PAGE_LINK:K.value.findIndex(ot=>ot.path===H[N].path)===-1&&K.value.push(H[N]);break}}},{immediate:!0,deep:!0});const h=xl([]),f=xl([]),{mutateAsync:$e,isPending:fe}=ni(),{mutateAsync:x,isPending:i}=Bc(),b=So(()=>fe.value||i.value),ae=async(R,H)=>{if(!R.length){f.value=[];return}f.value=await $e({query:R,contentModelId:H})},P=So(()=>Y(h.value,f.value,"id")),be=xl([]),Ie=xl([]),{mutateAsync:ge,isPending:_e}=Nc(),{mutateAsync:ne,isPending:g}=Tc(),k=So(()=>g.value||_e.value),ee=async R=>{if(!R.length){Ie.value=[];return}Ie.value=await ne(R)},z=So(()=>Y(be.value,Ie.value,"id")),Se=Kc({enabled:!1}),Ye=Gc({enabled:!1});Fu(async()=>{A.find(R=>R.type==="news-categories"||R.type==="news-category")&&(Se.refetch(),Ye.refetch());for(let R=0;R<A.length;R++)if(A[R].type==="news-articles"||A[R].type==="news-article"){const H=r.value[A[R].key],N=await ge({ids:A[R].type==="news-articles"?H:[H]});N&&(be.value=Y(be.value,N,"id"))}else if(A[R].type==="content-model-items"||A[R].type==="content-model-item"){const H=r.value[A[R].key],N=await x({ids:A[R].type==="content-model-items"?H:[H]});N&&(h.value=Y(h.value,N,"id"))}});const ke=R=>Zn("span",{},{default:()=>`${t(R.name)}`}),S=R=>Zn("span",{},{default:()=>`${t(R.title)}`}),st=R=>Zn("span",{},{default:()=>`${t(R.name)}`}),De=R=>So(()=>Zn("span",{},{default:()=>se(R,T.value?.find(H=>H.id===R.contentModelId))})),ft=({option:R})=>Zn("div",{style:{display:"flex",alignItems:"center"}},[`${t(R.title)}`]),_t=R=>Zn("div",{style:{marginLeft:"12px",padding:"4px 0"}},[Zn("div",{},{default:()=>`${t(R.title)}`}),Zn("small",{},{default:()=>`${R.targetType==Kl.EXTERNAL_LINK?R.url:R.path}`})]);return(R,H)=>{const N=Xt,ot=sn,We=Mc,Ft=Zr,cn=Va,Rt=$c,ml=Sl,cl=nd,je=wc,Jt=In,Zt=vo,el=we,El=ue,ie=Ge,Ve=xu,Hl=yi("IconPicker"),tr=su,Ea=Js,lr=yi("color-picker"),fs=Zs,nr=nn,ar=ln,Ua=Bl,Ln=Ga;return Ze(),On(Io,null,[(Ze(),yt(ar,{ref_key:"formRef",ref:re,key:p(F),model:p(r),rules:Q,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:vr(a.formStyle)},{default:ht(()=>[(Ze(!0),On(Io,null,Eu(p(A),(s,_s)=>(Ze(),yt(nr,{key:_s,label:p(t)(s.label),path:s.key,"label-style":a.labelStyle,"show-require-mark":s.required,class:"w-full"},{default:ht(()=>[s.type=="text"?(Ze(),yt(N,{key:0,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),maxlength:s.settings?.maxLength||void 0,minlength:s.settings?.minLength||void 0,clearable:s.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-text"?(Ze(),yt(ot,{key:1,modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="textarea"?(Ze(),yt(N,{key:2,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),maxlength:s.settings?.maxLength||void 0,minlength:s.settings?.minLength||void 0,clearable:s.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-textarea"?(Ze(),yt(ot,{key:3,modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="editor"?(Ze(),On("div",Uu,[ut(We,{modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),"toolbar-items":L,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="i18n-editor"?(Ze(),On("div",Mu,[ut(ot,{modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="number"?(Ze(),yt(Ft,{key:6,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,max:s.settings?.max||void 0,min:s.settings?.min||void 0,step:s.settings?.step||1,clearable:s.settings?.clearable||!1,placeholder:p(t)(s.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):s.type=="checkbox"?(Ze(),yt(cn,{key:7,checked:p(r)[s.key],"onUpdate:checked":X=>p(r)[s.key]=X,"checked-value":s.settings?.["checked-value"]||!0,"unchecked-value":s.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):s.type=="switch"?(Ze(),yt(ml,{key:8},{default:ht(()=>[ut(Rt,{value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,"checked-value":s.settings?.["checked-value"]||!0,"unchecked-value":s.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):s.type=="slider"?(Ze(),yt(cl,{key:9,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,min:s.settings?.min||0,max:s.settings?.max||100,step:s.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):s.type=="range-slider"?(Ze(),yt(cl,{key:10,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,min:s.settings?.min||0,max:s.settings?.max||100,step:s.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):s.type=="date"?(Ze(),yt(je,{key:11,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM-dd",format:s.settings?.format||"dd MMMM yyyy",type:"date",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="daterange"?(Ze(),yt(je,{key:12,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM-dd",format:s.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetime"?(Ze(),yt(je,{key:13,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM-dd HH:mm:ss",format:s.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetimerange"?(Ze(),yt(je,{key:14,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM-dd HH:mm:ss",format:s.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="year"?(Ze(),yt(je,{key:15,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy",type:"year",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="yearrange"?(Ze(),yt(je,{key:16,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy",type:"yearrange",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="month"?(Ze(),yt(je,{key:17,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM",type:"month",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="monthrange"?(Ze(),yt(je,{key:18,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-MM",type:"monthrange",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarter"?(Ze(),yt(je,{key:19,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-Q",type:"quarter",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarterrange"?(Ze(),yt(je,{key:20,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,"value-format":"yyyy-Q",type:"quarterrange",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="week"?(Ze(),yt(je,{key:21,"formatted-value":p(r)[s.key],"onUpdate:formattedValue":X=>p(r)[s.key]=X,type:"week",clearable:s.settings?.clearable||!0,placeholder:p(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):s.type=="single-select"||s.type=="multi-select"?(Ze(),yt(Jt,{key:22,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:(s.options||[])?.map(X=>{if(s.type=="multi-select"&&s.settings&&p(r)[s.key]){const Ol=s.settings?.max||1/0;return{...X,disabled:p(r)[s.key].length>=Ol&&!p(r)[s.key].includes(X.value)}}return X}),multiple:s.type=="multi-select",placeholder:p(t)(s.label),"render-label":G,"label-field":"label","value-field":"value",filterable:"",clearable:s.settings?.clearable||!0,"max-tag-count":s.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="image"?(Ze(),On("div",Nu,[Vo("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{d.value=s.key,I.value=!0}},[p(r)[s.key]?(Ze(),yt(Zt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:vr("border: 1px dashed "+p(c)("green","white")),src:p(de)(p(r)[s.key]||"")},null,8,["style","src"])):(Ze(),On("div",{key:1,class:"w-full h-full flex items-center justify-center",style:vr("border: 1px dashed "+p(c)("green","white"))},[ut(El,{size:64},{default:ht(()=>[ut(el,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Tu),p(r)[s.key]?(Ze(),yt(ie,{key:0,quaternary:"",onClick:()=>{d.value=s.key,p(r)[p(d)]=""}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:trash-can"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("clear")),1)]),_:2},1032,["onClick"])):to("",!0)])):s.type=="gallery"?(Ze(),yt(Ve,{key:24,modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,"upload-folder":"images",title:p(t)(s.label)},null,8,["modelValue","onUpdate:modelValue","title"])):s.type=="news-category"||s.type=="news-categories"?(Ze(),yt(Jt,{key:25,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:(p(Se).data.value||[])?.map(X=>{if(s.type=="news-categories"&&s.settings&&p(r)[s.key]){const Ol=s.settings?.max||1/0;return{...X,disabled:p(r)[s.key].length>=Ol&&!p(r)[s.key].includes(X.id)}}return X}),multiple:s.type=="news-categories",placeholder:p(t)(s.label),"render-label":ke,"label-field":"name","value-field":"id",filterable:"",clearable:s.settings?.clearable||!0,"max-tag-count":s.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-tag"||s.type=="news-tags"?(Ze(),yt(Jt,{key:26,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:(p(Ye).data.value||[])?.map(X=>{if(s.type=="news-tags"&&s.settings&&p(r)[s.key]){const Ol=s.settings?.max||1/0;return{...X,disabled:p(r)[s.key].length>=Ol&&!p(r)[s.key].includes(X.id)}}return X}),multiple:s.type=="news-tags",placeholder:p(t)(s.label),"render-label":st,"label-field":"name","value-field":"id",filterable:"",clearable:s.settings?.clearable||!0,"max-tag-count":s.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-article"||s.type=="news-articles"?(Ze(),yt(Jt,{key:27,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:(p(z)||[])?.map(X=>{if(s.type=="news-articles"&&s.settings&&p(r)[s.key]){const Ol=s.settings?.max||1/0;return{...X,disabled:p(r)[s.key].length>=Ol&&!p(r)[s.key].includes(X.id)}}return X}),multiple:s.type=="news-articles",placeholder:p(t)(s.label),"render-label":S,loading:p(k),"value-field":"id",filterable:"",clearable:s.settings?.clearable||!0,"max-tag-count":s.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:ee},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):s.type=="icon"||s.type=="icons"?(Ze(),yt(Hl,{key:28,modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),multiple:s.type=="icons","icons-list-placeholder":p(o)("enterIconNameInSearchBar"),"search-placeholder":p(o)("search"),"empty-text":p(o)("noIconsFound"),"icon-library":s.settings?.library||"all",clearable:s.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):s.type=="albums"?(Ze(),yt(tr,{key:29,modelValue:p(r)[s.key],"onUpdate:modelValue":X=>p(r)[s.key]=X,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):s.type=="audio"?(Ze(),yt(Ea,{key:30},{default:ht(()=>[ut(ie,{type:"primary",secondary:"",onClick:()=>{d.value=s.key,y.value=!0}},{default:ht(()=>[gn(yn(p(o)("select")),1)]),_:2},1032,["onClick"]),ut(N,{value:p(r)[s.key]?p(fo)(p(r)[s.key]):"",placeholder:p(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(r)[s.key]?(Ze(),On(Io,{key:0},[ut(ie,{type:"primary",ghost:"",onClick:()=>{w.value=p(t)(s.label),_.value=p(de)(p(r)[s.key]),O.value=!0}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:play"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("play")),1)]),_:2},1032,["onClick"]),ut(ie,{type:"primary",ghost:"",onClick:()=>{d.value=s.key,p(r)[p(d)]=""}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:trash-can"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):to("",!0)]),_:2},1024)):s.type=="video"?(Ze(),yt(Ea,{key:31},{default:ht(()=>[ut(ie,{type:"primary",secondary:"",onClick:()=>{d.value=s.key,D.value=!0}},{default:ht(()=>[gn(yn(p(o)("select")),1)]),_:2},1032,["onClick"]),ut(N,{value:p(r)[s.key]?p(fo)(p(r)[s.key]):"",placeholder:p(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(r)[s.key]?(Ze(),On(Io,{key:0},[ut(ie,{type:"primary",ghost:"",onClick:()=>{B.value=p(t)(s.label),me.value=p(de)(p(r)[s.key]),le.value=!0}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:play"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("play")),1)]),_:2},1032,["onClick"]),ut(ie,{type:"primary",ghost:"",onClick:()=>{d.value=s.key,p(r)[p(d)]=""}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:trash-can"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):to("",!0)]),_:2},1024)):s.type=="document"?(Ze(),yt(Ea,{key:32},{default:ht(()=>[ut(ie,{type:"primary",secondary:"",onClick:()=>{d.value=s.key,Z.value=!0}},{default:ht(()=>[gn(yn(p(o)("select")),1)]),_:2},1032,["onClick"]),ut(N,{value:p(r)[s.key]?p(fo)(p(r)[s.key]):"",placeholder:p(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(r)[s.key]?(Ze(),On(Io,{key:0},[ut(ie,{type:"primary",ghost:"",onClick:X=>U(p(de)(p(r)[s.key]))},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"mdi:open-in-new"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("open")),1)]),_:2},1032,["onClick"]),ut(ie,{type:"primary",ghost:"",onClick:()=>{d.value=s.key,p(r)[p(d)]=""}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:trash-can"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("clear")),1)]),_:2},1032,["onClick"])],64)):to("",!0)]),_:2},1024)):s.type=="file"?(Ze(),yt(Ea,{key:33},{default:ht(()=>[ut(ie,{type:"primary",secondary:"",onClick:()=>{d.value=s.key,q.value=!0}},{default:ht(()=>[gn(yn(p(o)("select")),1)]),_:2},1032,["onClick"]),ut(N,{value:p(r)[s.key]?p(fo)(p(r)[s.key]):"",placeholder:p(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),p(r)[s.key]?(Ze(),yt(ie,{key:0,type:"primary",ghost:"",onClick:()=>{d.value=s.key,p(r)[p(d)]=""}},{icon:ht(()=>[ut(El,null,{default:ht(()=>[ut(el,{icon:"carbon:trash-can"})]),_:1})]),default:ht(()=>[gn(" "+yn(p(o)("clear")),1)]),_:2},1032,["onClick"])):to("",!0)]),_:2},1024)):s.type=="color"||s.type=="gradient"?(Ze(),yt(lr,{key:34,"pure-color":p(r)[s.key],"onUpdate:pureColor":X=>p(r)[s.key]=X,"default-pure-color":"#00000000","picker-type":"chrome","use-type":s.type=="color"?"pure":"gradient",format:s.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:p($)?"white":"black",lang:p(l)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):s.type=="content-model-item"||s.type=="content-model-items"?(Ze(),yt(Jt,{key:35,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:(p(P)||[])?.map(X=>{if(s.type=="content-model-items"&&s.settings&&p(r)[s.key]){const Ol=s.settings?.max||1/0;return{...X,disabled:p(r)[s.key].length>=Ol&&!p(r)[s.key].includes(X.id)}}return X}),multiple:s.type=="content-model-items",placeholder:p(t)(s.label),"render-label":X=>De(X).value,loading:p(b),"value-field":"id",filterable:"",clearable:s.settings?.clearable||!0,"max-tag-count":s.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:X=>ae(X,s.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):s.type=="menu-item-link"?(Ze(),yt(Jt,{key:36,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,options:p(K)||[],placeholder:p(t)(s.label),"render-label":_t,"render-tag":ft,loading:p(C),"label-field":"title","value-field":"id",filterable:"",clearable:s.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):s.type=="list"?(Ze(),yt(fs,{key:37,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),max:s.settings?.max||void 0,min:s.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:ht(({value:X})=>[s.settings?.type=="editor"?(Ze(),On("div",zu,[ut(We,{modelValue:X.value,"onUpdate:modelValue":Ol=>X.value=Ol,"toolbar-items":L,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(Ze(),yt(N,{key:1,value:X.value,"onUpdate:value":Ol=>X.value=Ol,type:s.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):s.type=="i18n-list"?(Ze(),yt(fs,{key:38,value:p(r)[s.key],"onUpdate:value":X=>p(r)[s.key]=X,placeholder:p(t)(s.label),max:s.settings?.max||void 0,min:s.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:ht(({value:X})=>[ut(ot,{modelValue:X.value,"onUpdate:modelValue":Ol=>X.value=Ol,type:s.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):to("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),ut(Ua,{show:p(O),"onUpdate:show":H[0]||(H[0]=s=>Ta(O)?O.value=s:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:p(w)},{default:ht(()=>[Vo("audio",Du,[Vo("source",{src:p(_)},null,8,Au)])]),_:1},8,["show","title"]),ut(Ua,{show:p(le),"onUpdate:show":H[1]||(H[1]=s=>Ta(le)?le.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:p(B)},{default:ht(()=>[Vo("video",Pu,[Vo("source",{src:p(me)},null,8,Lu)])]),_:1},8,["show","title"]),ut(Ln,{show:p(I),"onUpdate:show":H[2]||(H[2]=s=>Ta(I)?I.value=s:null),title:p(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:p(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[3]||(H[3]=s=>{p(r)[p(d)]=s,I.value=!1})},null,8,["show","title","upload-config"]),ut(Ln,{show:p(D),"onUpdate:show":H[4]||(H[4]=s=>Ta(D)?D.value=s:null),title:p(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:p(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[5]||(H[5]=s=>{p(r)[p(d)]=s,D.value=!1})},null,8,["show","title","upload-config"]),ut(Ln,{show:p(y),"onUpdate:show":H[6]||(H[6]=s=>Ta(y)?y.value=s:null),title:p(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:p(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[7]||(H[7]=s=>{p(r)[p(d)]=s,y.value=!1})},null,8,["show","title","upload-config"]),ut(Ln,{show:p(Z),"onUpdate:show":H[8]||(H[8]=s=>Ta(Z)?Z.value=s:null),title:p(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:p(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[9]||(H[9]=s=>{p(r)[p(d)]=s,Z.value=!1})},null,8,["show","title","upload-config"]),ut(Ln,{show:p(q),"onUpdate:show":H[10]||(H[10]=s=>Ta(q)?q.value=s:null),title:p(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:p(he)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:H[11]||(H[11]=s=>{p(r)[p(d)]=s,q.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Ys=Sa(ju,[["__scopeId","data-v-e0ec8f81"]]),{defineComponent:Ku}=await pe("vue"),{unref:Ut,renderList:yr,Fragment:ws,openBlock:dn,createElementBlock:Eo,resolveComponent:D1,createVNode:hn,withCtx:Ul,createBlock:ma,createCommentVNode:Gu,toDisplayString:xs,createTextVNode:$s,isRef:Yu,createSlots:Hu,createElementVNode:hi,vShow:bi,withDirectives:ki}=await pe("vue"),Wu={key:0},Qu={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},{ref:Xu,inject:Uo}=await pe("vue"),Ju=Ku({__name:"SectionDetails",setup(u){const{t:e}=xe(),{tr:a,editKeysToCamelCase:n}=Je(),o=Xu("index"),l=Uo("formValueValidate1"),t=Uo("formValueValidate2"),c=Uo("section"),de=Uo("refreshKey"),Y=Uo("data");return(se,T)=>{const he=we,A=ue,M=Cc,d=Ge,F=ei,re=gl,r=Dn,Q=An,L=ti;return Ut(n)(Ut(c)?.dataStructure)?(dn(),Eo("section",Wu,[hi("div",Qu,[hn(F,{value:Ut(o),"onUpdate:value":T[1]||(T[1]=G=>Yu(o)?o.value=G:null),type:"card",size:"small"},Hu({default:Ul(()=>[(dn(!0),Eo(ws,null,yr(Ut(n)(Ut(c)?.dataStructure),(G,$)=>(dn(),ma(M,{key:$,name:String($)},{default:Ul(()=>[String($)==="index"?(dn(),ma(A,{key:0,class:"mr-1"},{default:Ul(()=>[hn(he,{icon:"carbon:types"})]),_:1})):Gu("",!0),$s(" "+xs(String($)==="index"?Ut(e)("general"):Ut(a)(G.title)),1)]),_:2},1032,["name"]))),128))]),_:2},[Ut(o)!=="index"?{name:"suffix",fn:Ul(()=>[hn(d,{quaternary:"",size:"small",onClick:T[0]||(T[0]=()=>Ut(Y)[Ut(c)?.slug||""][Ut(o)].push({}))},{icon:Ul(()=>[hn(A,null,{default:Ul(()=>[hn(he,{icon:"carbon:add-alt"})]),_:1})]),default:Ul(()=>[$s(" "+xs(Ut(e)("add")),1)]),_:1})]),key:"0"}:void 0]),1032,["value"])]),hn(r,{appear:"",name:"slide-fade"},{default:Ul(()=>[hi("section",null,[(dn(!0),Eo(ws,null,yr(Ut(n)(Ut(c)?.dataStructure),(G,$)=>(dn(),Eo(ws,{key:$},[String($)==="index"?(dn(),ma(r,{key:0,appear:"",name:"fade"},{default:Ul(()=>[ki(hn(re,{size:"small",class:"mb-2",embedded:""},{default:Ul(()=>[(dn(),ma(Ys,{key:`${Ut(de)}-${$}-form-1`,modelValue:Ut(Y)[Ut(c)?.slug||""][$],"onUpdate:modelValue":I=>Ut(Y)[Ut(c)?.slug||""][$]=I,items:G,onUpdate:(I,D)=>{l.value=D}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1536),[[bi,Ut(o)==="index"]])]),_:2},1024)):(dn(),ma(r,{key:1,appear:"",name:"fade"},{default:Ul(()=>[ki(hn(re,{size:"small",class:"mb-2",embedded:""},{default:Ul(()=>[(dn(!0),Eo(ws,null,yr(Ut(Y)[Ut(c)?.slug||""][$],(I,D)=>(dn(),ma(re,{key:D,size:"small",class:"mb-2"},{header:Ul(()=>[hn(Q,{size:"medium",type:"info"},{default:Ul(()=>[$s(xs(String(D+1)),1)]),_:2},1024)]),"header-extra":Ul(()=>[hn(d,{secondary:"",type:"error",size:"small",onClick:()=>Ut(Y)[Ut(c)?.slug||""][$].splice(D,1)},{icon:Ul(()=>[hn(A,null,{default:Ul(()=>[hn(he,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:Ul(()=>[(dn(),ma(Ys,{key:`${Ut(de)}-${$}-${D}-form-2`,modelValue:Ut(Y)[Ut(c)?.slug||""][$][D],"onUpdate:modelValue":le=>Ut(Y)[Ut(c)?.slug||""][$][D]=le,items:G.items,onUpdate:(le,B)=>{t.value=B}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024))),128))]),_:2},1536),[[bi,Ut(o)===String($)]])]),_:2},1024))],64))),128))])]),_:1})])):(dn(),ma(L,{key:1,type:"warning","show-icon":""},{default:Ul(()=>[$s(xs(Ut(e)("noDataStructure")),1)]),_:1}))}}}),Zu=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["pages"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/pages",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Oc=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["pages"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/pages/${t.slug}`,data:Yt(t,["id","slug"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},ep=()=>{const{request:u}=Be(),{t:e}=xe(),a=pd(),n=Xe(),o=Fe();return Qn(async l=>{const t=await u({url:`/sections/${l.slug}/data-source-page`,method:"put",data:l.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(l,t)=>{a.invalidateQueries({queryKey:["pages"]}),a.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(l,t)=>{o.error(e("unableToUpdateSettings"))}})},tp=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["pages"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:l})=>{o.start();const t=await e({method:"delete",url:`/pages/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{defineComponent:lp}=await pe("vue"),{unref:Ne,resolveComponent:np,createVNode:ze,withCtx:Le,toDisplayString:zl,createTextVNode:un,normalizeClass:lo,openBlock:tl,createBlock:bn,createCommentVNode:Cs,createElementVNode:Dl,renderList:Is,Fragment:Mo,createElementBlock:kn,withModifiers:wi,isRef:xi}=await pe("vue"),ap={class:"absolute top-0 left-0 z-10 w-full"},op={class:"flex items-center justify-between ml-1 mr-2.5"},sp={key:0},rp={key:1},ip={key:0},cp={class:"flex items-center"},dp={class:"text-base"},up={class:"absolute top-[-10px] right-[-10px] z-[10]"},pp={class:"flex items-center justify-center cursor-pointer gap-2"},mp={key:1},fp={class:"mt-4"},_p={key:2,class:"mt-2 text-xs"},vp={class:"my-8"},yp={class:"flex items-center justify-between"},gp={class:"text-base"},hp={class:"my-8"},bp={class:"flex items-center justify-between"},kp={class:"text-base"},{ref:Xl,watch:wp,reactive:Vs,h:xp,computed:No,provide:To}=await pe("vue"),$p=lp({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const a=Yl(),{t:n}=xe(),o=u,l=e,t=Xl(Gl()),c=Xl({}),de=Xl({}),Y=Xl(),se=Xl(),T=Xl([]),he=Xl([]),A=Xl({}),M=Xl({}),{tr:d,pickByTheme:F,editKeysToCamelCase:re}=Je(),{data:r}=Qr(),{data:Q,isPending:L}=Yc(o.slug),{mutate:G,isPending:$}=Oc(),{mutate:I,isPending:D}=tp(),{mutate:le,isPending:B}=ep();wp(()=>Q.value,g=>{const k=ve.cloneDeep(g);if(k?.sections&&Array.isArray(k?.sections)){const ee={};for(const z of k.sections)z&&(ee[z.slug]=z.dataSourcePageSectionsData??{});for(const z of k.sections)z&&(ve.isObject(ee)&&ve.has(ee,z.slug)&&gc(ee[z.slug])?c.value[z.slug]=Vs(ee[z.slug]):c.value[z.slug]=Vs({}),ve.forIn(re(z.dataStructure),(Se,Ye)=>{(!c.value[z.slug][Ye]||Array.isArray(c.value[z.slug][Ye])&&c.value[z.slug][Ye].length==0)&&(Ye==="index"?c.value[z.slug][Ye]=Vs({}):c.value[z.slug][Ye]=Vs([]))}))}if(k&&Array.isArray(k?.sections)){const ee=k.sections;if(Array.isArray(k?.sectionsOrder)){T.value=[];for(const z of k.sectionsOrder)if(z){const Se=ee.find(Ye=>Ye.slug===z);Se&&T.value.push(Se)}for(const z of ee)T.value.map(Se=>Se.slug).includes(z.slug)||T.value.push(z)}else T.value=ve.cloneDeep(ee);if(Array.isArray(k.sectionsDisabled))for(const z of k.sections)z&&(A.value[z.slug]=!k.sectionsDisabled.includes(z.slug));else for(const z of k.sections)z&&(A.value[z.slug]=!0)}M.value=ve.cloneDeep(A.value),he.value=ve.cloneDeep(T.value),de.value=ve.cloneDeep(c.value),t.value=Gl()},{immediate:!0,deep:!0});const me=g=>xp("span",{},{default:()=>g.id===Q.value?.id?n("currentPage"):d(g.title)}),y=No(()=>ve.isEqual(c.value,de.value)&&ve.isEqual(T.value,he.value)&&ve.isEqual(A.value,M.value)),O=async()=>{const g=Y.value&&await Y.value(),k=se.value&&await se.value(),ee=async()=>{G({slug:o.slug,dispatchData:!0,sectionsData:c.value,sectionsOrder:T.value.map(z=>z.slug),sectionsDisabled:Object.keys(A.value).filter(z=>!A.value[z])})};(!Y.value||g)&&(!se.value||k)?await ee():a.warning({title:n("confirm"),content:n("mandatoryFieldsNotFilledInConfirmation"),positiveText:n("yes"),negativeText:n("cancel"),onPositiveClick:async()=>{await ee()}})},w=async g=>{a.warning({title:n("confirm"),content:n("confirmDeletePage"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{g.id&&I({id:g.id,slug:g.slug},{onSuccess:()=>{l("delete",Q.value)}})}})},_=Xl([]),Z=Xl(!1),U=()=>{_.value=[],T.value.forEach(g=>{g.id&&_.value.push(g.id)}),Z.value=!0},q=g=>{g.id&&(_.value.includes(g.id)?_.value=_.value.filter(k=>k!==g.id):_.value.push(g.id))},K=g=>No({get:()=>g.id?_.value.includes(g.id):!1,set:k=>{g.id&&(k?_.value=_.value.filter(ee=>ee!==g.id):_.value.includes(g.id)||_.value.push(g.id))}}),E=async()=>{G({slug:o.slug,sectionsIds:_.value})},C=Xl(0),h=Xl([]),f=Xl(!1),$e=g=>{C.value=g,h.value=[],f.value=!0},fe=g=>{g.id&&(h.value.includes(g.id)?h.value=h.value.filter(k=>k!==g.id):h.value.push(g.id))},x=g=>No({get:()=>g.id?h.value.includes(g.id):!1,set:k=>{g.id&&(k?h.value=h.value.filter(ee=>ee!==g.id):h.value.includes(g.id)||h.value.push(g.id))}}),i=async()=>{const g=T.value.map(z=>z.slug),k=h.value.map(z=>r.value?.find(Se=>Se.id===z)?.slug),ee=[...g.slice(0,C.value),...k,...g.slice(C.value)];G({slug:o.slug,sectionsIds:[...T.value.map(z=>z.id),...h.value],sectionsOrder:ee})},b=No(()=>(r.value||[]).filter(g=>!T.value.find(k=>k.id===g.id))),ae=async(g,k)=>{y.value?le({slug:g.slug,data:{pageId:Q.value?.id,sourcePageId:k}}):a.warning({title:n("confirm"),content:n("confirmUpdateDataSourcePage"),positiveText:n("yes"),negativeText:n("cancel"),onPositiveClick:()=>le({slug:g.slug,data:{pageId:Q.value?.id,sourcePageId:k}})})},P=g=>{g.id&&(_.value=[],T.value.forEach(k=>{k.id&&k.id!==g.id&&_.value.push(k.id)}),E())},be=g=>{},Ie=Xl(null),ge=g=>{Ie.value=g},_e=()=>{Ie.value&&(Ie.value=null)},ne=No(()=>$.value||D.value||B.value);return To("formValueValidate1",Y),To("formValueValidate2",se),To("section",Ie),To("refreshKey",t),To("data",c),(g,k)=>{const ee=we,z=ue,Se=Ge,Ye=Pn,ke=Sl,S=zn,st=od,De=Dn,ft=ad,_t=gl,R=sd,H=Va,N=An,ot=In,We=Ha,Ft=Ya,cn=np("Draggable"),Rt=Cn,ml=$n,cl=Bl;return tl(),kn(Mo,null,[ze(S,{to:"#alt-action"},{default:Le(()=>[ze(ke,{align:"center"},{default:Le(()=>[ze(Se,{secondary:"",type:"error",disabled:Ne(ne),onClick:k[0]||(k[0]=je=>Ne(Q)?w(Ne(Q)):null)},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:trash-can"})]),_:1})]),default:Le(()=>[un(" "+zl(Ne(n)("delete")),1)]),_:1},8,["disabled"]),ze(Se,{secondary:"",type:"info",disabled:Ne(ne),onClick:k[1]||(k[1]=je=>Ne(Q)?g.openFormModal(Ne(Q)):null)},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:edit"})]),_:1})]),default:Le(()=>[un(" "+zl(Ne(n)("editPage")),1)]),_:1},8,["disabled"]),ze(Ye,{vertical:"",class:lo(Ne(F)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ze(Se,{secondary:"",type:"primary",loading:Ne(ne),disabled:Ne(y),onClick:k[2]||(k[2]=je=>O())},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:save"})]),_:1})]),default:Le(()=>[un(" "+zl(Ne(n)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Dl("section",ap,[ze(_t,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:Le(()=>[Dl("div",op,[ze(ft,null,{default:Le(()=>[ze(st,{onClick:k[3]||(k[3]=je=>_e())},{default:Le(()=>[ze(z,{class:"mr-1"},{default:Le(()=>[ze(ee,{icon:"carbon:document"})]),_:1}),un(" "+zl(Ne(d)(Ne(Q)?.title)),1)]),_:1}),ze(De,{appear:"",name:"slide-fade"},{default:Le(()=>[Ne(Ie)?(tl(),bn(st,{key:0},{default:Le(()=>[un(zl(Ne(d)(Ne(Ie)?.title)),1)]),_:1})):Cs("",!0)]),_:1})]),_:1}),Ne(Ie)?(tl(),bn(Se,{key:0,onClick:k[4]||(k[4]=je=>_e()),size:"small",secondary:"",type:"warning",title:Ne(n)("exit")},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):Cs("",!0)])]),_:1})]),Dl("div",{class:lo(`${Ne(Ie)?"h-[90px]":"h-[50px]"}`)},null,2),Ne(Ie)?(tl(),bn(Ju,{key:0})):(tl(),bn(De,{key:1,appear:"",name:"slide-fade"},{default:Le(()=>[Dl("section",null,[Ne(L)?(tl(),kn("section",sp,[(tl(),kn(Mo,null,Is(6,je=>ze(R,{key:je,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(tl(),kn("section",rp,[Ne(Q)&&Array.isArray(Ne(Q).sections)&&Ne(Q).sections.length?(tl(),kn("section",ip,[ze(cn,{list:Ne(T)},{default:Le(()=>[(tl(!0),kn(Mo,null,Is(Ne(T),(je,Jt)=>(tl(),kn("section",{key:je.id},[ze(_t,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:Le(()=>[ze(Ft,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Le(({collapsed:Zt})=>[ze(ke,{align:"center",justify:"space-between"},{default:Le(()=>[ze(Se,{secondary:"",type:"primary",size:"small",onClick:wi(el=>ge(je),["stop"])},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:archive"})]),_:1})]),default:Le(()=>[un(" "+zl(Ne(n)("dataAndSettings")),1)]),_:2},1032,["onClick"]),ze(z,null,{default:Le(()=>[Zt?(tl(),bn(ee,{key:0,icon:"fa-solid:chevron-left"})):(tl(),bn(ee,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Le(()=>k[12]||(k[12]=[Dl("span",null,null,-1)])),default:Le(()=>[ze(We,{name:"1"},{header:Le(()=>[Dl("div",cp,[ze(z,{size:"21",class:"cursor-move mr-4"},{default:Le(()=>[ze(ee,{icon:"fa-solid:grip-lines"})]),_:1}),ze(H,{checked:Ne(A)[je.slug],"onUpdate:checked":Zt=>Ne(A)[je.slug]=Zt,size:"small",class:"mr-4",onClick:k[5]||(k[5]=wi(()=>{},["stop"]))},{default:Le(()=>[un(zl(Ne(n)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),ze(N,{size:"small",type:"info"},{default:Le(()=>[un(zl(Jt+1),1)]),_:2},1024),ze(Ye,{vertical:"",class:lo(Ne(F)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Dl("span",dp,zl(Ne(d)(je.title)),1)])]),default:Le(()=>[ze(ke,null,{default:Le(()=>[ze(Se,{size:"small",type:"error",secondary:"",onClick:Zt=>P(je)},{default:Le(()=>[ze(z,{size:"18",class:"mr-1"},{default:Le(()=>[ze(ee,{icon:"carbon:close"})]),_:1}),un(" "+zl(Ne(n)("removeSection")),1)]),_:2},1032,["onClick"]),ze(Se,{size:"small",type:"warning",secondary:"",disabled:"",onClick:Zt=>be()},{default:Le(()=>[ze(z,{size:"18",class:"mr-1"},{default:Le(()=>[ze(ee,{icon:"carbon:partition-same"})]),_:1}),un(" "+zl(Ne(n)("duplicateSection")),1)]),_:2},1032,["onClick"]),ze(Ye,{vertical:"",class:lo(Ne(F)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ze(ke,{align:"center"},{default:Le(()=>[Dl("span",null,zl(Ne(n)("dataSourcePage")),1),ze(ot,{value:je.dataSourcePageId,options:je.pages||[],placeholder:Ne(n)("select"),"render-label":me,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":Zt=>ae(je,Zt)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),Jt<Ne(T).length-1?(tl(),kn("div",{key:0,class:lo(`relative border-dashed border-y-2 h-1.5  ${Ne(F)("!border-zinc-300","!border-zinc-600")}`)},[Dl("div",up,[ze(Se,{size:"tiny",type:"info",title:Ne(n)("insertSections"),onClick:Zt=>$e(Jt+1)},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:insert-page"})]),_:1})]),_:2},1032,["title","onClick"])])],2)):Cs("",!0)]))),128))]),_:1},8,["list"]),ze(_t,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:k[6]||(k[6]=je=>U())},{default:Le(()=>[Dl("div",pp,[ze(z,{size:"20"},{default:Le(()=>[ze(ee,{icon:"carbon:row"})]),_:1}),un(" "+zl(Ne(n)("insertOrRemoveSections")),1)])]),_:1})])):(tl(),kn("section",mp,[ze(_t,{size:"large",class:lo(`mb-2 !border-dashed !border-2 ${Ne(F)("!border-zinc-300","!border-zinc-600")}`)},{default:Le(()=>[ze(Rt,{description:Ne(n)("noSectionOnThisPage")},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:page-break"})]),_:1})]),extra:Le(()=>[Dl("div",fp,[ze(Se,{size:"small",secondary:"",onClick:k[7]||(k[7]=je=>U())},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:row"})]),_:1})]),default:Le(()=>[un(" "+zl(Ne(n)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),Ne(Q)?(tl(),kn("div",_p,[un(zl(Ne(n)("dataRetrievalSlug"))+": ",1),Dl("b",null,zl(Ne(Q).slug),1)])):Cs("",!0)]))])]),_:1})),ze(cl,{show:Ne(Z),"onUpdate:show":k[8]||(k[8]=je=>xi(Z)?Z.value=je:null),loading:Ne($)||Ne(B),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ne(n)("insertOrRemoveSections"),"positive-text":Ne(n)("validate"),"negative-text":Ne(n)("cancel"),onPositiveClick:E,onNegativeClick:k[9]||(k[9]=je=>Z.value=!1)},{default:Le(()=>[Dl("section",vp,[Ne(r)?.length?(tl(),bn(ml,{key:0,style:{"max-height":"400px"}},{default:Le(()=>[(tl(!0),kn(Mo,null,Is(Ne(r),je=>(tl(),bn(_t,{key:je.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Jt=>q(je)},{default:Le(()=>[Dl("div",yp,[Dl("span",gp,zl(Ne(d)(je.title)),1),ze(H,{checked:K(je).value,"onUpdate:checked":Jt=>K(je).value=Jt,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(tl(),bn(Rt,{key:1,description:Ne(n)("noAvailableSection")},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ze(cl,{show:Ne(f),"onUpdate:show":k[10]||(k[10]=je=>xi(f)?f.value=je:null),loading:Ne($)||Ne(B),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ne(n)("insertSections"),"positive-text":Ne(n)("validate"),"negative-text":Ne(n)("cancel"),onPositiveClick:i,onNegativeClick:k[11]||(k[11]=je=>f.value=!1)},{default:Le(()=>[Dl("section",hp,[Ne(b)?.length?(tl(),bn(ml,{key:0,style:{"max-height":"400px"}},{default:Le(()=>[(tl(!0),kn(Mo,null,Is(Ne(b),je=>(tl(),bn(_t,{key:je.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:Jt=>fe(je)},{default:Le(()=>[Dl("div",bp,[Dl("span",kp,zl(Ne(d)(je.title)),1),ze(H,{checked:x(je).value,"onUpdate:checked":Jt=>x(je).value=Jt,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(tl(),bn(Rt,{key:1,description:Ne(n)("noAvailableSection")},{icon:Le(()=>[ze(z,null,{default:Le(()=>[ze(ee,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Cp=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu-item-groups"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/menu-item-groups",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Ip=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu-item-groups"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/menu-item-groups/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Vp=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["menu-item-groups"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/menu-item-groups/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{useModel:Sp,defineComponent:Ep}=await pe("vue"),{unref:Pt,resolveComponent:A1,createVNode:ll,toDisplayString:no,createTextVNode:zo,withCtx:ul,renderList:Up,Fragment:$i,openBlock:Do,createElementBlock:Ci,createElementVNode:gr,createBlock:hr,normalizeClass:Mp,isRef:Np}=await pe("vue"),{ref:Ss}=await pe("vue"),Tp={class:"flex items-center justify-between"},zp={class:"flex flex-col"},Dp={class:"text-sm font-bold"},Ap=Ep({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=xe(),{pickByTheme:a,tr:n}=Je(),o=Sp(u,"show"),{data:l,isPending:t}=hc(),{mutate:c,isPending:de}=Cp(),{mutate:Y,isPending:se}=Ip(),{mutate:T,isPending:he}=Vp(),A=Yl(),M=Ss(!1),d=Ss(null),F=Ss(null),re=Ss({name:"",description:""}),r={name:[{required:!0,message:e("fillRequired")}]},Q=$=>{d.value=ve.cloneDeep($),re.value=ve.cloneDeep($||{name:"",description:""}),M.value=!0},L=async()=>(F.value?.validate(async $=>{if(!$){const I={name:re.value.name,description:re.value.description};d.value?Y({id:d.value.id,...I},{onSuccess:()=>{M.value=!1}}):c(I,{onSuccess:()=>{M.value=!1}})}}),!1),G=async $=>{A.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{$.id&&T({id:$.id})}})};return($,I)=>{const D=we,le=Ge,B=Sl,me=er,y=ue,O=gl,w=$n,_=Cn,Z=bo,U=Bl,q=sn,K=nn,E=ln;return Do(),Ci($i,null,[ll(U,{show:o.value,"onUpdate:show":I[2]||(I[2]=C=>o.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Pt(e)("menuItemGroups")},{"header-extra":ul(()=>[ll(B,{align:"center"},{default:ul(()=>[ll(le,{secondary:"",size:"small",type:"primary",disabled:Pt(t),onClick:I[0]||(I[0]=C=>Q(null))},{default:ul(()=>[ll(D,{icon:"carbon:add-alt",class:"mr-1"}),zo(" "+no(Pt(e)("add")),1)]),_:1},8,["disabled"]),ll(le,{secondary:"",size:"small",type:"error",disabled:Pt(t),onClick:I[1]||(I[1]=C=>o.value=!1)},{default:ul(()=>[ll(D,{icon:"carbon:close",class:"mr-1"}),zo(" "+no(Pt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:ul(()=>[ll(Z,{show:Pt(t)},{default:ul(()=>[Pt(l)?.length?(Do(),hr(w,{key:0,style:{"max-height":"400px"}},{default:ul(()=>[(Do(!0),Ci($i,null,Up(Pt(l),C=>(Do(),hr(O,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:ul(()=>[gr("div",Tp,[gr("div",zp,[gr("span",Dp,no(Pt(n)(C.name)),1),ll(me,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:ul(()=>[zo(no(Pt(n)(C.description)),1)]),_:2},1024)]),ll(B,null,{default:ul(()=>[ll(le,{size:"small",type:"warning",secondary:"",onClick:h=>Q(C)},{default:ul(()=>[ll(y,null,{default:ul(()=>[ll(D,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),ll(le,{size:"small",type:"error",secondary:"",onClick:h=>G(C)},{default:ul(()=>[ll(y,null,{default:ul(()=>[ll(D,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Do(),hr(O,{key:1,size:"large",class:Mp(`mb-2 !border-dashed !border-2 ${Pt(a)("!border-zinc-300","!border-zinc-600")}`)},{default:ul(()=>[ll(_,{description:Pt(e)("noMenuItemGroupAdded")},{icon:ul(()=>[ll(y,null,{default:ul(()=>[ll(D,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),ll(U,{show:Pt(M),"onUpdate:show":I[5]||(I[5]=C=>Np(M)?M.value=C:null),loading:Pt(de)||Pt(se)||Pt(he),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Pt(d)?Pt(e)("editMenuItemGroup"):Pt(e)("addMenuItemGroup"),"positive-text":Pt(e)("validate"),"negative-text":Pt(e)("cancel"),onPositiveClick:L,onNegativeClick:I[6]||(I[6]=C=>M.value=!1)},{default:ul(()=>[ll(E,{ref_key:"formRef",ref:F,model:Pt(re),rules:r,"show-require-mark":!1,size:"medium",class:"my-5"},{default:ul(()=>[ll(K,{"show-label":!1,path:"name"},{default:ul(()=>[ll(q,{modelValue:Pt(re).name,"onUpdate:modelValue":I[3]||(I[3]=C=>Pt(re).name=C),placeholder:Pt(e)("name"),class:"w-full",sync:""},{label:ul(()=>[zo(no(Pt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ll(K,{"show-label":!1,path:"description"},{default:ul(()=>[ll(q,{modelValue:Pt(re).description,"onUpdate:modelValue":I[4]||(I[4]=C=>Pt(re).description=C),placeholder:Pt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:ul(()=>[zo(no(Pt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:Ii,mergeModels:Pp,defineComponent:Lp}=await pe("vue"),{unref:jt,resolveComponent:P1,createVNode:ea,withCtx:za,isRef:Bp,Fragment:Op,openBlock:Ao,createElementBlock:Fp,createCommentVNode:Es,createBlock:Us}=await pe("vue"),{ref:Po,computed:Lo,onMounted:qp,h:Bo}=await pe("vue"),Rp=Lp({__name:"ContentFormItems",props:{"content-type":{default:Tl.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Pp(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:a}=xe(),{tr:n,mergeArrays:o}=Je(),{contentTypes:l,extractItemTitle:t}=ms(),{data:c}=Ca(),de=e,Y=Ii(u,"content-type"),se=Ii(u,"content-id"),T=Po(),he=Po([]),A=Po([]),{mutateAsync:M,isPending:d}=ni(),{mutateAsync:F,isPending:re}=Bc(),r=Lo(()=>d.value||re.value),Q=async(C,h)=>{if(!C.length){A.value=[];return}A.value=await M({query:C,contentModelId:h})},L=Lo(()=>o(he.value,A.value,"id")),G=Po([]),$=Po([]),{mutateAsync:I,isPending:D}=Nc(),{mutateAsync:le,isPending:B}=Tc(),me=Lo(()=>B.value||D.value),y=async C=>{if(!C.length){$.value=[];return}$.value=await le(C)},O=Lo(()=>o(G.value,$.value,"id")),{categories:w}=ri(),{tags:_}=ri();qp(async()=>{const C=await I({ids:se.value?[se.value]:[]});C&&(G.value=o(G.value,C,"id"));const h=await F({ids:se.value?[se.value]:[]});h&&(he.value=o(he.value,h,"id"),T.value=he.value.find(f=>f.id===se.value)?.contentModelId)});const Z=C=>Bo("span",{},{default:()=>`${n(C.name)}`}),U=C=>Bo("span",{},{default:()=>`${n(C.title)}`}),q=C=>Bo("span",{},{default:()=>`${n(C.name)}`}),K=C=>Bo("span",{},{default:()=>n(C.title)}),E=C=>Lo(()=>Bo("span",{},{default:()=>t(C,c.value?.find(h=>h.id===C.contentModelId))}));return(C,h)=>{const f=In,$e=Ia,fe=rn;return Ao(),Us(fe,{"x-gap":"12",span:24},{default:za(()=>[ea($e,{span:8,label:jt(a)("contentType"),path:"contentType"},{default:za(()=>[ea(f,{value:Y.value,"onUpdate:value":[h[0]||(h[0]=x=>Y.value=x),h[1]||(h[1]=()=>se.value=void 0)],options:jt(l)||[],placeholder:jt(a)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Y.value===jt(Tl).CONTENT_MODEL?(Ao(),Fp(Op,{key:0},[ea($e,{span:8,label:jt(a)("contentModel")},{default:za(()=>[ea(f,{value:jt(T),"onUpdate:value":h[2]||(h[2]=x=>Bp(T)?T.value=x:null),options:jt(c),placeholder:jt(a)("search"),"render-label":K,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ea($e,{span:8,label:jt(a)("item"),path:"contentId"},{default:za(()=>[ea(f,{value:se.value,"onUpdate:value":[h[3]||(h[3]=x=>se.value=x),h[5]||(h[5]=(x,i)=>de("update",x,i,Y.value))],options:jt(L)||[],placeholder:jt(a)("search"),"render-label":x=>E(x).value,loading:jt(r),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:h[4]||(h[4]=x=>Q(x,jt(T)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):Es("",!0),Y.value===jt(Tl).NEWS_ARTICLE?(Ao(),Us($e,{key:1,span:16,label:jt(a)("newsArticle"),path:"contentId"},{default:za(()=>[ea(f,{value:se.value,"onUpdate:value":[h[6]||(h[6]=x=>se.value=x),h[7]||(h[7]=(x,i)=>de("update",x,i,Y.value))],options:jt(O)||[],placeholder:jt(a)("search"),"render-label":U,loading:jt(me),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:y},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):Es("",!0),Y.value===jt(Tl).NEWS_CATEGORY?(Ao(),Us($e,{key:2,span:16,label:jt(a)("newsCategory"),path:"contentId"},{default:za(()=>[ea(f,{value:se.value,"onUpdate:value":[h[8]||(h[8]=x=>se.value=x),h[9]||(h[9]=(x,i)=>de("update",x,i,Y.value))],options:jt(w)||[],placeholder:jt(a)("select"),"render-label":Z,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Es("",!0),Y.value===jt(Tl).NEWS_TAG?(Ao(),Us($e,{key:3,span:16,label:jt(a)("newsTag"),path:"contentId"},{default:za(()=>[ea(f,{value:se.value,"onUpdate:value":[h[10]||(h[10]=x=>se.value=x),h[11]||(h[11]=(x,i)=>de("update",x,i,Y.value))],options:jt(_)||[],placeholder:jt(a)("select"),"render-label":q,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Es("",!0)]),_:1})}}}),jp=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/menu/items",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Kp=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/menu/items/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Gp=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["menu","items"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/menu/items/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},Yp=()=>{const{request:u}=Be(),e=Xe();return Qn(async a=>{const n=await u({method:"put",url:"/menu/items/position",data:a});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:Hp,defineComponent:Wp}=await pe("vue"),{unref:v,resolveComponent:br,createVNode:W,withCtx:ye,toDisplayString:nl,createTextVNode:Ql,openBlock:fl,createBlock:ta,createCommentVNode:Da,isRef:Ms,renderList:kr,Fragment:fa,createElementBlock:pn,normalizeClass:Aa,withModifiers:Oo,createElementVNode:Ml}=await pe("vue"),Qp={class:"flex items-center"},Xp={class:"flex flex-col"},Jp={class:"text-sm font-bold"},Zp={key:0,class:"text-sm"},em={class:"text-xs font-normal"},tm={class:"text-xs my-1"},lm={class:"flex items-center"},nm={class:"flex flex-col"},am={class:"text-sm font-bold"},om={class:"text-xs font-normal"},sm={key:0,class:"mt-4"},rm={class:"my-8"},im={class:"flex items-center justify-between"},cm={class:"flex flex-col"},dm={class:"text-sm font-bold"},um={class:"text-xs font-normal"},pm={class:"flex items-center"},mm={key:0},fm={key:1},_m={key:2},{storeToRefs:vm}=await pe("pinia"),{ref:wn,computed:Vi,h:Si}=await pe("vue"),ym=Wp({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:a}=xe(),{extractItemTitle:n}=ms(),{tr:o,pickByTheme:l}=Je(),{isLightTheme:t}=vm(ho()),{data:c,isPending:de}=Xr(),{data:Y}=Ca(),{data:se,isPending:T}=hc(),{data:he,refetch:A}=yc(),{mutate:M,isPending:d}=jp(),{mutate:F,isPending:re}=Kp(),{mutate:r,isPending:Q}=Gp(),{mutate:L}=Yp(),G=Fe(),$=Yl(),I=Hp(u,"modelValue"),D=wn([]),le=wn([]),B=wn(""),me=wn(),y=Vi(()=>{if(!B.value)return D.value;const ne=D.value.filter(g=>g.title.toLowerCase().includes(B.value.toLowerCase())||g.description?.toLowerCase().includes(B.value.toLowerCase())||g.children.some(k=>k.title.toLowerCase().includes(B.value.toLowerCase())||k.description?.toLowerCase().includes(B.value.toLowerCase())));return me.value&&me.value.focus(),ne}),O=async()=>{await A(),D.value=he.value?.filter(ne=>!ne.parentId&&ne.menuId===I.value?.id)||[];for(let ne=0;ne<D.value.length;ne++)D.value[ne].children=he.value?.filter(g=>g.parentId===D.value[ne].id&&g.menuId===I.value?.id)||[];le.value=he.value?.filter(ne=>ne.menuId!==I.value?.id)||[]};O();const w=wn(12),_=wn(1),Z=ne=>{w.value=ne},U={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:Kl.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:Tl.CONTENT_MODEL,contentId:void 0},q=wn(null),K=wn(!1),E=wn(!1),C=wn(null),h=wn(null),f=wn(U),$e=Vi(()=>{const ne={title:[{required:!0,message:e("fillRequired")}]};return f.value.targetType===Kl.PAGE_LINK?(ne.pageId=[{required:!0,message:e("fillRequired")}],ne.path=[{required:!0,message:e("fillRequired")}]):f.value.targetType===Kl.EXTERNAL_LINK?ne.url=[{required:!0,message:e("fillRequired")}]:f.value.targetType===Kl.CONTENT_LINK&&(ne.contentId=[{required:!0,message:e("fillRequired")}],ne.contentType=[{required:!0,message:e("fillRequired")}]),ne}),fe=(ne,g=null)=>{C.value=ve.cloneDeep(ne),q.value=g,ne?(f.value=ve.cloneDeep(ne),K.value=!0):(f.value=ve.cloneDeep(U),le.value.length>0?E.value=!0:K.value=!0)},x=async ne=>{$.warning({title:e("confirm"),content:ne.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{ne.id&&r({id:ne.id})}})},i=async ne=>{M({title:ne.title,path:ne.path,url:ne.url,description:ne.description,isActive:!0,isVisible:!0,color:ne.color,icon:ne.icon,position:ne.position,targetType:ne.targetType,parentId:q.value,menuId:I.value?.id,sectionId:ne.sectionId,menuItemGroupId:ne.menuItemGroupId,pageId:ne.pageId},{onSuccess(){O(),E.value=!1}})},b=async()=>(h.value?.validate(async ne=>{if(!ne){const g={title:f.value.title,path:f.value.path,url:f.value.url,description:f.value.description,isActive:f.value.isActive,isVisible:f.value.isVisible,color:f.value.color,icon:f.value.icon,position:f.value.position,targetType:f.value.targetType,parentId:q.value,menuId:I.value?.id,sectionId:f.value.sectionId,menuItemGroupId:f.value.menuItemGroupId,pageId:f.value.pageId,contentId:f.value.contentId,contentType:f.value.contentType};C.value?C.value.title!==f.value.title&&D.value.findIndex(k=>k.title==f.value.title)>-1?G.error(e("sameMenuItemTitleMessage")):F({id:C.value.id,...g},{onSuccess(){O()}}):D.value.findIndex(k=>k.title==f.value.title)>-1?G.error(e("sameMenuItemTitleMessage")):M(g,{onSuccess(){O()}}),K.value=!1}}),!1),ae=async(ne,g)=>{L({items:g},{onSuccess(){O()}})},P=ne=>Si("span",{},{default:()=>o(ne.title)}),be=ne=>Si("span",{},{default:()=>o(ne.name)}),Ie=ne=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(ne),ge=ne=>{if(ne.targetType==Kl.EXTERNAL_LINK)return ne.url;if(ne.targetType==Kl.PAGE_LINK)return ne.path;if(ne.targetType==Kl.CONTENT_LINK)switch(ne.contentType){case Tl.CONTENT_MODEL:return e("contentModel");case Tl.NEWS_CATEGORY:return e("newsCategory");case Tl.NEWS_ARTICLE:return e("newsArticle");case Tl.NEWS_TAG:return e("newsTag")}return""},_e=async(ne,g,k)=>{if(!o(f.value.title))switch(k){case Tl.CONTENT_MODEL:f.value.title=n(g,Y.value?.find(ee=>ee.id===g.contentModelId));break;case Tl.NEWS_ARTICLE:f.value.title=g.title;break;case Tl.NEWS_CATEGORY:case Tl.NEWS_TAG:f.value.title=g.name;break}};return(ne,g)=>{const k=we,ee=Sl,z=zn,Se=Ic,Ye=An,ke=Pn,S=gl,st=br("Draggable"),De=Ha,ft=Ya,_t=ko,R=Cn,H=Dn,N=$n,ot=Bl,We=sn,Ft=nn,cn=Zr,Rt=Ia,ml=Qs,cl=Ws,je=rn,Jt=br("IconPicker"),Zt=br("color-picker"),el=In,El=ln;return fl(),pn(fa,null,[W(z,{to:"#alt-action"},{default:ye(()=>[W(ee,{align:"center"},{default:ye(()=>[v(y).length?(fl(),ta(v(Ge),{key:0,secondary:"",type:"primary",onClick:g[0]||(g[0]=ie=>fe(null))},{icon:ye(()=>[W(v(ue),{size:"18"},{default:ye(()=>[W(k,{icon:"carbon:add-alt"})]),_:1})]),default:ye(()=>[Ql(" "+nl(v(e)("addMenuItem")),1)]),_:1})):Da("",!0)]),_:1})]),_:1}),W(Se,{class:"mt-2 mb-5",onBack:g[2]||(g[2]=ie=>I.value=null)},{title:ye(()=>[Ql(nl(v(o)(I.value?.title)),1)]),back:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:ye(()=>[W(v(Xt),{ref_key:"searchInputRef",ref:me,value:v(B),"onUpdate:value":g[1]||(g[1]=ie=>Ms(B)?B.value=ie:null),clearable:!0,placeholder:v(e)("search")},{suffix:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),W(H,{appear:"",name:"slide-fade"},{default:ye(()=>[Ml("section",null,[v(y)&&v(y).length?(fl(),pn(fa,{key:0},[W(st,{list:v(D),onChange:g[3]||(g[3]=ie=>ae(ie,v(D)))},{default:ye(()=>[(fl(!0),pn(fa,null,kr(v(y).slice((v(_)-1)*v(w),v(_)*v(w)),ie=>(fl(),ta(S,{key:ie.id,embedded:"",size:"small",class:"mb-1"},{default:ye(()=>[W(ft,{"default-expanded-names":ie.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":ye(({collapsed:Ve})=>[W(ee,{align:"center"},{default:ye(()=>[W(Ye,{size:"small",bordered:!1,type:ie.isActive?"success":"error"},{default:ye(()=>[Ql(nl(ie.isActive?v(e)("published"):v(e)("unpublished")),1)]),_:2},1032,["type"]),W(Ye,{size:"small",bordered:!1,type:ie.isVisible?"info":"warning"},{default:ye(()=>[Ql(nl(ie.isVisible?v(e)("visible"):v(e)("hidden")),1)]),_:2},1032,["type"]),W(ke,{vertical:"",class:Aa(["!mx-0",v(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),W(v(Ge),{size:"small",type:"primary",secondary:"",onClick:Oo(Hl=>fe(ie),["stop"])},{default:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),W(v(Ge),{size:"small",type:"error",secondary:"",onClick:Oo(Hl=>x(ie),["stop"])},{default:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]),W(v(Ge),{size:"small",type:"info",secondary:"",onClick:Oo(Hl=>fe(null,ie.id),["stop"])},{icon:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:category"})]),_:1})]),default:ye(()=>[Ql(" "+nl(v(e)("subMenuItem"))+" ",1),W(Ye,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:ye(()=>[Ql(nl(ie.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),g[27]||(g[27]=Ml("div",{class:"w-6"},null,-1)),W(v(ue),null,{default:ye(()=>[Ve?(fl(),ta(k,{key:0,icon:"fa-solid:chevron-left"})):(fl(),ta(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:ye(()=>g[28]||(g[28]=[Ml("span",null,null,-1)])),default:ye(()=>[W(De,{name:"1"},{header:ye(()=>[Ml("div",Qp,[W(v(ue),{size:"21",class:"cursor-move mr-4"},{default:ye(()=>[W(k,{icon:"fa-solid:grip-lines"})]),_:1}),W(ke,{vertical:"",class:Aa(v(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ml("div",Xp,[Ml("div",null,[Ml("span",Jp,nl(v(o)(ie.title)),1),ie.group?(fl(),pn("span",Zp," Â ("+nl(v(o)(ie.group?.name))+") ",1)):Da("",!0)]),Ml("small",em,nl(ge(ie)),1)])])]),default:ye(()=>[ie.description?(fl(),pn(fa,{key:0},[W(ke,{class:Aa([v(l)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Ml("div",tm,nl(v(o)(ie.description)),1)],64)):Da("",!0),ie.children.length?(fl(),pn(fa,{key:1},[W(ke,{class:Aa([v(l)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),W(st,{list:ie.children,onChange:Ve=>ae(Ve,ie.children)},{default:ye(()=>[(fl(!0),pn(fa,null,kr(ie.children,Ve=>(fl(),ta(S,{key:Ve.id,size:"small",class:"mb-1"},{header:ye(()=>[Ml("div",lm,[W(v(ue),{size:"21",class:"cursor-move mr-4"},{default:ye(()=>[W(k,{icon:"fa-solid:grip-lines"})]),_:1}),W(ke,{vertical:"",class:Aa(v(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ml("div",nm,[Ml("span",am,nl(v(o)(Ve.title)),1),Ml("small",om,nl(ge(Ve)),1)])])]),"header-extra":ye(()=>[W(ee,{align:"center"},{default:ye(()=>[W(Ye,{size:"small",bordered:!1,type:Ve.isActive?"success":"error"},{default:ye(()=>[Ql(nl(Ve.isActive?v(e)("published"):v(e)("unpublished")),1)]),_:2},1032,["type"]),W(Ye,{size:"small",bordered:!1,type:Ve.isVisible?"info":"warning"},{default:ye(()=>[Ql(nl(Ve.isVisible?v(e)("visible"):v(e)("hidden")),1)]),_:2},1032,["type"]),W(ke,{vertical:"",class:Aa(["!mx-0",v(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),W(v(Ge),{size:"small",type:"primary",secondary:"",onClick:Oo(Hl=>fe(Ve,ie.id),["stop"])},{default:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),W(v(Ge),{size:"small",type:"error",secondary:"",onClick:Oo(Hl=>x(Ve),["stop"])},{default:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Da("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),W(_t,{page:v(_),"onUpdate:page":g[4]||(g[4]=ie=>Ms(_)?_.value=ie:null),class:"mt-5 justify-end","show-size-picker":"","page-size":v(w),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(v(D).length/v(w)),"onUpdate:pageSize":Z},{prefix:ye(()=>[Ql(nl(`${v(D).length} ${v(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(fl(),ta(S,{key:1,size:"large",class:Aa(`mb-2 !border-dashed !border-2 ${v(l)("!border-zinc-300","!border-zinc-600")}`)},{default:ye(()=>[W(R,{description:v(e)("noMenuItemAvailable")},{icon:ye(()=>[W(v(ue),null,{default:ye(()=>[v(B)?(fl(),ta(k,{key:0,icon:"carbon:search"})):(fl(),ta(k,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:ye(()=>[v(B)?Da("",!0):(fl(),pn("div",sm,[W(v(Ge),{size:"small",secondary:"",onClick:g[5]||(g[5]=ie=>fe(null))},{icon:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:add-alt"})]),_:1})]),default:ye(()=>[Ql(" "+nl(v(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),W(ot,{show:v(E),"onUpdate:show":g[6]||(g[6]=ie=>Ms(E)?E.value=ie:null),loading:v(d)||v(re)||v(Q),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:v(e)("menuItems"),"positive-text":v(q)?v(e)("createSubMenuItem"):v(e)("createMenuItem"),"negative-text":v(e)("cancel"),onPositiveClick:g[7]||(g[7]=()=>{E.value=!1,K.value=!0}),onNegativeClick:g[8]||(g[8]=ie=>E.value=!1)},{default:ye(()=>[Ml("section",rm,[W(N,{style:{"max-height":"400px"}},{default:ye(()=>[(fl(!0),pn(fa,null,kr(v(le),ie=>(fl(),ta(S,{key:ie.id,embedded:"",size:"small",class:"mb-2"},{default:ye(()=>[Ml("div",im,[Ml("div",cm,[Ml("span",dm,nl(v(o)(ie.title)),1),Ml("small",um,nl(ge(ie)),1)]),W(v(Ge),{size:"small",type:"primary",secondary:"",onClick:Ve=>i(ie)},{icon:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:add-alt"})]),_:1})]),default:ye(()=>[Ql(" "+nl(v(e)("add")),1)]),_:2},1032,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),W(ot,{show:v(K),"onUpdate:show":g[25]||(g[25]=ie=>Ms(K)?K.value=ie:null),loading:v(d)||v(re)||v(Q),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:v(C)?v(q)?v(e)("editSubMenuItem"):v(e)("editMenuItem"):v(q)?v(le).length?v(e)("createSubMenuItem"):v(e)("addSubMenuItem"):v(le).length?v(e)("createMenuItem"):v(e)("addMenuItem"),"positive-text":v(e)("validate"),"negative-text":v(e)("cancel"),onPositiveClick:b,onNegativeClick:g[26]||(g[26]=ie=>K.value=!1)},{default:ye(()=>[W(El,{ref_key:"formRef",ref:h,class:"mt-5",model:v(f),rules:v($e),"show-require-mark":!1,size:"medium"},{default:ye(()=>[W(Ft,{"show-label":!1,path:"title"},{default:ye(()=>[W(We,{modelValue:v(f).title,"onUpdate:modelValue":g[9]||(g[9]=ie=>v(f).title=ie),placeholder:v(e)("title"),class:"w-full",sync:""},{label:ye(()=>[Ql(nl(v(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),W(Ft,{"show-label":!1,path:"description"},{default:ye(()=>[W(We,{modelValue:v(f).description,"onUpdate:modelValue":g[10]||(g[10]=ie=>v(f).description=ie),placeholder:v(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:ye(()=>[Ql(nl(v(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),W(je,{"x-gap":"12",span:24},{default:ye(()=>[W(Rt,{span:5,label:v(e)("position"),path:"position"},{default:ye(()=>[W(cn,{value:v(f).position,"onUpdate:value":g[11]||(g[11]=ie=>v(f).position=ie),placeholder:v(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),W(Rt,{span:10,label:v(e)("publication"),path:"isActive"},{default:ye(()=>[W(cl,{value:v(f).isActive,"onUpdate:value":g[12]||(g[12]=ie=>v(f).isActive=ie),name:"isActive",class:"w-full"},{default:ye(()=>[W(ml,{value:!1,label:v(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),W(ml,{value:!0,label:v(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),W(Rt,{span:9,label:v(e)("visibility"),path:"isVisible"},{default:ye(()=>[W(cl,{value:v(f).isVisible,"onUpdate:value":g[13]||(g[13]=ie=>v(f).isVisible=ie),name:"isVisible",class:"w-full"},{default:ye(()=>[W(ml,{value:!1,label:v(e)("hidden"),class:"w-[50%]"},null,8,["label"]),W(ml,{value:!0,label:v(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),W(ke,{class:"!my-2"}),W(je,{"x-gap":"12",span:24},{default:ye(()=>[W(Rt,{span:10,label:v(e)("icon"),path:"icon"},{default:ye(()=>[W(Jt,{modelValue:v(f).icon,"onUpdate:modelValue":g[14]||(g[14]=ie=>v(f).icon=ie),placeholder:v(e)("icon"),"icons-list-placeholder":v(e)("enterIconNameInSearchBar"),"search-placeholder":v(e)("search"),"empty-text":v(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),W(Rt,{span:4,label:v(e)("color"),path:"color"},{default:ye(()=>[Ml("div",pm,[v(f).color?(fl(),pn(fa,{key:0},[W(v(Ge),{text:"",type:"error",style:{"font-size":"21px"},onClick:g[15]||(g[15]=ie=>v(f).color="")},{default:ye(()=>[W(v(ue),null,{default:ye(()=>[W(k,{icon:"carbon:trash-can"})]),_:1})]),_:1}),W(ke,{vertical:""})],64)):Da("",!0),W(Zt,{"pure-color":v(f).color,"onUpdate:pureColor":g[16]||(g[16]=ie=>v(f).color=ie),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:v(t)?"white":"black",lang:v(a)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),W(Rt,{span:10,label:v(e)("group"),path:"menuItemGroupId"},{default:ye(()=>[W(el,{value:v(f).menuItemGroupId,"onUpdate:value":g[17]||(g[17]=ie=>v(f).menuItemGroupId=ie),options:v(se),placeholder:v(e)("group"),"render-label":be,loading:v(T),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),W(Rt,{span:24,label:v(e)("targetType"),path:"targetType"},{default:ye(()=>[W(cl,{value:v(f).targetType,"onUpdate:value":g[18]||(g[18]=ie=>v(f).targetType=ie),class:"w-full",size:"small"},{default:ye(()=>[W(ml,{value:v(Kl).PAGE_LINK,class:"w-[33.33%]"},{default:ye(()=>[Ql(nl(v(e)("pageLink")),1)]),_:1},8,["value"]),W(ml,{value:v(Kl).CONTENT_LINK,class:"w-[33.33%]"},{default:ye(()=>[Ql(nl(v(e)("contentLink")),1)]),_:1},8,["value"]),W(ml,{value:v(Kl).EXTERNAL_LINK,class:"w-[33.33%]"},{default:ye(()=>[Ql(nl(v(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),W(H,{appear:"",name:"slide-fade"},{default:ye(()=>[v(f).targetType===v(Kl).PAGE_LINK?(fl(),pn("section",mm,[W(je,{"x-gap":"12",span:24},{default:ye(()=>[W(Rt,{span:12,label:v(e)("page"),path:"pageId"},{default:ye(()=>[W(el,{value:v(f).pageId,"onUpdate:value":g[19]||(g[19]=ie=>v(f).pageId=ie),options:v(c)||[],placeholder:v(e)("selectPage"),"render-label":P,loading:v(de),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),W(Rt,{span:12,label:v(e)("section"),path:"sectionId"},{default:ye(()=>[W(el,{value:v(f).sectionId,"onUpdate:value":g[20]||(g[20]=ie=>v(f).sectionId=ie),options:(v(c)||[]).find(ie=>ie.id===v(f).pageId)?.sections||[],placeholder:v(e)("selectSection"),"render-label":P,disabled:!v(f).pageId,loading:v(de),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),W(Ft,{label:v(e)("path"),path:"path"},{default:ye(()=>[W(v(Xt),{value:v(f).path,"onUpdate:value":g[21]||(g[21]=ie=>v(f).path=ie),placeholder:v(e)("path"),"allow-input":Ie,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):v(f).targetType===v(Kl).CONTENT_LINK?(fl(),pn("section",fm,[W(Rp,{"content-type":v(f).contentType,"onUpdate:contentType":g[22]||(g[22]=ie=>v(f).contentType=ie),"content-id":v(f).contentId,"onUpdate:contentId":g[23]||(g[23]=ie=>v(f).contentId=ie),onUpdate:_e},null,8,["content-type","content-id"])])):v(f).targetType===v(Kl).EXTERNAL_LINK?(fl(),pn("section",_m,[W(Ft,{label:v(e)("url"),path:"url"},{default:ye(()=>[W(v(Xt),{value:v(f).url,"onUpdate:value":g[24]||(g[24]=ie=>v(f).url=ie),placeholder:v(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):Da("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),gm=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu-locations"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/menu-locations",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},hm=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menu-locations"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/menu-locations/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},bm=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["menu-locations"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/menu-locations/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{useModel:km,defineComponent:wm}=await pe("vue"),{unref:Lt,resolveComponent:L1,createVNode:Kt,withCtx:al,toDisplayString:Fo,createTextVNode:Ns,renderList:xm,Fragment:Ei,openBlock:qo,createElementBlock:Ui,createElementVNode:wr,createBlock:xr,normalizeClass:$m,isRef:Cm}=await pe("vue"),{ref:Ts}=await pe("vue"),Im={class:"flex items-center justify-between"},Vm={class:"flex flex-col"},Sm={class:"text-sm font-bold"},Em=wm({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=xe(),{pickByTheme:a,tr:n,formatKey:o}=Je(),l=km(u,"show"),{data:t,isPending:c}=bc(),{mutate:de,isPending:Y}=gm(),{mutate:se,isPending:T}=hm(),{mutate:he,isPending:A}=bm(),M=Yl(),d=Ts(!1),F=Ts(null),re=Ts(null),r=Ts({name:"",description:""}),Q={name:[{required:!0,message:e("fillRequired")}]},L=I=>{F.value=ve.cloneDeep(I),r.value=ve.cloneDeep(I||{name:"",description:""}),d.value=!0},G=async()=>(re.value?.validate(async I=>{if(!I){const D={name:r.value.name,description:r.value.description};F.value?se({id:F.value.id,data:D},{onSuccess:()=>{d.value=!1}}):de(D,{onSuccess:()=>{d.value=!1}})}}),!1),$=async I=>{M.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{I.id&&he({id:I.id})}})};return(I,D)=>{const le=we,B=ue,me=Ge,y=Sl,O=er,w=gl,_=$n,Z=Cn,U=bo,q=Bl,K=Xt,E=nn,C=sn,h=ln;return qo(),Ui(Ei,null,[Kt(q,{show:l.value,"onUpdate:show":D[2]||(D[2]=f=>l.value=f),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Lt(e)("menuLocations")},{"header-extra":al(()=>[Kt(y,{align:"center"},{default:al(()=>[Kt(me,{secondary:"",size:"small",type:"primary",disabled:Lt(c),onClick:D[0]||(D[0]=f=>L(null))},{default:al(()=>[Kt(B,{class:"mr-1"},{default:al(()=>[Kt(le,{icon:"carbon:add-alt"})]),_:1}),Ns(" "+Fo(Lt(e)("add")),1)]),_:1},8,["disabled"]),Kt(me,{secondary:"",size:"small",type:"error",disabled:Lt(c),onClick:D[1]||(D[1]=f=>l.value=!1)},{default:al(()=>[Kt(B,{class:"mr-1"},{default:al(()=>[Kt(le,{icon:"carbon:close"})]),_:1}),Ns(" "+Fo(Lt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:al(()=>[Kt(U,{show:Lt(c)},{default:al(()=>[Lt(t)?.length?(qo(),xr(_,{key:0,style:{"max-height":"400px"}},{default:al(()=>[(qo(!0),Ui(Ei,null,xm(Lt(t),f=>(qo(),xr(w,{key:f.id,embedded:"",size:"small",class:"mb-2"},{default:al(()=>[wr("div",Im,[wr("div",Vm,[wr("span",Sm,Fo(f.name),1),Kt(O,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:al(()=>[Ns(Fo(Lt(n)(f.description)),1)]),_:2},1024)]),Kt(y,null,{default:al(()=>[Kt(me,{size:"small",type:"warning",secondary:"",onClick:$e=>L(f)},{default:al(()=>[Kt(B,null,{default:al(()=>[Kt(le,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),Kt(me,{size:"small",type:"error",secondary:"",onClick:$e=>$(f)},{default:al(()=>[Kt(B,null,{default:al(()=>[Kt(le,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(qo(),xr(w,{key:1,size:"large",class:$m(`mb-2 !border-dashed !border-2 ${Lt(a)("!border-zinc-300","!border-zinc-600")}`)},{default:al(()=>[Kt(Z,{description:Lt(e)("noMenuLocationAdded")},{icon:al(()=>[Kt(B,null,{default:al(()=>[Kt(le,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Kt(q,{show:Lt(d),"onUpdate:show":D[5]||(D[5]=f=>Cm(d)?d.value=f:null),loading:Lt(Y)||Lt(T)||Lt(A),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Lt(F)?Lt(e)("editMenuLocation"):Lt(e)("addMenuLocation"),"positive-text":Lt(e)("validate"),"negative-text":Lt(e)("cancel"),onPositiveClick:G,onNegativeClick:D[6]||(D[6]=f=>d.value=!1)},{default:al(()=>[Kt(h,{ref_key:"formRef",ref:re,model:Lt(r),rules:Q,"show-require-mark":!1,size:"medium",class:"my-5"},{default:al(()=>[Kt(E,{label:Lt(e)("key"),path:"name"},{default:al(()=>[Kt(K,{value:Lt(r).name,placeholder:Lt(e)("key"),class:"w-full","onUpdate:value":D[3]||(D[3]=f=>Lt(r).name=Lt(o)(f))},null,8,["value","placeholder"])]),_:1},8,["label"]),Kt(E,{"show-label":!1,path:"description"},{default:al(()=>[Kt(C,{modelValue:Lt(r).description,"onUpdate:modelValue":D[4]||(D[4]=f=>Lt(r).description=f),placeholder:Lt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:al(()=>[Ns(Fo(Lt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Um=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menus"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/menus",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Mm=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["menus"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/menus/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Nm=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["menus"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/menus/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{defineComponent:Tm}=await pe("vue"),{unref:Re,resolveComponent:B1,createVNode:bt,withCtx:kt,toDisplayString:Fn,createTextVNode:_a,openBlock:En,createBlock:ao,createCommentVNode:zs,renderList:zm,Fragment:$r,createElementBlock:Ro,withModifiers:Cr,normalizeClass:Ir,createElementVNode:jo,isRef:Ds}=await pe("vue"),Dm={key:2},Am={class:"flex items-center"},Pm={class:"flex flex-col"},Lm={key:0,class:"text-xs font-normal"},Bm={class:"mt-4"},{ref:la,watch:Om}=await pe("vue"),{defineStore:Fm}=await pe("pinia"),qm=Tm({__name:"index",setup(u){const{t:e}=xe(),{tr:a,pickByTheme:n,isInDevMode:o,formatKey:l}=Je(),{data:t}=bc(),{data:c}=Hc(),{mutate:de,isPending:Y}=Nm(),{mutate:se,isPending:T}=Um(),{mutate:he,isPending:A}=Mm(),M=Yl(),d=la(12),F=la(1),re=w=>{d.value=w},r={name:"",title:"",description:"",menuLocationId:void 0},Q=la(!1),L=la(!1),G=la(!1),$=la(null),I=la(r),D={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},le=la(null),B=w=>{le.value=ve.cloneDeep(w),I.value=ve.cloneDeep(w||r),Q.value=!0},me=async()=>($.value?.validate(async w=>{if(!w){const _={name:I.value.name,title:I.value.title,description:I.value.description,menuLocationId:I.value.menuLocationId};le.value?he({id:le.value.id,..._},{onSuccess:()=>{}}):se(_,{onSuccess:()=>{}}),Q.value=!1}}),!1),y=async w=>{M.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{w.id&&de({id:w.id})}})},O=Fm("menus-management",()=>({itemsMenu:la(null)}))();return Om(()=>I.value.title,w=>{le.value||I.value.name.length<=21&&(I.value.name=zc(a(w),{trim:!0,lower:!0,strict:!0}))}),(w,_)=>{const Z=we,U=ue,q=Ge,K=Sl,E=zn,C=Pn,h=gl,f=ko,$e=Cn,fe=Dn,x=sn,i=nn,b=Xt,ae=Ia,P=In,be=rn,Ie=ln,ge=Bl;return En(),Ro($r,null,[Re(O).itemsMenu?zs("",!0):(En(),ao(E,{key:0,to:"#alt-action"},{default:kt(()=>[bt(K,{align:"center"},{default:kt(()=>[Re(o)?(En(),ao(q,{key:0,type:"success",secondary:"",onClick:_[0]||(_[0]=_e=>L.value=!0)},{icon:kt(()=>[bt(U,{size:"18"},{default:kt(()=>[bt(Z,{icon:"carbon:template"})]),_:1})]),default:kt(()=>[_a(" "+Fn(Re(e)("locations")),1)]),_:1})):zs("",!0),bt(q,{type:"warning",secondary:"",onClick:_[1]||(_[1]=_e=>G.value=!0)},{icon:kt(()=>[bt(U,{size:"18"},{default:kt(()=>[bt(Z,{icon:"carbon:tag-group"})]),_:1})]),default:kt(()=>[_a(" "+Fn(Re(e)("groups")),1)]),_:1}),Re(c)&&Re(c).length?(En(),ao(q,{key:1,type:"primary",secondary:"",onClick:_[2]||(_[2]=_e=>B(null))},{icon:kt(()=>[bt(U,{size:"18"},{default:kt(()=>[bt(Z,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[_a(" "+Fn(Re(e)("addMenu")),1)]),_:1})):zs("",!0)]),_:1})]),_:1})),Re(O).itemsMenu?(En(),ao(ym,{key:1,modelValue:Re(O).itemsMenu,"onUpdate:modelValue":_[3]||(_[3]=_e=>Re(O).itemsMenu=_e)},null,8,["modelValue"])):(En(),Ro("section",Dm,[bt(fe,{appear:"",name:"slide-fade"},{default:kt(()=>[jo("section",null,[Re(c)&&Re(c).length?(En(),Ro($r,{key:0},[(En(!0),Ro($r,null,zm(Re(c).slice((Re(F)-1)*Re(d),Re(F)*Re(d)),_e=>(En(),ao(h,{key:_e.id,embedded:"",size:"small",class:"mb-2"},{header:kt(()=>[jo("div",Am,[bt(K,null,{default:kt(()=>[bt(q,{size:"small",type:"primary",secondary:"",onClick:Cr(ne=>B(_e),["stop"])},{default:kt(()=>[bt(U,null,{default:kt(()=>[bt(Z,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),bt(q,{size:"small",type:"error",secondary:"",onClick:Cr(ne=>y(_e),["stop"])},{default:kt(()=>[bt(U,null,{default:kt(()=>[bt(Z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),bt(C,{vertical:"",class:Ir(Re(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),jo("div",Pm,[jo("span",{class:Ir(`${_e.location?"text-sm":"text-base"} font-bold`)},Fn(Re(a)(_e.title)),3),_e.location?(En(),Ro("small",Lm,Fn(_e.location?.name),1)):zs("",!0)])])]),"header-extra":kt(()=>[bt(q,{size:"small",type:"primary",secondary:"",onClick:Cr(ne=>Re(O).itemsMenu=_e,["stop"])},{icon:kt(()=>[bt(U,null,{default:kt(()=>[bt(Z,{icon:"carbon:arrow-right"})]),_:1})]),default:kt(()=>[_a(" "+Fn(Re(e)("open")),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),bt(f,{page:Re(F),"onUpdate:page":_[4]||(_[4]=_e=>Ds(F)?F.value=_e:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Re(d),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(Re(c).length/Re(d)),"onUpdate:pageSize":re},{prefix:kt(()=>[_a(Fn(`${Re(c).length} ${Re(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(En(),ao(h,{key:1,size:"large",class:Ir(`mb-2 !border-dashed !border-2 ${Re(n)("!border-zinc-300","!border-zinc-600")}`)},{default:kt(()=>[bt($e,{description:Re(e)("noMenuAvailable")},{icon:kt(()=>[bt(U,null,{default:kt(()=>[bt(Z,{icon:"carbon:model-alt"})]),_:1})]),extra:kt(()=>[jo("div",Bm,[bt(q,{size:"small",onClick:_[5]||(_[5]=_e=>B(null))},{icon:kt(()=>[bt(U,null,{default:kt(()=>[bt(Z,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[_a(" "+Fn(Re(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),bt(ge,{show:Re(Q),"onUpdate:show":_[10]||(_[10]=_e=>Ds(Q)?Q.value=_e:null),loading:Re(T)||Re(A)||Re(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Re(le)?Re(e)("editMenu"):Re(e)("addMenu"),"positive-text":Re(e)("validate"),"negative-text":Re(e)("cancel"),onPositiveClick:me,onNegativeClick:_[11]||(_[11]=_e=>Q.value=!1)},{default:kt(()=>[bt(Ie,{ref_key:"formRef",ref:$,model:Re(I),rules:D,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kt(()=>[bt(i,{"show-label":!1,path:"title"},{default:kt(()=>[bt(x,{modelValue:Re(I).title,"onUpdate:modelValue":_[6]||(_[6]=_e=>Re(I).title=_e),placeholder:Re(e)("title"),class:"w-full",sync:""},{label:kt(()=>[_a(Fn(Re(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),bt(i,{"show-label":!1,path:"description"},{default:kt(()=>[bt(x,{modelValue:Re(I).description,"onUpdate:modelValue":_[7]||(_[7]=_e=>Re(I).description=_e),placeholder:Re(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kt(()=>[_a(Fn(Re(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),bt(be,{"x-gap":"12",span:24},{default:kt(()=>[bt(ae,{span:12,label:Re(e)("key"),path:"name"},{default:kt(()=>[bt(b,{value:Re(I).name,placeholder:Re(e)("key"),class:"w-full","onUpdate:value":_[8]||(_[8]=_e=>Re(I).name=Re(l)(_e))},null,8,["value","placeholder"])]),_:1},8,["label"]),bt(ae,{span:12,label:Re(e)("location"),path:"menuLocationId"},{default:kt(()=>[bt(P,{value:Re(I).menuLocationId,"onUpdate:value":_[9]||(_[9]=_e=>Re(I).menuLocationId=_e),options:Re(t),placeholder:Re(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),bt(Em,{show:Re(L),"onUpdate:show":_[12]||(_[12]=_e=>Ds(L)?L.value=_e:null)},null,8,["show"]),bt(Ap,{show:Re(G),"onUpdate:show":_[13]||(_[13]=_e=>Ds(G)?G.value=_e:null)},null,8,["show"])]))],64)}}}),Rm="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var $a=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))($a||{}),xn=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(xn||{});const jm=()=>{const{t:u}=xe(),e=[{label:u("horizontal"),value:$a.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:$a.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(l=>l.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(l=>l.value===o)?.label,videoDisplayTypes:e}};class Km{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;constructor(e,a,n=xn.SELF_HOSTED,o=$a.HORIZONTAL,l,t,c,de,Y,se,T,he,A,M,d,F){this.id=t,this.foreignId=se,this.publisherId=Y,this.title=e,this.slug=de,this.description=T,this.thumbnail=he,this.thumbnailUrl=A,this.path=a,this.url=c,this.source=n,this.visible=l,this.displayType=o,this.publishedAt=M,this.createdAt=d,this.updatedAt=F}}const Gm=()=>{const{request:u}=Be(),{t:e}=xe(),a=Xe(),n=Fe();return Qn(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>a.start(),onSettled:()=>a.finish(),onSuccess:()=>n.success(e("success")),onError:()=>n.error(e("unableToUpdateChannelVideos")),retry:1})},Ym=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Xe(),l=Fe();return dt({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:t=>"id"in t&&t.id?t.id:`temp-${crypto.randomUUID()}`,mutationFn:async t=>{o.start();try{const c=await a({method:"post",url:"/video-items",data:Yt(t,["id"])});if(!c.success)throw new Error(c.error||n("anErrorOccurred"));return c.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:t=>{switch(t?.response?.data?.errorCode){case Et.FORM_INVALID_DATA:e(t?.response?.data?.data);break;case Et.REQUEST_PARAMS_MISSING:l.error(n("pleaseProvideApiKeyAndValidVideoUrl"));break;case Et.REQUEST_DATA_RETRIEVAL_FAILED:l.error(n("videoDataCantBeRetrieve"));break;case Et.REQUEST_DATA_ALREADY_EXISTS:l.error(n("videoAlreadyExists"));break;default:l.error(n("anErrorOccurred"))}},...u}})},Hm=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{n.start();try{const t=await e({method:"put",url:`/video-items/${l.id}`,data:Yt(l,["id"])});if(!t.success)throw new Error(t.error||a("anErrorOccurred"));return t.result.data}finally{n.finish()}},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},Wm=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{n.start();const t=await e({method:"delete",url:`/video-items/force/${l}`});if(n.finish(),!t.success)throw new Error(t.error);return t.result?.data},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},Qm=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:l=>{if(l instanceof Km){if(typeof l.id!="string"&&typeof l.id!="number")throw new Error("VideoItem ID must be string or number");return l.id}return`temp-${crypto.randomUUID()}`},getBatchData:l=>({type:"remove",ids:Object.keys(l).filter(t=>l[t])}),mutationFn:async l=>{n.start();const t=Object.keys(l).filter(c=>l[c]);try{for(const c of t)await e({method:"delete",url:`/video-items/force/${c}`});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},Xm=(u,e,a)=>Wc(["video-items"],u,o=>{const l=new URLSearchParams;return Object.entries(o).forEach(([t,c])=>{c!==void 0&&l.set(t,String(c))}),`/video-items?${l.toString()}`},{keepPreviousData:!0,staleTime:5e3,...e}),Jm=(u,e)=>go(["video-settings"],async()=>{const{request:a}=Be(),n=await a({url:"/video-settings"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u}),Zm=()=>{const{request:u}=Be(),{t:e}=xe(),a=Xe(),n=Fe();return Qn(async o=>{const l=await u({url:"/video-settings",method:"put",data:o});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>a.start(),onSettled:()=>a.finish(),onSuccess:(o,l)=>{n.success(e("success"))},onError:(o,l)=>{n.error(e("unableToUpdateSettings"))}})},{unref:ef}=await pe("vue"),{defineComponent:tf}=await pe("vue"),{unref:V,resolveComponent:O1,createVNode:J,withCtx:ce,toDisplayString:Gt,createTextVNode:$l,openBlock:bl,createBlock:va,createCommentVNode:Ko,isRef:Pa,createElementBlock:mn,createSlots:lf,createElementVNode:Jl,normalizeClass:nf,Fragment:Go,renderList:af,normalizeStyle:Mi}=await pe("vue"),of={key:1,class:"flex items-center gap-3"},sf={key:0,class:"w-full flex items-center justify-between mt-4"},rf={class:"flex items-center gap-3"},cf={key:1,class:"mt-4"},df={key:0},uf={class:"flex items-center justify-center h-full"},pf={class:"text-center text-dimgray text-sm"},mf={key:1,class:"flex items-center justify-center"},ff={class:"mt-5"},_f={class:"w-full flex flex-gap-8 items-center justify-start"},vf=["src"],yf={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},gf=["src"],{inject:hf,ref:_l,computed:Yo,watch:bf}=await pe("vue"),{defineStore:kf}=await pe("pinia"),wf=tf({__name:"index",setup(u){const{t:e,locale:a}=xe(),{tr:n,fileUrl:o,pickByTheme:l,getVideoThumbnail:t}=Je(),{videoDisplayTypes:c}=jm(),{mutate:de,isPending:Y}=Wm(),{mutate:se,isPending:T}=Qm(),{mutate:he,isPending:A}=Ym(),{mutate:M,isPending:d}=Hm(),F=Fe(),re=Yl(),r=hf("appConfig"),Q=_l(""),L=fd(Q,500),G=_l(null),$=_l([]),I=kf("videos-management-store",()=>({currentTab:_l("all")}))(),D=_l(0),le=_l(6),B=_l(1),me=Yo(()=>({pageSize:le.value,query:L.value,source:I.currentTab,page:B.value})),y=H=>{B.value=H,_()},O=H=>{le.value=H,_()},{data:w,refetch:_,isPending:Z}=Xm(me);bf(()=>w.value,H=>{$.value=H?.videoItems||[],D.value=H?.meta?.total||0,B.value=H?.meta?.currentPage||1},{deep:!0,immediate:!0});const U=_l(!1),q=_l(null),K=_l(null),E=_l({title:"",description:"",visible:!0,source:xn.SELF_HOSTED,displayType:$a.HORIZONTAL,thumbnail:"",path:""}),C=Yo(()=>({title:[{required:E.value.source==xn.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),h=H=>{q.value=ve.cloneDeep(H),H?E.value=ve.cloneDeep(H):E.value={title:"",description:"",visible:!0,source:xn.SELF_HOSTED,displayType:$a.HORIZONTAL,thumbnail:"",path:""},U.value=!0},f=async H=>{re.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{de(H)}})},$e=async()=>(K.value?.validate(async H=>{if(!H){const N={title:E.value.title,description:E.value.description,visible:E.value.visible,source:E.value.source,displayType:E.value.displayType,thumbnail:E.value.thumbnail,path:E.value.path};q.value?(N.id=q.value.id,M(N)):he(N),U.value=!1}}),!1),fe=_l(!1),x=_l(!1),i=_l(""),b=_l(""),ae=_l("classic"),P=_l(!1),be=Jm({enabled:!1}),{mutate:Ie,isPending:ge}=Zm(),{mutate:_e,isPending:ne}=Gm(),g=_l({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),k=_l(g.value),ee=Yo(()=>ve.isEqual(g.value,k.value)),z=async()=>{Ie(g.value,{onSuccess:()=>Se()})},Se=async()=>{await be.refetch(),be.data.value?.forEach(H=>{g.value[H.key]!=null&&(g.value[H.key]=H.value)}),k.value=ve.cloneDeep(g.value)};Se();const Ye=()=>{_e(void 0,{onSuccess:()=>Se()})},ke=_l(!1),S=_l(Gl()),st=_l({}),De=Yo(()=>{let H=0;for(const N in st.value)st.value[N]&&H++;return H});function ft(){st.value={},_()}const _t=async()=>(De.value?re.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[De.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{se(st.value,{onSuccess:()=>{st.value={}}})}}):F.warning(e("noItemSelected")),!1),R=Yo(()=>!!(A.value||d.value||Y.value||T.value||ge.value||ne.value||be.isPending.value));return(H,N)=>{const ot=we,We=ue,Ft=Ge,cn=Va,Rt=zn,ml=Cc,cl=Xt,je=Js,Jt=ei,Zt=Sl,el=gl,El=Xn,ie=$c,Ve=rn,Hl=md,tr=er,Ea=An,lr=Dn,fs=ko,nr=bo,ar=Cn,Ua=nn,Ln=Ia,s=In,_s=sn,X=vo,Ol=ln,ai=Bl,oi=Ga;return bl(),mn(Go,null,[J(Rt,{to:"#alt-action"},{default:ce(()=>[V(I).currentTab=="settings"?(bl(),va(Ft,{key:0,loading:V(R),disabled:V(ee),type:"primary",secondary:"",onClick:z},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:save"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(bl(),mn("div",of,[J(cn,{checked:V(ke),"onUpdate:checked":[N[0]||(N[0]=qe=>Pa(ke)?ke.value=qe:null),N[1]||(N[1]=qe=>{for(const vs of V($))vs.id&&(V(st)[vs.id]=qe);S.value=("uuidv4"in H?H.uuidv4:ef(Gl))()})]},{default:ce(()=>[$l(Gt(V(e)("selectAll")),1)]),_:1},8,["checked"]),J(Ft,{type:"primary",secondary:"",onClick:N[2]||(N[2]=qe=>h(null))},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:video-add"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("addVideo")),1)]),_:1})]))]),_:1}),J(Jt,{value:V(I).currentTab,"onUpdate:value":[N[6]||(N[6]=qe=>V(I).currentTab=qe),N[7]||(N[7]=()=>V(_)())],type:"card",size:"medium"},lf({default:ce(()=>[J(ml,{name:"all"},{default:ce(()=>[J(We,{size:"18",class:"mr-1"},{default:ce(()=>[J(ot,{icon:"carbon:collapse-all"})]),_:1}),$l(" "+Gt(V(e)("all_")),1)]),_:1}),J(ml,{name:V(xn).SELF_HOSTED},{default:ce(()=>[J(We,{size:"18",class:"mr-1"},{default:ce(()=>[J(ot,{icon:"carbon:document-video"})]),_:1}),$l(" "+Gt(V(e)("selfHosted")),1)]),_:1},8,["name"]),J(ml,{name:V(xn).YOUTUBE},{default:ce(()=>[J(We,{size:"18",class:"mr-1"},{default:ce(()=>[J(ot,{icon:"carbon:logo-youtube"})]),_:1}),$l(" "+Gt(V(e)("youtube")),1)]),_:1},8,["name"]),J(ml,{name:"settings"},{default:ce(()=>[J(We,{size:"18",class:"mr-1"},{default:ce(()=>[J(ot,{icon:"carbon:settings-adjust"})]),_:1}),$l(" "+Gt(V(e)("settings")),1)]),_:1})]),_:2},[V(I).currentTab!="settings"?{name:"suffix",fn:ce(()=>[J(je,{class:"!w-[250px]"},{default:ce(()=>[J(cl,{ref_key:"searchInputRef",ref:G,value:V(Q),"onUpdate:value":[N[3]||(N[3]=qe=>Pa(Q)?Q.value=qe:null),N[4]||(N[4]=qe=>{qe||V(_)()})],clearable:!0,placeholder:V(e)("searchVideo")},null,8,["value","placeholder"]),J(Ft,{type:"primary",secondary:"",onClick:N[5]||(N[5]=qe=>V(_)())},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),V(De)>0?(bl(),mn("section",sf,[Jl("span",null,Gt(V(e)("nbItemsSelected",[V(De)])),1),Jl("section",rf,[J(Ft,{type:"error",size:"small",secondary:"",onClick:_t},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:trash-can"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("delete")),1)]),_:1}),J(Ft,{type:"warning",size:"small",secondary:"",onClick:ft},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:close"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("cancelSelection")),1)]),_:1})])])):Ko("",!0),V(I).currentTab=="settings"?(bl(),mn("section",cf,[J(el,{hoverable:"",embedded:""},{header:ce(()=>[$l(Gt(V(e)("youtube")),1)]),default:ce(()=>[J(Ve,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ce(()=>[J(El,null,{default:ce(()=>[J(el,{class:"w-full h-full",size:"small"},{default:ce(()=>[J(Zt,{align:"center",justify:"space-between"},{default:ce(()=>[Jl("span",null,Gt(V(e)("apiKey")),1),J(cl,{value:V(g).youtubeApiKey,"onUpdate:value":N[8]||(N[8]=qe=>V(g).youtubeApiKey=qe),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),J(El,null,{default:ce(()=>[J(el,{class:"w-full h-full py-1.5",size:"small"},{default:ce(()=>[J(Zt,{align:"center",justify:"space-between"},{default:ce(()=>[Jl("span",null,Gt(V(e)("autoUpdateChannelVideos")),1),J(ie,{value:V(g).youtubeChannelVideosAutoUpdate,"onUpdate:value":N[9]||(N[9]=qe=>V(g).youtubeChannelVideosAutoUpdate=qe),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ce(()=>N[29]||(N[29]=[Jl("div",{class:"w-6"},null,-1)])),unchecked:ce(()=>N[30]||(N[30]=[Jl("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),V(g).youtubeChannelVideosAutoUpdate=="1"?(bl(),mn(Go,{key:0},[J(El,null,{default:ce(()=>[J(el,{class:"w-full h-full",size:"small"},{default:ce(()=>[J(Zt,{align:"center",justify:"space-between"},{default:ce(()=>[Jl("span",null,Gt(V(e)("channelId")),1),J(cl,{value:V(g).youtubeChannelId,"onUpdate:value":N[10]||(N[10]=qe=>V(g).youtubeChannelId=qe),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),J(El,null,{default:ce(()=>[J(el,{class:"w-full h-full",size:"small"},{default:ce(()=>[J(Zt,{align:"center",justify:"space-between"},{default:ce(()=>[Jl("span",null,Gt(V(e)("lastUpdate")),1),Jl("b",null,Gt(V(g).youtubeLastChannelVideosUpdate?V(pa)(V(g).youtubeLastChannelVideosUpdate,{locale:V(a),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):V(e)("never")),1),J(Ft,{strong:"",circle:"",secondary:"",type:"primary",title:V(e)("refresh"),disabled:V(R),onClick:Ye},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:restart",class:nf({"animate-spin":V(R)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):Ko("",!0)]),_:1})]),_:1})])):(bl(),va(el,{key:2,embedded:"",class:"py-10 mt-4"},{default:ce(()=>[V($).length&&!V(be).isPending.value?(bl(),mn("section",df,[J(Ve,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:ce(()=>[(bl(!0),mn(Go,null,af(V($),(qe,vs)=>(bl(),va(El,{key:vs},{default:ce(()=>[J(lr,{name:"slide-fade",appear:""},{default:ce(()=>[J(el,{bordered:"",hoverable:""},{cover:ce(()=>[Jl("div",uf,[J(Hl,{load:()=>V(t)(qe.path),fallback:qe.thumbnailUrl??V(Rm),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"])])]),header:ce(()=>[Jl("div",pf,[J(tr,{"line-clamp":1,"expand-trigger":"click"},{default:ce(()=>[qe.id?(bl(),va(cn,{key:V(S),checked:V(st)[qe.id],"onUpdate:checked":or=>V(st)[qe.id]=or,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Ko("",!0),$l(" "+Gt(V(n)(qe.title)),1)]),_:2},1024)])]),action:ce(()=>[J(Zt,{justify:"space-between",align:"center"},{default:ce(()=>[J(Zt,null,{default:ce(()=>[J(Ea,{bordered:!1,type:qe.visible?"success":"error"},{default:ce(()=>[$l(Gt(qe.visible?V(e)("visible"):V(e)("hidden")),1)]),_:2},1032,["type"]),J(Ea,{bordered:!1,type:qe.displayType==V($a).HORIZONTAL?"info":"warning"},{default:ce(()=>[$l(Gt(qe.displayType==V($a).HORIZONTAL?V(e)("horizontal"):V(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),J(Zt,null,{default:ce(()=>[J(Ft,{ternary:"",circle:"",title:V(e)("play"),onClick:()=>{i.value=V(e)("video"),b.value=V(o)(qe.path),ae.value=qe.source==V(xn).YOUTUBE?"youtube":"classic",x.value=!0}},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),qe.source!=V(xn).YOUTUBE?(bl(),va(Ft,{key:0,ternary:"",circle:"",title:V(e)("edit"),onClick:or=>h(qe)},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):Ko("",!0),J(Ft,{ternary:"",circle:"",title:V(e)("delete"),onClick:or=>f(qe)},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),J(fs,{page:V(B),"onUpdate:page":[N[11]||(N[11]=qe=>Pa(B)?B.value=qe:null),y],class:"mt-10 justify-center","show-size-picker":"","page-size":V(le),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(V(D)/V(le)),"onUpdate:pageSize":O},{prefix:ce(()=>[$l(Gt(`${V(D)} ${V(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):V(be).isPending.value?(bl(),mn("section",mf,[J(nr,{size:"medium"})])):(bl(),va(ar,{key:2,description:V(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),J(ai,{show:V(U),"onUpdate:show":N[22]||(N[22]=qe=>Pa(U)?U.value=qe:null),loading:V(Z),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:V(q)?V(e)("editVideo"):V(e)("addVideo"),"positive-text":V(e)("validate"),"negative-text":V(e)("cancel"),onPositiveClick:$e,onNegativeClick:N[23]||(N[23]=qe=>U.value=!1)},{default:ce(()=>[Jl("div",ff,[J(Ol,{ref_key:"formRef",ref:K,model:V(E),rules:V(C),"show-require-mark":!1,size:"medium"},{default:ce(()=>[J(Ua,{label:V(e)("source"),path:"source"},{default:ce(()=>[J(cn,{checked:V(E).source,"onUpdate:checked":N[12]||(N[12]=qe=>V(E).source=qe),"checked-value":V(xn).YOUTUBE,"unchecked-value":V(xn).SELF_HOSTED},{default:ce(()=>[$l(Gt(V(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),V(E).source==V(xn).YOUTUBE?(bl(),va(Ve,{key:0,"x-gap":"12",span:24},{default:ce(()=>[J(Ln,{span:16,label:V(e)("videoShareLink"),path:"path"},{default:ce(()=>[J(cl,{value:V(E).path,"onUpdate:value":N[13]||(N[13]=qe=>V(E).path=qe),placeholder:V(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),J(Ln,{span:8,label:V(e)("displayType"),path:"displayType"},{default:ce(()=>[J(s,{value:V(E).displayType,"onUpdate:value":N[14]||(N[14]=qe=>V(E).displayType=qe),placeholder:V(e)("displayType"),options:V(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(bl(),mn(Go,{key:1},[J(Ua,{"show-label":!1,path:"title"},{default:ce(()=>[J(_s,{modelValue:V(E).title,"onUpdate:modelValue":N[15]||(N[15]=qe=>V(E).title=qe),placeholder:V(e)("title"),class:"w-full",sync:""},{label:ce(()=>[$l(Gt(V(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(Ua,{"show-label":!1,path:"description"},{default:ce(()=>[J(_s,{modelValue:V(E).description,"onUpdate:modelValue":N[16]||(N[16]=qe=>V(E).description=qe),placeholder:V(e)("description"),class:"w-full",type:"textarea",sync:""},{label:ce(()=>[$l(Gt(V(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(Ve,{"x-gap":"12",span:24},{default:ce(()=>[J(Ln,{span:16,label:V(e)("content"),path:"path"},{default:ce(()=>[J(je,null,{default:ce(()=>[J(Ft,{type:"primary",secondary:"",onClick:N[17]||(N[17]=()=>{fe.value=!0})},{default:ce(()=>[$l(Gt(V(e)("select")),1)]),_:1}),J(cl,{value:V(E).path?V(fo)(V(E).path):"",placeholder:V(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),V(E).path?(bl(),mn(Go,{key:0},[J(Ft,{type:"primary",ghost:"",onClick:N[18]||(N[18]=()=>{i.value=V(e)("video"),b.value=V(o)(V(E).path),ae.value="classic",x.value=!0})},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:play"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("play")),1)]),_:1}),J(Ft,{type:"primary",ghost:"",onClick:N[19]||(N[19]=()=>{V(E).path=""})},{icon:ce(()=>[J(We,null,{default:ce(()=>[J(ot,{icon:"carbon:trash-can"})]),_:1})]),default:ce(()=>[$l(" "+Gt(V(e)("clear")),1)]),_:1})],64)):Ko("",!0)]),_:1})]),_:1},8,["label"]),J(Ln,{span:8,label:V(e)("displayType"),path:"displayType"},{default:ce(()=>[J(s,{value:V(E).displayType,"onUpdate:value":N[20]||(N[20]=qe=>V(E).displayType=qe),placeholder:V(e)("displayType"),options:V(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),J(Ua,{label:V(e)("thumbnail"),path:"thumbnail"},{default:ce(()=>[Jl("div",_f,[Jl("div",{class:"cursor-pointer w-full h-[150px]",onClick:N[21]||(N[21]=()=>{P.value=!0})},[V(E).thumbnail?(bl(),va(X,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Mi("border: 1px dashed "+V(l)("green","white")),src:V(o)(V(E).thumbnail||"")},null,8,["style","src"])):(bl(),mn("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Mi("border: 1px dashed "+V(l)("green","white"))},[J(We,{size:64},{default:ce(()=>[J(ot,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),J(ai,{show:V(x),"onUpdate:show":N[24]||(N[24]=qe=>Pa(x)?x.value=qe:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:V(i)},{default:ce(()=>[V(ae)==="youtube"?(bl(),mn("iframe",{key:0,width:"100%",height:"380",src:V(b),frameborder:"0",allowfullscreen:""},null,8,vf)):(bl(),mn("video",yf,[Jl("source",{src:V(b)},null,8,gf)]))]),_:1},8,["show","title"]),J(oi,{show:V(fe),"onUpdate:show":N[25]||(N[25]=qe=>Pa(fe)?fe.value=qe:null),title:V(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:V(r)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:N[26]||(N[26]=qe=>{V(E).path=qe,fe.value=!1})},null,8,["show","title","upload-config"]),J(oi,{show:V(P),"onUpdate:show":N[27]||(N[27]=qe=>Pa(P)?P.value=qe:null),title:V(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:V(r)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:N[28]||(N[28]=qe=>{V(E).thumbnail=qe,P.value=!1})},null,8,["show","title","upload-config"])],64)}}}),xf=Sa(wf,[["__scopeId","data-v-1480f5d7"]]),{t:Oe}=Jr.global,Ni=[{key:"maxlength",defaultValue:"",placeholder:Oe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Oe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],$f={text:Ni,textarea:Ni,number:[{key:"min",defaultValue:"",placeholder:Oe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Oe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Oe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Oe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Oe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Oe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Oe("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"format",defaultValue:"",placeholder:Oe("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"format",defaultValue:"",placeholder:Oe("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"format",defaultValue:"",placeholder:Oe("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"format",defaultValue:"",placeholder:Oe("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Oe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Oe("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Oe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Oe("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Oe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Oe("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"library",defaultValue:"all",placeholder:Oe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Oe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Oe("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Oe("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Oe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Oe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Oe("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Oe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Oe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Oe("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Oe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Oe("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Oe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Oe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Oe("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Oe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Oe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Oe("sliderStep"),isNumber:!0}]},{t:Qe}=Jr.global,Vr=[{type:"group",label:Qe("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Qe("text"),value:"text"},{label:Qe("i18nText"),value:"i18n-text"},{label:Qe("textarea"),value:"textarea"},{label:Qe("i18nTextarea"),value:"i18n-textarea"},{label:Qe("editor"),value:"editor"},{label:Qe("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Qe("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Qe("number"),value:"number"},{label:Qe("checkbox"),value:"checkbox"},{label:Qe("switch"),value:"switch"},{label:Qe("slider"),value:"slider"},{label:Qe("rangeSlider"),value:"range-slider"}]},{type:"group",label:Qe("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Qe("singleSelect"),value:"single-select"},{label:Qe("multiSelect"),value:"multi-select"}]},{type:"group",label:Qe("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Qe("date"),value:"date"},{label:Qe("daterange"),value:"daterange"},{label:Qe("datetime"),value:"datetime"},{label:Qe("datetimerange"),value:"datetimerange"},{label:Qe("year"),value:"year"},{label:Qe("yearrange"),value:"yearrange"},{label:Qe("month"),value:"month"},{label:Qe("monthrange"),value:"monthrange"},{label:Qe("quarter"),value:"quarter"},{label:Qe("quarterrange"),value:"quarterrange"},{label:Qe("week"),value:"week"}]},{type:"group",label:Qe("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Qe("image"),value:"image"},{label:Qe("gallery"),value:"gallery"},{label:Qe("audio"),value:"audio"},{label:Qe("video"),value:"video"},{label:Qe("document"),value:"document"},{label:Qe("file"),value:"file"}]},{type:"group",label:Qe("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Qe("newsArticle"),value:"news-article"},{label:Qe("newsArticles"),value:"news-articles"},{label:Qe("newsCategory"),value:"news-category"},{label:Qe("newsCategories"),value:"news-categories"},{label:Qe("newsTag"),value:"news-tag"},{label:Qe("newsTags"),value:"news-tags"}]},{type:"group",label:Qe("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Qe("icon"),value:"icon"},{label:Qe("icons"),value:"icons"},{label:Qe("color"),value:"color"},{label:Qe("gradient"),value:"gradient"}]},{type:"group",label:Qe("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Qe("contentItem"),value:"content-model-item"},{label:Qe("contentItems"),value:"content-model-items"},{label:Qe("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Qe("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Qe("list"),value:"list"},{label:Qe("i18nList"),value:"i18n-list"},{label:Qe("albums"),value:"albums"}]}],{useModel:Cf,mergeModels:If,defineComponent:Vf}=await pe("vue"),{renderList:Ho,Fragment:na,openBlock:Ht,createElementBlock:on,unref:Pe,createVNode:tt,withCtx:lt,resolveComponent:Ti,createElementVNode:ql,createBlock:Un,createCommentVNode:Sr,toDisplayString:Rl,createTextVNode:La,normalizeClass:Sf,isRef:zi}=await pe("vue"),Ef={class:"flex items-center"},Uf={class:"flex items-center justify-between w-full"},Mf={class:"flex items-center justify-between"},Nf={class:"text-base font-semibold ml-4"},Tf={class:"text-xs text-slate-400"},zf={class:"text-xs text-slate-400"},Df={class:"text-xs text-slate-400"},Af={class:"text-xs text-slate-400"},Pf={key:0},Lf={class:"text-xs text-slate-400"},Bf={key:1},Of={class:"text-xs text-slate-400"},Ff={key:2},qf={class:"text-xs text-slate-400"},Rf={key:3},jf={class:"text-xs text-slate-400"},Kf={key:0,class:"w-full flex items-center"},Gf={class:"w-full flex items-center"},Yf={class:"w-full"},Hf={class:"text-sm"},{storeToRefs:Wf}=await pe("pinia"),{ref:oo,computed:Er,h:Wo,inject:Qo}=await pe("vue"),Qf=Vf({__name:"Fields",props:If({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:a}=xe(),{tr:n,formatKey:o,pickByTheme:l}=Je(),{isLightTheme:t}=Wf(ho()),{data:c}=Ca(),de=u,Y=Cf(u,"modelValue"),se=me=>{for(const y of Vr){const O=y.children.find(w=>w.value===me);if(O)return O.label}return null},T=oo(!1),he=oo(null),A=oo(null),M=oo(null),d=oo(),F=(me,y)=>{A.value=M.value=me,he.value=y;for(const O of Vr)O.children.find(_=>_.value===me)&&(d.value=O.key);T.value=!0},re=me=>{r(me).value=!r(me).value},r=me=>Er({get:()=>me.value===A.value,set:y=>{y?A.value=me.value:A.value=null}}),Q=Er(()=>!A.value||A.value===M.value),L=()=>{A.value&&he.value!==null&&(Y.value[he.value].type=A.value),T.value=!1},G=me=>Wo("div",{class:"flex items-center"},[Wo(ue,{size:21,class:"text-gray-500"},{default:()=>Wo(we,{icon:me.icon})}),Wo("span",{class:"font-normal ml-2 "},{default:()=>me.label}),Wo("span",{class:"text-gray-500 ml-1"},{default:()=>`(${me.children.length})`})]),$=Qo("renderSelectLabel"),I=Qo("removeCollectionField"),D=Qo("removeSingleton"),le=Qo("onCreateItemOption"),B=Qo("expandedNames",()=>Er(()=>oo([]).value));return(me,y)=>{const O=Ge,w=An,_=Xt,Z=Xn,U=sn,q=Js,K=rn,E=Pn,C=Va,h=In,f=Ti("color-picker"),$e=Zs,fe=Dn,x=Zr,i=Ha,b=Ya,ae=gl,P=Ti("Draggable"),be=Sl,Ie=Sc,ge=Vc,_e=rd,ne=ei,g=Bl;return Ht(),on(na,null,[tt(P,{list:Y.value,class:"w-full"},{default:lt(()=>[(Ht(!0),on(na,null,Ho(Y.value,(k,ee)=>(Ht(),Un(ae,{key:`field-${ee}`,size:"small",class:"my-2",hoverable:""},{default:lt(()=>[tt(b,{"expanded-names":Pe(B)(de.type=="collection"?`c-${de.parentItemIndex}-f-${ee}`:`s-${ee}`).value,"onUpdate:expandedNames":z=>Pe(B)(de.type=="collection"?`c-${de.parentItemIndex}-f-${ee}`:`s-${ee}`).value=z,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":lt(({collapsed:z})=>[ql("div",Ef,[tt(O,{size:"small",type:"error",secondary:"",onClick:()=>{de.type==="collection"?Pe(I)&&Pe(I)(de.collectionKey,ee):Pe(D)&&Pe(D)(ee)},title:Pe(e)("delete")},{default:lt(()=>[tt(Pe(ue),null,{default:lt(()=>[tt(Pe(we),{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick","title"]),y[3]||(y[3]=ql("div",{class:"w-4"},null,-1)),tt(Pe(ue),null,{default:lt(()=>[z?(Ht(),Un(Pe(we),{key:0,icon:"fa-solid:chevron-left"})):(Ht(),Un(Pe(we),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:lt(()=>y[4]||(y[4]=[ql("span",null,null,-1)])),default:lt(()=>[tt(i,{name:"1"},{header:lt(()=>[ql("div",Uf,[ql("div",Mf,[tt(Pe(ue),{size:"18",class:"cursor-move mr-2"},{default:lt(()=>[tt(Pe(we),{icon:"fa-solid:grip-lines"})]),_:1}),tt(w,{size:"small",type:"info"},{default:lt(()=>[La(Rl(ee+1),1)]),_:2},1024),ql("span",Nf,Rl(Pe(n)(k.label)),1)])])]),default:lt(()=>[tt(K,{span:24,"x-gap":"6"},{default:lt(()=>[tt(Z,{span:6},{default:lt(()=>[ql("span",Tf,Rl(Pe(e)("fieldKey")),1),tt(_,{value:k.key,placeholder:Pe(e)("fieldKey"),class:"w-full","onUpdate:value":z=>k.key=Pe(o)(z)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),tt(Z,{span:10},{default:lt(()=>[tt(U,{modelValue:k.label,"onUpdate:modelValue":z=>k.label=z,placeholder:Pe(e)("title"),class:"w-full",sync:""},{label:lt(()=>[ql("span",zf,Rl(Pe(e)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),tt(Z,{span:8},{default:lt(()=>[ql("span",Df,Rl(Pe(e)("type")),1),tt(q,null,{default:lt(()=>[tt(_,{value:se(k.type),placeholder:Pe(e)("type"),class:"w-full field-type-input",readonly:"",onClick:z=>F(k.type,ee)},null,8,["value","placeholder","onClick"]),tt(O,{secondary:"",onClick:z=>F(k.type,ee)},{icon:lt(()=>[tt(Pe(we),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),tt(E,{class:"!mt-4 !mb-2"}),tt(K,{span:24,"x-gap":"6"},{default:lt(()=>[tt(Z,{span:10,class:"flex items-center"},{default:lt(()=>[tt(C,{checked:k.required,"onUpdate:checked":z=>k.required=z,size:"medium"},{default:lt(()=>[La(Rl(Pe(e)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),tt(Z,{span:14},{default:lt(()=>[["content-model-item","content-model-items"].includes(k.type)?(Ht(),on(na,{key:0},[ql("span",Af,Rl(Pe(e)("contentModel")),1),tt(h,{value:k.defaultValue,"onUpdate:value":z=>k.defaultValue=z,options:Pe(c),placeholder:Pe(e)("contentModel"),"render-label":Pe($),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(Ht(),on(na,{key:1},[k.type==="color"||k.type==="gradient"?(Ht(),on("div",Pf,[ql("span",Lf,Rl(Pe(e)("defaultValue")),1),tt(f,{"pure-color":k.defaultValue,"onUpdate:pureColor":z=>k.defaultValue=z,"default-pure-color":"#00000000","picker-type":"chrome","use-type":k.type==="color"?"pure":"gradient",format:k.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Pe(t)?"white":"black",lang:Pe(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):k.type==="i18n-text"?(Ht(),on("div",Bf,[tt(U,{modelValue:k.defaultValue,"onUpdate:modelValue":z=>k.defaultValue=z,placeholder:Pe(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:lt(()=>[ql("span",Of,Rl(Pe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):k.type==="i18n-textarea"?(Ht(),on("div",Ff,[tt(U,{modelValue:k.defaultValue,"onUpdate:modelValue":z=>k.defaultValue=z,placeholder:Pe(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:lt(()=>[ql("span",qf,Rl(Pe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):k.type==="i18n-editor"?(Ht(),on("div",Rf,[tt(U,{modelValue:k.defaultValue,"onUpdate:modelValue":z=>k.defaultValue=z,placeholder:Pe(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:lt(()=>[ql("span",jf,Rl(Pe(e)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):(Ht(),Un(_,{key:4,value:k.defaultValue,"onUpdate:value":z=>k.defaultValue=z,placeholder:Pe(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),k.type==="multi-select"||k.type==="single-select"?(Ht(),Un(E,{key:0,"title-placement":"left",class:"!my-4"},{default:lt(()=>[La(Rl(Pe(e)("options")),1)]),_:1})):Sr("",!0),tt(fe,{name:"slide-fade",appear:""},{default:lt(()=>[k.type==="multi-select"||k.type==="single-select"?(Ht(),on("div",Kf,[tt($e,{value:k.options,"onUpdate:value":z=>k.options=z,placeholder:Pe(e)("addOption"),"on-create":z=>Pe(le)?Pe(le)(z,ee):null,"show-sort-button":"",class:"w-full"},{"create-button-default":lt(()=>[La(Rl(Pe(e)("addOption")),1)]),default:lt(({value:z})=>[ql("div",Gf,[tt(_,{value:z.value,placeholder:Pe(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Se=>z.value=Pe(o)(Se)},null,8,["value","placeholder","onUpdate:value"]),tt(U,{modelValue:z.label,"onUpdate:modelValue":Se=>z.label=Se,placeholder:Pe(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):Sr("",!0)]),_:2},1024),(Ht(!0),on(na,null,Ho(Pe($f),(z,Se,Ye)=>(Ht(),on(na,{key:Ye},[k.type===Se?(Ht(),Un(b,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:lt(()=>[tt(Pe(ue),{size:"18"},{default:lt(()=>[tt(Pe(we),{icon:"carbon:chevron-right"})]),_:1})]),default:lt(()=>[tt(i,{name:"1"},{header:lt(()=>[tt(E,{"title-placement":"left",class:"!my-4"},{default:lt(()=>[La(Rl(Pe(e)("settings")),1)]),_:1})]),default:lt(()=>[tt(fe,{name:"slide-fade",appear:""},{default:lt(()=>[ql("div",Yf,[(Ht(!0),on(na,null,Ho(z,ke=>(Ht(),Un(K,{key:ke.key,span:24,"x-gap":"12",class:"mb-2"},{default:lt(()=>[tt(Z,{span:10},{default:lt(()=>[tt(_,{value:ke.key,placeholder:Pe(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),tt(Z,{span:14},{default:lt(()=>[ke.isNumber?(Ht(),Un(x,{key:0,value:k.settings[ke.key],"onUpdate:value":S=>k.settings[ke.key]=S,"default-value":ke.defaultValue?parseInt(ke.defaultValue):void 0,placeholder:ke.placeholder||Pe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(Ht(),Un(_,{key:1,value:k.settings[ke.key],"onUpdate:value":S=>k.settings[ke.key]=S,"default-value":ke.defaultValue,placeholder:ke.placeholder||Pe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):Sr("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),tt(g,{show:Pe(T),"onUpdate:show":y[2]||(y[2]=k=>zi(T)?T.value=k:null),preset:"card",size:"medium",style:{width:"650px"},title:Pe(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":lt(()=>[tt(be,{align:"center"},{default:lt(()=>[tt(O,{secondary:"",size:"small",type:"success",disabled:Pe(Q),onClick:L},{default:lt(()=>[tt(Pe(we),{icon:"carbon:checkmark",class:"mr-1"}),La(" "+Rl(Pe(e)("select")),1)]),_:1},8,["disabled"]),tt(O,{secondary:"",size:"small",type:"error",onClick:y[0]||(y[0]=k=>T.value=!1)},{default:lt(()=>[tt(Pe(we),{icon:"carbon:close",class:"mr-1"}),La(" "+Rl(Pe(e)("close")),1)]),_:1})]),_:1})]),default:lt(()=>[tt(ne,{animated:"",type:"line",size:"medium",placement:"left",value:Pe(d),"onUpdate:value":y[1]||(y[1]=k=>zi(d)?d.value=k:null),style:{height:"100%"}},{default:lt(()=>[(Ht(!0),on(na,null,Ho(Pe(Vr),(k,ee)=>(Ht(),Un(_e,{name:k.key,tab:G(k),key:ee},{default:lt(()=>[tt(ge,{hoverable:"",clickable:"",bordered:""},{default:lt(()=>[(Ht(!0),on(na,null,Ho(k.children,z=>(Ht(),Un(Ie,{class:Sf(r(z).value?`${Pe(l)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:z.value,onClick:Se=>re(z)},{suffix:lt(()=>[tt(C,{checked:r(z).value,"onUpdate:checked":Se=>r(z).value=Se,size:"medium",onClick:Se=>re(z)},null,8,["checked","onUpdate:checked","onClick"])]),default:lt(()=>[ql("span",Hf,Rl(z.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Di=Sa(Qf,[["__scopeId","data-v-f2dba27a"]]),{useModel:Xf,mergeModels:Jf,defineComponent:Zf}=await pe("vue"),{unref:Ue,toDisplayString:Al,openBlock:Wt,createElementBlock:Xo,createCommentVNode:so,createTextVNode:Mn,resolveComponent:F1,withCtx:Ke,createVNode:et,createElementVNode:qn,createBlock:Cl,normalizeStyle:Ur,isRef:e_,renderList:t_,Fragment:Ai,normalizeClass:l_}=await pe("vue"),n_={class:"text-base"},a_={key:0},o_={key:0},s_={key:0},r_={class:"flex items-center"},i_={class:"flex items-center justify-between w-full"},c_={class:"text-base font-semibold"},d_={class:"text-xs text-slate-400"},u_={class:"text-xs text-slate-400"},p_={class:"text-xs text-slate-400"},{defineAsyncComponent:m_,ref:Rn,computed:As,watch:Ps,h:f_,provide:ya}=await pe("vue"),{storeToRefs:__}=await pe("pinia"),Fc=Zf({__name:"index",props:Jf({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=m_(()=>yo(()=>import("./vue3-ts-jsoneditor-C8auy2Cl.js").then(i=>i.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:a}=xe(),{tr:n,pickByTheme:o,formatKey:l}=Je(),{isLightTheme:t}=__(ho());Ca();const c=u,de=Xf(u,"show"),Y=Xe(),se=Fe(),T=Yl(),he=Rn(!1),A=Rn(null),M=Rn({}),d=Rn({}),F={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},re=Rn(!1),r=Rn(!1),Q=Rn(!1),L=Rn(!1),G=Rn({}),$=i=>As({get:()=>G.value[i]?["1"]:[],set:b=>{G.value[i]=b.length>0}}),I=As({get:()=>ve.omit(M.value,["index"]),set:i=>{M.value=M.value.index!==void 0?{index:M.value.index,...i}:{...i}}});Ps(()=>L.value,i=>{Object.entries(M.value).forEach(([b,ae],P)=>{b!=="index"&&(G.value[`c-${P}`]=i,ae?.items?.forEach((be,Ie)=>{G.value[`c-${P}-f-${Ie}`]=i}))})}),Ps(()=>Q.value,i=>{Object.entries(M.value).forEach(([b,ae],P)=>{b==="index"&&ae?.forEach((be,Ie)=>{G.value[`s-${Ie}`]=i})})});const D=As(()=>ve.isEqual(M.value,d.value)),le=()=>{M.value?M.value.index&&Array.isArray(M.value.index)?M.value.index.push(ve.cloneDeep(F)):M.value.index=[ve.cloneDeep(F)]:M.value={index:[ve.cloneDeep(F)]}},B=i=>{M.value&&Array.isArray(M.value.index)&&M.value.index.splice(i,1)},me=()=>{const i=Gl();M.value?M.value[i]={key:"",title:"",items:[]}:M.value={[i]:{key:"",title:"",items:[]}}},y=i=>{if(M.value){const{[i]:b,...ae}=M.value;M.value=ae}},O=i=>{M.value&&M.value[i].items.push(ve.cloneDeep(F))},w=(i,b)=>{if(M.value){const ae=M.value[i];ae&&Array.isArray(ae.items)&&ae.items.splice(b,1)}},_=i=>i.title&&i.key&&i.key!=="index",Z=()=>M.value&&typeof M.value=="object"?Object.keys(M.value).filter(i=>i!=="index").length:0,U=As(()=>M.value?Object.keys(M.value).filter(i=>i!=="index"):[]),q=i=>U.value.indexOf(i),K=Rn(!1),E=async()=>{const i=ve.cloneDeep(M.value),b=ve.cloneDeep(M.value);K.value=!1,he.value=!0,Y.start();const ae=[];if(ve.forIn(i,(P,be)=>{be!=="index"&&ae.push(P.key)}),ve.forIn(i,(P,be)=>{if(be!=="index"){const Ie=ve.keys(i).filter(ge=>ge!=="index").indexOf(be);if(P&&P.key){if(P.key==="index")return se.error(a("keyIndexIsReservedInCollections")),K.value=!0,!1;if(ae.filter(_e=>_e==P.key).length>1)return se.error(a("collectionKeyIsNotUnique",[P.key])),K.value=!0,!1;if(Array.isArray(P.items))for(const[_e,ne]of P.items.entries())if(ne.key){if(P.items.filter(k=>k.key===ne.key).length>1)return se.error(a("fieldKeyOfCollectionIsNotUnique",[ne.key,P.key])),K.value=!0,!1}else return se.error(a("fieldKeyOfCollectionIsRequired",[_e+1,P.key])),K.value=!0,!1}else return se.error(a("collectionKeyIsRequired",[Ie+1])),K.value=!0,!1}else if(Array.isArray(P))for(const[Ie,ge]of P.entries())if(ge.key){if(P.filter(ne=>ne.key===ge.key).length>1)return se.error(a("singletonKeyIsNotUnique",[ge.key])),K.value=!0,!1}else return se.error(a("singletonKeyIsRequired",[Ie+1])),K.value=!0,!1}),K.value){he.value=!1,Y.finish();return}ve.forIn(b,(P,be)=>{be!=="index"&&be!==P.key&&kc(i,be,P.key)}),await c.updateDataStructure(i),he.value=!1,Y.finish()},C=()=>{ve.isEqual(M.value,d.value)?de.value=!1:T.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{de.value=!1}})};Ps(()=>c.rawDataStructure,i=>{M.value=i?ve.cloneDeep(i):{},ve.forIn(i,(b,ae)=>{ae!=="index"?(M.value[ae].key=ae,b?.items?.forEach((P,be)=>{M.value[ae].items[be].settings||(M.value[ae].items[be].settings={})})):b?.forEach((P,be)=>{M.value[ae][be].settings||(M.value[ae][be].settings={})})}),d.value=ve.cloneDeep(M.value)},{immediate:!0,deep:!0});const h=i=>f_("span",{},{default:()=>n(i.title)}),f=(i,b)=>({value:`option_${b+1}${i+1}`,label:""}),{copy:$e,copied:fe,isSupported:x}=Dc();return Ps(()=>fe.value,i=>{i&&se.success(a("dataStructureCopied"))}),ya("removeCollectionField",w),ya("onCreateItemOption",f),ya("renderSelectLabel",h),ya("removeSingleton",B),ya("addSingleton",le),ya("expandCollections",L),ya("expandSingletons",Q),ya("expandedNames",$),(i,b)=>{const ae=li,P=we,be=ue,Ie=Ge,ge=Sl,_e=gl,ne=$n,g=Xn,k=An,ee=Xt,z=sn,Se=rn,Ye=Pn,ke=ti,S=Ha,st=Ya,De=Wr;return Wt(),Cl(De,{modelValue:de.value,"onUpdate:modelValue":b[13]||(b[13]=ft=>de.value=ft),"close-on-esc":!1,closable:!1,onOnSizeChange:b[14]||(b[14]=ft=>{A.value=ft})},{header:Ke(()=>[qn("div",n_,[et(ae,{depth:"1"},{default:Ke(()=>[Mn(Al(Ue(a)("dataStructure"))+" ",1),i.title?(Wt(),Xo("span",a_,"Â -Â "+Al(i.title),1)):so("",!0)]),_:1})])]),"header-extra":Ke(()=>[et(ge,{align:"center"},{default:Ke(()=>[et(Ie,{secondary:"",title:Ue(a)("save"),loading:Ue(he),disabled:Ue(D),onClick:b[0]||(b[0]=ft=>E())},{icon:Ke(()=>[et(be,null,{default:Ke(()=>[et(P,{icon:"carbon:save"})]),_:1})]),default:Ke(()=>[Mn(" "+Al(Ue(a)("save")),1)]),_:1},8,["title","loading","disabled"]),et(Ie,{secondary:"",type:"error",title:Ue(a)("close"),disabled:Ue(he),onClick:b[1]||(b[1]=ft=>C())},{icon:Ke(()=>[et(be,null,{default:Ke(()=>[et(P,{icon:"carbon:close"})]),_:1})]),default:Ke(()=>[Mn(" "+Al(Ue(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ke(()=>[qn("section",{style:Ur(`min-height: ${Ue(A)?.windowHeight-Ue(A)?.headerHeight-5}px`),class:l_(`w-full h-full ${Ue(o)("bg-slate-200","bg-zinc-800")}`)},[et(Se,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Ke(()=>[et(g,{class:"mx-2 mt-2"},{default:Ke(()=>[et(_e,{embedded:"",bordered:"",segmented:""},{header:Ke(()=>[Mn(Al(Ue(a)("singletons"))+"Â  ",1),Ue(M).index?.length?(Wt(),Xo("span",o_," ("+Al(Ue(M).index?.length)+") ",1)):so("",!0)]),"header-extra":Ke(()=>[et(ge,null,{default:Ke(()=>[Ue(x)&&Ue(re)?(Wt(),Cl(Ie,{key:0,size:"small",type:"warning",secondary:"",title:Ue(a)("copy"),onClick:b[2]||(b[2]=ft=>Ue($e)(JSON.stringify(Ue(M).index)))},{icon:Ke(()=>[et(be,null,{default:Ke(()=>[et(P,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):so("",!0),et(Ie,{size:"small",type:"warning",secondary:"",onClick:b[3]||(b[3]=()=>{re.value=!Ue(re),Ue(re)&&(r.value=!1)})},{default:Ke(()=>[et(be,null,{default:Ke(()=>[Ue(re)?(Wt(),Cl(P,{key:0,icon:"carbon:code"})):(Wt(),Cl(P,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),et(Ie,{size:"small",type:"primary",secondary:"",onClick:b[4]||(b[4]=ft=>Q.value=!Ue(Q))},{default:Ke(()=>[et(be,null,{default:Ke(()=>[Ue(Q)?(Wt(),Cl(P,{key:0,icon:"carbon:collapse-categories"})):(Wt(),Cl(P,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),et(Ie,{size:"small",type:"primary",secondary:"",onClick:b[5]||(b[5]=ft=>le())},{default:Ke(()=>[et(be,{class:"mr-1"},{default:Ke(()=>[et(P,{icon:"carbon:add-alt"})]),_:1}),Mn(" "+Al(Ue(a)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Ue(re)?(Wt(),Cl(Ue(e),{key:0,height:Ue(A)?.windowHeight-Ue(A)?.headerHeight-100,"dark-theme":!Ue(t),class:"creopse-json-editor",mode:"tree",json:Ue(M).index,"onUpdate:json":b[6]||(b[6]=ft=>Ue(M).index=ft)},null,8,["height","dark-theme","json"])):(Wt(),Cl(ne,{key:1,style:Ur(`max-height: ${Ue(A)?.windowHeight-Ue(A)?.headerHeight-100}px`)},{default:Ke(()=>[et(Di,{modelValue:Ue(M).index,"onUpdate:modelValue":b[7]||(b[7]=ft=>Ue(M).index=ft),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),et(g,{class:"mx-2 mt-2"},{default:Ke(()=>[et(_e,{embedded:"",bordered:"",segmented:""},{header:Ke(()=>[Mn(Al(Ue(a)("collections"))+"Â  ",1),Z()>0?(Wt(),Xo("span",s_," ("+Al(Z())+") ",1)):so("",!0)]),"header-extra":Ke(()=>[et(ge,null,{default:Ke(()=>[Ue(x)&&Ue(r)?(Wt(),Cl(Ie,{key:0,size:"small",type:"warning",secondary:"",title:Ue(a)("copy"),onClick:b[8]||(b[8]=ft=>Ue($e)(JSON.stringify(Ue(I))))},{icon:Ke(()=>[et(be,null,{default:Ke(()=>[et(P,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):so("",!0),et(Ie,{size:"small",type:"warning",secondary:"",onClick:b[9]||(b[9]=()=>{r.value=!Ue(r),Ue(r)&&(re.value=!1)})},{default:Ke(()=>[et(be,null,{default:Ke(()=>[Ue(r)?(Wt(),Cl(P,{key:0,icon:"carbon:code"})):(Wt(),Cl(P,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),et(Ie,{size:"small",type:"primary",secondary:"",onClick:b[10]||(b[10]=ft=>L.value=!Ue(L))},{default:Ke(()=>[et(be,null,{default:Ke(()=>[Ue(L)?(Wt(),Cl(P,{key:0,icon:"carbon:collapse-categories"})):(Wt(),Cl(P,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),et(Ie,{size:"small",type:"primary",secondary:"",onClick:b[11]||(b[11]=ft=>me())},{default:Ke(()=>[et(be,{class:"mr-1"},{default:Ke(()=>[et(P,{icon:"carbon:add-alt"})]),_:1}),Mn(" "+Al(Ue(a)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Ue(r)?(Wt(),Cl(Ue(e),{key:0,height:Ue(A)?.windowHeight-Ue(A)?.headerHeight-100,"dark-theme":!Ue(t),class:"creopse-json-editor",mode:"tree",json:Ue(I),"onUpdate:json":b[12]||(b[12]=ft=>e_(I)?I.value=ft:null)},null,8,["height","dark-theme","json"])):(Wt(),Cl(ne,{key:1,style:Ur(`max-height: ${Ue(A)?.windowHeight-Ue(A)?.headerHeight-100}px`)},{default:Ke(()=>[(Wt(!0),Xo(Ai,null,t_(Ue(M)||{},(ft,_t,R)=>(Wt(),Xo(Ai,{key:R},[_t!="index"?(Wt(),Cl(_e,{key:0,size:"small",class:"my-2",embedded:""},{default:Ke(()=>[et(st,{"expanded-names":$(`c-${R}`).value,"onUpdate:expandedNames":H=>$(`c-${R}`).value=H,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Ke(({collapsed:H})=>[qn("div",r_,[et(Ie,{size:"small",type:"error",secondary:"",onClick:N=>y(_t)},{default:Ke(()=>[et(be,{class:"mr-1"},{default:Ke(()=>[et(P,{icon:"carbon:trash-can"})]),_:1}),Mn(" "+Al(Ue(a)("delete")),1)]),_:2},1032,["onClick"]),b[15]||(b[15]=qn("div",{class:"w-4"},null,-1)),et(be,null,{default:Ke(()=>[H?(Wt(),Cl(P,{key:0,icon:"fa-solid:chevron-left"})):(Wt(),Cl(P,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Ke(()=>b[16]||(b[16]=[qn("span",null,null,-1)])),default:Ke(()=>[et(S,{name:"1"},{header:Ke(()=>[qn("div",i_,[et(ge,null,{default:Ke(()=>[et(k,{size:"small",type:"success"},{default:Ke(()=>[Mn(Al(q(_t)+1),1)]),_:2},1024),qn("span",c_,Al(Ue(n)(ft.title)),1)]),_:2},1024)])]),default:Ke(()=>[et(Se,{span:24,"x-gap":"6"},{default:Ke(()=>[et(g,{span:6},{default:Ke(()=>[qn("span",d_,Al(Ue(a)("fieldKey")),1),et(ee,{value:ft.key,placeholder:Ue(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":H=>ft.key=Ue(l)(H)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),et(g,{span:11},{default:Ke(()=>[et(z,{modelValue:ft.title,"onUpdate:modelValue":H=>ft.title=H,placeholder:Ue(a)("title"),class:"w-full",size:"small",sync:""},{label:Ke(()=>[qn("span",u_,Al(Ue(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),et(g,{span:7},{default:Ke(()=>[qn("span",p_,Al(Ue(a)("actions")),1),et(Ie,{block:"",size:"small",type:"primary",disabled:!_(ft),secondary:"",class:"w-full",onClick:H=>O(_t)},{default:Ke(()=>[et(be,{class:"mr-1"},{default:Ke(()=>[et(P,{icon:"carbon:add-alt"})]),_:1}),Mn(" "+Al(Ue(a)("addField")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024),et(Ye,{class:"!my-4.75"}),_(ft)?(Wt(),Cl(Di,{key:0,modelValue:Ue(M)[_t].items,"onUpdate:modelValue":H=>Ue(M)[_t].items=H,"parent-item-index":R,"collection-key":_t,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(Wt(),Cl(ke,{key:1,bordered:"",type:"info"},{default:Ke(()=>[Mn(Al(Ue(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):so("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:Zl}=Jr.global,v_=[{label:Zl("text"),value:"text"},{label:Zl("textarea"),value:"textarea"},{label:Zl("number"),value:"number"},{label:Zl("switch"),value:"switch"},{label:Zl("singleSelect"),value:"single-select"},{label:Zl("multiSelect"),value:"multi-select"},{label:Zl("slider"),value:"slider"},{label:Zl("image"),value:"image"},{label:Zl("icon"),value:"icon"},{label:Zl("color"),value:"color"},{label:Zl("gradient"),value:"gradient"},{label:Zl("dimensions"),value:"dimensions"},{label:Zl("background"),value:"background"},{label:Zl("border"),value:"border"},{label:Zl("shadow"),value:"shadow"}],{useModel:y_,mergeModels:g_,defineComponent:h_}=await pe("vue"),{unref:Ae,toDisplayString:ol,openBlock:sl,createElementBlock:ro,createCommentVNode:Jo,createTextVNode:fn,resolveComponent:Pi,withCtx:Me,createVNode:Te,createElementVNode:kl,createBlock:Pl,isRef:b_,renderList:Li,Fragment:Bi,normalizeStyle:Oi,normalizeClass:k_}=await pe("vue"),w_={class:"text-base"},x_={key:0},$_={key:0},C_={class:"flex items-center"},I_={class:"flex items-center justify-between w-full"},V_={class:"text-base font-semibold"},S_={class:"text-xs text-slate-400"},E_={class:"text-xs text-slate-400"},U_={class:"text-xs text-slate-400"},M_={class:"flex items-center"},N_={class:"flex items-center justify-between w-full"},T_={class:"flex items-center justify-between"},z_={class:"text-base font-semibold ml-4"},D_={class:"text-xs text-slate-400"},A_={class:"text-xs text-slate-400"},P_={class:"text-xs text-slate-400"},L_={key:0},B_={class:"text-xs text-slate-400"},O_={key:0,class:"w-full flex items-center"},F_={class:"w-full flex items-center"},{defineAsyncComponent:q_,ref:ga,computed:Mr,watch:Nr}=await pe("vue"),{storeToRefs:R_}=await pe("pinia"),j_=h_({__name:"index",props:g_({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=q_(()=>yo(()=>import("./vue3-ts-jsoneditor-C8auy2Cl.js").then(h=>h.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),a=Yl(),n=Fe(),o=Xe(),{t:l,locale:t}=xe(),{pickByTheme:c,tr:de,formatKey:Y}=Je(),{isLightTheme:se}=R_(ho()),T=u,he=y_(u,"show"),A=ga(null),M=ga(!1),d=ga({}),F=ga({}),re={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},r=ga(!1),Q=ga(!1),L=ga({}),G=h=>Mr({get:()=>L.value[h]?["1"]:[],set:f=>{L.value[h]=f.length>0}});Nr(()=>T.settingsStructure,h=>{d.value=h?ve.cloneDeep(h):{},ve.forIn(h,(f,$e)=>{d.value[$e].key=$e}),F.value=ve.cloneDeep(d.value)},{immediate:!0,deep:!0});const $=Mr(()=>ve.isEqual(d.value,F.value)),I=ga(!1),D=async()=>{const h=ve.cloneDeep(d.value),f=ve.cloneDeep(d.value);I.value=!1,M.value=!0,o.start();const $e=Object.values(h).map(fe=>fe.key);if(ve.forIn(h,(fe,x)=>{const i=ve.keys(h).indexOf(x);if(fe&&fe.key){if($e.filter(ae=>ae==fe.key).length>1)return n.error(l("groupKeyIsNotUnique",[fe.key])),I.value=!0,!1;if(Array.isArray(fe.items))for(const[ae,P]of fe.items.entries())if(P.key){if(fe.items.filter(Ie=>Ie.key===P.key).length>1)return n.error(l("fieldKeyOfGroupIsNotUnique",[P.key,fe.key])),I.value=!0,!1}else return n.error(l("fieldKeyOfGroupIsRequired",[ae+1,fe.key])),I.value=!0,!1}else return n.error(l("groupKeyIsRequired",[i+1])),I.value=!0,!1}),I.value){M.value=!1,o.finish();return}ve.forIn(f,(fe,x)=>{x!==fe.key&&kc(h,x,fe.key)}),await T.updateSettingsStructure(h),M.value=!1,o.finish()},le=()=>{ve.isEqual(d.value,F.value)?he.value=!1:a.warning({title:l("confirm"),content:l("confirmCloseDataStructure"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{he.value=!1}})},B=()=>d.value&&typeof d.value=="object"?Object.keys(d.value).length:0,me=Mr(()=>d.value?Object.keys(d.value):[]),y=h=>me.value.indexOf(h),O=()=>{const h=Gl();d.value?d.value[h]={key:"",title:"",items:[]}:d.value={[h]:{key:"",title:"",items:[]}}},w=h=>{if(d.value){const{[h]:f,...$e}=d.value;d.value=$e}},_=h=>{d.value&&d.value[h].items.push(ve.cloneDeep(re))},Z=(h,f)=>{if(d.value){const $e=d.value[h];$e&&Array.isArray($e.items)&&$e.items.splice(f,1)}},U=h=>h.title&&h.key,q=(h,f)=>({value:`option_${f+1}${h+1}`,label:""});Nr(()=>Q.value,h=>{Object.entries(d.value).forEach(([f,$e],fe)=>{L.value[`c-${fe}`]=h,$e?.items?.forEach((x,i)=>{L.value[`c-${fe}-f-${i}`]=h})})});const{copy:K,copied:E,isSupported:C}=Dc();return Nr(()=>E.value,h=>{h&&n.success(l("settingsStructureCopied"))}),(h,f)=>{const $e=li,fe=we,x=ue,i=Ge,b=Sl,ae=Xn,P=gl,be=An,Ie=Xt,ge=sn,_e=rn,ne=Pn,g=In,k=Va,ee=Pi("color-picker"),z=Zs,Se=Dn,Ye=Ha,ke=Ya,S=Pi("Draggable"),st=ti,De=$n,ft=Wr;return sl(),Pl(ft,{modelValue:he.value,"onUpdate:modelValue":f[7]||(f[7]=_t=>he.value=_t),"close-on-esc":!1,closable:!1,onOnSizeChange:f[8]||(f[8]=_t=>{A.value=_t})},{header:Me(()=>[kl("div",w_,[Te($e,{depth:"1"},{default:Me(()=>[fn(ol(Ae(l)("sectionSettings"))+" ",1),h.title?(sl(),ro("span",x_,"Â -Â "+ol(h.title),1)):Jo("",!0)]),_:1})])]),"header-extra":Me(()=>[Te(b,{align:"center"},{default:Me(()=>[Te(i,{secondary:"",title:Ae(l)("save"),loading:Ae(M),disabled:Ae($),onClick:f[0]||(f[0]=_t=>D())},{icon:Me(()=>[Te(x,null,{default:Me(()=>[Te(fe,{icon:"carbon:save"})]),_:1})]),default:Me(()=>[fn(" "+ol(Ae(l)("save")),1)]),_:1},8,["title","loading","disabled"]),Te(i,{secondary:"",type:"error",title:Ae(l)("close"),disabled:Ae(M),onClick:f[1]||(f[1]=_t=>le())},{icon:Me(()=>[Te(x,null,{default:Me(()=>[Te(fe,{icon:"carbon:close"})]),_:1})]),default:Me(()=>[fn(" "+ol(Ae(l)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Me(()=>[kl("section",{style:Oi(`min-height: ${Ae(A)?.windowHeight-Ae(A)?.headerHeight-5}px`),class:k_(`w-full h-full ${Ae(c)("bg-slate-200","bg-zinc-800")}`)},[Te(_e,{cols:"4","item-responsive":"",responsive:"screen"},{default:Me(()=>[Te(ae,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Te(ae,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:Me(()=>[Te(P,{embedded:"",bordered:"",segmented:""},{header:Me(()=>[fn(ol(Ae(l)("groups"))+"Â  ",1),B()>0?(sl(),ro("span",$_," ("+ol(B())+") ",1)):Jo("",!0)]),"header-extra":Me(()=>[Te(b,null,{default:Me(()=>[Ae(C)&&Ae(r)?(sl(),Pl(i,{key:0,size:"small",type:"warning",secondary:"",title:Ae(l)("copy"),onClick:f[2]||(f[2]=_t=>Ae(K)(JSON.stringify(Ae(d))))},{icon:Me(()=>[Te(x,null,{default:Me(()=>[Te(fe,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Jo("",!0),Te(i,{size:"small",type:"warning",secondary:"",onClick:f[3]||(f[3]=()=>{r.value=!Ae(r)})},{default:Me(()=>[Te(x,null,{default:Me(()=>[Ae(r)?(sl(),Pl(fe,{key:0,icon:"carbon:code"})):(sl(),Pl(fe,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Te(i,{size:"small",type:"primary",secondary:"",onClick:f[4]||(f[4]=_t=>Q.value=!Ae(Q))},{default:Me(()=>[Te(x,null,{default:Me(()=>[Ae(Q)?(sl(),Pl(fe,{key:0,icon:"carbon:collapse-categories"})):(sl(),Pl(fe,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Te(i,{size:"small",type:"primary",secondary:"",onClick:f[5]||(f[5]=_t=>O())},{default:Me(()=>[Te(x,{class:"mr-1"},{default:Me(()=>[Te(fe,{icon:"carbon:add-alt"})]),_:1}),fn(" "+ol(Ae(l)("addGroup")),1)]),_:1})]),_:1})]),_:1}),Ae(r)?(sl(),Pl(Ae(e),{key:0,height:Ae(A)?.windowHeight-Ae(A)?.headerHeight-100,"dark-theme":!Ae(se),class:"creopse-json-editor",mode:"tree",json:Ae(d),"onUpdate:json":f[6]||(f[6]=_t=>b_(d)?d.value=_t:null)},null,8,["height","dark-theme","json"])):(sl(),Pl(De,{key:1,style:Oi(`max-height: ${Ae(A)?.windowHeight-Ae(A)?.headerHeight-100}px`)},{default:Me(()=>[(sl(!0),ro(Bi,null,Li(Ae(d)||{},(_t,R,H)=>(sl(),Pl(P,{key:H,size:"small",class:"my-2",embedded:""},{default:Me(()=>[Te(ke,{"expanded-names":G(`c-${H}`).value,"onUpdate:expandedNames":N=>G(`c-${H}`).value=N,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Me(({collapsed:N})=>[kl("div",C_,[Te(i,{size:"small",type:"error",secondary:"",onClick:ot=>w(R)},{default:Me(()=>[Te(x,{class:"mr-1"},{default:Me(()=>[Te(fe,{icon:"carbon:trash-can"})]),_:1}),fn(" "+ol(Ae(l)("delete")),1)]),_:2},1032,["onClick"]),f[9]||(f[9]=kl("div",{class:"w-4"},null,-1)),Te(x,null,{default:Me(()=>[N?(sl(),Pl(fe,{key:0,icon:"fa-solid:chevron-left"})):(sl(),Pl(fe,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Me(()=>f[10]||(f[10]=[kl("span",null,null,-1)])),default:Me(()=>[Te(Ye,{name:"1"},{header:Me(()=>[kl("div",I_,[Te(b,null,{default:Me(()=>[Te(be,{size:"small",type:"success"},{default:Me(()=>[fn(ol(y(R)+1),1)]),_:2},1024),kl("span",V_,ol(Ae(de)(_t.title)),1)]),_:2},1024)])]),default:Me(()=>[Te(_e,{span:24,"x-gap":"6"},{default:Me(()=>[Te(ae,{span:6},{default:Me(()=>[kl("span",S_,ol(Ae(l)("fieldKey")),1),Te(Ie,{value:_t.key,placeholder:Ae(l)("groupKey"),class:"w-full",size:"small","onUpdate:value":N=>_t.key=Ae(Y)(N)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Te(ae,{span:11},{default:Me(()=>[Te(ge,{modelValue:_t.title,"onUpdate:modelValue":N=>_t.title=N,placeholder:Ae(l)("title"),class:"w-full",size:"small",sync:""},{label:Me(()=>[kl("span",E_,ol(Ae(l)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Te(ae,{span:7},{default:Me(()=>[kl("span",U_,ol(Ae(l)("actions")),1),Te(i,{block:"",size:"small",type:"primary",disabled:!U(_t),secondary:"",class:"w-full",onClick:N=>_(R)},{default:Me(()=>[Te(x,{class:"mr-1"},{default:Me(()=>[Te(fe,{icon:"carbon:add-alt"})]),_:1}),fn(" "+ol(Ae(l)("addField")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Te(ne,{class:"!my-4.75"}),U(_t)?(sl(),Pl(S,{key:0,list:Ae(d)[R].items,class:"w-full"},{default:Me(()=>[(sl(!0),ro(Bi,null,Li(Ae(d)[R].items,(N,ot)=>(sl(),Pl(P,{key:`field-${ot}`,size:"small",class:"my-2",hoverable:""},{default:Me(()=>[Te(ke,{"expanded-names":G(`c-${R}-f-${ot}`).value,"onUpdate:expandedNames":We=>G(`c-${R}-f-${ot}`).value=We,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":Me(({collapsed:We})=>[kl("div",M_,[Te(i,{size:"small",type:"error",secondary:"",onClick:()=>{Z(R,ot)},title:Ae(l)("delete")},{default:Me(()=>[Te(x,null,{default:Me(()=>[Te(fe,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick","title"]),f[11]||(f[11]=kl("div",{class:"w-4"},null,-1)),Te(x,null,{default:Me(()=>[We?(sl(),Pl(fe,{key:0,icon:"fa-solid:chevron-left"})):(sl(),Pl(fe,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Me(()=>f[12]||(f[12]=[kl("span",null,null,-1)])),default:Me(()=>[Te(Ye,{name:"1"},{header:Me(()=>[kl("div",N_,[kl("div",T_,[Te(x,{size:"18",class:"cursor-move mr-2"},{default:Me(()=>[Te(fe,{icon:"fa-solid:grip-lines"})]),_:1}),Te(be,{size:"small",type:"info"},{default:Me(()=>[fn(ol(ot+1),1)]),_:2},1024),kl("span",z_,ol(Ae(de)(N.label)),1)])])]),default:Me(()=>[Te(_e,{span:24,"x-gap":"6"},{default:Me(()=>[Te(ae,{span:6},{default:Me(()=>[kl("span",D_,ol(Ae(l)("fieldKey")),1),Te(Ie,{value:N.key,placeholder:Ae(l)("fieldKey"),class:"w-full","onUpdate:value":We=>N.key=Ae(Y)(We)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Te(ae,{span:10},{default:Me(()=>[Te(ge,{modelValue:N.label,"onUpdate:modelValue":We=>N.label=We,placeholder:Ae(l)("title"),class:"w-full",sync:""},{label:Me(()=>[kl("span",A_,ol(Ae(l)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Te(ae,{span:8},{default:Me(()=>[kl("span",P_,ol(Ae(l)("type")),1),Te(g,{value:N.type,"onUpdate:value":We=>N.type=We,options:Ae(v_),placeholder:Ae(l)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Te(ne,{class:"!mt-4 !mb-2"}),Te(_e,{span:24,"x-gap":"6"},{default:Me(()=>[Te(ae,{span:10,class:"flex items-center"},{default:Me(()=>[Te(k,{checked:N.required,"onUpdate:checked":We=>N.required=We,size:"medium"},{default:Me(()=>[fn(ol(Ae(l)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),Te(ae,{span:14},{default:Me(()=>[N.type==="color"||N.type==="gradient"?(sl(),ro("div",L_,[kl("span",B_,ol(Ae(l)("defaultValue")),1),Te(ee,{"pure-color":N.defaultValue,"onUpdate:pureColor":We=>N.defaultValue=We,"default-pure-color":"#00000000","picker-type":"chrome","use-type":N.type==="color"?"pure":"gradient",format:N.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Ae(se)?"white":"black",lang:Ae(t)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(sl(),Pl(Ie,{key:1,value:N.defaultValue,"onUpdate:value":We=>N.defaultValue=We,placeholder:Ae(l)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),N.type==="multi-select"||N.type==="single-select"?(sl(),Pl(ne,{key:0,"title-placement":"left",class:"!my-4"},{default:Me(()=>[fn(ol(Ae(l)("options")),1)]),_:1})):Jo("",!0),Te(Se,{name:"slide-fade",appear:""},{default:Me(()=>[N.type==="multi-select"||N.type==="single-select"?(sl(),ro("div",O_,[Te(z,{value:N.options,"onUpdate:value":We=>N.options=We,placeholder:Ae(l)("addOption"),"on-create":We=>q?q(We,ot):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Me(()=>[fn(ol(Ae(l)("addOption")),1)]),default:Me(({value:We})=>[kl("div",F_,[Te(Ie,{value:We.value,placeholder:Ae(l)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Ft=>We.value=Ae(Y)(Ft)},null,8,["value","placeholder","onUpdate:value"]),Te(ge,{modelValue:We.label,"onUpdate:modelValue":Ft=>We.label=Ft,placeholder:Ae(l)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):Jo("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(sl(),Pl(st,{key:1,bordered:"",type:"info"},{default:Me(()=>[fn(ol(Ae(l)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Te(ae,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),K_=Sa(j_,[["__scopeId","data-v-854dbd9b"]]),G_=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["sections"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/sections",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Y_=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["sections"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/sections/${t.slug}`,data:Yt(t,["id","slug"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},{defineComponent:H_}=await pe("vue"),{unref:ct,renderList:Fi,Fragment:Zo,openBlock:jn,createElementBlock:es,resolveComponent:q1,createBlock:ts,createCommentVNode:W_,withCtx:pl,createVNode:rl,createElementVNode:Ba,toDisplayString:aa,createTextVNode:io,withModifiers:Tr,normalizeClass:qi,isRef:Ls}=await pe("vue"),Q_={class:"flex items-center"},X_={class:"text-base"},J_={class:"mt-2"},Z_={class:"mt-2 text-xs"},{ref:Kn}=await pe("vue"),ev=H_({__name:"index",setup(u){const{t:e}=xe(),{tr:a,pickByTheme:n,isInDevMode:o}=Je(),{data:l}=Qr(),{mutate:t,isPending:c}=G_(),{mutate:de,isPending:Y}=Y_(),se=Kn(12),T=Kn(1),he=O=>{se.value=O},A={name:"",title:"",content:"",slug:""},M=Kn(!1),d=Kn(null),F=Kn(A),re={title:[{required:!0,message:e("fillRequired")}]},r=Kn(null),Q=O=>{r.value=ve.cloneDeep(O),F.value=ve.cloneDeep(O||A),M.value=!0},L=async()=>(d.value?.validate(async O=>{if(!O){const w={title:F.value.title};r.value?de({slug:r.value.slug,...w},{onSuccess:()=>{}}):t({name:ve.startCase(ve.camelCase(a(F.value.title))).replace(/\s+/g,""),...w},{onSuccess:()=>{}}),M.value=!1}}),!1),G=Kn(null),$=Kn(!1),I=O=>{G.value=O,$.value=!0},D=async O=>{de({slug:G.value?.slug,dataStructure:O},{onSuccess:w=>{I(w)}})},le=Kn(null),B=Kn(!1),me=O=>{le.value=O,B.value=!0},y=async O=>{de({slug:le.value?.slug,settingsStructure:O},{onSuccess:w=>{me(w)}})};return(O,w)=>{const _=we,Z=ue,U=Ge,q=Sl,K=Pn,E=An,C=Ha,h=Ya,f=gl,$e=ko,fe=Cn,x=sn,i=nn,b=ln,ae=Bl;return jn(),es(Zo,null,[ct(l)&&ct(l).length?(jn(),es(Zo,{key:0},[(jn(!0),es(Zo,null,Fi(ct(l).slice((ct(T)-1)*ct(se),ct(T)*ct(se)),P=>(jn(),ts(f,{key:P.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:pl(()=>[rl(h,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":pl(({collapsed:be})=>[rl(Z,null,{default:pl(()=>[be?(jn(),ts(_,{key:0,icon:"fa-solid:chevron-left"})):(jn(),ts(_,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:pl(()=>w[6]||(w[6]=[Ba("span",null,null,-1)])),default:pl(()=>[rl(C,{name:"1"},{header:pl(()=>[Ba("div",Q_,[rl(q,null,{default:pl(()=>[ct(o)?(jn(),es(Zo,{key:0},[rl(U,{size:"small",type:"primary",secondary:"",onClick:Tr(be=>I(P),["stop"])},{default:pl(()=>[rl(Z,{class:"mr-1"},{default:pl(()=>[rl(_,{icon:"carbon:data-1"})]),_:1}),io(" "+aa(ct(e)("dataStructure")),1)]),_:2},1032,["onClick"]),rl(U,{size:"small",type:"info",secondary:"",title:ct(e)("sectionSettings"),onClick:Tr(be=>me(P),["stop"])},{default:pl(()=>[rl(Z,{class:"mr-1"},{default:pl(()=>[rl(_,{icon:"carbon:settings-edit"})]),_:1}),io(" "+aa(ct(e)("settings")),1)]),_:2},1032,["title","onClick"])],64)):W_("",!0),rl(U,{size:"small",type:"primary",secondary:"",title:ct(e)("edit"),onClick:Tr(be=>Q(P),["stop"])},{default:pl(()=>[rl(Z,null,{default:pl(()=>[rl(_,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024),rl(K,{vertical:"",class:qi(ct(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ba("span",X_,aa(ct(a)(P.title)),1)])]),default:pl(()=>[Ba("div",null,aa(ct(e)("sectionUsedInXPages",[P.pagesCount])),1),Ba("section",J_,[(jn(!0),es(Zo,null,Fi(P.pages,be=>(jn(),ts(E,{key:be.id,size:"small",class:"mr-1",type:"success"},{default:pl(()=>[io(aa(ct(a)(be.title)),1)]),_:2},1024))),128))]),Ba("div",Z_,[io(aa(ct(e)("dataRetrievalSlug"))+": ",1),Ba("b",null,aa(P.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),rl($e,{page:ct(T),"onUpdate:page":w[0]||(w[0]=P=>Ls(T)?T.value=P:null),class:"mt-5 justify-end","show-size-picker":"","page-size":ct(se),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(ct(l).length/ct(se)),"onUpdate:pageSize":he},{prefix:pl(()=>[io(aa(`${ct(l).length} ${ct(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(jn(),ts(f,{key:1,size:"large",class:qi(`mb-2 !border-dashed !border-2 ${ct(n)("!border-zinc-300","!border-zinc-600")}`)},{default:pl(()=>[rl(fe,{description:ct(e)("noSectionAvailable")},{icon:pl(()=>[rl(Z,null,{default:pl(()=>[rl(_,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),rl(ae,{show:ct(M),"onUpdate:show":w[2]||(w[2]=P=>Ls(M)?M.value=P:null),loading:ct(c)||ct(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ct(r)?ct(e)("editSection"):ct(e)("addSection"),"positive-text":ct(e)("validate"),"negative-text":ct(e)("cancel"),onPositiveClick:L,onNegativeClick:w[3]||(w[3]=P=>M.value=!1)},{default:pl(()=>[rl(b,{ref_key:"formRef",ref:d,model:ct(F),rules:re,"show-require-mark":!1,size:"medium"},{default:pl(()=>[rl(i,{"show-label":!1,path:"title",class:"mt-5"},{default:pl(()=>[rl(x,{modelValue:ct(F).title,"onUpdate:modelValue":w[1]||(w[1]=P=>ct(F).title=P),placeholder:ct(e)("title"),class:"w-full",sync:""},{label:pl(()=>[io(aa(ct(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),rl(Fc,{show:ct($),"onUpdate:show":w[4]||(w[4]=P=>Ls($)?$.value=P:null),title:ct(a)(ct(G)?.title),"raw-data-structure":ct(G)?.dataStructure,"update-data-structure":D},null,8,["show","title","raw-data-structure"]),rl(K_,{show:ct(B),"onUpdate:show":w[5]||(w[5]=P=>Ls(B)?B.value=P:null),title:ct(a)(ct(le)?.title),"settings-structure":ct(le)?.settingsStructure,"update-settings-structure":y},null,8,["show","title","settings-structure"])],64)}}}),qc=(u,e)=>go(["newsletter-emails"],async()=>{const{request:a}=Be(),n=await a({url:"/newsletter/emails"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u}),Rc=(u,e)=>go(["newsletter-phones"],async()=>{const{request:a}=Be(),n=await a({url:"/newsletter/phones"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u}),tv=(u,e)=>go(["newsletter-campaigns"],async()=>{const{request:a}=Be(),n=await a({url:"/newsletter/campaigns"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...u});class lv{id;email;createdAt;updatedAt;constructor(e,a,n,o){this.email=e,this.id=a,this.createdAt=n,this.updatedAt=o}}const nv=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-emails"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/newsletter/emails",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},av=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-emails"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/newsletter/emails/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},ov=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["newsletter-emails"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/newsletter/emails/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},sv=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["newsletter-emails"],operation:"batch",getItemId:l=>{if(l instanceof lv){if(typeof l.id!="string"&&typeof l.id!="number")throw new Error("NewsletterEmail ID must be string or number");return l.id}return`temp-${crypto.randomUUID()}`},getBatchData:l=>({type:"remove",ids:l}),mutationFn:async l=>{n.start();try{for(let t=0;t<l.length;t++)await e({url:`/newsletter/emails/${l[t]}`,method:"delete"});return l}finally{n.finish()}},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},rv=()=>{const{request:u}=Be();return Qn(async e=>{const a=await u({method:"post",url:"/newsletter/emails",data:e});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{})},{defineComponent:iv}=await pe("vue"),{unref:at,createVNode:Mt,withCtx:Nt,toDisplayString:ha,createTextVNode:Oa,resolveComponent:R1,createElementVNode:Ri,openBlock:zr,createBlock:ji,createCommentVNode:cv,isRef:Ki,Fragment:dv,createElementBlock:uv}=await pe("vue"),pv={class:"flex items-center justify-center"},{ref:Gn,h:en,computed:mv,onBeforeUnmount:fv}=await pe("vue"),_v=iv({__name:"Email",setup(u){const e=Xe(),a=Fe(),n=Yl(),{data:o,refetch:l,isPending:t}=qc(),{mutate:c,isPending:de}=sv(),{mutate:Y}=ov(),{mutate:se,isPending:T}=nv(),{mutate:he,isPending:A}=av(),{mutateAsync:M}=rv(),{t:d,locale:F}=xe(),re=Gn(""),r=Gn(),Q={pageSize:12,prefix:({itemCount:i})=>en("div",{class:"font-bold"},{default:()=>`${d("total")}: ${i}`})},L=[{type:"selection"},{title:d("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(i){return en("div",{},{default:()=>i.email})}},{title:d("updateAt"),key:"updatedAt",width:125,render(i){return en("div",{},{default:()=>pa(i.updatedAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(i){return en("div",{},{default:()=>pa(i.createdAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>en(Xt,{ref:r,placeholder:d("search"),value:re.value,onInput:i=>{re.value=i}},{suffix:()=>en(ue,{},{default:()=>en(we,{icon:"carbon:search"})})}),key:"actions",width:150,render(i){return en("div",{class:"flex justify-end items-center w-full"},[en(Ge,{size:"small",type:"warning",secondary:!0,onClick:()=>{y(i)},renderIcon:()=>en(ue,null,{default:()=>en(we,{icon:"carbon:edit"})})}),en("div",{class:"w-2"}),en(Ge,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:d("confirm"),content:d("confirmDeleteEmailAddress"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{i.id&&Y({id:i.id})}})},renderIcon:()=>en(ue,null,{default:()=>en(we,{icon:"carbon:trash-can"})})})])},fixed:"right"}],G=mv(()=>{if(!re.value)return o.value;const i=o.value?.filter(b=>b.email.toLowerCase().includes(re.value.toLowerCase()));return r.value&&r.value.focus(),i}),$=Gn(!1),I=Gn(!1),D=Gn(null),le=Gn(null),B=Gn({email:""}),me={email:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(i,b){return b&&!_o.isEmail(b)?new Error(d("invalidEmail")):!0}}]},y=i=>{D.value=ve.cloneDeep(i),i?B.value=ve.cloneDeep(i):B.value={email:""},I.value=!0},O=async()=>(le.value?.validate(async i=>{if(!i){const b={email:B.value.email};D.value?D.value.email!==B.value.email&&(o.value||[]).findIndex(ae=>ae.email==B.value.email)>-1?a.error(d("sameEmailAddressMessage")):he({id:D.value.id,...b}):(o.value||[]).findIndex(ae=>ae.email==B.value.email)>-1?a.error(d("sameEmailAddressMessage")):se(b),I.value=!1}}),!1);let w=null;const _=()=>{w&&(w.destroy(),w=null)};fv(_);const Z=(i,b)=>b.map(ae=>i.map(P=>ae[P])),U=()=>{w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}),yo(()=>import("./export2excel-5gGdj0tl.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(i=>{var b=["no","email","createdAt","updatedAt"];const ae=ve.sortBy(o.value?.map((be,Ie)=>({no:Ie+1,...be})),"email"),P=Z(b,ae);try{i.export_json_to_excel({header:b,data:P,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),_()}catch{_(),a.error(d("anErrorOccurred"))}})},q=()=>{w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}),yo(()=>import("./export2excel-5gGdj0tl.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(i=>{var b=["email"];const ae=Z(b,[{email:"adresse@email.com"}]);try{i.export_json_to_excel({header:b,data:ae,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),_()}catch{_(),a.error(d("anErrorOccurred"))}})},K=Gn(!1),E=async({results:i})=>{$.value=!0,e.start(),w||(w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let b=0;b<i.length;b++)i[b].email&&o.value?.findIndex(ae=>ae.email==i[b].email)==-1&&(w&&(w.content=`${d("pleaseBePatient")}: ${b} ${d("task_s")} / ${i.length}`),await M({email:i[b].email}));await l(),_(),e.finish(),$.value=!1,K.value=!1},C=Gn(Gl()),h=Gn([]),f=i=>i.id,$e=i=>{h.value=i},fe=()=>{h.value=[],C.value=Gl()},x=async()=>(h.value.length?n.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[h.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{c(h.value,{onSuccess:()=>{fe()}})}}):a.warning(d("noItemSelected")),!1);return(i,b)=>{const ae=Ec,P=Sl,be=zn,Ie=gl,ge=Dn,_e=Xs,ne=Hs,g=nn,k=ln,ee=Bl,z=Ac;return zr(),uv(dv,null,[Mt(be,{to:"#alt-action"},{default:Nt(()=>[Mt(P,null,{default:Nt(()=>[Mt(ae,{onPositiveClick:b[0]||(b[0]=Se=>U())},{trigger:Nt(()=>[Mt(at(Ge),{type:"success",secondary:""},{icon:Nt(()=>[Mt(at(ue),{size:"18"},{default:Nt(()=>[Mt(at(we),{icon:"carbon:upload"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("export")),1)]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("exportDataInExcelFile")),1)]),_:1}),Mt(at(Ge),{type:"info",secondary:"",onClick:b[1]||(b[1]=Se=>K.value=!0)},{icon:Nt(()=>[Mt(at(ue),{size:"18"},{default:Nt(()=>[Mt(at(we),{icon:"carbon:download"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("import")),1)]),_:1}),Mt(at(Ge),{type:"primary",secondary:"",onClick:b[2]||(b[2]=Se=>y(null))},{icon:Nt(()=>[Mt(at(ue),{size:"18"},{default:Nt(()=>[Mt(at(we),{icon:"carbon:add-alt"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),Mt(ge,{name:"slide-fade",appear:""},{default:Nt(()=>[at(h).length?(zr(),ji(Ie,{key:0,class:"my-2",size:"small",embedded:""},{default:Nt(()=>[Mt(P,{align:"center",justify:"space-between"},{default:Nt(()=>[Ri("span",null,ha(at(d)("nbItemsSelected",[at(h).length])),1),Mt(P,{align:"center",justify:"space-between"},{default:Nt(()=>[Mt(at(Ge),{type:"error",size:"small",secondary:"",onClick:x},{icon:Nt(()=>[Mt(at(ue),null,{default:Nt(()=>[Mt(at(we),{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("delete")),1)]),_:1}),Mt(at(Ge),{type:"warning",size:"small",secondary:"",onClick:fe},{icon:Nt(()=>[Mt(at(ue),null,{default:Nt(()=>[Mt(at(we),{icon:"carbon:close"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):cv("",!0)]),_:1}),Mt(ne,null,{default:Nt(()=>[(zr(),ji(_e,{key:at(C),columns:L,data:at(G),pagination:Q,loading:at(t)||at(de),"single-line":!1,"scroll-x":800,"row-key":f,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),Mt(ee,{show:at(I),"onUpdate:show":b[4]||(b[4]=Se=>Ki(I)?I.value=Se:null),loading:at(T)||at(A),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:at(D)?at(d)("editEmailAddress"):at(d)("addEmailAddress"),"positive-text":at(d)("validate"),"negative-text":at(d)("cancel"),onPositiveClick:O,onNegativeClick:b[5]||(b[5]=Se=>I.value=!1)},{default:Nt(()=>[Mt(k,{ref_key:"formRef",ref:le,class:"mt-5",model:at(B),rules:me,"show-require-mark":!1,size:"medium"},{default:Nt(()=>[Mt(g,{label:at(d)("emailAddress"),path:"email"},{default:Nt(()=>[Mt(at(Xt),{value:at(B).email,"onUpdate:value":b[3]||(b[3]=Se=>at(B).email=Se),placeholder:at(d)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Mt(ee,{show:at(K),"onUpdate:show":b[7]||(b[7]=Se=>Ki(K)?K.value=Se:null),loading:at($),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:at(d)("import")},{default:Nt(()=>[Mt(z,{class:"my-5","on-success":E}),Ri("div",pv,[Mt(at(Ge),{type:"info",size:"small",secondary:"",onClick:b[6]||(b[6]=Se=>q())},{icon:Nt(()=>[Mt(at(ue),null,{default:Nt(()=>[Mt(at(we),{icon:"carbon:download"})]),_:1})]),default:Nt(()=>[Oa(" "+ha(at(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class vv{id;phone;createdAt;updatedAt;constructor(e,a,n,o){this.phone=e,this.id=a,this.createdAt=n,this.updatedAt=o}}const yv=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-phones"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/newsletter/phones",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},gv=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-phones"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/newsletter/phones/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},hv=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["newsletter-phones"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/newsletter/phones/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},bv=u=>{const{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return dt({queryKey:["newsletter-phones"],operation:"batch",getItemId:l=>{if(l instanceof vv){if(typeof l.id!="string"&&typeof l.id!="number")throw new Error("NewsletterPhone ID must be string or number");return l.id}return`temp-${crypto.randomUUID()}`},getBatchData:l=>({type:"remove",ids:l}),mutationFn:async l=>{n.start();try{for(let t=0;t<l.length;t++)await e({url:`/newsletter/phones/${l[t]}`,method:"delete"});return l}finally{n.finish()}},mutationOptions:{onSuccess:()=>{o.success(a("success"))},onError:l=>{o.error(a("anErrorOccurred"))},...u}})},kv=()=>{const{request:u}=Be();return Qn(async e=>{const a=await u({method:"post",url:"/newsletter/phones",data:e});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{})},{defineComponent:wv}=await pe("vue"),{unref:it,createVNode:Tt,withCtx:zt,toDisplayString:ba,createTextVNode:Fa,resolveComponent:j1,createElementVNode:Gi,openBlock:Dr,createBlock:Yi,createCommentVNode:xv,isRef:Hi,Fragment:$v,createElementBlock:Cv}=await pe("vue"),Iv={class:"flex items-center justify-center"},{ref:Yn,h:tn,computed:Vv,onBeforeUnmount:Sv}=await pe("vue"),Ev=wv({__name:"Phone",setup(u){const e=Xe(),a=Fe(),n=Yl(),{data:o,refetch:l,isPending:t}=Rc(),{mutate:c,isPending:de}=bv(),{mutate:Y}=hv(),{mutate:se,isPending:T}=yv(),{mutate:he,isPending:A}=gv(),{mutateAsync:M}=kv(),{t:d,locale:F}=xe(),re=Yn(""),r=Yn(),Q={pageSize:12,prefix:({itemCount:i})=>tn("div",{class:"font-bold"},{default:()=>`${d("total")}: ${i}`})},L=[{type:"selection"},{title:d("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(i){return tn("div",{},{default:()=>i.phone})}},{title:d("updateAt"),key:"updatedAt",width:125,render(i){return tn("div",{},{default:()=>pa(i.updatedAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(i){return tn("div",{},{default:()=>pa(i.createdAt,{locale:F.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>tn(Xt,{ref:r,placeholder:d("search"),value:re.value,onInput:i=>{re.value=i}},{suffix:()=>tn(ue,{},{default:()=>tn(we,{icon:"carbon:search"})})}),key:"actions",width:150,render(i){return tn("div",{class:"flex justify-end items-center w-full"},[tn(Ge,{size:"small",type:"warning",secondary:!0,onClick:()=>{y(i)},renderIcon:()=>tn(ue,null,{default:()=>tn(we,{icon:"carbon:edit"})})}),tn("div",{class:"w-2"}),tn(Ge,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:d("confirm"),content:d("confirmDeletePhoneNumber"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{i.id&&Y({id:i.id})}})},renderIcon:()=>tn(ue,null,{default:()=>tn(we,{icon:"carbon:trash-can"})})})])},fixed:"right"}],G=Vv(()=>{if(!re.value)return o.value;const i=o.value?.filter(b=>b.phone.toLowerCase().includes(re.value.toLowerCase()));return r.value&&r.value.focus(),i}),$=Yn(!1),I=Yn(!1),D=Yn(null),le=Yn(null),B=Yn({phone:""}),me={phone:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(i,b){return b&&!vd(b)?new Error(d("invalidNumber")):!0}}]},y=i=>{D.value=ve.cloneDeep(i),i?B.value=ve.cloneDeep(i):B.value={phone:""},I.value=!0},O=async()=>(le.value?.validate(async i=>{if(!i){const b={phone:B.value.phone.replace(/\s+/g,"")};D.value?D.value.phone!==B.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(ae=>ae.phone==B.value.phone.replace(/\s+/g,""))>-1?a.error(d("samePhoneNumberMessage")):he({id:D.value.id,...b}):(o.value||[]).findIndex(ae=>ae.phone==B.value.phone.replace(/\s+/g,""))>-1?a.error(d("samePhoneNumberMessage")):se(b),I.value=!1}}),!1);let w=null;const _=()=>{w&&(w.destroy(),w=null)};Sv(_);const Z=(i,b)=>b.map(ae=>i.map(P=>ae[P])),U=()=>{w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}),yo(()=>import("./export2excel-5gGdj0tl.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(i=>{var b=["no","phone","createdAt","updatedAt"];const ae=ve.sortBy(o.value?.map((be,Ie)=>({no:Ie+1,...be})),"phone"),P=Z(b,ae);try{i.export_json_to_excel({header:b,data:P,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),_()}catch{_(),a.error(d("anErrorOccurred"))}})},q=()=>{w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}),yo(()=>import("./export2excel-5gGdj0tl.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(i=>{var b=["phone"];const ae=Z(b,[{phone:"+XXX XXX XXXXX"}]);try{i.export_json_to_excel({header:b,data:ae,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),_()}catch{_(),a.error(d("anErrorOccurred"))}})},K=Yn(!1),E=async({results:i})=>{$.value=!0,e.start(),w||(w=a.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let b=0;b<i.length;b++)i[b].phone&&o.value?.findIndex(ae=>ae.phone.replace(/\s+/g,"")==i[b].phone.replace(/\s+/g,""))==-1&&(w&&(w.content=`${d("pleaseBePatient")}: ${b} ${d("task_s")} / ${i.length}`),await M({phone:i[b].phone.replace(/\s+/g,"")}));await l(),_(),e.finish(),$.value=!1,K.value=!1},C=Yn(Gl()),h=Yn([]),f=i=>i.id,$e=i=>{h.value=i},fe=()=>{h.value=[],C.value=Gl()},x=async()=>(h.value.length?n.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[h.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{c(h.value,{onSuccess:()=>{fe()}})}}):a.warning(d("noItemSelected")),!1);return(i,b)=>{const ae=Ec,P=Sl,be=zn,Ie=gl,ge=Dn,_e=Xs,ne=Hs,g=_d,k=nn,ee=ln,z=Bl,Se=Ac;return Dr(),Cv($v,null,[Tt(be,{to:"#alt-action"},{default:zt(()=>[Tt(P,null,{default:zt(()=>[Tt(ae,{onPositiveClick:b[0]||(b[0]=Ye=>U())},{trigger:zt(()=>[Tt(it(Ge),{type:"success",secondary:""},{icon:zt(()=>[Tt(it(ue),{size:"18"},{default:zt(()=>[Tt(it(we),{icon:"carbon:upload"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("export")),1)]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("exportDataInExcelFile")),1)]),_:1}),Tt(it(Ge),{type:"info",secondary:"",onClick:b[1]||(b[1]=Ye=>K.value=!0)},{icon:zt(()=>[Tt(it(ue),{size:"18"},{default:zt(()=>[Tt(it(we),{icon:"carbon:download"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("import")),1)]),_:1}),Tt(it(Ge),{type:"primary",secondary:"",onClick:b[2]||(b[2]=Ye=>y(null))},{icon:zt(()=>[Tt(it(ue),{size:"18"},{default:zt(()=>[Tt(it(we),{icon:"carbon:add-alt"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Tt(ge,{name:"slide-fade",appear:""},{default:zt(()=>[it(h).length?(Dr(),Yi(Ie,{key:0,class:"my-2",size:"small",embedded:""},{default:zt(()=>[Tt(P,{align:"center",justify:"space-between"},{default:zt(()=>[Gi("span",null,ba(it(d)("nbItemsSelected",[it(h).length])),1),Tt(P,{align:"center",justify:"space-between"},{default:zt(()=>[Tt(it(Ge),{type:"error",size:"small",secondary:"",onClick:x},{icon:zt(()=>[Tt(it(ue),null,{default:zt(()=>[Tt(it(we),{icon:"carbon:trash-can"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("delete")),1)]),_:1}),Tt(it(Ge),{type:"warning",size:"small",secondary:"",onClick:fe},{icon:zt(()=>[Tt(it(ue),null,{default:zt(()=>[Tt(it(we),{icon:"carbon:close"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):xv("",!0)]),_:1}),Tt(ne,null,{default:zt(()=>[(Dr(),Yi(_e,{key:it(C),columns:L,data:it(G),pagination:Q,loading:it(t)||it(de),"single-line":!1,"scroll-x":800,"row-key":f,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),Tt(z,{show:it(I),"onUpdate:show":b[4]||(b[4]=Ye=>Hi(I)?I.value=Ye:null),loading:it(T)||it(A),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:it(D)?it(d)("editPhoneNumber"):it(d)("addPhoneNumber"),"positive-text":it(d)("validate"),"negative-text":it(d)("cancel"),onPositiveClick:O,onNegativeClick:b[5]||(b[5]=Ye=>I.value=!1)},{default:zt(()=>[Tt(ee,{ref_key:"formRef",ref:le,class:"mt-5",model:it(B),rules:me,"show-require-mark":!1,size:"medium"},{default:zt(()=>[Tt(k,{label:it(d)("phone"),path:"phone"},{default:zt(()=>[Tt(g,{modelValue:it(B).phone,"onUpdate:modelValue":b[3]||(b[3]=Ye=>it(B).phone=Ye)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Tt(z,{show:it(K),"onUpdate:show":b[7]||(b[7]=Ye=>Hi(K)?K.value=Ye:null),loading:it($),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:it(d)("import")},{default:zt(()=>[Tt(Se,{class:"my-5","on-success":E}),Gi("div",Iv,[Tt(it(Ge),{type:"info",size:"small",secondary:"",onClick:b[6]||(b[6]=Ye=>q())},{icon:zt(()=>[Tt(it(ue),null,{default:zt(()=>[Tt(it(we),{icon:"carbon:download"})]),_:1})]),default:zt(()=>[Fa(" "+ba(it(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Uv="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:Wi,mergeModels:Mv,defineComponent:Nv}=await pe("vue"),{unref:Vt,toDisplayString:co,createElementVNode:ls,createTextVNode:Bs,resolveComponent:K1,withCtx:qt,createVNode:vl,renderList:Ar,Fragment:ns,openBlock:Nn,createElementBlock:as,createBlock:uo,createCommentVNode:Qi,normalizeStyle:Pr,normalizeClass:Tv}=await pe("vue"),zv={class:"text-base"},Dv={class:"text-base"},{ref:qa,inject:Av,computed:Pv,watch:Lv,reactive:Os}=await pe("vue"),Bv=Nv({__name:"DataForm",props:Mv({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,a=Wi(u,"show"),n=Wi(u,"data"),o=Xe(),l=Fe(),{t}=xe(),{tr:c,pickByTheme:de,editKeysToCamelCase:Y}=Je(),se=qa(null),T=qa(!1),he=Av("currentEditItem"),A=Pv(()=>ve.isEqual(n.value,he?.value)&&ve.isEqual(d.value,re.value)),M=()=>{a.value=!1,T.value=!1},d=qa({}),F=qa(Gl()),re=qa({}),r=qa(),Q=qa();Lv(()=>a.value,G=>{G&&(gc(n.value.contentModelData)?d.value=Os(n.value.contentModelData):d.value=Os({}),ve.forIn(Y(e.contentModel?.dataStructure??{}),($,I)=>{(!d.value[I]||Array.isArray(d.value[I])&&d.value[I].length==0)&&(I==="index"?d.value[I]=Os({}):d.value[I]=Os([]))}),re.value=ve.cloneDeep(d.value),F.value=Gl())},{immediate:!0});const L=async()=>{T.value=!0,o.start();const G=r.value&&await r.value(),$=Q.value&&await Q.value();(!r.value||G)&&(!Q.value||$)?await e.submitData(d.value):l.error(t("mandatoryFieldsNotFilledIn")),o.finish(),T.value=!1};return(G,$)=>{const I=li,D=Qs,le=Ws,B=we,me=ue,y=Ge,O=Sl,w=gl,_=$n,Z=Xn,U=rn,q=Wr;return Nn(),uo(q,{modelValue:a.value,"onUpdate:modelValue":$[3]||($[3]=K=>a.value=K),"close-on-esc":!1,closable:!1,onOnSizeChange:$[4]||($[4]=K=>{se.value=K})},{header:qt(()=>[ls("div",zv,[vl(I,{depth:"1"},{default:qt(()=>[Bs(co(Vt(c)(e.contentModel?.title))+" ",1),ls("span",null," Â -Â "+co(Vt(he)?Vt(t)("editItem"):Vt(t)("addItem")),1)]),_:1})])]),"header-extra":qt(()=>[vl(O,{align:"center"},{default:qt(()=>[ls("span",Dv,co(Vt(t)("status"))+":",1),vl(le,{value:n.value.isActive,"onUpdate:value":$[0]||($[0]=K=>n.value.isActive=K),name:"isActive",class:"w-full"},{default:qt(()=>[vl(D,{value:!1,label:Vt(t)("hidden"),class:"w-[50%]"},null,8,["label"]),vl(D,{value:!0,label:Vt(t)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),$[5]||($[5]=ls("div",{class:"w-4"},null,-1)),vl(y,{secondary:"",type:"success",title:Vt(t)("save"),loading:Vt(T),disabled:Vt(A),onClick:$[1]||($[1]=K=>L())},{icon:qt(()=>[vl(me,null,{default:qt(()=>[vl(B,{icon:"carbon:save"})]),_:1})]),default:qt(()=>[Bs(" "+co(Vt(t)("save")),1)]),_:1},8,["title","loading","disabled"]),vl(y,{secondary:"",type:"error",title:Vt(t)("close"),disabled:Vt(T),onClick:$[2]||($[2]=K=>M())},{icon:qt(()=>[vl(me,null,{default:qt(()=>[vl(B,{icon:"carbon:close"})]),_:1})]),default:qt(()=>[Bs(" "+co(Vt(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1,__:[5]})]),default:qt(()=>[ls("section",{style:Pr(`min-height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-5}px`),class:Tv(`w-full h-full ${Vt(de)("bg-slate-200","bg-zinc-800")}`)},[vl(U,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:qt(()=>[vl(Z,{class:"ml-4 mt-2"},{default:qt(()=>[vl(_,{style:Pr(`height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-50}px`)},{default:qt(()=>[(Nn(!0),as(ns,null,Ar(Vt(Y)(G.contentModel?.dataStructure),(K,E)=>(Nn(),as(ns,{key:E},[String(E)==="index"?(Nn(),uo(w,{key:0,size:"small",class:"mb-2"},{default:qt(()=>[(Nn(),uo(Ys,{key:`${Vt(F)}-${E}-form-1`,modelValue:Vt(d)[E],"onUpdate:modelValue":C=>Vt(d)[E]=C,items:K,onUpdate:(C,h)=>{r.value=h}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):Qi("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),vl(Z,{class:"mr-4 mt-2"},{default:qt(()=>[vl(_,{style:Pr(`height: ${Vt(se)?.windowHeight-Vt(se)?.headerHeight-50}px`)},{default:qt(()=>[(Nn(!0),as(ns,null,Ar(Vt(Y)(G.contentModel?.dataStructure),(K,E)=>(Nn(),as(ns,{key:E},[String(E)!=="index"?(Nn(),uo(w,{key:0,title:Vt(c)(K.title),size:"small",class:"mb-2"},{"header-extra":qt(()=>[vl(y,{quaternary:"",size:"small",onClick:()=>Vt(d)[E].push({})},{icon:qt(()=>[vl(me,null,{default:qt(()=>[vl(B,{icon:"carbon:add-alt"})]),_:1})]),default:qt(()=>[Bs(" "+co(Vt(t)("add")),1)]),_:2},1032,["onClick"])]),default:qt(()=>[(Nn(!0),as(ns,null,Ar(Vt(d)[E],(C,h)=>(Nn(),uo(w,{key:h,title:String(h+1),size:"small",class:"mb-2"},{"header-extra":qt(()=>[vl(y,{secondary:"",type:"error",size:"small",onClick:()=>Vt(d)[E].splice(h,1)},{icon:qt(()=>[vl(me,null,{default:qt(()=>[vl(B,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:qt(()=>[(Nn(),uo(Ys,{key:`${Vt(F)}-${E}-${h}-form-2`,modelValue:Vt(d)[E][h],"onUpdate:modelValue":f=>Vt(d)[E][h]=f,items:K.items,onUpdate:(f,$e)=>{Q.value=$e}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):Qi("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:Ov,mergeModels:Fv,defineComponent:qv}=await pe("vue"),{unref:Dt,resolveComponent:G1,createVNode:Il,toDisplayString:Fs,createTextVNode:Xi,withCtx:Ll,renderList:Rv,Fragment:Ji,openBlock:os,createElementBlock:Zi,createElementVNode:qs,createBlock:Lr,normalizeClass:jv,isRef:Kv}=await pe("vue"),{inject:Gv,ref:ss,h:ec,computed:tc}=await pe("vue"),Yv={class:"flex items-center justify-between"},Hv={class:"flex flex-col"},Wv={class:"text-sm font-bold"},Qv={class:"text-xs font-normal"},Xv=qv({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Fv(["update"],["update:show"]),setup(u,{emit:e}){const{t:a}=xe(),{pickByTheme:n,tr:o,mergeArrays:l}=Je(),{extractItemTitle:t}=ms(),{data:c}=Ca(),{mutate:de,isPending:Y}=Lc(),se=Yl(),T=e,he=Ov(u,"show"),A=Gv("currentEditItem"),M=async O=>{se.warning({title:a("confirm"),content:a("confirmDeleteLink"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{de({id:A?.value?.id,relatedItems:A?.value?.relatedItems?.filter(w=>w.id!==O.id)?.map(w=>w.id)},{onSuccess:()=>{T("update",A?.value?.id)}})}})},d=O=>c.value?.find(w=>w.id===O.contentModelId),F=ss(!1),re=ss(null),r=ss({contentModelId:null,itemId:null}),Q={contentModelId:[{required:!0,message:a("fillRequired")}],itemId:[{required:!0,message:a("fillRequired")}]},L=async()=>(re.value?.validate(async O=>{if(!O){const w=A?.value?.relatedItems?.map(_=>_.id)||[];de({id:A?.value?.id,relatedItems:[...w,r.value.itemId]},{onSuccess:()=>{T("update",A?.value?.id),F.value=!1}})}}),!1),G=O=>ec("span",{},{default:()=>o(O.title)}),$=O=>tc(()=>ec("span",{},{default:()=>t(O,d(O))})),I=ss([]),D=ss([]),{mutateAsync:le,isPending:B}=ni(),me=async(O,w)=>{if(!O.length){D.value=[];return}D.value=await le({query:O,contentModelId:w})},y=tc(()=>l(I.value,D.value,"id").filter(O=>O.id!==A?.value?.id));return(O,w)=>{const _=we,Z=Ge,U=Sl,q=ue,K=gl,E=$n,C=Cn,h=bo,f=Bl,$e=In,fe=nn,x=ln;return os(),Zi(Ji,null,[Il(f,{show:he.value,"onUpdate:show":w[2]||(w[2]=i=>he.value=i),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Dt(a)("linkContentModelItems")},{"header-extra":Ll(()=>[Il(U,{align:"center"},{default:Ll(()=>[Il(Z,{secondary:"",size:"small",type:"primary",disabled:Dt(Y),onClick:w[0]||(w[0]=i=>F.value=!0)},{default:Ll(()=>[Il(_,{icon:"carbon:add-alt",class:"mr-1"}),Xi(" "+Fs(Dt(a)("add")),1)]),_:1},8,["disabled"]),Il(Z,{secondary:"",size:"small",type:"error",disabled:Dt(Y),onClick:w[1]||(w[1]=i=>he.value=!1)},{default:Ll(()=>[Il(_,{icon:"carbon:close",class:"mr-1"}),Xi(" "+Fs(Dt(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Ll(()=>[Il(h,{show:Dt(Y)},{default:Ll(()=>[Dt(A)?.relatedItems?.length?(os(),Lr(E,{key:0,style:{"max-height":"400px"}},{default:Ll(()=>[(os(!0),Zi(Ji,null,Rv(Dt(A)?.relatedItems,i=>(os(),Lr(K,{key:i.id,embedded:"",size:"small",class:"mb-2"},{default:Ll(()=>[qs("div",Yv,[qs("div",Hv,[qs("span",Wv,Fs(Dt(t)(i,d(i))),1),qs("span",Qv,Fs(Dt(o)(d(i)?.title)),1)]),Il(U,null,{default:Ll(()=>[Il(Z,{size:"small",type:"error",secondary:"",onClick:b=>M(i)},{default:Ll(()=>[Il(q,null,{default:Ll(()=>[Il(_,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(os(),Lr(K,{key:1,size:"large",class:jv(`mb-2 !border-dashed !border-2 ${Dt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Ll(()=>[Il(C,{description:Dt(a)("noLinkAdded")},{icon:Ll(()=>[Il(q,null,{default:Ll(()=>[Il(_,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Il(f,{show:Dt(F),"onUpdate:show":w[6]||(w[6]=i=>Kv(F)?F.value=i:null),loading:Dt(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Dt(a)("addLink"),"positive-text":Dt(a)("validate"),"negative-text":Dt(a)("cancel"),onPositiveClick:L,onNegativeClick:w[7]||(w[7]=i=>F.value=!1)},{default:Ll(()=>[Il(x,{ref_key:"formRef",ref:re,model:Dt(r),rules:Q,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Ll(()=>[Il(fe,{label:Dt(a)("contentModel"),path:"contentModelId"},{default:Ll(()=>[Il($e,{value:Dt(r).contentModelId,"onUpdate:value":w[3]||(w[3]=i=>Dt(r).contentModelId=i),options:Dt(c),placeholder:Dt(a)("contentModel"),"render-label":G,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Il(fe,{label:Dt(a)("itemToLink"),path:"itemId"},{default:Ll(()=>[Il($e,{value:Dt(r).itemId,"onUpdate:value":w[4]||(w[4]=i=>Dt(r).itemId=i),options:Dt(y)||[],placeholder:Dt(a)("itemToLink"),"render-label":i=>$(i).value,loading:Dt(B),disabled:!Dt(r).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:w[5]||(w[5]=i=>me(i,Dt(r).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Jv}=await pe("vue"),{useModel:Zv,defineComponent:ey}=await pe("vue"),{unref:Ct,toDisplayString:oa,createTextVNode:ka,resolveComponent:Y1,isRef:rs,withCtx:St,createVNode:It,createElementVNode:is,openBlock:wa,createElementBlock:cs,createCommentVNode:lc,renderList:ty,Fragment:nc,createBlock:Br}=await pe("vue"),ly={key:0,class:"w-full flex items-center justify-between gap-4"},ny={class:"flex items-center gap-3"},ay={key:0},oy={class:"flex items-center justify-center h-full"},sy=["src"],ry={class:"text-center text-dimgray text-sm"},iy={key:1,class:"flex items-center justify-center"},{ref:Tn,computed:ac,watch:cy,provide:dy}=await pe("vue"),uy=ey({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=xe(),{extractItemTitle:a}=ms(),{tr:n}=Je(),o=Yl(),l=Fe(),t=Zv(u,"modelValue"),c=Tn(!1),de=Tn(!1),Y=Tn([]),{mutate:se}=Iu(),{mutate:T}=Cu(),{mutate:he}=Lc(),{mutate:A}=Vu(),M=Tn(0),d=Tn(12),F=Tn(1),re=ac(()=>({contentModelId:t.value?.id,pageSize:d.value,page:F.value})),r=E=>{F.value=E,G()},Q=E=>{d.value=E,G()},{data:L,refetch:G,isPending:$}=Qc(re);cy(()=>L.value,E=>{Y.value=E?.items||[],M.value=E?.meta?.total||0,F.value=E?.meta?.currentPage||1},{deep:!0,immediate:!0});const I=Tn(null),D=Tn({title:"",contentModelData:"",isActive:!0}),le=E=>{I.value=ve.cloneDeep(E),E?D.value=ve.cloneDeep(E):D.value={title:"",contentModelData:"",isActive:!0},c.value=!0},B=E=>{I.value=ve.cloneDeep(E),de.value=!0},me=async E=>{await G();const C=Y.value.find(h=>h.id===E);C&&B(C)},y=async E=>{o.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{E.id&&se({id:E.id})}})},O=async E=>{const C={title:D.value.title,contentModelData:E,isActive:D.value.isActive,contentModelId:t.value?.id};I.value?he({id:I.value.id,...C}):T(C),c.value=!1},w=Tn(!1),_=Tn(Gl()),Z=Tn({}),U=ac(()=>{let E=0;for(const C in Z.value)Z.value[C]&&E++;return E});function q(){Z.value={},G()}const K=async()=>(U.value?o.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[U.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{A(Z.value,{onSuccess:()=>{Z.value={}}})}}):l.warning(e("noItemSelected")),!1);return dy("currentEditItem",I),(E,C)=>{const h=Va,f=we,$e=ue,fe=Ge,x=Sl,i=zn,b=Ic,ae=er,P=An,be=gl,Ie=Dn,ge=Xn,_e=rn,ne=ko,g=bo,k=Cn;return wa(),cs(nc,null,[It(i,{to:"#alt-action"},{default:St(()=>[It(x,{align:"center"},{default:St(()=>[It(h,{checked:Ct(w),"onUpdate:checked":[C[0]||(C[0]=ee=>rs(w)?w.value=ee:null),C[1]||(C[1]=ee=>{for(const z of Ct(Y))z.id&&(Ct(Z)[z.id]=ee);_.value=("uuidv4"in E?E.uuidv4:Jv(Gl))()})],disabled:!Ct(Y).length},{default:St(()=>[ka(oa(Ct(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),It(fe,{type:"primary",secondary:"",onClick:C[2]||(C[2]=ee=>le(null))},{icon:St(()=>[It($e,{size:"18"},{default:St(()=>[It(f,{icon:"carbon:add-alt"})]),_:1})]),default:St(()=>[ka(" "+oa(Ct(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),It(b,{class:"mt-2 mb-5",onBack:C[3]||(C[3]=ee=>t.value=null)},{title:St(()=>[ka(oa(Ct(n)(t.value?.title)),1)]),back:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:St(()=>[Ct(U)>0?(wa(),cs("section",ly,[is("span",null,oa(Ct(e)("nbItemsSelected",[Ct(U)])),1),is("section",ny,[It(fe,{type:"error",secondary:"",size:"small",onClick:K},{icon:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[ka(" "+oa(Ct(e)("delete")),1)]),_:1}),It(fe,{type:"warning",secondary:"",size:"small",onClick:q},{icon:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"carbon:close-filled"})]),_:1})]),default:St(()=>[ka(" "+oa(Ct(e)("cancelSelection")),1)]),_:1})])])):lc("",!0)]),_:1}),Ct(Y).length&&!Ct($)?(wa(),cs("section",ay,[It(_e,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:St(()=>[(wa(!0),cs(nc,null,ty(Ct(Y),(ee,z)=>(wa(),Br(ge,{key:z},{default:St(()=>[It(Ie,{name:"slide-fade",appear:""},{default:St(()=>[It(be,{size:"small",bordered:"",hoverable:""},{cover:St(()=>[is("div",oy,[is("img",{src:t.value?.imageUrl??Ct(Uv),class:"w-full h-[200px] object-cover"},null,8,sy)])]),header:St(()=>[is("div",ry,[It(ae,{"line-clamp":1,"expand-trigger":"click"},{default:St(()=>[ee.id?(wa(),Br(h,{key:Ct(_),checked:Ct(Z)[ee.id],"onUpdate:checked":Se=>Ct(Z)[ee.id]=Se,class:"mr-1"},null,8,["checked","onUpdate:checked"])):lc("",!0),ka(" "+oa(Ct(a)(ee,t.value)),1)]),_:2},1024)])]),action:St(()=>[It(x,{justify:"space-between",align:"center"},{default:St(()=>[It(P,{bordered:!1,type:ee.isActive?"success":"error"},{default:St(()=>[ka(oa(ee.isActive?Ct(e)("visible"):Ct(e)("hidden")),1)]),_:2},1032,["type"]),It(x,null,{default:St(()=>[It(fe,{ternary:"",circle:"",title:Ct(e)("edit"),onClick:Se=>le(ee)},{icon:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),It(fe,{ternary:"",circle:"",title:Ct(e)("links"),onClick:Se=>B(ee)},{icon:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),It(fe,{ternary:"",circle:"",title:Ct(e)("delete"),onClick:Se=>y(ee)},{icon:St(()=>[It($e,null,{default:St(()=>[It(f,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),It(ne,{page:Ct(F),"onUpdate:page":[C[4]||(C[4]=ee=>rs(F)?F.value=ee:null),r],class:"mt-10 justify-center","show-size-picker":"","page-size":Ct(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(Ct(M)/Ct(d)),"onUpdate:pageSize":Q},{prefix:St(()=>[ka(oa(`${Ct(M)} ${Ct(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):Ct($)?(wa(),cs("section",iy,[It(g,{size:"medium"})])):(wa(),Br(k,{key:2,description:Ct(e)("noItemAdded"),class:"my-16"},null,8,["description"])),It(Bv,{show:Ct(c),"onUpdate:show":C[5]||(C[5]=ee=>rs(c)?c.value=ee:null),data:Ct(D),"onUpdate:data":C[6]||(C[6]=ee=>rs(D)?D.value=ee:null),"content-model":t.value,"submit-data":O},null,8,["show","data","content-model"]),It(Xv,{show:Ct(de),"onUpdate:show":C[7]||(C[7]=ee=>rs(de)?de.value=ee:null),onUpdate:me},null,8,["show"])],64)}}}),py=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["content-models"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/content-models",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},my=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["content-models"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/content-models/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},fy=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["content-models"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/content-models/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},{defineComponent:_y}=await pe("vue"),{unref:Ce,resolveComponent:H1,createVNode:pt,withCtx:mt,toDisplayString:Hn,createTextVNode:sa,openBlock:_n,createBlock:ra,createCommentVNode:po,renderList:vy,Fragment:Or,createElementBlock:Rs,withModifiers:js,normalizeClass:oc,createElementVNode:Ks,isRef:Gs,normalizeStyle:yy}=await pe("vue"),gy={key:2},hy={class:"flex items-center"},by={class:"text-base"},ky={class:"mt-4"},{inject:wy,ref:Wn,watch:xy}=await pe("vue"),{defineStore:$y}=await pe("pinia"),Cy="previews",Iy=_y({__name:"index",setup(u){const{t:e}=xe(),{tr:a,pickByTheme:n,fileUrl:o,isInDevMode:l,formatKey:t}=Je(),{data:c}=Ca(),{mutate:de,isPending:Y}=fy(),{mutate:se,isPending:T}=py(),{mutate:he,isPending:A}=my(),M=Yl(),d=wy("appConfig"),F=Wn(12),re=Wn(1),r=E=>{F.value=E},Q={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},L=Wn(!1),G=Wn(null),$=Wn(Q),I={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},D=Wn(null),le=E=>{D.value=ve.cloneDeep(E),$.value=ve.cloneDeep(E||Q),L.value=!0},B=async()=>(G.value?.validate(async E=>{if(!E){const C={id:D.value?.id||0,name:$.value.name,title:$.value.title,image:$.value.image,description:$.value.description,titleFieldName:$.value.titleFieldName,hasPermalink:$.value.hasPermalink};D.value?he(C,{onSuccess:()=>{}}):se(C,{onSuccess:()=>{}}),L.value=!1}}),!1),me=async E=>{M.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{de({id:E.id||0})}})},y=Wn(null),O=Wn(!1),w=E=>{y.value=E,O.value=!0},_=async E=>{he({id:y.value?.id||0,hasPermalink:y.value?.hasPermalink,dataStructure:E},{onSuccess:C=>{w(C)}})},Z=Wn(!1),U=async E=>{$.value.image=E,Z.value=!1},q=()=>{$.value.image=""},K=$y("content-models-management",()=>({itemsContentModel:Wn(null)}))();return xy(()=>$.value.title,E=>{D.value||$.value.name.length<=21&&($.value.name=zc(a(E),{trim:!0,lower:!0,strict:!0}))}),(E,C)=>{const h=we,f=ue,$e=Ge,fe=zn,x=Sl,i=Pn,b=gl,ae=ko,P=Cn,be=Dn,Ie=sn,ge=nn,_e=Xt,ne=Xn,g=Uc,k=Ia,ee=rn,z=Va,Se=ln,Ye=Bl,ke=Ga;return _n(),Rs(Or,null,[Ce(K).itemsContentModel?po("",!0):(_n(),ra(fe,{key:0,to:"#alt-action"},{default:mt(()=>[Ce(c)&&Ce(c).length?(_n(),ra($e,{key:0,type:"primary",secondary:"",onClick:C[0]||(C[0]=S=>le(null))},{icon:mt(()=>[pt(f,{size:"18"},{default:mt(()=>[pt(h,{icon:"carbon:add-alt"})]),_:1})]),default:mt(()=>[sa(" "+Hn(Ce(e)("addContentModel")),1)]),_:1})):po("",!0)]),_:1})),Ce(K).itemsContentModel?(_n(),ra(uy,{key:1,modelValue:Ce(K).itemsContentModel,"onUpdate:modelValue":C[1]||(C[1]=S=>Ce(K).itemsContentModel=S)},null,8,["modelValue"])):(_n(),Rs("section",gy,[pt(be,{appear:"",name:"slide-fade"},{default:mt(()=>[Ks("section",null,[Ce(c)&&Ce(c).length?(_n(),Rs(Or,{key:0},[(_n(!0),Rs(Or,null,vy(Ce(c).slice((Ce(re)-1)*Ce(F),Ce(re)*Ce(F)),S=>(_n(),ra(b,{key:S.id,embedded:"",size:"small",class:"mb-2"},{header:mt(()=>[Ks("div",hy,[Ce(l)?(_n(),ra(x,{key:0},{default:mt(()=>[pt($e,{size:"small",type:"primary",secondary:"",onClick:js(st=>w(S),["stop"])},{default:mt(()=>[pt(f,{class:"mr-1"},{default:mt(()=>[pt(h,{icon:"carbon:data-1"})]),_:1}),sa(" "+Hn(Ce(e)("dataStructure")),1)]),_:2},1032,["onClick"]),pt($e,{size:"small",type:"primary",secondary:"",onClick:js(st=>le(S),["stop"])},{default:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["onClick"]),pt($e,{size:"small",type:"error",secondary:"",onClick:js(st=>me(S),["stop"])},{default:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):po("",!0),Ce(l)?(_n(),ra(i,{key:1,vertical:"",class:oc(Ce(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):po("",!0),Ks("span",by,Hn(Ce(a)(S.title)),1)])]),"header-extra":mt(()=>[pt($e,{size:"small",type:"primary",secondary:"",onClick:js(st=>Ce(K).itemsContentModel=S,["stop"])},{icon:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:arrow-right"})]),_:1})]),default:mt(()=>[sa(" "+Hn(Ce(e)("open")),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),pt(ae,{page:Ce(re),"onUpdate:page":C[2]||(C[2]=S=>Gs(re)?re.value=S:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Ce(F),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(Ce(c).length/Ce(F)),"onUpdate:pageSize":r},{prefix:mt(()=>[sa(Hn(`${Ce(c).length} ${Ce(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(_n(),ra(b,{key:1,size:"large",class:oc(`mb-2 !border-dashed !border-2 ${Ce(n)("!border-zinc-300","!border-zinc-600")}`)},{default:mt(()=>[pt(P,{description:Ce(e)("noContentModelAvailable")},{icon:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:model-alt"})]),_:1})]),extra:mt(()=>[Ks("div",ky,[pt($e,{size:"small",secondary:"",onClick:C[3]||(C[3]=S=>le(null))},{icon:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:add-alt"})]),_:1})]),default:mt(()=>[sa(" "+Hn(Ce(e)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),pt(Ye,{show:Ce(L),"onUpdate:show":C[11]||(C[11]=S=>Gs(L)?L.value=S:null),loading:Ce(T)||Ce(A)||Ce(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ce(D)?Ce(e)("editContentModel"):Ce(e)("addContentModel"),"positive-text":Ce(e)("validate"),"negative-text":Ce(e)("cancel"),onPositiveClick:B,onNegativeClick:C[12]||(C[12]=S=>L.value=!1)},{default:mt(()=>[pt(Se,{ref_key:"formRef",ref:G,model:Ce($),rules:I,"show-require-mark":!1,size:"medium",class:"my-5"},{default:mt(()=>[pt(ge,{"show-label":!1,path:"title"},{default:mt(()=>[pt(Ie,{modelValue:Ce($).title,"onUpdate:modelValue":C[4]||(C[4]=S=>Ce($).title=S),placeholder:Ce(e)("title"),class:"w-full",sync:""},{label:mt(()=>[sa(Hn(Ce(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),pt(ge,{"show-label":!1,path:"description"},{default:mt(()=>[pt(Ie,{modelValue:Ce($).description,"onUpdate:modelValue":C[5]||(C[5]=S=>Ce($).description=S),placeholder:Ce(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:mt(()=>[sa(Hn(Ce(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),pt(ee,{"x-gap":"12",span:24},{default:mt(()=>[pt(ne,{span:14},{default:mt(()=>[pt(ge,{label:Ce(e)("contentModelKey"),path:"name"},{default:mt(()=>[pt(_e,{value:Ce($).name,placeholder:Ce(e)("contentModelKey"),class:"w-full","onUpdate:value":C[6]||(C[6]=S=>Ce($).name=Ce(t)(S))},null,8,["value","placeholder"])]),_:1},8,["label"]),pt(ge,{label:Ce(e)("titleSingletonKey"),path:"titleFieldName"},{default:mt(()=>[pt(_e,{value:Ce($).titleFieldName,placeholder:Ce(e)("titleSingletonKey"),class:"w-full","onUpdate:value":C[7]||(C[7]=S=>Ce($).titleFieldName=Ce(t)(S))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),pt(k,{span:10,label:Ce(e)("itemsPreview"),path:"image"},{default:mt(()=>[pt(x,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:mt(()=>[pt(g,{class:"cursor-pointer","object-fit":"cover",style:yy("border: 1px dashed "+Ce(n)("green","white")),size:150,src:Ce(o)(Ce($).image||""),onClick:C[8]||(C[8]=S=>Z.value=!0)},{default:mt(()=>[Ce($).image?po("",!0):(_n(),ra(f,{key:0,size:64},{default:mt(()=>[pt(h,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),Ce($).image?(_n(),ra($e,{key:0,quaternary:"",onClick:C[9]||(C[9]=S=>q())},{icon:mt(()=>[pt(f,null,{default:mt(()=>[pt(h,{icon:"carbon:trash-can"})]),_:1})]),default:mt(()=>[sa(" "+Hn(Ce(e)("clear")),1)]),_:1})):po("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),pt(ge,{"show-label":!1,path:"hasPermalink"},{default:mt(()=>[pt(z,{checked:Ce($).hasPermalink,"onUpdate:checked":C[10]||(C[10]=S=>Ce($).hasPermalink=S)},{default:mt(()=>[sa(Hn(Ce(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),pt(ke,{show:Ce(Z),"onUpdate:show":C[13]||(C[13]=S=>Gs(Z)?Z.value=S:null),title:Ce(e)("selectImage"),"upload-config":{folder:Cy,limit:0,maxSize:0,baseUrl:Ce(d)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:U},null,8,["show","title","upload-config"]),pt(Fc,{show:Ce(O),"onUpdate:show":C[14]||(C[14]=S=>Gs(O)?O.value=S:null),title:Ce(a)(Ce(y)?.title),"raw-data-structure":Ce(y)?.dataStructure,"update-data-structure":_},null,8,["show","title","raw-data-structure"])]))],64)}}});var da=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(da||{});const Vy=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["permalinks"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:"/permalinks",data:t});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},{defineComponent:Sy}=await pe("vue"),{unref:He,resolveComponent:W1,createVNode:vt,withCtx:gt,toDisplayString:Nl,createTextVNode:Ey,openBlock:xa,createBlock:mo,createCommentVNode:Uy,createElementVNode:Vl,renderList:My,Fragment:sc,createElementBlock:rc}=await pe("vue"),Ny={class:"text-base font-bold"},Ty={class:"text-sm"},zy={class:"text-xs text-slate-400"},Dy={class:"text-xs text-slate-400"},Ay={class:"text-xs text-slate-400"},Py={class:"text-sm"},Ly={class:"text-xs text-slate-400"},By={class:"text-xs text-slate-400"},Oy={class:"text-xs text-slate-400"},Fy={class:"text-sm"},qy={class:"text-xs text-slate-400"},Ry={class:"text-xs text-slate-400"},jy={class:"text-xs text-slate-400"},Ky={class:"text-base font-bold"},Gy={class:"text-sm"},Yy={class:"text-xs text-slate-400"},Hy={class:"text-xs text-slate-400"},Wy={class:"text-xs text-slate-400"},{ref:ic,computed:cc,h:Qy}=await pe("vue"),Xy=Sy({__name:"index",setup(u){const{t:e}=xe(),{tr:a}=Je(),{data:n}=Xr(),{data:o,refetch:l}=Ca({enabled:!1}),{data:t,refetch:c}=Xc({enabled:!1}),{mutate:de,isPending:Y}=Vy(),se=[{pathPrefix:"/news/article",contentType:da.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:da.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:da.NEWS_TAG,contentParam:"slug",pageId:null}],T=ic(se),he=ic(),A=cc(()=>o.value?.filter(Q=>Q.hasPermalink)),M=async(Q=!1)=>{Q&&await l(),await c(),T.value=ve.cloneDeep(se);for(let L=0;L<(A.value?.length||0);L++)T.value.push({pathPrefix:`/${A.value?.[L].slug}`,contentType:da.CONTENT_MODEL,contentParam:"id",contentId:A.value?.[L].id,pageId:null});for(let L=0;L<T.value.length;L++)switch(T.value[L].contentType){case da.NEWS_ARTICLE:case da.NEWS_CATEGORY:case da.NEWS_TAG:{const G=t.value?.find($=>$.contentType===T.value[L].contentType);G&&(T.value[L].pathPrefix=G.pathPrefix,T.value[L].contentParam=G.contentParam,T.value[L].pageId=G.pageId,T.value[L].permalinkId=G.id)}break;case da.CONTENT_MODEL:{const G=t.value?.find($=>$.contentType===T.value[L].contentType&&$.contentId===T.value[L].contentId);G&&(T.value[L].pathPrefix=G.pathPrefix,T.value[L].contentParam=G.contentParam,T.value[L].pageId=G.pageId,T.value[L].permalinkId=G.id)}break}he.value=ve.cloneDeep(T.value)};M(!0);const d=async()=>{de(T.value,{onSuccess:()=>{M()}})},F=cc(()=>ve.isEqual(T.value,he.value)),re=Q=>Qy("span",{},{default:()=>a(Q.title)}),r=Q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(Q);return(Q,L)=>{const G=we,$=ue,I=Ge,D=zn,le=Xt,B=Xn,me=In,y=rn,O=gl,w=Ha,_=Ya,Z=Pn;return xa(),rc(sc,null,[vt(D,{to:"#alt-action"},{default:gt(()=>[vt(I,{secondary:"",type:"primary",loading:He(Y),disabled:He(F),onClick:L[0]||(L[0]=U=>d())},{icon:gt(()=>[vt($,null,{default:gt(()=>[vt(G,{icon:"carbon:save"})]),_:1})]),default:gt(()=>[Ey(" "+Nl(He(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),vt(O,{embedded:"",size:"small"},{default:gt(()=>[vt(_,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:U})=>[vt($,null,{default:gt(()=>[U?(xa(),mo(G,{key:0,icon:"fa-solid:chevron-left"})):(xa(),mo(G,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>L[10]||(L[10]=[Vl("span",null,null,-1)])),default:gt(()=>[vt(w,{name:"1"},{header:gt(()=>[Vl("span",Ny,Nl(He(e)("news")),1)]),default:gt(()=>[vt(O,{size:"small"},{header:gt(()=>[Vl("span",Ty,Nl(He(e)("articles")),1)]),default:gt(()=>[vt(y,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(B,{span:"10"},{default:gt(()=>[Vl("span",zy,Nl(He(e)("pathPrefix")),1),vt(le,{value:He(T)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=U=>He(T)[0].pathPrefix=U),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Dy,Nl(He(e)("contentParam")),1),vt(le,{value:He(T)[0].contentParam,"onUpdate:value":L[2]||(L[2]=U=>He(T)[0].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Ay,Nl(He(e)("contentPage")),1),vt(me,{value:He(T)[0].pageId,"onUpdate:value":L[3]||(L[3]=U=>He(T)[0].pageId=U),options:He(n)||[],placeholder:He(e)("selectPage"),"render-label":re,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(O,{size:"small"},{header:gt(()=>[Vl("span",Py,Nl(He(e)("categories")),1)]),default:gt(()=>[vt(y,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(B,{span:"10"},{default:gt(()=>[Vl("span",Ly,Nl(He(e)("pathPrefix")),1),vt(le,{value:He(T)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=U=>He(T)[1].pathPrefix=U),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",By,Nl(He(e)("contentParam")),1),vt(le,{value:He(T)[1].contentParam,"onUpdate:value":L[5]||(L[5]=U=>He(T)[1].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Oy,Nl(He(e)("contentPage")),1),vt(me,{value:He(T)[1].pageId,"onUpdate:value":L[6]||(L[6]=U=>He(T)[1].pageId=U),options:He(n)||[],placeholder:He(e)("selectPage"),"render-label":re,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(O,{size:"small"},{header:gt(()=>[Vl("span",Fy,Nl(He(e)("tags")),1)]),default:gt(()=>[vt(y,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(B,{span:"10"},{default:gt(()=>[Vl("span",qy,Nl(He(e)("pathPrefix")),1),vt(le,{value:He(T)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=U=>He(T)[2].pathPrefix=U),"allow-input":r,size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Ry,Nl(He(e)("contentParam")),1),vt(le,{value:He(T)[2].contentParam,"onUpdate:value":L[8]||(L[8]=U=>He(T)[2].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(B,{span:"7"},{default:gt(()=>[Vl("span",jy,Nl(He(e)("contentPage")),1),vt(me,{value:He(T)[2].pageId,"onUpdate:value":L[9]||(L[9]=U=>He(T)[2].pageId=U),options:He(n)||[],placeholder:He(e)("selectPage"),"render-label":re,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),vt(Z,{class:"!my-2"}),He(A)?.length&&He(T).length>3?(xa(),mo(O,{key:0,embedded:"",size:"small"},{default:gt(()=>[vt(_,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:U})=>[vt($,null,{default:gt(()=>[U?(xa(),mo(G,{key:0,icon:"fa-solid:chevron-left"})):(xa(),mo(G,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>L[11]||(L[11]=[Vl("span",null,null,-1)])),default:gt(()=>[vt(w,{name:"1"},{header:gt(()=>[Vl("span",Ky,Nl(He(e)("contentModels")),1)]),default:gt(()=>[(xa(!0),rc(sc,null,My(He(A),(U,q)=>(xa(),mo(O,{key:U.id,size:"small"},{header:gt(()=>[Vl("span",Gy,Nl(He(a)(U.title)),1)]),default:gt(()=>[vt(y,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(B,{span:"10"},{default:gt(()=>[Vl("span",Yy,Nl(He(e)("pathPrefix")),1),vt(le,{value:He(T)[q+3].pathPrefix,"onUpdate:value":K=>He(T)[q+3].pathPrefix=K,"allow-input":r,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Hy,Nl(He(e)("contentParam")),1),vt(le,{value:He(T)[q+3].contentParam,"onUpdate:value":K=>He(T)[q+3].contentParam=K,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(B,{span:"7"},{default:gt(()=>[Vl("span",Wy,Nl(He(e)("contentPage")),1),vt(me,{value:He(T)[q+3].pageId,"onUpdate:value":K=>He(T)[q+3].pageId=K,options:He(n)||[],placeholder:He(e)("selectPage"),"render-label":re,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):Uy("",!0)],64)}}}),Jy=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"post",url:"/newsletter/campaigns",data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},Zy=u=>{const{displayFormErrors:e}=Je(),{request:a}=Be(),{t:n}=xe(),o=Fe(),l=Xe();return dt({queryKey:["newsletter-campaigns"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{l.start();const c=await a({method:"put",url:`/newsletter/campaigns/${t.id}`,data:Yt(t,["id"])});if(l.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Et.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(n("anErrorOccurred"))},...u}})},eg=u=>{const{request:e}=Be(),{t:a}=xe(),n=Fe(),o=Xe();return dt({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:l})=>{o.start();const t=await e({method:"delete",url:`/newsletter/campaigns/${l}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(a("success"))},onError:l=>{n.error(a("anErrorOccurred"))},...u}})},tg=()=>{const{displayFormErrors:u}=Je(),{request:e}=Be(),{t:a}=xe(),n=Xe(),o=Fe();return Qn(async l=>{const t=await e({url:"/sms",method:"post",data:l.data});if(t.failure&&t.error)throw new Error(t.error);return t.result},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(l,t)=>{t.onSuccess?t.onSuccess(l):o.success(a("success"))},onError:(l,t)=>{if(t.onError)t.onError(l);else switch(l?.response?.data?.errorCode){case Et.FORM_INVALID_DATA:u(l?.response?.data?.data);break;default:o.error(a("sendingFailed"))}},retry:2})},{unref:dc}=await pe("vue"),{defineComponent:lg}=await pe("vue"),{unref:Ee,createVNode:il,withCtx:wl,toDisplayString:ds,createTextVNode:us,resolveComponent:Q1,createElementVNode:Fr,isRef:uc,renderList:ng,Fragment:pc,openBlock:ps,createElementBlock:mc,createBlock:qr}=await pe("vue"),ag={class:"w-full"},{ref:Ra,h:Qt,computed:fc}=await pe("vue"),og=lg({__name:"Campaign",setup(u){const e=Fe(),a=Yl(),{getSettingValue:n}=Jc(),{ckEditorToolbarItems:o}=Je(),{t:l,locale:t}=xe(),{data:c}=qc(),{data:de}=Rc(),{data:Y,isPending:se}=tv(),{mutate:T,isPending:he}=Jy(),{mutate:A}=eg(),{mutate:M,isPending:d}=Zy(),{mutate:F}=yd(),{mutate:re}=tg(),r=Ra(""),Q=Ra(),L={pageSize:12,prefix:({itemCount:U})=>Qt("div",{class:"font-bold"},{default:()=>`${l("total")}: ${U}`})},G=[{title:l("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(U){return Qt("div",{},{default:()=>U.title})}},{title:l("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(U){return Qt("small",{},{default:()=>U.subject})}},{title:l("numberOfRecipients"),key:"recipients",width:200,render(U){return Qt("div",{},{default:()=>U.recipients.length})},sortOrder:!1,sorter:"default"},{title:l("updateAt"),key:"updatedAt",width:150,render(U){return Qt("div",{},{default:()=>pa(U.updatedAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:l("createdAt"),key:"createdAt",width:150,render(U){return Qt("div",{},{default:()=>pa(U.createdAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Qt(Xt,{ref:Q,placeholder:l("search"),value:r.value,onInput:U=>{r.value=U}},{suffix:()=>Qt(ue,{},{default:()=>Qt(we,{icon:"carbon:search"})})}),key:"actions",width:175,render(U){return Qt("div",{class:"flex justify-end items-center w-full"},[Qt(Ge,{size:"small",type:"primary",secondary:!0,title:l("history"),onClick:()=>{B.value=U,le.value=!0},renderIcon:()=>Qt(ue,null,{default:()=>Qt(we,{icon:"mdi:history"})})}),Qt("div",{class:"w-2"}),Qt(Ge,{size:"small",type:"info",secondary:!0,title:l("launchCampaign"),onClick:()=>{const q=a.info({title:l("launchCampaign"),content:l("confirmLaunchCampaign",[U.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{q.loading=!0,F({data:{title:U.title,subject:U.subject,content:U.content,recipients:U.recipients.filter(K=>_o.isEmail(K)),tags:[]},onSuccess:K=>{const E=n("phone","string")?.split(",")[0];re({data:{from:E.replace(/\s+/g,""),content:U.rawContent,recipients:U.recipients.filter(C=>!_o.isEmail(C))},onSuccess:C=>{const h=U.history||[];h.push({id:Gl(),date:Zc(new Date,{locale:t.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+K.message+" Phone: "+C.message}),M({id:U.id,history:h}),q.loading=!1},onError:()=>{q.loading=!1}})},onError:()=>{q.loading=!1}})}})},renderIcon:()=>Qt(ue,null,{default:()=>Qt(we,{icon:"mdi:send"})})}),Qt("div",{class:"w-2"}),Qt(Ge,{size:"small",type:"warning",secondary:!0,title:l("edit"),onClick:()=>{w(U)},renderIcon:()=>Qt(ue,null,{default:()=>Qt(we,{icon:"carbon:edit"})})}),Qt("div",{class:"w-2"}),Qt(Ge,{size:"small",type:"error",secondary:!0,title:l("delete"),onClick:()=>{a.warning({title:l("confirm"),content:l("confirmDeleteCampaign"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{U.id&&A({id:U.id})}})},renderIcon:()=>Qt(ue,null,{default:()=>Qt(we,{icon:"carbon:trash-can"})})})])},fixed:"right"}],$=fc(()=>{if(!r.value)return Y.value;const U=Y.value?.filter(q=>q.title.toLowerCase().includes(r.value.toLowerCase())||q.subject.toLowerCase().includes(r.value.toLowerCase()));return Q.value&&Q.value.focus(),U}),I=fc(()=>[...(c.value||[]).map(U=>({recipient:U.email,type:"email"})),...(de.value||[]).map(U=>({recipient:U.phone,type:"phone"}))]),D=Ra(!1),le=Ra(!1),B=Ra(null),me=Ra(null),y=Ra({title:"",subject:"",content:"",rawContent:"",recipients:[]}),O={title:[{required:!0,message:l("fillRequired")}],subject:[{required:!0,message:l("fillRequired")}],content:[{required:!0,message:l("fillRequired")}],rawContent:[{required:!0,message:l("fillRequired")}],recipients:[{required:!0,message:l("fillRequired")}]},w=U=>{B.value=ve.cloneDeep(U),U?y.value=ve.cloneDeep(U):y.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},D.value=!0},_=async()=>(me.value?.validate(async U=>{if(!U){const q={title:y.value.title,subject:y.value.subject,content:y.value.content,rawContent:y.value.rawContent,recipients:y.value.recipients};B.value?B.value.title!==y.value.title&&(Y.value||[]).findIndex(K=>K.title==y.value.title)>-1?e.error(l("sameCampaignTitleMessage")):M({id:B.value.id,...q}):(Y.value||[]).findIndex(K=>K.title==y.value.title)>-1?e.error(l("sameCampaignTitleMessage")):T(q),D.value=!1}}),!1),Z=(U,q)=>ve.isEqual(U.slice().sort(),q.slice().sort());return(U,q)=>{const K=zn,E=Xs,C=Hs,h=nn,f=Mc,$e=Va,fe=In,x=ln,i=Bl,b=id,ae=Sc,P=Vc,be=$n,Ie=Cn;return ps(),mc(pc,null,[il(K,{to:"#alt-action"},{default:wl(()=>[il(Ee(Ge),{type:"primary",secondary:"",onClick:q[0]||(q[0]=ge=>w(null))},{icon:wl(()=>[il(Ee(ue),{size:"18"},{default:wl(()=>[il(Ee(we),{icon:"carbon:add-alt"})]),_:1})]),default:wl(()=>[us(" "+ds(Ee(l)("addCampaign")),1)]),_:1})]),_:1}),il(C,null,{default:wl(()=>[il(E,{columns:G,data:Ee($),pagination:L,loading:Ee(se),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),il(i,{show:Ee(D),"onUpdate:show":q[9]||(q[9]=ge=>uc(D)?D.value=ge:null),loading:Ee(he)||Ee(d),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ee(B)?Ee(l)("editCampaign"):Ee(l)("addCampaign"),"positive-text":Ee(l)("validate"),"negative-text":Ee(l)("cancel"),onPositiveClick:_,onNegativeClick:q[10]||(q[10]=ge=>D.value=!1)},{default:wl(()=>[il(x,{ref_key:"formRef",ref:me,class:"mt-5",model:Ee(y),rules:O,"show-require-mark":!1,size:"medium"},{default:wl(()=>[il(h,{label:Ee(l)("title"),path:"title"},{default:wl(()=>[il(Ee(Xt),{value:Ee(y).title,"onUpdate:value":q[1]||(q[1]=ge=>Ee(y).title=ge),placeholder:Ee(l)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),il(h,{label:Ee(l)("subject"),path:"subject"},{default:wl(()=>[il(Ee(Xt),{value:Ee(y).subject,"onUpdate:value":q[2]||(q[2]=ge=>Ee(y).subject=ge),placeholder:Ee(l)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),il(h,{label:Ee(l)("content"),path:"content"},{default:wl(()=>[Fr("div",ag,[il(f,{modelValue:Ee(y).content,"onUpdate:modelValue":q[3]||(q[3]=ge=>Ee(y).content=ge),"toolbar-items":Ee(o),placeholder:Ee(l)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),il(h,{label:Ee(l)("rawContent"),path:"rawContent"},{default:wl(()=>[il(Ee(Xt),{value:Ee(y).rawContent,"onUpdate:value":q[4]||(q[4]=ge=>Ee(y).rawContent=ge),placeholder:Ee(l)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),il(h,{label:Ee(l)("recipients"),path:"recipients"},{default:wl(()=>[il(fe,{value:Ee(y).recipients,"onUpdate:value":q[8]||(q[8]=ge=>Ee(y).recipients=ge),options:Ee(I),placeholder:Ee(l)("recipients"),loading:Ee(se),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:wl(()=>[il($e,{size:"large",class:"w-full","default-checked":Ee(I).length&&Z(Ee(y).recipients,Ee(I).filter(ge=>ge.type=="email").map(ge=>ge.recipient)),"onUpdate:checked":q[5]||(q[5]=ge=>{ge?Ee(y).recipients=Ee(I).filter(_e=>_e.type=="email").map(_e=>_e.recipient):Ee(y).recipients=Ee(y).recipients.filter(_e=>!("_v"in U?U._v:dc(_o)).isEmail(_e))})},{default:wl(()=>[us(ds(Ee(l)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),q[12]||(q[12]=Fr("div",{class:"h-2"},null,-1)),il($e,{size:"large",class:"w-full","default-checked":Ee(I).length&&Z(Ee(y).recipients,Ee(I).filter(ge=>ge.type=="phone").map(ge=>ge.recipient)),"onUpdate:checked":q[6]||(q[6]=ge=>{ge?Ee(y).recipients=Ee(I).filter(_e=>_e.type=="phone").map(_e=>_e.recipient):Ee(y).recipients=Ee(y).recipients.filter(_e=>("_v"in U?U._v:dc(_o)).isEmail(_e))})},{default:wl(()=>[us(ds(Ee(l)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),q[13]||(q[13]=Fr("div",{class:"h-2"},null,-1)),il($e,{size:"large",class:"w-full","default-checked":Ee(I).length&&Ee(y).recipients.length===Ee(I).length,"onUpdate:checked":q[7]||(q[7]=ge=>{ge?Ee(y).recipients=Ee(I).filter(_e=>_e.recipient).map(_e=>_e.recipient):Ee(y).recipients=[]})},{default:wl(()=>[us(ds(Ee(l)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),il(i,{show:Ee(le),"onUpdate:show":q[11]||(q[11]=ge=>uc(le)?le.value=ge:null),loading:Ee(d),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ee(l)("history")},{default:wl(()=>[Ee(B)?.history?.length?(ps(),qr(be,{key:0,style:{"max-height":"400px"}},{default:wl(()=>[il(P,{hoverable:""},{default:wl(()=>[(ps(!0),mc(pc,null,ng(Ee(B)?.history.slice().reverse(),ge=>(ps(),qr(ae,{key:ge.id},{default:wl(()=>[il(b,{title:ge.date,"content-style":"margin-top: 10px;"},{default:wl(()=>[us(ds(ge.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(ps(),qr(Ie,{key:1,description:Ee(l)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),sg=()=>{const{request:u}=Be(),{t:e}=xe(),a=Xe(),n=Fe();return Qn(async o=>{const l=await u({url:"/app-information",method:"put",data:o});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>a.start(),onSettled:()=>a.finish(),onSuccess:(o,l)=>{n.success(e("success"))},onError:(o,l)=>{n.error(e("unableToUpdateAppInformation"))}})},{defineComponent:rg}=await pe("vue"),{unref:m,createVNode:j,withCtx:te,toDisplayString:Ot,createTextVNode:ja,resolveComponent:ig,openBlock:At,createBlock:ia,createCommentVNode:jl,createElementBlock:yl,createElementVNode:wt,isRef:Rr,vShow:jr,withDirectives:Kr,normalizeStyle:ca,Fragment:Ka,renderList:_c,TransitionGroup:cg,withKeys:dg}=await pe("vue"),ug={id:"header-btn"},pg={key:1,id:"alt-action"},mg={key:"basic-info"},fg={class:"text-xs"},_g={class:"text-xs"},vg={class:"text-xs"},yg={class:"text-xs"},gg={class:"text-xs"},hg={class:"text-xs"},bg={class:"text-xs"},kg={class:"flex items-center gap-2 w-full"},wg={key:"branding"},xg={class:"text-sm"},$g={class:"text-sm"},Cg={class:"flex flex-col items-center justify-center text-gray-400"},Ig={class:"text-sm"},Vg={class:"flex flex-col items-center justify-center text-gray-400"},Sg={class:"text-sm"},Eg={class:"flex flex-col items-center justify-center text-gray-400"},Ug={class:"text-sm"},Mg={class:"flex flex-col items-center justify-center text-gray-400"},Ng={class:"text-sm"},Tg={class:"flex items-center justify-between"},zg={class:"font-bold"},Dg={class:"flex items-center"},Ag={class:"flex items-center justify-between"},Pg={class:"font-bold"},Lg={class:"flex items-center"},Bg={class:"flex items-center justify-between"},Og={class:"font-bold"},Fg={class:"flex items-center"},qg={key:"social-networks"},Rg={class:"text-xs"},jg={key:"newsletter-email"},Kg={key:"newsletter-phone"},Gg={key:"newsletter-campaign"},Yg={key:"ads"},Hg={key:"videos"},Wg={key:"content-models"},Qg={key:"menus"},Xg={key:"content-permalinks"},Jg={key:"page-sections"},{defineComponent:Zg,inject:e1,ref:vn,h:Gr,computed:Yr,watch:Hr,onMounted:vc}=await pe("vue"),{storeToRefs:t1,defineStore:l1}=await pe("pinia"),n1=Zg({name:td.CONTENT_MANAGEMENT.NAME}),a1=rg({...n1,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],a=ke=>e.includes(ke),{t:n,locale:o}=xe(),l=hd(),t=Yl(),{appPrimaryColor:c,pickByTheme:de,fileUrl:Y,isLgScreen:se,isMdScreen:T,isSmScreen:he,isXlScreen:A,is2XlScreen:M,tr:d}=Je(),F=ed({enabled:!1}),{isLightTheme:re,contentLayoutSize:r}=t1(ho());Qr();const{data:Q,refetch:L}=Xr(),{mutate:G,isPending:$}=sg(),{mutate:I,isPending:D}=Oc(),{mutate:le,isPending:B}=Zu(),me=e1("appConfig"),y=vn({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),O=vn(y.value),w=l1("content-management",()=>({currentMenuItemKey:vn("basic-info")}))(),_=(ke,S)=>()=>Gr(ue,{},{default:()=>Gr(we,{icon:ke})}),Z=(ke,S,st=!1)=>()=>Gr("span",{id:S,class:{"page-menu-item":st}},{default:()=>ke}),U=Yr(()=>{const ke=[{label:Z(n("basicInfo"),"basic-info"),key:"basic-info",icon:_("carbon:identification")},{label:Z(n("branding"),"branding"),key:"branding",icon:_("carbon:color-palette")},{label:Z(n("socialNetworks"),"social-networks"),key:"social-networks",icon:_("carbon:share")},{key:"divider",type:"divider"},{label:Z(n("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:_("carbon:at")},{label:Z(n("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:_("carbon:phone")},{label:Z(n("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:_("carbon:bullhorn")},{key:"divider",type:"divider"},{label:Z(n("ads"),"ads"),key:"ads",icon:_("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:Z(n("videos"),"videos"),key:"videos",icon:_("carbon:video-player")},{key:"divider",type:"divider"},{label:Z(n("menusManagement"),"menus"),key:"menus",icon:_("carbon:menu")},{label:Z(n("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:_("carbon:link")},{key:"divider",type:"divider"},{label:Z(n("contentModels"),"content-models"),key:"content-models",icon:_("carbon:model-alt")},{label:Z(n("pageSections"),"page-sections"),key:"page-sections",icon:_("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const S of Q.value||[])ke.push({label:Z(d(S.title).startsWith(n("page"))?d(S.title):`${n("page")} ${d(S.title)}`,`${S.slug}-page`,!0),key:`${S.slug}-page`,icon:_("carbon:document",`${S.slug}-page`)});return Q.value&&Q.value.length>0&&ke.push({key:"divider",type:"divider"}),ke.push({label:Z(n("addPage"),"add-new-page"),key:"add-new-page",icon:_("carbon:add-alt")}),ke}),q=Yr(()=>ve.isEqual(y.value,O.value)),K=Yr(()=>r.value.height-165),E=vn(null),C={email:[{required:!1,message:n("fillRequired")},{trigger:["input"],validator(ke,S){return S&&!_o.isEmail(S)?new Error(n("invalidEmail")):!0}}]},h=vn();Hr(()=>h.value,ke=>{y.value.additionalInfo=JSON.stringify(ke||"[]")},{deep:!0});const f=vn(null),$e={},fe=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],x=vn("logos"),i=vn(!1),b=async ke=>{switch(x.value){case"logos":y.value.logo=ke;break;case"icons":y.value.icon=ke;break;case"monochrome-logos":y.value.oneColorLogo=ke;break;case"monochrome-icons":y.value.oneColorIcon=ke;break}i.value=!1},ae={name:"",title:"",content:"",slug:""},P=vn(!1),be=vn(null),Ie=vn(ae),ge={title:[{required:!0,message:n("fillRequired")}]},_e=vn(null),ne=ke=>{_e.value=ve.cloneDeep(ke),Ie.value=ve.cloneDeep(ke||ae),P.value=!0},g=async()=>(be.value?.validate(async ke=>{if(!ke){const S={title:Ie.value.title};_e.value?I({slug:_e.value.slug,...S},{onSuccess:st=>{w.currentMenuItemKey=`${st?.slug}-page`,P.value=!1}}):le({name:ve.startCase(ve.camelCase(d(Ie.value.title))).replace(/\s+/g,""),...S},{onSuccess:st=>{w.currentMenuItemKey=`${st?.slug}-page`,P.value=!1}})}}),!1),k=async()=>{await F.refetch(),F.data.value?.forEach(ke=>{y.value[ke.key]!=null&&(y.value[ke.key]=ke.value)}),O.value=ve.cloneDeep(y.value);try{h.value=JSON.parse(y.value.additionalInfo||"[]")}catch{h.value=[]}};k(),vc(()=>{setTimeout(()=>{l.params.key&&a(l.params.key)&&(w.currentMenuItemKey=l.params.key)},500)});const ee=()=>{G(y.value,{onSuccess:()=>k()})},z=["basic-info","branding","social-networks"];Hr(()=>w.currentMenuItemKey,(ke,S)=>{ke==="add-new-page"?(w.currentMenuItemKey=S,ne(null)):z.includes(S)&&!z.includes(ke)&&(q.value||t.warning({title:n("confirm"),content:n("marketInfoDiscardChangesConfirm"),positiveText:n("yes"),negativeText:n("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{w.currentMenuItemKey=S}}))});const Se=vn();Hr(()=>[T.value,he.value,se.value,A.value],([ke,S,st,De])=>{Se.value=ke||S||st||De,setTimeout(()=>{Se.value=void 0},500)},{immediate:!0});const Ye=gd({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:n("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return vc(()=>{setTimeout(()=>{const ke=document.getElementById("sidebar");Ye.addStep({attachTo:{element:ke,on:"left"},title:n("contentManagementGuideTitle1"),text:n("contentManagementGuideText1"),buttons:[{text:n("pass"),label:n("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.cancel()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.next()}}]});const S=document.getElementsByClassName("page-menu-item");if(S&&S.length>0){const De=[];for(let ft=0;ft<S.length;ft++)De.push(S[ft]?.parentNode?.parentNode?.parentNode);Ye.addStep({attachTo:{element:De[0],on:"left"},title:n("contentManagementGuideTitle2"),text:n("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.back()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.next()}}]})}const st=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;Ye.addStep({attachTo:{element:st,on:"left"},title:n("contentManagementGuideTitle3"),text:n("contentManagementGuideText3"),buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.back()}},{text:n("ok"),label:n("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){Ye.next()}}]})},1e3)}),(ke,S)=>{const st=Ge,De=Sl,ft=ud,_t=dd,R=Xt,H=nn,N=Ia,ot=rn,We=sn,Ft=Zs,cn=ln,Rt=gl,ml=Uc,cl=Xn,je=Pn,Jt=ig("color-picker"),Zt=cd,el=jc,El=Ga,ie=Bl;return At(),yl(Ka,null,[j(el,null,{"header-extra":te(()=>[j(De,null,{default:te(()=>[wt("div",ug,[z.includes(m(w).currentMenuItemKey)?(At(),ia(st,{key:0,loading:m($)||m(F).isPending.value,disabled:m(q),type:"primary",secondary:"",onClick:ee},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:save"})]),_:1})]),default:te(()=>[ja(" "+Ot(m(n)("save")),1)]),_:1},8,["loading","disabled"])):(At(),yl("div",pg))]),j(st,{dashed:"",type:"primary",title:m(n)("help"),onClick:S[0]||(S[0]=Ve=>m(Ye).start())},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:te(()=>[j(Zt,{style:ca(`height: ${m(K)}px`)},{default:te(()=>[j(Zt,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:te(()=>[j(_t,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:m(Se),"default-collapsed":!m(M),"collapsed-width":64,"native-scrollbar":!1,width:m(M)?300:275},{default:te(()=>[j(ft,{value:m(w).currentMenuItemKey,"onUpdate:value":S[1]||(S[1]=Ve=>m(w).currentMenuItemKey=Ve),"collapsed-width":64,"collapsed-icon-size":22,options:m(U)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),j(Zt,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:te(()=>[j(cg,{name:"slide-fade"},{default:te(()=>[Kr(wt("section",mg,[j(Rt,{hoverable:""},{default:te(()=>[j(cn,{ref_key:"basicInfoFormRef",ref:E,model:m(y),rules:C,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:te(()=>[j(H,{path:"name"},{label:te(()=>[wt("b",fg,Ot(m(n)("websiteName")),1)]),default:te(()=>[j(R,{value:m(y).name,"onUpdate:value":S[2]||(S[2]=Ve=>m(y).name=Ve),placeholder:m(n)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),j(ot,{"x-gap":"12",span:24},{default:te(()=>[j(N,{span:12,path:"email"},{label:te(()=>[wt("b",_g,Ot(m(n)("email")),1)]),default:te(()=>[j(R,{value:m(y).email,"onUpdate:value":S[3]||(S[3]=Ve=>m(y).email=Ve),placeholder:m(n)("email"),class:"w-full"},{prefix:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),j(N,{span:12,path:"phone"},{label:te(()=>[wt("b",vg,Ot(m(n)("phone")),1)]),default:te(()=>[j(R,{value:m(y).phone,"onUpdate:value":S[4]||(S[4]=Ve=>m(y).phone=Ve),placeholder:m(n)("phone"),class:"w-full"},{prefix:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),j(H,{path:"address"},{label:te(()=>[wt("span",yg,[wt("b",null,Ot(m(n)("address")),1)])]),default:te(()=>[j(R,{value:m(y).address,"onUpdate:value":S[5]||(S[5]=Ve=>m(y).address=Ve),placeholder:m(n)("address"),class:"w-full"},{prefix:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),j(ot,{"x-gap":"12",span:24},{default:te(()=>[j(N,{span:12,path:"postalCode"},{label:te(()=>[wt("b",gg,Ot(m(n)("postalCode")),1)]),default:te(()=>[j(R,{value:m(y).postalCode,"onUpdate:value":S[6]||(S[6]=Ve=>m(y).postalCode=Ve),placeholder:m(n)("postalCode"),class:"w-full"},{prefix:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),j(H,{"show-label":!1,path:"description"},{default:te(()=>[j(We,{modelValue:m(y).description,"onUpdate:modelValue":S[7]||(S[7]=Ve=>m(y).description=Ve),placeholder:m(n)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:te(()=>[wt("b",hg,Ot(m(n)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),j(H,{path:"additionalInfo"},{label:te(()=>[wt("b",bg,Ot(m(n)("additionalInfo")),1)]),default:te(()=>[j(Ft,{value:m(h),"onUpdate:value":S[8]||(S[8]=Ve=>Rr(h)?h.value=Ve:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":te(()=>[ja(Ot(m(n)("add")),1)]),default:te(({value:Ve})=>[wt("div",kg,[j(R,{value:Ve.name,"onUpdate:value":Hl=>Ve.name=Hl,placeholder:m(n)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),j(R,{value:Ve.content,"onUpdate:value":Hl=>Ve.content=Hl,placeholder:m(n)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[jr,m(w).currentMenuItemKey==="basic-info"]]),Kr(wt("section",wg,[j(Rt,{segmented:"",size:"small"},{header:te(()=>[wt("span",xg,Ot(m(n)("graphicElements")),1)]),default:te(()=>[j(ot,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:te(()=>[j(cl,null,{default:te(()=>[j(Rt,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[wt("span",$g,Ot(m(n)("logo")),1)]),default:te(()=>[j(De,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(y).logo?(At(),ia(ml,{key:0,class:"cursor-pointer","object-fit":"contain",style:ca("border: 1px dashed "+m(de)(m(c),"white")),size:125,src:m(Y)(m(y).logo),onClick:S[9]||(S[9]=()=>{x.value="logos",i.value=!0})},null,8,["style","src"])):(At(),yl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:ca(`border: 1px dashed ${m(de)(m(c),"white")}; width: 125px; height: 125px`),onClick:S[10]||(S[10]=()=>{x.value="logos",i.value=!0})},[wt("div",Cg,[j(m(ue),{size:"50"},{default:te(()=>[j(m(we),{icon:"carbon:image"})]),_:1}),wt("span",null,Ot(m(n)("import")),1)])],4)),m(y).logo?(At(),ia(st,{key:2,quaternary:"",onClick:S[11]||(S[11]=()=>m(y).logo="")},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[ja(" "+Ot(m(n)("clear")),1)]),_:1})):jl("",!0)]),_:1})]),_:1})]),_:1}),j(cl,null,{default:te(()=>[j(Rt,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[wt("span",Ig,Ot(m(n)("icon")),1)]),default:te(()=>[j(De,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(y).icon?(At(),ia(ml,{key:0,class:"cursor-pointer","object-fit":"contain",style:ca("border: 1px dashed "+m(de)(m(c),"white")),size:125,src:m(Y)(m(y).icon),onClick:S[12]||(S[12]=()=>{x.value="icons",i.value=!0})},null,8,["style","src"])):(At(),yl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:ca(`border: 1px dashed ${m(de)(m(c),"white")}; width: 125px; height: 125px`),onClick:S[13]||(S[13]=()=>{x.value="icons",i.value=!0})},[wt("div",Vg,[j(m(ue),{size:"50"},{default:te(()=>[j(m(we),{icon:"carbon:image"})]),_:1}),wt("span",null,Ot(m(n)("import")),1)])],4)),m(y).icon?(At(),ia(st,{key:2,quaternary:"",onClick:S[14]||(S[14]=()=>m(y).icon="")},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[ja(" "+Ot(m(n)("clear")),1)]),_:1})):jl("",!0)]),_:1})]),_:1})]),_:1}),j(cl,null,{default:te(()=>[j(Rt,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[wt("span",Sg,Ot(m(n)("logoMonochrome")),1)]),default:te(()=>[j(De,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(y).oneColorLogo?(At(),ia(ml,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:ca("border: 1px dashed "+m(de)(m(c),"white")),size:125,src:m(Y)(m(y).oneColorLogo),onClick:S[15]||(S[15]=()=>{x.value="monochrome-logos",i.value=!0})},null,8,["style","src"])):(At(),yl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:ca(`border: 1px dashed ${m(de)(m(c),"white")}; width: 125px; height: 125px`),onClick:S[16]||(S[16]=()=>{x.value="monochrome-logos",i.value=!0})},[wt("div",Eg,[j(m(ue),{size:"50"},{default:te(()=>[j(m(we),{icon:"carbon:image"})]),_:1}),wt("span",null,Ot(m(n)("import")),1)])],4)),m(y).oneColorLogo?(At(),ia(st,{key:2,quaternary:"",onClick:S[17]||(S[17]=()=>m(y).oneColorLogo="")},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[ja(" "+Ot(m(n)("clear")),1)]),_:1})):jl("",!0)]),_:1})]),_:1})]),_:1}),j(cl,null,{default:te(()=>[j(Rt,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:te(()=>[wt("span",Ug,Ot(m(n)("iconMonochrome")),1)]),default:te(()=>[j(De,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:te(()=>[m(y).oneColorIcon?(At(),ia(ml,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:ca("border: 1px dashed "+m(de)(m(c),"white")),size:125,src:m(Y)(m(y).oneColorIcon),onClick:S[18]||(S[18]=()=>{x.value="monochrome-icons",i.value=!0})},null,8,["style","src"])):(At(),yl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:ca(`border: 1px dashed ${m(de)(m(c),"white")}; width: 125px; height: 125px`),onClick:S[19]||(S[19]=()=>{x.value="monochrome-icons",i.value=!0})},[wt("div",Mg,[j(m(ue),{size:"50"},{default:te(()=>[j(m(we),{icon:"carbon:image"})]),_:1}),wt("span",null,Ot(m(n)("import")),1)])],4)),m(y).oneColorIcon?(At(),ia(st,{key:2,quaternary:"",onClick:S[20]||(S[20]=()=>m(y).oneColorIcon="")},{icon:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),default:te(()=>[ja(" "+Ot(m(n)("clear")),1)]),_:1})):jl("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),S[31]||(S[31]=wt("br",null,null,-1)),j(Rt,{hoverable:"",segmented:"",size:"small"},{header:te(()=>[wt("span",Ng,Ot(m(n)("websiteColors")),1)]),default:te(()=>[j(ot,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:te(()=>[j(cl,null,{default:te(()=>[wt("div",Tg,[wt("span",zg,Ot(m(n)("baseColor")),1),wt("div",Dg,[m(y).primaryColor?(At(),yl(Ka,{key:0},[j(st,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[21]||(S[21]=Ve=>m(y).primaryColor="")},{default:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),_:1}),j(je,{vertical:""})],64)):jl("",!0),j(Jt,{"pure-color":m(y).primaryColor,"onUpdate:pureColor":S[22]||(S[22]=Ve=>m(y).primaryColor=Ve),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(re)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),j(cl,null,{default:te(()=>[wt("div",Ag,[wt("span",Pg,Ot(m(n)("secondaryColor")),1),wt("div",Lg,[m(y).secondaryColor?(At(),yl(Ka,{key:0},[j(st,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[23]||(S[23]=Ve=>m(y).secondaryColor="")},{default:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),_:1}),j(je,{vertical:""})],64)):jl("",!0),j(Jt,{"pure-color":m(y).secondaryColor,"onUpdate:pureColor":S[24]||(S[24]=Ve=>m(y).secondaryColor=Ve),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(re)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),j(cl,null,{default:te(()=>[wt("div",Bg,[wt("span",Og,Ot(m(n)("tertiaryColor")),1),wt("div",Fg,[m(y).accentColor?(At(),yl(Ka,{key:0},[j(st,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[25]||(S[25]=Ve=>m(y).accentColor="")},{default:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:"carbon:trash-can"})]),_:1})]),_:1}),j(je,{vertical:""})],64)):jl("",!0),j(Jt,{"pure-color":m(y).accentColor,"onUpdate:pureColor":S[26]||(S[26]=Ve=>m(y).accentColor=Ve),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(re)?"white":"black",lang:m(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[jr,m(w).currentMenuItemKey==="branding"]]),Kr(wt("section",qg,[j(Rt,{hoverable:""},{default:te(()=>[j(cn,{ref_key:"socialNetworksFormRef",ref:f,model:m(y),rules:$e,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:te(()=>[j(ot,{"x-gap":"12",span:24},{default:te(()=>[(At(),yl(Ka,null,_c(fe,Ve=>j(N,{key:Ve.name,span:12,path:Ve.name},{label:te(()=>[wt("b",Rg,Ot(m(n)(Ve.name)),1)]),default:te(()=>[j(R,{value:m(y)[Ve.name],"onUpdate:value":Hl=>m(y)[Ve.name]=Hl,placeholder:m(n)(Ve.name),class:"w-full"},{prefix:te(()=>[j(m(ue),null,{default:te(()=>[j(m(we),{icon:Ve.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[jr,m(w).currentMenuItemKey==="social-networks"]]),m(w).currentMenuItemKey==="newsletter-email"?(At(),yl("section",jg,[j(_v)])):jl("",!0),m(w).currentMenuItemKey==="newsletter-phone"?(At(),yl("section",Kg,[j(Ev)])):jl("",!0),m(w).currentMenuItemKey==="newsletter-campaign"?(At(),yl("section",Gg,[j(og)])):jl("",!0),m(w).currentMenuItemKey==="ads"?(At(),yl("section",Yg,[j(Kd)])):jl("",!0),m(w).currentMenuItemKey==="videos"?(At(),yl("section",Hg,[j(xf)])):jl("",!0),m(w).currentMenuItemKey==="content-models"?(At(),yl("section",Wg,[j(Iy)])):jl("",!0),m(w).currentMenuItemKey==="menus"?(At(),yl("section",Qg,[j(qm)])):jl("",!0),m(w).currentMenuItemKey==="content-permalinks"?(At(),yl("section",Xg,[j(Xy)])):jl("",!0),m(w).currentMenuItemKey==="page-sections"?(At(),yl("section",Jg,[j(ev)])):jl("",!0),(At(!0),yl(Ka,null,_c(m(Q),(Ve,Hl)=>(At(),yl(Ka,{key:`${Ve.slug}-page`},[m(w).currentMenuItemKey===`${Ve.slug}-page`?(At(),yl("section",{key:`${Ve.slug}-page`},[j($p,{slug:Ve.slug,"open-form-modal":ne,onDelete:()=>{m(w).currentMenuItemKey=(m(Q)?.length||0)>1?`${m(Q)?.[Hl-1].slug}-page`:e[0],m(L)()}},null,8,["slug","onDelete"])])):jl("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),j(El,{show:m(i),"onUpdate:show":S[27]||(S[27]=Ve=>Rr(i)?i.value=Ve:null),title:m(n)("selectImage"),"upload-config":{folder:m(x),limit:0,maxSize:0,baseUrl:m(me)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:b},null,8,["show","title","upload-config"]),j(ie,{show:m(P),"onUpdate:show":S[29]||(S[29]=Ve=>Rr(P)?P.value=Ve:null),loading:m(B)||m(D),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:m(_e)?m(n)("editPage"):m(n)("addPage"),"positive-text":m(n)("validate"),"negative-text":m(n)("cancel"),onPositiveClick:g,onNegativeClick:S[30]||(S[30]=Ve=>P.value=!1)},{default:te(()=>[j(cn,{ref_key:"addPageFormRef",ref:be,model:m(Ie),rules:ge,"show-require-mark":!1,size:"medium"},{default:te(()=>[j(H,{"show-label":!1,path:"title",class:"mt-5"},{default:te(()=>[j(We,{modelValue:m(Ie).title,"onUpdate:modelValue":S[28]||(S[28]=Ve=>m(Ie).title=Ve),placeholder:m(n)("title"),class:"w-full",sync:"",onKeydown:dg(g,["enter"])},{label:te(()=>[ja(Ot(m(n)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),X1=Sa(a1,[["__scopeId","data-v-eb0e0d24"]]);export{X1 as default};
