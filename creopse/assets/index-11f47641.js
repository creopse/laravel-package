import{_ as $t,a as Kt,b as za}from"./index.vue_vue_type_script_setup_true_lang-f1385049.js";import{_ as Ja}from"./PageLayout.vue_vue_type_script_setup_true_lang-889f8007.js";import{_ as kt}from"./I18nInput-9efa9a6b.js";import{f as zl,p as it,o as Xa,v as vl,T as Za,a as Qa,w as en}from"./vue_runtime-dom-5ad5ecb0.js";import{e as Qe,u as Xe,f as ht,r as Et,p as Zt,q as Ia,s as Je,i as Qt,t as Ua,_ as Dt,v as Ma,w as tn,x as _l,h as Sa,j as ln,R as an}from"./index-916f1e45.js";import{I as be}from"./iconify_vue-46af0b81.js";import{_ as bl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-1957772e.js";import{R as tt}from"./response-error-code-87d1097e.js";import{d as al,a as Ke}from"./pinia-a2cac08c.js";import{_ as we}from"./lodash-a9971f22.js";import{c as pt,b as st,a as ot,_ as Me,g as rt,Z as Lt,V as Ut,N as fe,L as at,ag as Vt,a2 as Ct,P as Yt,a4 as ut,E as Ze,H as Ft,I as wt,a8 as hl,a9 as kl,ah as nn,F as vt,G as _t,ab as ll,a7 as wl,aa as Aa,j as Tt,R as Pt,a5 as xl,ac as Ea,a3 as Ul,M as Gt,ai as Ml,aj as sn,$ as nl,a0 as sl,W as Cl,U as Da,a1 as ol,ak as on,al as La,k as rn,am as Pa,an as Na,ao as un,O as Oa,J as dn,ap as Ra,e as qa,aq as cn,h as pn,n as fn,o as mn}from"./naive-ui-ab0dda7d.js";import{d as Ye,aF as bt,o as n,c as U,Y as t,aO as l,l as T,P as C,F as ge,ar as Re,a as _,Q as he,i as gt,h as ue,p as Le,ag as Ht,as as Il,W as Fa,w as xt,aH as vn,v as dl,r as _n,b as Sl,s as Mt,e as ja}from"./vue_runtime-core-273b5003.js";import{u as We}from"./vue-i18n-0da1582b.js";import{r as i,u as e,c as ze,a as qt}from"./vue_reactivity-852d8377.js";import{t as s,a as He,n as Fe}from"./vue_shared-7dcc3b7f.js";import{_ as Nt}from"./fawmi_vue-google-maps-439c501d.js";import{o as yn,a as gn}from"./vueuse_core-d5cd9503.js";import{s as bn}from"./vue-virtual-scroller-9fb1e6c4.js";import{i as $a}from"./is-svg-36c6b3ab.js";import{_ as Ba}from"./index.vue_vue_type_style_index_0_lang-82518ec5.js";import{M as tl}from"./vue-pick-colors-7b2d784c.js";import{v as ct}from"./uuid-cf522c50.js";import{s as Ka}from"./slugify-ce681755.js";import{_ as hn}from"./media-library-9c1c0b4a.js";import{_ as Ya}from"./UploadExcel-73dc99b2.js";import{_ as el}from"./validator-c0254ba9.js";import{_ as kn}from"./VueTelInputWrapper-d885cb22.js";import{i as wn}from"./libphonenumber-js-cdb4849e.js";import{a as xn}from"./vue-router-c3388b6d.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-01b1033a.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-0787c3d6.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-df7eee76.js";import"./vue-2044cde0.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-417126f1.js";import"./pinia_colada-2d4f4a8d.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-a68ee547.js";import"./vue3-map-chart-668e2d48.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-d047f964.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-68d47bbf.js";import"./vooks-6944b357.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-835eca33.js";import"./vue-resize-f5358a64.js";import"./vue-observe-visibility-1f4537f4.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-6f0d8da7.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-40fbe54c.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-284e336f.js";import"./popperjs_core-f3391c26.js";import"./vue-advanced-cropper-45f4d00f.js";import"./xlsx-83e6f69b.js";var At=(me=>(me.IMAGE="image",me.VIDEO="video",me))(At||{});const yl=al("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:me}=Qe(),a=await me({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),Cn={class:"flex items-center justify-between"},In={class:"flex flex-col"},$n={class:"text-sm font-bold"},Vn={class:"text-xs font-normal"},Tn={key:0,class:"text-xs font-bold"},zn=Ye({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(me){const{t:a}=We(),{request:c}=Qe(),{pickByTheme:f,displayFormErrors:Z,formatKey:ee}=Xe(),b=bt(me,"show"),{adIdentifiers:q}=Ke(yl()),{loadAdIdentifiers:A}=yl(),{isLightTheme:ie}=Ke(ht()),j=i(!1),Y=async()=>{j.value=!0,await A(),j.value=!1};Y();const D=pt(),M=st(),v=ot(),te=i(!1),O=i(!1),G=i(null),X=i(null),d=i({id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),re={id:[{required:!0,message:a("fillRequired")}]},K=B=>{G.value=we.cloneDeep(B),d.value=we.cloneDeep(B||{id:"",reusable:!1,contentType:At.IMAGE,contentSize:"",params:[]}),O.value=!0},L=async()=>{var B;return(B=X.value)==null||B.validate(async E=>{var z,h,P,R,ne,m;if(!E){v.start(),te.value=!0;const g={id:d.value.id,reusable:d.value.reusable,contentType:d.value.contentType,contentSize:d.value.contentSize,params:d.value.params},F=await c({method:G.value?"put":"post",url:G.value?`/ad-identifiers/${G.value.id}`:"/ad-identifiers",data:g});if(F.failure&&F.error)switch((P=(h=(z=F.error)==null?void 0:z.response)==null?void 0:h.data)==null?void 0:P.errorCode){case tt.FORM_INVALID_DATA:Z((m=(ne=(R=F.error)==null?void 0:R.response)==null?void 0:ne.data)==null?void 0:m.data);break;default:M.error(a("anErrorOccurred"))}else M.success(a("success")),Y(),O.value=!1;te.value=!1,v.finish()}}),!1},le=async B=>{D.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/ad-identifiers/${B.id}`})).success?(M.success(a("success")),Y()):M.error(a("anErrorOccurred"))}})};return(B,E)=>{const z=be,h=Me,P=rt,R=Lt,ne=Ut,m=fe,g=at,F=Vt,p=Ct,I=Yt,Q=ut,r=Ze,u=Ft,V=wt,x=hl,$=kl,y=nn,w=vt,de=_t;return n(),U(ge,null,[t(Q,{show:b.value,"onUpdate:show":E[2]||(E[2]=oe=>b.value=oe),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(P,{align:"center"},{default:l(()=>[t(h,{size:"small",type:"primary",disabled:e(j),onClick:E[0]||(E[0]=oe=>K(null))},{default:l(()=>[t(z,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+s(e(a)("add")),1)]),_:1},8,["disabled"]),t(h,{size:"small",type:"error",disabled:e(j),onClick:E[1]||(E[1]=oe=>b.value=!1)},{default:l(()=>[t(z,{icon:"carbon:close",class:"mr-1"}),T(" "+s(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(I,{show:e(j)},{default:l(()=>[e(q).length?(n(),C(F,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(q),oe=>(n(),C(g,{key:oe.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Cn,[_("div",In,[_("span",$n,s(oe.id),1),_("div",null,[_("span",Vn,s(oe.contentType===e(At).IMAGE?e(a)("image"):e(a)("video")),1),oe.contentSize?(n(),U("span",Tn," Â ("+s(oe.contentSize)+") ",1)):he("",!0)])]),t(P,null,{default:l(()=>[t(R,{size:"medium",bordered:!1,type:oe.reusable?"info":"warning"},{default:l(()=>[T(s(oe.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ne,{vertical:"",class:He(["!mx-0",e(f)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(h,{size:"small",type:"warning",secondary:e(ie),onClick:H=>K(oe)},{default:l(()=>[t(m,null,{default:l(()=>[t(z,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"error",secondary:e(ie),onClick:H=>le(oe)},{default:l(()=>[t(m,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(g,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(m,{size:"60"},{default:l(()=>[t(z,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Q,{show:e(O),"onUpdate:show":E[8]||(E[8]=oe=>ze(O)?O.value=oe:null),loading:e(te),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:E[9]||(E[9]=oe=>O.value=!1)},{default:l(()=>[t(de,{ref_key:"formRef",ref:X,model:e(d),rules:re,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(r,{value:e(d).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":E[3]||(E[3]=oe=>e(d).id=e(ee)(oe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(r,{value:e(d).contentSize,"onUpdate:value":E[4]||(E[4]=oe=>e(d).contentSize=oe),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(u,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t($,{value:e(d).reusable,"onUpdate:value":E[5]||(E[5]=oe=>e(d).reusable=oe),name:"reusable",class:"w-full"},{default:l(()=>[t(x,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(x,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(u,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t($,{value:e(d).contentType,"onUpdate:value":E[6]||(E[6]=oe=>e(d).contentType=oe),name:"contentType",class:"w-full"},{default:l(()=>[t(x,{value:e(At).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(x,{value:e(At).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(w,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(y,{value:e(d).params,"onUpdate:value":E[7]||(E[7]=oe=>e(d).params=oe),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Un={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Mn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Sn=["src"],An=Ye({__name:"index",setup(me){const a=ot(),c=st(),f=pt(),Z=gt("appConfig"),{adIdentifiers:ee}=Ke(yl()),{loadAdIdentifiers:b}=yl(),{displayFormErrors:q,tr:A,fileUrl:ie,pickByTheme:j,appSecondaryColor:Y,isInDevMode:D}=Xe(),{request:M}=Qe(),{t:v,locale:te}=We(),O=i(!1),G=i([]),X=i(""),d=i(),re={pageSize:12,prefix:({itemCount:y})=>ue("div",{class:"font-bold"},{default:()=>`${v("total")}: ${y}`})},K=[{title:v("preview"),key:"image",width:200,fixed:"left",render(y){var w;return((w=y.adIdentifier)==null?void 0:w.contentType)==At.IMAGE?ue(ll,{src:y.contentUrl??"",objectFit:"cover",width:200,height:100}):ue("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[ue(fe,{size:50,color:Y.value},{default:()=>ue(be,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(y){return ue("small",{},{default:()=>y.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(y){return ue("div",{},{default:()=>A(y.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(y){return ue("small",{},{default:()=>A(y.description)})}},{title:v("status"),key:"isActive",width:100,render(y){return ue(Lt,{type:y.display?"success":"warning",bordered:!1},{default:()=>y.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(y){return ue("div",{},{default:()=>Et(y.updatedAt,{locale:te.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(y){return ue("div",{},{default:()=>Et(y.createdAt,{locale:te.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Ze,{ref:d,placeholder:v("search"),value:X.value,onInput:y=>{X.value=y}},{suffix:()=>ue(fe,{},{default:()=>ue(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(y){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Me,{size:"small",type:"warning",onClick:()=>{p(y)},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"error",onClick:()=>{f.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await M({method:"delete",url:`/ads/${y.id}`})).success?(c.success(v("success")),le()):c.error(v("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=Le(()=>{if(!X.value)return G.value;const y=G.value.filter(w=>{var de;return w.pid.toLowerCase().includes(X.value.toLowerCase())||w.title.toLowerCase().includes(X.value.toLowerCase())||((de=w.description)==null?void 0:de.toLowerCase().includes(X.value.toLowerCase()))});return d.value&&d.value.focus(),y}),le=async()=>{O.value=!0;const y=await M({url:"/ads"});y.success&&y.result&&(G.value=y.result.data),await b(),O.value=!1};le();const B=i(!1),E=i(!1),z=i(!1),h=i(At.IMAGE),P=i(),R=i(null),ne=i(null),m=i({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),g={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},F=Le({get:()=>!m.value.broadcastStart||!m.value.broadcastEnd?null:[m.value.broadcastStart||"",m.value.broadcastEnd||""],set:y=>{y?(m.value.broadcastStart=y[0],m.value.broadcastEnd=y[1]):(m.value.broadcastStart=null,m.value.broadcastEnd=null)}}),p=y=>{var w;R.value=we.cloneDeep(y),y?(m.value=we.cloneDeep(y),y.data||(m.value.data={})):m.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},P.value=(w=ee.value.find(de=>de.id==m.value.pid))==null?void 0:w.params,E.value=!0},I=y=>ue("span",{},{default:()=>y.id+(y.contentSize?` (${y.contentSize})`:"")}),Q=async()=>{var y;return(y=ne.value)==null||y.validate(async w=>{var de,oe,H,k,ae,ve;if(!w)if(R.value)if(R.value.title!==m.value.title&&G.value.findIndex(W=>W.title==m.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),B.value=!0;const W={pid:m.value.pid,title:m.value.title,display:m.value.display,content:m.value.content,description:m.value.description,data:m.value.data,broadcastStart:m.value.broadcastStart,broadcastEnd:m.value.broadcastEnd},xe=await M({method:"put",url:`/ads/${R.value.id}`,data:W});xe.success&&xe.result.data&&(c.success(v("success")),le()),B.value=!1,a.finish(),E.value=!1}else if(G.value.findIndex(W=>W.title==m.value.title)>-1)c.error(v("sameAdTitleMessage"));else{a.start(),B.value=!0;const W={pid:m.value.pid,title:m.value.title,display:m.value.display,content:m.value.content,description:m.value.description,data:m.value.data,broadcastStart:m.value.broadcastStart,broadcastEnd:m.value.broadcastEnd},xe=await M({method:"post",url:"/ads",data:W});if(xe.failure&&xe.error)switch((H=(oe=(de=xe.error)==null?void 0:de.response)==null?void 0:oe.data)==null?void 0:H.errorCode){case tt.FORM_INVALID_DATA:q((ve=(ae=(k=xe.error)==null?void 0:k.response)==null?void 0:ae.data)==null?void 0:ve.data);break;default:c.error(v("anErrorOccurred"))}else c.success(v("success")),le();B.value=!1,a.finish(),E.value=!1}}),!1},r=i(!1),u=i(!1),V=i(!1),x=i(""),$=i("");return(y,w)=>{var se,$e;const de=rt,oe=$t,H=wl,k=bl,ae=kt,ve=vt,W=Aa,xe=Tt,ye=Ft,ce=hl,qe=kl,De=wt,Ce=Pt,J=xl,S=_t,Ie=ut,N=Kt;return n(),U(ge,null,[t(oe,{to:"#alt-action"},{default:l(()=>[t(de,null,{default:l(()=>[e(D)?(n(),C(e(Me),{key:0,type:"warning",onClick:w[0]||(w[0]=pe=>z.value=!0)},{default:l(()=>[t(e(fe),{size:"26"},{default:l(()=>[t(e(be),{icon:"carbon:id"})]),_:1}),T(" "+s(e(v)("identifiers")),1)]),_:1})):he("",!0),t(e(Me),{type:"primary",onClick:w[1]||(w[1]=pe=>p(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:l(()=>[t(H,{columns:K,data:e(L),pagination:re,loading:e(O),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(Ie,{show:e(E),"onUpdate:show":w[12]||(w[12]=pe=>ze(E)?E.value=pe:null),loading:e(B),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(R)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:Q,onNegativeClick:w[13]||(w[13]=pe=>E.value=!1)},{default:l(()=>[t(S,{ref_key:"formRef",ref:ne,class:"mt-5",model:e(m),rules:g,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(De,{cols:"24","x-gap":12},{default:l(()=>[t(Ce,{span:"12"},{default:l(()=>[t(ve,{"show-label":!1,path:"title"},{default:l(()=>[t(ae,{modelValue:e(m).title,"onUpdate:modelValue":w[2]||(w[2]=pe=>e(m).title=pe),placeholder:e(v)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(v)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(ve,{"show-label":!1,path:"description"},{default:l(()=>[t(ae,{modelValue:e(m).description,"onUpdate:modelValue":w[3]||(w[3]=pe=>e(m).description=pe),placeholder:e(v)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(s(e(v)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(ve,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(W,{"formatted-value":e(F),"onUpdate:formattedValue":w[4]||(w[4]=pe=>ze(F)?F.value=pe:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(ye,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(xe,{value:e(m).pid,"onUpdate:value":[w[5]||(w[5]=pe=>e(m).pid=pe),w[6]||(w[6]=()=>{var pe;P.value=(pe=e(ee).find(Ee=>Ee.id==e(m).pid))==null?void 0:pe.params})],"render-label":I,options:e(ee).map(pe=>({...pe,disabled:!pe.reusable&&(pe.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(ye,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(qe,{value:e(m).display,"onUpdate:value":w[7]||(w[7]=pe=>e(m).display=pe),name:"display",class:"w-full"},{default:l(()=>[t(ce,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(ce,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(Ce,{span:"12"},{default:l(()=>[t(ve,{label:e(v)("content"),path:"content"},{default:l(()=>[e(h)==e(At).VIDEO?(n(),C(J,{key:0},{default:l(()=>[t(e(Me),{type:"primary",onClick:w[8]||(w[8]=()=>{u.value=!0})},{default:l(()=>[T(s(e(v)("select")),1)]),_:1}),t(e(Ze),{value:e(m).content?e(Zt)(e(m).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(m).content?(n(),U(ge,{key:0},[t(e(Me),{type:"primary",ghost:"",onClick:w[9]||(w[9]=()=>{x.value=e(v)("video"),$.value=e(ie)(e(m).content),V.value=!0})},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[T(" "+s(e(v)("play")),1)]),_:1}),t(e(Me),{type:"primary",ghost:"",onClick:w[10]||(w[10]=()=>{e(m).content=""})},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(v)("clear")),1)]),_:1})],64)):he("",!0)]),_:1})):(n(),U("div",Un,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:w[11]||(w[11]=()=>{r.value=!0})},[e(m).content?(n(),C(e(ll),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Fe("border: 1px dashed "+e(j)("green","white")),src:e(ie)(e(m).content||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Fe("border: 1px dashed "+e(j)("green","white"))},[t(e(fe),{size:64},{default:l(()=>[t(e(be),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(P)&&Array.isArray(e(P))?(n(),C(ve,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(De,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),U(ge,null,Re(e(P),(pe,Ee)=>(n(),U(ge,{key:Ee},[t(Ce,{span:10},{default:l(()=>[t(e(Ze),{value:pe,placeholder:pe,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(Ce,{span:14},{default:l(()=>[t(e(Ze),{value:e(m).data[pe],"onUpdate:value":Ve=>e(m).data[pe]=Ve,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):he("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ie,{show:e(V),"onUpdate:show":w[14]||(w[14]=pe=>ze(V)?V.value=pe:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(x)},{default:l(()=>[_("video",Mn,[_("source",{src:e($)},null,8,Sn)])]),_:1},8,["show","title"]),t(N,{show:e(r),"onUpdate:show":w[15]||(w[15]=pe=>ze(r)?r.value=pe:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((se=e(Z))==null?void 0:se.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:w[16]||(w[16]=pe=>{e(m).content=pe,r.value=!1})},null,8,["show","title","upload-config"]),t(N,{show:e(u),"onUpdate:show":w[17]||(w[17]=pe=>ze(u)?u.value=pe:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:(($e=e(Z))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:w[18]||(w[18]=pe=>{e(m).content=pe,u.value=!1})},null,8,["show","title","upload-config"]),t(zn,{show:e(z),"onUpdate:show":w[19]||(w[19]=pe=>ze(z)?z.value=pe:null)},null,8,["show"])],64)}}});const En=Nt(An,[["__scopeId","data-v-249c905b"]]),Dn={class:"w-full"},Ln={class:"mb-2"},Pn={class:"text-base text-left"},Nn=["src","onClick"],On=["src"],Rn=Ye({name:"AlbumsPicker"}),qn=Ye({...Rn,props:Ht({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(me){const a=bt(me,"modelValue"),c=me,{t:f}=We(),{fileUrl:Z}=Xe(),ee=i(!1),b=i(!1),q=i(0),A=i(""),ie=gt("appConfig"),j=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},Y=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},D=(v,te)=>{a.value&&Array.isArray(a.value[te].medias)?a.value[te].medias.splice(v,1):a.value&&(a.value[te].medias=[])},M=v=>{var O,G;const te=((G=(O=v.split("."))==null?void 0:O.pop())==null?void 0:G.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(te)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(te)?"video":"unknown"};return(v,te)=>{var h;const O=be,G=fe,X=Me,d=kt,re=ll,K=Il("Draggable"),L=Ea,le=Vt,B=at,E=Kt,z=ut;return n(),U("section",Dn,[_("section",Ln,[t(B,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Pn,s(c.title),1)]),"header-extra":l(()=>[c.readonly?he("",!0):(n(),C(X,{key:0,quaternary:"",onClick:j},{icon:l(()=>[t(G,{size:"18"},{default:l(()=>[t(O,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),U(ge,null,Re(a.value,(P,R)=>(n(),C(B,{key:R,size:"small",embedded:"",hoverable:"",segmented:P.medias&&P.medias.length>0,class:"mb-4"},Fa({header:l(()=>[t(d,{modelValue:P.name,"onUpdate:modelValue":ne=>P.name=ne,placeholder:e(f)("albumName"),disabled:c.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(le,{style:{"max-height":"100%"}},{default:l(()=>[P.medias&&P.medias.length>0?(n(),C(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(K,{list:P.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),U(ge,null,Re(P.medias,(ne,m)=>(n(),U("div",{key:"img-"+m,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[M(ne)==="image"?(n(),C(re,{key:0,"object-fit":"cover",src:e(Z)(ne)},null,8,["src"])):(n(),U("video",{key:1,muted:"",src:e(Z)(ne),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{A.value=e(Z)(ne),b.value=!0}},null,8,Nn)),c.readonly?he("",!0):(n(),C(X,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:g=>D(m,R)},{icon:l(()=>[t(G,null,{default:l(()=>[t(O,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):he("",!0)]),_:2},1024)]),_:2},[c.readonly?void 0:{name:"header-extra",fn:l(()=>[t(X,{quaternary:"",class:"mr-2",onClick:()=>{q.value=R,ee.value=!0}},{icon:l(()=>[t(G,null,{default:l(()=>[t(O,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("add")),1)]),_:2},1032,["onClick"]),te[3]||(te[3]=_("div",{class:"w-2"},null,-1)),t(X,{quaternary:"",type:"error",onClick:ne=>Y(R)},{icon:l(()=>[t(G,null,{default:l(()=>[t(O,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(E,{show:e(ee),"onUpdate:show":te[0]||(te[0]=P=>ze(ee)?ee.value=P:null),title:e(f)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((h=e(ie))==null?void 0:h.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:te[1]||(te[1]=P=>{a.value&&Array.isArray(a.value[e(q)].medias)?a.value[e(q)].medias.push(P):a.value&&(a.value[e(q)].medias=[P]),ee.value=!1})},null,8,["show","title","upload-config"]),t(z,{show:e(b),"onUpdate:show":te[2]||(te[2]=P=>ze(b)?b.value=P:null),preset:"card",style:{width:"500px"},title:e(f)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e(A)?(n(),U("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e(A)},null,8,On)):he("",!0)]),_:1},8,["show","title"])])}}});const Fn=Nt(qn,[["__scopeId","data-v-32de8454"]]);function Ga(){const{request:me}=Qe(),a=i([]),c=q=>{const A=q.split("_"),ie={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},j={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(D=>D.replace(/([A-Z])(?=\.\w+$)/,(M,v)=>j[v]||v))(A[0]),A.length>1?ie[A[1]]:""]},f=()=>new Promise(q=>setTimeout(q)),Z=async q=>{a.value=[];let A=1;for(const[ie,j]of Object.entries(q)){A&&A%5e3===0&&await f();const[Y,D]=c(ie);a.value.push({id:A,name:Y,svgCode:j,library:D}),A+=1}return a.value},ee=i(!1);return{searchIcons:async q=>{let A={};ee.value=!0;const ie=await me({url:"/search-icons",method:"post",data:{query:q,decode:!1}});if(ie.success&&ie.result){try{A=JSON.parse(ie.result.data)}catch(j){A={},console.error(j)}A=await Z(A)}return ee.value=!1,A},isSearching:ee,currentIconsList:a}}const jn=["innerHTML"],Bn=Ye({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(me){zl(ee=>({"95b6e21e":e(f),"22e3431a":e(c)}));const a=me,c=Le(()=>a.color),f=Le(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),Z=i();return xt(()=>a.data,async ee=>{var b,q;if(!$a(ee||"")){const{currentIconsList:A}=Ga();Z.value=((q=(b=A.value)==null?void 0:b.find(ie=>ie.name==ee))==null?void 0:q.svgCode)||""}},{immediate:!0}),(ee,b)=>(n(),U("i",{innerHTML:e($a)(a.data||"")?a.data:e(Z)},null,8,jn))}});const Vl=Nt(Bn,[["__scopeId","data-v-09747f05"]]),Kn={key:0,class:"multiple"},Yn={key:0,class:"item"},Gn={key:2,class:"flex items-center ml-2"},Hn={key:1,class:"placeholder"},Wn={class:"v3ip__search"},Jn=["placeholder"],Xn={key:0,class:"v3ip__loader"},Zn=["onClick"],Qn={key:1,class:"v3ip__empty"},es={key:1,class:"default-text"},ts={key:1,class:"default-text"},ls=Ye({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(me,{emit:a}){zl(K=>({"0fdd31ba":e(f),fe32c314:e(ee)}));const c=me,f=Le(()=>typeof c.selectorHeight=="number"?`${c.selectorHeight}px`:c.selectorHeight),Z=a,ee=i(c.selectedIconBgColor),b=i(""),q=i(!1),{currentIconsList:A,searchIcons:ie,isSearching:j}=Ga();xt(()=>b.value,K=>{ie(K)},{immediate:!0});const Y=Le(()=>we.uniqBy(we.uniqBy(A.value.filter(K=>{var h,P;const L=typeof c.iconLibrary=="string"&&K.library==c.iconLibrary||Array.isArray(c.iconLibrary)&&c.iconLibrary.includes(K.library)||c.iconLibrary=="all",le=!c.includeIcons||!c.includeIcons.length||c.includeIcons.includes(K.name),B=!c.includeSearch||((h=K.name)==null?void 0:h.toLocaleLowerCase().includes(c.includeSearch)),E=!c.excludeIcons||!c.excludeIcons.length||!c.excludeIcons.includes(K.name),z=!c.excludeSearch||!((P=K.name)!=null&&P.toLocaleLowerCase().includes(c.excludeSearch));return L&&le&&B&&E&&z}),"svgCode"),"name")),D=K=>c.valueType=="name"?K.name:K.svgCode,M=K=>{var L,le;return c.valueType=="name"?((le=(L=A.value)==null?void 0:L.find(B=>B.name==K))==null?void 0:le.svgCode)||"":K},v=K=>c.multiple?c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length?c.modelValue.findIndex(L=>L==D(K))>-1:!1:c.modelValue==D(K),te=K=>{if(K)if(c.multiple)if(c.modelValue&&Array.isArray(c.modelValue)&&c.modelValue.length){const L=c.modelValue,le=c.modelValue.findIndex(B=>B==D(K));le>-1?L.splice(le,1):c.modelValue.length<c.multipleLimit&&typeof D(K)<"u"&&L.push(D(K)),Z("update:modelValue",L),Z("change",L,K)}else c.multipleLimit>0&&(Z("update:modelValue",[D(K)]),Z("change",[D(K)],K));else D(K)==c.modelValue?c.clearable&&Z("update:modelValue",null):Z("update:modelValue",D(K)),Z("change",K)},O=i();yn(O,()=>q.value=!1);const G=i(),{width:X}=gn(G),d=vn(),re=K=>!!d[K];return(K,L)=>{var h,P,R,ne;const le=be,B=fe,E=Me,z=Yt;return n(),U("div",{ref_key:"picker",ref:O,class:"v3ip__custom-select",onBlur:L[4]||(L[4]=m=>q.value=!1)},[_("div",{class:He(["v3ip__selected",{open:e(q),disabled:c.disabled}]),onClick:L[2]||(L[2]=m=>q.value=c.disabled?!1:!e(q))},[!c.multiple&&c.modelValue||c.multiple&&Array.isArray(c.modelValue)&&((h=c.modelValue)!=null&&h.length)?(n(),U(ge,{key:0},[c.multiple?(n(),U("div",Kn,[Array.isArray(c.modelValue)?(n(),U(ge,{key:0},[(n(!0),U(ge,null,Re(c.modelValue||[],(m,g)=>(n(),U(ge,{key:g},[g<c.selectedItemsToDisplay?(n(),C(Vl,{key:0,class:"item",data:typeof M(m)=="string"?M(m):null,size:20,onClick:it(F=>{var p;return te((p=e(A))==null?void 0:p.find(I=>D(I)==m))},["stop"])},null,8,["data","onClick"])):he("",!0)],64))),128)),((P=c.modelValue)==null?void 0:P.length)>c.selectedItemsToDisplay?(n(),U("div",Yn,[_("b",null," +"+s(((R=c.modelValue)==null?void 0:R.length)-c.selectedItemsToDisplay),1)])):he("",!0)],64)):he("",!0)])):(n(),C(Vl,{key:1,data:typeof M(c.modelValue)=="string"?M(c.modelValue):null,size:20,onClick:L[0]||(L[0]=it(m=>{var g;return te((g=e(A))==null?void 0:g.find(F=>D(F)==c.modelValue))},["stop"]))},null,8,["data"])),(ne=c.modelValue)!=null&&ne.length&&c.clearable?(n(),U("div",Gn,[t(E,{type:"error",size:"tiny",secondary:"",onClick:L[1]||(L[1]=it(()=>{Z("update:modelValue",c.multiple?[]:null)},["stop"]))},{default:l(()=>[t(B,null,{default:l(()=>[t(le,{icon:"carbon:close"})]),_:1})]),_:1})])):he("",!0)],64)):(n(),U("span",Hn,s(c.placeholder),1))],2),t(Za,{name:"fade"},{default:l(()=>[dl(_("div",null,[_("div",Wn,[dl(_("input",{"onUpdate:modelValue":L[3]||(L[3]=m=>ze(b)?b.value=m:null),type:"text",name:"search",placeholder:c.searchPlaceholder},null,8,Jn),[[Xa,e(b)]])]),e(j)?(n(),U("div",Xn,[t(z,{size:"small"})])):(n(),U(ge,{key:1},[e(Y)&&e(Y).length?(n(),C(e(bn),{key:0,ref_key:"scroller",ref:G,class:"v3ip__items",items:e(Y),"item-size":40,"grid-items":4,"item-secondary-size":e(X)/4},{default:l(({item:m})=>[_("div",{class:He({active:v(m)}),onClick:g=>te(m)},[t(Vl,{data:typeof m.svgCode=="string"?m.svgCode:null,size:24,color:v(m)?c.selectedIconColor:void 0},null,8,["data","color"])],10,Zn)]),_:1},8,["items","item-secondary-size"])):(n(),U("div",Qn,[e(b)?(n(),U(ge,{key:0},[re("empty")?_n(K.$slots,"empty",{key:0},void 0,!0):(n(),U("div",es,[_("small",null,s(c.emptyText),1)]))],64)):(n(),U("div",ts,[_("small",null,s(c.iconsListPlaceholder),1)]))]))],64))],512),[[vl,e(q)]])]),_:3})],544)}}});const Ha=Nt(ls,[["__scopeId","data-v-67ca7633"]]),as={class:"w-full"},ns={class:"mb-2"},ss={class:"text-base text-left"},os=Ye({name:"GridImagesPicker"}),is=Ye({...os,props:Ht({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(me){const a=bt(me,"modelValue"),c=gt("appConfig"),f=me,{t:Z}=We(),{fileUrl:ee}=Xe(),b=i(!1),q=ie=>{Array.isArray(a.value)?a.value.splice(ie,1):a.value=[]},A=async ie=>{Array.isArray(a.value)?a.value.push(...ie):a.value=[...ie],b.value=!1};return(ie,j)=>{var re;const Y=be,D=fe,M=Me,v=ll,te=Il("Draggable"),O=Ea,G=Vt,X=at,d=Kt;return n(),U("section",as,[_("section",ns,[t(X,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",ss,s(f.title),1)]),"header-extra":l(()=>[f.readonly?he("",!0):(n(),C(M,{key:0,quaternary:"",onClick:j[0]||(j[0]=K=>b.value=!0)},{icon:l(()=>[t(D,{size:"18"},{default:l(()=>[t(Y,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("add")),1)]),_:1}))]),default:l(()=>[t(G,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),C(O,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(te,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),U(ge,null,Re(a.value,(K,L)=>(n(),U("div",{key:"img-"+L,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(ee)(K)},null,8,["src"]),f.readonly?he("",!0):(n(),C(M,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:le=>q(L)},{icon:l(()=>[t(D,null,{default:l(()=>[t(Y,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):he("",!0)]),_:1})]),_:1},8,["segmented"])]),t(d,{show:e(b),"onUpdate:show":j[1]||(j[1]=K=>ze(b)?b.value=K:null),title:e(Z)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((re=e(c))==null?void 0:re.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:A},null,8,["show","title","upload-config"])])}}});const rs=Nt(is,[["__scopeId","data-v-12efa615"]]);var dt=(me=>(me.EXTERNAL_LINK="external-link",me.PAGE_LINK="page-link",me.CONTENT_LINK="content-link",me))(dt||{}),nt=(me=>(me.NEWS_TAG="news-tag",me.NEWS_CATEGORY="news-category",me.NEWS_ARTICLE="news-article",me.CONTENT_MODEL="content-model",me))(nt||{});const cl=()=>{const{t:me}=We(),{tr:a}=Xe(),c=(b,q)=>{if(q&&q.titleFieldName)return Ia(b.contentModelData.index[q.titleFieldName])?a(b.contentModelData.index[q.titleFieldName]):b.contentModelData.index[q.titleFieldName];if(b.contentModelData&&b.contentModelData.index){const A=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const ie of A)if(b.contentModelData.index[ie])return Ia(b.contentModelData.index[ie])?a(b.contentModelData.index[ie]):b.contentModelData.index[ie]}return a(b.title)},f=[{label:me("contentModel"),value:nt.CONTENT_MODEL,tagType:"warning"},{label:me("newsArticle"),value:nt.NEWS_ARTICLE,tagType:"info"},{label:me("newsCategory"),value:nt.NEWS_CATEGORY,tagType:"success"},{label:me("newsTag"),value:nt.NEWS_TAG,tagType:"error"}];return{contentTypes:f,getContentTypeLabel:b=>{var q;return(q=f.find(A=>A.value===b))==null?void 0:q.label},getContentTypeTagType:b=>{var q;return((q=f.find(A=>A.value===b))==null?void 0:q.tagType)||"default"},extractItemTitle:c}},us={key:4,class:"w-full"},ds={key:5,class:"w-full"},cs={key:20,class:"w-full flex flex-gap-8 items-center justify-start"},ps=["onClick"],fs={key:0,class:"w-full"},ms={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},vs=["src"],_s={id:"video",autoplay:"",controls:"",style:{width:"100%"}},ys=["src"],gs=Ye({name:"FormGenerator"}),bs=Ye({...gs,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(me,{emit:a}){const c=me,f=a,{t:Z}=We(),{tr:ee,pickByTheme:b,fileUrl:q,mergeArrays:A}=Xe(),{extractItemTitle:ie}=cl(),{request:j}=Qe(),{loadContentModels:Y}=Je(),{contentModels:D}=Ke(Je());Y();const M=gt("appConfig");let v=[];if(typeof c.items=="string")try{v=JSON.parse(c.items)}catch{v=[]}else v=we.cloneDeep(c.items);let te={};if(c.useJson)try{te=JSON.parse(c.modelValue)}catch{te={}}const O=i(""),G=i(ct()),X=i(null),d=i(c.useJson?te:c.modelValue),re={};v.forEach(N=>{N.key in d.value||(N.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(N.type)?d.value[N.key]=JSON.parse(N.defaultValue):N.type=="number"?d.value[N.key]=parseFloat(N.defaultValue):N.type=="content-model-item"?d.value[N.key]=void 0:N.type=="content-model-items"?d.value[N.key]=[]:N.type=="list"?d.value[N.key]=N.defaultValue.split(",").map(se=>({value:se})):N.type=="i18n-list"?d.value[N.key]=N.defaultValue.split(",").map(se=>({value:`{ "fr": "${se}", "en": "${se}" }`})):d.value[N.key]=N.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(N.type)?d.value[N.key]="":["number"].includes(N.type)?d.value[N.key]=0:["checkbox"].includes(N.type)?d.value[N.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(N.type)?d.value[N.key]=[]:d.value[N.key]=void 0),N.required&&(re[N.key]=[{required:!0,message:Z("fillRequired")}]),G.value=ct()});const K=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],L=N=>ue("span",{},{default:()=>ee(N.label)});xt(()=>d.value,N=>{const se=c.useJson?JSON.stringify(N):N,$e=async()=>{var Ee;if(v.length==0)return!0;let pe=!1;try{await((Ee=X.value)==null?void 0:Ee.validate(Ve=>{pe=!Ve}))}catch{pe=!1}return pe};f("update:modelValue",se),f("update",se,$e)},{immediate:!0,deep:!0});const le=ht(),B=Le(()=>le.isLightTheme?"light":"dark"),E=i(!1),z=i(!1),h=i(!1),P=i(""),R=i(""),ne=i(!1),m=i(!1),g=i(""),F=i(""),p=i(!1),I=N=>{window.open(N,"_blank")},Q=i(!1),r=i(!1),u=i([]);(async()=>{var se;r.value=!0;const N=await j({url:"/menu/items"});if(N.success&&N.result)for(let $e=0;$e<((se=N.result.data)==null?void 0:se.length);$e++)switch(N.result.data[$e].targetType){case dt.EXTERNAL_LINK:u.value.findIndex(pe=>pe.url===N.result.data[$e].url)===-1&&u.value.push(N.result.data[$e]);break;case dt.PAGE_LINK:u.value.findIndex(pe=>pe.path===N.result.data[$e].path)===-1&&u.value.push(N.result.data[$e]);break}r.value=!1})();const x=i(!1),$=i([]),y=i([]),w=async(N,se)=>{if(!N.length){y.value=[];return}x.value=!0;const $e=await j({url:`/content-model-items/search/${N}/${se}`});$e.success&&$e.result&&(y.value=$e.result.data),x.value=!1},de=Le(()=>A($.value,y.value,"id")),oe=i(!1),H=i([]),k=i([]),ae=async N=>{if(!N.length){k.value=[];return}oe.value=!0;const se=await j({url:`/news-articles/search/${N}`});se.success&&se.result&&(k.value=se.result.data),oe.value=!1},ve=Le(()=>A(H.value,k.value,"id")),{categories:W,tags:xe}=Ke(Qt()),{loadCategories:ye,loadTags:ce}=Qt();Sl(async()=>{v.find(N=>N.type==="news-categories"||N.type==="news-category")&&(ye(),ce());for(let N=0;N<v.length;N++)if(v[N].type==="news-articles"||v[N].type==="news-article"){oe.value=!0;const se=d.value[v[N].key],$e=await j({url:"/news-articles/list",method:"post",data:{ids:v[N].type==="news-articles"?se:[se]}});$e.success&&$e.result&&(H.value=A(H.value,$e.result.data,"id")),oe.value=!1}else if(v[N].type==="content-model-items"||v[N].type==="content-model-item"){x.value=!0;const se=d.value[v[N].key],$e=await j({url:"/content-model-items/list",method:"post",data:{ids:v[N].type==="content-model-items"?se:[se]}});$e.success&&$e.result&&($.value=A($.value,$e.result.data,"id")),x.value=!1}});const qe=N=>ue("span",{},{default:()=>`${ee(N.name)}`}),De=N=>ue("span",{},{default:()=>`${ee(N.title)}`}),Ce=N=>ue("span",{},{default:()=>`${ee(N.name)}`}),J=N=>Le(()=>ue("span",{},{default:()=>{var se;return ie(N,(se=D.value)==null?void 0:se.find($e=>$e.id===N.contentModelId))}})),S=({option:N})=>ue("div",{style:{display:"flex",alignItems:"center"}},[`${ee(N.title)}`]),Ie=N=>ue("div",{style:{marginLeft:"12px",padding:"4px 0"}},[ue("div",{},{default:()=>`${ee(N.title)}`}),ue("small",{},{default:()=>`${N.targetType==dt.EXTERNAL_LINK?N.url:N.path}`})]);return(N,se)=>{var il,pl,fl,rl,ul;const $e=Ze,pe=kt,Ee=Ba,Ve=Ul,Ne=Gt,Pe=Aa,et=Tt,ft=ll,Oe=be,Ge=fe,je=Me,ke=rs,Be=Ha,zt=Fn,Ot=xl,Wt=Ml,Jt=vt,Ue=_t,mt=ut,Rt=Kt;return n(),U(ge,null,[(n(),C(Ue,{ref_key:"formRef",ref:X,key:e(G),model:e(d),rules:re,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Fe(c.formStyle)},{default:l(()=>[(n(!0),U(ge,null,Re(e(v),(o,ml)=>(n(),C(Jt,{key:ml,label:e(ee)(o.label),path:o.key,"label-style":c.labelStyle,"show-require-mark":o.required,class:"w-full"},{default:l(()=>{var Te,jt,Xt,Al,El,Dl,Ll,Pl,Nl,Ol,Rl,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa,oa,ia,ra,ua,da,ca,pa,fa,ma,va,_a,ya,ga,ba,ha,ka,wa,xa,Ca;return[o.type=="text"?(n(),C($e,{key:0,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),maxlength:((Te=o.settings)==null?void 0:Te.maxLength)||void 0,minlength:((jt=o.settings)==null?void 0:jt.minLength)||void 0,clearable:((Xt=o.settings)==null?void 0:Xt.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):o.type=="i18n-text"?(n(),C(pe,{key:1,modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):o.type=="textarea"?(n(),C($e,{key:2,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),maxlength:((Al=o.settings)==null?void 0:Al.maxLength)||void 0,minlength:((El=o.settings)==null?void 0:El.minLength)||void 0,clearable:((Dl=o.settings)==null?void 0:Dl.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):o.type=="i18n-textarea"?(n(),C(pe,{key:3,modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):o.type=="editor"?(n(),U("div",us,[t(Ee,{modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),"toolbar-items":K,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):o.type=="i18n-editor"?(n(),U("div",ds,[t(pe,{modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):o.type=="number"?(n(),C(Ve,{key:6,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,max:((Ll=o.settings)==null?void 0:Ll.max)||void 0,min:((Pl=o.settings)==null?void 0:Pl.min)||void 0,step:((Nl=o.settings)==null?void 0:Nl.step)||1,clearable:((Ol=o.settings)==null?void 0:Ol.clearable)||!1,placeholder:e(ee)(o.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):o.type=="checkbox"?(n(),C(Ne,{key:7,checked:e(d)[o.key],"onUpdate:checked":_e=>e(d)[o.key]=_e,"checked-value":((Rl=o.settings)==null?void 0:Rl["checked-value"])||!0,"unchecked-value":((ql=o.settings)==null?void 0:ql["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):o.type=="date"?(n(),C(Pe,{key:8,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM-dd",format:((Fl=o.settings)==null?void 0:Fl.format)||"dd MMMM yyyy",type:"date",clearable:((jl=o.settings)==null?void 0:jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):o.type=="daterange"?(n(),C(Pe,{key:9,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM-dd",format:((Bl=o.settings)==null?void 0:Bl.format)||"dd MMMM yyyy",type:"daterange",clearable:((Kl=o.settings)==null?void 0:Kl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):o.type=="datetime"?(n(),C(Pe,{key:10,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Yl=o.settings)==null?void 0:Yl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:((Gl=o.settings)==null?void 0:Gl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):o.type=="datetimerange"?(n(),C(Pe,{key:11,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Hl=o.settings)==null?void 0:Hl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:((Wl=o.settings)==null?void 0:Wl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):o.type=="year"?(n(),C(Pe,{key:12,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy",type:"year",clearable:((Jl=o.settings)==null?void 0:Jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="yearrange"?(n(),C(Pe,{key:13,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy",type:"yearrange",clearable:((Xl=o.settings)==null?void 0:Xl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="month"?(n(),C(Pe,{key:14,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM",type:"month",clearable:((Zl=o.settings)==null?void 0:Zl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="monthrange"?(n(),C(Pe,{key:15,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-MM",type:"monthrange",clearable:((Ql=o.settings)==null?void 0:Ql.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="quarter"?(n(),C(Pe,{key:16,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-Q",type:"quarter",clearable:((ea=o.settings)==null?void 0:ea.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="quarterrange"?(n(),C(Pe,{key:17,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,"value-format":"yyyy-Q",type:"quarterrange",clearable:((ta=o.settings)==null?void 0:ta.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):o.type=="week"?(n(),C(Pe,{key:18,"formatted-value":e(d)[o.key],"onUpdate:formattedValue":_e=>e(d)[o.key]=_e,type:"week",clearable:((la=o.settings)==null?void 0:la.clearable)||!0,placeholder:e(Z)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):o.type=="single-select"||o.type=="multi-select"?(n(),C(et,{key:19,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:(aa=o.options||[])==null?void 0:aa.map(_e=>{var lt;if(o.type=="multi-select"&&o.settings&&e(d)[o.key]){const yt=((lt=o.settings)==null?void 0:lt.max)||1/0;return{..._e,disabled:e(d)[o.key].length>=yt&&!e(d)[o.key].includes(_e.value)}}return _e}),multiple:o.type=="multi-select",placeholder:e(ee)(o.label),"render-label":L,"label-field":"label","value-field":"value",filterable:"",clearable:((na=o.settings)==null?void 0:na.clearable)||!0,"max-tag-count":((sa=o.settings)==null?void 0:sa["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):o.type=="image"?(n(),U("div",cs,[_("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{O.value=o.key,E.value=!0}},[e(d)[o.key]?(n(),C(ft,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Fe("border: 1px dashed "+e(b)("green","white")),src:e(q)(e(d)[o.key]||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Fe("border: 1px dashed "+e(b)("green","white"))},[t(Ge,{size:64},{default:l(()=>[t(Oe,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,ps),e(d)[o.key]?(n(),C(je,{key:0,quaternary:"",onClick:()=>{O.value=o.key,e(d)[e(O)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("clear")),1)]),_:2},1032,["onClick"])):he("",!0)])):o.type=="gallery"?(n(),C(ke,{key:21,modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,"upload-folder":"images",title:e(ee)(o.label)},null,8,["modelValue","onUpdate:modelValue","title"])):o.type=="news-category"||o.type=="news-categories"?(n(),C(et,{key:22,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:(oa=e(W)||[])==null?void 0:oa.map(_e=>{var lt;if(o.type=="news-categories"&&o.settings&&e(d)[o.key]){const yt=((lt=o.settings)==null?void 0:lt.max)||1/0;return{..._e,disabled:e(d)[o.key].length>=yt&&!e(d)[o.key].includes(_e.id)}}return _e}),multiple:o.type=="news-categories",placeholder:e(ee)(o.label),"render-label":qe,"label-field":"name","value-field":"id",filterable:"",clearable:((ia=o.settings)==null?void 0:ia.clearable)||!0,"max-tag-count":((ra=o.settings)==null?void 0:ra["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):o.type=="news-tag"||o.type=="news-tags"?(n(),C(et,{key:23,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:(ua=e(xe)||[])==null?void 0:ua.map(_e=>{var lt;if(o.type=="news-tags"&&o.settings&&e(d)[o.key]){const yt=((lt=o.settings)==null?void 0:lt.max)||1/0;return{..._e,disabled:e(d)[o.key].length>=yt&&!e(d)[o.key].includes(_e.id)}}return _e}),multiple:o.type=="news-tags",placeholder:e(ee)(o.label),"render-label":Ce,"label-field":"name","value-field":"id",filterable:"",clearable:((da=o.settings)==null?void 0:da.clearable)||!0,"max-tag-count":((ca=o.settings)==null?void 0:ca["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):o.type=="news-article"||o.type=="news-articles"?(n(),C(et,{key:24,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:(pa=e(ve)||[])==null?void 0:pa.map(_e=>{var lt;if(o.type=="news-articles"&&o.settings&&e(d)[o.key]){const yt=((lt=o.settings)==null?void 0:lt.max)||1/0;return{..._e,disabled:e(d)[o.key].length>=yt&&!e(d)[o.key].includes(_e.id)}}return _e}),multiple:o.type=="news-articles",placeholder:e(ee)(o.label),"render-label":De,loading:e(oe),"value-field":"id",filterable:"",clearable:((fa=o.settings)==null?void 0:fa.clearable)||!0,"max-tag-count":((ma=o.settings)==null?void 0:ma["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:ae},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):o.type=="icon"||o.type=="icons"?(n(),C(Be,{key:25,modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),multiple:o.type=="icons","icons-list-placeholder":e(Z)("enterIconNameInSearchBar"),"search-placeholder":e(Z)("search"),"empty-text":e(Z)("noIconsFound"),"icon-library":((va=o.settings)==null?void 0:va.library)||"all",clearable:((_a=o.settings)==null?void 0:_a.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):o.type=="albums"?(n(),C(zt,{key:26,modelValue:e(d)[o.key],"onUpdate:modelValue":_e=>e(d)[o.key]=_e,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):o.type=="audio"?(n(),C(Ot,{key:27},{default:l(()=>[t(je,{type:"primary",onClick:()=>{O.value=o.key,ne.value=!0}},{default:l(()=>[T(s(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(d)[o.key]?e(Zt)(e(d)[o.key]):"",placeholder:e(Z)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(d)[o.key]?(n(),U(ge,{key:0},[t(je,{type:"primary",ghost:"",onClick:()=>{g.value=e(ee)(o.label),F.value=e(q)(e(d)[o.key]),m.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(je,{type:"primary",ghost:"",onClick:()=>{O.value=o.key,e(d)[e(O)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):o.type=="video"?(n(),C(Ot,{key:28},{default:l(()=>[t(je,{type:"primary",onClick:()=>{O.value=o.key,z.value=!0}},{default:l(()=>[T(s(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(d)[o.key]?e(Zt)(e(d)[o.key]):"",placeholder:e(Z)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(d)[o.key]?(n(),U(ge,{key:0},[t(je,{type:"primary",ghost:"",onClick:()=>{P.value=e(ee)(o.label),R.value=e(q)(e(d)[o.key]),h.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(je,{type:"primary",ghost:"",onClick:()=>{O.value=o.key,e(d)[e(O)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):o.type=="document"?(n(),C(Ot,{key:29},{default:l(()=>[t(je,{type:"primary",onClick:()=>{O.value=o.key,p.value=!0}},{default:l(()=>[T(s(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(d)[o.key]?e(Zt)(e(d)[o.key]):"",placeholder:e(Z)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(d)[o.key]?(n(),U(ge,{key:0},[t(je,{type:"primary",ghost:"",onClick:_e=>I(e(q)(e(d)[o.key]))},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("open")),1)]),_:2},1032,["onClick"]),t(je,{type:"primary",ghost:"",onClick:()=>{O.value=o.key,e(d)[e(O)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):he("",!0)]),_:2},1024)):o.type=="file"?(n(),C(Ot,{key:30},{default:l(()=>[t(je,{type:"primary",onClick:()=>{O.value=o.key,Q.value=!0}},{default:l(()=>[T(s(e(Z)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(d)[o.key]?e(Zt)(e(d)[o.key]):"",placeholder:e(Z)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(d)[o.key]?(n(),C(je,{key:0,type:"primary",ghost:"",onClick:()=>{O.value=o.key,e(d)[e(O)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Oe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(Z)("clear")),1)]),_:2},1032,["onClick"])):he("",!0)]),_:2},1024)):o.type=="color"?(n(),C(e(tl),{key:31,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,class:"cursor-pointer",theme:e(B),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):o.type=="content-model-item"||o.type=="content-model-items"?(n(),C(et,{key:32,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:(ya=e(de)||[])==null?void 0:ya.map(_e=>{var lt;if(o.type=="content-model-items"&&o.settings&&e(d)[o.key]){const yt=((lt=o.settings)==null?void 0:lt.max)||1/0;return{..._e,disabled:e(d)[o.key].length>=yt&&!e(d)[o.key].includes(_e.id)}}return _e}),multiple:o.type=="content-model-items",placeholder:e(ee)(o.label),"render-label":_e=>J(_e).value,loading:e(x),"value-field":"id",filterable:"",clearable:((ga=o.settings)==null?void 0:ga.clearable)||!0,"max-tag-count":((ba=o.settings)==null?void 0:ba["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:_e=>w(_e,o.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):o.type=="menu-item-link"?(n(),C(et,{key:33,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,options:e(u)||[],placeholder:e(ee)(o.label),"render-label":Ie,"render-tag":S,loading:e(r),"label-field":"title","value-field":"id",filterable:"",clearable:((ha=o.settings)==null?void 0:ha.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):o.type=="list"?(n(),C(Wt,{key:34,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),max:((ka=o.settings)==null?void 0:ka.max)||void 0,min:((wa=o.settings)==null?void 0:wa.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:_e})=>{var lt,yt;return[((lt=o.settings)==null?void 0:lt.type)=="editor"?(n(),U("div",fs,[t(Ee,{modelValue:_e.value,"onUpdate:modelValue":$l=>_e.value=$l,"toolbar-items":K,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(n(),C($e,{key:1,value:_e.value,"onUpdate:value":$l=>_e.value=$l,type:((yt=o.settings)==null?void 0:yt.type)||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):o.type=="i18n-list"?(n(),C(Wt,{key:35,value:e(d)[o.key],"onUpdate:value":_e=>e(d)[o.key]=_e,placeholder:e(ee)(o.label),max:((xa=o.settings)==null?void 0:xa.max)||void 0,min:((Ca=o.settings)==null?void 0:Ca.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:_e})=>{var lt;return[t(pe,{modelValue:_e.value,"onUpdate:modelValue":yt=>_e.value=yt,type:((lt=o.settings)==null?void 0:lt.type)||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):he("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(mt,{show:e(m),"onUpdate:show":se[0]||(se[0]=o=>ze(m)?m.value=o:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(g)},{default:l(()=>[_("audio",ms,[_("source",{src:e(F)},null,8,vs)])]),_:1},8,["show","title"]),t(mt,{show:e(h),"onUpdate:show":se[1]||(se[1]=o=>ze(h)?h.value=o:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(P)},{default:l(()=>[_("video",_s,[_("source",{src:e(R)},null,8,ys)])]),_:1},8,["show","title"]),t(Rt,{show:e(E),"onUpdate:show":se[2]||(se[2]=o=>ze(E)?E.value=o:null),title:e(Z)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((il=e(M))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[3]||(se[3]=o=>{e(d)[e(O)]=o,E.value=!1})},null,8,["show","title","upload-config"]),t(Rt,{show:e(z),"onUpdate:show":se[4]||(se[4]=o=>ze(z)?z.value=o:null),title:e(Z)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((pl=e(M))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[5]||(se[5]=o=>{e(d)[e(O)]=o,z.value=!1})},null,8,["show","title","upload-config"]),t(Rt,{show:e(ne),"onUpdate:show":se[6]||(se[6]=o=>ze(ne)?ne.value=o:null),title:e(Z)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((fl=e(M))==null?void 0:fl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[7]||(se[7]=o=>{e(d)[e(O)]=o,ne.value=!1})},null,8,["show","title","upload-config"]),t(Rt,{show:e(p),"onUpdate:show":se[8]||(se[8]=o=>ze(p)?p.value=o:null),title:e(Z)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((rl=e(M))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[9]||(se[9]=o=>{e(d)[e(O)]=o,p.value=!1})},null,8,["show","title","upload-config"]),t(Rt,{show:e(Q),"onUpdate:show":se[10]||(se[10]=o=>ze(Q)?Q.value=o:null),title:e(Z)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ul=e(M))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[11]||(se[11]=o=>{e(d)[e(O)]=o,Q.value=!1})},null,8,["show","title","upload-config"])],64)}}});const gl=Nt(bs,[["__scopeId","data-v-9ecd0c70"]]),hs={key:0},ks={key:1},ws={key:0},xs={class:"flex items-center"},Cs={class:"text-base"},Is={class:"flex items-center justify-center cursor-pointer gap-2"},$s={key:1},Vs={class:"mt-4"},Ts={key:2,class:"mt-2 text-xs"},zs={class:"my-8"},Us={class:"flex items-center justify-between"},Ms={class:"text-base"},Ss=Ye({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(me,{emit:a}){const c=pt(),{t:f}=We(),Z=me,ee=a,b=i(ct()),q=i({}),A=i({}),ie=i(),j=i(),Y=i(),D=i([]),M=i([]),v=i({}),te=i({}),O=i(!1),G=i(!1),X=st(),d=ot(),{request:re}=Qe(),{tr:K,pickByTheme:L,editKeysToCamelCase:le}=Xe(),{sections:B}=Ke(Je()),{isLightTheme:E}=Ke(ht()),z=async($=!0)=>{var de,oe,H,k;$&&(O.value=!0),G.value=!0,d.start();const y=await re({url:`/pages/${Z.slug}`});if(y.success&&y.result){if(Y.value=y.result.data,(de=Y.value)!=null&&de.sections&&Array.isArray((oe=Y.value)==null?void 0:oe.sections)){const ae={};for(const ve of Y.value.sections)ve&&(ae[ve.slug]=ve.dataSourcePageSectionsData??{});for(const ve of Y.value.sections)ve&&(we.isObject(ae)&&we.has(ae,ve.slug)&&Ua(ae[ve.slug])?q.value[ve.slug]=qt(ae[ve.slug]):q.value[ve.slug]=qt({}),we.forIn(le(ve.dataStructure),(W,xe)=>{(!q.value[ve.slug][xe]||Array.isArray(q.value[ve.slug][xe])&&q.value[ve.slug][xe].length==0)&&(xe==="index"?q.value[ve.slug][xe]=qt({}):q.value[ve.slug][xe]=qt([]))}))}if(Y.value&&Array.isArray((H=Y.value)==null?void 0:H.sections)){const ae=Y.value.sections;if(Array.isArray((k=Y.value)==null?void 0:k.sectionsOrder)){D.value=[];for(const ve of Y.value.sectionsOrder)if(ve){const W=ae.find(xe=>xe.slug===ve);W&&D.value.push(W)}for(const ve of ae)D.value.map(W=>W.slug).includes(ve.slug)||D.value.push(ve)}else D.value=we.cloneDeep(ae);if(Array.isArray(Y.value.sectionsDisabled))for(const ve of Y.value.sections)ve&&(v.value[ve.slug]=!Y.value.sectionsDisabled.includes(ve.slug));else for(const ve of Y.value.sections)ve&&(v.value[ve.slug]=!0)}te.value=we.cloneDeep(v.value),M.value=we.cloneDeep(D.value),A.value=we.cloneDeep(q.value)}b.value=ct();function w(ae){return new Promise(ve=>setTimeout(ve,ae))}await w(5e3),d.finish(),G.value=!1,$&&(O.value=!1)};z();const h=$=>ue("span",{},{default:()=>{var y;return $.id===((y=Y.value)==null?void 0:y.id)?f("currentPage"):K($.title)}}),P=Le(()=>we.isEqual(q.value,A.value)&&we.isEqual(D.value,M.value)&&we.isEqual(v.value,te.value)),R=async()=>{G.value=!0,d.start();const $=ie.value&&await ie.value(),y=j.value&&await j.value(),w=async()=>{const de=await re({url:`/pages/${Z.slug}`,method:"put",data:{dispatchData:!0,sectionsData:q.value,sectionsOrder:D.value.map(oe=>oe.slug),sectionsDisabled:Object.keys(v.value).filter(oe=>!v.value[oe])}});de.success&&de.result?(X.success(f("success")),z(!1)):X.error(f("anErrorOccurred"))};(!ie.value||$)&&(!j.value||y)?await w():c.warning({title:f("confirm"),content:f("mandatoryFieldsNotFilledInConfirmation"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{await w()}}),d.finish(),G.value=!1},ne=async $=>{c.warning({title:f("confirm"),content:f("confirmDeletePage"),positiveText:f("yes"),negativeText:f("no"),onPositiveClick:async()=>{(await re({method:"delete",url:`/pages/${$.slug}`})).success?(ee("delete",Y.value),X.success(f("success"))):X.error(f("anErrorOccurred"))}})},m=i(!1),g=i([]),F=i(!1),p=()=>{g.value=[],D.value.forEach($=>{$.id&&g.value.push($.id)}),F.value=!0},I=$=>{$.id&&(g.value.includes($.id)?g.value=g.value.filter(y=>y!==$.id):g.value.push($.id))},Q=$=>Le({get:()=>$.id?g.value.includes($.id):!1,set:y=>{$.id&&(y?g.value=g.value.filter(w=>w!==$.id):g.value.includes($.id)||g.value.push($.id))}}),r=$=>{$.id&&(g.value=[],D.value.forEach(y=>{y.id&&y.id!==$.id&&g.value.push(y.id)}),u())},u=async()=>{m.value=!0,d.start();const $=await re({url:`/pages/${Z.slug}`,method:"put",data:{sectionsIds:g.value}});$.success&&$.result?(X.success(f("success")),z()):X.error(f("anErrorOccurred")),d.finish(),m.value=!1},V=async($,y)=>{var de;m.value=!0,d.start();const w=await re({url:`/sections/${$.slug}/data-source-page`,method:"put",data:{pageId:(de=Y.value)==null?void 0:de.id,sourcePageId:y}});w.success&&w.result?(X.success(f("success")),z(!1)):X.error(f("anErrorOccurred")),d.finish(),m.value=!1},x=async($,y)=>{P.value?V($,y):c.warning({title:f("confirm"),content:f("confirmUpdateDataSourcePage"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:()=>V($,y)})};return($,y)=>{const w=be,de=fe,oe=Me,H=Ut,k=rt,ae=$t,ve=sn,W=Gt,xe=Lt,ye=at,ce=Tt,qe=nl,De=sl,Ce=Il("Draggable"),J=Ct,S=Dt,Ie=Vt,N=ut;return n(),U(ge,null,[t(ae,{to:"#alt-action"},{default:l(()=>[t(k,{align:"center"},{default:l(()=>[t(oe,{type:"error",disabled:e(G),onClick:y[0]||(y[0]=se=>e(Y)?ne(e(Y)):null)},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("delete")),1)]),_:1},8,["disabled"]),t(oe,{type:"info",disabled:e(G),onClick:y[1]||(y[1]=se=>e(Y)?$.openFormModal(e(Y)):null)},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("editPage")),1)]),_:1},8,["disabled"]),t(H,{vertical:"",class:He(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(oe,{type:"primary",loading:e(G),disabled:e(P),onClick:y[2]||(y[2]=se=>R())},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(S,{appear:"",name:"slide-fade"},{default:l(()=>[e(O)?(n(),U("section",hs,[(n(),U(ge,null,Re(6,se=>t(ve,{key:se,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),U("section",ks,[e(Y)&&Array.isArray(e(Y).sections)&&e(Y).sections.length?(n(),U("section",ws,[t(Ce,{list:e(D)},{default:l(()=>[(n(!0),U(ge,null,Re(e(D),(se,$e)=>(n(),C(ye,{key:se.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(De,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:pe})=>[t(de,null,{default:l(()=>[pe?(n(),C(w,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(w,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>y[8]||(y[8]=[_("span",null,null,-1)])),default:l(()=>[t(qe,{name:"1"},{header:l(()=>[_("div",xs,[t(de,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(w,{icon:"fa-solid:grip-lines"})]),_:1}),t(W,{checked:e(v)[se.slug],"onUpdate:checked":pe=>e(v)[se.slug]=pe,size:"small",class:"mr-4",onClick:y[3]||(y[3]=it(()=>{},["stop"]))},{default:l(()=>[T(s(e(f)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(xe,{size:"small",type:"info"},{default:l(()=>[T(s($e+1),1)]),_:2},1024),t(H,{vertical:"",class:He(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",Cs,s(e(K)(se.title)),1)])]),default:l(()=>[(n(!0),U(ge,null,Re(e(le)(se.dataStructure),(pe,Ee)=>(n(),U(ge,{key:Ee},[String(Ee)==="index"?(n(),C(ye,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),C(gl,{key:`${e(b)}-${Ee}-form-1`,modelValue:e(q)[se.slug][Ee],"onUpdate:modelValue":Ve=>e(q)[se.slug][Ee]=Ve,items:pe,onUpdate:(Ve,Ne)=>{ie.value=Ne}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),C(ye,{key:1,title:e(K)(pe.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(oe,{quaternary:"",size:"small",onClick:()=>e(q)[se.slug][Ee].push({})},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),U(ge,null,Re(e(q)[se.slug][Ee],(Ve,Ne)=>(n(),C(ye,{key:Ne,title:String(Ne+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(oe,{type:"error",size:"small",onClick:()=>e(q)[se.slug][Ee].splice(Ne,1)},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),C(gl,{key:`${e(b)}-${Ee}-${Ne}-form-2`,modelValue:e(q)[se.slug][Ee][Ne],"onUpdate:modelValue":Pe=>e(q)[se.slug][Ee][Ne]=Pe,items:pe.items,onUpdate:(Pe,et)=>{j.value=et}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(k,null,{default:l(()=>[t(oe,{size:"small",type:"error",secondary:e(E),onClick:pe=>r(se)},{default:l(()=>[t(de,{size:"21"},{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1}),T(" "+s(e(f)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(H,{vertical:"",class:He(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(k,{align:"center"},{default:l(()=>[_("span",null,s(e(f)("dataSourcePage")),1),t(ce,{value:se.dataSourcePageId,options:se.pages||[],placeholder:e(f)("select"),"render-label":h,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":pe=>x(se,pe)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(ye,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:y[4]||(y[4]=se=>p())},{default:l(()=>[_("div",Is,[t(de,{size:"20"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),T(" "+s(e(f)("addSection")),1)])]),_:1})])):(n(),U("section",$s,[t(ye,{size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(L)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(J,{description:e(f)("noSectionOnThisPage")},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[_("div",Vs,[t(oe,{size:"small",onClick:y[5]||(y[5]=se=>p())},{icon:l(()=>[t(de,null,{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(Y)?(n(),U("div",Ts,[T(s(e(f)("dataRetrievalSlug"))+": ",1),_("b",null,s(e(Y).slug),1)])):he("",!0)]))]),_:1}),t(N,{show:e(F),"onUpdate:show":y[6]||(y[6]=se=>ze(F)?F.value=se:null),loading:e(m),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(f)("addSections"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:u,onNegativeClick:y[7]||(y[7]=se=>F.value=!1)},{default:l(()=>[_("section",zs,[t(Ie,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(B),se=>(n(),C(ye,{key:se.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:$e=>I(se)},{default:l(()=>[_("div",Us,[_("span",Ms,s(e(K)(se.title)),1),t(W,{checked:Q(se).value,"onUpdate:checked":$e=>Q(se).value=$e,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),As={class:"flex items-center justify-between"},Es={class:"flex flex-col"},Ds={class:"text-sm font-bold"},Ls=Ye({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(me){const{t:a}=We(),{request:c}=Qe(),{pickByTheme:f,tr:Z,displayFormErrors:ee}=Xe(),b=bt(me,"show"),{menuItemGroups:q}=Ke(Je()),{loadMenuItemGroups:A}=Je(),{isLightTheme:ie}=Ke(ht()),j=i(!1),Y=async()=>{j.value=!0,await A(),j.value=!1};Y();const D=pt(),M=st(),v=ot(),te=i(!1),O=i(!1),G=i(null),X=i(null),d=i({name:"",description:""}),re={name:[{required:!0,message:a("fillRequired")}]},K=B=>{G.value=we.cloneDeep(B),d.value=we.cloneDeep(B||{name:"",description:""}),O.value=!0},L=async()=>{var B;return(B=X.value)==null||B.validate(async E=>{var z,h,P,R,ne,m;if(!E){v.start(),te.value=!0;const g={name:d.value.name,description:d.value.description},F=await c({method:G.value?"put":"post",url:G.value?`/menu-item-groups/${G.value.id}`:"/menu-item-groups",data:g});if(F.failure&&F.error)switch((P=(h=(z=F.error)==null?void 0:z.response)==null?void 0:h.data)==null?void 0:P.errorCode){case tt.FORM_INVALID_DATA:ee((m=(ne=(R=F.error)==null?void 0:R.response)==null?void 0:ne.data)==null?void 0:m.data);break;default:M.error(a("anErrorOccurred"))}else M.success(a("success")),Y(),O.value=!1;te.value=!1,v.finish()}}),!1},le=async B=>{D.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-item-groups/${B.id}`})).success?(M.success(a("success")),Y()):M.error(a("anErrorOccurred"))}})};return(B,E)=>{const z=be,h=Me,P=rt,R=Cl,ne=fe,m=at,g=Vt,F=Ct,p=Yt,I=ut,Q=kt,r=vt,u=_t;return n(),U(ge,null,[t(I,{show:b.value,"onUpdate:show":E[2]||(E[2]=V=>b.value=V),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(P,{align:"center"},{default:l(()=>[t(h,{size:"small",type:"primary",disabled:e(j),onClick:E[0]||(E[0]=V=>K(null))},{default:l(()=>[t(z,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+s(e(a)("add")),1)]),_:1},8,["disabled"]),t(h,{size:"small",type:"error",disabled:e(j),onClick:E[1]||(E[1]=V=>b.value=!1)},{default:l(()=>[t(z,{icon:"carbon:close",class:"mr-1"}),T(" "+s(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(p,{show:e(j)},{default:l(()=>[e(q).length?(n(),C(g,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(q),V=>(n(),C(m,{key:V.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",As,[_("div",Es,[_("span",Ds,s(e(Z)(V.name)),1),t(R,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[T(s(e(Z)(V.description)),1)]),_:2},1024)]),t(P,null,{default:l(()=>[t(h,{size:"small",type:"warning",secondary:e(ie),onClick:x=>K(V)},{default:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"error",secondary:e(ie),onClick:x=>le(V)},{default:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(m,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(F,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ne,null,{default:l(()=>[t(z,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(I,{show:e(O),"onUpdate:show":E[5]||(E[5]=V=>ze(O)?O.value=V:null),loading:e(te),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:E[6]||(E[6]=V=>O.value=!1)},{default:l(()=>[t(u,{ref_key:"formRef",ref:X,model:e(d),rules:re,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(r,{"show-label":!1,path:"name"},{default:l(()=>[t(Q,{modelValue:e(d).name,"onUpdate:modelValue":E[3]||(E[3]=V=>e(d).name=V),placeholder:e(a)("name"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(r,{"show-label":!1,path:"description"},{default:l(()=>[t(Q,{modelValue:e(d).description,"onUpdate:modelValue":E[4]||(E[4]=V=>e(d).description=V),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ps=Ye({__name:"ContentFormItems",props:{"content-type":{default:nt.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Ht(["update"],["update:content-type","update:content-id"]),setup(me,{emit:a}){const{t:c}=We(),{tr:f,mergeArrays:Z}=Xe(),{request:ee}=Qe(),{contentTypes:b,extractItemTitle:q}=cl(),{loadContentModels:A}=Je(),{contentModels:ie}=Ke(Je()),j=a;A();const Y=bt(me,"content-type"),D=bt(me,"content-id"),M=i(),v=i(!1),te=i([]),O=i([]),G=async(F,p)=>{if(!F.length){O.value=[];return}v.value=!0;const I=await ee({url:`/content-model-items/search/${F}/${p}`});I.success&&I.result&&(O.value=I.result.data),v.value=!1},X=Le(()=>Z(te.value,O.value,"id")),d=i(!1),re=i([]),K=i([]),L=async F=>{if(!F.length){K.value=[];return}d.value=!0;const p=await ee({url:`/news-articles/search/${F}`});p.success&&p.result&&(K.value=p.result.data),d.value=!1},le=Le(()=>Z(re.value,K.value,"id")),{categories:B}=Ke(Qt()),{loadCategories:E}=Qt(),{tags:z}=Ke(Qt()),{loadTags:h}=Qt();Sl(async()=>{var I;E(),h(),d.value=!0;const F=await ee({url:"/news-articles/list",method:"post",data:{ids:D.value?[D.value]:[]}});F.success&&F.result&&(re.value=Z(re.value,F.result.data,"id")),d.value=!1,v.value=!0;const p=await ee({url:"/content-model-items/list",method:"post",data:{ids:D.value?[D.value]:[]}});p.success&&p.result&&(te.value=Z(te.value,p.result.data,"id"),M.value=(I=te.value.find(Q=>Q.id===D.value))==null?void 0:I.contentModelId),v.value=!1});const P=F=>ue("span",{},{default:()=>`${f(F.name)}`}),R=F=>ue("span",{},{default:()=>`${f(F.title)}`}),ne=F=>ue("span",{},{default:()=>`${f(F.name)}`}),m=F=>ue("span",{},{default:()=>f(F.title)}),g=F=>Le(()=>ue("span",{},{default:()=>{var p;return q(F,(p=ie.value)==null?void 0:p.find(I=>I.id===F.contentModelId))}}));return(F,p)=>{const I=Tt,Q=Ft,r=wt;return n(),C(r,{"x-gap":"12",span:24},{default:l(()=>[t(Q,{span:8,label:e(c)("contentType"),path:"contentType"},{default:l(()=>[t(I,{value:Y.value,"onUpdate:value":[p[0]||(p[0]=u=>Y.value=u),p[1]||(p[1]=()=>D.value=void 0)],options:e(b)||[],placeholder:e(c)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Y.value===e(nt).CONTENT_MODEL?(n(),U(ge,{key:0},[t(Q,{span:8,label:e(c)("contentModel")},{default:l(()=>[t(I,{value:e(M),"onUpdate:value":p[2]||(p[2]=u=>ze(M)?M.value=u:null),options:e(ie),placeholder:e(c)("search"),"render-label":m,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Q,{span:8,label:e(c)("item"),path:"contentId"},{default:l(()=>[t(I,{value:D.value,"onUpdate:value":[p[3]||(p[3]=u=>D.value=u),p[5]||(p[5]=(u,V)=>j("update",u,V,Y.value))],options:e(X)||[],placeholder:e(c)("search"),"render-label":u=>g(u).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[4]||(p[4]=u=>G(u,e(M)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):he("",!0),Y.value===e(nt).NEWS_ARTICLE?(n(),C(Q,{key:1,span:16,label:e(c)("newsArticle"),path:"contentId"},{default:l(()=>[t(I,{value:D.value,"onUpdate:value":[p[6]||(p[6]=u=>D.value=u),p[7]||(p[7]=(u,V)=>j("update",u,V,Y.value))],options:e(le)||[],placeholder:e(c)("search"),"render-label":R,loading:e(d),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:L},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):he("",!0),Y.value===e(nt).NEWS_CATEGORY?(n(),C(Q,{key:2,span:16,label:e(c)("newsCategory"),path:"contentId"},{default:l(()=>[t(I,{value:D.value,"onUpdate:value":[p[8]||(p[8]=u=>D.value=u),p[9]||(p[9]=(u,V)=>j("update",u,V,Y.value))],options:e(B)||[],placeholder:e(c)("select"),"render-label":P,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):he("",!0),Y.value===e(nt).NEWS_TAG?(n(),C(Q,{key:3,span:16,label:e(c)("newsTag"),path:"contentId"},{default:l(()=>[t(I,{value:D.value,"onUpdate:value":[p[10]||(p[10]=u=>D.value=u),p[11]||(p[11]=(u,V)=>j("update",u,V,Y.value))],options:e(z)||[],placeholder:e(c)("select"),"render-label":ne,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):he("",!0)]),_:1})}}}),Ns={class:"flex items-center"},Os={class:"flex flex-col"},Rs={class:"text-sm font-bold"},qs={key:0,class:"text-sm"},Fs={class:"text-xs font-normal"},js={class:"text-xs my-1"},Bs={class:"flex items-center"},Ks={class:"flex flex-col"},Ys={class:"text-sm font-bold"},Gs={class:"text-xs font-normal"},Hs={key:0,class:"mt-4"},Ws={class:"my-8"},Js={class:"flex items-center justify-between"},Xs={class:"flex flex-col"},Zs={class:"text-sm font-bold"},Qs={class:"text-xs font-normal"},eo={class:"flex items-center"},to={key:0},lo={key:1},ao={key:2},no=Ye({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(me){const{t:a}=We(),{request:c}=Qe(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee,pickByTheme:b}=Xe(),{isLightTheme:q}=Ke(ht()),{pages:A,menuItemGroups:ie,contentModels:j}=Ke(Je()),{loadPages:Y,loadMenuItemGroups:D}=Je(),M=ot(),v=st(),te=pt(),O=bt(me,"modelValue"),G=i([]),X=i([]),d=i(!1),re=i(""),K=i(),L=Le(()=>{if(!re.value)return G.value;const H=G.value.filter(k=>{var ae;return k.title.toLowerCase().includes(re.value.toLowerCase())||((ae=k.description)==null?void 0:ae.toLowerCase().includes(re.value.toLowerCase()))||k.children.some(ve=>{var W;return ve.title.toLowerCase().includes(re.value.toLowerCase())||((W=ve.description)==null?void 0:W.toLowerCase().includes(re.value.toLowerCase()))})});return K.value&&K.value.focus(),H}),le=async(H=!1)=>{M.start(),d.value=!0;const k=await c({url:"/menu/items"});if(k.success&&k.result){G.value=k.result.data.filter(ae=>{var ve;return!ae.parentId&&ae.menuId===((ve=O.value)==null?void 0:ve.id)});for(let ae=0;ae<G.value.length;ae++)G.value[ae].children=k.result.data.filter(ve=>{var W;return ve.parentId===G.value[ae].id&&ve.menuId===((W=O.value)==null?void 0:W.id)});X.value=k.result.data.filter(ae=>{var ve;return ae.menuId!==((ve=O.value)==null?void 0:ve.id)})}H&&(Y(),await D()),d.value=!1,M.finish()};le(!0);const B=i(12),E=i(1),z=H=>{B.value=H},h={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:dt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:nt.CONTENT_MODEL,contentId:void 0},P=i(null),R=i(!1),ne=i(!1),m=i(!1),g=i(null),F=i(null),p=i(h),I=Le(()=>{const H={title:[{required:!0,message:a("fillRequired")}]};return p.value.targetType===dt.PAGE_LINK?(H.pageId=[{required:!0,message:a("fillRequired")}],H.path=[{required:!0,message:a("fillRequired")}]):p.value.targetType===dt.EXTERNAL_LINK?H.url=[{required:!0,message:a("fillRequired")}]:p.value.targetType===dt.CONTENT_LINK&&(H.contentId=[{required:!0,message:a("fillRequired")}],H.contentType=[{required:!0,message:a("fillRequired")}]),H}),Q=(H,k=null)=>{g.value=we.cloneDeep(H),P.value=k,H?(p.value=we.cloneDeep(H),ne.value=!0):(p.value=we.cloneDeep(h),X.value.length>0?m.value=!0:ne.value=!0)},r=async H=>{te.warning({title:a("confirm"),content:H.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu/items/${H.id}`})).success?(v.success(a("success")),le()):v.error(a("anErrorOccurred"))}})},u=async H=>{var ae,ve,W,xe,ye,ce,qe;M.start(),R.value=!0;const k=await c({method:"post",url:"/menu/items",data:{title:H.title,path:H.path,url:H.url,description:H.description,isActive:!0,isVisible:!0,color:H.color,icon:H.icon,position:H.position,targetType:H.targetType,parentId:P.value,menuId:(ae=O.value)==null?void 0:ae.id,sectionId:H.sectionId,menuItemGroupId:H.menuItemGroupId,pageId:H.pageId}});if(k.failure&&k.error)switch((xe=(W=(ve=k.error)==null?void 0:ve.response)==null?void 0:W.data)==null?void 0:xe.errorCode){case tt.FORM_INVALID_DATA:ee((qe=(ce=(ye=k.error)==null?void 0:ye.response)==null?void 0:ce.data)==null?void 0:qe.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),le();R.value=!1,M.finish(),m.value=!1},V=async()=>{var H;return(H=F.value)==null||H.validate(async k=>{var ae,ve,W,xe,ye,ce,qe;if(!k){const De={title:p.value.title,path:p.value.path,url:p.value.url,description:p.value.description,isActive:p.value.isActive,isVisible:p.value.isVisible,color:p.value.color,icon:p.value.icon,position:p.value.position,targetType:p.value.targetType,parentId:P.value,menuId:(ae=O.value)==null?void 0:ae.id,sectionId:p.value.sectionId,menuItemGroupId:p.value.menuItemGroupId,pageId:p.value.pageId,contentId:p.value.contentId,contentType:p.value.contentType};if(g.value)if(g.value.title!==p.value.title&&G.value.findIndex(Ce=>Ce.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{M.start(),R.value=!0;const Ce=await c({method:"put",url:`/menu/items/${g.value.id}`,data:De});Ce.success&&Ce.result.data&&(v.success(a("success")),le()),R.value=!1,M.finish(),ne.value=!1}else if(G.value.findIndex(Ce=>Ce.title==p.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{M.start(),R.value=!0;const Ce=await c({method:"post",url:"/menu/items",data:De});if(Ce.failure&&Ce.error)switch((xe=(W=(ve=Ce.error)==null?void 0:ve.response)==null?void 0:W.data)==null?void 0:xe.errorCode){case tt.FORM_INVALID_DATA:ee((qe=(ce=(ye=Ce.error)==null?void 0:ye.response)==null?void 0:ce.data)==null?void 0:qe.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),le();R.value=!1,M.finish(),ne.value=!1}}}),!1},x=async(H,k)=>{(await c({method:"put",url:"/menu/items/position",data:{items:k}})).success&&le()},$=H=>ue("span",{},{default:()=>Z(H.title)}),y=H=>ue("span",{},{default:()=>Z(H.name)}),w=H=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(H),de=H=>{if(H.targetType==dt.EXTERNAL_LINK)return H.url;if(H.targetType==dt.PAGE_LINK)return H.path;if(H.targetType==dt.CONTENT_LINK)switch(H.contentType){case nt.CONTENT_MODEL:return a("contentModel");case nt.NEWS_CATEGORY:return a("newsCategory");case nt.NEWS_ARTICLE:return a("newsArticle");case nt.NEWS_TAG:return a("newsTag")}return""},oe=async(H,k,ae)=>{var ve;if(!Z(p.value.title))switch(ae){case nt.CONTENT_MODEL:p.value.title=f(k,(ve=j.value)==null?void 0:ve.find(W=>W.id===k.contentModelId));break;case nt.NEWS_ARTICLE:p.value.title=k.title;break;case nt.NEWS_CATEGORY:case nt.NEWS_TAG:p.value.title=k.name;break}};return(H,k)=>{const ae=be,ve=rt,W=$t,xe=Da,ye=Lt,ce=Ut,qe=at,De=Il("Draggable"),Ce=nl,J=sl,S=ol,Ie=Ct,N=Dt,se=Vt,$e=ut,pe=kt,Ee=vt,Ve=Ul,Ne=Ft,Pe=hl,et=kl,ft=wt,Oe=Ha,Ge=Tt,je=_t;return n(),U(ge,null,[t(W,{to:"#alt-action"},{default:l(()=>[t(ve,{align:"center"},{default:l(()=>[e(L).length?(n(),C(e(Me),{key:0,type:"primary",onClick:k[0]||(k[0]=ke=>Q(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(ae,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addMenuItem")),1)]),_:1})):he("",!0)]),_:1})]),_:1}),t(xe,{class:"mt-2 mb-5",onBack:k[2]||(k[2]=ke=>O.value=null)},{title:l(()=>{var ke;return[T(s(e(Z)((ke=O.value)==null?void 0:ke.title)),1)]}),back:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Ze),{ref_key:"searchInputRef",ref:K,value:e(re),"onUpdate:value":k[1]||(k[1]=ke=>ze(re)?re.value=ke:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(N,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(L)&&e(L).length?(n(),U(ge,{key:0},[t(De,{list:e(G),onChange:k[3]||(k[3]=ke=>x(ke,e(G)))},{default:l(()=>[(n(!0),U(ge,null,Re(e(L).slice((e(E)-1)*e(B),e(E)*e(B)),ke=>(n(),C(qe,{key:ke.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(J,{"default-expanded-names":ke.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Be})=>[t(ve,{align:"center"},{default:l(()=>[t(ye,{size:"small",bordered:!1,type:ke.isActive?"success":"error"},{default:l(()=>[T(s(ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(ye,{size:"small",bordered:!1,type:ke.isVisible?"info":"warning"},{default:l(()=>[T(s(ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(ce,{vertical:"",class:He(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Me),{size:"small",type:"primary",secondary:e(q),onClick:it(zt=>Q(ke),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Me),{size:"small",type:"error",secondary:e(q),onClick:it(zt=>r(ke),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Me),{size:"small",type:"info",secondary:e(q),onClick:it(zt=>Q(null,ke.id),["stop"])},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:category"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("subMenuItem"))+" ",1),t(ye,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[T(s(ke.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),k[27]||(k[27]=_("div",{class:"w-6"},null,-1)),t(e(fe),null,{default:l(()=>[Be?(n(),C(ae,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>k[28]||(k[28]=[_("span",null,null,-1)])),default:l(()=>[t(Ce,{name:"1"},{header:l(()=>{var Be;return[_("div",Ns,[t(e(fe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(ae,{icon:"fa-solid:grip-lines"})]),_:1}),t(ce,{vertical:"",class:He(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Os,[_("div",null,[_("span",Rs,s(e(Z)(ke.title)),1),ke.group?(n(),U("span",qs," Â ("+s(e(Z)((Be=ke.group)==null?void 0:Be.name))+") ",1)):he("",!0)]),_("small",Fs,s(de(ke)),1)])])]}),default:l(()=>[ke.description?(n(),U(ge,{key:0},[t(ce,{class:He([e(b)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),_("div",js,s(e(Z)(ke.description)),1)],64)):he("",!0),ke.children.length?(n(),U(ge,{key:1},[t(ce,{class:He([e(b)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(De,{list:ke.children,onChange:Be=>x(Be,ke.children)},{default:l(()=>[(n(!0),U(ge,null,Re(ke.children,Be=>(n(),C(qe,{key:Be.id,size:"small",class:"mb-1"},{header:l(()=>[_("div",Bs,[t(e(fe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(ae,{icon:"fa-solid:grip-lines"})]),_:1}),t(ce,{vertical:"",class:He(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Ks,[_("span",Ys,s(e(Z)(Be.title)),1),_("small",Gs,s(de(Be)),1)])])]),"header-extra":l(()=>[t(ve,{align:"center"},{default:l(()=>[t(ye,{size:"small",bordered:!1,type:Be.isActive?"success":"error"},{default:l(()=>[T(s(Be.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(ye,{size:"small",bordered:!1,type:Be.isVisible?"info":"warning"},{default:l(()=>[T(s(Be.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(ce,{vertical:"",class:He(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Me),{size:"small",type:"primary",secondary:e(q),onClick:it(zt=>Q(Be,ke.id),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Me),{size:"small",type:"error",secondary:e(q),onClick:it(zt=>r(Be),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):he("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(S,{page:e(E),"onUpdate:page":k[4]||(k[4]=ke=>ze(E)?E.value=ke:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(B),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(G).length/e(B)),"onUpdate:pageSize":z},{prefix:l(()=>[T(s(`${e(G).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(qe,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(b)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ie,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[e(re)?(n(),C(ae,{key:0,icon:"carbon:search"})):(n(),C(ae,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(re)?he("",!0):(n(),U("div",Hs,[t(e(Me),{size:"small",onClick:k[5]||(k[5]=ke=>Q(null))},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t($e,{show:e(m),"onUpdate:show":k[6]||(k[6]=ke=>ze(m)?m.value=ke:null),loading:e(R),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(P)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:k[7]||(k[7]=()=>{m.value=!1,ne.value=!0}),onNegativeClick:k[8]||(k[8]=ke=>m.value=!1)},{default:l(()=>[_("section",Ws,[t(se,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(X),ke=>(n(),C(qe,{key:ke.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Js,[_("div",Xs,[_("span",Zs,s(e(Z)(ke.title)),1),_("small",Qs,s(de(ke)),1)]),t(e(Me),{size:"small",type:"primary",secondary:e(q),onClick:Be=>u(ke)},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t($e,{show:e(ne),"onUpdate:show":k[25]||(k[25]=ke=>ze(ne)?ne.value=ke:null),loading:e(R),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(g)?e(P)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(P)?e(X).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(X).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:V,onNegativeClick:k[26]||(k[26]=ke=>ne.value=!1)},{default:l(()=>[t(je,{ref_key:"formRef",ref:F,class:"mt-5",model:e(p),rules:e(I),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"show-label":!1,path:"title"},{default:l(()=>[t(pe,{modelValue:e(p).title,"onUpdate:modelValue":k[9]||(k[9]=ke=>e(p).title=ke),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ee,{"show-label":!1,path:"description"},{default:l(()=>[t(pe,{modelValue:e(p).description,"onUpdate:modelValue":k[10]||(k[10]=ke=>e(p).description=ke),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(ft,{"x-gap":"12",span:24},{default:l(()=>[t(Ne,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(Ve,{value:e(p).position,"onUpdate:value":k[11]||(k[11]=ke=>e(p).position=ke),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ne,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(et,{value:e(p).isActive,"onUpdate:value":k[12]||(k[12]=ke=>e(p).isActive=ke),name:"isActive",class:"w-full"},{default:l(()=>[t(Pe,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(Pe,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Ne,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(et,{value:e(p).isVisible,"onUpdate:value":k[13]||(k[13]=ke=>e(p).isVisible=ke),name:"isVisible",class:"w-full"},{default:l(()=>[t(Pe,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Pe,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(ce,{class:"!my-2"}),t(ft,{"x-gap":"12",span:24},{default:l(()=>[t(Ne,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Oe,{modelValue:e(p).icon,"onUpdate:modelValue":k[14]||(k[14]=ke=>e(p).icon=ke),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Ne,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[_("div",eo,[e(p).color?(n(),U(ge,{key:0},[t(e(Me),{text:"",type:"error",style:{"font-size":"21px"},onClick:k[15]||(k[15]=ke=>e(p).color="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(ae,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ce,{vertical:""})],64)):he("",!0),t(e(tl),{value:e(p).color,"onUpdate:value":k[16]||(k[16]=ke=>e(p).color=ke),class:"cursor-pointer",theme:e(q)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Ne,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Ge,{value:e(p).menuItemGroupId,"onUpdate:value":k[17]||(k[17]=ke=>e(p).menuItemGroupId=ke),options:e(ie),placeholder:e(a)("group"),"render-label":y,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ne,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(et,{value:e(p).targetType,"onUpdate:value":k[18]||(k[18]=ke=>e(p).targetType=ke),class:"w-full",size:"small"},{default:l(()=>[t(Pe,{value:e(dt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[T(s(e(a)("pageLink")),1)]),_:1},8,["value"]),t(Pe,{value:e(dt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[T(s(e(a)("contentLink")),1)]),_:1},8,["value"]),t(Pe,{value:e(dt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[T(s(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(N,{appear:"",name:"slide-fade"},{default:l(()=>[e(p).targetType===e(dt).PAGE_LINK?(n(),U("section",to,[t(ft,{"x-gap":"12",span:24},{default:l(()=>[t(Ne,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Ge,{value:e(p).pageId,"onUpdate:value":k[19]||(k[19]=ke=>e(p).pageId=ke),options:e(A)||[],placeholder:e(a)("selectPage"),"render-label":$,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ne,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var ke;return[t(Ge,{value:e(p).sectionId,"onUpdate:value":k[20]||(k[20]=Be=>e(p).sectionId=Be),options:((ke=(e(A)||[]).find(Be=>Be.id===e(p).pageId))==null?void 0:ke.sections)||[],placeholder:e(a)("selectSection"),"render-label":$,disabled:!e(p).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Ee,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Ze),{value:e(p).path,"onUpdate:value":k[21]||(k[21]=ke=>e(p).path=ke),placeholder:e(a)("path"),"allow-input":w,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(p).targetType===e(dt).CONTENT_LINK?(n(),U("section",lo,[t(Ps,{"content-type":e(p).contentType,"onUpdate:contentType":k[22]||(k[22]=ke=>e(p).contentType=ke),"content-id":e(p).contentId,"onUpdate:contentId":k[23]||(k[23]=ke=>e(p).contentId=ke),onUpdate:oe},null,8,["content-type","content-id"])])):e(p).targetType===e(dt).EXTERNAL_LINK?(n(),U("section",ao,[t(Ee,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Ze),{value:e(p).url,"onUpdate:value":k[24]||(k[24]=ke=>e(p).url=ke),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):he("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),so={class:"flex items-center justify-between"},oo={class:"flex flex-col"},io={class:"text-sm font-bold"},ro=Ye({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(me){const{t:a}=We(),{request:c}=Qe(),{pickByTheme:f,tr:Z,displayFormErrors:ee,formatKey:b}=Xe(),q=bt(me,"show"),{menuLocations:A}=Ke(Je()),{loadMenuLocations:ie}=Je(),{isLightTheme:j}=Ke(ht()),Y=i(!1),D=async()=>{Y.value=!0,await ie(),Y.value=!1};D();const M=pt(),v=st(),te=ot(),O=i(!1),G=i(!1),X=i(null),d=i(null),re=i({name:"",description:""}),K={name:[{required:!0,message:a("fillRequired")}]},L=E=>{X.value=we.cloneDeep(E),re.value=we.cloneDeep(E||{name:"",description:""}),G.value=!0},le=async()=>{var E;return(E=d.value)==null||E.validate(async z=>{var h,P,R,ne,m,g;if(!z){te.start(),O.value=!0;const F={name:re.value.name,description:re.value.description},p=await c({method:X.value?"put":"post",url:X.value?`/menu-locations/${X.value.id}`:"/menu-locations",data:F});if(p.failure&&p.error)switch((R=(P=(h=p.error)==null?void 0:h.response)==null?void 0:P.data)==null?void 0:R.errorCode){case tt.FORM_INVALID_DATA:ee((g=(m=(ne=p.error)==null?void 0:ne.response)==null?void 0:m.data)==null?void 0:g.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),D(),G.value=!1;O.value=!1,te.finish()}}),!1},B=async E=>{M.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menu-locations/${E.id}`})).success?(v.success(a("success")),D()):v.error(a("anErrorOccurred"))}})};return(E,z)=>{const h=be,P=fe,R=Me,ne=rt,m=Cl,g=at,F=Vt,p=Ct,I=Yt,Q=ut,r=Ze,u=vt,V=kt,x=_t;return n(),U(ge,null,[t(Q,{show:q.value,"onUpdate:show":z[2]||(z[2]=$=>q.value=$),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ne,{align:"center"},{default:l(()=>[t(R,{size:"small",type:"primary",disabled:e(Y),onClick:z[0]||(z[0]=$=>L(null))},{default:l(()=>[t(P,{class:"mr-1"},{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1}),T(" "+s(e(a)("add")),1)]),_:1},8,["disabled"]),t(R,{size:"small",type:"error",disabled:e(Y),onClick:z[1]||(z[1]=$=>q.value=!1)},{default:l(()=>[t(P,{class:"mr-1"},{default:l(()=>[t(h,{icon:"carbon:close"})]),_:1}),T(" "+s(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(I,{show:e(Y)},{default:l(()=>[e(A).length?(n(),C(F,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(A),$=>(n(),C(g,{key:$.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",so,[_("div",oo,[_("span",io,s($.name),1),t(m,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[T(s(e(Z)($.description)),1)]),_:2},1024)]),t(ne,null,{default:l(()=>[t(R,{size:"small",type:"warning",secondary:e(j),onClick:y=>L($)},{default:l(()=>[t(P,null,{default:l(()=>[t(h,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(R,{size:"small",type:"error",secondary:e(j),onClick:y=>B($)},{default:l(()=>[t(P,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(g,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(p,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(P,null,{default:l(()=>[t(h,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Q,{show:e(G),"onUpdate:show":z[5]||(z[5]=$=>ze(G)?G.value=$:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(X)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:le,onNegativeClick:z[6]||(z[6]=$=>G.value=!1)},{default:l(()=>[t(x,{ref_key:"formRef",ref:d,model:e(re),rules:K,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("key"),path:"name"},{default:l(()=>[t(r,{value:e(re).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":z[3]||(z[3]=$=>e(re).name=e(b)($))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(u,{"show-label":!1,path:"description"},{default:l(()=>[t(V,{modelValue:e(re).description,"onUpdate:modelValue":z[4]||(z[4]=$=>e(re).description=$),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),uo={key:2},co={class:"flex items-center"},po={class:"flex flex-col"},fo={key:0,class:"text-xs font-normal"},mo={class:"mt-4"},vo=Ye({__name:"index",setup(me){const{t:a}=We(),{request:c}=Qe(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:b,formatKey:q}=Xe(),{isLightTheme:A}=Ke(ht()),{menuLocations:ie}=Ke(Je()),{loadMenuLocations:j}=Je(),Y=ot(),D=st(),M=pt(),v=i(!1),te=i(!1),O=i([]),G=async(F=!1)=>{Y.start(),v.value=!0;const p=await c({url:"/menus"});p.success&&p.result&&(O.value=p.result.data),F&&await j(),v.value=!1,Y.finish()};G(!0);const X=i(12),d=i(1),re=F=>{X.value=F},K={name:"",title:"",description:"",menuLocationId:void 0},L=i(!1),le=i(!1),B=i(!1),E=i(null),z=i(K),h={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},P=i(null),R=F=>{P.value=we.cloneDeep(F),z.value=we.cloneDeep(F||K),L.value=!0},ne=async()=>{var F;return(F=E.value)==null||F.validate(async p=>{var I,Q,r,u,V,x;if(!p){Y.start(),te.value=!0;const $={name:z.value.name,title:z.value.title,description:z.value.description,menuLocationId:z.value.menuLocationId},y=await c({method:P.value?"put":"post",url:P.value?`/menus/${P.value.id}`:"/menus",data:$});if(y.failure&&y.error)switch((r=(Q=(I=y.error)==null?void 0:I.response)==null?void 0:Q.data)==null?void 0:r.errorCode){case tt.FORM_INVALID_DATA:ee((x=(V=(u=y.error)==null?void 0:u.response)==null?void 0:V.data)==null?void 0:x.data);break;default:D.error(a("anErrorOccurred"))}else D.success(a("success")),G(),L.value=!1;te.value=!1,Y.finish()}}),!1},m=async F=>{M.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/menus/${F.id}`})).success?(D.success(a("success")),G()):D.error(a("anErrorOccurred"))}})},g=al("menus-management",()=>({itemsMenu:i(null)}))();return xt(()=>z.value.title,F=>{P.value||z.value.name.length<=21&&(z.value.name=Ka(f(F),{trim:!0,lower:!0,strict:!0}))}),(F,p)=>{const I=be,Q=fe,r=Me,u=rt,V=$t,x=Ut,$=at,y=ol,w=Ct,de=Dt,oe=kt,H=vt,k=Ze,ae=Ft,ve=Tt,W=wt,xe=_t,ye=ut;return n(),U(ge,null,[e(g).itemsMenu?he("",!0):(n(),C(V,{key:0,to:"#alt-action"},{default:l(()=>[t(u,{align:"center"},{default:l(()=>[e(b)?(n(),C(r,{key:0,type:"success",onClick:p[0]||(p[0]=ce=>le.value=!0)},{icon:l(()=>[t(Q,{size:"18"},{default:l(()=>[t(I,{icon:"carbon:template"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("locations")),1)]),_:1})):he("",!0),t(r,{type:"warning",onClick:p[1]||(p[1]=ce=>B.value=!0)},{icon:l(()=>[t(Q,{size:"18"},{default:l(()=>[t(I,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("groups")),1)]),_:1}),e(O)&&e(O).length?(n(),C(r,{key:1,type:"primary",onClick:p[2]||(p[2]=ce=>R(null))},{icon:l(()=>[t(Q,{size:"18"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addMenu")),1)]),_:1})):he("",!0)]),_:1})]),_:1})),e(g).itemsMenu?(n(),C(no,{key:1,modelValue:e(g).itemsMenu,"onUpdate:modelValue":p[3]||(p[3]=ce=>e(g).itemsMenu=ce)},null,8,["modelValue"])):(n(),U("section",uo,[t(de,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(O)&&e(O).length?(n(),U(ge,{key:0},[(n(!0),U(ge,null,Re(e(O).slice((e(d)-1)*e(X),e(d)*e(X)),ce=>(n(),C($,{key:ce.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var qe;return[_("div",co,[t(u,null,{default:l(()=>[t(r,{size:"small",type:"primary",secondary:e(A),onClick:it(De=>R(ce),["stop"])},{default:l(()=>[t(Q,null,{default:l(()=>[t(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(r,{size:"small",type:"error",secondary:e(A),onClick:it(De=>m(ce),["stop"])},{default:l(()=>[t(Q,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(x,{vertical:"",class:He(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",po,[_("span",{class:He(`${ce.location?"text-sm":"text-base"} font-bold`)},s(e(f)(ce.title)),3),ce.location?(n(),U("small",fo,s((qe=ce.location)==null?void 0:qe.name),1)):he("",!0)])])]}),"header-extra":l(()=>[t(r,{size:"small",type:"primary",secondary:e(A),onClick:it(qe=>e(g).itemsMenu=ce,["stop"])},{icon:l(()=>[t(Q,null,{default:l(()=>[t(I,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(y,{page:e(d),"onUpdate:page":p[4]||(p[4]=ce=>ze(d)?d.value=ce:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(X),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(O).length/e(X)),"onUpdate:pageSize":re},{prefix:l(()=>[T(s(`${e(O).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C($,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(w,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(Q,null,{default:l(()=>[t(I,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",mo,[t(r,{size:"small",onClick:p[5]||(p[5]=ce=>R(null))},{icon:l(()=>[t(Q,null,{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(ye,{show:e(L),"onUpdate:show":p[10]||(p[10]=ce=>ze(L)?L.value=ce:null),loading:e(te),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(P)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ne,onNegativeClick:p[11]||(p[11]=ce=>L.value=!1)},{default:l(()=>[t(xe,{ref_key:"formRef",ref:E,model:e(z),rules:h,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(H,{"show-label":!1,path:"title"},{default:l(()=>[t(oe,{modelValue:e(z).title,"onUpdate:modelValue":p[6]||(p[6]=ce=>e(z).title=ce),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(H,{"show-label":!1,path:"description"},{default:l(()=>[t(oe,{modelValue:e(z).description,"onUpdate:modelValue":p[7]||(p[7]=ce=>e(z).description=ce),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(W,{"x-gap":"12",span:24},{default:l(()=>[t(ae,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(k,{value:e(z).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":p[8]||(p[8]=ce=>e(z).name=e(q)(ce))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(ae,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(ve,{value:e(z).menuLocationId,"onUpdate:value":p[9]||(p[9]=ce=>e(z).menuLocationId=ce),options:e(ie),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ro,{show:e(le),"onUpdate:show":p[12]||(p[12]=ce=>ze(le)?le.value=ce:null)},null,8,["show"]),t(Ls,{show:e(B),"onUpdate:show":p[13]||(p[13]=ce=>ze(B)?B.value=ce:null)},null,8,["show"])]))],64)}}}),_o="/creopse/assets/video-thumbnail-86f60cc7.svg";var Bt=(me=>(me.VERTICAL="vertical",me.HORIZONTAL="horizontal",me))(Bt||{}),It=(me=>(me.SELF_HOSTED="self-hosted",me.YOUTUBE="youtube",me))(It||{});const yo=()=>{const{t:me}=We(),a=[{label:me("horizontal"),value:Bt.HORIZONTAL,tagType:"info"},{label:me("vertical"),value:Bt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:Z=>{var ee;return((ee=a.find(b=>b.value===Z))==null?void 0:ee.tagType)||"default"},getVideoDisplayTypeLabel:Z=>{var ee;return(ee=a.find(b=>b.value===Z))==null?void 0:ee.label},videoDisplayTypes:a}},go=al("video-setting",{state:()=>({settings:[]}),getters:{getSetting:me=>a=>me.settings.find(c=>c.key===a),getSettingValue:me=>(a,c="string")=>{const f=me.settings.find(ee=>ee.key===a);let Z="";switch(c){case"number":Z=f&&parseInt(f.value)&&!isNaN(parseInt(f.value))?parseInt(f.value):0;break;case"boolean":Z=f&&!isNaN(parseInt(f.value))&&parseInt(f.value)>0;break;case"object":Z=f&&f.value?JSON.parse(f.value):{};break;case"array":Z=f&&f.value?JSON.parse(f.value):[];break;default:Z=f&&f.value?f.value:"";break}return Z}},actions:{async initDefaultSettings(){await this.loadSettings();const me={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Qe();await a({url:"/video-settings",method:"put",data:me}),await this.loadSettings()},async loadSettings(){const{request:me}=Qe(),a=await me({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),bo={key:1,class:"flex items-center gap-3"},ho={key:0,class:"w-full flex items-center justify-between mt-4"},ko={class:"flex items-center gap-3"},wo={key:1,class:"mt-4"},xo={key:0},Co={class:"flex items-center justify-center h-full"},Io={class:"text-center text-dimgray text-sm"},$o={key:1,class:"flex items-center justify-center"},Vo={class:"mt-5"},To={class:"w-full flex flex-gap-8 items-center justify-start"},zo=["src"],Uo={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Mo=["src"],So=Ye({__name:"index",setup(me){const{t:a,locale:c}=We(),{tr:f,fileUrl:Z,pickByTheme:ee,displayFormErrors:b,getVideoThumbnail:q}=Xe(),{videoDisplayTypes:A}=yo(),{request:ie}=Qe(),{isLightTheme:j}=Ke(ht()),Y=ot(),D=st(),M=pt(),v=gt("appConfig"),te=i(""),O=i(null),G=i(!1),X=i([]),d=al("videos-management-store",()=>({currentTab:i("all")}))(),re=()=>{h()},K=i(0),L=i(12),le=i(1),B=Le(()=>`/video-items?pageSize=${L.value}&query=${te.value}&source=${d.currentTab}`),E=Ce=>{h(`${B.value}&page=${Ce}`)},z=Ce=>{L.value=Ce,h()},h=async(Ce=null,J=!1)=>{var Ie,N,se,$e,pe;G.value=!0,Y.start();const S=await ie({url:Ce??B.value});S.success&&S.result&&(X.value=((Ie=S.result.data)==null?void 0:Ie.videoItems)||[],K.value=((se=(N=S.result.data)==null?void 0:N.meta)==null?void 0:se.total)||0,le.value=((pe=($e=S.result.data)==null?void 0:$e.meta)==null?void 0:pe.currentPage)||1),Y.finish(),G.value=!1};h(null,!0);const P=i(!1),R=i(!1),ne=i(null),m=i(null),g=i({title:"",description:"",visible:!0,source:It.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""}),F=Le(()=>({title:[{required:g.value.source==It.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),p=Ce=>{ne.value=we.cloneDeep(Ce),Ce?g.value=we.cloneDeep(Ce):g.value={title:"",description:"",visible:!0,source:It.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""},R.value=!0},I=async Ce=>{M.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await ie({method:"delete",url:`/video-items/force/${Ce.id}`})).success?(D.success(a("success")),h()):D.error(a("anErrorOccurred"))}})},Q=async()=>{var Ce;return(Ce=m.value)==null||Ce.validate(async J=>{var S,Ie,N,se,$e,pe;if(!J)if(ne.value){Y.start(),P.value=!0;const Ee={title:g.value.title,description:g.value.description,visible:g.value.visible,source:g.value.source,displayType:g.value.displayType,thumbnail:g.value.thumbnail,path:g.value.path},Ve=await ie({method:"put",url:`/video-items/${ne.value.id}`,data:Ee});Ve.success&&Ve.result.data&&(D.success(a("success")),h(`${B.value}&page=${le.value}`)),P.value=!1,Y.finish(),R.value=!1}else{Y.start(),P.value=!0;const Ee={title:g.value.title,description:g.value.description,visible:g.value.visible,source:g.value.source,displayType:g.value.displayType,thumbnail:g.value.thumbnail,path:g.value.path},Ve=await ie({method:"post",url:"/video-items",data:Ee});if(Ve.failure&&Ve.error)switch((N=(Ie=(S=Ve.error)==null?void 0:S.response)==null?void 0:Ie.data)==null?void 0:N.errorCode){case tt.FORM_INVALID_DATA:b((pe=($e=(se=Ve.error)==null?void 0:se.response)==null?void 0:$e.data)==null?void 0:pe.data);break;case tt.REQUEST_PARAMS_MISSING:D.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case tt.REQUEST_DATA_RETRIEVAL_FAILED:D.error(a("videoDataCantBeRetrieve"));break;case tt.REQUEST_DATA_ALREADY_EXISTS:D.error(a("videoAlreadyExists"));break;default:D.error(a("anErrorOccurred"))}else D.success(a("success")),h(`${B.value}&page=${le.value}`),R.value=!1;P.value=!1,Y.finish()}}),!1},r=i(!1),u=i(!1),V=i(""),x=i(""),$=i("classic"),y=i(!1),w=go(),de=i({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),oe=i(de.value),H=Le(()=>we.isEqual(de.value,oe.value)),k=async()=>{P.value=!0;const Ce=await ie({url:"/video-settings",method:"put",data:de.value});Ce.success&&Ce.result?D.success(a("success")):D.error(a("unableToUpdateSettings")),await ae()},ae=async()=>{var Ce;Y.start(),P.value=!0,await w.loadSettings(),(Ce=w.settings)==null||Ce.forEach(J=>{de.value[J.key]!=null&&(de.value[J.key]=J.value)}),oe.value=we.cloneDeep(de.value),P.value=!1,Y.finish()};ae();const ve=async()=>{Y.start(),P.value=!0,(await ie({url:"/video-items/youtube/channel-videos",method:"put"})).success?(D.success(a("success")),await ae()):D.error(a("unableToUpdateChannelVideos")),P.value=!1,Y.finish()},W=i(!1),xe=i(ct()),ye=i({}),ce=Le(()=>{let Ce=0;for(const J in ye.value)ye.value[J]&&Ce++;return Ce});function qe(){ye.value={},h()}const De=async()=>(ce.value?M.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[ce.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{P.value=!0,Y.start();for(const Ce in ye.value)ye.value[Ce]&&await ie({url:`/video-items/force/${Ce}`,method:"delete"});Y.finish(),P.value=!1,D.success(a("success")),ye.value={},h(null,!0)}}):D.warning(a("noItemSelected")),!1);return(Ce,J)=>{var o,ml;const S=be,Ie=fe,N=Me,se=Gt,$e=$t,pe=on,Ee=Ze,Ve=xl,Ne=La,Pe=rt,et=at,ft=Pt,Oe=rn,Ge=wt,je=hn,ke=Cl,Be=Lt,zt=Dt,Ot=ol,Wt=Yt,Jt=Ct,Ue=vt,mt=Ft,Rt=Tt,il=kt,pl=ll,fl=_t,rl=ut,ul=Kt;return n(),U(ge,null,[t($e,{to:"#alt-action"},{default:l(()=>[e(d).currentTab=="settings"?(n(),C(N,{key:0,loading:e(P),disabled:e(H),type:"primary",onClick:k},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),U("div",bo,[t(se,{checked:e(W),"onUpdate:checked":[J[0]||(J[0]=Te=>ze(W)?W.value=Te:null),J[1]||(J[1]=Te=>{for(const jt of e(X))jt.id&&(e(ye)[jt.id]=Te);xe.value=("uuidv4"in Ce?Ce.uuidv4:e(ct))()})]},{default:l(()=>[T(s(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(N,{type:"primary",onClick:J[2]||(J[2]=Te=>p(null))},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(Ne,{value:e(d).currentTab,"onUpdate:value":[J[6]||(J[6]=Te=>e(d).currentTab=Te),re],type:"card",size:"medium"},Fa({default:l(()=>[t(pe,{name:"all"},{default:l(()=>[t(Ie,{size:"18",class:"mr-1"},{default:l(()=>[t(S,{icon:"carbon:collapse-all"})]),_:1}),T(" "+s(e(a)("all_")),1)]),_:1}),t(pe,{name:e(It).SELF_HOSTED},{default:l(()=>[t(Ie,{size:"18",class:"mr-1"},{default:l(()=>[t(S,{icon:"carbon:document-video"})]),_:1}),T(" "+s(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(pe,{name:e(It).YOUTUBE},{default:l(()=>[t(Ie,{size:"18",class:"mr-1"},{default:l(()=>[t(S,{icon:"carbon:logo-youtube"})]),_:1}),T(" "+s(e(a)("youtube")),1)]),_:1},8,["name"]),t(pe,{name:"settings"},{default:l(()=>[t(Ie,{size:"18",class:"mr-1"},{default:l(()=>[t(S,{icon:"carbon:settings-adjust"})]),_:1}),T(" "+s(e(a)("settings")),1)]),_:1})]),_:2},[e(d).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Ve,{class:"!w-[250px]"},{default:l(()=>[t(Ee,{ref_key:"searchInputRef",ref:O,value:e(te),"onUpdate:value":[J[3]||(J[3]=Te=>ze(te)?te.value=Te:null),J[4]||(J[4]=Te=>{Te||h()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(N,{type:"primary",onClick:J[5]||(J[5]=Te=>h())},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(ce)>0?(n(),U("section",ho,[_("span",null,s(e(a)("nbItemsSelected",[e(ce)])),1),_("section",ko,[t(N,{type:"error",size:"small",onClick:De},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("delete")),1)]),_:1}),t(N,{type:"warning",size:"small",onClick:qe},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("cancelSelection")),1)]),_:1})])])):he("",!0),e(d).currentTab=="settings"?(n(),U("section",wo,[t(et,{hoverable:"",embedded:""},{header:l(()=>[T(s(e(a)("youtube")),1)]),default:l(()=>[t(Ge,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(ft,null,{default:l(()=>[t(et,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(a)("apiKey")),1),t(Ee,{value:e(de).youtubeApiKey,"onUpdate:value":J[7]||(J[7]=Te=>e(de).youtubeApiKey=Te),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(ft,null,{default:l(()=>[t(et,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(a)("autoUpdateChannelVideos")),1),t(Oe,{value:e(de).youtubeChannelVideosAutoUpdate,"onUpdate:value":J[8]||(J[8]=Te=>e(de).youtubeChannelVideosAutoUpdate=Te),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>J[28]||(J[28]=[_("div",{class:"w-6"},null,-1)])),unchecked:l(()=>J[29]||(J[29]=[_("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(de).youtubeChannelVideosAutoUpdate=="1"?(n(),U(ge,{key:0},[t(ft,null,{default:l(()=>[t(et,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(a)("channelId")),1),t(Ee,{value:e(de).youtubeChannelId,"onUpdate:value":J[9]||(J[9]=Te=>e(de).youtubeChannelId=Te),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(ft,null,{default:l(()=>[t(et,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Pe,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(a)("lastUpdate")),1),_("b",null,s(e(de).youtubeLastChannelVideosUpdate?e(Et)(e(de).youtubeLastChannelVideosUpdate,{locale:e(c),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(N,{strong:"",circle:"",secondary:e(j),type:"primary",title:e(a)("refresh"),disabled:e(P),onClick:ve},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:restart",class:He({"animate-spin":e(P)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):he("",!0)]),_:1})]),_:1})])):(n(),C(et,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(X).length&&!e(G)?(n(),U("section",xo,[t(Ge,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),U(ge,null,Re(e(X),(Te,jt)=>(n(),C(ft,{key:jt},{default:l(()=>[t(zt,{name:"slide-fade",appear:""},{default:l(()=>[t(et,{bordered:"",hoverable:""},{cover:l(()=>[_("div",Co,[t(je,{load:()=>e(q)(Te.path),fallback:Te.thumbnailUrl??e(_o),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"])])]),header:l(()=>[_("div",Io,[t(ke,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[Te.id?(n(),C(se,{key:e(xe),checked:e(ye)[Te.id],"onUpdate:checked":Xt=>e(ye)[Te.id]=Xt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):he("",!0),T(" "+s(e(f)(Te.title)),1)]),_:2},1024)])]),action:l(()=>[t(Pe,{justify:"space-between",align:"center"},{default:l(()=>[t(Pe,null,{default:l(()=>[t(Be,{bordered:!1,type:Te.visible?"success":"error"},{default:l(()=>[T(s(Te.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Be,{bordered:!1,type:Te.displayType==e(Bt).HORIZONTAL?"info":"warning"},{default:l(()=>[T(s(Te.displayType==e(Bt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Pe,null,{default:l(()=>[t(N,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{V.value=e(a)("video"),x.value=e(Z)(Te.path),$.value=Te.source==e(It).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Te.source!=e(It).YOUTUBE?(n(),C(N,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Xt=>p(Te)},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):he("",!0),t(N,{ternary:"",circle:"",title:e(a)("delete"),onClick:Xt=>I(Te)},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ot,{page:e(le),"onUpdate:page":[J[10]||(J[10]=Te=>ze(le)?le.value=Te:null),E],class:"mt-10 justify-center","show-size-picker":"","page-size":e(L),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(K)/e(L)),"onUpdate:pageSize":z},{prefix:l(()=>[T(s(`${e(K)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(G)?(n(),U("section",$o,[t(Wt,{size:"medium"})])):(n(),C(Jt,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(rl,{show:e(R),"onUpdate:show":J[21]||(J[21]=Te=>ze(R)?R.value=Te:null),loading:e(P),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(ne)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:Q,onNegativeClick:J[22]||(J[22]=Te=>R.value=!1)},{default:l(()=>[_("div",Vo,[t(fl,{ref_key:"formRef",ref:m,model:e(g),rules:e(F),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ue,{label:e(a)("source"),path:"source"},{default:l(()=>[t(se,{checked:e(g).source,"onUpdate:checked":J[11]||(J[11]=Te=>e(g).source=Te),"checked-value":e(It).YOUTUBE,"unchecked-value":e(It).SELF_HOSTED},{default:l(()=>[T(s(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(g).source==e(It).YOUTUBE?(n(),C(Ge,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(mt,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(Ee,{value:e(g).path,"onUpdate:value":J[12]||(J[12]=Te=>e(g).path=Te),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Rt,{value:e(g).displayType,"onUpdate:value":J[13]||(J[13]=Te=>e(g).displayType=Te),placeholder:e(a)("displayType"),options:e(A),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),U(ge,{key:1},[t(Ue,{"show-label":!1,path:"title"},{default:l(()=>[t(il,{modelValue:e(g).title,"onUpdate:modelValue":J[14]||(J[14]=Te=>e(g).title=Te),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ue,{"show-label":!1,path:"description"},{default:l(()=>[t(il,{modelValue:e(g).description,"onUpdate:modelValue":J[15]||(J[15]=Te=>e(g).description=Te),placeholder:e(a)("description"),class:"w-full",type:"textarea",sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ge,{"x-gap":"12",span:24},{default:l(()=>[t(mt,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Ve,null,{default:l(()=>[t(N,{type:"primary",onClick:J[16]||(J[16]=()=>{r.value=!0})},{default:l(()=>[T(s(e(a)("select")),1)]),_:1}),t(Ee,{value:e(g).path?e(Zt)(e(g).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(g).path?(n(),U(ge,{key:0},[t(N,{type:"primary",ghost:"",onClick:J[17]||(J[17]=()=>{V.value=e(a)("video"),x.value=e(Z)(e(g).path),$.value="classic",u.value=!0})},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:play"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("play")),1)]),_:1}),t(N,{type:"primary",ghost:"",onClick:J[18]||(J[18]=()=>{e(g).path=""})},{icon:l(()=>[t(Ie,null,{default:l(()=>[t(S,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("clear")),1)]),_:1})],64)):he("",!0)]),_:1})]),_:1},8,["label"]),t(mt,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Rt,{value:e(g).displayType,"onUpdate:value":J[19]||(J[19]=Te=>e(g).displayType=Te),placeholder:e(a)("displayType"),options:e(A),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(Ue,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[_("div",To,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:J[20]||(J[20]=()=>{y.value=!0})},[e(g).thumbnail?(n(),C(pl,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Fe("border: 1px dashed "+e(ee)("green","white")),src:e(Z)(e(g).thumbnail||"")},null,8,["style","src"])):(n(),U("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Fe("border: 1px dashed "+e(ee)("green","white"))},[t(Ie,{size:64},{default:l(()=>[t(S,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(rl,{show:e(u),"onUpdate:show":J[23]||(J[23]=Te=>ze(u)?u.value=Te:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(V)},{default:l(()=>[e($)==="youtube"?(n(),U("iframe",{key:0,width:"100%",height:"380",src:e(x),frameborder:"0",allowfullscreen:""},null,8,zo)):(n(),U("video",Uo,[_("source",{src:e(x)},null,8,Mo)]))]),_:1},8,["show","title"]),t(ul,{show:e(r),"onUpdate:show":J[24]||(J[24]=Te=>ze(r)?r.value=Te:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((o=e(v))==null?void 0:o.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:J[25]||(J[25]=Te=>{e(g).path=Te,r.value=!1})},null,8,["show","title","upload-config"]),t(ul,{show:e(y),"onUpdate:show":J[26]||(J[26]=Te=>ze(y)?y.value=Te:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ml=e(v))==null?void 0:ml.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:J[27]||(J[27]=Te=>{e(g).thumbnail=Te,y.value=!1})},null,8,["show","title","upload-config"])],64)}}});const Ao=Nt(So,[["__scopeId","data-v-cae8dda0"]]),{t:Se}=Ma.global,Va=[{key:"maxlength",defaultValue:"",placeholder:Se("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Se("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],Eo={text:Va,textarea:Va,number:[{key:"min",defaultValue:"",placeholder:Se("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Se("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Se("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Se("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"library",defaultValue:"all",placeholder:Se("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}]},{t:Ae}=Ma.global,Tl=[{type:"group",label:Ae("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Ae("text"),value:"text"},{label:Ae("i18nText"),value:"i18n-text"},{label:Ae("textarea"),value:"textarea"},{label:Ae("i18nTextarea"),value:"i18n-textarea"},{label:Ae("editor"),value:"editor"},{label:Ae("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Ae("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Ae("number"),value:"number"},{label:Ae("checkbox"),value:"checkbox"}]},{type:"group",label:Ae("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Ae("singleSelect"),value:"single-select"},{label:Ae("multiSelect"),value:"multi-select"}]},{type:"group",label:Ae("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Ae("date"),value:"date"},{label:Ae("daterange"),value:"daterange"},{label:Ae("datetime"),value:"datetime"},{label:Ae("datetimerange"),value:"datetimerange"},{label:Ae("year"),value:"year"},{label:Ae("yearrange"),value:"yearrange"},{label:Ae("month"),value:"month"},{label:Ae("monthrange"),value:"monthrange"},{label:Ae("quarter"),value:"quarter"},{label:Ae("quarterrange"),value:"quarterrange"},{label:Ae("week"),value:"week"}]},{type:"group",label:Ae("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Ae("image"),value:"image"},{label:Ae("gallery"),value:"gallery"},{label:Ae("audio"),value:"audio"},{label:Ae("video"),value:"video"},{label:Ae("document"),value:"document"},{label:Ae("file"),value:"file"}]},{type:"group",label:Ae("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Ae("newsArticle"),value:"news-article"},{label:Ae("newsArticles"),value:"news-articles"},{label:Ae("newsCategory"),value:"news-category"},{label:Ae("newsCategories"),value:"news-categories"},{label:Ae("newsTag"),value:"news-tag"},{label:Ae("newsTags"),value:"news-tags"}]},{type:"group",label:Ae("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Ae("icon"),value:"icon"},{label:Ae("icons"),value:"icons"},{label:Ae("color"),value:"color"}]},{type:"group",label:Ae("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Ae("contentItem"),value:"content-model-item"},{label:Ae("contentItems"),value:"content-model-items"},{label:Ae("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Ae("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Ae("list"),value:"list"},{label:Ae("i18nList"),value:"i18n-list"},{label:Ae("albums"),value:"albums"}]}],Do={class:"flex items-center justify-between w-full"},Lo={class:"text-base font-semibold"},Po={class:"text-xs text-slate-400"},No={class:"text-xs text-slate-400"},Oo={class:"text-xs text-slate-400"},Ro={class:"text-xs text-slate-400"},qo={key:0},Fo={class:"text-xs text-slate-400"},jo={key:1},Bo={class:"text-xs text-slate-400"},Ko={key:2},Yo={class:"text-xs text-slate-400"},Go={key:3},Ho={class:"text-xs text-slate-400"},Wo={key:0,class:"w-full flex items-center"},Jo={class:"w-full flex items-center"},Xo={class:"w-full"},Zo={class:"text-sm"},Qo=Ye({__name:"Fields",props:Ht({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(me){const{t:a}=We(),{tr:c,formatKey:f,pickByTheme:Z}=Xe(),{isLightTheme:ee}=Ke(ht()),{contentModels:b}=Ke(Je()),q=me,A=bt(me,"modelValue"),ie=z=>{for(const h of Tl){const P=h.children.find(R=>R.value===z);if(P)return P.label}return null},j=i(!1),Y=i(null),D=i(null),M=i(null),v=i(),te=(z,h)=>{D.value=M.value=z,Y.value=h;for(const P of Tl)P.children.find(ne=>ne.value===z)&&(v.value=P.key);j.value=!0},O=z=>{G(z).value=!G(z).value},G=z=>Le({get:()=>z.value===D.value,set:h=>{h?D.value=z.value:D.value=null}}),X=Le(()=>!D.value||D.value===M.value),d=()=>{D.value&&Y.value!==null&&(A.value[Y.value].type=D.value),j.value=!1},re=z=>ue("div",{class:"flex items-center"},[ue(fe,{size:21,class:"text-gray-500"},{default:()=>ue(be,{icon:z.icon})}),ue("span",{class:"font-normal ml-2 "},{default:()=>z.label}),ue("span",{class:"text-gray-500 ml-1"},{default:()=>`(${z.children.length})`})]),K=gt("renderSelectLabel"),L=gt("removeCollectionField"),le=gt("removeSingleton"),B=gt("onCreateItemOption"),E=gt("expandedNames",()=>Le(()=>i([]).value));return(z,h)=>{const P=Lt,R=rt,ne=Me,m=Ze,g=Pt,F=kt,p=xl,I=wt,Q=Ut,r=Gt,u=Tt,V=Ml,x=Dt,$=Ul,y=nl,w=sl,de=at,oe=Pa,H=Na,k=un,ae=La,ve=ut;return n(),U(ge,null,[(n(!0),U(ge,null,Re(A.value,(W,xe)=>(n(),C(de,{key:`field-${xe}`,size:"small",class:"my-2"},{default:l(()=>[t(w,{"expanded-names":e(E)(q.type=="collection"?`c-${q.parentItemIndex}-f-${xe}`:`s-${xe}`).value,"onUpdate:expandedNames":ye=>e(E)(q.type=="collection"?`c-${q.parentItemIndex}-f-${xe}`:`s-${xe}`).value=ye,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(y,{name:"1"},{header:l(()=>[_("div",Do,[t(R,null,{default:l(()=>[t(P,{size:"small",type:"info"},{default:l(()=>[T(s(xe+1),1)]),_:2},1024),_("span",Lo,s(e(c)(W.label)),1)]),_:2},1024),t(ne,{size:"small",type:"error",secondary:e(ee),onClick:()=>{q.type==="collection"?e(L)&&e(L)(q.collectionKey,xe):e(le)&&e(le)(xe)}},{default:l(()=>[t(e(fe),{class:"mr-1"},{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1}),T(" "+s(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(I,{span:24,"x-gap":"6"},{default:l(()=>[t(g,{span:6},{default:l(()=>[_("span",Po,s(e(a)("fieldKey")),1),t(m,{value:W.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":ye=>W.key=e(f)(ye)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(g,{span:10},{default:l(()=>[t(F,{modelValue:W.label,"onUpdate:modelValue":ye=>W.label=ye,placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[_("span",No,s(e(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(g,{span:8},{default:l(()=>[_("span",Oo,s(e(a)("type")),1),t(p,null,{default:l(()=>[t(m,{value:ie(W.type),placeholder:e(a)("type"),class:"w-full field-type-input",readonly:"",onClick:ye=>te(W.type,xe)},null,8,["value","placeholder","onClick"]),t(ne,{onClick:ye=>te(W.type,xe)},{icon:l(()=>[t(e(be),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Q,{class:"!mt-4 !mb-2"}),t(I,{span:24,"x-gap":"6"},{default:l(()=>[t(g,{span:10,class:"flex items-center"},{default:l(()=>[t(r,{checked:W.required,"onUpdate:checked":ye=>W.required=ye,size:"medium"},{default:l(()=>[T(s(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(g,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(W.type)?(n(),U(ge,{key:0},[_("span",Ro,s(e(a)("contentModel")),1),t(u,{value:W.defaultValue,"onUpdate:value":ye=>W.defaultValue=ye,options:e(b),placeholder:e(a)("contentModel"),"render-label":e(K),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),U(ge,{key:1},[W.type==="color"?(n(),U("div",qo,[_("span",Fo,s(e(a)("defaultValue")),1),t(e(tl),{value:W.defaultValue,"onUpdate:value":ye=>W.defaultValue=ye,class:"cursor-pointer",theme:e(ee)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):W.type==="i18n-text"?(n(),U("div",jo,[t(F,{modelValue:W.defaultValue,"onUpdate:modelValue":ye=>W.defaultValue=ye,placeholder:e(a)("defaultValue"),type:"text",class:"w-full",sync:""},{label:l(()=>[_("span",Bo,s(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):W.type==="i18n-textarea"?(n(),U("div",Ko,[t(F,{modelValue:W.defaultValue,"onUpdate:modelValue":ye=>W.defaultValue=ye,placeholder:e(a)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:l(()=>[_("span",Yo,s(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):W.type==="i18n-editor"?(n(),U("div",Go,[t(F,{modelValue:W.defaultValue,"onUpdate:modelValue":ye=>W.defaultValue=ye,placeholder:e(a)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:l(()=>[_("span",Ho,s(e(a)("defaultValue")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):(n(),C(m,{key:4,value:W.defaultValue,"onUpdate:value":ye=>W.defaultValue=ye,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),W.type==="multi-select"||W.type==="single-select"?(n(),C(Q,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[T(s(e(a)("options")),1)]),_:1})):he("",!0),t(x,{name:"slide-fade",appear:""},{default:l(()=>[W.type==="multi-select"||W.type==="single-select"?(n(),U("div",Wo,[t(V,{value:W.options,"onUpdate:value":ye=>W.options=ye,placeholder:e(a)("addOption"),"on-create":ye=>e(B)?e(B)(ye,xe):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[T(s(e(a)("addOption")),1)]),default:l(({value:ye})=>[_("div",Jo,[t(m,{value:ye.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":ce=>ye.value=e(f)(ce)},null,8,["value","placeholder","onUpdate:value"]),t(F,{modelValue:ye.label,"onUpdate:modelValue":ce=>ye.label=ce,placeholder:e(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):he("",!0)]),_:2},1024),(n(!0),U(ge,null,Re(e(Eo),(ye,ce,qe)=>(n(),U(ge,{key:qe},[W.type===ce?(n(),C(w,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(y,{name:"1"},{header:l(()=>[t(Q,{"title-placement":"left",class:"!my-4"},{default:l(()=>[T(s(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(x,{name:"slide-fade",appear:""},{default:l(()=>[_("div",Xo,[(n(!0),U(ge,null,Re(ye,De=>(n(),C(I,{key:De.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(g,{span:10},{default:l(()=>[t(m,{value:De.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(g,{span:14},{default:l(()=>[De.isNumber?(n(),C($,{key:0,value:W.settings[De.key],"onUpdate:value":Ce=>W.settings[De.key]=Ce,"default-value":De.defaultValue?parseInt(De.defaultValue):void 0,placeholder:De.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),C(m,{key:1,value:W.settings[De.key],"onUpdate:value":Ce=>W.settings[De.key]=Ce,"default-value":De.defaultValue,placeholder:De.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):he("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)),t(ve,{show:e(j),"onUpdate:show":h[2]||(h[2]=W=>ze(j)?j.value=W:null),preset:"card",size:"medium",style:{width:"650px"},title:e(a)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":l(()=>[t(R,{align:"center"},{default:l(()=>[t(ne,{size:"small",type:"success",disabled:e(X),onClick:d},{default:l(()=>[t(e(be),{icon:"carbon:checkmark",class:"mr-1"}),T(" "+s(e(a)("select")),1)]),_:1},8,["disabled"]),t(ne,{size:"small",type:"error",onClick:h[0]||(h[0]=W=>j.value=!1)},{default:l(()=>[t(e(be),{icon:"carbon:close",class:"mr-1"}),T(" "+s(e(a)("close")),1)]),_:1})]),_:1})]),default:l(()=>[t(ae,{animated:"",type:"line",size:"medium",placement:"left",value:e(v),"onUpdate:value":h[1]||(h[1]=W=>ze(v)?v.value=W:null),style:{height:"100%"}},{default:l(()=>[(n(!0),U(ge,null,Re(e(Tl),(W,xe)=>(n(),C(k,{name:W.key,tab:re(W),key:xe},{default:l(()=>[t(H,{hoverable:"",clickable:"",bordered:""},{default:l(()=>[(n(!0),U(ge,null,Re(W.children,ye=>(n(),C(oe,{class:He(G(ye).value?`${e(Z)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:ye.value,onClick:ce=>O(ye)},{suffix:l(()=>[t(r,{checked:G(ye).value,"onUpdate:checked":ce=>G(ye).value=ce,size:"medium",onClick:ce=>O(ye)},null,8,["checked","onUpdate:checked","onClick"])]),default:l(()=>[_("span",Zo,s(ye.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}});const Ta=Nt(Qo,[["__scopeId","data-v-24eae944"]]),ei={class:"text-base"},ti={key:0},li={key:0},ai={key:0},ni={class:"flex items-center justify-between w-full"},si={class:"text-base font-semibold"},oi={class:"text-xs text-slate-400"},ii={class:"text-xs text-slate-400"},ri={class:"text-xs text-slate-400"},Wa=Ye({__name:"index",props:Ht({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(me){const{t:a}=We(),{tr:c,pickByTheme:f,formatKey:Z}=Xe(),{isLightTheme:ee}=Ke(ht()),{loadContentModels:b}=Je();b();const q=me,A=bt(me,"show"),ie=ot(),j=st(),Y=pt(),D=i(!1),M=i(null),v=i({}),te=i({}),O={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},G=i(!1),X=i(!1),d=i({}),re=r=>Le({get:()=>d.value[r]?["1"]:[],set:u=>{d.value[r]=u.length>0}});xt(()=>X.value,r=>{Object.entries(v.value).forEach(([u,V],x)=>{var $;u!=="index"&&(d.value[`c-${x}`]=r,($=V==null?void 0:V.items)==null||$.forEach((y,w)=>{d.value[`c-${x}-f-${w}`]=r}))})}),xt(()=>G.value,r=>{Object.entries(v.value).forEach(([u,V],x)=>{u==="index"&&(V==null||V.forEach(($,y)=>{d.value[`s-${y}`]=r}))})});const K=Le(()=>we.isEqual(v.value,te.value)),L=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(we.cloneDeep(O)):v.value.index=[we.cloneDeep(O)]:v.value={index:[we.cloneDeep(O)]}},le=r=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(r,1)},B=()=>{const r=ct();v.value?v.value[r]={key:"",title:"",items:[]}:v.value={[r]:{key:"",title:"",items:[]}}},E=r=>{if(v.value){const{[r]:u,...V}=v.value;v.value=V}},z=r=>{v.value&&v.value[r].items.push(we.cloneDeep(O))},h=(r,u)=>{if(v.value){const V=v.value[r];V&&Array.isArray(V.items)&&V.items.splice(u,1)}},P=r=>r.title&&r.key&&r.key!=="index",R=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(r=>r!=="index").length:0,ne=Le(()=>v.value?Object.keys(v.value).filter(r=>r!=="index"):[]),m=r=>ne.value.indexOf(r),g=i(!1),F=async()=>{const r=we.cloneDeep(v.value),u=we.cloneDeep(v.value);g.value=!1,D.value=!0,ie.start();const V=[];if(we.forIn(r,(x,$)=>{$!=="index"&&V.push(x.key)}),we.forIn(r,(x,$)=>{if($!=="index"){const y=we.keys(r).filter(w=>w!=="index").indexOf($);if(x&&x.key){if(x.key==="index")return j.error(a("keyIndexIsReservedInCollections")),g.value=!0,!1;if(V.filter(de=>de==x.key).length>1)return j.error(a("collectionKeyIsNotUnique",[x.key])),g.value=!0,!1;if(Array.isArray(x.items))for(const[de,oe]of x.items.entries())if(oe.key){if(x.items.filter(k=>k.key===oe.key).length>1)return j.error(a("fieldKeyOfCollectionIsNotUnique",[oe.key,x.key])),g.value=!0,!1}else return j.error(a("fieldKeyOfCollectionIsRequired",[de+1,x.key])),g.value=!0,!1}else return j.error(a("collectionKeyIsRequired",[y+1])),g.value=!0,!1}else if(Array.isArray(x))for(const[y,w]of x.entries())if(w.key){if(x.filter(oe=>oe.key===w.key).length>1)return j.error(a("singletonKeyIsNotUnique",[w.key])),g.value=!0,!1}else return j.error(a("singletonKeyIsRequired",[y+1])),g.value=!0,!1}),g.value){D.value=!1,ie.finish();return}we.forIn(u,(x,$)=>{$!=="index"&&$!==x.key&&tn(r,$,x.key)}),await q.updateDataStructure(r),D.value=!1,ie.finish()},p=()=>{we.isEqual(v.value,te.value)?A.value=!1:Y.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{A.value=!1}})};xt(()=>q.rawDataStructure,r=>{v.value=r?we.cloneDeep(r):{},we.forIn(r,(u,V)=>{var x;V!=="index"?(v.value[V].key=V,(x=u==null?void 0:u.items)==null||x.forEach(($,y)=>{v.value[V].items[y].settings||(v.value[V].items[y].settings={})})):u==null||u.forEach(($,y)=>{v.value[V][y].settings||(v.value[V][y].settings={})})}),te.value=we.cloneDeep(v.value)},{immediate:!0,deep:!0});const I=r=>ue("span",{},{default:()=>c(r.title)}),Q=(r,u)=>({value:`option_${u+1}${r+1}`,label:""});return Mt("removeCollectionField",h),Mt("onCreateItemOption",Q),Mt("renderSelectLabel",I),Mt("removeSingleton",le),Mt("addSingleton",L),Mt("expandCollections",X),Mt("expandSingletons",G),Mt("expandedNames",re),(r,u)=>{const V=Oa,x=be,$=fe,y=Me,w=rt,de=at,oe=Vt,H=Pt,k=Lt,ae=Ze,ve=kt,W=wt,xe=Ut,ye=dn,ce=nl,qe=sl,De=za;return n(),C(De,{modelValue:A.value,"onUpdate:modelValue":u[7]||(u[7]=Ce=>A.value=Ce),"close-on-esc":!1,closable:!1,onOnSizeChange:u[8]||(u[8]=Ce=>{M.value=Ce})},{header:l(()=>[_("div",ei,[t(V,{depth:"1"},{default:l(()=>[T(s(e(a)("dataStructure"))+" ",1),r.title?(n(),U("span",ti,"Â -Â "+s(r.title),1)):he("",!0)]),_:1})])]),"header-extra":l(()=>[t(w,{align:"center"},{default:l(()=>[t(y,{type:"success",title:e(a)("save"),loading:e(D),disabled:e(K),onClick:u[0]||(u[0]=Ce=>F())},{icon:l(()=>[t($,null,{default:l(()=>[t(x,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(y,{type:"error",title:e(a)("close"),disabled:e(D),onClick:u[1]||(u[1]=Ce=>p())},{icon:l(()=>[t($,null,{default:l(()=>[t(x,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var Ce,J;return[_("section",{style:Fe(`min-height: ${((Ce=e(M))==null?void 0:Ce.windowHeight)-((J=e(M))==null?void 0:J.headerHeight)-5}px`),class:He(`w-full h-full ${e(f)("bg-slate-200","bg-zinc-800")}`)},[t(W,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(H,{class:"ml-4 mt-2"},{default:l(()=>{var S,Ie;return[t(de,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var N,se;return[T(s(e(a)("singletons"))+"Â  ",1),(N=e(v).index)!=null&&N.length?(n(),U("span",li," ("+s((se=e(v).index)==null?void 0:se.length)+") ",1)):he("",!0)]}),"header-extra":l(()=>[t(w,null,{default:l(()=>[t(y,{size:"small",type:"primary",secondary:e(ee),onClick:u[2]||(u[2]=N=>G.value=!e(G))},{default:l(()=>[t($,null,{default:l(()=>[e(G)?(n(),C(x,{key:0,icon:"carbon:collapse-categories"})):(n(),C(x,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(y,{size:"small",type:"primary",secondary:e(ee),onClick:u[3]||(u[3]=N=>L())},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),T(" "+s(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(oe,{style:Fe(`max-height: ${((S=e(M))==null?void 0:S.windowHeight)-((Ie=e(M))==null?void 0:Ie.headerHeight)-100}px`)},{default:l(()=>[t(Ta,{modelValue:e(v).index,"onUpdate:modelValue":u[4]||(u[4]=N=>e(v).index=N),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(H,{class:"mr-4 mt-2"},{default:l(()=>{var S,Ie;return[t(de,{embedded:"",bordered:"",segmented:""},{header:l(()=>[T(s(e(a)("collections"))+"Â  ",1),R()>0?(n(),U("span",ai," ("+s(R())+") ",1)):he("",!0)]),"header-extra":l(()=>[t(w,null,{default:l(()=>[t(y,{size:"small",type:"primary",secondary:e(ee),onClick:u[5]||(u[5]=N=>X.value=!e(X))},{default:l(()=>[t($,null,{default:l(()=>[e(X)?(n(),C(x,{key:0,icon:"carbon:collapse-categories"})):(n(),C(x,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(y,{size:"small",type:"primary",secondary:e(ee),onClick:u[6]||(u[6]=N=>B())},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),T(" "+s(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(oe,{style:Fe(`max-height: ${((S=e(M))==null?void 0:S.windowHeight)-((Ie=e(M))==null?void 0:Ie.headerHeight)-100}px`)},{default:l(()=>[(n(!0),U(ge,null,Re(e(v)||{},(N,se,$e)=>(n(),U(ge,{key:$e},[se!="index"?(n(),C(de,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(qe,{"expanded-names":re(`c-${$e}`).value,"onUpdate:expandedNames":pe=>re(`c-${$e}`).value=pe,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(ce,{name:"1"},{header:l(()=>[_("div",ni,[t(w,null,{default:l(()=>[t(k,{size:"small",type:"success"},{default:l(()=>[T(s(m(se)+1),1)]),_:2},1024),_("span",si,s(e(c)(N.title)),1)]),_:2},1024),t(y,{size:"small",type:"error",secondary:e(ee),onClick:pe=>E(se)},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1}),T(" "+s(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(W,{span:24,"x-gap":"6"},{default:l(()=>[t(H,{span:6},{default:l(()=>[_("span",oi,s(e(a)("fieldKey")),1),t(ae,{value:N.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":pe=>N.key=e(Z)(pe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(H,{span:11},{default:l(()=>[t(ve,{modelValue:N.title,"onUpdate:modelValue":pe=>N.title=pe,placeholder:e(a)("title"),class:"w-full",size:"small",sync:""},{label:l(()=>[_("span",ii,s(e(a)("title")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(H,{span:7},{default:l(()=>[_("span",ri,s(e(a)("actions")),1),t(y,{block:"",size:"small",type:"primary",disabled:!P(N),secondary:e(ee),class:"w-full",onClick:pe=>z(se)},{default:l(()=>[t($,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1}),T(" "+s(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(xe,{class:"!my-4.75"}),P(N)?(n(),C(Ta,{key:0,modelValue:e(v)[se].items,"onUpdate:modelValue":pe=>e(v)[se].items=pe,"parent-item-index":$e,"collection-key":se,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),C(ye,{key:1,bordered:"",type:"info"},{default:l(()=>[T(s(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):he("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),ui={class:"flex items-center"},di={class:"text-base"},ci={class:"mt-2"},pi={class:"mt-2 text-xs"},fi=Ye({__name:"index",setup(me){const{t:a}=We(),{request:c}=Qe(),{tr:f,pickByTheme:Z,displayFormErrors:ee,isInDevMode:b}=Xe(),{sections:q}=Ke(Je()),{loadSections:A}=Je(),{isLightTheme:ie}=Ke(ht()),j=ot(),Y=st(),D=i(!1);A();const M=i(12),v=i(1),te=P=>{M.value=P},O={name:"",title:"",content:"",slug:""},G=i(!1),X=i(null),d=i(O),re={title:[{required:!0,message:a("fillRequired")}]},K=i(null),L=P=>{K.value=we.cloneDeep(P),d.value=we.cloneDeep(P||O),G.value=!0},le=async()=>{var P;return(P=X.value)==null||P.validate(async R=>{var ne,m,g,F,p,I;if(!R){j.start(),D.value=!0;const Q={title:d.value.title};K.value||(Q.name=we.startCase(we.camelCase(f(d.value.title))).replace(/\s+/g,""));const r=await c({method:K.value?"put":"post",url:K.value?`/sections/${K.value.slug}`:"/sections",data:Q});if(r.failure&&r.error)switch((g=(m=(ne=r.error)==null?void 0:ne.response)==null?void 0:m.data)==null?void 0:g.errorCode){case tt.FORM_INVALID_DATA:ee((I=(p=(F=r.error)==null?void 0:F.response)==null?void 0:p.data)==null?void 0:I.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),A(),G.value=!1;D.value=!1,j.finish()}}),!1},B=i(null),E=i(!1),z=async P=>{var ne;D.value=!0,j.start();const R=await c({url:`/sections/${(ne=B.value)==null?void 0:ne.slug}`,method:"put",data:{dataStructure:P}});R.success&&R.result?(Y.success(a("success")),A(),h(R.result.data)):Y.error(a("anErrorOccurred")),D.value=!1,j.finish()},h=P=>{B.value=P,E.value=!0};return(P,R)=>{var oe,H;const ne=be,m=fe,g=Me,F=rt,p=Ut,I=Lt,Q=nl,r=sl,u=at,V=ol,x=Ct,$=kt,y=vt,w=_t,de=ut;return n(),U(ge,null,[e(q)&&e(q).length?(n(),U(ge,{key:0},[(n(!0),U(ge,null,Re(e(q).slice((e(v)-1)*e(M),e(v)*e(M)),k=>(n(),C(u,{key:k.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(r,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:ae})=>[t(m,null,{default:l(()=>[ae?(n(),C(ne,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(ne,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>R[5]||(R[5]=[_("span",null,null,-1)])),default:l(()=>[t(Q,{name:"1"},{header:l(()=>[_("div",ui,[t(F,null,{default:l(()=>[e(b)?(n(),C(g,{key:0,size:"small",type:"primary",secondary:e(ie),onClick:it(ae=>h(k),["stop"])},{default:l(()=>[t(m,{class:"mr-1"},{default:l(()=>[t(ne,{icon:"carbon:data-1"})]),_:1}),T(" "+s(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):he("",!0),t(g,{size:"small",type:"primary",secondary:e(ie),onClick:it(ae=>L(k),["stop"])},{default:l(()=>[t(m,null,{default:l(()=>[t(ne,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(p,{vertical:"",class:He(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",di,s(e(f)(k.title)),1)])]),default:l(()=>[_("div",null,s(e(a)("sectionUsedInXPages",[k.pagesCount])),1),_("section",ci,[(n(!0),U(ge,null,Re(k.pages,ae=>(n(),C(I,{key:ae.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[T(s(e(f)(ae.title)),1)]),_:2},1024))),128))]),_("div",pi,[T(s(e(a)("dataRetrievalSlug"))+": ",1),_("b",null,s(k.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,{page:e(v),"onUpdate:page":R[0]||(R[0]=k=>ze(v)?v.value=k:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(M),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(M)),"onUpdate:pageSize":te},{prefix:l(()=>[T(s(`${e(q).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(u,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(m,null,{default:l(()=>[t(ne,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(de,{show:e(G),"onUpdate:show":R[2]||(R[2]=k=>ze(G)?G.value=k:null),loading:e(D),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(K)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:le,onNegativeClick:R[3]||(R[3]=k=>G.value=!1)},{default:l(()=>[t(w,{ref_key:"formRef",ref:X,model:e(d),rules:re,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(y,{"show-label":!1,path:"title",class:"mt-5"},{default:l(()=>[t($,{modelValue:e(d).title,"onUpdate:modelValue":R[1]||(R[1]=k=>e(d).title=k),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Wa,{show:e(E),"onUpdate:show":R[4]||(R[4]=k=>ze(E)?E.value=k:null),title:e(f)((oe=e(B))==null?void 0:oe.title),"raw-data-structure":(H=e(B))==null?void 0:H.dataStructure,"update-data-structure":z},null,8,["show","title","raw-data-structure"])],64)}}}),mi={class:"flex items-center justify-center"},vi=Ye({__name:"Email",setup(me){const a=ot(),c=st(),f=pt(),{displayFormErrors:Z}=Xe(),{request:ee}=Qe(),{t:b,locale:q}=We(),A=i(!1),ie=i([]),j=i(""),Y=i(),D={pageSize:12,prefix:({itemCount:r})=>ue("div",{class:"font-bold"},{default:()=>`${b("total")}: ${r}`})},M=[{type:"selection"},{title:b("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return ue("div",{},{default:()=>r.email})}},{title:b("updateAt"),key:"updatedAt",width:125,render(r){return ue("div",{},{default:()=>Et(r.updatedAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(r){return ue("div",{},{default:()=>Et(r.createdAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Ze,{ref:Y,placeholder:b("search"),value:j.value,onInput:r=>{j.value=r}},{suffix:()=>ue(fe,{},{default:()=>ue(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Me,{size:"small",type:"warning",onClick:()=>{L(r)},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"error",onClick:()=>{f.warning({title:b("confirm"),content:b("confirmDeleteEmailAddress"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/emails/${r.id}`})).success?(c.success(b("success")),te()):c.error(b("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!j.value)return ie.value;const r=ie.value.filter(u=>u.email.toLowerCase().includes(j.value.toLowerCase()));return Y.value&&Y.value.focus(),r}),te=async()=>{A.value=!0;const r=await ee({url:"/newsletter/emails"});r.success&&r.result&&(ie.value=r.result.data),A.value=!1};te();const O=i(!1),G=i(!1),X=i(null),d=i(null),re=i({email:""}),K={email:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(r,u){return u&&!el.isEmail(u)?new Error(b("invalidEmail")):!0}}]},L=r=>{X.value=we.cloneDeep(r),r?re.value=we.cloneDeep(r):re.value={email:""},G.value=!0},le=async()=>{var r;return(r=d.value)==null||r.validate(async u=>{var V,x,$,y,w,de;if(!u)if(X.value)if(X.value.email!==re.value.email&&ie.value.findIndex(oe=>oe.email==re.value.email)>-1)c.error(b("sameEmailAddressMessage"));else{a.start(),O.value=!0;const oe={email:re.value.email},H=await ee({method:"put",url:`/newsletter/emails/${X.value.id}`,data:oe});H.success&&H.result.data&&(c.success(b("success")),te()),O.value=!1,a.finish(),G.value=!1}else if(ie.value.findIndex(oe=>oe.email==re.value.email)>-1)c.error(b("sameEmailAddressMessage"));else{a.start(),O.value=!0;const oe={email:re.value.email},H=await ee({method:"post",url:"/newsletter/emails",data:oe});if(H.failure&&H.error)switch(($=(x=(V=H.error)==null?void 0:V.response)==null?void 0:x.data)==null?void 0:$.errorCode){case tt.FORM_INVALID_DATA:Z((de=(w=(y=H.error)==null?void 0:y.response)==null?void 0:w.data)==null?void 0:de.data);break;default:c.error(b("anErrorOccurred"))}else c.success(b("success")),te();O.value=!1,a.finish(),G.value=!1}}),!1};let B=null;const E=()=>{B&&(B.destroy(),B=null)};ja(E);const z=(r,u)=>u.map(V=>r.map(x=>V[x])),h=()=>{B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),_l(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(r=>{var u=["no","email","createdAt","updatedAt"];const V=we.sortBy(ie.value.map(($,y)=>({no:y+1,...$})),"email"),x=z(u,V);try{r.export_json_to_excel({header:u,data:x,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},P=()=>{B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),_l(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(r=>{var u=["email"];const V=z(u,[{email:"adresse@email.com"}]);try{r.export_json_to_excel({header:u,data:V,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},R=i(!1),ne=async({results:r})=>{O.value=!0,a.start(),B||(B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<r.length;u++)r[u].email&&ie.value.findIndex(V=>V.email==r[u].email)==-1&&(B&&(B.content=`${b("pleaseBePatient")}: ${u} ${b("task_s")} / ${r.length}`),await ee({method:"post",url:"/newsletter/emails",data:{email:r[u].email}}));await te(),E(),a.finish(),O.value=!1,R.value=!1},m=i(ct()),g=i([]),F=r=>r.id,p=r=>{g.value=r},I=()=>{g.value=[],m.value=ct()},Q=async()=>(g.value.length?f.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[g.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{O.value=!0,a.start();for(let r=0;r<g.value.length;r++)(await ee({url:`/newsletter/emails/${g.value[r]}`,method:"delete"})).success;te(),a.finish(),O.value=!1,c.success(b("success")),I()}}):c.warning(b("noItemSelected")),!1);return(r,u)=>{const V=Ra,x=rt,$=$t,y=at,w=Dt,de=wl,oe=bl,H=vt,k=_t,ae=ut,ve=Ya;return n(),U(ge,null,[t($,{to:"#alt-action"},{default:l(()=>[t(x,null,{default:l(()=>[t(V,{onPositiveClick:u[0]||(u[0]=W=>h())},{trigger:l(()=>[t(e(Me),{type:"success"},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:upload"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("export")),1)]),_:1})]),default:l(()=>[T(" "+s(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(Me),{type:"info",onClick:u[1]||(u[1]=W=>R.value=!0)},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("import")),1)]),_:1}),t(e(Me),{type:"primary",onClick:u[2]||(u[2]=W=>L(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(w,{name:"slide-fade",appear:""},{default:l(()=>[e(g).length?(n(),C(y,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(x,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(b)("nbItemsSelected",[e(g).length])),1),t(x,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Me),{type:"error",size:"small",onClick:Q},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("delete")),1)]),_:1}),t(e(Me),{type:"warning",size:"small",onClick:I},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):he("",!0)]),_:1}),t(oe,null,{default:l(()=>[(n(),C(de,{key:e(m),columns:M,data:e(v),pagination:D,loading:e(A),"single-line":!1,"scroll-x":800,"row-key":F,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(ae,{show:e(G),"onUpdate:show":u[4]||(u[4]=W=>ze(G)?G.value=W:null),loading:e(O),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(X)?e(b)("editEmailAddress"):e(b)("addEmailAddress"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:le,onNegativeClick:u[5]||(u[5]=W=>G.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:d,class:"mt-5",model:e(re),rules:K,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(H,{label:e(b)("emailAddress"),path:"email"},{default:l(()=>[t(e(Ze),{value:e(re).email,"onUpdate:value":u[3]||(u[3]=W=>e(re).email=W),placeholder:e(b)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ae,{show:e(R),"onUpdate:show":u[7]||(u[7]=W=>ze(R)?R.value=W:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(ve,{class:"my-5","on-success":ne}),_("div",mi,[t(e(Me),{type:"info",size:"small",onClick:u[6]||(u[6]=W=>P())},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),_i={class:"flex items-center justify-center"},yi=Ye({__name:"Phone",setup(me){const a=ot(),c=st(),f=pt(),{displayFormErrors:Z}=Xe(),{request:ee}=Qe(),{t:b,locale:q}=We(),A=i(!1),ie=i([]),j=i(""),Y=i(),D={pageSize:12,prefix:({itemCount:r})=>ue("div",{class:"font-bold"},{default:()=>`${b("total")}: ${r}`})},M=[{type:"selection"},{title:b("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return ue("div",{},{default:()=>r.phone})}},{title:b("updateAt"),key:"updatedAt",width:125,render(r){return ue("div",{},{default:()=>Et(r.updatedAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(r){return ue("div",{},{default:()=>Et(r.createdAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Ze,{ref:Y,placeholder:b("search"),value:j.value,onInput:r=>{j.value=r}},{suffix:()=>ue(fe,{},{default:()=>ue(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Me,{size:"small",type:"warning",onClick:()=>{L(r)},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"error",onClick:()=>{f.warning({title:b("confirm"),content:b("confirmDeletePhoneNumber"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/phones/${r.id}`})).success?(c.success(b("success")),te()):c.error(b("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!j.value)return ie.value;const r=ie.value.filter(u=>u.phone.toLowerCase().includes(j.value.toLowerCase()));return Y.value&&Y.value.focus(),r}),te=async()=>{A.value=!0;const r=await ee({url:"/newsletter/phones"});r.success&&r.result&&(ie.value=r.result.data),A.value=!1};te();const O=i(!1),G=i(!1),X=i(null),d=i(null),re=i({phone:""}),K={phone:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(r,u){return u&&!wn(u)?new Error(b("invalidNumber")):!0}}]},L=r=>{X.value=we.cloneDeep(r),r?re.value=we.cloneDeep(r):re.value={phone:""},G.value=!0},le=async()=>{var r;return(r=d.value)==null||r.validate(async u=>{var V,x,$,y,w,de;if(!u)if(X.value)if(X.value.phone!==re.value.phone.replace(/\s+/g,"")&&ie.value.findIndex(oe=>oe.phone==re.value.phone.replace(/\s+/g,""))>-1)c.error(b("samePhoneNumberMessage"));else{a.start(),O.value=!0;const oe={phone:re.value.phone.replace(/\s+/g,"")},H=await ee({method:"put",url:`/newsletter/phones/${X.value.id}`,data:oe});H.success&&H.result.data&&(c.success(b("success")),te()),O.value=!1,a.finish(),G.value=!1}else if(ie.value.findIndex(oe=>oe.phone==re.value.phone.replace(/\s+/g,""))>-1)c.error(b("samePhoneNumberMessage"));else{a.start(),O.value=!0;const oe={phone:re.value.phone.replace(/\s+/g,"")},H=await ee({method:"post",url:"/newsletter/phones",data:oe});if(H.failure&&H.error)switch(($=(x=(V=H.error)==null?void 0:V.response)==null?void 0:x.data)==null?void 0:$.errorCode){case tt.FORM_INVALID_DATA:Z((de=(w=(y=H.error)==null?void 0:y.response)==null?void 0:w.data)==null?void 0:de.data);break;default:c.error(b("anErrorOccurred"))}else c.success(b("success")),te();O.value=!1,a.finish(),G.value=!1}}),!1};let B=null;const E=()=>{B&&(B.destroy(),B=null)};ja(E);const z=(r,u)=>u.map(V=>r.map(x=>V[x])),h=()=>{B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),_l(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(r=>{var u=["no","phone","createdAt","updatedAt"];const V=we.sortBy(ie.value.map(($,y)=>({no:y+1,...$})),"phone"),x=z(u,V);try{r.export_json_to_excel({header:u,data:x,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},P=()=>{B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}),_l(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(r=>{var u=["phone"];const V=z(u,[{phone:"+22899999999"}]);try{r.export_json_to_excel({header:u,data:V,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),c.error(b("anErrorOccurred"))}})},R=i(!1),ne=async({results:r})=>{O.value=!0,a.start(),B||(B=c.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let u=0;u<r.length;u++)r[u].phone&&ie.value.findIndex(V=>V.phone.replace(/\s+/g,"")==r[u].phone.replace(/\s+/g,""))==-1&&(B&&(B.content=`${b("pleaseBePatient")}: ${u} ${b("task_s")} / ${r.length}`),await ee({method:"post",url:"/newsletter/phones",data:{phone:r[u].phone.replace(/\s+/g,"")}}));await te(),E(),a.finish(),O.value=!1,R.value=!1},m=i(ct()),g=i([]),F=r=>r.id,p=r=>{g.value=r},I=()=>{g.value=[],m.value=ct()},Q=async()=>(g.value.length?f.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[g.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{O.value=!0,a.start();for(let r=0;r<g.value.length;r++)(await ee({url:`/newsletter/phones/${g.value[r]}`,method:"delete"})).success;te(),a.finish(),O.value=!1,c.success(b("success")),I()}}):c.warning(b("noItemSelected")),!1);return(r,u)=>{const V=Ra,x=rt,$=$t,y=at,w=Dt,de=wl,oe=bl,H=kn,k=vt,ae=_t,ve=ut,W=Ya;return n(),U(ge,null,[t($,{to:"#alt-action"},{default:l(()=>[t(x,null,{default:l(()=>[t(V,{onPositiveClick:u[0]||(u[0]=xe=>h())},{trigger:l(()=>[t(e(Me),{type:"success"},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:upload"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("export")),1)]),_:1})]),default:l(()=>[T(" "+s(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(Me),{type:"info",onClick:u[1]||(u[1]=xe=>R.value=!0)},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("import")),1)]),_:1}),t(e(Me),{type:"primary",onClick:u[2]||(u[2]=xe=>L(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(w,{name:"slide-fade",appear:""},{default:l(()=>[e(g).length?(n(),C(y,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(x,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,s(e(b)("nbItemsSelected",[e(g).length])),1),t(x,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Me),{type:"error",size:"small",onClick:Q},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("delete")),1)]),_:1}),t(e(Me),{type:"warning",size:"small",onClick:I},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):he("",!0)]),_:1}),t(oe,null,{default:l(()=>[(n(),C(de,{key:e(m),columns:M,data:e(v),pagination:D,loading:e(A),"single-line":!1,"scroll-x":800,"row-key":F,size:"small",striped:"","onUpdate:checkedRowKeys":p},null,8,["data","loading","row-key"]))]),_:1}),t(ve,{show:e(G),"onUpdate:show":u[4]||(u[4]=xe=>ze(G)?G.value=xe:null),loading:e(O),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(X)?e(b)("editPhoneNumber"):e(b)("addPhoneNumber"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:le,onNegativeClick:u[5]||(u[5]=xe=>G.value=!1)},{default:l(()=>[t(ae,{ref_key:"formRef",ref:d,class:"mt-5",model:e(re),rules:K,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(k,{label:e(b)("phone"),path:"phone"},{default:l(()=>[t(H,{modelValue:e(re).phone,"onUpdate:modelValue":u[3]||(u[3]=xe=>e(re).phone=xe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ve,{show:e(R),"onUpdate:show":u[7]||(u[7]=xe=>ze(R)?R.value=xe:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(W,{class:"my-5","on-success":ne}),_("div",_i,[t(e(Me),{type:"info",size:"small",onClick:u[6]||(u[6]=xe=>P())},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:download"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),gi="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",bi={class:"text-base"},hi={class:"text-base"},ki=Ye({__name:"DataForm",props:Ht({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(me){const a=me,c=bt(me,"show"),f=bt(me,"data"),Z=ot(),ee=st(),{t:b}=We(),{tr:q,pickByTheme:A,editKeysToCamelCase:ie}=Xe(),j=i(null),Y=i(!1),D=gt("currentEditItem"),M=Le(()=>we.isEqual(f.value,D==null?void 0:D.value)&&we.isEqual(te.value,G.value)),v=()=>{c.value=!1,Y.value=!1},te=i({}),O=i(ct()),G=i({}),X=i(),d=i();xt(()=>c.value,K=>{var L;K&&(Ua(f.value.contentModelData)?te.value=qt(f.value.contentModelData):te.value=qt({}),we.forIn(ie(((L=a.contentModel)==null?void 0:L.dataStructure)??{}),(le,B)=>{(!te.value[B]||Array.isArray(te.value[B])&&te.value[B].length==0)&&(B==="index"?te.value[B]=qt({}):te.value[B]=qt([]))}),G.value=we.cloneDeep(te.value),O.value=ct())},{immediate:!0});const re=async()=>{Y.value=!0,Z.start();const K=X.value&&await X.value(),L=d.value&&await d.value();(!X.value||K)&&(!d.value||L)?await a.submitData(te.value):ee.error(b("mandatoryFieldsNotFilledIn")),Z.finish(),Y.value=!1};return(K,L)=>{const le=Oa,B=hl,E=kl,z=be,h=fe,P=Me,R=rt,ne=at,m=Vt,g=Pt,F=wt,p=za;return n(),C(p,{modelValue:c.value,"onUpdate:modelValue":L[3]||(L[3]=I=>c.value=I),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=I=>{j.value=I})},{header:l(()=>[_("div",bi,[t(le,{depth:"1"},{default:l(()=>{var I;return[T(s(e(q)((I=a.contentModel)==null?void 0:I.title))+" ",1),_("span",null," Â -Â "+s(e(D)?e(b)("editItem"):e(b)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(R,{align:"center"},{default:l(()=>[_("span",hi,s(e(b)("status"))+":",1),t(E,{value:f.value.isActive,"onUpdate:value":L[0]||(L[0]=I=>f.value.isActive=I),name:"isActive",class:"w-full"},{default:l(()=>[t(B,{value:!1,label:e(b)("hidden"),class:"w-[50%]"},null,8,["label"]),t(B,{value:!0,label:e(b)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=_("div",{class:"w-4"},null,-1)),t(P,{type:"success",title:e(b)("save"),loading:e(Y),disabled:e(M),onClick:L[1]||(L[1]=I=>re())},{icon:l(()=>[t(h,null,{default:l(()=>[t(z,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("save")),1)]),_:1},8,["title","loading","disabled"]),t(P,{type:"error",title:e(b)("close"),disabled:e(Y),onClick:L[2]||(L[2]=I=>v())},{icon:l(()=>[t(h,null,{default:l(()=>[t(z,{icon:"carbon:close"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var I,Q;return[_("section",{style:Fe(`min-height: ${((I=e(j))==null?void 0:I.windowHeight)-((Q=e(j))==null?void 0:Q.headerHeight)-5}px`),class:He(`w-full h-full ${e(A)("bg-slate-200","bg-zinc-800")}`)},[t(F,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(g,{class:"ml-4 mt-2"},{default:l(()=>{var r,u;return[t(m,{style:Fe(`height: ${((r=e(j))==null?void 0:r.windowHeight)-((u=e(j))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),U(ge,null,Re(e(ie)((V=K.contentModel)==null?void 0:V.dataStructure),(x,$)=>(n(),U(ge,{key:$},[String($)==="index"?(n(),C(ne,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),C(gl,{key:`${e(O)}-${$}-form-1`,modelValue:e(te)[$],"onUpdate:modelValue":y=>e(te)[$]=y,items:x,onUpdate:(y,w)=>{X.value=w}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):he("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(g,{class:"mr-4 mt-2"},{default:l(()=>{var r,u;return[t(m,{style:Fe(`height: ${((r=e(j))==null?void 0:r.windowHeight)-((u=e(j))==null?void 0:u.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),U(ge,null,Re(e(ie)((V=K.contentModel)==null?void 0:V.dataStructure),(x,$)=>(n(),U(ge,{key:$},[String($)!=="index"?(n(),C(ne,{key:0,title:e(q)(x.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(P,{quaternary:"",size:"small",onClick:()=>e(te)[$].push({})},{icon:l(()=>[t(h,null,{default:l(()=>[t(z,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(b)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),U(ge,null,Re(e(te)[$],(y,w)=>(n(),C(ne,{key:w,title:String(w+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(P,{type:"error",size:"small",onClick:()=>e(te)[$].splice(w,1)},{icon:l(()=>[t(h,null,{default:l(()=>[t(z,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),C(gl,{key:`${e(O)}-${$}-${w}-form-2`,modelValue:e(te)[$][w],"onUpdate:modelValue":de=>e(te)[$][w]=de,items:x.items,onUpdate:(de,oe)=>{d.value=oe}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):he("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),wi={class:"flex items-center justify-between"},xi={class:"flex flex-col"},Ci={class:"text-sm font-bold"},Ii={class:"text-xs font-normal"},$i=Ye({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Ht(["update"],["update:show"]),setup(me,{emit:a}){const{t:c}=We(),{request:f}=Qe(),{pickByTheme:Z,tr:ee,displayFormErrors:b,mergeArrays:q}=Xe(),{extractItemTitle:A}=cl(),{loadContentModels:ie}=Je(),{contentModels:j}=Ke(Je()),{isLightTheme:Y}=Ke(ht()),D=pt(),M=st(),v=ot(),te=a;ie();const O=bt(me,"show"),G=i(!1),X=gt("currentEditItem"),d=async F=>{D.warning({title:c("confirm"),content:c("confirmDeleteLink"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{var I,Q,r,u,V;v.start(),(await f({method:"put",url:`/content-model/items/${(I=X==null?void 0:X.value)==null?void 0:I.id}`,data:{relatedItems:(u=(r=(Q=X==null?void 0:X.value)==null?void 0:Q.relatedItems)==null?void 0:r.filter(x=>x.id!==F.id))==null?void 0:u.map(x=>x.id)}})).success?(M.success(c("success")),te("update",(V=X==null?void 0:X.value)==null?void 0:V.id)):M.error(c("anErrorOccurred")),v.finish()}})},re=F=>{var p;return(p=j.value)==null?void 0:p.find(I=>I.id===F.contentModelId)},K=i(!1),L=i(null),le=i({contentModelId:null,itemId:null}),B={contentModelId:[{required:!0,message:c("fillRequired")}],itemId:[{required:!0,message:c("fillRequired")}]},E=async()=>{var F;return(F=L.value)==null||F.validate(async p=>{var I,Q,r,u,V,x,$,y,w,de;if(!p){v.start(),G.value=!0;const oe=((Q=(I=X==null?void 0:X.value)==null?void 0:I.relatedItems)==null?void 0:Q.map(k=>k.id))||[],H=await f({method:"put",url:`/content-model/items/${(r=X==null?void 0:X.value)==null?void 0:r.id}`,data:{relatedItems:[...oe,le.value.itemId]}});if(H.failure&&H.error)switch((x=(V=(u=H.error)==null?void 0:u.response)==null?void 0:V.data)==null?void 0:x.errorCode){case tt.FORM_INVALID_DATA:b((w=(y=($=H.error)==null?void 0:$.response)==null?void 0:y.data)==null?void 0:w.data);break;default:M.error(c("anErrorOccurred"))}else M.success(c("success")),te("update",(de=X==null?void 0:X.value)==null?void 0:de.id),K.value=!1;G.value=!1,v.finish()}}),!1},z=F=>ue("span",{},{default:()=>ee(F.title)}),h=F=>Le(()=>ue("span",{},{default:()=>A(F,re(F))})),P=i(!1),R=i([]),ne=i([]),m=async(F,p)=>{if(!F.length){ne.value=[];return}P.value=!0;const I=await f({url:`/content-model-items/search/${F}/${p}`});I.success&&I.result&&(ne.value=I.result.data),P.value=!1},g=Le(()=>q(R.value,ne.value,"id").filter(F=>{var p;return F.id!==((p=X==null?void 0:X.value)==null?void 0:p.id)}));return(F,p)=>{const I=be,Q=Me,r=rt,u=fe,V=at,x=Vt,$=Ct,y=Yt,w=ut,de=Tt,oe=vt,H=_t;return n(),U(ge,null,[t(w,{show:O.value,"onUpdate:show":p[2]||(p[2]=k=>O.value=k),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(c)("linkContentModelItems")},{"header-extra":l(()=>[t(r,{align:"center"},{default:l(()=>[t(Q,{size:"small",type:"primary",disabled:e(G),onClick:p[0]||(p[0]=k=>K.value=!0)},{default:l(()=>[t(I,{icon:"carbon:add-alt",class:"mr-1"}),T(" "+s(e(c)("add")),1)]),_:1},8,["disabled"]),t(Q,{size:"small",type:"error",disabled:e(G),onClick:p[1]||(p[1]=k=>O.value=!1)},{default:l(()=>[t(I,{icon:"carbon:close",class:"mr-1"}),T(" "+s(e(c)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(y,{show:e(G)},{default:l(()=>{var k,ae;return[(ae=(k=e(X))==null?void 0:k.relatedItems)!=null&&ae.length?(n(),C(x,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var ve;return[(n(!0),U(ge,null,Re((ve=e(X))==null?void 0:ve.relatedItems,W=>(n(),C(V,{key:W.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var xe;return[_("div",wi,[_("div",xi,[_("span",Ci,s(e(A)(W,re(W))),1),_("span",Ii,s(e(ee)((xe=re(W))==null?void 0:xe.title)),1)]),t(r,null,{default:l(()=>[t(Q,{size:"small",type:"error",secondary:e(Y),onClick:ye=>d(W)},{default:l(()=>[t(u,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),C(V,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t($,{description:e(c)("noLinkAdded")},{icon:l(()=>[t(u,null,{default:l(()=>[t(I,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(w,{show:e(K),"onUpdate:show":p[6]||(p[6]=k=>ze(K)?K.value=k:null),loading:e(G),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(c)("addLink"),"positive-text":e(c)("validate"),"negative-text":e(c)("cancel"),onPositiveClick:E,onNegativeClick:p[7]||(p[7]=k=>K.value=!1)},{default:l(()=>[t(H,{ref_key:"formRef",ref:L,model:e(le),rules:B,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(oe,{label:e(c)("contentModel"),path:"contentModelId"},{default:l(()=>[t(de,{value:e(le).contentModelId,"onUpdate:value":p[3]||(p[3]=k=>e(le).contentModelId=k),options:e(j),placeholder:e(c)("contentModel"),"render-label":z,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(oe,{label:e(c)("itemToLink"),path:"itemId"},{default:l(()=>[t(de,{value:e(le).itemId,"onUpdate:value":p[4]||(p[4]=k=>e(le).itemId=k),options:e(g)||[],placeholder:e(c)("itemToLink"),"render-label":k=>h(k).value,loading:e(P),disabled:!e(le).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:p[5]||(p[5]=k=>m(k,e(le).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Vi={key:0,class:"w-full flex items-center justify-between gap-4"},Ti={class:"flex items-center gap-3"},zi={key:0},Ui={class:"flex items-center justify-center h-full"},Mi=["src"],Si={class:"text-center text-dimgray text-sm"},Ai={key:1,class:"flex items-center justify-center"},Ei=Ye({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(me){const{t:a}=We(),{request:c}=Qe(),{extractItemTitle:f}=cl(),{tr:Z,displayFormErrors:ee}=Xe(),b=pt(),q=st(),A=ot(),ie=bt(me,"modelValue"),j=i(!1),Y=i(!1),D=i(!1),M=i(!1),v=i([]),te=i(0),O=i(12),G=i(1),X=Le(()=>{var I;return`/content-model/items?pageSize=${O.value}&contentModelId=${(I=ie.value)==null?void 0:I.id}`}),d=I=>{K(`${X.value}&page=${I}`)},re=I=>{O.value=I,K()},K=async(I=null,Q=!1)=>{var u,V,x,$,y;j.value=!0,A.start();const r=await c({url:I??X.value});r.success&&r.result&&(v.value=((u=r.result.data)==null?void 0:u.items)||[],te.value=((x=(V=r.result.data)==null?void 0:V.meta)==null?void 0:x.total)||0,G.value=((y=($=r.result.data)==null?void 0:$.meta)==null?void 0:y.currentPage)||1),A.finish(),j.value=!1};K(null,!0);const L=i(null),le=i({title:"",contentModelData:"",isActive:!0}),B=I=>{L.value=we.cloneDeep(I),I?le.value=we.cloneDeep(I):le.value={title:"",contentModelData:"",isActive:!0},D.value=!0},E=I=>{L.value=we.cloneDeep(I),M.value=!0},z=async I=>{await K();const Q=v.value.find(r=>r.id===I);Q&&E(Q)},h=async I=>{b.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-model/items/${I.id}`})).success?(q.success(a("success")),K()):q.error(a("anErrorOccurred"))}})},P=async I=>{var u,V,x,$,y,w,de;A.start(),Y.value=!0;const Q={title:le.value.title,contentModelData:I,isActive:le.value.isActive,contentModelId:(u=ie.value)==null?void 0:u.id},r=await c({method:L.value?"put":"post",url:L.value?`/content-model/items/${L.value.id}`:"/content-model/items",data:Q});if(r.failure&&r.error)switch(($=(x=(V=r.error)==null?void 0:V.response)==null?void 0:x.data)==null?void 0:$.errorCode){case tt.FORM_INVALID_DATA:ee((de=(w=(y=r.error)==null?void 0:y.response)==null?void 0:w.data)==null?void 0:de.data);break;default:q.error(a("anErrorOccurred"))}else q.success(a("success")),K(`${X.value}&page=${G.value}`),D.value=!1;Y.value=!1,A.finish()},R=i(!1),ne=i(ct()),m=i({}),g=Le(()=>{let I=0;for(const Q in m.value)m.value[Q]&&I++;return I});function F(){m.value={},K()}const p=async()=>(g.value?b.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[g.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{Y.value=!0,A.start();for(const I in m.value)m.value[I]&&await c({url:`/content-model/items/${I}`,method:"delete"});A.finish(),Y.value=!1,q.success(a("success")),m.value={},K(null,!0)}}):q.warning(a("noItemSelected")),!1);return Mt("currentEditItem",L),(I,Q)=>{const r=Gt,u=be,V=fe,x=Me,$=rt,y=$t,w=Da,de=Cl,oe=Lt,H=at,k=Dt,ae=Pt,ve=wt,W=ol,xe=Yt,ye=Ct;return n(),U(ge,null,[t(y,{to:"#alt-action"},{default:l(()=>[t($,{align:"center"},{default:l(()=>[t(r,{checked:e(R),"onUpdate:checked":[Q[0]||(Q[0]=ce=>ze(R)?R.value=ce:null),Q[1]||(Q[1]=ce=>{for(const qe of e(v))qe.id&&(e(m)[qe.id]=ce);ne.value=("uuidv4"in I?I.uuidv4:e(ct))()})],disabled:!e(v).length},{default:l(()=>[T(s(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(x,{type:"primary",onClick:Q[2]||(Q[2]=ce=>B(null))},{icon:l(()=>[t(V,{size:"18"},{default:l(()=>[t(u,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(w,{class:"mt-2 mb-5",onBack:Q[3]||(Q[3]=ce=>ie.value=null)},{title:l(()=>{var ce;return[T(s(e(Z)((ce=ie.value)==null?void 0:ce.title)),1)]}),back:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(g)>0?(n(),U("section",Vi,[_("span",null,s(e(a)("nbItemsSelected",[e(g)])),1),_("section",Ti,[t(x,{type:"error",size:"small",onClick:p},{icon:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("delete")),1)]),_:1}),t(x,{type:"warning",size:"small",onClick:F},{icon:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("cancelSelection")),1)]),_:1})])])):he("",!0)]),_:1}),e(v).length&&!e(j)?(n(),U("section",zi,[t(ve,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),U(ge,null,Re(e(v),(ce,qe)=>(n(),C(ae,{key:qe},{default:l(()=>[t(k,{name:"slide-fade",appear:""},{default:l(()=>[t(H,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var De;return[_("div",Ui,[_("img",{src:((De=ie.value)==null?void 0:De.imageUrl)??e(gi),class:"w-full h-[200px] object-cover"},null,8,Mi)])]}),header:l(()=>[_("div",Si,[t(de,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[ce.id?(n(),C(r,{key:e(ne),checked:e(m)[ce.id],"onUpdate:checked":De=>e(m)[ce.id]=De,class:"mr-1"},null,8,["checked","onUpdate:checked"])):he("",!0),T(" "+s(e(f)(ce,ie.value)),1)]),_:2},1024)])]),action:l(()=>[t($,{justify:"space-between",align:"center"},{default:l(()=>[t(oe,{bordered:!1,type:ce.isActive?"success":"error"},{default:l(()=>[T(s(ce.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t($,null,{default:l(()=>[t(x,{ternary:"",circle:"",title:e(a)("edit"),onClick:De=>B(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(x,{ternary:"",circle:"",title:e(a)("links"),onClick:De=>E(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(x,{ternary:"",circle:"",title:e(a)("delete"),onClick:De=>h(ce)},{icon:l(()=>[t(V,null,{default:l(()=>[t(u,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(W,{page:e(G),"onUpdate:page":[Q[4]||(Q[4]=ce=>ze(G)?G.value=ce:null),d],class:"mt-10 justify-center","show-size-picker":"","page-size":e(O),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(te)/e(O)),"onUpdate:pageSize":re},{prefix:l(()=>[T(s(`${e(te)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(j)?(n(),U("section",Ai,[t(xe,{size:"medium"})])):(n(),C(ye,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(ki,{show:e(D),"onUpdate:show":Q[5]||(Q[5]=ce=>ze(D)?D.value=ce:null),data:e(le),"onUpdate:data":Q[6]||(Q[6]=ce=>ze(le)?le.value=ce:null),"content-model":ie.value,"submit-data":P},null,8,["show","data","content-model"]),t($i,{show:e(M),"onUpdate:show":Q[7]||(Q[7]=ce=>ze(M)?M.value=ce:null),onUpdate:z},null,8,["show"])],64)}}}),Di={key:2},Li={class:"flex items-center"},Pi={class:"text-base"},Ni={class:"mt-4"},Oi="previews",Ri=Ye({__name:"index",setup(me){const{t:a}=We(),{request:c}=Qe(),{tr:f,pickByTheme:Z,displayFormErrors:ee,fileUrl:b,isInDevMode:q,formatKey:A}=Xe(),{isLightTheme:ie}=Ke(ht()),{contentModels:j}=Ke(Je()),{loadContentModels:Y}=Je(),D=ot(),M=st(),v=pt(),te=i(!1),O=i(!1),G=gt("appConfig"),X=async()=>{D.start(),te.value=!0,await Y(),te.value=!1,D.finish()};X();const d=i(12),re=i(1),K=V=>{d.value=V},L={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},le=i(!1),B=i(null),E=i(L),z={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},h=i(null),P=V=>{h.value=we.cloneDeep(V),E.value=we.cloneDeep(V||L),le.value=!0},R=async()=>{var V;return(V=B.value)==null||V.validate(async x=>{var $,y,w,de,oe,H;if(!x){D.start(),O.value=!0;const k={name:E.value.name,title:E.value.title,image:E.value.image,description:E.value.description,titleFieldName:E.value.titleFieldName,hasPermalink:E.value.hasPermalink},ae=await c({method:h.value?"put":"post",url:h.value?`/content-models/${h.value.id}`:"/content-models",data:k});if(ae.failure&&ae.error)switch((w=(y=($=ae.error)==null?void 0:$.response)==null?void 0:y.data)==null?void 0:w.errorCode){case tt.FORM_INVALID_DATA:ee((H=(oe=(de=ae.error)==null?void 0:de.response)==null?void 0:oe.data)==null?void 0:H.data);break;default:M.error(a("anErrorOccurred"))}else M.success(a("success")),X(),le.value=!1;O.value=!1,D.finish()}}),!1},ne=async V=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await c({method:"delete",url:`/content-models/${V.id}`})).success?(M.success(a("success")),X()):M.error(a("anErrorOccurred"))}})},m=i(null),g=i(!1),F=async V=>{var $;O.value=!0,D.start();const x=await c({url:`/content-models/${($=m.value)==null?void 0:$.id}`,method:"put",data:{dataStructure:V}});x.success&&x.result?(M.success(a("success")),X(),p(x.result.data)):M.error(a("anErrorOccurred")),O.value=!1,D.finish()},p=V=>{m.value=V,g.value=!0},I=i(!1),Q=async V=>{E.value.image=V,I.value=!1},r=()=>{E.value.image=""},u=al("content-models-management",()=>({itemsContentModel:i(null)}))();return xt(()=>E.value.title,V=>{h.value||E.value.name.length<=21&&(E.value.name=Ka(f(V),{trim:!0,lower:!0,strict:!0}))}),(V,x)=>{var $e,pe,Ee;const $=be,y=fe,w=Me,de=$t,oe=rt,H=Ut,k=at,ae=ol,ve=Ct,W=Dt,xe=kt,ye=vt,ce=Ze,qe=Pt,De=qa,Ce=Ft,J=wt,S=Gt,Ie=_t,N=ut,se=Kt;return n(),U(ge,null,[e(u).itemsContentModel?he("",!0):(n(),C(de,{key:0,to:"#alt-action"},{default:l(()=>[e(j)&&e(j).length?(n(),C(w,{key:0,type:"primary",onClick:x[0]||(x[0]=Ve=>P(null))},{icon:l(()=>[t(y,{size:"18"},{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addContentModel")),1)]),_:1})):he("",!0)]),_:1})),e(u).itemsContentModel?(n(),C(Ei,{key:1,modelValue:e(u).itemsContentModel,"onUpdate:modelValue":x[1]||(x[1]=Ve=>e(u).itemsContentModel=Ve)},null,8,["modelValue"])):(n(),U("section",Di,[t(W,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(j)&&e(j).length?(n(),U(ge,{key:0},[(n(!0),U(ge,null,Re(e(j).slice((e(re)-1)*e(d),e(re)*e(d)),Ve=>(n(),C(k,{key:Ve.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[_("div",Li,[e(q)?(n(),C(oe,{key:0},{default:l(()=>[t(w,{size:"small",type:"primary",secondary:e(ie),onClick:it(Ne=>p(Ve),["stop"])},{default:l(()=>[t(y,{class:"mr-1"},{default:l(()=>[t($,{icon:"carbon:data-1"})]),_:1}),T(" "+s(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"primary",secondary:e(ie),onClick:it(Ne=>P(Ve),["stop"])},{default:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(ie),onClick:it(Ne=>ne(Ve),["stop"])},{default:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):he("",!0),e(q)?(n(),C(H,{key:1,vertical:"",class:He(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):he("",!0),_("span",Pi,s(e(f)(Ve.title)),1)])]),"header-extra":l(()=>[t(w,{size:"small",type:"primary",secondary:e(ie),onClick:it(Ne=>e(u).itemsContentModel=Ve,["stop"])},{icon:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(ae,{page:e(re),"onUpdate:page":x[2]||(x[2]=Ve=>ze(re)?re.value=Ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(d),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(j).length/e(d)),"onUpdate:pageSize":K},{prefix:l(()=>[T(s(`${e(j).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(k,{key:1,size:"large",class:He(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ve,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",Ni,[t(w,{size:"small",onClick:x[3]||(x[3]=Ve=>P(null))},{icon:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(N,{show:e(le),"onUpdate:show":x[11]||(x[11]=Ve=>ze(le)?le.value=Ve:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(h)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:R,onNegativeClick:x[12]||(x[12]=Ve=>le.value=!1)},{default:l(()=>[t(Ie,{ref_key:"formRef",ref:B,model:e(E),rules:z,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ye,{"show-label":!1,path:"title"},{default:l(()=>[t(xe,{modelValue:e(E).title,"onUpdate:modelValue":x[4]||(x[4]=Ve=>e(E).title=Ve),placeholder:e(a)("title"),class:"w-full",sync:""},{label:l(()=>[T(s(e(a)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(ye,{"show-label":!1,path:"description"},{default:l(()=>[t(xe,{modelValue:e(E).description,"onUpdate:modelValue":x[5]||(x[5]=Ve=>e(E).description=Ve),placeholder:e(a)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:l(()=>[T(s(e(a)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(J,{"x-gap":"12",span:24},{default:l(()=>[t(qe,{span:14},{default:l(()=>[t(ye,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(ce,{value:e(E).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":x[6]||(x[6]=Ve=>e(E).name=e(A)(Ve))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(ye,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(ce,{value:e(E).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":x[7]||(x[7]=Ve=>e(E).titleFieldName=e(A)(Ve))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(Ce,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(oe,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(De,{class:"cursor-pointer","object-fit":"cover",style:Fe("border: 1px dashed "+e(Z)("green","white")),size:150,src:e(b)(e(E).image||""),onClick:x[8]||(x[8]=Ve=>I.value=!0)},{default:l(()=>[e(E).image?he("",!0):(n(),C(y,{key:0,size:64},{default:l(()=>[t($,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(E).image?(n(),C(w,{key:0,quaternary:"",onClick:x[9]||(x[9]=Ve=>r())},{icon:l(()=>[t(y,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(ye,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(S,{checked:e(E).hasPermalink,"onUpdate:checked":x[10]||(x[10]=Ve=>e(E).hasPermalink=Ve)},{default:l(()=>[T(s(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(se,{show:e(I),"onUpdate:show":x[13]||(x[13]=Ve=>ze(I)?I.value=Ve:null),title:e(a)("selectImage"),"upload-config":{folder:Oi,limit:0,maxSize:0,baseUrl:(($e=e(G))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:Q},null,8,["show","title","upload-config"]),t(Wa,{show:e(g),"onUpdate:show":x[14]||(x[14]=Ve=>ze(g)?g.value=Ve:null),title:e(f)((pe=e(m))==null?void 0:pe.title),"raw-data-structure":(Ee=e(m))==null?void 0:Ee.dataStructure,"update-data-structure":F},null,8,["show","title","raw-data-structure"])]))],64)}}});var St=(me=>(me.NEWS_TAG="news-tag",me.NEWS_CATEGORY="news-category",me.NEWS_ARTICLE="news-article",me.CONTENT_MODEL="content-model",me))(St||{});const qi={class:"text-base font-bold"},Fi={class:"text-sm"},ji={class:"text-xs text-slate-400"},Bi={class:"text-xs text-slate-400"},Ki={class:"text-xs text-slate-400"},Yi={class:"text-sm"},Gi={class:"text-xs text-slate-400"},Hi={class:"text-xs text-slate-400"},Wi={class:"text-xs text-slate-400"},Ji={class:"text-sm"},Xi={class:"text-xs text-slate-400"},Zi={class:"text-xs text-slate-400"},Qi={class:"text-xs text-slate-400"},er={class:"text-base font-bold"},tr={class:"text-sm"},lr={class:"text-xs text-slate-400"},ar={class:"text-xs text-slate-400"},nr={class:"text-xs text-slate-400"},sr=Ye({__name:"index",setup(me){const{t:a}=We(),{tr:c}=Xe(),{request:f}=Qe(),{contentModels:Z,pages:ee}=Ke(Je()),{loadContentModels:b,loadPages:q}=Je(),A=st(),ie=ot(),j=[{pathPrefix:"/news/article",contentType:St.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:St.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:St.NEWS_TAG,contentParam:"slug",pageId:null}],Y=i(!1),D=i([]),M=i(j),v=i(),te=Le(()=>Z.value.filter(K=>K.hasPermalink)),O=async(K=!1)=>{ie.start(),Y.value=!0,K&&(await b(),await q());const L=await f({url:"/permalinks"});if(L.success&&L.result){D.value=L.result.data,M.value=we.cloneDeep(j);for(let le=0;le<te.value.length;le++)M.value.push({pathPrefix:`/${te.value[le].slug}`,contentType:St.CONTENT_MODEL,contentParam:"id",contentId:te.value[le].id,pageId:null});for(let le=0;le<M.value.length;le++)switch(M.value[le].contentType){case St.NEWS_ARTICLE:case St.NEWS_CATEGORY:case St.NEWS_TAG:{const B=D.value.find(E=>E.contentType===M.value[le].contentType);B&&(M.value[le].pathPrefix=B.pathPrefix,M.value[le].contentParam=B.contentParam,M.value[le].pageId=B.pageId,M.value[le].permalinkId=B.id)}break;case St.CONTENT_MODEL:{const B=D.value.find(E=>E.contentType===M.value[le].contentType&&E.contentId===M.value[le].contentId);B&&(M.value[le].pathPrefix=B.pathPrefix,M.value[le].contentParam=B.contentParam,M.value[le].pageId=B.pageId,M.value[le].permalinkId=B.id)}break}v.value=we.cloneDeep(M.value)}Y.value=!1,ie.finish()};O(!0);const G=async()=>{ie.start(),Y.value=!0,(await f({method:"put",url:"/permalinks",data:M.value})).success&&(A.success(a("success")),O()),Y.value=!1,ie.finish()},X=Le(()=>we.isEqual(M.value,v.value)),d=K=>ue("span",{},{default:()=>c(K.title)}),re=K=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(K);return(K,L)=>{const le=be,B=fe,E=Me,z=$t,h=Ze,P=Pt,R=Tt,ne=wt,m=at,g=nl,F=sl,p=Ut;return n(),U(ge,null,[t(z,{to:"#alt-action"},{default:l(()=>[t(E,{type:"primary",loading:e(Y),disabled:e(X),onClick:L[0]||(L[0]=I=>G())},{icon:l(()=>[t(B,null,{default:l(()=>[t(le,{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(m,{embedded:"",size:"small"},{default:l(()=>[t(F,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:I})=>[t(B,null,{default:l(()=>[I?(n(),C(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[10]||(L[10]=[_("span",null,null,-1)])),default:l(()=>[t(g,{name:"1"},{header:l(()=>[_("span",qi,s(e(a)("news")),1)]),default:l(()=>[t(m,{size:"small"},{header:l(()=>[_("span",Fi,s(e(a)("articles")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(P,{span:"10"},{default:l(()=>[_("span",ji,s(e(a)("pathPrefix")),1),t(h,{value:e(M)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=I=>e(M)[0].pathPrefix=I),"allow-input":re,size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Bi,s(e(a)("contentParam")),1),t(h,{value:e(M)[0].contentParam,"onUpdate:value":L[2]||(L[2]=I=>e(M)[0].contentParam=I),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Ki,s(e(a)("contentPage")),1),t(R,{value:e(M)[0].pageId,"onUpdate:value":L[3]||(L[3]=I=>e(M)[0].pageId=I),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":d,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(m,{size:"small"},{header:l(()=>[_("span",Yi,s(e(a)("categories")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(P,{span:"10"},{default:l(()=>[_("span",Gi,s(e(a)("pathPrefix")),1),t(h,{value:e(M)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=I=>e(M)[1].pathPrefix=I),"allow-input":re,size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Hi,s(e(a)("contentParam")),1),t(h,{value:e(M)[1].contentParam,"onUpdate:value":L[5]||(L[5]=I=>e(M)[1].contentParam=I),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Wi,s(e(a)("contentPage")),1),t(R,{value:e(M)[1].pageId,"onUpdate:value":L[6]||(L[6]=I=>e(M)[1].pageId=I),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":d,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(m,{size:"small"},{header:l(()=>[_("span",Ji,s(e(a)("tags")),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(P,{span:"10"},{default:l(()=>[_("span",Xi,s(e(a)("pathPrefix")),1),t(h,{value:e(M)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=I=>e(M)[2].pathPrefix=I),"allow-input":re,size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Zi,s(e(a)("contentParam")),1),t(h,{value:e(M)[2].contentParam,"onUpdate:value":L[8]||(L[8]=I=>e(M)[2].contentParam=I),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(P,{span:"7"},{default:l(()=>[_("span",Qi,s(e(a)("contentPage")),1),t(R,{value:e(M)[2].pageId,"onUpdate:value":L[9]||(L[9]=I=>e(M)[2].pageId=I),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":d,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(p,{class:"!my-2"}),e(te).length&&e(M).length>3?(n(),C(m,{key:0,embedded:"",size:"small"},{default:l(()=>[t(F,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:I})=>[t(B,null,{default:l(()=>[I?(n(),C(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[11]||(L[11]=[_("span",null,null,-1)])),default:l(()=>[t(g,{name:"1"},{header:l(()=>[_("span",er,s(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),U(ge,null,Re(e(te),(I,Q)=>(n(),C(m,{key:I.id,size:"small"},{header:l(()=>[_("span",tr,s(e(c)(I.title)),1)]),default:l(()=>[t(ne,{cols:"24","x-gap":"12"},{default:l(()=>[t(P,{span:"10"},{default:l(()=>[_("span",lr,s(e(a)("pathPrefix")),1),t(h,{value:e(M)[Q+3].pathPrefix,"onUpdate:value":r=>e(M)[Q+3].pathPrefix=r,"allow-input":re,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(P,{span:"7"},{default:l(()=>[_("span",ar,s(e(a)("contentParam")),1),t(h,{value:e(M)[Q+3].contentParam,"onUpdate:value":r=>e(M)[Q+3].contentParam=r,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(P,{span:"7"},{default:l(()=>[_("span",nr,s(e(a)("contentPage")),1),t(R,{value:e(M)[Q+3].pageId,"onUpdate:value":r=>e(M)[Q+3].pageId=r,options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":d,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):he("",!0)],64)}}}),or={class:"w-full"},ir=Ye({__name:"Campaign",setup(me){const a=ot(),c=st(),f=pt(),Z=Sa(),{displayFormErrors:ee,ckEditorToolbarItems:b}=Xe(),{request:q}=Qe(),{t:A,locale:ie}=We(),j=i(!1),Y=i([]),D=i([]),M=i([]),v=i([]),te=i(""),O=i(),G={pageSize:12,prefix:({itemCount:m})=>ue("div",{class:"font-bold"},{default:()=>`${A("total")}: ${m}`})},X=[{title:A("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(m){return ue("div",{},{default:()=>m.title})}},{title:A("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(m){return ue("small",{},{default:()=>m.subject})}},{title:A("numberOfRecipients"),key:"recipients",width:200,render(m){return ue("div",{},{default:()=>m.recipients.length})},sortOrder:!1,sorter:"default"},{title:A("updateAt"),key:"updatedAt",width:150,render(m){return ue("div",{},{default:()=>Et(m.updatedAt,{locale:ie.value,outPattern:"DD MMMM YYYY"})})}},{title:A("createdAt"),key:"createdAt",width:150,render(m){return ue("div",{},{default:()=>Et(m.createdAt,{locale:ie.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Ze,{ref:O,placeholder:A("search"),value:te.value,onInput:m=>{te.value=m}},{suffix:()=>ue(fe,{},{default:()=>ue(be,{icon:"carbon:search"})})}),key:"actions",width:175,render(m){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Me,{size:"small",type:"primary",title:A("history"),onClick:()=>{B.value=m,le.value=!0},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"mdi:history"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"info",title:A("launchCampaign"),onClick:()=>{const g=f.info({title:A("launchCampaign"),content:A("confirmLaunchCampaign",[m.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:A("yes"),negativeText:A("cancel"),onPositiveClick:async()=>{var Q,r,u,V,x,$,y;g.loading=!0;const F=await q({url:"/email",method:"post",data:{title:m.title,subject:m.subject,content:m.content,recipients:m.recipients.filter(w=>el.isEmail(w)),tags:[]}}),p=(Q=Z.getSettingValue("phone","string"))==null?void 0:Q.split(",")[0],I=await q({url:"/sms",method:"post",data:{from:p.replace(/\s+/g,""),content:m.rawContent,recipients:m.recipients.filter(w=>!el.isEmail(w))}});if(F.failure&&F.error)switch((V=(u=(r=F.error)==null?void 0:r.response)==null?void 0:u.data)==null?void 0:V.errorCode){case tt.FORM_INVALID_DATA:c.error(A("invalidData"));break;default:c.error(A("sendingFailed"))}else if(I.failure&&I.error)switch((y=($=(x=I.error)==null?void 0:x.response)==null?void 0:$.data)==null?void 0:y.errorCode){case tt.FORM_INVALID_DATA:c.error(A("invalidData"));break;default:c.error(A("sendingFailed"))}else{const w=m.history||[];w.push({id:ct(),date:ln(new Date,{locale:ie.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+F.result.message+" Phone: "+I.result.message});const de=await q({method:"put",url:`/newsletter/campaigns/${m.id}`,data:{history:w}});de.success&&de.result.data?(c.success(A("success")),re()):c.error(A("anErrorOccurred"))}g.loading=!1}})},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"mdi:send"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"warning",title:A("edit"),onClick:()=>{P(m)},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Me,{size:"small",type:"error",title:A("delete"),onClick:()=>{f.warning({title:A("confirm"),content:A("confirmDeleteCampaign"),positiveText:A("yes"),negativeText:A("no"),onPositiveClick:async()=>{(await q({method:"delete",url:`/newsletter/campaigns/${m.id}`})).success?(c.success(A("success")),re()):c.error(A("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],d=Le(()=>{if(!te.value)return v.value;const m=v.value.filter(g=>g.title.toLowerCase().includes(te.value.toLowerCase())||g.subject.toLowerCase().includes(te.value.toLowerCase()));return O.value&&O.value.focus(),m}),re=async(m=!1)=>{j.value=!0;const g=await q({url:"/newsletter/campaigns"});if(g.success&&g.result&&(v.value=g.result.data),m){const F=await q({url:"/newsletter/emails"});F.success&&F.result&&(Y.value=F.result.data);const p=await q({url:"/newsletter/phones"});p.success&&p.result&&(D.value=p.result.data),M.value=[...Y.value.map(I=>({recipient:I.email,type:"email"})),...D.value.map(I=>({recipient:I.phone,type:"phone"}))]}j.value=!1};re(!0);const K=i(!1),L=i(!1),le=i(!1),B=i(null),E=i(null),z=i({title:"",subject:"",content:"",rawContent:"",recipients:[]}),h={title:[{required:!0,message:A("fillRequired")}],subject:[{required:!0,message:A("fillRequired")}],content:[{required:!0,message:A("fillRequired")}],rawContent:[{required:!0,message:A("fillRequired")}],recipients:[{required:!0,message:A("fillRequired")}]},P=m=>{B.value=we.cloneDeep(m),m?z.value=we.cloneDeep(m):z.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},L.value=!0},R=async()=>{var m;return(m=E.value)==null||m.validate(async g=>{var F,p,I,Q,r,u;if(!g)if(B.value)if(B.value.title!==z.value.title&&v.value.findIndex(V=>V.title==z.value.title)>-1)c.error(A("sameCampaignTitleMessage"));else{a.start(),K.value=!0;const V={title:z.value.title,subject:z.value.subject,content:z.value.content,rawContent:z.value.rawContent,recipients:z.value.recipients},x=await q({method:"put",url:`/newsletter/campaigns/${B.value.id}`,data:V});x.success&&x.result.data&&(c.success(A("success")),re()),K.value=!1,a.finish(),L.value=!1}else if(v.value.findIndex(V=>V.title==z.value.title)>-1)c.error(A("sameCampaignTitleMessage"));else{a.start(),K.value=!0;const V={title:z.value.title,subject:z.value.subject,content:z.value.content,rawContent:z.value.rawContent,recipients:z.value.recipients},x=await q({method:"post",url:"/newsletter/campaigns",data:V});if(x.failure&&x.error)switch((I=(p=(F=x.error)==null?void 0:F.response)==null?void 0:p.data)==null?void 0:I.errorCode){case tt.FORM_INVALID_DATA:ee((u=(r=(Q=x.error)==null?void 0:Q.response)==null?void 0:r.data)==null?void 0:u.data);break;default:c.error(A("anErrorOccurred"))}else c.success(A("success")),re();K.value=!1,a.finish(),L.value=!1}}),!1},ne=(m,g)=>we.isEqual(m.slice().sort(),g.slice().sort());return(m,g)=>{const F=$t,p=wl,I=bl,Q=vt,r=Ba,u=Gt,V=Tt,x=_t,$=ut,y=cn,w=Pa,de=Na,oe=Vt,H=Ct;return n(),U(ge,null,[t(F,{to:"#alt-action"},{default:l(()=>[t(e(Me),{type:"primary",onClick:g[0]||(g[0]=k=>P(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[T(" "+s(e(A)("addCampaign")),1)]),_:1})]),_:1}),t(I,null,{default:l(()=>[t(p,{columns:X,data:e(d),pagination:G,loading:e(j),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t($,{show:e(L),"onUpdate:show":g[9]||(g[9]=k=>ze(L)?L.value=k:null),loading:e(K),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(B)?e(A)("editCampaign"):e(A)("addCampaign"),"positive-text":e(A)("validate"),"negative-text":e(A)("cancel"),onPositiveClick:R,onNegativeClick:g[10]||(g[10]=k=>L.value=!1)},{default:l(()=>[t(x,{ref_key:"formRef",ref:E,class:"mt-5",model:e(z),rules:h,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Q,{label:e(A)("title"),path:"title"},{default:l(()=>[t(e(Ze),{value:e(z).title,"onUpdate:value":g[1]||(g[1]=k=>e(z).title=k),placeholder:e(A)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(A)("subject"),path:"subject"},{default:l(()=>[t(e(Ze),{value:e(z).subject,"onUpdate:value":g[2]||(g[2]=k=>e(z).subject=k),placeholder:e(A)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(A)("content"),path:"content"},{default:l(()=>[_("div",or,[t(r,{modelValue:e(z).content,"onUpdate:modelValue":g[3]||(g[3]=k=>e(z).content=k),"toolbar-items":e(b),placeholder:e(A)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(Q,{label:e(A)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Ze),{value:e(z).rawContent,"onUpdate:value":g[4]||(g[4]=k=>e(z).rawContent=k),placeholder:e(A)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(A)("recipients"),path:"recipients"},{default:l(()=>[t(V,{value:e(z).recipients,"onUpdate:value":g[8]||(g[8]=k=>e(z).recipients=k),options:e(M),placeholder:e(A)("recipients"),loading:e(j),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(u,{size:"large",class:"w-full","default-checked":e(M).length&&ne(e(z).recipients,e(M).filter(k=>k.type=="email").map(k=>k.recipient)),"onUpdate:checked":g[5]||(g[5]=k=>{k?e(z).recipients=e(M).filter(ae=>ae.type=="email").map(ae=>ae.recipient):e(z).recipients=e(z).recipients.filter(ae=>!("_v"in m?m._v:e(el)).isEmail(ae))})},{default:l(()=>[T(s(e(A)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),g[12]||(g[12]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(M).length&&ne(e(z).recipients,e(M).filter(k=>k.type=="phone").map(k=>k.recipient)),"onUpdate:checked":g[6]||(g[6]=k=>{k?e(z).recipients=e(M).filter(ae=>ae.type=="phone").map(ae=>ae.recipient):e(z).recipients=e(z).recipients.filter(ae=>("_v"in m?m._v:e(el)).isEmail(ae))})},{default:l(()=>[T(s(e(A)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),g[13]||(g[13]=_("div",{class:"h-2"},null,-1)),t(u,{size:"large",class:"w-full","default-checked":e(M).length&&e(z).recipients.length===e(M).length,"onUpdate:checked":g[7]||(g[7]=k=>{k?e(z).recipients=e(M).filter(ae=>ae.recipient).map(ae=>ae.recipient):e(z).recipients=[]})},{default:l(()=>[T(s(e(A)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t($,{show:e(le),"onUpdate:show":g[11]||(g[11]=k=>ze(le)?le.value=k:null),loading:e(K),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(A)("history")},{default:l(()=>{var k,ae;return[(ae=(k=e(B))==null?void 0:k.history)!=null&&ae.length?(n(),C(oe,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(de,{hoverable:""},{default:l(()=>{var ve;return[(n(!0),U(ge,null,Re((ve=e(B))==null?void 0:ve.history.slice().reverse(),W=>(n(),C(w,{key:W.id},{default:l(()=>[t(y,{title:W.date,"content-style":"margin-top: 10px;"},{default:l(()=>[T(s(W.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),C(H,{key:1,description:e(A)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),rr={id:"header-btn"},ur={key:1,id:"alt-action"},dr={key:"contact-info"},cr={class:"text-xs"},pr={class:"text-xs"},fr={class:"text-xs"},mr={class:"text-xs"},vr={class:"text-xs"},_r={class:"text-xs"},yr={class:"text-xs"},gr={class:"flex items-center gap-2 w-full"},br={key:"appearance"},hr={class:"text-sm"},kr={class:"text-sm"},wr={class:"flex flex-col items-center justify-center text-gray-400"},xr={class:"text-sm"},Cr={class:"flex flex-col items-center justify-center text-gray-400"},Ir={class:"text-sm"},$r={class:"flex flex-col items-center justify-center text-gray-400"},Vr={class:"text-sm"},Tr={class:"flex flex-col items-center justify-center text-gray-400"},zr={class:"text-sm"},Ur={class:"text-sm"},Mr={class:"flex flex-col items-center justify-center text-gray-400"},Sr={class:"text-sm"},Ar={class:"flex flex-col items-center justify-center text-gray-400"},Er={class:"text-sm"},Dr={class:"flex flex-col items-center justify-center text-gray-400"},Lr={class:"text-sm"},Pr={class:"flex flex-col items-center justify-center text-gray-400"},Nr={class:"text-sm"},Or={class:"text-sm"},Rr={class:"flex flex-col items-center justify-center text-gray-400"},qr={class:"text-sm"},Fr={class:"flex flex-col items-center justify-center text-gray-400"},jr={class:"text-sm"},Br={class:"flex items-center justify-between"},Kr={class:"font-bold"},Yr={class:"flex items-center"},Gr={class:"flex items-center justify-between"},Hr={class:"font-bold"},Wr={class:"flex items-center"},Jr={class:"flex items-center justify-between"},Xr={class:"font-bold"},Zr={class:"flex items-center"},Qr={key:"social-networks"},eu={class:"text-xs"},tu={key:"newsletter-email"},lu={key:"newsletter-phone"},au={key:"newsletter-campaign"},nu={key:"ads"},su={key:"videos"},ou={key:"content-models"},iu={key:"menus"},ru={key:"content-permalinks"},uu={key:"page-sections"},du=Ye({name:an.CONTENT_MANAGEMENT.NAME}),cu=Ye({...du,setup(me){zl(J=>({"06bd801f":e(Y)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],c=J=>a.includes(J),{t:f}=We(),Z=xn(),ee=pt(),b=st(),q=ot(),{request:A}=Qe(),{displayFormErrors:ie,appPrimaryColor:j,appSecondaryColor:Y,pickByTheme:D,fileUrl:M,isLgScreen:v,isMdScreen:te,isSmScreen:O,isXlScreen:G,is2XlScreen:X,tr:d}=Xe(),re=ht(),K=Sa(),{pages:L}=Ke(Je()),{loadPages:le,loadSections:B}=Je(),E=gt("appConfig"),z=i(!1),h=i({name:"",icon:"",adminIcon:"",oneColorIcon:"",oneColorAdminIcon:"",logo:"",adminLogo:"",oneColorLogo:"",oneColorAdminLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),P=i(h.value),R=al("content-management",()=>({currentMenuItemKey:i("contact-info")}))(),ne=(J,S)=>()=>ue(fe,{color:R.currentMenuItemKey==S?"white":""},{default:()=>ue(be,{icon:J})}),m=(J,S)=>()=>ue("span",{class:`${R.currentMenuItemKey==S?"text-white":""}`,id:we.camelCase(S)},{default:()=>J}),g=Le(()=>{const J=[{label:m(f("contactInfo"),"contact-info"),key:"contact-info",icon:ne("carbon:identification","contact-info")},{label:m(f("appearance"),"appearance"),key:"appearance",icon:ne("carbon:color-palette","appearance")},{label:m(f("socialNetworks"),"social-networks"),key:"social-networks",icon:ne("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:m(f("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ne("carbon:at","newsletter-email")},{label:m(f("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ne("carbon:phone","newsletter-phone")},{label:m(f("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ne("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:m(f("ads"),"ads"),key:"ads",icon:ne("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:m(f("videos"),"videos"),key:"videos",icon:ne("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:m(f("menusManagement"),"menus"),key:"menus",icon:ne("carbon:menu","menus")},{label:m(f("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ne("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:m(f("contentModels"),"content-models"),key:"content-models",icon:ne("carbon:model-alt","content-models")},{label:m(f("pageSections"),"page-sections"),key:"page-sections",icon:ne("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const S of L.value)J.push({label:m(`${f("page")} ${d(S.title)}`,`${S.slug}-page`),key:`${S.slug}-page`,icon:ne("carbon:document",`${S.slug}-page`)});return J.push({key:"divider",type:"divider"},{label:m(f("addPage"),"add-new-page"),key:"add-new-page",icon:ne("carbon:add-alt","add-new-page")}),J}),F=Le(()=>we.isEqual(h.value,P.value)),p=Le(()=>re.contentLayoutSize.height-200),I=Le(()=>re.isLightTheme?"light":"dark"),Q=i(null),r={email:[{required:!1,message:f("fillRequired")},{trigger:["input"],validator(J,S){return S&&!el.isEmail(S)?new Error(f("invalidEmail")):!0}}]},u=i();xt(()=>u.value,J=>{h.value.additionalInfo=JSON.stringify(J||"[]")},{deep:!0});const V=i(null),x={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],y=i("logos"),w=i(!1),de=async J=>{switch(y.value){case"logos":h.value.logo=J;break;case"icons":h.value.icon=J;break;case"admin-logos":h.value.adminLogo=J;break;case"admin-icons":h.value.adminIcon=J;break;case"monochrome-logos":h.value.oneColorLogo=J;break;case"monochrome-icons":h.value.oneColorIcon=J;break;case"monochrome-admin-logos":h.value.oneColorAdminLogo=J;break;case"monochrome-admin-icons":h.value.oneColorAdminIcon=J;break;case"dark-backgrounds":h.value.adminAuthDarkBg=J;break;case"light-backgrounds":h.value.adminAuthLightBg=J;break}w.value=!1},oe={name:"",title:"",content:"",slug:""},H=i(!1),k=i(null),ae=i(oe),ve={title:[{required:!0,message:f("fillRequired")}]},W=i(null),xe=J=>{W.value=we.cloneDeep(J),ae.value=we.cloneDeep(J||oe),H.value=!0},ye=async()=>{var J;return(J=k.value)==null||J.validate(async S=>{var Ie,N,se,$e,pe,Ee,Ve;if(!S){q.start(),z.value=!0;const Ne={title:ae.value.title};W.value||(Ne.name=we.startCase(we.camelCase(d(ae.value.title))).replace(/\s+/g,""));const Pe=await A({method:W.value?"put":"post",url:W.value?`/pages/${W.value.slug}`:"/pages",data:Ne});if(Pe.failure&&Pe.error)switch((se=(N=(Ie=Pe.error)==null?void 0:Ie.response)==null?void 0:N.data)==null?void 0:se.errorCode){case tt.FORM_INVALID_DATA:ie((Ee=(pe=($e=Pe.error)==null?void 0:$e.response)==null?void 0:pe.data)==null?void 0:Ee.data);break;default:b.error(f("anErrorOccurred"))}else b.success(f("success")),le(),R.currentMenuItemKey=`${(Ve=Pe.result.data)==null?void 0:Ve.slug}-page`,H.value=!1;z.value=!1,q.finish()}}),!1},ce=async(J=!1)=>{var S;q.start(),z.value=!0,le(),J&&B(),await K.loadInformation(),(S=K.items)==null||S.forEach(Ie=>{h.value[Ie.key]!=null&&(h.value[Ie.key]=Ie.value)}),P.value=we.cloneDeep(h.value);try{u.value=JSON.parse(h.value.additionalInfo||"[]")}catch{u.value=[]}z.value=!1,q.finish()};ce(!0),Sl(()=>{Z.params.key&&c(Z.params.key)&&(R.currentMenuItemKey=Z.params.key)});const qe=async()=>{z.value=!0;const J=await A({url:"/app-information",method:"put",data:h.value});J.success&&J.result?b.success(f("success")):b.error(f("unableToUpdateSettings")),await ce()},De=["contact-info","appearance","social-networks"];xt(()=>R.currentMenuItemKey,(J,S)=>{J==="add-new-page"?(R.currentMenuItemKey=S,xe(null)):De.includes(S)&&!De.includes(J)&&(F.value||ee.warning({title:f("confirm"),content:f("marketInfoDiscardChangesConfirm"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{R.currentMenuItemKey=S}}))});const Ce=i();return xt(()=>[te.value,O.value,v.value,G.value],([J,S,Ie,N])=>{Ce.value=J||S||Ie||N,setTimeout(()=>{Ce.value=void 0},500)},{immediate:!0}),(J,S)=>{var Jt;const Ie=Me,N=rt,se=pn,$e=fn,pe=Ze,Ee=vt,Ve=Ft,Ne=wt,Pe=kt,et=Ml,ft=_t,Oe=at,Ge=qa,je=Pt,ke=Ut,Be=mn,zt=Ja,Ot=Kt,Wt=ut;return n(),U(ge,null,[t(zt,null,{"header-extra":l(()=>[t(N,null,{default:l(()=>[_("div",rr,[De.includes(e(R).currentMenuItemKey)?(n(),C(Ie,{key:0,loading:e(z),disabled:e(F),type:"primary",onClick:qe},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:save"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("save")),1)]),_:1},8,["loading","disabled"])):(n(),U("div",ur))])]),_:1})]),default:l(()=>[t(Oe,{embedded:""},{default:l(()=>[t(Be,{style:Fe(`height: ${e(p)}px`)},{default:l(()=>[t(Be,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t($e,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(Ce),"default-collapsed":!e(X),"collapsed-width":64,"native-scrollbar":!1,width:e(X)?300:275},{default:l(()=>[t(se,{value:e(R).currentMenuItemKey,"onUpdate:value":S[0]||(S[0]=Ue=>e(R).currentMenuItemKey=Ue),"collapsed-width":64,"collapsed-icon-size":22,options:e(g)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Be,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Qa,{name:"slide-fade"},{default:l(()=>[dl(_("section",dr,[t(Oe,{embedded:""},{default:l(()=>[t(Oe,{hoverable:""},{default:l(()=>[t(ft,{ref_key:"contactInfoFormRef",ref:Q,model:e(h),rules:r,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{path:"name"},{label:l(()=>[_("b",cr,s(e(f)("websiteName")),1)]),default:l(()=>[t(pe,{value:e(h).name,"onUpdate:value":S[1]||(S[1]=Ue=>e(h).name=Ue),placeholder:e(f)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Ne,{"x-gap":"12",span:24},{default:l(()=>[t(Ve,{span:12,path:"email"},{label:l(()=>[_("b",pr,s(e(f)("email")),1)]),default:l(()=>[t(pe,{value:e(h).email,"onUpdate:value":S[2]||(S[2]=Ue=>e(h).email=Ue),placeholder:e(f)("email"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ve,{span:12,path:"phone"},{label:l(()=>[_("b",fr,s(e(f)("phone")),1)]),default:l(()=>[t(pe,{value:e(h).phone,"onUpdate:value":S[3]||(S[3]=Ue=>e(h).phone=Ue),placeholder:e(f)("phone"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"address"},{label:l(()=>[_("span",mr,[_("b",null,s(e(f)("address")),1)])]),default:l(()=>[t(pe,{value:e(h).address,"onUpdate:value":S[4]||(S[4]=Ue=>e(h).address=Ue),placeholder:e(f)("address"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ne,{"x-gap":"12",span:24},{default:l(()=>[t(Ve,{span:12,path:"postalCode"},{label:l(()=>[_("b",vr,s(e(f)("postalCode")),1)]),default:l(()=>[t(pe,{value:e(h).postalCode,"onUpdate:value":S[5]||(S[5]=Ue=>e(h).postalCode=Ue),placeholder:e(f)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{"show-label":!1,path:"description"},{default:l(()=>[t(Pe,{modelValue:e(h).description,"onUpdate:modelValue":S[6]||(S[6]=Ue=>e(h).description=Ue),placeholder:e(f)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:l(()=>[_("b",_r,s(e(f)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),t(Ee,{path:"additionalInfo"},{label:l(()=>[_("b",yr,s(e(f)("additionalInfo")),1)]),default:l(()=>[t(et,{value:e(u),"onUpdate:value":S[7]||(S[7]=Ue=>ze(u)?u.value=Ue:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[T(s(e(f)("add")),1)]),default:l(({value:Ue})=>[_("div",gr,[t(pe,{value:Ue.name,"onUpdate:value":mt=>Ue.name=mt,placeholder:e(f)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(pe,{value:Ue.content,"onUpdate:value":mt=>Ue.content=mt,placeholder:e(f)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[vl,e(R).currentMenuItemKey==="contact-info"]]),dl(_("section",br,[t(Oe,{embedded:""},{default:l(()=>[t(Oe,{segmented:"",size:"small"},{header:l(()=>[_("span",hr,s(e(f)("website")),1)]),default:l(()=>[t(Ne,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",kr,s(e(f)("logo")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).logo?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).logo),onClick:S[8]||(S[8]=()=>{y.value="logos",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[9]||(S[9]=()=>{y.value="logos",w.value=!0})},[_("div",wr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).logo?(n(),C(Ie,{key:2,quaternary:"",onClick:S[10]||(S[10]=()=>e(h).logo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",xr,s(e(f)("icon")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).icon?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).icon),onClick:S[11]||(S[11]=()=>{y.value="icons",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[12]||(S[12]=()=>{y.value="icons",w.value=!0})},[_("div",Cr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).icon?(n(),C(Ie,{key:2,quaternary:"",onClick:S[13]||(S[13]=()=>e(h).icon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ir,s(e(f)("logoMonochrome")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorLogo?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).oneColorLogo),onClick:S[14]||(S[14]=()=>{y.value="monochrome-logos",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[15]||(S[15]=()=>{y.value="monochrome-logos",w.value=!0})},[_("div",$r,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).oneColorLogo?(n(),C(Ie,{key:2,quaternary:"",onClick:S[16]||(S[16]=()=>e(h).oneColorLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Vr,s(e(f)("iconMonochrome")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorIcon?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).oneColorIcon),onClick:S[17]||(S[17]=()=>{y.value="monochrome-icons",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[18]||(S[18]=()=>{y.value="monochrome-icons",w.value=!0})},[_("div",Tr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).oneColorIcon?(n(),C(Ie,{key:2,quaternary:"",onClick:S[19]||(S[19]=()=>e(h).oneColorIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Oe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Oe,{segmented:"",size:"small"},{header:l(()=>[_("span",zr,s(e(f)("administration")),1)]),default:l(()=>[t(Ne,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ur,s(e(f)("logo")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminLogo?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).adminLogo),onClick:S[20]||(S[20]=()=>{y.value="admin-logos",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[21]||(S[21]=()=>{y.value="admin-logos",w.value=!0})},[_("div",Mr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).adminLogo?(n(),C(Ie,{key:2,quaternary:"",onClick:S[22]||(S[22]=()=>e(h).adminLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Sr,s(e(f)("icon")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminIcon?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).adminIcon),onClick:S[23]||(S[23]=()=>{y.value="admin-icons",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[24]||(S[24]=()=>{y.value="admin-icons",w.value=!0})},[_("div",Ar,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).adminIcon?(n(),C(Ie,{key:2,quaternary:"",onClick:S[25]||(S[25]=()=>e(h).adminIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Er,s(e(f)("logoMonochrome")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorAdminLogo?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).oneColorAdminLogo),onClick:S[26]||(S[26]=()=>{y.value="monochrome-admin-logos",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[27]||(S[27]=()=>{y.value="monochrome-admin-logos",w.value=!0})},[_("div",Dr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).oneColorAdminLogo?(n(),C(Ie,{key:2,quaternary:"",onClick:S[28]||(S[28]=()=>e(h).oneColorAdminLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Lr,s(e(f)("iconMonochrome")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorAdminIcon?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).oneColorAdminIcon),onClick:S[29]||(S[29]=()=>{y.value="monochrome-admin-icons",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[30]||(S[30]=()=>{y.value="monochrome-admin-icons",w.value=!0})},[_("div",Pr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).oneColorAdminIcon?(n(),C(Ie,{key:2,quaternary:"",onClick:S[31]||(S[31]=()=>e(h).oneColorAdminIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Oe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Oe,{segmented:"",size:"small"},{header:l(()=>[_("span",Nr,s(e(f)("adminAuthPagesBg")),1)]),default:l(()=>[t(Ne,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Or,s(e(f)("lightMode")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminAuthLightBg?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).adminAuthLightBg),onClick:S[32]||(S[32]=()=>{y.value="light-backgrounds",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[33]||(S[33]=()=>{y.value="light-backgrounds",w.value=!0})},[_("div",Rr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).adminAuthLightBg?(n(),C(Ie,{key:2,quaternary:"",onClick:S[34]||(S[34]=()=>e(h).adminAuthLightBg="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1}),t(je,null,{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",qr,s(e(f)("darkMode")),1)]),default:l(()=>[t(N,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminAuthDarkBg?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:Fe("border: 1px dashed "+e(D)(e(j),"white")),size:125,src:e(M)(e(h).adminAuthDarkBg),onClick:S[35]||(S[35]=()=>{y.value="dark-backgrounds",w.value=!0})},null,8,["style","src"])):(n(),U("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Fe(`border: 1px dashed ${e(D)(e(j),"white")}; width: 125px; height: 125px`),onClick:S[36]||(S[36]=()=>{y.value="dark-backgrounds",w.value=!0})},[_("div",Fr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),_("span",null,s(e(f)("import")),1)])],4)),e(h).adminAuthDarkBg?(n(),C(Ie,{key:2,quaternary:"",onClick:S[37]||(S[37]=()=>e(h).adminAuthDarkBg="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[T(" "+s(e(f)("clear")),1)]),_:1})):he("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Oe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Oe,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[_("span",jr,s(e(f)("adminColors")),1)]),default:l(()=>[t(Ne,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(je,null,{default:l(()=>[_("div",Br,[_("span",Kr,s(e(f)("baseColor")),1),_("div",Yr,[e(h).primaryColor?(n(),U(ge,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[38]||(S[38]=Ue=>e(h).primaryColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(tl),{value:e(h).primaryColor,"onUpdate:value":S[39]||(S[39]=Ue=>e(h).primaryColor=Ue),class:"cursor-pointer",theme:e(I),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(je,null,{default:l(()=>[_("div",Gr,[_("span",Hr,s(e(f)("secondaryColor")),1),_("div",Wr,[e(h).secondaryColor?(n(),U(ge,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[40]||(S[40]=Ue=>e(h).secondaryColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(tl),{value:e(h).secondaryColor,"onUpdate:value":S[41]||(S[41]=Ue=>e(h).secondaryColor=Ue),class:"cursor-pointer",theme:e(I),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(je,null,{default:l(()=>[_("div",Jr,[_("span",Xr,s(e(f)("tertiaryColor")),1),_("div",Zr,[e(h).accentColor?(n(),U(ge,{key:0},[t(Ie,{text:"",type:"error",style:{"font-size":"21px"},onClick:S[42]||(S[42]=Ue=>e(h).accentColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ke,{vertical:""})],64)):he("",!0),t(e(tl),{value:e(h).accentColor,"onUpdate:value":S[43]||(S[43]=Ue=>e(h).accentColor=Ue),class:"cursor-pointer",theme:e(I),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[vl,e(R).currentMenuItemKey==="appearance"]]),dl(_("section",Qr,[t(Oe,{embedded:""},{default:l(()=>[t(Oe,{hoverable:""},{default:l(()=>[t(ft,{ref_key:"socialNetworksFormRef",ref:V,model:e(h),rules:x,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ne,{"x-gap":"12",span:24},{default:l(()=>[(n(),U(ge,null,Re($,Ue=>t(Ve,{key:Ue.name,span:12,path:Ue.name},{label:l(()=>[_("b",eu,s(e(f)(Ue.name)),1)]),default:l(()=>[t(pe,{value:e(h)[Ue.name],"onUpdate:value":mt=>e(h)[Ue.name]=mt,placeholder:e(f)(Ue.name),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(be),{icon:Ue.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[vl,e(R).currentMenuItemKey==="social-networks"]]),e(R).currentMenuItemKey==="newsletter-email"?(n(),U("section",tu,[t(vi)])):he("",!0),e(R).currentMenuItemKey==="newsletter-phone"?(n(),U("section",lu,[t(yi)])):he("",!0),e(R).currentMenuItemKey==="newsletter-campaign"?(n(),U("section",au,[t(ir)])):he("",!0),e(R).currentMenuItemKey==="ads"?(n(),U("section",nu,[t(En)])):he("",!0),e(R).currentMenuItemKey==="videos"?(n(),U("section",su,[t(Ao)])):he("",!0),e(R).currentMenuItemKey==="content-models"?(n(),U("section",ou,[t(Ri)])):he("",!0),e(R).currentMenuItemKey==="menus"?(n(),U("section",iu,[t(vo)])):he("",!0),e(R).currentMenuItemKey==="content-permalinks"?(n(),U("section",ru,[t(sr)])):he("",!0),e(R).currentMenuItemKey==="page-sections"?(n(),U("section",uu,[t(fi)])):he("",!0),(n(!0),U(ge,null,Re(e(L),(Ue,mt)=>(n(),U(ge,{key:`${Ue.slug}-page`},[e(R).currentMenuItemKey===`${Ue.slug}-page`?(n(),U("section",{key:`${Ue.slug}-page`},[t(Ss,{slug:Ue.slug,"open-form-modal":xe,onDelete:()=>{e(R).currentMenuItemKey=e(L).length>1?`${e(L)[mt-1].slug}-page`:a[0],e(le)()}},null,8,["slug","onDelete"])])):he("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Ot,{show:e(w),"onUpdate:show":S[44]||(S[44]=Ue=>ze(w)?w.value=Ue:null),title:e(f)("selectImage"),"upload-config":{folder:e(y),limit:0,maxSize:0,baseUrl:((Jt=e(E))==null?void 0:Jt.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:de},null,8,["show","title","upload-config"]),t(Wt,{show:e(H),"onUpdate:show":S[46]||(S[46]=Ue=>ze(H)?H.value=Ue:null),loading:e(z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(f)("editPage"):e(f)("addPage"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:ye,onNegativeClick:S[47]||(S[47]=Ue=>H.value=!1)},{default:l(()=>[t(ft,{ref_key:"addPageFormRef",ref:k,model:e(ae),rules:ve,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"show-label":!1,path:"title",class:"mt-5"},{default:l(()=>[t(Pe,{modelValue:e(ae).title,"onUpdate:modelValue":S[45]||(S[45]=Ue=>e(ae).title=Ue),placeholder:e(f)("title"),class:"w-full",sync:"",onKeydown:en(ye,["enter"])},{label:l(()=>[T(s(e(f)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const Sc=Nt(cu,[["__scopeId","data-v-6f4d8d7f"]]);export{Sc as default};
