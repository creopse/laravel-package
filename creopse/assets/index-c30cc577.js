import{_ as M}from"./PageLayout.vue_vue_type_script_setup_true_lang-889f8007.js";import{_ as G}from"./I18nInput-a3772079.js";import{I as H}from"./iconify_vue-46af0b81.js";import{u as Y,d as Q,B as S,R as W,C,D as X,E as Z,e as ee}from"./index-920c76d4.js";import{_ as D}from"./lodash-a9971f22.js";import{d as U,p as te,o as oe,P as ae,aO as e,Y as t,l as g,a as s}from"./vue_runtime-core-273b5003.js";import{u as le}from"./vue-i18n-0da1582b.js";import{a as ne,b as se,c as ie,N as re,_ as pe,g as ue,k as me,L as ce,R as de,I as _e,ao as fe,E as ge,al as ve}from"./naive-ui-ab0dda7d.js";import{r as h,u as o}from"./vue_reactivity-852d8377.js";import{t as i,a as N}from"./vue_shared-7dcc3b7f.js";import"./vue-router-c3388b6d.js";import"./index.vue_vue_type_style_index_0_lang-261c1c96.js";import"./index.vue_vue_type_script_setup_true_lang-1b7b600b.js";import"./vueuse_core-d5cd9503.js";import"./vueuse_shared-835eca33.js";import"./media-library-4ac60013.js";import"./vue-advanced-cropper-45f4d00f.js";import"./vue_runtime-dom-5ad5ecb0.js";import"./fawmi_vue-google-maps-439c501d.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./uuid-cf522c50.js";import"./validator-c0254ba9.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./lodash-es-a215867d.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-6f0d8da7.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-40fbe54c.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-284e336f.js";import"./pinia-a2cac08c.js";import"./vue-demi-71ba0ef2.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./slugify-ce681755.js";import"./parse-domain-489ba3ba.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-0787c3d6.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-df7eee76.js";import"./vue-2044cde0.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-417126f1.js";import"./pinia_colada-2d4f4a8d.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-a68ee547.js";import"./vue3-map-chart-668e2d48.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-d047f964.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-68d47bbf.js";import"./vooks-6944b357.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";const ye={class:"w-[260px]"},be={class:"mb-4"},we={class:"mb-4"},ke=U({name:W.APP_SETTINGS.NAME}),jo=U({...ke,setup(Te){const{t:l}=le(),{request:z}=ee(),{isSmScreen:R}=Y(),b=ne(),w=se(),B=ie(),I=Q(),u=h(!1),n=h(S(C)),P=h(S(C)),E=te(()=>D.isEqual(n.value,P.value)),K=async()=>{u.value=!0;const c=await z({url:"/app-settings",method:"put",data:n.value});c.success&&c.result?w.success(l("success")):w.error(l("unableToUpdateSettings")),await k()},O=async()=>{B.warning({title:l("confirm"),content:l("confirmRestoreDefaultSettings"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{u.value=!0,await I.initDefaultSettings(),await k(),u.value=!1}})},k=async()=>{var c;b.start(),u.value=!0,await I.loadSettings(),(c=I.settings)==null||c.forEach(a=>{n.value[a.key]!=null&&(n.value[a.key]=a.value)}),P.value=D.cloneDeep(n.value),u.value=!1,b.finish()};k();const V=()=>{X(Z(n.value),"settings")},T=h(null),L=()=>{T.value&&(T.value.value="",T.value.click())};function F(c){const a=c.target;if(!a.files||!a.files[0])return;const v=a.files[0],d=new FileReader;d.onload=async()=>{try{b.start(),u.value=!0;const f=JSON.parse(d.result),m=S(f),y={};for(const[r,_]of Object.entries(m))r in n.value&&(y[r]=_);await z({url:"/app-settings",method:"put",data:y}),await k(),u.value=!1,b.finish(),w.success(l("success"))}catch{w.error(l("unableToImportFile"))}},d.readAsText(v)}return(c,a)=>{const v=H,d=re,f=pe,m=ue,y=me,r=ce,_=de,$=G,x=_e,j=fe,A=ge,q=ve,J=M;return oe(),ae(J,null,{"header-extra":e(()=>[t(m,null,{default:e(()=>[t(f,{loading:o(u),onClick:O},{icon:e(()=>[t(d,{size:"18"},{default:e(()=>[t(v,{icon:"carbon:reset"})]),_:1})]),default:e(()=>[g(" "+i(o(l)("restore")),1)]),_:1},8,["loading"]),t(f,{type:"success",onClick:V},{icon:e(()=>[t(d,{size:"18"},{default:e(()=>[t(v,{icon:"carbon:upload"})]),_:1})]),default:e(()=>[g(" "+i(o(l)("export")),1)]),_:1}),t(f,{type:"info",onClick:L},{icon:e(()=>[t(d,{size:"18"},{default:e(()=>[t(v,{icon:"carbon:download"})]),_:1})]),default:e(()=>[g(" "+i(o(l)("import")),1)]),_:1}),s("input",{ref_key:"importInputRef",ref:T,type:"file",accept:".json",class:"hidden",onChange:F},null,544),t(f,{loading:o(u),disabled:o(E),type:"primary",onClick:K},{icon:e(()=>[t(d,{size:"18"},{default:e(()=>[t(v,{icon:"carbon:save"})]),_:1})]),default:e(()=>[g(" "+i(o(l)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),default:e(()=>[t(q,{type:"card",animated:""},{default:e(()=>[t(j,{name:"general",tab:o(l)("general")},{default:e(()=>[s("section",null,[t(r,{hoverable:"",embedded:""},{header:e(()=>[g(i(o(l)("installationRegistration")),1)]),default:e(()=>[t(x,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:e(()=>[t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("disableInstaller")),1),t(y,{value:o(n).disableInstaller,"onUpdate:value":a[0]||(a[0]=p=>o(n).disableInstaller=p),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:e(()=>a[6]||(a[6]=[s("div",{class:"w-6"},null,-1)])),unchecked:e(()=>a[7]||(a[7]=[s("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("allowUsersRegistration")),1),t(y,{value:o(n).allowRegistration,"onUpdate:value":a[1]||(a[1]=p=>o(n).allowRegistration=p),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:e(()=>a[8]||(a[8]=[s("div",{class:"w-6"},null,-1)])),unchecked:e(()=>a[9]||(a[9]=[s("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("displayAdminProfileTypeAtRegistration")),1),t(y,{value:o(n).displayAdminProfileType,"onUpdate:value":a[2]||(a[2]=p=>o(n).displayAdminProfileType=p),"checked-value":"1","unchecked-value":"0",disabled:!parseInt(o(n).allowRegistration),size:"small"},{checked:e(()=>a[10]||(a[10]=[s("div",{class:"w-6"},null,-1)])),unchecked:e(()=>a[11]||(a[11]=[s("div",{class:"w-6"},null,-1)])),_:1},8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("adminProfileTypeTitle")),1),s("div",ye,[t($,{modelValue:o(n).adminProfileTypeLabel,"onUpdate:modelValue":a[3]||(a[3]=p=>o(n).adminProfileTypeLabel=p),placeholder:o(l)("admin"),disabled:!(parseInt(o(n).displayAdminProfileType)&&parseInt(o(n).allowRegistration)),size:"tiny",sync:""},null,8,["modelValue","placeholder","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["tab"]),t(j,{name:"translation",tab:o(l)("translation")},{default:e(()=>[s("section",be,[t(r,{hoverable:"",embedded:""},{header:e(()=>[g(i(o(l)("googleTranslate")),1)]),default:e(()=>[t(x,{cols:"1 ",responsive:"screen","x-gap":12,"y-gap":12},{default:e(()=>[t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("apiKey")),1),t(A,{value:o(n)["translation.googleTranslate.apiKey"],"onUpdate:value":a[4]||(a[4]=p=>o(n)["translation.googleTranslate.apiKey"]=p),type:"password",class:N(o(R)?"!w-full":"!w-[400px]")},null,8,["value","class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),s("section",we,[t(r,{hoverable:"",embedded:""},{header:e(()=>[g(i(o(l)("deepl")),1)]),default:e(()=>[t(x,{cols:"1",responsive:"screen","x-gap":12,"y-gap":12},{default:e(()=>[t(_,null,{default:e(()=>[t(r,{class:"w-full h-full",size:"small"},{default:e(()=>[t(m,{align:"center",justify:"space-between"},{default:e(()=>[s("span",null,i(o(l)("apiKey")),1),t(A,{value:o(n)["translation.deeplTranslate.apiKey"],"onUpdate:value":a[5]||(a[5]=p=>o(n)["translation.deeplTranslate.apiKey"]=p),type:"password",class:N(o(R)?"!w-full":"!w-[400px]")},null,8,["value","class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["tab"])]),_:1})]),_:1})}}});export{jo as default};
