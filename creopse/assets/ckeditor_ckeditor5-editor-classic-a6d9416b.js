import{E as c,n as h,d as m,e as u,T as f,I as g}from"./ckeditor_ckeditor5-ui-b7ac7aa2.js";import{g as p,C as w,h as b}from"./ckeditor_ckeditor5-utils-df07b536.js";import"./color-convert-eee2eef5.js";import{a as E,D as v,b as y,E as C,c as x}from"./ckeditor_ckeditor5-core-c8d003a2.js";import{e as T}from"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./vanilla-colorful-3f59310b.js";import{E as P,C as F}from"./ckeditor_ckeditor5-watchdog-33524ea7.js";import{a as R}from"./lodash-es-a215867d.js";/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k extends c{constructor(t,e){super(t),this.view=e,this._toolbarConfig=h(t.config.get("toolbar")),this._elementReplacer=new p}get element(){return this.view.element}init(t){const e=this.editor,o=this.view,i=e.editing.view,s=o.editable,r=i.document.getRoot();s.name=r.rootName,o.render();const d=s.element;this.setEditableElement(s.name,d),o.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(d),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:e})=>e||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,e=t.editing.view,o=e.document.getRoot(),i=t.sourceElement;let s;const r=t.config.get("placeholder");r&&(s=typeof r=="string"?r:r[this.view.editable.name]),!s&&i&&i.tagName.toLowerCase()==="textarea"&&(s=i.getAttribute("placeholder")),s&&T({view:e,element:o,text:s,isDirectHost:!1,keepOnFocus:!0})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _ extends m{constructor(t,e,o={}){super(t),this.stickyPanel=new u(t),this.toolbar=new f(t,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),this.editable=new g(t,e)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l extends v(C(x)){constructor(t,e={}){if(!a(t)&&e.initialData!==void 0)throw new w("editor-create-initial-data",null);super(e),this.config.get("initialData")===void 0&&this.config.set("initialData",I(t)),a(t)&&(this.sourceElement=t),this.model.document.createRoot();const o=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=new _(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:o});this.ui=new k(this,i),y(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise(o=>{const i=new this(t,e);o(i.initPlugins().then(()=>i.ui.init(a(t)?t:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}l.Context=E;l.EditorWatchdog=P;l.ContextWatchdog=F;function I(n){return a(n)?b(n):n}function a(n){return R(n)}export{l as C};
