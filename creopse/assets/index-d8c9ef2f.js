import{G as K,H as it,u as at,I as lt,f as st,R as rt,J as G}from"./index-920c76d4.js";import{I as u}from"./iconify_vue-46af0b81.js";import{p as ct}from"./vue_runtime-dom-5ad5ecb0.js";import{u as pt}from"./vue-router-c3388b6d.js";import{d as E,o as p,P as _,aO as e,Y as t,a as J,Q as V,l as I,p as P,w as dt,c as Y,h as d,F as ut,ar as mt}from"./vue_runtime-core-273b5003.js";import{u as W}from"./vue-i18n-0da1582b.js";import{r as L,u as o,c as _t}from"./vue_reactivity-852d8377.js";import{t as b,n as A}from"./vue_shared-7dcc3b7f.js";import{aj as X,f as R,N as m,_ as Z,g as tt,aq as et,am as ot,ap as ft,a as ht,o as yt,l as gt,h as xt,n as bt,an as wt,a2 as kt}from"./naive-ui-ab0dda7d.js";import{_ as vt}from"./fawmi_vue-google-maps-439c501d.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-a9971f22.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./pinia-a2cac08c.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-ce681755.js";import"./validator-c0254ba9.js";import"./vueuse_core-d5cd9503.js";import"./vueuse_shared-835eca33.js";import"./parse-domain-489ba3ba.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-0787c3d6.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-df7eee76.js";import"./vue-2044cde0.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-417126f1.js";import"./pinia_colada-2d4f4a8d.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-a68ee547.js";import"./vue3-map-chart-668e2d48.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-d047f964.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-68d47bbf.js";import"./vooks-6944b357.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";const Nt=["innerHTML"],It=E({__name:"Item",props:{item:{}},emits:["closeBox"],setup(Q,{emit:h}){const n=Q,T=h,{t:y,locale:H}=W(),w=pt(),{markAsRead:C,buildMessage:k,removeNotification:g,isUnread:$}=K(),v=async x=>{if(x.data.target)try{await C(x),w.push(x.data.target),T("closeBox")}catch(a){console.log(a)}},S=L({title:"",content:""}),B=L(!1);return(async()=>{B.value=!0,S.value=await k(n.item),B.value=!1})(),(x,a)=>{const l=X,M=R,s=u,r=m,f=Z,N=tt,j=et,z=ot,O=ft;return o(B)?(p(),_(z,{key:0,class:"item w-full"},{default:e(()=>[t(j,null,{header:e(()=>[t(l,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(M,{color:"gray",dot:""})]),description:e(()=>[t(l,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(N,{align:"center",justify:"space-between"},{default:e(()=>[t(f,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(l,{text:"",style:{width:"60px"}})]),_:1}),t(N,{align:"center"},{default:e(()=>[t(f,{text:""},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(l,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(p(),_(z,{key:1,class:"item w-full",style:A(`cursor: ${n.item.data.target?"pointer":"default"}`),onClick:a[3]||(a[3]=i=>v(n.item))},{default:e(()=>[t(j,null,{header:e(()=>[J("span",{class:"title",onClick:a[0]||(a[0]=i=>v(n.item))},b(o(S).title),1)]),"header-extra":e(()=>[o($)(n.item)?(p(),_(M,{key:0,dot:""})):V("",!0)]),description:e(()=>[J("span",{class:"content",innerHTML:o(S).content},null,8,Nt)]),footer:e(()=>[t(N,{align:"center",justify:"space-between"},{default:e(()=>[t(f,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>{var i;return[I(" "+b(o(it)(((i=n.item)==null?void 0:i.createdAt)||"",{locale:o(H)})),1)]}),_:1}),t(N,{align:"center"},{default:e(()=>[o($)(n.item)?(p(),_(f,{key:0,text:"",onClick:a[1]||(a[1]=ct(i=>o(C)(n.item),["stop"]))},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"carbon:checkmark"})]),_:1})]),default:e(()=>[I(" "+b(o(y)("read")),1)]),_:1})):V("",!0),n.item.data.removable?(p(),_(O,{key:1,"positive-text":o(y)("yes"),"negative-text":o(y)("no"),trigger:"hover",onPositiveClick:a[2]||(a[2]=i=>o(g)(n.item))},{trigger:e(()=>[t(f,{text:""},{icon:e(()=>[t(r,null,{default:e(()=>[t(s,{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[I(" "+b(o(y)("delete")),1)]),_:1})]),default:e(()=>[I(" "+b(o(y)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),Ct=E({name:rt.NOTIFICATIONS.NAME}),St=E({...Ct,setup(Q){const{t:h}=W(),{isMdScreen:n,isSmScreen:T,pickByTheme:y,appPrimaryColor:H}=at(),w=L("all"),C=L(!1),k=ht(),g=lt(),$=st(),{userUnreadNotifications:v,markAllAsRead:S}=K(),B=P(()=>[{label:()=>d("div",{class:"flex justify-between items-center w-full"},[d("span",{class:"mr-1 text-white"},{default:()=>h("all")}),d(R,{value:G(g.notifications.length||0),type:"info"})]),key:"all",icon:()=>d(m,{color:"white"},{default:()=>d(u,{icon:"mdi:email-multiple"})})},{label:()=>d("div",{class:"flex justify-between items-center w-full"},[d("span",{class:"mr-1 text-white"},{default:()=>h("unread")}),d(R,{value:G(v.value.length||0),type:"error"})]),key:"unread",icon:()=>d(m,{color:"white"},{default:()=>d(u,{icon:"mdi:email-open-multiple"})})}]),F=P(()=>{let l;switch(w.value){case"all":l=g.notifications;break;case"unread":l=v.value;break;default:l=[];break}return l}),x=P(()=>$.contentLayoutSize.height-100),a=async()=>{C.value=!0,k.start(),await g.getNotifications(),k.finish(),C.value=!1};return dt(()=>g.firstRefresh,l=>{l?k.start():k.finish()},{immediate:!0}),(l,M)=>{const s=Z,r=tt,f=gt,N=xt,j=bt,z=wt,O=kt,i=yt,c=X,q=et,D=ot;return p(),Y("section",null,[o(g).firstRefresh?(p(),_(i,{key:1,style:A("height: "+o(x)+"px"),embedded:""},{default:e(()=>[t(f,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:e(()=>[t(r,{justify:"space-between",align:"center"},{default:e(()=>[t(c,{text:"",style:{width:"125px"}}),t(c,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),t(i,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:e(()=>[t(j,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:e(()=>[t(c,{height:"35px",width:"100%",class:"mb-1"}),t(c,{height:"35px",width:"100%"})]),_:1}),t(i,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:e(()=>[t(z,{hoverable:"",clickable:"",bordered:""},{default:e(()=>[t(D,{class:"item w-full"},{default:e(()=>[t(q,null,{header:e(()=>[t(c,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(o(R),{color:"gray",dot:""})]),description:e(()=>[t(c,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(r,{align:"center",justify:"space-between"},{default:e(()=>[t(s,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1}),t(r,{align:"center"},{default:e(()=>[t(s,{text:""},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"item w-full"},{default:e(()=>[t(q,null,{header:e(()=>[t(c,{text:"",style:{width:"150px"}})]),"header-extra":e(()=>[t(o(R),{color:"gray",dot:""})]),description:e(()=>[t(c,{text:"",style:{width:"100%"},repeat:2})]),footer:e(()=>[t(r,{align:"center",justify:"space-between"},{default:e(()=>[t(s,{text:"",size:"tiny",style:{cursor:"default"}},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1}),t(r,{align:"center"},{default:e(()=>[t(s,{text:""},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:trash-can"})]),_:1})]),default:e(()=>[t(c,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(p(),_(i,{key:0,style:A("height: "+o(x)+"px"),embedded:""},{default:e(()=>[t(f,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:e(()=>[t(r,{justify:"space-between",align:"center"},{default:e(()=>[t(s,{text:"",onClick:a},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:restart"})]),_:1})]),default:e(()=>[I(" "+b(o(h)("refresh")),1)]),_:1}),t(s,{text:"",disabled:!o(v).length,onClick:o(S)},{icon:e(()=>[t(o(m),null,{default:e(()=>[t(o(u),{icon:"carbon:checkmark"})]),_:1})]),default:e(()=>[I(" "+b(o(h)("allMarkedAsRead")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),t(i,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:e(()=>[t(j,{style:A(`background-color: ${o(y)(o(H),"rgba(24, 24, 28, 1)")}`),"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:o(n)||o(T),width:260,bordered:""},{default:e(()=>[t(N,{value:o(w),"onUpdate:value":M[0]||(M[0]=U=>_t(w)?w.value=U:null),collapsed:o(n)||o(T),"collapsed-width":64,"collapsed-icon-size":22,options:o(B)},null,8,["value","collapsed","options"])]),_:1},8,["style","collapsed"]),t(i,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:e(()=>[o(F).length?(p(),_(z,{key:0,hoverable:"",clickable:"",bordered:""},{default:e(()=>[(p(!0),Y(ut,null,mt(o(F),(U,nt)=>(p(),_(It,{key:nt,item:U},null,8,["item"]))),128))]),_:1})):(p(),_(O,{key:1,description:o(h)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:e(()=>[t(o(m),{size:"56"},{default:e(()=>[t(o(u),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}});const Ee=vt(St,[["__scopeId","data-v-de3d3b46"]]);export{Ee as default};
