import{i as d}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as w}from"./AuthLayout.vue_vue_type_script_setup_true_lang-mdqk0YUy.js";import{I as B}from"./iconify_vue-DXPEksg3.js";import{c as R,d as D,n as F,R as p,f as H}from"./main-D6UvRL7q.js";import{a as L,u as M}from"./vue-router-DjpI5axN.js";import{l as T,N as Y,m as q,f as O,B as P,h as $}from"./naive-ui-BrWbllCz.js";import{u as G}from"./vue-i18n-B92nPylK.js";const{defineComponent:U}=await d("vue"),{unref:e,toDisplayString:s,createTextVNode:c,resolveComponent:ie,withCtx:t,createVNode:r,openBlock:l,createBlock:i,createCommentVNode:j,Fragment:z,createElementBlock:J,createElementVNode:m}=await d("vue"),K={class:"text-center"},Q={class:"flex items-center my-4 before:flex-1 before:border-t before:border-gray-300 before:mt-0.5 after:flex-1 after:border-t after:border-gray-300 after:mt-0.5"},W={class:"text-center font-semibold mx-4 mb-0"},{defineComponent:X,ref:E,onMounted:Z}=await d("vue"),ee=X({name:p.VERIFY_EMAIL.NAME}),ue=U({...ee,setup(te){const{t:a}=G(),o=L(),f=M(),b=R(),{getSettingValue:v}=D(),{mutate:x}=F(),y=E(!0),n=E(null);Z(()=>{(!o.params.id||!o.params.hash)&&f.replace(p.LOGIN.PATH),x({id:o.params.id,hash:o.params.hash,expires:o.query.expires,signature:o.query.signature},{onSuccess:_=>{n.value="yes",b.userData=_.user},onError:_=>{switch(_?.response?.data?.errorCode){case H.AUTH_EMAIL_ALREADY_VERIFIED:n.value="already";break;default:n.value="no";break}},onSettled:()=>{y.value=!1}})});const g=v("disableInstaller","boolean");return(_,h)=>{const k=q,V=Y,u=O,C=B,I=$,N=P,A=T,S=w;return l(),i(S,{"display-server-alerts":!e(g)},{default:t(()=>[r(A,{show:e(y)},{default:t(()=>[m("div",K,[r(V,null,{default:t(()=>[r(k,{type:"primary"},{default:t(()=>[c(s(e(a)("emailVerification")),1)]),_:1})]),_:1}),e(n)!=null?(l(),J(z,{key:0},[e(n)=="yes"?(l(),i(u,{key:0,type:"success"},{default:t(()=>[c(s(e(a)("verifyYourEmailSucceed")),1)]),_:1})):e(n)=="already"?(l(),i(u,{key:1,type:"info"},{default:t(()=>[c(s(e(a)("yourEmailAlreadyVerified")),1)]),_:1})):(l(),i(u,{key:2,type:"error"},{default:t(()=>[c(s(e(a)("verifyYourEmailFailed")),1)]),_:1}))],64)):j("",!0),m("div",Q,[m("p",W,[r(N,{text:"",onClick:h[0]||(h[0]=oe=>e(f).replace(e(p).HOME.PATH))},{icon:t(()=>[r(I,null,{default:t(()=>[r(C,{icon:"carbon:return"})]),_:1})]),default:t(()=>[c(" "+s(e(a)("back")),1)]),_:1})])])])]),_:1},8,["show"])]),_:1},8,["display-server-alerts"])}}});export{ue as default};
