import{_ as L}from"./AuthLayout-5eb7bf54.js";import{u as O,c as q,d as M,R as w,_ as B,e as F}from"./index-55665812.js";import{I as j}from"./iconify_vue-6750bec6.js";import{R as z}from"./response-error-code-87d1097e.js";import{u as G}from"./vue-router-e670704e.js";import{_ as U}from"./validator-c9e97e8e.js";import{d as R,w as Y,o as $,P as W,aO as o,Y as r,a as i,l as E}from"./vue_runtime-core-4f5fb440.js";import{u as J}from"./vue-i18n-84a05dd5.js";import{b as K,E as Q,F as X,N as Z,_ as ee,G as te,L as oe}from"./naive-ui-f034a0d9.js";import{r as b,u as e}from"./vue_reactivity-852d8377.js";import{t as S}from"./vue_shared-7dcc3b7f.js";import"./vue_runtime-dom-c0cb2070.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./fawmi_vue-google-maps-f303fdec.js";import"./googlemaps_markerclusterer-7ef0bcf9.js";import"./fast-deep-equal-d48ae8fc.js";import"./axios-8734fada.js";import"./process-199d9cab.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-8d91e508.js";import"./pinia-5dd13ed8.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-4c8e4bf3.js";import"./vueuse_core-e3c6c607.js";import"./vueuse_shared-d1f69174.js";import"./parse-domain-15b982e1.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./ckeditor_ckeditor5-vue-a01957a7.js";import"./vue-cb9e9a9a.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-a0189596.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-d80203ee.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";const re={class:"container h-full"},se={class:"flex justify-center items-center flex-wrap h-full g-6 text-gray-800"},ie={class:"md:w-8/12 lg:w-5/12 xl:w-4/12 2xl:w-3/12 sm:w-full"},ae={class:"flex justify-center mb-6"},ne=["src","alt"],me={class:"flex items-center my-4 before:flex-1 before:border-t before:border-gray-300 before:mt-0.5 after:flex-1 after:border-t after:border-gray-300 after:mt-0.5"},le={class:"w-full text-center font-semibold mx-4 mb-0"},pe=R({name:w.RESET_PASSWORD.NAME}),Ct=R({...pe,setup(ue){const{t:s}=J(),v=G(),h=K(),{request:k}=F(),{displayFormErrors:A,logo:I}=O(),C=q(),N=M(),f=b(!1),x=b(null),n=b({email:""}),P={email:[{required:!0,message:s("fillRequired")},{trigger:["input"],validator(m,t){return t&&!U.isEmail(t)?new Error(s("invalidEmail")):!0}}]},T=m=>{var t;m.preventDefault(),(t=x.value)==null||t.validate(async g=>{var p,u,c,l,_,d;if(!g){f.value=!0;const a=await k({url:"/auth/send-password-link",method:"post",data:{email:n.value.email}});if(a.failure&&a.error)switch((c=(u=(p=a.error)==null?void 0:p.response)==null?void 0:u.data)==null?void 0:c.errorCode){case z.FORM_INVALID_DATA:A((d=(_=(l=a.error)==null?void 0:l.response)==null?void 0:_.data)==null?void 0:d.data);break;default:h.error(s("failedToSend"))}else n.value={email:""},h.success(s("weHaveSentYouPwdResetEmail"),{closable:!0,duration:1e4});f.value=!1}})},V="Creopse",D=N.getSettingValue("disableInstaller","boolean");return Y(()=>C.isUserConnected,m=>{m&&v.replace(w.HOME.PATH)},{immediate:!0}),(m,t)=>{const g=Q,p=X,u=j,c=Z,l=ee,_=te,d=oe,a=B,H=L;return $(),W(H,{"display-server-alerts":!e(D)},{default:o(()=>[r(a,{name:"slide-fade",appear:""},{default:o(()=>[i("div",re,[i("div",se,[i("div",ie,[r(d,{size:"small",class:"w-full"},{default:o(()=>[i("div",ae,[i("img",{src:e(I),class:"w-54",alt:e(V)},null,8,ne)]),r(_,{ref_key:"formRef",ref:x,model:e(n),rules:P,"show-label":!1,"show-require-mark":!1,size:"medium"},{default:o(()=>[r(p,{label:e(s)("addressEmail"),path:"email"},{default:o(()=>[r(g,{value:e(n).email,"onUpdate:value":t[0]||(t[0]=y=>e(n).email=y),placeholder:e(s)("addressEmail"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),r(l,{type:"primary",block:"",loading:e(f),onClick:T},{icon:o(()=>[r(c,null,{default:o(()=>[r(u,{icon:"mdi:lock-reset"})]),_:1})]),default:o(()=>[E(" "+S(e(s)("resetPassword")),1)]),_:1},8,["loading"]),i("div",me,[i("p",le,[r(l,{text:"",onClick:t[1]||(t[1]=y=>e(v).push(e(w).LOGIN.PATH))},{default:o(()=>[E(S(e(s)("toLogin")),1)]),_:1})])])]),_:1},8,["model"])]),_:1})])])])]),_:1})]),_:1},8,["display-server-alerts"])}}});export{Ct as default};
