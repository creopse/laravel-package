import{_ as $}from"./PageLayout.vue_vue_type_script_setup_true_lang-889f8007.js";import{I as H}from"./iconify_vue-46af0b81.js";import{c as Q,R as W,n as X}from"./index-920c76d4.js";import{b as G}from"./axios-96fb5abd.js";import{d as M,i as J,b as K,y as Z,o as l,P as F,aO as n,Y as a,l as I,Q as oo,a as S,c as d}from"./vue_runtime-core-273b5003.js";import{u as to}from"./vue-i18n-0da1582b.js";import{b as eo,a as no,N as so,_ as io,g as ao,O as ro,X as po,ae as lo,af as co,P as mo}from"./naive-ui-ab0dda7d.js";import{r as C,u as e}from"./vue_reactivity-852d8377.js";import{t as p}from"./vue_shared-7dcc3b7f.js";import"./vue-router-c3388b6d.js";import"./browser-image-compression-a3ab6596.js";import"./lodash-a9971f22.js";import"./fawmi_vue-google-maps-439c501d.js";import"./vue_runtime-dom-5ad5ecb0.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./pinia-a2cac08c.js";import"./vue-demi-71ba0ef2.js";import"./moment-ea709ccd.js";import"./slugify-ce681755.js";import"./validator-c0254ba9.js";import"./vueuse_core-d5cd9503.js";import"./vueuse_shared-835eca33.js";import"./parse-domain-489ba3ba.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-0787c3d6.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-df7eee76.js";import"./vue-2044cde0.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-417126f1.js";import"./pinia_colada-2d4f4a8d.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-a68ee547.js";import"./vue3-map-chart-668e2d48.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-d047f964.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-68d47bbf.js";import"./vooks-6944b357.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./process-93c0ea83.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";const uo={style:{"margin-bottom":"12px"}},_o={key:0,class:"text-xs"},fo={key:1,class:"text-xs"},ho={key:2,class:"text-xs"},xo={key:3,class:"text-xs"},go={key:4,class:"text-xs"},yo={key:5,class:"text-xs"},bo=M({name:W.MEDIA_LIBRARY.NAME+"Add"}),Pt=M({...bo,setup(To){const{t:s}=to(),x=eo(),g=no(),y=C(),O=0,z=0,b=[],c=C([]),T=C(!1),R=Q(),f=J("appConfig"),k=f==null?void 0:f.apiRequestHeaders;k&&(k.Authorization=`Bearer ${R.accessToken}`);const P=async()=>{y.value.submit()},U=()=>{var o;(o=y.value)==null||o.clear(),c.value=[]},j=o=>{const i=o.file.file,m=i==null?void 0:i.name.split(".").pop();return m&&b.map(u=>u.toLowerCase()).includes(m.toLowerCase())?(x.error(s("fileTypeNotAllowed")),!1):!0},D=o=>{c.value=o.fileList},V=({file:o})=>o,q=()=>{},Y=async({file:o,data:i,headers:m,action:u,onFinish:h,onError:L,onProgress:N})=>{const _=new FormData;i&&Object.keys(i).forEach(t=>{_.append(t,i[t])});const r=o.file,w=r==null?void 0:r.name.split(".").pop(),A=r==null?void 0:r.name.replace("."+w,""),B=await X(r,{maxSizeMB:1});_.append("file",B,A),T.value=!0,g.start(),G.post(u,_,{headers:m,onUploadProgress:t=>{if(t.total!==null){const v=Math.round(t.loaded*100/t.total);N({percent:v})}}}).then(async()=>{h();const t=c.value.findIndex(v=>v.id===o.id);t!==-1&&c.value.splice(t,1),x.success(s("success")),g.finish(),T.value=!1}).catch(t=>{console.log(t),x.error(s("anErrorOccurred")),L(),g.finish(),T.value=!1})},E=console.warn;return K(()=>{console.warn=o=>{typeof o=="string"&&o.includes('Non-function value encountered for slot "default"')||E(o)}}),Z(()=>{console.warn=E}),(o,i)=>{const m=H,u=so,h=io,L=ao,N=ro,_=po,r=lo,w=co,A=mo,B=$;return l(),F(B,null,{"header-extra":n(()=>[e(c).length?(l(),F(L,{key:0,align:"center"},{default:n(()=>[a(h,{disabled:e(c).length==0,onClick:U},{icon:n(()=>[a(u,null,{default:n(()=>[a(m,{icon:"carbon:close"})]),_:1})]),default:n(()=>[I(" "+p(e(s)("clearList")),1)]),_:1},8,["disabled"]),a(h,{type:"primary",disabled:e(c).length==0,onClick:P},{default:n(()=>[I(p(e(s)("launchImport")),1)]),_:1},8,["disabled"])]),_:1})):oo("",!0)]),default:n(()=>[a(A,{show:!1},{default:n(()=>{var t;return[a(w,{ref_key:"upload",ref:y,multiple:"","directory-dnd":"","list-type":"image",max:q(),"default-upload":!1,headers:e(k),"custom-request":Y,action:((t=e(f))==null?void 0:t.apiUrl)+"/media-files/upload",onBeforeUpload:j,onChange:D,onFinish:V},{default:n(()=>[a(r,{class:"h-[250px] flex flex-col items-center justify-center"},{default:n(()=>[S("div",uo,[a(u,{size:"48",depth:3},{default:n(()=>[a(m,{icon:"carbon:upload"})]),_:1})]),a(N,{style:{"font-size":"16px"}},{default:n(()=>[I(p(e(s)("uploadAreaTitle")),1)]),_:1}),a(_,{depth:"3",class:"mt-4"},{default:n(()=>[O?(l(),d("span",_o,p(e(s)("limitToTheNumberOfFilesToSend",[O])),1)):(l(),d("span",fo,p(e(s)("noLimitToTheNumberOfFilesToSend")),1)),i[0]||(i[0]=S("br",null,null,-1)),z?(l(),d("span",ho,p(e(s)("limitToTheSizeOfFilesToSend",[z])),1)):(l(),d("span",xo,p(e(s)("noLimitToTheSizeOfFilesToSend")),1)),i[1]||(i[1]=S("br",null,null,-1)),b.length?(l(),d("span",go,p(e(s)("extensionsAreNotAllowed",[b.join(", ")])),1)):(l(),d("span",yo,p(e(s)("allFileExtensionsAreAllowed")),1))]),_:1})]),_:1})]),_:1},8,["max","headers","action"])]}),_:1})]),_:1})}}});export{Pt as default};
