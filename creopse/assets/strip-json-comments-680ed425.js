const p=Symbol("singleComment"),h=Symbol("multiComment"),d=()=>"",C=(t,o,a)=>t.slice(o,a).replace(/\S/g," "),x=(t,o)=>{let a=o-1,f=0;for(;t[a]==="\\";)a-=1,f+=1;return!!(f%2)};function y(t,{whitespace:o=!0,trailingCommas:a=!1}={}){if(typeof t!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof t}\``);const f=o?C:d;let r=!1,s=!1,l=0,i="",u="",n=-1;for(let e=0;e<t.length;e++){const c=t[e],m=t[e+1];if(!s&&c==='"'&&(x(t,e)||(r=!r)),!r)if(!s&&c+m==="//")i+=t.slice(l,e),l=e,s=p,e++;else if(s===p&&c+m===`\r
`){e++,s=!1,i+=f(t,l,e),l=e;continue}else if(s===p&&c===`
`)s=!1,i+=f(t,l,e),l=e;else if(!s&&c+m==="/*"){i+=t.slice(l,e),l=e,s=h,e++;continue}else if(s===h&&c+m==="*/"){e++,s=!1,i+=f(t,l,e+1),l=e+1;continue}else a&&!s&&(n!==-1?c==="}"||c==="]"?(i+=t.slice(l,e),u+=f(i,0,1)+i.slice(1),i="",l=e,n=-1):c!==" "&&c!=="	"&&c!=="\r"&&c!==`
`&&(i+=t.slice(l,e),l=e,n=-1):c===","&&(u+=i+t.slice(l,e),i="",l=e,n=e))}return u+i+(s?f(t.slice(l)):t.slice(l))}export{y as s};
