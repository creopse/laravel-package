import{_ as G}from"./index.vue_vue_type_style_index_0_lang-82518ec5.js";import{I as R}from"./iconify_vue-46af0b81.js";import{d as M}from"./pinia-a2cac08c.js";import{u as P,d as Q}from"./index-916f1e45.js";import{b as B}from"./axios-96fb5abd.js";import{d as U,p as N,w as x,o as d,c as T,a as g,r as q,F as D,P as y,aO as E,Q as V,Y as _,h as v}from"./vue_runtime-core-273b5003.js";import{r as F,u as o,c as h}from"./vue_reactivity-852d8377.js";import{u as H}from"./vue-i18n-0da1582b.js";import{n as w}from"./vue_shared-7dcc3b7f.js";import{_ as Y,j as X,E as Z}from"./naive-ui-ab0dda7d.js";import{_ as ee}from"./fawmi_vue-google-maps-439c501d.js";const te={class:"flex justify-between gap-2"},ae={class:"flex gap-0.5"},le=U({name:"I18nInput"}),oe=U({...le,props:{type:{default:"text"},size:{default:"medium"},autosize:{type:[Boolean,Object],default:!1},placeholder:{default:""},inputStyles:{default:()=>({width:"100%"})},displayFlag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},rows:{default:2},contentEditorItems:{default:()=>["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo","|","sourceEditing"]},shouldNotGroupEditorWhenFull:{type:Boolean,default:!1},enableUpload:{type:Boolean,default:!0},modelValue:{}},emits:["update:modelValue","codeChange"],setup(O,{emit:A}){const t=O,c=A,m=M("i18n-input",()=>({langCode:F("")}))(),l=F(""),p=N(()=>{let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e}),s=N({get(){let e;try{e=JSON.parse(t.modelValue||"{}")}catch{e={}}return e[l.value]||""},set(e){let a;try{a=JSON.parse(t.modelValue||"{}")}catch{a={}}a[l.value]=e,c("update:modelValue",JSON.stringify(a))}});x(()=>l.value,e=>{c("codeChange",e),m.langCode=e}),x(()=>m.langCode,e=>{t.sync&&(l.value=e)}),m.langCode&&(l.value=m.langCode);const{languages:b}=P();b.length&&!l.value&&(l.value=b[0].value);const J=e=>v("div",{class:"flex items-center"},[t.displayFlag?v("img",{src:e.flag,style:{width:"14px",marginRight:"4px"}}):v("span"),v("b",{},{default:()=>`${String(e.value).toUpperCase()}`})]),{t:z,locale:f}=H(),K=()=>{const e=p.value;e[l.value]=e[f.value],c("update:modelValue",JSON.stringify(e))},k=Q(),C=k.getSettingValue("translation.googleTranslate.apiKey","string"),S=k.getSettingValue("translation.deeplTranslate.apiKey","string"),L=async(e,a)=>{var r;const i="https://api-free.deepl.com/v2/translate";try{return(await B.post(i,new URLSearchParams({auth_key:S,text:e,target_lang:a.toUpperCase()}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.translations[0].text}catch(n){return console.error("Translation error:",((r=n==null?void 0:n.response)==null?void 0:r.data)||n.message),""}},W=async(e,a)=>{var r;const i=`https://translation.googleapis.com/language/translate/v2?key=${C}`;try{return(await B.post(i,{q:e,target:a,format:"text"})).data.data.translations[0].translatedText}catch(n){return console.error("Translation error:",((r=n==null?void 0:n.response)==null?void 0:r.data)||n.message),""}},$=async()=>{const e=p.value;C?e[l.value]=await W(e[f.value],l.value):S&&(e[l.value]=await L(e[f.value],l.value)),c("update:modelValue",JSON.stringify(e))};return(e,a)=>{const i=R,r=Y,n=X,j=G,I=Z;return d(),T("div",null,[g("div",te,[g("div",null,[q(e.$slots,"label",{},void 0,!0)]),g("div",ae,[o(p)&&o(p)[o(f)]&&!o(p)[o(l)]?(d(),T(D,{key:0},[o(C)||o(S)?(d(),y(r,{key:0,size:"tiny",title:o(z)("translate"),onClick:$},{icon:E(()=>[_(i,{icon:"carbon:translate"})]),_:1},8,["title"])):V("",!0),_(r,{title:o(z)("fillIn"),size:"tiny",onClick:K},{icon:E(()=>[_(i,{icon:"carbon:container-image-push"})]),_:1},8,["title"])],64)):V("",!0),_(n,{value:o(l),"onUpdate:value":a[0]||(a[0]=u=>h(l)?l.value=u:null),disabled:t.disabled,options:o(b),"render-label":J,class:"!w-[80px] !border-t-0",filterable:"",size:"tiny"},null,8,["value","disabled","options"])])]),g("div",null,[t.type=="editor"?(d(),y(j,{key:0,modelValue:o(s),"onUpdate:modelValue":a[1]||(a[1]=u=>h(s)?s.value=u:null),style:w(e.inputStyles),disabled:t.disabled,placeholder:e.placeholder,"toolbar-items":e.contentEditorItems,"should-not-group-when-full":t.shouldNotGroupEditorWhenFull,"enable-upload":t.enableUpload},null,8,["modelValue","style","disabled","placeholder","toolbar-items","should-not-group-when-full","enable-upload"])):t.type=="text"?(d(),y(I,{key:1,value:o(s),"onUpdate:value":a[2]||(a[2]=u=>h(s)?s.value=u:null),size:t.size,type:t.type,style:w(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","size","type","style","placeholder","disabled"])):t.type=="textarea"?(d(),y(I,{key:2,value:o(s),"onUpdate:value":a[3]||(a[3]=u=>h(s)?s.value=u:null),autosize:t.autosize,size:t.size,type:t.type,rows:e.rows,style:w(e.inputStyles),placeholder:e.placeholder,disabled:t.disabled},null,8,["value","autosize","size","type","rows","style","placeholder","disabled"])):V("",!0)])])}}});const ye=ee(oe,[["__scopeId","data-v-2ec7e993"]]);export{ye as _};
