import{_ as It,a as Yt,b as da}from"./index.vue_vue_type_script_setup_true_lang-7053db72.js";import{_ as za}from"./PageLayout.vue_vue_type_script_setup_true_lang-1f1f845c.js";import{_ as bt}from"./I18nInput-8a255c14.js";import{f as Il,p as ot,o as Ua,v as ml,T as Sa,a as Ma,w as Aa}from"./vue_runtime-dom-c0cb2070.js";import{e as Qe,u as Je,f as gt,r as Lt,p as Xt,q as oa,s as We,i as Zt,t as ca,_ as Pt,v as pa,w as Ea,x as vl,h as fa,j as Da,R as La}from"./index-f91d7fd7.js";import{I as be}from"./iconify_vue-6750bec6.js";import{_ as gl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-c2f6d3ad.js";import{R as et}from"./response-error-code-87d1097e.js";import{d as ll,a as je}from"./pinia-5dd13ed8.js";import{_ as he}from"./lodash-a9971f22.js";import{c as pt,b as nt,a as st,_ as ze,g as it,Z as Nt,V as zt,N as ce,L as lt,ag as $t,a2 as wt,P as Gt,a4 as ut,E as Ze,H as jt,I as ht,a8 as bl,a9 as hl,ah as Pa,F as ft,G as mt,ab as tl,a7 as kl,aa as ma,j as Vt,R as Rt,a5 as $l,ac as va,a3 as Vl,M as Ht,ai as Na,$ as al,a0 as nl,W as wl,U as _a,a1 as sl,aj as Ra,ak as Oa,k as qa,al as ya,O as ga,J as Fa,am as ba,e as ha,an as ja,ao as Ba,ap as Ka,h as Ya,n as Ga,o as Ha}from"./naive-ui-1f55be4a.js";import{d as Be,aF as yt,o as n,c as E,Y as t,aO as l,l as L,P as S,F as me,ar as Ne,a as g,Q as _e,i as _t,h as re,p as De,ag as Wt,as as xl,W as ka,w as kt,aH as Wa,v as ul,r as Ja,b as Tl,s as At,e as wa}from"./vue_runtime-core-4f5fb440.js";import{u as He}from"./vue-i18n-84a05dd5.js";import{r as o,u as e,c as $e,a as Ft}from"./vue_reactivity-852d8377.js";import{t as i,a as Ge,n as qe}from"./vue_shared-7dcc3b7f.js";import{_ as Ut}from"./fawmi_vue-google-maps-52673af8.js";import{o as Xa,a as Za}from"./vueuse_core-e3c6c607.js";import{s as Qa}from"./vue-virtual-scroller-50f85086.js";import{i as ia}from"./is-svg-36c6b3ab.js";import{_ as xa}from"./index.vue_vue_type_style_index_0_lang-a25bb5a4.js";import{M as el}from"./vue-pick-colors-f58bc48b.js";import{v as ct}from"./uuid-cf522c50.js";import{s as Ca}from"./slugify-ce681755.js";import{r as en,u as fl}from"./xlsx-83e6f69b.js";import{_ as Qt}from"./validator-c0254ba9.js";import{_ as tn}from"./VueTelInputWrapper-cb55e2a1.js";import{i as ln}from"./libphonenumber-js-cdb4849e.js";import{a as an}from"./vue-router-e670704e.js";import"./media-library-58b3d02b.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-77018b87.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-d1f69174.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var Dt=(ue=>(ue.IMAGE="image",ue.VIDEO="video",ue))(Dt||{});const _l=ll("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:ue}=Qe(),a=await ue({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),nn={class:"flex items-center justify-between"},sn={class:"flex flex-col"},on={class:"text-sm font-bold"},rn={class:"text-xs font-normal"},un={key:0,class:"text-xs font-bold"},dn=Be({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,displayFormErrors:Z,formatKey:ee}=Je(),_=yt(ue,"show"),{adIdentifiers:B}=je(_l()),{loadAdIdentifiers:$}=_l(),{isLightTheme:se}=je(gt()),O=o(!1),K=async()=>{O.value=!0,await $(),O.value=!1};K();const Y=pt(),z=nt(),v=st(),R=o(!1),M=o(!1),q=o(null),F=o(null),f=o({id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),le={id:[{required:!0,message:a("fillRequired")}]},N=H=>{q.value=he.cloneDeep(H),f.value=he.cloneDeep(H||{id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),M.value=!0},D=async()=>{var H;return(H=F.value)==null||H.validate(async U=>{var V,w,G,W,ae,s;if(!U){v.start(),R.value=!0;const A={id:f.value.id,reusable:f.value.reusable,contentType:f.value.contentType,contentSize:f.value.contentSize,params:f.value.params},T=await d({method:q.value?"put":"post",url:q.value?`/ad-identifiers/${q.value.id}`:"/ad-identifiers",data:A});if(T.failure&&T.error)switch((G=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:G.errorCode){case et.FORM_INVALID_DATA:Z((s=(ae=(W=T.error)==null?void 0:W.response)==null?void 0:ae.data)==null?void 0:s.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),K(),M.value=!1;R.value=!1,v.finish()}}),!1},te=async H=>{Y.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/ad-identifiers/${H.id}`})).success?(z.success(a("success")),K()):z.error(a("anErrorOccurred"))}})};return(H,U)=>{const V=be,w=ze,G=it,W=Nt,ae=zt,s=ce,A=lt,T=$t,c=wt,b=Gt,X=ut,u=Ze,r=jt,C=ht,I=bl,x=hl,h=Pa,k=ft,pe=mt;return n(),E(me,null,[t(X,{show:_.value,"onUpdate:show":U[2]||(U[2]=ne=>_.value=ne),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(G,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(O),onClick:U[0]||(U[0]=ne=>N(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(O),onClick:U[1]||(U[1]=ne=>_.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),L(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(b,{show:e(O)},{default:l(()=>[e(B).length?(n(),S(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Ne(e(B),ne=>(n(),S(A,{key:ne.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",nn,[g("div",sn,[g("span",on,i(ne.id),1),g("div",null,[g("span",rn,i(ne.contentType===e(Dt).IMAGE?e(a)("image"):e(a)("video")),1),ne.contentSize?(n(),E("span",un," Â ("+i(ne.contentSize)+") ",1)):_e("",!0)])]),t(G,null,{default:l(()=>[t(W,{size:"medium",bordered:!1,type:ne.reusable?"info":"warning"},{default:l(()=>[L(i(ne.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ae,{vertical:"",class:Ge(["!mx-0",e(p)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(w,{size:"small",type:"warning",secondary:e(se),onClick:Q=>N(ne)},{default:l(()=>[t(s,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(se),onClick:Q=>te(ne)},{default:l(()=>[t(s,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(A,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(s,{size:"60"},{default:l(()=>[t(V,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(M),"onUpdate:show":U[8]||(U[8]=ne=>$e(M)?M.value=ne:null),loading:e(R),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:U[9]||(U[9]=ne=>M.value=!1)},{default:l(()=>[t(pe,{ref_key:"formRef",ref:F,model:e(f),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(u,{value:e(f).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":U[3]||(U[3]=ne=>e(f).id=e(ee)(ne))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(u,{value:e(f).contentSize,"onUpdate:value":U[4]||(U[4]=ne=>e(f).contentSize=ne),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:24,"x-gap":"12"},{default:l(()=>[t(r,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(x,{value:e(f).reusable,"onUpdate:value":U[5]||(U[5]=ne=>e(f).reusable=ne),name:"reusable",class:"w-full"},{default:l(()=>[t(I,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(I,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(r,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(x,{value:e(f).contentType,"onUpdate:value":U[6]||(U[6]=ne=>e(f).contentType=ne),name:"contentType",class:"w-full"},{default:l(()=>[t(I,{value:e(Dt).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(I,{value:e(Dt).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(k,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(h,{value:e(f).params,"onUpdate:value":U[7]||(U[7]=ne=>e(f).params=ne),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),cn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},pn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},fn=["src"],mn=Be({__name:"index",setup(ue){const a=st(),d=nt(),p=pt(),Z=_t("appConfig"),{adIdentifiers:ee}=je(_l()),{loadAdIdentifiers:_}=_l(),{displayFormErrors:B,tr:$,fileUrl:se,pickByTheme:O,appSecondaryColor:K,isInDevMode:Y}=Je(),{request:z}=Qe(),{t:v,locale:R}=He(),M=o(!1),q=o([]),F=o(""),f=o(),le={pageSize:12,prefix:({itemCount:h})=>re("div",{class:"font-bold"},{default:()=>`${v("total")}: ${h}`})},N=[{title:v("preview"),key:"image",width:200,fixed:"left",render(h){var k;return((k=h.adIdentifier)==null?void 0:k.contentType)==Dt.IMAGE?re(tl,{src:h.contentUrl??"",objectFit:"cover",width:200,height:100}):re("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[re(ce,{size:50,color:K.value},{default:()=>re(be,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(h){return re("small",{},{default:()=>h.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(h){return re("div",{},{default:()=>$(h.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(h){return re("small",{},{default:()=>$(h.description)})}},{title:v("status"),key:"isActive",width:100,render(h){return re(Nt,{type:h.display?"success":"warning",bordered:!1},{default:()=>h.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(h){return re("div",{},{default:()=>Lt(h.updatedAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(h){return re("div",{},{default:()=>Lt(h.createdAt,{locale:R.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:f,placeholder:v("search"),value:F.value,onInput:h=>{F.value=h}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(h){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{c(h)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{p.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await z({method:"delete",url:`/ads/${h.id}`})).success?(d.success(v("success")),te()):d.error(v("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],D=De(()=>{if(!F.value)return q.value;const h=q.value.filter(k=>{var pe;return k.pid.toLowerCase().includes(F.value.toLowerCase())||k.title.toLowerCase().includes(F.value.toLowerCase())||((pe=k.description)==null?void 0:pe.toLowerCase().includes(F.value.toLowerCase()))});return f.value&&f.value.focus(),h}),te=async()=>{M.value=!0;const h=await z({url:"/ads"});h.success&&h.result&&(q.value=h.result.data),await _(),M.value=!1};te();const H=o(!1),U=o(!1),V=o(!1),w=o(Dt.IMAGE),G=o(),W=o(null),ae=o(null),s=o({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),A={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},T=De({get:()=>!s.value.broadcastStart||!s.value.broadcastEnd?null:[s.value.broadcastStart||"",s.value.broadcastEnd||""],set:h=>{h?(s.value.broadcastStart=h[0],s.value.broadcastEnd=h[1]):(s.value.broadcastStart=null,s.value.broadcastEnd=null)}}),c=h=>{var k;W.value=he.cloneDeep(h),h?(s.value=he.cloneDeep(h),h.data||(s.value.data={})):s.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},G.value=(k=ee.value.find(pe=>pe.id==s.value.pid))==null?void 0:k.params,U.value=!0},b=h=>re("span",{},{default:()=>h.id+(h.contentSize?` (${h.contentSize})`:"")}),X=async()=>{var h;return(h=ae.value)==null||h.validate(async k=>{var pe,ne,Q,y,j,ke;if(!k)if(W.value)if(W.value.title!==s.value.title&&q.value.findIndex(ye=>ye.title==s.value.title)>-1)d.error(v("sameAdTitleMessage"));else{a.start(),H.value=!0;const ye={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Te=await z({method:"put",url:`/ads/${W.value.id}`,data:ye});Te.success&&Te.result.data&&(d.success(v("success")),te()),H.value=!1,a.finish(),U.value=!1}else if(q.value.findIndex(ye=>ye.title==s.value.title)>-1)d.error(v("sameAdTitleMessage"));else{a.start(),H.value=!0;const ye={pid:s.value.pid,title:s.value.title,display:s.value.display,content:s.value.content,description:s.value.description,data:s.value.data,broadcastStart:s.value.broadcastStart,broadcastEnd:s.value.broadcastEnd},Te=await z({method:"post",url:"/ads",data:ye});if(Te.failure&&Te.error)switch((Q=(ne=(pe=Te.error)==null?void 0:pe.response)==null?void 0:ne.data)==null?void 0:Q.errorCode){case et.FORM_INVALID_DATA:B((ke=(j=(y=Te.error)==null?void 0:y.response)==null?void 0:j.data)==null?void 0:ke.data);break;default:d.error(v("anErrorOccurred"))}else d.success(v("success")),te();H.value=!1,a.finish(),U.value=!1}}),!1},u=o(!1),r=o(!1),C=o(!1),I=o(""),x=o("");return(h,k)=>{var oe,we;const pe=it,ne=It,Q=kl,y=gl,j=bt,ke=ft,ye=ma,Te=Vt,Ae=jt,fe=bl,Re=hl,Ce=ht,ie=Rt,ge=$l,P=mt,Ve=ut,J=Yt;return n(),E(me,null,[t(ne,{to:"#alt-action"},{default:l(()=>[t(pe,null,{default:l(()=>[e(Y)?(n(),S(e(ze),{key:0,type:"warning",onClick:k[0]||(k[0]=de=>V.value=!0)},{default:l(()=>[t(e(ce),{size:"26"},{default:l(()=>[t(e(be),{icon:"carbon:id"})]),_:1}),L(" "+i(e(v)("identifiers")),1)]),_:1})):_e("",!0),t(e(ze),{type:"primary",onClick:k[1]||(k[1]=de=>c(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(y,null,{default:l(()=>[t(Q,{columns:N,data:e(D),pagination:le,loading:e(M),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(Ve,{show:e(U),"onUpdate:show":k[12]||(k[12]=de=>$e(U)?U.value=de:null),loading:e(H),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:X,onNegativeClick:k[13]||(k[13]=de=>U.value=!1)},{default:l(()=>[t(P,{ref_key:"formRef",ref:ae,class:"mt-5",model:e(s),rules:A,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ce,{cols:"24","x-gap":12},{default:l(()=>[t(ie,{span:"12"},{default:l(()=>[t(ke,{label:e(v)("title"),path:"title"},{default:l(()=>[t(j,{modelValue:e(s).title,"onUpdate:modelValue":k[2]||(k[2]=de=>e(s).title=de),placeholder:e(v)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ke,{label:e(v)("description"),path:"description"},{default:l(()=>[t(j,{modelValue:e(s).description,"onUpdate:modelValue":k[3]||(k[3]=de=>e(s).description=de),placeholder:e(v)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ke,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(ye,{"formatted-value":e(T),"onUpdate:formattedValue":k[4]||(k[4]=de=>$e(T)?T.value=de:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(Ce,{"x-gap":"12",span:24},{default:l(()=>[t(Ae,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(Te,{value:e(s).pid,"onUpdate:value":[k[5]||(k[5]=de=>e(s).pid=de),k[6]||(k[6]=()=>{var de;G.value=(de=e(ee).find(Me=>Me.id==e(s).pid))==null?void 0:de.params})],"render-label":b,options:e(ee).map(de=>({...de,disabled:!de.reusable&&(de.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ae,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(Re,{value:e(s).display,"onUpdate:value":k[7]||(k[7]=de=>e(s).display=de),name:"display",class:"w-full"},{default:l(()=>[t(fe,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(fe,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(ie,{span:"12"},{default:l(()=>[t(ke,{label:e(v)("content"),path:"content"},{default:l(()=>[e(w)==e(Dt).VIDEO?(n(),S(ge,{key:0},{default:l(()=>[t(e(ze),{type:"primary",onClick:k[8]||(k[8]=()=>{r.value=!0})},{default:l(()=>[L(i(e(v)("select")),1)]),_:1}),t(e(Ze),{value:e(s).content?e(Xt)(e(s).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(s).content?(n(),E(me,{key:0},[t(e(ze),{type:"primary",ghost:"",onClick:k[9]||(k[9]=()=>{I.value=e(v)("video"),x.value=e(se)(e(s).content),C.value=!0})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[L(" "+i(e(v)("play")),1)]),_:1}),t(e(ze),{type:"primary",ghost:"",onClick:k[10]||(k[10]=()=>{e(s).content=""})},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(v)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})):(n(),E("div",cn,[g("div",{class:"cursor-pointer w-full h-[150px]",onClick:k[11]||(k[11]=()=>{u.value=!0})},[e(s).content?(n(),S(e(tl),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:qe("border: 1px dashed "+e(O)("green","white")),src:e(se)(e(s).content||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(O)("green","white"))},[t(e(ce),{size:64},{default:l(()=>[t(e(be),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(G)&&Array.isArray(e(G))?(n(),S(ke,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(Ce,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),E(me,null,Ne(e(G),(de,Me)=>(n(),E(me,{key:Me},[t(ie,{span:10},{default:l(()=>[t(e(Ze),{value:de,placeholder:de,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(ie,{span:14},{default:l(()=>[t(e(Ze),{value:e(s).data[de],"onUpdate:value":Se=>e(s).data[de]=Se,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):_e("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ve,{show:e(C),"onUpdate:show":k[14]||(k[14]=de=>$e(C)?C.value=de:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(I)},{default:l(()=>[g("video",pn,[g("source",{src:e(x)},null,8,fn)])]),_:1},8,["show","title"]),t(J,{show:e(u),"onUpdate:show":k[15]||(k[15]=de=>$e(u)?u.value=de:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((oe=e(Z))==null?void 0:oe.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[16]||(k[16]=de=>{e(s).content=de,u.value=!1})},null,8,["show","title","upload-config"]),t(J,{show:e(r),"onUpdate:show":k[17]||(k[17]=de=>$e(r)?r.value=de:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((we=e(Z))==null?void 0:we.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[18]||(k[18]=de=>{e(s).content=de,r.value=!1})},null,8,["show","title","upload-config"]),t(dn,{show:e(V),"onUpdate:show":k[19]||(k[19]=de=>$e(V)?V.value=de:null)},null,8,["show"])],64)}}});const vn=Ut(mn,[["__scopeId","data-v-7778d793"]]),_n={class:"w-full"},yn={class:"mb-2"},gn={class:"text-base text-left"},bn=["src","onClick"],hn=["src"],kn=Be({name:"AlbumsPicker"}),wn=Be({...kn,props:Wt({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const a=yt(ue,"modelValue"),d=ue,{t:p}=He(),{fileUrl:Z}=Je(),ee=o(!1),_=o(!1),B=o(0),$=o(""),se=_t("appConfig"),O=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},K=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},Y=(v,R)=>{a.value&&Array.isArray(a.value[R].medias)?a.value[R].medias.splice(v,1):a.value&&(a.value[R].medias=[])},z=v=>{var M,q;const R=((q=(M=v.split("."))==null?void 0:M.pop())==null?void 0:q.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(R)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(R)?"video":"unknown"};return(v,R)=>{var w;const M=be,q=ce,F=ze,f=bt,le=tl,N=xl("Draggable"),D=va,te=$t,H=lt,U=Yt,V=ut;return n(),E("section",_n,[g("section",yn,[t(H,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[g("div",gn,i(d.title),1)]),"header-extra":l(()=>[d.readonly?_e("",!0):(n(),S(F,{key:0,quaternary:"",onClick:O},{icon:l(()=>[t(q,{size:"18"},{default:l(()=>[t(M,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),E(me,null,Ne(a.value,(G,W)=>(n(),S(H,{key:W,size:"small",embedded:"",hoverable:"",segmented:G.medias&&G.medias.length>0,class:"mb-4"},ka({header:l(()=>[t(f,{modelValue:G.name,"onUpdate:modelValue":ae=>G.name=ae,placeholder:e(p)("albumName"),"selector-span":5,disabled:d.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(te,{style:{"max-height":"100%"}},{default:l(()=>[G.medias&&G.medias.length>0?(n(),S(D,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(N,{list:G.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),E(me,null,Ne(G.medias,(ae,s)=>(n(),E("div",{key:"img-"+s,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[z(ae)==="image"?(n(),S(le,{key:0,"object-fit":"cover",src:e(Z)(ae)},null,8,["src"])):(n(),E("video",{key:1,muted:"",src:e(Z)(ae),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{$.value=e(Z)(ae),_.value=!0}},null,8,bn)),d.readonly?_e("",!0):(n(),S(F,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:A=>Y(s,W)},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):_e("",!0)]),_:2},1024)]),_:2},[d.readonly?void 0:{name:"header-extra",fn:l(()=>[t(F,{quaternary:"",class:"mr-2",onClick:()=>{B.value=W,ee.value=!0}},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"]),R[3]||(R[3]=g("div",{class:"w-2"},null,-1)),t(F,{quaternary:"",type:"error",onClick:ae=>K(W)},{icon:l(()=>[t(q,null,{default:l(()=>[t(M,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(U,{show:e(ee),"onUpdate:show":R[0]||(R[0]=G=>$e(ee)?ee.value=G:null),title:e(p)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((w=e(se))==null?void 0:w.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:R[1]||(R[1]=G=>{a.value&&Array.isArray(a.value[e(B)].medias)?a.value[e(B)].medias.push(G):a.value&&(a.value[e(B)].medias=[G]),ee.value=!1})},null,8,["show","title","upload-config"]),t(V,{show:e(_),"onUpdate:show":R[2]||(R[2]=G=>$e(_)?_.value=G:null),preset:"card",style:{width:"500px"},title:e(p)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e($)?(n(),E("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e($)},null,8,hn)):_e("",!0)]),_:1},8,["show","title"])])}}});const xn=Ut(wn,[["__scopeId","data-v-338a28a2"]]);function Ia(){const{request:ue}=Qe(),a=o([]),d=B=>{const $=B.split("_"),se={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},O={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(Y=>Y.replace(/([A-Z])(?=\.\w+$)/,(z,v)=>O[v]||v))($[0]),$.length>1?se[$[1]]:""]},p=()=>new Promise(B=>setTimeout(B)),Z=async B=>{a.value=[];let $=1;for(const[se,O]of Object.entries(B)){$&&$%5e3===0&&await p();const[K,Y]=d(se);a.value.push({id:$,name:K,svgCode:O,library:Y}),$+=1}return a.value},ee=o(!1);return{searchIcons:async B=>{let $={};ee.value=!0;const se=await ue({url:"/search-icons",method:"post",data:{query:B,decode:!1}});if(se.success&&se.result){try{$=JSON.parse(se.result.data)}catch(O){$={},console.error(O)}$=await Z($)}return ee.value=!1,$},isSearching:ee,currentIconsList:a}}const Cn=["innerHTML"],In=Be({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(ue){Il(ee=>({"95b6e21e":e(p),"22e3431a":e(d)}));const a=ue,d=De(()=>a.color),p=De(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),Z=o();return kt(()=>a.data,async ee=>{var _,B;if(!ia(ee||"")){const{currentIconsList:$}=Ia();Z.value=((B=(_=$.value)==null?void 0:_.find(se=>se.name==ee))==null?void 0:B.svgCode)||""}},{immediate:!0}),(ee,_)=>(n(),E("i",{innerHTML:e(ia)(a.data||"")?a.data:e(Z)},null,8,Cn))}});const Cl=Ut(In,[["__scopeId","data-v-09747f05"]]),$n={key:0,class:"multiple"},Vn={key:0,class:"item"},Tn={key:2,class:"flex items-center ml-2"},zn={key:1,class:"placeholder"},Un={class:"v3ip__search"},Sn=["placeholder"],Mn={key:0,class:"v3ip__loader"},An=["onClick"],En={key:1,class:"v3ip__empty"},Dn={key:1,class:"default-text"},Ln={key:1,class:"default-text"},Pn=Be({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(ue,{emit:a}){Il(N=>({86121764:e(p),24235862:e(ee)}));const d=ue,p=De(()=>typeof d.selectorHeight=="number"?`${d.selectorHeight}px`:d.selectorHeight),Z=a,ee=o(d.selectedIconBgColor),_=o(""),B=o(!1),{currentIconsList:$,searchIcons:se,isSearching:O}=Ia();kt(()=>_.value,N=>{se(N)},{immediate:!0});const K=De(()=>he.uniqBy(he.uniqBy($.value.filter(N=>{var w,G;const D=typeof d.iconLibrary=="string"&&N.library==d.iconLibrary||Array.isArray(d.iconLibrary)&&d.iconLibrary.includes(N.library)||d.iconLibrary=="all",te=!d.includeIcons||!d.includeIcons.length||d.includeIcons.includes(N.name),H=!d.includeSearch||((w=N.name)==null?void 0:w.toLocaleLowerCase().includes(d.includeSearch)),U=!d.excludeIcons||!d.excludeIcons.length||!d.excludeIcons.includes(N.name),V=!d.excludeSearch||!((G=N.name)!=null&&G.toLocaleLowerCase().includes(d.excludeSearch));return D&&te&&H&&U&&V}),"svgCode"),"name")),Y=N=>d.valueType=="name"?N.name:N.svgCode,z=N=>{var D,te;return d.valueType=="name"?((te=(D=$.value)==null?void 0:D.find(H=>H.name==N))==null?void 0:te.svgCode)||"":N},v=N=>d.multiple?d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length?d.modelValue.findIndex(D=>D==Y(N))>-1:!1:d.modelValue==Y(N),R=N=>{if(N)if(d.multiple)if(d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length){const D=d.modelValue,te=d.modelValue.findIndex(H=>H==Y(N));te>-1?D.splice(te,1):d.modelValue.length<d.multipleLimit&&typeof Y(N)<"u"&&D.push(Y(N)),Z("update:modelValue",D),Z("change",D,N)}else d.multipleLimit>0&&(Z("update:modelValue",[Y(N)]),Z("change",[Y(N)],N));else Y(N)==d.modelValue?d.clearable&&Z("update:modelValue",null):Z("update:modelValue",Y(N)),Z("change",N)},M=o();Xa(M,()=>B.value=!1);const q=o(),{width:F}=Za(q),f=Wa(),le=N=>!!f[N];return(N,D)=>{var w,G,W,ae;const te=be,H=ce,U=ze,V=Gt;return n(),E("div",{ref_key:"picker",ref:M,class:"v3ip__custom-select",onBlur:D[4]||(D[4]=s=>B.value=!1)},[g("div",{class:Ge(["v3ip__selected",{open:e(B),disabled:d.disabled}]),onClick:D[2]||(D[2]=s=>B.value=d.disabled?!1:!e(B))},[!d.multiple&&d.modelValue||d.multiple&&Array.isArray(d.modelValue)&&((w=d.modelValue)!=null&&w.length)?(n(),E(me,{key:0},[d.multiple?(n(),E("div",$n,[Array.isArray(d.modelValue)?(n(),E(me,{key:0},[(n(!0),E(me,null,Ne(d.modelValue||[],(s,A)=>(n(),E(me,{key:A},[A<d.selectedItemsToDisplay?(n(),S(Cl,{key:0,class:"item",data:typeof z(s)=="string"?z(s):null,size:20,onClick:ot(T=>{var c;return R((c=e($))==null?void 0:c.find(b=>Y(b)==s))},["stop"])},null,8,["data","onClick"])):_e("",!0)],64))),128)),((G=d.modelValue)==null?void 0:G.length)>d.selectedItemsToDisplay?(n(),E("div",Vn,[g("b",null," +"+i(((W=d.modelValue)==null?void 0:W.length)-d.selectedItemsToDisplay),1)])):_e("",!0)],64)):_e("",!0)])):(n(),S(Cl,{key:1,data:typeof z(d.modelValue)=="string"?z(d.modelValue):null,size:20,onClick:D[0]||(D[0]=ot(s=>{var A;return R((A=e($))==null?void 0:A.find(T=>Y(T)==d.modelValue))},["stop"]))},null,8,["data"])),(ae=d.modelValue)!=null&&ae.length&&d.clearable?(n(),E("div",Tn,[t(U,{type:"error",size:"tiny",secondary:"",onClick:D[1]||(D[1]=ot(()=>{Z("update:modelValue",d.multiple?[]:null)},["stop"]))},{default:l(()=>[t(H,null,{default:l(()=>[t(te,{icon:"mdi:close"})]),_:1})]),_:1})])):_e("",!0)],64)):(n(),E("span",zn,i(d.placeholder),1))],2),t(Sa,{name:"fade"},{default:l(()=>[ul(g("div",null,[g("div",Un,[ul(g("input",{"onUpdate:modelValue":D[3]||(D[3]=s=>$e(_)?_.value=s:null),type:"text",name:"search",placeholder:d.searchPlaceholder},null,8,Sn),[[Ua,e(_)]])]),e(O)?(n(),E("div",Mn,[t(V,{size:"small"})])):(n(),E(me,{key:1},[e(K)&&e(K).length?(n(),S(e(Qa),{key:0,ref_key:"scroller",ref:q,class:"v3ip__items",items:e(K),"item-size":40,"grid-items":4,"item-secondary-size":e(F)/4},{default:l(({item:s})=>[g("div",{class:Ge({active:v(s)}),onClick:A=>R(s)},[t(Cl,{data:typeof s.svgCode=="string"?s.svgCode:null,size:24,color:v(s)?d.selectedIconColor:void 0},null,8,["data","color"])],10,An)]),_:1},8,["items","item-secondary-size"])):(n(),E("div",En,[e(_)?(n(),E(me,{key:0},[le("empty")?Ja(N.$slots,"empty",{key:0},void 0,!0):(n(),E("div",Dn,[g("small",null,i(d.emptyText),1)]))],64)):(n(),E("div",Ln,[g("small",null,i(d.iconsListPlaceholder),1)]))]))],64))],512),[[ml,e(B)]])]),_:3})],544)}}});const $a=Ut(Pn,[["__scopeId","data-v-20cc11c7"]]),Nn={class:"w-full"},Rn={class:"mb-2"},On={class:"text-base text-left"},qn=Be({name:"GridImagesPicker"}),Fn=Be({...qn,props:Wt({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const a=yt(ue,"modelValue"),d=_t("appConfig"),p=ue,{t:Z}=He(),{fileUrl:ee}=Je(),_=o(!1),B=se=>{Array.isArray(a.value)?a.value.splice(se,1):a.value=[]},$=async se=>{Array.isArray(a.value)?a.value.push(...se):a.value=[...se],_.value=!1};return(se,O)=>{var le;const K=be,Y=ce,z=ze,v=tl,R=xl("Draggable"),M=va,q=$t,F=lt,f=Yt;return n(),E("section",Nn,[g("section",Rn,[t(F,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[g("div",On,i(p.title),1)]),"header-extra":l(()=>[p.readonly?_e("",!0):(n(),S(z,{key:0,quaternary:"",onClick:O[0]||(O[0]=N=>_.value=!0)},{icon:l(()=>[t(Y,{size:"18"},{default:l(()=>[t(K,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("add")),1)]),_:1}))]),default:l(()=>[t(q,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),S(M,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(R,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),E(me,null,Ne(a.value,(N,D)=>(n(),E("div",{key:"img-"+D,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(ee)(N)},null,8,["src"]),p.readonly?_e("",!0):(n(),S(z,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>B(D)},{icon:l(()=>[t(Y,null,{default:l(()=>[t(K,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):_e("",!0)]),_:1})]),_:1},8,["segmented"])]),t(f,{show:e(_),"onUpdate:show":O[1]||(O[1]=N=>$e(_)?_.value=N:null),title:e(Z)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((le=e(d))==null?void 0:le.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:$},null,8,["show","title","upload-config"])])}}});const jn=Ut(Fn,[["__scopeId","data-v-12efa615"]]);var rt=(ue=>(ue.EXTERNAL_LINK="external-link",ue.PAGE_LINK="page-link",ue.CONTENT_LINK="content-link",ue))(rt||{}),at=(ue=>(ue.NEWS_TAG="news-tag",ue.NEWS_CATEGORY="news-category",ue.NEWS_ARTICLE="news-article",ue.CONTENT_MODEL="content-model",ue))(at||{});const dl=()=>{const{t:ue}=He(),{tr:a}=Je(),d=(_,B)=>{if(B&&B.titleFieldName)return oa(_.contentModelData.index[B.titleFieldName])?a(_.contentModelData.index[B.titleFieldName]):_.contentModelData.index[B.titleFieldName];if(_.contentModelData&&_.contentModelData.index){const $=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const se of $)if(_.contentModelData.index[se])return oa(_.contentModelData.index[se])?a(_.contentModelData.index[se]):_.contentModelData.index[se]}return a(_.title)},p=[{label:ue("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:ue("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:ue("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:ue("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:p,getContentTypeLabel:_=>{var B;return(B=p.find($=>$.value===_))==null?void 0:B.label},getContentTypeTagType:_=>{var B;return((B=p.find($=>$.value===_))==null?void 0:B.tagType)||"default"},extractItemTitle:d}},Bn={key:4,class:"w-full"},Kn={key:5,class:"w-full"},Yn={key:11,class:"w-full flex flex-gap-8 items-center justify-start"},Gn=["onClick"],Hn={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},Wn=["src"],Jn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Xn=["src"],Zn=Be({name:"FormGenerator"}),Qn=Be({...Zn,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(ue,{emit:a}){const d=ue,p=a,{t:Z}=He(),{tr:ee,pickByTheme:_,fileUrl:B,mergeArrays:$}=Je(),{extractItemTitle:se}=dl(),{request:O}=Qe(),{loadContentModels:K}=We(),{contentModels:Y}=je(We());K();const z=_t("appConfig");let v=[];if(typeof d.items=="string")try{v=JSON.parse(d.items)}catch{v=[]}else v=he.cloneDeep(d.items);let R={};if(d.useJson)try{R=JSON.parse(d.modelValue)}catch{R={}}const M=o(""),q=o(ct()),F=o(null),f=o(d.useJson?R:d.modelValue),le={};v.forEach(J=>{J.key in f.value||(J.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(J.type)?f.value[J.key]=JSON.parse(J.defaultValue):J.type=="number"?f.value[J.key]=parseFloat(J.defaultValue):J.type=="content-model-item"?f.value[J.key]=void 0:J.type=="content-model-items"?f.value[J.key]=[]:f.value[J.key]=J.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(J.type)?f.value[J.key]="":["number"].includes(J.type)?f.value[J.key]=0:["checkbox"].includes(J.type)?f.value[J.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums"].includes(J.type)?f.value[J.key]=[]:f.value[J.key]=void 0),J.required&&(le[J.key]=[{required:!0,message:Z("fillRequired")}]),q.value=ct()});const N=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],D=J=>re("span",{},{default:()=>ee(J.label)});kt(()=>f.value,J=>{const oe=d.useJson?JSON.stringify(J):J,we=async()=>{var Me;if(v.length==0)return!0;let de=!1;try{await((Me=F.value)==null?void 0:Me.validate(Se=>{de=!Se}))}catch{de=!1}return de};p("update:modelValue",oe),p("update",oe,we)},{immediate:!0,deep:!0});const te=gt(),H=De(()=>te.isLightTheme?"light":"dark"),U=o(!1),V=o(!1),w=o(!1),G=o(""),W=o(""),ae=o(!1),s=o(!1),A=o(""),T=o(""),c=o(!1),b=J=>{window.open(J,"_blank")},X=o(!1),u=o(!1),r=o([]);(async()=>{var oe;u.value=!0;const J=await O({url:"/menu/items"});if(J.success&&J.result)for(let we=0;we<((oe=J.result.data)==null?void 0:oe.length);we++)switch(J.result.data[we].targetType){case rt.EXTERNAL_LINK:r.value.findIndex(de=>de.url===J.result.data[we].url)===-1&&r.value.push(J.result.data[we]);break;case rt.PAGE_LINK:r.value.findIndex(de=>de.path===J.result.data[we].path)===-1&&r.value.push(J.result.data[we]);break}u.value=!1})();const I=o(!1),x=o([]),h=o([]),k=async(J,oe)=>{if(!J.length){h.value=[];return}I.value=!0;const we=await O({url:`/content-model-items/search/${J}/${oe}`});we.success&&we.result&&(h.value=we.result.data),I.value=!1},pe=De(()=>$(x.value,h.value,"id")),ne=o(!1),Q=o([]),y=o([]),j=async J=>{if(!J.length){y.value=[];return}ne.value=!0;const oe=await O({url:`/news-articles/search/${J}`});oe.success&&oe.result&&(y.value=oe.result.data),ne.value=!1},ke=De(()=>$(Q.value,y.value,"id")),{categories:ye,tags:Te}=je(Zt()),{loadCategories:Ae,loadTags:fe}=Zt();Tl(async()=>{v.find(J=>J.type==="news-categories"||J.type==="news-category")&&(Ae(),fe());for(let J=0;J<v.length;J++)if(v[J].type==="news-articles"||v[J].type==="news-article"){ne.value=!0;const oe=f.value[v[J].key],we=await O({url:"/news-articles/list",method:"post",data:{ids:v[J].type==="news-articles"?oe:[oe]}});we.success&&we.result&&(Q.value=$(Q.value,we.result.data,"id")),ne.value=!1}else if(v[J].type==="content-model-items"||v[J].type==="content-model-item"){I.value=!0;const oe=f.value[v[J].key],we=await O({url:"/content-model-items/list",method:"post",data:{ids:v[J].type==="content-model-items"?oe:[oe]}});we.success&&we.result&&(x.value=$(x.value,we.result.data,"id")),I.value=!1}});const Re=J=>re("span",{},{default:()=>`${ee(J.name)}`}),Ce=J=>re("span",{},{default:()=>`${ee(J.title)}`}),ie=J=>re("span",{},{default:()=>`${ee(J.name)}`}),ge=J=>De(()=>re("span",{},{default:()=>{var oe;return se(J,(oe=Y.value)==null?void 0:oe.find(we=>we.id===J.contentModelId))}})),P=({option:J})=>re("div",{style:{display:"flex",alignItems:"center"}},[`${ee(J.title)}`]),Ve=J=>re("div",{style:{marginLeft:"12px",padding:"4px 0"}},[re("div",{},{default:()=>`${ee(J.title)}`}),re("small",{},{default:()=>`${J.targetType==rt.EXTERNAL_LINK?J.url:J.path}`})]);return(J,oe)=>{var cl,pl,ol,il,rl;const we=Ze,de=bt,Me=xa,Se=Vl,Ee=Ht,Fe=ma,tt=Vt,xt=tl,Le=be,Xe=ce,Ke=ze,ve=jn,Ye=$a,Tt=xn,Ot=$l,qt=ft,St=mt,Ue=ut,dt=Yt;return n(),E(me,null,[(n(),S(St,{ref_key:"formRef",ref:F,key:e(q),model:e(f),rules:le,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:qe(d.formStyle)},{default:l(()=>[(n(!0),E(me,null,Ne(e(v),(m,Ie)=>(n(),S(qt,{key:Ie,label:e(ee)(m.label),path:m.key,"label-style":d.labelStyle,"show-require-mark":m.required,class:"w-full"},{default:l(()=>{var Bt,Jt,zl,Ul,Sl,Ml,Al,El,Dl,Ll,Pl,Nl,Rl,Ol,ql,Fl,jl,Bl,Kl,Yl,Gl,Hl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa;return[m.type=="text"?(n(),S(we,{key:0,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),maxlength:((Bt=m.settings)==null?void 0:Bt.maxLength)||void 0,minlength:((Jt=m.settings)==null?void 0:Jt.minLength)||void 0,clearable:((zl=m.settings)==null?void 0:zl.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):m.type=="i18n-text"?(n(),S(de,{key:1,modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):m.type=="textarea"?(n(),S(we,{key:2,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),maxlength:((Ul=m.settings)==null?void 0:Ul.maxLength)||void 0,minlength:((Sl=m.settings)==null?void 0:Sl.minLength)||void 0,clearable:((Ml=m.settings)==null?void 0:Ml.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):m.type=="i18n-textarea"?(n(),S(de,{key:3,modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):m.type=="editor"?(n(),E("div",Bn,[t(Me,{modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),"toolbar-items":N,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):m.type=="i18n-editor"?(n(),E("div",Kn,[t(de,{modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):m.type=="number"?(n(),S(Se,{key:6,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,max:((Al=m.settings)==null?void 0:Al.max)||void 0,min:((El=m.settings)==null?void 0:El.min)||void 0,step:((Dl=m.settings)==null?void 0:Dl.step)||1,clearable:((Ll=m.settings)==null?void 0:Ll.clearable)||!1,placeholder:e(ee)(m.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):m.type=="checkbox"?(n(),S(Ee,{key:7,checked:e(f)[m.key],"onUpdate:checked":xe=>e(f)[m.key]=xe,"checked-value":((Pl=m.settings)==null?void 0:Pl["checked-value"])||!0,"unchecked-value":((Nl=m.settings)==null?void 0:Nl["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):m.type=="date"?(n(),S(Fe,{key:8,"formatted-value":e(f)[m.key],"onUpdate:formattedValue":xe=>e(f)[m.key]=xe,"value-format":"yyyy-MM-dd",format:((Rl=m.settings)==null?void 0:Rl.format)||"dd MMMM yyyy",type:"date",clearable:((Ol=m.settings)==null?void 0:Ol.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):m.type=="year"?(n(),S(Fe,{key:9,"formatted-value":e(f)[m.key],"onUpdate:formattedValue":xe=>e(f)[m.key]=xe,"value-format":"yyyy",type:"year",clearable:((ql=m.settings)==null?void 0:ql.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):m.type=="single-select"||m.type=="multi-select"?(n(),S(tt,{key:10,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:(Fl=m.options||[])==null?void 0:Fl.map(xe=>{var vt;if(m.type=="multi-select"&&m.settings&&e(f)[m.key]){const Mt=((vt=m.settings)==null?void 0:vt.max)||1/0;return{...xe,disabled:e(f)[m.key].length>=Mt&&!e(f)[m.key].includes(xe.value)}}return xe}),multiple:m.type=="multi-select",placeholder:e(ee)(m.label),"render-label":D,"label-field":"label","value-field":"value",filterable:"",clearable:((jl=m.settings)==null?void 0:jl.clearable)||!0,"max-tag-count":((Bl=m.settings)==null?void 0:Bl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):m.type=="image"?(n(),E("div",Yn,[g("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{M.value=m.key,U.value=!0}},[e(f)[m.key]?(n(),S(xt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:qe("border: 1px dashed "+e(_)("green","white")),src:e(B)(e(f)[m.key]||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(_)("green","white"))},[t(Xe,{size:64},{default:l(()=>[t(Le,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Gn),e(f)[m.key]?(n(),S(Ke,{key:0,quaternary:"",onClick:()=>{M.value=m.key,e(f)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)])):m.type=="gallery"?(n(),S(ve,{key:12,modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,"upload-folder":"images",title:e(ee)(m.label)},null,8,["modelValue","onUpdate:modelValue","title"])):m.type=="news-category"||m.type=="news-categories"?(n(),S(tt,{key:13,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:(Kl=e(ye)||[])==null?void 0:Kl.map(xe=>{var vt;if(m.type=="news-categories"&&m.settings&&e(f)[m.key]){const Mt=((vt=m.settings)==null?void 0:vt.max)||1/0;return{...xe,disabled:e(f)[m.key].length>=Mt&&!e(f)[m.key].includes(xe.id)}}return xe}),multiple:m.type=="news-categories",placeholder:e(ee)(m.label),"render-label":Re,"label-field":"name","value-field":"id",filterable:"",clearable:((Yl=m.settings)==null?void 0:Yl.clearable)||!0,"max-tag-count":((Gl=m.settings)==null?void 0:Gl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):m.type=="news-tag"||m.type=="news-tags"?(n(),S(tt,{key:14,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:(Hl=e(Te)||[])==null?void 0:Hl.map(xe=>{var vt;if(m.type=="news-tags"&&m.settings&&e(f)[m.key]){const Mt=((vt=m.settings)==null?void 0:vt.max)||1/0;return{...xe,disabled:e(f)[m.key].length>=Mt&&!e(f)[m.key].includes(xe.id)}}return xe}),multiple:m.type=="news-tags",placeholder:e(ee)(m.label),"render-label":ie,"label-field":"name","value-field":"id",filterable:"",clearable:((Wl=m.settings)==null?void 0:Wl.clearable)||!0,"max-tag-count":((Jl=m.settings)==null?void 0:Jl["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):m.type=="news-article"||m.type=="news-articles"?(n(),S(tt,{key:15,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:(Xl=e(ke)||[])==null?void 0:Xl.map(xe=>{var vt;if(m.type=="news-articles"&&m.settings&&e(f)[m.key]){const Mt=((vt=m.settings)==null?void 0:vt.max)||1/0;return{...xe,disabled:e(f)[m.key].length>=Mt&&!e(f)[m.key].includes(xe.id)}}return xe}),multiple:m.type=="news-articles",placeholder:e(ee)(m.label),"render-label":Ce,loading:e(ne),"value-field":"id",filterable:"",clearable:((Zl=m.settings)==null?void 0:Zl.clearable)||!0,"max-tag-count":((Ql=m.settings)==null?void 0:Ql["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:j},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):m.type=="icon"||m.type=="icons"?(n(),S(Ye,{key:16,modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,placeholder:e(ee)(m.label),multiple:m.type=="icons","icons-list-placeholder":e(Z)("enterIconNameInSearchBar"),"search-placeholder":e(Z)("search"),"empty-text":e(Z)("noIconsFound"),"icon-library":((ea=m.settings)==null?void 0:ea.library)||"all",clearable:((ta=m.settings)==null?void 0:ta.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):m.type=="albums"?(n(),S(Tt,{key:17,modelValue:e(f)[m.key],"onUpdate:modelValue":xe=>e(f)[m.key]=xe,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):m.type=="audio"?(n(),S(Ot,{key:18},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=m.key,ae.value=!0}},{default:l(()=>[L(i(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(we,{value:e(f)[m.key]?e(Xt)(e(f)[m.key]):"",placeholder:e(Z)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(f)[m.key]?(n(),E(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:()=>{A.value=e(ee)(m.label),T.value=e(B)(e(f)[m.key]),s.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=m.key,e(f)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):m.type=="video"?(n(),S(Ot,{key:19},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=m.key,V.value=!0}},{default:l(()=>[L(i(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(we,{value:e(f)[m.key]?e(Xt)(e(f)[m.key]):"",placeholder:e(Z)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(f)[m.key]?(n(),E(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:()=>{G.value=e(ee)(m.label),W.value=e(B)(e(f)[m.key]),w.value=!0}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("play")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=m.key,e(f)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):m.type=="document"?(n(),S(Ot,{key:20},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=m.key,c.value=!0}},{default:l(()=>[L(i(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(we,{value:e(f)[m.key]?e(Xt)(e(f)[m.key]):"",placeholder:e(Z)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(f)[m.key]?(n(),E(me,{key:0},[t(Ke,{type:"primary",ghost:"",onClick:xe=>b(e(B)(e(f)[m.key]))},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("open")),1)]),_:2},1032,["onClick"]),t(Ke,{type:"primary",ghost:"",onClick:()=>{M.value=m.key,e(f)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("clear")),1)]),_:2},1032,["onClick"])],64)):_e("",!0)]),_:2},1024)):m.type=="file"?(n(),S(Ot,{key:21},{default:l(()=>[t(Ke,{type:"primary",onClick:()=>{M.value=m.key,X.value=!0}},{default:l(()=>[L(i(e(Z)("select")),1)]),_:2},1032,["onClick"]),t(we,{value:e(f)[m.key]?e(Xt)(e(f)[m.key]):"",placeholder:e(Z)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(f)[m.key]?(n(),S(Ke,{key:0,type:"primary",ghost:"",onClick:()=>{M.value=m.key,e(f)[e(M)]=""}},{icon:l(()=>[t(Xe,null,{default:l(()=>[t(Le,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(Z)("clear")),1)]),_:2},1032,["onClick"])):_e("",!0)]),_:2},1024)):m.type=="color"?(n(),S(e(el),{key:22,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,class:"cursor-pointer",theme:e(H),format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):m.type=="content-model-item"||m.type=="content-model-items"?(n(),S(tt,{key:23,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:(la=e(pe)||[])==null?void 0:la.map(xe=>{var vt;if(m.type=="content-model-items"&&m.settings&&e(f)[m.key]){const Mt=((vt=m.settings)==null?void 0:vt.max)||1/0;return{...xe,disabled:e(f)[m.key].length>=Mt&&!e(f)[m.key].includes(xe.id)}}return xe}),multiple:m.type=="content-model-items",placeholder:e(ee)(m.label),"render-label":xe=>ge(xe).value,loading:e(I),"value-field":"id",filterable:"",clearable:((aa=m.settings)==null?void 0:aa.clearable)||!0,"max-tag-count":((na=m.settings)==null?void 0:na["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:xe=>k(xe,m.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):m.type=="menu-item-link"?(n(),S(tt,{key:24,value:e(f)[m.key],"onUpdate:value":xe=>e(f)[m.key]=xe,options:e(r)||[],placeholder:e(ee)(m.label),"render-label":Ve,"render-tag":P,loading:e(u),"label-field":"title","value-field":"id",filterable:"",clearable:((sa=m.settings)==null?void 0:sa.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):_e("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(Ue,{show:e(s),"onUpdate:show":oe[0]||(oe[0]=m=>$e(s)?s.value=m:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(A)},{default:l(()=>[g("audio",Hn,[g("source",{src:e(T)},null,8,Wn)])]),_:1},8,["show","title"]),t(Ue,{show:e(w),"onUpdate:show":oe[1]||(oe[1]=m=>$e(w)?w.value=m:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(G)},{default:l(()=>[g("video",Jn,[g("source",{src:e(W)},null,8,Xn)])]),_:1},8,["show","title"]),t(dt,{show:e(U),"onUpdate:show":oe[2]||(oe[2]=m=>$e(U)?U.value=m:null),title:e(Z)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((cl=e(z))==null?void 0:cl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[3]||(oe[3]=m=>{e(f)[e(M)]=m,U.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(V),"onUpdate:show":oe[4]||(oe[4]=m=>$e(V)?V.value=m:null),title:e(Z)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((pl=e(z))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[5]||(oe[5]=m=>{e(f)[e(M)]=m,V.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(ae),"onUpdate:show":oe[6]||(oe[6]=m=>$e(ae)?ae.value=m:null),title:e(Z)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((ol=e(z))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[7]||(oe[7]=m=>{e(f)[e(M)]=m,ae.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(c),"onUpdate:show":oe[8]||(oe[8]=m=>$e(c)?c.value=m:null),title:e(Z)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((il=e(z))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[9]||(oe[9]=m=>{e(f)[e(M)]=m,c.value=!1})},null,8,["show","title","upload-config"]),t(dt,{show:e(X),"onUpdate:show":oe[10]||(oe[10]=m=>$e(X)?X.value=m:null),title:e(Z)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((rl=e(z))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:oe[11]||(oe[11]=m=>{e(f)[e(M)]=m,X.value=!1})},null,8,["show","title","upload-config"])],64)}}});const yl=Ut(Qn,[["__scopeId","data-v-00d6c901"]]),es={key:0},ts={key:1},ls={key:0},as={class:"flex items-center"},ns={class:"text-base"},ss={class:"flex items-center justify-center cursor-pointer gap-2"},os={key:1},is={class:"mt-4"},rs={key:2,class:"mt-2 text-xs"},us={class:"my-8"},ds={class:"flex items-center justify-between"},cs={class:"text-base"},ps=Be({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(ue,{emit:a}){const d=pt(),{t:p}=He(),Z=ue,ee=a,_=o(ct()),B=o({}),$=o({}),se=o(),O=o(),K=o(),Y=o([]),z=o([]),v=o({}),R=o({}),M=o(!1),q=o(!1),F=nt(),f=st(),{request:le}=Qe(),{tr:N,pickByTheme:D,editKeysToCamelCase:te}=Je(),{sections:H}=je(We()),{isLightTheme:U}=je(gt()),V=async()=>{var k,pe,ne,Q;q.value=M.value=!0,f.start();const x=await le({url:`/pages/${Z.slug}`});if(x.success&&x.result){if(K.value=x.result.data,(k=K.value)!=null&&k.sections&&Array.isArray((pe=K.value)==null?void 0:pe.sections)){const y={};for(const j of K.value.sections)j&&(y[j.slug]=j.dataSourcePageSectionsData??{});for(const j of K.value.sections)j&&(he.isObject(y)&&he.has(y,j.slug)&&ca(y[j.slug])?B.value[j.slug]=Ft(y[j.slug]):B.value[j.slug]=Ft({}),he.forIn(te(j.dataStructure),(ke,ye)=>{(!B.value[j.slug][ye]||Array.isArray(B.value[j.slug][ye])&&B.value[j.slug][ye].length==0)&&(ye==="index"?B.value[j.slug][ye]=Ft({}):B.value[j.slug][ye]=Ft([]))}))}if(K.value&&Array.isArray((ne=K.value)==null?void 0:ne.sections)){const y=K.value.sections;if(Array.isArray((Q=K.value)==null?void 0:Q.sectionsOrder)){Y.value=[];for(const j of K.value.sectionsOrder)if(j){const ke=y.find(ye=>ye.slug===j);ke&&Y.value.push(ke)}for(const j of y)Y.value.map(ke=>ke.slug).includes(j.slug)||Y.value.push(j)}else Y.value=he.cloneDeep(y);if(Array.isArray(K.value.sectionsDisabled))for(const j of K.value.sections)j&&(v.value[j.slug]=!K.value.sectionsDisabled.includes(j.slug));else for(const j of K.value.sections)j&&(v.value[j.slug]=!0)}R.value=he.cloneDeep(v.value),z.value=he.cloneDeep(Y.value),$.value=he.cloneDeep(B.value)}_.value=ct();function h(y){return new Promise(j=>setTimeout(j,y))}await h(5e3),f.finish(),q.value=M.value=!1};V();const w=x=>re("span",{},{default:()=>{var h;return x.id===((h=K.value)==null?void 0:h.id)?p("currentPage"):N(x.title)}}),G=De(()=>he.isEqual(B.value,$.value)&&he.isEqual(Y.value,z.value)&&he.isEqual(v.value,R.value)),W=async()=>{q.value=!0,f.start();const x=se.value&&await se.value(),h=O.value&&await O.value(),k=async()=>{const pe=await le({url:`/pages/${Z.slug}`,method:"put",data:{dispatchData:!0,sectionsData:B.value,sectionsOrder:Y.value.map(ne=>ne.slug),sectionsDisabled:Object.keys(v.value).filter(ne=>!v.value[ne])}});pe.success&&pe.result?(F.success(p("success")),V()):F.error(p("anErrorOccurred"))};(!se.value||x)&&(!O.value||h)?await k():d.warning({title:p("confirm"),content:p("mandatoryFieldsNotFilledInConfirmation"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:async()=>{await k()}}),f.finish(),q.value=!1},ae=async x=>{d.warning({title:p("confirm"),content:p("confirmDeletePage"),positiveText:p("yes"),negativeText:p("no"),onPositiveClick:async()=>{(await le({method:"delete",url:`/pages/${x.slug}`})).success?(ee("delete",K.value),F.success(p("success"))):F.error(p("anErrorOccurred"))}})},s=o(!1),A=o([]),T=o(!1),c=()=>{A.value=[],Y.value.forEach(x=>{x.id&&A.value.push(x.id)}),T.value=!0},b=x=>{x.id&&(A.value.includes(x.id)?A.value=A.value.filter(h=>h!==x.id):A.value.push(x.id))},X=x=>De({get:()=>x.id?A.value.includes(x.id):!1,set:h=>{x.id&&(h?A.value=A.value.filter(k=>k!==x.id):A.value.includes(x.id)||A.value.push(x.id))}}),u=x=>{x.id&&(A.value=[],Y.value.forEach(h=>{h.id&&h.id!==x.id&&A.value.push(h.id)}),r())},r=async()=>{s.value=!0,f.start();const x=await le({url:`/pages/${Z.slug}`,method:"put",data:{sectionsIds:A.value}});x.success&&x.result?(F.success(p("success")),V()):F.error(p("anErrorOccurred")),f.finish(),s.value=!1},C=async(x,h)=>{var pe;s.value=!0,f.start();const k=await le({url:`/sections/${x.slug}/data-source-page`,method:"put",data:{pageId:(pe=K.value)==null?void 0:pe.id,sourcePageId:h}});k.success&&k.result?(F.success(p("success")),V()):F.error(p("anErrorOccurred")),f.finish(),s.value=!1},I=async(x,h)=>{G.value?C(x,h):d.warning({title:p("confirm"),content:p("confirmUpdateDataSourcePage"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:()=>C(x,h)})};return(x,h)=>{const k=be,pe=ce,ne=ze,Q=zt,y=it,j=It,ke=Na,ye=Ht,Te=Nt,Ae=lt,fe=Vt,Re=al,Ce=nl,ie=xl("Draggable"),ge=wt,P=Pt,Ve=$t,J=ut;return n(),E(me,null,[t(j,{to:"#alt-action"},{default:l(()=>[t(y,{align:"center"},{default:l(()=>[t(ne,{type:"error",disabled:e(q),onClick:h[0]||(h[0]=oe=>e(K)?ae(e(K)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("delete")),1)]),_:1},8,["disabled"]),t(ne,{type:"info",disabled:e(q),onClick:h[1]||(h[1]=oe=>e(K)?x.openFormModal(e(K)):null)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("editPage")),1)]),_:1},8,["disabled"]),t(Q,{vertical:"",class:Ge(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(ne,{type:"primary",loading:e(q),disabled:e(G),onClick:h[2]||(h[2]=oe=>W())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(P,{appear:"",name:"slide-fade"},{default:l(()=>[e(M)?(n(),E("section",es,[(n(),E(me,null,Ne(6,oe=>t(ke,{key:oe,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),E("section",ts,[e(K)&&Array.isArray(e(K).sections)&&e(K).sections.length?(n(),E("section",ls,[t(ie,{list:e(Y)},{default:l(()=>[(n(!0),E(me,null,Ne(e(Y),(oe,we)=>(n(),S(Ae,{key:oe.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(Ce,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:de})=>[t(pe,null,{default:l(()=>[de?(n(),S(k,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>h[8]||(h[8]=[g("span",null,null,-1)])),default:l(()=>[t(Re,{name:"1"},{header:l(()=>[g("div",as,[t(pe,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(k,{icon:"fa-solid:grip-lines"})]),_:1}),t(ye,{checked:e(v)[oe.slug],"onUpdate:checked":de=>e(v)[oe.slug]=de,size:"small",class:"mr-4",onClick:h[3]||(h[3]=ot(()=>{},["stop"]))},{default:l(()=>[L(i(e(p)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(Te,{size:"small",type:"info"},{default:l(()=>[L(i(we+1),1)]),_:2},1024),t(Q,{vertical:"",class:Ge(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("span",ns,i(e(N)(oe.title)),1)])]),default:l(()=>[(n(!0),E(me,null,Ne(e(te)(oe.dataStructure),(de,Me)=>(n(),E(me,{key:Me},[String(Me)==="index"?(n(),S(Ae,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),S(yl,{key:`${e(_)}-${Me}-form-1`,modelValue:e(B)[oe.slug][Me],"onUpdate:modelValue":Se=>e(B)[oe.slug][Me]=Se,items:de,onUpdate:(Se,Ee)=>{se.value=Ee}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),S(Ae,{key:1,title:e(N)(de.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(ne,{quaternary:"",size:"small",onClick:()=>e(B)[oe.slug][Me].push({})},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),E(me,null,Ne(e(B)[oe.slug][Me],(Se,Ee)=>(n(),S(Ae,{key:Ee,title:String(Ee+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(ne,{type:"error",size:"small",onClick:()=>e(B)[oe.slug][Me].splice(Ee,1)},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),S(yl,{key:`${e(_)}-${Me}-${Ee}-form-2`,modelValue:e(B)[oe.slug][Me][Ee],"onUpdate:modelValue":Fe=>e(B)[oe.slug][Me][Ee]=Fe,items:de.items,onUpdate:(Fe,tt)=>{O.value=tt}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(y,null,{default:l(()=>[t(ne,{size:"small",type:"error",secondary:e(U),onClick:de=>u(oe)},{default:l(()=>[t(pe,{size:"21"},{default:l(()=>[t(k,{icon:"carbon:close"})]),_:1}),L(" "+i(e(p)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(Q,{vertical:"",class:Ge(e(D)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(y,{align:"center"},{default:l(()=>[g("span",null,i(e(p)("dataSourcePage")),1),t(fe,{value:oe.dataSourcePageId,options:oe.pages||[],placeholder:e(p)("select"),"render-label":w,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":de=>I(oe,de)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(Ae,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:h[4]||(h[4]=oe=>c())},{default:l(()=>[g("div",ss,[t(pe,{size:"20"},{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1}),L(" "+i(e(p)("addSection")),1)])]),_:1})])):(n(),E("section",os,[t(Ae,{size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(D)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ge,{description:e(p)("noSectionOnThisPage")},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[g("div",is,[t(ne,{size:"small",onClick:h[5]||(h[5]=oe=>c())},{icon:l(()=>[t(pe,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(K)?(n(),E("div",rs,[L(i(e(p)("dataRetrievalSlug"))+": ",1),g("b",null,i(e(K).slug),1)])):_e("",!0)]))]),_:1}),t(J,{show:e(T),"onUpdate:show":h[6]||(h[6]=oe=>$e(T)?T.value=oe:null),loading:e(s),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(p)("addSections"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:r,onNegativeClick:h[7]||(h[7]=oe=>T.value=!1)},{default:l(()=>[g("section",us,[t(Ve,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Ne(e(H),oe=>(n(),S(Ae,{key:oe.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:we=>b(oe)},{default:l(()=>[g("div",ds,[g("span",cs,i(e(N)(oe.title)),1),t(ye,{checked:X(oe).value,"onUpdate:checked":we=>X(oe).value=we,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),fs={class:"flex items-center justify-between"},ms={class:"flex flex-col"},vs={class:"text-sm font-bold"},_s=Be({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:Z,displayFormErrors:ee}=Je(),_=yt(ue,"show"),{menuItemGroups:B}=je(We()),{loadMenuItemGroups:$}=We(),{isLightTheme:se}=je(gt()),O=o(!1),K=async()=>{O.value=!0,await $(),O.value=!1};K();const Y=pt(),z=nt(),v=st(),R=o(!1),M=o(!1),q=o(null),F=o(null),f=o({name:"",description:""}),le={name:[{required:!0,message:a("fillRequired")}]},N=H=>{q.value=he.cloneDeep(H),f.value=he.cloneDeep(H||{name:"",description:""}),M.value=!0},D=async()=>{var H;return(H=F.value)==null||H.validate(async U=>{var V,w,G,W,ae,s;if(!U){v.start(),R.value=!0;const A={name:f.value.name,description:f.value.description},T=await d({method:q.value?"put":"post",url:q.value?`/menu-item-groups/${q.value.id}`:"/menu-item-groups",data:A});if(T.failure&&T.error)switch((G=(w=(V=T.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:G.errorCode){case et.FORM_INVALID_DATA:ee((s=(ae=(W=T.error)==null?void 0:W.response)==null?void 0:ae.data)==null?void 0:s.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),K(),M.value=!1;R.value=!1,v.finish()}}),!1},te=async H=>{Y.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-item-groups/${H.id}`})).success?(z.success(a("success")),K()):z.error(a("anErrorOccurred"))}})};return(H,U)=>{const V=be,w=ze,G=it,W=wl,ae=ce,s=lt,A=$t,T=wt,c=Gt,b=ut,X=bt,u=ft,r=mt;return n(),E(me,null,[t(b,{show:_.value,"onUpdate:show":U[2]||(U[2]=C=>_.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(G,{align:"center"},{default:l(()=>[t(w,{size:"small",type:"primary",disabled:e(O),onClick:U[0]||(U[0]=C=>N(null))},{default:l(()=>[t(V,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(w,{size:"small",type:"error",disabled:e(O),onClick:U[1]||(U[1]=C=>_.value=!1)},{default:l(()=>[t(V,{icon:"carbon:close",class:"mr-1"}),L(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(c,{show:e(O)},{default:l(()=>[e(B).length?(n(),S(A,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Ne(e(B),C=>(n(),S(s,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",fs,[g("div",ms,[g("span",vs,i(e(Z)(C.name)),1),t(W,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[L(i(e(Z)(C.description)),1)]),_:2},1024)]),t(G,null,{default:l(()=>[t(w,{size:"small",type:"warning",secondary:e(se),onClick:I=>N(C)},{default:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(w,{size:"small",type:"error",secondary:e(se),onClick:I=>te(C)},{default:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(s,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(T,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ae,null,{default:l(()=>[t(V,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(b,{show:e(M),"onUpdate:show":U[5]||(U[5]=C=>$e(M)?M.value=C:null),loading:e(R),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(q)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:D,onNegativeClick:U[6]||(U[6]=C=>M.value=!1)},{default:l(()=>[t(r,{ref_key:"formRef",ref:F,model:e(f),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("name"),path:"name"},{default:l(()=>[t(X,{modelValue:e(f).name,"onUpdate:modelValue":U[3]||(U[3]=C=>e(f).name=C),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(X,{modelValue:e(f).description,"onUpdate:modelValue":U[4]||(U[4]=C=>e(f).description=C),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ys=Be({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Wt(["update"],["update:content-type","update:content-id"]),setup(ue,{emit:a}){const{t:d}=He(),{tr:p,mergeArrays:Z}=Je(),{request:ee}=Qe(),{contentTypes:_,extractItemTitle:B}=dl(),{loadContentModels:$}=We(),{contentModels:se}=je(We()),O=a;$();const K=yt(ue,"content-type"),Y=yt(ue,"content-id"),z=o(),v=o(!1),R=o([]),M=o([]),q=async(T,c)=>{if(!T.length){M.value=[];return}v.value=!0;const b=await ee({url:`/content-model-items/search/${T}/${c}`});b.success&&b.result&&(M.value=b.result.data),v.value=!1},F=De(()=>Z(R.value,M.value,"id")),f=o(!1),le=o([]),N=o([]),D=async T=>{if(!T.length){N.value=[];return}f.value=!0;const c=await ee({url:`/news-articles/search/${T}`});c.success&&c.result&&(N.value=c.result.data),f.value=!1},te=De(()=>Z(le.value,N.value,"id")),{categories:H}=je(Zt()),{loadCategories:U}=Zt(),{tags:V}=je(Zt()),{loadTags:w}=Zt();Tl(async()=>{var b;U(),w(),f.value=!0;const T=await ee({url:"/news-articles/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});T.success&&T.result&&(le.value=Z(le.value,T.result.data,"id")),f.value=!1,v.value=!0;const c=await ee({url:"/content-model-items/list",method:"post",data:{ids:Y.value?[Y.value]:[]}});c.success&&c.result&&(R.value=Z(R.value,c.result.data,"id"),z.value=(b=R.value.find(X=>X.id===Y.value))==null?void 0:b.contentModelId),v.value=!1});const G=T=>re("span",{},{default:()=>`${p(T.name)}`}),W=T=>re("span",{},{default:()=>`${p(T.title)}`}),ae=T=>re("span",{},{default:()=>`${p(T.name)}`}),s=T=>re("span",{},{default:()=>p(T.title)}),A=T=>De(()=>re("span",{},{default:()=>{var c;return B(T,(c=se.value)==null?void 0:c.find(b=>b.id===T.contentModelId))}}));return(T,c)=>{const b=Vt,X=jt,u=ht;return n(),S(u,{"x-gap":"12",span:24},{default:l(()=>[t(X,{span:8,label:e(d)("contentType"),path:"contentType"},{default:l(()=>[t(b,{value:K.value,"onUpdate:value":[c[0]||(c[0]=r=>K.value=r),c[1]||(c[1]=()=>Y.value=void 0)],options:e(_)||[],placeholder:e(d)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),K.value===e(at).CONTENT_MODEL?(n(),E(me,{key:0},[t(X,{span:8,label:e(d)("contentModel")},{default:l(()=>[t(b,{value:e(z),"onUpdate:value":c[2]||(c[2]=r=>$e(z)?z.value=r:null),options:e(se),placeholder:e(d)("search"),"render-label":s,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(X,{span:8,label:e(d)("item"),path:"contentId"},{default:l(()=>[t(b,{value:Y.value,"onUpdate:value":[c[3]||(c[3]=r=>Y.value=r),c[5]||(c[5]=(r,C)=>O("update",r,C,K.value))],options:e(F)||[],placeholder:e(d)("search"),"render-label":r=>A(r).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[4]||(c[4]=r=>q(r,e(z)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):_e("",!0),K.value===e(at).NEWS_ARTICLE?(n(),S(X,{key:1,span:16,label:e(d)("newsArticle"),path:"contentId"},{default:l(()=>[t(b,{value:Y.value,"onUpdate:value":[c[6]||(c[6]=r=>Y.value=r),c[7]||(c[7]=(r,C)=>O("update",r,C,K.value))],options:e(te)||[],placeholder:e(d)("search"),"render-label":W,loading:e(f),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:D},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):_e("",!0),K.value===e(at).NEWS_CATEGORY?(n(),S(X,{key:2,span:16,label:e(d)("newsCategory"),path:"contentId"},{default:l(()=>[t(b,{value:Y.value,"onUpdate:value":[c[8]||(c[8]=r=>Y.value=r),c[9]||(c[9]=(r,C)=>O("update",r,C,K.value))],options:e(H)||[],placeholder:e(d)("select"),"render-label":G,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0),K.value===e(at).NEWS_TAG?(n(),S(X,{key:3,span:16,label:e(d)("newsTag"),path:"contentId"},{default:l(()=>[t(b,{value:Y.value,"onUpdate:value":[c[10]||(c[10]=r=>Y.value=r),c[11]||(c[11]=(r,C)=>O("update",r,C,K.value))],options:e(V)||[],placeholder:e(d)("select"),"render-label":ae,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):_e("",!0)]),_:1})}}}),gs={class:"flex items-center"},bs={class:"flex flex-col"},hs={class:"text-sm font-bold"},ks={key:0,class:"text-sm"},ws={class:"text-xs font-normal"},xs={class:"text-xs my-1"},Cs={class:"flex items-center"},Is={class:"flex flex-col"},$s={class:"text-sm font-bold"},Vs={class:"text-xs font-normal"},Ts={key:0,class:"mt-4"},zs={class:"my-8"},Us={class:"flex items-center justify-between"},Ss={class:"flex flex-col"},Ms={class:"text-sm font-bold"},As={class:"text-xs font-normal"},Es={class:"flex items-center"},Ds={key:0},Ls={key:1},Ps={key:2},Ns=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=dl(),{tr:Z,displayFormErrors:ee,pickByTheme:_}=Je(),{isLightTheme:B}=je(gt()),{pages:$,menuItemGroups:se,contentModels:O}=je(We()),{loadPages:K,loadMenuItemGroups:Y}=We(),z=st(),v=nt(),R=pt(),M=yt(ue,"modelValue"),q=o([]),F=o([]),f=o(!1),le=o(""),N=o(),D=De(()=>{if(!le.value)return q.value;const Q=q.value.filter(y=>{var j;return y.title.toLowerCase().includes(le.value.toLowerCase())||((j=y.description)==null?void 0:j.toLowerCase().includes(le.value.toLowerCase()))||y.children.some(ke=>{var ye;return ke.title.toLowerCase().includes(le.value.toLowerCase())||((ye=ke.description)==null?void 0:ye.toLowerCase().includes(le.value.toLowerCase()))})});return N.value&&N.value.focus(),Q}),te=async(Q=!1)=>{z.start(),f.value=!0;const y=await d({url:"/menu/items"});if(y.success&&y.result){q.value=y.result.data.filter(j=>{var ke;return!j.parentId&&j.menuId===((ke=M.value)==null?void 0:ke.id)});for(let j=0;j<q.value.length;j++)q.value[j].children=y.result.data.filter(ke=>{var ye;return ke.parentId===q.value[j].id&&ke.menuId===((ye=M.value)==null?void 0:ye.id)});F.value=y.result.data.filter(j=>{var ke;return j.menuId!==((ke=M.value)==null?void 0:ke.id)})}Q&&(K(),await Y()),f.value=!1,z.finish()};te(!0);const H=o(12),U=o(1),V=Q=>{H.value=Q},w={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:rt.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},G=o(null),W=o(!1),ae=o(!1),s=o(!1),A=o(null),T=o(null),c=o(w),b=De(()=>{const Q={title:[{required:!0,message:a("fillRequired")}]};return c.value.targetType===rt.PAGE_LINK?(Q.pageId=[{required:!0,message:a("fillRequired")}],Q.path=[{required:!0,message:a("fillRequired")}]):c.value.targetType===rt.EXTERNAL_LINK?Q.url=[{required:!0,message:a("fillRequired")}]:c.value.targetType===rt.CONTENT_LINK&&(Q.contentId=[{required:!0,message:a("fillRequired")}],Q.contentType=[{required:!0,message:a("fillRequired")}]),Q}),X=(Q,y=null)=>{A.value=he.cloneDeep(Q),G.value=y,Q?(c.value=he.cloneDeep(Q),ae.value=!0):(c.value=he.cloneDeep(w),F.value.length>0?s.value=!0:ae.value=!0)},u=async Q=>{R.warning({title:a("confirm"),content:Q.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu/items/${Q.id}`})).success?(v.success(a("success")),te()):v.error(a("anErrorOccurred"))}})},r=async Q=>{var j,ke,ye,Te,Ae,fe,Re;z.start(),W.value=!0;const y=await d({method:"post",url:"/menu/items",data:{title:Q.title,path:Q.path,url:Q.url,description:Q.description,isActive:!0,isVisible:!0,color:Q.color,icon:Q.icon,position:Q.position,targetType:Q.targetType,parentId:G.value,menuId:(j=M.value)==null?void 0:j.id,sectionId:Q.sectionId,menuItemGroupId:Q.menuItemGroupId,pageId:Q.pageId}});if(y.failure&&y.error)switch((Te=(ye=(ke=y.error)==null?void 0:ke.response)==null?void 0:ye.data)==null?void 0:Te.errorCode){case et.FORM_INVALID_DATA:ee((Re=(fe=(Ae=y.error)==null?void 0:Ae.response)==null?void 0:fe.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();W.value=!1,z.finish(),s.value=!1},C=async()=>{var Q;return(Q=T.value)==null||Q.validate(async y=>{var j,ke,ye,Te,Ae,fe,Re;if(!y){const Ce={title:c.value.title,path:c.value.path,url:c.value.url,description:c.value.description,isActive:c.value.isActive,isVisible:c.value.isVisible,color:c.value.color,icon:c.value.icon,position:c.value.position,targetType:c.value.targetType,parentId:G.value,menuId:(j=M.value)==null?void 0:j.id,sectionId:c.value.sectionId,menuItemGroupId:c.value.menuItemGroupId,pageId:c.value.pageId,contentId:c.value.contentId,contentType:c.value.contentType};if(A.value)if(A.value.title!==c.value.title&&q.value.findIndex(ie=>ie.title==c.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{z.start(),W.value=!0;const ie=await d({method:"put",url:`/menu/items/${A.value.id}`,data:Ce});ie.success&&ie.result.data&&(v.success(a("success")),te()),W.value=!1,z.finish(),ae.value=!1}else if(q.value.findIndex(ie=>ie.title==c.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{z.start(),W.value=!0;const ie=await d({method:"post",url:"/menu/items",data:Ce});if(ie.failure&&ie.error)switch((Te=(ye=(ke=ie.error)==null?void 0:ke.response)==null?void 0:ye.data)==null?void 0:Te.errorCode){case et.FORM_INVALID_DATA:ee((Re=(fe=(Ae=ie.error)==null?void 0:Ae.response)==null?void 0:fe.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),te();W.value=!1,z.finish(),ae.value=!1}}}),!1},I=async(Q,y)=>{(await d({method:"put",url:"/menu/items/position",data:{items:y}})).success&&te()},x=Q=>re("span",{},{default:()=>Z(Q.title)}),h=Q=>re("span",{},{default:()=>Z(Q.name)}),k=Q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(Q),pe=Q=>{if(Q.targetType==rt.EXTERNAL_LINK)return Q.url;if(Q.targetType==rt.PAGE_LINK)return Q.path;if(Q.targetType==rt.CONTENT_LINK)switch(Q.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},ne=async(Q,y,j)=>{var ke;if(!Z(c.value.title))switch(j){case at.CONTENT_MODEL:c.value.title=p(y,(ke=O.value)==null?void 0:ke.find(ye=>ye.id===y.contentModelId));break;case at.NEWS_ARTICLE:c.value.title=y.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:c.value.title=y.name;break}};return(Q,y)=>{const j=be,ke=it,ye=It,Te=_a,Ae=Nt,fe=zt,Re=lt,Ce=xl("Draggable"),ie=al,ge=nl,P=sl,Ve=wt,J=Pt,oe=$t,we=ut,de=bt,Me=ft,Se=Vl,Ee=jt,Fe=bl,tt=hl,xt=ht,Le=$a,Xe=Vt,Ke=mt;return n(),E(me,null,[t(ye,{to:"#alt-action"},{default:l(()=>[t(ke,{align:"center"},{default:l(()=>[e(D).length?(n(),S(e(ze),{key:0,type:"primary",onClick:y[0]||(y[0]=ve=>X(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addMenuItem")),1)]),_:1})):_e("",!0)]),_:1})]),_:1}),t(Te,{class:"mt-2 mb-5",onBack:y[2]||(y[2]=ve=>M.value=null)},{title:l(()=>{var ve;return[L(i(e(Z)((ve=M.value)==null?void 0:ve.title)),1)]}),back:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Ze),{ref_key:"searchInputRef",ref:N,value:e(le),"onUpdate:value":y[1]||(y[1]=ve=>$e(le)?le.value=ve:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(J,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(D)&&e(D).length?(n(),E(me,{key:0},[t(Ce,{list:e(q),onChange:y[3]||(y[3]=ve=>I(ve,e(q)))},{default:l(()=>[(n(!0),E(me,null,Ne(e(D).slice((e(U)-1)*e(H),e(U)*e(H)),ve=>(n(),S(Re,{key:ve.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ge,{"default-expanded-names":ve.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ye})=>[t(ke,{align:"center"},{default:l(()=>[t(Ae,{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:l(()=>[L(i(ve.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Ae,{size:"small",bordered:!1,type:ve.isVisible?"info":"warning"},{default:l(()=>[L(i(ve.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ge(["!mx-0",e(_)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(ze),{size:"small",type:"primary",secondary:e(B),onClick:ot(Tt=>X(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"error",secondary:e(B),onClick:ot(Tt=>u(ve),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"info",secondary:e(B),onClick:ot(Tt=>X(null,ve.id),["stop"])},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:category"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("subMenuItem"))+" ",1),t(Ae,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[L(i(ve.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),y[27]||(y[27]=g("div",{class:"w-6"},null,-1)),t(e(ce),null,{default:l(()=>[Ye?(n(),S(j,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(j,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>y[28]||(y[28]=[g("span",null,null,-1)])),default:l(()=>[t(ie,{name:"1"},{header:l(()=>{var Ye;return[g("div",gs,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(j,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ge(e(_)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",bs,[g("div",null,[g("span",hs,i(e(Z)(ve.title)),1),ve.group?(n(),E("span",ks," Â ("+i(e(Z)((Ye=ve.group)==null?void 0:Ye.name))+") ",1)):_e("",!0)]),g("small",ws,i(pe(ve)),1)])])]}),default:l(()=>[ve.description?(n(),E(me,{key:0},[t(fe,{class:Ge([e(_)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),g("div",xs,i(e(Z)(ve.description)),1)],64)):_e("",!0),ve.children.length?(n(),E(me,{key:1},[t(fe,{class:Ge([e(_)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(Ce,{list:ve.children,onChange:Ye=>I(Ye,ve.children)},{default:l(()=>[(n(!0),E(me,null,Ne(ve.children,Ye=>(n(),S(Re,{key:Ye.id,size:"small",class:"mb-1"},{header:l(()=>[g("div",Cs,[t(e(ce),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(j,{icon:"fa-solid:grip-lines"})]),_:1}),t(fe,{vertical:"",class:Ge(e(_)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",Is,[g("span",$s,i(e(Z)(Ye.title)),1),g("small",Vs,i(pe(Ye)),1)])])]),"header-extra":l(()=>[t(ke,{align:"center"},{default:l(()=>[t(Ae,{size:"small",bordered:!1,type:Ye.isActive?"success":"error"},{default:l(()=>[L(i(Ye.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(Ae,{size:"small",bordered:!1,type:Ye.isVisible?"info":"warning"},{default:l(()=>[L(i(Ye.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(fe,{vertical:"",class:Ge(["!mx-0",e(_)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(ze),{size:"small",type:"primary",secondary:e(B),onClick:ot(Tt=>X(Ye,ve.id),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(ze),{size:"small",type:"error",secondary:e(B),onClick:ot(Tt=>u(Ye),["stop"])},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):_e("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(P,{page:e(U),"onUpdate:page":y[4]||(y[4]=ve=>$e(U)?U.value=ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(H),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(H)),"onUpdate:pageSize":V},{prefix:l(()=>[L(i(`${e(q).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(Re,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(_)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ve,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[e(le)?(n(),S(j,{key:0,icon:"carbon:search"})):(n(),S(j,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(le)?_e("",!0):(n(),E("div",Ts,[t(e(ze),{size:"small",onClick:y[5]||(y[5]=ve=>X(null))},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(we,{show:e(s),"onUpdate:show":y[6]||(y[6]=ve=>$e(s)?s.value=ve:null),loading:e(W),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(G)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:y[7]||(y[7]=()=>{s.value=!1,ae.value=!0}),onNegativeClick:y[8]||(y[8]=ve=>s.value=!1)},{default:l(()=>[g("section",zs,[t(oe,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Ne(e(F),ve=>(n(),S(Re,{key:ve.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",Us,[g("div",Ss,[g("span",Ms,i(e(Z)(ve.title)),1),g("small",As,i(pe(ve)),1)]),t(e(ze),{size:"small",type:"primary",secondary:e(B),onClick:Ye=>r(ve)},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(we,{show:e(ae),"onUpdate:show":y[25]||(y[25]=ve=>$e(ae)?ae.value=ve:null),loading:e(W),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(A)?e(G)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(G)?e(F).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(F).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:C,onNegativeClick:y[26]||(y[26]=ve=>ae.value=!1)},{default:l(()=>[t(Ke,{ref_key:"formRef",ref:T,class:"mt-5",model:e(c),rules:e(b),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Me,{label:e(a)("title"),path:"title"},{default:l(()=>[t(de,{modelValue:e(c).title,"onUpdate:modelValue":y[9]||(y[9]=ve=>e(c).title=ve),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Me,{label:e(a)("description"),path:"description"},{default:l(()=>[t(de,{modelValue:e(c).description,"onUpdate:modelValue":y[10]||(y[10]=ve=>e(c).description=ve),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(Se,{value:e(c).position,"onUpdate:value":y[11]||(y[11]=ve=>e(c).position=ve),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ee,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(tt,{value:e(c).isActive,"onUpdate:value":y[12]||(y[12]=ve=>e(c).isActive=ve),name:"isActive",class:"w-full"},{default:l(()=>[t(Fe,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(Fe,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(Ee,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(tt,{value:e(c).isVisible,"onUpdate:value":y[13]||(y[13]=ve=>e(c).isVisible=ve),name:"isVisible",class:"w-full"},{default:l(()=>[t(Fe,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Fe,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(fe,{class:"!my-2"}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Le,{modelValue:e(c).icon,"onUpdate:modelValue":y[14]||(y[14]=ve=>e(c).icon=ve),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(Ee,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[g("div",Es,[e(c).color?(n(),E(me,{key:0},[t(e(ze),{text:"",type:"error",style:{"font-size":"21px"},onClick:y[15]||(y[15]=ve=>e(c).color="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(j,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(fe,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(c).color,"onUpdate:value":y[16]||(y[16]=ve=>e(c).color=ve),class:"cursor-pointer",theme:e(B)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(Ee,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Xe,{value:e(c).menuItemGroupId,"onUpdate:value":y[17]||(y[17]=ve=>e(c).menuItemGroupId=ve),options:e(se),placeholder:e(a)("group"),"render-label":h,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ee,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(tt,{value:e(c).targetType,"onUpdate:value":y[18]||(y[18]=ve=>e(c).targetType=ve),class:"w-full",size:"small"},{default:l(()=>[t(Fe,{value:e(rt).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[L(i(e(a)("pageLink")),1)]),_:1},8,["value"]),t(Fe,{value:e(rt).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[L(i(e(a)("contentLink")),1)]),_:1},8,["value"]),t(Fe,{value:e(rt).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[L(i(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(J,{appear:"",name:"slide-fade"},{default:l(()=>[e(c).targetType===e(rt).PAGE_LINK?(n(),E("section",Ds,[t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(Ee,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Xe,{value:e(c).pageId,"onUpdate:value":y[19]||(y[19]=ve=>e(c).pageId=ve),options:e($)||[],placeholder:e(a)("selectPage"),"render-label":x,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Ee,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var ve;return[t(Xe,{value:e(c).sectionId,"onUpdate:value":y[20]||(y[20]=Ye=>e(c).sectionId=Ye),options:((ve=(e($)||[]).find(Ye=>Ye.id===e(c).pageId))==null?void 0:ve.sections)||[],placeholder:e(a)("selectSection"),"render-label":x,disabled:!e(c).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Me,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Ze),{value:e(c).path,"onUpdate:value":y[21]||(y[21]=ve=>e(c).path=ve),placeholder:e(a)("path"),"allow-input":k,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(c).targetType===e(rt).CONTENT_LINK?(n(),E("section",Ls,[t(ys,{"content-type":e(c).contentType,"onUpdate:contentType":y[22]||(y[22]=ve=>e(c).contentType=ve),"content-id":e(c).contentId,"onUpdate:contentId":y[23]||(y[23]=ve=>e(c).contentId=ve),onUpdate:ne},null,8,["content-type","content-id"])])):e(c).targetType===e(rt).EXTERNAL_LINK?(n(),E("section",Ps,[t(Me,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Ze),{value:e(c).url,"onUpdate:value":y[24]||(y[24]=ve=>e(c).url=ve),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):_e("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Rs={class:"flex items-center justify-between"},Os={class:"flex flex-col"},qs={class:"text-sm font-bold"},Fs=Be({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{pickByTheme:p,tr:Z,displayFormErrors:ee,formatKey:_}=Je(),B=yt(ue,"show"),{menuLocations:$}=je(We()),{loadMenuLocations:se}=We(),{isLightTheme:O}=je(gt()),K=o(!1),Y=async()=>{K.value=!0,await se(),K.value=!1};Y();const z=pt(),v=nt(),R=st(),M=o(!1),q=o(!1),F=o(null),f=o(null),le=o({name:"",description:""}),N={name:[{required:!0,message:a("fillRequired")}]},D=U=>{F.value=he.cloneDeep(U),le.value=he.cloneDeep(U||{name:"",description:""}),q.value=!0},te=async()=>{var U;return(U=f.value)==null||U.validate(async V=>{var w,G,W,ae,s,A;if(!V){R.start(),M.value=!0;const T={name:le.value.name,description:le.value.description},c=await d({method:F.value?"put":"post",url:F.value?`/menu-locations/${F.value.id}`:"/menu-locations",data:T});if(c.failure&&c.error)switch((W=(G=(w=c.error)==null?void 0:w.response)==null?void 0:G.data)==null?void 0:W.errorCode){case et.FORM_INVALID_DATA:ee((A=(s=(ae=c.error)==null?void 0:ae.response)==null?void 0:s.data)==null?void 0:A.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),Y(),q.value=!1;M.value=!1,R.finish()}}),!1},H=async U=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-locations/${U.id}`})).success?(v.success(a("success")),Y()):v.error(a("anErrorOccurred"))}})};return(U,V)=>{const w=be,G=ce,W=ze,ae=it,s=wl,A=lt,T=$t,c=wt,b=Gt,X=ut,u=Ze,r=ft,C=bt,I=mt;return n(),E(me,null,[t(X,{show:B.value,"onUpdate:show":V[2]||(V[2]=x=>B.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ae,{align:"center"},{default:l(()=>[t(W,{size:"small",type:"primary",disabled:e(K),onClick:V[0]||(V[0]=x=>D(null))},{default:l(()=>[t(G,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),L(" "+i(e(a)("add")),1)]),_:1},8,["disabled"]),t(W,{size:"small",type:"error",disabled:e(K),onClick:V[1]||(V[1]=x=>B.value=!1)},{default:l(()=>[t(G,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1}),L(" "+i(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(b,{show:e(K)},{default:l(()=>[e($).length?(n(),S(T,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),E(me,null,Ne(e($),x=>(n(),S(A,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[g("div",Rs,[g("div",Os,[g("span",qs,i(x.name),1),t(s,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[L(i(e(Z)(x.description)),1)]),_:2},1024)]),t(ae,null,{default:l(()=>[t(W,{size:"small",type:"warning",secondary:e(O),onClick:h=>D(x)},{default:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(W,{size:"small",type:"error",secondary:e(O),onClick:h=>H(x)},{default:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),S(A,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(p)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(c,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(G,null,{default:l(()=>[t(w,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(X,{show:e(q),"onUpdate:show":V[5]||(V[5]=x=>$e(q)?q.value=x:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(F)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:V[6]||(V[6]=x=>q.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:f,model:e(le),rules:N,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(r,{label:e(a)("key"),path:"name"},{default:l(()=>[t(u,{value:e(le).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":V[3]||(V[3]=x=>e(le).name=e(_)(x))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{label:e(a)("description"),path:"description"},{default:l(()=>[t(C,{modelValue:e(le).description,"onUpdate:modelValue":V[4]||(V[4]=x=>e(le).description=x),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),js={key:2},Bs={class:"flex items-center"},Ks={class:"flex flex-col"},Ys={key:0,class:"text-xs font-normal"},Gs={class:"mt-4"},Hs=Be({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:Z,displayFormErrors:ee,isInDevMode:_,formatKey:B}=Je(),{isLightTheme:$}=je(gt()),{menuLocations:se}=je(We()),{loadMenuLocations:O}=We(),K=st(),Y=nt(),z=pt(),v=o(!1),R=o(!1),M=o([]),q=async(T=!1)=>{K.start(),v.value=!0;const c=await d({url:"/menus"});c.success&&c.result&&(M.value=c.result.data),T&&await O(),v.value=!1,K.finish()};q(!0);const F=o(12),f=o(1),le=T=>{F.value=T},N={name:"",title:"",description:"",menuLocationId:void 0},D=o(!1),te=o(!1),H=o(!1),U=o(null),V=o(N),w={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},G=o(null),W=T=>{G.value=he.cloneDeep(T),V.value=he.cloneDeep(T||N),D.value=!0},ae=async()=>{var T;return(T=U.value)==null||T.validate(async c=>{var b,X,u,r,C,I;if(!c){K.start(),R.value=!0;const x={name:V.value.name,title:V.value.title,description:V.value.description,menuLocationId:V.value.menuLocationId},h=await d({method:G.value?"put":"post",url:G.value?`/menus/${G.value.id}`:"/menus",data:x});if(h.failure&&h.error)switch((u=(X=(b=h.error)==null?void 0:b.response)==null?void 0:X.data)==null?void 0:u.errorCode){case et.FORM_INVALID_DATA:ee((I=(C=(r=h.error)==null?void 0:r.response)==null?void 0:C.data)==null?void 0:I.data);break;default:Y.error(a("anErrorOccurred"))}else Y.success(a("success")),q(),D.value=!1;R.value=!1,K.finish()}}),!1},s=async T=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menus/${T.id}`})).success?(Y.success(a("success")),q()):Y.error(a("anErrorOccurred"))}})},A=ll("menus-management",()=>({itemsMenu:o(null)}))();return kt(()=>V.value.title,T=>{G.value||V.value.name.length<=21&&(V.value.name=Ca(p(T),{trim:!0,lower:!0,strict:!0}))}),(T,c)=>{const b=be,X=ce,u=ze,r=it,C=It,I=zt,x=lt,h=sl,k=wt,pe=Pt,ne=bt,Q=ft,y=Ze,j=jt,ke=Vt,ye=ht,Te=mt,Ae=ut;return n(),E(me,null,[e(A).itemsMenu?_e("",!0):(n(),S(C,{key:0,to:"#alt-action"},{default:l(()=>[t(r,{align:"center"},{default:l(()=>[e(_)?(n(),S(u,{key:0,type:"success",onClick:c[0]||(c[0]=fe=>te.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:template"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("locations")),1)]),_:1})):_e("",!0),t(u,{type:"warning",onClick:c[1]||(c[1]=fe=>H.value=!0)},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("groups")),1)]),_:1}),e(M)&&e(M).length?(n(),S(u,{key:1,type:"primary",onClick:c[2]||(c[2]=fe=>W(null))},{icon:l(()=>[t(X,{size:"18"},{default:l(()=>[t(b,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addMenu")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})),e(A).itemsMenu?(n(),S(Ns,{key:1,modelValue:e(A).itemsMenu,"onUpdate:modelValue":c[3]||(c[3]=fe=>e(A).itemsMenu=fe)},null,8,["modelValue"])):(n(),E("section",js,[t(pe,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(M)&&e(M).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Ne(e(M).slice((e(f)-1)*e(F),e(f)*e(F)),fe=>(n(),S(x,{key:fe.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Re;return[g("div",Bs,[t(r,null,{default:l(()=>[t(u,{size:"small",type:"primary",secondary:e($),onClick:ot(Ce=>W(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(u,{size:"small",type:"error",secondary:e($),onClick:ot(Ce=>s(fe),["stop"])},{default:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(I,{vertical:"",class:Ge(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("div",Ks,[g("span",{class:Ge(`${fe.location?"text-sm":"text-base"} font-bold`)},i(e(p)(fe.title)),3),fe.location?(n(),E("small",Ys,i((Re=fe.location)==null?void 0:Re.name),1)):_e("",!0)])])]}),"header-extra":l(()=>[t(u,{size:"small",type:"primary",secondary:e($),onClick:ot(Re=>e(A).itemsMenu=fe,["stop"])},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(h,{page:e(f),"onUpdate:page":c[4]||(c[4]=fe=>$e(f)?f.value=fe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(F),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(M).length/e(F)),"onUpdate:pageSize":le},{prefix:l(()=>[L(i(`${e(M).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(x,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(k,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[g("div",Gs,[t(u,{size:"small",onClick:c[5]||(c[5]=fe=>W(null))},{icon:l(()=>[t(X,null,{default:l(()=>[t(b,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(Ae,{show:e(D),"onUpdate:show":c[10]||(c[10]=fe=>$e(D)?D.value=fe:null),loading:e(R),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(G)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ae,onNegativeClick:c[11]||(c[11]=fe=>D.value=!1)},{default:l(()=>[t(Te,{ref_key:"formRef",ref:U,model:e(V),rules:w,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Q,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ne,{modelValue:e(V).title,"onUpdate:modelValue":c[6]||(c[6]=fe=>e(V).title=fe),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ne,{modelValue:e(V).description,"onUpdate:modelValue":c[7]||(c[7]=fe=>e(V).description=fe),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ye,{"x-gap":"12",span:24},{default:l(()=>[t(j,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(y,{value:e(V).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":c[8]||(c[8]=fe=>e(V).name=e(B)(fe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(j,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(ke,{value:e(V).menuLocationId,"onUpdate:value":c[9]||(c[9]=fe=>e(V).menuLocationId=fe),options:e(se),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Fs,{show:e(te),"onUpdate:show":c[12]||(c[12]=fe=>$e(te)?te.value=fe:null)},null,8,["show"]),t(_s,{show:e(H),"onUpdate:show":c[13]||(c[13]=fe=>$e(H)?H.value=fe:null)},null,8,["show"])]))],64)}}}),Ws="/creopse/assets/video-thumbnail-86f60cc7.svg";var Kt=(ue=>(ue.VERTICAL="vertical",ue.HORIZONTAL="horizontal",ue))(Kt||{}),Ct=(ue=>(ue.SELF_HOSTED="self-hosted",ue.YOUTUBE="youtube",ue))(Ct||{});const Js=()=>{const{t:ue}=He(),a=[{label:ue("horizontal"),value:Kt.HORIZONTAL,tagType:"info"},{label:ue("vertical"),value:Kt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:Z=>{var ee;return((ee=a.find(_=>_.value===Z))==null?void 0:ee.tagType)||"default"},getVideoDisplayTypeLabel:Z=>{var ee;return(ee=a.find(_=>_.value===Z))==null?void 0:ee.label},videoDisplayTypes:a}},Xs=ll("video-setting",{state:()=>({settings:[]}),getters:{getSetting:ue=>a=>ue.settings.find(d=>d.key===a),getSettingValue:ue=>(a,d="string")=>{const p=ue.settings.find(ee=>ee.key===a);let Z="";switch(d){case"number":Z=p&&parseInt(p.value)&&!isNaN(parseInt(p.value))?parseInt(p.value):0;break;case"boolean":Z=p&&!isNaN(parseInt(p.value))&&parseInt(p.value)>0;break;case"object":Z=p&&p.value?JSON.parse(p.value):{};break;case"array":Z=p&&p.value?JSON.parse(p.value):[];break;default:Z=p&&p.value?p.value:"";break}return Z}},actions:{async initDefaultSettings(){await this.loadSettings();const ue={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Qe();await a({url:"/video-settings",method:"put",data:ue}),await this.loadSettings()},async loadSettings(){const{request:ue}=Qe(),a=await ue({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),Zs={key:1,class:"flex items-center gap-3"},Qs={key:0,class:"w-full flex items-center justify-between mt-4"},eo={class:"flex items-center gap-3"},to={key:1,class:"mt-4"},lo={key:0},ao={class:"flex items-center justify-center h-full"},no=["src"],so={class:"text-center text-dimgray text-sm"},oo={key:1,class:"flex items-center justify-center"},io={class:"mt-5"},ro={class:"w-full flex flex-gap-8 items-center justify-start"},uo=["src"],co={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},po=["src"],fo=Be({__name:"index",setup(ue){const{t:a,locale:d}=He(),{tr:p,fileUrl:Z,pickByTheme:ee,displayFormErrors:_}=Je(),{videoDisplayTypes:B}=Js(),{request:$}=Qe(),{isLightTheme:se}=je(gt()),O=st(),K=nt(),Y=pt(),z=_t("appConfig"),v=o(""),R=o(null),M=o(!1),q=o([]),F=ll("videos-management-store",()=>({currentTab:o("all")}))(),f=()=>{V()},le=o(0),N=o(12),D=o(1),te=De(()=>`/video-items?pageSize=${N.value}&query=${v.value}&source=${F.currentTab}`),H=Ce=>{V(`${te.value}&page=${Ce}`)},U=Ce=>{N.value=Ce,V()},V=async(Ce=null,ie=!1)=>{var P,Ve,J,oe,we;M.value=!0,O.start();const ge=await $({url:Ce??te.value});ge.success&&ge.result&&(q.value=((P=ge.result.data)==null?void 0:P.videoItems)||[],le.value=((J=(Ve=ge.result.data)==null?void 0:Ve.meta)==null?void 0:J.total)||0,D.value=((we=(oe=ge.result.data)==null?void 0:oe.meta)==null?void 0:we.currentPage)||1),O.finish(),M.value=!1};V(null,!0);const w=o(!1),G=o(!1),W=o(null),ae=o(null),s=o({title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Kt.HORIZONTAL,thumbnail:"",path:""}),A=De(()=>({title:[{required:s.value.source==Ct.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),T=Ce=>{W.value=he.cloneDeep(Ce),Ce?s.value=he.cloneDeep(Ce):s.value={title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Kt.HORIZONTAL,thumbnail:"",path:""},G.value=!0},c=async Ce=>{Y.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await $({method:"delete",url:`/video-items/force/${Ce.id}`})).success?(K.success(a("success")),V()):K.error(a("anErrorOccurred"))}})},b=async()=>{var Ce;return(Ce=ae.value)==null||Ce.validate(async ie=>{var ge,P,Ve,J,oe,we;if(!ie)if(W.value){O.start(),w.value=!0;const de={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Me=await $({method:"put",url:`/video-items/${W.value.id}`,data:de});Me.success&&Me.result.data&&(K.success(a("success")),V(`${te.value}&page=${D.value}`)),w.value=!1,O.finish(),G.value=!1}else{O.start(),w.value=!0;const de={title:s.value.title,description:s.value.description,visible:s.value.visible,source:s.value.source,displayType:s.value.displayType,thumbnail:s.value.thumbnail,path:s.value.path},Me=await $({method:"post",url:"/video-items",data:de});if(Me.failure&&Me.error)switch((Ve=(P=(ge=Me.error)==null?void 0:ge.response)==null?void 0:P.data)==null?void 0:Ve.errorCode){case et.FORM_INVALID_DATA:_((we=(oe=(J=Me.error)==null?void 0:J.response)==null?void 0:oe.data)==null?void 0:we.data);break;case et.REQUEST_PARAMS_MISSING:K.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case et.REQUEST_DATA_RETRIEVAL_FAILED:K.error(a("videoDataCantBeRetrieve"));break;case et.REQUEST_DATA_ALREADY_EXISTS:K.error(a("videoAlreadyExists"));break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),V(`${te.value}&page=${D.value}`),G.value=!1;w.value=!1,O.finish()}}),!1},X=o(!1),u=o(!1),r=o(""),C=o(""),I=o("classic"),x=o(!1),h=Xs(),k=o({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),pe=o(k.value),ne=De(()=>he.isEqual(k.value,pe.value)),Q=async()=>{w.value=!0;const Ce=await $({url:"/video-settings",method:"put",data:k.value});Ce.success&&Ce.result?K.success(a("success")):K.error(a("unableToUpdateSettings")),await y()},y=async()=>{var Ce;O.start(),w.value=!0,await h.loadSettings(),(Ce=h.settings)==null||Ce.forEach(ie=>{k.value[ie.key]!=null&&(k.value[ie.key]=ie.value)}),pe.value=he.cloneDeep(k.value),w.value=!1,O.finish()};y();const j=async()=>{O.start(),w.value=!0,(await $({url:"/video-items/youtube/channel-videos",method:"put"})).success?(K.success(a("success")),await y()):K.error(a("unableToUpdateChannelVideos")),w.value=!1,O.finish()},ke=o(!1),ye=o(ct()),Te=o({}),Ae=De(()=>{let Ce=0;for(const ie in Te.value)Te.value[ie]&&Ce++;return Ce});function fe(){Te.value={},V()}const Re=async()=>(Ae.value?Y.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[Ae.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{w.value=!0,O.start();for(const Ce in Te.value)Te.value[Ce]&&await $({url:`/video-items/force/${Ce}`,method:"delete"});O.finish(),w.value=!1,K.success(a("success")),Te.value={},V(null,!0)}}):K.warning(a("noItemSelected")),!1);return(Ce,ie)=>{var rl,m;const ge=be,P=ce,Ve=ze,J=Ht,oe=It,we=Ra,de=Ze,Me=$l,Se=Oa,Ee=it,Fe=lt,tt=Rt,xt=qa,Le=ht,Xe=wl,Ke=Nt,ve=Pt,Ye=sl,Tt=Gt,Ot=wt,qt=ft,St=jt,Ue=Vt,dt=bt,cl=tl,pl=mt,ol=ut,il=Yt;return n(),E(me,null,[t(oe,{to:"#alt-action"},{default:l(()=>[e(F).currentTab=="settings"?(n(),S(Ve,{key:0,loading:e(w),disabled:e(ne),type:"primary",onClick:Q},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),E("div",Zs,[t(J,{checked:e(ke),"onUpdate:checked":[ie[0]||(ie[0]=Ie=>$e(ke)?ke.value=Ie:null),ie[1]||(ie[1]=Ie=>{for(const Bt of e(q))Bt.id&&(e(Te)[Bt.id]=Ie);ye.value=("uuidv4"in Ce?Ce.uuidv4:e(ct))()})]},{default:l(()=>[L(i(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(Ve,{type:"primary",onClick:ie[2]||(ie[2]=Ie=>T(null))},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(Se,{value:e(F).currentTab,"onUpdate:value":[ie[6]||(ie[6]=Ie=>e(F).currentTab=Ie),f],type:"card",size:"medium"},ka({default:l(()=>[t(we,{name:"all"},{default:l(()=>[t(P,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:collapse-all"})]),_:1}),L(" "+i(e(a)("all_")),1)]),_:1}),t(we,{name:e(Ct).SELF_HOSTED},{default:l(()=>[t(P,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:document-video"})]),_:1}),L(" "+i(e(a)("selfHosted")),1)]),_:1},8,["name"]),t(we,{name:e(Ct).YOUTUBE},{default:l(()=>[t(P,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:logo-youtube"})]),_:1}),L(" "+i(e(a)("youtube")),1)]),_:1},8,["name"]),t(we,{name:"settings"},{default:l(()=>[t(P,{size:"18",class:"mr-1"},{default:l(()=>[t(ge,{icon:"carbon:settings-adjust"})]),_:1}),L(" "+i(e(a)("settings")),1)]),_:1})]),_:2},[e(F).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Me,{class:"!w-[250px]"},{default:l(()=>[t(de,{ref_key:"searchInputRef",ref:R,value:e(v),"onUpdate:value":[ie[3]||(ie[3]=Ie=>$e(v)?v.value=Ie:null),ie[4]||(ie[4]=Ie=>{Ie||V()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(Ve,{type:"primary",onClick:ie[5]||(ie[5]=Ie=>V())},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(Ae)>0?(n(),E("section",Qs,[g("span",null,i(e(a)("nbItemsSelected",[e(Ae)])),1),g("section",eo,[t(Ve,{type:"error",size:"small",onClick:Re},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("delete")),1)]),_:1}),t(Ve,{type:"warning",size:"small",onClick:fe},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0),e(F).currentTab=="settings"?(n(),E("section",to,[t(Fe,{hoverable:"",embedded:""},{header:l(()=>[L(i(e(a)("youtube")),1)]),default:l(()=>[t(Le,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(tt,null,{default:l(()=>[t(Fe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(a)("apiKey")),1),t(de,{value:e(k).youtubeApiKey,"onUpdate:value":ie[7]||(ie[7]=Ie=>e(k).youtubeApiKey=Ie),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(tt,null,{default:l(()=>[t(Fe,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(a)("autoUpdateChannelVideos")),1),t(xt,{value:e(k).youtubeChannelVideosAutoUpdate,"onUpdate:value":ie[8]||(ie[8]=Ie=>e(k).youtubeChannelVideosAutoUpdate=Ie),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>ie[28]||(ie[28]=[g("div",{class:"w-6"},null,-1)])),unchecked:l(()=>ie[29]||(ie[29]=[g("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(k).youtubeChannelVideosAutoUpdate=="1"?(n(),E(me,{key:0},[t(tt,null,{default:l(()=>[t(Fe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(a)("channelId")),1),t(de,{value:e(k).youtubeChannelId,"onUpdate:value":ie[9]||(ie[9]=Ie=>e(k).youtubeChannelId=Ie),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(tt,null,{default:l(()=>[t(Fe,{class:"w-full h-full",size:"small"},{default:l(()=>[t(Ee,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(a)("lastUpdate")),1),g("b",null,i(e(k).youtubeLastChannelVideosUpdate?e(Lt)(e(k).youtubeLastChannelVideosUpdate,{locale:e(d),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(Ve,{strong:"",circle:"",secondary:e(se),type:"primary",title:e(a)("refresh"),disabled:e(w),onClick:j},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:restart",class:Ge({"animate-spin":e(w)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):_e("",!0)]),_:1})]),_:1})])):(n(),S(Fe,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(q).length&&!e(M)?(n(),E("section",lo,[t(Le,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),E(me,null,Ne(e(q),(Ie,Bt)=>(n(),S(tt,{key:Bt},{default:l(()=>[t(ve,{name:"slide-fade",appear:""},{default:l(()=>[t(Fe,{bordered:"",hoverable:""},{cover:l(()=>[g("div",ao,[g("img",{src:Ie.thumbnailUrl??e(Ws),class:"w-full h-[200px] object-cover"},null,8,no)])]),header:l(()=>[g("div",so,[t(Xe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[Ie.id?(n(),S(J,{key:e(ye),checked:e(Te)[Ie.id],"onUpdate:checked":Jt=>e(Te)[Ie.id]=Jt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),L(" "+i(e(p)(Ie.title)),1)]),_:2},1024)])]),action:l(()=>[t(Ee,{justify:"space-between",align:"center"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(Ke,{bordered:!1,type:Ie.visible?"success":"error"},{default:l(()=>[L(i(Ie.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Ke,{bordered:!1,type:Ie.displayType==e(Kt).HORIZONTAL?"info":"warning"},{default:l(()=>[L(i(Ie.displayType==e(Kt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(Ee,null,{default:l(()=>[t(Ve,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{r.value=e(a)("video"),C.value=e(Z)(Ie.path),I.value=Ie.source==e(Ct).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),Ie.source!=e(Ct).YOUTUBE?(n(),S(Ve,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Jt=>T(Ie)},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):_e("",!0),t(Ve,{ternary:"",circle:"",title:e(a)("delete"),onClick:Jt=>c(Ie)},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ye,{page:e(D),"onUpdate:page":[ie[10]||(ie[10]=Ie=>$e(D)?D.value=Ie:null),H],class:"mt-10 justify-center","show-size-picker":"","page-size":e(N),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(le)/e(N)),"onUpdate:pageSize":U},{prefix:l(()=>[L(i(`${e(le)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(M)?(n(),E("section",oo,[t(Tt,{size:"medium"})])):(n(),S(Ot,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(ol,{show:e(G),"onUpdate:show":ie[21]||(ie[21]=Ie=>$e(G)?G.value=Ie:null),loading:e(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:b,onNegativeClick:ie[22]||(ie[22]=Ie=>G.value=!1)},{default:l(()=>[g("div",io,[t(pl,{ref_key:"formRef",ref:ae,model:e(s),rules:e(A),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(qt,{label:e(a)("source"),path:"source"},{default:l(()=>[t(J,{checked:e(s).source,"onUpdate:checked":ie[11]||(ie[11]=Ie=>e(s).source=Ie),"checked-value":e(Ct).YOUTUBE,"unchecked-value":e(Ct).SELF_HOSTED},{default:l(()=>[L(i(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(s).source==e(Ct).YOUTUBE?(n(),S(Le,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(St,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(de,{value:e(s).path,"onUpdate:value":ie[12]||(ie[12]=Ie=>e(s).path=Ie),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(St,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(s).displayType,"onUpdate:value":ie[13]||(ie[13]=Ie=>e(s).displayType=Ie),placeholder:e(a)("displayType"),options:e(B),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),E(me,{key:1},[t(qt,{label:e(a)("title"),path:"title"},{default:l(()=>[t(dt,{modelValue:e(s).title,"onUpdate:modelValue":ie[14]||(ie[14]=Ie=>e(s).title=Ie),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(qt,{label:e(a)("description"),path:"description"},{default:l(()=>[t(dt,{modelValue:e(s).description,"onUpdate:modelValue":ie[15]||(ie[15]=Ie=>e(s).description=Ie),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Le,{"x-gap":"12",span:24},{default:l(()=>[t(St,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Me,null,{default:l(()=>[t(Ve,{type:"primary",onClick:ie[16]||(ie[16]=()=>{X.value=!0})},{default:l(()=>[L(i(e(a)("select")),1)]),_:1}),t(de,{value:e(s).path?e(Xt)(e(s).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(s).path?(n(),E(me,{key:0},[t(Ve,{type:"primary",ghost:"",onClick:ie[17]||(ie[17]=()=>{r.value=e(a)("video"),C.value=e(Z)(e(s).path),I.value="classic",u.value=!0})},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:play"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("play")),1)]),_:1}),t(Ve,{type:"primary",ghost:"",onClick:ie[18]||(ie[18]=()=>{e(s).path=""})},{icon:l(()=>[t(P,null,{default:l(()=>[t(ge,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("clear")),1)]),_:1})],64)):_e("",!0)]),_:1})]),_:1},8,["label"]),t(St,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Ue,{value:e(s).displayType,"onUpdate:value":ie[19]||(ie[19]=Ie=>e(s).displayType=Ie),placeholder:e(a)("displayType"),options:e(B),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(qt,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[g("div",ro,[g("div",{class:"cursor-pointer w-full h-[150px]",onClick:ie[20]||(ie[20]=()=>{x.value=!0})},[e(s).thumbnail?(n(),S(cl,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:qe("border: 1px dashed "+e(ee)("green","white")),src:e(Z)(e(s).thumbnail||"")},null,8,["style","src"])):(n(),E("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(ee)("green","white"))},[t(P,{size:64},{default:l(()=>[t(ge,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ol,{show:e(u),"onUpdate:show":ie[23]||(ie[23]=Ie=>$e(u)?u.value=Ie:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(r)},{default:l(()=>[e(I)==="youtube"?(n(),E("iframe",{key:0,width:"100%",height:"380",src:e(C),frameborder:"0",allowfullscreen:""},null,8,uo)):(n(),E("video",co,[g("source",{src:e(C)},null,8,po)]))]),_:1},8,["show","title"]),t(il,{show:e(X),"onUpdate:show":ie[24]||(ie[24]=Ie=>$e(X)?X.value=Ie:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((rl=e(z))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[25]||(ie[25]=Ie=>{e(s).path=Ie,X.value=!1})},null,8,["show","title","upload-config"]),t(il,{show:e(x),"onUpdate:show":ie[26]||(ie[26]=Ie=>$e(x)?x.value=Ie:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((m=e(z))==null?void 0:m.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[27]||(ie[27]=Ie=>{e(s).thumbnail=Ie,x.value=!1})},null,8,["show","title","upload-config"])],64)}}});const mo=Ut(fo,[["__scopeId","data-v-42abee62"]]),{t:Pe}=pa.global,ra=[{key:"maxlength",defaultValue:"",placeholder:Pe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Pe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],vo={text:ra,textarea:ra,number:[{key:"min",defaultValue:"",placeholder:Pe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Pe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Pe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Pe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Pe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Pe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Pe("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"format",defaultValue:"",placeholder:Pe("dateFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Pe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Pe("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Pe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Pe("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Pe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Pe("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"library",defaultValue:"all",placeholder:Pe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Pe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Pe("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Pe("inputClearable")}]},{t:Oe}=pa.global,_o=[{label:Oe("text"),value:"text"},{label:Oe("i18nText"),value:"i18n-text"},{label:Oe("textarea"),value:"textarea"},{label:Oe("i18nTextarea"),value:"i18n-textarea"},{label:Oe("number"),value:"number"},{label:Oe("checkbox"),value:"checkbox"},{label:Oe("singleSelect"),value:"single-select"},{label:Oe("multiSelect"),value:"multi-select"},{label:Oe("date"),value:"date"},{label:Oe("year"),value:"year"},{label:Oe("editor"),value:"editor"},{label:Oe("i18nEditor"),value:"i18n-editor"},{label:Oe("image"),value:"image"},{label:Oe("gallery"),value:"gallery"},{label:Oe("newsArticle"),value:"news-article"},{label:Oe("newsArticles"),value:"news-articles"},{label:Oe("newsCategory"),value:"news-category"},{label:Oe("newsCategories"),value:"news-categories"},{label:Oe("newsTag"),value:"news-tag"},{label:Oe("newsTags"),value:"news-tags"},{label:Oe("icon"),value:"icon"},{label:Oe("icons"),value:"icons"},{label:Oe("albums"),value:"albums"},{label:Oe("audio"),value:"audio"},{label:Oe("video"),value:"video"},{label:Oe("document"),value:"document"},{label:Oe("file"),value:"file"},{label:Oe("color"),value:"color"},{label:Oe("contentItem"),value:"content-model-item"},{label:Oe("contentItems"),value:"content-model-items"},{label:Oe("menuItemLink"),value:"menu-item-link"}],yo={class:"flex items-center justify-between w-full"},go={class:"text-base font-semibold"},bo={class:"text-xs text-slate-400"},ho={class:"text-xs text-slate-400"},ko={class:"text-xs text-slate-400"},wo={class:"text-xs text-slate-400"},xo={class:"text-xs text-slate-400"},Co={key:0},Io={key:0,class:"w-full flex items-center"},$o={class:"w-full flex items-center"},Vo={class:"w-full"},To=Be({__name:"Fields",props:Wt({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(ue){const{t:a}=He(),{tr:d,formatKey:p}=Je(),{isLightTheme:Z}=je(gt()),{contentModels:ee}=je(We()),_=ue,B=yt(ue,"modelValue"),$=_t("renderSelectLabel"),se=_t("removeCollectionField"),O=_t("removeSingleton"),K=_t("onCreateItemOption"),Y=_t("expandedNames",()=>De(()=>o([]).value));return(z,v)=>{const R=Nt,M=it,q=be,F=ce,f=ze,le=Ze,N=Rt,D=bt,te=Vt,H=ht,U=zt,V=Ht,w=ya,G=Pt,W=Vl,ae=al,s=nl,A=lt;return n(!0),E(me,null,Ne(B.value,(T,c)=>(n(),S(A,{key:`field-${c}`,size:"small",class:"my-2"},{default:l(()=>[t(s,{"expanded-names":e(Y)(_.type=="collection"?`c-${_.parentItemIndex}-f-${c}`:`s-${c}`).value,"onUpdate:expandedNames":b=>e(Y)(_.type=="collection"?`c-${_.parentItemIndex}-f-${c}`:`s-${c}`).value=b,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(ae,{name:"1"},{header:l(()=>[g("div",yo,[t(M,null,{default:l(()=>[t(R,{size:"small",type:"info"},{default:l(()=>[L(i(c+1),1)]),_:2},1024),g("span",go,i(e(d)(T.label)),1)]),_:2},1024),t(f,{size:"small",type:"error",secondary:e(Z),onClick:()=>{_.type==="collection"?e(se)&&e(se)(_.collectionKey,c):e(O)&&e(O)(c)}},{default:l(()=>[t(F,{class:"mr-1"},{default:l(()=>[t(q,{icon:"carbon:trash-can"})]),_:1}),L(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(H,{span:24,"x-gap":"6"},{default:l(()=>[t(N,{span:6},{default:l(()=>[g("span",bo,i(e(a)("fieldKey")),1),t(le,{value:T.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":b=>T.key=e(p)(b)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(N,{span:10},{default:l(()=>[g("span",ho,i(e(a)("title")),1),t(D,{modelValue:T.label,"onUpdate:modelValue":b=>T.label=b,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(N,{span:8},{default:l(()=>[g("span",ko,i(e(a)("type")),1),t(te,{value:T.type,"onUpdate:value":b=>T.type=b,options:e(_o),placeholder:e(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),t(U,{class:"!mt-4 !mb-2"}),t(H,{span:24,"x-gap":"6"},{default:l(()=>[t(N,{span:10,class:"flex items-center"},{default:l(()=>[t(V,{checked:T.required,"onUpdate:checked":b=>T.required=b,size:"medium"},{default:l(()=>[L(i(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(N,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(T.type)?(n(),E(me,{key:0},[g("span",wo,i(e(a)("contentModel")),1),t(te,{value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,options:e(ee),placeholder:e(a)("contentModel"),"render-label":e($),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),E(me,{key:1},[g("span",xo,i(e(a)("defaultValue")),1),T.type==="color"?(n(),E("div",Co,[t(e(el),{value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,class:"cursor-pointer",theme:e(Z)?"light":"dark",format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):(n(),S(le,{key:1,value:T.defaultValue,"onUpdate:value":b=>T.defaultValue=b,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),T.type==="multi-select"||T.type==="single-select"?(n(),S(U,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[L(i(e(a)("options")),1)]),_:1})):_e("",!0),t(G,{name:"slide-fade",appear:""},{default:l(()=>[T.type==="multi-select"||T.type==="single-select"?(n(),E("div",Io,[t(w,{value:T.options,"onUpdate:value":b=>T.options=b,placeholder:e(a)("addOption"),"on-create":b=>e(K)?e(K)(b,c):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[L(i(e(a)("addOption")),1)]),default:l(({value:b})=>[g("div",$o,[t(le,{value:b.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":X=>b.value=e(p)(X)},null,8,["value","placeholder","onUpdate:value"]),t(D,{modelValue:b.label,"onUpdate:modelValue":X=>b.label=X,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):_e("",!0)]),_:2},1024),(n(!0),E(me,null,Ne(e(vo),(b,X,u)=>(n(),E(me,{key:u},[T.type===X?(n(),S(s,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(F,{size:"18"},{default:l(()=>[t(q,{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(ae,{name:"1"},{header:l(()=>[t(U,{"title-placement":"left",class:"!my-4"},{default:l(()=>[L(i(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(G,{name:"slide-fade",appear:""},{default:l(()=>[g("div",Vo,[(n(!0),E(me,null,Ne(b,r=>(n(),S(H,{key:r.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(N,{span:10},{default:l(()=>[t(le,{value:r.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(N,{span:14},{default:l(()=>[r.isNumber?(n(),S(W,{key:0,value:T.settings[r.key],"onUpdate:value":C=>T.settings[r.key]=C,"default-value":r.defaultValue?parseInt(r.defaultValue):void 0,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),S(le,{key:1,value:T.settings[r.key],"onUpdate:value":C=>T.settings[r.key]=C,"default-value":r.defaultValue,placeholder:r.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):_e("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)}}});const ua=Ut(To,[["__scopeId","data-v-a507c7a3"]]),zo={class:"text-base"},Uo={key:0},So={key:0},Mo={key:0},Ao={class:"flex items-center justify-between w-full"},Eo={class:"text-base font-semibold"},Do={class:"text-xs text-slate-400"},Lo={class:"text-xs text-slate-400"},Po={class:"text-xs text-slate-400"},Va=Be({__name:"index",props:Wt({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(ue){const{t:a}=He(),{tr:d,pickByTheme:p,formatKey:Z}=Je(),{isLightTheme:ee}=je(gt()),{loadContentModels:_}=We();_();const B=ue,$=yt(ue,"show"),se=st(),O=nt(),K=pt(),Y=o(!1),z=o(null),v=o({}),R=o({}),M={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},q=o(!1),F=o(!1),f=o({}),le=u=>De({get:()=>f.value[u]?["1"]:[],set:r=>{f.value[u]=r.length>0}});kt(()=>F.value,u=>{Object.entries(v.value).forEach(([r,C],I)=>{var x;r!=="index"&&(f.value[`c-${I}`]=u,(x=C==null?void 0:C.items)==null||x.forEach((h,k)=>{f.value[`c-${I}-f-${k}`]=u}))})}),kt(()=>q.value,u=>{Object.entries(v.value).forEach(([r,C],I)=>{r==="index"&&(C==null||C.forEach((x,h)=>{f.value[`s-${h}`]=u}))})});const N=De(()=>he.isEqual(v.value,R.value)),D=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(he.cloneDeep(M)):v.value.index=[he.cloneDeep(M)]:v.value={index:[he.cloneDeep(M)]}},te=u=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(u,1)},H=()=>{const u=ct();v.value?v.value[u]={key:"",title:"",items:[]}:v.value={[u]:{key:"",title:"",items:[]}}},U=u=>{if(v.value){const{[u]:r,...C}=v.value;v.value=C}},V=u=>{v.value&&v.value[u].items.push(he.cloneDeep(M))},w=(u,r)=>{if(v.value){const C=v.value[u];C&&Array.isArray(C.items)&&C.items.splice(r,1)}},G=u=>u.title&&u.key&&u.key!=="index",W=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(u=>u!=="index").length:0,ae=De(()=>v.value?Object.keys(v.value).filter(u=>u!=="index"):[]),s=u=>ae.value.indexOf(u),A=o(!1),T=async()=>{const u=he.cloneDeep(v.value),r=he.cloneDeep(v.value);A.value=!1,Y.value=!0,se.start();const C=[];if(he.forIn(u,(I,x)=>{x!=="index"&&C.push(I.key)}),he.forIn(u,(I,x)=>{if(x!=="index"){const h=he.keys(u).filter(k=>k!=="index").indexOf(x);if(I&&I.key){if(I.key==="index")return O.error(a("keyIndexIsReservedInCollections")),A.value=!0,!1;if(C.filter(pe=>pe==I.key).length>1)return O.error(a("collectionKeyIsNotUnique",[I.key])),A.value=!0,!1;if(Array.isArray(I.items))for(const[pe,ne]of I.items.entries())if(ne.key){if(I.items.filter(y=>y.key===ne.key).length>1)return O.error(a("fieldKeyOfCollectionIsNotUnique",[ne.key,I.key])),A.value=!0,!1}else return O.error(a("fieldKeyOfCollectionIsRequired",[pe+1,I.key])),A.value=!0,!1}else return O.error(a("collectionKeyIsRequired",[h+1])),A.value=!0,!1}else if(Array.isArray(I))for(const[h,k]of I.entries())if(k.key){if(I.filter(ne=>ne.key===k.key).length>1)return O.error(a("singletonKeyIsNotUnique",[k.key])),A.value=!0,!1}else return O.error(a("singletonKeyIsRequired",[h+1])),A.value=!0,!1}),A.value){Y.value=!1,se.finish();return}he.forIn(r,(I,x)=>{x!=="index"&&x!==I.key&&Ea(u,x,I.key)}),await B.updateDataStructure(u),Y.value=!1,se.finish()},c=()=>{he.isEqual(v.value,R.value)?$.value=!1:K.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{$.value=!1}})};kt(()=>B.rawDataStructure,u=>{v.value=u?he.cloneDeep(u):{},he.forIn(u,(r,C)=>{var I;C!=="index"?(v.value[C].key=C,(I=r==null?void 0:r.items)==null||I.forEach((x,h)=>{v.value[C].items[h].settings||(v.value[C].items[h].settings={})})):r==null||r.forEach((x,h)=>{v.value[C][h].settings||(v.value[C][h].settings={})})}),R.value=he.cloneDeep(v.value)},{immediate:!0,deep:!0});const b=u=>re("span",{},{default:()=>d(u.title)}),X=(u,r)=>({value:`option_${r+1}${u+1}`,label:""});return At("removeCollectionField",w),At("onCreateItemOption",X),At("renderSelectLabel",b),At("removeSingleton",te),At("addSingleton",D),At("expandCollections",F),At("expandSingletons",q),At("expandedNames",le),(u,r)=>{const C=ga,I=be,x=ce,h=ze,k=it,pe=lt,ne=$t,Q=Rt,y=Nt,j=Ze,ke=bt,ye=ht,Te=zt,Ae=Fa,fe=al,Re=nl,Ce=da;return n(),S(Ce,{modelValue:$.value,"onUpdate:modelValue":r[7]||(r[7]=ie=>$.value=ie),"close-on-esc":!1,closable:!1,onOnSizeChange:r[8]||(r[8]=ie=>{z.value=ie})},{header:l(()=>[g("div",zo,[t(C,{depth:"1"},{default:l(()=>[L(i(e(a)("dataStructure"))+" ",1),u.title?(n(),E("span",Uo,"Â -Â "+i(u.title),1)):_e("",!0)]),_:1})])]),"header-extra":l(()=>[t(k,{align:"center"},{default:l(()=>[t(h,{type:"success",title:e(a)("save"),loading:e(Y),disabled:e(N),onClick:r[0]||(r[0]=ie=>T())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(h,{type:"error",title:e(a)("close"),disabled:e(Y),onClick:r[1]||(r[1]=ie=>c())},{icon:l(()=>[t(x,null,{default:l(()=>[t(I,{icon:"carbon:close"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var ie,ge;return[g("section",{style:qe(`min-height: ${((ie=e(z))==null?void 0:ie.windowHeight)-((ge=e(z))==null?void 0:ge.headerHeight)-5}px`),class:Ge(`w-full h-full ${e(p)("bg-slate-200","bg-zinc-800")}`)},[t(ye,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(Q,{class:"ml-4 mt-2"},{default:l(()=>{var P,Ve;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var J,oe;return[L(i(e(a)("singletons"))+"Â  ",1),(J=e(v).index)!=null&&J.length?(n(),E("span",So," ("+i((oe=e(v).index)==null?void 0:oe.length)+") ",1)):_e("",!0)]}),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(h,{size:"small",type:"primary",secondary:e(ee),onClick:r[2]||(r[2]=J=>q.value=!e(q))},{default:l(()=>[t(x,null,{default:l(()=>[e(q)?(n(),S(I,{key:0,icon:"carbon:collapse-categories"})):(n(),S(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(h,{size:"small",type:"primary",secondary:e(ee),onClick:r[3]||(r[3]=J=>D())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+i(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ne,{style:qe(`max-height: ${((P=e(z))==null?void 0:P.windowHeight)-((Ve=e(z))==null?void 0:Ve.headerHeight)-100}px`)},{default:l(()=>[t(ua,{modelValue:e(v).index,"onUpdate:modelValue":r[4]||(r[4]=J=>e(v).index=J),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(Q,{class:"mr-4 mt-2"},{default:l(()=>{var P,Ve;return[t(pe,{embedded:"",bordered:"",segmented:""},{header:l(()=>[L(i(e(a)("collections"))+"Â  ",1),W()>0?(n(),E("span",Mo," ("+i(W())+") ",1)):_e("",!0)]),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(h,{size:"small",type:"primary",secondary:e(ee),onClick:r[5]||(r[5]=J=>F.value=!e(F))},{default:l(()=>[t(x,null,{default:l(()=>[e(F)?(n(),S(I,{key:0,icon:"carbon:collapse-categories"})):(n(),S(I,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(h,{size:"small",type:"primary",secondary:e(ee),onClick:r[6]||(r[6]=J=>H())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+i(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(ne,{style:qe(`max-height: ${((P=e(z))==null?void 0:P.windowHeight)-((Ve=e(z))==null?void 0:Ve.headerHeight)-100}px`)},{default:l(()=>[(n(!0),E(me,null,Ne(e(v)||{},(J,oe,we)=>(n(),E(me,{key:we},[oe!="index"?(n(),S(pe,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Re,{"expanded-names":le(`c-${we}`).value,"onUpdate:expandedNames":de=>le(`c-${we}`).value=de,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(fe,{name:"1"},{header:l(()=>[g("div",Ao,[t(k,null,{default:l(()=>[t(y,{size:"small",type:"success"},{default:l(()=>[L(i(s(oe)+1),1)]),_:2},1024),g("span",Eo,i(e(d)(J.title)),1)]),_:2},1024),t(h,{size:"small",type:"error",secondary:e(ee),onClick:de=>U(oe)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1}),L(" "+i(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(ye,{span:24,"x-gap":"6"},{default:l(()=>[t(Q,{span:6},{default:l(()=>[g("span",Do,i(e(a)("fieldKey")),1),t(j,{value:J.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":de=>J.key=e(Z)(de)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(Q,{span:11},{default:l(()=>[g("span",Lo,i(e(a)("title")),1),t(ke,{modelValue:J.title,"onUpdate:modelValue":de=>J.title=de,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(Q,{span:7},{default:l(()=>[g("span",Po,i(e(a)("actions")),1),t(h,{block:"",size:"small",type:"primary",disabled:!G(J),secondary:e(ee),class:"w-full",onClick:de=>V(oe)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1}),L(" "+i(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Te,{class:"!my-4.75"}),G(J)?(n(),S(ua,{key:0,modelValue:e(v)[oe].items,"onUpdate:modelValue":de=>e(v)[oe].items=de,"parent-item-index":we,"collection-key":oe,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),S(Ae,{key:1,bordered:"",type:"info"},{default:l(()=>[L(i(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):_e("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),No={class:"flex items-center"},Ro={class:"text-base"},Oo={class:"mt-2"},qo={class:"mt-2 text-xs"},Fo=Be({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:Z,displayFormErrors:ee,isInDevMode:_}=Je(),{sections:B}=je(We()),{loadSections:$}=We(),{isLightTheme:se}=je(gt()),O=st(),K=nt(),Y=o(!1);$();const z=o(12),v=o(1),R=G=>{z.value=G},M={name:"",title:"",content:"",slug:""},q=o(!1),F=o(null),f=o(M),le={title:[{required:!0,message:a("fillRequired")}]},N=o(null),D=G=>{N.value=he.cloneDeep(G),f.value=he.cloneDeep(G||M),q.value=!0},te=async()=>{var G;return(G=F.value)==null||G.validate(async W=>{var ae,s,A,T,c,b;if(!W){O.start(),Y.value=!0;const X={title:f.value.title};N.value||(X.name=he.startCase(he.camelCase(p(f.value.title))).replace(/\s+/g,""));const u=await d({method:N.value?"put":"post",url:N.value?`/sections/${N.value.slug}`:"/sections",data:X});if(u.failure&&u.error)switch((A=(s=(ae=u.error)==null?void 0:ae.response)==null?void 0:s.data)==null?void 0:A.errorCode){case et.FORM_INVALID_DATA:ee((b=(c=(T=u.error)==null?void 0:T.response)==null?void 0:c.data)==null?void 0:b.data);break;default:K.error(a("anErrorOccurred"))}else K.success(a("success")),$(),q.value=!1;Y.value=!1,O.finish()}}),!1},H=o(null),U=o(!1),V=async G=>{var ae;Y.value=!0,O.start();const W=await d({url:`/sections/${(ae=H.value)==null?void 0:ae.slug}`,method:"put",data:{dataStructure:G}});W.success&&W.result?(K.success(a("success")),$(),w(W.result.data)):K.error(a("anErrorOccurred")),Y.value=!1,O.finish()},w=G=>{H.value=G,U.value=!0};return(G,W)=>{var ne,Q;const ae=be,s=ce,A=ze,T=it,c=zt,b=Nt,X=al,u=nl,r=lt,C=sl,I=wt,x=bt,h=ft,k=mt,pe=ut;return n(),E(me,null,[e(B)&&e(B).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Ne(e(B).slice((e(v)-1)*e(z),e(v)*e(z)),y=>(n(),S(r,{key:y.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(u,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:j})=>[t(s,null,{default:l(()=>[j?(n(),S(ae,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>W[5]||(W[5]=[g("span",null,null,-1)])),default:l(()=>[t(X,{name:"1"},{header:l(()=>[g("div",No,[t(T,null,{default:l(()=>[e(_)?(n(),S(A,{key:0,size:"small",type:"primary",secondary:e(se),onClick:ot(j=>w(y),["stop"])},{default:l(()=>[t(s,{class:"mr-1"},{default:l(()=>[t(ae,{icon:"carbon:data-1"})]),_:1}),L(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):_e("",!0),t(A,{size:"small",type:"primary",secondary:e(se),onClick:ot(j=>D(y),["stop"])},{default:l(()=>[t(s,null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(c,{vertical:"",class:Ge(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),g("span",Ro,i(e(p)(y.title)),1)])]),default:l(()=>[g("div",null,i(e(a)("sectionUsedInXPages",[y.pagesCount])),1),g("section",Oo,[(n(!0),E(me,null,Ne(y.pages,j=>(n(),S(b,{key:j.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[L(i(e(p)(j.title)),1)]),_:2},1024))),128))]),g("div",qo,[L(i(e(a)("dataRetrievalSlug"))+": ",1),g("b",null,i(y.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(C,{page:e(v),"onUpdate:page":W[0]||(W[0]=y=>$e(v)?v.value=y:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(z),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(B).length/e(z)),"onUpdate:pageSize":R},{prefix:l(()=>[L(i(`${e(B).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(r,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(I,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(s,null,{default:l(()=>[t(ae,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(pe,{show:e(q),"onUpdate:show":W[2]||(W[2]=y=>$e(q)?q.value=y:null),loading:e(Y),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(N)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:te,onNegativeClick:W[3]||(W[3]=y=>q.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:F,model:e(f),rules:le,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(h,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(x,{modelValue:e(f).title,"onUpdate:modelValue":W[1]||(W[1]=y=>e(f).title=y),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Va,{show:e(U),"onUpdate:show":W[4]||(W[4]=y=>$e(U)?U.value=y:null),title:e(p)((ne=e(H))==null?void 0:ne.title),"raw-data-structure":(Q=e(H))==null?void 0:Q.dataStructure,"update-data-structure":V},null,8,["show","title","raw-data-structure"])],64)}}});const jo={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(ue){const a=ue,{t:d}=He(),p=o(!1),Z=o(null),ee=o({header:null,results:null});function _({header:R,results:M}){ee.value={header:R,results:M},a.onSuccess&&a.onSuccess(ee.value)}function B(R){if(R.stopPropagation(),R.preventDefault(),p.value)return;const M=R.dataTransfer.files;if(M.length!==1){console.log(d("supportUploadingOneFile"));return}const q=M[0];if(!v(q))return console.log(d("formatNotSupported")),!1;K(q),R.stopPropagation(),R.preventDefault()}function $(R){R.stopPropagation(),R.preventDefault(),R.dataTransfer.dropEffect="copy"}function se(){Z.value.click()}function O(R){const q=R.target.files[0];q&&K(q)}function K(R){if(Z.value=null,!a.beforeUpload){Y(R);return}a.beforeUpload(R)&&Y(R)}function Y(R){return p.value=!0,new Promise((M,q)=>{const F=new FileReader;F.onload=f=>{const le=f.target.result,N=en(le,{type:"array"}),D=N.SheetNames[0],te=N.Sheets[D],H=z(te),U=fl.sheet_to_json(te);_({header:H,results:U}),p.value=!1,M()},F.readAsArrayBuffer(R)})}function z(R){const M=[],q=fl.decode_range(R["!ref"]);let F;const f=q.s.r;for(F=q.s.c;F<=q.e.c;++F){const le=R[fl.encode_cell({c:F,r:f})];let N="UNKNOWN "+F;le&&le.t&&(N=fl.format_cell(le)),M.push(N)}return M}function v(R){return/\.(xlsx|xls|csv)$/.test(R.name)}return(R,M)=>{const q=ze;return n(),E("div",null,[g("input",{ref_key:"excelUploadInput",ref:Z,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:O},null,544),g("div",{class:"drop",onDrop:B,onDragover:$,onDragenter:$},[L(i(e(d)("dropExcelFileHereOr"))+" ",1),t(q,{loading:e(p),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:se},{default:l(()=>[L(i(e(d)("browse")),1)]),_:1},8,["loading"])],32)])}}},Ta=Ut(jo,[["__scopeId","data-v-c15025e0"]]),Bo={class:"flex items-center justify-center"},Ko=Be({__name:"Email",setup(ue){const a=st(),d=nt(),p=pt(),{displayFormErrors:Z}=Je(),{request:ee}=Qe(),{t:_,locale:B}=He(),$=o(!1),se=o([]),O=o(""),K=o(),Y={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${_("total")}: ${u}`})},z=[{type:"selection"},{title:_("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.email})}},{title:_("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Lt(u.updatedAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:_("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Lt(u.createdAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:K,placeholder:_("search"),value:O.value,onInput:u=>{O.value=u}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{D(u)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{p.warning({title:_("confirm"),content:_("confirmDeleteEmailAddress"),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/emails/${u.id}`})).success?(d.success(_("success")),R()):d.error(_("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=De(()=>{if(!O.value)return se.value;const u=se.value.filter(r=>r.email.toLowerCase().includes(O.value.toLowerCase()));return K.value&&K.value.focus(),u}),R=async()=>{$.value=!0;const u=await ee({url:"/newsletter/emails"});u.success&&u.result&&(se.value=u.result.data),$.value=!1};R();const M=o(!1),q=o(!1),F=o(null),f=o(null),le=o({email:""}),N={email:[{required:!0,message:_("fillRequired")},{trigger:["input"],validator(u,r){return r&&!Qt.isEmail(r)?new Error(_("invalidEmail")):!0}}]},D=u=>{F.value=he.cloneDeep(u),u?le.value=he.cloneDeep(u):le.value={email:""},q.value=!0},te=async()=>{var u;return(u=f.value)==null||u.validate(async r=>{var C,I,x,h,k,pe;if(!r)if(F.value)if(F.value.email!==le.value.email&&se.value.findIndex(ne=>ne.email==le.value.email)>-1)d.error(_("sameEmailAddressMessage"));else{a.start(),M.value=!0;const ne={email:le.value.email},Q=await ee({method:"put",url:`/newsletter/emails/${F.value.id}`,data:ne});Q.success&&Q.result.data&&(d.success(_("success")),R()),M.value=!1,a.finish(),q.value=!1}else if(se.value.findIndex(ne=>ne.email==le.value.email)>-1)d.error(_("sameEmailAddressMessage"));else{a.start(),M.value=!0;const ne={email:le.value.email},Q=await ee({method:"post",url:"/newsletter/emails",data:ne});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case et.FORM_INVALID_DATA:Z((pe=(k=(h=Q.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:d.error(_("anErrorOccurred"))}else d.success(_("success")),R();M.value=!1,a.finish(),q.value=!1}}),!1};let H=null;const U=()=>{H&&(H.destroy(),H=null)};wa(U);const V=(u,r)=>r.map(C=>u.map(I=>C[I])),w=()=>{H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","email","createdAt","updatedAt"];const C=he.sortBy(se.value.map((x,h)=>({no:h+1,...x})),"email"),I=V(r,C);try{u.export_json_to_excel({header:r,data:I,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(_("anErrorOccurred"))}})},G=()=>{H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["email"];const C=V(r,[{email:"adresse@email.com"}]);try{u.export_json_to_excel({header:r,data:C,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(_("anErrorOccurred"))}})},W=o(!1),ae=async({results:u})=>{M.value=!0,a.start(),H||(H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].email&&se.value.findIndex(C=>C.email==u[r].email)==-1&&(H&&(H.content=`${_("pleaseBePatient")}: ${r} ${_("task_s")} / ${u.length}`),await ee({method:"post",url:"/newsletter/emails",data:{email:u[r].email}}));await R(),U(),a.finish(),M.value=!1,W.value=!1},s=o(ct()),A=o([]),T=u=>u.id,c=u=>{A.value=u},b=()=>{A.value=[],s.value=ct()},X=async()=>(A.value.length?p.warning({title:_("confirm"),content:_("deleteSelectionWarningMessage",[A.value.length]),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let u=0;u<A.value.length;u++)(await ee({url:`/newsletter/emails/${A.value[u]}`,method:"delete"})).success;R(),a.finish(),M.value=!1,d.success(_("success")),b()}}):d.warning(_("noItemSelected")),!1);return(u,r)=>{const C=ba,I=it,x=It,h=lt,k=Pt,pe=kl,ne=gl,Q=ft,y=mt,j=ut,ke=Ta;return n(),E(me,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:r[0]||(r[0]=ye=>w())},{trigger:l(()=>[t(e(ze),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("export")),1)]),_:1})]),default:l(()=>[L(" "+i(e(_)("exportDataInExcelFile")),1)]),_:1}),t(e(ze),{type:"info",onClick:r[1]||(r[1]=ye=>W.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("import")),1)]),_:1}),t(e(ze),{type:"primary",onClick:r[2]||(r[2]=ye=>D(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),S(h,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(_)("nbItemsSelected",[e(A).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(ze),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("delete")),1)]),_:1}),t(e(ze),{type:"warning",size:"small",onClick:b},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),t(ne,null,{default:l(()=>[(n(),S(pe,{key:e(s),columns:z,data:e(v),pagination:Y,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"]))]),_:1}),t(j,{show:e(q),"onUpdate:show":r[4]||(r[4]=ye=>$e(q)?q.value=ye:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(F)?e(_)("editEmailAddress"):e(_)("addEmailAddress"),"positive-text":e(_)("validate"),"negative-text":e(_)("cancel"),onPositiveClick:te,onNegativeClick:r[5]||(r[5]=ye=>q.value=!1)},{default:l(()=>[t(y,{ref_key:"formRef",ref:f,class:"mt-5",model:e(le),rules:N,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Q,{label:e(_)("emailAddress"),path:"email"},{default:l(()=>[t(e(Ze),{value:e(le).email,"onUpdate:value":r[3]||(r[3]=ye=>e(le).email=ye),placeholder:e(_)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(j,{show:e(W),"onUpdate:show":r[7]||(r[7]=ye=>$e(W)?W.value=ye:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(_)("import")},{default:l(()=>[t(ke,{class:"my-5","on-success":ae}),g("div",Bo,[t(e(ze),{type:"info",size:"small",onClick:r[6]||(r[6]=ye=>G())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Yo={class:"flex items-center justify-center"},Go=Be({__name:"Phone",setup(ue){const a=st(),d=nt(),p=pt(),{displayFormErrors:Z}=Je(),{request:ee}=Qe(),{t:_,locale:B}=He(),$=o(!1),se=o([]),O=o(""),K=o(),Y={pageSize:12,prefix:({itemCount:u})=>re("div",{class:"font-bold"},{default:()=>`${_("total")}: ${u}`})},z=[{type:"selection"},{title:_("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return re("div",{},{default:()=>u.phone})}},{title:_("updateAt"),key:"updatedAt",width:125,render(u){return re("div",{},{default:()=>Lt(u.updatedAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:_("createdAt"),key:"createdAt",width:125,render(u){return re("div",{},{default:()=>Lt(u.createdAt,{locale:B.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:K,placeholder:_("search"),value:O.value,onInput:u=>{O.value=u}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"warning",onClick:()=>{D(u)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",onClick:()=>{p.warning({title:_("confirm"),content:_("confirmDeletePhoneNumber"),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{(await ee({method:"delete",url:`/newsletter/phones/${u.id}`})).success?(d.success(_("success")),R()):d.error(_("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=De(()=>{if(!O.value)return se.value;const u=se.value.filter(r=>r.phone.toLowerCase().includes(O.value.toLowerCase()));return K.value&&K.value.focus(),u}),R=async()=>{$.value=!0;const u=await ee({url:"/newsletter/phones"});u.success&&u.result&&(se.value=u.result.data),$.value=!1};R();const M=o(!1),q=o(!1),F=o(null),f=o(null),le=o({phone:""}),N={phone:[{required:!0,message:_("fillRequired")},{trigger:["input"],validator(u,r){return r&&!ln(r)?new Error(_("invalidNumber")):!0}}]},D=u=>{F.value=he.cloneDeep(u),u?le.value=he.cloneDeep(u):le.value={phone:""},q.value=!0},te=async()=>{var u;return(u=f.value)==null||u.validate(async r=>{var C,I,x,h,k,pe;if(!r)if(F.value)if(F.value.phone!==le.value.phone.replace(/\s+/g,"")&&se.value.findIndex(ne=>ne.phone==le.value.phone.replace(/\s+/g,""))>-1)d.error(_("samePhoneNumberMessage"));else{a.start(),M.value=!0;const ne={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"put",url:`/newsletter/phones/${F.value.id}`,data:ne});Q.success&&Q.result.data&&(d.success(_("success")),R()),M.value=!1,a.finish(),q.value=!1}else if(se.value.findIndex(ne=>ne.phone==le.value.phone.replace(/\s+/g,""))>-1)d.error(_("samePhoneNumberMessage"));else{a.start(),M.value=!0;const ne={phone:le.value.phone.replace(/\s+/g,"")},Q=await ee({method:"post",url:"/newsletter/phones",data:ne});if(Q.failure&&Q.error)switch((x=(I=(C=Q.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case et.FORM_INVALID_DATA:Z((pe=(k=(h=Q.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:d.error(_("anErrorOccurred"))}else d.success(_("success")),R();M.value=!1,a.finish(),q.value=!1}}),!1};let H=null;const U=()=>{H&&(H.destroy(),H=null)};wa(U);const V=(u,r)=>r.map(C=>u.map(I=>C[I])),w=()=>{H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["no","phone","createdAt","updatedAt"];const C=he.sortBy(se.value.map((x,h)=>({no:h+1,...x})),"phone"),I=V(r,C);try{u.export_json_to_excel({header:r,data:I,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(_("anErrorOccurred"))}})},G=()=>{H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var r=["phone"];const C=V(r,[{phone:"+22899999999"}]);try{u.export_json_to_excel({header:r,data:C,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),U()}catch{U(),d.error(_("anErrorOccurred"))}})},W=o(!1),ae=async({results:u})=>{M.value=!0,a.start(),H||(H=d.info(_("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<u.length;r++)u[r].phone&&se.value.findIndex(C=>C.phone.replace(/\s+/g,"")==u[r].phone.replace(/\s+/g,""))==-1&&(H&&(H.content=`${_("pleaseBePatient")}: ${r} ${_("task_s")} / ${u.length}`),await ee({method:"post",url:"/newsletter/phones",data:{phone:u[r].phone.replace(/\s+/g,"")}}));await R(),U(),a.finish(),M.value=!1,W.value=!1},s=o(ct()),A=o([]),T=u=>u.id,c=u=>{A.value=u},b=()=>{A.value=[],s.value=ct()},X=async()=>(A.value.length?p.warning({title:_("confirm"),content:_("deleteSelectionWarningMessage",[A.value.length]),positiveText:_("yes"),negativeText:_("no"),onPositiveClick:async()=>{M.value=!0,a.start();for(let u=0;u<A.value.length;u++)(await ee({url:`/newsletter/phones/${A.value[u]}`,method:"delete"})).success;R(),a.finish(),M.value=!1,d.success(_("success")),b()}}):d.warning(_("noItemSelected")),!1);return(u,r)=>{const C=ba,I=it,x=It,h=lt,k=Pt,pe=kl,ne=gl,Q=tn,y=ft,j=mt,ke=ut,ye=Ta;return n(),E(me,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(I,null,{default:l(()=>[t(C,{onPositiveClick:r[0]||(r[0]=Te=>w())},{trigger:l(()=>[t(e(ze),{type:"success"},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("export")),1)]),_:1})]),default:l(()=>[L(" "+i(e(_)("exportDataInExcelFile")),1)]),_:1}),t(e(ze),{type:"info",onClick:r[1]||(r[1]=Te=>W.value=!0)},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("import")),1)]),_:1}),t(e(ze),{type:"primary",onClick:r[2]||(r[2]=Te=>D(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(A).length?(n(),S(h,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(I,{align:"center",justify:"space-between"},{default:l(()=>[g("span",null,i(e(_)("nbItemsSelected",[e(A).length])),1),t(I,{align:"center",justify:"space-between"},{default:l(()=>[t(e(ze),{type:"error",size:"small",onClick:X},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("delete")),1)]),_:1}),t(e(ze),{type:"warning",size:"small",onClick:b},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:close"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),t(ne,null,{default:l(()=>[(n(),S(pe,{key:e(s),columns:z,data:e(v),pagination:Y,loading:e($),"single-line":!1,"scroll-x":800,"row-key":T,size:"small",striped:"","onUpdate:checkedRowKeys":c},null,8,["data","loading","row-key"]))]),_:1}),t(ke,{show:e(q),"onUpdate:show":r[4]||(r[4]=Te=>$e(q)?q.value=Te:null),loading:e(M),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(F)?e(_)("editPhoneNumber"):e(_)("addPhoneNumber"),"positive-text":e(_)("validate"),"negative-text":e(_)("cancel"),onPositiveClick:te,onNegativeClick:r[5]||(r[5]=Te=>q.value=!1)},{default:l(()=>[t(j,{ref_key:"formRef",ref:f,class:"mt-5",model:e(le),rules:N,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(y,{label:e(_)("phone"),path:"phone"},{default:l(()=>[t(Q,{modelValue:e(le).phone,"onUpdate:modelValue":r[3]||(r[3]=Te=>e(le).phone=Te)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ke,{show:e(W),"onUpdate:show":r[7]||(r[7]=Te=>$e(W)?W.value=Te:null),loading:e(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(_)("import")},{default:l(()=>[t(ye,{class:"my-5","on-success":ae}),g("div",Yo,[t(e(ze),{type:"info",size:"small",onClick:r[6]||(r[6]=Te=>G())},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"mdi:download"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Ho="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",Wo={class:"text-base"},Jo={class:"text-base"},Xo=Be({__name:"DataForm",props:Wt({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(ue){const a=ue,d=yt(ue,"show"),p=yt(ue,"data"),Z=st(),ee=nt(),{t:_}=He(),{tr:B,pickByTheme:$,editKeysToCamelCase:se}=Je(),O=o(null),K=o(!1),Y=_t("currentEditItem"),z=De(()=>he.isEqual(p.value,Y==null?void 0:Y.value)&&he.isEqual(R.value,q.value)),v=()=>{d.value=!1,K.value=!1},R=o({}),M=o(ct()),q=o({}),F=o(),f=o();kt(()=>d.value,N=>{var D;N&&(ca(p.value.contentModelData)?R.value=Ft(p.value.contentModelData):R.value=Ft({}),he.forIn(se(((D=a.contentModel)==null?void 0:D.dataStructure)??{}),(te,H)=>{(!R.value[H]||Array.isArray(R.value[H])&&R.value[H].length==0)&&(H==="index"?R.value[H]=Ft({}):R.value[H]=Ft([]))}),q.value=he.cloneDeep(R.value),M.value=ct())},{immediate:!0});const le=async()=>{K.value=!0,Z.start();const N=F.value&&await F.value(),D=f.value&&await f.value();(!F.value||N)&&(!f.value||D)?await a.submitData(R.value):ee.error(_("mandatoryFieldsNotFilledIn")),Z.finish(),K.value=!1};return(N,D)=>{const te=ga,H=bl,U=hl,V=be,w=ce,G=ze,W=it,ae=lt,s=$t,A=Rt,T=ht,c=da;return n(),S(c,{modelValue:d.value,"onUpdate:modelValue":D[3]||(D[3]=b=>d.value=b),"close-on-esc":!1,closable:!1,onOnSizeChange:D[4]||(D[4]=b=>{O.value=b})},{header:l(()=>[g("div",Wo,[t(te,{depth:"1"},{default:l(()=>{var b;return[L(i(e(B)((b=a.contentModel)==null?void 0:b.title))+" ",1),g("span",null," Â -Â "+i(e(Y)?e(_)("editItem"):e(_)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(W,{align:"center"},{default:l(()=>[g("span",Jo,i(e(_)("status"))+":",1),t(U,{value:p.value.isActive,"onUpdate:value":D[0]||(D[0]=b=>p.value.isActive=b),name:"isActive",class:"w-full"},{default:l(()=>[t(H,{value:!1,label:e(_)("hidden"),class:"w-[50%]"},null,8,["label"]),t(H,{value:!0,label:e(_)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),D[5]||(D[5]=g("div",{class:"w-4"},null,-1)),t(G,{type:"success",title:e(_)("save"),loading:e(K),disabled:e(z),onClick:D[1]||(D[1]=b=>le())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("save")),1)]),_:1},8,["title","loading","disabled"]),t(G,{type:"error",title:e(_)("close"),disabled:e(K),onClick:D[2]||(D[2]=b=>v())},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:close"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var b,X;return[g("section",{style:qe(`min-height: ${((b=e(O))==null?void 0:b.windowHeight)-((X=e(O))==null?void 0:X.headerHeight)-5}px`),class:Ge(`w-full h-full ${e($)("bg-slate-200","bg-zinc-800")}`)},[t(T,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(A,{class:"ml-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:qe(`height: ${((u=e(O))==null?void 0:u.windowHeight)-((r=e(O))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),E(me,null,Ne(e(se)((C=N.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),E(me,{key:x},[String(x)==="index"?(n(),S(ae,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),S(yl,{key:`${e(M)}-${x}-form-1`,modelValue:e(R)[x],"onUpdate:modelValue":h=>e(R)[x]=h,items:I,onUpdate:(h,k)=>{F.value=k}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(A,{class:"mr-4 mt-2"},{default:l(()=>{var u,r;return[t(s,{style:qe(`height: ${((u=e(O))==null?void 0:u.windowHeight)-((r=e(O))==null?void 0:r.headerHeight)-50}px`)},{default:l(()=>{var C;return[(n(!0),E(me,null,Ne(e(se)((C=N.contentModel)==null?void 0:C.dataStructure),(I,x)=>(n(),E(me,{key:x},[String(x)!=="index"?(n(),S(ae,{key:0,title:e(B)(I.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(G,{quaternary:"",size:"small",onClick:()=>e(R)[x].push({})},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(_)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),E(me,null,Ne(e(R)[x],(h,k)=>(n(),S(ae,{key:k,title:String(k+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(G,{type:"error",size:"small",onClick:()=>e(R)[x].splice(k,1)},{icon:l(()=>[t(w,null,{default:l(()=>[t(V,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),S(yl,{key:`${e(M)}-${x}-${k}-form-2`,modelValue:e(R)[x][k],"onUpdate:modelValue":pe=>e(R)[x][k]=pe,items:I.items,onUpdate:(pe,ne)=>{f.value=ne}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):_e("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),Zo={class:"flex items-center justify-between"},Qo={class:"flex flex-col"},ei={class:"text-sm font-bold"},ti={class:"text-xs font-normal"},li=Be({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Wt(["update"],["update:show"]),setup(ue,{emit:a}){const{t:d}=He(),{request:p}=Qe(),{pickByTheme:Z,tr:ee,displayFormErrors:_,mergeArrays:B}=Je(),{extractItemTitle:$}=dl(),{loadContentModels:se}=We(),{contentModels:O}=je(We()),{isLightTheme:K}=je(gt()),Y=pt(),z=nt(),v=st(),R=a;se();const M=yt(ue,"show"),q=o(!1),F=_t("currentEditItem"),f=async T=>{Y.warning({title:d("confirm"),content:d("confirmDeleteLink"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{var b,X,u,r,C;v.start(),(await p({method:"put",url:`/content-model/items/${(b=F==null?void 0:F.value)==null?void 0:b.id}`,data:{relatedItems:(r=(u=(X=F==null?void 0:F.value)==null?void 0:X.relatedItems)==null?void 0:u.filter(I=>I.id!==T.id))==null?void 0:r.map(I=>I.id)}})).success?(z.success(d("success")),R("update",(C=F==null?void 0:F.value)==null?void 0:C.id)):z.error(d("anErrorOccurred")),v.finish()}})},le=T=>{var c;return(c=O.value)==null?void 0:c.find(b=>b.id===T.contentModelId)},N=o(!1),D=o(null),te=o({contentModelId:null,itemId:null}),H={contentModelId:[{required:!0,message:d("fillRequired")}],itemId:[{required:!0,message:d("fillRequired")}]},U=async()=>{var T;return(T=D.value)==null||T.validate(async c=>{var b,X,u,r,C,I,x,h,k,pe;if(!c){v.start(),q.value=!0;const ne=((X=(b=F==null?void 0:F.value)==null?void 0:b.relatedItems)==null?void 0:X.map(y=>y.id))||[],Q=await p({method:"put",url:`/content-model/items/${(u=F==null?void 0:F.value)==null?void 0:u.id}`,data:{relatedItems:[...ne,te.value.itemId]}});if(Q.failure&&Q.error)switch((I=(C=(r=Q.error)==null?void 0:r.response)==null?void 0:C.data)==null?void 0:I.errorCode){case et.FORM_INVALID_DATA:_((k=(h=(x=Q.error)==null?void 0:x.response)==null?void 0:h.data)==null?void 0:k.data);break;default:z.error(d("anErrorOccurred"))}else z.success(d("success")),R("update",(pe=F==null?void 0:F.value)==null?void 0:pe.id),N.value=!1;q.value=!1,v.finish()}}),!1},V=T=>re("span",{},{default:()=>ee(T.title)}),w=T=>De(()=>re("span",{},{default:()=>$(T,le(T))})),G=o(!1),W=o([]),ae=o([]),s=async(T,c)=>{if(!T.length){ae.value=[];return}G.value=!0;const b=await p({url:`/content-model-items/search/${T}/${c}`});b.success&&b.result&&(ae.value=b.result.data),G.value=!1},A=De(()=>B(W.value,ae.value,"id").filter(T=>{var c;return T.id!==((c=F==null?void 0:F.value)==null?void 0:c.id)}));return(T,c)=>{const b=be,X=ze,u=it,r=ce,C=lt,I=$t,x=wt,h=Gt,k=ut,pe=Vt,ne=ft,Q=mt;return n(),E(me,null,[t(k,{show:M.value,"onUpdate:show":c[2]||(c[2]=y=>M.value=y),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(d)("linkContentModelItems")},{"header-extra":l(()=>[t(u,{align:"center"},{default:l(()=>[t(X,{size:"small",type:"primary",disabled:e(q),onClick:c[0]||(c[0]=y=>N.value=!0)},{default:l(()=>[t(b,{icon:"carbon:add-alt",class:"mr-1"}),L(" "+i(e(d)("add")),1)]),_:1},8,["disabled"]),t(X,{size:"small",type:"error",disabled:e(q),onClick:c[1]||(c[1]=y=>M.value=!1)},{default:l(()=>[t(b,{icon:"carbon:close",class:"mr-1"}),L(" "+i(e(d)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(h,{show:e(q)},{default:l(()=>{var y,j;return[(j=(y=e(F))==null?void 0:y.relatedItems)!=null&&j.length?(n(),S(I,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var ke;return[(n(!0),E(me,null,Ne((ke=e(F))==null?void 0:ke.relatedItems,ye=>(n(),S(C,{key:ye.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Te;return[g("div",Zo,[g("div",Qo,[g("span",ei,i(e($)(ye,le(ye))),1),g("span",ti,i(e(ee)((Te=le(ye))==null?void 0:Te.title)),1)]),t(u,null,{default:l(()=>[t(X,{size:"small",type:"error",secondary:e(K),onClick:Ae=>f(ye)},{default:l(()=>[t(r,null,{default:l(()=>[t(b,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),S(C,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(d)("noLinkAdded")},{icon:l(()=>[t(r,null,{default:l(()=>[t(b,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(k,{show:e(N),"onUpdate:show":c[6]||(c[6]=y=>$e(N)?N.value=y:null),loading:e(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(d)("addLink"),"positive-text":e(d)("validate"),"negative-text":e(d)("cancel"),onPositiveClick:U,onNegativeClick:c[7]||(c[7]=y=>N.value=!1)},{default:l(()=>[t(Q,{ref_key:"formRef",ref:D,model:e(te),rules:H,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ne,{label:e(d)("contentModel"),path:"contentModelId"},{default:l(()=>[t(pe,{value:e(te).contentModelId,"onUpdate:value":c[3]||(c[3]=y=>e(te).contentModelId=y),options:e(O),placeholder:e(d)("contentModel"),"render-label":V,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(ne,{label:e(d)("itemToLink"),path:"itemId"},{default:l(()=>[t(pe,{value:e(te).itemId,"onUpdate:value":c[4]||(c[4]=y=>e(te).itemId=y),options:e(A)||[],placeholder:e(d)("itemToLink"),"render-label":y=>w(y).value,loading:e(G),disabled:!e(te).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:c[5]||(c[5]=y=>s(y,e(te).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ai={key:0,class:"w-full flex items-center justify-between gap-4"},ni={class:"flex items-center gap-3"},si={key:0},oi={class:"flex items-center justify-center h-full"},ii=["src"],ri={class:"text-center text-dimgray text-sm"},ui={key:1,class:"flex items-center justify-center"},di=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(ue){const{t:a}=He(),{request:d}=Qe(),{extractItemTitle:p}=dl(),{tr:Z,displayFormErrors:ee}=Je(),_=pt(),B=nt(),$=st(),se=yt(ue,"modelValue"),O=o(!1),K=o(!1),Y=o(!1),z=o(!1),v=o([]),R=o(0),M=o(12),q=o(1),F=De(()=>{var b;return`/content-model/items?pageSize=${M.value}&contentModelId=${(b=se.value)==null?void 0:b.id}`}),f=b=>{N(`${F.value}&page=${b}`)},le=b=>{M.value=b,N()},N=async(b=null,X=!1)=>{var r,C,I,x,h;O.value=!0,$.start();const u=await d({url:b??F.value});u.success&&u.result&&(v.value=((r=u.result.data)==null?void 0:r.items)||[],R.value=((I=(C=u.result.data)==null?void 0:C.meta)==null?void 0:I.total)||0,q.value=((h=(x=u.result.data)==null?void 0:x.meta)==null?void 0:h.currentPage)||1),$.finish(),O.value=!1};N(null,!0);const D=o(null),te=o({title:"",contentModelData:"",isActive:!0}),H=b=>{D.value=he.cloneDeep(b),b?te.value=he.cloneDeep(b):te.value={title:"",contentModelData:"",isActive:!0},Y.value=!0},U=b=>{D.value=he.cloneDeep(b),z.value=!0},V=async b=>{await N();const X=v.value.find(u=>u.id===b);X&&U(X)},w=async b=>{_.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-model/items/${b.id}`})).success?(B.success(a("success")),N()):B.error(a("anErrorOccurred"))}})},G=async b=>{var r,C,I,x,h,k,pe;$.start(),K.value=!0;const X={title:te.value.title,contentModelData:b,isActive:te.value.isActive,contentModelId:(r=se.value)==null?void 0:r.id},u=await d({method:D.value?"put":"post",url:D.value?`/content-model/items/${D.value.id}`:"/content-model/items",data:X});if(u.failure&&u.error)switch((x=(I=(C=u.error)==null?void 0:C.response)==null?void 0:I.data)==null?void 0:x.errorCode){case et.FORM_INVALID_DATA:ee((pe=(k=(h=u.error)==null?void 0:h.response)==null?void 0:k.data)==null?void 0:pe.data);break;default:B.error(a("anErrorOccurred"))}else B.success(a("success")),N(`${F.value}&page=${q.value}`),Y.value=!1;K.value=!1,$.finish()},W=o(!1),ae=o(ct()),s=o({}),A=De(()=>{let b=0;for(const X in s.value)s.value[X]&&b++;return b});function T(){s.value={},N()}const c=async()=>(A.value?_.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[A.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{K.value=!0,$.start();for(const b in s.value)s.value[b]&&await d({url:`/content-model/items/${b}`,method:"delete"});$.finish(),K.value=!1,B.success(a("success")),s.value={},N(null,!0)}}):B.warning(a("noItemSelected")),!1);return At("currentEditItem",D),(b,X)=>{const u=Ht,r=be,C=ce,I=ze,x=it,h=It,k=_a,pe=wl,ne=Nt,Q=lt,y=Pt,j=Rt,ke=ht,ye=sl,Te=Gt,Ae=wt;return n(),E(me,null,[t(h,{to:"#alt-action"},{default:l(()=>[t(x,{align:"center"},{default:l(()=>[t(u,{checked:e(W),"onUpdate:checked":[X[0]||(X[0]=fe=>$e(W)?W.value=fe:null),X[1]||(X[1]=fe=>{for(const Re of e(v))Re.id&&(e(s)[Re.id]=fe);ae.value=("uuidv4"in b?b.uuidv4:e(ct))()})],disabled:!e(v).length},{default:l(()=>[L(i(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(I,{type:"primary",onClick:X[2]||(X[2]=fe=>H(null))},{icon:l(()=>[t(C,{size:"18"},{default:l(()=>[t(r,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(k,{class:"mt-2 mb-5",onBack:X[3]||(X[3]=fe=>se.value=null)},{title:l(()=>{var fe;return[L(i(e(Z)((fe=se.value)==null?void 0:fe.title)),1)]}),back:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(A)>0?(n(),E("section",ai,[g("span",null,i(e(a)("nbItemsSelected",[e(A)])),1),g("section",ni,[t(I,{type:"error",size:"small",onClick:c},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("delete")),1)]),_:1}),t(I,{type:"warning",size:"small",onClick:T},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("cancelSelection")),1)]),_:1})])])):_e("",!0)]),_:1}),e(v).length&&!e(O)?(n(),E("section",si,[t(ke,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),E(me,null,Ne(e(v),(fe,Re)=>(n(),S(j,{key:Re},{default:l(()=>[t(y,{name:"slide-fade",appear:""},{default:l(()=>[t(Q,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var Ce;return[g("div",oi,[g("img",{src:((Ce=se.value)==null?void 0:Ce.imageUrl)??e(Ho),class:"w-full h-[200px] object-cover"},null,8,ii)])]}),header:l(()=>[g("div",ri,[t(pe,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[fe.id?(n(),S(u,{key:e(ae),checked:e(s)[fe.id],"onUpdate:checked":Ce=>e(s)[fe.id]=Ce,class:"mr-1"},null,8,["checked","onUpdate:checked"])):_e("",!0),L(" "+i(e(p)(fe,se.value)),1)]),_:2},1024)])]),action:l(()=>[t(x,{justify:"space-between",align:"center"},{default:l(()=>[t(ne,{bordered:!1,type:fe.isActive?"success":"error"},{default:l(()=>[L(i(fe.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(x,null,{default:l(()=>[t(I,{ternary:"",circle:"",title:e(a)("edit"),onClick:Ce=>H(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("links"),onClick:Ce=>U(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(I,{ternary:"",circle:"",title:e(a)("delete"),onClick:Ce=>w(fe)},{icon:l(()=>[t(C,null,{default:l(()=>[t(r,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(ye,{page:e(q),"onUpdate:page":[X[4]||(X[4]=fe=>$e(q)?q.value=fe:null),f],class:"mt-10 justify-center","show-size-picker":"","page-size":e(M),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(R)/e(M)),"onUpdate:pageSize":le},{prefix:l(()=>[L(i(`${e(R)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(O)?(n(),E("section",ui,[t(Te,{size:"medium"})])):(n(),S(Ae,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(Xo,{show:e(Y),"onUpdate:show":X[5]||(X[5]=fe=>$e(Y)?Y.value=fe:null),data:e(te),"onUpdate:data":X[6]||(X[6]=fe=>$e(te)?te.value=fe:null),"content-model":se.value,"submit-data":G},null,8,["show","data","content-model"]),t(li,{show:e(z),"onUpdate:show":X[7]||(X[7]=fe=>$e(z)?z.value=fe:null),onUpdate:V},null,8,["show"])],64)}}}),ci={key:2},pi={class:"flex items-center"},fi={class:"text-base"},mi={class:"mt-4"},vi="previews",_i=Be({__name:"index",setup(ue){const{t:a}=He(),{request:d}=Qe(),{tr:p,pickByTheme:Z,displayFormErrors:ee,fileUrl:_,isInDevMode:B,formatKey:$}=Je(),{isLightTheme:se}=je(gt()),{contentModels:O}=je(We()),{loadContentModels:K}=We(),Y=st(),z=nt(),v=pt(),R=o(!1),M=o(!1),q=_t("appConfig"),F=async()=>{Y.start(),R.value=!0,await K(),R.value=!1,Y.finish()};F();const f=o(12),le=o(1),N=C=>{f.value=C},D={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},te=o(!1),H=o(null),U=o(D),V={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},w=o(null),G=C=>{w.value=he.cloneDeep(C),U.value=he.cloneDeep(C||D),te.value=!0},W=async()=>{var C;return(C=H.value)==null||C.validate(async I=>{var x,h,k,pe,ne,Q;if(!I){Y.start(),M.value=!0;const y={name:U.value.name,title:U.value.title,image:U.value.image,description:U.value.description,titleFieldName:U.value.titleFieldName,hasPermalink:U.value.hasPermalink},j=await d({method:w.value?"put":"post",url:w.value?`/content-models/${w.value.id}`:"/content-models",data:y});if(j.failure&&j.error)switch((k=(h=(x=j.error)==null?void 0:x.response)==null?void 0:h.data)==null?void 0:k.errorCode){case et.FORM_INVALID_DATA:ee((Q=(ne=(pe=j.error)==null?void 0:pe.response)==null?void 0:ne.data)==null?void 0:Q.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),F(),te.value=!1;M.value=!1,Y.finish()}}),!1},ae=async C=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-models/${C.id}`})).success?(z.success(a("success")),F()):z.error(a("anErrorOccurred"))}})},s=o(null),A=o(!1),T=async C=>{var x;M.value=!0,Y.start();const I=await d({url:`/content-models/${(x=s.value)==null?void 0:x.id}`,method:"put",data:{dataStructure:C}});I.success&&I.result?(z.success(a("success")),F(),c(I.result.data)):z.error(a("anErrorOccurred")),M.value=!1,Y.finish()},c=C=>{s.value=C,A.value=!0},b=o(!1),X=async C=>{U.value.image=C,b.value=!1},u=()=>{U.value.image=""},r=ll("content-models-management",()=>({itemsContentModel:o(null)}))();return kt(()=>U.value.title,C=>{w.value||U.value.name.length<=21&&(U.value.name=Ca(p(C),{trim:!0,lower:!0,strict:!0}))}),(C,I)=>{var we,de,Me;const x=be,h=ce,k=ze,pe=It,ne=it,Q=zt,y=lt,j=sl,ke=wt,ye=Pt,Te=bt,Ae=ft,fe=Ze,Re=Rt,Ce=ha,ie=jt,ge=ht,P=Ht,Ve=mt,J=ut,oe=Yt;return n(),E(me,null,[e(r).itemsContentModel?_e("",!0):(n(),S(pe,{key:0,to:"#alt-action"},{default:l(()=>[e(O)&&e(O).length?(n(),S(k,{key:0,type:"primary",onClick:I[0]||(I[0]=Se=>G(null))},{icon:l(()=>[t(h,{size:"18"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addContentModel")),1)]),_:1})):_e("",!0)]),_:1})),e(r).itemsContentModel?(n(),S(di,{key:1,modelValue:e(r).itemsContentModel,"onUpdate:modelValue":I[1]||(I[1]=Se=>e(r).itemsContentModel=Se)},null,8,["modelValue"])):(n(),E("section",ci,[t(ye,{appear:"",name:"slide-fade"},{default:l(()=>[g("section",null,[e(O)&&e(O).length?(n(),E(me,{key:0},[(n(!0),E(me,null,Ne(e(O).slice((e(le)-1)*e(f),e(le)*e(f)),Se=>(n(),S(y,{key:Se.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[g("div",pi,[e(B)?(n(),S(ne,{key:0},{default:l(()=>[t(k,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>c(Se),["stop"])},{default:l(()=>[t(h,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:data-1"})]),_:1}),L(" "+i(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>G(Se),["stop"])},{default:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"error",secondary:e(se),onClick:ot(Ee=>ae(Se),["stop"])},{default:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):_e("",!0),e(B)?(n(),S(Q,{key:1,vertical:"",class:Ge(e(Z)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):_e("",!0),g("span",fi,i(e(p)(Se.title)),1)])]),"header-extra":l(()=>[t(k,{size:"small",type:"primary",secondary:e(se),onClick:ot(Ee=>e(r).itemsContentModel=Se,["stop"])},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(j,{page:e(le),"onUpdate:page":I[2]||(I[2]=Se=>$e(le)?le.value=Se:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(f),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(O).length/e(f)),"onUpdate:pageSize":N},{prefix:l(()=>[L(i(`${e(O).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),S(y,{key:1,size:"large",class:Ge(`mb-2 !border-dashed !border-2 ${e(Z)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ke,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[g("div",mi,[t(k,{size:"small",onClick:I[3]||(I[3]=Se=>G(null))},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(J,{show:e(te),"onUpdate:show":I[11]||(I[11]=Se=>$e(te)?te.value=Se:null),loading:e(M),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(w)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:W,onNegativeClick:I[12]||(I[12]=Se=>te.value=!1)},{default:l(()=>[t(Ve,{ref_key:"formRef",ref:H,model:e(U),rules:V,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(Ae,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Te,{modelValue:e(U).title,"onUpdate:modelValue":I[4]||(I[4]=Se=>e(U).title=Se),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Ae,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Te,{modelValue:e(U).description,"onUpdate:modelValue":I[5]||(I[5]=Se=>e(U).description=Se),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ge,{"x-gap":"12",span:24},{default:l(()=>[t(Re,{span:14},{default:l(()=>[t(Ae,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(fe,{value:e(U).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":I[6]||(I[6]=Se=>e(U).name=e($)(Se))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Ae,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(fe,{value:e(U).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":I[7]||(I[7]=Se=>e(U).titleFieldName=e($)(Se))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(ie,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(ne,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(Ce,{class:"cursor-pointer","object-fit":"cover",style:qe("border: 1px dashed "+e(Z)("green","white")),size:150,src:e(_)(e(U).image||""),onClick:I[8]||(I[8]=Se=>b.value=!0)},{default:l(()=>[e(U).image?_e("",!0):(n(),S(h,{key:0,size:64},{default:l(()=>[t(x,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(U).image?(n(),S(k,{key:0,quaternary:"",onClick:I[9]||(I[9]=Se=>u())},{icon:l(()=>[t(h,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(Ae,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(P,{checked:e(U).hasPermalink,"onUpdate:checked":I[10]||(I[10]=Se=>e(U).hasPermalink=Se)},{default:l(()=>[L(i(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(oe,{show:e(b),"onUpdate:show":I[13]||(I[13]=Se=>$e(b)?b.value=Se:null),title:e(a)("selectImage"),"upload-config":{folder:vi,limit:0,maxSize:0,baseUrl:((we=e(q))==null?void 0:we.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:X},null,8,["show","title","upload-config"]),t(Va,{show:e(A),"onUpdate:show":I[14]||(I[14]=Se=>$e(A)?A.value=Se:null),title:e(p)((de=e(s))==null?void 0:de.title),"raw-data-structure":(Me=e(s))==null?void 0:Me.dataStructure,"update-data-structure":T},null,8,["show","title","raw-data-structure"])]))],64)}}});var Et=(ue=>(ue.NEWS_TAG="news-tag",ue.NEWS_CATEGORY="news-category",ue.NEWS_ARTICLE="news-article",ue.CONTENT_MODEL="content-model",ue))(Et||{});const yi={class:"text-base font-bold"},gi={class:"text-sm"},bi={class:"text-xs text-slate-400"},hi={class:"text-xs text-slate-400"},ki={class:"text-xs text-slate-400"},wi={class:"text-sm"},xi={class:"text-xs text-slate-400"},Ci={class:"text-xs text-slate-400"},Ii={class:"text-xs text-slate-400"},$i={class:"text-sm"},Vi={class:"text-xs text-slate-400"},Ti={class:"text-xs text-slate-400"},zi={class:"text-xs text-slate-400"},Ui={class:"text-base font-bold"},Si={class:"text-sm"},Mi={class:"text-xs text-slate-400"},Ai={class:"text-xs text-slate-400"},Ei={class:"text-xs text-slate-400"},Di=Be({__name:"index",setup(ue){const{t:a}=He(),{tr:d}=Je(),{request:p}=Qe(),{contentModels:Z,pages:ee}=je(We()),{loadContentModels:_,loadPages:B}=We(),$=nt(),se=st(),O=[{pathPrefix:"/news/article",contentType:Et.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Et.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Et.NEWS_TAG,contentParam:"slug",pageId:null}],K=o(!1),Y=o([]),z=o(O),v=o(),R=De(()=>Z.value.filter(N=>N.hasPermalink)),M=async(N=!1)=>{se.start(),K.value=!0,N&&(await _(),await B());const D=await p({url:"/permalinks"});if(D.success&&D.result){Y.value=D.result.data,z.value=he.cloneDeep(O);for(let te=0;te<R.value.length;te++)z.value.push({pathPrefix:`/${R.value[te].slug}`,contentType:Et.CONTENT_MODEL,contentParam:"id",contentId:R.value[te].id,pageId:null});for(let te=0;te<z.value.length;te++)switch(z.value[te].contentType){case Et.NEWS_ARTICLE:case Et.NEWS_CATEGORY:case Et.NEWS_TAG:{const H=Y.value.find(U=>U.contentType===z.value[te].contentType);H&&(z.value[te].pathPrefix=H.pathPrefix,z.value[te].contentParam=H.contentParam,z.value[te].pageId=H.pageId,z.value[te].permalinkId=H.id)}break;case Et.CONTENT_MODEL:{const H=Y.value.find(U=>U.contentType===z.value[te].contentType&&U.contentId===z.value[te].contentId);H&&(z.value[te].pathPrefix=H.pathPrefix,z.value[te].contentParam=H.contentParam,z.value[te].pageId=H.pageId,z.value[te].permalinkId=H.id)}break}v.value=he.cloneDeep(z.value)}K.value=!1,se.finish()};M(!0);const q=async()=>{se.start(),K.value=!0,(await p({method:"put",url:"/permalinks",data:z.value})).success&&($.success(a("success")),M()),K.value=!1,se.finish()},F=De(()=>he.isEqual(z.value,v.value)),f=N=>re("span",{},{default:()=>d(N.title)}),le=N=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(N);return(N,D)=>{const te=be,H=ce,U=ze,V=It,w=Ze,G=Rt,W=Vt,ae=ht,s=lt,A=al,T=nl,c=zt;return n(),E(me,null,[t(V,{to:"#alt-action"},{default:l(()=>[t(U,{type:"primary",loading:e(K),disabled:e(F),onClick:D[0]||(D[0]=b=>q())},{icon:l(()=>[t(H,null,{default:l(()=>[t(te,{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(s,{embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:b})=>[t(H,null,{default:l(()=>[b?(n(),S(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[10]||(D[10]=[g("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[g("span",yi,i(e(a)("news")),1)]),default:l(()=>[t(s,{size:"small"},{header:l(()=>[g("span",gi,i(e(a)("articles")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[g("span",bi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[0].pathPrefix,"onUpdate:value":D[1]||(D[1]=b=>e(z)[0].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",hi,i(e(a)("contentParam")),1),t(w,{value:e(z)[0].contentParam,"onUpdate:value":D[2]||(D[2]=b=>e(z)[0].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",ki,i(e(a)("contentPage")),1),t(W,{value:e(z)[0].pageId,"onUpdate:value":D[3]||(D[3]=b=>e(z)[0].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":f,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[g("span",wi,i(e(a)("categories")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[g("span",xi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[1].pathPrefix,"onUpdate:value":D[4]||(D[4]=b=>e(z)[1].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",Ci,i(e(a)("contentParam")),1),t(w,{value:e(z)[1].contentParam,"onUpdate:value":D[5]||(D[5]=b=>e(z)[1].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",Ii,i(e(a)("contentPage")),1),t(W,{value:e(z)[1].pageId,"onUpdate:value":D[6]||(D[6]=b=>e(z)[1].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":f,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(s,{size:"small"},{header:l(()=>[g("span",$i,i(e(a)("tags")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[g("span",Vi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[2].pathPrefix,"onUpdate:value":D[7]||(D[7]=b=>e(z)[2].pathPrefix=b),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",Ti,i(e(a)("contentParam")),1),t(w,{value:e(z)[2].contentParam,"onUpdate:value":D[8]||(D[8]=b=>e(z)[2].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(G,{span:"7"},{default:l(()=>[g("span",zi,i(e(a)("contentPage")),1),t(W,{value:e(z)[2].pageId,"onUpdate:value":D[9]||(D[9]=b=>e(z)[2].pageId=b),options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":f,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{class:"!my-2"}),e(R).length&&e(z).length>3?(n(),S(s,{key:0,embedded:"",size:"small"},{default:l(()=>[t(T,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:b})=>[t(H,null,{default:l(()=>[b?(n(),S(te,{key:0,icon:"fa-solid:chevron-left"})):(n(),S(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>D[11]||(D[11]=[g("span",null,null,-1)])),default:l(()=>[t(A,{name:"1"},{header:l(()=>[g("span",Ui,i(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),E(me,null,Ne(e(R),(b,X)=>(n(),S(s,{key:b.id,size:"small"},{header:l(()=>[g("span",Si,i(e(d)(b.title)),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(G,{span:"10"},{default:l(()=>[g("span",Mi,i(e(a)("pathPrefix")),1),t(w,{value:e(z)[X+3].pathPrefix,"onUpdate:value":u=>e(z)[X+3].pathPrefix=u,"allow-input":le,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(G,{span:"7"},{default:l(()=>[g("span",Ai,i(e(a)("contentParam")),1),t(w,{value:e(z)[X+3].contentParam,"onUpdate:value":u=>e(z)[X+3].contentParam=u,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(G,{span:"7"},{default:l(()=>[g("span",Ei,i(e(a)("contentPage")),1),t(W,{value:e(z)[X+3].pageId,"onUpdate:value":u=>e(z)[X+3].pageId=u,options:e(ee)||[],placeholder:e(a)("selectPage"),"render-label":f,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):_e("",!0)],64)}}}),Li={class:"w-full"},Pi=Be({__name:"Campaign",setup(ue){const a=st(),d=nt(),p=pt(),Z=fa(),{displayFormErrors:ee,ckEditorToolbarItems:_}=Je(),{request:B}=Qe(),{t:$,locale:se}=He(),O=o(!1),K=o([]),Y=o([]),z=o([]),v=o([]),R=o(""),M=o(),q={pageSize:12,prefix:({itemCount:s})=>re("div",{class:"font-bold"},{default:()=>`${$("total")}: ${s}`})},F=[{title:$("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(s){return re("div",{},{default:()=>s.title})}},{title:$("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(s){return re("small",{},{default:()=>s.subject})}},{title:$("numberOfRecipients"),key:"recipients",width:200,render(s){return re("div",{},{default:()=>s.recipients.length})},sortOrder:!1,sorter:"default"},{title:$("updateAt"),key:"updatedAt",width:150,render(s){return re("div",{},{default:()=>Lt(s.updatedAt,{locale:se.value,outPattern:"DD MMMM YYYY"})})}},{title:$("createdAt"),key:"createdAt",width:150,render(s){return re("div",{},{default:()=>Lt(s.createdAt,{locale:se.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>re(Ze,{ref:M,placeholder:$("search"),value:R.value,onInput:s=>{R.value=s}},{suffix:()=>re(ce,{},{default:()=>re(be,{icon:"carbon:search"})})}),key:"actions",width:175,render(s){return re("div",{class:"flex justify-end items-center w-full"},[re(ze,{size:"small",type:"primary",title:$("history"),onClick:()=>{H.value=s,te.value=!0},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"mdi:history"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"info",title:$("launchCampaign"),onClick:()=>{const A=p.info({title:$("launchCampaign"),content:$("confirmLaunchCampaign",[s.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:$("yes"),negativeText:$("cancel"),onPositiveClick:async()=>{var X,u,r,C,I,x,h;A.loading=!0;const T=await B({url:"/email",method:"post",data:{title:s.title,subject:s.subject,content:s.content,recipients:s.recipients.filter(k=>Qt.isEmail(k)),tags:[]}}),c=(X=Z.getSettingValue("phone","string"))==null?void 0:X.split(",")[0],b=await B({url:"/sms",method:"post",data:{from:c.replace(/\s+/g,""),content:s.rawContent,recipients:s.recipients.filter(k=>!Qt.isEmail(k))}});if(T.failure&&T.error)switch((C=(r=(u=T.error)==null?void 0:u.response)==null?void 0:r.data)==null?void 0:C.errorCode){case et.FORM_INVALID_DATA:d.error($("invalidData"));break;default:d.error($("sendingFailed"))}else if(b.failure&&b.error)switch((h=(x=(I=b.error)==null?void 0:I.response)==null?void 0:x.data)==null?void 0:h.errorCode){case et.FORM_INVALID_DATA:d.error($("invalidData"));break;default:d.error($("sendingFailed"))}else{const k=s.history||[];k.push({id:ct(),date:Da(new Date,{locale:se.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+T.result.message+" Phone: "+b.result.message});const pe=await B({method:"put",url:`/newsletter/campaigns/${s.id}`,data:{history:k}});pe.success&&pe.result.data?(d.success($("success")),le()):d.error($("anErrorOccurred"))}A.loading=!1}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"mdi:send"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"warning",title:$("edit"),onClick:()=>{G(s)},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:edit"})})}),re("div",{class:"w-2"}),re(ze,{size:"small",type:"error",title:$("delete"),onClick:()=>{p.warning({title:$("confirm"),content:$("confirmDeleteCampaign"),positiveText:$("yes"),negativeText:$("no"),onPositiveClick:async()=>{(await B({method:"delete",url:`/newsletter/campaigns/${s.id}`})).success?(d.success($("success")),le()):d.error($("anErrorOccurred"))}})},renderIcon:()=>re(ce,null,{default:()=>re(be,{icon:"carbon:trash-can"})})})])},fixed:"right"}],f=De(()=>{if(!R.value)return v.value;const s=v.value.filter(A=>A.title.toLowerCase().includes(R.value.toLowerCase())||A.subject.toLowerCase().includes(R.value.toLowerCase()));return M.value&&M.value.focus(),s}),le=async(s=!1)=>{O.value=!0;const A=await B({url:"/newsletter/campaigns"});if(A.success&&A.result&&(v.value=A.result.data),s){const T=await B({url:"/newsletter/emails"});T.success&&T.result&&(K.value=T.result.data);const c=await B({url:"/newsletter/phones"});c.success&&c.result&&(Y.value=c.result.data),z.value=[...K.value.map(b=>({recipient:b.email,type:"email"})),...Y.value.map(b=>({recipient:b.phone,type:"phone"}))]}O.value=!1};le(!0);const N=o(!1),D=o(!1),te=o(!1),H=o(null),U=o(null),V=o({title:"",subject:"",content:"",rawContent:"",recipients:[]}),w={title:[{required:!0,message:$("fillRequired")}],subject:[{required:!0,message:$("fillRequired")}],content:[{required:!0,message:$("fillRequired")}],rawContent:[{required:!0,message:$("fillRequired")}],recipients:[{required:!0,message:$("fillRequired")}]},G=s=>{H.value=he.cloneDeep(s),s?V.value=he.cloneDeep(s):V.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},D.value=!0},W=async()=>{var s;return(s=U.value)==null||s.validate(async A=>{var T,c,b,X,u,r;if(!A)if(H.value)if(H.value.title!==V.value.title&&v.value.findIndex(C=>C.title==V.value.title)>-1)d.error($("sameCampaignTitleMessage"));else{a.start(),N.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},I=await B({method:"put",url:`/newsletter/campaigns/${H.value.id}`,data:C});I.success&&I.result.data&&(d.success($("success")),le()),N.value=!1,a.finish(),D.value=!1}else if(v.value.findIndex(C=>C.title==V.value.title)>-1)d.error($("sameCampaignTitleMessage"));else{a.start(),N.value=!0;const C={title:V.value.title,subject:V.value.subject,content:V.value.content,rawContent:V.value.rawContent,recipients:V.value.recipients},I=await B({method:"post",url:"/newsletter/campaigns",data:C});if(I.failure&&I.error)switch((b=(c=(T=I.error)==null?void 0:T.response)==null?void 0:c.data)==null?void 0:b.errorCode){case et.FORM_INVALID_DATA:ee((r=(u=(X=I.error)==null?void 0:X.response)==null?void 0:u.data)==null?void 0:r.data);break;default:d.error($("anErrorOccurred"))}else d.success($("success")),le();N.value=!1,a.finish(),D.value=!1}}),!1},ae=(s,A)=>he.isEqual(s.slice().sort(),A.slice().sort());return(s,A)=>{const T=It,c=kl,b=gl,X=ft,u=xa,r=Ht,C=Vt,I=mt,x=ut,h=ja,k=Ba,pe=Ka,ne=$t,Q=wt;return n(),E(me,null,[t(T,{to:"#alt-action"},{default:l(()=>[t(e(ze),{type:"primary",onClick:A[0]||(A[0]=y=>G(null))},{icon:l(()=>[t(e(ce),{size:"18"},{default:l(()=>[t(e(be),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[L(" "+i(e($)("addCampaign")),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(c,{columns:F,data:e(f),pagination:q,loading:e(O),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(x,{show:e(D),"onUpdate:show":A[9]||(A[9]=y=>$e(D)?D.value=y:null),loading:e(N),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e($)("editCampaign"):e($)("addCampaign"),"positive-text":e($)("validate"),"negative-text":e($)("cancel"),onPositiveClick:W,onNegativeClick:A[10]||(A[10]=y=>D.value=!1)},{default:l(()=>[t(I,{ref_key:"formRef",ref:U,class:"mt-5",model:e(V),rules:w,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(X,{label:e($)("title"),path:"title"},{default:l(()=>[t(e(Ze),{value:e(V).title,"onUpdate:value":A[1]||(A[1]=y=>e(V).title=y),placeholder:e($)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("subject"),path:"subject"},{default:l(()=>[t(e(Ze),{value:e(V).subject,"onUpdate:value":A[2]||(A[2]=y=>e(V).subject=y),placeholder:e($)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("content"),path:"content"},{default:l(()=>[g("div",Li,[t(u,{modelValue:e(V).content,"onUpdate:modelValue":A[3]||(A[3]=y=>e(V).content=y),"toolbar-items":e(_),placeholder:e($)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(X,{label:e($)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Ze),{value:e(V).rawContent,"onUpdate:value":A[4]||(A[4]=y=>e(V).rawContent=y),placeholder:e($)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(X,{label:e($)("recipients"),path:"recipients"},{default:l(()=>[t(C,{value:e(V).recipients,"onUpdate:value":A[8]||(A[8]=y=>e(V).recipients=y),options:e(z),placeholder:e($)("recipients"),loading:e(O),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(r,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(V).recipients,e(z).filter(y=>y.type=="email").map(y=>y.recipient)),"onUpdate:checked":A[5]||(A[5]=y=>{y?e(V).recipients=e(z).filter(j=>j.type=="email").map(j=>j.recipient):e(V).recipients=e(V).recipients.filter(j=>!("_v"in s?s._v:e(Qt)).isEmail(j))})},{default:l(()=>[L(i(e($)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),A[12]||(A[12]=g("div",{class:"h-2"},null,-1)),t(r,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(V).recipients,e(z).filter(y=>y.type=="phone").map(y=>y.recipient)),"onUpdate:checked":A[6]||(A[6]=y=>{y?e(V).recipients=e(z).filter(j=>j.type=="phone").map(j=>j.recipient):e(V).recipients=e(V).recipients.filter(j=>("_v"in s?s._v:e(Qt)).isEmail(j))})},{default:l(()=>[L(i(e($)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),A[13]||(A[13]=g("div",{class:"h-2"},null,-1)),t(r,{size:"large",class:"w-full","default-checked":e(z).length&&e(V).recipients.length===e(z).length,"onUpdate:checked":A[7]||(A[7]=y=>{y?e(V).recipients=e(z).filter(j=>j.recipient).map(j=>j.recipient):e(V).recipients=[]})},{default:l(()=>[L(i(e($)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(x,{show:e(te),"onUpdate:show":A[11]||(A[11]=y=>$e(te)?te.value=y:null),loading:e(N),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e($)("history")},{default:l(()=>{var y,j;return[(j=(y=e(H))==null?void 0:y.history)!=null&&j.length?(n(),S(ne,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(pe,{hoverable:""},{default:l(()=>{var ke;return[(n(!0),E(me,null,Ne((ke=e(H))==null?void 0:ke.history.slice().reverse(),ye=>(n(),S(k,{key:ye.id},{default:l(()=>[t(h,{title:ye.date,"content-style":"margin-top: 10px;"},{default:l(()=>[L(i(ye.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),S(Q,{key:1,description:e($)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),Ni={id:"header-btn"},Ri={key:1,id:"alt-action"},Oi={key:"contact-info"},qi={class:"text-xs"},Fi={class:"text-xs"},ji={class:"text-xs"},Bi={class:"text-xs"},Ki={class:"text-xs"},Yi={class:"text-xs"},Gi={class:"text-xs"},Hi={class:"flex items-center gap-2 w-full"},Wi={key:"appearance"},Ji={class:"text-sm"},Xi={class:"flex flex-col items-center justify-center text-gray-400"},Zi={class:"text-sm"},Qi={class:"flex flex-col items-center justify-center text-gray-400"},er={class:"text-sm"},tr={class:"flex flex-col items-center justify-center text-gray-400"},lr={class:"text-sm"},ar={class:"flex flex-col items-center justify-center text-gray-400"},nr={class:"text-sm"},sr={class:"flex flex-col items-center justify-center text-gray-400"},or={class:"text-sm"},ir={class:"flex flex-col items-center justify-center text-gray-400"},rr={class:"text-sm"},ur={class:"text-sm"},dr={class:"flex flex-col items-center justify-center text-gray-400"},cr={class:"text-sm"},pr={class:"flex flex-col items-center justify-center text-gray-400"},fr={class:"text-sm"},mr={class:"flex items-center justify-between"},vr={class:"font-bold"},_r={class:"flex items-center"},yr={class:"flex items-center justify-between"},gr={class:"font-bold"},br={class:"flex items-center"},hr={class:"flex items-center justify-between"},kr={class:"font-bold"},wr={class:"flex items-center"},xr={key:"social-networks"},Cr={class:"text-xs"},Ir={key:"newsletter-email"},$r={key:"newsletter-phone"},Vr={key:"newsletter-campaign"},Tr={key:"ads"},zr={key:"videos"},Ur={key:"content-models"},Sr={key:"menus"},Mr={key:"content-permalinks"},Ar={key:"page-sections"},Er=Be({name:La.CONTENT_MANAGEMENT.NAME}),Dr=Be({...Er,setup(ue){Il(ge=>({d005cb5c:e(K)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],d=ge=>a.includes(ge),{t:p}=He(),Z=an(),ee=pt(),_=nt(),B=st(),{request:$}=Qe(),{displayFormErrors:se,appPrimaryColor:O,appSecondaryColor:K,pickByTheme:Y,fileUrl:z,isLgScreen:v,isMdScreen:R,isSmScreen:M,isXlScreen:q,is2XlScreen:F,tr:f}=Je(),le=gt(),N=fa(),{pages:D}=je(We()),{loadPages:te,loadSections:H}=We(),U=_t("appConfig"),V=o(!1),w=o({name:"",icon:"",adminIcon:"",oneColorIcon:"",logo:"",adminLogo:"",oneColorLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),G=o(w.value),W=ll("content-management",()=>({currentMenuItemKey:o("contact-info")}))(),ae=(ge,P)=>()=>re(ce,{color:W.currentMenuItemKey==P?"white":""},{default:()=>re(be,{icon:ge})}),s=(ge,P)=>()=>re("span",{class:`${W.currentMenuItemKey==P?"text-white":""}`,id:he.camelCase(P)},{default:()=>ge}),A=De(()=>{const ge=[{label:s(p("contactInfo"),"contact-info"),key:"contact-info",icon:ae("carbon:identification","contact-info")},{label:s(p("appearance"),"appearance"),key:"appearance",icon:ae("carbon:color-palette","appearance")},{label:s(p("socialNetworks"),"social-networks"),key:"social-networks",icon:ae("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:s(p("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ae("carbon:at","newsletter-email")},{label:s(p("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ae("carbon:phone","newsletter-phone")},{label:s(p("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ae("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:s(p("ads"),"ads"),key:"ads",icon:ae("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:s(p("videos"),"videos"),key:"videos",icon:ae("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:s(p("menusManagement"),"menus"),key:"menus",icon:ae("carbon:menu","menus")},{label:s(p("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ae("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:s(p("contentModels"),"content-models"),key:"content-models",icon:ae("carbon:model-alt","content-models")},{label:s(p("pageSections"),"page-sections"),key:"page-sections",icon:ae("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const P of D.value)ge.push({label:s(`${p("page")} ${f(P.title)}`,`${P.slug}-page`),key:`${P.slug}-page`,icon:ae("carbon:document",`${P.slug}-page`)});return ge.push({key:"divider",type:"divider"},{label:s(p("addPage"),"add-new-page"),key:"add-new-page",icon:ae("carbon:add-alt","add-new-page")}),ge}),T=De(()=>he.isEqual(w.value,G.value)),c=De(()=>le.contentLayoutSize.height-200),b=De(()=>le.isLightTheme?"light":"dark"),X=o(null),u={email:[{required:!1,message:p("fillRequired")},{trigger:["input"],validator(ge,P){return P&&!Qt.isEmail(P)?new Error(p("invalidEmail")):!0}}]},r=o();kt(()=>r.value,ge=>{w.value.additionalInfo=JSON.stringify(ge||"[]")},{deep:!0});const C=o(null),I={},x=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],h=o("logos"),k=o(!1),pe=async ge=>{switch(h.value){case"logos":w.value.logo=ge;break;case"icons":w.value.icon=ge;break;case"admin-logos":w.value.adminLogo=ge;break;case"admin-icons":w.value.adminIcon=ge;break;case"monochrome-logos":w.value.oneColorLogo=ge;break;case"monochrome-icons":w.value.oneColorIcon=ge;break;case"dark-backgrounds":w.value.adminAuthDarkBg=ge;break;case"light-backgrounds":w.value.adminAuthLightBg=ge;break}k.value=!1},ne={name:"",title:"",content:"",slug:""},Q=o(!1),y=o(null),j=o(ne),ke={title:[{required:!0,message:p("fillRequired")}]},ye=o(null),Te=ge=>{ye.value=he.cloneDeep(ge),j.value=he.cloneDeep(ge||ne),Q.value=!0},Ae=async()=>{var ge;return(ge=y.value)==null||ge.validate(async P=>{var Ve,J,oe,we,de,Me,Se;if(!P){B.start(),V.value=!0;const Ee={title:j.value.title};ye.value||(Ee.name=he.startCase(he.camelCase(f(j.value.title))).replace(/\s+/g,""));const Fe=await $({method:ye.value?"put":"post",url:ye.value?`/pages/${ye.value.slug}`:"/pages",data:Ee});if(Fe.failure&&Fe.error)switch((oe=(J=(Ve=Fe.error)==null?void 0:Ve.response)==null?void 0:J.data)==null?void 0:oe.errorCode){case et.FORM_INVALID_DATA:se((Me=(de=(we=Fe.error)==null?void 0:we.response)==null?void 0:de.data)==null?void 0:Me.data);break;default:_.error(p("anErrorOccurred"))}else _.success(p("success")),te(),W.currentMenuItemKey=`${(Se=Fe.result.data)==null?void 0:Se.slug}-page`,Q.value=!1;V.value=!1,B.finish()}}),!1},fe=async(ge=!1)=>{var P;B.start(),V.value=!0,te(),ge&&H(),await N.loadInformation(),(P=N.items)==null||P.forEach(Ve=>{w.value[Ve.key]!=null&&(w.value[Ve.key]=Ve.value)}),G.value=he.cloneDeep(w.value);try{r.value=JSON.parse(w.value.additionalInfo||"[]")}catch{r.value=[]}V.value=!1,B.finish()};fe(!0),Tl(()=>{Z.params.key&&d(Z.params.key)&&(W.currentMenuItemKey=Z.params.key)});const Re=async()=>{V.value=!0;const ge=await $({url:"/app-information",method:"put",data:w.value});ge.success&&ge.result?_.success(p("success")):_.error(p("unableToUpdateSettings")),await fe()},Ce=["contact-info","appearance","social-networks"];kt(()=>W.currentMenuItemKey,(ge,P)=>{ge==="add-new-page"?(W.currentMenuItemKey=P,Te(null)):Ce.includes(P)&&!Ce.includes(ge)&&(T.value||ee.warning({title:p("confirm"),content:p("marketInfoDiscardChangesConfirm"),positiveText:p("yes"),negativeText:p("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{W.currentMenuItemKey=P}}))});const ie=o();return kt(()=>[R.value,M.value,v.value,q.value],([ge,P,Ve,J])=>{ie.value=ge||P||Ve||J,setTimeout(()=>{ie.value=void 0},500)},{immediate:!0}),(ge,P)=>{var St;const Ve=ze,J=it,oe=Ya,we=Ga,de=Ze,Me=ft,Se=jt,Ee=ht,Fe=bt,tt=ya,xt=mt,Le=lt,Xe=ha,Ke=Rt,ve=zt,Ye=Ha,Tt=za,Ot=Yt,qt=ut;return n(),E(me,null,[t(Tt,null,{"header-extra":l(()=>[t(J,null,{default:l(()=>[g("div",Ni,[Ce.includes(e(W).currentMenuItemKey)?(n(),S(Ve,{key:0,loading:e(V),disabled:e(T),type:"primary",onClick:Re},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:save"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("save")),1)]),_:1},8,["loading","disabled"])):(n(),E("div",Ri))])]),_:1})]),default:l(()=>[t(Le,{embedded:""},{default:l(()=>[t(Ye,{style:qe(`height: ${e(c)}px`)},{default:l(()=>[t(Ye,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t(we,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(ie),"default-collapsed":!e(F),"collapsed-width":64,"native-scrollbar":!1,width:e(F)?300:275},{default:l(()=>[t(oe,{value:e(W).currentMenuItemKey,"onUpdate:value":P[0]||(P[0]=Ue=>e(W).currentMenuItemKey=Ue),"collapsed-width":64,"collapsed-icon-size":22,options:e(A)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ye,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(Ma,{name:"slide-fade"},{default:l(()=>[ul(g("section",Oi,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"contactInfoFormRef",ref:X,model:e(w),rules:u,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Me,{path:"name"},{label:l(()=>[g("b",qi,i(e(p)("websiteName")),1)]),default:l(()=>[t(de,{value:e(w).name,"onUpdate:value":P[1]||(P[1]=Ue=>e(w).name=Ue),placeholder:e(p)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(Ee,{"x-gap":"12",span:24},{default:l(()=>[t(Se,{span:12,path:"email"},{label:l(()=>[g("b",Fi,i(e(p)("email")),1)]),default:l(()=>[t(de,{value:e(w).email,"onUpdate:value":P[2]||(P[2]=Ue=>e(w).email=Ue),placeholder:e(p)("email"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Se,{span:12,path:"phone"},{label:l(()=>[g("b",ji,i(e(p)("phone")),1)]),default:l(()=>[t(de,{value:e(w).phone,"onUpdate:value":P[3]||(P[3]=Ue=>e(w).phone=Ue),placeholder:e(p)("phone"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Me,{path:"address"},{label:l(()=>[g("span",Bi,[g("b",null,i(e(p)("address")),1)])]),default:l(()=>[t(de,{value:e(w).address,"onUpdate:value":P[4]||(P[4]=Ue=>e(w).address=Ue),placeholder:e(p)("address"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(Ee,{"x-gap":"12",span:24},{default:l(()=>[t(Se,{span:12,path:"postalCode"},{label:l(()=>[g("b",Ki,i(e(p)("postalCode")),1)]),default:l(()=>[t(de,{value:e(w).postalCode,"onUpdate:value":P[5]||(P[5]=Ue=>e(w).postalCode=Ue),placeholder:e(p)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Me,{path:"description"},{label:l(()=>[g("b",Yi,i(e(p)("description")),1)]),default:l(()=>[t(Fe,{modelValue:e(w).description,"onUpdate:modelValue":P[6]||(P[6]=Ue=>e(w).description=Ue),placeholder:e(p)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Me,{path:"additionalInfo"},{label:l(()=>[g("b",Gi,i(e(p)("additionalInfo")),1)]),default:l(()=>[t(tt,{value:e(r),"onUpdate:value":P[7]||(P[7]=Ue=>$e(r)?r.value=Ue:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[L(i(e(p)("add")),1)]),default:l(({value:Ue})=>[g("div",Hi,[t(de,{value:Ue.name,"onUpdate:value":dt=>Ue.name=dt,placeholder:e(p)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(de,{value:Ue.content,"onUpdate:value":dt=>Ue.content=dt,placeholder:e(p)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(W).currentMenuItemKey==="contact-info"]]),ul(g("section",Wi,[t(Le,{embedded:""},{default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",Ji,i(e(p)("websiteLogo")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).logo?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).logo),onClick:P[8]||(P[8]=()=>{h.value="logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[9]||(P[9]=()=>{h.value="logos",k.value=!0})},[g("div",Xi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).logo?(n(),S(Ve,{key:2,quaternary:"",onClick:P[10]||(P[10]=()=>e(w).logo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",Zi,i(e(p)("websiteIcon")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).icon?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).icon),onClick:P[11]||(P[11]=()=>{h.value="icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[12]||(P[12]=()=>{h.value="icons",k.value=!0})},[g("div",Qi,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).icon?(n(),S(Ve,{key:2,quaternary:"",onClick:P[13]||(P[13]=()=>e(w).icon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",er,i(e(p)("adminLogo")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminLogo?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).adminLogo),onClick:P[14]||(P[14]=()=>{h.value="admin-logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[15]||(P[15]=()=>{h.value="admin-logos",k.value=!0})},[g("div",tr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).adminLogo?(n(),S(Ve,{key:2,quaternary:"",onClick:P[16]||(P[16]=()=>e(w).adminLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",lr,i(e(p)("adminIcon")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminIcon?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).adminIcon),onClick:P[17]||(P[17]=()=>{h.value="admin-icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[18]||(P[18]=()=>{h.value="admin-icons",k.value=!0})},[g("div",ar,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).adminIcon?(n(),S(Ve,{key:2,quaternary:"",onClick:P[19]||(P[19]=()=>e(w).adminIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",nr,i(e(p)("websiteLogoMonochrome")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorLogo?(n(),S(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).oneColorLogo),onClick:P[20]||(P[20]=()=>{h.value="monochrome-logos",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[21]||(P[21]=()=>{h.value="monochrome-logos",k.value=!0})},[g("div",sr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).oneColorLogo?(n(),S(Ve,{key:2,quaternary:"",onClick:P[22]||(P[22]=()=>e(w).oneColorLogo="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",or,i(e(p)("websiteIconMonochrome")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).oneColorIcon?(n(),S(Xe,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).oneColorIcon),onClick:P[23]||(P[23]=()=>{h.value="monochrome-icons",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[24]||(P[24]=()=>{h.value="monochrome-icons",k.value=!0})},[g("div",ir,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).oneColorIcon?(n(),S(Ve,{key:2,quaternary:"",onClick:P[25]||(P[25]=()=>e(w).oneColorIcon="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{segmented:"",size:"small"},{header:l(()=>[g("span",rr,i(e(p)("adminAuthPagesBg")),1)]),default:l(()=>[t(Ee,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",ur,i(e(p)("lightMode")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthLightBg?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).adminAuthLightBg),onClick:P[26]||(P[26]=()=>{h.value="light-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[27]||(P[27]=()=>{h.value="light-backgrounds",k.value=!0})},[g("div",dr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).adminAuthLightBg?(n(),S(Ve,{key:2,quaternary:"",onClick:P[28]||(P[28]=()=>e(w).adminAuthLightBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),t(Ke,null,{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[g("span",cr,i(e(p)("darkMode")),1)]),default:l(()=>[t(J,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(w).adminAuthDarkBg?(n(),S(Xe,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(Y)(e(O),"white")),size:125,src:e(z)(e(w).adminAuthDarkBg),onClick:P[29]||(P[29]=()=>{h.value="dark-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),E("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(Y)(e(O),"white")}; width: 125px; height: 125px`),onClick:P[30]||(P[30]=()=>{h.value="dark-backgrounds",k.value=!0})},[g("div",pr,[t(e(ce),{size:"50"},{default:l(()=>[t(e(be),{icon:"carbon:image"})]),_:1}),g("span",null,i(e(p)("import")),1)])],4)),e(w).adminAuthDarkBg?(n(),S(Ve,{key:2,quaternary:"",onClick:P[31]||(P[31]=()=>e(w).adminAuthDarkBg="")},{icon:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[L(" "+i(e(p)("clear")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Le,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[g("span",fr,i(e(p)("adminColors")),1)]),default:l(()=>[t(Ee,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Ke,null,{default:l(()=>[g("div",mr,[g("span",vr,i(e(p)("baseColor")),1),g("div",_r,[e(w).primaryColor?(n(),E(me,{key:0},[t(Ve,{text:"",type:"error",style:{"font-size":"21px"},onClick:P[32]||(P[32]=Ue=>e(w).primaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).primaryColor,"onUpdate:value":P[33]||(P[33]=Ue=>e(w).primaryColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Ke,null,{default:l(()=>[g("div",yr,[g("span",gr,i(e(p)("secondaryColor")),1),g("div",br,[e(w).secondaryColor?(n(),E(me,{key:0},[t(Ve,{text:"",type:"error",style:{"font-size":"21px"},onClick:P[34]||(P[34]=Ue=>e(w).secondaryColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).secondaryColor,"onUpdate:value":P[35]||(P[35]=Ue=>e(w).secondaryColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Ke,null,{default:l(()=>[g("div",hr,[g("span",kr,i(e(p)("tertiaryColor")),1),g("div",wr,[e(w).accentColor?(n(),E(me,{key:0},[t(Ve,{text:"",type:"error",style:{"font-size":"21px"},onClick:P[36]||(P[36]=Ue=>e(w).accentColor="")},{default:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(ve,{vertical:""})],64)):_e("",!0),t(e(el),{value:e(w).accentColor,"onUpdate:value":P[37]||(P[37]=Ue=>e(w).accentColor=Ue),class:"cursor-pointer",theme:e(b),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[ml,e(W).currentMenuItemKey==="appearance"]]),ul(g("section",xr,[t(Le,{embedded:""},{default:l(()=>[t(Le,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"socialNetworksFormRef",ref:C,model:e(w),rules:I,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{"x-gap":"12",span:24},{default:l(()=>[(n(),E(me,null,Ne(x,Ue=>t(Se,{key:Ue.name,span:12,path:Ue.name},{label:l(()=>[g("b",Cr,i(e(p)(Ue.name)),1)]),default:l(()=>[t(de,{value:e(w)[Ue.name],"onUpdate:value":dt=>e(w)[Ue.name]=dt,placeholder:e(p)(Ue.name),class:"w-full"},{prefix:l(()=>[t(e(ce),null,{default:l(()=>[t(e(be),{icon:Ue.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(W).currentMenuItemKey==="social-networks"]]),e(W).currentMenuItemKey==="newsletter-email"?(n(),E("section",Ir,[t(Ko)])):_e("",!0),e(W).currentMenuItemKey==="newsletter-phone"?(n(),E("section",$r,[t(Go)])):_e("",!0),e(W).currentMenuItemKey==="newsletter-campaign"?(n(),E("section",Vr,[t(Pi)])):_e("",!0),e(W).currentMenuItemKey==="ads"?(n(),E("section",Tr,[t(vn)])):_e("",!0),e(W).currentMenuItemKey==="videos"?(n(),E("section",zr,[t(mo)])):_e("",!0),e(W).currentMenuItemKey==="content-models"?(n(),E("section",Ur,[t(_i)])):_e("",!0),e(W).currentMenuItemKey==="menus"?(n(),E("section",Sr,[t(Hs)])):_e("",!0),e(W).currentMenuItemKey==="content-permalinks"?(n(),E("section",Mr,[t(Di)])):_e("",!0),e(W).currentMenuItemKey==="page-sections"?(n(),E("section",Ar,[t(Fo)])):_e("",!0),(n(!0),E(me,null,Ne(e(D),(Ue,dt)=>(n(),E(me,{key:`${Ue.slug}-page`},[e(W).currentMenuItemKey===`${Ue.slug}-page`?(n(),E("section",{key:`${Ue.slug}-page`},[t(ps,{slug:Ue.slug,"open-form-modal":Te,onDelete:()=>{e(W).currentMenuItemKey=e(D).length>1?`${e(D)[dt-1].slug}-page`:a[0],e(te)()}},null,8,["slug","onDelete"])])):_e("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Ot,{show:e(k),"onUpdate:show":P[38]||(P[38]=Ue=>$e(k)?k.value=Ue:null),title:e(p)("selectImage"),"upload-config":{folder:e(h),limit:0,maxSize:0,baseUrl:((St=e(U))==null?void 0:St.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:pe},null,8,["show","title","upload-config"]),t(qt,{show:e(Q),"onUpdate:show":P[40]||(P[40]=Ue=>$e(Q)?Q.value=Ue:null),loading:e(V),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(ye)?e(p)("editPage"):e(p)("addPage"),"positive-text":e(p)("validate"),"negative-text":e(p)("cancel"),onPositiveClick:Ae,onNegativeClick:P[41]||(P[41]=Ue=>Q.value=!1)},{default:l(()=>[t(xt,{ref_key:"addPageFormRef",ref:y,model:e(j),rules:ke,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Me,{label:e(p)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(Fe,{modelValue:e(j).title,"onUpdate:modelValue":P[39]||(P[39]=Ue=>e(j).title=Ue),placeholder:e(p)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:Aa(Ae,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const tc=Ut(Dr,[["__scopeId","data-v-9b4bc774"]]);export{tc as default};
