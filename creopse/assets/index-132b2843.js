import{_ as It,a as Kt,b as za}from"./index.vue_vue_type_script_setup_true_lang-6478408e.js";import{_ as Xa}from"./PageLayout.vue_vue_type_script_setup_true_lang-2df5ea4d.js";import{_ as bt}from"./I18nInput-83a26b3b.js";import{f as Ul,p as ot,o as Za,v as ml,T as Qa,a as en,w as tn}from"./vue_runtime-dom-c0cb2070.js";import{e as Ze,u as Je,f as yt,r as Lt,p as Xt,q as $a,s as We,i as Zt,t as Ma,_ as Pt,v as Sa,w as ln,x as vl,h as Aa,j as an,R as nn}from"./index-818706be.js";import{I as ye}from"./iconify_vue-6750bec6.js";import{_ as gl}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-9c0c57e3.js";import{R as Qe}from"./response-error-code-87d1097e.js";import{d as ll,a as je}from"./pinia-5dd13ed8.js";import{_ as we}from"./lodash-a9971f22.js";import{c as ct,b as nt,a as st,_ as Te,g as it,Z as Nt,V as Tt,N as fe,L as lt,ag as $t,a2 as wt,P as Yt,a4 as rt,E as Xe,H as Ft,I as ht,a8 as bl,a9 as hl,ah as sn,F as pt,G as ft,ab as tl,a7 as kl,aa as Ea,j as Vt,R as Ot,a5 as wl,ac as Da,a3 as Tl,M as Ht,ai as zl,aj as on,$ as al,a0 as nl,W as xl,U as La,a1 as sl,ak as rn,al as Pa,k as un,am as Na,an as Oa,ao as dn,O as Ra,J as cn,ap as qa,e as Fa,aq as pn,h as fn,n as mn,o as vn}from"./naive-ui-0ed228f2.js";import{d as Be,aF as _t,o as n,c as T,Y as t,aO as l,l as D,P as C,F as _e,ar as Oe,a as _,Q as be,i as vt,h as ue,p as Le,ag as Gt,as as Cl,W as ja,w as kt,aH as _n,v as dl,r as yn,b as Ml,s as At,e as Ba}from"./vue_runtime-core-4f5fb440.js";import{u as He}from"./vue-i18n-84a05dd5.js";import{r as i,u as e,c as Ve,a as qt}from"./vue_reactivity-852d8377.js";import{t as o,a as Ye,n as qe}from"./vue_shared-7dcc3b7f.js";import{_ as zt}from"./fawmi_vue-google-maps-52673af8.js";import{o as gn,a as bn}from"./vueuse_core-e3c6c607.js";import{s as hn}from"./vue-virtual-scroller-50f85086.js";import{i as Va}from"./is-svg-36c6b3ab.js";import{_ as Ka}from"./index.vue_vue_type_style_index_0_lang-fafb8d12.js";import{M as el}from"./vue-pick-colors-f58bc48b.js";import{v as dt}from"./uuid-cf522c50.js";import{s as Ya}from"./slugify-ce681755.js";import{r as kn,u as fl}from"./xlsx-83e6f69b.js";import{_ as Qt}from"./validator-c0254ba9.js";import{_ as wn}from"./VueTelInputWrapper-f7bfe8d1.js";import{i as xn}from"./libphonenumber-js-cdb4849e.js";import{a as Cn}from"./vue-router-e670704e.js";import"./media-library-a580bf59.js";import"./vue-advanced-cropper-7a0dcf27.js";import"./axios-96fb5abd.js";import"./process-93c0ea83.js";import"./browser-image-compression-a3ab6596.js";import"./moment-ea709ccd.js";import"./parse-domain-489ba3ba.js";import"./is-ip-33949ce5.js";import"./ip-regex-e6f9cbd8.js";import"./super-regex-a8a38319.js";import"./function-timeout-8f7724f6.js";import"./clone-regexp-3bc3d90c.js";import"./is-regexp-5fa9e804.js";import"./unhead_vue-71da354f.js";import"./unhead-a4367481.js";import"./hookable-e7fd869b.js";import"./unhead_dom-b5f3dd9b.js";import"./unhead_shared-56c99682.js";import"./ckeditor_ckeditor5-vue-13667b6e.js";import"./vue-83614a91.js";import"./strip-json-comments-680ed425.js";import"./vue-draggable-next-d31a77b2.js";import"./pinia_colada-25af8b56.js";import"./vue-shepherd-6780f0ef.js";import"./shepherd.js-8a3687f6.js";import"./vue-tel-input-40ca5c5d.js";import"./vue3-map-chart-612bd6db.js";import"./crypto-js-eb39eca1.js";import"./pinia-persistence-plugin-50ba422c.js";/* empty css                    *//* empty css               *//* empty css                                      */import"./date-fns-eed65714.js";import"./seemly-5e1e6f41.js";import"./vueuc-b49649f7.js";import"./evtd-b614532e.js";import"./css-render_vue3-ssr-b91bc731.js";import"./vooks-3c892a1c.js";import"./vdirs-b0483831.js";import"./juggle_resize-observer-41516555.js";import"./css-render-9b607bf6.js";import"./emotion_hash-8a8e73f6.js";import"./lodash-es-a215867d.js";import"./treemate-25c27bff.js";import"./date-fns-tz-6c300683.js";import"./async-validator-dc9a4891.js";import"./css-render_plugin-bem-9dde7ffe.js";import"./googlemaps_markerclusterer-b718980f.js";import"./fast-deep-equal-1db9e660.js";import"./supercluster-6504d485.js";import"./kdbush-ac640998.js";import"./vue-demi-71ba0ef2.js";import"./intlify_shared-f7876323.js";import"./intlify_core-base-c423e336.js";import"./intlify_message-compiler-48af4dac.js";import"./vueuse_shared-d1f69174.js";import"./vue-resize-afb8d7e8.js";import"./vue-observe-visibility-02737083.js";import"./fast-xml-parser-cd8a169d.js";import"./strnum-985cf069.js";import"./ckeditor_ckeditor5-core-c8d003a2.js";import"./ckeditor_ckeditor5-utils-df07b536.js";import"./ckeditor_ckeditor5-engine-af85ebf5.js";import"./ckeditor_ckeditor5-ui-a35c6a55.js";import"./color-parse-d45f23f3.js";import"./color-name-1ab8b5f2.js";import"./color-convert-6fc98488.js";import"./vanilla-colorful-3f59310b.js";import"./ckeditor_ckeditor5-alignment-d6e8c5b6.js";import"./ckeditor_ckeditor5-autoformat-9f2dc9af.js";import"./ckeditor_ckeditor5-typing-70b03be4.js";import"./ckeditor_ckeditor5-basic-styles-a9505c26.js";import"./ckeditor_ckeditor5-block-quote-3d12180a.js";import"./ckeditor_ckeditor5-enter-27538ad0.js";import"./ckeditor_ckeditor5-build-classic-a5a6feb5.js";import"./ckeditor_ckeditor5-code-block-1effa76f.js";import"./ckeditor_ckeditor5-editor-classic-6eebe087.js";import"./ckeditor_ckeditor5-watchdog-33524ea7.js";import"./ckeditor_ckeditor5-essentials-4982141b.js";import"./ckeditor_ckeditor5-clipboard-74f1b43c.js";import"./ckeditor_ckeditor5-widget-4ebd81a8.js";import"./ckeditor_ckeditor5-select-all-edd15b80.js";import"./ckeditor_ckeditor5-undo-7d67f759.js";import"./ckeditor_ckeditor5-find-and-replace-d20c852b.js";import"./ckeditor_ckeditor5-font-603d26b5.js";import"./ckeditor_ckeditor5-heading-08abeb34.js";import"./ckeditor_ckeditor5-paragraph-7ec90230.js";import"./ckeditor_ckeditor5-horizontal-line-f0252081.js";import"./ckeditor_ckeditor5-image-fe0f4d65.js";import"./ckeditor_ckeditor5-upload-37383558.js";import"./ckeditor_ckeditor5-indent-d36b38bc.js";import"./ckeditor_ckeditor5-link-8d87809e.js";import"./ckeditor_ckeditor5-list-295bac13.js";import"./ckeditor_ckeditor5-media-embed-952338e9.js";import"./ckeditor_ckeditor5-remove-format-b8823d58.js";import"./ckeditor_ckeditor5-source-editing-ff327da5.js";import"./ckeditor_ckeditor5-special-characters-36dd01c3.js";import"./ckeditor_ckeditor5-table-79bdb612.js";import"./popperjs_core-f3391c26.js";var Dt=(pe=>(pe.IMAGE="image",pe.VIDEO="video",pe))(Dt||{});const _l=ll("ad",{state:()=>({adIdentifiers:[]}),getters:{},actions:{async loadAdIdentifiers(){const{request:pe}=Ze(),a=await pe({url:"/ad-identifiers"});a.success&&a.result.data&&(this.adIdentifiers=a.result.data)}}}),In={class:"flex items-center justify-between"},$n={class:"flex flex-col"},Vn={class:"text-sm font-bold"},Un={class:"text-xs font-normal"},Tn={key:0,class:"text-xs font-bold"},zn=Be({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(pe){const{t:a}=He(),{request:d}=Ze(),{pickByTheme:f,displayFormErrors:X,formatKey:te}=Je(),b=_t(pe,"show"),{adIdentifiers:q}=je(_l()),{loadAdIdentifiers:U}=_l(),{isLightTheme:re}=je(yt()),P=i(!1),G=async()=>{P.value=!0,await U(),P.value=!1};G();const N=ct(),z=nt(),v=st(),O=i(!1),S=i(!1),R=i(null),W=i(null),c=i({id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),ne={id:[{required:!0,message:a("fillRequired")}]},F=J=>{R.value=we.cloneDeep(J),c.value=we.cloneDeep(J||{id:"",reusable:!1,contentType:Dt.IMAGE,contentSize:"",params:[]}),S.value=!0},L=async()=>{var J;return(J=W.value)==null||J.validate(async E=>{var I,h,j,H,ae,r;if(!E){v.start(),O.value=!0;const M={id:c.value.id,reusable:c.value.reusable,contentType:c.value.contentType,contentSize:c.value.contentSize,params:c.value.params},Y=await d({method:R.value?"put":"post",url:R.value?`/ad-identifiers/${R.value.id}`:"/ad-identifiers",data:M});if(Y.failure&&Y.error)switch((j=(h=(I=Y.error)==null?void 0:I.response)==null?void 0:h.data)==null?void 0:j.errorCode){case Qe.FORM_INVALID_DATA:X((r=(ae=(H=Y.error)==null?void 0:H.response)==null?void 0:ae.data)==null?void 0:r.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),G(),S.value=!1;O.value=!1,v.finish()}}),!1},le=async J=>{N.warning({title:a("confirm"),content:a("confirmDeleteAdIdentifier"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/ad-identifiers/${J.id}`})).success?(z.success(a("success")),G()):z.error(a("anErrorOccurred"))}})};return(J,E)=>{const I=ye,h=Te,j=it,H=Nt,ae=Tt,r=fe,M=lt,Y=$t,m=wt,$=Yt,Z=rt,u=Xe,p=Ft,V=ht,w=bl,x=hl,g=sn,k=pt,ve=ft;return n(),T(_e,null,[t(Z,{show:b.value,"onUpdate:show":E[2]||(E[2]=oe=>b.value=oe),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("adIdentifiers")},{"header-extra":l(()=>[t(j,{align:"center"},{default:l(()=>[t(h,{size:"small",type:"primary",disabled:e(P),onClick:E[0]||(E[0]=oe=>F(null))},{default:l(()=>[t(I,{icon:"carbon:add-alt",class:"mr-1"}),D(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(h,{size:"small",type:"error",disabled:e(P),onClick:E[1]||(E[1]=oe=>b.value=!1)},{default:l(()=>[t(I,{icon:"carbon:close",class:"mr-1"}),D(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t($,{show:e(P)},{default:l(()=>[e(q).length?(n(),C(Y,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(q),oe=>(n(),C(M,{key:oe.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",In,[_("div",$n,[_("span",Vn,o(oe.id),1),_("div",null,[_("span",Un,o(oe.contentType===e(Dt).IMAGE?e(a)("image"):e(a)("video")),1),oe.contentSize?(n(),T("span",Tn," Â ("+o(oe.contentSize)+") ",1)):be("",!0)])]),t(j,null,{default:l(()=>[t(H,{size:"medium",bordered:!1,type:oe.reusable?"info":"warning"},{default:l(()=>[D(o(oe.reusable?e(a)("reusable"):e(a)("notReusable")),1)]),_:2},1032,["type"]),t(ae,{vertical:"",class:Ye(["!mx-0",e(f)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(h,{size:"small",type:"warning",secondary:e(re),onClick:ee=>F(oe)},{default:l(()=>[t(r,null,{default:l(()=>[t(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"error",secondary:e(re),onClick:ee=>le(oe)},{default:l(()=>[t(r,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(M,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(m,{description:e(a)("noIdentifierAdded")},{icon:l(()=>[t(r,{size:"60"},{default:l(()=>[t(I,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(S),"onUpdate:show":E[8]||(E[8]=oe=>Ve(S)?S.value=oe:null),loading:e(O),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(R)?e(a)("editAdIdentifier"):e(a)("addAdIdentifier"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:E[9]||(E[9]=oe=>S.value=!1)},{default:l(()=>[t(ve,{ref_key:"formRef",ref:W,model:e(c),rules:ne,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(p,{span:16,label:e(a)("identifier"),path:"id"},{default:l(()=>[t(u,{value:e(c).id,placeholder:e(a)("identifier"),class:"w-full","onUpdate:value":E[3]||(E[3]=oe=>e(c).id=e(te)(oe))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(p,{span:8,label:e(a)("contentSize"),path:"contentSize"},{default:l(()=>[t(u,{value:e(c).contentSize,"onUpdate:value":E[4]||(E[4]=oe=>e(c).contentSize=oe),placeholder:e(a)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(V,{span:24,"x-gap":"12"},{default:l(()=>[t(p,{span:12,label:e(a)("status"),path:"reusable"},{default:l(()=>[t(x,{value:e(c).reusable,"onUpdate:value":E[5]||(E[5]=oe=>e(c).reusable=oe),name:"reusable",class:"w-full"},{default:l(()=>[t(w,{value:!1,label:e(a)("notReusable"),class:"w-[50%]"},null,8,["label"]),t(w,{value:!0,label:e(a)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(p,{span:12,label:e(a)("contentType"),path:"contentType"},{default:l(()=>[t(x,{value:e(c).contentType,"onUpdate:value":E[6]||(E[6]=oe=>e(c).contentType=oe),name:"contentType",class:"w-full"},{default:l(()=>[t(w,{value:e(Dt).IMAGE,label:e(a)("image"),class:"w-[50%]"},null,8,["value","label"]),t(w,{value:e(Dt).VIDEO,label:e(a)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(k,{label:e(a)("settings"),path:"params"},{default:l(()=>[t(g,{value:e(c).params,"onUpdate:value":E[7]||(E[7]=oe=>e(c).params=oe),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Mn={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Sn={id:"video",autoplay:"",controls:"",style:{width:"100%"}},An=["src"],En=Be({__name:"index",setup(pe){const a=st(),d=nt(),f=ct(),X=vt("appConfig"),{adIdentifiers:te}=je(_l()),{loadAdIdentifiers:b}=_l(),{displayFormErrors:q,tr:U,fileUrl:re,pickByTheme:P,appSecondaryColor:G,isInDevMode:N}=Je(),{request:z}=Ze(),{t:v,locale:O}=He(),S=i(!1),R=i([]),W=i(""),c=i(),ne={pageSize:12,prefix:({itemCount:g})=>ue("div",{class:"font-bold"},{default:()=>`${v("total")}: ${g}`})},F=[{title:v("preview"),key:"image",width:200,fixed:"left",render(g){var k;return((k=g.adIdentifier)==null?void 0:k.contentType)==Dt.IMAGE?ue(tl,{src:g.contentUrl??"",objectFit:"cover",width:200,height:100}):ue("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[ue(fe,{size:50,color:G.value},{default:()=>ue(ye,{icon:"carbon:document-video"})})])}},{title:v("identifier"),key:"pid",width:150,fixed:"left",render(g){return ue("small",{},{default:()=>g.pid})}},{title:v("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(g){return ue("div",{},{default:()=>U(g.title)})}},{title:v("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(g){return ue("small",{},{default:()=>U(g.description)})}},{title:v("status"),key:"isActive",width:100,render(g){return ue(Nt,{type:g.display?"success":"warning",bordered:!1},{default:()=>g.display?v("visible"):v("hidden")})},sortOrder:!1,sorter:"default"},{title:v("updateAt"),key:"updatedAt",width:125,render(g){return ue("div",{},{default:()=>Lt(g.updatedAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:v("createdAt"),key:"createdAt",width:125,render(g){return ue("div",{},{default:()=>Lt(g.createdAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Xe,{ref:c,placeholder:v("search"),value:W.value,onInput:g=>{W.value=g}},{suffix:()=>ue(fe,{},{default:()=>ue(ye,{icon:"carbon:search"})})}),key:"actions",width:150,render(g){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Te,{size:"small",type:"warning",onClick:()=>{m(g)},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:v("confirm"),content:v("confirmDeleteAd"),positiveText:v("yes"),negativeText:v("no"),onPositiveClick:async()=>{(await z({method:"delete",url:`/ads/${g.id}`})).success?(d.success(v("success")),le()):d.error(v("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:trash-can"})})})])},fixed:"right"}],L=Le(()=>{if(!W.value)return R.value;const g=R.value.filter(k=>{var ve;return k.pid.toLowerCase().includes(W.value.toLowerCase())||k.title.toLowerCase().includes(W.value.toLowerCase())||((ve=k.description)==null?void 0:ve.toLowerCase().includes(W.value.toLowerCase()))});return c.value&&c.value.focus(),g}),le=async()=>{S.value=!0;const g=await z({url:"/ads"});g.success&&g.result&&(R.value=g.result.data),await b(),S.value=!1};le();const J=i(!1),E=i(!1),I=i(!1),h=i(Dt.IMAGE),j=i(),H=i(null),ae=i(null),r=i({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),M={pid:[{required:!0,message:v("fillRequired")}],title:[{required:!0,message:v("fillRequired")}],content:[{required:!0,message:v("fillRequired")}]},Y=Le({get:()=>!r.value.broadcastStart||!r.value.broadcastEnd?null:[r.value.broadcastStart||"",r.value.broadcastEnd||""],set:g=>{g?(r.value.broadcastStart=g[0],r.value.broadcastEnd=g[1]):(r.value.broadcastStart=null,r.value.broadcastEnd=null)}}),m=g=>{var k;H.value=we.cloneDeep(g),g?(r.value=we.cloneDeep(g),g.data||(r.value.data={})):r.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},j.value=(k=te.value.find(ve=>ve.id==r.value.pid))==null?void 0:k.params,E.value=!0},$=g=>ue("span",{},{default:()=>g.id+(g.contentSize?` (${g.contentSize})`:"")}),Z=async()=>{var g;return(g=ae.value)==null||g.validate(async k=>{var ve,oe,ee,y,B,Ie;if(!k)if(H.value)if(H.value.title!==r.value.title&&R.value.findIndex(Q=>Q.title==r.value.title)>-1)d.error(v("sameAdTitleMessage"));else{a.start(),J.value=!0;const Q={pid:r.value.pid,title:r.value.title,display:r.value.display,content:r.value.content,description:r.value.description,data:r.value.data,broadcastStart:r.value.broadcastStart,broadcastEnd:r.value.broadcastEnd},Ce=await z({method:"put",url:`/ads/${H.value.id}`,data:Q});Ce.success&&Ce.result.data&&(d.success(v("success")),le()),J.value=!1,a.finish(),E.value=!1}else if(R.value.findIndex(Q=>Q.title==r.value.title)>-1)d.error(v("sameAdTitleMessage"));else{a.start(),J.value=!0;const Q={pid:r.value.pid,title:r.value.title,display:r.value.display,content:r.value.content,description:r.value.description,data:r.value.data,broadcastStart:r.value.broadcastStart,broadcastEnd:r.value.broadcastEnd},Ce=await z({method:"post",url:"/ads",data:Q});if(Ce.failure&&Ce.error)switch((ee=(oe=(ve=Ce.error)==null?void 0:ve.response)==null?void 0:oe.data)==null?void 0:ee.errorCode){case Qe.FORM_INVALID_DATA:q((Ie=(B=(y=Ce.error)==null?void 0:y.response)==null?void 0:B.data)==null?void 0:Ie.data);break;default:d.error(v("anErrorOccurred"))}else d.success(v("success")),le();J.value=!1,a.finish(),E.value=!1}}),!1},u=i(!1),p=i(!1),V=i(!1),w=i(""),x=i("");return(g,k)=>{var se,$e;const ve=it,oe=It,ee=kl,y=gl,B=bt,Ie=pt,Q=Ea,Ce=Vt,ge=Ft,de=bl,Re=hl,xe=ht,ie=Ot,ke=wl,A=ft,Ue=rt,K=Kt;return n(),T(_e,null,[t(oe,{to:"#alt-action"},{default:l(()=>[t(ve,null,{default:l(()=>[e(N)?(n(),C(e(Te),{key:0,type:"warning",onClick:k[0]||(k[0]=ce=>I.value=!0)},{default:l(()=>[t(e(fe),{size:"26"},{default:l(()=>[t(e(ye),{icon:"carbon:id"})]),_:1}),D(" "+o(e(v)("identifiers")),1)]),_:1})):be("",!0),t(e(Te),{type:"primary",onClick:k[1]||(k[1]=ce=>m(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(v)("addAd")),1)]),_:1})]),_:1})]),_:1}),t(y,null,{default:l(()=>[t(ee,{columns:F,data:e(L),pagination:ne,loading:e(S),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(Ue,{show:e(E),"onUpdate:show":k[12]||(k[12]=ce=>Ve(E)?E.value=ce:null),loading:e(J),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e(v)("editAd"):e(v)("addAd"),"positive-text":e(v)("validate"),"negative-text":e(v)("cancel"),onPositiveClick:Z,onNegativeClick:k[13]||(k[13]=ce=>E.value=!1)},{default:l(()=>[t(A,{ref_key:"formRef",ref:ae,class:"mt-5",model:e(r),rules:M,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(xe,{cols:"24","x-gap":12},{default:l(()=>[t(ie,{span:"12"},{default:l(()=>[t(Ie,{label:e(v)("title"),path:"title"},{default:l(()=>[t(B,{modelValue:e(r).title,"onUpdate:modelValue":k[2]||(k[2]=ce=>e(r).title=ce),placeholder:e(v)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Ie,{label:e(v)("description"),path:"description"},{default:l(()=>[t(B,{modelValue:e(r).description,"onUpdate:modelValue":k[3]||(k[3]=ce=>e(r).description=ce),placeholder:e(v)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Ie,{label:e(v)("broadcastPeriod"),path:"broadcastPeriod"},{default:l(()=>[t(Q,{"formatted-value":e(Y),"onUpdate:formattedValue":k[4]||(k[4]=ce=>Ve(Y)?Y.value=ce:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),t(xe,{"x-gap":"12",span:24},{default:l(()=>[t(ge,{span:12,label:e(v)("identifier"),path:"pid"},{default:l(()=>[t(Ce,{value:e(r).pid,"onUpdate:value":[k[5]||(k[5]=ce=>e(r).pid=ce),k[6]||(k[6]=()=>{var ce;j.value=(ce=e(te).find(Ee=>Ee.id==e(r).pid))==null?void 0:ce.params})],"render-label":$,options:e(te).map(ce=>({...ce,disabled:!ce.reusable&&(ce.adsCount||0)>0})),placeholder:e(v)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(ge,{span:12,label:e(v)("status"),path:"display"},{default:l(()=>[t(Re,{value:e(r).display,"onUpdate:value":k[7]||(k[7]=ce=>e(r).display=ce),name:"display",class:"w-full"},{default:l(()=>[t(de,{value:!1,label:e(v)("hidden"),class:"w-[50%]"},null,8,["label"]),t(de,{value:!0,label:e(v)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(ie,{span:"12"},{default:l(()=>[t(Ie,{label:e(v)("content"),path:"content"},{default:l(()=>[e(h)==e(Dt).VIDEO?(n(),C(ke,{key:0},{default:l(()=>[t(e(Te),{type:"primary",onClick:k[8]||(k[8]=()=>{p.value=!0})},{default:l(()=>[D(o(e(v)("select")),1)]),_:1}),t(e(Xe),{value:e(r).content?e(Xt)(e(r).content):"",placeholder:e(v)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(r).content?(n(),T(_e,{key:0},[t(e(Te),{type:"primary",ghost:"",onClick:k[9]||(k[9]=()=>{w.value=e(v)("video"),x.value=e(re)(e(r).content),V.value=!0})},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:play-filled"})]),_:1})]),default:l(()=>[D(" "+o(e(v)("play")),1)]),_:1}),t(e(Te),{type:"primary",ghost:"",onClick:k[10]||(k[10]=()=>{e(r).content=""})},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(v)("clear")),1)]),_:1})],64)):be("",!0)]),_:1})):(n(),T("div",Mn,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:k[11]||(k[11]=()=>{u.value=!0})},[e(r).content?(n(),C(e(tl),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:qe("border: 1px dashed "+e(P)("green","white")),src:e(re)(e(r).content||"")},null,8,["style","src"])):(n(),T("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(P)("green","white"))},[t(e(fe),{size:64},{default:l(()=>[t(e(ye),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),e(j)&&Array.isArray(e(j))?(n(),C(Ie,{key:0,label:e(v)("data"),path:"data"},{default:l(()=>[t(xe,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:l(()=>[(n(!0),T(_e,null,Oe(e(j),(ce,Ee)=>(n(),T(_e,{key:Ee},[t(ie,{span:10},{default:l(()=>[t(e(Xe),{value:ce,placeholder:ce,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(ie,{span:14},{default:l(()=>[t(e(Xe),{value:e(r).data[ce],"onUpdate:value":ze=>e(r).data[ce]=ze,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):be("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ue,{show:e(V),"onUpdate:show":k[14]||(k[14]=ce=>Ve(V)?V.value=ce:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(w)},{default:l(()=>[_("video",Sn,[_("source",{src:e(x)},null,8,An)])]),_:1},8,["show","title"]),t(K,{show:e(u),"onUpdate:show":k[15]||(k[15]=ce=>Ve(u)?u.value=ce:null),title:e(v)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((se=e(X))==null?void 0:se.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[16]||(k[16]=ce=>{e(r).content=ce,u.value=!1})},null,8,["show","title","upload-config"]),t(K,{show:e(p),"onUpdate:show":k[17]||(k[17]=ce=>Ve(p)?p.value=ce:null),title:e(v)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:(($e=e(X))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:k[18]||(k[18]=ce=>{e(r).content=ce,p.value=!1})},null,8,["show","title","upload-config"]),t(zn,{show:e(I),"onUpdate:show":k[19]||(k[19]=ce=>Ve(I)?I.value=ce:null)},null,8,["show"])],64)}}});const Dn=zt(En,[["__scopeId","data-v-7778d793"]]),Ln={class:"w-full"},Pn={class:"mb-2"},Nn={class:"text-base text-left"},On=["src","onClick"],Rn=["src"],qn=Be({name:"AlbumsPicker"}),Fn=Be({...qn,props:Gt({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(pe){const a=_t(pe,"modelValue"),d=pe,{t:f}=He(),{fileUrl:X}=Je(),te=i(!1),b=i(!1),q=i(0),U=i(""),re=vt("appConfig"),P=()=>{a.value&&Array.isArray(a.value)?a.value.push({name:"",medias:[]}):a.value=[{name:"",medias:[]}]},G=v=>{a.value&&Array.isArray(a.value)?a.value.splice(v,1):a.value=[]},N=(v,O)=>{a.value&&Array.isArray(a.value[O].medias)?a.value[O].medias.splice(v,1):a.value&&(a.value[O].medias=[])},z=v=>{var S,R;const O=((R=(S=v.split("."))==null?void 0:S.pop())==null?void 0:R.toLowerCase())||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(O)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(O)?"video":"unknown"};return(v,O)=>{var h;const S=ye,R=fe,W=Te,c=bt,ne=tl,F=Cl("Draggable"),L=Da,le=$t,J=lt,E=Kt,I=rt;return n(),T("section",Ln,[_("section",Pn,[t(J,{size:"small",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",Nn,o(d.title),1)]),"header-extra":l(()=>[d.readonly?be("",!0):(n(),C(W,{key:0,quaternary:"",onClick:P},{icon:l(()=>[t(R,{size:"18"},{default:l(()=>[t(S,{icon:"carbon:folder-add"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("addAlbum")),1)]),_:1}))]),default:l(()=>[(n(!0),T(_e,null,Oe(a.value,(j,H)=>(n(),C(J,{key:H,size:"small",embedded:"",hoverable:"",segmented:j.medias&&j.medias.length>0,class:"mb-4"},ja({header:l(()=>[t(c,{modelValue:j.name,"onUpdate:modelValue":ae=>j.name=ae,placeholder:e(f)("albumName"),"selector-span":5,disabled:d.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:l(()=>[t(le,{style:{"max-height":"100%"}},{default:l(()=>[j.medias&&j.medias.length>0?(n(),C(L,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(F,{list:j.medias,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),T(_e,null,Oe(j.medias,(ae,r)=>(n(),T("div",{key:"img-"+r,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[z(ae)==="image"?(n(),C(ne,{key:0,"object-fit":"cover",src:e(X)(ae)},null,8,["src"])):(n(),T("video",{key:1,muted:"",src:e(X)(ae),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{U.value=e(X)(ae),b.value=!0}},null,8,On)),d.readonly?be("",!0):(n(),C(W,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:M=>N(r,H)},{icon:l(()=>[t(R,null,{default:l(()=>[t(S,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):be("",!0)]),_:2},1024)]),_:2},[d.readonly?void 0:{name:"header-extra",fn:l(()=>[t(W,{quaternary:"",class:"mr-2",onClick:()=>{q.value=H,te.value=!0}},{icon:l(()=>[t(R,null,{default:l(()=>[t(S,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("add")),1)]),_:2},1032,["onClick"]),O[3]||(O[3]=_("div",{class:"w-2"},null,-1)),t(W,{quaternary:"",type:"error",onClick:ae=>G(H)},{icon:l(()=>[t(R,null,{default:l(()=>[t(S,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("delete")),1)]),_:2},1032,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),t(E,{show:e(te),"onUpdate:show":O[0]||(O[0]=j=>Ve(te)?te.value=j:null),title:e(f)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:((h=e(re))==null?void 0:h.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:O[1]||(O[1]=j=>{a.value&&Array.isArray(a.value[e(q)].medias)?a.value[e(q)].medias.push(j):a.value&&(a.value[e(q)].medias=[j]),te.value=!1})},null,8,["show","title","upload-config"]),t(I,{show:e(b),"onUpdate:show":O[2]||(O[2]=j=>Ve(b)?b.value=j:null),preset:"card",style:{width:"500px"},title:e(f)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:l(()=>[e(U)?(n(),T("video",{key:0,controls:"",autoplay:"",class:"w-full",src:e(U)},null,8,Rn)):be("",!0)]),_:1},8,["show","title"])])}}});const jn=zt(Fn,[["__scopeId","data-v-338a28a2"]]);function Ha(){const{request:pe}=Ze(),a=i([]),d=q=>{const U=q.split("_"),re={a:"antd",b:"carbon",fa:"fa",f:"fluent",i4:"ionicons4",i5:"ionicons5",m:"material",t:"tabler"},P={F:"Filled",O:"Outlined",R:"Round",S:"Sharp",T:"Twotone",E:"Regular"};return[(N=>N.replace(/([A-Z])(?=\.\w+$)/,(z,v)=>P[v]||v))(U[0]),U.length>1?re[U[1]]:""]},f=()=>new Promise(q=>setTimeout(q)),X=async q=>{a.value=[];let U=1;for(const[re,P]of Object.entries(q)){U&&U%5e3===0&&await f();const[G,N]=d(re);a.value.push({id:U,name:G,svgCode:P,library:N}),U+=1}return a.value},te=i(!1);return{searchIcons:async q=>{let U={};te.value=!0;const re=await pe({url:"/search-icons",method:"post",data:{query:q,decode:!1}});if(re.success&&re.result){try{U=JSON.parse(re.result.data)}catch(P){U={},console.error(P)}U=await X(U)}return te.value=!1,U},isSearching:te,currentIconsList:a}}const Bn=["innerHTML"],Kn=Be({__name:"ItemIcon",props:{data:{},color:{default:void 0},size:{default:24}},setup(pe){Ul(te=>({"95b6e21e":e(f),"22e3431a":e(d)}));const a=pe,d=Le(()=>a.color),f=Le(()=>typeof a.size=="number"?a.size+"px":a.size||"unset"),X=i();return kt(()=>a.data,async te=>{var b,q;if(!Va(te||"")){const{currentIconsList:U}=Ha();X.value=((q=(b=U.value)==null?void 0:b.find(re=>re.name==te))==null?void 0:q.svgCode)||""}},{immediate:!0}),(te,b)=>(n(),T("i",{innerHTML:e(Va)(a.data||"")?a.data:e(X)},null,8,Bn))}});const $l=zt(Kn,[["__scopeId","data-v-09747f05"]]),Yn={key:0,class:"multiple"},Hn={key:0,class:"item"},Gn={key:2,class:"flex items-center ml-2"},Wn={key:1,class:"placeholder"},Jn={class:"v3ip__search"},Xn=["placeholder"],Zn={key:0,class:"v3ip__loader"},Qn=["onClick"],es={key:1,class:"v3ip__empty"},ts={key:1,class:"default-text"},ls={key:1,class:"default-text"},as=Be({__name:"index",props:{searchPlaceholder:{default:"Search"},iconsListPlaceholder:{default:"Search for icons"},placeholder:{default:void 0},modelValue:{},multiple:{type:Boolean,default:!1},iconLibrary:{default:"fa"},selectedIconBgColor:{default:"#d3d3d3"},selectedIconColor:{default:"#000000"},multipleLimit:{default:1/0},disabled:{type:Boolean,default:!1},selectedItemsToDisplay:{default:9},clearable:{type:Boolean,default:!1},valueType:{default:"svg"},includeIcons:{default:()=>[]},excludeIcons:{default:()=>[]},includeSearch:{default:void 0},excludeSearch:{default:void 0},emptyText:{default:"Nothing to show"},selectorHeight:{default:36}},emits:["change","update:modelValue"],setup(pe,{emit:a}){Ul(F=>({86121764:e(f),24235862:e(te)}));const d=pe,f=Le(()=>typeof d.selectorHeight=="number"?`${d.selectorHeight}px`:d.selectorHeight),X=a,te=i(d.selectedIconBgColor),b=i(""),q=i(!1),{currentIconsList:U,searchIcons:re,isSearching:P}=Ha();kt(()=>b.value,F=>{re(F)},{immediate:!0});const G=Le(()=>we.uniqBy(we.uniqBy(U.value.filter(F=>{var h,j;const L=typeof d.iconLibrary=="string"&&F.library==d.iconLibrary||Array.isArray(d.iconLibrary)&&d.iconLibrary.includes(F.library)||d.iconLibrary=="all",le=!d.includeIcons||!d.includeIcons.length||d.includeIcons.includes(F.name),J=!d.includeSearch||((h=F.name)==null?void 0:h.toLocaleLowerCase().includes(d.includeSearch)),E=!d.excludeIcons||!d.excludeIcons.length||!d.excludeIcons.includes(F.name),I=!d.excludeSearch||!((j=F.name)!=null&&j.toLocaleLowerCase().includes(d.excludeSearch));return L&&le&&J&&E&&I}),"svgCode"),"name")),N=F=>d.valueType=="name"?F.name:F.svgCode,z=F=>{var L,le;return d.valueType=="name"?((le=(L=U.value)==null?void 0:L.find(J=>J.name==F))==null?void 0:le.svgCode)||"":F},v=F=>d.multiple?d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length?d.modelValue.findIndex(L=>L==N(F))>-1:!1:d.modelValue==N(F),O=F=>{if(F)if(d.multiple)if(d.modelValue&&Array.isArray(d.modelValue)&&d.modelValue.length){const L=d.modelValue,le=d.modelValue.findIndex(J=>J==N(F));le>-1?L.splice(le,1):d.modelValue.length<d.multipleLimit&&typeof N(F)<"u"&&L.push(N(F)),X("update:modelValue",L),X("change",L,F)}else d.multipleLimit>0&&(X("update:modelValue",[N(F)]),X("change",[N(F)],F));else N(F)==d.modelValue?d.clearable&&X("update:modelValue",null):X("update:modelValue",N(F)),X("change",F)},S=i();gn(S,()=>q.value=!1);const R=i(),{width:W}=bn(R),c=_n(),ne=F=>!!c[F];return(F,L)=>{var h,j,H,ae;const le=ye,J=fe,E=Te,I=Yt;return n(),T("div",{ref_key:"picker",ref:S,class:"v3ip__custom-select",onBlur:L[4]||(L[4]=r=>q.value=!1)},[_("div",{class:Ye(["v3ip__selected",{open:e(q),disabled:d.disabled}]),onClick:L[2]||(L[2]=r=>q.value=d.disabled?!1:!e(q))},[!d.multiple&&d.modelValue||d.multiple&&Array.isArray(d.modelValue)&&((h=d.modelValue)!=null&&h.length)?(n(),T(_e,{key:0},[d.multiple?(n(),T("div",Yn,[Array.isArray(d.modelValue)?(n(),T(_e,{key:0},[(n(!0),T(_e,null,Oe(d.modelValue||[],(r,M)=>(n(),T(_e,{key:M},[M<d.selectedItemsToDisplay?(n(),C($l,{key:0,class:"item",data:typeof z(r)=="string"?z(r):null,size:20,onClick:ot(Y=>{var m;return O((m=e(U))==null?void 0:m.find($=>N($)==r))},["stop"])},null,8,["data","onClick"])):be("",!0)],64))),128)),((j=d.modelValue)==null?void 0:j.length)>d.selectedItemsToDisplay?(n(),T("div",Hn,[_("b",null," +"+o(((H=d.modelValue)==null?void 0:H.length)-d.selectedItemsToDisplay),1)])):be("",!0)],64)):be("",!0)])):(n(),C($l,{key:1,data:typeof z(d.modelValue)=="string"?z(d.modelValue):null,size:20,onClick:L[0]||(L[0]=ot(r=>{var M;return O((M=e(U))==null?void 0:M.find(Y=>N(Y)==d.modelValue))},["stop"]))},null,8,["data"])),(ae=d.modelValue)!=null&&ae.length&&d.clearable?(n(),T("div",Gn,[t(E,{type:"error",size:"tiny",secondary:"",onClick:L[1]||(L[1]=ot(()=>{X("update:modelValue",d.multiple?[]:null)},["stop"]))},{default:l(()=>[t(J,null,{default:l(()=>[t(le,{icon:"mdi:close"})]),_:1})]),_:1})])):be("",!0)],64)):(n(),T("span",Wn,o(d.placeholder),1))],2),t(Qa,{name:"fade"},{default:l(()=>[dl(_("div",null,[_("div",Jn,[dl(_("input",{"onUpdate:modelValue":L[3]||(L[3]=r=>Ve(b)?b.value=r:null),type:"text",name:"search",placeholder:d.searchPlaceholder},null,8,Xn),[[Za,e(b)]])]),e(P)?(n(),T("div",Zn,[t(I,{size:"small"})])):(n(),T(_e,{key:1},[e(G)&&e(G).length?(n(),C(e(hn),{key:0,ref_key:"scroller",ref:R,class:"v3ip__items",items:e(G),"item-size":40,"grid-items":4,"item-secondary-size":e(W)/4},{default:l(({item:r})=>[_("div",{class:Ye({active:v(r)}),onClick:M=>O(r)},[t($l,{data:typeof r.svgCode=="string"?r.svgCode:null,size:24,color:v(r)?d.selectedIconColor:void 0},null,8,["data","color"])],10,Qn)]),_:1},8,["items","item-secondary-size"])):(n(),T("div",es,[e(b)?(n(),T(_e,{key:0},[ne("empty")?yn(F.$slots,"empty",{key:0},void 0,!0):(n(),T("div",ts,[_("small",null,o(d.emptyText),1)]))],64)):(n(),T("div",ls,[_("small",null,o(d.iconsListPlaceholder),1)]))]))],64))],512),[[ml,e(q)]])]),_:3})],544)}}});const Ga=zt(as,[["__scopeId","data-v-20cc11c7"]]),ns={class:"w-full"},ss={class:"mb-2"},os={class:"text-base text-left"},is=Be({name:"GridImagesPicker"}),rs=Be({...is,props:Gt({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(pe){const a=_t(pe,"modelValue"),d=vt("appConfig"),f=pe,{t:X}=He(),{fileUrl:te}=Je(),b=i(!1),q=re=>{Array.isArray(a.value)?a.value.splice(re,1):a.value=[]},U=async re=>{Array.isArray(a.value)?a.value.push(...re):a.value=[...re],b.value=!1};return(re,P)=>{var ne;const G=ye,N=fe,z=Te,v=tl,O=Cl("Draggable"),S=Da,R=$t,W=lt,c=Kt;return n(),T("section",ns,[_("section",ss,[t(W,{size:"small",embedded:"",hoverable:"",segmented:a.value&&a.value.length>0},{header:l(()=>[_("div",os,o(f.title),1)]),"header-extra":l(()=>[f.readonly?be("",!0):(n(),C(z,{key:0,quaternary:"",onClick:P[0]||(P[0]=F=>b.value=!0)},{icon:l(()=>[t(N,{size:"18"},{default:l(()=>[t(G,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("add")),1)]),_:1}))]),default:l(()=>[t(R,{style:{"max-height":"100%"}},{default:l(()=>[a.value&&a.value.length?(n(),C(S,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:l(()=>[t(O,{list:a.value,class:"w-full grid grid-cols-3 gap-4"},{default:l(()=>[(n(!0),T(_e,null,Oe(a.value,(F,L)=>(n(),T("div",{key:"img-"+L,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[t(v,{width:"100","object-fit":"cover",src:e(te)(F)},null,8,["src"]),f.readonly?be("",!0):(n(),C(z,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:le=>q(L)},{icon:l(()=>[t(N,null,{default:l(()=>[t(G,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):be("",!0)]),_:1})]),_:1},8,["segmented"])]),t(c,{show:e(b),"onUpdate:show":P[1]||(P[1]=F=>Ve(b)?b.value=F:null),title:e(X)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ne=e(d))==null?void 0:ne.apiUrl)+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:U},null,8,["show","title","upload-config"])])}}});const us=zt(rs,[["__scopeId","data-v-12efa615"]]);var ut=(pe=>(pe.EXTERNAL_LINK="external-link",pe.PAGE_LINK="page-link",pe.CONTENT_LINK="content-link",pe))(ut||{}),at=(pe=>(pe.NEWS_TAG="news-tag",pe.NEWS_CATEGORY="news-category",pe.NEWS_ARTICLE="news-article",pe.CONTENT_MODEL="content-model",pe))(at||{});const cl=()=>{const{t:pe}=He(),{tr:a}=Je(),d=(b,q)=>{if(q&&q.titleFieldName)return $a(b.contentModelData.index[q.titleFieldName])?a(b.contentModelData.index[q.titleFieldName]):b.contentModelData.index[q.titleFieldName];if(b.contentModelData&&b.contentModelData.index){const U=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const re of U)if(b.contentModelData.index[re])return $a(b.contentModelData.index[re])?a(b.contentModelData.index[re]):b.contentModelData.index[re]}return a(b.title)},f=[{label:pe("contentModel"),value:at.CONTENT_MODEL,tagType:"warning"},{label:pe("newsArticle"),value:at.NEWS_ARTICLE,tagType:"info"},{label:pe("newsCategory"),value:at.NEWS_CATEGORY,tagType:"success"},{label:pe("newsTag"),value:at.NEWS_TAG,tagType:"error"}];return{contentTypes:f,getContentTypeLabel:b=>{var q;return(q=f.find(U=>U.value===b))==null?void 0:q.label},getContentTypeTagType:b=>{var q;return((q=f.find(U=>U.value===b))==null?void 0:q.tagType)||"default"},extractItemTitle:d}},ds={key:4,class:"w-full"},cs={key:5,class:"w-full"},ps={key:20,class:"w-full flex flex-gap-8 items-center justify-start"},fs=["onClick"],ms={key:0,class:"w-full"},vs={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},_s=["src"],ys={id:"video",autoplay:"",controls:"",style:{width:"100%"}},gs=["src"],bs=Be({name:"FormGenerator"}),hs=Be({...bs,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(pe,{emit:a}){const d=pe,f=a,{t:X}=He(),{tr:te,pickByTheme:b,fileUrl:q,mergeArrays:U}=Je(),{extractItemTitle:re}=cl(),{request:P}=Ze(),{loadContentModels:G}=We(),{contentModels:N}=je(We());G();const z=vt("appConfig");let v=[];if(typeof d.items=="string")try{v=JSON.parse(d.items)}catch{v=[]}else v=we.cloneDeep(d.items);let O={};if(d.useJson)try{O=JSON.parse(d.modelValue)}catch{O={}}const S=i(""),R=i(dt()),W=i(null),c=i(d.useJson?O:d.modelValue),ne={};v.forEach(K=>{K.key in c.value||(K.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox"].includes(K.type)?c.value[K.key]=JSON.parse(K.defaultValue):K.type=="number"?c.value[K.key]=parseFloat(K.defaultValue):K.type=="content-model-item"?c.value[K.key]=void 0:K.type=="content-model-items"?c.value[K.key]=[]:K.type=="list"?c.value[K.key]=K.defaultValue.split(",").map(se=>({value:se})):K.type=="i18n-list"?c.value[K.key]=K.defaultValue.split(",").map(se=>({value:`{ "fr": "${se}", "en": "${se}" }`})):c.value[K.key]=K.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color"].includes(K.type)?c.value[K.key]="":["number"].includes(K.type)?c.value[K.key]=0:["checkbox"].includes(K.type)?c.value[K.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(K.type)?c.value[K.key]=[]:c.value[K.key]=void 0),K.required&&(ne[K.key]=[{required:!0,message:X("fillRequired")}]),R.value=dt()});const F=["fullScreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],L=K=>ue("span",{},{default:()=>te(K.label)});kt(()=>c.value,K=>{const se=d.useJson?JSON.stringify(K):K,$e=async()=>{var Ee;if(v.length==0)return!0;let ce=!1;try{await((Ee=W.value)==null?void 0:Ee.validate(ze=>{ce=!ze}))}catch{ce=!1}return ce};f("update:modelValue",se),f("update",se,$e)},{immediate:!0,deep:!0});const le=yt(),J=Le(()=>le.isLightTheme?"light":"dark"),E=i(!1),I=i(!1),h=i(!1),j=i(""),H=i(""),ae=i(!1),r=i(!1),M=i(""),Y=i(""),m=i(!1),$=K=>{window.open(K,"_blank")},Z=i(!1),u=i(!1),p=i([]);(async()=>{var se;u.value=!0;const K=await P({url:"/menu/items"});if(K.success&&K.result)for(let $e=0;$e<((se=K.result.data)==null?void 0:se.length);$e++)switch(K.result.data[$e].targetType){case ut.EXTERNAL_LINK:p.value.findIndex(ce=>ce.url===K.result.data[$e].url)===-1&&p.value.push(K.result.data[$e]);break;case ut.PAGE_LINK:p.value.findIndex(ce=>ce.path===K.result.data[$e].path)===-1&&p.value.push(K.result.data[$e]);break}u.value=!1})();const w=i(!1),x=i([]),g=i([]),k=async(K,se)=>{if(!K.length){g.value=[];return}w.value=!0;const $e=await P({url:`/content-model-items/search/${K}/${se}`});$e.success&&$e.result&&(g.value=$e.result.data),w.value=!1},ve=Le(()=>U(x.value,g.value,"id")),oe=i(!1),ee=i([]),y=i([]),B=async K=>{if(!K.length){y.value=[];return}oe.value=!0;const se=await P({url:`/news-articles/search/${K}`});se.success&&se.result&&(y.value=se.result.data),oe.value=!1},Ie=Le(()=>U(ee.value,y.value,"id")),{categories:Q,tags:Ce}=je(Zt()),{loadCategories:ge,loadTags:de}=Zt();Ml(async()=>{v.find(K=>K.type==="news-categories"||K.type==="news-category")&&(ge(),de());for(let K=0;K<v.length;K++)if(v[K].type==="news-articles"||v[K].type==="news-article"){oe.value=!0;const se=c.value[v[K].key],$e=await P({url:"/news-articles/list",method:"post",data:{ids:v[K].type==="news-articles"?se:[se]}});$e.success&&$e.result&&(ee.value=U(ee.value,$e.result.data,"id")),oe.value=!1}else if(v[K].type==="content-model-items"||v[K].type==="content-model-item"){w.value=!0;const se=c.value[v[K].key],$e=await P({url:"/content-model-items/list",method:"post",data:{ids:v[K].type==="content-model-items"?se:[se]}});$e.success&&$e.result&&(x.value=U(x.value,$e.result.data,"id")),w.value=!1}});const Re=K=>ue("span",{},{default:()=>`${te(K.name)}`}),xe=K=>ue("span",{},{default:()=>`${te(K.title)}`}),ie=K=>ue("span",{},{default:()=>`${te(K.name)}`}),ke=K=>Le(()=>ue("span",{},{default:()=>{var se;return re(K,(se=N.value)==null?void 0:se.find($e=>$e.id===K.contentModelId))}})),A=({option:K})=>ue("div",{style:{display:"flex",alignItems:"center"}},[`${te(K.title)}`]),Ue=K=>ue("div",{style:{marginLeft:"12px",padding:"4px 0"}},[ue("div",{},{default:()=>`${te(K.title)}`}),ue("small",{},{default:()=>`${K.targetType==ut.EXTERNAL_LINK?K.url:K.path}`})]);return(K,se)=>{var pl,ol,il,rl,ul;const $e=Xe,ce=bt,Ee=Ka,ze=Tl,De=Ht,Ne=Ea,et=Vt,xt=tl,Pe=ye,Ge=fe,Fe=Te,he=us,Ke=Ga,Ut=jn,Rt=wl,Mt=zl,St=pt,Me=ft,gt=rt,jt=Kt;return n(),T(_e,null,[(n(),C(Me,{ref_key:"formRef",ref:W,key:e(R),model:e(c),rules:ne,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:qe(d.formStyle)},{default:l(()=>[(n(!0),T(_e,null,Oe(e(v),(s,Wt)=>(n(),C(St,{key:Wt,label:e(te)(s.label),path:s.key,"label-style":d.labelStyle,"show-require-mark":s.required,class:"w-full"},{default:l(()=>{var Jt,Sl,Al,El,Dl,Ll,Pl,Nl,Ol,Rl,ql,Fl,jl,Bl,Kl,Yl,Hl,Gl,Wl,Jl,Xl,Zl,Ql,ea,ta,la,aa,na,sa,oa,ia,ra,ua,da,ca,pa,fa,ma,va,_a,ya,ga,ba,ha,ka,wa,xa,Ca,Ia;return[s.type=="text"?(n(),C($e,{key:0,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),maxlength:((Jt=s.settings)==null?void 0:Jt.maxLength)||void 0,minlength:((Sl=s.settings)==null?void 0:Sl.minLength)||void 0,clearable:((Al=s.settings)==null?void 0:Al.clearable)||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-text"?(n(),C(ce,{key:1,modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="textarea"?(n(),C($e,{key:2,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),maxlength:((El=s.settings)==null?void 0:El.maxLength)||void 0,minlength:((Dl=s.settings)==null?void 0:Dl.minLength)||void 0,clearable:((Ll=s.settings)==null?void 0:Ll.clearable)||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):s.type=="i18n-textarea"?(n(),C(ce,{key:3,modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.type=="editor"?(n(),T("div",ds,[t(Ee,{modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),"toolbar-items":F,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="i18n-editor"?(n(),T("div",cs,[t(ce,{modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):s.type=="number"?(n(),C(ze,{key:6,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,max:((Pl=s.settings)==null?void 0:Pl.max)||void 0,min:((Nl=s.settings)==null?void 0:Nl.min)||void 0,step:((Ol=s.settings)==null?void 0:Ol.step)||1,clearable:((Rl=s.settings)==null?void 0:Rl.clearable)||!1,placeholder:e(te)(s.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):s.type=="checkbox"?(n(),C(De,{key:7,checked:e(c)[s.key],"onUpdate:checked":me=>e(c)[s.key]=me,"checked-value":((ql=s.settings)==null?void 0:ql["checked-value"])||!0,"unchecked-value":((Fl=s.settings)==null?void 0:Fl["unchecked-value"])||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):s.type=="date"?(n(),C(Ne,{key:8,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM-dd",format:((jl=s.settings)==null?void 0:jl.format)||"dd MMMM yyyy",type:"date",clearable:((Bl=s.settings)==null?void 0:Bl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="daterange"?(n(),C(Ne,{key:9,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM-dd",format:((Kl=s.settings)==null?void 0:Kl.format)||"dd MMMM yyyy",type:"daterange",clearable:((Yl=s.settings)==null?void 0:Yl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetime"?(n(),C(Ne,{key:10,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Hl=s.settings)==null?void 0:Hl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:((Gl=s.settings)==null?void 0:Gl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="datetimerange"?(n(),C(Ne,{key:11,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM-dd HH:mm:ss",format:((Wl=s.settings)==null?void 0:Wl.format)||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:((Jl=s.settings)==null?void 0:Jl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):s.type=="year"?(n(),C(Ne,{key:12,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy",type:"year",clearable:((Xl=s.settings)==null?void 0:Xl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="yearrange"?(n(),C(Ne,{key:13,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy",type:"yearrange",clearable:((Zl=s.settings)==null?void 0:Zl.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="month"?(n(),C(Ne,{key:14,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM",type:"month",clearable:((Ql=s.settings)==null?void 0:Ql.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="monthrange"?(n(),C(Ne,{key:15,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-MM",type:"monthrange",clearable:((ea=s.settings)==null?void 0:ea.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarter"?(n(),C(Ne,{key:16,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-Q",type:"quarter",clearable:((ta=s.settings)==null?void 0:ta.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="quarterrange"?(n(),C(Ne,{key:17,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,"value-format":"yyyy-Q",type:"quarterrange",clearable:((la=s.settings)==null?void 0:la.clearable)||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):s.type=="week"?(n(),C(Ne,{key:18,"formatted-value":e(c)[s.key],"onUpdate:formattedValue":me=>e(c)[s.key]=me,type:"week",clearable:((aa=s.settings)==null?void 0:aa.clearable)||!0,placeholder:e(X)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):s.type=="single-select"||s.type=="multi-select"?(n(),C(et,{key:19,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:(na=s.options||[])==null?void 0:na.map(me=>{var tt;if(s.type=="multi-select"&&s.settings&&e(c)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...me,disabled:e(c)[s.key].length>=mt&&!e(c)[s.key].includes(me.value)}}return me}),multiple:s.type=="multi-select",placeholder:e(te)(s.label),"render-label":L,"label-field":"label","value-field":"value",filterable:"",clearable:((sa=s.settings)==null?void 0:sa.clearable)||!0,"max-tag-count":((oa=s.settings)==null?void 0:oa["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="image"?(n(),T("div",ps,[_("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{S.value=s.key,E.value=!0}},[e(c)[s.key]?(n(),C(xt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:qe("border: 1px dashed "+e(b)("green","white")),src:e(q)(e(c)[s.key]||"")},null,8,["style","src"])):(n(),T("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(b)("green","white"))},[t(Ge,{size:64},{default:l(()=>[t(Pe,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,fs),e(c)[s.key]?(n(),C(Fe,{key:0,quaternary:"",onClick:()=>{S.value=s.key,e(c)[e(S)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("clear")),1)]),_:2},1032,["onClick"])):be("",!0)])):s.type=="gallery"?(n(),C(he,{key:21,modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,"upload-folder":"images",title:e(te)(s.label)},null,8,["modelValue","onUpdate:modelValue","title"])):s.type=="news-category"||s.type=="news-categories"?(n(),C(et,{key:22,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:(ia=e(Q)||[])==null?void 0:ia.map(me=>{var tt;if(s.type=="news-categories"&&s.settings&&e(c)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...me,disabled:e(c)[s.key].length>=mt&&!e(c)[s.key].includes(me.id)}}return me}),multiple:s.type=="news-categories",placeholder:e(te)(s.label),"render-label":Re,"label-field":"name","value-field":"id",filterable:"",clearable:((ra=s.settings)==null?void 0:ra.clearable)||!0,"max-tag-count":((ua=s.settings)==null?void 0:ua["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-tag"||s.type=="news-tags"?(n(),C(et,{key:23,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:(da=e(Ce)||[])==null?void 0:da.map(me=>{var tt;if(s.type=="news-tags"&&s.settings&&e(c)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...me,disabled:e(c)[s.key].length>=mt&&!e(c)[s.key].includes(me.id)}}return me}),multiple:s.type=="news-tags",placeholder:e(te)(s.label),"render-label":ie,"label-field":"name","value-field":"id",filterable:"",clearable:((ca=s.settings)==null?void 0:ca.clearable)||!0,"max-tag-count":((pa=s.settings)==null?void 0:pa["max-tag-count"])||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):s.type=="news-article"||s.type=="news-articles"?(n(),C(et,{key:24,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:(fa=e(Ie)||[])==null?void 0:fa.map(me=>{var tt;if(s.type=="news-articles"&&s.settings&&e(c)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...me,disabled:e(c)[s.key].length>=mt&&!e(c)[s.key].includes(me.id)}}return me}),multiple:s.type=="news-articles",placeholder:e(te)(s.label),"render-label":xe,loading:e(oe),"value-field":"id",filterable:"",clearable:((ma=s.settings)==null?void 0:ma.clearable)||!0,"max-tag-count":((va=s.settings)==null?void 0:va["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:B},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):s.type=="icon"||s.type=="icons"?(n(),C(Ke,{key:25,modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),multiple:s.type=="icons","icons-list-placeholder":e(X)("enterIconNameInSearchBar"),"search-placeholder":e(X)("search"),"empty-text":e(X)("noIconsFound"),"icon-library":((_a=s.settings)==null?void 0:_a.library)||"all",clearable:((ya=s.settings)==null?void 0:ya.clearable)||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):s.type=="albums"?(n(),C(Ut,{key:26,modelValue:e(c)[s.key],"onUpdate:modelValue":me=>e(c)[s.key]=me,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):s.type=="audio"?(n(),C(Rt,{key:27},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{S.value=s.key,ae.value=!0}},{default:l(()=>[D(o(e(X)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(c)[s.key]?e(Xt)(e(c)[s.key]):"",placeholder:e(X)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(c)[s.key]?(n(),T(_e,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:()=>{M.value=e(te)(s.label),Y.value=e(q)(e(c)[s.key]),r.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{S.value=s.key,e(c)[e(S)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:2},1024)):s.type=="video"?(n(),C(Rt,{key:28},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{S.value=s.key,I.value=!0}},{default:l(()=>[D(o(e(X)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(c)[s.key]?e(Xt)(e(c)[s.key]):"",placeholder:e(X)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(c)[s.key]?(n(),T(_e,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:()=>{j.value=e(te)(s.label),H.value=e(q)(e(c)[s.key]),h.value=!0}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:play"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("play")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{S.value=s.key,e(c)[e(S)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:2},1024)):s.type=="document"?(n(),C(Rt,{key:29},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{S.value=s.key,m.value=!0}},{default:l(()=>[D(o(e(X)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(c)[s.key]?e(Xt)(e(c)[s.key]):"",placeholder:e(X)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(c)[s.key]?(n(),T(_e,{key:0},[t(Fe,{type:"primary",ghost:"",onClick:me=>$(e(q)(e(c)[s.key]))},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"mdi:open-in-new"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("open")),1)]),_:2},1032,["onClick"]),t(Fe,{type:"primary",ghost:"",onClick:()=>{S.value=s.key,e(c)[e(S)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("clear")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:2},1024)):s.type=="file"?(n(),C(Rt,{key:30},{default:l(()=>[t(Fe,{type:"primary",onClick:()=>{S.value=s.key,Z.value=!0}},{default:l(()=>[D(o(e(X)("select")),1)]),_:2},1032,["onClick"]),t($e,{value:e(c)[s.key]?e(Xt)(e(c)[s.key]):"",placeholder:e(X)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),e(c)[s.key]?(n(),C(Fe,{key:0,type:"primary",ghost:"",onClick:()=>{S.value=s.key,e(c)[e(S)]=""}},{icon:l(()=>[t(Ge,null,{default:l(()=>[t(Pe,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(X)("clear")),1)]),_:2},1032,["onClick"])):be("",!0)]),_:2},1024)):s.type=="color"?(n(),C(e(el),{key:31,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,class:"cursor-pointer",theme:e(J),"z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])):s.type=="content-model-item"||s.type=="content-model-items"?(n(),C(et,{key:32,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:(ga=e(ve)||[])==null?void 0:ga.map(me=>{var tt;if(s.type=="content-model-items"&&s.settings&&e(c)[s.key]){const mt=((tt=s.settings)==null?void 0:tt.max)||1/0;return{...me,disabled:e(c)[s.key].length>=mt&&!e(c)[s.key].includes(me.id)}}return me}),multiple:s.type=="content-model-items",placeholder:e(te)(s.label),"render-label":me=>ke(me).value,loading:e(w),"value-field":"id",filterable:"",clearable:((ba=s.settings)==null?void 0:ba.clearable)||!0,"max-tag-count":((ha=s.settings)==null?void 0:ha["max-tag-count"])||void 0,remote:"",class:"w-full",onSearch:me=>k(me,s.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):s.type=="menu-item-link"?(n(),C(et,{key:33,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,options:e(p)||[],placeholder:e(te)(s.label),"render-label":Ue,"render-tag":A,loading:e(u),"label-field":"title","value-field":"id",filterable:"",clearable:((ka=s.settings)==null?void 0:ka.clearable)||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):s.type=="list"?(n(),C(Mt,{key:34,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),max:((wa=s.settings)==null?void 0:wa.max)||void 0,min:((xa=s.settings)==null?void 0:xa.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:me})=>{var tt,mt;return[((tt=s.settings)==null?void 0:tt.type)=="editor"?(n(),T("div",ms,[t(Ee,{modelValue:me.value,"onUpdate:modelValue":Il=>me.value=Il,"toolbar-items":F,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(n(),C($e,{key:1,value:me.value,"onUpdate:value":Il=>me.value=Il,type:((mt=s.settings)==null?void 0:mt.type)||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):s.type=="i18n-list"?(n(),C(Mt,{key:35,value:e(c)[s.key],"onUpdate:value":me=>e(c)[s.key]=me,placeholder:e(te)(s.label),max:((Ca=s.settings)==null?void 0:Ca.max)||void 0,min:((Ia=s.settings)==null?void 0:Ia.min)||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:l(({value:me})=>{var tt;return[t(ce,{modelValue:me.value,"onUpdate:modelValue":mt=>me.value=mt,type:((tt=s.settings)==null?void 0:tt.type)||"text","selector-span":5,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]}),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):be("",!0)]}),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),t(gt,{show:e(r),"onUpdate:show":se[0]||(se[0]=s=>Ve(r)?r.value=s:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(M)},{default:l(()=>[_("audio",vs,[_("source",{src:e(Y)},null,8,_s)])]),_:1},8,["show","title"]),t(gt,{show:e(h),"onUpdate:show":se[1]||(se[1]=s=>Ve(h)?h.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(j)},{default:l(()=>[_("video",ys,[_("source",{src:e(H)},null,8,gs)])]),_:1},8,["show","title"]),t(jt,{show:e(E),"onUpdate:show":se[2]||(se[2]=s=>Ve(E)?E.value=s:null),title:e(X)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((pl=e(z))==null?void 0:pl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[3]||(se[3]=s=>{e(c)[e(S)]=s,E.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(I),"onUpdate:show":se[4]||(se[4]=s=>Ve(I)?I.value=s:null),title:e(X)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((ol=e(z))==null?void 0:ol.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[5]||(se[5]=s=>{e(c)[e(S)]=s,I.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(ae),"onUpdate:show":se[6]||(se[6]=s=>Ve(ae)?ae.value=s:null),title:e(X)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:((il=e(z))==null?void 0:il.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[7]||(se[7]=s=>{e(c)[e(S)]=s,ae.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(m),"onUpdate:show":se[8]||(se[8]=s=>Ve(m)?m.value=s:null),title:e(X)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((rl=e(z))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[9]||(se[9]=s=>{e(c)[e(S)]=s,m.value=!1})},null,8,["show","title","upload-config"]),t(jt,{show:e(Z),"onUpdate:show":se[10]||(se[10]=s=>Ve(Z)?Z.value=s:null),title:e(X)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:((ul=e(z))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:se[11]||(se[11]=s=>{e(c)[e(S)]=s,Z.value=!1})},null,8,["show","title","upload-config"])],64)}}});const yl=zt(hs,[["__scopeId","data-v-5de92739"]]),ks={key:0},ws={key:1},xs={key:0},Cs={class:"flex items-center"},Is={class:"text-base"},$s={class:"flex items-center justify-center cursor-pointer gap-2"},Vs={key:1},Us={class:"mt-4"},Ts={key:2,class:"mt-2 text-xs"},zs={class:"my-8"},Ms={class:"flex items-center justify-between"},Ss={class:"text-base"},As=Be({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(pe,{emit:a}){const d=ct(),{t:f}=He(),X=pe,te=a,b=i(dt()),q=i({}),U=i({}),re=i(),P=i(),G=i(),N=i([]),z=i([]),v=i({}),O=i({}),S=i(!1),R=i(!1),W=nt(),c=st(),{request:ne}=Ze(),{tr:F,pickByTheme:L,editKeysToCamelCase:le}=Je(),{sections:J}=je(We()),{isLightTheme:E}=je(yt()),I=async()=>{var k,ve,oe,ee;R.value=S.value=!0,c.start();const x=await ne({url:`/pages/${X.slug}`});if(x.success&&x.result){if(G.value=x.result.data,(k=G.value)!=null&&k.sections&&Array.isArray((ve=G.value)==null?void 0:ve.sections)){const y={};for(const B of G.value.sections)B&&(y[B.slug]=B.dataSourcePageSectionsData??{});for(const B of G.value.sections)B&&(we.isObject(y)&&we.has(y,B.slug)&&Ma(y[B.slug])?q.value[B.slug]=qt(y[B.slug]):q.value[B.slug]=qt({}),we.forIn(le(B.dataStructure),(Ie,Q)=>{(!q.value[B.slug][Q]||Array.isArray(q.value[B.slug][Q])&&q.value[B.slug][Q].length==0)&&(Q==="index"?q.value[B.slug][Q]=qt({}):q.value[B.slug][Q]=qt([]))}))}if(G.value&&Array.isArray((oe=G.value)==null?void 0:oe.sections)){const y=G.value.sections;if(Array.isArray((ee=G.value)==null?void 0:ee.sectionsOrder)){N.value=[];for(const B of G.value.sectionsOrder)if(B){const Ie=y.find(Q=>Q.slug===B);Ie&&N.value.push(Ie)}for(const B of y)N.value.map(Ie=>Ie.slug).includes(B.slug)||N.value.push(B)}else N.value=we.cloneDeep(y);if(Array.isArray(G.value.sectionsDisabled))for(const B of G.value.sections)B&&(v.value[B.slug]=!G.value.sectionsDisabled.includes(B.slug));else for(const B of G.value.sections)B&&(v.value[B.slug]=!0)}O.value=we.cloneDeep(v.value),z.value=we.cloneDeep(N.value),U.value=we.cloneDeep(q.value)}b.value=dt();function g(y){return new Promise(B=>setTimeout(B,y))}await g(5e3),c.finish(),R.value=S.value=!1};I();const h=x=>ue("span",{},{default:()=>{var g;return x.id===((g=G.value)==null?void 0:g.id)?f("currentPage"):F(x.title)}}),j=Le(()=>we.isEqual(q.value,U.value)&&we.isEqual(N.value,z.value)&&we.isEqual(v.value,O.value)),H=async()=>{R.value=!0,c.start();const x=re.value&&await re.value(),g=P.value&&await P.value(),k=async()=>{const ve=await ne({url:`/pages/${X.slug}`,method:"put",data:{dispatchData:!0,sectionsData:q.value,sectionsOrder:N.value.map(oe=>oe.slug),sectionsDisabled:Object.keys(v.value).filter(oe=>!v.value[oe])}});ve.success&&ve.result?(W.success(f("success")),I()):W.error(f("anErrorOccurred"))};(!re.value||x)&&(!P.value||g)?await k():d.warning({title:f("confirm"),content:f("mandatoryFieldsNotFilledInConfirmation"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{await k()}}),c.finish(),R.value=!1},ae=async x=>{d.warning({title:f("confirm"),content:f("confirmDeletePage"),positiveText:f("yes"),negativeText:f("no"),onPositiveClick:async()=>{(await ne({method:"delete",url:`/pages/${x.slug}`})).success?(te("delete",G.value),W.success(f("success"))):W.error(f("anErrorOccurred"))}})},r=i(!1),M=i([]),Y=i(!1),m=()=>{M.value=[],N.value.forEach(x=>{x.id&&M.value.push(x.id)}),Y.value=!0},$=x=>{x.id&&(M.value.includes(x.id)?M.value=M.value.filter(g=>g!==x.id):M.value.push(x.id))},Z=x=>Le({get:()=>x.id?M.value.includes(x.id):!1,set:g=>{x.id&&(g?M.value=M.value.filter(k=>k!==x.id):M.value.includes(x.id)||M.value.push(x.id))}}),u=x=>{x.id&&(M.value=[],N.value.forEach(g=>{g.id&&g.id!==x.id&&M.value.push(g.id)}),p())},p=async()=>{r.value=!0,c.start();const x=await ne({url:`/pages/${X.slug}`,method:"put",data:{sectionsIds:M.value}});x.success&&x.result?(W.success(f("success")),I()):W.error(f("anErrorOccurred")),c.finish(),r.value=!1},V=async(x,g)=>{var ve;r.value=!0,c.start();const k=await ne({url:`/sections/${x.slug}/data-source-page`,method:"put",data:{pageId:(ve=G.value)==null?void 0:ve.id,sourcePageId:g}});k.success&&k.result?(W.success(f("success")),I()):W.error(f("anErrorOccurred")),c.finish(),r.value=!1},w=async(x,g)=>{j.value?V(x,g):d.warning({title:f("confirm"),content:f("confirmUpdateDataSourcePage"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:()=>V(x,g)})};return(x,g)=>{const k=ye,ve=fe,oe=Te,ee=Tt,y=it,B=It,Ie=on,Q=Ht,Ce=Nt,ge=lt,de=Vt,Re=al,xe=nl,ie=Cl("Draggable"),ke=wt,A=Pt,Ue=$t,K=rt;return n(),T(_e,null,[t(B,{to:"#alt-action"},{default:l(()=>[t(y,{align:"center"},{default:l(()=>[t(oe,{type:"error",disabled:e(R),onClick:g[0]||(g[0]=se=>e(G)?ae(e(G)):null)},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("delete")),1)]),_:1},8,["disabled"]),t(oe,{type:"info",disabled:e(R),onClick:g[1]||(g[1]=se=>e(G)?x.openFormModal(e(G)):null)},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:edit"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("editPage")),1)]),_:1},8,["disabled"]),t(ee,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(oe,{type:"primary",loading:e(R),disabled:e(j),onClick:g[2]||(g[2]=se=>H())},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),t(A,{appear:"",name:"slide-fade"},{default:l(()=>[e(S)?(n(),T("section",ks,[(n(),T(_e,null,Oe(6,se=>t(Ie,{key:se,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(n(),T("section",ws,[e(G)&&Array.isArray(e(G).sections)&&e(G).sections.length?(n(),T("section",xs,[t(ie,{list:e(N)},{default:l(()=>[(n(!0),T(_e,null,Oe(e(N),(se,$e)=>(n(),C(ge,{key:se.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(xe,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:ce})=>[t(ve,null,{default:l(()=>[ce?(n(),C(k,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>g[8]||(g[8]=[_("span",null,null,-1)])),default:l(()=>[t(Re,{name:"1"},{header:l(()=>[_("div",Cs,[t(ve,{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(k,{icon:"fa-solid:grip-lines"})]),_:1}),t(Q,{checked:e(v)[se.slug],"onUpdate:checked":ce=>e(v)[se.slug]=ce,size:"small",class:"mr-4",onClick:g[3]||(g[3]=ot(()=>{},["stop"]))},{default:l(()=>[D(o(e(f)("display")),1)]),_:2},1032,["checked","onUpdate:checked"]),t(Ce,{size:"small",type:"info"},{default:l(()=>[D(o($e+1),1)]),_:2},1024),t(ee,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",Is,o(e(F)(se.title)),1)])]),default:l(()=>[(n(!0),T(_e,null,Oe(e(le)(se.dataStructure),(ce,Ee)=>(n(),T(_e,{key:Ee},[String(Ee)==="index"?(n(),C(ge,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),C(yl,{key:`${e(b)}-${Ee}-form-1`,modelValue:e(q)[se.slug][Ee],"onUpdate:modelValue":ze=>e(q)[se.slug][Ee]=ze,items:ce,onUpdate:(ze,De)=>{re.value=De}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):(n(),C(ge,{key:1,title:e(F)(ce.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(oe,{quaternary:"",size:"small",onClick:()=>e(q)[se.slug][Ee].push({})},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),T(_e,null,Oe(e(q)[se.slug][Ee],(ze,De)=>(n(),C(ge,{key:De,title:String(De+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(oe,{type:"error",size:"small",onClick:()=>e(q)[se.slug][Ee].splice(De,1)},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),C(yl,{key:`${e(b)}-${Ee}-${De}-form-2`,modelValue:e(q)[se.slug][Ee][De],"onUpdate:modelValue":Ne=>e(q)[se.slug][Ee][De]=Ne,items:ce.items,onUpdate:(Ne,et)=>{P.value=et}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"]))],64))),128)),t(y,null,{default:l(()=>[t(oe,{size:"small",type:"error",secondary:e(E),onClick:ce=>u(se)},{default:l(()=>[t(ve,{size:"21"},{default:l(()=>[t(k,{icon:"carbon:close"})]),_:1}),D(" "+o(e(f)("removeSection")),1)]),_:2},1032,["secondary","onClick"]),t(ee,{vertical:"",class:Ye(e(L)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),t(y,{align:"center"},{default:l(()=>[_("span",null,o(e(f)("dataSourcePage")),1),t(de,{value:se.dataSourcePageId,options:se.pages||[],placeholder:e(f)("select"),"render-label":h,"label-field":"title","value-field":"id",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ce=>w(se,ce)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["list"]),t(ge,{hoverable:"",size:"small",class:"mb-2 !border-dashed !border-2",onClick:g[4]||(g[4]=se=>m())},{default:l(()=>[_("div",$s,[t(ve,{size:"20"},{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1}),D(" "+o(e(f)("addSection")),1)])]),_:1})])):(n(),T("section",Vs,[t(ge,{size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(L)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(ke,{description:e(f)("noSectionOnThisPage")},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:page-break"})]),_:1})]),extra:l(()=>[_("div",Us,[t(oe,{size:"small",onClick:g[5]||(g[5]=se=>m())},{icon:l(()=>[t(ve,null,{default:l(()=>[t(k,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("addSection")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),e(G)?(n(),T("div",Ts,[D(o(e(f)("dataRetrievalSlug"))+": ",1),_("b",null,o(e(G).slug),1)])):be("",!0)]))]),_:1}),t(K,{show:e(Y),"onUpdate:show":g[6]||(g[6]=se=>Ve(Y)?Y.value=se:null),loading:e(r),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(f)("addSections"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:p,onNegativeClick:g[7]||(g[7]=se=>Y.value=!1)},{default:l(()=>[_("section",zs,[t(Ue,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(J),se=>(n(),C(ge,{key:se.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:$e=>$(se)},{default:l(()=>[_("div",Ms,[_("span",Ss,o(e(F)(se.title)),1),t(Q,{checked:Z(se).value,"onUpdate:checked":$e=>Z(se).value=$e,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Es={class:"flex items-center justify-between"},Ds={class:"flex flex-col"},Ls={class:"text-sm font-bold"},Ps=Be({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(pe){const{t:a}=He(),{request:d}=Ze(),{pickByTheme:f,tr:X,displayFormErrors:te}=Je(),b=_t(pe,"show"),{menuItemGroups:q}=je(We()),{loadMenuItemGroups:U}=We(),{isLightTheme:re}=je(yt()),P=i(!1),G=async()=>{P.value=!0,await U(),P.value=!1};G();const N=ct(),z=nt(),v=st(),O=i(!1),S=i(!1),R=i(null),W=i(null),c=i({name:"",description:""}),ne={name:[{required:!0,message:a("fillRequired")}]},F=J=>{R.value=we.cloneDeep(J),c.value=we.cloneDeep(J||{name:"",description:""}),S.value=!0},L=async()=>{var J;return(J=W.value)==null||J.validate(async E=>{var I,h,j,H,ae,r;if(!E){v.start(),O.value=!0;const M={name:c.value.name,description:c.value.description},Y=await d({method:R.value?"put":"post",url:R.value?`/menu-item-groups/${R.value.id}`:"/menu-item-groups",data:M});if(Y.failure&&Y.error)switch((j=(h=(I=Y.error)==null?void 0:I.response)==null?void 0:h.data)==null?void 0:j.errorCode){case Qe.FORM_INVALID_DATA:te((r=(ae=(H=Y.error)==null?void 0:H.response)==null?void 0:ae.data)==null?void 0:r.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),G(),S.value=!1;O.value=!1,v.finish()}}),!1},le=async J=>{N.warning({title:a("confirm"),content:a("confirmDeleteMenuItemGroup"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-item-groups/${J.id}`})).success?(z.success(a("success")),G()):z.error(a("anErrorOccurred"))}})};return(J,E)=>{const I=ye,h=Te,j=it,H=xl,ae=fe,r=lt,M=$t,Y=wt,m=Yt,$=rt,Z=bt,u=pt,p=ft;return n(),T(_e,null,[t($,{show:b.value,"onUpdate:show":E[2]||(E[2]=V=>b.value=V),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuItemGroups")},{"header-extra":l(()=>[t(j,{align:"center"},{default:l(()=>[t(h,{size:"small",type:"primary",disabled:e(P),onClick:E[0]||(E[0]=V=>F(null))},{default:l(()=>[t(I,{icon:"carbon:add-alt",class:"mr-1"}),D(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(h,{size:"small",type:"error",disabled:e(P),onClick:E[1]||(E[1]=V=>b.value=!1)},{default:l(()=>[t(I,{icon:"carbon:close",class:"mr-1"}),D(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(m,{show:e(P)},{default:l(()=>[e(q).length?(n(),C(M,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(q),V=>(n(),C(r,{key:V.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Es,[_("div",Ds,[_("span",Ls,o(e(X)(V.name)),1),t(H,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[D(o(e(X)(V.description)),1)]),_:2},1024)]),t(j,null,{default:l(()=>[t(h,{size:"small",type:"warning",secondary:e(re),onClick:w=>F(V)},{default:l(()=>[t(ae,null,{default:l(()=>[t(I,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(h,{size:"small",type:"error",secondary:e(re),onClick:w=>le(V)},{default:l(()=>[t(ae,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(r,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Y,{description:e(a)("noMenuItemGroupAdded")},{icon:l(()=>[t(ae,null,{default:l(()=>[t(I,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t($,{show:e(S),"onUpdate:show":E[5]||(E[5]=V=>Ve(S)?S.value=V:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(R)?e(a)("editMenuItemGroup"):e(a)("addMenuItemGroup"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:L,onNegativeClick:E[6]||(E[6]=V=>S.value=!1)},{default:l(()=>[t(p,{ref_key:"formRef",ref:W,model:e(c),rules:ne,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(u,{label:e(a)("name"),path:"name"},{default:l(()=>[t(Z,{modelValue:e(c).name,"onUpdate:modelValue":E[3]||(E[3]=V=>e(c).name=V),placeholder:e(a)("name"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Z,{modelValue:e(c).description,"onUpdate:modelValue":E[4]||(E[4]=V=>e(c).description=V),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ns=Be({__name:"ContentFormItems",props:{"content-type":{default:at.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Gt(["update"],["update:content-type","update:content-id"]),setup(pe,{emit:a}){const{t:d}=He(),{tr:f,mergeArrays:X}=Je(),{request:te}=Ze(),{contentTypes:b,extractItemTitle:q}=cl(),{loadContentModels:U}=We(),{contentModels:re}=je(We()),P=a;U();const G=_t(pe,"content-type"),N=_t(pe,"content-id"),z=i(),v=i(!1),O=i([]),S=i([]),R=async(Y,m)=>{if(!Y.length){S.value=[];return}v.value=!0;const $=await te({url:`/content-model-items/search/${Y}/${m}`});$.success&&$.result&&(S.value=$.result.data),v.value=!1},W=Le(()=>X(O.value,S.value,"id")),c=i(!1),ne=i([]),F=i([]),L=async Y=>{if(!Y.length){F.value=[];return}c.value=!0;const m=await te({url:`/news-articles/search/${Y}`});m.success&&m.result&&(F.value=m.result.data),c.value=!1},le=Le(()=>X(ne.value,F.value,"id")),{categories:J}=je(Zt()),{loadCategories:E}=Zt(),{tags:I}=je(Zt()),{loadTags:h}=Zt();Ml(async()=>{var $;E(),h(),c.value=!0;const Y=await te({url:"/news-articles/list",method:"post",data:{ids:N.value?[N.value]:[]}});Y.success&&Y.result&&(ne.value=X(ne.value,Y.result.data,"id")),c.value=!1,v.value=!0;const m=await te({url:"/content-model-items/list",method:"post",data:{ids:N.value?[N.value]:[]}});m.success&&m.result&&(O.value=X(O.value,m.result.data,"id"),z.value=($=O.value.find(Z=>Z.id===N.value))==null?void 0:$.contentModelId),v.value=!1});const j=Y=>ue("span",{},{default:()=>`${f(Y.name)}`}),H=Y=>ue("span",{},{default:()=>`${f(Y.title)}`}),ae=Y=>ue("span",{},{default:()=>`${f(Y.name)}`}),r=Y=>ue("span",{},{default:()=>f(Y.title)}),M=Y=>Le(()=>ue("span",{},{default:()=>{var m;return q(Y,(m=re.value)==null?void 0:m.find($=>$.id===Y.contentModelId))}}));return(Y,m)=>{const $=Vt,Z=Ft,u=ht;return n(),C(u,{"x-gap":"12",span:24},{default:l(()=>[t(Z,{span:8,label:e(d)("contentType"),path:"contentType"},{default:l(()=>[t($,{value:G.value,"onUpdate:value":[m[0]||(m[0]=p=>G.value=p),m[1]||(m[1]=()=>N.value=void 0)],options:e(b)||[],placeholder:e(d)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),G.value===e(at).CONTENT_MODEL?(n(),T(_e,{key:0},[t(Z,{span:8,label:e(d)("contentModel")},{default:l(()=>[t($,{value:e(z),"onUpdate:value":m[2]||(m[2]=p=>Ve(z)?z.value=p:null),options:e(re),placeholder:e(d)("search"),"render-label":r,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(Z,{span:8,label:e(d)("item"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[m[3]||(m[3]=p=>N.value=p),m[5]||(m[5]=(p,V)=>P("update",p,V,G.value))],options:e(W)||[],placeholder:e(d)("search"),"render-label":p=>M(p).value,loading:e(v),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:m[4]||(m[4]=p=>R(p,e(z)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):be("",!0),G.value===e(at).NEWS_ARTICLE?(n(),C(Z,{key:1,span:16,label:e(d)("newsArticle"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[m[6]||(m[6]=p=>N.value=p),m[7]||(m[7]=(p,V)=>P("update",p,V,G.value))],options:e(le)||[],placeholder:e(d)("search"),"render-label":H,loading:e(c),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:L},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):be("",!0),G.value===e(at).NEWS_CATEGORY?(n(),C(Z,{key:2,span:16,label:e(d)("newsCategory"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[m[8]||(m[8]=p=>N.value=p),m[9]||(m[9]=(p,V)=>P("update",p,V,G.value))],options:e(J)||[],placeholder:e(d)("select"),"render-label":j,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):be("",!0),G.value===e(at).NEWS_TAG?(n(),C(Z,{key:3,span:16,label:e(d)("newsTag"),path:"contentId"},{default:l(()=>[t($,{value:N.value,"onUpdate:value":[m[10]||(m[10]=p=>N.value=p),m[11]||(m[11]=(p,V)=>P("update",p,V,G.value))],options:e(I)||[],placeholder:e(d)("select"),"render-label":ae,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):be("",!0)]),_:1})}}}),Os={class:"flex items-center"},Rs={class:"flex flex-col"},qs={class:"text-sm font-bold"},Fs={key:0,class:"text-sm"},js={class:"text-xs font-normal"},Bs={class:"text-xs my-1"},Ks={class:"flex items-center"},Ys={class:"flex flex-col"},Hs={class:"text-sm font-bold"},Gs={class:"text-xs font-normal"},Ws={key:0,class:"mt-4"},Js={class:"my-8"},Xs={class:"flex items-center justify-between"},Zs={class:"flex flex-col"},Qs={class:"text-sm font-bold"},eo={class:"text-xs font-normal"},to={class:"flex items-center"},lo={key:0},ao={key:1},no={key:2},so=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(pe){const{t:a}=He(),{request:d}=Ze(),{extractItemTitle:f}=cl(),{tr:X,displayFormErrors:te,pickByTheme:b}=Je(),{isLightTheme:q}=je(yt()),{pages:U,menuItemGroups:re,contentModels:P}=je(We()),{loadPages:G,loadMenuItemGroups:N}=We(),z=st(),v=nt(),O=ct(),S=_t(pe,"modelValue"),R=i([]),W=i([]),c=i(!1),ne=i(""),F=i(),L=Le(()=>{if(!ne.value)return R.value;const ee=R.value.filter(y=>{var B;return y.title.toLowerCase().includes(ne.value.toLowerCase())||((B=y.description)==null?void 0:B.toLowerCase().includes(ne.value.toLowerCase()))||y.children.some(Ie=>{var Q;return Ie.title.toLowerCase().includes(ne.value.toLowerCase())||((Q=Ie.description)==null?void 0:Q.toLowerCase().includes(ne.value.toLowerCase()))})});return F.value&&F.value.focus(),ee}),le=async(ee=!1)=>{z.start(),c.value=!0;const y=await d({url:"/menu/items"});if(y.success&&y.result){R.value=y.result.data.filter(B=>{var Ie;return!B.parentId&&B.menuId===((Ie=S.value)==null?void 0:Ie.id)});for(let B=0;B<R.value.length;B++)R.value[B].children=y.result.data.filter(Ie=>{var Q;return Ie.parentId===R.value[B].id&&Ie.menuId===((Q=S.value)==null?void 0:Q.id)});W.value=y.result.data.filter(B=>{var Ie;return B.menuId!==((Ie=S.value)==null?void 0:Ie.id)})}ee&&(G(),await N()),c.value=!1,z.finish()};le(!0);const J=i(12),E=i(1),I=ee=>{J.value=ee},h={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:ut.PAGE_LINK,menuItemGroupId:void 0,sectionId:void 0,pageId:void 0,contentType:at.CONTENT_MODEL,contentId:void 0},j=i(null),H=i(!1),ae=i(!1),r=i(!1),M=i(null),Y=i(null),m=i(h),$=Le(()=>{const ee={title:[{required:!0,message:a("fillRequired")}]};return m.value.targetType===ut.PAGE_LINK?(ee.pageId=[{required:!0,message:a("fillRequired")}],ee.path=[{required:!0,message:a("fillRequired")}]):m.value.targetType===ut.EXTERNAL_LINK?ee.url=[{required:!0,message:a("fillRequired")}]:m.value.targetType===ut.CONTENT_LINK&&(ee.contentId=[{required:!0,message:a("fillRequired")}],ee.contentType=[{required:!0,message:a("fillRequired")}]),ee}),Z=(ee,y=null)=>{M.value=we.cloneDeep(ee),j.value=y,ee?(m.value=we.cloneDeep(ee),ae.value=!0):(m.value=we.cloneDeep(h),W.value.length>0?r.value=!0:ae.value=!0)},u=async ee=>{O.warning({title:a("confirm"),content:ee.parentId?a("confirmDeleteMenuSubItem"):a("confirmDeleteMenuItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu/items/${ee.id}`})).success?(v.success(a("success")),le()):v.error(a("anErrorOccurred"))}})},p=async ee=>{var B,Ie,Q,Ce,ge,de,Re;z.start(),H.value=!0;const y=await d({method:"post",url:"/menu/items",data:{title:ee.title,path:ee.path,url:ee.url,description:ee.description,isActive:!0,isVisible:!0,color:ee.color,icon:ee.icon,position:ee.position,targetType:ee.targetType,parentId:j.value,menuId:(B=S.value)==null?void 0:B.id,sectionId:ee.sectionId,menuItemGroupId:ee.menuItemGroupId,pageId:ee.pageId}});if(y.failure&&y.error)switch((Ce=(Q=(Ie=y.error)==null?void 0:Ie.response)==null?void 0:Q.data)==null?void 0:Ce.errorCode){case Qe.FORM_INVALID_DATA:te((Re=(de=(ge=y.error)==null?void 0:ge.response)==null?void 0:de.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),le();H.value=!1,z.finish(),r.value=!1},V=async()=>{var ee;return(ee=Y.value)==null||ee.validate(async y=>{var B,Ie,Q,Ce,ge,de,Re;if(!y){const xe={title:m.value.title,path:m.value.path,url:m.value.url,description:m.value.description,isActive:m.value.isActive,isVisible:m.value.isVisible,color:m.value.color,icon:m.value.icon,position:m.value.position,targetType:m.value.targetType,parentId:j.value,menuId:(B=S.value)==null?void 0:B.id,sectionId:m.value.sectionId,menuItemGroupId:m.value.menuItemGroupId,pageId:m.value.pageId,contentId:m.value.contentId,contentType:m.value.contentType};if(M.value)if(M.value.title!==m.value.title&&R.value.findIndex(ie=>ie.title==m.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{z.start(),H.value=!0;const ie=await d({method:"put",url:`/menu/items/${M.value.id}`,data:xe});ie.success&&ie.result.data&&(v.success(a("success")),le()),H.value=!1,z.finish(),ae.value=!1}else if(R.value.findIndex(ie=>ie.title==m.value.title)>-1)v.error(a("sameMenuItemTitleMessage"));else{z.start(),H.value=!0;const ie=await d({method:"post",url:"/menu/items",data:xe});if(ie.failure&&ie.error)switch((Ce=(Q=(Ie=ie.error)==null?void 0:Ie.response)==null?void 0:Q.data)==null?void 0:Ce.errorCode){case Qe.FORM_INVALID_DATA:te((Re=(de=(ge=ie.error)==null?void 0:ge.response)==null?void 0:de.data)==null?void 0:Re.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),le();H.value=!1,z.finish(),ae.value=!1}}}),!1},w=async(ee,y)=>{(await d({method:"put",url:"/menu/items/position",data:{items:y}})).success&&le()},x=ee=>ue("span",{},{default:()=>X(ee.title)}),g=ee=>ue("span",{},{default:()=>X(ee.name)}),k=ee=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(ee),ve=ee=>{if(ee.targetType==ut.EXTERNAL_LINK)return ee.url;if(ee.targetType==ut.PAGE_LINK)return ee.path;if(ee.targetType==ut.CONTENT_LINK)switch(ee.contentType){case at.CONTENT_MODEL:return a("contentModel");case at.NEWS_CATEGORY:return a("newsCategory");case at.NEWS_ARTICLE:return a("newsArticle");case at.NEWS_TAG:return a("newsTag")}return""},oe=async(ee,y,B)=>{var Ie;if(!X(m.value.title))switch(B){case at.CONTENT_MODEL:m.value.title=f(y,(Ie=P.value)==null?void 0:Ie.find(Q=>Q.id===y.contentModelId));break;case at.NEWS_ARTICLE:m.value.title=y.title;break;case at.NEWS_CATEGORY:case at.NEWS_TAG:m.value.title=y.name;break}};return(ee,y)=>{const B=ye,Ie=it,Q=It,Ce=La,ge=Nt,de=Tt,Re=lt,xe=Cl("Draggable"),ie=al,ke=nl,A=sl,Ue=wt,K=Pt,se=$t,$e=rt,ce=bt,Ee=pt,ze=Tl,De=Ft,Ne=bl,et=hl,xt=ht,Pe=Ga,Ge=Vt,Fe=ft;return n(),T(_e,null,[t(Q,{to:"#alt-action"},{default:l(()=>[t(Ie,{align:"center"},{default:l(()=>[e(L).length?(n(),C(e(Te),{key:0,type:"primary",onClick:y[0]||(y[0]=he=>Z(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(B,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addMenuItem")),1)]),_:1})):be("",!0)]),_:1})]),_:1}),t(Ce,{class:"mt-2 mb-5",onBack:y[2]||(y[2]=he=>S.value=null)},{title:l(()=>{var he;return[D(o(e(X)((he=S.value)==null?void 0:he.title)),1)]}),back:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[t(e(Xe),{ref_key:"searchInputRef",ref:F,value:e(ne),"onUpdate:value":y[1]||(y[1]=he=>Ve(ne)?ne.value=he:null),clearable:!0,placeholder:e(a)("search")},{suffix:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(K,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(L)&&e(L).length?(n(),T(_e,{key:0},[t(xe,{list:e(R),onChange:y[3]||(y[3]=he=>w(he,e(R)))},{default:l(()=>[(n(!0),T(_e,null,Oe(e(L).slice((e(E)-1)*e(J),e(E)*e(J)),he=>(n(),C(Re,{key:he.id,embedded:"",size:"small",class:"mb-1"},{default:l(()=>[t(ke,{"default-expanded-names":he.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":l(({collapsed:Ke})=>[t(Ie,{align:"center"},{default:l(()=>[t(ge,{size:"small",bordered:!1,type:he.isActive?"success":"error"},{default:l(()=>[D(o(he.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(ge,{size:"small",bordered:!1,type:he.isVisible?"info":"warning"},{default:l(()=>[D(o(he.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(de,{vertical:"",class:Ye(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(q),onClick:ot(Ut=>Z(he),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(q),onClick:ot(Ut=>u(he),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"info",secondary:e(q),onClick:ot(Ut=>Z(null,he.id),["stop"])},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:category"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("subMenuItem"))+" ",1),t(ge,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:l(()=>[D(o(he.children.length),1)]),_:2},1024)]),_:2},1032,["secondary","onClick"])]),_:2},1024),y[27]||(y[27]=_("div",{class:"w-6"},null,-1)),t(e(fe),null,{default:l(()=>[Ke?(n(),C(B,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(B,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>y[28]||(y[28]=[_("span",null,null,-1)])),default:l(()=>[t(ie,{name:"1"},{header:l(()=>{var Ke;return[_("div",Os,[t(e(fe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(B,{icon:"fa-solid:grip-lines"})]),_:1}),t(de,{vertical:"",class:Ye(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Rs,[_("div",null,[_("span",qs,o(e(X)(he.title)),1),he.group?(n(),T("span",Fs," Â ("+o(e(X)((Ke=he.group)==null?void 0:Ke.name))+") ",1)):be("",!0)]),_("small",js,o(ve(he)),1)])])]}),default:l(()=>[he.description?(n(),T(_e,{key:0},[t(de,{class:Ye([e(b)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),_("div",Bs,o(e(X)(he.description)),1)],64)):be("",!0),he.children.length?(n(),T(_e,{key:1},[t(de,{class:Ye([e(b)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),t(xe,{list:he.children,onChange:Ke=>w(Ke,he.children)},{default:l(()=>[(n(!0),T(_e,null,Oe(he.children,Ke=>(n(),C(Re,{key:Ke.id,size:"small",class:"mb-1"},{header:l(()=>[_("div",Ks,[t(e(fe),{size:"21",class:"cursor-move mr-4"},{default:l(()=>[t(B,{icon:"fa-solid:grip-lines"})]),_:1}),t(de,{vertical:"",class:Ye(e(b)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",Ys,[_("span",Hs,o(e(X)(Ke.title)),1),_("small",Gs,o(ve(Ke)),1)])])]),"header-extra":l(()=>[t(Ie,{align:"center"},{default:l(()=>[t(ge,{size:"small",bordered:!1,type:Ke.isActive?"success":"error"},{default:l(()=>[D(o(Ke.isActive?e(a)("published"):e(a)("unpublished")),1)]),_:2},1032,["type"]),t(ge,{size:"small",bordered:!1,type:Ke.isVisible?"info":"warning"},{default:l(()=>[D(o(Ke.isVisible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(de,{vertical:"",class:Ye(["!mx-0",e(b)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),t(e(Te),{size:"small",type:"primary",secondary:e(q),onClick:ot(Ut=>Z(Ke,he.id),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(e(Te),{size:"small",type:"error",secondary:e(q),onClick:ot(Ut=>u(Ke),["stop"])},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):be("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),t(A,{page:e(E),"onUpdate:page":y[4]||(y[4]=he=>Ve(E)?E.value=he:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(J),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(R).length/e(J)),"onUpdate:pageSize":I},{prefix:l(()=>[D(o(`${e(R).length} ${e(a)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(Re,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(b)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ue,{description:e(a)("noMenuItemAvailable")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[e(ne)?(n(),C(B,{key:0,icon:"carbon:search"})):(n(),C(B,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:l(()=>[e(ne)?be("",!0):(n(),T("div",Ws,[t(e(Te),{size:"small",onClick:y[5]||(y[5]=he=>Z(null))},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t($e,{show:e(r),"onUpdate:show":y[6]||(y[6]=he=>Ve(r)?r.value=he:null),loading:e(H),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(a)("menuItems"),"positive-text":e(j)?e(a)("createSubMenuItem"):e(a)("createMenuItem"),"negative-text":e(a)("cancel"),onPositiveClick:y[7]||(y[7]=()=>{r.value=!1,ae.value=!0}),onNegativeClick:y[8]||(y[8]=he=>r.value=!1)},{default:l(()=>[_("section",Js,[t(se,{style:{"max-height":"400px"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(W),he=>(n(),C(Re,{key:he.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",Xs,[_("div",Zs,[_("span",Qs,o(e(X)(he.title)),1),_("small",eo,o(ve(he)),1)]),t(e(Te),{size:"small",type:"primary",secondary:e(q),onClick:Ke=>p(he)},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("add")),1)]),_:2},1032,["secondary","onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t($e,{show:e(ae),"onUpdate:show":y[25]||(y[25]=he=>Ve(ae)?ae.value=he:null),loading:e(H),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(M)?e(j)?e(a)("editSubMenuItem"):e(a)("editMenuItem"):e(j)?e(W).length?e(a)("createSubMenuItem"):e(a)("addSubMenuItem"):e(W).length?e(a)("createMenuItem"):e(a)("addMenuItem"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:V,onNegativeClick:y[26]||(y[26]=he=>ae.value=!1)},{default:l(()=>[t(Fe,{ref_key:"formRef",ref:Y,class:"mt-5",model:e(m),rules:e($),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{label:e(a)("title"),path:"title"},{default:l(()=>[t(ce,{modelValue:e(m).title,"onUpdate:modelValue":y[9]||(y[9]=he=>e(m).title=he),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Ee,{label:e(a)("description"),path:"description"},{default:l(()=>[t(ce,{modelValue:e(m).description,"onUpdate:modelValue":y[10]||(y[10]=he=>e(m).description=he),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:5,label:e(a)("position"),path:"position"},{default:l(()=>[t(ze,{value:e(m).position,"onUpdate:value":y[11]||(y[11]=he=>e(m).position=he),placeholder:e(a)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),t(De,{span:10,label:e(a)("publication"),path:"isActive"},{default:l(()=>[t(et,{value:e(m).isActive,"onUpdate:value":y[12]||(y[12]=he=>e(m).isActive=he),name:"isActive",class:"w-full"},{default:l(()=>[t(Ne,{value:!1,label:e(a)("unpublished"),class:"w-[50%]"},null,8,["label"]),t(Ne,{value:!0,label:e(a)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),t(De,{span:9,label:e(a)("visibility"),path:"isVisible"},{default:l(()=>[t(et,{value:e(m).isVisible,"onUpdate:value":y[13]||(y[13]=he=>e(m).isVisible=he),name:"isVisible",class:"w-full"},{default:l(()=>[t(Ne,{value:!1,label:e(a)("hidden"),class:"w-[50%]"},null,8,["label"]),t(Ne,{value:!0,label:e(a)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(de,{class:"!my-2"}),t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:10,label:e(a)("icon"),path:"icon"},{default:l(()=>[t(Pe,{modelValue:e(m).icon,"onUpdate:modelValue":y[14]||(y[14]=he=>e(m).icon=he),placeholder:e(a)("icon"),"icons-list-placeholder":e(a)("enterIconNameInSearchBar"),"search-placeholder":e(a)("search"),"empty-text":e(a)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),t(De,{span:4,label:e(a)("color"),path:"color"},{default:l(()=>[_("div",to,[e(m).color?(n(),T(_e,{key:0},[t(e(Te),{text:"",type:"error",style:{"font-size":"21px"},onClick:y[15]||(y[15]=he=>e(m).color="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(B,{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(de,{vertical:""})],64)):be("",!0),t(e(el),{value:e(m).color,"onUpdate:value":y[16]||(y[16]=he=>e(m).color=he),class:"cursor-pointer",theme:e(q)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","theme"])])]),_:1},8,["label"]),t(De,{span:10,label:e(a)("group"),path:"menuItemGroupId"},{default:l(()=>[t(Ge,{value:e(m).menuItemGroupId,"onUpdate:value":y[17]||(y[17]=he=>e(m).menuItemGroupId=he),options:e(re),placeholder:e(a)("group"),"render-label":g,"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(De,{span:24,label:e(a)("targetType"),path:"targetType"},{default:l(()=>[t(et,{value:e(m).targetType,"onUpdate:value":y[18]||(y[18]=he=>e(m).targetType=he),class:"w-full",size:"small"},{default:l(()=>[t(Ne,{value:e(ut).PAGE_LINK,class:"w-[33.33%]"},{default:l(()=>[D(o(e(a)("pageLink")),1)]),_:1},8,["value"]),t(Ne,{value:e(ut).CONTENT_LINK,class:"w-[33.33%]"},{default:l(()=>[D(o(e(a)("contentLink")),1)]),_:1},8,["value"]),t(Ne,{value:e(ut).EXTERNAL_LINK,class:"w-[33.33%]"},{default:l(()=>[D(o(e(a)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(K,{appear:"",name:"slide-fade"},{default:l(()=>[e(m).targetType===e(ut).PAGE_LINK?(n(),T("section",lo,[t(xt,{"x-gap":"12",span:24},{default:l(()=>[t(De,{span:12,label:e(a)("page"),path:"pageId"},{default:l(()=>[t(Ge,{value:e(m).pageId,"onUpdate:value":y[19]||(y[19]=he=>e(m).pageId=he),options:e(U)||[],placeholder:e(a)("selectPage"),"render-label":x,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(De,{span:12,label:e(a)("section"),path:"sectionId"},{default:l(()=>{var he;return[t(Ge,{value:e(m).sectionId,"onUpdate:value":y[20]||(y[20]=Ke=>e(m).sectionId=Ke),options:((he=(e(U)||[]).find(Ke=>Ke.id===e(m).pageId))==null?void 0:he.sections)||[],placeholder:e(a)("selectSection"),"render-label":x,disabled:!e(m).pageId,"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled"])]}),_:1},8,["label"])]),_:1}),t(Ee,{label:e(a)("path"),path:"path"},{default:l(()=>[t(e(Xe),{value:e(m).path,"onUpdate:value":y[21]||(y[21]=he=>e(m).path=he),placeholder:e(a)("path"),"allow-input":k,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):e(m).targetType===e(ut).CONTENT_LINK?(n(),T("section",ao,[t(Ns,{"content-type":e(m).contentType,"onUpdate:contentType":y[22]||(y[22]=he=>e(m).contentType=he),"content-id":e(m).contentId,"onUpdate:contentId":y[23]||(y[23]=he=>e(m).contentId=he),onUpdate:oe},null,8,["content-type","content-id"])])):e(m).targetType===e(ut).EXTERNAL_LINK?(n(),T("section",no,[t(Ee,{label:e(a)("url"),path:"url"},{default:l(()=>[t(e(Xe),{value:e(m).url,"onUpdate:value":y[24]||(y[24]=he=>e(m).url=he),placeholder:e(a)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):be("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),oo={class:"flex items-center justify-between"},io={class:"flex flex-col"},ro={class:"text-sm font-bold"},uo=Be({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(pe){const{t:a}=He(),{request:d}=Ze(),{pickByTheme:f,tr:X,displayFormErrors:te,formatKey:b}=Je(),q=_t(pe,"show"),{menuLocations:U}=je(We()),{loadMenuLocations:re}=We(),{isLightTheme:P}=je(yt()),G=i(!1),N=async()=>{G.value=!0,await re(),G.value=!1};N();const z=ct(),v=nt(),O=st(),S=i(!1),R=i(!1),W=i(null),c=i(null),ne=i({name:"",description:""}),F={name:[{required:!0,message:a("fillRequired")}]},L=E=>{W.value=we.cloneDeep(E),ne.value=we.cloneDeep(E||{name:"",description:""}),R.value=!0},le=async()=>{var E;return(E=c.value)==null||E.validate(async I=>{var h,j,H,ae,r,M;if(!I){O.start(),S.value=!0;const Y={name:ne.value.name,description:ne.value.description},m=await d({method:W.value?"put":"post",url:W.value?`/menu-locations/${W.value.id}`:"/menu-locations",data:Y});if(m.failure&&m.error)switch((H=(j=(h=m.error)==null?void 0:h.response)==null?void 0:j.data)==null?void 0:H.errorCode){case Qe.FORM_INVALID_DATA:te((M=(r=(ae=m.error)==null?void 0:ae.response)==null?void 0:r.data)==null?void 0:M.data);break;default:v.error(a("anErrorOccurred"))}else v.success(a("success")),N(),R.value=!1;S.value=!1,O.finish()}}),!1},J=async E=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenuLocation"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menu-locations/${E.id}`})).success?(v.success(a("success")),N()):v.error(a("anErrorOccurred"))}})};return(E,I)=>{const h=ye,j=fe,H=Te,ae=it,r=xl,M=lt,Y=$t,m=wt,$=Yt,Z=rt,u=Xe,p=pt,V=bt,w=ft;return n(),T(_e,null,[t(Z,{show:q.value,"onUpdate:show":I[2]||(I[2]=x=>q.value=x),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(a)("menuLocations")},{"header-extra":l(()=>[t(ae,{align:"center"},{default:l(()=>[t(H,{size:"small",type:"primary",disabled:e(G),onClick:I[0]||(I[0]=x=>L(null))},{default:l(()=>[t(j,{class:"mr-1"},{default:l(()=>[t(h,{icon:"carbon:add-alt"})]),_:1}),D(" "+o(e(a)("add")),1)]),_:1},8,["disabled"]),t(H,{size:"small",type:"error",disabled:e(G),onClick:I[1]||(I[1]=x=>q.value=!1)},{default:l(()=>[t(j,{class:"mr-1"},{default:l(()=>[t(h,{icon:"carbon:close"})]),_:1}),D(" "+o(e(a)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t($,{show:e(G)},{default:l(()=>[e(U).length?(n(),C(Y,{key:0,style:{"max-height":"400px"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(U),x=>(n(),C(M,{key:x.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>[_("div",oo,[_("div",io,[_("span",ro,o(x.name),1),t(r,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:l(()=>[D(o(e(X)(x.description)),1)]),_:2},1024)]),t(ae,null,{default:l(()=>[t(H,{size:"small",type:"warning",secondary:e(P),onClick:g=>L(x)},{default:l(()=>[t(j,null,{default:l(()=>[t(h,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(H,{size:"small",type:"error",secondary:e(P),onClick:g=>J(x)},{default:l(()=>[t(j,null,{default:l(()=>[t(h,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(n(),C(M,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(f)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(m,{description:e(a)("noMenuLocationAdded")},{icon:l(()=>[t(j,null,{default:l(()=>[t(h,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),t(Z,{show:e(R),"onUpdate:show":I[5]||(I[5]=x=>Ve(R)?R.value=x:null),loading:e(S),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(W)?e(a)("editMenuLocation"):e(a)("addMenuLocation"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:le,onNegativeClick:I[6]||(I[6]=x=>R.value=!1)},{default:l(()=>[t(w,{ref_key:"formRef",ref:c,model:e(ne),rules:F,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(p,{label:e(a)("key"),path:"name"},{default:l(()=>[t(u,{value:e(ne).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":I[3]||(I[3]=x=>e(ne).name=e(b)(x))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a)("description"),path:"description"},{default:l(()=>[t(V,{modelValue:e(ne).description,"onUpdate:modelValue":I[4]||(I[4]=x=>e(ne).description=x),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),co={key:2},po={class:"flex items-center"},fo={class:"flex flex-col"},mo={key:0,class:"text-xs font-normal"},vo={class:"mt-4"},_o=Be({__name:"index",setup(pe){const{t:a}=He(),{request:d}=Ze(),{tr:f,pickByTheme:X,displayFormErrors:te,isInDevMode:b,formatKey:q}=Je(),{isLightTheme:U}=je(yt()),{menuLocations:re}=je(We()),{loadMenuLocations:P}=We(),G=st(),N=nt(),z=ct(),v=i(!1),O=i(!1),S=i([]),R=async(Y=!1)=>{G.start(),v.value=!0;const m=await d({url:"/menus"});m.success&&m.result&&(S.value=m.result.data),Y&&await P(),v.value=!1,G.finish()};R(!0);const W=i(12),c=i(1),ne=Y=>{W.value=Y},F={name:"",title:"",description:"",menuLocationId:void 0},L=i(!1),le=i(!1),J=i(!1),E=i(null),I=i(F),h={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},j=i(null),H=Y=>{j.value=we.cloneDeep(Y),I.value=we.cloneDeep(Y||F),L.value=!0},ae=async()=>{var Y;return(Y=E.value)==null||Y.validate(async m=>{var $,Z,u,p,V,w;if(!m){G.start(),O.value=!0;const x={name:I.value.name,title:I.value.title,description:I.value.description,menuLocationId:I.value.menuLocationId},g=await d({method:j.value?"put":"post",url:j.value?`/menus/${j.value.id}`:"/menus",data:x});if(g.failure&&g.error)switch((u=(Z=($=g.error)==null?void 0:$.response)==null?void 0:Z.data)==null?void 0:u.errorCode){case Qe.FORM_INVALID_DATA:te((w=(V=(p=g.error)==null?void 0:p.response)==null?void 0:V.data)==null?void 0:w.data);break;default:N.error(a("anErrorOccurred"))}else N.success(a("success")),R(),L.value=!1;O.value=!1,G.finish()}}),!1},r=async Y=>{z.warning({title:a("confirm"),content:a("confirmDeleteMenu"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/menus/${Y.id}`})).success?(N.success(a("success")),R()):N.error(a("anErrorOccurred"))}})},M=ll("menus-management",()=>({itemsMenu:i(null)}))();return kt(()=>I.value.title,Y=>{j.value||I.value.name.length<=21&&(I.value.name=Ya(f(Y),{trim:!0,lower:!0,strict:!0}))}),(Y,m)=>{const $=ye,Z=fe,u=Te,p=it,V=It,w=Tt,x=lt,g=sl,k=wt,ve=Pt,oe=bt,ee=pt,y=Xe,B=Ft,Ie=Vt,Q=ht,Ce=ft,ge=rt;return n(),T(_e,null,[e(M).itemsMenu?be("",!0):(n(),C(V,{key:0,to:"#alt-action"},{default:l(()=>[t(p,{align:"center"},{default:l(()=>[e(b)?(n(),C(u,{key:0,type:"success",onClick:m[0]||(m[0]=de=>le.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t($,{icon:"carbon:template"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("locations")),1)]),_:1})):be("",!0),t(u,{type:"warning",onClick:m[1]||(m[1]=de=>J.value=!0)},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t($,{icon:"carbon:tag-group"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("groups")),1)]),_:1}),e(S)&&e(S).length?(n(),C(u,{key:1,type:"primary",onClick:m[2]||(m[2]=de=>H(null))},{icon:l(()=>[t(Z,{size:"18"},{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addMenu")),1)]),_:1})):be("",!0)]),_:1})]),_:1})),e(M).itemsMenu?(n(),C(so,{key:1,modelValue:e(M).itemsMenu,"onUpdate:modelValue":m[3]||(m[3]=de=>e(M).itemsMenu=de)},null,8,["modelValue"])):(n(),T("section",co,[t(ve,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(S)&&e(S).length?(n(),T(_e,{key:0},[(n(!0),T(_e,null,Oe(e(S).slice((e(c)-1)*e(W),e(c)*e(W)),de=>(n(),C(x,{key:de.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>{var Re;return[_("div",po,[t(p,null,{default:l(()=>[t(u,{size:"small",type:"primary",secondary:e(U),onClick:ot(xe=>H(de),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t($,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(u,{size:"small",type:"error",secondary:e(U),onClick:ot(xe=>r(de),["stop"])},{default:l(()=>[t(Z,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(w,{vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("div",fo,[_("span",{class:Ye(`${de.location?"text-sm":"text-base"} font-bold`)},o(e(f)(de.title)),3),de.location?(n(),T("small",mo,o((Re=de.location)==null?void 0:Re.name),1)):be("",!0)])])]}),"header-extra":l(()=>[t(u,{size:"small",type:"primary",secondary:e(U),onClick:ot(Re=>e(M).itemsMenu=de,["stop"])},{icon:l(()=>[t(Z,null,{default:l(()=>[t($,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(g,{page:e(c),"onUpdate:page":m[4]||(m[4]=de=>Ve(c)?c.value=de:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(W),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(S).length/e(W)),"onUpdate:pageSize":ne},{prefix:l(()=>[D(o(`${e(S).length} ${e(a)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(x,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(k,{description:e(a)("noMenuAvailable")},{icon:l(()=>[t(Z,null,{default:l(()=>[t($,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",vo,[t(u,{size:"small",onClick:m[5]||(m[5]=de=>H(null))},{icon:l(()=>[t(Z,null,{default:l(()=>[t($,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(ge,{show:e(L),"onUpdate:show":m[10]||(m[10]=de=>Ve(L)?L.value=de:null),loading:e(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(j)?e(a)("editMenu"):e(a)("addMenu"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:ae,onNegativeClick:m[11]||(m[11]=de=>L.value=!1)},{default:l(()=>[t(Ce,{ref_key:"formRef",ref:E,model:e(I),rules:h,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ee,{label:e(a)("title"),path:"title"},{default:l(()=>[t(oe,{modelValue:e(I).title,"onUpdate:modelValue":m[6]||(m[6]=de=>e(I).title=de),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ee,{label:e(a)("description"),path:"description"},{default:l(()=>[t(oe,{modelValue:e(I).description,"onUpdate:modelValue":m[7]||(m[7]=de=>e(I).description=de),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Q,{"x-gap":"12",span:24},{default:l(()=>[t(B,{span:12,label:e(a)("key"),path:"name"},{default:l(()=>[t(y,{value:e(I).name,placeholder:e(a)("key"),class:"w-full","onUpdate:value":m[8]||(m[8]=de=>e(I).name=e(q)(de))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(B,{span:12,label:e(a)("location"),path:"menuLocationId"},{default:l(()=>[t(Ie,{value:e(I).menuLocationId,"onUpdate:value":m[9]||(m[9]=de=>e(I).menuLocationId=de),options:e(re),placeholder:e(a)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(uo,{show:e(le),"onUpdate:show":m[12]||(m[12]=de=>Ve(le)?le.value=de:null)},null,8,["show"]),t(Ps,{show:e(J),"onUpdate:show":m[13]||(m[13]=de=>Ve(J)?J.value=de:null)},null,8,["show"])]))],64)}}}),yo="/creopse/assets/video-thumbnail-86f60cc7.svg";var Bt=(pe=>(pe.VERTICAL="vertical",pe.HORIZONTAL="horizontal",pe))(Bt||{}),Ct=(pe=>(pe.SELF_HOSTED="self-hosted",pe.YOUTUBE="youtube",pe))(Ct||{});const go=()=>{const{t:pe}=He(),a=[{label:pe("horizontal"),value:Bt.HORIZONTAL,tagType:"info"},{label:pe("vertical"),value:Bt.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:X=>{var te;return((te=a.find(b=>b.value===X))==null?void 0:te.tagType)||"default"},getVideoDisplayTypeLabel:X=>{var te;return(te=a.find(b=>b.value===X))==null?void 0:te.label},videoDisplayTypes:a}},bo=ll("video-setting",{state:()=>({settings:[]}),getters:{getSetting:pe=>a=>pe.settings.find(d=>d.key===a),getSettingValue:pe=>(a,d="string")=>{const f=pe.settings.find(te=>te.key===a);let X="";switch(d){case"number":X=f&&parseInt(f.value)&&!isNaN(parseInt(f.value))?parseInt(f.value):0;break;case"boolean":X=f&&!isNaN(parseInt(f.value))&&parseInt(f.value)>0;break;case"object":X=f&&f.value?JSON.parse(f.value):{};break;case"array":X=f&&f.value?JSON.parse(f.value):[];break;default:X=f&&f.value?f.value:"";break}return X}},actions:{async initDefaultSettings(){await this.loadSettings();const pe={youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"0",youtubeLastChannelVideosUpdate:""},{request:a}=Ze();await a({url:"/video-settings",method:"put",data:pe}),await this.loadSettings()},async loadSettings(){const{request:pe}=Ze(),a=await pe({url:"/video-settings"});a.success&&a.result?this.settings=a.result.data:this.settings=[]}}}),ho={key:1,class:"flex items-center gap-3"},ko={key:0,class:"w-full flex items-center justify-between mt-4"},wo={class:"flex items-center gap-3"},xo={key:1,class:"mt-4"},Co={key:0},Io={class:"flex items-center justify-center h-full"},$o=["src"],Vo={class:"text-center text-dimgray text-sm"},Uo={key:1,class:"flex items-center justify-center"},To={class:"mt-5"},zo={class:"w-full flex flex-gap-8 items-center justify-start"},Mo=["src"],So={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Ao=["src"],Eo=Be({__name:"index",setup(pe){const{t:a,locale:d}=He(),{tr:f,fileUrl:X,pickByTheme:te,displayFormErrors:b}=Je(),{videoDisplayTypes:q}=go(),{request:U}=Ze(),{isLightTheme:re}=je(yt()),P=st(),G=nt(),N=ct(),z=vt("appConfig"),v=i(""),O=i(null),S=i(!1),R=i([]),W=ll("videos-management-store",()=>({currentTab:i("all")}))(),c=()=>{I()},ne=i(0),F=i(12),L=i(1),le=Le(()=>`/video-items?pageSize=${F.value}&query=${v.value}&source=${W.currentTab}`),J=xe=>{I(`${le.value}&page=${xe}`)},E=xe=>{F.value=xe,I()},I=async(xe=null,ie=!1)=>{var A,Ue,K,se,$e;S.value=!0,P.start();const ke=await U({url:xe??le.value});ke.success&&ke.result&&(R.value=((A=ke.result.data)==null?void 0:A.videoItems)||[],ne.value=((K=(Ue=ke.result.data)==null?void 0:Ue.meta)==null?void 0:K.total)||0,L.value=(($e=(se=ke.result.data)==null?void 0:se.meta)==null?void 0:$e.currentPage)||1),P.finish(),S.value=!1};I(null,!0);const h=i(!1),j=i(!1),H=i(null),ae=i(null),r=i({title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""}),M=Le(()=>({title:[{required:r.value.source==Ct.SELF_HOSTED,message:a("fillRequired")}],path:[{required:!0,message:a("fillRequired")}]})),Y=xe=>{H.value=we.cloneDeep(xe),xe?r.value=we.cloneDeep(xe):r.value={title:"",description:"",visible:!0,source:Ct.SELF_HOSTED,displayType:Bt.HORIZONTAL,thumbnail:"",path:""},j.value=!0},m=async xe=>{N.warning({title:a("confirm"),content:a("confirmDeleteVideo"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await U({method:"delete",url:`/video-items/force/${xe.id}`})).success?(G.success(a("success")),I()):G.error(a("anErrorOccurred"))}})},$=async()=>{var xe;return(xe=ae.value)==null||xe.validate(async ie=>{var ke,A,Ue,K,se,$e;if(!ie)if(H.value){P.start(),h.value=!0;const ce={title:r.value.title,description:r.value.description,visible:r.value.visible,source:r.value.source,displayType:r.value.displayType,thumbnail:r.value.thumbnail,path:r.value.path},Ee=await U({method:"put",url:`/video-items/${H.value.id}`,data:ce});Ee.success&&Ee.result.data&&(G.success(a("success")),I(`${le.value}&page=${L.value}`)),h.value=!1,P.finish(),j.value=!1}else{P.start(),h.value=!0;const ce={title:r.value.title,description:r.value.description,visible:r.value.visible,source:r.value.source,displayType:r.value.displayType,thumbnail:r.value.thumbnail,path:r.value.path},Ee=await U({method:"post",url:"/video-items",data:ce});if(Ee.failure&&Ee.error)switch((Ue=(A=(ke=Ee.error)==null?void 0:ke.response)==null?void 0:A.data)==null?void 0:Ue.errorCode){case Qe.FORM_INVALID_DATA:b(($e=(se=(K=Ee.error)==null?void 0:K.response)==null?void 0:se.data)==null?void 0:$e.data);break;case Qe.REQUEST_PARAMS_MISSING:G.error(a("pleaseProvideApiKeyAndValidVideoUrl"));break;case Qe.REQUEST_DATA_RETRIEVAL_FAILED:G.error(a("videoDataCantBeRetrieve"));break;case Qe.REQUEST_DATA_ALREADY_EXISTS:G.error(a("videoAlreadyExists"));break;default:G.error(a("anErrorOccurred"))}else G.success(a("success")),I(`${le.value}&page=${L.value}`),j.value=!1;h.value=!1,P.finish()}}),!1},Z=i(!1),u=i(!1),p=i(""),V=i(""),w=i("classic"),x=i(!1),g=bo(),k=i({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),ve=i(k.value),oe=Le(()=>we.isEqual(k.value,ve.value)),ee=async()=>{h.value=!0;const xe=await U({url:"/video-settings",method:"put",data:k.value});xe.success&&xe.result?G.success(a("success")):G.error(a("unableToUpdateSettings")),await y()},y=async()=>{var xe;P.start(),h.value=!0,await g.loadSettings(),(xe=g.settings)==null||xe.forEach(ie=>{k.value[ie.key]!=null&&(k.value[ie.key]=ie.value)}),ve.value=we.cloneDeep(k.value),h.value=!1,P.finish()};y();const B=async()=>{P.start(),h.value=!0,(await U({url:"/video-items/youtube/channel-videos",method:"put"})).success?(G.success(a("success")),await y()):G.error(a("unableToUpdateChannelVideos")),h.value=!1,P.finish()},Ie=i(!1),Q=i(dt()),Ce=i({}),ge=Le(()=>{let xe=0;for(const ie in Ce.value)Ce.value[ie]&&xe++;return xe});function de(){Ce.value={},I()}const Re=async()=>(ge.value?N.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[ge.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{h.value=!0,P.start();for(const xe in Ce.value)Ce.value[xe]&&await U({url:`/video-items/force/${xe}`,method:"delete"});P.finish(),h.value=!1,G.success(a("success")),Ce.value={},I(null,!0)}}):G.warning(a("noItemSelected")),!1);return(xe,ie)=>{var rl,ul;const ke=ye,A=fe,Ue=Te,K=Ht,se=It,$e=rn,ce=Xe,Ee=wl,ze=Pa,De=it,Ne=lt,et=Ot,xt=un,Pe=ht,Ge=xl,Fe=Nt,he=Pt,Ke=sl,Ut=Yt,Rt=wt,Mt=pt,St=Ft,Me=Vt,gt=bt,jt=tl,pl=ft,ol=rt,il=Kt;return n(),T(_e,null,[t(se,{to:"#alt-action"},{default:l(()=>[e(W).currentTab=="settings"?(n(),C(Ue,{key:0,loading:e(h),disabled:e(oe),type:"primary",onClick:ee},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("saveSettings")),1)]),_:1},8,["loading","disabled"])):(n(),T("div",ho,[t(K,{checked:e(Ie),"onUpdate:checked":[ie[0]||(ie[0]=s=>Ve(Ie)?Ie.value=s:null),ie[1]||(ie[1]=s=>{for(const Wt of e(R))Wt.id&&(e(Ce)[Wt.id]=s);Q.value=("uuidv4"in xe?xe.uuidv4:e(dt))()})]},{default:l(()=>[D(o(e(a)("selectAll")),1)]),_:1},8,["checked"]),t(Ue,{type:"primary",onClick:ie[2]||(ie[2]=s=>Y(null))},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:video-add"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addVideo")),1)]),_:1})]))]),_:1}),t(ze,{value:e(W).currentTab,"onUpdate:value":[ie[6]||(ie[6]=s=>e(W).currentTab=s),c],type:"card",size:"medium"},ja({default:l(()=>[t($e,{name:"all"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ke,{icon:"carbon:collapse-all"})]),_:1}),D(" "+o(e(a)("all_")),1)]),_:1}),t($e,{name:e(Ct).SELF_HOSTED},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ke,{icon:"carbon:document-video"})]),_:1}),D(" "+o(e(a)("selfHosted")),1)]),_:1},8,["name"]),t($e,{name:e(Ct).YOUTUBE},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ke,{icon:"carbon:logo-youtube"})]),_:1}),D(" "+o(e(a)("youtube")),1)]),_:1},8,["name"]),t($e,{name:"settings"},{default:l(()=>[t(A,{size:"18",class:"mr-1"},{default:l(()=>[t(ke,{icon:"carbon:settings-adjust"})]),_:1}),D(" "+o(e(a)("settings")),1)]),_:1})]),_:2},[e(W).currentTab!="settings"?{name:"suffix",fn:l(()=>[t(Ee,{class:"!w-[250px]"},{default:l(()=>[t(ce,{ref_key:"searchInputRef",ref:O,value:e(v),"onUpdate:value":[ie[3]||(ie[3]=s=>Ve(v)?v.value=s:null),ie[4]||(ie[4]=s=>{s||I()})],clearable:!0,placeholder:e(a)("searchVideo")},null,8,["value","placeholder"]),t(Ue,{type:"primary",onClick:ie[5]||(ie[5]=s=>I())},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["value"]),e(ge)>0?(n(),T("section",ko,[_("span",null,o(e(a)("nbItemsSelected",[e(ge)])),1),_("section",wo,[t(Ue,{type:"error",size:"small",onClick:Re},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("delete")),1)]),_:1}),t(Ue,{type:"warning",size:"small",onClick:de},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"mdi:close"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):be("",!0),e(W).currentTab=="settings"?(n(),T("section",xo,[t(Ne,{hoverable:"",embedded:""},{header:l(()=>[D(o(e(a)("youtube")),1)]),default:l(()=>[t(Pe,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:l(()=>[t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("apiKey")),1),t(ce,{value:e(k).youtubeApiKey,"onUpdate:value":ie[7]||(ie[7]=s=>e(k).youtubeApiKey=s),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full py-1.5",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("autoUpdateChannelVideos")),1),t(xt,{value:e(k).youtubeChannelVideosAutoUpdate,"onUpdate:value":ie[8]||(ie[8]=s=>e(k).youtubeChannelVideosAutoUpdate=s),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:l(()=>ie[28]||(ie[28]=[_("div",{class:"w-6"},null,-1)])),unchecked:l(()=>ie[29]||(ie[29]=[_("div",{class:"w-6"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(k).youtubeChannelVideosAutoUpdate=="1"?(n(),T(_e,{key:0},[t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("channelId")),1),t(ce,{value:e(k).youtubeChannelId,"onUpdate:value":ie[9]||(ie[9]=s=>e(k).youtubeChannelId=s),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(et,null,{default:l(()=>[t(Ne,{class:"w-full h-full",size:"small"},{default:l(()=>[t(De,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(a)("lastUpdate")),1),_("b",null,o(e(k).youtubeLastChannelVideosUpdate?e(Lt)(e(k).youtubeLastChannelVideosUpdate,{locale:e(d),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):e(a)("never")),1),t(Ue,{strong:"",circle:"",secondary:e(re),type:"primary",title:e(a)("refresh"),disabled:e(h),onClick:B},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:restart",class:Ye({"animate-spin":e(h)})},null,8,["class"])]),_:1})]),_:1},8,["secondary","title","disabled"])]),_:1})]),_:1})]),_:1})],64)):be("",!0)]),_:1})]),_:1})])):(n(),C(Ne,{key:2,embedded:"",class:"py-10 mt-4"},{default:l(()=>[e(R).length&&!e(S)?(n(),T("section",Co,[t(Pe,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),T(_e,null,Oe(e(R),(s,Wt)=>(n(),C(et,{key:Wt},{default:l(()=>[t(he,{name:"slide-fade",appear:""},{default:l(()=>[t(Ne,{bordered:"",hoverable:""},{cover:l(()=>[_("div",Io,[_("img",{src:s.thumbnailUrl??e(yo),class:"w-full h-[200px] object-cover"},null,8,$o)])]),header:l(()=>[_("div",Vo,[t(Ge,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[s.id?(n(),C(K,{key:e(Q),checked:e(Ce)[s.id],"onUpdate:checked":Jt=>e(Ce)[s.id]=Jt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):be("",!0),D(" "+o(e(f)(s.title)),1)]),_:2},1024)])]),action:l(()=>[t(De,{justify:"space-between",align:"center"},{default:l(()=>[t(De,null,{default:l(()=>[t(Fe,{bordered:!1,type:s.visible?"success":"error"},{default:l(()=>[D(o(s.visible?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(Fe,{bordered:!1,type:s.displayType==e(Bt).HORIZONTAL?"info":"warning"},{default:l(()=>[D(o(s.displayType==e(Bt).HORIZONTAL?e(a)("horizontal"):e(a)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),t(De,null,{default:l(()=>[t(Ue,{ternary:"",circle:"",title:e(a)("play"),onClick:()=>{p.value=e(a)("video"),V.value=e(X)(s.path),w.value=s.source==e(Ct).YOUTUBE?"youtube":"classic",u.value=!0}},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:play"})]),_:1})]),_:2},1032,["title","onClick"]),s.source!=e(Ct).YOUTUBE?(n(),C(Ue,{key:0,ternary:"",circle:"",title:e(a)("edit"),onClick:Jt=>Y(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"])):be("",!0),t(Ue,{ternary:"",circle:"",title:e(a)("delete"),onClick:Jt=>m(s)},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Ke,{page:e(L),"onUpdate:page":[ie[10]||(ie[10]=s=>Ve(L)?L.value=s:null),J],class:"mt-10 justify-center","show-size-picker":"","page-size":e(F),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(ne)/e(F)),"onUpdate:pageSize":E},{prefix:l(()=>[D(o(`${e(ne)} ${e(a)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(S)?(n(),T("section",Uo,[t(Ut,{size:"medium"})])):(n(),C(Rt,{key:2,description:e(a)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})),t(ol,{show:e(j),"onUpdate:show":ie[21]||(ie[21]=s=>Ve(j)?j.value=s:null),loading:e(h),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(H)?e(a)("editVideo"):e(a)("addVideo"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:$,onNegativeClick:ie[22]||(ie[22]=s=>j.value=!1)},{default:l(()=>[_("div",To,[t(pl,{ref_key:"formRef",ref:ae,model:e(r),rules:e(M),"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Mt,{label:e(a)("source"),path:"source"},{default:l(()=>[t(K,{checked:e(r).source,"onUpdate:checked":ie[11]||(ie[11]=s=>e(r).source=s),"checked-value":e(Ct).YOUTUBE,"unchecked-value":e(Ct).SELF_HOSTED},{default:l(()=>[D(o(e(a)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),e(r).source==e(Ct).YOUTUBE?(n(),C(Pe,{key:0,"x-gap":"12",span:24},{default:l(()=>[t(St,{span:16,label:e(a)("videoShareLink"),path:"path"},{default:l(()=>[t(ce,{value:e(r).path,"onUpdate:value":ie[12]||(ie[12]=s=>e(r).path=s),placeholder:e(a)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(St,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Me,{value:e(r).displayType,"onUpdate:value":ie[13]||(ie[13]=s=>e(r).displayType=s),placeholder:e(a)("displayType"),options:e(q),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})):(n(),T(_e,{key:1},[t(Mt,{label:e(a)("title"),path:"title"},{default:l(()=>[t(gt,{modelValue:e(r).title,"onUpdate:modelValue":ie[14]||(ie[14]=s=>e(r).title=s),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Mt,{label:e(a)("description"),path:"description"},{default:l(()=>[t(gt,{modelValue:e(r).description,"onUpdate:modelValue":ie[15]||(ie[15]=s=>e(r).description=s),placeholder:e(a)("description"),"selector-span":5,class:"w-full",type:"textarea",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(Pe,{"x-gap":"12",span:24},{default:l(()=>[t(St,{span:16,label:e(a)("content"),path:"path"},{default:l(()=>[t(Ee,null,{default:l(()=>[t(Ue,{type:"primary",onClick:ie[16]||(ie[16]=()=>{Z.value=!0})},{default:l(()=>[D(o(e(a)("select")),1)]),_:1}),t(ce,{value:e(r).path?e(Xt)(e(r).path):"",placeholder:e(a)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),e(r).path?(n(),T(_e,{key:0},[t(Ue,{type:"primary",ghost:"",onClick:ie[17]||(ie[17]=()=>{p.value=e(a)("video"),V.value=e(X)(e(r).path),w.value="classic",u.value=!0})},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:play"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("play")),1)]),_:1}),t(Ue,{type:"primary",ghost:"",onClick:ie[18]||(ie[18]=()=>{e(r).path=""})},{icon:l(()=>[t(A,null,{default:l(()=>[t(ke,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("clear")),1)]),_:1})],64)):be("",!0)]),_:1})]),_:1},8,["label"]),t(St,{span:8,label:e(a)("displayType"),path:"displayType"},{default:l(()=>[t(Me,{value:e(r).displayType,"onUpdate:value":ie[19]||(ie[19]=s=>e(r).displayType=s),placeholder:e(a)("displayType"),options:e(q),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(Mt,{label:e(a)("thumbnail"),path:"thumbnail"},{default:l(()=>[_("div",zo,[_("div",{class:"cursor-pointer w-full h-[150px]",onClick:ie[20]||(ie[20]=()=>{x.value=!0})},[e(r).thumbnail?(n(),C(jt,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:qe("border: 1px dashed "+e(te)("green","white")),src:e(X)(e(r).thumbnail||"")},null,8,["style","src"])):(n(),T("div",{key:1,class:"w-full h-full flex items-center justify-center",style:qe("border: 1px dashed "+e(te)("green","white"))},[t(A,{size:64},{default:l(()=>[t(ke,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(ol,{show:e(u),"onUpdate:show":ie[23]||(ie[23]=s=>Ve(u)?u.value=s:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:e(p)},{default:l(()=>[e(w)==="youtube"?(n(),T("iframe",{key:0,width:"100%",height:"380",src:e(V),frameborder:"0",allowfullscreen:""},null,8,Mo)):(n(),T("video",So,[_("source",{src:e(V)},null,8,Ao)]))]),_:1},8,["show","title"]),t(il,{show:e(Z),"onUpdate:show":ie[24]||(ie[24]=s=>Ve(Z)?Z.value=s:null),title:e(a)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:((rl=e(z))==null?void 0:rl.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[25]||(ie[25]=s=>{e(r).path=s,Z.value=!1})},null,8,["show","title","upload-config"]),t(il,{show:e(x),"onUpdate:show":ie[26]||(ie[26]=s=>Ve(x)?x.value=s:null),title:e(a)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:((ul=e(z))==null?void 0:ul.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ie[27]||(ie[27]=s=>{e(r).thumbnail=s,x.value=!1})},null,8,["show","title","upload-config"])],64)}}});const Do=zt(Eo,[["__scopeId","data-v-42abee62"]]),{t:Se}=Sa.global,Ua=[{key:"maxlength",defaultValue:"",placeholder:Se("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Se("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],Lo={text:Ua,textarea:Ua,number:[{key:"min",defaultValue:"",placeholder:Se("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Se("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Se("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Se("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"format",defaultValue:"",placeholder:Se("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"library",defaultValue:"all",placeholder:Se("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Se("maxTagCount")},{key:"max",defaultValue:"",placeholder:Se("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Se("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Se("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Se("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Se("inputType")}]},{t:Ae}=Sa.global,Vl=[{type:"group",label:Ae("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Ae("text"),value:"text"},{label:Ae("i18nText"),value:"i18n-text"},{label:Ae("textarea"),value:"textarea"},{label:Ae("i18nTextarea"),value:"i18n-textarea"},{label:Ae("editor"),value:"editor"},{label:Ae("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Ae("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Ae("number"),value:"number"},{label:Ae("checkbox"),value:"checkbox"}]},{type:"group",label:Ae("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Ae("singleSelect"),value:"single-select"},{label:Ae("multiSelect"),value:"multi-select"}]},{type:"group",label:Ae("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Ae("date"),value:"date"},{label:Ae("daterange"),value:"daterange"},{label:Ae("datetime"),value:"datetime"},{label:Ae("datetimerange"),value:"datetimerange"},{label:Ae("year"),value:"year"},{label:Ae("yearrange"),value:"yearrange"},{label:Ae("month"),value:"month"},{label:Ae("monthrange"),value:"monthrange"},{label:Ae("quarter"),value:"quarter"},{label:Ae("quarterrange"),value:"quarterrange"},{label:Ae("week"),value:"week"}]},{type:"group",label:Ae("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Ae("image"),value:"image"},{label:Ae("gallery"),value:"gallery"},{label:Ae("audio"),value:"audio"},{label:Ae("video"),value:"video"},{label:Ae("document"),value:"document"},{label:Ae("file"),value:"file"}]},{type:"group",label:Ae("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Ae("newsArticle"),value:"news-article"},{label:Ae("newsArticles"),value:"news-articles"},{label:Ae("newsCategory"),value:"news-category"},{label:Ae("newsCategories"),value:"news-categories"},{label:Ae("newsTag"),value:"news-tag"},{label:Ae("newsTags"),value:"news-tags"}]},{type:"group",label:Ae("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Ae("icon"),value:"icon"},{label:Ae("icons"),value:"icons"},{label:Ae("color"),value:"color"}]},{type:"group",label:Ae("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Ae("contentItem"),value:"content-model-item"},{label:Ae("contentItems"),value:"content-model-items"},{label:Ae("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Ae("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Ae("list"),value:"list"},{label:Ae("i18nList"),value:"i18n-list"},{label:Ae("albums"),value:"albums"}]}],Po={class:"flex items-center justify-between w-full"},No={class:"text-base font-semibold"},Oo={class:"text-xs text-slate-400"},Ro={class:"text-xs text-slate-400"},qo={class:"text-xs text-slate-400"},Fo={class:"text-xs text-slate-400"},jo={class:"text-xs text-slate-400"},Bo={key:0},Ko={key:1},Yo={key:2},Ho={key:3},Go={key:0,class:"w-full flex items-center"},Wo={class:"w-full flex items-center"},Jo={class:"w-full"},Xo={class:"text-sm"},Zo=Be({__name:"Fields",props:Gt({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(pe){const{t:a}=He(),{tr:d,formatKey:f,pickByTheme:X}=Je(),{isLightTheme:te}=je(yt()),{contentModels:b}=je(We()),q=pe,U=_t(pe,"modelValue"),re=I=>{for(const h of Vl){const j=h.children.find(H=>H.value===I);if(j)return j.label}return null},P=i(!1),G=i(null),N=i(null),z=i(null),v=i(),O=(I,h)=>{N.value=z.value=I,G.value=h;for(const j of Vl)j.children.find(ae=>ae.value===I)&&(v.value=j.key);P.value=!0},S=I=>{R(I).value=!R(I).value},R=I=>Le({get:()=>I.value===N.value,set:h=>{h?N.value=I.value:N.value=null}}),W=Le(()=>!N.value||N.value===z.value),c=()=>{N.value&&G.value!==null&&(U.value[G.value].type=N.value),P.value=!1},ne=I=>ue("div",{class:"flex items-center"},[ue(fe,{size:21,class:"text-gray-500"},{default:()=>ue(ye,{icon:I.icon})}),ue("span",{class:"font-normal ml-2 "},{default:()=>I.label}),ue("span",{class:"text-gray-500 ml-1"},{default:()=>`(${I.children.length})`})]),F=vt("renderSelectLabel"),L=vt("removeCollectionField"),le=vt("removeSingleton"),J=vt("onCreateItemOption"),E=vt("expandedNames",()=>Le(()=>i([]).value));return(I,h)=>{const j=Nt,H=it,ae=Te,r=Xe,M=Ot,Y=bt,m=wl,$=ht,Z=Tt,u=Ht,p=Vt,V=zl,w=Pt,x=Tl,g=al,k=nl,ve=lt,oe=Na,ee=Oa,y=dn,B=Pa,Ie=rt;return n(),T(_e,null,[(n(!0),T(_e,null,Oe(U.value,(Q,Ce)=>(n(),C(ve,{key:`field-${Ce}`,size:"small",class:"my-2"},{default:l(()=>[t(k,{"expanded-names":e(E)(q.type=="collection"?`c-${q.parentItemIndex}-f-${Ce}`:`s-${Ce}`).value,"onUpdate:expandedNames":ge=>e(E)(q.type=="collection"?`c-${q.parentItemIndex}-f-${Ce}`:`s-${Ce}`).value=ge,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{default:l(()=>[t(g,{name:"1"},{header:l(()=>[_("div",Po,[t(H,null,{default:l(()=>[t(j,{size:"small",type:"info"},{default:l(()=>[D(o(Ce+1),1)]),_:2},1024),_("span",No,o(e(d)(Q.label)),1)]),_:2},1024),t(ae,{size:"small",type:"error",secondary:e(te),onClick:()=>{q.type==="collection"?e(L)&&e(L)(q.collectionKey,Ce):e(le)&&e(le)(Ce)}},{default:l(()=>[t(e(fe),{class:"mr-1"},{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1}),D(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t($,{span:24,"x-gap":"6"},{default:l(()=>[t(M,{span:6},{default:l(()=>[_("span",Oo,o(e(a)("fieldKey")),1),t(r,{value:Q.key,placeholder:e(a)("fieldKey"),class:"w-full","onUpdate:value":ge=>Q.key=e(f)(ge)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(M,{span:10},{default:l(()=>[_("span",Ro,o(e(a)("title")),1),t(Y,{modelValue:Q.label,"onUpdate:modelValue":ge=>Q.label=ge,placeholder:e(a)("title"),"selector-span":6,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(M,{span:8},{default:l(()=>[_("span",qo,o(e(a)("type")),1),t(m,null,{default:l(()=>[t(r,{value:re(Q.type),placeholder:e(a)("type"),class:"w-full field-type-input",readonly:"",onClick:ge=>O(Q.type,Ce)},null,8,["value","placeholder","onClick"]),t(ae,{onClick:ge=>O(Q.type,Ce)},{icon:l(()=>[t(e(ye),{icon:"carbon:chevron-down"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Z,{class:"!mt-4 !mb-2"}),t($,{span:24,"x-gap":"6"},{default:l(()=>[t(M,{span:10,class:"flex items-center"},{default:l(()=>[t(u,{checked:Q.required,"onUpdate:checked":ge=>Q.required=ge,size:"medium"},{default:l(()=>[D(o(e(a)("requiredField")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:2},1024),t(M,{span:14},{default:l(()=>[["content-model-item","content-model-items"].includes(Q.type)?(n(),T(_e,{key:0},[_("span",Fo,o(e(a)("contentModel")),1),t(p,{value:Q.defaultValue,"onUpdate:value":ge=>Q.defaultValue=ge,options:e(b),placeholder:e(a)("contentModel"),"render-label":e(F),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(n(),T(_e,{key:1},[_("span",jo,o(e(a)("defaultValue")),1),Q.type==="color"?(n(),T("div",Bo,[t(e(el),{value:Q.defaultValue,"onUpdate:value":ge=>Q.defaultValue=ge,class:"cursor-pointer",theme:e(te)?"light":"dark","z-index":5e3,format:"hex",size:"25"},null,8,["value","onUpdate:value","theme"])])):Q.type==="i18n-text"?(n(),T("div",Ko,[t(Y,{modelValue:Q.defaultValue,"onUpdate:modelValue":ge=>Q.defaultValue=ge,placeholder:e(a)("defaultValue"),"selector-span":5,type:"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):Q.type==="i18n-textarea"?(n(),T("div",Yo,[t(Y,{modelValue:Q.defaultValue,"onUpdate:modelValue":ge=>Q.defaultValue=ge,placeholder:e(a)("defaultValue"),"selector-span":5,type:"textarea",class:"w-full",rows:2,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):Q.type==="i18n-editor"?(n(),T("div",Ho,[t(Y,{modelValue:Q.defaultValue,"onUpdate:modelValue":ge=>Q.defaultValue=ge,placeholder:e(a)("defaultValue"),"selector-span":5,type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):(n(),C(r,{key:4,value:Q.defaultValue,"onUpdate:value":ge=>Q.defaultValue=ge,placeholder:e(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),Q.type==="multi-select"||Q.type==="single-select"?(n(),C(Z,{key:0,"title-placement":"left",class:"!my-4"},{default:l(()=>[D(o(e(a)("options")),1)]),_:1})):be("",!0),t(w,{name:"slide-fade",appear:""},{default:l(()=>[Q.type==="multi-select"||Q.type==="single-select"?(n(),T("div",Go,[t(V,{value:Q.options,"onUpdate:value":ge=>Q.options=ge,placeholder:e(a)("addOption"),"on-create":ge=>e(J)?e(J)(ge,Ce):null,"show-sort-button":"",class:"w-full"},{"create-button-default":l(()=>[D(o(e(a)("addOption")),1)]),default:l(({value:ge})=>[_("div",Wo,[t(r,{value:ge.value,placeholder:e(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":de=>ge.value=e(f)(de)},null,8,["value","placeholder","onUpdate:value"]),t(Y,{modelValue:ge.label,"onUpdate:modelValue":de=>ge.label=de,placeholder:e(a)("optionText"),"selector-span":4,class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:2},1032,["value","onUpdate:value","placeholder","on-create"])])):be("",!0)]),_:2},1024),(n(!0),T(_e,null,Oe(e(Lo),(ge,de,Re)=>(n(),T(_e,{key:Re},[Q.type===de?(n(),C(k,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"carbon:chevron-right"})]),_:1})]),default:l(()=>[t(g,{name:"1"},{header:l(()=>[t(Z,{"title-placement":"left",class:"!my-4"},{default:l(()=>[D(o(e(a)("settings")),1)]),_:1})]),default:l(()=>[t(w,{name:"slide-fade",appear:""},{default:l(()=>[_("div",Jo,[(n(!0),T(_e,null,Oe(ge,xe=>(n(),C($,{key:xe.key,span:24,"x-gap":"12",class:"mb-2"},{default:l(()=>[t(M,{span:10},{default:l(()=>[t(r,{value:xe.key,placeholder:e(a)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),t(M,{span:14},{default:l(()=>[xe.isNumber?(n(),C(x,{key:0,value:Q.settings[xe.key],"onUpdate:value":ie=>Q.settings[xe.key]=ie,"default-value":xe.defaultValue?parseInt(xe.defaultValue):void 0,placeholder:xe.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(n(),C(r,{key:1,value:Q.settings[xe.key],"onUpdate:value":ie=>Q.settings[xe.key]=ie,"default-value":xe.defaultValue,placeholder:xe.placeholder||e(a)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):be("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128)),t(Ie,{show:e(P),"onUpdate:show":h[2]||(h[2]=Q=>Ve(P)?P.value=Q:null),preset:"card",size:"medium",style:{width:"650px"},title:e(a)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[t(ae,{size:"small",type:"success",disabled:e(W),onClick:c},{default:l(()=>[t(e(ye),{icon:"carbon:checkmark",class:"mr-1"}),D(" "+o(e(a)("select")),1)]),_:1},8,["disabled"]),t(ae,{size:"small",type:"error",onClick:h[0]||(h[0]=Q=>P.value=!1)},{default:l(()=>[t(e(ye),{icon:"carbon:close",class:"mr-1"}),D(" "+o(e(a)("close")),1)]),_:1})]),_:1})]),default:l(()=>[t(B,{animated:"",type:"line",size:"medium",placement:"left",value:e(v),"onUpdate:value":h[1]||(h[1]=Q=>Ve(v)?v.value=Q:null),style:{height:"100%"}},{default:l(()=>[(n(!0),T(_e,null,Oe(e(Vl),(Q,Ce)=>(n(),C(y,{name:Q.key,tab:ne(Q),key:Ce},{default:l(()=>[t(ee,{hoverable:"",clickable:"",bordered:""},{default:l(()=>[(n(!0),T(_e,null,Oe(Q.children,ge=>(n(),C(oe,{class:Ye(R(ge).value?`${e(X)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:ge.value,onClick:de=>S(ge)},{suffix:l(()=>[t(u,{checked:R(ge).value,"onUpdate:checked":de=>R(ge).value=de,size:"medium",onClick:de=>S(ge)},null,8,["checked","onUpdate:checked","onClick"])]),default:l(()=>[_("span",Xo,o(ge.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}});const Ta=zt(Zo,[["__scopeId","data-v-e806bb38"]]),Qo={class:"text-base"},ei={key:0},ti={key:0},li={key:0},ai={class:"flex items-center justify-between w-full"},ni={class:"text-base font-semibold"},si={class:"text-xs text-slate-400"},oi={class:"text-xs text-slate-400"},ii={class:"text-xs text-slate-400"},Wa=Be({__name:"index",props:Gt({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(pe){const{t:a}=He(),{tr:d,pickByTheme:f,formatKey:X}=Je(),{isLightTheme:te}=je(yt()),{loadContentModels:b}=We();b();const q=pe,U=_t(pe,"show"),re=st(),P=nt(),G=ct(),N=i(!1),z=i(null),v=i({}),O=i({}),S={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},R=i(!1),W=i(!1),c=i({}),ne=u=>Le({get:()=>c.value[u]?["1"]:[],set:p=>{c.value[u]=p.length>0}});kt(()=>W.value,u=>{Object.entries(v.value).forEach(([p,V],w)=>{var x;p!=="index"&&(c.value[`c-${w}`]=u,(x=V==null?void 0:V.items)==null||x.forEach((g,k)=>{c.value[`c-${w}-f-${k}`]=u}))})}),kt(()=>R.value,u=>{Object.entries(v.value).forEach(([p,V],w)=>{p==="index"&&(V==null||V.forEach((x,g)=>{c.value[`s-${g}`]=u}))})});const F=Le(()=>we.isEqual(v.value,O.value)),L=()=>{v.value?v.value.index&&Array.isArray(v.value.index)?v.value.index.push(we.cloneDeep(S)):v.value.index=[we.cloneDeep(S)]:v.value={index:[we.cloneDeep(S)]}},le=u=>{v.value&&Array.isArray(v.value.index)&&v.value.index.splice(u,1)},J=()=>{const u=dt();v.value?v.value[u]={key:"",title:"",items:[]}:v.value={[u]:{key:"",title:"",items:[]}}},E=u=>{if(v.value){const{[u]:p,...V}=v.value;v.value=V}},I=u=>{v.value&&v.value[u].items.push(we.cloneDeep(S))},h=(u,p)=>{if(v.value){const V=v.value[u];V&&Array.isArray(V.items)&&V.items.splice(p,1)}},j=u=>u.title&&u.key&&u.key!=="index",H=()=>v.value&&typeof v.value=="object"?Object.keys(v.value).filter(u=>u!=="index").length:0,ae=Le(()=>v.value?Object.keys(v.value).filter(u=>u!=="index"):[]),r=u=>ae.value.indexOf(u),M=i(!1),Y=async()=>{const u=we.cloneDeep(v.value),p=we.cloneDeep(v.value);M.value=!1,N.value=!0,re.start();const V=[];if(we.forIn(u,(w,x)=>{x!=="index"&&V.push(w.key)}),we.forIn(u,(w,x)=>{if(x!=="index"){const g=we.keys(u).filter(k=>k!=="index").indexOf(x);if(w&&w.key){if(w.key==="index")return P.error(a("keyIndexIsReservedInCollections")),M.value=!0,!1;if(V.filter(ve=>ve==w.key).length>1)return P.error(a("collectionKeyIsNotUnique",[w.key])),M.value=!0,!1;if(Array.isArray(w.items))for(const[ve,oe]of w.items.entries())if(oe.key){if(w.items.filter(y=>y.key===oe.key).length>1)return P.error(a("fieldKeyOfCollectionIsNotUnique",[oe.key,w.key])),M.value=!0,!1}else return P.error(a("fieldKeyOfCollectionIsRequired",[ve+1,w.key])),M.value=!0,!1}else return P.error(a("collectionKeyIsRequired",[g+1])),M.value=!0,!1}else if(Array.isArray(w))for(const[g,k]of w.entries())if(k.key){if(w.filter(oe=>oe.key===k.key).length>1)return P.error(a("singletonKeyIsNotUnique",[k.key])),M.value=!0,!1}else return P.error(a("singletonKeyIsRequired",[g+1])),M.value=!0,!1}),M.value){N.value=!1,re.finish();return}we.forIn(p,(w,x)=>{x!=="index"&&x!==w.key&&ln(u,x,w.key)}),await q.updateDataStructure(u),N.value=!1,re.finish()},m=()=>{we.isEqual(v.value,O.value)?U.value=!1:G.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{U.value=!1}})};kt(()=>q.rawDataStructure,u=>{v.value=u?we.cloneDeep(u):{},we.forIn(u,(p,V)=>{var w;V!=="index"?(v.value[V].key=V,(w=p==null?void 0:p.items)==null||w.forEach((x,g)=>{v.value[V].items[g].settings||(v.value[V].items[g].settings={})})):p==null||p.forEach((x,g)=>{v.value[V][g].settings||(v.value[V][g].settings={})})}),O.value=we.cloneDeep(v.value)},{immediate:!0,deep:!0});const $=u=>ue("span",{},{default:()=>d(u.title)}),Z=(u,p)=>({value:`option_${p+1}${u+1}`,label:""});return At("removeCollectionField",h),At("onCreateItemOption",Z),At("renderSelectLabel",$),At("removeSingleton",le),At("addSingleton",L),At("expandCollections",W),At("expandSingletons",R),At("expandedNames",ne),(u,p)=>{const V=Ra,w=ye,x=fe,g=Te,k=it,ve=lt,oe=$t,ee=Ot,y=Nt,B=Xe,Ie=bt,Q=ht,Ce=Tt,ge=cn,de=al,Re=nl,xe=za;return n(),C(xe,{modelValue:U.value,"onUpdate:modelValue":p[7]||(p[7]=ie=>U.value=ie),"close-on-esc":!1,closable:!1,onOnSizeChange:p[8]||(p[8]=ie=>{z.value=ie})},{header:l(()=>[_("div",Qo,[t(V,{depth:"1"},{default:l(()=>[D(o(e(a)("dataStructure"))+" ",1),u.title?(n(),T("span",ei,"Â -Â "+o(u.title),1)):be("",!0)]),_:1})])]),"header-extra":l(()=>[t(k,{align:"center"},{default:l(()=>[t(g,{type:"success",title:e(a)("save"),loading:e(N),disabled:e(F),onClick:p[0]||(p[0]=ie=>Y())},{icon:l(()=>[t(x,null,{default:l(()=>[t(w,{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("save")),1)]),_:1},8,["title","loading","disabled"]),t(g,{type:"error",title:e(a)("close"),disabled:e(N),onClick:p[1]||(p[1]=ie=>m())},{icon:l(()=>[t(x,null,{default:l(()=>[t(w,{icon:"carbon:close"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var ie,ke;return[_("section",{style:qe(`min-height: ${((ie=e(z))==null?void 0:ie.windowHeight)-((ke=e(z))==null?void 0:ke.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(f)("bg-slate-200","bg-zinc-800")}`)},[t(Q,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(ee,{class:"ml-4 mt-2"},{default:l(()=>{var A,Ue;return[t(ve,{embedded:"",bordered:"",segmented:""},{header:l(()=>{var K,se;return[D(o(e(a)("singletons"))+"Â  ",1),(K=e(v).index)!=null&&K.length?(n(),T("span",ti," ("+o((se=e(v).index)==null?void 0:se.length)+") ",1)):be("",!0)]}),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(g,{size:"small",type:"primary",secondary:e(te),onClick:p[2]||(p[2]=K=>R.value=!e(R))},{default:l(()=>[t(x,null,{default:l(()=>[e(R)?(n(),C(w,{key:0,icon:"carbon:collapse-categories"})):(n(),C(w,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(g,{size:"small",type:"primary",secondary:e(te),onClick:p[3]||(p[3]=K=>L())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),D(" "+o(e(a)("addSingleton")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(oe,{style:qe(`max-height: ${((A=e(z))==null?void 0:A.windowHeight)-((Ue=e(z))==null?void 0:Ue.headerHeight)-100}px`)},{default:l(()=>[t(Ta,{modelValue:e(v).index,"onUpdate:modelValue":p[4]||(p[4]=K=>e(v).index=K),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"])]}),_:1}),t(ee,{class:"mr-4 mt-2"},{default:l(()=>{var A,Ue;return[t(ve,{embedded:"",bordered:"",segmented:""},{header:l(()=>[D(o(e(a)("collections"))+"Â  ",1),H()>0?(n(),T("span",li," ("+o(H())+") ",1)):be("",!0)]),"header-extra":l(()=>[t(k,null,{default:l(()=>[t(g,{size:"small",type:"primary",secondary:e(te),onClick:p[5]||(p[5]=K=>W.value=!e(W))},{default:l(()=>[t(x,null,{default:l(()=>[e(W)?(n(),C(w,{key:0,icon:"carbon:collapse-categories"})):(n(),C(w,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1},8,["secondary"]),t(g,{size:"small",type:"primary",secondary:e(te),onClick:p[6]||(p[6]=K=>J())},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),D(" "+o(e(a)("addCollection")),1)]),_:1},8,["secondary"])]),_:1})]),_:1}),t(oe,{style:qe(`max-height: ${((A=e(z))==null?void 0:A.windowHeight)-((Ue=e(z))==null?void 0:Ue.headerHeight)-100}px`)},{default:l(()=>[(n(!0),T(_e,null,Oe(e(v)||{},(K,se,$e)=>(n(),T(_e,{key:$e},[se!="index"?(n(),C(ve,{key:0,size:"small",class:"my-2",embedded:""},{default:l(()=>[t(Re,{"expanded-names":ne(`c-${$e}`).value,"onUpdate:expandedNames":ce=>ne(`c-${$e}`).value=ce,"display-directive":"show","default-expanded-names":["1"]},{default:l(()=>[t(de,{name:"1"},{header:l(()=>[_("div",ai,[t(k,null,{default:l(()=>[t(y,{size:"small",type:"success"},{default:l(()=>[D(o(r(se)+1),1)]),_:2},1024),_("span",ni,o(e(d)(K.title)),1)]),_:2},1024),t(g,{size:"small",type:"error",secondary:e(te),onClick:ce=>E(se)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:trash-can"})]),_:1}),D(" "+o(e(a)("delete")),1)]),_:2},1032,["secondary","onClick"])])]),default:l(()=>[t(Q,{span:24,"x-gap":"6"},{default:l(()=>[t(ee,{span:6},{default:l(()=>[_("span",si,o(e(a)("fieldKey")),1),t(B,{value:K.key,placeholder:e(a)("collectionKey"),class:"w-full",size:"small","onUpdate:value":ce=>K.key=e(X)(ce)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),t(ee,{span:11},{default:l(()=>[_("span",oi,o(e(a)("title")),1),t(Ie,{modelValue:K.title,"onUpdate:modelValue":ce=>K.title=ce,placeholder:e(a)("title"),"selector-span":6,class:"w-full",size:"small",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),t(ee,{span:7},{default:l(()=>[_("span",ii,o(e(a)("actions")),1),t(g,{block:"",size:"small",type:"primary",disabled:!j(K),secondary:e(te),class:"w-full",onClick:ce=>I(se)},{default:l(()=>[t(x,{class:"mr-1"},{default:l(()=>[t(w,{icon:"carbon:add-alt"})]),_:1}),D(" "+o(e(a)("addField")),1)]),_:2},1032,["disabled","secondary","onClick"])]),_:2},1024)]),_:2},1024),t(Ce,{class:"!my-4.75"}),j(K)?(n(),C(Ta,{key:0,modelValue:e(v)[se].items,"onUpdate:modelValue":ce=>e(v)[se].items=ce,"parent-item-index":$e,"collection-key":se,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(n(),C(ge,{key:1,bordered:"",type:"info"},{default:l(()=>[D(o(e(a)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):be("",!0)],64))),128))]),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),ri={class:"flex items-center"},ui={class:"text-base"},di={class:"mt-2"},ci={class:"mt-2 text-xs"},pi=Be({__name:"index",setup(pe){const{t:a}=He(),{request:d}=Ze(),{tr:f,pickByTheme:X,displayFormErrors:te,isInDevMode:b}=Je(),{sections:q}=je(We()),{loadSections:U}=We(),{isLightTheme:re}=je(yt()),P=st(),G=nt(),N=i(!1);U();const z=i(12),v=i(1),O=j=>{z.value=j},S={name:"",title:"",content:"",slug:""},R=i(!1),W=i(null),c=i(S),ne={title:[{required:!0,message:a("fillRequired")}]},F=i(null),L=j=>{F.value=we.cloneDeep(j),c.value=we.cloneDeep(j||S),R.value=!0},le=async()=>{var j;return(j=W.value)==null||j.validate(async H=>{var ae,r,M,Y,m,$;if(!H){P.start(),N.value=!0;const Z={title:c.value.title};F.value||(Z.name=we.startCase(we.camelCase(f(c.value.title))).replace(/\s+/g,""));const u=await d({method:F.value?"put":"post",url:F.value?`/sections/${F.value.slug}`:"/sections",data:Z});if(u.failure&&u.error)switch((M=(r=(ae=u.error)==null?void 0:ae.response)==null?void 0:r.data)==null?void 0:M.errorCode){case Qe.FORM_INVALID_DATA:te(($=(m=(Y=u.error)==null?void 0:Y.response)==null?void 0:m.data)==null?void 0:$.data);break;default:G.error(a("anErrorOccurred"))}else G.success(a("success")),U(),R.value=!1;N.value=!1,P.finish()}}),!1},J=i(null),E=i(!1),I=async j=>{var ae;N.value=!0,P.start();const H=await d({url:`/sections/${(ae=J.value)==null?void 0:ae.slug}`,method:"put",data:{dataStructure:j}});H.success&&H.result?(G.success(a("success")),U(),h(H.result.data)):G.error(a("anErrorOccurred")),N.value=!1,P.finish()},h=j=>{J.value=j,E.value=!0};return(j,H)=>{var oe,ee;const ae=ye,r=fe,M=Te,Y=it,m=Tt,$=Nt,Z=al,u=nl,p=lt,V=sl,w=wt,x=bt,g=pt,k=ft,ve=rt;return n(),T(_e,null,[e(q)&&e(q).length?(n(),T(_e,{key:0},[(n(!0),T(_e,null,Oe(e(q).slice((e(v)-1)*e(z),e(v)*e(z)),y=>(n(),C(p,{key:y.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:l(()=>[t(u,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":l(({collapsed:B})=>[t(r,null,{default:l(()=>[B?(n(),C(ae,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(ae,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>H[5]||(H[5]=[_("span",null,null,-1)])),default:l(()=>[t(Z,{name:"1"},{header:l(()=>[_("div",ri,[t(Y,null,{default:l(()=>[e(b)?(n(),C(M,{key:0,size:"small",type:"primary",secondary:e(re),onClick:ot(B=>h(y),["stop"])},{default:l(()=>[t(r,{class:"mr-1"},{default:l(()=>[t(ae,{icon:"carbon:data-1"})]),_:1}),D(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"])):be("",!0),t(M,{size:"small",type:"primary",secondary:e(re),onClick:ot(B=>L(y),["stop"])},{default:l(()=>[t(r,null,{default:l(()=>[t(ae,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024),t(m,{vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),_("span",ui,o(e(f)(y.title)),1)])]),default:l(()=>[_("div",null,o(e(a)("sectionUsedInXPages",[y.pagesCount])),1),_("section",di,[(n(!0),T(_e,null,Oe(y.pages,B=>(n(),C($,{key:B.id,size:"small",class:"mr-1",type:"success"},{default:l(()=>[D(o(e(f)(B.title)),1)]),_:2},1024))),128))]),_("div",ci,[D(o(e(a)("dataRetrievalSlug"))+": ",1),_("b",null,o(y.slug),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,{page:e(v),"onUpdate:page":H[0]||(H[0]=y=>Ve(v)?v.value=y:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(z),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(q).length/e(z)),"onUpdate:pageSize":O},{prefix:l(()=>[D(o(`${e(q).length} ${e(a)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(p,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(w,{description:e(a)("noSectionAvailable")},{icon:l(()=>[t(r,null,{default:l(()=>[t(ae,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),t(ve,{show:e(R),"onUpdate:show":H[2]||(H[2]=y=>Ve(R)?R.value=y:null),loading:e(N),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(F)?e(a)("editSection"):e(a)("addSection"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:le,onNegativeClick:H[3]||(H[3]=y=>R.value=!1)},{default:l(()=>[t(k,{ref_key:"formRef",ref:W,model:e(c),rules:ne,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(g,{label:e(a)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(x,{modelValue:e(c).title,"onUpdate:modelValue":H[1]||(H[1]=y=>e(c).title=y),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Wa,{show:e(E),"onUpdate:show":H[4]||(H[4]=y=>Ve(E)?E.value=y:null),title:e(f)((oe=e(J))==null?void 0:oe.title),"raw-data-structure":(ee=e(J))==null?void 0:ee.dataStructure,"update-data-structure":I},null,8,["show","title","raw-data-structure"])],64)}}});const fi={__name:"UploadExcel",props:{beforeUpload:{type:Function,default:null},onSuccess:{type:Function,default:null}},setup(pe){const a=pe,{t:d}=He(),f=i(!1),X=i(null),te=i({header:null,results:null});function b({header:O,results:S}){te.value={header:O,results:S},a.onSuccess&&a.onSuccess(te.value)}function q(O){if(O.stopPropagation(),O.preventDefault(),f.value)return;const S=O.dataTransfer.files;if(S.length!==1){console.log(d("supportUploadingOneFile"));return}const R=S[0];if(!v(R))return console.log(d("formatNotSupported")),!1;G(R),O.stopPropagation(),O.preventDefault()}function U(O){O.stopPropagation(),O.preventDefault(),O.dataTransfer.dropEffect="copy"}function re(){X.value.click()}function P(O){const R=O.target.files[0];R&&G(R)}function G(O){if(X.value=null,!a.beforeUpload){N(O);return}a.beforeUpload(O)&&N(O)}function N(O){return f.value=!0,new Promise((S,R)=>{const W=new FileReader;W.onload=c=>{const ne=c.target.result,F=kn(ne,{type:"array"}),L=F.SheetNames[0],le=F.Sheets[L],J=z(le),E=fl.sheet_to_json(le);b({header:J,results:E}),f.value=!1,S()},W.readAsArrayBuffer(O)})}function z(O){const S=[],R=fl.decode_range(O["!ref"]);let W;const c=R.s.r;for(W=R.s.c;W<=R.e.c;++W){const ne=O[fl.encode_cell({c:W,r:c})];let F="UNKNOWN "+W;ne&&ne.t&&(F=fl.format_cell(ne)),S.push(F)}return S}function v(O){return/\.(xlsx|xls|csv)$/.test(O.name)}return(O,S)=>{const R=Te;return n(),T("div",null,[_("input",{ref_key:"excelUploadInput",ref:X,class:"excel-upload-input",type:"file",accept:".xlsx, .xls",onChange:P},null,544),_("div",{class:"drop",onDrop:q,onDragover:U,onDragenter:U},[D(o(e(d)("dropExcelFileHereOr"))+" ",1),t(R,{loading:e(f),style:{"margin-left":"16px"},size:"small",type:"primary",onClick:re},{default:l(()=>[D(o(e(d)("browse")),1)]),_:1},8,["loading"])],32)])}}},Ja=zt(fi,[["__scopeId","data-v-c15025e0"]]),mi={class:"flex items-center justify-center"},vi=Be({__name:"Email",setup(pe){const a=st(),d=nt(),f=ct(),{displayFormErrors:X}=Je(),{request:te}=Ze(),{t:b,locale:q}=He(),U=i(!1),re=i([]),P=i(""),G=i(),N={pageSize:12,prefix:({itemCount:u})=>ue("div",{class:"font-bold"},{default:()=>`${b("total")}: ${u}`})},z=[{type:"selection"},{title:b("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return ue("div",{},{default:()=>u.email})}},{title:b("updateAt"),key:"updatedAt",width:125,render(u){return ue("div",{},{default:()=>Lt(u.updatedAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(u){return ue("div",{},{default:()=>Lt(u.createdAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Xe,{ref:G,placeholder:b("search"),value:P.value,onInput:u=>{P.value=u}},{suffix:()=>ue(fe,{},{default:()=>ue(ye,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Te,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:b("confirm"),content:b("confirmDeleteEmailAddress"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await te({method:"delete",url:`/newsletter/emails/${u.id}`})).success?(d.success(b("success")),O()):d.error(b("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!P.value)return re.value;const u=re.value.filter(p=>p.email.toLowerCase().includes(P.value.toLowerCase()));return G.value&&G.value.focus(),u}),O=async()=>{U.value=!0;const u=await te({url:"/newsletter/emails"});u.success&&u.result&&(re.value=u.result.data),U.value=!1};O();const S=i(!1),R=i(!1),W=i(null),c=i(null),ne=i({email:""}),F={email:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(u,p){return p&&!Qt.isEmail(p)?new Error(b("invalidEmail")):!0}}]},L=u=>{W.value=we.cloneDeep(u),u?ne.value=we.cloneDeep(u):ne.value={email:""},R.value=!0},le=async()=>{var u;return(u=c.value)==null||u.validate(async p=>{var V,w,x,g,k,ve;if(!p)if(W.value)if(W.value.email!==ne.value.email&&re.value.findIndex(oe=>oe.email==ne.value.email)>-1)d.error(b("sameEmailAddressMessage"));else{a.start(),S.value=!0;const oe={email:ne.value.email},ee=await te({method:"put",url:`/newsletter/emails/${W.value.id}`,data:oe});ee.success&&ee.result.data&&(d.success(b("success")),O()),S.value=!1,a.finish(),R.value=!1}else if(re.value.findIndex(oe=>oe.email==ne.value.email)>-1)d.error(b("sameEmailAddressMessage"));else{a.start(),S.value=!0;const oe={email:ne.value.email},ee=await te({method:"post",url:"/newsletter/emails",data:oe});if(ee.failure&&ee.error)switch((x=(w=(V=ee.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:X((ve=(k=(g=ee.error)==null?void 0:g.response)==null?void 0:k.data)==null?void 0:ve.data);break;default:d.error(b("anErrorOccurred"))}else d.success(b("success")),O();S.value=!1,a.finish(),R.value=!1}}),!1};let J=null;const E=()=>{J&&(J.destroy(),J=null)};Ba(E);const I=(u,p)=>p.map(V=>u.map(w=>V[w])),h=()=>{J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var p=["no","email","createdAt","updatedAt"];const V=we.sortBy(re.value.map((x,g)=>({no:g+1,...x})),"email"),w=I(p,V);try{u.export_json_to_excel({header:p,data:w,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),d.error(b("anErrorOccurred"))}})},j=()=>{J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var p=["email"];const V=I(p,[{email:"adresse@email.com"}]);try{u.export_json_to_excel({header:p,data:V,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),d.error(b("anErrorOccurred"))}})},H=i(!1),ae=async({results:u})=>{S.value=!0,a.start(),J||(J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let p=0;p<u.length;p++)u[p].email&&re.value.findIndex(V=>V.email==u[p].email)==-1&&(J&&(J.content=`${b("pleaseBePatient")}: ${p} ${b("task_s")} / ${u.length}`),await te({method:"post",url:"/newsletter/emails",data:{email:u[p].email}}));await O(),E(),a.finish(),S.value=!1,H.value=!1},r=i(dt()),M=i([]),Y=u=>u.id,m=u=>{M.value=u},$=()=>{M.value=[],r.value=dt()},Z=async()=>(M.value.length?f.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[M.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{S.value=!0,a.start();for(let u=0;u<M.value.length;u++)(await te({url:`/newsletter/emails/${M.value[u]}`,method:"delete"})).success;O(),a.finish(),S.value=!1,d.success(b("success")),$()}}):d.warning(b("noItemSelected")),!1);return(u,p)=>{const V=qa,w=it,x=It,g=lt,k=Pt,ve=kl,oe=gl,ee=pt,y=ft,B=rt,Ie=Ja;return n(),T(_e,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(w,null,{default:l(()=>[t(V,{onPositiveClick:p[0]||(p[0]=Q=>h())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("export")),1)]),_:1})]),default:l(()=>[D(" "+o(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:p[1]||(p[1]=Q=>H.value=!0)},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"mdi:download"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:p[2]||(p[2]=Q=>L(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(M).length?(n(),C(g,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(w,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(b)("nbItemsSelected",[e(M).length])),1),t(w,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:$},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"mdi:close"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):be("",!0)]),_:1}),t(oe,null,{default:l(()=>[(n(),C(ve,{key:e(r),columns:z,data:e(v),pagination:N,loading:e(U),"single-line":!1,"scroll-x":800,"row-key":Y,size:"small",striped:"","onUpdate:checkedRowKeys":m},null,8,["data","loading","row-key"]))]),_:1}),t(B,{show:e(R),"onUpdate:show":p[4]||(p[4]=Q=>Ve(R)?R.value=Q:null),loading:e(S),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(W)?e(b)("editEmailAddress"):e(b)("addEmailAddress"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:le,onNegativeClick:p[5]||(p[5]=Q=>R.value=!1)},{default:l(()=>[t(y,{ref_key:"formRef",ref:c,class:"mt-5",model:e(ne),rules:F,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(ee,{label:e(b)("emailAddress"),path:"email"},{default:l(()=>[t(e(Xe),{value:e(ne).email,"onUpdate:value":p[3]||(p[3]=Q=>e(ne).email=Q),placeholder:e(b)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(B,{show:e(H),"onUpdate:show":p[7]||(p[7]=Q=>Ve(H)?H.value=Q:null),loading:e(S),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(Ie,{class:"my-5","on-success":ae}),_("div",mi,[t(e(Te),{type:"info",size:"small",onClick:p[6]||(p[6]=Q=>j())},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"mdi:download"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),_i={class:"flex items-center justify-center"},yi=Be({__name:"Phone",setup(pe){const a=st(),d=nt(),f=ct(),{displayFormErrors:X}=Je(),{request:te}=Ze(),{t:b,locale:q}=He(),U=i(!1),re=i([]),P=i(""),G=i(),N={pageSize:12,prefix:({itemCount:u})=>ue("div",{class:"font-bold"},{default:()=>`${b("total")}: ${u}`})},z=[{type:"selection"},{title:b("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(u){return ue("div",{},{default:()=>u.phone})}},{title:b("updateAt"),key:"updatedAt",width:125,render(u){return ue("div",{},{default:()=>Lt(u.updatedAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:b("createdAt"),key:"createdAt",width:125,render(u){return ue("div",{},{default:()=>Lt(u.createdAt,{locale:q.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Xe,{ref:G,placeholder:b("search"),value:P.value,onInput:u=>{P.value=u}},{suffix:()=>ue(fe,{},{default:()=>ue(ye,{icon:"carbon:search"})})}),key:"actions",width:150,render(u){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Te,{size:"small",type:"warning",onClick:()=>{L(u)},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"error",onClick:()=>{f.warning({title:b("confirm"),content:b("confirmDeletePhoneNumber"),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{(await te({method:"delete",url:`/newsletter/phones/${u.id}`})).success?(d.success(b("success")),O()):d.error(b("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:trash-can"})})})])},fixed:"right"}],v=Le(()=>{if(!P.value)return re.value;const u=re.value.filter(p=>p.phone.toLowerCase().includes(P.value.toLowerCase()));return G.value&&G.value.focus(),u}),O=async()=>{U.value=!0;const u=await te({url:"/newsletter/phones"});u.success&&u.result&&(re.value=u.result.data),U.value=!1};O();const S=i(!1),R=i(!1),W=i(null),c=i(null),ne=i({phone:""}),F={phone:[{required:!0,message:b("fillRequired")},{trigger:["input"],validator(u,p){return p&&!xn(p)?new Error(b("invalidNumber")):!0}}]},L=u=>{W.value=we.cloneDeep(u),u?ne.value=we.cloneDeep(u):ne.value={phone:""},R.value=!0},le=async()=>{var u;return(u=c.value)==null||u.validate(async p=>{var V,w,x,g,k,ve;if(!p)if(W.value)if(W.value.phone!==ne.value.phone.replace(/\s+/g,"")&&re.value.findIndex(oe=>oe.phone==ne.value.phone.replace(/\s+/g,""))>-1)d.error(b("samePhoneNumberMessage"));else{a.start(),S.value=!0;const oe={phone:ne.value.phone.replace(/\s+/g,"")},ee=await te({method:"put",url:`/newsletter/phones/${W.value.id}`,data:oe});ee.success&&ee.result.data&&(d.success(b("success")),O()),S.value=!1,a.finish(),R.value=!1}else if(re.value.findIndex(oe=>oe.phone==ne.value.phone.replace(/\s+/g,""))>-1)d.error(b("samePhoneNumberMessage"));else{a.start(),S.value=!0;const oe={phone:ne.value.phone.replace(/\s+/g,"")},ee=await te({method:"post",url:"/newsletter/phones",data:oe});if(ee.failure&&ee.error)switch((x=(w=(V=ee.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:X((ve=(k=(g=ee.error)==null?void 0:g.response)==null?void 0:k.data)==null?void 0:ve.data);break;default:d.error(b("anErrorOccurred"))}else d.success(b("success")),O();S.value=!1,a.finish(),R.value=!1}}),!1};let J=null;const E=()=>{J&&(J.destroy(),J=null)};Ba(E);const I=(u,p)=>p.map(V=>u.map(w=>V[w])),h=()=>{J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var p=["no","phone","createdAt","updatedAt"];const V=we.sortBy(re.value.map((x,g)=>({no:g+1,...x})),"phone"),w=I(p,V);try{u.export_json_to_excel({header:p,data:w,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),d.error(b("anErrorOccurred"))}})},j=()=>{J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}),vl(()=>import("./export2excel-e877f0af.js"),["assets/export2excel-e877f0af.js","assets/xlsx-83e6f69b.js","assets/crypto-js-eb39eca1.js","assets/axios-96fb5abd.js","assets/process-93c0ea83.js","assets/file-saver-e0cc2bf2.js"]).then(u=>{var p=["phone"];const V=I(p,[{phone:"+22899999999"}]);try{u.export_json_to_excel({header:p,data:V,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),d.error(b("anErrorOccurred"))}})},H=i(!1),ae=async({results:u})=>{S.value=!0,a.start(),J||(J=d.info(b("pleaseBePatient"),{duration:0,type:"loading"}));for(let p=0;p<u.length;p++)u[p].phone&&re.value.findIndex(V=>V.phone.replace(/\s+/g,"")==u[p].phone.replace(/\s+/g,""))==-1&&(J&&(J.content=`${b("pleaseBePatient")}: ${p} ${b("task_s")} / ${u.length}`),await te({method:"post",url:"/newsletter/phones",data:{phone:u[p].phone.replace(/\s+/g,"")}}));await O(),E(),a.finish(),S.value=!1,H.value=!1},r=i(dt()),M=i([]),Y=u=>u.id,m=u=>{M.value=u},$=()=>{M.value=[],r.value=dt()},Z=async()=>(M.value.length?f.warning({title:b("confirm"),content:b("deleteSelectionWarningMessage",[M.value.length]),positiveText:b("yes"),negativeText:b("no"),onPositiveClick:async()=>{S.value=!0,a.start();for(let u=0;u<M.value.length;u++)(await te({url:`/newsletter/phones/${M.value[u]}`,method:"delete"})).success;O(),a.finish(),S.value=!1,d.success(b("success")),$()}}):d.warning(b("noItemSelected")),!1);return(u,p)=>{const V=qa,w=it,x=It,g=lt,k=Pt,ve=kl,oe=gl,ee=wn,y=pt,B=ft,Ie=rt,Q=Ja;return n(),T(_e,null,[t(x,{to:"#alt-action"},{default:l(()=>[t(w,null,{default:l(()=>[t(V,{onPositiveClick:p[0]||(p[0]=Ce=>h())},{trigger:l(()=>[t(e(Te),{type:"success"},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"mdi:upload"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("export")),1)]),_:1})]),default:l(()=>[D(" "+o(e(b)("exportDataInExcelFile")),1)]),_:1}),t(e(Te),{type:"info",onClick:p[1]||(p[1]=Ce=>H.value=!0)},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"mdi:download"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("import")),1)]),_:1}),t(e(Te),{type:"primary",onClick:p[2]||(p[2]=Ce=>L(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),t(k,{name:"slide-fade",appear:""},{default:l(()=>[e(M).length?(n(),C(g,{key:0,class:"my-2",size:"small",embedded:""},{default:l(()=>[t(w,{align:"center",justify:"space-between"},{default:l(()=>[_("span",null,o(e(b)("nbItemsSelected",[e(M).length])),1),t(w,{align:"center",justify:"space-between"},{default:l(()=>[t(e(Te),{type:"error",size:"small",onClick:Z},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("delete")),1)]),_:1}),t(e(Te),{type:"warning",size:"small",onClick:$},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"mdi:close"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):be("",!0)]),_:1}),t(oe,null,{default:l(()=>[(n(),C(ve,{key:e(r),columns:z,data:e(v),pagination:N,loading:e(U),"single-line":!1,"scroll-x":800,"row-key":Y,size:"small",striped:"","onUpdate:checkedRowKeys":m},null,8,["data","loading","row-key"]))]),_:1}),t(Ie,{show:e(R),"onUpdate:show":p[4]||(p[4]=Ce=>Ve(R)?R.value=Ce:null),loading:e(S),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:e(W)?e(b)("editPhoneNumber"):e(b)("addPhoneNumber"),"positive-text":e(b)("validate"),"negative-text":e(b)("cancel"),onPositiveClick:le,onNegativeClick:p[5]||(p[5]=Ce=>R.value=!1)},{default:l(()=>[t(B,{ref_key:"formRef",ref:c,class:"mt-5",model:e(ne),rules:F,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(y,{label:e(b)("phone"),path:"phone"},{default:l(()=>[t(ee,{modelValue:e(ne).phone,"onUpdate:modelValue":p[3]||(p[3]=Ce=>e(ne).phone=Ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(Ie,{show:e(H),"onUpdate:show":p[7]||(p[7]=Ce=>Ve(H)?H.value=Ce:null),loading:e(S),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:e(b)("import")},{default:l(()=>[t(Q,{class:"my-5","on-success":ae}),_("div",_i,[t(e(Te),{type:"info",size:"small",onClick:p[6]||(p[6]=Ce=>j())},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"mdi:download"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),gi="/creopse/assets/content-model-thumbnail-6b5d6c23.svg",bi={class:"text-base"},hi={class:"text-base"},ki=Be({__name:"DataForm",props:Gt({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(pe){const a=pe,d=_t(pe,"show"),f=_t(pe,"data"),X=st(),te=nt(),{t:b}=He(),{tr:q,pickByTheme:U,editKeysToCamelCase:re}=Je(),P=i(null),G=i(!1),N=vt("currentEditItem"),z=Le(()=>we.isEqual(f.value,N==null?void 0:N.value)&&we.isEqual(O.value,R.value)),v=()=>{d.value=!1,G.value=!1},O=i({}),S=i(dt()),R=i({}),W=i(),c=i();kt(()=>d.value,F=>{var L;F&&(Ma(f.value.contentModelData)?O.value=qt(f.value.contentModelData):O.value=qt({}),we.forIn(re(((L=a.contentModel)==null?void 0:L.dataStructure)??{}),(le,J)=>{(!O.value[J]||Array.isArray(O.value[J])&&O.value[J].length==0)&&(J==="index"?O.value[J]=qt({}):O.value[J]=qt([]))}),R.value=we.cloneDeep(O.value),S.value=dt())},{immediate:!0});const ne=async()=>{G.value=!0,X.start();const F=W.value&&await W.value(),L=c.value&&await c.value();(!W.value||F)&&(!c.value||L)?await a.submitData(O.value):te.error(b("mandatoryFieldsNotFilledIn")),X.finish(),G.value=!1};return(F,L)=>{const le=Ra,J=bl,E=hl,I=ye,h=fe,j=Te,H=it,ae=lt,r=$t,M=Ot,Y=ht,m=za;return n(),C(m,{modelValue:d.value,"onUpdate:modelValue":L[3]||(L[3]=$=>d.value=$),"close-on-esc":!1,closable:!1,onOnSizeChange:L[4]||(L[4]=$=>{P.value=$})},{header:l(()=>[_("div",bi,[t(le,{depth:"1"},{default:l(()=>{var $;return[D(o(e(q)(($=a.contentModel)==null?void 0:$.title))+" ",1),_("span",null," Â -Â "+o(e(N)?e(b)("editItem"):e(b)("addItem")),1)]}),_:1})])]),"header-extra":l(()=>[t(H,{align:"center"},{default:l(()=>[_("span",hi,o(e(b)("status"))+":",1),t(E,{value:f.value.isActive,"onUpdate:value":L[0]||(L[0]=$=>f.value.isActive=$),name:"isActive",class:"w-full"},{default:l(()=>[t(J,{value:!1,label:e(b)("hidden"),class:"w-[50%]"},null,8,["label"]),t(J,{value:!0,label:e(b)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),L[5]||(L[5]=_("div",{class:"w-4"},null,-1)),t(j,{type:"success",title:e(b)("save"),loading:e(G),disabled:e(z),onClick:L[1]||(L[1]=$=>ne())},{icon:l(()=>[t(h,null,{default:l(()=>[t(I,{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("save")),1)]),_:1},8,["title","loading","disabled"]),t(j,{type:"error",title:e(b)("close"),disabled:e(G),onClick:L[2]||(L[2]=$=>v())},{icon:l(()=>[t(h,null,{default:l(()=>[t(I,{icon:"carbon:close"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:l(()=>{var $,Z;return[_("section",{style:qe(`min-height: ${(($=e(P))==null?void 0:$.windowHeight)-((Z=e(P))==null?void 0:Z.headerHeight)-5}px`),class:Ye(`w-full h-full ${e(U)("bg-slate-200","bg-zinc-800")}`)},[t(Y,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:l(()=>[t(M,{class:"ml-4 mt-2"},{default:l(()=>{var u,p;return[t(r,{style:qe(`height: ${((u=e(P))==null?void 0:u.windowHeight)-((p=e(P))==null?void 0:p.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),T(_e,null,Oe(e(re)((V=F.contentModel)==null?void 0:V.dataStructure),(w,x)=>(n(),T(_e,{key:x},[String(x)==="index"?(n(),C(ae,{key:0,size:"small",class:"mb-2"},{default:l(()=>[(n(),C(yl,{key:`${e(S)}-${x}-form-1`,modelValue:e(O)[x],"onUpdate:modelValue":g=>e(O)[x]=g,items:w,onUpdate:(g,k)=>{W.value=k}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):be("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1}),t(M,{class:"mr-4 mt-2"},{default:l(()=>{var u,p;return[t(r,{style:qe(`height: ${((u=e(P))==null?void 0:u.windowHeight)-((p=e(P))==null?void 0:p.headerHeight)-50}px`)},{default:l(()=>{var V;return[(n(!0),T(_e,null,Oe(e(re)((V=F.contentModel)==null?void 0:V.dataStructure),(w,x)=>(n(),T(_e,{key:x},[String(x)!=="index"?(n(),C(ae,{key:0,title:e(q)(w.title),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(j,{quaternary:"",size:"small",onClick:()=>e(O)[x].push({})},{icon:l(()=>[t(h,null,{default:l(()=>[t(I,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(b)("add")),1)]),_:2},1032,["onClick"])]),default:l(()=>[(n(!0),T(_e,null,Oe(e(O)[x],(g,k)=>(n(),C(ae,{key:k,title:String(k+1),size:"small",class:"mb-2"},{"header-extra":l(()=>[t(j,{type:"error",size:"small",onClick:()=>e(O)[x].splice(k,1)},{icon:l(()=>[t(h,null,{default:l(()=>[t(I,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[(n(),C(yl,{key:`${e(S)}-${x}-${k}-form-2`,modelValue:e(O)[x][k],"onUpdate:modelValue":ve=>e(O)[x][k]=ve,items:w.items,onUpdate:(ve,oe)=>{c.value=oe}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):be("",!0)],64))),128))]}),_:1},8,["style"])]}),_:1})]),_:1})],6)]}),_:1},8,["modelValue"])}}}),wi={class:"flex items-center justify-between"},xi={class:"flex flex-col"},Ci={class:"text-sm font-bold"},Ii={class:"text-xs font-normal"},$i=Be({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Gt(["update"],["update:show"]),setup(pe,{emit:a}){const{t:d}=He(),{request:f}=Ze(),{pickByTheme:X,tr:te,displayFormErrors:b,mergeArrays:q}=Je(),{extractItemTitle:U}=cl(),{loadContentModels:re}=We(),{contentModels:P}=je(We()),{isLightTheme:G}=je(yt()),N=ct(),z=nt(),v=st(),O=a;re();const S=_t(pe,"show"),R=i(!1),W=vt("currentEditItem"),c=async Y=>{N.warning({title:d("confirm"),content:d("confirmDeleteLink"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{var $,Z,u,p,V;v.start(),(await f({method:"put",url:`/content-model/items/${($=W==null?void 0:W.value)==null?void 0:$.id}`,data:{relatedItems:(p=(u=(Z=W==null?void 0:W.value)==null?void 0:Z.relatedItems)==null?void 0:u.filter(w=>w.id!==Y.id))==null?void 0:p.map(w=>w.id)}})).success?(z.success(d("success")),O("update",(V=W==null?void 0:W.value)==null?void 0:V.id)):z.error(d("anErrorOccurred")),v.finish()}})},ne=Y=>{var m;return(m=P.value)==null?void 0:m.find($=>$.id===Y.contentModelId)},F=i(!1),L=i(null),le=i({contentModelId:null,itemId:null}),J={contentModelId:[{required:!0,message:d("fillRequired")}],itemId:[{required:!0,message:d("fillRequired")}]},E=async()=>{var Y;return(Y=L.value)==null||Y.validate(async m=>{var $,Z,u,p,V,w,x,g,k,ve;if(!m){v.start(),R.value=!0;const oe=((Z=($=W==null?void 0:W.value)==null?void 0:$.relatedItems)==null?void 0:Z.map(y=>y.id))||[],ee=await f({method:"put",url:`/content-model/items/${(u=W==null?void 0:W.value)==null?void 0:u.id}`,data:{relatedItems:[...oe,le.value.itemId]}});if(ee.failure&&ee.error)switch((w=(V=(p=ee.error)==null?void 0:p.response)==null?void 0:V.data)==null?void 0:w.errorCode){case Qe.FORM_INVALID_DATA:b((k=(g=(x=ee.error)==null?void 0:x.response)==null?void 0:g.data)==null?void 0:k.data);break;default:z.error(d("anErrorOccurred"))}else z.success(d("success")),O("update",(ve=W==null?void 0:W.value)==null?void 0:ve.id),F.value=!1;R.value=!1,v.finish()}}),!1},I=Y=>ue("span",{},{default:()=>te(Y.title)}),h=Y=>Le(()=>ue("span",{},{default:()=>U(Y,ne(Y))})),j=i(!1),H=i([]),ae=i([]),r=async(Y,m)=>{if(!Y.length){ae.value=[];return}j.value=!0;const $=await f({url:`/content-model-items/search/${Y}/${m}`});$.success&&$.result&&(ae.value=$.result.data),j.value=!1},M=Le(()=>q(H.value,ae.value,"id").filter(Y=>{var m;return Y.id!==((m=W==null?void 0:W.value)==null?void 0:m.id)}));return(Y,m)=>{const $=ye,Z=Te,u=it,p=fe,V=lt,w=$t,x=wt,g=Yt,k=rt,ve=Vt,oe=pt,ee=ft;return n(),T(_e,null,[t(k,{show:S.value,"onUpdate:show":m[2]||(m[2]=y=>S.value=y),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:e(d)("linkContentModelItems")},{"header-extra":l(()=>[t(u,{align:"center"},{default:l(()=>[t(Z,{size:"small",type:"primary",disabled:e(R),onClick:m[0]||(m[0]=y=>F.value=!0)},{default:l(()=>[t($,{icon:"carbon:add-alt",class:"mr-1"}),D(" "+o(e(d)("add")),1)]),_:1},8,["disabled"]),t(Z,{size:"small",type:"error",disabled:e(R),onClick:m[1]||(m[1]=y=>S.value=!1)},{default:l(()=>[t($,{icon:"carbon:close",class:"mr-1"}),D(" "+o(e(d)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(g,{show:e(R)},{default:l(()=>{var y,B;return[(B=(y=e(W))==null?void 0:y.relatedItems)!=null&&B.length?(n(),C(w,{key:0,style:{"max-height":"400px"}},{default:l(()=>{var Ie;return[(n(!0),T(_e,null,Oe((Ie=e(W))==null?void 0:Ie.relatedItems,Q=>(n(),C(V,{key:Q.id,embedded:"",size:"small",class:"mb-2"},{default:l(()=>{var Ce;return[_("div",wi,[_("div",xi,[_("span",Ci,o(e(U)(Q,ne(Q))),1),_("span",Ii,o(e(te)((Ce=ne(Q))==null?void 0:Ce.title)),1)]),t(u,null,{default:l(()=>[t(Z,{size:"small",type:"error",secondary:e(G),onClick:ge=>c(Q)},{default:l(()=>[t(p,null,{default:l(()=>[t($,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)])]}),_:2},1024))),128))]}),_:1})):(n(),C(V,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(x,{description:e(d)("noLinkAdded")},{icon:l(()=>[t(p,null,{default:l(()=>[t($,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]}),_:1},8,["show"])]),_:1},8,["show","title"]),t(k,{show:e(F),"onUpdate:show":m[6]||(m[6]=y=>Ve(F)?F.value=y:null),loading:e(R),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(d)("addLink"),"positive-text":e(d)("validate"),"negative-text":e(d)("cancel"),onPositiveClick:E,onNegativeClick:m[7]||(m[7]=y=>F.value=!1)},{default:l(()=>[t(ee,{ref_key:"formRef",ref:L,model:e(le),rules:J,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(oe,{label:e(d)("contentModel"),path:"contentModelId"},{default:l(()=>[t(ve,{value:e(le).contentModelId,"onUpdate:value":m[3]||(m[3]=y=>e(le).contentModelId=y),options:e(P),placeholder:e(d)("contentModel"),"render-label":I,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(oe,{label:e(d)("itemToLink"),path:"itemId"},{default:l(()=>[t(ve,{value:e(le).itemId,"onUpdate:value":m[4]||(m[4]=y=>e(le).itemId=y),options:e(M)||[],placeholder:e(d)("itemToLink"),"render-label":y=>h(y).value,loading:e(j),disabled:!e(le).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:m[5]||(m[5]=y=>r(y,e(le).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Vi={key:0,class:"w-full flex items-center justify-between gap-4"},Ui={class:"flex items-center gap-3"},Ti={key:0},zi={class:"flex items-center justify-center h-full"},Mi=["src"],Si={class:"text-center text-dimgray text-sm"},Ai={key:1,class:"flex items-center justify-center"},Ei=Be({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(pe){const{t:a}=He(),{request:d}=Ze(),{extractItemTitle:f}=cl(),{tr:X,displayFormErrors:te}=Je(),b=ct(),q=nt(),U=st(),re=_t(pe,"modelValue"),P=i(!1),G=i(!1),N=i(!1),z=i(!1),v=i([]),O=i(0),S=i(12),R=i(1),W=Le(()=>{var $;return`/content-model/items?pageSize=${S.value}&contentModelId=${($=re.value)==null?void 0:$.id}`}),c=$=>{F(`${W.value}&page=${$}`)},ne=$=>{S.value=$,F()},F=async($=null,Z=!1)=>{var p,V,w,x,g;P.value=!0,U.start();const u=await d({url:$??W.value});u.success&&u.result&&(v.value=((p=u.result.data)==null?void 0:p.items)||[],O.value=((w=(V=u.result.data)==null?void 0:V.meta)==null?void 0:w.total)||0,R.value=((g=(x=u.result.data)==null?void 0:x.meta)==null?void 0:g.currentPage)||1),U.finish(),P.value=!1};F(null,!0);const L=i(null),le=i({title:"",contentModelData:"",isActive:!0}),J=$=>{L.value=we.cloneDeep($),$?le.value=we.cloneDeep($):le.value={title:"",contentModelData:"",isActive:!0},N.value=!0},E=$=>{L.value=we.cloneDeep($),z.value=!0},I=async $=>{await F();const Z=v.value.find(u=>u.id===$);Z&&E(Z)},h=async $=>{b.warning({title:a("confirm"),content:a("confirmDeleteItem"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-model/items/${$.id}`})).success?(q.success(a("success")),F()):q.error(a("anErrorOccurred"))}})},j=async $=>{var p,V,w,x,g,k,ve;U.start(),G.value=!0;const Z={title:le.value.title,contentModelData:$,isActive:le.value.isActive,contentModelId:(p=re.value)==null?void 0:p.id},u=await d({method:L.value?"put":"post",url:L.value?`/content-model/items/${L.value.id}`:"/content-model/items",data:Z});if(u.failure&&u.error)switch((x=(w=(V=u.error)==null?void 0:V.response)==null?void 0:w.data)==null?void 0:x.errorCode){case Qe.FORM_INVALID_DATA:te((ve=(k=(g=u.error)==null?void 0:g.response)==null?void 0:k.data)==null?void 0:ve.data);break;default:q.error(a("anErrorOccurred"))}else q.success(a("success")),F(`${W.value}&page=${R.value}`),N.value=!1;G.value=!1,U.finish()},H=i(!1),ae=i(dt()),r=i({}),M=Le(()=>{let $=0;for(const Z in r.value)r.value[Z]&&$++;return $});function Y(){r.value={},F()}const m=async()=>(M.value?b.warning({title:a("confirm"),content:a("deleteSelectionWarningMessage",[M.value]),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{G.value=!0,U.start();for(const $ in r.value)r.value[$]&&await d({url:`/content-model/items/${$}`,method:"delete"});U.finish(),G.value=!1,q.success(a("success")),r.value={},F(null,!0)}}):q.warning(a("noItemSelected")),!1);return At("currentEditItem",L),($,Z)=>{const u=Ht,p=ye,V=fe,w=Te,x=it,g=It,k=La,ve=xl,oe=Nt,ee=lt,y=Pt,B=Ot,Ie=ht,Q=sl,Ce=Yt,ge=wt;return n(),T(_e,null,[t(g,{to:"#alt-action"},{default:l(()=>[t(x,{align:"center"},{default:l(()=>[t(u,{checked:e(H),"onUpdate:checked":[Z[0]||(Z[0]=de=>Ve(H)?H.value=de:null),Z[1]||(Z[1]=de=>{for(const Re of e(v))Re.id&&(e(r)[Re.id]=de);ae.value=("uuidv4"in $?$.uuidv4:e(dt))()})],disabled:!e(v).length},{default:l(()=>[D(o(e(a)("selectAll")),1)]),_:1},8,["checked","disabled"]),t(w,{type:"primary",onClick:Z[2]||(Z[2]=de=>J(null))},{icon:l(()=>[t(V,{size:"18"},{default:l(()=>[t(p,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addItem")),1)]),_:1})]),_:1})]),_:1}),t(k,{class:"mt-2 mb-5",onBack:Z[3]||(Z[3]=de=>re.value=null)},{title:l(()=>{var de;return[D(o(e(X)((de=re.value)==null?void 0:de.title)),1)]}),back:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:l(()=>[e(M)>0?(n(),T("section",Vi,[_("span",null,o(e(a)("nbItemsSelected",[e(M)])),1),_("section",Ui,[t(w,{type:"error",size:"small",onClick:m},{icon:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("delete")),1)]),_:1}),t(w,{type:"warning",size:"small",onClick:Y},{icon:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"carbon:close-filled"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("cancelSelection")),1)]),_:1})])])):be("",!0)]),_:1}),e(v).length&&!e(P)?(n(),T("section",Ti,[t(Ie,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:l(()=>[(n(!0),T(_e,null,Oe(e(v),(de,Re)=>(n(),C(B,{key:Re},{default:l(()=>[t(y,{name:"slide-fade",appear:""},{default:l(()=>[t(ee,{size:"small",bordered:"",hoverable:""},{cover:l(()=>{var xe;return[_("div",zi,[_("img",{src:((xe=re.value)==null?void 0:xe.imageUrl)??e(gi),class:"w-full h-[200px] object-cover"},null,8,Mi)])]}),header:l(()=>[_("div",Si,[t(ve,{"line-clamp":1,"expand-trigger":"click"},{default:l(()=>[de.id?(n(),C(u,{key:e(ae),checked:e(r)[de.id],"onUpdate:checked":xe=>e(r)[de.id]=xe,class:"mr-1"},null,8,["checked","onUpdate:checked"])):be("",!0),D(" "+o(e(f)(de,re.value)),1)]),_:2},1024)])]),action:l(()=>[t(x,{justify:"space-between",align:"center"},{default:l(()=>[t(oe,{bordered:!1,type:de.isActive?"success":"error"},{default:l(()=>[D(o(de.isActive?e(a)("visible"):e(a)("hidden")),1)]),_:2},1032,["type"]),t(x,null,{default:l(()=>[t(w,{ternary:"",circle:"",title:e(a)("edit"),onClick:xe=>J(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["title","onClick"]),t(w,{ternary:"",circle:"",title:e(a)("links"),onClick:xe=>E(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"carbon:link"})]),_:1})]),_:2},1032,["title","onClick"]),t(w,{ternary:"",circle:"",title:e(a)("delete"),onClick:xe=>h(de)},{icon:l(()=>[t(V,null,{default:l(()=>[t(p,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Q,{page:e(R),"onUpdate:page":[Z[4]||(Z[4]=de=>Ve(R)?R.value=de:null),c],class:"mt-10 justify-center","show-size-picker":"","page-size":e(S),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(e(O)/e(S)),"onUpdate:pageSize":ne},{prefix:l(()=>[D(o(`${e(O)} ${e(a)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):e(P)?(n(),T("section",Ai,[t(Ce,{size:"medium"})])):(n(),C(ge,{key:2,description:e(a)("noItemAdded"),class:"my-16"},null,8,["description"])),t(ki,{show:e(N),"onUpdate:show":Z[5]||(Z[5]=de=>Ve(N)?N.value=de:null),data:e(le),"onUpdate:data":Z[6]||(Z[6]=de=>Ve(le)?le.value=de:null),"content-model":re.value,"submit-data":j},null,8,["show","data","content-model"]),t($i,{show:e(z),"onUpdate:show":Z[7]||(Z[7]=de=>Ve(z)?z.value=de:null),onUpdate:I},null,8,["show"])],64)}}}),Di={key:2},Li={class:"flex items-center"},Pi={class:"text-base"},Ni={class:"mt-4"},Oi="previews",Ri=Be({__name:"index",setup(pe){const{t:a}=He(),{request:d}=Ze(),{tr:f,pickByTheme:X,displayFormErrors:te,fileUrl:b,isInDevMode:q,formatKey:U}=Je(),{isLightTheme:re}=je(yt()),{contentModels:P}=je(We()),{loadContentModels:G}=We(),N=st(),z=nt(),v=ct(),O=i(!1),S=i(!1),R=vt("appConfig"),W=async()=>{N.start(),O.value=!0,await G(),O.value=!1,N.finish()};W();const c=i(12),ne=i(1),F=V=>{c.value=V},L={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},le=i(!1),J=i(null),E=i(L),I={name:[{required:!0,message:a("fillRequired")}],title:[{required:!0,message:a("fillRequired")}]},h=i(null),j=V=>{h.value=we.cloneDeep(V),E.value=we.cloneDeep(V||L),le.value=!0},H=async()=>{var V;return(V=J.value)==null||V.validate(async w=>{var x,g,k,ve,oe,ee;if(!w){N.start(),S.value=!0;const y={name:E.value.name,title:E.value.title,image:E.value.image,description:E.value.description,titleFieldName:E.value.titleFieldName,hasPermalink:E.value.hasPermalink},B=await d({method:h.value?"put":"post",url:h.value?`/content-models/${h.value.id}`:"/content-models",data:y});if(B.failure&&B.error)switch((k=(g=(x=B.error)==null?void 0:x.response)==null?void 0:g.data)==null?void 0:k.errorCode){case Qe.FORM_INVALID_DATA:te((ee=(oe=(ve=B.error)==null?void 0:ve.response)==null?void 0:oe.data)==null?void 0:ee.data);break;default:z.error(a("anErrorOccurred"))}else z.success(a("success")),W(),le.value=!1;S.value=!1,N.finish()}}),!1},ae=async V=>{v.warning({title:a("confirm"),content:a("confirmDeleteContentModel"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{(await d({method:"delete",url:`/content-models/${V.id}`})).success?(z.success(a("success")),W()):z.error(a("anErrorOccurred"))}})},r=i(null),M=i(!1),Y=async V=>{var x;S.value=!0,N.start();const w=await d({url:`/content-models/${(x=r.value)==null?void 0:x.id}`,method:"put",data:{dataStructure:V}});w.success&&w.result?(z.success(a("success")),W(),m(w.result.data)):z.error(a("anErrorOccurred")),S.value=!1,N.finish()},m=V=>{r.value=V,M.value=!0},$=i(!1),Z=async V=>{E.value.image=V,$.value=!1},u=()=>{E.value.image=""},p=ll("content-models-management",()=>({itemsContentModel:i(null)}))();return kt(()=>E.value.title,V=>{h.value||E.value.name.length<=21&&(E.value.name=Ya(f(V),{trim:!0,lower:!0,strict:!0}))}),(V,w)=>{var $e,ce,Ee;const x=ye,g=fe,k=Te,ve=It,oe=it,ee=Tt,y=lt,B=sl,Ie=wt,Q=Pt,Ce=bt,ge=pt,de=Xe,Re=Ot,xe=Fa,ie=Ft,ke=ht,A=Ht,Ue=ft,K=rt,se=Kt;return n(),T(_e,null,[e(p).itemsContentModel?be("",!0):(n(),C(ve,{key:0,to:"#alt-action"},{default:l(()=>[e(P)&&e(P).length?(n(),C(k,{key:0,type:"primary",onClick:w[0]||(w[0]=ze=>j(null))},{icon:l(()=>[t(g,{size:"18"},{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addContentModel")),1)]),_:1})):be("",!0)]),_:1})),e(p).itemsContentModel?(n(),C(Ei,{key:1,modelValue:e(p).itemsContentModel,"onUpdate:modelValue":w[1]||(w[1]=ze=>e(p).itemsContentModel=ze)},null,8,["modelValue"])):(n(),T("section",Di,[t(Q,{appear:"",name:"slide-fade"},{default:l(()=>[_("section",null,[e(P)&&e(P).length?(n(),T(_e,{key:0},[(n(!0),T(_e,null,Oe(e(P).slice((e(ne)-1)*e(c),e(ne)*e(c)),ze=>(n(),C(y,{key:ze.id,embedded:"",size:"small",class:"mb-2"},{header:l(()=>[_("div",Li,[e(q)?(n(),C(oe,{key:0},{default:l(()=>[t(k,{size:"small",type:"primary",secondary:e(re),onClick:ot(De=>m(ze),["stop"])},{default:l(()=>[t(g,{class:"mr-1"},{default:l(()=>[t(x,{icon:"carbon:data-1"})]),_:1}),D(" "+o(e(a)("dataStructure")),1)]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"primary",secondary:e(re),onClick:ot(De=>j(ze),["stop"])},{default:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:edit"})]),_:1})]),_:2},1032,["secondary","onClick"]),t(k,{size:"small",type:"error",secondary:e(re),onClick:ot(De=>ae(ze),["stop"])},{default:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),_:2},1032,["secondary","onClick"])]),_:2},1024)):be("",!0),e(q)?(n(),C(ee,{key:1,vertical:"",class:Ye(e(X)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):be("",!0),_("span",Pi,o(e(f)(ze.title)),1)])]),"header-extra":l(()=>[t(k,{size:"small",type:"primary",secondary:e(re),onClick:ot(De=>e(p).itemsContentModel=ze,["stop"])},{icon:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:arrow-right"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("open")),1)]),_:2},1032,["secondary","onClick"])]),_:2},1024))),128)),t(B,{page:e(ne),"onUpdate:page":w[2]||(w[2]=ze=>Ve(ne)?ne.value=ze:null),class:"mt-5 justify-end","show-size-picker":"","page-size":e(c),"page-sizes":[6,10,24,36,48],"page-count":Math.ceil(e(P).length/e(c)),"onUpdate:pageSize":F},{prefix:l(()=>[D(o(`${e(P).length} ${e(a)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(n(),C(y,{key:1,size:"large",class:Ye(`mb-2 !border-dashed !border-2 ${e(X)("!border-zinc-300","!border-zinc-600")}`)},{default:l(()=>[t(Ie,{description:e(a)("noContentModelAvailable")},{icon:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:model-alt"})]),_:1})]),extra:l(()=>[_("div",Ni,[t(k,{size:"small",onClick:w[3]||(w[3]=ze=>j(null))},{icon:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),t(K,{show:e(le),"onUpdate:show":w[11]||(w[11]=ze=>Ve(le)?le.value=ze:null),loading:e(S),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(h)?e(a)("editContentModel"):e(a)("addContentModel"),"positive-text":e(a)("validate"),"negative-text":e(a)("cancel"),onPositiveClick:H,onNegativeClick:w[12]||(w[12]=ze=>le.value=!1)},{default:l(()=>[t(Ue,{ref_key:"formRef",ref:J,model:e(E),rules:I,"show-require-mark":!1,size:"medium",class:"my-5"},{default:l(()=>[t(ge,{label:e(a)("title"),path:"title"},{default:l(()=>[t(Ce,{modelValue:e(E).title,"onUpdate:modelValue":w[4]||(w[4]=ze=>e(E).title=ze),placeholder:e(a)("title"),"selector-span":5,class:"w-full",sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ge,{label:e(a)("description"),path:"description"},{default:l(()=>[t(Ce,{modelValue:e(E).description,"onUpdate:modelValue":w[5]||(w[5]=ze=>e(E).description=ze),placeholder:e(a)("description"),"selector-span":5,type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(ke,{"x-gap":"12",span:24},{default:l(()=>[t(Re,{span:14},{default:l(()=>[t(ge,{label:e(a)("contentModelKey"),path:"name"},{default:l(()=>[t(de,{value:e(E).name,placeholder:e(a)("contentModelKey"),class:"w-full","onUpdate:value":w[6]||(w[6]=ze=>e(E).name=e(U)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(ge,{label:e(a)("titleSingletonKey"),path:"titleFieldName"},{default:l(()=>[t(de,{value:e(E).titleFieldName,placeholder:e(a)("titleSingletonKey"),class:"w-full","onUpdate:value":w[7]||(w[7]=ze=>e(E).titleFieldName=e(U)(ze))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(ie,{span:10,label:e(a)("itemsPreview"),path:"image"},{default:l(()=>[t(oe,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:l(()=>[t(xe,{class:"cursor-pointer","object-fit":"cover",style:qe("border: 1px dashed "+e(X)("green","white")),size:150,src:e(b)(e(E).image||""),onClick:w[8]||(w[8]=ze=>$.value=!0)},{default:l(()=>[e(E).image?be("",!0):(n(),C(g,{key:0,size:64},{default:l(()=>[t(x,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),e(E).image?(n(),C(k,{key:0,quaternary:"",onClick:w[9]||(w[9]=ze=>u())},{icon:l(()=>[t(g,null,{default:l(()=>[t(x,{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),t(ge,{"show-label":!1,path:"hasPermalink"},{default:l(()=>[t(A,{checked:e(E).hasPermalink,"onUpdate:checked":w[10]||(w[10]=ze=>e(E).hasPermalink=ze)},{default:l(()=>[D(o(e(a)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(se,{show:e($),"onUpdate:show":w[13]||(w[13]=ze=>Ve($)?$.value=ze:null),title:e(a)("selectImage"),"upload-config":{folder:Oi,limit:0,maxSize:0,baseUrl:(($e=e(R))==null?void 0:$e.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:Z},null,8,["show","title","upload-config"]),t(Wa,{show:e(M),"onUpdate:show":w[14]||(w[14]=ze=>Ve(M)?M.value=ze:null),title:e(f)((ce=e(r))==null?void 0:ce.title),"raw-data-structure":(Ee=e(r))==null?void 0:Ee.dataStructure,"update-data-structure":Y},null,8,["show","title","raw-data-structure"])]))],64)}}});var Et=(pe=>(pe.NEWS_TAG="news-tag",pe.NEWS_CATEGORY="news-category",pe.NEWS_ARTICLE="news-article",pe.CONTENT_MODEL="content-model",pe))(Et||{});const qi={class:"text-base font-bold"},Fi={class:"text-sm"},ji={class:"text-xs text-slate-400"},Bi={class:"text-xs text-slate-400"},Ki={class:"text-xs text-slate-400"},Yi={class:"text-sm"},Hi={class:"text-xs text-slate-400"},Gi={class:"text-xs text-slate-400"},Wi={class:"text-xs text-slate-400"},Ji={class:"text-sm"},Xi={class:"text-xs text-slate-400"},Zi={class:"text-xs text-slate-400"},Qi={class:"text-xs text-slate-400"},er={class:"text-base font-bold"},tr={class:"text-sm"},lr={class:"text-xs text-slate-400"},ar={class:"text-xs text-slate-400"},nr={class:"text-xs text-slate-400"},sr=Be({__name:"index",setup(pe){const{t:a}=He(),{tr:d}=Je(),{request:f}=Ze(),{contentModels:X,pages:te}=je(We()),{loadContentModels:b,loadPages:q}=We(),U=nt(),re=st(),P=[{pathPrefix:"/news/article",contentType:Et.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Et.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Et.NEWS_TAG,contentParam:"slug",pageId:null}],G=i(!1),N=i([]),z=i(P),v=i(),O=Le(()=>X.value.filter(F=>F.hasPermalink)),S=async(F=!1)=>{re.start(),G.value=!0,F&&(await b(),await q());const L=await f({url:"/permalinks"});if(L.success&&L.result){N.value=L.result.data,z.value=we.cloneDeep(P);for(let le=0;le<O.value.length;le++)z.value.push({pathPrefix:`/${O.value[le].slug}`,contentType:Et.CONTENT_MODEL,contentParam:"id",contentId:O.value[le].id,pageId:null});for(let le=0;le<z.value.length;le++)switch(z.value[le].contentType){case Et.NEWS_ARTICLE:case Et.NEWS_CATEGORY:case Et.NEWS_TAG:{const J=N.value.find(E=>E.contentType===z.value[le].contentType);J&&(z.value[le].pathPrefix=J.pathPrefix,z.value[le].contentParam=J.contentParam,z.value[le].pageId=J.pageId,z.value[le].permalinkId=J.id)}break;case Et.CONTENT_MODEL:{const J=N.value.find(E=>E.contentType===z.value[le].contentType&&E.contentId===z.value[le].contentId);J&&(z.value[le].pathPrefix=J.pathPrefix,z.value[le].contentParam=J.contentParam,z.value[le].pageId=J.pageId,z.value[le].permalinkId=J.id)}break}v.value=we.cloneDeep(z.value)}G.value=!1,re.finish()};S(!0);const R=async()=>{re.start(),G.value=!0,(await f({method:"put",url:"/permalinks",data:z.value})).success&&(U.success(a("success")),S()),G.value=!1,re.finish()},W=Le(()=>we.isEqual(z.value,v.value)),c=F=>ue("span",{},{default:()=>d(F.title)}),ne=F=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(F);return(F,L)=>{const le=ye,J=fe,E=Te,I=It,h=Xe,j=Ot,H=Vt,ae=ht,r=lt,M=al,Y=nl,m=Tt;return n(),T(_e,null,[t(I,{to:"#alt-action"},{default:l(()=>[t(E,{type:"primary",loading:e(G),disabled:e(W),onClick:L[0]||(L[0]=$=>R())},{icon:l(()=>[t(J,null,{default:l(()=>[t(le,{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(a)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(r,{embedded:"",size:"small"},{default:l(()=>[t(Y,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:$})=>[t(J,null,{default:l(()=>[$?(n(),C(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[10]||(L[10]=[_("span",null,null,-1)])),default:l(()=>[t(M,{name:"1"},{header:l(()=>[_("span",qi,o(e(a)("news")),1)]),default:l(()=>[t(r,{size:"small"},{header:l(()=>[_("span",Fi,o(e(a)("articles")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(j,{span:"10"},{default:l(()=>[_("span",ji,o(e(a)("pathPrefix")),1),t(h,{value:e(z)[0].pathPrefix,"onUpdate:value":L[1]||(L[1]=$=>e(z)[0].pathPrefix=$),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Bi,o(e(a)("contentParam")),1),t(h,{value:e(z)[0].contentParam,"onUpdate:value":L[2]||(L[2]=$=>e(z)[0].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Ki,o(e(a)("contentPage")),1),t(H,{value:e(z)[0].pageId,"onUpdate:value":L[3]||(L[3]=$=>e(z)[0].pageId=$),options:e(te)||[],placeholder:e(a)("selectPage"),"render-label":c,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(r,{size:"small"},{header:l(()=>[_("span",Yi,o(e(a)("categories")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(j,{span:"10"},{default:l(()=>[_("span",Hi,o(e(a)("pathPrefix")),1),t(h,{value:e(z)[1].pathPrefix,"onUpdate:value":L[4]||(L[4]=$=>e(z)[1].pathPrefix=$),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Gi,o(e(a)("contentParam")),1),t(h,{value:e(z)[1].contentParam,"onUpdate:value":L[5]||(L[5]=$=>e(z)[1].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Wi,o(e(a)("contentPage")),1),t(H,{value:e(z)[1].pageId,"onUpdate:value":L[6]||(L[6]=$=>e(z)[1].pageId=$),options:e(te)||[],placeholder:e(a)("selectPage"),"render-label":c,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),t(r,{size:"small"},{header:l(()=>[_("span",Ji,o(e(a)("tags")),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(j,{span:"10"},{default:l(()=>[_("span",Xi,o(e(a)("pathPrefix")),1),t(h,{value:e(z)[2].pathPrefix,"onUpdate:value":L[7]||(L[7]=$=>e(z)[2].pathPrefix=$),"allow-input":ne,size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Zi,o(e(a)("contentParam")),1),t(h,{value:e(z)[2].contentParam,"onUpdate:value":L[8]||(L[8]=$=>e(z)[2].contentParam=$),readonly:"",size:"small"},null,8,["value"])]),_:1}),t(j,{span:"7"},{default:l(()=>[_("span",Qi,o(e(a)("contentPage")),1),t(H,{value:e(z)[2].pageId,"onUpdate:value":L[9]||(L[9]=$=>e(z)[2].pageId=$),options:e(te)||[],placeholder:e(a)("selectPage"),"render-label":c,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"!my-2"}),e(O).length&&e(z).length>3?(n(),C(r,{key:0,embedded:"",size:"small"},{default:l(()=>[t(Y,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":l(({collapsed:$})=>[t(J,null,{default:l(()=>[$?(n(),C(le,{key:0,icon:"fa-solid:chevron-left"})):(n(),C(le,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:l(()=>L[11]||(L[11]=[_("span",null,null,-1)])),default:l(()=>[t(M,{name:"1"},{header:l(()=>[_("span",er,o(e(a)("contentModels")),1)]),default:l(()=>[(n(!0),T(_e,null,Oe(e(O),($,Z)=>(n(),C(r,{key:$.id,size:"small"},{header:l(()=>[_("span",tr,o(e(d)($.title)),1)]),default:l(()=>[t(ae,{cols:"24","x-gap":"12"},{default:l(()=>[t(j,{span:"10"},{default:l(()=>[_("span",lr,o(e(a)("pathPrefix")),1),t(h,{value:e(z)[Z+3].pathPrefix,"onUpdate:value":u=>e(z)[Z+3].pathPrefix=u,"allow-input":ne,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(j,{span:"7"},{default:l(()=>[_("span",ar,o(e(a)("contentParam")),1),t(h,{value:e(z)[Z+3].contentParam,"onUpdate:value":u=>e(z)[Z+3].contentParam=u,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),t(j,{span:"7"},{default:l(()=>[_("span",nr,o(e(a)("contentPage")),1),t(H,{value:e(z)[Z+3].pageId,"onUpdate:value":u=>e(z)[Z+3].pageId=u,options:e(te)||[],placeholder:e(a)("selectPage"),"render-label":c,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):be("",!0)],64)}}}),or={class:"w-full"},ir=Be({__name:"Campaign",setup(pe){const a=st(),d=nt(),f=ct(),X=Aa(),{displayFormErrors:te,ckEditorToolbarItems:b}=Je(),{request:q}=Ze(),{t:U,locale:re}=He(),P=i(!1),G=i([]),N=i([]),z=i([]),v=i([]),O=i(""),S=i(),R={pageSize:12,prefix:({itemCount:r})=>ue("div",{class:"font-bold"},{default:()=>`${U("total")}: ${r}`})},W=[{title:U("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(r){return ue("div",{},{default:()=>r.title})}},{title:U("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(r){return ue("small",{},{default:()=>r.subject})}},{title:U("numberOfRecipients"),key:"recipients",width:200,render(r){return ue("div",{},{default:()=>r.recipients.length})},sortOrder:!1,sorter:"default"},{title:U("updateAt"),key:"updatedAt",width:150,render(r){return ue("div",{},{default:()=>Lt(r.updatedAt,{locale:re.value,outPattern:"DD MMMM YYYY"})})}},{title:U("createdAt"),key:"createdAt",width:150,render(r){return ue("div",{},{default:()=>Lt(r.createdAt,{locale:re.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ue(Xe,{ref:S,placeholder:U("search"),value:O.value,onInput:r=>{O.value=r}},{suffix:()=>ue(fe,{},{default:()=>ue(ye,{icon:"carbon:search"})})}),key:"actions",width:175,render(r){return ue("div",{class:"flex justify-end items-center w-full"},[ue(Te,{size:"small",type:"primary",title:U("history"),onClick:()=>{J.value=r,le.value=!0},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"mdi:history"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"info",title:U("launchCampaign"),onClick:()=>{const M=f.info({title:U("launchCampaign"),content:U("confirmLaunchCampaign",[r.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:U("yes"),negativeText:U("cancel"),onPositiveClick:async()=>{var Z,u,p,V,w,x,g;M.loading=!0;const Y=await q({url:"/email",method:"post",data:{title:r.title,subject:r.subject,content:r.content,recipients:r.recipients.filter(k=>Qt.isEmail(k)),tags:[]}}),m=(Z=X.getSettingValue("phone","string"))==null?void 0:Z.split(",")[0],$=await q({url:"/sms",method:"post",data:{from:m.replace(/\s+/g,""),content:r.rawContent,recipients:r.recipients.filter(k=>!Qt.isEmail(k))}});if(Y.failure&&Y.error)switch((V=(p=(u=Y.error)==null?void 0:u.response)==null?void 0:p.data)==null?void 0:V.errorCode){case Qe.FORM_INVALID_DATA:d.error(U("invalidData"));break;default:d.error(U("sendingFailed"))}else if($.failure&&$.error)switch((g=(x=(w=$.error)==null?void 0:w.response)==null?void 0:x.data)==null?void 0:g.errorCode){case Qe.FORM_INVALID_DATA:d.error(U("invalidData"));break;default:d.error(U("sendingFailed"))}else{const k=r.history||[];k.push({id:dt(),date:an(new Date,{locale:re.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+Y.result.message+" Phone: "+$.result.message});const ve=await q({method:"put",url:`/newsletter/campaigns/${r.id}`,data:{history:k}});ve.success&&ve.result.data?(d.success(U("success")),ne()):d.error(U("anErrorOccurred"))}M.loading=!1}})},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"mdi:send"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"warning",title:U("edit"),onClick:()=>{j(r)},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:edit"})})}),ue("div",{class:"w-2"}),ue(Te,{size:"small",type:"error",title:U("delete"),onClick:()=>{f.warning({title:U("confirm"),content:U("confirmDeleteCampaign"),positiveText:U("yes"),negativeText:U("no"),onPositiveClick:async()=>{(await q({method:"delete",url:`/newsletter/campaigns/${r.id}`})).success?(d.success(U("success")),ne()):d.error(U("anErrorOccurred"))}})},renderIcon:()=>ue(fe,null,{default:()=>ue(ye,{icon:"carbon:trash-can"})})})])},fixed:"right"}],c=Le(()=>{if(!O.value)return v.value;const r=v.value.filter(M=>M.title.toLowerCase().includes(O.value.toLowerCase())||M.subject.toLowerCase().includes(O.value.toLowerCase()));return S.value&&S.value.focus(),r}),ne=async(r=!1)=>{P.value=!0;const M=await q({url:"/newsletter/campaigns"});if(M.success&&M.result&&(v.value=M.result.data),r){const Y=await q({url:"/newsletter/emails"});Y.success&&Y.result&&(G.value=Y.result.data);const m=await q({url:"/newsletter/phones"});m.success&&m.result&&(N.value=m.result.data),z.value=[...G.value.map($=>({recipient:$.email,type:"email"})),...N.value.map($=>({recipient:$.phone,type:"phone"}))]}P.value=!1};ne(!0);const F=i(!1),L=i(!1),le=i(!1),J=i(null),E=i(null),I=i({title:"",subject:"",content:"",rawContent:"",recipients:[]}),h={title:[{required:!0,message:U("fillRequired")}],subject:[{required:!0,message:U("fillRequired")}],content:[{required:!0,message:U("fillRequired")}],rawContent:[{required:!0,message:U("fillRequired")}],recipients:[{required:!0,message:U("fillRequired")}]},j=r=>{J.value=we.cloneDeep(r),r?I.value=we.cloneDeep(r):I.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},L.value=!0},H=async()=>{var r;return(r=E.value)==null||r.validate(async M=>{var Y,m,$,Z,u,p;if(!M)if(J.value)if(J.value.title!==I.value.title&&v.value.findIndex(V=>V.title==I.value.title)>-1)d.error(U("sameCampaignTitleMessage"));else{a.start(),F.value=!0;const V={title:I.value.title,subject:I.value.subject,content:I.value.content,rawContent:I.value.rawContent,recipients:I.value.recipients},w=await q({method:"put",url:`/newsletter/campaigns/${J.value.id}`,data:V});w.success&&w.result.data&&(d.success(U("success")),ne()),F.value=!1,a.finish(),L.value=!1}else if(v.value.findIndex(V=>V.title==I.value.title)>-1)d.error(U("sameCampaignTitleMessage"));else{a.start(),F.value=!0;const V={title:I.value.title,subject:I.value.subject,content:I.value.content,rawContent:I.value.rawContent,recipients:I.value.recipients},w=await q({method:"post",url:"/newsletter/campaigns",data:V});if(w.failure&&w.error)switch(($=(m=(Y=w.error)==null?void 0:Y.response)==null?void 0:m.data)==null?void 0:$.errorCode){case Qe.FORM_INVALID_DATA:te((p=(u=(Z=w.error)==null?void 0:Z.response)==null?void 0:u.data)==null?void 0:p.data);break;default:d.error(U("anErrorOccurred"))}else d.success(U("success")),ne();F.value=!1,a.finish(),L.value=!1}}),!1},ae=(r,M)=>we.isEqual(r.slice().sort(),M.slice().sort());return(r,M)=>{const Y=It,m=kl,$=gl,Z=pt,u=Ka,p=Ht,V=Vt,w=ft,x=rt,g=pn,k=Na,ve=Oa,oe=$t,ee=wt;return n(),T(_e,null,[t(Y,{to:"#alt-action"},{default:l(()=>[t(e(Te),{type:"primary",onClick:M[0]||(M[0]=y=>j(null))},{icon:l(()=>[t(e(fe),{size:"18"},{default:l(()=>[t(e(ye),{icon:"carbon:add-alt"})]),_:1})]),default:l(()=>[D(" "+o(e(U)("addCampaign")),1)]),_:1})]),_:1}),t($,null,{default:l(()=>[t(m,{columns:W,data:e(c),pagination:R,loading:e(P),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),t(x,{show:e(L),"onUpdate:show":M[9]||(M[9]=y=>Ve(L)?L.value=y:null),loading:e(F),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(J)?e(U)("editCampaign"):e(U)("addCampaign"),"positive-text":e(U)("validate"),"negative-text":e(U)("cancel"),onPositiveClick:H,onNegativeClick:M[10]||(M[10]=y=>L.value=!1)},{default:l(()=>[t(w,{ref_key:"formRef",ref:E,class:"mt-5",model:e(I),rules:h,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Z,{label:e(U)("title"),path:"title"},{default:l(()=>[t(e(Xe),{value:e(I).title,"onUpdate:value":M[1]||(M[1]=y=>e(I).title=y),placeholder:e(U)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Z,{label:e(U)("subject"),path:"subject"},{default:l(()=>[t(e(Xe),{value:e(I).subject,"onUpdate:value":M[2]||(M[2]=y=>e(I).subject=y),placeholder:e(U)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Z,{label:e(U)("content"),path:"content"},{default:l(()=>[_("div",or,[t(u,{modelValue:e(I).content,"onUpdate:modelValue":M[3]||(M[3]=y=>e(I).content=y),"toolbar-items":e(b),placeholder:e(U)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),t(Z,{label:e(U)("rawContent"),path:"rawContent"},{default:l(()=>[t(e(Xe),{value:e(I).rawContent,"onUpdate:value":M[4]||(M[4]=y=>e(I).rawContent=y),placeholder:e(U)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),t(Z,{label:e(U)("recipients"),path:"recipients"},{default:l(()=>[t(V,{value:e(I).recipients,"onUpdate:value":M[8]||(M[8]=y=>e(I).recipients=y),options:e(z),placeholder:e(U)("recipients"),loading:e(P),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:l(()=>[t(p,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(I).recipients,e(z).filter(y=>y.type=="email").map(y=>y.recipient)),"onUpdate:checked":M[5]||(M[5]=y=>{y?e(I).recipients=e(z).filter(B=>B.type=="email").map(B=>B.recipient):e(I).recipients=e(I).recipients.filter(B=>!("_v"in r?r._v:e(Qt)).isEmail(B))})},{default:l(()=>[D(o(e(U)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),M[12]||(M[12]=_("div",{class:"h-2"},null,-1)),t(p,{size:"large",class:"w-full","default-checked":e(z).length&&ae(e(I).recipients,e(z).filter(y=>y.type=="phone").map(y=>y.recipient)),"onUpdate:checked":M[6]||(M[6]=y=>{y?e(I).recipients=e(z).filter(B=>B.type=="phone").map(B=>B.recipient):e(I).recipients=e(I).recipients.filter(B=>("_v"in r?r._v:e(Qt)).isEmail(B))})},{default:l(()=>[D(o(e(U)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),M[13]||(M[13]=_("div",{class:"h-2"},null,-1)),t(p,{size:"large",class:"w-full","default-checked":e(z).length&&e(I).recipients.length===e(z).length,"onUpdate:checked":M[7]||(M[7]=y=>{y?e(I).recipients=e(z).filter(B=>B.recipient).map(B=>B.recipient):e(I).recipients=[]})},{default:l(()=>[D(o(e(U)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),t(x,{show:e(le),"onUpdate:show":M[11]||(M[11]=y=>Ve(le)?le.value=y:null),loading:e(F),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(U)("history")},{default:l(()=>{var y,B;return[(B=(y=e(J))==null?void 0:y.history)!=null&&B.length?(n(),C(oe,{key:0,style:{"max-height":"400px"}},{default:l(()=>[t(ve,{hoverable:""},{default:l(()=>{var Ie;return[(n(!0),T(_e,null,Oe((Ie=e(J))==null?void 0:Ie.history.slice().reverse(),Q=>(n(),C(k,{key:Q.id},{default:l(()=>[t(g,{title:Q.date,"content-style":"margin-top: 10px;"},{default:l(()=>[D(o(Q.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]}),_:1})]),_:1})):(n(),C(ee,{key:1,description:e(U)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]}),_:1},8,["show","loading","title"])],64)}}}),rr={id:"header-btn"},ur={key:1,id:"alt-action"},dr={key:"contact-info"},cr={class:"text-xs"},pr={class:"text-xs"},fr={class:"text-xs"},mr={class:"text-xs"},vr={class:"text-xs"},_r={class:"text-xs"},yr={class:"text-xs"},gr={class:"flex items-center gap-2 w-full"},br={key:"appearance"},hr={class:"text-sm"},kr={class:"text-sm"},wr={class:"flex flex-col items-center justify-center text-gray-400"},xr={class:"text-sm"},Cr={class:"flex flex-col items-center justify-center text-gray-400"},Ir={class:"text-sm"},$r={class:"flex flex-col items-center justify-center text-gray-400"},Vr={class:"text-sm"},Ur={class:"flex flex-col items-center justify-center text-gray-400"},Tr={class:"text-sm"},zr={class:"text-sm"},Mr={class:"flex flex-col items-center justify-center text-gray-400"},Sr={class:"text-sm"},Ar={class:"flex flex-col items-center justify-center text-gray-400"},Er={class:"text-sm"},Dr={class:"flex flex-col items-center justify-center text-gray-400"},Lr={class:"text-sm"},Pr={class:"flex flex-col items-center justify-center text-gray-400"},Nr={class:"text-sm"},Or={class:"text-sm"},Rr={class:"flex flex-col items-center justify-center text-gray-400"},qr={class:"text-sm"},Fr={class:"flex flex-col items-center justify-center text-gray-400"},jr={class:"text-sm"},Br={class:"flex items-center justify-between"},Kr={class:"font-bold"},Yr={class:"flex items-center"},Hr={class:"flex items-center justify-between"},Gr={class:"font-bold"},Wr={class:"flex items-center"},Jr={class:"flex items-center justify-between"},Xr={class:"font-bold"},Zr={class:"flex items-center"},Qr={key:"social-networks"},eu={class:"text-xs"},tu={key:"newsletter-email"},lu={key:"newsletter-phone"},au={key:"newsletter-campaign"},nu={key:"ads"},su={key:"videos"},ou={key:"content-models"},iu={key:"menus"},ru={key:"content-permalinks"},uu={key:"page-sections"},du=Be({name:nn.CONTENT_MANAGEMENT.NAME}),cu=Be({...du,setup(pe){Ul(ke=>({"5850c9b7":e(G)}));const a=["contact-info","appearance","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],d=ke=>a.includes(ke),{t:f}=He(),X=Cn(),te=ct(),b=nt(),q=st(),{request:U}=Ze(),{displayFormErrors:re,appPrimaryColor:P,appSecondaryColor:G,pickByTheme:N,fileUrl:z,isLgScreen:v,isMdScreen:O,isSmScreen:S,isXlScreen:R,is2XlScreen:W,tr:c}=Je(),ne=yt(),F=Aa(),{pages:L}=je(We()),{loadPages:le,loadSections:J}=We(),E=vt("appConfig"),I=i(!1),h=i({name:"",icon:"",adminIcon:"",oneColorIcon:"",oneColorAdminIcon:"",logo:"",adminLogo:"",oneColorLogo:"",oneColorAdminLogo:"",adminAuthDarkBg:"",adminAuthLightBg:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),j=i(h.value),H=ll("content-management",()=>({currentMenuItemKey:i("contact-info")}))(),ae=(ke,A)=>()=>ue(fe,{color:H.currentMenuItemKey==A?"white":""},{default:()=>ue(ye,{icon:ke})}),r=(ke,A)=>()=>ue("span",{class:`${H.currentMenuItemKey==A?"text-white":""}`,id:we.camelCase(A)},{default:()=>ke}),M=Le(()=>{const ke=[{label:r(f("contactInfo"),"contact-info"),key:"contact-info",icon:ae("carbon:identification","contact-info")},{label:r(f("appearance"),"appearance"),key:"appearance",icon:ae("carbon:color-palette","appearance")},{label:r(f("socialNetworks"),"social-networks"),key:"social-networks",icon:ae("carbon:share","social-networks")},{key:"divider",type:"divider"},{label:r(f("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:ae("carbon:at","newsletter-email")},{label:r(f("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:ae("carbon:phone","newsletter-phone")},{label:r(f("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:ae("carbon:bullhorn","newsletter-campaign")},{key:"divider",type:"divider"},{label:r(f("ads"),"ads"),key:"ads",icon:ae("ic:baseline-ads-click","ads")},{key:"divider",type:"divider"},{label:r(f("videos"),"videos"),key:"videos",icon:ae("carbon:video-player","videos")},{key:"divider",type:"divider"},{label:r(f("menusManagement"),"menus"),key:"menus",icon:ae("carbon:menu","menus")},{label:r(f("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:ae("carbon:link","content-permalinks")},{key:"divider",type:"divider"},{label:r(f("contentModels"),"content-models"),key:"content-models",icon:ae("carbon:model-alt","content-models")},{label:r(f("pageSections"),"page-sections"),key:"page-sections",icon:ae("carbon:list-boxes","page-sections")},{key:"divider",type:"divider"}];for(const A of L.value)ke.push({label:r(`${f("page")} ${c(A.title)}`,`${A.slug}-page`),key:`${A.slug}-page`,icon:ae("carbon:document",`${A.slug}-page`)});return ke.push({key:"divider",type:"divider"},{label:r(f("addPage"),"add-new-page"),key:"add-new-page",icon:ae("carbon:add-alt","add-new-page")}),ke}),Y=Le(()=>we.isEqual(h.value,j.value)),m=Le(()=>ne.contentLayoutSize.height-200),$=Le(()=>ne.isLightTheme?"light":"dark"),Z=i(null),u={email:[{required:!1,message:f("fillRequired")},{trigger:["input"],validator(ke,A){return A&&!Qt.isEmail(A)?new Error(f("invalidEmail")):!0}}]},p=i();kt(()=>p.value,ke=>{h.value.additionalInfo=JSON.stringify(ke||"[]")},{deep:!0});const V=i(null),w={},x=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],g=i("logos"),k=i(!1),ve=async ke=>{switch(g.value){case"logos":h.value.logo=ke;break;case"icons":h.value.icon=ke;break;case"admin-logos":h.value.adminLogo=ke;break;case"admin-icons":h.value.adminIcon=ke;break;case"monochrome-logos":h.value.oneColorLogo=ke;break;case"monochrome-icons":h.value.oneColorIcon=ke;break;case"monochrome-admin-logos":h.value.oneColorAdminLogo=ke;break;case"monochrome-admin-icons":h.value.oneColorAdminIcon=ke;break;case"dark-backgrounds":h.value.adminAuthDarkBg=ke;break;case"light-backgrounds":h.value.adminAuthLightBg=ke;break}k.value=!1},oe={name:"",title:"",content:"",slug:""},ee=i(!1),y=i(null),B=i(oe),Ie={title:[{required:!0,message:f("fillRequired")}]},Q=i(null),Ce=ke=>{Q.value=we.cloneDeep(ke),B.value=we.cloneDeep(ke||oe),ee.value=!0},ge=async()=>{var ke;return(ke=y.value)==null||ke.validate(async A=>{var Ue,K,se,$e,ce,Ee,ze;if(!A){q.start(),I.value=!0;const De={title:B.value.title};Q.value||(De.name=we.startCase(we.camelCase(c(B.value.title))).replace(/\s+/g,""));const Ne=await U({method:Q.value?"put":"post",url:Q.value?`/pages/${Q.value.slug}`:"/pages",data:De});if(Ne.failure&&Ne.error)switch((se=(K=(Ue=Ne.error)==null?void 0:Ue.response)==null?void 0:K.data)==null?void 0:se.errorCode){case Qe.FORM_INVALID_DATA:re((Ee=(ce=($e=Ne.error)==null?void 0:$e.response)==null?void 0:ce.data)==null?void 0:Ee.data);break;default:b.error(f("anErrorOccurred"))}else b.success(f("success")),le(),H.currentMenuItemKey=`${(ze=Ne.result.data)==null?void 0:ze.slug}-page`,ee.value=!1;I.value=!1,q.finish()}}),!1},de=async(ke=!1)=>{var A;q.start(),I.value=!0,le(),ke&&J(),await F.loadInformation(),(A=F.items)==null||A.forEach(Ue=>{h.value[Ue.key]!=null&&(h.value[Ue.key]=Ue.value)}),j.value=we.cloneDeep(h.value);try{p.value=JSON.parse(h.value.additionalInfo||"[]")}catch{p.value=[]}I.value=!1,q.finish()};de(!0),Ml(()=>{X.params.key&&d(X.params.key)&&(H.currentMenuItemKey=X.params.key)});const Re=async()=>{I.value=!0;const ke=await U({url:"/app-information",method:"put",data:h.value});ke.success&&ke.result?b.success(f("success")):b.error(f("unableToUpdateSettings")),await de()},xe=["contact-info","appearance","social-networks"];kt(()=>H.currentMenuItemKey,(ke,A)=>{ke==="add-new-page"?(H.currentMenuItemKey=A,Ce(null)):xe.includes(A)&&!xe.includes(ke)&&(Y.value||te.warning({title:f("confirm"),content:f("marketInfoDiscardChangesConfirm"),positiveText:f("yes"),negativeText:f("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{H.currentMenuItemKey=A}}))});const ie=i();return kt(()=>[O.value,S.value,v.value,R.value],([ke,A,Ue,K])=>{ie.value=ke||A||Ue||K,setTimeout(()=>{ie.value=void 0},500)},{immediate:!0}),(ke,A)=>{var St;const Ue=Te,K=it,se=fn,$e=mn,ce=Xe,Ee=pt,ze=Ft,De=ht,Ne=bt,et=zl,xt=ft,Pe=lt,Ge=Fa,Fe=Ot,he=Tt,Ke=vn,Ut=Xa,Rt=Kt,Mt=rt;return n(),T(_e,null,[t(Ut,null,{"header-extra":l(()=>[t(K,null,{default:l(()=>[_("div",rr,[xe.includes(e(H).currentMenuItemKey)?(n(),C(Ue,{key:0,loading:e(I),disabled:e(Y),type:"primary",onClick:Re},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:save"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("save")),1)]),_:1},8,["loading","disabled"])):(n(),T("div",ur))])]),_:1})]),default:l(()=>[t(Pe,{embedded:""},{default:l(()=>[t(Ke,{style:qe(`height: ${e(m)}px`)},{default:l(()=>[t(Ke,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:l(()=>[t($e,{bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:e(ie),"default-collapsed":!e(W),"collapsed-width":64,"native-scrollbar":!1,width:e(W)?300:275},{default:l(()=>[t(se,{value:e(H).currentMenuItemKey,"onUpdate:value":A[0]||(A[0]=Me=>e(H).currentMenuItemKey=Me),"collapsed-width":64,"collapsed-icon-size":22,options:e(M)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),t(Ke,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:l(()=>[t(en,{name:"slide-fade"},{default:l(()=>[dl(_("section",dr,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"contactInfoFormRef",ref:Z,model:e(h),rules:u,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{path:"name"},{label:l(()=>[_("b",cr,o(e(f)("websiteName")),1)]),default:l(()=>[t(ce,{value:e(h).name,"onUpdate:value":A[1]||(A[1]=Me=>e(h).name=Me),placeholder:e(f)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"email"},{label:l(()=>[_("b",pr,o(e(f)("email")),1)]),default:l(()=>[t(ce,{value:e(h).email,"onUpdate:value":A[2]||(A[2]=Me=>e(h).email=Me),placeholder:e(f)("email"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(ze,{span:12,path:"phone"},{label:l(()=>[_("b",fr,o(e(f)("phone")),1)]),default:l(()=>[t(ce,{value:e(h).phone,"onUpdate:value":A[3]||(A[3]=Me=>e(h).phone=Me),placeholder:e(f)("phone"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"address"},{label:l(()=>[_("span",mr,[_("b",null,o(e(f)("address")),1)])]),default:l(()=>[t(ce,{value:e(h).address,"onUpdate:value":A[4]||(A[4]=Me=>e(h).address=Me),placeholder:e(f)("address"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),t(De,{"x-gap":"12",span:24},{default:l(()=>[t(ze,{span:12,path:"postalCode"},{label:l(()=>[_("b",vr,o(e(f)("postalCode")),1)]),default:l(()=>[t(ce,{value:e(h).postalCode,"onUpdate:value":A[5]||(A[5]=Me=>e(h).postalCode=Me),placeholder:e(f)("postalCode"),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),t(Ee,{path:"description"},{label:l(()=>[_("b",_r,o(e(f)("description")),1)]),default:l(()=>[t(Ne,{modelValue:e(h).description,"onUpdate:modelValue":A[6]||(A[6]=Me=>e(h).description=Me),placeholder:e(f)("description"),"selector-span":3,type:"textarea",class:"w-full",rows:6,sync:""},null,8,["modelValue","placeholder"])]),_:1}),t(Ee,{path:"additionalInfo"},{label:l(()=>[_("b",yr,o(e(f)("additionalInfo")),1)]),default:l(()=>[t(et,{value:e(p),"onUpdate:value":A[7]||(A[7]=Me=>Ve(p)?p.value=Me:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":l(()=>[D(o(e(f)("add")),1)]),default:l(({value:Me})=>[_("div",gr,[t(ce,{value:Me.name,"onUpdate:value":gt=>Me.name=gt,placeholder:e(f)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),t(ce,{value:Me.content,"onUpdate:value":gt=>Me.content=gt,placeholder:e(f)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(H).currentMenuItemKey==="contact-info"]]),dl(_("section",br,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",hr,o(e(f)("website")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",kr,o(e(f)("logo")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).logo?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).logo),onClick:A[8]||(A[8]=()=>{g.value="logos",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[9]||(A[9]=()=>{g.value="logos",k.value=!0})},[_("div",wr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).logo?(n(),C(Ue,{key:2,quaternary:"",onClick:A[10]||(A[10]=()=>e(h).logo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",xr,o(e(f)("icon")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).icon?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).icon),onClick:A[11]||(A[11]=()=>{g.value="icons",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[12]||(A[12]=()=>{g.value="icons",k.value=!0})},[_("div",Cr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).icon?(n(),C(Ue,{key:2,quaternary:"",onClick:A[13]||(A[13]=()=>e(h).icon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Ir,o(e(f)("logoMonochrome")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorLogo?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).oneColorLogo),onClick:A[14]||(A[14]=()=>{g.value="monochrome-logos",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[15]||(A[15]=()=>{g.value="monochrome-logos",k.value=!0})},[_("div",$r,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).oneColorLogo?(n(),C(Ue,{key:2,quaternary:"",onClick:A[16]||(A[16]=()=>e(h).oneColorLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Vr,o(e(f)("iconMonochrome")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorIcon?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).oneColorIcon),onClick:A[17]||(A[17]=()=>{g.value="monochrome-icons",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[18]||(A[18]=()=>{g.value="monochrome-icons",k.value=!0})},[_("div",Ur,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).oneColorIcon?(n(),C(Ue,{key:2,quaternary:"",onClick:A[19]||(A[19]=()=>e(h).oneColorIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",Tr,o(e(f)("administration")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",zr,o(e(f)("logo")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminLogo?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).adminLogo),onClick:A[20]||(A[20]=()=>{g.value="admin-logos",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[21]||(A[21]=()=>{g.value="admin-logos",k.value=!0})},[_("div",Mr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).adminLogo?(n(),C(Ue,{key:2,quaternary:"",onClick:A[22]||(A[22]=()=>e(h).adminLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Sr,o(e(f)("icon")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminIcon?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).adminIcon),onClick:A[23]||(A[23]=()=>{g.value="admin-icons",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[24]||(A[24]=()=>{g.value="admin-icons",k.value=!0})},[_("div",Ar,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).adminIcon?(n(),C(Ue,{key:2,quaternary:"",onClick:A[25]||(A[25]=()=>e(h).adminIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Er,o(e(f)("logoMonochrome")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorAdminLogo?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).oneColorAdminLogo),onClick:A[26]||(A[26]=()=>{g.value="monochrome-admin-logos",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[27]||(A[27]=()=>{g.value="monochrome-admin-logos",k.value=!0})},[_("div",Dr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).oneColorAdminLogo?(n(),C(Ue,{key:2,quaternary:"",onClick:A[28]||(A[28]=()=>e(h).oneColorAdminLogo="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Lr,o(e(f)("iconMonochrome")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).oneColorAdminIcon?(n(),C(Ge,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).oneColorAdminIcon),onClick:A[29]||(A[29]=()=>{g.value="monochrome-admin-icons",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[30]||(A[30]=()=>{g.value="monochrome-admin-icons",k.value=!0})},[_("div",Pr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).oneColorAdminIcon?(n(),C(Ue,{key:2,quaternary:"",onClick:A[31]||(A[31]=()=>e(h).oneColorAdminIcon="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{segmented:"",size:"small"},{header:l(()=>[_("span",Nr,o(e(f)("adminAuthPagesBg")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":"8","y-gap":"8"},{default:l(()=>[t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",Or,o(e(f)("lightMode")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminAuthLightBg?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).adminAuthLightBg),onClick:A[32]||(A[32]=()=>{g.value="light-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[33]||(A[33]=()=>{g.value="light-backgrounds",k.value=!0})},[_("div",Rr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).adminAuthLightBg?(n(),C(Ue,{key:2,quaternary:"",onClick:A[34]||(A[34]=()=>e(h).adminAuthLightBg="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:l(()=>[_("span",qr,o(e(f)("darkMode")),1)]),default:l(()=>[t(K,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:l(()=>[e(h).adminAuthDarkBg?(n(),C(Ge,{key:0,class:"cursor-pointer","object-fit":"contain",style:qe("border: 1px dashed "+e(N)(e(P),"white")),size:125,src:e(z)(e(h).adminAuthDarkBg),onClick:A[35]||(A[35]=()=>{g.value="dark-backgrounds",k.value=!0})},null,8,["style","src"])):(n(),T("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:qe(`border: 1px dashed ${e(N)(e(P),"white")}; width: 125px; height: 125px`),onClick:A[36]||(A[36]=()=>{g.value="dark-backgrounds",k.value=!0})},[_("div",Fr,[t(e(fe),{size:"50"},{default:l(()=>[t(e(ye),{icon:"carbon:image"})]),_:1}),_("span",null,o(e(f)("import")),1)])],4)),e(h).adminAuthDarkBg?(n(),C(Ue,{key:2,quaternary:"",onClick:A[37]||(A[37]=()=>e(h).adminAuthDarkBg="")},{icon:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),default:l(()=>[D(" "+o(e(f)("clear")),1)]),_:1})):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Pe,{embedded:"","content-class":"!pt-0"},{default:l(()=>[t(Pe,{hoverable:"",segmented:"",size:"small"},{header:l(()=>[_("span",jr,o(e(f)("adminColors")),1)]),default:l(()=>[t(De,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:l(()=>[t(Fe,null,{default:l(()=>[_("div",Br,[_("span",Kr,o(e(f)("baseColor")),1),_("div",Yr,[e(h).primaryColor?(n(),T(_e,{key:0},[t(Ue,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[38]||(A[38]=Me=>e(h).primaryColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(he,{vertical:""})],64)):be("",!0),t(e(el),{value:e(h).primaryColor,"onUpdate:value":A[39]||(A[39]=Me=>e(h).primaryColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Fe,null,{default:l(()=>[_("div",Hr,[_("span",Gr,o(e(f)("secondaryColor")),1),_("div",Wr,[e(h).secondaryColor?(n(),T(_e,{key:0},[t(Ue,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[40]||(A[40]=Me=>e(h).secondaryColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(he,{vertical:""})],64)):be("",!0),t(e(el),{value:e(h).secondaryColor,"onUpdate:value":A[41]||(A[41]=Me=>e(h).secondaryColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1}),t(Fe,null,{default:l(()=>[_("div",Jr,[_("span",Xr,o(e(f)("tertiaryColor")),1),_("div",Zr,[e(h).accentColor?(n(),T(_e,{key:0},[t(Ue,{text:"",type:"error",style:{"font-size":"21px"},onClick:A[42]||(A[42]=Me=>e(h).accentColor="")},{default:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:"carbon:trash-can"})]),_:1})]),_:1}),t(he,{vertical:""})],64)):be("",!0),t(e(el),{value:e(h).accentColor,"onUpdate:value":A[43]||(A[43]=Me=>e(h).accentColor=Me),class:"cursor-pointer",theme:e($),format:"hex",size:"25"},null,8,["value","theme"])])])]),_:1})]),_:1})]),_:1})]),_:1})],512),[[ml,e(H).currentMenuItemKey==="appearance"]]),dl(_("section",Qr,[t(Pe,{embedded:""},{default:l(()=>[t(Pe,{hoverable:""},{default:l(()=>[t(xt,{ref_key:"socialNetworksFormRef",ref:V,model:e(h),rules:w,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(De,{"x-gap":"12",span:24},{default:l(()=>[(n(),T(_e,null,Oe(x,Me=>t(ze,{key:Me.name,span:12,path:Me.name},{label:l(()=>[_("b",eu,o(e(f)(Me.name)),1)]),default:l(()=>[t(ce,{value:e(h)[Me.name],"onUpdate:value":gt=>e(h)[Me.name]=gt,placeholder:e(f)(Me.name),class:"w-full"},{prefix:l(()=>[t(e(fe),null,{default:l(()=>[t(e(ye),{icon:Me.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],512),[[ml,e(H).currentMenuItemKey==="social-networks"]]),e(H).currentMenuItemKey==="newsletter-email"?(n(),T("section",tu,[t(vi)])):be("",!0),e(H).currentMenuItemKey==="newsletter-phone"?(n(),T("section",lu,[t(yi)])):be("",!0),e(H).currentMenuItemKey==="newsletter-campaign"?(n(),T("section",au,[t(ir)])):be("",!0),e(H).currentMenuItemKey==="ads"?(n(),T("section",nu,[t(Dn)])):be("",!0),e(H).currentMenuItemKey==="videos"?(n(),T("section",su,[t(Do)])):be("",!0),e(H).currentMenuItemKey==="content-models"?(n(),T("section",ou,[t(Ri)])):be("",!0),e(H).currentMenuItemKey==="menus"?(n(),T("section",iu,[t(_o)])):be("",!0),e(H).currentMenuItemKey==="content-permalinks"?(n(),T("section",ru,[t(sr)])):be("",!0),e(H).currentMenuItemKey==="page-sections"?(n(),T("section",uu,[t(pi)])):be("",!0),(n(!0),T(_e,null,Oe(e(L),(Me,gt)=>(n(),T(_e,{key:`${Me.slug}-page`},[e(H).currentMenuItemKey===`${Me.slug}-page`?(n(),T("section",{key:`${Me.slug}-page`},[t(As,{slug:Me.slug,"open-form-modal":Ce,onDelete:()=>{e(H).currentMenuItemKey=e(L).length>1?`${e(L)[gt-1].slug}-page`:a[0],e(le)()}},null,8,["slug","onDelete"])])):be("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1}),t(Rt,{show:e(k),"onUpdate:show":A[44]||(A[44]=Me=>Ve(k)?k.value=Me:null),title:e(f)("selectImage"),"upload-config":{folder:e(g),limit:0,maxSize:0,baseUrl:((St=e(E))==null?void 0:St.apiUrl)+"/media-files/upload",excludedExtensions:[]},onSubmit:ve},null,8,["show","title","upload-config"]),t(Mt,{show:e(ee),"onUpdate:show":A[46]||(A[46]=Me=>Ve(ee)?ee.value=Me:null),loading:e(I),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:e(Q)?e(f)("editPage"):e(f)("addPage"),"positive-text":e(f)("validate"),"negative-text":e(f)("cancel"),onPositiveClick:ge,onNegativeClick:A[47]||(A[47]=Me=>ee.value=!1)},{default:l(()=>[t(xt,{ref_key:"addPageFormRef",ref:y,model:e(B),rules:Ie,"show-require-mark":!1,size:"medium"},{default:l(()=>[t(Ee,{label:e(f)("title"),path:"title",class:"mt-5"},{default:l(()=>[t(Ne,{modelValue:e(B).title,"onUpdate:modelValue":A[45]||(A[45]=Me=>e(B).title=Me),placeholder:e(f)("title"),"selector-span":5,class:"w-full",sync:"",onKeydown:tn(ge,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}});const Mc=zt(cu,[["__scopeId","data-v-b600202c"]]);export{Mc as default};
