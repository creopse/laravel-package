const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as me}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Vl,a as ys,b as ji}from"./index.vue_vue_type_script_setup_true_lang-Be6Rlz7O.js";import{_ as Fc}from"./PageLayout.vue_vue_type_script_setup_true_lang-B_VUtTLL.js";import{_ as Sl}from"./I18nInput-ezlPFzCs.js";import{a0 as bs,e as et,H as wt,u as ut,f as Ft,t as mn,w as Ol,a1 as _c,a2 as vc,q as Oc,s as Ri,_ as El,v as Rc,d as qc,A as jc,B as Kc,R as gc,C as Gc,a3 as yc,a4 as so,L as Zi,I as Ta,p as Eo,x as Ki,z as Yc,a5 as bc,a6 as Hc,a7 as Wc,a8 as hc,a9 as Qc,aa as Jc,ab as Gi,ac as wc,y as kc,ad as Xc,c as Zc,ae as ed,af as td,D as nd,U as ld,ag as ad}from"./main-FI4nmu4j.js";import{I as ce}from"./iconify_vue-DXPEksg3.js";import{_ as Js}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-SI8umMkK.js";import{u as Ue}from"./vue-i18n-B92nPylK.js";import{u as Xe,t as An,p as ot,H as Hn,l as Ma,S as ya,_ as bn,q as hn,z as ul,D as zl,B as Le,h as O,F as Tl,a as pl,d as al,e as ba,c as jt,W as zo,X as To,b as ml,a6 as od,a2 as qi,V as Xs,o as Rl,Y as sd,r as Dl,U as Zs,v as ei,w as Yi,f as Hi,x as ql,y as jl,A as Mo,a7 as id,a8 as rd,C as $c,k as io,I as xc,Q as ro,R as Wi,L as Qi,s as Cc,a9 as ti,aa as cd,ab as Ic,ac as Vc,m as Ji,ad as Sc,ae as dd,af as ud,a3 as pd,ag as md,Z as fd,$ as _d,a0 as vd}from"./naive-ui-dfg6Ko-R.js";import{_ as de}from"./lodash-C_MgVQnG.js";import{_ as Uo}from"./fawmi_vue-google-maps-yyESU4s0.js";import{F as gs,a as Ec,b as zc,u as gd,_ as yd,C as yl,c as hs,d as Tc,e as bd,M as hl,f as hd,g as Mc,h as wd,i as kd,j as $d,I as xd,A as Cd,k as $s,l as Id}from"./page-D9a4-d2w.js";import{v as En}from"./uuid-8I8R7izr.js";import{u as Vd,a as Sd}from"./article-mwbaB-gX.js";import{u as Ed}from"./tanstack_vue-query-BsmfbQHq.js";import{s as Uc}from"./slugify-BFyLO-pG.js";import{_ as zd}from"./media-file-DbHn0EYD.js";import{r as Td}from"./vueuse_shared-B0wwFjQU.js";import{_ as So}from"./jsoneditor-BJ7iDtct.js";import{u as Nc}from"./vueuse_core-DKs1Kb2a.js";import{_ as Dc}from"./UploadExcel-BLd5EB-T.js";import{_ as Vo}from"./validator-DC79P2ge.js";import{_ as Md}from"./VueTelInputWrapper-wzV2NSts.js";import{i as Ud}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{_ as Nd}from"./index.vue_vue_type_style_index_0_lang-D7PNiwkM.js";import{u as Dd}from"./email-fIPoF7FC.js";import{u as Ad}from"./vue-shepherd-CZJ8KBfd.js";import{a as Pd}from"./vue-router-DS5MTONl.js";var ga=(f=>(f.IMAGE="image",f.VIDEO="video",f))(ga||{});const Ac=(f,e)=>bs(["ad-identifiers"],async()=>{const{request:s}=et(),n=await s({url:"/ad-identifiers"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...f}),Bd=(f,e)=>bs(["ads"],async()=>{const{request:s}=et(),n=await s({url:"/ads"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...f}),Ld=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe();return wt({queryKey:["ad-identifiers"],operation:"insert",getItemId:t=>t.id,mutationFn:async t=>{const a=await s({method:"post",url:"/ad-identifiers",data:t});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(t?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Fd=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe();return wt({queryKey:["ad-identifiers"],operation:"update",getItemId:t=>t.id,mutationFn:async t=>{const a=await s({method:"put",url:`/ad-identifiers/${t.id}`,data:t});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:t=>{t?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(t?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Od=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe();return wt({queryKey:["ad-identifiers"],operation:"remove",getItemId:i=>i.id,mutationFn:async({id:i})=>{const t=await e({method:"delete",url:`/ad-identifiers/${i}`});if(!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:i=>{n.error(s("anErrorOccurred"))},...f}})},{useModel:Rd,defineComponent:qd}=await me("vue"),{unref:it,resolveComponent:Cy,createVNode:xt,toDisplayString:po,createTextVNode:li,withCtx:Bt,renderList:jd,Fragment:er,openBlock:mo,createElementBlock:ai,createElementVNode:No,createCommentVNode:Kd,normalizeClass:tr,createBlock:oi,isRef:Gd}=await me("vue"),Yd={class:"flex items-center justify-between"},Hd={class:"flex flex-col"},Wd={class:"text-sm font-bold"},Qd={class:"text-xs font-normal"},Jd={key:0,class:"text-xs font-bold"},{ref:Do}=await me("vue"),Xd=qd({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(f){const{t:e}=Ue(),{pickByTheme:s,formatKey:n}=ut(),i=Rd(f,"show"),{data:t,isPending:a}=Ac(),{mutate:c}=Od(),{mutate:I}=Ld(),{mutate:ve}=Fd(),ie=An(),L=ot(),he=Do(!1),X=Do(!1),T=Do(null),r=Do(null),M=Do({id:"",reusable:!1,contentType:ga.IMAGE,contentSize:"",params:[]}),ue={id:[{required:!0,message:e("fillRequired")}]},le=ne=>{T.value=de.cloneDeep(ne),M.value=de.cloneDeep(ne||{id:"",reusable:!1,contentType:ga.IMAGE,contentSize:"",params:[]}),X.value=!0},D=async()=>(r.value?.validate(async ne=>{if(!ne){L.start(),he.value=!0;const U={id:M.value.id,reusable:M.value.reusable,contentType:M.value.contentType,contentSize:M.value.contentSize,params:M.value.params};T.value?ve(U,{onSuccess:()=>{X.value=!1}}):I(U,{onSuccess:()=>{X.value=!1}}),he.value=!1,L.finish()}}),!1),j=async ne=>{ie.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{c({id:ne.id})}})};return(ne,U)=>{const z=ce,q=Le,W=hn,A=ul,K=zl,d=O,V=bn,_=ya,k=Tl,x=Ma,g=Hn,C=jt,ae=ba,ye=al,Q=To,h=zo,y=od,$e=ml,$=pl;return mo(),ai(er,null,[xt(g,{show:i.value,"onUpdate:show":U[2]||(U[2]=S=>i.value=S),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:it(e)("adIdentifiers")},{"header-extra":Bt(()=>[xt(W,{align:"center"},{default:Bt(()=>[xt(q,{secondary:"",size:"small",type:"primary",disabled:it(a),onClick:U[0]||(U[0]=S=>le(null))},{default:Bt(()=>[xt(z,{icon:"carbon:add-alt",class:"mr-1"}),li(" "+po(it(e)("add")),1)]),_:1},8,["disabled"]),xt(q,{secondary:"",size:"small",type:"error",disabled:it(a),onClick:U[1]||(U[1]=S=>i.value=!1)},{default:Bt(()=>[xt(z,{icon:"carbon:close",class:"mr-1"}),li(" "+po(it(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Bt(()=>[xt(x,{show:it(a)},{default:Bt(()=>[it(t)?.length?(mo(),oi(_,{key:0,style:{"max-height":"400px"}},{default:Bt(()=>[(mo(!0),ai(er,null,jd(it(t),S=>(mo(),oi(V,{key:S.id,embedded:"",size:"small",class:"mb-2"},{default:Bt(()=>[No("div",Yd,[No("div",Hd,[No("span",Wd,po(S.id),1),No("div",null,[No("span",Qd,po(S.contentType===it(ga).IMAGE?it(e)("image"):it(e)("video")),1),S.contentSize?(mo(),ai("span",Jd," Â ("+po(S.contentSize)+") ",1)):Kd("",!0)])]),xt(W,null,{default:Bt(()=>[xt(A,{size:"medium",bordered:!1,type:S.reusable?"info":"warning"},{default:Bt(()=>[li(po(S.reusable?it(e)("reusable"):it(e)("notReusable")),1)]),_:2},1032,["type"]),xt(K,{vertical:"",class:tr(["!mx-0",it(s)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),xt(q,{size:"small",type:"warning",secondary:"",onClick:l=>le(S)},{default:Bt(()=>[xt(d,null,{default:Bt(()=>[xt(z,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),xt(q,{size:"small",type:"error",secondary:"",onClick:l=>j(S)},{default:Bt(()=>[xt(d,null,{default:Bt(()=>[xt(z,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(mo(),oi(V,{key:1,size:"large",class:tr(`mb-2 !border-dashed !border-2 ${it(s)("!border-zinc-300","!border-zinc-600")}`)},{default:Bt(()=>[xt(k,{description:it(e)("noIdentifierAdded")},{icon:Bt(()=>[xt(d,{size:"60"},{default:Bt(()=>[xt(z,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),xt(g,{show:it(X),"onUpdate:show":U[8]||(U[8]=S=>Gd(X)?X.value=S:null),loading:it(he),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:it(T)?it(e)("editAdIdentifier"):it(e)("addAdIdentifier"),"positive-text":it(e)("validate"),"negative-text":it(e)("cancel"),onPositiveClick:D,onNegativeClick:U[9]||(U[9]=S=>X.value=!1)},{default:Bt(()=>[xt($,{ref_key:"formRef",ref:r,model:it(M),rules:ue,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Bt(()=>[xt(ye,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(ae,{span:16,label:it(e)("identifier"),path:"id"},{default:Bt(()=>[xt(C,{value:it(M).id,placeholder:it(e)("identifier"),disabled:it(T)!=null,class:"w-full","onUpdate:value":U[3]||(U[3]=S=>it(M).id=it(n)(S))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),xt(ae,{span:8,label:it(e)("contentSize"),path:"contentSize"},{default:Bt(()=>[xt(C,{value:it(M).contentSize,"onUpdate:value":U[4]||(U[4]=S=>it(M).contentSize=S),placeholder:it(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),xt(ye,{span:24,"x-gap":"12"},{default:Bt(()=>[xt(ae,{span:12,label:it(e)("status"),path:"reusable"},{default:Bt(()=>[xt(h,{value:it(M).reusable,"onUpdate:value":U[5]||(U[5]=S=>it(M).reusable=S),name:"reusable",class:"w-full"},{default:Bt(()=>[xt(Q,{value:!1,label:it(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),xt(Q,{value:!0,label:it(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),xt(ae,{span:12,label:it(e)("contentType"),path:"contentType"},{default:Bt(()=>[xt(h,{value:it(M).contentType,"onUpdate:value":U[6]||(U[6]=S=>it(M).contentType=S),name:"contentType",class:"w-full"},{default:Bt(()=>[xt(Q,{value:it(ga).IMAGE,label:it(e)("image"),class:"w-[50%]"},null,8,["value","label"]),xt(Q,{value:it(ga).VIDEO,label:it(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),xt($e,{label:it(e)("settings"),path:"params"},{default:Bt(()=>[xt(y,{value:it(M).params,"onUpdate:value":U[7]||(U[7]=S=>it(M).params=S),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Zd=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["ads"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/ads",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},eu=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["ads"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/ads/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},tu=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["ads"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/ads/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},{defineComponent:nu}=await me("vue"),{unref:re,createVNode:ct,withCtx:Ct,toDisplayString:Na,createTextVNode:Da,openBlock:Kl,createBlock:xs,createCommentVNode:si,resolveComponent:Iy,isRef:fo,Fragment:Cs,createElementBlock:_o,normalizeStyle:nr,createElementVNode:ii,renderList:lu}=await me("vue"),au={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},ou={id:"video",autoplay:"",controls:"",style:{width:"100%"}},su=["src"],{inject:iu,ref:fl,h:cn,computed:lr}=await me("vue"),ru=nu({__name:"index",setup(f){const e=Xe(),s=An(),n=iu("appConfig"),{data:i}=Ac(),{data:t,isPending:a}=Bd(),{mutate:c,isPending:I}=tu(),{mutate:ve,isPending:ie}=Zd(),{mutate:L,isPending:he}=eu(),{tr:X,fileUrl:T,pickByTheme:r,appSecondaryColor:M,appPrimaryColor:ue,isInDevMode:le}=ut(),{t:D,locale:j}=Ue(),ne=fl(""),U=fl(),z={pageSize:12,prefix:({itemCount:l})=>cn("div",{class:"font-bold"},{default:()=>`${D("total")}: ${l}`})},q=[{title:D("preview"),key:"image",width:200,fixed:"left",render(l){return l.adIdentifier?.contentType==ga.IMAGE?cn(qi,{src:l.contentUrl??"",objectFit:"cover",width:200,height:100}):cn("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[cn(O,{size:50,color:M.value},{default:()=>cn(ce,{icon:"carbon:document-video"})})])}},{title:D("identifier"),key:"pid",width:150,fixed:"left",render(l){return cn("small",{},{default:()=>l.pid})}},{title:D("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(l){return cn("div",{},{default:()=>X(l.title)})}},{title:D("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return cn("small",{},{default:()=>X(l.description)})}},{title:D("status"),key:"isActive",width:100,render(l){return cn(ul,{type:l.display?"success":"warning",bordered:!1},{default:()=>l.display?D("visible"):D("hidden")})},sortOrder:!1,sorter:"default"},{title:D("updateAt"),key:"updatedAt",width:125,render(l){return cn("div",{},{default:()=>Ol(l.updatedAt,{locale:j.value,outPattern:"DD MMMM YYYY"})})}},{title:D("createdAt"),key:"createdAt",width:125,render(l){return cn("div",{},{default:()=>Ol(l.createdAt,{locale:j.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>cn(jt,{ref:U,placeholder:D("search"),value:ne.value,onInput:l=>{ne.value=l}},{suffix:()=>cn(O,{},{default:()=>cn(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return cn("div",{class:"flex justify-end items-center w-full"},[cn(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{ae(l)},renderIcon:()=>cn(O,null,{default:()=>cn(ce,{icon:"carbon:edit"})})}),cn("div",{class:"w-2"}),cn(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{s.warning({title:D("confirm"),content:D("confirmDeleteAd"),positiveText:D("yes"),negativeText:D("no"),onPositiveClick:async()=>{l.id&&c({id:l.id})}})},renderIcon:()=>cn(O,null,{default:()=>cn(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],W=lr(()=>{if(!ne.value)return t.value;const l=t.value?.filter(o=>o.pid.toLowerCase().includes(ne.value.toLowerCase())||o.title.toLowerCase().includes(ne.value.toLowerCase())||o.description?.toLowerCase().includes(ne.value.toLowerCase()));return U.value&&U.value.focus(),l}),A=fl(!1),K=fl(!1),d=fl(ga.IMAGE),V=fl(),_=fl(null),k=fl(null),x=fl({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),g={pid:[{required:!0,message:D("fillRequired")}],title:[{required:!0,message:D("fillRequired")}],content:[{required:!0,message:D("fillRequired")}]},C=lr({get:()=>!x.value.broadcastStart||!x.value.broadcastEnd?null:[x.value.broadcastStart||"",x.value.broadcastEnd||""],set:l=>{l?(x.value.broadcastStart=l[0],x.value.broadcastEnd=l[1]):(x.value.broadcastStart=null,x.value.broadcastEnd=null)}}),ae=l=>{_.value=de.cloneDeep(l),l?(x.value=de.cloneDeep(l),l.data||(x.value.data={})):x.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},V.value=i.value?.find(o=>o.id==x.value.pid)?.params,A.value=!0},ye=l=>cn("span",{},{default:()=>l.id+(l.contentSize?` (${l.contentSize})`:"")}),Q=async()=>(k.value?.validate(async l=>{if(!l){const o={pid:x.value.pid,title:x.value.title,display:x.value.display,content:x.value.content,description:x.value.description,data:x.value.data,broadcastStart:x.value.broadcastStart,broadcastEnd:x.value.broadcastEnd};_.value?_.value.title!==x.value.title&&(t.value||[]).findIndex(b=>b.title==x.value.title)>-1?e.error(D("sameAdTitleMessage")):L({id:_.value.id,...o},{onSuccess:()=>{}}):(t.value||[]).findIndex(b=>b.title==x.value.title)>-1?e.error(D("sameAdTitleMessage")):ve(o,{onSuccess:()=>{}}),A.value=!1}}),!1),h=fl(!1),y=fl(!1),$e=fl(!1),$=fl(""),S=fl("");return(l,o)=>{const b=hn,N=Vl,F=Xs,Y=Js,E=Sl,P=ml,ke=sd,Ye=Dl,ee=ba,qe=To,Ce=zo,Ze=al,B=Rl,w=Zs,v=pl,G=Hn,mt=ys;return Kl(),_o(Cs,null,[ct(N,{to:"#alt-action"},{default:Ct(()=>[ct(b,null,{default:Ct(()=>[re(le)?(Kl(),xs(re(Le),{key:0,secondary:"",type:"warning",onClick:o[0]||(o[0]=se=>K.value=!0)},{default:Ct(()=>[ct(re(O),{size:"26"},{default:Ct(()=>[ct(re(ce),{icon:"carbon:id"})]),_:1}),Da(" "+Na(re(D)("identifiers")),1)]),_:1})):si("",!0),ct(re(Le),{type:"primary",secondary:"",onClick:o[1]||(o[1]=se=>ae(null))},{icon:Ct(()=>[ct(re(O),{size:"18"},{default:Ct(()=>[ct(re(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Ct(()=>[Da(" "+Na(re(D)("addAd")),1)]),_:1})]),_:1})]),_:1}),ct(Y,null,{default:Ct(()=>[ct(F,{columns:q,data:re(W),pagination:z,loading:re(a),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),ct(G,{show:re(A),"onUpdate:show":o[12]||(o[12]=se=>fo(A)?A.value=se:null),loading:re(ie)||re(he)||re(I),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:re(_)?re(D)("editAd"):re(D)("addAd"),"positive-text":re(D)("validate"),"negative-text":re(D)("cancel"),onPositiveClick:Q,onNegativeClick:o[13]||(o[13]=se=>A.value=!1)},{default:Ct(()=>[ct(v,{ref_key:"formRef",ref:k,class:"mt-5",model:re(x),rules:g,"show-require-mark":!1,size:"medium"},{default:Ct(()=>[ct(Ze,{cols:"24","x-gap":12},{default:Ct(()=>[ct(B,{span:"12"},{default:Ct(()=>[ct(P,{"show-label":!1,path:"title"},{default:Ct(()=>[ct(E,{modelValue:re(x).title,"onUpdate:modelValue":o[2]||(o[2]=se=>re(x).title=se),placeholder:re(D)("title"),class:"w-full",sync:""},{label:Ct(()=>[Da(Na(re(D)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(P,{"show-label":!1,path:"description"},{default:Ct(()=>[ct(E,{modelValue:re(x).description,"onUpdate:modelValue":o[3]||(o[3]=se=>re(x).description=se),placeholder:re(D)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ct(()=>[Da(Na(re(D)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ct(P,{label:re(D)("broadcastPeriod"),path:"broadcastPeriod"},{default:Ct(()=>[ct(ke,{"formatted-value":re(C),"onUpdate:formattedValue":o[4]||(o[4]=se=>fo(C)?C.value=se:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),ct(Ze,{"x-gap":"12",span:24},{default:Ct(()=>[ct(ee,{span:12,label:re(D)("identifier"),path:"pid"},{default:Ct(()=>[ct(Ye,{value:re(x).pid,"onUpdate:value":[o[5]||(o[5]=se=>re(x).pid=se),o[6]||(o[6]=()=>{V.value=re(i)?.find(se=>se.id==re(x).pid)?.params})],"render-label":ye,options:re(i)?.map(se=>({...se,disabled:!se.reusable&&(se.adsCount||0)>0})),placeholder:re(D)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ct(ee,{span:12,label:re(D)("status"),path:"display"},{default:Ct(()=>[ct(Ce,{value:re(x).display,"onUpdate:value":o[7]||(o[7]=se=>re(x).display=se),name:"display",class:"w-full"},{default:Ct(()=>[ct(qe,{value:!1,label:re(D)("hidden"),class:"w-[50%]"},null,8,["label"]),ct(qe,{value:!0,label:re(D)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),ct(B,{span:"12"},{default:Ct(()=>[ct(P,{label:re(D)("content"),path:"content"},{default:Ct(()=>[re(d)==re(ga).VIDEO?(Kl(),xs(w,{key:0},{default:Ct(()=>[ct(re(Le),{secondary:"",type:"primary",onClick:o[8]||(o[8]=()=>{y.value=!0})},{default:Ct(()=>[Da(Na(re(D)("select")),1)]),_:1}),ct(re(jt),{value:re(x).content?re(_c)(re(x).content):"",placeholder:re(D)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),re(x).content?(Kl(),_o(Cs,{key:0},[ct(re(Le),{type:"primary",ghost:"",onClick:o[9]||(o[9]=()=>{$.value=re(D)("video"),S.value=re(T)(re(x).content),$e.value=!0})},{icon:Ct(()=>[ct(re(O),null,{default:Ct(()=>[ct(re(ce),{icon:"carbon:play-outline-filled"})]),_:1})]),default:Ct(()=>[Da(" "+Na(re(D)("play")),1)]),_:1}),ct(re(Le),{type:"primary",ghost:"",onClick:o[10]||(o[10]=()=>{re(x).content=""})},{icon:Ct(()=>[ct(re(O),null,{default:Ct(()=>[ct(re(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Ct(()=>[Da(" "+Na(re(D)("clear")),1)]),_:1})],64)):si("",!0)]),_:1})):(Kl(),_o("div",au,[ii("div",{class:"cursor-pointer w-full h-[150px]",onClick:o[11]||(o[11]=()=>{h.value=!0})},[re(x).content?(Kl(),xs(re(qi),{key:0,"object-fit":"cover","preview-disabled":"",class:"py-1 content-image",style:nr("border: 1px dashed "+re(r)(re(ue),"white")),src:re(T)(re(x).content||"")},null,8,["style","src"])):(Kl(),_o("div",{key:1,class:"w-full h-full flex items-center justify-center",style:nr("border: 1px dashed "+re(r)(re(ue),"white"))},[ct(re(O),{size:64},{default:Ct(()=>[ct(re(ce),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),re(V)&&Array.isArray(re(V))?(Kl(),xs(P,{key:0,label:re(D)("data"),path:"data"},{default:Ct(()=>[ct(Ze,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Ct(()=>[(Kl(!0),_o(Cs,null,lu(re(V),(se,_t)=>(Kl(),_o(Cs,{key:_t},[ct(B,{span:10},{default:Ct(()=>[ct(re(jt),{value:se,placeholder:se,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),ct(B,{span:14},{default:Ct(()=>[ct(re(jt),{value:re(x).data[se],"onUpdate:value":ft=>re(x).data[se]=ft,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):si("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ct(G,{show:re($e),"onUpdate:show":o[14]||(o[14]=se=>fo($e)?$e.value=se:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:re($)},{default:Ct(()=>[ii("video",ou,[ii("source",{src:re(S)},null,8,su)])]),_:1},8,["show","title"]),ct(mt,{show:re(h),"onUpdate:show":o[15]||(o[15]=se=>fo(h)?h.value=se:null),title:re(D)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:re(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o[16]||(o[16]=se=>{re(x).content=se,h.value=!1})},null,8,["show","title","upload-config"]),ct(mt,{show:re(y),"onUpdate:show":o[17]||(o[17]=se=>fo(y)?y.value=se:null),title:re(D)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:re(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o[18]||(o[18]=se=>{re(x).content=se,y.value=!1})},null,8,["show","title","upload-config"]),ct(Xd,{show:re(K),"onUpdate:show":o[19]||(o[19]=se=>fo(K)?K.value=se:null)},null,8,["show"])],64)}}}),cu=Uo(ru,[["__scopeId","data-v-ad09a685"]]),{unref:ri}=await me("vue"),{defineComponent:du}=await me("vue"),{unref:nt,resolveComponent:uu,createVNode:Gt,withCtx:It,openBlock:Zt,createBlock:qn,createCommentVNode:Is,toDisplayString:Gl,createTextVNode:ia,renderList:Vs,Fragment:Aa,createElementBlock:Pa,normalizeClass:pu,isRef:mu,createSlots:fu,createElementVNode:Ao,vShow:ci,withDirectives:di,Transition:ui}=await me("vue"),_u={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},vu={class:"flex items-center justify-start gap-2"},{storeToRefs:gu}=await me("pinia"),{ref:Ss,inject:Yl,watch:pi,reactive:ra,computed:ar}=await me("vue"),yu=du({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(f){const e=f,s=An(),{sectionsDataBackup:n,sectionsSettingsBackup:i}=gu(vc()),{t}=Ue(),{tr:a,editKeysToCamelCase:c}=ut(),I=Ss("index"),ve=Ss(!1),ie=Yl("formValueValidate1"),L=Yl("formValueValidate2"),he=Yl("formValueValidate3"),X=Yl("initialSettings"),T=Yl("initialData"),r=Yl("settings"),M=Yl("data"),ue=Yl("refreshKey"),le=Yl("isDataJustSaved"),D=Yl("isSettingsJustSaved"),{data:j,isPending:ne}=Oc({slug:e.slug,linkId:e.linkId,pageId:e.pageId});pi(()=>j?.value,K=>{const d=de.cloneDeep(K),V=d?.pages?.length?d?.pages[0].pivot:null;if(d&&M&&V&&(de.isObject(V?.data)&&Ri(V?.data)?M.value=ra(V?.data):M.value=ra({}),de.forIn(c(d.dataStructure),(_,k)=>{(!M.value[k]||Array.isArray(M.value[k])&&M.value[k].length==0)&&(k==="index"?M.value[k]=ra({}):M.value[k]=ra([]))})),T&&M&&setTimeout(()=>{T.value=de.cloneDeep(M.value)},500),d&&r&&(de.isObject(V?.settings)&&Ri(V?.settings)?r.value=ra(V?.settings):r.value=ra({}),de.forIn(c(d.settingsStructure),(_,k)=>{r.value[k]||(r.value[k]=ra({}))})),X&&r&&setTimeout(()=>{X.value=de.cloneDeep(r.value)},500),d)if(c(d.dataStructure)){const _=Object.keys(c(d.dataStructure));_.includes("index")?I.value="index":I.value=_.length>0?_[0]:"_settings"}else I.value="_settings";if(ue&&(ue.value=En()),!ve.value&&(n.value[`${e.slug}__${e.linkId}__${e.pageId}`]||i.value[`${e.slug}__${e.linkId}__${e.pageId}`])){ve.value=!0;const _=()=>{n.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,i.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,ue&&(ue.value=En())};s.warning({title:t("backup"),content:t("sectionDataOrSettingsAvailable"),positiveText:t("restore"),negativeText:t("drop"),onPositiveClick:async()=>{M?.value&&n.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(M.value=ra(de.cloneDeep(n.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),r?.value&&i.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(r.value=ra(de.cloneDeep(i.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),_()},onNegativeClick:async()=>{_()}})}},{immediate:!0,deep:!0});const U=Ss(!1);setTimeout(()=>{U.value=!0},500);const z=ar(()=>!de.isEqual(M?.value,T?.value)),q=ar(()=>!de.isEqual(r?.value,X?.value));pi(()=>M?.value,K=>{z.value&&U.value&&!le?.value&&(n.value={...n.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:de.cloneDeep(K)}),le&&(le.value=!1)},{deep:!0}),pi(()=>r?.value,K=>{q.value&&U.value&&!D?.value&&(i.value={...i.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:de.cloneDeep(K)}),D&&(D.value=!1)},{deep:!0});const W=Ss(!1),A=()=>{W.value=!0,setTimeout(()=>{W.value=!1},3e3)};return(K,d)=>{const V=Ma,_=hn,k=ce,x=O,g=Yi,C=Le,ae=ei,ye=Hi,Q=bn,h=ul,y=Mo,$e=jl,$=ql,S=uu("Draggable"),l=El;return nt(ne)?(Zt(),qn(_,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:It(()=>[Gt(V)]),_:1})):(Zt(),Pa(Aa,{key:1},[Ao("div",_u,[Gt(ae,{value:nt(I),"onUpdate:value":d[1]||(d[1]=o=>mu(I)?I.value=o:null),type:"card",size:"small"},fu({default:It(()=>[nt(c)(nt(j)?.dataStructure)?(Zt(),Pa(Aa,{key:0},[nt(c)(nt(j)?.dataStructure).index?(Zt(),qn(g,{key:0,name:"index"},{default:It(()=>[Gt(x,{class:"mr-1"},{default:It(()=>[Gt(k,{icon:"carbon:types"})]),_:1}),ia(" "+Gl(nt(t)("general")),1)]),_:1})):Is("",!0),(Zt(!0),Pa(Aa,null,Vs(nt(mn)(nt(c)(nt(j)?.dataStructure),["index"]),(o,b)=>(Zt(),qn(g,{key:b,name:String(b)},{default:It(()=>[ia(Gl(nt(a)(o.title)),1)]),_:2},1032,["name"]))),128))],64)):Is("",!0),Gt(g,{name:"_settings"},{default:It(()=>[Gt(x,{class:"mr-1"},{default:It(()=>[Gt(k,{icon:"carbon:settings"})]),_:1}),ia(" "+Gl(nt(t)("settings")),1)]),_:1})]),_:2},[nt(I)!=="index"&&nt(I)!=="_settings"?{name:"suffix",fn:It(()=>[Gt(C,{quaternary:"",size:"small",class:pu({"btn-blink":nt(W)}),onClick:d[0]||(d[0]=()=>{nt(M)[nt(I)].push({}),ue.value=("uuidv4"in K?K.uuidv4:ri(En))()})},{icon:It(()=>[Gt(x,null,{default:It(()=>[Gt(k,{icon:"carbon:add-alt"})]),_:1})]),default:It(()=>[ia(" "+Gl(nt(t)("add")),1)]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["value"])]),Gt(l,{appear:"",name:"slide-fade"},{default:It(()=>[Ao("section",null,[(Zt(!0),Pa(Aa,null,Vs(nt(c)(nt(j)?.dataStructure)||{},(o,b)=>(Zt(),Pa(Aa,{key:b},[String(b)==="index"?(Zt(),qn(ui,{key:0,name:"slide-fade",mode:"out-in"},{default:It(()=>[di(Gt(Q,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(c)(nt(j)?.dataStructure).index?.length?(Zt(),qn(gs,{key:`${nt(ue)}-${b}-form-1`,modelValue:nt(M)[b],"onUpdate:modelValue":N=>nt(M)[b]=N,items:o,onUpdate:(N,F)=>{ie.value=F}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(Zt(),qn(ye,{key:1,type:"warning","show-icon":""},{default:It(()=>[ia(Gl(nt(t)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[ci,nt(I)==="index"]])]),_:2},1024)):(Zt(),qn(ui,{key:1,name:"slide-fade",mode:"out-in"},{default:It(()=>[di(Gt(Q,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(M)[b]&&Array.isArray(nt(M)[b])&&nt(M)[b].length?(Zt(),qn(S,{key:0,list:nt(M)[b],onChange:d[2]||(d[2]=N=>{ue.value=("uuidv4"in K?K.uuidv4:ri(En))()}),class:"w-full"},{default:It(()=>[(Zt(!0),Pa(Aa,null,Vs(nt(M)[b],(N,F)=>(Zt(),qn(Q,{key:F,size:"small",class:"mb-2"},{default:It(()=>[Gt($,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:Y})=>[Gt(_,{align:"center",justify:"space-between"},{default:It(()=>[Gt(C,{secondary:"",type:"error",size:"small",onClick:()=>{nt(M)[b].splice(F,1),ue.value=("uuidv4"in K?K.uuidv4:ri(En))()}},{icon:It(()=>[Gt(x,null,{default:It(()=>[Gt(k,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Gt(x,null,{default:It(()=>[Y?(Zt(),qn(k,{key:0,icon:"fa-solid:chevron-left"})):(Zt(),qn(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:It(()=>[...d[4]||(d[4]=[Ao("span",null,null,-1)])]),default:It(()=>[Gt($e,{name:"1"},{header:It(({collapsed:Y})=>[Ao("div",vu,[Gt(x,{size:"18",class:"cursor-move mr-2"},{default:It(()=>[Gt(k,{icon:"fa-solid:grip-lines"})]),_:1}),Gt(h,{size:"medium",type:"info"},{default:It(()=>[ia(Gl(String(F+1)),1)]),_:2},1024),Y?(Zt(),qn(y,{key:0,"line-clamp":1,"expand-trigger":"click",class:"text-base max-w-[80%]"},{default:It(()=>[ia(Gl(nt(Rc)(nt(M)[b][F],nt(a),"")),1)]),_:2},1024)):Is("",!0)])]),default:It(()=>[(Zt(),qn(gs,{key:`${nt(ue)}-${b}-${F}-form-2`,modelValue:nt(M)[b][F],"onUpdate:modelValue":Y=>nt(M)[b][F]=Y,items:o.items,onUpdate:(Y,E)=>{L.value=E}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list"])):(Zt(),qn(ye,{key:1,type:"info",class:"cursor-pointer","show-icon":"",onClick:d[3]||(d[3]=N=>A())},{default:It(()=>[ia(Gl(nt(t)("emptyCollectionInfoMessage")),1)]),_:1}))]),_:2},1536),[[ci,nt(I)===String(b)]])]),_:2},1024))],64))),128)),Gt(ui,{name:"slide-fade",mode:"out-in"},{default:It(()=>[di(Gt(Q,{size:"small",class:"mb-2",embedded:""},{default:It(()=>[nt(j)?.settingsStructure?(Zt(!0),Pa(Aa,{key:0},Vs(nt(c)(nt(j)?.settingsStructure),(o,b)=>(Zt(),qn(Q,{key:b,size:"small",class:"mb-2"},{header:It(()=>[Ao("span",null,Gl(nt(a)(o.title)),1)]),default:It(()=>[nt(r)[b]?(Zt(),qn(gs,{key:`${nt(ue)}-${b}-form-3`,modelValue:nt(r)[b],"onUpdate:modelValue":N=>nt(r)[b]=N,items:o.items,onUpdate:(N,F)=>{he.value=F}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):Is("",!0)]),_:2},1024))),128)):(Zt(),qn(ye,{key:1,type:"warning","show-icon":""},{default:It(()=>[ia(Gl(nt(t)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[ci,nt(I)==="_settings"]])]),_:1})])]),_:1})],64))}}}),bu=Uo(yu,[["__scopeId","data-v-27874ca2"]]),{defineComponent:hu}=await me("vue"),{unref:Ee,resolveComponent:wu,createVNode:ze,withCtx:je,toDisplayString:zn,createTextVNode:jn,normalizeClass:Ba,openBlock:Xn,createBlock:vo,createCommentVNode:Es,createElementVNode:Al,normalizeStyle:ku,renderList:or,Fragment:mi,createElementBlock:Hl,withModifiers:sr}=await me("vue"),$u={class:"flex items-center justify-between ml-1 mr-2.5"},xu={key:0},Cu={key:1},Iu={key:0},Vu={class:"flex items-center"},Su={class:"absolute top-[-10px] right-[-10px] z-[10]"},Eu={class:"flex items-center justify-center cursor-pointer gap-2"},zu={key:1},Tu={class:"mt-4"},Mu={key:2,class:"mt-2 text-xs"},{useTemplateRef:Uu,ref:Pl,computed:ir,onMounted:Nu,provide:Wl}=await me("vue"),{storeToRefs:Du}=await me("pinia"),Au=hu({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(f,{emit:e}){const s=f,n=e,i=An(),{t}=Ue(),{tr:a,pickByTheme:c}=ut(),I=Uu("sectionActions"),ve=Pl({}),ie=Pl({}),L=Pl({}),he=Pl({}),X=Pl(),T=Pl(),r=Pl(),M=Pl(!1),ue=Pl(!1),{sectionsDataBackup:le,sectionsSettingsBackup:D}=Du(vc()),{mutate:j,isPending:ne}=Ec(),{mutate:U,isPending:z}=zc(),{page:q,isLoadingPage:W,refreshKey:A,pageSections:K,initialPageSections:d,pageSectionsEnabled:V,initialPageSectionsEnabled:_,getPageSectionTitle:k,deletePage:x,isDeletingPage:g,dataSourcePagesOptions:C,confirmUpdateDataSourcePage:ae,isUpdatingDataSourcePage:ye,submitRemoveSection:Q,submitDuplicateSection:h,submitFillInFakeData:y,isDuplicatingSection:$e}=gd(s.slug),$=ir(()=>de.isEqual(ve.value,L.value)&&de.isEqual(ie.value,he.value)&&de.isEqual(K.value,d.value)&&de.isEqual(V.value,_.value)),S=async()=>{const P=X.value&&await X.value(),ke=T.value&&await T.value(),Ye=r.value&&await r.value(),ee=async()=>{l.value&&(U({slug:l.value.slug,dataSourceLinkId:l.value.pivot?.dataSourceLinkId,dataSourcePageId:l.value.pivot?.dataSourcePageId,settings:ie.value,data:ve.value}),le.value[`${l.value.slug}__${l.value.pivot?.dataSourceLinkId}__${l.value.pivot?.dataSourcePageId}`]=null,D.value[`${l.value.slug}__${l.value.pivot?.dataSourceLinkId}__${l.value.pivot?.dataSourcePageId}`]=null),j({slug:s.slug,sectionsOrder:K.value.map(qe=>`${qe.slug}__${qe.pivot?.linkId}`),sectionsDisabled:Object.keys(V.value).filter(qe=>!V.value[qe]),hideSuccessMessage:!!l.value})};!l.value||(!X.value||P)&&(!T.value||ke)&&(!r.value||Ye)?(await ee(),M.value=!0,ue.value=!0):i.warning({title:t("confirm"),content:t("mandatoryFieldsNotFilledInConfirmation"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{await ee(),M.value=!0,ue.value=!0}})},l=Pl(null),o=P=>{X.value=void 0,T.value=void 0,r.value=void 0,l.value=P},b=()=>{l.value&&(l.value=null)},{getSettingValue:N}=qc(),F=()=>{const P=`${jc(Kc())}/${(N("basePath")||"creopse")+gc.VISUAL_EDITOR.PATH}`;Gc(P,{page:q.value?.slug||""},{target:"_blank",method:"GET"})},Y=ir(()=>ne.value||g.value||z.value||ye.value||$e.value),E=Pl(!1);return Nu(()=>{setTimeout(()=>{E.value=!0},300)}),Wl("refreshKey",A),Wl("isDataJustSaved",M),Wl("isSettingsJustSaved",ue),Wl("formValueValidate1",X),Wl("formValueValidate2",T),Wl("formValueValidate3",r),Wl("initialSettings",he),Wl("initialData",L),Wl("settings",ie),Wl("data",ve),(P,ke)=>{const Ye=ce,ee=O,qe=Le,Ce=zl,Ze=hn,B=Vl,w=rd,v=El,G=id,mt=bn,se=$c,_t=io,ft=ul,yt=Mo,Qe=Dl,St=jl,ge=ql,Et=wu("Draggable"),fn=Tl;return Xn(),Hl(mi,null,[ze(B,{to:"#alt-action"},{default:je(()=>[ze(Ze,{align:"center"},{default:je(()=>[ze(qe,{secondary:"",type:"error",disabled:Ee(Y),onClick:ke[0]||(ke[0]=pe=>Ee(q)?Ee(x)(Ee(q),()=>{n("delete",Ee(q))}):null)},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:trash-can"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("delete")),1)]),_:1},8,["disabled"]),ze(qe,{secondary:"",type:"info",disabled:Ee(Y),onClick:ke[1]||(ke[1]=pe=>Ee(q)?f.openFormModal(Ee(q)):null)},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:edit"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("editPage")),1)]),_:1},8,["disabled"]),ze(Ce,{vertical:"",class:Ba(Ee(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ze(qe,{secondary:"",type:"primary",loading:Ee(Y),disabled:Ee($),onClick:ke[2]||(ke[2]=pe=>S())},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:save"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Al("section",{class:Ba(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",Ee(E)?"opacity-100":"opacity-0"]),style:ku({visibility:Ee(E)?"visible":"hidden"})},[ze(mt,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:je(()=>[Al("div",$u,[ze(G,null,{default:je(()=>[ze(w,{onClick:ke[3]||(ke[3]=pe=>b())},{default:je(()=>[ze(ee,{class:"mr-1"},{default:je(()=>[ze(Ye,{icon:"carbon:document"})]),_:1}),jn(" "+zn(Ee(a)(Ee(q)?.title)),1)]),_:1}),ze(v,{appear:"",name:"slide-fade"},{default:je(()=>[Ee(l)?(Xn(),vo(w,{key:0},{default:je(()=>[jn(zn(Ee(k)(Ee(l))),1)]),_:1})):Es("",!0)]),_:1})]),_:1}),ze(Ze,null,{default:je(()=>[ze(qe,{onClick:ke[4]||(ke[4]=pe=>F()),size:"small",secondary:"",type:"success"},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:view"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("openVisualEditor")),1)]),_:1}),Ee(l)?(Xn(),vo(qe,{key:0,onClick:ke[5]||(ke[5]=pe=>b()),size:"small",secondary:"",type:"warning",title:Ee(t)("exit")},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):Es("",!0)]),_:1})])]),_:1})],6),Al("div",{class:Ba(`${Ee(l)?"h-[90px]":"h-[50px]"}`)},null,2),Ee(l)?(Xn(),vo(bu,{key:0,slug:Ee(l)?.slug,"link-id":Ee(l)?.pivot?.dataSourceLinkId,"page-id":Ee(l)?.pivot?.dataSourcePageId},null,8,["slug","link-id","page-id"])):(Xn(),vo(v,{key:1,appear:"",name:"slide-fade"},{default:je(()=>[Al("section",null,[Ee(W)?(Xn(),Hl("section",xu,[(Xn(),Hl(mi,null,or(7,pe=>ze(se,{key:pe,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(Xn(),Hl("section",Cu,[Ee(q)&&Array.isArray(Ee(q).sections)&&Ee(q).sections.length?(Xn(),Hl("section",Iu,[ze(Et,{list:Ee(K)},{default:je(()=>[(Xn(!0),Hl(mi,null,or(Ee(K),(pe,Kt)=>(Xn(),Hl("section",{key:pe.id},[ze(mt,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:je(()=>[ze(ge,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":je(({collapsed:bt})=>[ze(Ze,{align:"center",justify:"space-between"},{default:je(()=>[ze(qe,{secondary:"",type:"primary",size:"small",onClick:sr(bl=>o(pe),["stop"])},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:archive"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("dataAndSettings")),1)]),_:1},8,["onClick"]),ze(ee,null,{default:je(()=>[bt?(Xn(),vo(Ye,{key:0,icon:"fa-solid:chevron-left"})):(Xn(),vo(Ye,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:je(()=>[...ke[9]||(ke[9]=[Al("span",null,null,-1)])]),default:je(()=>[ze(St,{name:"1"},{header:je(()=>[Al("div",Vu,[ze(ee,{size:"21",class:"cursor-move mr-4"},{default:je(()=>[ze(Ye,{icon:"fa-solid:grip-lines"})]),_:1}),ze(_t,{checked:Ee(V)[`${pe.slug}__${pe.pivot?.linkId}`],"onUpdate:checked":bt=>Ee(V)[`${pe.slug}__${pe.pivot?.linkId}`]=bt,size:"small",class:"mr-4",onClick:ke[6]||(ke[6]=sr(()=>{},["stop"]))},{default:je(()=>[jn(zn(Ee(t)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),ze(ft,{size:"small",type:"info"},{default:je(()=>[jn(zn(Kt+1),1)]),_:2},1024),ze(Ce,{vertical:"",class:Ba(Ee(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ze(yt,{"line-clamp":1,class:"text-base"},{default:je(()=>[jn(zn(Ee(k)(pe)),1)]),_:2},1024)])]),default:je(()=>[ze(Ze,null,{default:je(()=>[ze(qe,{size:"small",type:"error",secondary:"",onClick:bt=>Ee(Q)(pe)},{default:je(()=>[ze(ee,{size:"18",class:"mr-1"},{default:je(()=>[ze(Ye,{icon:"carbon:close"})]),_:1}),jn(" "+zn(Ee(t)("removeSection")),1)]),_:1},8,["onClick"]),ze(qe,{size:"small",type:"warning",secondary:"",onClick:bt=>Ee(h)(pe)},{default:je(()=>[ze(ee,{size:"18",class:"mr-1"},{default:je(()=>[ze(Ye,{icon:"carbon:partition-same"})]),_:1}),jn(" "+zn(Ee(t)("duplicateSection")),1)]),_:1},8,["onClick"]),ze(qe,{size:"small",type:"info",secondary:"",onClick:bt=>Ee(y)(pe)},{default:je(()=>[ze(ee,{size:"18",class:"mr-1"},{default:je(()=>[ze(Ye,{icon:"carbon:magic-wand"})]),_:1}),jn(" "+zn(Ee(t)("fillInFakeData")),1)]),_:1},8,["onClick"]),ze(qe,{size:"small",type:"info",secondary:"",onClick:bt=>Ee(I)?.copyData(pe)},{default:je(()=>[ze(ee,{size:"18",class:"mr-1"},{default:je(()=>[ze(Ye,{icon:"carbon:copy"})]),_:1}),jn(" "+zn(Ee(t)("copyData")),1)]),_:1},8,["onClick"]),ze(Ce,{vertical:"",class:Ba(Ee(c)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ze(Ze,{align:"center"},{default:je(()=>[Al("span",null,zn(Ee(t)("dataSource")),1),ze(Qe,{value:`${pe.pivot?.dataSourcePageId}__${pe.pivot?.dataSourceLinkId}`,options:Ee(C)(pe.pages||[],pe),placeholder:Ee(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":bt=>Ee(ae)(pe,bt,Ee($))},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),Kt<Ee(K).length-1?(Xn(),Hl("div",{key:0,class:Ba(`relative border-dashed border-y-2 h-1.5  ${Ee(c)("!border-zinc-300","!border-zinc-600")}`)},[Al("div",Su,[ze(qe,{size:"tiny",type:"info",title:Ee(t)("insertSections"),onClick:bt=>Ee(I)?.openInsertSectionsDialog(Kt+1)},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):Es("",!0)]))),128))]),_:1},8,["list"]),ze(mt,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:ke[7]||(ke[7]=pe=>Ee(I)?.openToggleSectionsDialog())},{default:je(()=>[Al("div",Eu,[ze(ee,{size:"20"},{default:je(()=>[ze(Ye,{icon:"carbon:row"})]),_:1}),jn(" "+zn(Ee(t)("insertOrRemoveSections")),1)])]),_:1})])):(Xn(),Hl("section",zu,[ze(mt,{size:"large",class:Ba(`mb-2 !border-dashed !border-2 ${Ee(c)("!border-zinc-300","!border-zinc-600")}`)},{default:je(()=>[ze(fn,{description:Ee(t)("noSectionOnThisPage")},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:page-break"})]),_:1})]),extra:je(()=>[Al("div",Tu,[ze(qe,{size:"small",secondary:"",onClick:ke[8]||(ke[8]=pe=>Ee(I)?.openToggleSectionsDialog())},{icon:je(()=>[ze(ee,null,{default:je(()=>[ze(Ye,{icon:"carbon:row"})]),_:1})]),default:je(()=>[jn(" "+zn(Ee(t)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),Ee(q)?(Xn(),Hl("div",Mu,[jn(zn(Ee(t)("dataRetrievalSlug"))+": ",1),Al("b",null,zn(Ee(q).slug),1)])):Es("",!0)]))])]),_:1})),ze(yd,{ref_key:"sectionActions",ref:I,page:Ee(q),slug:s.slug,"page-sections":Ee(K)},null,8,["page","slug","page-sections"])],64)}}}),Pu=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu-item-groups"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu-item-groups",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Bu=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu-item-groups"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu-item-groups/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Lu=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["menu-item-groups"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu-item-groups/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},{useModel:Fu,defineComponent:Ou}=await me("vue"),{unref:At,resolveComponent:Vy,createVNode:en,toDisplayString:go,createTextVNode:Po,withCtx:dn,renderList:Ru,Fragment:rr,openBlock:Bo,createElementBlock:cr,createElementVNode:fi,createBlock:_i,normalizeClass:qu,isRef:ju}=await me("vue"),{ref:zs}=await me("vue"),Ku={class:"flex items-center justify-between"},Gu={class:"flex flex-col"},Yu={class:"text-sm font-bold"},Hu=Ou({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(f){const{t:e}=Ue(),{pickByTheme:s,tr:n}=ut(),i=Fu(f,"show"),{data:t,isPending:a}=yc(),{mutate:c,isPending:I}=Pu(),{mutate:ve,isPending:ie}=Bu(),{mutate:L,isPending:he}=Lu(),X=An(),T=zs(!1),r=zs(null),M=zs(null),ue=zs({name:"",description:""}),le={name:[{required:!0,message:e("fillRequired")}]},D=U=>{r.value=de.cloneDeep(U),ue.value=de.cloneDeep(U||{name:"",description:""}),T.value=!0},j=async()=>(M.value?.validate(async U=>{if(!U){const z={name:ue.value.name,description:ue.value.description};r.value?ve({id:r.value.id,...z},{onSuccess:()=>{T.value=!1}}):c(z,{onSuccess:()=>{T.value=!1}})}}),!1),ne=async U=>{X.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{U.id&&L({id:U.id})}})};return(U,z)=>{const q=ce,W=Le,A=hn,K=Mo,d=O,V=bn,_=ya,k=Tl,x=Ma,g=Hn,C=Sl,ae=ml,ye=pl;return Bo(),cr(rr,null,[en(g,{show:i.value,"onUpdate:show":z[2]||(z[2]=Q=>i.value=Q),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:At(e)("menuItemGroups")},{"header-extra":dn(()=>[en(A,{align:"center"},{default:dn(()=>[en(W,{secondary:"",size:"small",type:"primary",disabled:At(a),onClick:z[0]||(z[0]=Q=>D(null))},{default:dn(()=>[en(q,{icon:"carbon:add-alt",class:"mr-1"}),Po(" "+go(At(e)("add")),1)]),_:1},8,["disabled"]),en(W,{secondary:"",size:"small",type:"error",disabled:At(a),onClick:z[1]||(z[1]=Q=>i.value=!1)},{default:dn(()=>[en(q,{icon:"carbon:close",class:"mr-1"}),Po(" "+go(At(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:dn(()=>[en(x,{show:At(a)},{default:dn(()=>[At(t)?.length?(Bo(),_i(_,{key:0,style:{"max-height":"400px"}},{default:dn(()=>[(Bo(!0),cr(rr,null,Ru(At(t),Q=>(Bo(),_i(V,{key:Q.id,embedded:"",size:"small",class:"mb-2"},{default:dn(()=>[fi("div",Ku,[fi("div",Gu,[fi("span",Yu,go(At(n)(Q.name)),1),en(K,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:dn(()=>[Po(go(At(n)(Q.description)),1)]),_:2},1024)]),en(A,null,{default:dn(()=>[en(W,{size:"small",type:"warning",secondary:"",onClick:h=>D(Q)},{default:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),en(W,{size:"small",type:"error",secondary:"",onClick:h=>ne(Q)},{default:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Bo(),_i(V,{key:1,size:"large",class:qu(`mb-2 !border-dashed !border-2 ${At(s)("!border-zinc-300","!border-zinc-600")}`)},{default:dn(()=>[en(k,{description:At(e)("noMenuItemGroupAdded")},{icon:dn(()=>[en(d,null,{default:dn(()=>[en(q,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),en(g,{show:At(T),"onUpdate:show":z[5]||(z[5]=Q=>ju(T)?T.value=Q:null),loading:At(I)||At(ie)||At(he),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:At(r)?At(e)("editMenuItemGroup"):At(e)("addMenuItemGroup"),"positive-text":At(e)("validate"),"negative-text":At(e)("cancel"),onPositiveClick:j,onNegativeClick:z[6]||(z[6]=Q=>T.value=!1)},{default:dn(()=>[en(ye,{ref_key:"formRef",ref:M,model:At(ue),rules:le,"show-require-mark":!1,size:"medium",class:"my-5"},{default:dn(()=>[en(ae,{"show-label":!1,path:"name"},{default:dn(()=>[en(C,{modelValue:At(ue).name,"onUpdate:modelValue":z[3]||(z[3]=Q=>At(ue).name=Q),placeholder:At(e)("name"),class:"w-full",sync:""},{label:dn(()=>[Po(go(At(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),en(ae,{"show-label":!1,path:"description"},{default:dn(()=>[en(C,{modelValue:At(ue).description,"onUpdate:modelValue":z[4]||(z[4]=Q=>At(ue).description=Q),placeholder:At(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:dn(()=>[Po(go(At(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:dr,mergeModels:Wu,defineComponent:Qu}=await me("vue"),{unref:Rt,resolveComponent:Sy,createVNode:ca,withCtx:La,isRef:Ju,Fragment:Xu,openBlock:Lo,createElementBlock:Zu,createCommentVNode:Ts,createBlock:Ms}=await me("vue"),{ref:Fo,computed:Oo,onMounted:ep,h:Ro}=await me("vue"),tp=Qu({__name:"ContentFormItems",props:{"content-type":{default:yl.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Wu(["update"],["update:content-type","update:content-id"]),setup(f,{emit:e}){const{t:s}=Ue(),{tr:n,mergeArrays:i}=ut(),{contentTypes:t,extractItemTitle:a}=hs(),{data:c}=so(),I=e,ve=dr(f,"content-type"),ie=dr(f,"content-id"),L=Fo(),he=Fo([]),X=Fo([]),{mutateAsync:T,isPending:r}=Tc(),{mutateAsync:M,isPending:ue}=bd(),le=Oo(()=>r.value||ue.value),D=async(Q,h)=>{if(!Q.length){X.value=[];return}X.value=await T({query:Q,contentModelId:h})},j=Oo(()=>i(he.value,X.value,"id")),ne=Fo([]),U=Fo([]),{mutateAsync:z,isPending:q}=Vd(),{mutateAsync:W,isPending:A}=Sd(),K=Oo(()=>A.value||q.value),d=async Q=>{if(!Q.length){U.value=[];return}U.value=await W(Q)},V=Oo(()=>i(ne.value,U.value,"id")),{categories:_}=Zi(),{tags:k}=Zi();ep(async()=>{const Q=await z({ids:ie.value?[ie.value]:[]});Q&&(ne.value=i(ne.value,Q,"id"));const h=await M({ids:ie.value?[ie.value]:[]});h&&(he.value=i(he.value,h,"id"),L.value=he.value.find(y=>y.id===ie.value)?.contentModelId)});const x=Q=>Ro("span",{},{default:()=>`${n(Q.name)}`}),g=Q=>Ro("span",{},{default:()=>`${n(Q.title)}`}),C=Q=>Ro("span",{},{default:()=>`${n(Q.name)}`}),ae=Q=>Ro("span",{},{default:()=>n(Q.title)}),ye=Q=>Oo(()=>Ro("span",{},{default:()=>a(Q,c.value?.find(h=>h.id===Q.contentModelId))}));return(Q,h)=>{const y=Dl,$e=ba,$=al;return Lo(),Ms($,{"x-gap":"12",span:24},{default:La(()=>[ca($e,{span:8,label:Rt(s)("contentType"),path:"contentType"},{default:La(()=>[ca(y,{value:ve.value,"onUpdate:value":[h[0]||(h[0]=S=>ve.value=S),h[1]||(h[1]=()=>ie.value=void 0)],options:Rt(t)||[],placeholder:Rt(s)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ve.value===Rt(yl).CONTENT_MODEL?(Lo(),Zu(Xu,{key:0},[ca($e,{span:8,label:Rt(s)("contentModel")},{default:La(()=>[ca(y,{value:Rt(L),"onUpdate:value":h[2]||(h[2]=S=>Ju(L)?L.value=S:null),options:Rt(c),placeholder:Rt(s)("search"),"render-label":ae,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ca($e,{span:8,label:Rt(s)("item"),path:"contentId"},{default:La(()=>[ca(y,{value:ie.value,"onUpdate:value":[h[3]||(h[3]=S=>ie.value=S),h[5]||(h[5]=(S,l)=>I("update",S,l,ve.value))],options:Rt(j)||[],placeholder:Rt(s)("search"),"render-label":S=>ye(S).value,loading:Rt(le),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:h[4]||(h[4]=S=>D(S,Rt(L)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):Ts("",!0),ve.value===Rt(yl).NEWS_ARTICLE?(Lo(),Ms($e,{key:1,span:16,label:Rt(s)("newsArticle"),path:"contentId"},{default:La(()=>[ca(y,{value:ie.value,"onUpdate:value":[h[6]||(h[6]=S=>ie.value=S),h[7]||(h[7]=(S,l)=>I("update",S,l,ve.value))],options:Rt(V)||[],placeholder:Rt(s)("search"),"render-label":g,loading:Rt(K),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:d},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):Ts("",!0),ve.value===Rt(yl).NEWS_CATEGORY?(Lo(),Ms($e,{key:2,span:16,label:Rt(s)("newsCategory"),path:"contentId"},{default:La(()=>[ca(y,{value:ie.value,"onUpdate:value":[h[8]||(h[8]=S=>ie.value=S),h[9]||(h[9]=(S,l)=>I("update",S,l,ve.value))],options:Rt(_)||[],placeholder:Rt(s)("select"),"render-label":x,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Ts("",!0),ve.value===Rt(yl).NEWS_TAG?(Lo(),Ms($e,{key:3,span:16,label:Rt(s)("newsTag"),path:"contentId"},{default:La(()=>[ca(y,{value:ie.value,"onUpdate:value":[h[10]||(h[10]=S=>ie.value=S),h[11]||(h[11]=(S,l)=>I("update",S,l,ve.value))],options:Rt(k)||[],placeholder:Rt(s)("select"),"render-label":C,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Ts("",!0)]),_:1})}}}),np=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu","items"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu/items",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},lp=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu","items"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu/items/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},ap=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["menu","items"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu/items/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},op=()=>{const{request:f}=et(),e=ot();return Ta(async s=>{const n=await f({method:"put",url:"/menu/items/position",data:s});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:sp,defineComponent:ip}=await me("vue"),{unref:m,resolveComponent:vi,createVNode:Z,withCtx:_e,toDisplayString:tn,createTextVNode:Zn,openBlock:Yt,createBlock:da,createCommentVNode:Fa,isRef:Us,renderList:Ns,Fragment:Ql,createElementBlock:el,normalizeClass:Oa,withModifiers:qo,createElementVNode:Tn}=await me("vue"),rp={key:0},cp={class:"flex items-center"},dp={class:"flex flex-col"},up={class:"text-sm font-bold"},pp={key:0,class:"text-sm"},mp={class:"text-xs font-normal"},fp={class:"text-xs my-1"},_p={class:"flex items-center"},vp={class:"flex flex-col"},gp={class:"text-sm font-bold"},yp={class:"text-xs font-normal"},bp={key:0,class:"mt-4"},hp={class:"my-8"},wp={class:"flex items-center justify-between"},kp={class:"flex flex-col"},$p={class:"text-sm font-bold"},xp={class:"text-xs font-normal"},Cp={class:"flex items-center"},Ip={key:0},Vp={key:1},Sp={key:2},{storeToRefs:Ep}=await me("pinia"),{ref:wl,watch:zp,computed:jo,h:ur}=await me("vue"),Tp=ip({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const{t:e,locale:s}=Ue(),{extractItemTitle:n}=hs(),{tr:i,pickByTheme:t}=ut(),{isLightTheme:a}=Ep(Eo()),{data:c,isPending:I}=Ki(),{data:ve}=so(),{data:ie,isPending:L}=yc(),{data:he,isFetching:X,refetch:T}=Yc({enabled:!1}),{mutate:r,isPending:M}=np(),{mutate:ue,isPending:le}=lp(),{mutate:D,isPending:j}=ap(),{mutate:ne}=op(),U=Xe(),z=An(),q=sp(f,"modelValue"),W=wl([]),A=wl([]),K=wl(""),d=wl();let V=wl(!0);zp(()=>X.value,B=>{B||(V.value=!1)});const _=jo(()=>{if(!K.value)return W.value;const B=W.value.filter(w=>w.title.toLowerCase().includes(K.value.toLowerCase())||w.description?.toLowerCase().includes(K.value.toLowerCase())||w.children.some(v=>v.title.toLowerCase().includes(K.value.toLowerCase())||v.description?.toLowerCase().includes(K.value.toLowerCase())));return d.value&&d.value.focus(),B}),k=async()=>{await T(),W.value=he.value?.filter(B=>!B.parentId&&B.menuId===q.value?.id)||[];for(let B=0;B<W.value.length;B++)W.value[B].children=he.value?.filter(w=>w.parentId===W.value[B].id&&w.menuId===q.value?.id)||[];A.value=he.value?.filter(B=>B.menuId!==q.value?.id)||[]};k();const x=wl(24),g=wl(1),C=B=>{x.value=B},ae={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:hl.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:yl.CONTENT_MODEL,contentId:void 0},ye=wl(null),Q=wl(!1),h=wl(!1),y=wl(null),$e=wl(null),$=wl(ae),S=jo(()=>{const B={title:[{required:!0,message:e("fillRequired")}]};return $.value.targetType===hl.PAGE_LINK?(B.pageId=[{required:!0,message:e("fillRequired")}],B.path=[{required:!0,message:e("fillRequired")}]):$.value.targetType===hl.EXTERNAL_LINK?B.url=[{required:!0,message:e("fillRequired")}]:$.value.targetType===hl.CONTENT_LINK&&(B.contentId=[{required:!0,message:e("fillRequired")}],B.contentType=[{required:!0,message:e("fillRequired")}]),B}),l=jo(()=>c.value?.find(B=>B.id==$.value.pageId)?.slug||""),{data:o,isPending:b}=Ed({queryKey:["pages",l],queryFn:async()=>{const{request:B}=et(),w=await B({url:`/pages/${l.value}`});return w.success&&w.result.data?w.result.data:null},enabled:jo(()=>!!l.value)}),N=jo(()=>o.value?.sections?.map(B=>{const G=(o.value?.sections?.filter(mt=>mt.id===B.id)?.map(mt=>mt.pivot?.createdAt||mt.pivot?.updatedAt||"")?.sort((mt,se)=>new Date(mt).getTime()-new Date(se).getTime())||[]).indexOf(B.pivot?.createdAt||B.pivot?.updatedAt||"");return{label:B.pivot?.linkId=="default"?i(B.title):i(B.title)+" ("+(G+1)+")",value:B.slug+"__"+B.pivot?.linkId}})||[]),F=(B,w=null)=>{y.value=de.cloneDeep(B),ye.value=w,B?($.value=de.cloneDeep(B),Q.value=!0):($.value=de.cloneDeep(ae),A.value.length>0?h.value=!0:Q.value=!0)},Y=async B=>{z.warning({title:e("confirm"),content:B.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{B.id&&D({id:B.id})}})},E=async B=>{r({title:B.title,path:B.path,url:B.url,description:B.description,isActive:!0,isVisible:!0,color:B.color,icon:B.icon,position:B.position,targetType:B.targetType,parentId:ye.value,menuId:q.value?.id,sectionKey:B.sectionKey,menuItemGroupId:B.menuItemGroupId,pageId:B.pageId},{onSuccess(){k(),h.value=!1}})},P=async()=>($e.value?.validate(async B=>{if(!B){const w={title:$.value.title,path:$.value.path,url:$.value.url,description:$.value.description,isActive:$.value.isActive,isVisible:$.value.isVisible,color:$.value.color,icon:$.value.icon,position:$.value.position,targetType:$.value.targetType,parentId:ye.value,menuId:q.value?.id,sectionKey:$.value.sectionKey,menuItemGroupId:$.value.menuItemGroupId,pageId:$.value.pageId,contentId:$.value.contentId,contentType:$.value.contentType};y.value?y.value.title!==$.value.title&&W.value.findIndex(v=>v.title==$.value.title)>-1?U.error(e("sameMenuItemTitleMessage")):ue({id:y.value.id,...w},{onSuccess(){k()}}):W.value.findIndex(v=>v.title==$.value.title)>-1?U.error(e("sameMenuItemTitleMessage")):r(w,{onSuccess(){k()}}),Q.value=!1}}),!1),ke=async(B,w)=>{ne({items:w},{onSuccess(){k()}})},Ye=B=>ur("span",{},{default:()=>i(B.title)}),ee=B=>ur("span",{},{default:()=>i(B.name)}),qe=B=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(B),Ce=B=>{if(B.targetType==hl.EXTERNAL_LINK)return B.url;if(B.targetType==hl.PAGE_LINK)return B.path;if(B.targetType==hl.CONTENT_LINK)switch(B.contentType){case yl.CONTENT_MODEL:return e("contentModel");case yl.NEWS_CATEGORY:return e("newsCategory");case yl.NEWS_ARTICLE:return e("newsArticle");case yl.NEWS_TAG:return e("newsTag")}return""},Ze=async(B,w,v)=>{if(!i($.value.title))switch(v){case yl.CONTENT_MODEL:$.value.title=n(w,ve.value?.find(G=>G.id===w.contentModelId));break;case yl.NEWS_ARTICLE:$.value.title=w.title;break;case yl.NEWS_CATEGORY:case yl.NEWS_TAG:$.value.title=w.name;break}};return(B,w)=>{const v=ce,G=hn,mt=Vl,se=xc,_t=$c,ft=ul,yt=zl,Qe=bn,St=vi("Draggable"),ge=jl,Et=ql,fn=ro,pe=Tl,Kt=El,bt=ya,bl=Hn,ol=Sl,Ml=ml,st=Wi,Pn=ba,Wn=To,Oe=zo,Qn=al,co=vi("IconPicker"),ws=vi("color-picker"),uo=Dl,ni=pl;return Yt(),el(Ql,null,[Z(mt,{to:"#alt-action"},{default:_e(()=>[Z(G,{align:"center"},{default:_e(()=>[m(_).length?(Yt(),da(m(Le),{key:0,secondary:"",type:"primary",onClick:w[0]||(w[0]=xe=>F(null))},{icon:_e(()=>[Z(m(O),{size:"18"},{default:_e(()=>[Z(v,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Zn(" "+tn(m(e)("addMenuItem")),1)]),_:1})):Fa("",!0)]),_:1})]),_:1}),Z(se,{class:"mt-2 mb-5",onBack:w[2]||(w[2]=xe=>q.value=null)},{title:_e(()=>[Zn(tn(m(i)(q.value?.title)),1)]),back:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:_e(()=>[Z(m(jt),{ref_key:"searchInputRef",ref:d,value:m(K),"onUpdate:value":w[1]||(w[1]=xe=>Us(K)?K.value=xe:null),clearable:!0,placeholder:m(e)("search")},{suffix:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),Z(Kt,{appear:"",name:"slide-fade"},{default:_e(()=>[Tn("section",null,[m(V)?(Yt(),el("section",rp,[(Yt(),el(Ql,null,Ns(7,xe=>Z(_t,{key:xe,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(Yt(),el(Ql,{key:1},[m(_)&&m(_).length?(Yt(),el(Ql,{key:0},[Z(St,{list:m(W),onChange:w[3]||(w[3]=xe=>ke(xe,m(W)))},{default:_e(()=>[(Yt(!0),el(Ql,null,Ns(m(_).slice((m(g)-1)*m(x),m(g)*m(x)),xe=>(Yt(),da(Qe,{key:xe.id,embedded:"",size:"small",class:"mb-1"},{default:_e(()=>[Z(Et,{"default-expanded-names":xe.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":_e(({collapsed:Jn})=>[Z(G,{align:"center"},{default:_e(()=>[Z(ft,{size:"small",bordered:!1,type:xe.isActive?"success":"error"},{default:_e(()=>[Zn(tn(xe.isActive?m(e)("published"):m(e)("unpublished")),1)]),_:2},1032,["type"]),Z(ft,{size:"small",bordered:!1,type:xe.isVisible?"info":"warning"},{default:_e(()=>[Zn(tn(xe.isVisible?m(e)("visible"):m(e)("hidden")),1)]),_:2},1032,["type"]),Z(yt,{vertical:"",class:Oa(["!mx-0",m(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Z(m(Le),{size:"small",type:"primary",secondary:"",onClick:qo(Ua=>F(xe),["stop"])},{default:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Z(m(Le),{size:"small",type:"error",secondary:"",onClick:qo(Ua=>Y(xe),["stop"])},{default:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Z(m(Le),{size:"small",type:"info",secondary:"",onClick:qo(Ua=>F(null,xe.id),["stop"])},{icon:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:category"})]),_:1})]),default:_e(()=>[Zn(" "+tn(m(e)("subMenuItem"))+" ",1),Z(ft,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:_e(()=>[Zn(tn(xe.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),w[27]||(w[27]=Tn("div",{class:"w-6"},null,-1)),Z(m(O),null,{default:_e(()=>[Jn?(Yt(),da(v,{key:0,icon:"fa-solid:chevron-left"})):(Yt(),da(v,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:_e(()=>[...w[28]||(w[28]=[Tn("span",null,null,-1)])]),default:_e(()=>[Z(ge,{name:"1"},{header:_e(()=>[Tn("div",cp,[Z(m(O),{size:"21",class:"cursor-move mr-4"},{default:_e(()=>[Z(v,{icon:"fa-solid:grip-lines"})]),_:1}),Z(yt,{vertical:"",class:Oa(m(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Tn("div",dp,[Tn("div",null,[Tn("span",up,tn(m(i)(xe.title)),1),xe.group?(Yt(),el("span",pp," Â ("+tn(m(i)(xe.group?.name))+") ",1)):Fa("",!0)]),Tn("small",mp,tn(Ce(xe)),1)])])]),default:_e(()=>[xe.description?(Yt(),el(Ql,{key:0},[Z(yt,{class:Oa([m(t)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Tn("div",fp,tn(m(i)(xe.description)),1)],64)):Fa("",!0),xe.children.length?(Yt(),el(Ql,{key:1},[Z(yt,{class:Oa([m(t)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Z(St,{list:xe.children,onChange:Jn=>ke(Jn,xe.children)},{default:_e(()=>[(Yt(!0),el(Ql,null,Ns(xe.children,Jn=>(Yt(),da(Qe,{key:Jn.id,size:"small",class:"mb-1"},{header:_e(()=>[Tn("div",_p,[Z(m(O),{size:"21",class:"cursor-move mr-4"},{default:_e(()=>[Z(v,{icon:"fa-solid:grip-lines"})]),_:1}),Z(yt,{vertical:"",class:Oa(m(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Tn("div",vp,[Tn("span",gp,tn(m(i)(Jn.title)),1),Tn("small",yp,tn(Ce(Jn)),1)])])]),"header-extra":_e(()=>[Z(G,{align:"center"},{default:_e(()=>[Z(ft,{size:"small",bordered:!1,type:Jn.isActive?"success":"error"},{default:_e(()=>[Zn(tn(Jn.isActive?m(e)("published"):m(e)("unpublished")),1)]),_:2},1032,["type"]),Z(ft,{size:"small",bordered:!1,type:Jn.isVisible?"info":"warning"},{default:_e(()=>[Zn(tn(Jn.isVisible?m(e)("visible"):m(e)("hidden")),1)]),_:2},1032,["type"]),Z(yt,{vertical:"",class:Oa(["!mx-0",m(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Z(m(Le),{size:"small",type:"primary",secondary:"",onClick:qo(Ua=>F(Jn,xe.id),["stop"])},{default:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Z(m(Le),{size:"small",type:"error",secondary:"",onClick:qo(Ua=>Y(Jn),["stop"])},{default:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Fa("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Z(fn,{page:m(g),"onUpdate:page":w[4]||(w[4]=xe=>Us(g)?g.value=xe:null),class:"mt-5 justify-end","show-size-picker":"","page-size":m(x),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(m(W).length/m(x)),"onUpdate:pageSize":C},{prefix:_e(()=>[Zn(tn(`${m(W).length} ${m(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Yt(),da(Qe,{key:1,size:"large",class:Oa(`mb-2 !border-dashed !border-2 ${m(t)("!border-zinc-300","!border-zinc-600")}`)},{default:_e(()=>[Z(pe,{description:m(e)("noMenuItemAvailable")},{icon:_e(()=>[Z(m(O),null,{default:_e(()=>[m(K)?(Yt(),da(v,{key:0,icon:"carbon:search"})):(Yt(),da(v,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:_e(()=>[m(K)?Fa("",!0):(Yt(),el("div",bp,[Z(m(Le),{size:"small",secondary:"",onClick:w[5]||(w[5]=xe=>F(null))},{icon:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Zn(" "+tn(m(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),Z(bl,{show:m(h),"onUpdate:show":w[6]||(w[6]=xe=>Us(h)?h.value=xe:null),loading:m(M)||m(le)||m(j),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:m(e)("menuItems"),"positive-text":m(ye)?m(e)("createSubMenuItem"):m(e)("createMenuItem"),"negative-text":m(e)("cancel"),onPositiveClick:w[7]||(w[7]=()=>{h.value=!1,Q.value=!0}),onNegativeClick:w[8]||(w[8]=xe=>h.value=!1)},{default:_e(()=>[Tn("section",hp,[Z(bt,{style:{"max-height":"400px"}},{default:_e(()=>[(Yt(!0),el(Ql,null,Ns(m(A),xe=>(Yt(),da(Qe,{key:xe.id,embedded:"",size:"small",class:"mb-2"},{default:_e(()=>[Tn("div",wp,[Tn("div",kp,[Tn("span",$p,tn(m(i)(xe.title)),1),Tn("small",xp,tn(Ce(xe)),1)]),Z(m(Le),{size:"small",type:"primary",secondary:"",onClick:Jn=>E(xe)},{icon:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:add-alt"})]),_:1})]),default:_e(()=>[Zn(" "+tn(m(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Z(bl,{show:m(Q),"onUpdate:show":w[25]||(w[25]=xe=>Us(Q)?Q.value=xe:null),loading:m(M)||m(le)||m(j),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:m(y)?m(ye)?m(e)("editSubMenuItem"):m(e)("editMenuItem"):m(ye)?m(A).length?m(e)("createSubMenuItem"):m(e)("addSubMenuItem"):m(A).length?m(e)("createMenuItem"):m(e)("addMenuItem"),"positive-text":m(e)("validate"),"negative-text":m(e)("cancel"),onPositiveClick:P,onNegativeClick:w[26]||(w[26]=xe=>Q.value=!1)},{default:_e(()=>[Z(ni,{ref_key:"formRef",ref:$e,class:"mt-5",model:m($),rules:m(S),"show-require-mark":!1,size:"medium"},{default:_e(()=>[Z(Ml,{"show-label":!1,path:"title"},{default:_e(()=>[Z(ol,{modelValue:m($).title,"onUpdate:modelValue":w[9]||(w[9]=xe=>m($).title=xe),placeholder:m(e)("title"),class:"w-full",sync:""},{label:_e(()=>[Zn(tn(m(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Z(Ml,{"show-label":!1,path:"description"},{default:_e(()=>[Z(ol,{modelValue:m($).description,"onUpdate:modelValue":w[10]||(w[10]=xe=>m($).description=xe),placeholder:m(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:_e(()=>[Zn(tn(m(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Z(Qn,{"x-gap":"12",span:24},{default:_e(()=>[Z(Pn,{span:5,label:m(e)("position"),path:"position"},{default:_e(()=>[Z(st,{value:m($).position,"onUpdate:value":w[11]||(w[11]=xe=>m($).position=xe),placeholder:m(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Z(Pn,{span:10,label:m(e)("publication"),path:"isActive"},{default:_e(()=>[Z(Oe,{value:m($).isActive,"onUpdate:value":w[12]||(w[12]=xe=>m($).isActive=xe),name:"isActive",class:"w-full"},{default:_e(()=>[Z(Wn,{value:!1,label:m(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),Z(Wn,{value:!0,label:m(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Z(Pn,{span:9,label:m(e)("visibility"),path:"isVisible"},{default:_e(()=>[Z(Oe,{value:m($).isVisible,"onUpdate:value":w[13]||(w[13]=xe=>m($).isVisible=xe),name:"isVisible",class:"w-full"},{default:_e(()=>[Z(Wn,{value:!1,label:m(e)("hidden"),class:"w-[50%]"},null,8,["label"]),Z(Wn,{value:!0,label:m(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Z(yt,{class:"!my-2"}),Z(Qn,{"x-gap":"12",span:24},{default:_e(()=>[Z(Pn,{span:10,label:m(e)("icon"),path:"icon"},{default:_e(()=>[Z(co,{modelValue:m($).icon,"onUpdate:modelValue":w[14]||(w[14]=xe=>m($).icon=xe),placeholder:m(e)("icon"),"icons-list-placeholder":m(e)("enterIconNameInSearchBar"),"search-placeholder":m(e)("search"),"empty-text":m(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),Z(Pn,{span:4,label:m(e)("color"),path:"color"},{default:_e(()=>[Tn("div",Cp,[m($).color?(Yt(),el(Ql,{key:0},[Z(m(Le),{text:"",type:"error",style:{"font-size":"21px"},onClick:w[15]||(w[15]=xe=>m($).color="")},{default:_e(()=>[Z(m(O),null,{default:_e(()=>[Z(v,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Z(yt,{vertical:""})],64)):Fa("",!0),Z(ws,{"pure-color":m($).color,"onUpdate:pureColor":w[16]||(w[16]=xe=>m($).color=xe),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:m(a)?"white":"black",lang:m(s)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),Z(Pn,{span:10,label:m(e)("group"),path:"menuItemGroupId"},{default:_e(()=>[Z(uo,{value:m($).menuItemGroupId,"onUpdate:value":w[17]||(w[17]=xe=>m($).menuItemGroupId=xe),options:m(ie),placeholder:m(e)("group"),"render-label":ee,loading:m(L),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),Z(Pn,{span:24,label:m(e)("targetType"),path:"targetType"},{default:_e(()=>[Z(Oe,{value:m($).targetType,"onUpdate:value":w[18]||(w[18]=xe=>m($).targetType=xe),class:"w-full",size:"small"},{default:_e(()=>[Z(Wn,{value:m(hl).PAGE_LINK,class:"w-[33.33%]"},{default:_e(()=>[Zn(tn(m(e)("pageLink")),1)]),_:1},8,["value"]),Z(Wn,{value:m(hl).CONTENT_LINK,class:"w-[33.33%]"},{default:_e(()=>[Zn(tn(m(e)("contentLink")),1)]),_:1},8,["value"]),Z(Wn,{value:m(hl).EXTERNAL_LINK,class:"w-[33.33%]"},{default:_e(()=>[Zn(tn(m(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Z(Kt,{appear:"",name:"slide-fade"},{default:_e(()=>[m($).targetType===m(hl).PAGE_LINK?(Yt(),el("section",Ip,[Z(Qn,{"x-gap":"12",span:24},{default:_e(()=>[Z(Pn,{span:12,label:m(e)("page"),path:"pageId"},{default:_e(()=>[Z(uo,{value:m($).pageId,"onUpdate:value":w[19]||(w[19]=xe=>m($).pageId=xe),options:m(c)||[],placeholder:m(e)("selectPage"),"render-label":Ye,loading:m(I),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),Z(Pn,{span:12,label:m(e)("section"),path:"sectionKey"},{default:_e(()=>[Z(uo,{value:m($).sectionKey,"onUpdate:value":w[20]||(w[20]=xe=>m($).sectionKey=xe),options:m(N),placeholder:m(e)("selectSection"),disabled:!m($).pageId,loading:m(b),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),Z(Ml,{label:m(e)("path"),path:"path"},{default:_e(()=>[Z(m(jt),{value:m($).path,"onUpdate:value":w[21]||(w[21]=xe=>m($).path=xe),placeholder:m(e)("path"),"allow-input":qe,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):m($).targetType===m(hl).CONTENT_LINK?(Yt(),el("section",Vp,[Z(tp,{"content-type":m($).contentType,"onUpdate:contentType":w[22]||(w[22]=xe=>m($).contentType=xe),"content-id":m($).contentId,"onUpdate:contentId":w[23]||(w[23]=xe=>m($).contentId=xe),onUpdate:Ze},null,8,["content-type","content-id"])])):m($).targetType===m(hl).EXTERNAL_LINK?(Yt(),el("section",Sp,[Z(Ml,{label:m(e)("url"),path:"url"},{default:_e(()=>[Z(m(jt),{value:m($).url,"onUpdate:value":w[24]||(w[24]=xe=>m($).url=xe),placeholder:m(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):Fa("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Mp=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu-locations"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menu-locations",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Up=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menu-locations"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menu-locations/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Np=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["menu-locations"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menu-locations/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},{useModel:Dp,defineComponent:Ap}=await me("vue"),{unref:Pt,resolveComponent:Ey,createVNode:qt,withCtx:nn,toDisplayString:Ko,createTextVNode:Ds,renderList:Pp,Fragment:pr,openBlock:Go,createElementBlock:mr,createElementVNode:gi,createBlock:yi,normalizeClass:Bp,isRef:Lp}=await me("vue"),{ref:As}=await me("vue"),Fp={class:"flex items-center justify-between"},Op={class:"flex flex-col"},Rp={class:"text-sm font-bold"},qp=Ap({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(f){const{t:e}=Ue(),{pickByTheme:s,tr:n,formatKey:i}=ut(),t=Dp(f,"show"),{data:a,isPending:c}=bc(),{mutate:I,isPending:ve}=Mp(),{mutate:ie,isPending:L}=Up(),{mutate:he,isPending:X}=Np(),T=An(),r=As(!1),M=As(null),ue=As(null),le=As({name:"",description:""}),D={name:[{required:!0,message:e("fillRequired")}]},j=z=>{M.value=de.cloneDeep(z),le.value=de.cloneDeep(z||{name:"",description:""}),r.value=!0},ne=async()=>(ue.value?.validate(async z=>{if(!z){const q={name:le.value.name,description:le.value.description};M.value?ie({id:M.value.id,...q},{onSuccess:()=>{r.value=!1}}):I(q,{onSuccess:()=>{r.value=!1}})}}),!1),U=async z=>{T.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{z.id&&he({id:z.id})}})};return(z,q)=>{const W=ce,A=O,K=Le,d=hn,V=Mo,_=bn,k=ya,x=Tl,g=Ma,C=Hn,ae=jt,ye=ml,Q=Sl,h=pl;return Go(),mr(pr,null,[qt(C,{show:t.value,"onUpdate:show":q[2]||(q[2]=y=>t.value=y),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Pt(e)("menuLocations")},{"header-extra":nn(()=>[qt(d,{align:"center"},{default:nn(()=>[qt(K,{secondary:"",size:"small",type:"primary",disabled:Pt(c),onClick:q[0]||(q[0]=y=>j(null))},{default:nn(()=>[qt(A,{class:"mr-1"},{default:nn(()=>[qt(W,{icon:"carbon:add-alt"})]),_:1}),Ds(" "+Ko(Pt(e)("add")),1)]),_:1},8,["disabled"]),qt(K,{secondary:"",size:"small",type:"error",disabled:Pt(c),onClick:q[1]||(q[1]=y=>t.value=!1)},{default:nn(()=>[qt(A,{class:"mr-1"},{default:nn(()=>[qt(W,{icon:"carbon:close"})]),_:1}),Ds(" "+Ko(Pt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:nn(()=>[qt(g,{show:Pt(c)},{default:nn(()=>[Pt(a)?.length?(Go(),yi(k,{key:0,style:{"max-height":"400px"}},{default:nn(()=>[(Go(!0),mr(pr,null,Pp(Pt(a),y=>(Go(),yi(_,{key:y.id,embedded:"",size:"small",class:"mb-2"},{default:nn(()=>[gi("div",Fp,[gi("div",Op,[gi("span",Rp,Ko(y.name),1),qt(V,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:nn(()=>[Ds(Ko(Pt(n)(y.description)),1)]),_:2},1024)]),qt(d,null,{default:nn(()=>[qt(K,{size:"small",type:"warning",secondary:"",onClick:$e=>j(y)},{default:nn(()=>[qt(A,null,{default:nn(()=>[qt(W,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),qt(K,{size:"small",type:"error",secondary:"",onClick:$e=>U(y)},{default:nn(()=>[qt(A,null,{default:nn(()=>[qt(W,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Go(),yi(_,{key:1,size:"large",class:Bp(`mb-2 !border-dashed !border-2 ${Pt(s)("!border-zinc-300","!border-zinc-600")}`)},{default:nn(()=>[qt(x,{description:Pt(e)("noMenuLocationAdded")},{icon:nn(()=>[qt(A,null,{default:nn(()=>[qt(W,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),qt(C,{show:Pt(r),"onUpdate:show":q[5]||(q[5]=y=>Lp(r)?r.value=y:null),loading:Pt(ve)||Pt(L)||Pt(X),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Pt(M)?Pt(e)("editMenuLocation"):Pt(e)("addMenuLocation"),"positive-text":Pt(e)("validate"),"negative-text":Pt(e)("cancel"),onPositiveClick:ne,onNegativeClick:q[6]||(q[6]=y=>r.value=!1)},{default:nn(()=>[qt(h,{ref_key:"formRef",ref:ue,model:Pt(le),rules:D,"show-require-mark":!1,size:"medium",class:"my-5"},{default:nn(()=>[qt(ye,{label:Pt(e)("key"),path:"name"},{default:nn(()=>[qt(ae,{value:Pt(le).name,placeholder:Pt(e)("key"),class:"w-full","onUpdate:value":q[3]||(q[3]=y=>Pt(le).name=Pt(i)(y))},null,8,["value","placeholder"])]),_:1},8,["label"]),qt(ye,{"show-label":!1,path:"description"},{default:nn(()=>[qt(Q,{modelValue:Pt(le).description,"onUpdate:modelValue":q[4]||(q[4]=y=>Pt(le).description=y),placeholder:Pt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:nn(()=>[Ds(Ko(Pt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),jp=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menus"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/menus",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Kp=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["menus"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/menus/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},Gp=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["menus"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/menus/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},{defineComponent:Yp}=await me("vue"),{unref:Ge,resolveComponent:zy,createVNode:ht,withCtx:kt,toDisplayString:Jl,createTextVNode:wa,openBlock:Bl,createBlock:yo,createCommentVNode:Ps,renderList:Hp,Fragment:bi,createElementBlock:Yo,withModifiers:hi,normalizeClass:wi,createElementVNode:Ho,isRef:Bs}=await me("vue"),Wp={key:2},Qp={class:"flex items-center"},Jp={class:"flex flex-col"},Xp={key:0,class:"text-xs font-normal"},Zp={class:"mt-4"},{ref:ua,watch:em}=await me("vue"),{defineStore:tm}=await me("pinia"),nm=Yp({__name:"index",setup(f){const{t:e}=Ue(),{tr:s,pickByTheme:n,isInDevMode:i,formatKey:t}=ut(),{data:a}=bc(),{data:c}=Hc(),{mutate:I,isPending:ve}=Gp(),{mutate:ie,isPending:L}=jp(),{mutate:he,isPending:X}=Kp(),T=An(),r=ua(24),M=ua(1),ue=_=>{r.value=_},le={name:"",title:"",description:"",menuLocationId:void 0},D=ua(!1),j=ua(!1),ne=ua(!1),U=ua(null),z=ua(le),q={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},W=ua(null),A=_=>{W.value=de.cloneDeep(_),z.value=de.cloneDeep(_||le),D.value=!0},K=async()=>(U.value?.validate(async _=>{if(!_){const k={name:z.value.name,title:z.value.title,description:z.value.description,menuLocationId:z.value.menuLocationId};W.value?he({id:W.value.id,...k},{onSuccess:()=>{}}):ie(k,{onSuccess:()=>{}}),D.value=!1}}),!1),d=async _=>{T.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{_.id&&I({id:_.id})}})},V=tm("menus-management",()=>({itemsMenu:ua(null)}))();return em(()=>z.value.title,_=>{W.value||z.value.name.length<=21&&(z.value.name=Uc(s(_),{trim:!0,lower:!0,strict:!0}))}),(_,k)=>{const x=ce,g=O,C=Le,ae=hn,ye=Vl,Q=zl,h=bn,y=ro,$e=Tl,$=El,S=Sl,l=ml,o=jt,b=ba,N=Dl,F=al,Y=pl,E=Hn;return Bl(),Yo(bi,null,[Ge(V).itemsMenu?Ps("",!0):(Bl(),yo(ye,{key:0,to:"#alt-action"},{default:kt(()=>[ht(ae,{align:"center"},{default:kt(()=>[Ge(i)?(Bl(),yo(C,{key:0,type:"success",secondary:"",onClick:k[0]||(k[0]=P=>j.value=!0)},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:template"})]),_:1})]),default:kt(()=>[wa(" "+Jl(Ge(e)("locations")),1)]),_:1})):Ps("",!0),ht(C,{type:"warning",secondary:"",onClick:k[1]||(k[1]=P=>ne.value=!0)},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:tag-group"})]),_:1})]),default:kt(()=>[wa(" "+Jl(Ge(e)("groups")),1)]),_:1}),Ge(c)&&Ge(c).length?(Bl(),yo(C,{key:1,type:"primary",secondary:"",onClick:k[2]||(k[2]=P=>A(null))},{icon:kt(()=>[ht(g,{size:"18"},{default:kt(()=>[ht(x,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[wa(" "+Jl(Ge(e)("addMenu")),1)]),_:1})):Ps("",!0)]),_:1})]),_:1})),Ge(V).itemsMenu?(Bl(),yo(Tp,{key:1,modelValue:Ge(V).itemsMenu,"onUpdate:modelValue":k[3]||(k[3]=P=>Ge(V).itemsMenu=P)},null,8,["modelValue"])):(Bl(),Yo("section",Wp,[ht($,{appear:"",name:"slide-fade"},{default:kt(()=>[Ho("section",null,[Ge(c)&&Ge(c).length?(Bl(),Yo(bi,{key:0},[(Bl(!0),Yo(bi,null,Hp(Ge(c).slice((Ge(M)-1)*Ge(r),Ge(M)*Ge(r)),P=>(Bl(),yo(h,{key:P.id,embedded:"",size:"small",class:"mb-2"},{header:kt(()=>[Ho("div",Qp,[ht(ae,null,{default:kt(()=>[ht(C,{size:"small",type:"primary",secondary:"",onClick:hi(ke=>A(P),["stop"])},{default:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ht(C,{size:"small",type:"error",secondary:"",onClick:hi(ke=>d(P),["stop"])},{default:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),ht(Q,{vertical:"",class:wi(Ge(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ho("div",Jp,[Ho("span",{class:wi(`${P.location?"text-sm":"text-base"} font-bold`)},Jl(Ge(s)(P.title)),3),P.location?(Bl(),Yo("small",Xp,Jl(P.location?.name),1)):Ps("",!0)])])]),"header-extra":kt(()=>[ht(C,{size:"small",type:"primary",secondary:"",onClick:hi(ke=>Ge(V).itemsMenu=P,["stop"])},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:arrow-right"})]),_:1})]),default:kt(()=>[wa(" "+Jl(Ge(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),ht(y,{page:Ge(M),"onUpdate:page":k[4]||(k[4]=P=>Bs(M)?M.value=P:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Ge(r),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(Ge(c).length/Ge(r)),"onUpdate:pageSize":ue},{prefix:kt(()=>[wa(Jl(`${Ge(c).length} ${Ge(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Bl(),yo(h,{key:1,size:"large",class:wi(`mb-2 !border-dashed !border-2 ${Ge(n)("!border-zinc-300","!border-zinc-600")}`)},{default:kt(()=>[ht($e,{description:Ge(e)("noMenuAvailable")},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:model-alt"})]),_:1})]),extra:kt(()=>[Ho("div",Zp,[ht(C,{size:"small",onClick:k[5]||(k[5]=P=>A(null))},{icon:kt(()=>[ht(g,null,{default:kt(()=>[ht(x,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[wa(" "+Jl(Ge(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),ht(E,{show:Ge(D),"onUpdate:show":k[10]||(k[10]=P=>Bs(D)?D.value=P:null),loading:Ge(L)||Ge(X)||Ge(ve),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Ge(W)?Ge(e)("editMenu"):Ge(e)("addMenu"),"positive-text":Ge(e)("validate"),"negative-text":Ge(e)("cancel"),onPositiveClick:K,onNegativeClick:k[11]||(k[11]=P=>D.value=!1)},{default:kt(()=>[ht(Y,{ref_key:"formRef",ref:U,model:Ge(z),rules:q,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kt(()=>[ht(l,{"show-label":!1,path:"title"},{default:kt(()=>[ht(S,{modelValue:Ge(z).title,"onUpdate:modelValue":k[6]||(k[6]=P=>Ge(z).title=P),placeholder:Ge(e)("title"),class:"w-full",sync:""},{label:kt(()=>[wa(Jl(Ge(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ht(l,{"show-label":!1,path:"description"},{default:kt(()=>[ht(S,{modelValue:Ge(z).description,"onUpdate:modelValue":k[7]||(k[7]=P=>Ge(z).description=P),placeholder:Ge(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kt(()=>[wa(Jl(Ge(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ht(F,{"x-gap":"12",span:24},{default:kt(()=>[ht(b,{span:12,label:Ge(e)("key"),path:"name"},{default:kt(()=>[ht(o,{value:Ge(z).name,placeholder:Ge(e)("key"),class:"w-full","onUpdate:value":k[8]||(k[8]=P=>Ge(z).name=Ge(t)(P))},null,8,["value","placeholder"])]),_:1},8,["label"]),ht(b,{span:12,label:Ge(e)("location"),path:"menuLocationId"},{default:kt(()=>[ht(N,{value:Ge(z).menuLocationId,"onUpdate:value":k[9]||(k[9]=P=>Ge(z).menuLocationId=P),options:Ge(a),placeholder:Ge(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ht(qp,{show:Ge(j),"onUpdate:show":k[12]||(k[12]=P=>Bs(j)?j.value=P:null)},null,8,["show"]),ht(Hu,{show:Ge(ne),"onUpdate:show":k[13]||(k[13]=P=>Bs(ne)?ne.value=P:null)},null,8,["show"])]))],64)}}}),lm="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var za=(f=>(f.VERTICAL="vertical",f.HORIZONTAL="horizontal",f))(za||{}),gl=(f=>(f.SELF_HOSTED="self-hosted",f.YOUTUBE="youtube",f))(gl||{});const am=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["video-categories"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/video-categories",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},om=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["video-categories"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/video-categories/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},sm=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["video-categories"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/video-categories/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},im=()=>{const{request:f}=et(),e=ot();return Ta(async s=>{const n=await f({method:"put",url:"/video-categories/position",data:s});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:rm}=await me("vue"),{unref:R,isRef:Ls,createVNode:we,resolveComponent:fr,withCtx:Ne,toDisplayString:Mn,createTextVNode:Ul,openBlock:Bn,createBlock:Xl,createCommentVNode:Ra,renderList:_r,Fragment:qa,createElementBlock:ka,normalizeClass:ja,withModifiers:Wo,createElementVNode:kl,normalizeStyle:cm}=await me("vue"),dm={class:"flex items-center"},um={class:"flex flex-col"},pm={class:"text-sm font-bold"},mm={class:"text-xs font-normal"},fm={class:"text-xs my-1"},_m={class:"flex items-center"},vm={class:"flex flex-col"},gm={class:"text-sm font-bold"},ym={class:"text-xs font-normal"},bm={key:0,class:"mt-4"},hm={class:"flex items-center"},{storeToRefs:wm}=await me("pinia"),{inject:km,ref:Zl,computed:vr,watch:$m}=await me("vue"),xm="categories",Cm=rm({__name:"Categories",setup(f){const e=ot(),s=Xe(),n=An(),{tr:i,fileUrl:t,pickByTheme:a,appPrimaryColor:c}=ut(),{t:I,locale:ve}=Ue(),{data:ie,isPending:L,refetch:he}=Wc(),{mutate:X,isPending:T}=sm(),{mutate:r,isPending:M}=om(),{mutate:ue,isPending:le}=am(),{mutate:D}=im(),{isLightTheme:j}=wm(Eo()),ne=km("appConfig"),U=Zl(""),z=Zl(),q=vr(()=>{if(!U.value)return W.value;const S=W.value.filter(l=>l.name.toLowerCase().includes(U.value.toLowerCase())||l.description?.toLowerCase().includes(U.value.toLowerCase())||l.children?.some(o=>o.name.toLowerCase().includes(U.value.toLowerCase())||o.description?.toLowerCase().includes(U.value.toLowerCase())));return z.value&&z.value.focus(),S}),W=vr(()=>{const S=ie.value?.filter(l=>!l.parentId)||[];for(let l=0;l<S.length;l++)S[l].children=ie.value?.filter(o=>o.parentId===S[l].id);return S});$m(()=>L.value||le.value||M.value||T.value,S=>{S?e.start():e.finish()});const A=Zl(24),K=Zl(1),d=S=>{A.value=S},V=Zl(null),_=Zl(!1),k=Zl(null),x=Zl(null),g=Zl({name:"",description:"",isActive:!0,position:0,image:"",color:""}),C={name:[{required:!0,message:I("fillRequired")}]},ae=(S,l=null)=>{k.value=de.cloneDeep(S),S?g.value=de.cloneDeep(S):g.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},V.value=l,_.value=!0},ye=async S=>{n.warning({title:I("confirm"),content:S.parentId?I("confirmDeleteSubCategory"):I("confirmDeleteCategory"),positiveText:I("yes"),negativeText:I("no"),onPositiveClick:async()=>{S.id&&X({id:S.id})}})},Q=async()=>(x.value?.validate(async S=>{if(!S){const l={name:g.value.name,description:g.value.description,isActive:g.value.isActive,position:g.value.position,image:g.value.image,color:g.value.color,parentId:V.value};k.value?k.value.name!==g.value.name&&(ie.value||[]).findIndex(o=>o.name==g.value.name)>-1?s.error(I("sameCategoryNameMessage")):r({id:k.value.id,...l}):(ie.value||[]).findIndex(o=>o.name==g.value.name)>-1?s.error(I("sameCategoryNameMessage")):ue(l),_.value=!1}}),!1),h=async(S,l)=>{D({items:l},{onSuccess(){he()}})},y=Zl(!1),$e=async S=>{g.value.image=S,y.value=!1},$=()=>{g.value.image=""};return(S,l)=>{const o=ce,b=Zs,N=Vl,F=zl,Y=hn,E=bn,P=fr("Draggable"),ke=jl,Ye=ql,ee=ro,qe=Tl,Ce=Ma,Ze=El,B=ys,w=Sl,v=ml,G=Wi,mt=ba,se=fr("color-picker"),_t=al,ft=Qi,yt=Cc,Qe=pl,St=Hn;return Bn(),ka(qa,null,[we(N,{to:"#search-category-action"},{default:Ne(()=>[we(b,{class:"!w-[250px]"},{default:Ne(()=>[we(R(jt),{ref_key:"searchInputRef",ref:z,value:R(U),"onUpdate:value":l[0]||(l[0]=ge=>Ls(U)?U.value=ge:null),clearable:!0,placeholder:R(I)("searchCategory")},null,8,["value","placeholder"]),we(R(Le),{type:"primary",secondary:""},{icon:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),we(N,{to:"#add-category-action"},{default:Ne(()=>[R(q).length?(Bn(),Xl(R(Le),{key:0,type:"primary",secondary:"",onClick:l[1]||(l[1]=ge=>ae(null))},{icon:Ne(()=>[we(R(O),{size:"18"},{default:Ne(()=>[we(o,{icon:"carbon:add-alt"})]),_:1})]),default:Ne(()=>[Ul(" "+Mn(R(I)("addCategory")),1)]),_:1})):Ra("",!0)]),_:1}),we(Ze,{name:"slide-fade",appear:""},{default:Ne(()=>[kl("section",null,[we(Ce,{show:R(L)},{default:Ne(()=>[R(q)&&R(q).length?(Bn(),ka(qa,{key:0},[we(P,{list:R(W),onChange:l[2]||(l[2]=ge=>h(ge,R(W)))},{default:Ne(()=>[(Bn(!0),ka(qa,null,_r(R(q).slice((R(K)-1)*R(A),R(K)*R(A)),ge=>(Bn(),Xl(E,{key:ge.id,embedded:"",size:"small",class:"mb-1"},{default:Ne(()=>[we(Ye,{"default-expanded-names":ge.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":Ne(({collapsed:Et})=>[we(Y,{align:"center"},{default:Ne(()=>[we(R(ul),{size:"small",bordered:!1,type:ge.isActive?"success":"error"},{default:Ne(()=>[Ul(Mn(ge.isActive?R(I)("visible"):R(I)("hidden")),1)]),_:2},1032,["type"]),we(F,{vertical:"",class:ja(["!mx-0",R(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),we(R(Le),{size:"small",type:"primary",secondary:"",onClick:Wo(fn=>ae(ge),["stop"])},{default:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),we(R(Le),{size:"small",type:"error",secondary:"",onClick:Wo(fn=>ye(ge),["stop"])},{default:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),we(R(Le),{size:"small",type:"info",secondary:"",onClick:Wo(fn=>ae(null,ge.id),["stop"])},{icon:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:category"})]),_:1})]),default:Ne(()=>[Ul(" "+Mn(R(I)("subCategory"))+" ",1),we(R(ul),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:Ne(()=>[Ul(Mn(ge.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),l[16]||(l[16]=kl("div",{class:"w-6"},null,-1)),we(R(O),null,{default:Ne(()=>[Et?(Bn(),Xl(o,{key:0,icon:"fa-solid:chevron-left"})):(Bn(),Xl(o,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ne(()=>[...l[17]||(l[17]=[kl("span",null,null,-1)])]),default:Ne(()=>[we(ke,{name:"1"},{header:Ne(()=>[kl("div",dm,[we(R(O),{size:"21",class:"cursor-move mr-4"},{default:Ne(()=>[we(o,{icon:"fa-solid:grip-lines"})]),_:1}),we(F,{vertical:"",class:ja(R(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),kl("div",um,[kl("span",pm,Mn(R(i)(ge.name))+"Â ("+Mn(ge.itemsCount)+"Â "+Mn(R(I)("video_s"))+") ",1),kl("small",mm,Mn(ge.slug),1)])])]),default:Ne(()=>[ge.description?(Bn(),ka(qa,{key:0},[we(F,{class:ja([R(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),kl("div",fm,Mn(R(i)(ge.description)),1)],64)):Ra("",!0),ge.children?.length?(Bn(),ka(qa,{key:1},[we(F,{class:ja([R(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),we(P,{list:ge.children,onChange:Et=>h(Et,ge.children||[])},{default:Ne(()=>[(Bn(!0),ka(qa,null,_r(ge.children,Et=>(Bn(),Xl(E,{key:Et.id,size:"small",class:"mb-1"},{header:Ne(()=>[kl("div",_m,[we(R(O),{size:"21",class:"cursor-move mr-4"},{default:Ne(()=>[we(o,{icon:"fa-solid:grip-lines"})]),_:1}),we(F,{vertical:"",class:ja(R(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),kl("div",vm,[kl("span",gm,Mn(R(i)(Et.name)),1),kl("small",ym,Mn(Et.slug),1)])])]),"header-extra":Ne(()=>[we(Y,{align:"center"},{default:Ne(()=>[we(R(ul),{size:"small",bordered:!1,type:Et.isActive?"success":"error"},{default:Ne(()=>[Ul(Mn(Et.isActive?R(I)("visible"):R(I)("hidden")),1)]),_:2},1032,["type"]),we(F,{vertical:"",class:ja(["!mx-0",R(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),we(R(Le),{size:"small",type:"primary",secondary:"",onClick:Wo(fn=>ae(Et,ge.id),["stop"])},{default:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),we(R(Le),{size:"small",type:"error",secondary:"",onClick:Wo(fn=>ye(Et),["stop"])},{default:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Ra("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),we(ee,{page:R(K),"onUpdate:page":l[3]||(l[3]=ge=>Ls(K)?K.value=ge:null),class:"mt-5 justify-end","show-size-picker":"","page-size":R(A),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(R(W).length/R(A)),"onUpdate:pageSize":d},{prefix:Ne(()=>[Ul(Mn(`${R(W).length} ${R(I)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Bn(),Xl(E,{key:1,size:"large",class:ja(`mb-2 !border-dashed !border-2 ${R(a)("!border-zinc-300","!border-zinc-600")}`)},{default:Ne(()=>[we(qe,{description:R(I)("noCategoryAvailable")},{icon:Ne(()=>[we(R(O),null,{default:Ne(()=>[R(U)?(Bn(),Xl(o,{key:0,icon:"carbon:search"})):(Bn(),Xl(o,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:Ne(()=>[R(U)?Ra("",!0):(Bn(),ka("div",bm,[we(R(Le),{size:"small",secondary:"",onClick:l[4]||(l[4]=ge=>ae(null))},{icon:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:add-alt"})]),_:1})]),default:Ne(()=>[Ul(" "+Mn(R(I)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),we(B,{show:R(y),"onUpdate:show":l[5]||(l[5]=ge=>Ls(y)?y.value=ge:null),title:R(I)("selectImage"),"upload-config":{folder:xm,limit:0,maxSize:0,baseUrl:R(ne)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:$e},null,8,["show","title","upload-config"]),we(St,{show:R(_),"onUpdate:show":l[14]||(l[14]=ge=>Ls(_)?_.value=ge:null),loading:R(le)||R(M)||R(T),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:R(k)?R(V)?R(I)("editSubCategory"):R(I)("editCategory"):R(V)?R(I)("addSubCategory"):R(I)("addCategory"),"positive-text":R(I)("validate"),"negative-text":R(I)("cancel"),onPositiveClick:Q,onNegativeClick:l[15]||(l[15]=ge=>_.value=!1)},{default:Ne(()=>[we(Qe,{ref_key:"formRef",ref:x,class:"mt-5",model:R(g),rules:C,"show-require-mark":!1,size:"medium"},{default:Ne(()=>[we(v,{"show-label":!1,path:"name"},{default:Ne(()=>[we(w,{modelValue:R(g).name,"onUpdate:modelValue":l[6]||(l[6]=ge=>R(g).name=ge),placeholder:R(I)("name"),class:"w-full",sync:""},{label:Ne(()=>[Ul(Mn(R(I)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),we(v,{"show-label":!1,path:"description"},{default:Ne(()=>[we(w,{modelValue:R(g).description,"onUpdate:modelValue":l[7]||(l[7]=ge=>R(g).description=ge),placeholder:R(I)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ne(()=>[Ul(Mn(R(I)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),we(_t,{"x-gap":"12",span:24},{default:Ne(()=>[we(mt,{span:12,label:R(I)("position"),path:"position"},{default:Ne(()=>[we(G,{value:R(g).position,"onUpdate:value":l[8]||(l[8]=ge=>R(g).position=ge),placeholder:R(I)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),we(mt,{span:12,label:R(I)("color"),path:"color"},{default:Ne(()=>[kl("div",hm,[R(g).color?(Bn(),ka(qa,{key:0},[we(R(Le),{text:"",type:"error",style:{"font-size":"21px"},onClick:l[9]||(l[9]=ge=>R(g).color="")},{default:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:trash-can"})]),_:1})]),_:1}),we(F,{vertical:""})],64)):Ra("",!0),we(se,{"pure-color":R(g).color,"onUpdate:pureColor":l[10]||(l[10]=ge=>R(g).color=ge),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:R(j)?"white":"black",lang:R(ve)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),we(F,{dashed:"",class:"!my-2"}),we(_t,{"x-gap":"12",span:24},{default:Ne(()=>[we(mt,{span:12,label:R(I)("preview"),path:"image"},{default:Ne(()=>[we(Y,{align:"center",justify:"center",style:{height:"100%"}},{default:Ne(()=>[we(ft,{class:"cursor-pointer","object-fit":"cover",style:cm("border: 1px dashed "+R(a)(R(c),"white")),size:150,src:R(t)(R(g).image||""),onClick:l[11]||(l[11]=ge=>y.value=!0)},{default:Ne(()=>[R(g).image?Ra("",!0):(Bn(),Xl(R(O),{key:0,size:64},{default:Ne(()=>[we(o,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),R(g).image?(Bn(),Xl(R(Le),{key:0,quaternary:"",onClick:l[12]||(l[12]=ge=>$())},{icon:Ne(()=>[we(R(O),null,{default:Ne(()=>[we(o,{icon:"carbon:trash-can"})]),_:1})]),default:Ne(()=>[Ul(" "+Mn(R(I)("clear")),1)]),_:1})):Ra("",!0)]),_:1})]),_:1},8,["label"]),we(mt,{span:12,label:R(I)("status"),path:"isActive"},{default:Ne(()=>[we(yt,{value:R(g).isActive,"onUpdate:value":l[13]||(l[13]=ge=>R(g).isActive=ge),size:"small"},{checked:Ne(()=>[Ul(Mn(R(I)("visible")),1)]),unchecked:Ne(()=>[Ul(Mn(R(I)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Im=()=>{const{request:f}=et(),{t:e}=Ue(),s=ot(),n=Xe();return Ta(async i=>{const t=await f({url:"/video-settings",method:"put",data:i});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:(i,t)=>{n.success(e("success"))},onError:(i,t)=>{n.error(e("unableToUpdateSettings"))}})};class Vm{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;isVisible;userMetadata;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,s,n=gl.SELF_HOSTED,i=za.HORIZONTAL,t,a,c,I,ve,ie,L,he,X,T,r,M,ue){this.id=a,this.foreignId=ie,this.publisherId=ve,this.title=e,this.slug=I,this.description=L,this.thumbnail=he,this.thumbnailUrl=X,this.path=s,this.url=c,this.source=n,this.isVisible=t,this.displayType=i,this.userMetadata=T,this.publishedAt=r,this.createdAt=M,this.updatedAt=ue}}const Sm=()=>{const{request:f}=et(),{t:e}=Ue(),s=ot(),n=Xe();return Ta(async()=>{const i=await f({url:"/video-items/youtube/channel-videos",method:"put"});if(i.failure&&i.error)throw new Error(i.error);return i.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:()=>n.success(e("success")),onError:()=>n.error(e("unableToUpdateChannelVideos")),retry:1})},Em=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=ot(),t=Xe();return wt({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:a=>"id"in a&&a.id?a.id:`temp-${crypto.randomUUID()}`,mutationFn:async a=>{i.start();try{const c=await s({method:"post",url:"/video-items",data:mn(a,["id"])});if(!c.success)throw new Error(c.error||n("anErrorOccurred"));return c.result.data}finally{i.finish()}},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{switch(a?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:e(a?.response?.data?.data);break;case Ft.REQUEST_PARAMS_MISSING:t.error(n("pleaseProvideApiKeyAndValidVideoUrl"));break;case Ft.REQUEST_DATA_RETRIEVAL_FAILED:t.error(n("videoDataCantBeRetrieve"));break;case Ft.REQUEST_DATA_ALREADY_EXISTS:t.error(n("videoAlreadyExists"));break;default:t.error(n("anErrorOccurred"))}},...f}})},zm=f=>{const{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{n.start();try{const a=await e({method:"put",url:`/video-items/${t.id}`,data:mn(t,["id"])});if(!a.success)throw new Error(a.error||s("anErrorOccurred"));return a.result.data}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...f}})},Tm=f=>{const{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{n.start();const a=await e({method:"delete",url:`/video-items/force/${t}`});if(n.finish(),!a.success)throw new Error(a.error);return a.result?.data},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...f}})},Mm=f=>{const{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return wt({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:t=>{if(t instanceof Vm){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("VideoItem ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:Object.keys(t).filter(a=>t[a])}),mutationFn:async t=>{n.start();const a=Object.keys(t).filter(c=>t[c]);try{for(const c of a)await e({method:"delete",url:`/video-items/force/${c}`});return a}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...f}})},{defineComponent:Um}=await me("vue"),{unref:un,resolveComponent:Ty,createVNode:Ht,withCtx:ln,toDisplayString:Ka,createTextVNode:gr,createElementVNode:Ga,normalizeClass:Nm,Fragment:yr,openBlock:br,createElementBlock:hr,createCommentVNode:Dm}=await me("vue"),{ref:wr,computed:kr}=await me("vue"),Am=Um({__name:"Settings",setup(f){const{t:e,locale:s}=Ue(),n=hc({enabled:!1}),{mutate:i,isPending:t}=Im(),{mutate:a,isPending:c}=Sm(),I=wr({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),ve=wr(I.value),ie=kr(()=>de.isEqual(I.value,ve.value)),L=async()=>{i(I.value,{onSuccess:()=>he()})},he=async()=>{await n.refetch(),n.data.value?.forEach(r=>{I.value[r.key]!=null&&(I.value[r.key]=r.value)}),ve.value=de.cloneDeep(I.value)};he();const X=()=>{a(void 0,{onSuccess:()=>he()})},T=kr(()=>!!(t.value||c.value||n.isPending.value));return(r,M)=>{const ue=ce,le=O,D=Le,j=Vl,ne=jt,U=hn,z=bn,q=Rl,W=Cc,A=al,K=El;return br(),hr(yr,null,[Ht(j,{to:"#save-settings-action"},{default:ln(()=>[Ht(D,{loading:un(T),disabled:un(ie),type:"primary",secondary:"",onClick:L},{icon:ln(()=>[Ht(le,null,{default:ln(()=>[Ht(ue,{icon:"carbon:save"})]),_:1})]),default:ln(()=>[gr(" "+Ka(un(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),Ht(K,{name:"slide-fade",appear:""},{default:ln(()=>[Ht(z,{hoverable:"",embedded:""},{header:ln(()=>[gr(Ka(un(e)("youtube")),1)]),default:ln(()=>[Ht(A,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ln(()=>[Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(U,{align:"center",justify:"space-between"},{default:ln(()=>[Ga("span",null,Ka(un(e)("apiKey")),1),Ht(ne,{value:un(I).youtubeApiKey,"onUpdate:value":M[0]||(M[0]=d=>un(I).youtubeApiKey=d),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full py-1.5",size:"small"},{default:ln(()=>[Ht(U,{align:"center",justify:"space-between"},{default:ln(()=>[Ga("span",null,Ka(un(e)("autoUpdateChannelVideos")),1),Ht(W,{value:un(I).youtubeChannelVideosAutoUpdate,"onUpdate:value":M[1]||(M[1]=d=>un(I).youtubeChannelVideosAutoUpdate=d),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ln(()=>[...M[3]||(M[3]=[Ga("div",{class:"w-6"},null,-1)])]),unchecked:ln(()=>[...M[4]||(M[4]=[Ga("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),un(I).youtubeChannelVideosAutoUpdate=="1"?(br(),hr(yr,{key:0},[Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(U,{align:"center",justify:"space-between"},{default:ln(()=>[Ga("span",null,Ka(un(e)("channelId")),1),Ht(ne,{value:un(I).youtubeChannelId,"onUpdate:value":M[2]||(M[2]=d=>un(I).youtubeChannelId=d),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),Ht(q,null,{default:ln(()=>[Ht(z,{class:"w-full h-full",size:"small"},{default:ln(()=>[Ht(U,{align:"center",justify:"space-between"},{default:ln(()=>[Ga("span",null,Ka(un(e)("lastUpdate")),1),Ga("b",null,Ka(un(I).youtubeLastChannelVideosUpdate?un(Ol)(un(I).youtubeLastChannelVideosUpdate,{locale:un(s),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):un(e)("never")),1),Ht(D,{strong:"",circle:"",secondary:"",type:"primary",title:un(e)("refresh"),disabled:un(T),onClick:X},{icon:ln(()=>[Ht(le,null,{default:ln(()=>[Ht(ue,{icon:"carbon:restart",class:Nm({"animate-spin":un(T)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):Dm("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),Pm=()=>{const{t:f}=Ue(),e=[{label:f("horizontal"),value:za.HORIZONTAL,tagType:"info"},{label:f("vertical"),value:za.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:i=>e.find(t=>t.value===i)?.tagType||"default",getVideoDisplayTypeLabel:i=>e.find(t=>t.value===i)?.label,videoDisplayTypes:e}},{unref:Bm}=await me("vue"),{defineComponent:Lm}=await me("vue"),{unref:u,vShow:Qo,createElementVNode:tl,withDirectives:Jo,toDisplayString:_n,createTextVNode:wn,resolveComponent:My,isRef:pa,withCtx:fe,createVNode:J,openBlock:vn,createElementBlock:sl,createCommentVNode:Xo,normalizeClass:Fm,renderList:$r,Fragment:bo,withModifiers:xr,createBlock:Ya,normalizeStyle:Cr}=await me("vue"),Om={id:"save-settings-action"},Rm={id:"add-category-action"},qm={class:"flex items-center gap-3"},jm={id:"search-category-action"},Km={key:0,class:"w-full flex items-center justify-between mt-2"},Gm={class:"flex items-center gap-3"},Ym={key:0,class:"mt-12"},Hm={key:1,class:"mt-12"},Wm={key:2},Qm={key:0},Jm=["onClick"],Xm={class:"absolute top-0 left-0 w-full h-full bg-black opacity-35 flex items-center justify-center"},Zm={class:"absolute bottom-0 right-0 p-3 w-full"},ef={class:"text-center text-dimgray text-sm"},tf={key:1,class:"flex items-center justify-center"},nf={class:"mt-5"},lf={class:"w-full flex flex-gap-8 items-center justify-start"},af=["src"],of={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},sf=["src"],{inject:rf,ref:kn,computed:Fs,watch:cf,h:Ir}=await me("vue"),{defineStore:df}=await me("pinia"),uf=Lm({__name:"index",setup(f){const{t:e}=Ue(),{tr:s,fileUrl:n,pickByTheme:i,getVideoThumbnail:t,appPrimaryColor:a}=ut(),{videoDisplayTypes:c}=Pm(),{orderedCategories:I}=Qc(),ve=hc(),{mutate:ie,isPending:L}=Tm(),{mutate:he,isPending:X}=Mm(),{mutate:T,isPending:r}=Em(),{mutate:M,isPending:ue}=zm(),le=Xe(),D=An(),j=rf("appConfig"),ne=kn(""),U=Td(ne,500),z=kn(null),q=kn([]),W=kn([]),A=df("videos-management-store",()=>({currentTab:kn("all")}))(),K=kn(0),d=kn(24),V=kn(1),_=Fs(()=>({pageSize:d.value,query:U.value,source:A.currentTab,page:V.value})),k=v=>{V.value=v,C()},x=v=>{d.value=v,C()},{data:g,refetch:C,isPending:ae}=Jc(_);cf(()=>g.value,v=>{q.value=v?.videoItems||[],K.value=v?.meta?.total||0,V.value=v?.meta?.currentPage||1},{deep:!0,immediate:!0});const ye=kn(!1),Q=kn(null),h=kn(null),y=kn({title:"",description:"",isVisible:!0,source:gl.SELF_HOSTED,displayType:za.HORIZONTAL,thumbnail:"",path:"",userMetadata:[]}),$e=Fs(()=>({title:[{required:y.value.source==gl.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),$=v=>{Q.value=de.cloneDeep(v),v?(y.value=de.cloneDeep(v),W.value=v.categories?.map(G=>G.id)??[]):(y.value={title:"",description:"",isVisible:!0,source:A.currentTab=="youtube"?gl.YOUTUBE:gl.SELF_HOSTED,displayType:za.HORIZONTAL,thumbnail:"",path:"",userMetadata:[]},W.value=[]),ye.value=!0},S=async v=>{D.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{ie(v)}})},l=async()=>(h.value?.validate(async v=>{if(!v){const G={title:y.value.title,description:y.value.description,isVisible:y.value.isVisible,source:y.value.source,displayType:y.value.displayType,thumbnail:y.value.thumbnail,path:y.value.path,categories:W.value,userMetadata:y.value.userMetadata};Q.value?(G.id=Q.value.id,M(G)):T(G),ye.value=!1}}),!1),o=kn(!1),b=kn(!1),N=kn(""),F=kn(""),Y=kn("classic"),E=v=>{N.value=s(v.title)??e("video"),F.value=n(v.path),Y.value=v.source==gl.YOUTUBE?"youtube":"classic",b.value=!0},P=kn(!1),ke=kn(!1),Ye=kn(En()),ee=kn({}),qe=Fs(()=>{let v=0;for(const G in ee.value)ee.value[G]&&v++;return v});function Ce(){ee.value={},Ye.value=En(),ke.value=!1,C()}const Ze=async()=>(qe.value?D.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[qe.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{he(ee.value,{onSuccess:()=>{ee.value={}}})}}):le.warning(e("noItemSelected")),!1),B=v=>[v.parentId?Ir(O,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>Ir(ce,{icon:"mdi:arrow-right"})}):null,`${s(v.name)}`],w=Fs(()=>!!(r.value||ue.value||L.value||X.value||ve.isPending.value));return(v,G)=>{const mt=io,se=Le,_t=Vl,ft=Yi,yt=jt,Qe=Zs,St=ei,ge=zd,Et=ul,fn=hn,pe=Mo,Kt=bn,bt=El,bl=Rl,ol=al,Ml=ro,st=Ma,Pn=Tl,Wn=ml,Oe=ba,Qn=Dl,co=To,ws=zo,uo=Sl,ni=qi,xe=ti,Jn=pl,Ua=Hn,Xi=ys;return vn(),sl(bo,null,[J(_t,{to:"#alt-action"},{default:fe(()=>[Jo(tl("div",Om,null,512),[[Qo,u(A).currentTab=="settings"]]),Jo(tl("div",Rm,null,512),[[Qo,u(A).currentTab=="categories"]]),Jo(tl("div",qm,[J(mt,{checked:u(ke),"onUpdate:checked":[G[0]||(G[0]=Be=>pa(ke)?ke.value=Be:null),G[1]||(G[1]=Be=>{for(const ks of u(q))ks.id&&(u(ee)[ks.id]=Be);Ye.value=("uuidv4"in v?v.uuidv4:Bm(En))()})]},{default:fe(()=>[wn(_n(u(e)("selectAll")),1)]),_:1},8,["checked"]),J(se,{type:"primary",secondary:"",loading:u(r),disabled:u(w),onClick:G[2]||(G[2]=Be=>$(null))},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:video-add"})]),_:1})]),default:fe(()=>[wn(" "+_n(u(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[Qo,["all","self-hosted","youtube"].includes(u(A).currentTab)]])]),_:1}),tl("section",{class:Fm(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${u(i)("bg-white","bg-zinc-800")}`)},[J(St,{value:u(A).currentTab,"onUpdate:value":[G[6]||(G[6]=Be=>u(A).currentTab=Be),G[7]||(G[7]=()=>u(C)())],type:"card",size:"medium"},{suffix:fe(()=>[Jo(tl("div",null,[J(Qe,{class:"!w-[250px]"},{default:fe(()=>[J(yt,{ref_key:"searchInputRef",ref:z,value:u(ne),"onUpdate:value":[G[3]||(G[3]=Be=>pa(ne)?ne.value=Be:null),G[4]||(G[4]=Be=>{Be||u(C)()})],clearable:!0,placeholder:u(e)("searchVideo")},null,8,["value","placeholder"]),J(se,{type:"primary",secondary:"",onClick:G[5]||(G[5]=Be=>u(C)())},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[Qo,["all","self-hosted","youtube"].includes(u(A).currentTab)]]),Jo(tl("div",jm,null,512),[[Qo,u(A).currentTab=="categories"]])]),default:fe(()=>[J(ft,{name:"all"},{default:fe(()=>[J(u(O),{size:"18",class:"mr-1"},{default:fe(()=>[J(u(ce),{icon:"carbon:collapse-all"})]),_:1}),wn(" "+_n(u(e)("all_")),1)]),_:1}),J(ft,{name:u(gl).SELF_HOSTED},{default:fe(()=>[J(u(O),{size:"18",class:"mr-1"},{default:fe(()=>[J(u(ce),{icon:"carbon:document-video"})]),_:1}),wn(" "+_n(u(e)("selfHosted")),1)]),_:1},8,["name"]),J(ft,{name:u(gl).YOUTUBE},{default:fe(()=>[J(u(O),{size:"18",class:"mr-1"},{default:fe(()=>[J(u(ce),{icon:"carbon:logo-youtube"})]),_:1}),wn(" "+_n(u(e)("youtube")),1)]),_:1},8,["name"]),J(ft,{name:"categories"},{default:fe(()=>[J(u(O),{size:"18",class:"mr-1"},{default:fe(()=>[J(u(ce),{icon:"carbon:categories"})]),_:1}),wn(" "+_n(u(e)("categories")),1)]),_:1}),J(ft,{name:"settings"},{default:fe(()=>[J(u(O),{size:"18",class:"mr-1"},{default:fe(()=>[J(u(ce),{icon:"carbon:settings-adjust"})]),_:1}),wn(" "+_n(u(e)("settings")),1)]),_:1})]),_:1},8,["value"]),u(qe)>0?(vn(),sl("section",Km,[tl("span",null,_n(u(e)("nbItemsSelected",[u(qe)])),1),tl("section",Gm,[J(se,{type:"error",size:"small",loading:u(X),secondary:"",onClick:Ze},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[wn(" "+_n(u(e)("delete")),1)]),_:1},8,["loading"]),J(se,{type:"warning",size:"small",secondary:"",onClick:Ce},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:close"})]),_:1})]),default:fe(()=>[wn(" "+_n(u(e)("cancelSelection")),1)]),_:1})])])):Xo("",!0)],2),u(A).currentTab=="settings"?(vn(),sl("section",Ym,[J(Am)])):u(A).currentTab=="categories"?(vn(),sl("section",Hm,[J(Cm)])):(vn(),sl("section",Wm,[J(bt,{name:"slide-fade",appear:""},{default:fe(()=>[J(Kt,{embedded:"",class:"py-10 mt-6"},{default:fe(()=>[u(q).length&&!u(ve).isPending.value?(vn(),sl("section",Qm,[J(ol,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:fe(()=>[(vn(!0),sl(bo,null,$r(u(q),(Be,ks)=>(vn(),Ya(bl,{key:ks},{default:fe(()=>[J(bt,{name:"slide-fade",appear:""},{default:fe(()=>[J(Kt,{bordered:"",hoverable:""},{cover:fe(()=>[tl("div",{class:"flex items-center justify-center w-full h-full relative cursor-pointer",onClick:ha=>E(Be)},[J(ge,{load:()=>u(t)(Be.path),fallback:Be.thumbnailUrl??u(lm),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),tl("div",Xm,[J(u(O),{size:72},{default:fe(()=>[J(u(ce),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),tl("div",Zm,[J(fn,null,{default:fe(()=>[(vn(!0),sl(bo,null,$r(Be.categories,ha=>(vn(),Ya(Et,{size:"small",bordered:!1,key:ha.id,onClick:xr(()=>{},["stop"])},{default:fe(()=>[wn(_n(u(s)(ha.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,Jm)]),header:fe(()=>[tl("div",ef,[J(pe,{"line-clamp":1,"expand-trigger":"click"},{default:fe(()=>[Be.id?(vn(),Ya(mt,{key:u(Ye)+Be.id,checked:u(ee)[Be.id],"onUpdate:checked":ha=>u(ee)[Be.id]=ha,class:"mr-1",onClick:G[8]||(G[8]=xr(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):Xo("",!0),wn(" "+_n(u(s)(Be.title)),1)]),_:2},1024)])]),action:fe(()=>[J(fn,{justify:"space-between",align:"center"},{default:fe(()=>[J(fn,null,{default:fe(()=>[J(Et,{bordered:!1,type:Be.isVisible?"success":"error"},{default:fe(()=>[wn(_n(Be.isVisible?u(e)("visible"):u(e)("hidden")),1)]),_:2},1032,["type"]),J(Et,{bordered:!1,type:Be.displayType==u(za).HORIZONTAL?"info":"warning"},{default:fe(()=>[wn(_n(Be.displayType==u(za).HORIZONTAL?u(e)("horizontal"):u(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),J(fn,null,{default:fe(()=>[J(se,{size:"small",type:"primary",secondary:"",title:u(e)("play"),onClick:ha=>E(Be)},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),Be.source!=u(gl).YOUTUBE?(vn(),Ya(se,{key:0,size:"small",type:"primary",secondary:"",title:u(e)("edit"),disabled:u(ue),onClick:ha=>$(Be)},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","disabled","onClick"])):Xo("",!0),J(se,{size:"small",type:"error",secondary:"",title:u(e)("delete"),disabled:u(L),onClick:ha=>S(Be)},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),J(Ml,{page:u(V),"onUpdate:page":[G[9]||(G[9]=Be=>pa(V)?V.value=Be:null),k],class:"mt-10 justify-center","show-size-picker":"","page-size":u(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(u(K)/u(d)),"onUpdate:pageSize":x},{prefix:fe(()=>[wn(_n(`${u(K)} ${u(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):u(ve).isPending.value?(vn(),sl("section",tf,[J(st,{size:"medium"})])):(vn(),Ya(Pn,{key:2,description:u(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),J(Ua,{show:u(ye),"onUpdate:show":G[25]||(G[25]=Be=>pa(ye)?ye.value=Be:null),loading:u(ae),preset:"dialog",style:{width:"1000px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:u(Q)?u(e)("editVideo"):u(e)("addVideo"),"positive-text":u(e)("validate"),"negative-text":u(e)("cancel"),onPositiveClick:l,onNegativeClick:G[26]||(G[26]=Be=>ye.value=!1)},{default:fe(()=>[tl("div",nf,[J(Jn,{ref_key:"formRef",ref:h,model:u(y),rules:u($e),"show-require-mark":!1,size:"medium"},{default:fe(()=>[J(ol,{"x-gap":"12",span:24},{default:fe(()=>[J(bl,{span:12},{default:fe(()=>[J(Wn,{label:u(e)("source"),path:"source"},{default:fe(()=>[J(mt,{checked:u(y).source,"onUpdate:checked":G[10]||(G[10]=Be=>u(y).source=Be),"checked-value":u(gl).YOUTUBE,"unchecked-value":u(gl).SELF_HOSTED},{default:fe(()=>[wn(_n(u(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),u(y).source==u(gl).YOUTUBE?(vn(),sl(bo,{key:0},[J(ol,{"x-gap":"12",span:24},{default:fe(()=>[J(Oe,{span:16,label:u(e)("videoShareLink"),path:"path"},{default:fe(()=>[J(yt,{value:u(y).path,"onUpdate:value":G[11]||(G[11]=Be=>u(y).path=Be),placeholder:u(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),J(Oe,{span:8,label:u(e)("displayType"),path:"displayType"},{default:fe(()=>[J(Qn,{value:u(y).displayType,"onUpdate:value":G[12]||(G[12]=Be=>u(y).displayType=Be),placeholder:u(e)("displayType"),options:u(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),J(ol,{"x-gap":"12",span:24},{default:fe(()=>[J(Oe,{span:16,label:u(e)("categories"),path:"categories"},{default:fe(()=>[J(Qn,{value:u(W),"onUpdate:value":G[13]||(G[13]=Be=>pa(W)?W.value=Be:null),"render-label":B,placeholder:u(e)("categories"),options:u(I),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),J(Oe,{span:8,label:u(e)("visibility"),path:"isVisible"},{default:fe(()=>[J(ws,{value:u(y).isVisible,"onUpdate:value":G[14]||(G[14]=Be=>u(y).isVisible=Be),name:"isVisible",class:"w-full"},{default:fe(()=>[J(co,{value:!1,label:u(e)("hidden"),class:"w-[50%]"},null,8,["label"]),J(co,{value:!0,label:u(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})],64)):(vn(),sl(bo,{key:1},[J(Wn,{"show-label":!1,path:"title"},{default:fe(()=>[J(uo,{modelValue:u(y).title,"onUpdate:modelValue":G[15]||(G[15]=Be=>u(y).title=Be),placeholder:u(e)("title"),class:"w-full",sync:""},{label:fe(()=>[wn(_n(u(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(Wn,{"show-label":!1,path:"description"},{default:fe(()=>[J(uo,{modelValue:u(y).description,"onUpdate:modelValue":G[16]||(G[16]=Be=>u(y).description=Be),placeholder:u(e)("description"),class:"w-full",type:"textarea",sync:""},{label:fe(()=>[wn(_n(u(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),J(ol,{"x-gap":"12",span:24},{default:fe(()=>[J(Oe,{span:16,label:u(e)("categories"),path:"categories"},{default:fe(()=>[J(Qn,{value:u(W),"onUpdate:value":G[17]||(G[17]=Be=>pa(W)?W.value=Be:null),"render-label":B,placeholder:u(e)("categories"),options:u(I),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),J(Oe,{span:8,label:u(e)("visibility"),path:"isVisible"},{default:fe(()=>[J(ws,{value:u(y).isVisible,"onUpdate:value":G[18]||(G[18]=Be=>u(y).isVisible=Be),name:"isVisible",class:"w-full"},{default:fe(()=>[J(co,{value:!1,label:u(e)("hidden"),class:"w-[50%]"},null,8,["label"]),J(co,{value:!0,label:u(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),J(ol,{"x-gap":"12",span:24},{default:fe(()=>[J(Oe,{span:16,label:u(e)("content"),path:"path"},{default:fe(()=>[J(Qe,null,{default:fe(()=>[J(se,{type:"primary",secondary:"",onClick:G[19]||(G[19]=()=>{o.value=!0})},{default:fe(()=>[wn(_n(u(e)("select")),1)]),_:1}),J(yt,{value:u(y).path?u(_c)(u(y).path):"",placeholder:u(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),u(y).path?(vn(),sl(bo,{key:0},[J(se,{type:"primary",ghost:"",onClick:G[20]||(G[20]=()=>{N.value=u(e)("video"),F.value=u(n)(u(y).path),Y.value="classic",b.value=!0})},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:play"})]),_:1})]),default:fe(()=>[wn(" "+_n(u(e)("play")),1)]),_:1}),J(se,{type:"primary",ghost:"",onClick:G[21]||(G[21]=()=>{u(y).path=""})},{icon:fe(()=>[J(u(O),null,{default:fe(()=>[J(u(ce),{icon:"carbon:trash-can"})]),_:1})]),default:fe(()=>[wn(" "+_n(u(e)("clear")),1)]),_:1})],64)):Xo("",!0)]),_:1})]),_:1},8,["label"]),J(Oe,{span:8,label:u(e)("displayType"),path:"displayType"},{default:fe(()=>[J(Qn,{value:u(y).displayType,"onUpdate:value":G[22]||(G[22]=Be=>u(y).displayType=Be),placeholder:u(e)("displayType"),options:u(c),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1})],64))]),_:1}),J(bl,{span:12},{default:fe(()=>[u(y).source!=u(gl).YOUTUBE?(vn(),Ya(Wn,{key:0,label:u(e)("thumbnail"),path:"thumbnail"},{default:fe(()=>[tl("div",lf,[tl("div",{class:"cursor-pointer w-full h-[135px]",onClick:G[23]||(G[23]=()=>{P.value=!0})},[u(y).thumbnail?(vn(),Ya(ni,{key:0,"object-fit":"cover","preview-disabled":"",class:"py-2 thumbnail-image",style:Cr("border: 1px dashed "+u(i)(u(a),"white")),src:u(n)(u(y).thumbnail||"")},null,8,["style","src"])):(vn(),sl("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Cr("border: 1px dashed "+u(i)(u(a),"white"))},[J(u(O),{size:64},{default:fe(()=>[J(u(ce),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])):Xo("",!0),J(Wn,{label:u(e)("metadata"),path:"userMetadata"},{default:fe(()=>[J(xe,{value:u(y).userMetadata,"onUpdate:value":G[24]||(G[24]=Be=>u(y).userMetadata=Be),preset:"pair","key-placeholder":u(e)("label"),"value-placeholder":u(e)("content")},{"create-button-default":fe(()=>[wn(_n(u(e)("add")),1)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),J(Ua,{show:u(b),"onUpdate:show":G[27]||(G[27]=Be=>pa(b)?b.value=Be:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:u(N)},{default:fe(()=>[u(Y)==="youtube"?(vn(),sl("iframe",{key:0,width:"100%",height:"380",src:u(F),frameborder:"0",allowfullscreen:""},null,8,af)):(vn(),sl("video",of,[tl("source",{src:u(F)},null,8,sf)]))]),_:1},8,["show","title"]),J(Xi,{show:u(o),"onUpdate:show":G[28]||(G[28]=Be=>pa(o)?o.value=Be:null),title:u(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:u(j)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:G[29]||(G[29]=Be=>{u(y).path=Be,o.value=!1})},null,8,["show","title","upload-config"]),J(Xi,{show:u(P),"onUpdate:show":G[30]||(G[30]=Be=>pa(P)?P.value=Be:null),title:u(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:u(j)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:G[31]||(G[31]=Be=>{u(y).thumbnail=Be,P.value=!1})},null,8,["show","title","upload-config"])],64)}}}),pf=Uo(uf,[["__scopeId","data-v-d9d4c4b9"]]),{t:Ke}=Gi.global,Vr=[{key:"maxlength",defaultValue:"",placeholder:Ke("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Ke("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],mf={text:Vr,textarea:Vr,number:[{key:"min",defaultValue:"",placeholder:Ke("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ke("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Ke("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Ke("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ke("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ke("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ke("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"format",defaultValue:"",placeholder:Ke("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"format",defaultValue:"",placeholder:Ke("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"format",defaultValue:"",placeholder:Ke("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"format",defaultValue:"",placeholder:Ke("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ke("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ke("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ke("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ke("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ke("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ke("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"library",defaultValue:"all",placeholder:Ke("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Ke("maxTagCount")},{key:"max",defaultValue:"",placeholder:Ke("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Ke("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Ke("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ke("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ke("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Ke("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ke("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Ke("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Ke("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Ke("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Ke("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ke("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Ke("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Ke("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Ke("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Ke("sliderStep"),isNumber:!0}]},{t:Je}=Gi.global,ki=[{type:"group",label:Je("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:Je("text"),value:"text"},{label:Je("i18nText"),value:"i18n-text"},{label:Je("textarea"),value:"textarea"},{label:Je("i18nTextarea"),value:"i18n-textarea"},{label:Je("editor"),value:"editor"},{label:Je("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:Je("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:Je("number"),value:"number"},{label:Je("checkbox"),value:"checkbox"},{label:Je("switch"),value:"switch"},{label:Je("slider"),value:"slider"},{label:Je("rangeSlider"),value:"range-slider"}]},{type:"group",label:Je("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:Je("singleSelect"),value:"single-select"},{label:Je("multiSelect"),value:"multi-select"}]},{type:"group",label:Je("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:Je("date"),value:"date"},{label:Je("daterange"),value:"daterange"},{label:Je("datetime"),value:"datetime"},{label:Je("datetimerange"),value:"datetimerange"},{label:Je("year"),value:"year"},{label:Je("yearrange"),value:"yearrange"},{label:Je("month"),value:"month"},{label:Je("monthrange"),value:"monthrange"},{label:Je("quarter"),value:"quarter"},{label:Je("quarterrange"),value:"quarterrange"},{label:Je("week"),value:"week"}]},{type:"group",label:Je("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:Je("image"),value:"image"},{label:Je("gallery"),value:"gallery"},{label:Je("audio"),value:"audio"},{label:Je("video"),value:"video"},{label:Je("document"),value:"document"},{label:Je("file"),value:"file"}]},{type:"group",label:Je("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:Je("newsArticle"),value:"news-article"},{label:Je("newsArticles"),value:"news-articles"},{label:Je("newsCategory"),value:"news-category"},{label:Je("newsCategories"),value:"news-categories"},{label:Je("newsTag"),value:"news-tag"},{label:Je("newsTags"),value:"news-tags"}]},{type:"group",label:Je("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:Je("icon"),value:"icon"},{label:Je("icons"),value:"icons"},{label:Je("color"),value:"color"},{label:Je("gradient"),value:"gradient"}]},{type:"group",label:Je("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:Je("contentItem"),value:"content-model-item"},{label:Je("contentItems"),value:"content-model-items"},{label:Je("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:Je("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:Je("list"),value:"list"},{label:Je("i18nList"),value:"i18n-list"},{label:Je("albums"),value:"albums"}]}],{useModel:ff,mergeModels:_f,defineComponent:vf}=await me("vue"),{renderList:Zo,Fragment:ma,openBlock:Wt,createElementBlock:_l,unref:Re,createVNode:lt,withCtx:at,resolveComponent:Sr,createElementVNode:Kn,createBlock:Ll,createCommentVNode:$i,toDisplayString:Gn,createTextVNode:Ha,normalizeClass:gf,isRef:Er}=await me("vue"),yf={class:"flex items-center"},bf={class:"flex items-center justify-between w-full"},hf={class:"flex items-center justify-between"},wf={class:"text-base font-semibold ml-4"},kf={class:"text-xs text-slate-400"},$f={class:"text-xs text-slate-400"},xf={class:"text-xs text-slate-400"},Cf={class:"text-xs text-slate-400"},If={key:0},Vf={class:"text-xs text-slate-400"},Sf={key:1},Ef={class:"text-xs text-slate-400"},zf={key:2},Tf={class:"text-xs text-slate-400"},Mf={key:3},Uf={class:"text-xs text-slate-400"},Nf={key:0,class:"w-full flex items-center"},Df={class:"w-full flex items-center"},Af={class:"w-full"},Pf={class:"text-sm"},{storeToRefs:Bf}=await me("pinia"),{ref:ho,computed:xi,h:es,inject:ts}=await me("vue"),Lf=vf({__name:"Fields",props:_f({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const{t:e,locale:s}=Ue(),{tr:n,formatKey:i,pickByTheme:t}=ut(),{isLightTheme:a}=Bf(Eo()),{data:c}=so(),I=f,ve=ff(f,"modelValue"),ie=K=>{for(const d of ki){const V=d.children.find(_=>_.value===K);if(V)return V.label}return null},L=ho(!1),he=ho(null),X=ho(null),T=ho(null),r=ho(),M=(K,d)=>{X.value=T.value=K,he.value=d;for(const V of ki)V.children.find(k=>k.value===K)&&(r.value=V.key);L.value=!0},ue=K=>{le(K).value=!le(K).value},le=K=>xi({get:()=>K.value===X.value,set:d=>{d?X.value=K.value:X.value=null}}),D=xi(()=>!X.value||X.value===T.value),j=()=>{X.value&&he.value!==null&&(ve.value[he.value].type=X.value),L.value=!1},ne=K=>es("div",{class:"flex items-center"},[es(O,{size:21,class:"text-gray-500"},{default:()=>es(ce,{icon:K.icon})}),es("span",{class:"font-normal ml-2 "},{default:()=>K.label}),es("span",{class:"text-gray-500 ml-1"},{default:()=>`(${K.children.length})`})]),U=ts("renderSelectLabel"),z=ts("removeCollectionField"),q=ts("removeSingleton"),W=ts("onCreateItemOption"),A=ts("expandedNames",()=>xi(()=>ho([]).value));return(K,d)=>{const V=Le,_=ul,k=jt,x=Rl,g=Sl,C=Zs,ae=al,ye=zl,Q=io,h=Dl,y=Sr("color-picker"),$e=ti,$=El,S=Wi,l=jl,o=ql,b=bn,N=Sr("Draggable"),F=hn,Y=Vc,E=Ic,P=cd,ke=ei,Ye=Hn;return Wt(),_l(ma,null,[lt(N,{list:ve.value,class:"w-full"},{default:at(()=>[(Wt(!0),_l(ma,null,Zo(ve.value,(ee,qe)=>(Wt(),Ll(b,{key:`field-${qe}`,size:"small",class:"my-2",hoverable:""},{default:at(()=>[lt(o,{"expanded-names":Re(A)(I.type=="collection"?`c-${I.parentItemIndex}-f-${qe}`:`s-${qe}`).value,"onUpdate:expandedNames":Ce=>Re(A)(I.type=="collection"?`c-${I.parentItemIndex}-f-${qe}`:`s-${qe}`).value=Ce,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":at(({collapsed:Ce})=>[Kn("div",yf,[lt(V,{size:"small",type:"error",secondary:"",onClick:()=>{I.type==="collection"?Re(z)&&Re(z)(I.collectionKey,qe):Re(q)&&Re(q)(qe)},title:Re(e)("delete")},{default:at(()=>[lt(Re(O),null,{default:at(()=>[lt(Re(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),d[3]||(d[3]=Kn("div",{class:"w-4"},null,-1)),lt(Re(O),null,{default:at(()=>[Ce?(Wt(),Ll(Re(ce),{key:0,icon:"fa-solid:chevron-left"})):(Wt(),Ll(Re(ce),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:at(()=>[...d[4]||(d[4]=[Kn("span",null,null,-1)])]),default:at(()=>[lt(l,{name:"1"},{header:at(()=>[Kn("div",bf,[Kn("div",hf,[lt(Re(O),{size:"18",class:"cursor-move mr-2"},{default:at(()=>[lt(Re(ce),{icon:"fa-solid:grip-lines"})]),_:1}),lt(_,{size:"small",type:"info"},{default:at(()=>[Ha(Gn(qe+1),1)]),_:2},1024),Kn("span",wf,Gn(Re(n)(ee.label)),1)])])]),default:at(()=>[lt(ae,{span:24,"x-gap":"6"},{default:at(()=>[lt(x,{span:6},{default:at(()=>[Kn("span",kf,Gn(Re(e)("fieldKey")),1),lt(k,{value:ee.key,placeholder:Re(e)("fieldKey"),class:"w-full","onUpdate:value":Ce=>ee.key=Re(i)(Ce)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),lt(x,{span:10},{default:at(()=>[lt(g,{modelValue:ee.label,"onUpdate:modelValue":Ce=>ee.label=Ce,placeholder:Re(e)("title"),class:"w-full",sync:""},{label:at(()=>[Kn("span",$f,Gn(Re(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),lt(x,{span:8},{default:at(()=>[Kn("span",xf,Gn(Re(e)("type")),1),lt(C,null,{default:at(()=>[lt(k,{value:ie(ee.type),placeholder:Re(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ce=>M(ee.type,qe)},null,8,["value","placeholder","onClick"]),lt(V,{secondary:"",onClick:Ce=>M(ee.type,qe)},{icon:at(()=>[lt(Re(ce),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),lt(ye,{class:"!mt-4 !mb-2"}),lt(ae,{span:24,"x-gap":"6"},{default:at(()=>[lt(x,{span:10,class:"flex items-center"},{default:at(()=>[lt(Q,{checked:ee.required,"onUpdate:checked":Ce=>ee.required=Ce,size:"medium"},{default:at(()=>[Ha(Gn(Re(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),lt(x,{span:14},{default:at(()=>[["content-model-item","content-model-items"].includes(ee.type)?(Wt(),_l(ma,{key:0},[Kn("span",Cf,Gn(Re(e)("contentModel")),1),lt(h,{value:ee.defaultValue,"onUpdate:value":Ce=>ee.defaultValue=Ce,options:Re(c),placeholder:Re(e)("contentModel"),"render-label":Re(U),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(Wt(),_l(ma,{key:1},[ee.type==="color"||ee.type==="gradient"?(Wt(),_l("div",If,[Kn("span",Vf,Gn(Re(e)("defaultValue")),1),lt(y,{"pure-color":ee.defaultValue,"onUpdate:pureColor":Ce=>ee.defaultValue=Ce,"default-pure-color":"#00000000","picker-type":"chrome","use-type":ee.type==="color"?"pure":"gradient",format:ee.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Re(a)?"white":"black",lang:Re(s)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):ee.type==="i18n-text"?(Wt(),_l("div",Sf,[lt(g,{modelValue:ee.defaultValue,"onUpdate:modelValue":Ce=>ee.defaultValue=Ce,placeholder:Re(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:at(()=>[Kn("span",Ef,Gn(Re(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):ee.type==="i18n-textarea"?(Wt(),_l("div",zf,[lt(g,{modelValue:ee.defaultValue,"onUpdate:modelValue":Ce=>ee.defaultValue=Ce,placeholder:Re(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:at(()=>[Kn("span",Tf,Gn(Re(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):ee.type==="i18n-editor"?(Wt(),_l("div",Mf,[lt(g,{modelValue:ee.defaultValue,"onUpdate:modelValue":Ce=>ee.defaultValue=Ce,placeholder:Re(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:at(()=>[Kn("span",Uf,Gn(Re(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(Wt(),Ll(k,{key:4,value:ee.defaultValue,"onUpdate:value":Ce=>ee.defaultValue=Ce,placeholder:Re(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),ee.type==="multi-select"||ee.type==="single-select"?(Wt(),Ll(ye,{key:0,"title-placement":"left",class:"!my-4"},{default:at(()=>[Ha(Gn(Re(e)("options")),1)]),_:1})):$i("",!0),lt($,{name:"slide-fade",appear:""},{default:at(()=>[ee.type==="multi-select"||ee.type==="single-select"?(Wt(),_l("div",Nf,[lt($e,{value:ee.options,"onUpdate:value":Ce=>ee.options=Ce,placeholder:Re(e)("addOption"),"on-create":Ce=>Re(W)?Re(W)(Ce,qe):null,"show-sort-button":"",class:"w-full"},{"create-button-default":at(()=>[Ha(Gn(Re(e)("addOption")),1)]),default:at(({value:Ce})=>[Kn("div",Df,[lt(k,{value:Ce.value,placeholder:Re(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Ze=>Ce.value=Re(i)(Ze)},null,8,["value","placeholder","onUpdate:value"]),lt(g,{modelValue:Ce.label,"onUpdate:modelValue":Ze=>Ce.label=Ze,placeholder:Re(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):$i("",!0)]),_:2},1024),(Wt(!0),_l(ma,null,Zo(Re(mf),(Ce,Ze,B)=>(Wt(),_l(ma,{key:B},[ee.type===Ze?(Wt(),Ll(o,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:at(()=>[lt(Re(O),{size:"18"},{default:at(()=>[lt(Re(ce),{icon:"carbon:chevron-right"})]),_:1})]),default:at(()=>[lt(l,{name:"1"},{header:at(()=>[lt(ye,{"title-placement":"left",class:"!my-4"},{default:at(()=>[Ha(Gn(Re(e)("settings")),1)]),_:1})]),default:at(()=>[lt($,{name:"slide-fade",appear:""},{default:at(()=>[Kn("div",Af,[(Wt(!0),_l(ma,null,Zo(Ce,w=>(Wt(),Ll(ae,{key:w.key,span:24,"x-gap":"12",class:"mb-2"},{default:at(()=>[lt(x,{span:10},{default:at(()=>[lt(k,{value:w.key,placeholder:Re(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),lt(x,{span:14},{default:at(()=>[w.isNumber?(Wt(),Ll(S,{key:0,value:ee.settings[w.key],"onUpdate:value":v=>ee.settings[w.key]=v,"default-value":w.defaultValue?parseInt(w.defaultValue):void 0,placeholder:w.placeholder||Re(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(Wt(),Ll(k,{key:1,value:ee.settings[w.key],"onUpdate:value":v=>ee.settings[w.key]=v,"default-value":w.defaultValue,placeholder:w.placeholder||Re(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):$i("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),lt(Ye,{show:Re(L),"onUpdate:show":d[2]||(d[2]=ee=>Er(L)?L.value=ee:null),preset:"card",size:"medium",style:{width:"650px"},title:Re(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":at(()=>[lt(F,{align:"center"},{default:at(()=>[lt(V,{secondary:"",size:"small",type:"success",disabled:Re(D),onClick:j},{default:at(()=>[lt(Re(ce),{icon:"carbon:checkmark",class:"mr-1"}),Ha(" "+Gn(Re(e)("select")),1)]),_:1},8,["disabled"]),lt(V,{secondary:"",size:"small",type:"error",onClick:d[0]||(d[0]=ee=>L.value=!1)},{default:at(()=>[lt(Re(ce),{icon:"carbon:close",class:"mr-1"}),Ha(" "+Gn(Re(e)("close")),1)]),_:1})]),_:1})]),default:at(()=>[lt(ke,{animated:"",type:"line",size:"medium",placement:"left",value:Re(r),"onUpdate:value":d[1]||(d[1]=ee=>Er(r)?r.value=ee:null),style:{height:"100%"}},{default:at(()=>[(Wt(!0),_l(ma,null,Zo(Re(ki),(ee,qe)=>(Wt(),Ll(P,{name:ee.key,tab:ne(ee),key:qe},{default:at(()=>[lt(E,{hoverable:"",clickable:"",bordered:""},{default:at(()=>[(Wt(!0),_l(ma,null,Zo(ee.children,Ce=>(Wt(),Ll(Y,{class:gf(le(Ce).value?`${Re(t)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ce.value,onClick:Ze=>ue(Ce)},{suffix:at(()=>[lt(Q,{checked:le(Ce).value,"onUpdate:checked":Ze=>le(Ce).value=Ze,size:"medium",onClick:Ze=>ue(Ce)},null,8,["checked","onUpdate:checked","onClick"])]),default:at(()=>[Kn("span",Pf,Gn(Ce.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),zr=Uo(Lf,[["__scopeId","data-v-f2dba27a"]]),{useModel:Ff,mergeModels:Of,defineComponent:Rf}=await me("vue"),{unref:De,toDisplayString:Ln,openBlock:Qt,createElementBlock:ns,createCommentVNode:wo,createTextVNode:Fl,resolveComponent:Uy,withCtx:He,createVNode:tt,createElementVNode:ea,createBlock:Cn,normalizeStyle:Ci,isRef:qf,renderList:jf,Fragment:Tr,normalizeClass:Kf}=await me("vue"),Gf={class:"text-base"},Yf={key:0},Hf={key:0},Wf={key:0},Qf={class:"flex items-center"},Jf={class:"flex items-center justify-between w-full"},Xf={class:"text-base font-semibold"},Zf={class:"text-xs text-slate-400"},e_={class:"text-xs text-slate-400"},t_={class:"text-xs text-slate-400"},{defineAsyncComponent:n_,ref:ta,computed:Os,watch:Rs,h:l_,provide:$a}=await me("vue"),{storeToRefs:a_}=await me("pinia"),Pc=Rf({__name:"index",props:Of({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(f){const e=n_(()=>So(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(l=>l.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:s}=Ue(),{tr:n,pickByTheme:i,formatKey:t}=ut(),{isLightTheme:a}=a_(Eo());so();const c=f,I=Ff(f,"show"),ve=ot(),ie=Xe(),L=An(),he=ta(!1),X=ta(null),T=ta({}),r=ta({}),M={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},ue=ta(!1),le=ta(!1),D=ta(!1),j=ta(!1),ne=ta({}),U=l=>Os({get:()=>ne.value[l]?["1"]:[],set:o=>{ne.value[l]=o.length>0}}),z=Os({get:()=>de.omit(T.value,["index"]),set:l=>{T.value=T.value.index!==void 0?{index:T.value.index,...l}:{...l}}});Rs(()=>j.value,l=>{Object.entries(T.value).forEach(([o,b],N)=>{o!=="index"&&(ne.value[`c-${N}`]=l,b?.items?.forEach((F,Y)=>{ne.value[`c-${N}-f-${Y}`]=l}))})}),Rs(()=>D.value,l=>{Object.entries(T.value).forEach(([o,b],N)=>{o==="index"&&b?.forEach((F,Y)=>{ne.value[`s-${Y}`]=l})})});const q=Os(()=>de.isEqual(T.value,r.value)),W=()=>{T.value?T.value.index&&Array.isArray(T.value.index)?T.value.index.push(de.cloneDeep(M)):T.value.index=[de.cloneDeep(M)]:T.value={index:[de.cloneDeep(M)]}},A=l=>{T.value&&Array.isArray(T.value.index)&&T.value.index.splice(l,1)},K=()=>{const l=En();T.value?T.value[l]={key:"",title:"",items:[]}:T.value={[l]:{key:"",title:"",items:[]}}},d=l=>{if(T.value){const{[l]:o,...b}=T.value;T.value=b}},V=l=>{T.value&&T.value[l].items.push(de.cloneDeep(M))},_=(l,o)=>{if(T.value){const b=T.value[l];b&&Array.isArray(b.items)&&b.items.splice(o,1)}},k=l=>l.title&&l.key&&l.key!=="index",x=()=>T.value&&typeof T.value=="object"?Object.keys(T.value).filter(l=>l!=="index").length:0,g=Os(()=>T.value?Object.keys(T.value).filter(l=>l!=="index"):[]),C=l=>g.value.indexOf(l),ae=ta(!1),ye=async()=>{const l=de.cloneDeep(T.value),o=de.cloneDeep(T.value);ae.value=!1,he.value=!0,ve.start();const b=[];if(de.forIn(l,(N,F)=>{F!=="index"&&b.push(N.key)}),de.forIn(l,(N,F)=>{if(F!=="index"){const Y=de.keys(l).filter(E=>E!=="index").indexOf(F);if(N&&N.key){if(N.key==="index")return ie.error(s("keyIndexIsReservedInCollections")),ae.value=!0,!1;if(b.filter(P=>P==N.key).length>1)return ie.error(s("collectionKeyIsNotUnique",[N.key])),ae.value=!0,!1;if(Array.isArray(N.items))for(const[P,ke]of N.items.entries())if(ke.key){if(N.items.filter(ee=>ee.key===ke.key).length>1)return ie.error(s("fieldKeyOfCollectionIsNotUnique",[ke.key,N.key])),ae.value=!0,!1}else return ie.error(s("fieldKeyOfCollectionIsRequired",[P+1,N.key])),ae.value=!0,!1}else return ie.error(s("collectionKeyIsRequired",[Y+1])),ae.value=!0,!1}else if(Array.isArray(N))for(const[Y,E]of N.entries())if(E.key){if(N.filter(ke=>ke.key===E.key).length>1)return ie.error(s("singletonKeyIsNotUnique",[E.key])),ae.value=!0,!1}else return ie.error(s("singletonKeyIsRequired",[Y+1])),ae.value=!0,!1}),ae.value){he.value=!1,ve.finish();return}de.forIn(o,(N,F)=>{F!=="index"&&F!==N.key&&wc(l,F,N.key)}),await c.updateDataStructure(l),he.value=!1,ve.finish()},Q=()=>{de.isEqual(T.value,r.value)?I.value=!1:L.warning({title:s("confirm"),content:s("confirmCloseDataStructure"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{I.value=!1}})};Rs(()=>c.rawDataStructure,l=>{T.value=l?de.cloneDeep(l):{},de.forIn(l,(o,b)=>{b!=="index"?(T.value[b].key=b,o?.items?.forEach((N,F)=>{T.value[b].items[F].settings||(T.value[b].items[F].settings={})})):o?.forEach((N,F)=>{T.value[b][F].settings||(T.value[b][F].settings={})})}),r.value=de.cloneDeep(T.value)},{immediate:!0,deep:!0});const h=l=>l_("span",{},{default:()=>n(l.title)}),y=(l,o)=>({value:`option_${o+1}${l+1}`,label:""}),{copy:$e,copied:$,isSupported:S}=Nc();return Rs(()=>$.value,l=>{l&&ie.success(s("dataStructureCopied"))}),$a("removeCollectionField",_),$a("onCreateItemOption",y),$a("renderSelectLabel",h),$a("removeSingleton",A),$a("addSingleton",W),$a("expandCollections",j),$a("expandSingletons",D),$a("expandedNames",U),(l,o)=>{const b=Ji,N=ce,F=O,Y=Le,E=hn,P=bn,ke=ya,Ye=Rl,ee=ul,qe=jt,Ce=Sl,Ze=al,B=zl,w=Hi,v=jl,G=ql,mt=ji;return Qt(),Cn(mt,{modelValue:I.value,"onUpdate:modelValue":o[13]||(o[13]=se=>I.value=se),"close-on-esc":!1,closable:!1,onOnSizeChange:o[14]||(o[14]=se=>{X.value=se})},{header:He(()=>[ea("div",Gf,[tt(b,{depth:"1"},{default:He(()=>[Fl(Ln(De(s)("dataStructure"))+" ",1),f.title?(Qt(),ns("span",Yf,"Â -Â "+Ln(f.title),1)):wo("",!0)]),_:1})])]),"header-extra":He(()=>[tt(E,{align:"center"},{default:He(()=>[tt(Y,{secondary:"",title:De(s)("save"),loading:De(he),disabled:De(q),onClick:o[0]||(o[0]=se=>ye())},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:save"})]),_:1})]),default:He(()=>[Fl(" "+Ln(De(s)("save")),1)]),_:1},8,["title","loading","disabled"]),tt(Y,{secondary:"",type:"error",title:De(s)("close"),disabled:De(he),onClick:o[1]||(o[1]=se=>Q())},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:close"})]),_:1})]),default:He(()=>[Fl(" "+Ln(De(s)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:He(()=>[ea("section",{style:Ci(`min-height: ${De(X)?.windowHeight-De(X)?.headerHeight-5}px`),class:Kf(`w-full h-full ${De(i)("bg-slate-200","bg-zinc-800")}`)},[tt(Ze,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:He(()=>[tt(Ye,{class:"mx-2 mt-2"},{default:He(()=>[tt(P,{embedded:"",bordered:"",segmented:""},{header:He(()=>[Fl(Ln(De(s)("singletons"))+"Â  ",1),De(T).index?.length?(Qt(),ns("span",Hf," ("+Ln(De(T).index?.length)+") ",1)):wo("",!0)]),"header-extra":He(()=>[tt(E,null,{default:He(()=>[De(S)&&De(ue)?(Qt(),Cn(Y,{key:0,size:"small",type:"warning",secondary:"",title:De(s)("copy"),onClick:o[2]||(o[2]=se=>De($e)(JSON.stringify(De(T).index)))},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):wo("",!0),tt(Y,{size:"small",type:"warning",secondary:"",onClick:o[3]||(o[3]=()=>{ue.value=!De(ue),De(ue)&&(le.value=!1)})},{default:He(()=>[tt(F,null,{default:He(()=>[De(ue)?(Qt(),Cn(N,{key:0,icon:"carbon:code"})):(Qt(),Cn(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),tt(Y,{size:"small",type:"primary",secondary:"",onClick:o[4]||(o[4]=se=>D.value=!De(D))},{default:He(()=>[tt(F,null,{default:He(()=>[De(D)?(Qt(),Cn(N,{key:0,icon:"carbon:collapse-categories"})):(Qt(),Cn(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),tt(Y,{size:"small",type:"primary",secondary:"",onClick:o[5]||(o[5]=se=>W())},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Fl(" "+Ln(De(s)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),De(ue)?(Qt(),Cn(De(e),{key:0,height:De(X)?.windowHeight-De(X)?.headerHeight-100,"dark-theme":!De(a),class:"creopse-json-editor",mode:"tree",json:De(T).index,"onUpdate:json":o[6]||(o[6]=se=>De(T).index=se)},null,8,["height","dark-theme","json"])):(Qt(),Cn(ke,{key:1,style:Ci(`max-height: ${De(X)?.windowHeight-De(X)?.headerHeight-100}px`)},{default:He(()=>[tt(zr,{modelValue:De(T).index,"onUpdate:modelValue":o[7]||(o[7]=se=>De(T).index=se),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),tt(Ye,{class:"mx-2 mt-2"},{default:He(()=>[tt(P,{embedded:"",bordered:"",segmented:""},{header:He(()=>[Fl(Ln(De(s)("collections"))+"Â  ",1),x()>0?(Qt(),ns("span",Wf," ("+Ln(x())+") ",1)):wo("",!0)]),"header-extra":He(()=>[tt(E,null,{default:He(()=>[De(S)&&De(le)?(Qt(),Cn(Y,{key:0,size:"small",type:"warning",secondary:"",title:De(s)("copy"),onClick:o[8]||(o[8]=se=>De($e)(JSON.stringify(De(z))))},{icon:He(()=>[tt(F,null,{default:He(()=>[tt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):wo("",!0),tt(Y,{size:"small",type:"warning",secondary:"",onClick:o[9]||(o[9]=()=>{le.value=!De(le),De(le)&&(ue.value=!1)})},{default:He(()=>[tt(F,null,{default:He(()=>[De(le)?(Qt(),Cn(N,{key:0,icon:"carbon:code"})):(Qt(),Cn(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),tt(Y,{size:"small",type:"primary",secondary:"",onClick:o[10]||(o[10]=se=>j.value=!De(j))},{default:He(()=>[tt(F,null,{default:He(()=>[De(j)?(Qt(),Cn(N,{key:0,icon:"carbon:collapse-categories"})):(Qt(),Cn(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),tt(Y,{size:"small",type:"primary",secondary:"",onClick:o[11]||(o[11]=se=>K())},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Fl(" "+Ln(De(s)("addCollection")),1)]),_:1})]),_:1})]),_:1}),De(le)?(Qt(),Cn(De(e),{key:0,height:De(X)?.windowHeight-De(X)?.headerHeight-100,"dark-theme":!De(a),class:"creopse-json-editor",mode:"tree",json:De(z),"onUpdate:json":o[12]||(o[12]=se=>qf(z)?z.value=se:null)},null,8,["height","dark-theme","json"])):(Qt(),Cn(ke,{key:1,style:Ci(`max-height: ${De(X)?.windowHeight-De(X)?.headerHeight-100}px`)},{default:He(()=>[(Qt(!0),ns(Tr,null,jf(De(T)||{},(se,_t,ft)=>(Qt(),ns(Tr,{key:ft},[_t!="index"?(Qt(),Cn(P,{key:0,size:"small",class:"my-2",embedded:""},{default:He(()=>[tt(G,{"expanded-names":U(`c-${ft}`).value,"onUpdate:expandedNames":yt=>U(`c-${ft}`).value=yt,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":He(({collapsed:yt})=>[ea("div",Qf,[tt(Y,{size:"small",type:"error",secondary:"",onClick:Qe=>d(_t)},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:trash-can"})]),_:1}),Fl(" "+Ln(De(s)("delete")),1)]),_:1},8,["onClick"]),o[15]||(o[15]=ea("div",{class:"w-4"},null,-1)),tt(F,null,{default:He(()=>[yt?(Qt(),Cn(N,{key:0,icon:"fa-solid:chevron-left"})):(Qt(),Cn(N,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:He(()=>[...o[16]||(o[16]=[ea("span",null,null,-1)])]),default:He(()=>[tt(v,{name:"1"},{header:He(()=>[ea("div",Jf,[tt(E,null,{default:He(()=>[tt(ee,{size:"small",type:"success"},{default:He(()=>[Fl(Ln(C(_t)+1),1)]),_:2},1024),ea("span",Xf,Ln(De(n)(se.title)),1)]),_:2},1024)])]),default:He(()=>[tt(Ze,{span:24,"x-gap":"6"},{default:He(()=>[tt(Ye,{span:6},{default:He(()=>[ea("span",Zf,Ln(De(s)("fieldKey")),1),tt(qe,{value:se.key,placeholder:De(s)("collectionKey"),class:"w-full",size:"small","onUpdate:value":yt=>se.key=De(t)(yt)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),tt(Ye,{span:11},{default:He(()=>[tt(Ce,{modelValue:se.title,"onUpdate:modelValue":yt=>se.title=yt,placeholder:De(s)("title"),class:"w-full",size:"small",sync:""},{label:He(()=>[ea("span",e_,Ln(De(s)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),tt(Ye,{span:7},{default:He(()=>[ea("span",t_,Ln(De(s)("actions")),1),tt(Y,{block:"",size:"small",type:"primary",disabled:!k(se),secondary:"",class:"w-full",onClick:yt=>V(_t)},{default:He(()=>[tt(F,{class:"mr-1"},{default:He(()=>[tt(N,{icon:"carbon:add-alt"})]),_:1}),Fl(" "+Ln(De(s)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),tt(B,{class:"!my-4.75"}),k(se)?(Qt(),Cn(zr,{key:0,modelValue:De(T)[_t].items,"onUpdate:modelValue":yt=>De(T)[_t].items=yt,"parent-item-index":ft,"collection-key":_t,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(Qt(),Cn(w,{key:1,bordered:"",type:"info"},{default:He(()=>[Fl(Ln(De(s)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):wo("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:il}=Gi.global,o_=[{label:il("text"),value:"text"},{label:il("textarea"),value:"textarea"},{label:il("number"),value:"number"},{label:il("switch"),value:"switch"},{label:il("singleSelect"),value:"single-select"},{label:il("multiSelect"),value:"multi-select"},{label:il("slider"),value:"slider"},{label:il("image"),value:"image"},{label:il("icon"),value:"icon"},{label:il("color"),value:"color"},{label:il("gradient"),value:"gradient"},{label:il("dimensions"),value:"dimensions"},{label:il("background"),value:"background"},{label:il("border"),value:"border"},{label:il("shadow"),value:"shadow"}],{useModel:s_,mergeModels:i_,defineComponent:r_}=await me("vue"),{unref:Fe,toDisplayString:an,openBlock:on,createElementBlock:ko,createCommentVNode:ls,createTextVNode:$l,resolveComponent:Mr,withCtx:Ae,createVNode:Pe,createElementVNode:$n,createBlock:Fn,isRef:c_,renderList:Ur,Fragment:Nr,normalizeStyle:Dr,normalizeClass:d_}=await me("vue"),u_={class:"text-base"},p_={key:0},m_={key:0},f_={class:"flex items-center"},__={class:"flex items-center justify-between w-full"},v_={class:"text-base font-semibold"},g_={class:"text-xs text-slate-400"},y_={class:"text-xs text-slate-400"},b_={class:"text-xs text-slate-400"},h_={class:"flex items-center"},w_={class:"flex items-center justify-between w-full"},k_={class:"flex items-center justify-between"},$_={class:"text-base font-semibold ml-4"},x_={class:"text-xs text-slate-400"},C_={class:"text-xs text-slate-400"},I_={class:"text-xs text-slate-400"},V_={key:0},S_={class:"text-xs text-slate-400"},E_={key:0,class:"w-full flex items-center"},z_={class:"w-full flex items-center"},{defineAsyncComponent:T_,ref:xa,computed:Ii,watch:Vi}=await me("vue"),{storeToRefs:M_}=await me("pinia"),U_=r_({__name:"index",props:i_({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(f){const e=T_(()=>So(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(h=>h.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),s=An(),n=Xe(),i=ot(),{t,locale:a}=Ue(),{pickByTheme:c,tr:I,formatKey:ve}=ut(),{isLightTheme:ie}=M_(Eo()),L=f,he=s_(f,"show"),X=xa(null),T=xa(!1),r=xa({}),M=xa({}),ue={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},le=xa(!1),D=xa(!1),j=xa({}),ne=h=>Ii({get:()=>j.value[h]?["1"]:[],set:y=>{j.value[h]=y.length>0}});Vi(()=>L.settingsStructure,h=>{r.value=h?de.cloneDeep(h):{},de.forIn(h,(y,$e)=>{r.value[$e].key=$e}),M.value=de.cloneDeep(r.value)},{immediate:!0,deep:!0});const U=Ii(()=>de.isEqual(r.value,M.value)),z=xa(!1),q=async()=>{const h=de.cloneDeep(r.value),y=de.cloneDeep(r.value);z.value=!1,T.value=!0,i.start();const $e=Object.values(h).map($=>$.key);if(de.forIn(h,($,S)=>{const l=de.keys(h).indexOf(S);if($&&$.key){if($e.filter(b=>b==$.key).length>1)return n.error(t("groupKeyIsNotUnique",[$.key])),z.value=!0,!1;if(Array.isArray($.items))for(const[b,N]of $.items.entries())if(N.key){if($.items.filter(Y=>Y.key===N.key).length>1)return n.error(t("fieldKeyOfGroupIsNotUnique",[N.key,$.key])),z.value=!0,!1}else return n.error(t("fieldKeyOfGroupIsRequired",[b+1,$.key])),z.value=!0,!1}else return n.error(t("groupKeyIsRequired",[l+1])),z.value=!0,!1}),z.value){T.value=!1,i.finish();return}de.forIn(y,($,S)=>{S!==$.key&&wc(h,S,$.key)}),await L.updateSettingsStructure(h),T.value=!1,i.finish()},W=()=>{de.isEqual(r.value,M.value)?he.value=!1:s.warning({title:t("confirm"),content:t("confirmCloseDataStructure"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{he.value=!1}})},A=()=>r.value&&typeof r.value=="object"?Object.keys(r.value).length:0,K=Ii(()=>r.value?Object.keys(r.value):[]),d=h=>K.value.indexOf(h),V=()=>{const h=En();r.value?r.value[h]={key:"",title:"",items:[]}:r.value={[h]:{key:"",title:"",items:[]}}},_=h=>{if(r.value){const{[h]:y,...$e}=r.value;r.value=$e}},k=h=>{r.value&&r.value[h].items.push(de.cloneDeep(ue))},x=(h,y)=>{if(r.value){const $e=r.value[h];$e&&Array.isArray($e.items)&&$e.items.splice(y,1)}},g=h=>h.title&&h.key,C=(h,y)=>({value:`option_${y+1}${h+1}`,label:""});Vi(()=>D.value,h=>{Object.entries(r.value).forEach(([y,$e],$)=>{j.value[`c-${$}`]=h,$e?.items?.forEach((S,l)=>{j.value[`c-${$}-f-${l}`]=h})})});const{copy:ae,copied:ye,isSupported:Q}=Nc();return Vi(()=>ye.value,h=>{h&&n.success(t("settingsStructureCopied"))}),(h,y)=>{const $e=Ji,$=ce,S=O,l=Le,o=hn,b=Rl,N=bn,F=ul,Y=jt,E=Sl,P=al,ke=zl,Ye=Dl,ee=io,qe=Mr("color-picker"),Ce=ti,Ze=El,B=jl,w=ql,v=Mr("Draggable"),G=Hi,mt=ya,se=ji;return on(),Fn(se,{modelValue:he.value,"onUpdate:modelValue":y[7]||(y[7]=_t=>he.value=_t),"close-on-esc":!1,closable:!1,onOnSizeChange:y[8]||(y[8]=_t=>{X.value=_t})},{header:Ae(()=>[$n("div",u_,[Pe($e,{depth:"1"},{default:Ae(()=>[$l(an(Fe(t)("sectionSettings"))+" ",1),f.title?(on(),ko("span",p_,"Â -Â "+an(f.title),1)):ls("",!0)]),_:1})])]),"header-extra":Ae(()=>[Pe(o,{align:"center"},{default:Ae(()=>[Pe(l,{secondary:"",title:Fe(t)("save"),loading:Fe(T),disabled:Fe(U),onClick:y[0]||(y[0]=_t=>q())},{icon:Ae(()=>[Pe(S,null,{default:Ae(()=>[Pe($,{icon:"carbon:save"})]),_:1})]),default:Ae(()=>[$l(" "+an(Fe(t)("save")),1)]),_:1},8,["title","loading","disabled"]),Pe(l,{secondary:"",type:"error",title:Fe(t)("close"),disabled:Fe(T),onClick:y[1]||(y[1]=_t=>W())},{icon:Ae(()=>[Pe(S,null,{default:Ae(()=>[Pe($,{icon:"carbon:close"})]),_:1})]),default:Ae(()=>[$l(" "+an(Fe(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ae(()=>[$n("section",{style:Dr(`min-height: ${Fe(X)?.windowHeight-Fe(X)?.headerHeight-5}px`),class:d_(`w-full h-full ${Fe(c)("bg-slate-200","bg-zinc-800")}`)},[Pe(P,{cols:"4","item-responsive":"",responsive:"screen"},{default:Ae(()=>[Pe(b,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Pe(b,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:Ae(()=>[Pe(N,{embedded:"",bordered:"",segmented:""},{header:Ae(()=>[$l(an(Fe(t)("groups"))+"Â  ",1),A()>0?(on(),ko("span",m_," ("+an(A())+") ",1)):ls("",!0)]),"header-extra":Ae(()=>[Pe(o,null,{default:Ae(()=>[Fe(Q)&&Fe(le)?(on(),Fn(l,{key:0,size:"small",type:"warning",secondary:"",title:Fe(t)("copy"),onClick:y[2]||(y[2]=_t=>Fe(ae)(JSON.stringify(Fe(r))))},{icon:Ae(()=>[Pe(S,null,{default:Ae(()=>[Pe($,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):ls("",!0),Pe(l,{size:"small",type:"warning",secondary:"",onClick:y[3]||(y[3]=()=>{le.value=!Fe(le)})},{default:Ae(()=>[Pe(S,null,{default:Ae(()=>[Fe(le)?(on(),Fn($,{key:0,icon:"carbon:code"})):(on(),Fn($,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Pe(l,{size:"small",type:"primary",secondary:"",onClick:y[4]||(y[4]=_t=>D.value=!Fe(D))},{default:Ae(()=>[Pe(S,null,{default:Ae(()=>[Fe(D)?(on(),Fn($,{key:0,icon:"carbon:collapse-categories"})):(on(),Fn($,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Pe(l,{size:"small",type:"primary",secondary:"",onClick:y[5]||(y[5]=_t=>V())},{default:Ae(()=>[Pe(S,{class:"mr-1"},{default:Ae(()=>[Pe($,{icon:"carbon:add-alt"})]),_:1}),$l(" "+an(Fe(t)("addGroup")),1)]),_:1})]),_:1})]),_:1}),Fe(le)?(on(),Fn(Fe(e),{key:0,height:Fe(X)?.windowHeight-Fe(X)?.headerHeight-100,"dark-theme":!Fe(ie),class:"creopse-json-editor",mode:"tree",json:Fe(r),"onUpdate:json":y[6]||(y[6]=_t=>c_(r)?r.value=_t:null)},null,8,["height","dark-theme","json"])):(on(),Fn(mt,{key:1,style:Dr(`max-height: ${Fe(X)?.windowHeight-Fe(X)?.headerHeight-100}px`)},{default:Ae(()=>[(on(!0),ko(Nr,null,Ur(Fe(r)||{},(_t,ft,yt)=>(on(),Fn(N,{key:yt,size:"small",class:"my-2",embedded:""},{default:Ae(()=>[Pe(w,{"expanded-names":ne(`c-${yt}`).value,"onUpdate:expandedNames":Qe=>ne(`c-${yt}`).value=Qe,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Ae(({collapsed:Qe})=>[$n("div",f_,[Pe(l,{size:"small",type:"error",secondary:"",onClick:St=>_(ft)},{default:Ae(()=>[Pe(S,{class:"mr-1"},{default:Ae(()=>[Pe($,{icon:"carbon:trash-can"})]),_:1}),$l(" "+an(Fe(t)("delete")),1)]),_:1},8,["onClick"]),y[9]||(y[9]=$n("div",{class:"w-4"},null,-1)),Pe(S,null,{default:Ae(()=>[Qe?(on(),Fn($,{key:0,icon:"fa-solid:chevron-left"})):(on(),Fn($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Ae(()=>[...y[10]||(y[10]=[$n("span",null,null,-1)])]),default:Ae(()=>[Pe(B,{name:"1"},{header:Ae(()=>[$n("div",__,[Pe(o,null,{default:Ae(()=>[Pe(F,{size:"small",type:"success"},{default:Ae(()=>[$l(an(d(ft)+1),1)]),_:2},1024),$n("span",v_,an(Fe(I)(_t.title)),1)]),_:2},1024)])]),default:Ae(()=>[Pe(P,{span:24,"x-gap":"6"},{default:Ae(()=>[Pe(b,{span:6},{default:Ae(()=>[$n("span",g_,an(Fe(t)("fieldKey")),1),Pe(Y,{value:_t.key,placeholder:Fe(t)("groupKey"),class:"w-full",size:"small","onUpdate:value":Qe=>_t.key=Fe(ve)(Qe)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Pe(b,{span:11},{default:Ae(()=>[Pe(E,{modelValue:_t.title,"onUpdate:modelValue":Qe=>_t.title=Qe,placeholder:Fe(t)("title"),class:"w-full",size:"small",sync:""},{label:Ae(()=>[$n("span",y_,an(Fe(t)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Pe(b,{span:7},{default:Ae(()=>[$n("span",b_,an(Fe(t)("actions")),1),Pe(l,{block:"",size:"small",type:"primary",disabled:!g(_t),secondary:"",class:"w-full",onClick:Qe=>k(ft)},{default:Ae(()=>[Pe(S,{class:"mr-1"},{default:Ae(()=>[Pe($,{icon:"carbon:add-alt"})]),_:1}),$l(" "+an(Fe(t)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Pe(ke,{class:"!my-4.75"}),g(_t)?(on(),Fn(v,{key:0,list:Fe(r)[ft].items,class:"w-full"},{default:Ae(()=>[(on(!0),ko(Nr,null,Ur(Fe(r)[ft].items,(Qe,St)=>(on(),Fn(N,{key:`field-${St}`,size:"small",class:"my-2",hoverable:""},{default:Ae(()=>[Pe(w,{"expanded-names":ne(`c-${ft}-f-${St}`).value,"onUpdate:expandedNames":ge=>ne(`c-${ft}-f-${St}`).value=ge,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":Ae(({collapsed:ge})=>[$n("div",h_,[Pe(l,{size:"small",type:"error",secondary:"",onClick:()=>{x(ft,St)},title:Fe(t)("delete")},{default:Ae(()=>[Pe(S,null,{default:Ae(()=>[Pe($,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),y[11]||(y[11]=$n("div",{class:"w-4"},null,-1)),Pe(S,null,{default:Ae(()=>[ge?(on(),Fn($,{key:0,icon:"fa-solid:chevron-left"})):(on(),Fn($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Ae(()=>[...y[12]||(y[12]=[$n("span",null,null,-1)])]),default:Ae(()=>[Pe(B,{name:"1"},{header:Ae(()=>[$n("div",w_,[$n("div",k_,[Pe(S,{size:"18",class:"cursor-move mr-2"},{default:Ae(()=>[Pe($,{icon:"fa-solid:grip-lines"})]),_:1}),Pe(F,{size:"small",type:"info"},{default:Ae(()=>[$l(an(St+1),1)]),_:2},1024),$n("span",$_,an(Fe(I)(Qe.label)),1)])])]),default:Ae(()=>[Pe(P,{span:24,"x-gap":"6"},{default:Ae(()=>[Pe(b,{span:6},{default:Ae(()=>[$n("span",x_,an(Fe(t)("fieldKey")),1),Pe(Y,{value:Qe.key,placeholder:Fe(t)("fieldKey"),class:"w-full","onUpdate:value":ge=>Qe.key=Fe(ve)(ge)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Pe(b,{span:10},{default:Ae(()=>[Pe(E,{modelValue:Qe.label,"onUpdate:modelValue":ge=>Qe.label=ge,placeholder:Fe(t)("title"),class:"w-full",sync:""},{label:Ae(()=>[$n("span",C_,an(Fe(t)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Pe(b,{span:8},{default:Ae(()=>[$n("span",I_,an(Fe(t)("type")),1),Pe(Ye,{value:Qe.type,"onUpdate:value":ge=>Qe.type=ge,options:Fe(o_),placeholder:Fe(t)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Pe(ke,{class:"!mt-4 !mb-2"}),Pe(P,{span:24,"x-gap":"6"},{default:Ae(()=>[Pe(b,{span:10,class:"flex items-center"},{default:Ae(()=>[Pe(ee,{checked:Qe.required,"onUpdate:checked":ge=>Qe.required=ge,size:"medium"},{default:Ae(()=>[$l(an(Fe(t)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),Pe(b,{span:14},{default:Ae(()=>[Qe.type==="color"||Qe.type==="gradient"?(on(),ko("div",V_,[$n("span",S_,an(Fe(t)("defaultValue")),1),Pe(qe,{"pure-color":Qe.defaultValue,"onUpdate:pureColor":ge=>Qe.defaultValue=ge,"default-pure-color":"#00000000","picker-type":"chrome","use-type":Qe.type==="color"?"pure":"gradient",format:Qe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Fe(ie)?"white":"black",lang:Fe(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(on(),Fn(Y,{key:1,value:Qe.defaultValue,"onUpdate:value":ge=>Qe.defaultValue=ge,placeholder:Fe(t)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),Qe.type==="multi-select"||Qe.type==="single-select"?(on(),Fn(ke,{key:0,"title-placement":"left",class:"!my-4"},{default:Ae(()=>[$l(an(Fe(t)("options")),1)]),_:1})):ls("",!0),Pe(Ze,{name:"slide-fade",appear:""},{default:Ae(()=>[Qe.type==="multi-select"||Qe.type==="single-select"?(on(),ko("div",E_,[Pe(Ce,{value:Qe.options,"onUpdate:value":ge=>Qe.options=ge,placeholder:Fe(t)("addOption"),"on-create":ge=>C?C(ge,St):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Ae(()=>[$l(an(Fe(t)("addOption")),1)]),default:Ae(({value:ge})=>[$n("div",z_,[Pe(Y,{value:ge.value,placeholder:Fe(t)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Et=>ge.value=Fe(ve)(Et)},null,8,["value","placeholder","onUpdate:value"]),Pe(E,{modelValue:ge.label,"onUpdate:modelValue":Et=>ge.label=Et,placeholder:Fe(t)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):ls("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(on(),Fn(G,{key:1,bordered:"",type:"info"},{default:Ae(()=>[$l(an(Fe(t)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Pe(b,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),N_=Uo(U_,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:D_}=await me("vue"),{unref:pt,renderList:Ar,Fragment:as,openBlock:na,createElementBlock:os,resolveComponent:Ny,createBlock:ss,createCommentVNode:Pr,withCtx:pn,createVNode:sn,createElementVNode:is,toDisplayString:Wa,createTextVNode:rs,withModifiers:Si,normalizeClass:Br,isRef:qs}=await me("vue"),A_={class:"flex items-center"},P_={class:"text-base"},B_={class:"mt-2"},{ref:la}=await me("vue"),L_=D_({__name:"index",setup(f){const{t:e}=Ue(),{tr:s,pickByTheme:n,isInDevMode:i}=ut(),{data:t}=kc(),{mutate:a,isPending:c}=hd(),{mutate:I,isPending:ve}=zc(),ie=la(24),L=la(1),he=V=>{ie.value=V},X={name:"",title:"",content:"",slug:""},T=la(!1),r=la(null),M=la(X),ue={title:[{required:!0,message:e("fillRequired")}]},le=la(null),D=V=>{le.value=de.cloneDeep(V),M.value=de.cloneDeep(V||X),T.value=!0},j=async()=>(r.value?.validate(async V=>{if(!V){const _={title:M.value.title};le.value?I({slug:le.value.slug,..._},{onSuccess:()=>{}}):a({name:de.startCase(de.camelCase(s(M.value.title))).replace(/\s+/g,""),..._},{onSuccess:()=>{}}),T.value=!1}}),!1),ne=la(null),U=la(!1),z=V=>{ne.value=V,U.value=!0},q=async V=>{I({slug:ne.value?.slug,dataStructure:V},{onSuccess:_=>{z(_)}})},W=la(null),A=la(!1),K=V=>{W.value=V,A.value=!0},d=async V=>{I({slug:W.value?.slug,settingsStructure:V},{onSuccess:_=>{K(_)}})};return(V,_)=>{const k=ce,x=O,g=Le,C=hn,ae=zl,ye=ul,Q=jl,h=ql,y=bn,$e=ro,$=Tl,S=Sl,l=ml,o=pl,b=Hn;return na(),os(as,null,[pt(t)&&pt(t).length?(na(),os(as,{key:0},[(na(!0),os(as,null,Ar(pt(t).slice((pt(L)-1)*pt(ie),pt(L)*pt(ie)),N=>(na(),ss(y,{key:N.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:pn(()=>[sn(h,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":pn(({collapsed:F})=>[sn(x,null,{default:pn(()=>[F?(na(),ss(k,{key:0,icon:"fa-solid:chevron-left"})):(na(),ss(k,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:pn(()=>[..._[6]||(_[6]=[is("span",null,null,-1)])]),default:pn(()=>[sn(Q,{name:"1"},{header:pn(()=>[is("div",A_,[sn(C,null,{default:pn(()=>[pt(i)?(na(),os(as,{key:0},[sn(g,{size:"small",type:"primary",secondary:"",onClick:Si(F=>z(N),["stop"])},{default:pn(()=>[sn(x,{class:"mr-1"},{default:pn(()=>[sn(k,{icon:"carbon:data-1"})]),_:1}),rs(" "+Wa(pt(e)("dataStructure")),1)]),_:1},8,["onClick"]),sn(g,{size:"small",type:"info",secondary:"",title:pt(e)("sectionSettings"),onClick:Si(F=>K(N),["stop"])},{default:pn(()=>[sn(x,{class:"mr-1"},{default:pn(()=>[sn(k,{icon:"carbon:settings-edit"})]),_:1}),rs(" "+Wa(pt(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Pr("",!0),sn(g,{size:"small",type:"primary",secondary:"",title:pt(e)("edit"),onClick:Si(F=>D(N),["stop"])},{default:pn(()=>[sn(x,null,{default:pn(()=>[sn(k,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),sn(ae,{vertical:"",class:Br(pt(n)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),is("span",P_,Wa(pt(s)(N.title)),1)])]),default:pn(()=>[is("div",null,Wa(pt(e)("sectionUsedXTimesOnPages",[N.pagesCount])),1),is("section",B_,[(na(!0),os(as,null,Ar(pt(Xc)(N.pages||[],"id"),F=>(na(),ss(ye,{key:F.id,size:"small",class:"mr-1",type:"success"},{default:pn(()=>[rs(Wa(pt(s)(F.title)),1)]),_:2},1024))),128))]),Pr("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),sn($e,{page:pt(L),"onUpdate:page":_[0]||(_[0]=N=>qs(L)?L.value=N:null),class:"mt-5 justify-end","show-size-picker":"","page-size":pt(ie),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(pt(t).length/pt(ie)),"onUpdate:pageSize":he},{prefix:pn(()=>[rs(Wa(`${pt(t).length} ${pt(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(na(),ss(y,{key:1,size:"large",class:Br(`mb-2 !border-dashed !border-2 ${pt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:pn(()=>[sn($,{description:pt(e)("noSectionAvailable")},{icon:pn(()=>[sn(x,null,{default:pn(()=>[sn(k,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),sn(b,{show:pt(T),"onUpdate:show":_[2]||(_[2]=N=>qs(T)?T.value=N:null),loading:pt(c)||pt(ve),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:pt(le)?pt(e)("editSection"):pt(e)("addSection"),"positive-text":pt(e)("validate"),"negative-text":pt(e)("cancel"),onPositiveClick:j,onNegativeClick:_[3]||(_[3]=N=>T.value=!1)},{default:pn(()=>[sn(o,{ref_key:"formRef",ref:r,model:pt(M),rules:ue,"show-require-mark":!1,size:"medium"},{default:pn(()=>[sn(l,{"show-label":!1,path:"title",class:"mt-5"},{default:pn(()=>[sn(S,{modelValue:pt(M).title,"onUpdate:modelValue":_[1]||(_[1]=N=>pt(M).title=N),placeholder:pt(e)("title"),class:"w-full",sync:""},{label:pn(()=>[rs(Wa(pt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),sn(Pc,{show:pt(U),"onUpdate:show":_[4]||(_[4]=N=>qs(U)?U.value=N:null),title:pt(s)(pt(ne)?.title),"raw-data-structure":pt(ne)?.dataStructure,"update-data-structure":q},null,8,["show","title","raw-data-structure"]),sn(N_,{show:pt(A),"onUpdate:show":_[5]||(_[5]=N=>qs(A)?A.value=N:null),title:pt(s)(pt(W)?.title),"settings-structure":pt(W)?.settingsStructure,"update-settings-structure":d},null,8,["show","title","settings-structure"])],64)}}}),Bc=(f,e)=>bs(["newsletter-emails"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/emails"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...f}),Lc=(f,e)=>bs(["newsletter-phones"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/phones"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...f}),F_=(f,e)=>bs(["newsletter-campaigns"],async()=>{const{request:s}=et(),n=await s({url:"/newsletter/campaigns"});return n.success&&n.result.data?n.result.data:[]},{refetchOnWindowFocus:!1,...f});class O_{id;email;createdAt;updatedAt;constructor(e,s,n,i){this.email=e,this.id=s,this.createdAt=n,this.updatedAt=i}}const R_=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-emails"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/emails",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},q_=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-emails"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/emails/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},j_=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["newsletter-emails"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/emails/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},K_=f=>{const{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return wt({queryKey:["newsletter-emails"],operation:"batch",getItemId:t=>{if(t instanceof O_){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("NewsletterEmail ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:t}),mutationFn:async t=>{n.start();try{for(let a=0;a<t.length;a++)await e({url:`/newsletter/emails/${t[a]}`,method:"delete"});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...f}})},G_=()=>{const{request:f}=et();return Ta(async e=>{const s=await f({method:"post",url:"/newsletter/emails",data:e});if(s.failure&&s.error)throw new Error(s.error);return s.result.data},{})},{defineComponent:Y_}=await me("vue"),{unref:rt,createVNode:zt,withCtx:Tt,toDisplayString:Ca,createTextVNode:Qa,resolveComponent:Dy,createElementVNode:Lr,openBlock:Ei,createBlock:Fr,createCommentVNode:H_,isRef:Or,Fragment:W_,createElementBlock:Q_}=await me("vue"),J_={class:"flex items-center justify-center"},{ref:aa,h:rl,computed:X_,onBeforeUnmount:Z_}=await me("vue"),ev=Y_({__name:"Email",setup(f){const e=ot(),s=Xe(),n=An(),{data:i,refetch:t,isPending:a}=Bc(),{mutate:c,isPending:I}=K_(),{mutate:ve}=j_(),{mutate:ie,isPending:L}=R_(),{mutate:he,isPending:X}=q_(),{mutateAsync:T}=G_(),{t:r,locale:M}=Ue(),ue=aa(""),le=aa(),D={pageSize:12,prefix:({itemCount:l})=>rl("div",{class:"font-bold"},{default:()=>`${r("total")}: ${l}`})},j=[{type:"selection"},{title:r("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return rl("div",{},{default:()=>l.email})}},{title:r("updateAt"),key:"updatedAt",width:125,render(l){return rl("div",{},{default:()=>Ol(l.updatedAt,{locale:M.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(l){return rl("div",{},{default:()=>Ol(l.createdAt,{locale:M.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>rl(jt,{ref:le,placeholder:r("search"),value:ue.value,onInput:l=>{ue.value=l}},{suffix:()=>rl(O,{},{default:()=>rl(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return rl("div",{class:"flex justify-end items-center w-full"},[rl(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{d(l)},renderIcon:()=>rl(O,null,{default:()=>rl(ce,{icon:"carbon:edit"})})}),rl("div",{class:"w-2"}),rl(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:r("confirm"),content:r("confirmDeleteEmailAddress"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{l.id&&ve({id:l.id})}})},renderIcon:()=>rl(O,null,{default:()=>rl(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],ne=X_(()=>{if(!ue.value)return i.value;const l=i.value?.filter(o=>o.email.toLowerCase().includes(ue.value.toLowerCase()));return le.value&&le.value.focus(),l}),U=aa(!1),z=aa(!1),q=aa(null),W=aa(null),A=aa({email:""}),K={email:[{required:!0,message:r("fillRequired")},{trigger:["input"],validator(l,o){return o&&!Vo.isEmail(o)?new Error(r("invalidEmail")):!0}}]},d=l=>{q.value=de.cloneDeep(l),l?A.value=de.cloneDeep(l):A.value={email:""},z.value=!0},V=async()=>(W.value?.validate(async l=>{if(!l){const o={email:A.value.email};q.value?q.value.email!==A.value.email&&(i.value||[]).findIndex(b=>b.email==A.value.email)>-1?s.error(r("sameEmailAddressMessage")):he({id:q.value.id,...o}):(i.value||[]).findIndex(b=>b.email==A.value.email)>-1?s.error(r("sameEmailAddressMessage")):ie(o),z.value=!1}}),!1);let _=null;const k=()=>{_&&(_.destroy(),_=null)};Z_(k);const x=(l,o)=>o.map(b=>l.map(N=>b[N])),g=()=>{_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),So(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["no","email","createdAt","updatedAt"];const b=de.sortBy(i.value?.map((F,Y)=>({no:Y+1,...F})),"email"),N=x(o,b);try{l.export_json_to_excel({header:o,data:N,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},C=()=>{_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),So(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["email"];const b=x(o,[{email:"adresse@email.com"}]);try{l.export_json_to_excel({header:o,data:b,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},ae=aa(!1),ye=async({results:l})=>{U.value=!0,e.start(),_||(_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<l.length;o++)l[o].email&&i.value?.findIndex(b=>b.email==l[o].email)==-1&&(_&&(_.content=`${r("pleaseBePatient")}: ${o} ${r("task_s")} / ${l.length}`),await T({email:l[o].email}));await t(),k(),e.finish(),U.value=!1,ae.value=!1},Q=aa(En()),h=aa([]),y=l=>l.id,$e=l=>{h.value=l},$=()=>{h.value=[],Q.value=En()},S=async()=>(h.value.length?n.warning({title:r("confirm"),content:r("deleteSelectionWarningMessage",[h.value.length]),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:()=>{c(h.value,{onSuccess:()=>{$()}})}}):s.warning(r("noItemSelected")),!1);return(l,o)=>{const b=Sc,N=hn,F=Vl,Y=bn,E=El,P=Xs,ke=Js,Ye=ml,ee=pl,qe=Hn,Ce=Dc;return Ei(),Q_(W_,null,[zt(F,{to:"#alt-action"},{default:Tt(()=>[zt(N,null,{default:Tt(()=>[zt(b,{onPositiveClick:o[0]||(o[0]=Ze=>g())},{trigger:Tt(()=>[zt(rt(Le),{type:"success",secondary:""},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:upload"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("export")),1)]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("exportDataInExcelFile")),1)]),_:1}),zt(rt(Le),{type:"info",secondary:"",onClick:o[1]||(o[1]=Ze=>ae.value=!0)},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:download"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("import")),1)]),_:1}),zt(rt(Le),{type:"primary",secondary:"",onClick:o[2]||(o[2]=Ze=>d(null))},{icon:Tt(()=>[zt(rt(O),{size:"18"},{default:Tt(()=>[zt(rt(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),zt(E,{name:"slide-fade",appear:""},{default:Tt(()=>[rt(h).length?(Ei(),Fr(Y,{key:0,class:"my-2",size:"small",embedded:""},{default:Tt(()=>[zt(N,{align:"center",justify:"space-between"},{default:Tt(()=>[Lr("span",null,Ca(rt(r)("nbItemsSelected",[rt(h).length])),1),zt(N,{align:"center",justify:"space-between"},{default:Tt(()=>[zt(rt(Le),{type:"error",size:"small",secondary:"",onClick:S},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("delete")),1)]),_:1}),zt(rt(Le),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:close"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):H_("",!0)]),_:1}),zt(ke,null,{default:Tt(()=>[(Ei(),Fr(P,{key:rt(Q),columns:j,data:rt(ne),pagination:D,loading:rt(a)||rt(I),"single-line":!1,"scroll-x":800,"row-key":y,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),zt(qe,{show:rt(z),"onUpdate:show":o[4]||(o[4]=Ze=>Or(z)?z.value=Ze:null),loading:rt(L)||rt(X),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:rt(q)?rt(r)("editEmailAddress"):rt(r)("addEmailAddress"),"positive-text":rt(r)("validate"),"negative-text":rt(r)("cancel"),onPositiveClick:V,onNegativeClick:o[5]||(o[5]=Ze=>z.value=!1)},{default:Tt(()=>[zt(ee,{ref_key:"formRef",ref:W,class:"mt-5",model:rt(A),rules:K,"show-require-mark":!1,size:"medium"},{default:Tt(()=>[zt(Ye,{label:rt(r)("emailAddress"),path:"email"},{default:Tt(()=>[zt(rt(jt),{value:rt(A).email,"onUpdate:value":o[3]||(o[3]=Ze=>rt(A).email=Ze),placeholder:rt(r)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),zt(qe,{show:rt(ae),"onUpdate:show":o[7]||(o[7]=Ze=>Or(ae)?ae.value=Ze:null),loading:rt(U),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:rt(r)("import")},{default:Tt(()=>[zt(Ce,{class:"my-5","on-success":ye}),Lr("div",J_,[zt(rt(Le),{type:"info",size:"small",secondary:"",onClick:o[6]||(o[6]=Ze=>C())},{icon:Tt(()=>[zt(rt(O),null,{default:Tt(()=>[zt(rt(ce),{icon:"carbon:download"})]),_:1})]),default:Tt(()=>[Qa(" "+Ca(rt(r)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class tv{id;phone;createdAt;updatedAt;constructor(e,s,n,i){this.phone=e,this.id=s,this.createdAt=n,this.updatedAt=i}}const nv=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-phones"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/phones",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},lv=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-phones"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/phones/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},av=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["newsletter-phones"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/phones/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},ov=f=>{const{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return wt({queryKey:["newsletter-phones"],operation:"batch",getItemId:t=>{if(t instanceof tv){if(typeof t.id!="string"&&typeof t.id!="number")throw new Error("NewsletterPhone ID must be string or number");return t.id}return`temp-${crypto.randomUUID()}`},getBatchData:t=>({type:"remove",ids:t}),mutationFn:async t=>{n.start();try{for(let a=0;a<t.length;a++)await e({url:`/newsletter/phones/${t[a]}`,method:"delete"});return t}finally{n.finish()}},mutationOptions:{onSuccess:()=>{i.success(s("success"))},onError:t=>{i.error(s("anErrorOccurred"))},...f}})},sv=()=>{const{request:f}=et();return Ta(async e=>{const s=await f({method:"post",url:"/newsletter/phones",data:e});if(s.failure&&s.error)throw new Error(s.error);return s.result.data},{})},{defineComponent:iv}=await me("vue"),{unref:dt,createVNode:Mt,withCtx:Ut,toDisplayString:Ia,createTextVNode:Ja,resolveComponent:Ay,createElementVNode:Rr,openBlock:zi,createBlock:qr,createCommentVNode:rv,isRef:jr,Fragment:cv,createElementBlock:dv}=await me("vue"),uv={class:"flex items-center justify-center"},{ref:oa,h:cl,computed:pv,onBeforeUnmount:mv}=await me("vue"),fv=iv({__name:"Phone",setup(f){const e=ot(),s=Xe(),n=An(),{data:i,refetch:t,isPending:a}=Lc(),{mutate:c,isPending:I}=ov(),{mutate:ve}=av(),{mutate:ie,isPending:L}=nv(),{mutate:he,isPending:X}=lv(),{mutateAsync:T}=sv(),{t:r,locale:M}=Ue(),ue=oa(""),le=oa(),D={pageSize:12,prefix:({itemCount:l})=>cl("div",{class:"font-bold"},{default:()=>`${r("total")}: ${l}`})},j=[{type:"selection"},{title:r("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(l){return cl("div",{},{default:()=>l.phone})}},{title:r("updateAt"),key:"updatedAt",width:125,render(l){return cl("div",{},{default:()=>Ol(l.updatedAt,{locale:M.value,outPattern:"DD MMMM YYYY"})})}},{title:r("createdAt"),key:"createdAt",width:125,render(l){return cl("div",{},{default:()=>Ol(l.createdAt,{locale:M.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>cl(jt,{ref:le,placeholder:r("search"),value:ue.value,onInput:l=>{ue.value=l}},{suffix:()=>cl(O,{},{default:()=>cl(ce,{icon:"carbon:search"})})}),key:"actions",width:150,render(l){return cl("div",{class:"flex justify-end items-center w-full"},[cl(Le,{size:"small",type:"warning",secondary:!0,onClick:()=>{d(l)},renderIcon:()=>cl(O,null,{default:()=>cl(ce,{icon:"carbon:edit"})})}),cl("div",{class:"w-2"}),cl(Le,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:r("confirm"),content:r("confirmDeletePhoneNumber"),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:async()=>{l.id&&ve({id:l.id})}})},renderIcon:()=>cl(O,null,{default:()=>cl(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],ne=pv(()=>{if(!ue.value)return i.value;const l=i.value?.filter(o=>o.phone.toLowerCase().includes(ue.value.toLowerCase()));return le.value&&le.value.focus(),l}),U=oa(!1),z=oa(!1),q=oa(null),W=oa(null),A=oa({phone:""}),K={phone:[{required:!0,message:r("fillRequired")},{trigger:["input"],validator(l,o){return o&&!Ud(o)?new Error(r("invalidNumber")):!0}}]},d=l=>{q.value=de.cloneDeep(l),l?A.value=de.cloneDeep(l):A.value={phone:""},z.value=!0},V=async()=>(W.value?.validate(async l=>{if(!l){const o={phone:A.value.phone.replace(/\s+/g,"")};q.value?q.value.phone!==A.value.phone.replace(/\s+/g,"")&&(i.value||[]).findIndex(b=>b.phone==A.value.phone.replace(/\s+/g,""))>-1?s.error(r("samePhoneNumberMessage")):he({id:q.value.id,...o}):(i.value||[]).findIndex(b=>b.phone==A.value.phone.replace(/\s+/g,""))>-1?s.error(r("samePhoneNumberMessage")):ie(o),z.value=!1}}),!1);let _=null;const k=()=>{_&&(_.destroy(),_=null)};mv(k);const x=(l,o)=>o.map(b=>l.map(N=>b[N])),g=()=>{_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),So(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["no","phone","createdAt","updatedAt"];const b=de.sortBy(i.value?.map((F,Y)=>({no:Y+1,...F})),"phone"),N=x(o,b);try{l.export_json_to_excel({header:o,data:N,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},C=()=>{_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}),So(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(l=>{var o=["phone"];const b=x(o,[{phone:"+XXX XXX XXXXX"}]);try{l.export_json_to_excel({header:o,data:b,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),k()}catch{k(),s.error(r("anErrorOccurred"))}})},ae=oa(!1),ye=async({results:l})=>{U.value=!0,e.start(),_||(_=s.info(r("pleaseBePatient"),{duration:0,type:"loading"}));for(let o=0;o<l.length;o++)l[o].phone&&i.value?.findIndex(b=>b.phone.replace(/\s+/g,"")==l[o].phone.replace(/\s+/g,""))==-1&&(_&&(_.content=`${r("pleaseBePatient")}: ${o} ${r("task_s")} / ${l.length}`),await T({phone:l[o].phone.replace(/\s+/g,"")}));await t(),k(),e.finish(),U.value=!1,ae.value=!1},Q=oa(En()),h=oa([]),y=l=>l.id,$e=l=>{h.value=l},$=()=>{h.value=[],Q.value=En()},S=async()=>(h.value.length?n.warning({title:r("confirm"),content:r("deleteSelectionWarningMessage",[h.value.length]),positiveText:r("yes"),negativeText:r("no"),onPositiveClick:()=>{c(h.value,{onSuccess:()=>{$()}})}}):s.warning(r("noItemSelected")),!1);return(l,o)=>{const b=Sc,N=hn,F=Vl,Y=bn,E=El,P=Xs,ke=Js,Ye=Md,ee=ml,qe=pl,Ce=Hn,Ze=Dc;return zi(),dv(cv,null,[Mt(F,{to:"#alt-action"},{default:Ut(()=>[Mt(N,null,{default:Ut(()=>[Mt(b,{onPositiveClick:o[0]||(o[0]=B=>g())},{trigger:Ut(()=>[Mt(dt(Le),{type:"success",secondary:""},{icon:Ut(()=>[Mt(dt(O),{size:"18"},{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:upload"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("export")),1)]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("exportDataInExcelFile")),1)]),_:1}),Mt(dt(Le),{type:"info",secondary:"",onClick:o[1]||(o[1]=B=>ae.value=!0)},{icon:Ut(()=>[Mt(dt(O),{size:"18"},{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:download"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("import")),1)]),_:1}),Mt(dt(Le),{type:"primary",secondary:"",onClick:o[2]||(o[2]=B=>d(null))},{icon:Ut(()=>[Mt(dt(O),{size:"18"},{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:add-alt"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Mt(E,{name:"slide-fade",appear:""},{default:Ut(()=>[dt(h).length?(zi(),qr(Y,{key:0,class:"my-2",size:"small",embedded:""},{default:Ut(()=>[Mt(N,{align:"center",justify:"space-between"},{default:Ut(()=>[Rr("span",null,Ia(dt(r)("nbItemsSelected",[dt(h).length])),1),Mt(N,{align:"center",justify:"space-between"},{default:Ut(()=>[Mt(dt(Le),{type:"error",size:"small",secondary:"",onClick:S},{icon:Ut(()=>[Mt(dt(O),null,{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:trash-can"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("delete")),1)]),_:1}),Mt(dt(Le),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Ut(()=>[Mt(dt(O),null,{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:close"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):rv("",!0)]),_:1}),Mt(ke,null,{default:Ut(()=>[(zi(),qr(P,{key:dt(Q),columns:j,data:dt(ne),pagination:D,loading:dt(a)||dt(I),"single-line":!1,"scroll-x":800,"row-key":y,size:"small",striped:"","onUpdate:checkedRowKeys":$e},null,8,["data","loading","row-key"]))]),_:1}),Mt(Ce,{show:dt(z),"onUpdate:show":o[4]||(o[4]=B=>jr(z)?z.value=B:null),loading:dt(L)||dt(X),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:dt(q)?dt(r)("editPhoneNumber"):dt(r)("addPhoneNumber"),"positive-text":dt(r)("validate"),"negative-text":dt(r)("cancel"),onPositiveClick:V,onNegativeClick:o[5]||(o[5]=B=>z.value=!1)},{default:Ut(()=>[Mt(qe,{ref_key:"formRef",ref:W,class:"mt-5",model:dt(A),rules:K,"show-require-mark":!1,size:"medium"},{default:Ut(()=>[Mt(ee,{label:dt(r)("phone"),path:"phone"},{default:Ut(()=>[Mt(Ye,{modelValue:dt(A).phone,"onUpdate:modelValue":o[3]||(o[3]=B=>dt(A).phone=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Mt(Ce,{show:dt(ae),"onUpdate:show":o[7]||(o[7]=B=>jr(ae)?ae.value=B:null),loading:dt(U),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:dt(r)("import")},{default:Ut(()=>[Mt(Ze,{class:"my-5","on-success":ye}),Rr("div",uv,[Mt(dt(Le),{type:"info",size:"small",secondary:"",onClick:o[6]||(o[6]=B=>C())},{icon:Ut(()=>[Mt(dt(O),null,{default:Ut(()=>[Mt(dt(ce),{icon:"carbon:download"})]),_:1})]),default:Ut(()=>[Ja(" "+Ia(dt(r)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),_v="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:Kr,mergeModels:vv,defineComponent:gv}=await me("vue"),{unref:Vt,toDisplayString:Xa,openBlock:nl,createElementBlock:Va,createCommentVNode:cs,createTextVNode:js,resolveComponent:Py,withCtx:Ot,createVNode:In,createElementVNode:Ks,Fragment:$o,renderList:Ti,createBlock:Sa,normalizeStyle:Mi,normalizeClass:yv}=await me("vue"),bv={class:"text-base"},hv={key:0},wv={key:1},kv={class:"text-base font-bold"},{ref:Za,inject:$v,computed:xv,watch:Cv,reactive:Gs}=await me("vue"),Iv=gv({__name:"DataForm",props:vv({submitData:{},contentModel:{},readonly:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(f){const e=f,s=Kr(f,"show"),n=Kr(f,"data"),i=ot(),t=Xe(),{t:a}=Ue(),{tr:c,pickByTheme:I,editKeysToCamelCase:ve}=ut(),ie=Za(null),L=Za(!1),he=$v("currentEditItem"),X=xv(()=>de.isEqual(n.value,he?.value)&&de.isEqual(r.value,ue.value)),T=()=>{s.value=!1,L.value=!1},r=Za({}),M=Za(En()),ue=Za({}),le=Za(),D=Za();Cv(()=>s.value,ne=>{ne&&(Ri(n.value.contentModelData)?r.value=Gs(n.value.contentModelData):r.value=Gs({}),de.forIn(ve(e.contentModel?.dataStructure??{}),(U,z)=>{(!r.value[z]||Array.isArray(r.value[z])&&r.value[z].length==0)&&(z==="index"?r.value[z]=Gs({}):r.value[z]=Gs([]))}),ue.value=de.cloneDeep(r.value),M.value=En())},{immediate:!0});const j=async()=>{L.value=!0,i.start();const ne=le.value&&await le.value(),U=D.value&&await D.value();(!le.value||ne)&&(!D.value||U)?await e.submitData(r.value):t.error(a("mandatoryFieldsNotFilledIn")),i.finish(),L.value=!1};return(ne,U)=>{const z=Ji,q=To,W=zo,A=ce,K=O,d=Le,V=hn,_=bn,k=ya,x=Rl,g=al,C=ji;return nl(),Sa(C,{modelValue:s.value,"onUpdate:modelValue":U[3]||(U[3]=ae=>s.value=ae),"close-on-esc":!1,closable:!1,onOnSizeChange:U[4]||(U[4]=ae=>{ie.value=ae})},{header:Ot(()=>[Ks("div",bv,[In(z,{depth:"1"},{default:Ot(()=>[js(Xa(Vt(c)(e.contentModel?.title))+" ",1),e.readonly?(nl(),Va("span",hv," Â -Â "+Xa(Vt(a)("preview")),1)):(nl(),Va("span",wv," Â -Â "+Xa(Vt(he)?Vt(a)("editItem"):Vt(a)("addItem")),1))]),_:1})])]),"header-extra":Ot(()=>[In(V,{align:"center"},{default:Ot(()=>[e.readonly?cs("",!0):(nl(),Va($o,{key:0},[Ks("span",kv,Xa(Vt(a)("status"))+":",1),In(W,{value:n.value.isActive,"onUpdate:value":U[0]||(U[0]=ae=>n.value.isActive=ae),name:"isActive",class:"w-full"},{default:Ot(()=>[In(q,{value:!1,label:Vt(a)("unpublished")},null,8,["label"]),In(q,{value:!0,label:Vt(a)("published")},null,8,["label"])]),_:1},8,["value"]),U[5]||(U[5]=Ks("div",{class:"w-4"},null,-1)),In(d,{secondary:"",type:"success",title:Vt(a)("save"),loading:Vt(L),disabled:Vt(X),onClick:U[1]||(U[1]=ae=>j())},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:save"})]),_:1})]),default:Ot(()=>[js(" "+Xa(Vt(a)("save")),1)]),_:1},8,["title","loading","disabled"])],64)),In(d,{secondary:"",type:"error",title:Vt(a)("close"),disabled:Vt(L),onClick:U[2]||(U[2]=ae=>T())},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:close"})]),_:1})]),default:Ot(()=>[js(" "+Xa(Vt(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Ot(()=>[Ks("section",{style:Mi(`min-height: ${Vt(ie)?.windowHeight-Vt(ie)?.headerHeight-5}px`),class:yv(`w-full h-full ${Vt(I)("bg-slate-200","bg-zinc-800")}`)},[In(g,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Ot(()=>[In(x,{class:"ml-4 mt-2"},{default:Ot(()=>[In(k,{style:Mi(`height: ${Vt(ie)?.windowHeight-Vt(ie)?.headerHeight-50}px`)},{default:Ot(()=>[(nl(!0),Va($o,null,Ti(Vt(ve)(f.contentModel?.dataStructure),(ae,ye)=>(nl(),Va($o,{key:ye},[String(ye)==="index"?(nl(),Sa(_,{key:0,size:"small",class:"mb-2"},{default:Ot(()=>[(nl(),Sa(gs,{key:`${Vt(M)}-${ye}-form-1`,modelValue:Vt(r)[ye],"onUpdate:modelValue":Q=>Vt(r)[ye]=Q,items:ae,onUpdate:(Q,h)=>{le.value=h}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):cs("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),In(x,{class:"mr-4 mt-2"},{default:Ot(()=>[In(k,{style:Mi(`height: ${Vt(ie)?.windowHeight-Vt(ie)?.headerHeight-50}px`)},{default:Ot(()=>[(nl(!0),Va($o,null,Ti(Vt(ve)(f.contentModel?.dataStructure),(ae,ye)=>(nl(),Va($o,{key:ye},[String(ye)!=="index"?(nl(),Sa(_,{key:0,title:Vt(c)(ae.title),size:"small",class:"mb-2"},{"header-extra":Ot(()=>[e.readonly?cs("",!0):(nl(),Sa(d,{key:0,quaternary:"",size:"small",onClick:()=>Vt(r)[ye].push({})},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:add-alt"})]),_:1})]),default:Ot(()=>[js(" "+Xa(Vt(a)("add")),1)]),_:1},8,["onClick"]))]),default:Ot(()=>[(nl(!0),Va($o,null,Ti(Vt(r)[ye],(Q,h)=>(nl(),Sa(_,{key:h,title:String(Number(h)+1),size:"small",class:"mb-2"},{"header-extra":Ot(()=>[e.readonly?cs("",!0):(nl(),Sa(d,{key:0,secondary:"",type:"error",size:"small",onClick:()=>Vt(r)[ye].splice(h,1)},{icon:Ot(()=>[In(K,null,{default:Ot(()=>[In(A,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]),default:Ot(()=>[(nl(),Sa(gs,{key:`${Vt(M)}-${ye}-${h}-form-2`,modelValue:Vt(r)[ye][h],"onUpdate:modelValue":y=>Vt(r)[ye][h]=y,items:ae.items,onUpdate:(y,$e)=>{D.value=$e}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):cs("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:Vv,mergeModels:Sv,defineComponent:Ev}=await me("vue"),{unref:Nt,resolveComponent:By,createVNode:Vn,toDisplayString:Ys,createTextVNode:Gr,withCtx:On,renderList:zv,Fragment:Yr,openBlock:ds,createElementBlock:Hr,createElementVNode:Hs,createBlock:Ui,normalizeClass:Tv,isRef:Mv}=await me("vue"),{inject:Uv,ref:us,h:Wr,computed:Qr}=await me("vue"),Nv={class:"flex items-center justify-between"},Dv={class:"flex flex-col"},Av={class:"text-sm font-bold"},Pv={class:"text-xs font-normal"},Bv=Ev({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Sv(["update"],["update:show"]),setup(f,{emit:e}){const{t:s}=Ue(),{pickByTheme:n,tr:i,mergeArrays:t}=ut(),{extractItemTitle:a}=hs(),{data:c}=so(),{mutate:I,isPending:ve}=Mc(),ie=An(),L=e,he=Vv(f,"show"),X=Uv("currentEditItem"),T=async V=>{ie.warning({title:s("confirm"),content:s("confirmDeleteLink"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{I({id:X?.value?.id,relatedItems:X?.value?.relatedItems?.filter(_=>_.id!==V.id)?.map(_=>_.id)},{onSuccess:()=>{L("update",X?.value?.id)}})}})},r=V=>c.value?.find(_=>_.id===V.contentModelId),M=us(!1),ue=us(null),le=us({contentModelId:null,itemId:null}),D={contentModelId:[{required:!0,message:s("fillRequired")}],itemId:[{required:!0,message:s("fillRequired")}]},j=async()=>(ue.value?.validate(async V=>{if(!V){const _=X?.value?.relatedItems?.map(k=>k.id)||[];I({id:X?.value?.id,relatedItems:[..._,le.value.itemId]},{onSuccess:()=>{L("update",X?.value?.id),M.value=!1}})}}),!1),ne=V=>Wr("span",{},{default:()=>i(V.title)}),U=V=>Qr(()=>Wr("span",{},{default:()=>a(V,r(V))})),z=us([]),q=us([]),{mutateAsync:W,isPending:A}=Tc(),K=async(V,_)=>{if(!V.length){q.value=[];return}q.value=await W({query:V,contentModelId:_})},d=Qr(()=>t(z.value,q.value,"id").filter(V=>V.id!==X?.value?.id));return(V,_)=>{const k=ce,x=Le,g=hn,C=O,ae=bn,ye=ya,Q=Tl,h=Ma,y=Hn,$e=Dl,$=ml,S=pl;return ds(),Hr(Yr,null,[Vn(y,{show:he.value,"onUpdate:show":_[2]||(_[2]=l=>he.value=l),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Nt(s)("linkContentModelItems")},{"header-extra":On(()=>[Vn(g,{align:"center"},{default:On(()=>[Vn(x,{secondary:"",size:"small",type:"primary",disabled:Nt(ve),onClick:_[0]||(_[0]=l=>M.value=!0)},{default:On(()=>[Vn(k,{icon:"carbon:add-alt",class:"mr-1"}),Gr(" "+Ys(Nt(s)("add")),1)]),_:1},8,["disabled"]),Vn(x,{secondary:"",size:"small",type:"error",disabled:Nt(ve),onClick:_[1]||(_[1]=l=>he.value=!1)},{default:On(()=>[Vn(k,{icon:"carbon:close",class:"mr-1"}),Gr(" "+Ys(Nt(s)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:On(()=>[Vn(h,{show:Nt(ve)},{default:On(()=>[Nt(X)?.relatedItems?.length?(ds(),Ui(ye,{key:0,style:{"max-height":"400px"}},{default:On(()=>[(ds(!0),Hr(Yr,null,zv(Nt(X)?.relatedItems,l=>(ds(),Ui(ae,{key:l.id,embedded:"",size:"small",class:"mb-2"},{default:On(()=>[Hs("div",Nv,[Hs("div",Dv,[Hs("span",Av,Ys(Nt(a)(l,r(l))),1),Hs("span",Pv,Ys(Nt(i)(r(l)?.title)),1)]),Vn(g,null,{default:On(()=>[Vn(x,{size:"small",type:"error",secondary:"",onClick:o=>T(l)},{default:On(()=>[Vn(C,null,{default:On(()=>[Vn(k,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ds(),Ui(ae,{key:1,size:"large",class:Tv(`mb-2 !border-dashed !border-2 ${Nt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:On(()=>[Vn(Q,{description:Nt(s)("noLinkAdded")},{icon:On(()=>[Vn(C,null,{default:On(()=>[Vn(k,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Vn(y,{show:Nt(M),"onUpdate:show":_[6]||(_[6]=l=>Mv(M)?M.value=l:null),loading:Nt(ve),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Nt(s)("addLink"),"positive-text":Nt(s)("validate"),"negative-text":Nt(s)("cancel"),onPositiveClick:j,onNegativeClick:_[7]||(_[7]=l=>M.value=!1)},{default:On(()=>[Vn(S,{ref_key:"formRef",ref:ue,model:Nt(le),rules:D,"show-require-mark":!1,size:"medium",class:"my-5"},{default:On(()=>[Vn($,{label:Nt(s)("contentModel"),path:"contentModelId"},{default:On(()=>[Vn($e,{value:Nt(le).contentModelId,"onUpdate:value":_[3]||(_[3]=l=>Nt(le).contentModelId=l),options:Nt(c),placeholder:Nt(s)("contentModel"),"render-label":ne,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Vn($,{label:Nt(s)("itemToLink"),path:"itemId"},{default:On(()=>[Vn($e,{value:Nt(le).itemId,"onUpdate:value":_[4]||(_[4]=l=>Nt(le).itemId=l),options:Nt(d)||[],placeholder:Nt(s)("itemToLink"),"render-label":l=>U(l).value,loading:Nt(A),disabled:!Nt(le).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:_[5]||(_[5]=l=>K(l,Nt(le).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Lv}=await me("vue"),{useModel:Fv,defineComponent:Ov}=await me("vue"),{unref:be,toDisplayString:Jt,createTextVNode:Un,resolveComponent:Ly,isRef:xo,withCtx:Ve,createVNode:Ie,createElementVNode:Nn,openBlock:gn,createElementBlock:Nl,createCommentVNode:eo,renderList:Jr,Fragment:to,withModifiers:Co,createBlock:sa,normalizeClass:Xr}=await me("vue"),Rv={key:0,class:"w-full flex items-center justify-between gap-4"},qv={class:"flex items-center gap-3"},jv={key:0},Kv={class:"flex items-center justify-center h-full"},Gv=["src"],Yv={class:"text-center text-dimgray text-sm"},Hv={class:"flex items-center"},Wv={class:"text-base"},Qv={key:1,class:"flex items-center justify-center"},Jv={key:0},Xv={key:1},{ref:vl,computed:Zr,watch:Zv,isReadonly:Fy,provide:e1}=await me("vue"),{defineStore:t1}=await me("pinia"),n1=Ov({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const{t:e}=Ue(),{extractItemTitle:s,getContentModelItemCreatorTypeLabel:n,getContentModelItemCreatorTypeTagType:i}=hs(),{tr:t,pickByTheme:a}=ut(),c=An(),I=Xe(),ve=Zc(),ie=Fv(f,"modelValue"),L=vl(!1),he=vl(!1),X=vl(!1),T=vl(!1),r=vl([]),{mutate:M}=wd(),{mutate:ue}=kd(),{mutate:le}=Mc(),{mutate:D}=$d(),j=vl(0),ne=vl(24),U=vl(1),z=Zr(()=>({contentModelId:ie.value?.id,pageSize:ne.value,page:U.value})),q=o=>{U.value=o,K()},W=o=>{ne.value=o,K()},{data:A,refetch:K,isPending:d}=ed(z);Zv(()=>A.value,o=>{r.value=o?.items||[],j.value=o?.meta?.total||0,U.value=o?.meta?.currentPage||1},{deep:!0,immediate:!0});const V=vl(null),_=vl({title:"",contentModelData:"",isActive:!0}),k=(o,b=!1)=>{V.value=de.cloneDeep(o),T.value=b,o?_.value=de.cloneDeep(o):_.value={title:"",contentModelData:"",isActive:!0},L.value=!0},x=o=>{V.value=de.cloneDeep(o),X.value=!0},g=o=>{V.value=de.cloneDeep(o),he.value=!0},C=async o=>{await K();const b=r.value.find(N=>N.id===o);b&&x(b)},ae=async o=>{c.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{o.id&&M({id:o.id})}})},ye=async o=>{const b={title:_.value.title,contentModelData:o,isActive:_.value.isActive,contentModelId:ie.value?.id,createdByType:xd.ADMIN,createdBy:ve.userData?.id};V.value?le({id:V.value.id,...b}):ue(b),L.value=!1},Q=vl(!1),h=vl(En()),y=vl({}),$e=Zr(()=>{let o=0;for(const b in y.value)y.value[b]&&o++;return o});function $(){y.value={},h.value=En(),Q.value=!1,K()}const S=async()=>($e.value?c.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[$e.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{D(y.value,{onSuccess:()=>{y.value={}}})}}):I.warning(e("noItemSelected")),!1),l=t1("content-model-items-store",()=>({uiFormat:vl("list")}))();return e1("currentEditItem",V),(o,b)=>{const N=io,F=ce,Y=O,E=Le,P=hn,ke=Vl,Ye=To,ee=zo,qe=xc,Ce=Mo,Ze=ul,B=bn,w=El,v=Rl,G=al,mt=zl,se=ud,_t=dd,ft=jl,yt=ql,Qe=ro,St=Ma,ge=Tl,Et=pd,fn=Hn;return gn(),Nl(to,null,[Ie(ke,{to:"#alt-action"},{default:Ve(()=>[Ie(P,{align:"center"},{default:Ve(()=>[Ie(N,{checked:be(Q),"onUpdate:checked":[b[0]||(b[0]=pe=>xo(Q)?Q.value=pe:null),b[1]||(b[1]=pe=>{for(const Kt of be(r))Kt.id&&(be(y)[Kt.id]=pe);h.value=("uuidv4"in o?o.uuidv4:Lv(En))()})],disabled:!be(r).length},{default:Ve(()=>[Un(Jt(be(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Ie(E,{type:"primary",secondary:"",onClick:b[2]||(b[2]=pe=>k(null))},{icon:Ve(()=>[Ie(Y,{size:"18"},{default:Ve(()=>[Ie(F,{icon:"carbon:add-alt"})]),_:1})]),default:Ve(()=>[Un(" "+Jt(be(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Ie(qe,{class:"mt-2 mb-5",onBack:b[4]||(b[4]=pe=>ie.value=null)},{title:Ve(()=>[Un(Jt(be(t)(ie.value?.title)),1)]),back:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Ve(()=>[Ie(P,null,{default:Ve(()=>[be($e)>0?(gn(),Nl("section",Rv,[Nn("span",null,Jt(be(e)("nbItemsSelected",[be($e)])),1),Nn("section",qv,[Ie(E,{type:"error",secondary:"",size:"small",onClick:S},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:trash-can"})]),_:1})]),default:Ve(()=>[Un(" "+Jt(be(e)("delete")),1)]),_:1}),Ie(E,{type:"warning",secondary:"",size:"small",onClick:$},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:close-filled"})]),_:1})]),default:Ve(()=>[Un(" "+Jt(be(e)("cancelSelection")),1)]),_:1})])])):eo("",!0),Ie(ee,{value:be(l).uiFormat,"onUpdate:value":b[3]||(b[3]=pe=>be(l).uiFormat=pe),size:"small",class:"w-full"},{default:Ve(()=>[Ie(Ye,{value:"grid",class:"w-[50%]"},{default:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:grid"})]),_:1})]),_:1}),Ie(Ye,{value:"list",class:"w-[50%]"},{default:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:list"})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),be(r).length&&!be(d)?(gn(),Nl("section",jv,[be(l).uiFormat=="grid"?(gn(),sa(G,{key:0,"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Ve(()=>[(gn(!0),Nl(to,null,Jr(be(r),(pe,Kt)=>(gn(),sa(v,{key:Kt},{default:Ve(()=>[Ie(w,{name:"slide-fade",appear:""},{default:Ve(()=>[Ie(B,{size:"small",bordered:"",hoverable:""},{cover:Ve(()=>[Nn("div",Kv,[Nn("img",{src:ie.value?.imageUrl??be(_v),class:"w-full h-[200px] object-cover"},null,8,Gv)])]),header:Ve(()=>[Nn("div",Yv,[Ie(Ce,{"line-clamp":1,"expand-trigger":"click"},{default:Ve(()=>[pe.id?(gn(),sa(N,{key:be(h)+pe.id,checked:be(y)[pe.id],"onUpdate:checked":bt=>be(y)[pe.id]=bt,class:"mr-1",onClick:b[5]||(b[5]=Co(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):eo("",!0),Un(" "+Jt(be(s)(pe,ie.value)||`${be(e)("unnamedItem")} (${Kt+1})`),1)]),_:2},1024)])]),action:Ve(()=>[Ie(P,{justify:"space-between",align:"center"},{default:Ve(()=>[Ie(Ze,{bordered:!1,type:pe.isActive?"success":"error"},{default:Ve(()=>[Un(Jt(pe.isActive?be(e)("published"):be(e)("unpublished")),1)]),_:2},1032,["type"]),Ie(P,null,{default:Ve(()=>[Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("about"),onClick:bt=>g(pe)},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:information-filled"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("preview"),onClick:bt=>k(pe,!0)},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("edit"),onClick:bt=>k(pe)},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("links"),onClick:bt=>x(pe)},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"error",secondary:"",title:be(e)("delete"),onClick:bt=>ae(pe)},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(gn(!0),Nl(to,{key:1},Jr(be(r),(pe,Kt)=>(gn(),sa(B,{key:Kt,embedded:"",size:"small",class:"mb-2"},{default:Ve(()=>[Ie(yt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ve(({collapsed:bt})=>[Ie(P,{align:"center",justify:"space-between"},{default:Ve(()=>[Ie(Ze,{bordered:!1,type:pe.isActive?"success":"error"},{default:Ve(()=>[Un(Jt(pe.isActive?be(e)("published"):be(e)("unpublished")),1)]),_:2},1032,["type"]),Ie(Y,null,{default:Ve(()=>[bt?(gn(),sa(F,{key:0,icon:"fa-solid:chevron-left"})):(gn(),sa(F,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ve(()=>[...b[12]||(b[12]=[Nn("span",null,null,-1)])]),default:Ve(()=>[Ie(ft,{name:"1"},{header:Ve(()=>[Nn("div",Hv,[Ie(P,null,{default:Ve(()=>[pe.id?(gn(),sa(N,{key:be(h)+pe.id,checked:be(y)[pe.id],"onUpdate:checked":bt=>be(y)[pe.id]=bt,class:"mr-1",onClick:b[6]||(b[6]=Co(()=>{},["stop"]))},null,8,["checked","onUpdate:checked"])):eo("",!0)]),_:2},1024),Ie(mt,{vertical:"",class:Xr(be(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ie(P,null,{default:Ve(()=>[Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("preview"),onClick:Co(bt=>k(pe,!0),["stop"])},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("edit"),onClick:Co(bt=>k(pe),["stop"])},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"primary",secondary:"",title:be(e)("links"),onClick:Co(bt=>x(pe),["stop"])},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Ie(E,{size:"small",type:"error",secondary:"",title:be(e)("delete"),onClick:Co(bt=>ae(pe),["stop"])},{icon:Ve(()=>[Ie(Y,null,{default:Ve(()=>[Ie(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),Ie(mt,{vertical:"",class:Xr(be(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Nn("span",Wv,Jt(be(s)(pe,ie.value)||`${be(e)("unnamedItem")} (${Kt+1})`),1)])]),default:Ve(()=>[Ie(_t,{"label-placement":"left",bordered:""},{default:Ve(()=>[pe?.createdByType?(gn(),sa(se,{key:0},{label:Ve(()=>[Un(Jt(be(e)("source")),1)]),default:Ve(()=>[Ie(Ze,{size:"small",type:be(i)(pe?.createdByType)},{default:Ve(()=>[Un(Jt(be(n)(pe?.createdByType)),1)]),_:2},1032,["type"])]),_:2},1024)):eo("",!0),Ie(se,null,{label:Ve(()=>[Un(Jt(be(e)("addedBy")),1)]),default:Ve(()=>[pe?.createdByUser?(gn(),Nl(to,{key:0},[Un(Jt(`${pe?.createdByUser?.firstname} ${pe?.createdByUser?.lastname}`),1)],64)):(gn(),Nl(to,{key:1},[Un(Jt(be(e)("undefined")),1)],64))]),_:2},1024),pe?.createdByUser?.createdAt?(gn(),sa(se,{key:1},{label:Ve(()=>[Un(Jt(be(e)("date")),1)]),default:Ve(()=>[Un(" "+Jt(be(Ol)(pe?.createdByUser?.createdAt)),1)]),_:2},1024)):eo("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Ie(Qe,{page:be(U),"onUpdate:page":[b[7]||(b[7]=pe=>xo(U)?U.value=pe:null),q],class:"mt-10 justify-center","show-size-picker":"","page-size":be(ne),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(be(j)/be(ne)),"onUpdate:pageSize":W},{prefix:Ve(()=>[Un(Jt(`${be(j)} ${be(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):be(d)?(gn(),Nl("section",Qv,[Ie(St,{size:"medium"})])):(gn(),sa(ge,{key:2,description:be(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Ie(Iv,{show:be(L),"onUpdate:show":b[8]||(b[8]=pe=>xo(L)?L.value=pe:null),data:be(_),"onUpdate:data":b[9]||(b[9]=pe=>xo(_)?_.value=pe:null),"content-model":ie.value,"submit-data":ye,readonly:be(T)},null,8,["show","data","content-model","readonly"]),Ie(Bv,{show:be(X),"onUpdate:show":b[10]||(b[10]=pe=>xo(X)?X.value=pe:null),onUpdate:C},null,8,["show"]),Ie(fn,{show:be(he),"onUpdate:show":b[11]||(b[11]=pe=>xo(he)?he.value=pe:null),preset:"card",style:{width:"450px"},bordered:!1,"show-icon":!1,title:be(e)("about")},{default:Ve(()=>[Ie(Et,{striped:"","single-line":!1,size:"small"},{default:Ve(()=>[Nn("tbody",null,[be(V)?.createdByType?(gn(),Nl("tr",Jv,[Nn("td",null,[Nn("b",null,Jt(be(e)("source")),1)]),Nn("td",null,[Ie(Ze,{size:"small",type:be(i)(be(V)?.createdByType)},{default:Ve(()=>[Un(Jt(be(n)(be(V)?.createdByType)),1)]),_:1},8,["type"])])])):eo("",!0),Nn("tr",null,[Nn("td",null,[Nn("b",null,Jt(be(e)("addedBy")),1)]),Nn("td",null,[be(V)?.createdByUser?(gn(),Nl(to,{key:0},[Un(Jt(`${be(V)?.createdByUser?.firstname} ${be(V)?.createdByUser?.lastname}`),1)],64)):(gn(),Nl(to,{key:1},[Un(Jt(be(e)("undefined")),1)],64))])]),be(V)?.createdByUser?.createdAt?(gn(),Nl("tr",Xv,[Nn("td",null,[Nn("b",null,Jt(be(e)("date")),1)]),Nn("td",null,Jt(be(Ol)(be(V)?.createdByUser?.createdAt)),1)])):eo("",!0)])]),_:1})]),_:1},8,["show","title"])],64)}}}),l1=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["content-models"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/content-models",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},a1=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["content-models"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/content-models/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},o1=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["content-models"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/content-models/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},{defineComponent:s1}=await me("vue"),{unref:te,resolveComponent:Oy,createVNode:Se,withCtx:Te,toDisplayString:ll,createTextVNode:dl,openBlock:Rn,createBlock:xl,createCommentVNode:no,isRef:ps,renderList:i1,Fragment:ec,createElementBlock:ms,withModifiers:Ws,createElementVNode:Qs,normalizeClass:tc,normalizeStyle:r1}=await me("vue"),c1={key:2},d1={key:0},u1={class:"flex items-center"},p1={class:"text-base"},m1={key:0,class:"mt-4"},{inject:f1,ref:Cl,computed:nc,watch:_1}=await me("vue"),{defineStore:lc}=await me("pinia"),v1="previews",g1=s1({__name:"index",setup(f){const{t:e}=Ue(),{contentModelIntents:s,contentModelAccessScopes:n,getContentModelIntentLabel:i,getContentModelIntentTagType:t,getContentModelAccessScopeLabel:a,getContentModelAccessScopeTagType:c}=hs(),{tr:I,pickByTheme:ve,fileUrl:ie,isInDevMode:L,formatKey:he,appPrimaryColor:X}=ut(),{data:T}=so(),{mutate:r,isPending:M}=o1(),{mutate:ue,isPending:le}=l1(),{mutate:D,isPending:j}=a1(),ne=An(),U=f1("appConfig"),z=lc("content-models-store",()=>({currentTab:Cl("all")}))(),q=nc(()=>z.currentTab=="all"?T.value:T.value?.filter(Y=>Y.intent==z.currentTab)),W=Cl(""),A=Cl(),K=nc(()=>{if(!W.value)return q.value||[];const Y=(q.value||[]).filter(E=>E.title.toLowerCase().includes(W.value.toLowerCase())||E.description?.toLowerCase().includes(W.value.toLowerCase()));return A.value&&A.value.focus(),Y}),d=Cl(24),V=Cl(1),_=Y=>{d.value=Y},k={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",intent:$s.EDITORIAL_CONTENT,accessScope:Cd.INTERNAL,hasPermalink:!1},x=Cl(!1),g=Cl(null),C=Cl(k),ae={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}],intent:[{required:!0,message:e("fillRequired")}],accessScope:[{required:!0,message:e("fillRequired")}]},ye=Cl(null),Q=Y=>{ye.value=de.cloneDeep(Y),C.value=de.cloneDeep(Y||k),x.value=!0},h=async()=>(g.value?.validate(async Y=>{if(!Y){const E={id:ye.value?.id||0,name:C.value.name,title:C.value.title,image:C.value.image,description:C.value.description,titleFieldName:C.value.titleFieldName,intent:C.value.intent,accessScope:C.value.accessScope,hasPermalink:C.value.hasPermalink};ye.value?D(E,{onSuccess:()=>{}}):ue(E,{onSuccess:()=>{}}),x.value=!1}}),!1),y=async Y=>{ne.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{r({id:Y.id||0})}})},$e=Cl(null),$=Cl(!1),S=Y=>{$e.value=Y,$.value=!0},l=async Y=>{D({id:$e.value?.id||0,hasPermalink:$e.value?.hasPermalink,dataStructure:Y},{onSuccess:E=>{S(E)}})},o=Cl(!1),b=async Y=>{C.value.image=Y,o.value=!1},N=()=>{C.value.image=""},F=lc("content-models-management",()=>({itemsContentModel:Cl(null)}))();return _1(()=>C.value.title,Y=>{ye.value||C.value.name.length<=21&&(C.value.name=Uc(I(Y),{trim:!0,lower:!0,strict:!0}))}),(Y,E)=>{const P=ce,ke=O,Ye=Le,ee=Vl,qe=Yi,Ce=jt,Ze=ei,B=hn,w=zl,v=ul,G=jl,mt=ql,se=bn,_t=ro,ft=Tl,yt=El,Qe=Sl,St=ml,ge=Dl,Et=Rl,fn=al,pe=Qi,Kt=ba,bt=io,bl=pl,ol=Hn,Ml=ys;return Rn(),ms(ec,null,[te(F).itemsContentModel?no("",!0):(Rn(),xl(ee,{key:0,to:"#alt-action"},{default:Te(()=>[te(T)&&te(T).length?(Rn(),xl(Ye,{key:0,type:"primary",secondary:"",onClick:E[0]||(E[0]=st=>Q(null))},{icon:Te(()=>[Se(ke,{size:"18"},{default:Te(()=>[Se(P,{icon:"carbon:add-alt"})]),_:1})]),default:Te(()=>[dl(" "+ll(te(e)("addContentModel")),1)]),_:1})):no("",!0)]),_:1})),te(F).itemsContentModel?(Rn(),xl(n1,{key:1,modelValue:te(F).itemsContentModel,"onUpdate:modelValue":E[1]||(E[1]=st=>te(F).itemsContentModel=st)},null,8,["modelValue"])):(Rn(),ms("section",c1,[Se(yt,{appear:"",name:"slide-fade"},{default:Te(()=>[Qs("section",null,[Se(Ze,{value:te(z).currentTab,"onUpdate:value":E[3]||(E[3]=st=>te(z).currentTab=st),type:"card",size:"medium",class:"mb-2"},{suffix:Te(()=>[Se(Ce,{ref_key:"searchInputRef",ref:A,value:te(W),"onUpdate:value":E[2]||(E[2]=st=>ps(W)?W.value=st:null),clearable:!0,placeholder:te(e)("search"),class:"!w-[250px]"},{suffix:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),default:Te(()=>[Se(qe,{name:"all"},{default:Te(()=>[Se(ke,{size:"18",class:"mr-1"},{default:Te(()=>[Se(P,{icon:"carbon:table-of-contents"})]),_:1}),dl(" "+ll(te(e)("all")),1)]),_:1}),Se(qe,{name:te($s).EDITORIAL_CONTENT},{default:Te(()=>[Se(ke,{size:"18",class:"mr-1"},{default:Te(()=>[Se(P,{icon:"carbon:blog"})]),_:1}),dl(" "+ll(te(e)("editorialContent")),1)]),_:1},8,["name"]),Se(qe,{name:te($s).USER_DATA},{default:Te(()=>[Se(ke,{size:"18",class:"mr-1"},{default:Te(()=>[Se(P,{icon:"carbon:group-presentation"})]),_:1}),dl(" "+ll(te(e)("userEntries")),1)]),_:1},8,["name"]),Se(qe,{name:te($s).SYSTEM_DATA},{default:Te(()=>[Se(ke,{size:"18",class:"mr-1"},{default:Te(()=>[Se(P,{icon:"carbon:terminal"})]),_:1}),dl(" "+ll(te(e)("systemData")),1)]),_:1},8,["name"])]),_:1},8,["value"]),te(K)&&te(K).length?(Rn(),ms("section",d1,[(Rn(!0),ms(ec,null,i1(te(K).slice((te(V)-1)*te(d),te(V)*te(d)),st=>(Rn(),xl(se,{key:st.id,embedded:"",size:"small",class:"mb-2"},{default:Te(()=>[Se(mt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Te(({collapsed:Pn})=>[Se(B,{align:"center",justify:"space-between"},{default:Te(()=>[Se(Ye,{size:"small",type:"primary",secondary:"",onClick:Ws(Wn=>te(F).itemsContentModel=st,["stop"])},{icon:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:arrow-right"})]),_:1})]),default:Te(()=>[dl(" "+ll(te(e)("open")),1)]),_:1},8,["onClick"]),Se(ke,null,{default:Te(()=>[Pn?(Rn(),xl(P,{key:0,icon:"fa-solid:chevron-left"})):(Rn(),xl(P,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Te(()=>[...E[19]||(E[19]=[Qs("span",null,null,-1)])]),default:Te(()=>[Se(G,{name:"1"},{header:Te(()=>[Qs("div",u1,[te(L)?(Rn(),xl(B,{key:0},{default:Te(()=>[Se(Ye,{size:"small",type:"primary",secondary:"",onClick:Ws(Pn=>S(st),["stop"])},{default:Te(()=>[Se(ke,{class:"mr-1"},{default:Te(()=>[Se(P,{icon:"carbon:data-1"})]),_:1}),dl(" "+ll(te(e)("dataStructure")),1)]),_:1},8,["onClick"]),Se(Ye,{size:"small",type:"primary",secondary:"",onClick:Ws(Pn=>Q(st),["stop"])},{default:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Se(Ye,{size:"small",type:"error",secondary:"",onClick:Ws(Pn=>y(st),["stop"])},{default:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):no("",!0),te(L)?(Rn(),xl(w,{key:1,vertical:"",class:tc(te(ve)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):no("",!0),Qs("span",p1,ll(te(I)(st.title)),1)])]),default:Te(()=>[Se(B,null,{default:Te(()=>[Se(v,{size:"small",type:te(t)(st.intent)},{default:Te(()=>[dl(ll(te(i)(st.intent)),1)]),_:2},1032,["type"]),Se(v,{size:"small",type:te(c)(st.accessScope)},{default:Te(()=>[dl(ll(te(a)(st.accessScope)),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Se(_t,{page:te(V),"onUpdate:page":E[4]||(E[4]=st=>ps(V)?V.value=st:null),class:"mt-5 justify-end","show-size-picker":"","page-size":te(d),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(te(K).length/te(d)),"onUpdate:pageSize":_},{prefix:Te(()=>[dl(ll(`${te(K).length} ${te(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):(Rn(),xl(se,{key:1,size:"large",class:tc(`mb-2 !border-dashed !border-2 ${te(ve)("!border-zinc-300","!border-zinc-600")}`)},{default:Te(()=>[Se(ft,{description:te(e)("noContentModelAvailable")},{icon:Te(()=>[Se(ke,null,{default:Te(()=>[te(W)?(Rn(),xl(P,{key:0,icon:"carbon:search"})):(Rn(),xl(P,{key:1,icon:"carbon:model-alt"}))]),_:1})]),extra:Te(()=>[te(W)?no("",!0):(Rn(),ms("div",m1,[Se(Ye,{size:"small",secondary:"",onClick:E[5]||(E[5]=st=>Q(null))},{icon:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:add-alt"})]),_:1})]),default:Te(()=>[dl(" "+ll(te(e)("addContentModel")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Se(ol,{show:te(x),"onUpdate:show":E[15]||(E[15]=st=>ps(x)?x.value=st:null),loading:te(le)||te(j)||te(M),preset:"dialog",style:{width:"540px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:te(ye)?te(e)("editContentModel"):te(e)("addContentModel"),"positive-text":te(e)("validate"),"negative-text":te(e)("cancel"),onPositiveClick:h,onNegativeClick:E[16]||(E[16]=st=>x.value=!1)},{default:Te(()=>[Se(bl,{ref_key:"formRef",ref:g,model:te(C),rules:ae,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Te(()=>[Se(St,{"show-label":!1,path:"title"},{default:Te(()=>[Se(Qe,{modelValue:te(C).title,"onUpdate:modelValue":E[6]||(E[6]=st=>te(C).title=st),placeholder:te(e)("title"),class:"w-full",sync:""},{label:Te(()=>[dl(ll(te(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Se(St,{"show-label":!1,path:"description"},{default:Te(()=>[Se(Qe,{modelValue:te(C).description,"onUpdate:modelValue":E[7]||(E[7]=st=>te(C).description=st),placeholder:te(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Te(()=>[dl(ll(te(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Se(fn,{"x-gap":"12",span:24},{default:Te(()=>[Se(Et,{span:12},{default:Te(()=>[Se(St,{path:"intent",label:te(e)("finality")},{default:Te(()=>[Se(ge,{value:te(C).intent,"onUpdate:value":E[8]||(E[8]=st=>te(C).intent=st),options:te(s)||[],placeholder:te(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),Se(Et,{span:12},{default:Te(()=>[Se(St,{path:"accessScope",label:te(e)("accessScope")},{default:Te(()=>[Se(ge,{value:te(C).accessScope,"onUpdate:value":E[9]||(E[9]=st=>te(C).accessScope=st),options:te(n)||[],placeholder:te(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),Se(fn,{"x-gap":"12",span:24},{default:Te(()=>[Se(Et,{span:14},{default:Te(()=>[Se(St,{label:te(e)("contentModelKey"),path:"name"},{default:Te(()=>[Se(Ce,{value:te(C).name,placeholder:te(e)("contentModelKey"),class:"w-full","onUpdate:value":E[10]||(E[10]=st=>te(C).name=te(he)(st))},null,8,["value","placeholder"])]),_:1},8,["label"]),Se(St,{label:te(e)("titleSingletonKey"),path:"titleFieldName"},{default:Te(()=>[Se(Ce,{value:te(C).titleFieldName,placeholder:te(e)("titleSingletonKey"),class:"w-full","onUpdate:value":E[11]||(E[11]=st=>te(C).titleFieldName=te(he)(st))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Se(Kt,{span:10,label:te(e)("itemsPreview"),path:"image"},{default:Te(()=>[Se(B,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:Te(()=>[Se(pe,{class:"cursor-pointer","object-fit":"cover",style:r1("border: 1px dashed "+te(ve)(te(X),"white")),size:150,src:te(ie)(te(C).image||""),onClick:E[12]||(E[12]=st=>o.value=!0)},{default:Te(()=>[te(C).image?no("",!0):(Rn(),xl(ke,{key:0,size:64},{default:Te(()=>[Se(P,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),te(C).image?(Rn(),xl(Ye,{key:0,quaternary:"",onClick:E[13]||(E[13]=st=>N())},{icon:Te(()=>[Se(ke,null,{default:Te(()=>[Se(P,{icon:"carbon:trash-can"})]),_:1})]),default:Te(()=>[dl(" "+ll(te(e)("clear")),1)]),_:1})):no("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),Se(St,{"show-label":!1,path:"hasPermalink"},{default:Te(()=>[Se(bt,{checked:te(C).hasPermalink,"onUpdate:checked":E[14]||(E[14]=st=>te(C).hasPermalink=st)},{default:Te(()=>[dl(ll(te(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Se(Ml,{show:te(o),"onUpdate:show":E[17]||(E[17]=st=>ps(o)?o.value=st:null),title:te(e)("selectImage"),"upload-config":{folder:v1,limit:0,maxSize:0,baseUrl:te(U)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:b},null,8,["show","title","upload-config"]),Se(Pc,{show:te($),"onUpdate:show":E[18]||(E[18]=st=>ps($)?$.value=st:null),title:te(I)(te($e)?.title),"raw-data-structure":te($e)?.dataStructure,"update-data-structure":l},null,8,["show","title","raw-data-structure"])]))],64)}}});var va=(f=>(f.NEWS_TAG="news-tag",f.NEWS_CATEGORY="news-category",f.NEWS_ARTICLE="news-article",f.CONTENT_MODEL="content-model",f))(va||{});const y1=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["permalinks"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:"/permalinks",data:a});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},{defineComponent:b1}=await me("vue"),{unref:We,resolveComponent:Ry,createVNode:vt,withCtx:gt,toDisplayString:Dn,createTextVNode:h1,openBlock:Ea,createBlock:Io,createCommentVNode:w1,createElementVNode:Sn,renderList:k1,Fragment:ac,createElementBlock:oc}=await me("vue"),$1={class:"text-base font-bold"},x1={class:"text-sm"},C1={class:"text-xs text-slate-400"},I1={class:"text-xs text-slate-400"},V1={class:"text-xs text-slate-400"},S1={class:"text-sm"},E1={class:"text-xs text-slate-400"},z1={class:"text-xs text-slate-400"},T1={class:"text-xs text-slate-400"},M1={class:"text-sm"},U1={class:"text-xs text-slate-400"},N1={class:"text-xs text-slate-400"},D1={class:"text-xs text-slate-400"},A1={class:"text-base font-bold"},P1={class:"text-sm"},B1={class:"text-xs text-slate-400"},L1={class:"text-xs text-slate-400"},F1={class:"text-xs text-slate-400"},{ref:sc,computed:ic,h:O1}=await me("vue"),R1=b1({__name:"index",setup(f){const{t:e}=Ue(),{tr:s}=ut(),{data:n}=Ki(),{data:i,refetch:t}=so({enabled:!1}),{data:a,refetch:c}=td({enabled:!1}),{mutate:I,isPending:ve}=y1(),ie=[{pathPrefix:"/news/article",contentType:va.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:va.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:va.NEWS_TAG,contentParam:"slug",pageId:null}],L=sc(ie),he=sc(),X=ic(()=>i.value?.filter(D=>D.hasPermalink)),T=async(D=!1)=>{D&&await t(),await c(),L.value=de.cloneDeep(ie);for(let j=0;j<(X.value?.length||0);j++)L.value.push({pathPrefix:`/${X.value?.[j].slug}`,contentType:va.CONTENT_MODEL,contentParam:"id",contentId:X.value?.[j].id,pageId:null});for(let j=0;j<L.value.length;j++)switch(L.value[j].contentType){case va.NEWS_ARTICLE:case va.NEWS_CATEGORY:case va.NEWS_TAG:{const ne=a.value?.find(U=>U.contentType===L.value[j].contentType);ne&&(L.value[j].pathPrefix=ne.pathPrefix,L.value[j].contentParam=ne.contentParam,L.value[j].pageId=ne.pageId,L.value[j].permalinkId=ne.id)}break;case va.CONTENT_MODEL:{const ne=a.value?.find(U=>U.contentType===L.value[j].contentType&&U.contentId===L.value[j].contentId);ne&&(L.value[j].pathPrefix=ne.pathPrefix,L.value[j].contentParam=ne.contentParam,L.value[j].pageId=ne.pageId,L.value[j].permalinkId=ne.id)}break}he.value=de.cloneDeep(L.value)};T(!0);const r=async()=>{I(L.value,{onSuccess:()=>{T()}})},M=ic(()=>de.isEqual(L.value,he.value)),ue=D=>O1("span",{},{default:()=>s(D.title)}),le=D=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(D);return(D,j)=>{const ne=ce,U=O,z=Le,q=Vl,W=jt,A=Rl,K=Dl,d=al,V=bn,_=jl,k=ql,x=zl;return Ea(),oc(ac,null,[vt(q,{to:"#alt-action"},{default:gt(()=>[vt(z,{secondary:"",type:"primary",loading:We(ve),disabled:We(M),onClick:j[0]||(j[0]=g=>r())},{icon:gt(()=>[vt(U,null,{default:gt(()=>[vt(ne,{icon:"carbon:save"})]),_:1})]),default:gt(()=>[h1(" "+Dn(We(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),vt(V,{embedded:"",size:"small"},{default:gt(()=>[vt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:g})=>[vt(U,null,{default:gt(()=>[g?(Ea(),Io(ne,{key:0,icon:"fa-solid:chevron-left"})):(Ea(),Io(ne,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>[...j[10]||(j[10]=[Sn("span",null,null,-1)])]),default:gt(()=>[vt(_,{name:"1"},{header:gt(()=>[Sn("span",$1,Dn(We(e)("news")),1)]),default:gt(()=>[vt(V,{size:"small"},{header:gt(()=>[Sn("span",x1,Dn(We(e)("articles")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",C1,Dn(We(e)("pathPrefix")),1),vt(W,{value:We(L)[0].pathPrefix,"onUpdate:value":j[1]||(j[1]=g=>We(L)[0].pathPrefix=g),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",I1,Dn(We(e)("contentParam")),1),vt(W,{value:We(L)[0].contentParam,"onUpdate:value":j[2]||(j[2]=g=>We(L)[0].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",V1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[0].pageId,"onUpdate:value":j[3]||(j[3]=g=>We(L)[0].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":ue,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(V,{size:"small"},{header:gt(()=>[Sn("span",S1,Dn(We(e)("categories")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",E1,Dn(We(e)("pathPrefix")),1),vt(W,{value:We(L)[1].pathPrefix,"onUpdate:value":j[4]||(j[4]=g=>We(L)[1].pathPrefix=g),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",z1,Dn(We(e)("contentParam")),1),vt(W,{value:We(L)[1].contentParam,"onUpdate:value":j[5]||(j[5]=g=>We(L)[1].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",T1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[1].pageId,"onUpdate:value":j[6]||(j[6]=g=>We(L)[1].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":ue,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),vt(V,{size:"small"},{header:gt(()=>[Sn("span",M1,Dn(We(e)("tags")),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",U1,Dn(We(e)("pathPrefix")),1),vt(W,{value:We(L)[2].pathPrefix,"onUpdate:value":j[7]||(j[7]=g=>We(L)[2].pathPrefix=g),"allow-input":le,size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",N1,Dn(We(e)("contentParam")),1),vt(W,{value:We(L)[2].contentParam,"onUpdate:value":j[8]||(j[8]=g=>We(L)[2].contentParam=g),readonly:"",size:"small"},null,8,["value"])]),_:1}),vt(A,{span:"7"},{default:gt(()=>[Sn("span",D1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[2].pageId,"onUpdate:value":j[9]||(j[9]=g=>We(L)[2].pageId=g),options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":ue,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),vt(x,{class:"!my-2"}),We(X)?.length&&We(L).length>3?(Ea(),Io(V,{key:0,embedded:"",size:"small"},{default:gt(()=>[vt(k,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":gt(({collapsed:g})=>[vt(U,null,{default:gt(()=>[g?(Ea(),Io(ne,{key:0,icon:"fa-solid:chevron-left"})):(Ea(),Io(ne,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:gt(()=>[...j[11]||(j[11]=[Sn("span",null,null,-1)])]),default:gt(()=>[vt(_,{name:"1"},{header:gt(()=>[Sn("span",A1,Dn(We(e)("contentModels")),1)]),default:gt(()=>[(Ea(!0),oc(ac,null,k1(We(X),(g,C)=>(Ea(),Io(V,{key:g.id,size:"small"},{header:gt(()=>[Sn("span",P1,Dn(We(s)(g.title)),1)]),default:gt(()=>[vt(d,{cols:"24","x-gap":"12"},{default:gt(()=>[vt(A,{span:"10"},{default:gt(()=>[Sn("span",B1,Dn(We(e)("pathPrefix")),1),vt(W,{value:We(L)[C+3].pathPrefix,"onUpdate:value":ae=>We(L)[C+3].pathPrefix=ae,"allow-input":le,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(A,{span:"7"},{default:gt(()=>[Sn("span",L1,Dn(We(e)("contentParam")),1),vt(W,{value:We(L)[C+3].contentParam,"onUpdate:value":ae=>We(L)[C+3].contentParam=ae,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),vt(A,{span:"7"},{default:gt(()=>[Sn("span",F1,Dn(We(e)("contentPage")),1),vt(K,{value:We(L)[C+3].pageId,"onUpdate:value":ae=>We(L)[C+3].pageId=ae,options:We(n)||[],placeholder:We(e)("selectPage"),"render-label":ue,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):w1("",!0)],64)}}}),q1=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"post",url:"/newsletter/campaigns",data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},j1=f=>{const{displayFormErrors:e}=ut(),{request:s}=et(),{t:n}=Ue(),i=Xe(),t=ot();return wt({queryKey:["newsletter-campaigns"],operation:"update",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();const c=await s({method:"put",url:`/newsletter/campaigns/${a.id}`,data:mn(a,["id"])});if(t.finish(),c.failure&&c.error)throw new Error(c.error);return c.result.data},mutationOptions:{onSuccess:()=>{i.success(n("success"))},onError:a=>{a?.response?.data?.errorCode===Ft.FORM_INVALID_DATA?e(a?.response?.data?.data):i.error(n("anErrorOccurred"))},...f}})},K1=f=>{const{request:e}=et(),{t:s}=Ue(),n=Xe(),i=ot();return wt({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:t})=>{i.start();const a=await e({method:"delete",url:`/newsletter/campaigns/${t}`});if(i.finish(),!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{n.success(s("success"))},onError:t=>{n.error(s("anErrorOccurred"))},...f}})},G1=()=>{const{displayFormErrors:f}=ut(),{request:e}=et(),{t:s}=Ue(),n=ot(),i=Xe();return Ta(async t=>{const a=await e({url:"/sms",method:"post",data:t.data});if(a.failure&&a.error)throw new Error(a.error);return a.result},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(t,a)=>{a.onSuccess?a.onSuccess(t):i.success(s("success"))},onError:(t,a)=>{if(a.onError)a.onError(t);else switch(t?.response?.data?.errorCode){case Ft.FORM_INVALID_DATA:f(t?.response?.data?.data);break;default:i.error(s("sendingFailed"))}},retry:2})},{unref:rc}=await me("vue"),{defineComponent:Y1}=await me("vue"),{unref:Me,createVNode:rn,withCtx:xn,toDisplayString:fs,createTextVNode:_s,resolveComponent:qy,createElementVNode:Ni,isRef:cc,renderList:H1,Fragment:dc,openBlock:vs,createElementBlock:uc,createBlock:Di}=await me("vue"),W1={class:"w-full"},{ref:lo,h:Xt,computed:pc}=await me("vue"),Q1=Y1({__name:"Campaign",setup(f){const e=Xe(),s=An(),{getSettingValue:n}=nd(),{ckEditorToolbarItems:i}=ut(),{t,locale:a}=Ue(),{data:c}=Bc(),{data:I}=Lc(),{data:ve,isPending:ie}=F_(),{mutate:L,isPending:he}=q1(),{mutate:X}=K1(),{mutate:T,isPending:r}=j1(),{mutate:M}=Dd(),{mutate:ue}=G1(),le=lo(""),D=lo(),j={pageSize:12,prefix:({itemCount:g})=>Xt("div",{class:"font-bold"},{default:()=>`${t("total")}: ${g}`})},ne=[{title:t("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(g){return Xt("div",{},{default:()=>g.title})}},{title:t("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(g){return Xt("small",{},{default:()=>g.subject})}},{title:t("numberOfRecipients"),key:"recipients",width:200,render(g){return Xt("div",{},{default:()=>g.recipients.length})},sortOrder:!1,sorter:"default"},{title:t("updateAt"),key:"updatedAt",width:150,render(g){return Xt("div",{},{default:()=>Ol(g.updatedAt,{locale:a.value,outPattern:"DD MMMM YYYY"})})}},{title:t("createdAt"),key:"createdAt",width:150,render(g){return Xt("div",{},{default:()=>Ol(g.createdAt,{locale:a.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Xt(jt,{ref:D,placeholder:t("search"),value:le.value,onInput:g=>{le.value=g}},{suffix:()=>Xt(O,{},{default:()=>Xt(ce,{icon:"carbon:search"})})}),key:"actions",width:175,render(g){return Xt("div",{class:"flex justify-end items-center w-full"},[Xt(Le,{size:"small",type:"primary",secondary:!0,title:t("history"),onClick:()=>{A.value=g,W.value=!0},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"mdi:history"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"info",secondary:!0,title:t("launchCampaign"),onClick:()=>{const C=s.info({title:t("launchCampaign"),content:t("confirmLaunchCampaign",[g.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{C.loading=!0,M({data:{title:g.title,subject:g.subject,content:g.content,recipients:g.recipients.filter(ae=>Vo.isEmail(ae)),tags:[]},onSuccess:ae=>{const ye=n("phone","string")?.split(",")[0];ue({data:{from:ye.replace(/\s+/g,""),content:g.rawContent,recipients:g.recipients.filter(Q=>!Vo.isEmail(Q))},onSuccess:Q=>{const h=g.history||[];h.push({id:En(),date:ld(new Date,{locale:a.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+ae.message+" Phone: "+Q.message}),T({id:g.id,history:h}),C.loading=!1},onError:()=>{C.loading=!1}})},onError:()=>{C.loading=!1}})}})},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"mdi:send"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"warning",secondary:!0,title:t("edit"),onClick:()=>{_(g)},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"carbon:edit"})})}),Xt("div",{class:"w-2"}),Xt(Le,{size:"small",type:"error",secondary:!0,title:t("delete"),onClick:()=>{s.warning({title:t("confirm"),content:t("confirmDeleteCampaign"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{g.id&&X({id:g.id})}})},renderIcon:()=>Xt(O,null,{default:()=>Xt(ce,{icon:"carbon:trash-can"})})})])},fixed:"right"}],U=pc(()=>{if(!le.value)return ve.value;const g=ve.value?.filter(C=>C.title.toLowerCase().includes(le.value.toLowerCase())||C.subject.toLowerCase().includes(le.value.toLowerCase()));return D.value&&D.value.focus(),g}),z=pc(()=>[...(c.value||[]).map(g=>({recipient:g.email,type:"email"})),...(I.value||[]).map(g=>({recipient:g.phone,type:"phone"}))]),q=lo(!1),W=lo(!1),A=lo(null),K=lo(null),d=lo({title:"",subject:"",content:"",rawContent:"",recipients:[]}),V={title:[{required:!0,message:t("fillRequired")}],subject:[{required:!0,message:t("fillRequired")}],content:[{required:!0,message:t("fillRequired")}],rawContent:[{required:!0,message:t("fillRequired")}],recipients:[{required:!0,message:t("fillRequired")}]},_=g=>{A.value=de.cloneDeep(g),g?d.value=de.cloneDeep(g):d.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},q.value=!0},k=async()=>(K.value?.validate(async g=>{if(!g){const C={title:d.value.title,subject:d.value.subject,content:d.value.content,rawContent:d.value.rawContent,recipients:d.value.recipients};A.value?A.value.title!==d.value.title&&(ve.value||[]).findIndex(ae=>ae.title==d.value.title)>-1?e.error(t("sameCampaignTitleMessage")):T({id:A.value.id,...C}):(ve.value||[]).findIndex(ae=>ae.title==d.value.title)>-1?e.error(t("sameCampaignTitleMessage")):L(C),q.value=!1}}),!1),x=(g,C)=>de.isEqual(g.slice().sort(),C.slice().sort());return(g,C)=>{const ae=Vl,ye=Xs,Q=Js,h=ml,y=Nd,$e=io,$=Dl,S=pl,l=Hn,o=md,b=Vc,N=Ic,F=ya,Y=Tl;return vs(),uc(dc,null,[rn(ae,{to:"#alt-action"},{default:xn(()=>[rn(Me(Le),{type:"primary",secondary:"",onClick:C[0]||(C[0]=E=>_(null))},{icon:xn(()=>[rn(Me(O),{size:"18"},{default:xn(()=>[rn(Me(ce),{icon:"carbon:add-alt"})]),_:1})]),default:xn(()=>[_s(" "+fs(Me(t)("addCampaign")),1)]),_:1})]),_:1}),rn(Q,null,{default:xn(()=>[rn(ye,{columns:ne,data:Me(U),pagination:j,loading:Me(ie),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),rn(l,{show:Me(q),"onUpdate:show":C[9]||(C[9]=E=>cc(q)?q.value=E:null),loading:Me(he)||Me(r),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Me(A)?Me(t)("editCampaign"):Me(t)("addCampaign"),"positive-text":Me(t)("validate"),"negative-text":Me(t)("cancel"),onPositiveClick:k,onNegativeClick:C[10]||(C[10]=E=>q.value=!1)},{default:xn(()=>[rn(S,{ref_key:"formRef",ref:K,class:"mt-5",model:Me(d),rules:V,"show-require-mark":!1,size:"medium"},{default:xn(()=>[rn(h,{label:Me(t)("title"),path:"title"},{default:xn(()=>[rn(Me(jt),{value:Me(d).title,"onUpdate:value":C[1]||(C[1]=E=>Me(d).title=E),placeholder:Me(t)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(h,{label:Me(t)("subject"),path:"subject"},{default:xn(()=>[rn(Me(jt),{value:Me(d).subject,"onUpdate:value":C[2]||(C[2]=E=>Me(d).subject=E),placeholder:Me(t)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(h,{label:Me(t)("content"),path:"content"},{default:xn(()=>[Ni("div",W1,[rn(y,{modelValue:Me(d).content,"onUpdate:modelValue":C[3]||(C[3]=E=>Me(d).content=E),"toolbar-items":Me(i),placeholder:Me(t)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),rn(h,{label:Me(t)("rawContent"),path:"rawContent"},{default:xn(()=>[rn(Me(jt),{value:Me(d).rawContent,"onUpdate:value":C[4]||(C[4]=E=>Me(d).rawContent=E),placeholder:Me(t)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),rn(h,{label:Me(t)("recipients"),path:"recipients"},{default:xn(()=>[rn($,{value:Me(d).recipients,"onUpdate:value":C[8]||(C[8]=E=>Me(d).recipients=E),options:Me(z),placeholder:Me(t)("recipients"),loading:Me(ie),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:xn(()=>[rn($e,{size:"large",class:"w-full","default-checked":Me(z).length&&x(Me(d).recipients,Me(z).filter(E=>E.type=="email").map(E=>E.recipient)),"onUpdate:checked":C[5]||(C[5]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.type=="email").map(P=>P.recipient):Me(d).recipients=Me(d).recipients.filter(P=>!("_v"in g?g._v:rc(Vo)).isEmail(P))})},{default:xn(()=>[_s(fs(Me(t)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),C[12]||(C[12]=Ni("div",{class:"h-2"},null,-1)),rn($e,{size:"large",class:"w-full","default-checked":Me(z).length&&x(Me(d).recipients,Me(z).filter(E=>E.type=="phone").map(E=>E.recipient)),"onUpdate:checked":C[6]||(C[6]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.type=="phone").map(P=>P.recipient):Me(d).recipients=Me(d).recipients.filter(P=>("_v"in g?g._v:rc(Vo)).isEmail(P))})},{default:xn(()=>[_s(fs(Me(t)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),C[13]||(C[13]=Ni("div",{class:"h-2"},null,-1)),rn($e,{size:"large",class:"w-full","default-checked":Me(z).length&&Me(d).recipients.length===Me(z).length,"onUpdate:checked":C[7]||(C[7]=E=>{E?Me(d).recipients=Me(z).filter(P=>P.recipient).map(P=>P.recipient):Me(d).recipients=[]})},{default:xn(()=>[_s(fs(Me(t)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),rn(l,{show:Me(W),"onUpdate:show":C[11]||(C[11]=E=>cc(W)?W.value=E:null),loading:Me(r),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Me(t)("history")},{default:xn(()=>[Me(A)?.history?.length?(vs(),Di(F,{key:0,style:{"max-height":"400px"}},{default:xn(()=>[rn(N,{hoverable:""},{default:xn(()=>[(vs(!0),uc(dc,null,H1(Me(A)?.history.slice().reverse(),E=>(vs(),Di(b,{key:E.id},{default:xn(()=>[rn(o,{title:E.date,"content-style":"margin-top: 10px;"},{default:xn(()=>[_s(fs(E.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(vs(),Di(Y,{key:1,description:Me(t)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),J1=()=>{const{request:f}=et(),{t:e}=Ue(),s=ot(),n=Xe();return Ta(async i=>{const t=await f({url:"/app-information",method:"put",data:i});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>s.start(),onSettled:()=>s.finish(),onSuccess:(i,t)=>{n.success(e("success"))},onError:(i,t)=>{n.error(e("unableToUpdateAppInformation"))}})},{defineComponent:X1}=await me("vue"),{unref:p,createVNode:H,withCtx:oe,toDisplayString:Lt,createTextVNode:ao,resolveComponent:Z1,openBlock:Dt,createBlock:fa,createCommentVNode:Yn,createElementBlock:yn,createElementVNode:$t,isRef:Ai,vShow:Pi,withDirectives:Bi,normalizeStyle:_a,Fragment:oo,renderList:mc,TransitionGroup:eg,withKeys:tg}=await me("vue"),ng={id:"header-btn"},lg={key:1,id:"alt-action"},ag={key:"basic-info"},og={class:"text-xs"},sg={class:"text-xs"},ig={class:"text-xs"},rg={class:"text-xs"},cg={class:"text-xs"},dg={class:"text-xs"},ug={class:"text-xs"},pg={class:"flex items-center gap-2 w-full"},mg={key:"branding"},fg={class:"text-sm"},_g={class:"text-sm"},vg={class:"flex flex-col items-center justify-center text-gray-400"},gg={class:"text-sm"},yg={class:"flex flex-col items-center justify-center text-gray-400"},bg={class:"text-sm"},hg={class:"flex flex-col items-center justify-center text-gray-400"},wg={class:"text-sm"},kg={class:"flex flex-col items-center justify-center text-gray-400"},$g={class:"text-sm"},xg={class:"flex items-center justify-between"},Cg={class:"font-bold"},Ig={class:"flex items-center"},Vg={class:"flex items-center justify-between"},Sg={class:"font-bold"},Eg={class:"flex items-center"},zg={class:"flex items-center justify-between"},Tg={class:"font-bold"},Mg={class:"flex items-center"},Ug={key:"social-networks"},Ng={class:"text-xs"},Dg={key:"newsletter-email"},Ag={key:"newsletter-phone"},Pg={key:"newsletter-campaign"},Bg={key:"ads"},Lg={key:"videos"},Fg={key:"content-models"},Og={key:"menus"},Rg={key:"content-permalinks"},qg={key:"page-sections"},{defineComponent:jg,inject:Kg,ref:Il,h:Li,computed:Fi,watch:Oi,onMounted:fc}=await me("vue"),{storeToRefs:Gg,defineStore:Yg}=await me("pinia"),Hg=jg({name:gc.CONTENT_MANAGEMENT.NAME}),Wg=X1({...Hg,setup(f){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],s=w=>e.includes(w),{t:n,locale:i}=Ue(),t=Pd(),a=An(),{appPrimaryColor:c,pickByTheme:I,fileUrl:ve,isLgScreen:ie,isMdScreen:L,isSmScreen:he,isXlScreen:X,is2XlScreen:T,tr:r}=ut(),M=ad({enabled:!1}),{isLightTheme:ue,contentLayoutSize:le}=Gg(Eo());kc();const{data:D,refetch:j}=Ki(),{mutate:ne,isPending:U}=J1(),{mutate:z,isPending:q}=Ec(),{mutate:W,isPending:A}=Id(),K=Kg("appConfig"),d=Il({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),V=Il(d.value),_=Yg("content-management",()=>({currentMenuItemKey:Il("basic-info")}))(),k=(w,v)=>()=>Li(O,{},{default:()=>Li(ce,{icon:w})}),x=(w,v,G=!1)=>()=>Li("span",{id:v,class:{"page-menu-item":G}},{default:()=>w}),g=Fi(()=>{const w=[{label:x(n("basicInfo"),"basic-info"),key:"basic-info",icon:k("carbon:identification")},{label:x(n("branding"),"branding"),key:"branding",icon:k("carbon:color-palette")},{label:x(n("socialNetworks"),"social-networks"),key:"social-networks",icon:k("carbon:share")},{key:"divider",type:"divider"},{label:x(n("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:k("carbon:at")},{label:x(n("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:k("carbon:phone")},{label:x(n("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:k("carbon:bullhorn")},{key:"divider",type:"divider"},{label:x(n("ads"),"ads"),key:"ads",icon:k("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:x(n("videos"),"videos"),key:"videos",icon:k("carbon:video-player")},{key:"divider",type:"divider"},{label:x(n("menusManagement"),"menus"),key:"menus",icon:k("carbon:menu")},{label:x(n("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:k("carbon:link")},{key:"divider",type:"divider"},{label:x(n("contentModels"),"content-models"),key:"content-models",icon:k("carbon:model-alt")},{label:x(n("pageSections"),"page-sections"),key:"page-sections",icon:k("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const v of D.value||[])w.push({label:x(r(v.title).startsWith(n("page"))?r(v.title):`${n("page")} ${r(v.title)}`,`${v.slug}-page`,!0),key:`${v.slug}-page`,icon:k("carbon:document",`${v.slug}-page`)});return D.value&&D.value.length>0&&w.push({key:"divider",type:"divider"}),w.push({label:x(n("addPage"),"add-new-page"),key:"add-new-page",icon:k("carbon:add-alt")}),w}),C=Fi(()=>de.isEqual(d.value,V.value)),ae=Fi(()=>le.value.height-160),ye=Il(null),Q={email:[{required:!1,message:n("fillRequired")},{trigger:["input"],validator(w,v){return v&&!Vo.isEmail(v)?new Error(n("invalidEmail")):!0}}]},h=Il();Oi(()=>h.value,w=>{d.value.additionalInfo=JSON.stringify(w||"[]")},{deep:!0});const y=Il(null),$e={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],S=Il("logos"),l=Il(!1),o=async w=>{switch(S.value){case"logos":d.value.logo=w;break;case"icons":d.value.icon=w;break;case"monochrome-logos":d.value.oneColorLogo=w;break;case"monochrome-icons":d.value.oneColorIcon=w;break}l.value=!1},b={name:"",title:"",content:"",slug:""},N=Il(!1),F=Il(null),Y=Il(b),E={title:[{required:!0,message:n("fillRequired")}]},P=Il(null),ke=w=>{P.value=de.cloneDeep(w),Y.value=de.cloneDeep(w||b),N.value=!0},Ye=async()=>(F.value?.validate(async w=>{if(!w){const v={title:Y.value.title};P.value?z({slug:P.value.slug,...v},{onSuccess:G=>{_.currentMenuItemKey=`${G?.slug}-page`,N.value=!1}}):W({name:de.startCase(de.camelCase(r(Y.value.title))).replace(/\s+/g,""),...v},{onSuccess:G=>{_.currentMenuItemKey=`${G?.slug}-page`,N.value=!1}})}}),!1),ee=async()=>{await M.refetch(),M.data.value?.forEach(w=>{d.value[w.key]!=null&&(d.value[w.key]=w.value)}),V.value=de.cloneDeep(d.value);try{h.value=JSON.parse(d.value.additionalInfo||"[]")}catch{h.value=[]}};ee(),fc(()=>{setTimeout(()=>{t.params.key&&s(t.params.key)&&(_.currentMenuItemKey=t.params.key)},500)});const qe=()=>{ne(d.value,{onSuccess:()=>ee()})},Ce=["basic-info","branding","social-networks"];Oi(()=>_.currentMenuItemKey,(w,v)=>{w==="add-new-page"?(_.currentMenuItemKey=v,ke(null)):Ce.includes(v)&&!Ce.includes(w)&&(C.value||a.warning({title:n("confirm"),content:n("marketInfoDiscardChangesConfirm"),positiveText:n("yes"),negativeText:n("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{_.currentMenuItemKey=v}}))});const Ze=Il();Oi(()=>[L.value,he.value,ie.value,X.value],([w,v,G,mt])=>{Ze.value=w||v||G||mt,setTimeout(()=>{Ze.value=void 0},500)},{immediate:!0});const B=Ad({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:n("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return fc(()=>{setTimeout(()=>{const w=document.getElementById("sidebar");B.addStep({attachTo:{element:w,on:"left"},title:n("contentManagementGuideTitle1"),text:n("contentManagementGuideText1"),buttons:[{text:n("pass"),label:n("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.cancel()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]});const v=document.getElementsByClassName("page-menu-item");if(v&&v.length>0){const mt=[];for(let se=0;se<v.length;se++)mt.push(v[se]?.parentNode?.parentNode?.parentNode);B.addStep({attachTo:{element:mt[0],on:"left"},title:n("contentManagementGuideTitle2"),text:n("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.back()}},{text:n("next"),label:n("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]})}const G=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;B.addStep({attachTo:{element:G,on:"left"},title:n("contentManagementGuideTitle3"),text:n("contentManagementGuideText3"),buttons:[{text:n("previous"),label:n("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.back()}},{text:n("ok"),label:n("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){B.next()}}]})},1e3)}),(w,v)=>{const G=Le,mt=hn,se=vd,_t=_d,ft=jt,yt=ml,Qe=ba,St=al,ge=Sl,Et=ti,fn=pl,pe=bn,Kt=Qi,bt=Rl,bl=zl,ol=Z1("color-picker"),Ml=fd,st=Fc,Pn=ys,Wn=Hn;return Dt(),yn(oo,null,[H(st,null,{"header-extra":oe(()=>[H(mt,null,{default:oe(()=>[$t("div",ng,[Ce.includes(p(_).currentMenuItemKey)?(Dt(),fa(G,{key:0,loading:p(U)||p(M).isPending.value,disabled:p(C),type:"primary",secondary:"",onClick:qe},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:save"})]),_:1})]),default:oe(()=>[ao(" "+Lt(p(n)("save")),1)]),_:1},8,["loading","disabled"])):(Dt(),yn("div",lg))]),H(G,{dashed:"",type:"primary",title:p(n)("help"),onClick:v[0]||(v[0]=Oe=>p(B).start())},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:oe(()=>[H(Ml,{style:_a(`height: ${p(ae)}px`)},{default:oe(()=>[H(Ml,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:oe(()=>[H(_t,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:p(Ze),"default-collapsed":!p(T),"collapsed-width":64,"native-scrollbar":!1,width:p(T)?300:275},{default:oe(()=>[H(se,{value:p(_).currentMenuItemKey,"onUpdate:value":v[1]||(v[1]=Oe=>p(_).currentMenuItemKey=Oe),"collapsed-width":64,"collapsed-icon-size":22,options:p(g)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),H(Ml,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:oe(()=>[H(eg,{name:"slide-fade"},{default:oe(()=>[Bi($t("section",ag,[H(pe,{hoverable:""},{default:oe(()=>[H(fn,{ref_key:"basicInfoFormRef",ref:ye,model:p(d),rules:Q,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:oe(()=>[H(yt,{path:"name"},{label:oe(()=>[$t("b",og,Lt(p(n)("websiteName")),1)]),default:oe(()=>[H(ft,{value:p(d).name,"onUpdate:value":v[2]||(v[2]=Oe=>p(d).name=Oe),placeholder:p(n)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),H(St,{"x-gap":"12",span:24},{default:oe(()=>[H(Qe,{span:12,path:"email"},{label:oe(()=>[$t("b",sg,Lt(p(n)("email")),1)]),default:oe(()=>[H(ft,{value:p(d).email,"onUpdate:value":v[3]||(v[3]=Oe=>p(d).email=Oe),placeholder:p(n)("email"),class:"w-full"},{prefix:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),H(Qe,{span:12,path:"phone"},{label:oe(()=>[$t("b",ig,Lt(p(n)("phone")),1)]),default:oe(()=>[H(ft,{value:p(d).phone,"onUpdate:value":v[4]||(v[4]=Oe=>p(d).phone=Oe),placeholder:p(n)("phone"),class:"w-full"},{prefix:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),H(yt,{path:"address"},{label:oe(()=>[$t("span",rg,[$t("b",null,Lt(p(n)("address")),1)])]),default:oe(()=>[H(ft,{value:p(d).address,"onUpdate:value":v[5]||(v[5]=Oe=>p(d).address=Oe),placeholder:p(n)("address"),class:"w-full"},{prefix:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),H(St,{"x-gap":"12",span:24},{default:oe(()=>[H(Qe,{span:12,path:"postalCode"},{label:oe(()=>[$t("b",cg,Lt(p(n)("postalCode")),1)]),default:oe(()=>[H(ft,{value:p(d).postalCode,"onUpdate:value":v[6]||(v[6]=Oe=>p(d).postalCode=Oe),placeholder:p(n)("postalCode"),class:"w-full"},{prefix:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),H(yt,{"show-label":!1,path:"description"},{default:oe(()=>[H(ge,{modelValue:p(d).description,"onUpdate:modelValue":v[7]||(v[7]=Oe=>p(d).description=Oe),placeholder:p(n)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:oe(()=>[$t("b",dg,Lt(p(n)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),H(yt,{path:"additionalInfo"},{label:oe(()=>[$t("b",ug,Lt(p(n)("additionalInfo")),1)]),default:oe(()=>[H(Et,{value:p(h),"onUpdate:value":v[8]||(v[8]=Oe=>Ai(h)?h.value=Oe:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":oe(()=>[ao(Lt(p(n)("add")),1)]),default:oe(({value:Oe})=>[$t("div",pg,[H(ft,{value:Oe.name,"onUpdate:value":Qn=>Oe.name=Qn,placeholder:p(n)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),H(ft,{value:Oe.content,"onUpdate:value":Qn=>Oe.content=Qn,placeholder:p(n)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Pi,p(_).currentMenuItemKey==="basic-info"]]),Bi($t("section",mg,[H(pe,{segmented:"",size:"small"},{header:oe(()=>[$t("span",fg,Lt(p(n)("graphicElements")),1)]),default:oe(()=>[H(St,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:oe(()=>[H(bt,null,{default:oe(()=>[H(pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[$t("span",_g,Lt(p(n)("logo")),1)]),default:oe(()=>[H(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[p(d).logo?(Dt(),fa(Kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:_a("border: 1px dashed "+p(I)(p(c),"white")),size:125,src:p(ve)(p(d).logo),onClick:v[9]||(v[9]=()=>{S.value="logos",l.value=!0})},null,8,["style","src"])):(Dt(),yn("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:_a(`border: 1px dashed ${p(I)(p(c),"white")}; width: 125px; height: 125px`),onClick:v[10]||(v[10]=()=>{S.value="logos",l.value=!0})},[$t("div",vg,[H(p(O),{size:"50"},{default:oe(()=>[H(p(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(p(n)("import")),1)])],4)),p(d).logo?(Dt(),fa(G,{key:2,quaternary:"",onClick:v[11]||(v[11]=()=>p(d).logo="")},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[ao(" "+Lt(p(n)("clear")),1)]),_:1})):Yn("",!0)]),_:1})]),_:1})]),_:1}),H(bt,null,{default:oe(()=>[H(pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[$t("span",gg,Lt(p(n)("icon")),1)]),default:oe(()=>[H(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[p(d).icon?(Dt(),fa(Kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:_a("border: 1px dashed "+p(I)(p(c),"white")),size:125,src:p(ve)(p(d).icon),onClick:v[12]||(v[12]=()=>{S.value="icons",l.value=!0})},null,8,["style","src"])):(Dt(),yn("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:_a(`border: 1px dashed ${p(I)(p(c),"white")}; width: 125px; height: 125px`),onClick:v[13]||(v[13]=()=>{S.value="icons",l.value=!0})},[$t("div",yg,[H(p(O),{size:"50"},{default:oe(()=>[H(p(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(p(n)("import")),1)])],4)),p(d).icon?(Dt(),fa(G,{key:2,quaternary:"",onClick:v[14]||(v[14]=()=>p(d).icon="")},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[ao(" "+Lt(p(n)("clear")),1)]),_:1})):Yn("",!0)]),_:1})]),_:1})]),_:1}),H(bt,null,{default:oe(()=>[H(pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[$t("span",bg,Lt(p(n)("logoMonochrome")),1)]),default:oe(()=>[H(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[p(d).oneColorLogo?(Dt(),fa(Kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:_a("border: 1px dashed "+p(I)(p(c),"white")),size:125,src:p(ve)(p(d).oneColorLogo),onClick:v[15]||(v[15]=()=>{S.value="monochrome-logos",l.value=!0})},null,8,["style","src"])):(Dt(),yn("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:_a(`border: 1px dashed ${p(I)(p(c),"white")}; width: 125px; height: 125px`),onClick:v[16]||(v[16]=()=>{S.value="monochrome-logos",l.value=!0})},[$t("div",hg,[H(p(O),{size:"50"},{default:oe(()=>[H(p(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(p(n)("import")),1)])],4)),p(d).oneColorLogo?(Dt(),fa(G,{key:2,quaternary:"",onClick:v[17]||(v[17]=()=>p(d).oneColorLogo="")},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[ao(" "+Lt(p(n)("clear")),1)]),_:1})):Yn("",!0)]),_:1})]),_:1})]),_:1}),H(bt,null,{default:oe(()=>[H(pe,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[$t("span",wg,Lt(p(n)("iconMonochrome")),1)]),default:oe(()=>[H(mt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[p(d).oneColorIcon?(Dt(),fa(Kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:_a("border: 1px dashed "+p(I)(p(c),"white")),size:125,src:p(ve)(p(d).oneColorIcon),onClick:v[18]||(v[18]=()=>{S.value="monochrome-icons",l.value=!0})},null,8,["style","src"])):(Dt(),yn("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:_a(`border: 1px dashed ${p(I)(p(c),"white")}; width: 125px; height: 125px`),onClick:v[19]||(v[19]=()=>{S.value="monochrome-icons",l.value=!0})},[$t("div",kg,[H(p(O),{size:"50"},{default:oe(()=>[H(p(ce),{icon:"carbon:image"})]),_:1}),$t("span",null,Lt(p(n)("import")),1)])],4)),p(d).oneColorIcon?(Dt(),fa(G,{key:2,quaternary:"",onClick:v[20]||(v[20]=()=>p(d).oneColorIcon="")},{icon:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[ao(" "+Lt(p(n)("clear")),1)]),_:1})):Yn("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v[31]||(v[31]=$t("br",null,null,-1)),H(pe,{hoverable:"",segmented:"",size:"small"},{header:oe(()=>[$t("span",$g,Lt(p(n)("websiteColors")),1)]),default:oe(()=>[H(St,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:oe(()=>[H(bt,null,{default:oe(()=>[$t("div",xg,[$t("span",Cg,Lt(p(n)("baseColor")),1),$t("div",Ig,[p(d).primaryColor?(Dt(),yn(oo,{key:0},[H(G,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[21]||(v[21]=Oe=>p(d).primaryColor="")},{default:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),H(bl,{vertical:""})],64)):Yn("",!0),H(ol,{"pure-color":p(d).primaryColor,"onUpdate:pureColor":v[22]||(v[22]=Oe=>p(d).primaryColor=Oe),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:p(ue)?"white":"black",lang:p(i)},null,8,["pure-color","theme","lang"])])])]),_:1}),H(bt,null,{default:oe(()=>[$t("div",Vg,[$t("span",Sg,Lt(p(n)("secondaryColor")),1),$t("div",Eg,[p(d).secondaryColor?(Dt(),yn(oo,{key:0},[H(G,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[23]||(v[23]=Oe=>p(d).secondaryColor="")},{default:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),H(bl,{vertical:""})],64)):Yn("",!0),H(ol,{"pure-color":p(d).secondaryColor,"onUpdate:pureColor":v[24]||(v[24]=Oe=>p(d).secondaryColor=Oe),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:p(ue)?"white":"black",lang:p(i)},null,8,["pure-color","theme","lang"])])])]),_:1}),H(bt,null,{default:oe(()=>[$t("div",zg,[$t("span",Tg,Lt(p(n)("tertiaryColor")),1),$t("div",Mg,[p(d).accentColor?(Dt(),yn(oo,{key:0},[H(G,{text:"",type:"error",style:{"font-size":"21px"},onClick:v[25]||(v[25]=Oe=>p(d).accentColor="")},{default:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:"carbon:trash-can"})]),_:1})]),_:1}),H(bl,{vertical:""})],64)):Yn("",!0),H(ol,{"pure-color":p(d).accentColor,"onUpdate:pureColor":v[26]||(v[26]=Oe=>p(d).accentColor=Oe),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:p(ue)?"white":"black",lang:p(i)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Pi,p(_).currentMenuItemKey==="branding"]]),Bi($t("section",Ug,[H(pe,{hoverable:""},{default:oe(()=>[H(fn,{ref_key:"socialNetworksFormRef",ref:y,model:p(d),rules:$e,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:oe(()=>[H(St,{"x-gap":"12",span:24},{default:oe(()=>[(Dt(),yn(oo,null,mc($,Oe=>H(Qe,{key:Oe.name,span:12,path:Oe.name},{label:oe(()=>[$t("b",Ng,Lt(p(n)(Oe.name)),1)]),default:oe(()=>[H(ft,{value:p(d)[Oe.name],"onUpdate:value":Qn=>p(d)[Oe.name]=Qn,placeholder:p(n)(Oe.name),class:"w-full"},{prefix:oe(()=>[H(p(O),null,{default:oe(()=>[H(p(ce),{icon:Oe.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Pi,p(_).currentMenuItemKey==="social-networks"]]),p(_).currentMenuItemKey==="newsletter-email"?(Dt(),yn("section",Dg,[H(ev)])):Yn("",!0),p(_).currentMenuItemKey==="newsletter-phone"?(Dt(),yn("section",Ag,[H(fv)])):Yn("",!0),p(_).currentMenuItemKey==="newsletter-campaign"?(Dt(),yn("section",Pg,[H(Q1)])):Yn("",!0),p(_).currentMenuItemKey==="ads"?(Dt(),yn("section",Bg,[H(cu)])):Yn("",!0),p(_).currentMenuItemKey==="videos"?(Dt(),yn("section",Lg,[H(pf)])):Yn("",!0),p(_).currentMenuItemKey==="content-models"?(Dt(),yn("section",Fg,[H(g1)])):Yn("",!0),p(_).currentMenuItemKey==="menus"?(Dt(),yn("section",Og,[H(nm)])):Yn("",!0),p(_).currentMenuItemKey==="content-permalinks"?(Dt(),yn("section",Rg,[H(R1)])):Yn("",!0),p(_).currentMenuItemKey==="page-sections"?(Dt(),yn("section",qg,[H(L_)])):Yn("",!0),(Dt(!0),yn(oo,null,mc(p(D),(Oe,Qn)=>(Dt(),yn(oo,{key:`${Oe.slug}-page`},[p(_).currentMenuItemKey===`${Oe.slug}-page`?(Dt(),yn("section",{key:`${Oe.slug}-page`},[H(Au,{slug:Oe.slug,"open-form-modal":ke,onDelete:()=>{p(_).currentMenuItemKey=(p(D)?.length||0)>1?`${p(D)?.[Qn-1].slug}-page`:e[0],p(j)()}},null,8,["slug","onDelete"])])):Yn("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),H(Pn,{show:p(l),"onUpdate:show":v[27]||(v[27]=Oe=>Ai(l)?l.value=Oe:null),title:p(n)("selectImage"),"upload-config":{folder:p(S),limit:0,maxSize:0,baseUrl:p(K)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:o},null,8,["show","title","upload-config"]),H(Wn,{show:p(N),"onUpdate:show":v[29]||(v[29]=Oe=>Ai(N)?N.value=Oe:null),loading:p(A)||p(q),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:p(P)?p(n)("editPage"):p(n)("addPage"),"positive-text":p(n)("validate"),"negative-text":p(n)("cancel"),onPositiveClick:Ye,onNegativeClick:v[30]||(v[30]=Oe=>N.value=!1)},{default:oe(()=>[H(fn,{ref_key:"addPageFormRef",ref:F,model:p(Y),rules:E,"show-require-mark":!1,size:"medium"},{default:oe(()=>[H(yt,{"show-label":!1,path:"title",class:"mt-5"},{default:oe(()=>[H(ge,{modelValue:p(Y).title,"onUpdate:modelValue":v[28]||(v[28]=Oe=>p(Y).title=Oe),placeholder:p(n)("title"),class:"w-full",sync:"",onKeydown:tg(Ye,["enter"])},{label:oe(()=>[ao(Lt(p(n)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),jy=Uo(Wg,[["__scopeId","data-v-a061033d"]]);export{jy as default};
