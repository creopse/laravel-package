import{i as C}from"./ckeditor_ckeditor5-vue-D9YIFk5Z.js";import{aC as oe,aD as ue,u as _e,aE as pe,p as fe,aF as W,R as me}from"./index-BictNpzW.js";import{I as m}from"./iconify_vue-DK9FHL8l.js";import{a as he}from"./vue-router-JM7pifDK.js";import{aq as ae,as as le,O as ie,B as se,an as ce,q as h,s as j,ar as ye,u as xe,a8 as ge,au as we,a9 as be,p as ve,ap as ke,$ as Ne}from"./naive-ui-U3LV0D3Q.js";import{u as re}from"./vue-i18n-DGGON2e6.js";import{_ as Ce}from"./fawmi_vue-google-maps-Cpr8dN0B.js";const{defineComponent:$e}=await C("vue"),{unref:l,resolveComponent:Ge,createVNode:a,withCtx:o,openBlock:I,createBlock:V,createCommentVNode:Q,toDisplayString:M,createElementVNode:X,createTextVNode:D,withModifiers:Be,normalizeStyle:Se}=await C("vue"),ze=["innerHTML"],{ref:Y}=await C("vue"),Ie=$e({__name:"Item",props:{item:{}},emits:["closeBox"],setup(G,{emit:x}){const i=G,A=x,{t:_,locale:v}=re(),L=he(),{markAsRead:R,buildMessage:H,deleteNotification:O,isUnread:E}=oe(),k=g=>{if(g.data.target)try{R({id:g.id,refetch:!0}),L.push(g.data.target),A("closeBox")}catch{}},$=Y({title:"",content:""}),B=Y(!1);return(async()=>{B.value=!0,$.value=await H(i.item),B.value=!1})(),(g,u)=>{const s=ce,w=j,c=m,r=h,y=se,N=ie,S=le,z=ae,q=ye;return l(B)?(I(),V(z,{key:0,class:"item w-full"},{default:o(()=>[a(S,null,{header:o(()=>[a(s,{text:"",style:{width:"150px"}})]),"header-extra":o(()=>[a(w,{color:"gray",dot:""})]),description:o(()=>[a(s,{text:"",style:{width:"100%"},repeat:2})]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1}),a(N,{align:"center"},{default:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(I(),V(z,{key:1,class:"item w-full",style:Se(`cursor: ${i.item.data.target?"pointer":"default"}`),onClick:u[3]||(u[3]=p=>k(i.item))},{default:o(()=>[a(S,null,{header:o(()=>[X("span",{class:"title",onClick:u[0]||(u[0]=p=>k(i.item))},M(l($).title),1)]),"header-extra":o(()=>[l(E)(i.item)?(I(),V(w,{key:0,dot:""})):Q("",!0)]),description:o(()=>[X("span",{class:"content",innerHTML:l($).content},null,8,ze)]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[D(" "+M(l(ue)(i.item?.createdAt||"",{locale:l(v)})),1)]),_:1}),a(N,{align:"center"},{default:o(()=>[l(E)(i.item)?(I(),V(y,{key:0,text:"",onClick:u[1]||(u[1]=Be(p=>l(R)({id:i.item.id,refetch:!0}),["stop"]))},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:checkmark"})]),_:1})]),default:o(()=>[D(" "+M(l(_)("read")),1)]),_:1})):Q("",!0),i.item.data.removable?(I(),V(q,{key:1,"positive-text":l(_)("yes"),"negative-text":l(_)("no"),trigger:"hover",onPositiveClick:u[2]||(u[2]=p=>l(O)({id:i.item.id}))},{trigger:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[D(" "+M(l(_)("delete")),1)]),_:1})]),default:o(()=>[D(" "+M(l(_)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),{defineComponent:Ve}=await C("vue"),{unref:n,createVNode:e,withCtx:t,toDisplayString:Z,createTextVNode:ee,resolveComponent:Je,isRef:Me,renderList:Te,Fragment:je,openBlock:b,createElementBlock:te,createBlock:T,normalizeStyle:ne}=await C("vue"),{defineComponent:Ae,ref:Le,computed:P,h:f,watch:Re}=await C("vue"),Ee=Ae({name:me.NOTIFICATIONS.NAME}),Fe=Ve({...Ee,setup(G){const{t:x}=re(),{isMdScreen:i,isSmScreen:A}=_e(),_=Le("all"),v=xe(),{data:L,refetch:R,isLoading:H,isFetching:O}=pe(),E=fe(),{userUnreadNotifications:k,markAllAsRead:$}=oe(),B=P(()=>[{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>x("all")}),f(j,{value:W(L.value?.length||0),type:"info"})]),key:"all",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-multiple"})})},{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>x("unread")}),f(j,{value:W(k.value?.length||0),type:"error"})]),key:"unread",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-open-multiple"})})}]),U=P(()=>{let s;switch(_.value){case"all":s=L.value||[];break;case"unread":s=k.value||[];break;default:s=[];break}return s}),g=P(()=>E.contentLayoutSize.height-100),u=async()=>{v.start(),await R(),v.finish()};return Re(()=>O.value,s=>{s?v.start():v.finish()},{immediate:!0}),(s,w)=>{const c=se,r=ie,y=we,N=ve,S=be,z=ke,q=Ne,p=ge,d=ce,J=le,K=ae;return b(),te("section",null,[n(H)?(b(),T(p,{key:1,style:ne("height: "+n(g)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(d,{text:"",style:{width:"125px"}}),e(d,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:t(()=>[e(d,{height:"35px",width:"100%",class:"mb-1"}),e(d,{height:"35px",width:"100%"})]),_:1}),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[e(z,{hoverable:"",clickable:"",bordered:""},{default:t(()=>[e(K,{class:"item w-full"},{default:t(()=>[e(J,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(j),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{class:"item w-full"},{default:t(()=>[e(J,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(j),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(b(),T(p,{key:0,style:ne("height: "+n(g)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(c,{text:"",onClick:u},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:restart"})]),_:1})]),default:t(()=>[ee(" "+Z(n(x)("refresh")),1)]),_:1}),e(c,{text:"",disabled:!n(k)?.length,onClick:w[0]||(w[0]=F=>n($)({refetch:!0}))},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:checkmark"})]),_:1})]),default:t(()=>[ee(" "+Z(n(x)("allMarkedAsRead")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:n(i)||n(A),width:260,bordered:""},{default:t(()=>[e(N,{value:n(_),"onUpdate:value":w[1]||(w[1]=F=>Me(_)?_.value=F:null),collapsed:n(i)||n(A),"collapsed-width":64,"collapsed-icon-size":22,options:n(B)},null,8,["value","collapsed","options"])]),_:1},8,["collapsed"]),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[n(U).length?(b(),T(z,{key:0,hoverable:"",clickable:"",bordered:""},{default:t(()=>[(b(!0),te(je,null,Te(n(U),(F,de)=>(b(),T(Ie,{key:de,item:F},null,8,["item"]))),128))]),_:1})):(b(),T(q,{key:1,description:n(x)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:t(()=>[e(n(h),{size:"56"},{default:t(()=>[e(n(m),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}}),Ke=Ce(Fe,[["__scopeId","data-v-52995372"]]);export{Ke as default};
