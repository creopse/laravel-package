import{i as C}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{aI as oe,aJ as ue,u as _e,aK as pe,p as fe,aL as W,R as me}from"./main-D6UvRL7q.js";import{I as m}from"./iconify_vue-DXPEksg3.js";import{u as he}from"./vue-router-DjpI5axN.js";import{ab as ae,ad as le,q as ie,B as se,a8 as ce,h,af as L,ac as ye,p as ge,T as xe,ag as we,U as be,V as ve,aa as ke,J as Ne}from"./naive-ui-BrWbllCz.js";import{u as re}from"./vue-i18n-B92nPylK.js";import{_ as Ce}from"./fawmi_vue-google-maps-yyESU4s0.js";const{defineComponent:$e}=await C("vue"),{unref:l,resolveComponent:Ke,createVNode:a,withCtx:o,openBlock:V,createBlock:z,createCommentVNode:Q,toDisplayString:T,createElementVNode:X,createTextVNode:U,withModifiers:Be,normalizeStyle:Se}=await C("vue"),Ie=["innerHTML"],{ref:Y}=await C("vue"),Ve=$e({__name:"Item",props:{item:{}},emits:["closeBox"],setup(K,{emit:g}){const i=K,j=g,{t:_,locale:v}=re(),A=he(),{markAsRead:R,buildMessage:D,deleteNotification:H,isUnread:E}=oe(),k=x=>{if(x.data.target)try{R({id:x.id,refetch:!0}),A.push(x.data.target),j("closeBox")}catch{}},$=Y({title:"",content:""}),B=Y(!1);return(async()=>{B.value=!0,$.value=await D(i.item),B.value=!1})(),(x,u)=>{const s=ce,w=L,c=m,r=h,y=se,N=ie,S=le,I=ae,J=ye;return l(B)?(V(),z(I,{key:0,class:"item w-full"},{default:o(()=>[a(S,null,{header:o(()=>[a(s,{text:"",style:{width:"150px"}})]),"header-extra":o(()=>[a(w,{color:"gray",dot:""})]),description:o(()=>[a(s,{text:"",style:{width:"100%"},repeat:2})]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1}),a(N,{align:"center"},{default:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[a(s,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(V(),z(I,{key:1,class:"item w-full",style:Se(`cursor: ${i.item.data.target?"pointer":"default"}`),onClick:u[3]||(u[3]=p=>k(i.item))},{default:o(()=>[a(S,null,{header:o(()=>[X("span",{class:"title",onClick:u[0]||(u[0]=p=>k(i.item))},T(l($).title),1)]),"header-extra":o(()=>[l(E)(i.item)?(V(),z(w,{key:0,dot:""})):Q("",!0)]),description:o(()=>[X("span",{class:"content",innerHTML:l($).content},null,8,Ie)]),footer:o(()=>[a(N,{align:"center",justify:"space-between"},{default:o(()=>[a(y,{text:"",size:"tiny",style:{cursor:"default"}},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:o(()=>[U(" "+T(l(ue)(i.item?.createdAt||"",{locale:l(v)})),1)]),_:1}),a(N,{align:"center"},{default:o(()=>[l(E)(i.item)?(V(),z(y,{key:0,text:"",onClick:u[1]||(u[1]=Be(p=>l(R)({id:i.item.id,refetch:!0}),["stop"]))},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:checkmark"})]),_:1})]),default:o(()=>[U(" "+T(l(_)("read")),1)]),_:1})):Q("",!0),i.item.data.removable?(V(),z(J,{key:1,"positive-text":l(_)("yes"),"negative-text":l(_)("no"),trigger:"hover",onPositiveClick:u[2]||(u[2]=p=>l(H)({id:i.item.id}))},{trigger:o(()=>[a(y,{text:""},{icon:o(()=>[a(r,null,{default:o(()=>[a(c,{icon:"carbon:trash-can"})]),_:1})]),default:o(()=>[U(" "+T(l(_)("delete")),1)]),_:1})]),default:o(()=>[U(" "+T(l(_)("deleteNotificationQuestion")),1)]),_:1},8,["positive-text","negative-text"])):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]))}}}),{defineComponent:ze}=await C("vue"),{unref:n,createVNode:e,withCtx:t,toDisplayString:Z,createTextVNode:ee,resolveComponent:Pe,isRef:Te,renderList:Me,Fragment:Le,openBlock:b,createElementBlock:te,createBlock:M,normalizeStyle:ne}=await C("vue"),{defineComponent:je,ref:Ae,computed:q,h:f,watch:Re}=await C("vue"),Ee=je({name:me.NOTIFICATIONS.NAME}),Fe=ze({...Ee,setup(K){const{t:g}=re(),{isMdScreen:i,isSmScreen:j}=_e(),_=Ae("all"),v=ge(),{data:A,refetch:R,isLoading:D,isFetching:H}=pe(),E=fe(),{userUnreadNotifications:k,markAllAsRead:$}=oe(),B=q(()=>[{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>g("all")}),f(L,{value:W(A.value?.length||0),type:"info"})]),key:"all",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-multiple"})})},{label:()=>f("div",{class:"flex justify-between items-center w-full"},[f("span",{class:"mr-1"},{default:()=>g("unread")}),f(L,{value:W(k.value?.length||0),type:"error"})]),key:"unread",icon:()=>f(h,{},{default:()=>f(m,{icon:"mdi:email-open-multiple"})})}]),O=q(()=>{let s;switch(_.value){case"all":s=A.value||[];break;case"unread":s=k.value||[];break;default:s=[];break}return s}),x=q(()=>E.contentLayoutSize.height-100),u=async()=>{v.start(),await R(),v.finish()};return Re(()=>H.value,s=>{s?v.start():v.finish()},{immediate:!0}),(s,w)=>{const c=se,r=ie,y=we,N=ve,S=be,I=ke,J=Ne,p=xe,d=ce,P=le,G=ae;return b(),te("section",null,[n(D)?(b(),M(p,{key:1,style:ne("height: "+n(x)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(d,{text:"",style:{width:"125px"}}),e(d,{text:"",style:{width:"125px"}})]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:!1,width:260,bordered:""},{default:t(()=>[e(d,{height:"35px",width:"100%",class:"mb-1"}),e(d,{height:"35px",width:"100%"})]),_:1}),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[e(I,{hoverable:"",clickable:"",bordered:""},{default:t(()=>[e(G,{class:"item w-full"},{default:t(()=>[e(P,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(L),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{class:"item w-full"},{default:t(()=>[e(P,null,{header:t(()=>[e(d,{text:"",style:{width:"150px"}})]),"header-extra":t(()=>[e(n(L),{color:"gray",dot:""})]),description:t(()=>[e(d,{text:"",style:{width:"100%"},repeat:2})]),footer:t(()=>[e(r,{align:"center",justify:"space-between"},{default:t(()=>[e(c,{text:"",size:"tiny",style:{cursor:"default"}},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"mdi:clock-time-four-outline"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1}),e(r,{align:"center"},{default:t(()=>[e(c,{text:""},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:trash-can"})]),_:1})]),default:t(()=>[e(d,{text:"",style:{width:"60px"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])):(b(),M(p,{key:0,style:ne("height: "+n(x)+"px"),embedded:""},{default:t(()=>[e(y,{style:{height:"48px",padding:"8px 15px"},bordered:""},{default:t(()=>[e(r,{justify:"space-between",align:"center"},{default:t(()=>[e(c,{text:"",onClick:u},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:restart"})]),_:1})]),default:t(()=>[ee(" "+Z(n(g)("refresh")),1)]),_:1}),e(c,{text:"",disabled:!n(k)?.length,onClick:w[0]||(w[0]=F=>n($)({refetch:!0}))},{icon:t(()=>[e(n(h),null,{default:t(()=>[e(n(m),{icon:"carbon:checkmark"})]),_:1})]),default:t(()=>[ee(" "+Z(n(g)("allMarkedAsRead")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),e(p,{position:"absolute",style:{top:"48px"},"has-sider":""},{default:t(()=>[e(S,{"collapse-mode":"width","native-scrollbar":!1,"collapsed-width":64,collapsed:n(i)||n(j),width:260,bordered:""},{default:t(()=>[e(N,{value:n(_),"onUpdate:value":w[1]||(w[1]=F=>Te(_)?_.value=F:null),collapsed:n(i)||n(j),"collapsed-width":64,"collapsed-icon-size":22,options:n(B)},null,8,["value","collapsed","options"])]),_:1},8,["collapsed"]),e(p,{"content-style":"padding: 5px; padding-right: 0","native-scrollbar":!1},{default:t(()=>[n(O).length?(b(),M(I,{key:0,hoverable:"",clickable:"",bordered:""},{default:t(()=>[(b(!0),te(Le,null,Me(n(O),(F,de)=>(b(),M(Ve,{key:de,item:F},null,8,["item"]))),128))]),_:1})):(b(),M(J,{key:1,description:n(g)("noNotificationAtThisTime"),size:"huge",class:"empty-container"},{icon:t(()=>[e(n(h),{size:"56"},{default:t(()=>[e(n(m),{icon:"carbon:notification-off"})]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1})]),_:1},8,["style"]))])}}}),Ge=Ce(Fe,[["__scopeId","data-v-52995372"]]);export{Ge as default};
