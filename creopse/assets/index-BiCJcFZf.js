const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as me}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Qa,a as mo,b as Ki}from"./index.vue_vue_type_script_setup_true_lang-CHdo98-A.js";import{_ as nu}from"./PageLayout.vue_vue_type_script_setup_true_lang-CMiqLWkB.js";import{_ as Pa}from"./I18nInput-CCxb8iq2.js";import{Q as sr,e as Ye,t as ht,u as ot,f as qt,w as Zt,y as pn,S as ds,T as ou,U as Id,v as Wa,V as fo,p as jo,W as Vd,x as su,J as ru,X as Sd,Y as iu,Z as ji,_ as Ja,$ as Yi,a0 as cu,d as du,a1 as uu,a2 as pu,R as Ed,a3 as mu,a4 as Ud,A as nc,a5 as Gi,a6 as Td,a7 as fu,a8 as _u,a9 as Md,aa as vu,ab as yu,ac as Hi,ad as Dd,ae as gu,c as hu,af as bu,ag as ku,q as wu,I as xu,ah as $u}from"./main-BRU0R4jH.js";import{I as ge}from"./iconify_vue-DXPEksg3.js";import{_ as Yr}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-zTsmhcuW.js";import{u as Ie}from"./vue-i18n-B92nPylK.js";import{u as Qe,F as oa,p as Ze,K as Xl,l as _o,a0 as zn,_ as Vl,q as Ml,H as Aa,C as Xa,B as Ke,h as Y,J as Za,a as Va,d as Sa,e as Xn,c as ll,Q as rr,R as ir,b as Ea,a1 as Cu,X as ps,P as Gr,o as mn,S as Nd,r as en,O as cr,W as zd,L as Hr,k as vo,s as Qi,a2 as Iu,a3 as Qr,a4 as Wr,a5 as Wi,f as Ji,D as fn,E as _n,w as dr,a6 as Vu,a7 as Su,a8 as Ad,t as Pd,I as Ko,y as Xi,a9 as Eu,aa as Ld,ab as Bd,m as Zi,ac as Fd,ad as Uu,ae as Tu,Y as Mu,af as Du,T as Nu,U as zu,V as Au}from"./naive-ui-CqiIy5K7.js";import{_ as pe}from"./lodash-C_MgVQnG.js";import{_ as Zn}from"./fawmi_vue-google-maps-yyESU4s0.js";import{C as yn,S as oc,p as Pn,d as Pu,v as Ln,V as ur,w as Bn,G as Zr}from"./ngneat_falso-BQ8TvUKs.js";import{h as Lu}from"./moment-Djc71hkG.js";import{_ as Od}from"./index.vue_vue_type_style_index_0_lang-DWtZB5dT.js";import{u as qd,a as Rd}from"./article-ADwMJWru.js";import{v as Al}from"./uuid-8I8R7izr.js";import{c as ec,u as Bu}from"./tanstack_vue-query-C9nQ2kf3.js";import{s as jd}from"./slugify-BFyLO-pG.js";import{_ as Fu}from"./media-file-Dm8mNHuZ.js";import{r as Ou}from"./vueuse_shared-CcT-C3Xm.js";import{_ as ms}from"./jsoneditor-BJ7iDtct.js";import{u as Kd}from"./vueuse_core-DLnQCT4A.js";import{_ as Yd}from"./UploadExcel-C8lAVuWC.js";import{_ as us}from"./validator-DC79P2ge.js";import{_ as qu}from"./VueTelInputWrapper-DwU_q1Em.js";import{i as Ru}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{u as ju}from"./email-D9tqPxPH.js";import{u as Ku}from"./vue-shepherd-CZJ8KBfd.js";import{a as Yu}from"./vue-router-DjpI5axN.js";var Jn=(u=>(u.IMAGE="image",u.VIDEO="video",u))(Jn||{});const Gd=(u,e)=>sr(["ad-identifiers"],async()=>{const{request:n}=Ye(),t=await n({url:"/ad-identifiers"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),Gu=(u,e)=>sr(["ads"],async()=>{const{request:n}=Ye(),t=await n({url:"/ads"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),Hu=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe();return ht({queryKey:["ad-identifiers"],operation:"insert",getItemId:a=>a.id,mutationFn:async a=>{const l=await n({method:"post",url:"/ad-identifiers",data:a});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:a=>{a?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Qu=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe();return ht({queryKey:["ad-identifiers"],operation:"update",getItemId:a=>a.id,mutationFn:async a=>{const l=await n({method:"put",url:`/ad-identifiers/${a.id}`,data:a});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:a=>{a?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Wu=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe();return ht({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const a=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:o=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:Ju,defineComponent:Xu}=await me("vue"),{unref:yt,resolveComponent:Xb,createVNode:Lt,toDisplayString:Yo,createTextVNode:ei,withCtx:el,renderList:Zu,Fragment:sc,openBlock:Go,createElementBlock:ti,createElementVNode:vs,createCommentVNode:ep,normalizeClass:rc,createBlock:li,isRef:tp}=await me("vue"),lp={class:"flex items-center justify-between"},ap={class:"flex flex-col"},np={class:"text-sm font-bold"},op={class:"text-xs font-normal"},sp={key:0,class:"text-xs font-bold"},{ref:ys}=await me("vue"),rp=Xu({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,formatKey:t}=ot(),o=Ju(u,"show"),{data:a,isPending:l}=Gd(),{mutate:p}=Wu(),{mutate:S}=Hu(),{mutate:ce}=Qu(),oe=oa(),F=Ze(),we=ys(!1),H=ys(!1),k=ys(null),c=ys(null),v=ys({id:"",reusable:!1,contentType:Jn.IMAGE,contentSize:"",params:[]}),fe={id:[{required:!0,message:e("fillRequired")}]},X=te=>{k.value=pe.cloneDeep(te),v.value=pe.cloneDeep(te||{id:"",reusable:!1,contentType:Jn.IMAGE,contentSize:"",params:[]}),H.value=!0},d=async()=>(c.value?.validate(async te=>{if(!te){F.start(),we.value=!0;const B={id:v.value.id,reusable:v.value.reusable,contentType:v.value.contentType,contentSize:v.value.contentSize,params:v.value.params};k.value?ce(B,{onSuccess:()=>{H.value=!1}}):S(B,{onSuccess:()=>{H.value=!1}}),we.value=!1,F.finish()}}),!1),O=async te=>{oe.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{p({id:te.id})}})};return(te,B)=>{const A=ge,Z=Ke,K=Ml,$=Aa,Q=Xa,m=Y,T=Vl,y=zn,E=Za,M=_o,b=Xl,z=ll,se=Xn,$e=Sa,le=ir,I=rr,C=Cu,Ee=Ea,D=Va;return Go(),ti(sc,null,[Lt(b,{show:o.value,"onUpdate:show":B[2]||(B[2]=P=>o.value=P),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:yt(e)("adIdentifiers")},{"header-extra":el(()=>[Lt(K,{align:"center"},{default:el(()=>[Lt(Z,{secondary:"",size:"small",type:"primary",disabled:yt(l),onClick:B[0]||(B[0]=P=>X(null))},{default:el(()=>[Lt(A,{icon:"carbon:add-alt",class:"mr-1"}),ei(" "+Yo(yt(e)("add")),1)]),_:1},8,["disabled"]),Lt(Z,{secondary:"",size:"small",type:"error",disabled:yt(l),onClick:B[1]||(B[1]=P=>o.value=!1)},{default:el(()=>[Lt(A,{icon:"carbon:close",class:"mr-1"}),ei(" "+Yo(yt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:el(()=>[Lt(M,{show:yt(l)},{default:el(()=>[yt(a)?.length?(Go(),li(y,{key:0,style:{"max-height":"400px"}},{default:el(()=>[(Go(!0),ti(sc,null,Zu(yt(a),P=>(Go(),li(T,{key:P.id,embedded:"",size:"small",class:"mb-2"},{default:el(()=>[vs("div",lp,[vs("div",ap,[vs("span",np,Yo(P.id),1),vs("div",null,[vs("span",op,Yo(P.contentType===yt(Jn).IMAGE?yt(e)("image"):yt(e)("video")),1),P.contentSize?(Go(),ti("span",sp," Â ("+Yo(P.contentSize)+") ",1)):ep("",!0)])]),Lt(K,null,{default:el(()=>[Lt($,{size:"medium",bordered:!1,type:P.reusable?"info":"warning"},{default:el(()=>[ei(Yo(P.reusable?yt(e)("reusable"):yt(e)("notReusable")),1)]),_:2},1032,["type"]),Lt(Q,{vertical:"",class:rc(["!mx-0",yt(n)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Lt(Z,{size:"small",type:"warning",secondary:"",onClick:s=>X(P)},{default:el(()=>[Lt(m,null,{default:el(()=>[Lt(A,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Lt(Z,{size:"small",type:"error",secondary:"",onClick:s=>O(P)},{default:el(()=>[Lt(m,null,{default:el(()=>[Lt(A,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Go(),li(T,{key:1,size:"large",class:rc(`mb-2 !border-dashed !border-2 ${yt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:el(()=>[Lt(E,{description:yt(e)("noIdentifierAdded")},{icon:el(()=>[Lt(m,{size:"60"},{default:el(()=>[Lt(A,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Lt(b,{show:yt(H),"onUpdate:show":B[8]||(B[8]=P=>tp(H)?H.value=P:null),loading:yt(we),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:yt(k)?yt(e)("editAdIdentifier"):yt(e)("addAdIdentifier"),"positive-text":yt(e)("validate"),"negative-text":yt(e)("cancel"),onPositiveClick:d,onNegativeClick:B[9]||(B[9]=P=>H.value=!1)},{default:el(()=>[Lt(D,{ref_key:"formRef",ref:c,model:yt(v),rules:fe,"show-require-mark":!1,size:"medium",class:"my-5"},{default:el(()=>[Lt($e,{span:24,"x-gap":"12"},{default:el(()=>[Lt(se,{span:16,label:yt(e)("identifier"),path:"id"},{default:el(()=>[Lt(z,{value:yt(v).id,placeholder:yt(e)("identifier"),disabled:yt(k)!=null,class:"w-full","onUpdate:value":B[3]||(B[3]=P=>yt(v).id=yt(t)(P))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),Lt(se,{span:8,label:yt(e)("contentSize"),path:"contentSize"},{default:el(()=>[Lt(z,{value:yt(v).contentSize,"onUpdate:value":B[4]||(B[4]=P=>yt(v).contentSize=P),placeholder:yt(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Lt($e,{span:24,"x-gap":"12"},{default:el(()=>[Lt(se,{span:12,label:yt(e)("status"),path:"reusable"},{default:el(()=>[Lt(I,{value:yt(v).reusable,"onUpdate:value":B[5]||(B[5]=P=>yt(v).reusable=P),name:"reusable",class:"w-full"},{default:el(()=>[Lt(le,{value:!1,label:yt(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),Lt(le,{value:!0,label:yt(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Lt(se,{span:12,label:yt(e)("contentType"),path:"contentType"},{default:el(()=>[Lt(I,{value:yt(v).contentType,"onUpdate:value":B[6]||(B[6]=P=>yt(v).contentType=P),name:"contentType",class:"w-full"},{default:el(()=>[Lt(le,{value:yt(Jn).IMAGE,label:yt(e)("image"),class:"w-[50%]"},null,8,["value","label"]),Lt(le,{value:yt(Jn).VIDEO,label:yt(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Lt(Ee,{label:yt(e)("settings"),path:"params"},{default:el(()=>[Lt(C,{value:yt(v).params,"onUpdate:value":B[7]||(B[7]=P=>yt(v).params=P),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),ip=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["ads"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/ads",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},cp=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["ads"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/ads/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},dp=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["ads"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/ads/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:up}=await me("vue"),{unref:he,createVNode:xt,withCtx:Bt,toDisplayString:yo,createTextVNode:go,openBlock:gn,createBlock:pr,createCommentVNode:ai,resolveComponent:Zb,isRef:Ho,Fragment:mr,createElementBlock:Qo,normalizeStyle:ic,createElementVNode:ni,renderList:pp}=await me("vue"),mp={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},fp={id:"video",autoplay:"",controls:"",style:{width:"100%"}},_p=["src"],{inject:vp,ref:Ba,h:Sl,computed:cc}=await me("vue"),yp=up({__name:"index",setup(u){const e=Qe(),n=oa(),t=vp("appConfig"),{data:o}=Gd(),{data:a,isPending:l}=Gu(),{mutate:p,isPending:S}=dp(),{mutate:ce,isPending:oe}=ip(),{mutate:F,isPending:we}=cp(),{tr:H,fileUrl:k,pickByTheme:c,appSecondaryColor:v,appPrimaryColor:fe,isInDevMode:X}=ot(),{t:d,locale:O}=Ie(),te=Ba(""),B=Ba(),A={pageSize:12,prefix:({itemCount:s})=>Sl("div",{class:"font-bold"},{default:()=>`${d("total")}: ${s}`})},Z=[{title:d("preview"),key:"image",width:200,fixed:"left",render(s){return s.adIdentifier?.contentType==Jn.IMAGE?Sl(ps,{src:s.contentUrl??"",objectFit:"cover",width:200,height:100}):Sl("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[Sl(Y,{size:50,color:v.value},{default:()=>Sl(ge,{icon:"carbon:document-video"})})])}},{title:d("identifier"),key:"pid",width:150,fixed:"left",render(s){return Sl("small",{},{default:()=>s.pid})}},{title:d("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(s){return Sl("div",{},{default:()=>H(s.title)})}},{title:d("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return Sl("small",{},{default:()=>H(s.description)})}},{title:d("status"),key:"isActive",width:100,render(s){return Sl(Aa,{type:s.display?"success":"warning",bordered:!1},{default:()=>s.display?d("visible"):d("hidden")})},sortOrder:!1,sorter:"default"},{title:d("updateAt"),key:"updatedAt",width:125,render(s){return Sl("div",{},{default:()=>pn(s.updatedAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(s){return Sl("div",{},{default:()=>pn(s.createdAt,{locale:O.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Sl(ll,{ref:B,placeholder:d("search"),value:te.value,onInput:s=>{te.value=s}},{suffix:()=>Sl(Y,{},{default:()=>Sl(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return Sl("div",{class:"flex justify-end items-center w-full"},[Sl(Ke,{size:"small",type:"warning",secondary:!0,onClick:()=>{se(s)},renderIcon:()=>Sl(Y,null,{default:()=>Sl(ge,{icon:"carbon:edit"})})}),Sl("div",{class:"w-2"}),Sl(Ke,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:d("confirm"),content:d("confirmDeleteAd"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{s.id&&p({id:s.id})}})},renderIcon:()=>Sl(Y,null,{default:()=>Sl(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],K=cc(()=>{if(!te.value)return a.value;const s=a.value?.filter(r=>r.pid.toLowerCase().includes(te.value.toLowerCase())||r.title.toLowerCase().includes(te.value.toLowerCase())||r.description?.toLowerCase().includes(te.value.toLowerCase()));return B.value&&B.value.focus(),s}),$=Ba(!1),Q=Ba(!1),m=Ba(Jn.IMAGE),T=Ba(),y=Ba(null),E=Ba(null),M=Ba({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),b={pid:[{required:!0,message:d("fillRequired")}],title:[{required:!0,message:d("fillRequired")}],content:[{required:!0,message:d("fillRequired")}]},z=cc({get:()=>!M.value.broadcastStart||!M.value.broadcastEnd?null:[M.value.broadcastStart||"",M.value.broadcastEnd||""],set:s=>{s?(M.value.broadcastStart=s[0],M.value.broadcastEnd=s[1]):(M.value.broadcastStart=null,M.value.broadcastEnd=null)}}),se=s=>{y.value=pe.cloneDeep(s),s?(M.value=pe.cloneDeep(s),s.data||(M.value.data={})):M.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},T.value=o.value?.find(r=>r.id==M.value.pid)?.params,$.value=!0},$e=s=>Sl("span",{},{default:()=>s.id+(s.contentSize?` (${s.contentSize})`:"")}),le=async()=>(E.value?.validate(async s=>{if(!s){const r={pid:M.value.pid,title:M.value.title,display:M.value.display,content:M.value.content,description:M.value.description,data:M.value.data,broadcastStart:M.value.broadcastStart,broadcastEnd:M.value.broadcastEnd};y.value?y.value.title!==M.value.title&&(a.value||[]).findIndex(x=>x.title==M.value.title)>-1?e.error(d("sameAdTitleMessage")):F({id:y.value.id,...r},{onSuccess:()=>{}}):(a.value||[]).findIndex(x=>x.title==M.value.title)>-1?e.error(d("sameAdTitleMessage")):ce(r,{onSuccess:()=>{}}),$.value=!1}}),!1),I=Ba(!1),C=Ba(!1),Ee=Ba(!1),D=Ba(""),P=Ba("");return(s,r)=>{const x=Ml,N=Qa,R=Gr,J=Yr,L=Pa,G=Ea,at=Nd,ct=en,xe=Xn,bt=ir,Ae=rr,dt=Sa,q=mn,V=cr,w=Va,ae=Xl,Vt=mo;return gn(),Qo(mr,null,[xt(N,{to:"#alt-action"},{default:Bt(()=>[xt(x,null,{default:Bt(()=>[he(X)?(gn(),pr(he(Ke),{key:0,secondary:"",type:"warning",onClick:r[0]||(r[0]=_e=>Q.value=!0)},{default:Bt(()=>[xt(he(Y),{size:"26"},{default:Bt(()=>[xt(he(ge),{icon:"carbon:id"})]),_:1}),go(" "+yo(he(d)("identifiers")),1)]),_:1})):ai("",!0),xt(he(Ke),{type:"primary",secondary:"",onClick:r[1]||(r[1]=_e=>se(null))},{icon:Bt(()=>[xt(he(Y),{size:"18"},{default:Bt(()=>[xt(he(ge),{icon:"carbon:add-alt"})]),_:1})]),default:Bt(()=>[go(" "+yo(he(d)("addAd")),1)]),_:1})]),_:1})]),_:1}),xt(J,null,{default:Bt(()=>[xt(R,{columns:Z,data:he(K),pagination:A,loading:he(l),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),xt(ae,{show:he($),"onUpdate:show":r[12]||(r[12]=_e=>Ho($)?$.value=_e:null),loading:he(oe)||he(we)||he(S),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:he(y)?he(d)("editAd"):he(d)("addAd"),"positive-text":he(d)("validate"),"negative-text":he(d)("cancel"),onPositiveClick:le,onNegativeClick:r[13]||(r[13]=_e=>$.value=!1)},{default:Bt(()=>[xt(w,{ref_key:"formRef",ref:E,class:"mt-5",model:he(M),rules:b,"show-require-mark":!1,size:"medium"},{default:Bt(()=>[xt(dt,{cols:"24","x-gap":12},{default:Bt(()=>[xt(q,{span:"12"},{default:Bt(()=>[xt(G,{"show-label":!1,path:"title"},{default:Bt(()=>[xt(L,{modelValue:he(M).title,"onUpdate:modelValue":r[2]||(r[2]=_e=>he(M).title=_e),placeholder:he(d)("title"),class:"w-full",sync:""},{label:Bt(()=>[go(yo(he(d)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),xt(G,{"show-label":!1,path:"description"},{default:Bt(()=>[xt(L,{modelValue:he(M).description,"onUpdate:modelValue":r[3]||(r[3]=_e=>he(M).description=_e),placeholder:he(d)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Bt(()=>[go(yo(he(d)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),xt(G,{label:he(d)("broadcastPeriod"),path:"broadcastPeriod"},{default:Bt(()=>[xt(at,{"formatted-value":he(z),"onUpdate:formattedValue":r[4]||(r[4]=_e=>Ho(z)?z.value=_e:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),xt(dt,{"x-gap":"12",span:24},{default:Bt(()=>[xt(xe,{span:12,label:he(d)("identifier"),path:"pid"},{default:Bt(()=>[xt(ct,{value:he(M).pid,"onUpdate:value":[r[5]||(r[5]=_e=>he(M).pid=_e),r[6]||(r[6]=()=>{T.value=he(o)?.find(_e=>_e.id==he(M).pid)?.params})],"render-label":$e,options:he(o)?.map(_e=>({..._e,disabled:!_e.reusable&&(_e.adsCount||0)>0})),placeholder:he(d)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),xt(xe,{span:12,label:he(d)("status"),path:"display"},{default:Bt(()=>[xt(Ae,{value:he(M).display,"onUpdate:value":r[7]||(r[7]=_e=>he(M).display=_e),name:"display",class:"w-full"},{default:Bt(()=>[xt(bt,{value:!1,label:he(d)("hidden"),class:"w-[50%]"},null,8,["label"]),xt(bt,{value:!0,label:he(d)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),xt(q,{span:"12"},{default:Bt(()=>[xt(G,{label:he(d)("content"),path:"content"},{default:Bt(()=>[he(m)==he(Jn).VIDEO?(gn(),pr(V,{key:0},{default:Bt(()=>[xt(he(Ke),{secondary:"",type:"primary",onClick:r[8]||(r[8]=()=>{C.value=!0})},{default:Bt(()=>[go(yo(he(d)("select")),1)]),_:1}),xt(he(ll),{value:he(M).content?he(ds)(he(M).content):"",placeholder:he(d)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),he(M).content?(gn(),Qo(mr,{key:0},[xt(he(Ke),{type:"primary",ghost:"",onClick:r[9]||(r[9]=()=>{D.value=he(d)("video"),P.value=he(k)(he(M).content),Ee.value=!0})},{icon:Bt(()=>[xt(he(Y),null,{default:Bt(()=>[xt(he(ge),{icon:"carbon:play-outline-filled"})]),_:1})]),default:Bt(()=>[go(" "+yo(he(d)("play")),1)]),_:1}),xt(he(Ke),{type:"primary",ghost:"",onClick:r[10]||(r[10]=()=>{he(M).content=""})},{icon:Bt(()=>[xt(he(Y),null,{default:Bt(()=>[xt(he(ge),{icon:"carbon:trash-can"})]),_:1})]),default:Bt(()=>[go(" "+yo(he(d)("clear")),1)]),_:1})],64)):ai("",!0)]),_:1})):(gn(),Qo("div",mp,[ni("div",{class:"cursor-pointer w-full h-[150px]",onClick:r[11]||(r[11]=()=>{I.value=!0})},[he(M).content?(gn(),pr(he(ps),{key:0,"object-fit":"cover","preview-disabled":"",class:"py-1 content-image",style:ic("border: 1px dashed "+he(c)(he(fe),"white")),src:he(k)(he(M).content||"")},null,8,["style","src"])):(gn(),Qo("div",{key:1,class:"w-full h-full flex items-center justify-center",style:ic("border: 1px dashed "+he(c)(he(fe),"white"))},[xt(he(Y),{size:64},{default:Bt(()=>[xt(he(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),he(T)&&Array.isArray(he(T))?(gn(),pr(G,{key:0,label:he(d)("data"),path:"data"},{default:Bt(()=>[xt(dt,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Bt(()=>[(gn(!0),Qo(mr,null,pp(he(T),(_e,St)=>(gn(),Qo(mr,{key:St},[xt(q,{span:10},{default:Bt(()=>[xt(he(ll),{value:_e,placeholder:_e,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),xt(q,{span:14},{default:Bt(()=>[xt(he(ll),{value:he(M).data[_e],"onUpdate:value":Ct=>he(M).data[_e]=Ct,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):ai("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),xt(ae,{show:he(Ee),"onUpdate:show":r[14]||(r[14]=_e=>Ho(Ee)?Ee.value=_e:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:he(D)},{default:Bt(()=>[ni("video",fp,[ni("source",{src:he(P)},null,8,_p)])]),_:1},8,["show","title"]),xt(Vt,{show:he(I),"onUpdate:show":r[15]||(r[15]=_e=>Ho(I)?I.value=_e:null),title:he(d)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:he(t)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:r[16]||(r[16]=_e=>{he(M).content=_e,I.value=!1})},null,8,["show","title","upload-config"]),xt(Vt,{show:he(C),"onUpdate:show":r[17]||(r[17]=_e=>Ho(C)?C.value=_e:null),title:he(d)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:he(t)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:r[18]||(r[18]=_e=>{he(M).content=_e,C.value=!1})},null,8,["show","title","upload-config"]),xt(rp,{show:he(Q),"onUpdate:show":r[19]||(r[19]=_e=>Ho(Q)?Q.value=_e:null)},null,8,["show"])],64)}}}),gp=Zn(yp,[["__scopeId","data-v-ad09a685"]]),dc=u=>{const e=Lu();switch(u){case"text":return Zr({min:40,max:80});case"i18n-text":return`{ "fr": "${Zr({min:40,max:80})}", "en": "${Zr({min:40,max:80})}" }`;case"textarea":return Bn();case"i18n-textarea":return`{ "fr": "${Bn()}", "en": "${Bn()}" }`;case"number":return yn({min:10,max:1e4});case"checkbox":return oc();case"single-select":return Pn();case"multi-select":return[Pn(),Pn(),Pn()];case"date":return e.format("YYYY-MM-DD");case"daterange":return[e.format("YYYY-MM-DD"),e.add(5,"years").format("YYYY-MM-DD")];case"datetime":return e.format("YYYY-MM-DD HH:mm:ss");case"datetimerange":return[e.format("YYYY-MM-DD HH:mm:ss"),e.clone().add(5,"years").format("YYYY-MM-DD HH:mm:ss")];case"year":return e.format("YYYY");case"yearrange":return[e.format("YYYY"),e.clone().add(5,"years").format("YYYY")];case"month":return e.format("YYYY-MM");case"monthrange":return[e.format("YYYY-MM"),e.clone().add(5,"years").format("YYYY-MM")];case"quarter":return`${e.format("YYYY")}-Q${e.quarter()}`;case"quarterrange":const n=e.clone().add(5,"years");return[`${e.format("YYYY")}-Q${e.quarter()}`,`${n.format("YYYY")}-Q${n.quarter()}`];case"week":return`${e.format("YYYY")}-${e.week()}`;case"editor":return`<p>${Bn()}</p><p>${Bn()}</p>`;case"i18n-editor":return`{ "fr": "<p>${Bn()}</p><p>${Bn()}</p>", "en": "<p>${Bn()}</p><p>${Bn()}</p>" }`;case"image":return Ln({width:1200,height:800});case"gallery":return[Ln({width:1200,height:800}),Ln({width:1200,height:800}),Ln({width:1200,height:800}),Ln({width:1200,height:800})];case"news-article":return yn({min:0,max:10});case"news-articles":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"news-category":return yn({min:0,max:10});case"news-categories":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"news-tag":return yn({min:0,max:10});case"news-tags":{let o=yn({min:0,max:5});return[o,o+1,o+2]}case"icon":return ur();case"icons":return[ur(),ur(),ur()];case"albums":return[{name:"album",medias:[Ln(),Ln(),Ln(),Ln()]}];case"audio":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/mp3/mp31mb.mp3";case"video":return"https://testfilehub.github.io/files/MP4/1mb.MP4";case"document":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/pdf/pdf1mb.pdf";case"file":return"https://testfilehub.github.io/files/TXT/1mb.TXT";case"color":return Pu();case"content-model-item":return;case"content-model-items":return[];case"menu-item-link":return 0;case"list":return[{value:Pn()},{value:Pn()},{value:Pn()}];case"i18n-list":return[{value:`{ "fr": "${Pn()}", en: "${Pn()}" }`}];case"switch":return oc();case"slider":return yn({min:0,max:100});case"range-slider":return[yn({min:0,max:100}),yn({min:0,max:100})];case"gradient":return"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)";default:return u}},{useModel:hp,mergeModels:bp,defineComponent:kp}=await me("vue"),{toDisplayString:fr,createElementVNode:oi,resolveComponent:wp,createVNode:Ua,withCtx:jl,unref:ma,createTextVNode:si,openBlock:rn,createBlock:gs,createCommentVNode:_r,renderList:uc,Fragment:pc,createElementBlock:Wo,createSlots:xp,isRef:mc}=await me("vue"),{defineComponent:$p,ref:vr,inject:Cp}=await me("vue"),Ip={class:"w-full"},Vp={class:"mb-2"},Sp={class:"text-base text-left"},Ep=["src","onClick"],Up=["src"],Tp=$p({name:"AlbumsPicker"}),Mp=kp({...Tp,props:bp({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=hp(u,"modelValue"),n=u,{t}=Ie(),{fileUrl:o}=ot(),a=vr(!1),l=vr(!1),p=vr(0),S=vr(""),ce=Cp("appConfig"),oe=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},F=k=>{e.value&&Array.isArray(e.value)?e.value.splice(k,1):e.value=[]},we=(k,c)=>{e.value&&Array.isArray(e.value[c].medias)?e.value[c].medias.splice(k,1):e.value&&(e.value[c].medias=[])},H=k=>{const c=k.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(c)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(c)?"video":"unknown"};return(k,c)=>{const v=ge,fe=Y,X=Ke,d=Pa,O=ps,te=wp("Draggable"),B=zd,A=Vl,Z=mo,K=Xl;return rn(),Wo("section",Ip,[oi("section",Vp,[Ua(A,{size:"small",segmented:e.value&&e.value.length>0},{header:jl(()=>[oi("div",Sp,fr(n.title),1)]),"header-extra":jl(()=>[n.readonly?_r("",!0):(rn(),gs(X,{key:0,quaternary:"",onClick:oe},{icon:jl(()=>[Ua(fe,{size:"18"},{default:jl(()=>[Ua(v,{icon:"carbon:folder-add"})]),_:1})]),default:jl(()=>[si(" "+fr(ma(t)("addAlbum")),1)]),_:1}))]),default:jl(()=>[(rn(!0),Wo(pc,null,uc(e.value,($,Q)=>(rn(),gs(A,{key:Q,size:"small",embedded:"",segmented:$.medias&&$.medias.length>0,class:"mb-4"},xp({header:jl(()=>[Ua(d,{modelValue:$.name,"onUpdate:modelValue":m=>$.name=m,placeholder:ma(t)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:jl(()=>[$.medias&&$.medias.length>0?(rn(),gs(B,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:jl(()=>[Ua(te,{list:$.medias,class:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4"},{default:jl(()=>[(rn(!0),Wo(pc,null,uc($.medias,(m,T)=>(rn(),Wo("div",{key:"img-"+T,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[H(m)==="image"?(rn(),gs(O,{key:0,"object-fit":"cover",src:ma(o)(m)},null,8,["src"])):(rn(),Wo("video",{key:1,muted:"",src:ma(o)(m),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{S.value=ma(o)(m),l.value=!0}},null,8,Ep)),n.readonly?_r("",!0):(rn(),gs(X,{key:2,strong:"",size:"small",type:"error",style:{position:"absolute",top:"4px",right:"4px"},onClick:y=>we(T,Q)},{icon:jl(()=>[Ua(fe,null,{default:jl(()=>[Ua(v,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):_r("",!0)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:jl(()=>[Ua(X,{secondary:"",size:"small",type:"primary",class:"mr-2",onClick:()=>{p.value=Q,a.value=!0}},{icon:jl(()=>[Ua(fe,null,{default:jl(()=>[Ua(v,{icon:"carbon:add-alt"})]),_:1})]),default:jl(()=>[si(" "+fr(ma(t)("add")),1)]),_:1},8,["onClick"]),c[3]||(c[3]=oi("div",{class:"w-2"},null,-1)),Ua(X,{secondary:"",size:"small",type:"error",onClick:m=>F(Q)},{icon:jl(()=>[Ua(fe,null,{default:jl(()=>[Ua(v,{icon:"carbon:trash-can"})]),_:1})]),default:jl(()=>[si(" "+fr(ma(t)("delete")),1)]),_:1},8,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),Ua(Z,{show:ma(a),"onUpdate:show":c[0]||(c[0]=$=>mc(a)?a.value=$:null),title:ma(t)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:ma(ce)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:c[1]||(c[1]=$=>{e.value&&Array.isArray(e.value[ma(p)].medias)?e.value[ma(p)].medias.push($):e.value&&(e.value[ma(p)].medias=[$]),a.value=!1})},null,8,["show","title","upload-config"]),Ua(K,{show:ma(l),"onUpdate:show":c[2]||(c[2]=$=>mc(l)?l.value=$:null),preset:"card",style:{width:"500px"},title:ma(t)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:jl(()=>[ma(S)?(rn(),Wo("video",{key:0,controls:"",autoplay:"",class:"w-full",src:ma(S)},null,8,Up)):_r("",!0)]),_:1},8,["show","title"])])}}}),Dp=Zn(Mp,[["__scopeId","data-v-7fe71c8e"]]),{useModel:Np,mergeModels:zp,defineComponent:Ap}=await me("vue"),{toDisplayString:fc,createElementVNode:_c,resolveComponent:Pp,createVNode:eo,withCtx:hn,unref:hs,createTextVNode:Lp,openBlock:Jo,createBlock:ri,createCommentVNode:ii,renderList:Bp,Fragment:Fp,createElementBlock:ci,isRef:Op}=await me("vue"),{defineComponent:qp,inject:Rp,ref:jp}=await me("vue"),Kp={class:"w-full"},Yp={class:"mb-2"},Gp={class:"text-base text-left"},Hp=qp({name:"GridImagesPicker"}),Qp=Ap({...Hp,props:zp({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=Np(u,"modelValue"),n=Rp("appConfig"),t=u,{t:o}=Ie(),{fileUrl:a}=ot(),l=jp(!1),p=ce=>{Array.isArray(e.value)?e.value.splice(ce,1):e.value=[]},S=async ce=>{Array.isArray(e.value)?e.value.push(...ce):e.value=[...ce],l.value=!1};return(ce,oe)=>{const F=ge,we=Y,H=Ke,k=ps,c=Pp("Draggable"),v=zd,fe=Vl,X=mo;return Jo(),ci("section",Kp,[_c("section",Yp,[eo(fe,{size:"small",segmented:e.value&&e.value.length>0},{header:hn(()=>[_c("div",Gp,fc(t.title),1)]),"header-extra":hn(()=>[t.readonly?ii("",!0):(Jo(),ri(H,{key:0,secondary:"",size:"small",type:"primary",onClick:oe[0]||(oe[0]=d=>l.value=!0)},{icon:hn(()=>[eo(we,{size:"18"},{default:hn(()=>[eo(F,{icon:"carbon:add-alt"})]),_:1})]),default:hn(()=>[Lp(" "+fc(hs(o)("add")),1)]),_:1}))]),default:hn(()=>[e.value&&e.value.length?(Jo(),ri(v,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:hn(()=>[eo(c,{list:e.value,class:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4"},{default:hn(()=>[(Jo(!0),ci(Fp,null,Bp(e.value,(d,O)=>(Jo(),ci("div",{key:"img-"+O,class:"relative h-[120px] picked-item"},[eo(k,{class:"w-full h-full","object-fit":"cover",src:hs(a)(d)},null,8,["src"]),t.readonly?ii("",!0):(Jo(),ri(H,{key:0,strong:"",size:"small",type:"error",style:{position:"absolute",top:"4px",right:"4px"},onClick:te=>p(O)},{icon:hn(()=>[eo(we,null,{default:hn(()=>[eo(F,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):ii("",!0)]),_:1},8,["segmented"])]),eo(X,{show:hs(l),"onUpdate:show":oe[1]||(oe[1]=d=>Op(l)?l.value=d:null),title:hs(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:hs(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:S},null,8,["show","title","upload-config"])])}}}),Wp=Zn(Qp,[["__scopeId","data-v-24612f53"]]);var ga=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(ga||{}),Kr=(u=>(u.INTERNAL="internal",u.USER_EDITABLE="user-editable",u))(Kr||{}),uo=(u=>(u.EDITORIAL_CONTENT="editorial-content",u.USER_DATA="user-data",u.SYSTEM_DATA="system-data",u))(uo||{}),nr=(u=>(u.USER="user",u.ADMIN="admin",u.SYSTEM="system",u))(nr||{}),na=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(na||{});const fs=()=>{const{t:u}=Ie(),{tr:e}=ot(),n=(c,v)=>v&&v.titleFieldName?ou(c.contentModelData.index[v.titleFieldName])?e(c.contentModelData.index[v.titleFieldName]):c.contentModelData.index[v.titleFieldName]:Id(c.contentModelData.index,e,e(c.title)),t=[{label:u("contentModel"),value:na.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:na.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:na.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:na.NEWS_TAG,tagType:"error"}],o=c=>t.find(v=>v.value===c)?.label,a=c=>t.find(v=>v.value===c)?.tagType||"default",l=[{label:u("editorialContent"),value:uo.EDITORIAL_CONTENT,tagType:"warning"},{label:u("userEntries"),value:uo.USER_DATA,tagType:"info"},{label:u("systemData"),value:uo.SYSTEM_DATA,tagType:"success"}],p=c=>l.find(v=>v.value===c)?.label,S=c=>l.find(v=>v.value===c)?.tagType||"default",ce=[{label:u("internalAdminSystem"),value:Kr.INTERNAL,tagType:"default"},{label:u("userEditable"),value:Kr.USER_EDITABLE,tagType:"info"}],oe=c=>ce.find(v=>v.value===c)?.label,F=c=>ce.find(v=>v.value===c)?.tagType||"default",we=[{label:u("user"),value:nr.USER,tagType:"warning"},{label:u("admin"),value:nr.ADMIN,tagType:"info"},{label:u("system"),value:nr.SYSTEM,tagType:"error"}];return{contentTypes:t,getContentTypeLabel:o,getContentTypeTagType:a,extractItemTitle:n,contentModelIntents:l,getContentModelIntentLabel:p,getContentModelIntentTagType:S,contentModelAccessScopes:ce,getContentModelAccessScopeLabel:oe,getContentModelAccessScopeTagType:F,contentModelItemCreatorTypes:we,getContentModelItemCreatorTypeLabel:c=>we.find(v=>v.value===c)?.label,getContentModelItemCreatorTypeTagType:c=>we.find(v=>v.value===c)?.tagType||"default"}};class Jp{id;contentModelId;title;contentModelData;data;isActive;createdByType;createdBy;createdAt;updatedAt;createdByUser;contentModel;relatedItems;relatedTo;constructor(e,n,t,o,a,l,p,S,ce,oe){this.id=S,this.contentModelId=p,this.title=e,this.data=l,this.contentModelData=n,this.isActive=t,this.createdByType=o,this.createdBy=a,this.createdAt=ce,this.updatedAt=oe}}const Xp=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["content-model","items"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/content-model/items",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Hd=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["content-model","items"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/content-model/items/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Zp=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["content-model","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/content-model/items/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},em=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof Jp){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("ContentModelItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(l=>a[l])}),mutationFn:async a=>{t.start();const l=Object.keys(a).filter(p=>a[p]);try{for(const p of l)await e({method:"delete",url:`/content-model/items/${p}`});return l}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},tc=()=>{const{request:u}=Ye();return Wa(async({query:e,contentModelId:n})=>{const t=await u({url:`/content-model-items/search/${e}/${n}`});return t.failure&&t.error?[]:t.result.data})},Qd=()=>{const{request:u}=Ye();return Wa(async e=>{const n=await u({url:"/content-model-items/list",method:"post",data:e});return n.failure&&n.error?[]:n.result.data})},{defineComponent:tm}=await me("vue"),{unref:f,renderList:lm,Fragment:bs,openBlock:pt,createElementBlock:bn,resolveComponent:vc,createBlock:Mt,createCommentVNode:Xo,createVNode:Et,withCtx:Nt,normalizeStyle:di,createElementVNode:ks,toDisplayString:tn,createTextVNode:ln,isRef:ho}=await me("vue"),am={key:4,class:"w-full"},nm={key:5,class:"w-full"},om={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},sm=["onClick"],rm={key:0,class:"w-full"},im={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},cm=["src"],dm={id:"video",autoplay:"",controls:"",style:{width:"100%"}},um=["src"],{defineComponent:pm,inject:mm,ref:Kl,h:Fn,watch:yc,computed:ws,onMounted:fm}=await me("vue"),{storeToRefs:_m}=await me("pinia"),vm=pm({name:"FormGenerator"}),ym=tm({...vm,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const n=u,t=e,{t:o,locale:a}=Ie(),{tr:l,pickByTheme:p,fileUrl:S,mergeArrays:ce,appPrimaryColor:oe}=ot(),{extractItemTitle:F}=fs(),{data:we}=fo(),H=mm("appConfig");let k=[];if(typeof n.items=="string")try{k=JSON.parse(n.items)}catch{k=[]}else k=pe.cloneDeep(n.items);let c={};if(n.useJson)try{c=JSON.parse(n.modelValue)}catch{c={}}const v=Kl(""),fe=Kl(Al()),X=Kl(null),d=Kl(n.useJson?c:n.modelValue),O={};k.forEach(j=>{j.key in d.value||(j.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(j.type)?d.value[j.key]=JSON.parse(j.defaultValue):j.type=="number"||j.type=="slider"?d.value[j.key]=parseFloat(j.defaultValue):j.type=="content-model-item"?d.value[j.key]=void 0:j.type=="content-model-items"?d.value[j.key]=[]:j.type=="list"?d.value[j.key]=j.defaultValue.split(",").map(re=>({value:re})):j.type=="i18n-list"?d.value[j.key]=j.defaultValue.split(",").map(re=>({value:`{ "fr": "${re}", "en": "${re}" }`})):d.value[j.key]=j.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(j.type)?d.value[j.key]="":["number","slider"].includes(j.type)?d.value[j.key]=0:["checkbox","switch"].includes(j.type)?d.value[j.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(j.type)?d.value[j.key]=[]:["range-slider"].includes(j.type)?d.value[j.key]=[0,100]:d.value[j.key]=void 0),j.required&&(O[j.key]=[{required:!0,message:o("fillRequired")}]),fe.value=Al()});const te=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],B=j=>Fn("span",{},{default:()=>l(j.label)});yc(()=>d.value,j=>{const re=n.useJson?JSON.stringify(j):j,tt=async()=>{if(k.length==0)return!0;let ve=!1;try{await X.value?.validate(Tt=>{ve=!Tt})}catch{ve=!1}return ve};t("update:modelValue",re),t("update",re,tt)},{immediate:!0,deep:!0});const{isLightTheme:A}=_m(jo()),Z=Kl(!1),K=Kl(!1),$=Kl(!1),Q=Kl(""),m=Kl(""),T=Kl(!1),y=Kl(!1),E=Kl(""),M=Kl(""),b=Kl(!1),z=j=>{window.open(j,"_blank")},se=Kl(!1),$e=Kl([]),{data:le,isPending:I}=Vd();yc(()=>le.value,j=>{const re=pe.cloneDeep(j);if(re){$e.value=[];for(let tt=0;tt<re?.length;tt++)switch(re[tt].targetType){case ga.EXTERNAL_LINK:$e.value.findIndex(ve=>ve.url===re[tt].url)===-1&&$e.value.push(re[tt]);break;case ga.PAGE_LINK:$e.value.findIndex(ve=>ve.path===re[tt].path)===-1&&$e.value.push(re[tt]);break}}},{immediate:!0,deep:!0});const C=Kl([]),Ee=Kl([]),{mutateAsync:D,isPending:P}=tc(),{mutateAsync:s,isPending:r}=Qd(),x=ws(()=>P.value||r.value),N=async(j,re)=>{if(!j.length){Ee.value=[];return}Ee.value=await D({query:j,contentModelId:re})},R=ws(()=>ce(C.value,Ee.value,"id")),J=Kl([]),L=Kl([]),{mutateAsync:G,isPending:at}=qd(),{mutateAsync:ct,isPending:xe}=Rd(),bt=ws(()=>xe.value||at.value),Ae=async j=>{if(!j.length){L.value=[];return}L.value=await ct(j)},dt=ws(()=>ce(J.value,L.value,"id")),q=su({enabled:!1}),V=ru({enabled:!1});fm(async()=>{k.find(j=>j.type==="news-categories"||j.type==="news-category")&&(q.refetch(),V.refetch());for(let j=0;j<k.length;j++)if(k[j].type==="news-articles"||k[j].type==="news-article"){const re=d.value[k[j].key],tt=await G({ids:k[j].type==="news-articles"?re:[re]});tt&&(J.value=ce(J.value,tt,"id"))}else if(k[j].type==="content-model-items"||k[j].type==="content-model-item"){const re=d.value[k[j].key],tt=await s({ids:k[j].type==="content-model-items"?re:[re]});tt&&(C.value=ce(C.value,tt,"id"))}});const w=j=>Fn("span",{},{default:()=>`${l(j.name)}`}),ae=j=>Fn("span",{},{default:()=>`${l(j.title)}`}),Vt=j=>Fn("span",{},{default:()=>`${l(j.name)}`}),_e=j=>ws(()=>Fn("span",{},{default:()=>F(j,we.value?.find(re=>re.id===j.contentModelId))})),St=({option:j})=>Fn("div",{style:{display:"flex",alignItems:"center"}},[`${l(j.title)}`]),Ct=j=>Fn("div",{style:{marginLeft:"12px",padding:"4px 0"}},[Fn("div",{},{default:()=>`${l(j.title)}`}),Fn("small",{},{default:()=>`${j.targetType==ga.EXTERNAL_LINK?j.url:j.path}`})]);return(j,re)=>{const tt=ll,ve=Pa,Tt=Od,vl=Hr,Ge=vo,kt=Qi,Rt=Ml,ha=Iu,ol=Nd,Pl=en,rt=ps,jt=ge,ne=Y,U=Ke,We=Wp,De=vc("IconPicker"),wt=Dp,al=cr,sa=vc("color-picker"),Se=Qr,Ue=Ea,ba=Va,Rl=Xl,La=mo;return pt(),bn(bs,null,[(pt(),Mt(ba,{ref_key:"formRef",ref:X,key:f(fe),model:f(d),rules:O,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:di(n.formStyle)},{default:Nt(()=>[(pt(!0),bn(bs,null,lm(f(k),(i,_s)=>(pt(),Mt(Ue,{key:_s,label:f(l)(i.label),path:i.key,"label-style":n.labelStyle,"show-require-mark":i.required,class:"w-full"},{default:Nt(()=>[i.type=="text"?(pt(),Mt(tt,{key:0,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),maxlength:i.settings?.maxLength||void 0,minlength:i.settings?.minLength||void 0,clearable:i.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):i.type=="i18n-text"?(pt(),Mt(ve,{key:1,modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):i.type=="textarea"?(pt(),Mt(tt,{key:2,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),maxlength:i.settings?.maxLength||void 0,minlength:i.settings?.minLength||void 0,clearable:i.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):i.type=="i18n-textarea"?(pt(),Mt(ve,{key:3,modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):i.type=="editor"?(pt(),bn("div",am,[Et(Tt,{modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),"toolbar-items":te,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):i.type=="i18n-editor"?(pt(),bn("div",nm,[Et(ve,{modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):i.type=="number"?(pt(),Mt(vl,{key:6,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,max:i.settings?.max||void 0,min:i.settings?.min||void 0,step:i.settings?.step||1,clearable:i.settings?.clearable||!1,placeholder:f(l)(i.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):i.type=="checkbox"?(pt(),Mt(Ge,{key:7,checked:f(d)[i.key],"onUpdate:checked":ue=>f(d)[i.key]=ue,"checked-value":i.settings?.["checked-value"]||!0,"unchecked-value":i.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):i.type=="switch"?(pt(),Mt(Rt,{key:8},{default:Nt(()=>[Et(kt,{value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,"checked-value":i.settings?.["checked-value"]||!0,"unchecked-value":i.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):i.type=="slider"?(pt(),Mt(ha,{key:9,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,min:i.settings?.min||0,max:i.settings?.max||100,step:i.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):i.type=="range-slider"?(pt(),Mt(ha,{key:10,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,min:i.settings?.min||0,max:i.settings?.max||100,step:i.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):i.type=="date"?(pt(),Mt(ol,{key:11,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM-dd",format:i.settings?.format||"dd MMMM yyyy",type:"date",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="daterange"?(pt(),Mt(ol,{key:12,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM-dd",format:i.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="datetime"?(pt(),Mt(ol,{key:13,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM-dd HH:mm:ss",format:i.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="datetimerange"?(pt(),Mt(ol,{key:14,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM-dd HH:mm:ss",format:i.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):i.type=="year"?(pt(),Mt(ol,{key:15,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy",type:"year",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="yearrange"?(pt(),Mt(ol,{key:16,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy",type:"yearrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="month"?(pt(),Mt(ol,{key:17,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM",type:"month",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="monthrange"?(pt(),Mt(ol,{key:18,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-MM",type:"monthrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="quarter"?(pt(),Mt(ol,{key:19,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-Q",type:"quarter",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="quarterrange"?(pt(),Mt(ol,{key:20,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,"value-format":"yyyy-Q",type:"quarterrange",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):i.type=="week"?(pt(),Mt(ol,{key:21,"formatted-value":f(d)[i.key],"onUpdate:formattedValue":ue=>f(d)[i.key]=ue,type:"week",clearable:i.settings?.clearable||!0,placeholder:f(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):i.type=="single-select"||i.type=="multi-select"?(pt(),Mt(Pl,{key:22,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:(i.options||[])?.map(ue=>{if(i.type=="multi-select"&&i.settings&&f(d)[i.key]){const ra=i.settings?.max||1/0;return{...ue,disabled:f(d)[i.key].length>=ra&&!f(d)[i.key].includes(ue.value)}}return ue}),multiple:i.type=="multi-select",placeholder:f(l)(i.label),"render-label":B,"label-field":"label","value-field":"value",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="image"?(pt(),bn("div",om,[ks("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{v.value=i.key,Z.value=!0}},[f(d)[i.key]?(pt(),Mt(rt,{key:0,"object-fit":"cover","preview-disabled":"",class:"py-1",style:di("border: 1px dashed "+f(p)(f(oe),"white")),src:f(S)(f(d)[i.key]||"")},null,8,["style","src"])):(pt(),bn("div",{key:1,class:"w-full h-full flex items-center justify-center",style:di("border: 1px dashed "+f(p)(f(oe),"white"))},[Et(ne,{size:64},{default:Nt(()=>[Et(jt,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,sm),f(d)[i.key]?(pt(),Mt(U,{key:0,quaternary:"",onClick:()=>{v.value=i.key,f(d)[f(v)]=""}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("clear")),1)]),_:1},8,["onClick"])):Xo("",!0)])):i.type=="gallery"?(pt(),Mt(We,{key:24,modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,"upload-folder":"images"},null,8,["modelValue","onUpdate:modelValue"])):i.type=="news-category"||i.type=="news-categories"?(pt(),Mt(Pl,{key:25,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:(f(q).data.value||[])?.map(ue=>{if(i.type=="news-categories"&&i.settings&&f(d)[i.key]){const ra=i.settings?.max||1/0;return{...ue,disabled:f(d)[i.key].length>=ra&&!f(d)[i.key].includes(ue.id)}}return ue}),multiple:i.type=="news-categories",placeholder:f(l)(i.label),"render-label":w,"label-field":"name","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="news-tag"||i.type=="news-tags"?(pt(),Mt(Pl,{key:26,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:(f(V).data.value||[])?.map(ue=>{if(i.type=="news-tags"&&i.settings&&f(d)[i.key]){const ra=i.settings?.max||1/0;return{...ue,disabled:f(d)[i.key].length>=ra&&!f(d)[i.key].includes(ue.id)}}return ue}),multiple:i.type=="news-tags",placeholder:f(l)(i.label),"render-label":Vt,"label-field":"name","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):i.type=="news-article"||i.type=="news-articles"?(pt(),Mt(Pl,{key:27,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:(f(dt)||[])?.map(ue=>{if(i.type=="news-articles"&&i.settings&&f(d)[i.key]){const ra=i.settings?.max||1/0;return{...ue,disabled:f(d)[i.key].length>=ra&&!f(d)[i.key].includes(ue.id)}}return ue}),multiple:i.type=="news-articles",placeholder:f(l)(i.label),"render-label":ae,loading:f(bt),"value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:Ae},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):i.type=="icon"||i.type=="icons"?(pt(),Mt(De,{key:28,modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),multiple:i.type=="icons","icons-list-placeholder":f(o)("enterIconNameInSearchBar"),"search-placeholder":f(o)("search"),"empty-text":f(o)("noIconsFound"),"icon-library":i.settings?.library||"all",clearable:i.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):i.type=="albums"?(pt(),Mt(wt,{key:29,modelValue:f(d)[i.key],"onUpdate:modelValue":ue=>f(d)[i.key]=ue,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):i.type=="audio"?(pt(),Mt(al,{key:30},{default:Nt(()=>[Et(U,{type:"primary",secondary:"",onClick:()=>{v.value=i.key,T.value=!0}},{default:Nt(()=>[ln(tn(f(o)("select")),1)]),_:1},8,["onClick"]),Et(tt,{value:f(d)[i.key]?f(ds)(f(d)[i.key]):"",placeholder:f(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),f(d)[i.key]?(pt(),bn(bs,{key:0},[Et(U,{type:"primary",ghost:"",onClick:()=>{E.value=f(l)(i.label),M.value=f(S)(f(d)[i.key]),y.value=!0}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:play"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("play")),1)]),_:1},8,["onClick"]),Et(U,{type:"primary",ghost:"",onClick:()=>{v.value=i.key,f(d)[f(v)]=""}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="video"?(pt(),Mt(al,{key:31},{default:Nt(()=>[Et(U,{type:"primary",secondary:"",onClick:()=>{v.value=i.key,K.value=!0}},{default:Nt(()=>[ln(tn(f(o)("select")),1)]),_:1},8,["onClick"]),Et(tt,{value:f(d)[i.key]?f(ds)(f(d)[i.key]):"",placeholder:f(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),f(d)[i.key]?(pt(),bn(bs,{key:0},[Et(U,{type:"primary",ghost:"",onClick:()=>{Q.value=f(l)(i.label),m.value=f(S)(f(d)[i.key]),$.value=!0}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:play"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("play")),1)]),_:1},8,["onClick"]),Et(U,{type:"primary",ghost:"",onClick:()=>{v.value=i.key,f(d)[f(v)]=""}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="document"?(pt(),Mt(al,{key:32},{default:Nt(()=>[Et(U,{type:"primary",secondary:"",onClick:()=>{v.value=i.key,b.value=!0}},{default:Nt(()=>[ln(tn(f(o)("select")),1)]),_:1},8,["onClick"]),Et(tt,{value:f(d)[i.key]?f(ds)(f(d)[i.key]):"",placeholder:f(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),f(d)[i.key]?(pt(),bn(bs,{key:0},[Et(U,{type:"primary",ghost:"",onClick:ue=>z(f(S)(f(d)[i.key]))},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"mdi:open-in-new"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("open")),1)]),_:1},8,["onClick"]),Et(U,{type:"primary",ghost:"",onClick:()=>{v.value=i.key,f(d)[f(v)]=""}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("clear")),1)]),_:1},8,["onClick"])],64)):Xo("",!0)]),_:2},1024)):i.type=="file"?(pt(),Mt(al,{key:33},{default:Nt(()=>[Et(U,{type:"primary",secondary:"",onClick:()=>{v.value=i.key,se.value=!0}},{default:Nt(()=>[ln(tn(f(o)("select")),1)]),_:1},8,["onClick"]),Et(tt,{value:f(d)[i.key]?f(ds)(f(d)[i.key]):"",placeholder:f(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),f(d)[i.key]?(pt(),Mt(U,{key:0,type:"primary",ghost:"",onClick:()=>{v.value=i.key,f(d)[f(v)]=""}},{icon:Nt(()=>[Et(ne,null,{default:Nt(()=>[Et(jt,{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[ln(" "+tn(f(o)("clear")),1)]),_:1},8,["onClick"])):Xo("",!0)]),_:2},1024)):i.type=="color"||i.type=="gradient"?(pt(),Mt(sa,{key:34,"pure-color":f(d)[i.key],"onUpdate:pureColor":ue=>f(d)[i.key]=ue,"default-pure-color":"#00000000","picker-type":"chrome","use-type":i.type=="color"?"pure":"gradient",format:i.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:f(A)?"white":"black",lang:f(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):i.type=="content-model-item"||i.type=="content-model-items"?(pt(),Mt(Pl,{key:35,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:(f(R)||[])?.map(ue=>{if(i.type=="content-model-items"&&i.settings&&f(d)[i.key]){const ra=i.settings?.max||1/0;return{...ue,disabled:f(d)[i.key].length>=ra&&!f(d)[i.key].includes(ue.id)}}return ue}),multiple:i.type=="content-model-items",placeholder:f(l)(i.label),"render-label":ue=>_e(ue).value,loading:f(x),"value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,"max-tag-count":i.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:ue=>N(ue,i.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):i.type=="menu-item-link"?(pt(),Mt(Pl,{key:36,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,options:f($e)||[],placeholder:f(l)(i.label),"render-label":Ct,"render-tag":St,loading:f(I),"label-field":"title","value-field":"id",filterable:"",clearable:i.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):i.type=="list"?(pt(),Mt(Se,{key:37,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),max:i.settings?.max||void 0,min:i.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:Nt(({value:ue})=>[i.settings?.type=="editor"?(pt(),bn("div",rm,[Et(Tt,{modelValue:ue.value,"onUpdate:modelValue":ra=>ue.value=ra,"toolbar-items":te,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(pt(),Mt(tt,{key:1,value:ue.value,"onUpdate:value":ra=>ue.value=ra,type:i.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):i.type=="i18n-list"?(pt(),Mt(Se,{key:38,value:f(d)[i.key],"onUpdate:value":ue=>f(d)[i.key]=ue,placeholder:f(l)(i.label),max:i.settings?.max||void 0,min:i.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:Nt(({value:ue})=>[Et(ve,{modelValue:ue.value,"onUpdate:modelValue":ra=>ue.value=ra,type:i.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):Xo("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),Et(Rl,{show:f(y),"onUpdate:show":re[0]||(re[0]=i=>ho(y)?y.value=i:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:f(E)},{default:Nt(()=>[ks("audio",im,[ks("source",{src:f(M)},null,8,cm)])]),_:1},8,["show","title"]),Et(Rl,{show:f($),"onUpdate:show":re[1]||(re[1]=i=>ho($)?$.value=i:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:f(Q)},{default:Nt(()=>[ks("video",dm,[ks("source",{src:f(m)},null,8,um)])]),_:1},8,["show","title"]),Et(La,{show:f(Z),"onUpdate:show":re[2]||(re[2]=i=>ho(Z)?Z.value=i:null),title:f(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:f(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:re[3]||(re[3]=i=>{f(d)[f(v)]=i,Z.value=!1})},null,8,["show","title","upload-config"]),Et(La,{show:f(K),"onUpdate:show":re[4]||(re[4]=i=>ho(K)?K.value=i:null),title:f(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:f(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:re[5]||(re[5]=i=>{f(d)[f(v)]=i,K.value=!1})},null,8,["show","title","upload-config"]),Et(La,{show:f(T),"onUpdate:show":re[6]||(re[6]=i=>ho(T)?T.value=i:null),title:f(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:f(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:re[7]||(re[7]=i=>{f(d)[f(v)]=i,T.value=!1})},null,8,["show","title","upload-config"]),Et(La,{show:f(b),"onUpdate:show":re[8]||(re[8]=i=>ho(b)?b.value=i:null),title:f(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:f(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:re[9]||(re[9]=i=>{f(d)[f(v)]=i,b.value=!1})},null,8,["show","title","upload-config"]),Et(La,{show:f(se),"onUpdate:show":re[10]||(re[10]=i=>ho(se)?se.value=i:null),title:f(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:f(H)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:re[11]||(re[11]=i=>{f(d)[f(v)]=i,se.value=!1})},null,8,["show","title","upload-config"])],64)}}}),or=Zn(ym,[["__scopeId","data-v-9c1a3ffe"]]),{unref:ui}=await me("vue"),{defineComponent:gm}=await me("vue"),{unref:ft,resolveComponent:hm,createVNode:il,withCtx:Ft,openBlock:yl,createBlock:fa,createCommentVNode:yr,toDisplayString:kn,createTextVNode:On,renderList:gr,Fragment:bo,createElementBlock:ko,normalizeClass:bm,isRef:km,createSlots:wm,createElementVNode:xs,vShow:pi,withDirectives:mi,Transition:fi}=await me("vue"),xm={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},$m={class:"flex items-center justify-start gap-2"},{storeToRefs:Cm}=await me("pinia"),{ref:hr,inject:wn,watch:_i,reactive:qn,computed:gc}=await me("vue"),Im=gm({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(u){const e=u,n=oa(),{sectionsDataBackup:t,sectionsSettingsBackup:o}=Cm(Sd()),{t:a}=Ie(),{tr:l,editKeysToCamelCase:p}=ot(),S=hr("index"),ce=hr(!1),oe=wn("formValueValidate1"),F=wn("formValueValidate2"),we=wn("formValueValidate3"),H=wn("initialSettings"),k=wn("initialData"),c=wn("settings"),v=wn("data"),fe=wn("refreshKey"),X=wn("isDataJustSaved"),d=wn("isSettingsJustSaved"),{data:O,isPending:te}=iu({slug:e.slug,linkId:e.linkId,pageId:e.pageId});_i(()=>O?.value,Q=>{const m=pe.cloneDeep(Q),T=m?.pages?.length?m?.pages[0].pivot:null;if(m&&v&&T&&(pe.isObject(T?.data)&&ji(T?.data)?v.value=qn(T?.data):v.value=qn({}),pe.forIn(p(m.dataStructure),(y,E)=>{(!v.value[E]||Array.isArray(v.value[E])&&v.value[E].length==0)&&(E==="index"?v.value[E]=qn({}):v.value[E]=qn([]))})),k&&v&&setTimeout(()=>{k.value=pe.cloneDeep(v.value)},500),m&&c&&(pe.isObject(T?.settings)&&ji(T?.settings)?c.value=qn(T?.settings):c.value=qn({}),pe.forIn(p(m.settingsStructure),(y,E)=>{c.value[E]||(c.value[E]=qn({}))})),H&&c&&setTimeout(()=>{H.value=pe.cloneDeep(c.value)},500),m)if(p(m.dataStructure)){const y=Object.keys(p(m.dataStructure));y.includes("index")?S.value="index":S.value=y.length>0?y[0]:"_settings"}else S.value="_settings";if(fe&&(fe.value=Al()),!ce.value&&(t.value[`${e.slug}__${e.linkId}__${e.pageId}`]||o.value[`${e.slug}__${e.linkId}__${e.pageId}`])){ce.value=!0;const y=()=>{t.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,o.value[`${e.slug}__${e.linkId}__${e.pageId}`]=null,fe&&(fe.value=Al())};n.warning({title:a("backup"),content:a("sectionDataOrSettingsAvailable"),positiveText:a("restore"),negativeText:a("drop"),onPositiveClick:async()=>{v?.value&&t.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(v.value=qn(pe.cloneDeep(t.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),c?.value&&o.value[`${e.slug}__${e.linkId}__${e.pageId}`]&&(c.value=qn(pe.cloneDeep(o.value[`${e.slug}__${e.linkId}__${e.pageId}`]))),y()},onNegativeClick:async()=>{y()}})}},{immediate:!0,deep:!0});const B=hr(!1);setTimeout(()=>{B.value=!0},500);const A=gc(()=>!pe.isEqual(v?.value,k?.value)),Z=gc(()=>!pe.isEqual(c?.value,H?.value));_i(()=>v?.value,Q=>{A.value&&B.value&&!X?.value&&(t.value={...t.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:pe.cloneDeep(Q)}),X&&(X.value=!1)},{deep:!0}),_i(()=>c?.value,Q=>{Z.value&&B.value&&!d?.value&&(o.value={...o.value??{},[`${e.slug}__${e.linkId}__${e.pageId}`]:pe.cloneDeep(Q)}),d&&(d.value=!1)},{deep:!0});const K=hr(!1),$=()=>{K.value=!0,setTimeout(()=>{K.value=!1},3e3)};return(Q,m)=>{const T=_o,y=Ml,E=ge,M=Y,b=Wi,z=Ke,se=Wr,$e=Ji,le=Vl,I=Aa,C=dr,Ee=_n,D=fn,P=hm("Draggable"),s=Ja;return ft(te)?(yl(),fa(y,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:Ft(()=>[il(T)]),_:1})):(yl(),ko(bo,{key:1},[xs("div",xm,[il(se,{value:ft(S),"onUpdate:value":m[1]||(m[1]=r=>km(S)?S.value=r:null),type:"card",size:"small"},wm({default:Ft(()=>[ft(p)(ft(O)?.dataStructure)?(yl(),ko(bo,{key:0},[ft(p)(ft(O)?.dataStructure).index?(yl(),fa(b,{key:0,name:"index"},{default:Ft(()=>[il(M,{class:"mr-1"},{default:Ft(()=>[il(E,{icon:"carbon:types"})]),_:1}),On(" "+kn(ft(a)("general")),1)]),_:1})):yr("",!0),(yl(!0),ko(bo,null,gr(ft(Zt)(ft(p)(ft(O)?.dataStructure),["index"]),(r,x)=>(yl(),fa(b,{key:x,name:String(x)},{default:Ft(()=>[On(kn(ft(l)(r.title)),1)]),_:2},1032,["name"]))),128))],64)):yr("",!0),il(b,{name:"_settings"},{default:Ft(()=>[il(M,{class:"mr-1"},{default:Ft(()=>[il(E,{icon:"carbon:settings"})]),_:1}),On(" "+kn(ft(a)("settings")),1)]),_:1})]),_:2},[ft(S)!=="index"&&ft(S)!=="_settings"?{name:"suffix",fn:Ft(()=>[il(z,{quaternary:"",size:"small",class:bm({"btn-blink":ft(K)}),onClick:m[0]||(m[0]=()=>{ft(v)[ft(S)].push({}),fe.value=("uuidv4"in Q?Q.uuidv4:ui(Al))()})},{icon:Ft(()=>[il(M,null,{default:Ft(()=>[il(E,{icon:"carbon:add-alt"})]),_:1})]),default:Ft(()=>[On(" "+kn(ft(a)("add")),1)]),_:1},8,["class"])]),key:"0"}:void 0]),1032,["value"])]),il(s,{appear:"",name:"slide-fade"},{default:Ft(()=>[xs("section",null,[(yl(!0),ko(bo,null,gr(ft(p)(ft(O)?.dataStructure)||{},(r,x)=>(yl(),ko(bo,{key:x},[String(x)==="index"?(yl(),fa(fi,{key:0,name:"slide-fade",mode:"out-in"},{default:Ft(()=>[mi(il(le,{size:"small",class:"mb-2",embedded:""},{default:Ft(()=>[ft(p)(ft(O)?.dataStructure).index?.length?(yl(),fa(or,{key:`${ft(fe)}-${x}-form-1`,modelValue:ft(v)[x],"onUpdate:modelValue":N=>ft(v)[x]=N,items:r,onUpdate:(N,R)=>{oe.value=R}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(yl(),fa($e,{key:1,type:"warning","show-icon":""},{default:Ft(()=>[On(kn(ft(a)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[pi,ft(S)==="index"]])]),_:2},1024)):(yl(),fa(fi,{key:1,name:"slide-fade",mode:"out-in"},{default:Ft(()=>[mi(il(le,{size:"small",class:"mb-2",embedded:""},{default:Ft(()=>[ft(v)[x]&&Array.isArray(ft(v)[x])&&ft(v)[x].length?(yl(),fa(P,{key:0,list:ft(v)[x],onChange:m[2]||(m[2]=N=>{fe.value=("uuidv4"in Q?Q.uuidv4:ui(Al))()}),class:"w-full"},{default:Ft(()=>[(yl(!0),ko(bo,null,gr(ft(v)[x],(N,R)=>(yl(),fa(le,{key:R,size:"small",class:"mb-2"},{default:Ft(()=>[il(D,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Ft(({collapsed:J})=>[il(y,{align:"center",justify:"space-between"},{default:Ft(()=>[il(z,{secondary:"",type:"error",size:"small",onClick:()=>{ft(v)[x].splice(R,1),fe.value=("uuidv4"in Q?Q.uuidv4:ui(Al))()}},{icon:Ft(()=>[il(M,null,{default:Ft(()=>[il(E,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),il(M,null,{default:Ft(()=>[J?(yl(),fa(E,{key:0,icon:"fa-solid:chevron-left"})):(yl(),fa(E,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ft(()=>[...m[4]||(m[4]=[xs("span",null,null,-1)])]),default:Ft(()=>[il(Ee,{name:"1"},{header:Ft(({collapsed:J})=>[xs("div",$m,[il(M,{size:"18",class:"cursor-move mr-2"},{default:Ft(()=>[il(E,{icon:"fa-solid:grip-lines"})]),_:1}),il(I,{size:"medium",type:"info"},{default:Ft(()=>[On(kn(String(R+1)),1)]),_:2},1024),J?(yl(),fa(C,{key:0,"line-clamp":1,"expand-trigger":"click",class:"text-base max-w-[80%]"},{default:Ft(()=>[On(kn(ft(Id)(ft(v)[x][R],ft(l),"")),1)]),_:2},1024)):yr("",!0)])]),default:Ft(()=>[(yl(),fa(or,{key:`${ft(fe)}-${x}-${R}-form-2`,modelValue:ft(v)[x][R],"onUpdate:modelValue":J=>ft(v)[x][R]=J,items:r.items,onUpdate:(J,L)=>{F.value=L}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list"])):(yl(),fa($e,{key:1,type:"info",class:"cursor-pointer","show-icon":"",onClick:m[3]||(m[3]=N=>$())},{default:Ft(()=>[On(kn(ft(a)("emptyCollectionInfoMessage")),1)]),_:1}))]),_:2},1536),[[pi,ft(S)===String(x)]])]),_:2},1024))],64))),128)),il(fi,{name:"slide-fade",mode:"out-in"},{default:Ft(()=>[mi(il(le,{size:"small",class:"mb-2",embedded:""},{default:Ft(()=>[ft(O)?.settingsStructure?(yl(!0),ko(bo,{key:0},gr(ft(p)(ft(O)?.settingsStructure),(r,x)=>(yl(),fa(le,{key:x,size:"small",class:"mb-2"},{header:Ft(()=>[xs("span",null,kn(ft(l)(r.title)),1)]),default:Ft(()=>[ft(c)[x]?(yl(),fa(or,{key:`${ft(fe)}-${x}-form-3`,modelValue:ft(c)[x],"onUpdate:modelValue":N=>ft(c)[x]=N,items:r.items,onUpdate:(N,R)=>{we.value=R}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):yr("",!0)]),_:2},1024))),128)):(yl(),fa($e,{key:1,type:"warning","show-icon":""},{default:Ft(()=>[On(kn(ft(a)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[pi,ft(S)==="_settings"]])]),_:1})])]),_:1})],64))}}}),Vm=Zn(Im,[["__scopeId","data-v-27874ca2"]]),Sm=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["pages"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/pages",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Wd=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["pages"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/pages/${l.slug}`,data:Zt(l,["id","slug","hideSuccessMessage"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:(l,p)=>{p.hideSuccessMessage||o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Em=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["pages"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:a})=>{o.start();const l=await e({method:"delete",url:`/pages/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Um=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["sections"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/sections",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Jd=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["sections"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/sections/${l.slug}`,data:Zt(l,["id","slug"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Tm=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=ec(),t=Ze(),o=Qe();return Wa(async a=>{const l=await u({url:`/sections/${a.slug}/data-source-page`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},Mm=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=ec(),t=Ze(),o=Qe();return Wa(async a=>{const l=await u({url:`/sections/${a.slug}/duplicate`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},Dm=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=ec(),t=Ze(),o=Qe();return Wa(async a=>{const l=await u({url:`/sections/${a.slug}/copy-data`,method:"put",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,l)=>{o.error(e("unableToUpdateSettings"))}})},{defineComponent:Nm}=await me("vue"),{unref:ke,resolveComponent:zm,createVNode:Ve,withCtx:ze,toDisplayString:Dl,createTextVNode:ka,normalizeClass:wo,openBlock:gl,createBlock:an,createCommentVNode:br,vShow:Am,withDirectives:Pm,createElementVNode:Yl,normalizeStyle:Lm,renderList:kr,Fragment:$s,createElementBlock:nn,withModifiers:hc,isRef:Zo}=await me("vue"),Bm={class:"flex items-center justify-between ml-1 mr-2.5"},Fm={key:0},Om={key:1},qm={key:0},Rm={class:"flex items-center"},jm={class:"text-base"},Km={class:"absolute top-[-10px] right-[-10px] z-[10]"},Ym={class:"flex items-center justify-center cursor-pointer gap-2"},Gm={key:1},Hm={class:"mt-4"},Qm={key:2,class:"mt-2 text-xs"},Wm={class:"mb-8 mt-2"},Jm={class:"flex items-center justify-between"},Xm={class:"text-base"},Zm={class:"mb-8 mt-2"},ef={class:"flex items-center justify-between"},tf={class:"text-base"},lf={class:"my-8"},{ref:cl,watch:af,computed:xo,onMounted:nf,provide:xn}=await me("vue"),{storeToRefs:of}=await me("pinia"),sf=Nm({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const n=oa(),{t}=Ie(),o=u,a=e,l=cl(Al()),p=cl({}),S=cl({}),ce=cl({}),oe=cl({}),F=cl(),we=cl(),H=cl(),k=cl([]),c=cl([]),v=cl({}),fe=cl({}),X=cl(!1),d=cl(!1),{tr:O,pickByTheme:te,editKeysToCamelCase:B}=ot(),{sectionsDataBackup:A,sectionsSettingsBackup:Z}=of(Sd()),{data:K}=Yi(),{data:$,isPending:Q}=cu(o.slug),{mutate:m,isPending:T}=Wd(),{mutate:y,isPending:E}=Em(),{mutate:M,isPending:b}=Tm(),{mutate:z,isPending:se}=Jd(),{mutate:$e,isPending:le}=Mm(),{mutate:I,isPending:C}=Dm();af(()=>$.value,ne=>{const U=pe.cloneDeep(ne);if(U&&Array.isArray(U?.sections)){const We=U.sections;if(Array.isArray(U?.sectionsOrder)){k.value=[];for(const De of U.sectionsOrder)if(De){const wt=We.find(al=>`${al.slug}__${al.pivot?.linkId}`===De);wt&&k.value.push(wt)}for(const De of We)k.value.map(wt=>`${wt.slug}__${wt.pivot?.linkId}`).includes(`${De.slug}__${De.pivot?.linkId}`)||k.value.push(De)}else k.value=pe.cloneDeep(We);if(Array.isArray(U.sectionsDisabled))for(const De of U.sections)De&&(v.value[`${De.slug}__${De.pivot?.linkId}`]=!U.sectionsDisabled.includes(`${De.slug}__${De.pivot?.linkId}`));else for(const De of U.sections)De&&(v.value[`${De.slug}__${De.pivot?.linkId}`]=!0)}fe.value=pe.cloneDeep(v.value),c.value=pe.cloneDeep(k.value),l.value=Al()},{immediate:!0,deep:!0});const Ee=xo(()=>pe.isEqual(p.value,ce.value)&&pe.isEqual(S.value,oe.value)&&pe.isEqual(k.value,c.value)&&pe.isEqual(v.value,fe.value)),D=async()=>{const ne=F.value&&await F.value(),U=we.value&&await we.value(),We=H.value&&await H.value(),De=async()=>{kt.value&&(z({slug:kt.value.slug,dataSourceLinkId:kt.value.pivot?.dataSourceLinkId,dataSourcePageId:kt.value.pivot?.dataSourcePageId,settings:S.value,data:p.value}),A.value[`${kt.value.slug}__${kt.value.pivot?.dataSourceLinkId}__${kt.value.pivot?.dataSourcePageId}`]=null,Z.value[`${kt.value.slug}__${kt.value.pivot?.dataSourceLinkId}__${kt.value.pivot?.dataSourcePageId}`]=null),m({slug:o.slug,sectionsOrder:k.value.map(wt=>`${wt.slug}__${wt.pivot?.linkId}`),sectionsDisabled:Object.keys(v.value).filter(wt=>!v.value[wt]),hideSuccessMessage:!!kt.value})};!kt.value||(!F.value||ne)&&(!we.value||U)&&(!H.value||We)?(await De(),X.value=!0,d.value=!0):n.warning({title:t("confirm"),content:t("mandatoryFieldsNotFilledInConfirmation"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{await De(),X.value=!0,d.value=!0}})},P=ne=>{const De=k.value.filter(wt=>wt.id===ne.id).map(wt=>wt.pivot?.createdAt||wt.pivot?.updatedAt||"").sort((wt,al)=>new Date(wt).getTime()-new Date(al).getTime()).indexOf(ne.pivot?.createdAt||ne.pivot?.updatedAt||"");return ne.pivot?.linkId=="default"?O(ne.title):O(ne.title)+" ("+(De+1)+")"},s=async ne=>{n.warning({title:t("confirm"),content:t("confirmDeletePage"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:async()=>{ne.id&&y({id:ne.id,slug:ne.slug},{onSuccess:()=>{a("delete",$.value)}})}})},r=cl([]),x=cl(!1),N=cl(""),R=()=>{r.value=[],N.value="",k.value.forEach(ne=>{ne.id&&r.value.push(ne.id)}),x.value=!0},J=ne=>{ne.id&&(r.value.includes(ne.id)?r.value=r.value.filter(U=>U!==ne.id):r.value.push(ne.id))},L=ne=>xo({get:()=>ne.id?r.value.includes(ne.id):!1,set:U=>{ne.id&&(U?r.value=r.value.filter(We=>We!==ne.id):r.value.includes(ne.id)||r.value.push(ne.id))}}),G=async()=>{m({slug:o.slug,sectionsIds:r.value})},at=cl(0),ct=cl([]),xe=cl(!1),bt=ne=>{at.value=ne,ct.value=[],N.value="",xe.value=!0},Ae=ne=>{ne.id&&(ct.value.includes(ne.id)?ct.value=ct.value.filter(U=>U!==ne.id):ct.value.push(ne.id))},dt=ne=>xo({get:()=>ne.id?ct.value.includes(ne.id):!1,set:U=>{ne.id&&(U?ct.value=ct.value.filter(We=>We!==ne.id):ct.value.includes(ne.id)||ct.value.push(ne.id))}}),q=async()=>{if(!ct.value.length)return!1;const ne=k.value.map(De=>`${De.slug}__${De.pivot?.linkId}`),U=ct.value.map(De=>`${K.value?.find(al=>al.id===De)?.slug}__default`),We=[...ne.slice(0,at.value),...U,...ne.slice(at.value)];m({slug:o.slug,sectionsIds:[...k.value.map(De=>De.id),...ct.value],sectionsOrder:We})},V=xo(()=>(K.value||[]).filter(ne=>!k.value.find(U=>U.id===ne.id))),w=ne=>ne.title.toLowerCase().includes(N.value.toLowerCase())||ne.slug.toLowerCase().includes(N.value.toLowerCase()),ae=xo(()=>N.value?K.value?.filter(w):K.value),Vt=xo(()=>N.value?V.value?.filter(w):V.value),_e=(ne,U,We=!1)=>ne.map(De=>{const al=ne.filter(Rl=>Rl.id===De.id).map(Rl=>Rl.pivot?.createdAt||Rl.pivot?.updatedAt||"").sort((Rl,La)=>new Date(Rl).getTime()-new Date(La).getTime()),sa=al.indexOf(De.pivot?.createdAt||De.pivot?.updatedAt||""),Se=$.value?.id==De.id?t("currentPage"):O(De.title),Ue=al.length>1?" - "+O(U?.title):"",ba=De.pivot?.linkId!="default"?" ("+(sa+1)+")":"";return{label:Se+Ue+ba,value:De.id+"__"+De.pivot?.linkId,disabled:We?$.value?.id==De.id&&U?.id==De.pivot?.sectionId&&U?.pivot?.dataSourceLinkId==De.pivot?.linkId:!1}}),St=async(ne,U)=>{const We=U?.split("__")||[],De=We.length?We[0]:null,wt=We.length>1?We[1]:null;Ee.value?M({slug:ne.slug,data:{pageId:$.value?.id,linkId:ne.pivot?.linkId,sourcePageId:De,sourceLinkId:wt}}):n.warning({title:t("confirm"),content:t("confirmUpdateDataSourcePage"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:()=>M({slug:ne.slug,data:{pageId:$.value?.id,linkId:ne.pivot?.linkId,sourcePageId:De,sourceLinkId:wt}})})},Ct=ne=>{n.warning({title:t("confirm"),content:t("confirmRemoveSection"),positiveText:t("remove"),negativeText:t("cancel"),onPositiveClick:()=>m({slug:o.slug,removedSectionsIds:[{id:ne.id,linkId:ne.pivot?.linkId}]})})},j=ne=>{n.warning({title:t("confirm"),content:t("confirmDuplicateSection"),positiveText:t("duplicate"),negativeText:t("cancel"),onPositiveClick:()=>$e({slug:ne.slug,data:{pageId:$.value?.id,linkId:ne.pivot?.linkId}})})},re=ne=>{n.warning({title:t("confirm"),content:t("confirmFillInFakeData"),positiveText:t("generate"),negativeText:t("cancel"),onPositiveClick:()=>{const U={};pe.forIn(B(ne?.dataStructure),(We,De)=>{if(De==="index"){U[De]={};for(const wt of We)U.index[wt.key]=dc(wt.type)}else{U[De]=[];for(let wt=0;wt<3;wt++){const al={};for(const sa of We.items)al[sa.key]=dc(sa.type);U[De].push(al)}}}),z({slug:ne.slug,dataSourceLinkId:ne.pivot?.dataSourceLinkId,dataSourcePageId:ne.pivot?.dataSourcePageId,data:U})}})},tt=cl(!1),ve=cl(null),Tt=cl(null),vl=ne=>{ve.value=ne,Tt.value=null,tt.value=!0},Ge=async()=>{if(!Tt.value)return!1;const ne=Tt.value.split("__")||[],U=ne.length?ne[0]:null,We=ne.length>1?ne[1]:null;I({slug:ve.value?.slug,data:{fromPageId:U,fromLinkId:We,toPageId:$.value?.id,toLinkId:ve.value?.pivot?.linkId}})},kt=cl(null),Rt=ne=>{F.value=void 0,we.value=void 0,H.value=void 0,kt.value=ne},ha=()=>{kt.value&&(kt.value=null)},{getSettingValue:ol}=du(),Pl=()=>{const ne=`${uu(pu())}/${(ol("basePath")||"creopse")+Ed.VISUAL_EDITOR.PATH}?page=${$.value?.slug}`;mu(ne,[],{target:"_blank",method:"GET"})},rt=xo(()=>T.value||E.value||se.value||b.value||le.value),jt=cl(!1);return nf(()=>{setTimeout(()=>{jt.value=!0},300)}),xn("refreshKey",l),xn("isDataJustSaved",X),xn("isSettingsJustSaved",d),xn("formValueValidate1",F),xn("formValueValidate2",we),xn("formValueValidate3",H),xn("initialSettings",oe),xn("initialData",ce),xn("settings",S),xn("data",p),(ne,U)=>{const We=ge,De=Y,wt=Ke,al=Xa,sa=Ml,Se=Qa,Ue=Su,ba=Ja,Rl=Vu,La=Vl,i=Ad,_s=vo,ue=Aa,ra=en,tu=_n,lu=fn,au=zm("Draggable"),Jr=Za,lc=ll,ac=zn,Xr=Xl;return gl(),nn($s,null,[Ve(Se,{to:"#alt-action"},{default:ze(()=>[Ve(sa,{align:"center"},{default:ze(()=>[Ve(wt,{secondary:"",type:"error",disabled:ke(rt),onClick:U[0]||(U[0]=ut=>ke($)?s(ke($)):null)},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:trash-can"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("delete")),1)]),_:1},8,["disabled"]),Ve(wt,{secondary:"",type:"info",disabled:ke(rt),onClick:U[1]||(U[1]=ut=>ke($)?u.openFormModal(ke($)):null)},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:edit"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("editPage")),1)]),_:1},8,["disabled"]),Ve(al,{vertical:"",class:wo(ke(te)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ve(wt,{secondary:"",type:"primary",loading:ke(rt),disabled:ke(Ee),onClick:U[2]||(U[2]=ut=>D())},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:save"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Yl("section",{class:wo(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",ke(jt)?"opacity-100":"opacity-0"]),style:Lm({visibility:ke(jt)?"visible":"hidden"})},[Ve(La,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:ze(()=>[Yl("div",Bm,[Ve(Rl,null,{default:ze(()=>[Ve(Ue,{onClick:U[3]||(U[3]=ut=>ha())},{default:ze(()=>[Ve(De,{class:"mr-1"},{default:ze(()=>[Ve(We,{icon:"carbon:document"})]),_:1}),ka(" "+Dl(ke(O)(ke($)?.title)),1)]),_:1}),Ve(ba,{appear:"",name:"slide-fade"},{default:ze(()=>[ke(kt)?(gl(),an(Ue,{key:0},{default:ze(()=>[ka(Dl(P(ke(kt))),1)]),_:1})):br("",!0)]),_:1})]),_:1}),Ve(sa,null,{default:ze(()=>[Pm(Ve(wt,{onClick:U[4]||(U[4]=ut=>Pl()),size:"small",secondary:"",type:"success"},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:view"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("openVisualEditor")),1)]),_:1},512),[[Am,!1]]),ke(kt)?(gl(),an(wt,{key:0,onClick:U[5]||(U[5]=ut=>ha()),size:"small",secondary:"",type:"warning",title:ke(t)("exit")},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):br("",!0)]),_:1})])]),_:1})],6),Yl("div",{class:wo(`${ke(kt)?"h-[90px]":"h-[50px]"}`)},null,2),ke(kt)?(gl(),an(Vm,{key:0,slug:ke(kt)?.slug,"link-id":ke(kt)?.pivot?.dataSourceLinkId,"page-id":ke(kt)?.pivot?.dataSourcePageId},null,8,["slug","link-id","page-id"])):(gl(),an(ba,{key:1,appear:"",name:"slide-fade"},{default:ze(()=>[Yl("section",null,[ke(Q)?(gl(),nn("section",Fm,[(gl(),nn($s,null,kr(7,ut=>Ve(i,{key:ut,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(gl(),nn("section",Om,[ke($)&&Array.isArray(ke($).sections)&&ke($).sections.length?(gl(),nn("section",qm,[Ve(au,{list:ke(k)},{default:ze(()=>[(gl(!0),nn($s,null,kr(ke(k),(ut,An)=>(gl(),nn("section",{key:ut.id},[Ve(La,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:ze(()=>[Ve(lu,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":ze(({collapsed:vn})=>[Ve(sa,{align:"center",justify:"space-between"},{default:ze(()=>[Ve(wt,{secondary:"",type:"primary",size:"small",onClick:hc(kb=>Rt(ut),["stop"])},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:archive"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("dataAndSettings")),1)]),_:1},8,["onClick"]),Ve(De,null,{default:ze(()=>[vn?(gl(),an(We,{key:0,icon:"fa-solid:chevron-left"})):(gl(),an(We,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:ze(()=>[...U[18]||(U[18]=[Yl("span",null,null,-1)])]),default:ze(()=>[Ve(tu,{name:"1"},{header:ze(()=>[Yl("div",Rm,[Ve(De,{size:"21",class:"cursor-move mr-4"},{default:ze(()=>[Ve(We,{icon:"fa-solid:grip-lines"})]),_:1}),Ve(_s,{checked:ke(v)[`${ut.slug}__${ut.pivot?.linkId}`],"onUpdate:checked":vn=>ke(v)[`${ut.slug}__${ut.pivot?.linkId}`]=vn,size:"small",class:"mr-4",onClick:U[6]||(U[6]=hc(()=>{},["stop"]))},{default:ze(()=>[ka(Dl(ke(t)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),Ve(ue,{size:"small",type:"info"},{default:ze(()=>[ka(Dl(An+1),1)]),_:2},1024),Ve(al,{vertical:"",class:wo(ke(te)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Yl("span",jm,Dl(P(ut)),1)])]),default:ze(()=>[Ve(sa,null,{default:ze(()=>[Ve(wt,{size:"small",type:"error",secondary:"",onClick:vn=>Ct(ut)},{default:ze(()=>[Ve(De,{size:"18",class:"mr-1"},{default:ze(()=>[Ve(We,{icon:"carbon:close"})]),_:1}),ka(" "+Dl(ke(t)("removeSection")),1)]),_:1},8,["onClick"]),Ve(wt,{size:"small",type:"warning",secondary:"",onClick:vn=>j(ut)},{default:ze(()=>[Ve(De,{size:"18",class:"mr-1"},{default:ze(()=>[Ve(We,{icon:"carbon:partition-same"})]),_:1}),ka(" "+Dl(ke(t)("duplicateSection")),1)]),_:1},8,["onClick"]),Ve(wt,{size:"small",type:"info",secondary:"",onClick:vn=>re(ut)},{default:ze(()=>[Ve(De,{size:"18",class:"mr-1"},{default:ze(()=>[Ve(We,{icon:"carbon:magic-wand"})]),_:1}),ka(" "+Dl(ke(t)("fillInFakeData")),1)]),_:1},8,["onClick"]),Ve(wt,{size:"small",type:"info",secondary:"",onClick:vn=>vl(ut)},{default:ze(()=>[Ve(De,{size:"18",class:"mr-1"},{default:ze(()=>[Ve(We,{icon:"carbon:copy"})]),_:1}),ka(" "+Dl(ke(t)("copyData")),1)]),_:1},8,["onClick"]),Ve(al,{vertical:"",class:wo(ke(te)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ve(sa,{align:"center"},{default:ze(()=>[Yl("span",null,Dl(ke(t)("dataSource")),1),Ve(ra,{value:`${ut.pivot?.dataSourcePageId}__${ut.pivot?.dataSourceLinkId}`,options:_e(ut.pages||[],ut),placeholder:ke(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":vn=>St(ut,vn)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),An<ke(k).length-1?(gl(),nn("div",{key:0,class:wo(`relative border-dashed border-y-2 h-1.5  ${ke(te)("!border-zinc-300","!border-zinc-600")}`)},[Yl("div",Km,[Ve(wt,{size:"tiny",type:"info",title:ke(t)("insertSections"),onClick:vn=>bt(An+1)},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):br("",!0)]))),128))]),_:1},8,["list"]),Ve(La,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:U[7]||(U[7]=ut=>R())},{default:ze(()=>[Yl("div",Ym,[Ve(De,{size:"20"},{default:ze(()=>[Ve(We,{icon:"carbon:row"})]),_:1}),ka(" "+Dl(ke(t)("insertOrRemoveSections")),1)])]),_:1})])):(gl(),nn("section",Gm,[Ve(La,{size:"large",class:wo(`mb-2 !border-dashed !border-2 ${ke(te)("!border-zinc-300","!border-zinc-600")}`)},{default:ze(()=>[Ve(Jr,{description:ke(t)("noSectionOnThisPage")},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:page-break"})]),_:1})]),extra:ze(()=>[Yl("div",Hm,[Ve(wt,{size:"small",secondary:"",onClick:U[8]||(U[8]=ut=>R())},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:row"})]),_:1})]),default:ze(()=>[ka(" "+Dl(ke(t)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),ke($)?(gl(),nn("div",Qm,[ka(Dl(ke(t)("dataRetrievalSlug"))+": ",1),Yl("b",null,Dl(ke($).slug),1)])):br("",!0)]))])]),_:1})),Ve(Xr,{show:ke(x),"onUpdate:show":U[10]||(U[10]=ut=>Zo(x)?x.value=ut:null),loading:ke(T)||ke(b),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("insertOrRemoveSections"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:G,onNegativeClick:U[11]||(U[11]=ut=>x.value=!1)},{default:ze(()=>[Yl("section",Wm,[Ve(lc,{value:ke(N),"onUpdate:value":U[9]||(U[9]=ut=>Zo(N)?N.value=ut:null),clearable:!0,placeholder:ke(t)("searchSection"),class:"mb-3"},{suffix:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"]),ke(ae)?.length?(gl(),an(ac,{key:0,style:{"max-height":"400px"}},{default:ze(()=>[(gl(!0),nn($s,null,kr(ke(ae),ut=>(gl(),an(La,{key:ut.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:An=>J(ut)},{default:ze(()=>[Yl("div",Jm,[Yl("span",Xm,Dl(ke(O)(ut.title)),1),Ve(_s,{checked:L(ut).value,"onUpdate:checked":An=>L(ut).value=An,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(gl(),an(Jr,{key:1,description:ke(N)?ke(t)("noSectionFound"):ke(t)("noSectionAvailable"),class:"my-10"},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ve(Xr,{show:ke(xe),"onUpdate:show":U[13]||(U[13]=ut=>Zo(xe)?xe.value=ut:null),loading:ke(T)||ke(b),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("insertSections"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:q,onNegativeClick:U[14]||(U[14]=ut=>xe.value=!1)},{default:ze(()=>[Yl("section",Zm,[Ve(lc,{value:ke(N),"onUpdate:value":U[12]||(U[12]=ut=>Zo(N)?N.value=ut:null),clearable:!0,placeholder:ke(t)("searchSection"),class:"mb-3"},{suffix:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"]),ke(Vt)?.length?(gl(),an(ac,{key:0,style:{"max-height":"400px"}},{default:ze(()=>[(gl(!0),nn($s,null,kr(ke(Vt),ut=>(gl(),an(La,{key:ut.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:An=>Ae(ut)},{default:ze(()=>[Yl("div",ef,[Yl("span",tf,Dl(ke(O)(ut.title)),1),Ve(_s,{checked:dt(ut).value,"onUpdate:checked":An=>dt(ut).value=An,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(gl(),an(Jr,{key:1,description:ke(N)?ke(t)("noSectionFound"):ke(t)("noSectionAvailable"),class:"my-10"},{icon:ze(()=>[Ve(De,null,{default:ze(()=>[Ve(We,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ve(Xr,{show:ke(tt),"onUpdate:show":U[16]||(U[16]=ut=>Zo(tt)?tt.value=ut:null),loading:ke(T)||ke(C),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ke(t)("copyData"),"positive-text":ke(t)("validate"),"negative-text":ke(t)("cancel"),onPositiveClick:Ge,onNegativeClick:U[17]||(U[17]=ut=>tt.value=!1)},{default:ze(()=>[Yl("section",lf,[Ve(sa,{align:"start",vertical:""},{default:ze(()=>[Yl("span",null,Dl(ke(t)("dataWillBeCopiedFrom"))+":",1),Ve(ra,{value:ke(Tt),"onUpdate:value":U[15]||(U[15]=ut=>Zo(Tt)?Tt.value=ut:null),options:_e(ke(ve)?.pages||[],ke(ve),!0),placeholder:ke(t)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[300px]"},null,8,["value","options","placeholder"])]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),rf=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu-item-groups"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/menu-item-groups",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},cf=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu-item-groups"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/menu-item-groups/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},df=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["menu-item-groups"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu-item-groups/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:uf,defineComponent:pf}=await me("vue"),{unref:Jt,resolveComponent:ek,createVNode:hl,toDisplayString:es,createTextVNode:Cs,withCtx:El,renderList:mf,Fragment:bc,openBlock:Is,createElementBlock:kc,createElementVNode:vi,createBlock:yi,normalizeClass:ff,isRef:_f}=await me("vue"),{ref:wr}=await me("vue"),vf={class:"flex items-center justify-between"},yf={class:"flex flex-col"},gf={class:"text-sm font-bold"},hf=pf({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,tr:t}=ot(),o=uf(u,"show"),{data:a,isPending:l}=Ud(),{mutate:p,isPending:S}=rf(),{mutate:ce,isPending:oe}=cf(),{mutate:F,isPending:we}=df(),H=oa(),k=wr(!1),c=wr(null),v=wr(null),fe=wr({name:"",description:""}),X={name:[{required:!0,message:e("fillRequired")}]},d=B=>{c.value=pe.cloneDeep(B),fe.value=pe.cloneDeep(B||{name:"",description:""}),k.value=!0},O=async()=>(v.value?.validate(async B=>{if(!B){const A={name:fe.value.name,description:fe.value.description};c.value?ce({id:c.value.id,...A},{onSuccess:()=>{k.value=!1}}):p(A,{onSuccess:()=>{k.value=!1}})}}),!1),te=async B=>{H.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{B.id&&F({id:B.id})}})};return(B,A)=>{const Z=ge,K=Ke,$=Ml,Q=dr,m=Y,T=Vl,y=zn,E=Za,M=_o,b=Xl,z=Pa,se=Ea,$e=Va;return Is(),kc(bc,null,[hl(b,{show:o.value,"onUpdate:show":A[2]||(A[2]=le=>o.value=le),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Jt(e)("menuItemGroups")},{"header-extra":El(()=>[hl($,{align:"center"},{default:El(()=>[hl(K,{secondary:"",size:"small",type:"primary",disabled:Jt(l),onClick:A[0]||(A[0]=le=>d(null))},{default:El(()=>[hl(Z,{icon:"carbon:add-alt",class:"mr-1"}),Cs(" "+es(Jt(e)("add")),1)]),_:1},8,["disabled"]),hl(K,{secondary:"",size:"small",type:"error",disabled:Jt(l),onClick:A[1]||(A[1]=le=>o.value=!1)},{default:El(()=>[hl(Z,{icon:"carbon:close",class:"mr-1"}),Cs(" "+es(Jt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:El(()=>[hl(M,{show:Jt(l)},{default:El(()=>[Jt(a)?.length?(Is(),yi(y,{key:0,style:{"max-height":"400px"}},{default:El(()=>[(Is(!0),kc(bc,null,mf(Jt(a),le=>(Is(),yi(T,{key:le.id,embedded:"",size:"small",class:"mb-2"},{default:El(()=>[vi("div",vf,[vi("div",yf,[vi("span",gf,es(Jt(t)(le.name)),1),hl(Q,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:El(()=>[Cs(es(Jt(t)(le.description)),1)]),_:2},1024)]),hl($,null,{default:El(()=>[hl(K,{size:"small",type:"warning",secondary:"",onClick:I=>d(le)},{default:El(()=>[hl(m,null,{default:El(()=>[hl(Z,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),hl(K,{size:"small",type:"error",secondary:"",onClick:I=>te(le)},{default:El(()=>[hl(m,null,{default:El(()=>[hl(Z,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Is(),yi(T,{key:1,size:"large",class:ff(`mb-2 !border-dashed !border-2 ${Jt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:El(()=>[hl(E,{description:Jt(e)("noMenuItemGroupAdded")},{icon:El(()=>[hl(m,null,{default:El(()=>[hl(Z,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),hl(b,{show:Jt(k),"onUpdate:show":A[5]||(A[5]=le=>_f(k)?k.value=le:null),loading:Jt(S)||Jt(oe)||Jt(we),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Jt(c)?Jt(e)("editMenuItemGroup"):Jt(e)("addMenuItemGroup"),"positive-text":Jt(e)("validate"),"negative-text":Jt(e)("cancel"),onPositiveClick:O,onNegativeClick:A[6]||(A[6]=le=>k.value=!1)},{default:El(()=>[hl($e,{ref_key:"formRef",ref:v,model:Jt(fe),rules:X,"show-require-mark":!1,size:"medium",class:"my-5"},{default:El(()=>[hl(se,{"show-label":!1,path:"name"},{default:El(()=>[hl(z,{modelValue:Jt(fe).name,"onUpdate:modelValue":A[3]||(A[3]=le=>Jt(fe).name=le),placeholder:Jt(e)("name"),class:"w-full",sync:""},{label:El(()=>[Cs(es(Jt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),hl(se,{"show-label":!1,path:"description"},{default:El(()=>[hl(z,{modelValue:Jt(fe).description,"onUpdate:modelValue":A[4]||(A[4]=le=>Jt(fe).description=le),placeholder:Jt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:El(()=>[Cs(es(Jt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:wc,mergeModels:bf,defineComponent:kf}=await me("vue"),{unref:sl,resolveComponent:tk,createVNode:Rn,withCtx:$o,isRef:wf,Fragment:xf,openBlock:Vs,createElementBlock:$f,createCommentVNode:xr,createBlock:$r}=await me("vue"),{ref:Ss,computed:Es,onMounted:Cf,h:Us}=await me("vue"),If=kf({__name:"ContentFormItems",props:{"content-type":{default:na.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:bf(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:n}=Ie(),{tr:t,mergeArrays:o}=ot(),{contentTypes:a,extractItemTitle:l}=fs(),{data:p}=fo(),S=e,ce=wc(u,"content-type"),oe=wc(u,"content-id"),F=Ss(),we=Ss([]),H=Ss([]),{mutateAsync:k,isPending:c}=tc(),{mutateAsync:v,isPending:fe}=Qd(),X=Es(()=>c.value||fe.value),d=async(le,I)=>{if(!le.length){H.value=[];return}H.value=await k({query:le,contentModelId:I})},O=Es(()=>o(we.value,H.value,"id")),te=Ss([]),B=Ss([]),{mutateAsync:A,isPending:Z}=qd(),{mutateAsync:K,isPending:$}=Rd(),Q=Es(()=>$.value||Z.value),m=async le=>{if(!le.length){B.value=[];return}B.value=await K(le)},T=Es(()=>o(te.value,B.value,"id")),{categories:y}=nc(),{tags:E}=nc();Cf(async()=>{const le=await A({ids:oe.value?[oe.value]:[]});le&&(te.value=o(te.value,le,"id"));const I=await v({ids:oe.value?[oe.value]:[]});I&&(we.value=o(we.value,I,"id"),F.value=we.value.find(C=>C.id===oe.value)?.contentModelId)});const M=le=>Us("span",{},{default:()=>`${t(le.name)}`}),b=le=>Us("span",{},{default:()=>`${t(le.title)}`}),z=le=>Us("span",{},{default:()=>`${t(le.name)}`}),se=le=>Us("span",{},{default:()=>t(le.title)}),$e=le=>Es(()=>Us("span",{},{default:()=>l(le,p.value?.find(I=>I.id===le.contentModelId))}));return(le,I)=>{const C=en,Ee=Xn,D=Sa;return Vs(),$r(D,{"x-gap":"12",span:24},{default:$o(()=>[Rn(Ee,{span:8,label:sl(n)("contentType"),path:"contentType"},{default:$o(()=>[Rn(C,{value:ce.value,"onUpdate:value":[I[0]||(I[0]=P=>ce.value=P),I[1]||(I[1]=()=>oe.value=void 0)],options:sl(a)||[],placeholder:sl(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),ce.value===sl(na).CONTENT_MODEL?(Vs(),$f(xf,{key:0},[Rn(Ee,{span:8,label:sl(n)("contentModel")},{default:$o(()=>[Rn(C,{value:sl(F),"onUpdate:value":I[2]||(I[2]=P=>wf(F)?F.value=P:null),options:sl(p),placeholder:sl(n)("search"),"render-label":se,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Rn(Ee,{span:8,label:sl(n)("item"),path:"contentId"},{default:$o(()=>[Rn(C,{value:oe.value,"onUpdate:value":[I[3]||(I[3]=P=>oe.value=P),I[5]||(I[5]=(P,s)=>S("update",P,s,ce.value))],options:sl(O)||[],placeholder:sl(n)("search"),"render-label":P=>$e(P).value,loading:sl(X),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:I[4]||(I[4]=P=>d(P,sl(F)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):xr("",!0),ce.value===sl(na).NEWS_ARTICLE?(Vs(),$r(Ee,{key:1,span:16,label:sl(n)("newsArticle"),path:"contentId"},{default:$o(()=>[Rn(C,{value:oe.value,"onUpdate:value":[I[6]||(I[6]=P=>oe.value=P),I[7]||(I[7]=(P,s)=>S("update",P,s,ce.value))],options:sl(T)||[],placeholder:sl(n)("search"),"render-label":b,loading:sl(Q),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:m},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):xr("",!0),ce.value===sl(na).NEWS_CATEGORY?(Vs(),$r(Ee,{key:2,span:16,label:sl(n)("newsCategory"),path:"contentId"},{default:$o(()=>[Rn(C,{value:oe.value,"onUpdate:value":[I[8]||(I[8]=P=>oe.value=P),I[9]||(I[9]=(P,s)=>S("update",P,s,ce.value))],options:sl(y)||[],placeholder:sl(n)("select"),"render-label":M,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):xr("",!0),ce.value===sl(na).NEWS_TAG?(Vs(),$r(Ee,{key:3,span:16,label:sl(n)("newsTag"),path:"contentId"},{default:$o(()=>[Rn(C,{value:oe.value,"onUpdate:value":[I[10]||(I[10]=P=>oe.value=P),I[11]||(I[11]=(P,s)=>S("update",P,s,ce.value))],options:sl(E)||[],placeholder:sl(n)("select"),"render-label":z,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):xr("",!0)]),_:1})}}}),Vf=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu","items"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/menu/items",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Sf=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu","items"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/menu/items/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Ef=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["menu","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu/items/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Uf=()=>{const{request:u}=Ye(),e=Ze();return Wa(async n=>{const t=await u({method:"put",url:"/menu/items/position",data:n});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:Tf,defineComponent:Mf}=await me("vue"),{unref:g,resolveComponent:gi,createVNode:ie,withCtx:Ce,toDisplayString:bl,createTextVNode:wa,openBlock:dl,createBlock:jn,createCommentVNode:Co,isRef:Cr,renderList:Ir,Fragment:$n,createElementBlock:xa,normalizeClass:Io,withModifiers:Ts,createElementVNode:Zl}=await me("vue"),Df={key:0},Nf={class:"flex items-center"},zf={class:"flex flex-col"},Af={class:"text-sm font-bold"},Pf={key:0,class:"text-sm"},Lf={class:"text-xs font-normal"},Bf={class:"text-xs my-1"},Ff={class:"flex items-center"},Of={class:"flex flex-col"},qf={class:"text-sm font-bold"},Rf={class:"text-xs font-normal"},jf={key:0,class:"mt-4"},Kf={class:"my-8"},Yf={class:"flex items-center justify-between"},Gf={class:"flex flex-col"},Hf={class:"text-sm font-bold"},Qf={class:"text-xs font-normal"},Wf={class:"flex items-center"},Jf={key:0},Xf={key:1},Zf={key:2},{storeToRefs:e_}=await me("pinia"),{ref:qa,watch:t_,computed:Ms,h:xc}=await me("vue"),l_=Mf({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:n}=Ie(),{extractItemTitle:t}=fs(),{tr:o,pickByTheme:a}=ot(),{isLightTheme:l}=e_(jo()),{data:p,isPending:S}=Gi(),{data:ce}=fo(),{data:oe,isPending:F}=Ud(),{data:we,isFetching:H,refetch:k}=Vd({enabled:!1}),{mutate:c,isPending:v}=Vf(),{mutate:fe,isPending:X}=Sf(),{mutate:d,isPending:O}=Ef(),{mutate:te}=Uf(),B=Qe(),A=oa(),Z=Tf(u,"modelValue"),K=qa([]),$=qa([]),Q=qa(""),m=qa();let T=qa(!0);t_(()=>H.value,q=>{q||(T.value=!1)});const y=Ms(()=>{if(!Q.value)return K.value;const q=K.value.filter(V=>V.title.toLowerCase().includes(Q.value.toLowerCase())||V.description?.toLowerCase().includes(Q.value.toLowerCase())||V.children.some(w=>w.title.toLowerCase().includes(Q.value.toLowerCase())||w.description?.toLowerCase().includes(Q.value.toLowerCase())));return m.value&&m.value.focus(),q}),E=async()=>{await k(),K.value=we.value?.filter(q=>!q.parentId&&q.menuId===Z.value?.id)||[];for(let q=0;q<K.value.length;q++)K.value[q].children=we.value?.filter(V=>V.parentId===K.value[q].id&&V.menuId===Z.value?.id)||[];$.value=we.value?.filter(q=>q.menuId!==Z.value?.id)||[]};E();const M=qa(24),b=qa(1),z=q=>{M.value=q},se={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:ga.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:na.CONTENT_MODEL,contentId:void 0},$e=qa(null),le=qa(!1),I=qa(!1),C=qa(null),Ee=qa(null),D=qa(se),P=Ms(()=>{const q={title:[{required:!0,message:e("fillRequired")}]};return D.value.targetType===ga.PAGE_LINK?(q.pageId=[{required:!0,message:e("fillRequired")}],q.path=[{required:!0,message:e("fillRequired")}]):D.value.targetType===ga.EXTERNAL_LINK?q.url=[{required:!0,message:e("fillRequired")}]:D.value.targetType===ga.CONTENT_LINK&&(q.contentId=[{required:!0,message:e("fillRequired")}],q.contentType=[{required:!0,message:e("fillRequired")}]),q}),s=Ms(()=>p.value?.find(q=>q.id==D.value.pageId)?.slug||""),{data:r,isPending:x}=Bu({queryKey:["pages",s],queryFn:async()=>{const{request:q}=Ye(),V=await q({url:`/pages/${s.value}`});return V.success&&V.result.data?V.result.data:null},enabled:Ms(()=>!!s.value)}),N=Ms(()=>r.value?.sections?.map(q=>{const ae=(r.value?.sections?.filter(Vt=>Vt.id===q.id)?.map(Vt=>Vt.pivot?.createdAt||Vt.pivot?.updatedAt||"")?.sort((Vt,_e)=>new Date(Vt).getTime()-new Date(_e).getTime())||[]).indexOf(q.pivot?.createdAt||q.pivot?.updatedAt||"");return{label:q.pivot?.linkId=="default"?o(q.title):o(q.title)+" ("+(ae+1)+")",value:q.slug+"__"+q.pivot?.linkId}})||[]),R=(q,V=null)=>{C.value=pe.cloneDeep(q),$e.value=V,q?(D.value=pe.cloneDeep(q),le.value=!0):(D.value=pe.cloneDeep(se),$.value.length>0?I.value=!0:le.value=!0)},J=async q=>{A.warning({title:e("confirm"),content:q.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{q.id&&d({id:q.id})}})},L=async q=>{c({title:q.title,path:q.path,url:q.url,description:q.description,isActive:!0,isVisible:!0,color:q.color,icon:q.icon,position:q.position,targetType:q.targetType,parentId:$e.value,menuId:Z.value?.id,sectionKey:q.sectionKey,menuItemGroupId:q.menuItemGroupId,pageId:q.pageId},{onSuccess(){E(),I.value=!1}})},G=async()=>(Ee.value?.validate(async q=>{if(!q){const V={title:D.value.title,path:D.value.path,url:D.value.url,description:D.value.description,isActive:D.value.isActive,isVisible:D.value.isVisible,color:D.value.color,icon:D.value.icon,position:D.value.position,targetType:D.value.targetType,parentId:$e.value,menuId:Z.value?.id,sectionKey:D.value.sectionKey,menuItemGroupId:D.value.menuItemGroupId,pageId:D.value.pageId,contentId:D.value.contentId,contentType:D.value.contentType};C.value?C.value.title!==D.value.title&&K.value.findIndex(w=>w.title==D.value.title)>-1?B.error(e("sameMenuItemTitleMessage")):fe({id:C.value.id,...V},{onSuccess(){E()}}):K.value.findIndex(w=>w.title==D.value.title)>-1?B.error(e("sameMenuItemTitleMessage")):c(V,{onSuccess(){E()}}),le.value=!1}}),!1),at=async(q,V)=>{te({items:V},{onSuccess(){E()}})},ct=q=>xc("span",{},{default:()=>o(q.title)}),xe=q=>xc("span",{},{default:()=>o(q.name)}),bt=q=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(q),Ae=q=>{if(q.targetType==ga.EXTERNAL_LINK)return q.url;if(q.targetType==ga.PAGE_LINK)return q.path;if(q.targetType==ga.CONTENT_LINK)switch(q.contentType){case na.CONTENT_MODEL:return e("contentModel");case na.NEWS_CATEGORY:return e("newsCategory");case na.NEWS_ARTICLE:return e("newsArticle");case na.NEWS_TAG:return e("newsTag")}return""},dt=async(q,V,w)=>{if(!o(D.value.title))switch(w){case na.CONTENT_MODEL:D.value.title=t(V,ce.value?.find(ae=>ae.id===V.contentModelId));break;case na.NEWS_ARTICLE:D.value.title=V.title;break;case na.NEWS_CATEGORY:case na.NEWS_TAG:D.value.title=V.name;break}};return(q,V)=>{const w=ge,ae=Ml,Vt=Qa,_e=Pd,St=Ad,Ct=Aa,j=Xa,re=Vl,tt=gi("Draggable"),ve=_n,Tt=fn,vl=Ko,Ge=Za,kt=Ja,Rt=zn,ha=Xl,ol=Pa,Pl=Ea,rt=Hr,jt=Xn,ne=ir,U=rr,We=Sa,De=gi("IconPicker"),wt=gi("color-picker"),al=en,sa=Va;return dl(),xa($n,null,[ie(Vt,{to:"#alt-action"},{default:Ce(()=>[ie(ae,{align:"center"},{default:Ce(()=>[g(y).length?(dl(),jn(g(Ke),{key:0,secondary:"",type:"primary",onClick:V[0]||(V[0]=Se=>R(null))},{icon:Ce(()=>[ie(g(Y),{size:"18"},{default:Ce(()=>[ie(w,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[wa(" "+bl(g(e)("addMenuItem")),1)]),_:1})):Co("",!0)]),_:1})]),_:1}),ie(_e,{class:"mt-2 mb-5",onBack:V[2]||(V[2]=Se=>Z.value=null)},{title:Ce(()=>[wa(bl(g(o)(Z.value?.title)),1)]),back:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Ce(()=>[ie(g(ll),{ref_key:"searchInputRef",ref:m,value:g(Q),"onUpdate:value":V[1]||(V[1]=Se=>Cr(Q)?Q.value=Se:null),clearable:!0,placeholder:g(e)("search")},{suffix:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),ie(kt,{appear:"",name:"slide-fade"},{default:Ce(()=>[Zl("section",null,[g(T)?(dl(),xa("section",Df,[(dl(),xa($n,null,Ir(7,Se=>ie(St,{key:Se,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(dl(),xa($n,{key:1},[g(y)&&g(y).length?(dl(),xa($n,{key:0},[ie(tt,{list:g(K),onChange:V[3]||(V[3]=Se=>at(Se,g(K)))},{default:Ce(()=>[(dl(!0),xa($n,null,Ir(g(y).slice((g(b)-1)*g(M),g(b)*g(M)),Se=>(dl(),jn(re,{key:Se.id,embedded:"",size:"small",class:"mb-1"},{default:Ce(()=>[ie(Tt,{"default-expanded-names":Se.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":Ce(({collapsed:Ue})=>[ie(ae,{align:"center"},{default:Ce(()=>[ie(Ct,{size:"small",bordered:!1,type:Se.isActive?"success":"error"},{default:Ce(()=>[wa(bl(Se.isActive?g(e)("published"):g(e)("unpublished")),1)]),_:2},1032,["type"]),ie(Ct,{size:"small",bordered:!1,type:Se.isVisible?"info":"warning"},{default:Ce(()=>[wa(bl(Se.isVisible?g(e)("visible"):g(e)("hidden")),1)]),_:2},1032,["type"]),ie(j,{vertical:"",class:Io(["!mx-0",g(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ie(g(Ke),{size:"small",type:"primary",secondary:"",onClick:Ts(ba=>R(Se),["stop"])},{default:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ie(g(Ke),{size:"small",type:"error",secondary:"",onClick:Ts(ba=>J(Se),["stop"])},{default:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),ie(g(Ke),{size:"small",type:"info",secondary:"",onClick:Ts(ba=>R(null,Se.id),["stop"])},{icon:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:category"})]),_:1})]),default:Ce(()=>[wa(" "+bl(g(e)("subMenuItem"))+" ",1),ie(Ct,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:Ce(()=>[wa(bl(Se.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),V[27]||(V[27]=Zl("div",{class:"w-6"},null,-1)),ie(g(Y),null,{default:Ce(()=>[Ue?(dl(),jn(w,{key:0,icon:"fa-solid:chevron-left"})):(dl(),jn(w,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ce(()=>[...V[28]||(V[28]=[Zl("span",null,null,-1)])]),default:Ce(()=>[ie(ve,{name:"1"},{header:Ce(()=>[Zl("div",Nf,[ie(g(Y),{size:"21",class:"cursor-move mr-4"},{default:Ce(()=>[ie(w,{icon:"fa-solid:grip-lines"})]),_:1}),ie(j,{vertical:"",class:Io(g(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Zl("div",zf,[Zl("div",null,[Zl("span",Af,bl(g(o)(Se.title)),1),Se.group?(dl(),xa("span",Pf," Â ("+bl(g(o)(Se.group?.name))+") ",1)):Co("",!0)]),Zl("small",Lf,bl(Ae(Se)),1)])])]),default:Ce(()=>[Se.description?(dl(),xa($n,{key:0},[ie(j,{class:Io([g(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Zl("div",Bf,bl(g(o)(Se.description)),1)],64)):Co("",!0),Se.children.length?(dl(),xa($n,{key:1},[ie(j,{class:Io([g(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),ie(tt,{list:Se.children,onChange:Ue=>at(Ue,Se.children)},{default:Ce(()=>[(dl(!0),xa($n,null,Ir(Se.children,Ue=>(dl(),jn(re,{key:Ue.id,size:"small",class:"mb-1"},{header:Ce(()=>[Zl("div",Ff,[ie(g(Y),{size:"21",class:"cursor-move mr-4"},{default:Ce(()=>[ie(w,{icon:"fa-solid:grip-lines"})]),_:1}),ie(j,{vertical:"",class:Io(g(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Zl("div",Of,[Zl("span",qf,bl(g(o)(Ue.title)),1),Zl("small",Rf,bl(Ae(Ue)),1)])])]),"header-extra":Ce(()=>[ie(ae,{align:"center"},{default:Ce(()=>[ie(Ct,{size:"small",bordered:!1,type:Ue.isActive?"success":"error"},{default:Ce(()=>[wa(bl(Ue.isActive?g(e)("published"):g(e)("unpublished")),1)]),_:2},1032,["type"]),ie(Ct,{size:"small",bordered:!1,type:Ue.isVisible?"info":"warning"},{default:Ce(()=>[wa(bl(Ue.isVisible?g(e)("visible"):g(e)("hidden")),1)]),_:2},1032,["type"]),ie(j,{vertical:"",class:Io(["!mx-0",g(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ie(g(Ke),{size:"small",type:"primary",secondary:"",onClick:Ts(ba=>R(Ue,Se.id),["stop"])},{default:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ie(g(Ke),{size:"small",type:"error",secondary:"",onClick:Ts(ba=>J(Ue),["stop"])},{default:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Co("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),ie(vl,{page:g(b),"onUpdate:page":V[4]||(V[4]=Se=>Cr(b)?b.value=Se:null),class:"mt-5 justify-end","show-size-picker":"","page-size":g(M),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(g(K).length/g(M)),"onUpdate:pageSize":z},{prefix:Ce(()=>[wa(bl(`${g(K).length} ${g(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(dl(),jn(re,{key:1,size:"large",class:Io(`mb-2 !border-dashed !border-2 ${g(a)("!border-zinc-300","!border-zinc-600")}`)},{default:Ce(()=>[ie(Ge,{description:g(e)("noMenuItemAvailable")},{icon:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[g(Q)?(dl(),jn(w,{key:0,icon:"carbon:search"})):(dl(),jn(w,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:Ce(()=>[g(Q)?Co("",!0):(dl(),xa("div",jf,[ie(g(Ke),{size:"small",secondary:"",onClick:V[5]||(V[5]=Se=>R(null))},{icon:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[wa(" "+bl(g(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),ie(ha,{show:g(I),"onUpdate:show":V[6]||(V[6]=Se=>Cr(I)?I.value=Se:null),loading:g(v)||g(X)||g(O),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:g(e)("menuItems"),"positive-text":g($e)?g(e)("createSubMenuItem"):g(e)("createMenuItem"),"negative-text":g(e)("cancel"),onPositiveClick:V[7]||(V[7]=()=>{I.value=!1,le.value=!0}),onNegativeClick:V[8]||(V[8]=Se=>I.value=!1)},{default:Ce(()=>[Zl("section",Kf,[ie(Rt,{style:{"max-height":"400px"}},{default:Ce(()=>[(dl(!0),xa($n,null,Ir(g($),Se=>(dl(),jn(re,{key:Se.id,embedded:"",size:"small",class:"mb-2"},{default:Ce(()=>[Zl("div",Yf,[Zl("div",Gf,[Zl("span",Hf,bl(g(o)(Se.title)),1),Zl("small",Qf,bl(Ae(Se)),1)]),ie(g(Ke),{size:"small",type:"primary",secondary:"",onClick:Ue=>L(Se)},{icon:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:add-alt"})]),_:1})]),default:Ce(()=>[wa(" "+bl(g(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ie(ha,{show:g(le),"onUpdate:show":V[25]||(V[25]=Se=>Cr(le)?le.value=Se:null),loading:g(v)||g(X)||g(O),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:g(C)?g($e)?g(e)("editSubMenuItem"):g(e)("editMenuItem"):g($e)?g($).length?g(e)("createSubMenuItem"):g(e)("addSubMenuItem"):g($).length?g(e)("createMenuItem"):g(e)("addMenuItem"),"positive-text":g(e)("validate"),"negative-text":g(e)("cancel"),onPositiveClick:G,onNegativeClick:V[26]||(V[26]=Se=>le.value=!1)},{default:Ce(()=>[ie(sa,{ref_key:"formRef",ref:Ee,class:"mt-5",model:g(D),rules:g(P),"show-require-mark":!1,size:"medium"},{default:Ce(()=>[ie(Pl,{"show-label":!1,path:"title"},{default:Ce(()=>[ie(ol,{modelValue:g(D).title,"onUpdate:modelValue":V[9]||(V[9]=Se=>g(D).title=Se),placeholder:g(e)("title"),class:"w-full",sync:""},{label:Ce(()=>[wa(bl(g(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ie(Pl,{"show-label":!1,path:"description"},{default:Ce(()=>[ie(ol,{modelValue:g(D).description,"onUpdate:modelValue":V[10]||(V[10]=Se=>g(D).description=Se),placeholder:g(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Ce(()=>[wa(bl(g(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ie(We,{"x-gap":"12",span:24},{default:Ce(()=>[ie(jt,{span:5,label:g(e)("position"),path:"position"},{default:Ce(()=>[ie(rt,{value:g(D).position,"onUpdate:value":V[11]||(V[11]=Se=>g(D).position=Se),placeholder:g(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),ie(jt,{span:10,label:g(e)("publication"),path:"isActive"},{default:Ce(()=>[ie(U,{value:g(D).isActive,"onUpdate:value":V[12]||(V[12]=Se=>g(D).isActive=Se),name:"isActive",class:"w-full"},{default:Ce(()=>[ie(ne,{value:!1,label:g(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),ie(ne,{value:!0,label:g(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),ie(jt,{span:9,label:g(e)("visibility"),path:"isVisible"},{default:Ce(()=>[ie(U,{value:g(D).isVisible,"onUpdate:value":V[13]||(V[13]=Se=>g(D).isVisible=Se),name:"isVisible",class:"w-full"},{default:Ce(()=>[ie(ne,{value:!1,label:g(e)("hidden"),class:"w-[50%]"},null,8,["label"]),ie(ne,{value:!0,label:g(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ie(j,{class:"!my-2"}),ie(We,{"x-gap":"12",span:24},{default:Ce(()=>[ie(jt,{span:10,label:g(e)("icon"),path:"icon"},{default:Ce(()=>[ie(De,{modelValue:g(D).icon,"onUpdate:modelValue":V[14]||(V[14]=Se=>g(D).icon=Se),placeholder:g(e)("icon"),"icons-list-placeholder":g(e)("enterIconNameInSearchBar"),"search-placeholder":g(e)("search"),"empty-text":g(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),ie(jt,{span:4,label:g(e)("color"),path:"color"},{default:Ce(()=>[Zl("div",Wf,[g(D).color?(dl(),xa($n,{key:0},[ie(g(Ke),{text:"",type:"error",style:{"font-size":"21px"},onClick:V[15]||(V[15]=Se=>g(D).color="")},{default:Ce(()=>[ie(g(Y),null,{default:Ce(()=>[ie(w,{icon:"carbon:trash-can"})]),_:1})]),_:1}),ie(j,{vertical:""})],64)):Co("",!0),ie(wt,{"pure-color":g(D).color,"onUpdate:pureColor":V[16]||(V[16]=Se=>g(D).color=Se),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(l)?"white":"black",lang:g(n)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),ie(jt,{span:10,label:g(e)("group"),path:"menuItemGroupId"},{default:Ce(()=>[ie(al,{value:g(D).menuItemGroupId,"onUpdate:value":V[17]||(V[17]=Se=>g(D).menuItemGroupId=Se),options:g(oe),placeholder:g(e)("group"),"render-label":xe,loading:g(F),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ie(jt,{span:24,label:g(e)("targetType"),path:"targetType"},{default:Ce(()=>[ie(U,{value:g(D).targetType,"onUpdate:value":V[18]||(V[18]=Se=>g(D).targetType=Se),class:"w-full",size:"small"},{default:Ce(()=>[ie(ne,{value:g(ga).PAGE_LINK,class:"w-[33.33%]"},{default:Ce(()=>[wa(bl(g(e)("pageLink")),1)]),_:1},8,["value"]),ie(ne,{value:g(ga).CONTENT_LINK,class:"w-[33.33%]"},{default:Ce(()=>[wa(bl(g(e)("contentLink")),1)]),_:1},8,["value"]),ie(ne,{value:g(ga).EXTERNAL_LINK,class:"w-[33.33%]"},{default:Ce(()=>[wa(bl(g(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ie(kt,{appear:"",name:"slide-fade"},{default:Ce(()=>[g(D).targetType===g(ga).PAGE_LINK?(dl(),xa("section",Jf,[ie(We,{"x-gap":"12",span:24},{default:Ce(()=>[ie(jt,{span:12,label:g(e)("page"),path:"pageId"},{default:Ce(()=>[ie(al,{value:g(D).pageId,"onUpdate:value":V[19]||(V[19]=Se=>g(D).pageId=Se),options:g(p)||[],placeholder:g(e)("selectPage"),"render-label":ct,loading:g(S),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ie(jt,{span:12,label:g(e)("section"),path:"sectionKey"},{default:Ce(()=>[ie(al,{value:g(D).sectionKey,"onUpdate:value":V[20]||(V[20]=Se=>g(D).sectionKey=Se),options:g(N),placeholder:g(e)("selectSection"),disabled:!g(D).pageId,loading:g(x),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),ie(Pl,{label:g(e)("path"),path:"path"},{default:Ce(()=>[ie(g(ll),{value:g(D).path,"onUpdate:value":V[21]||(V[21]=Se=>g(D).path=Se),placeholder:g(e)("path"),"allow-input":bt,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):g(D).targetType===g(ga).CONTENT_LINK?(dl(),xa("section",Xf,[ie(If,{"content-type":g(D).contentType,"onUpdate:contentType":V[22]||(V[22]=Se=>g(D).contentType=Se),"content-id":g(D).contentId,"onUpdate:contentId":V[23]||(V[23]=Se=>g(D).contentId=Se),onUpdate:dt},null,8,["content-type","content-id"])])):g(D).targetType===g(ga).EXTERNAL_LINK?(dl(),xa("section",Zf,[ie(Pl,{label:g(e)("url"),path:"url"},{default:Ce(()=>[ie(g(ll),{value:g(D).url,"onUpdate:value":V[24]||(V[24]=Se=>g(D).url=Se),placeholder:g(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):Co("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),a_=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu-locations"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/menu-locations",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},n_=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menu-locations"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/menu-locations/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},o_=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["menu-locations"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menu-locations/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{useModel:s_,defineComponent:r_}=await me("vue"),{unref:Xt,resolveComponent:lk,createVNode:rl,withCtx:kl,toDisplayString:Ds,createTextVNode:Vr,renderList:i_,Fragment:$c,openBlock:Ns,createElementBlock:Cc,createElementVNode:hi,createBlock:bi,normalizeClass:c_,isRef:d_}=await me("vue"),{ref:Sr}=await me("vue"),u_={class:"flex items-center justify-between"},p_={class:"flex flex-col"},m_={class:"text-sm font-bold"},f_=r_({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=Ie(),{pickByTheme:n,tr:t,formatKey:o}=ot(),a=s_(u,"show"),{data:l,isPending:p}=Td(),{mutate:S,isPending:ce}=a_(),{mutate:oe,isPending:F}=n_(),{mutate:we,isPending:H}=o_(),k=oa(),c=Sr(!1),v=Sr(null),fe=Sr(null),X=Sr({name:"",description:""}),d={name:[{required:!0,message:e("fillRequired")}]},O=A=>{v.value=pe.cloneDeep(A),X.value=pe.cloneDeep(A||{name:"",description:""}),c.value=!0},te=async()=>(fe.value?.validate(async A=>{if(!A){const Z={name:X.value.name,description:X.value.description};v.value?oe({id:v.value.id,...Z},{onSuccess:()=>{c.value=!1}}):S(Z,{onSuccess:()=>{c.value=!1}})}}),!1),B=async A=>{k.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{A.id&&we({id:A.id})}})};return(A,Z)=>{const K=ge,$=Y,Q=Ke,m=Ml,T=dr,y=Vl,E=zn,M=Za,b=_o,z=Xl,se=ll,$e=Ea,le=Pa,I=Va;return Ns(),Cc($c,null,[rl(z,{show:a.value,"onUpdate:show":Z[2]||(Z[2]=C=>a.value=C),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Xt(e)("menuLocations")},{"header-extra":kl(()=>[rl(m,{align:"center"},{default:kl(()=>[rl(Q,{secondary:"",size:"small",type:"primary",disabled:Xt(p),onClick:Z[0]||(Z[0]=C=>O(null))},{default:kl(()=>[rl($,{class:"mr-1"},{default:kl(()=>[rl(K,{icon:"carbon:add-alt"})]),_:1}),Vr(" "+Ds(Xt(e)("add")),1)]),_:1},8,["disabled"]),rl(Q,{secondary:"",size:"small",type:"error",disabled:Xt(p),onClick:Z[1]||(Z[1]=C=>a.value=!1)},{default:kl(()=>[rl($,{class:"mr-1"},{default:kl(()=>[rl(K,{icon:"carbon:close"})]),_:1}),Vr(" "+Ds(Xt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:kl(()=>[rl(b,{show:Xt(p)},{default:kl(()=>[Xt(l)?.length?(Ns(),bi(E,{key:0,style:{"max-height":"400px"}},{default:kl(()=>[(Ns(!0),Cc($c,null,i_(Xt(l),C=>(Ns(),bi(y,{key:C.id,embedded:"",size:"small",class:"mb-2"},{default:kl(()=>[hi("div",u_,[hi("div",p_,[hi("span",m_,Ds(C.name),1),rl(T,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:kl(()=>[Vr(Ds(Xt(t)(C.description)),1)]),_:2},1024)]),rl(m,null,{default:kl(()=>[rl(Q,{size:"small",type:"warning",secondary:"",onClick:Ee=>O(C)},{default:kl(()=>[rl($,null,{default:kl(()=>[rl(K,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),rl(Q,{size:"small",type:"error",secondary:"",onClick:Ee=>B(C)},{default:kl(()=>[rl($,null,{default:kl(()=>[rl(K,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Ns(),bi(y,{key:1,size:"large",class:c_(`mb-2 !border-dashed !border-2 ${Xt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:kl(()=>[rl(M,{description:Xt(e)("noMenuLocationAdded")},{icon:kl(()=>[rl($,null,{default:kl(()=>[rl(K,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),rl(z,{show:Xt(c),"onUpdate:show":Z[5]||(Z[5]=C=>d_(c)?c.value=C:null),loading:Xt(ce)||Xt(F)||Xt(H),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Xt(v)?Xt(e)("editMenuLocation"):Xt(e)("addMenuLocation"),"positive-text":Xt(e)("validate"),"negative-text":Xt(e)("cancel"),onPositiveClick:te,onNegativeClick:Z[6]||(Z[6]=C=>c.value=!1)},{default:kl(()=>[rl(I,{ref_key:"formRef",ref:fe,model:Xt(X),rules:d,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kl(()=>[rl($e,{label:Xt(e)("key"),path:"name"},{default:kl(()=>[rl(se,{value:Xt(X).name,placeholder:Xt(e)("key"),class:"w-full","onUpdate:value":Z[3]||(Z[3]=C=>Xt(X).name=Xt(o)(C))},null,8,["value","placeholder"])]),_:1},8,["label"]),rl($e,{"show-label":!1,path:"description"},{default:kl(()=>[rl(le,{modelValue:Xt(X).description,"onUpdate:modelValue":Z[4]||(Z[4]=C=>Xt(X).description=C),placeholder:Xt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kl(()=>[Vr(Ds(Xt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),__=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menus"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/menus",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},v_=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["menus"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/menus/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},y_=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["menus"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/menus/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:g_}=await me("vue"),{unref:lt,resolveComponent:ak,createVNode:zt,withCtx:At,toDisplayString:Cn,createTextVNode:to,openBlock:cn,createBlock:ts,createCommentVNode:Er,renderList:h_,Fragment:ki,createElementBlock:zs,withModifiers:wi,normalizeClass:xi,createElementVNode:As,isRef:Ur}=await me("vue"),b_={key:2},k_={class:"flex items-center"},w_={class:"flex flex-col"},x_={key:0,class:"text-xs font-normal"},$_={class:"mt-4"},{ref:Kn,watch:C_}=await me("vue"),{defineStore:I_}=await me("pinia"),V_=g_({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,pickByTheme:t,isInDevMode:o,formatKey:a}=ot(),{data:l}=Td(),{data:p}=fu(),{mutate:S,isPending:ce}=y_(),{mutate:oe,isPending:F}=__(),{mutate:we,isPending:H}=v_(),k=oa(),c=Kn(24),v=Kn(1),fe=y=>{c.value=y},X={name:"",title:"",description:"",menuLocationId:void 0},d=Kn(!1),O=Kn(!1),te=Kn(!1),B=Kn(null),A=Kn(X),Z={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},K=Kn(null),$=y=>{K.value=pe.cloneDeep(y),A.value=pe.cloneDeep(y||X),d.value=!0},Q=async()=>(B.value?.validate(async y=>{if(!y){const E={name:A.value.name,title:A.value.title,description:A.value.description,menuLocationId:A.value.menuLocationId};K.value?we({id:K.value.id,...E},{onSuccess:()=>{}}):oe(E,{onSuccess:()=>{}}),d.value=!1}}),!1),m=async y=>{k.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{y.id&&S({id:y.id})}})},T=I_("menus-management",()=>({itemsMenu:Kn(null)}))();return C_(()=>A.value.title,y=>{K.value||A.value.name.length<=21&&(A.value.name=jd(n(y),{trim:!0,lower:!0,strict:!0}))}),(y,E)=>{const M=ge,b=Y,z=Ke,se=Ml,$e=Qa,le=Xa,I=Vl,C=Ko,Ee=Za,D=Ja,P=Pa,s=Ea,r=ll,x=Xn,N=en,R=Sa,J=Va,L=Xl;return cn(),zs(ki,null,[lt(T).itemsMenu?Er("",!0):(cn(),ts($e,{key:0,to:"#alt-action"},{default:At(()=>[zt(se,{align:"center"},{default:At(()=>[lt(o)?(cn(),ts(z,{key:0,type:"success",secondary:"",onClick:E[0]||(E[0]=G=>O.value=!0)},{icon:At(()=>[zt(b,{size:"18"},{default:At(()=>[zt(M,{icon:"carbon:template"})]),_:1})]),default:At(()=>[to(" "+Cn(lt(e)("locations")),1)]),_:1})):Er("",!0),zt(z,{type:"warning",secondary:"",onClick:E[1]||(E[1]=G=>te.value=!0)},{icon:At(()=>[zt(b,{size:"18"},{default:At(()=>[zt(M,{icon:"carbon:tag-group"})]),_:1})]),default:At(()=>[to(" "+Cn(lt(e)("groups")),1)]),_:1}),lt(p)&&lt(p).length?(cn(),ts(z,{key:1,type:"primary",secondary:"",onClick:E[2]||(E[2]=G=>$(null))},{icon:At(()=>[zt(b,{size:"18"},{default:At(()=>[zt(M,{icon:"carbon:add-alt"})]),_:1})]),default:At(()=>[to(" "+Cn(lt(e)("addMenu")),1)]),_:1})):Er("",!0)]),_:1})]),_:1})),lt(T).itemsMenu?(cn(),ts(l_,{key:1,modelValue:lt(T).itemsMenu,"onUpdate:modelValue":E[3]||(E[3]=G=>lt(T).itemsMenu=G)},null,8,["modelValue"])):(cn(),zs("section",b_,[zt(D,{appear:"",name:"slide-fade"},{default:At(()=>[As("section",null,[lt(p)&&lt(p).length?(cn(),zs(ki,{key:0},[(cn(!0),zs(ki,null,h_(lt(p).slice((lt(v)-1)*lt(c),lt(v)*lt(c)),G=>(cn(),ts(I,{key:G.id,embedded:"",size:"small",class:"mb-2"},{header:At(()=>[As("div",k_,[zt(se,null,{default:At(()=>[zt(z,{size:"small",type:"primary",secondary:"",onClick:wi(at=>$(G),["stop"])},{default:At(()=>[zt(b,null,{default:At(()=>[zt(M,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),zt(z,{size:"small",type:"error",secondary:"",onClick:wi(at=>m(G),["stop"])},{default:At(()=>[zt(b,null,{default:At(()=>[zt(M,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),zt(le,{vertical:"",class:xi(lt(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),As("div",w_,[As("span",{class:xi(`${G.location?"text-sm":"text-base"} font-bold`)},Cn(lt(n)(G.title)),3),G.location?(cn(),zs("small",x_,Cn(G.location?.name),1)):Er("",!0)])])]),"header-extra":At(()=>[zt(z,{size:"small",type:"primary",secondary:"",onClick:wi(at=>lt(T).itemsMenu=G,["stop"])},{icon:At(()=>[zt(b,null,{default:At(()=>[zt(M,{icon:"carbon:arrow-right"})]),_:1})]),default:At(()=>[to(" "+Cn(lt(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),zt(C,{page:lt(v),"onUpdate:page":E[4]||(E[4]=G=>Ur(v)?v.value=G:null),class:"mt-5 justify-end","show-size-picker":"","page-size":lt(c),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(lt(p).length/lt(c)),"onUpdate:pageSize":fe},{prefix:At(()=>[to(Cn(`${lt(p).length} ${lt(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(cn(),ts(I,{key:1,size:"large",class:xi(`mb-2 !border-dashed !border-2 ${lt(t)("!border-zinc-300","!border-zinc-600")}`)},{default:At(()=>[zt(Ee,{description:lt(e)("noMenuAvailable")},{icon:At(()=>[zt(b,null,{default:At(()=>[zt(M,{icon:"carbon:model-alt"})]),_:1})]),extra:At(()=>[As("div",$_,[zt(z,{size:"small",onClick:E[5]||(E[5]=G=>$(null))},{icon:At(()=>[zt(b,null,{default:At(()=>[zt(M,{icon:"carbon:add-alt"})]),_:1})]),default:At(()=>[to(" "+Cn(lt(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),zt(L,{show:lt(d),"onUpdate:show":E[10]||(E[10]=G=>Ur(d)?d.value=G:null),loading:lt(F)||lt(H)||lt(ce),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:lt(K)?lt(e)("editMenu"):lt(e)("addMenu"),"positive-text":lt(e)("validate"),"negative-text":lt(e)("cancel"),onPositiveClick:Q,onNegativeClick:E[11]||(E[11]=G=>d.value=!1)},{default:At(()=>[zt(J,{ref_key:"formRef",ref:B,model:lt(A),rules:Z,"show-require-mark":!1,size:"medium",class:"my-5"},{default:At(()=>[zt(s,{"show-label":!1,path:"title"},{default:At(()=>[zt(P,{modelValue:lt(A).title,"onUpdate:modelValue":E[6]||(E[6]=G=>lt(A).title=G),placeholder:lt(e)("title"),class:"w-full",sync:""},{label:At(()=>[to(Cn(lt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),zt(s,{"show-label":!1,path:"description"},{default:At(()=>[zt(P,{modelValue:lt(A).description,"onUpdate:modelValue":E[7]||(E[7]=G=>lt(A).description=G),placeholder:lt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:At(()=>[to(Cn(lt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),zt(R,{"x-gap":"12",span:24},{default:At(()=>[zt(x,{span:12,label:lt(e)("key"),path:"name"},{default:At(()=>[zt(r,{value:lt(A).name,placeholder:lt(e)("key"),class:"w-full","onUpdate:value":E[8]||(E[8]=G=>lt(A).name=lt(a)(G))},null,8,["value","placeholder"])]),_:1},8,["label"]),zt(x,{span:12,label:lt(e)("location"),path:"menuLocationId"},{default:At(()=>[zt(N,{value:lt(A).menuLocationId,"onUpdate:value":E[9]||(E[9]=G=>lt(A).menuLocationId=G),options:lt(l),placeholder:lt(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),zt(f_,{show:lt(O),"onUpdate:show":E[12]||(E[12]=G=>Ur(O)?O.value=G:null)},null,8,["show"]),zt(hf,{show:lt(te),"onUpdate:show":E[13]||(E[13]=G=>Ur(te)?te.value=G:null)},null,8,["show"])]))],64)}}}),S_="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var po=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(po||{}),Ha=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(Ha||{});const E_=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["video-categories"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/video-categories",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},U_=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["video-categories"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/video-categories/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},T_=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["video-categories"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/video-categories/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},M_=()=>{const{request:u}=Ye(),e=Ze();return Wa(async n=>{const t=await u({method:"put",url:"/video-categories/position",data:n});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:D_}=await me("vue"),{unref:W,isRef:Tr,createVNode:Me,resolveComponent:Ic,withCtx:qe,toDisplayString:ea,createTextVNode:on,openBlock:ia,createBlock:In,createCommentVNode:Vo,renderList:Vc,Fragment:So,createElementBlock:lo,normalizeClass:Eo,withModifiers:Ps,createElementVNode:Ra,normalizeStyle:N_}=await me("vue"),z_={class:"flex items-center"},A_={class:"flex flex-col"},P_={class:"text-sm font-bold"},L_={class:"text-xs font-normal"},B_={class:"text-xs my-1"},F_={class:"flex items-center"},O_={class:"flex flex-col"},q_={class:"text-sm font-bold"},R_={class:"text-xs font-normal"},j_={key:0,class:"mt-4"},K_={class:"flex items-center"},{storeToRefs:Y_}=await me("pinia"),{inject:G_,ref:Vn,computed:Sc,watch:H_}=await me("vue"),Q_="categories",W_=D_({__name:"Categories",setup(u){const e=Ze(),n=Qe(),t=oa(),{tr:o,fileUrl:a,pickByTheme:l,appPrimaryColor:p}=ot(),{t:S,locale:ce}=Ie(),{data:oe,isPending:F,refetch:we}=_u(),{mutate:H,isPending:k}=T_(),{mutate:c,isPending:v}=U_(),{mutate:fe,isPending:X}=E_(),{mutate:d}=M_(),{isLightTheme:O}=Y_(jo()),te=G_("appConfig"),B=Vn(""),A=Vn(),Z=Sc(()=>{if(!B.value)return K.value;const P=K.value.filter(s=>s.name.toLowerCase().includes(B.value.toLowerCase())||s.description?.toLowerCase().includes(B.value.toLowerCase())||s.children?.some(r=>r.name.toLowerCase().includes(B.value.toLowerCase())||r.description?.toLowerCase().includes(B.value.toLowerCase())));return A.value&&A.value.focus(),P}),K=Sc(()=>{const P=oe.value?.filter(s=>!s.parentId)||[];for(let s=0;s<P.length;s++)P[s].children=oe.value?.filter(r=>r.parentId===P[s].id);return P});H_(()=>F.value||X.value||v.value||k.value,P=>{P?e.start():e.finish()});const $=Vn(24),Q=Vn(1),m=P=>{$.value=P},T=Vn(null),y=Vn(!1),E=Vn(null),M=Vn(null),b=Vn({name:"",description:"",isActive:!0,position:0,image:"",color:""}),z={name:[{required:!0,message:S("fillRequired")}]},se=(P,s=null)=>{E.value=pe.cloneDeep(P),P?b.value=pe.cloneDeep(P):b.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},T.value=s,y.value=!0},$e=async P=>{t.warning({title:S("confirm"),content:P.parentId?S("confirmDeleteSubCategory"):S("confirmDeleteCategory"),positiveText:S("yes"),negativeText:S("no"),onPositiveClick:async()=>{P.id&&H({id:P.id})}})},le=async()=>(M.value?.validate(async P=>{if(!P){const s={name:b.value.name,description:b.value.description,isActive:b.value.isActive,position:b.value.position,image:b.value.image,color:b.value.color,parentId:T.value};E.value?E.value.name!==b.value.name&&(oe.value||[]).findIndex(r=>r.name==b.value.name)>-1?n.error(S("sameCategoryNameMessage")):c({id:E.value.id,...s}):(oe.value||[]).findIndex(r=>r.name==b.value.name)>-1?n.error(S("sameCategoryNameMessage")):fe(s),y.value=!1}}),!1),I=async(P,s)=>{d({items:s},{onSuccess(){we()}})},C=Vn(!1),Ee=async P=>{b.value.image=P,C.value=!1},D=()=>{b.value.image=""};return(P,s)=>{const r=ge,x=cr,N=Qa,R=Xa,J=Ml,L=Vl,G=Ic("Draggable"),at=_n,ct=fn,xe=Ko,bt=Za,Ae=_o,dt=Ja,q=mo,V=Pa,w=Ea,ae=Hr,Vt=Xn,_e=Ic("color-picker"),St=Sa,Ct=Xi,j=Qi,re=Va,tt=Xl;return ia(),lo(So,null,[Me(N,{to:"#search-category-action"},{default:qe(()=>[Me(x,{class:"!w-[250px]"},{default:qe(()=>[Me(W(ll),{ref_key:"searchInputRef",ref:A,value:W(B),"onUpdate:value":s[0]||(s[0]=ve=>Tr(B)?B.value=ve:null),clearable:!0,placeholder:W(S)("searchCategory")},null,8,["value","placeholder"]),Me(W(Ke),{type:"primary",secondary:""},{icon:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),Me(N,{to:"#add-category-action"},{default:qe(()=>[W(Z).length?(ia(),In(W(Ke),{key:0,type:"primary",secondary:"",onClick:s[1]||(s[1]=ve=>se(null))},{icon:qe(()=>[Me(W(Y),{size:"18"},{default:qe(()=>[Me(r,{icon:"carbon:add-alt"})]),_:1})]),default:qe(()=>[on(" "+ea(W(S)("addCategory")),1)]),_:1})):Vo("",!0)]),_:1}),Me(dt,{name:"slide-fade",appear:""},{default:qe(()=>[Ra("section",null,[Me(Ae,{show:W(F)},{default:qe(()=>[W(Z)&&W(Z).length?(ia(),lo(So,{key:0},[Me(G,{list:W(K),onChange:s[2]||(s[2]=ve=>I(ve,W(K)))},{default:qe(()=>[(ia(!0),lo(So,null,Vc(W(Z).slice((W(Q)-1)*W($),W(Q)*W($)),ve=>(ia(),In(L,{key:ve.id,embedded:"",size:"small",class:"mb-1"},{default:qe(()=>[Me(ct,{"default-expanded-names":ve.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":qe(({collapsed:Tt})=>[Me(J,{align:"center"},{default:qe(()=>[Me(W(Aa),{size:"small",bordered:!1,type:ve.isActive?"success":"error"},{default:qe(()=>[on(ea(ve.isActive?W(S)("visible"):W(S)("hidden")),1)]),_:2},1032,["type"]),Me(R,{vertical:"",class:Eo(["!mx-0",W(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Me(W(Ke),{size:"small",type:"primary",secondary:"",onClick:Ps(vl=>se(ve),["stop"])},{default:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Me(W(Ke),{size:"small",type:"error",secondary:"",onClick:Ps(vl=>$e(ve),["stop"])},{default:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Me(W(Ke),{size:"small",type:"info",secondary:"",onClick:Ps(vl=>se(null,ve.id),["stop"])},{icon:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:category"})]),_:1})]),default:qe(()=>[on(" "+ea(W(S)("subCategory"))+" ",1),Me(W(Aa),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:qe(()=>[on(ea(ve.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),s[16]||(s[16]=Ra("div",{class:"w-6"},null,-1)),Me(W(Y),null,{default:qe(()=>[Tt?(ia(),In(r,{key:0,icon:"fa-solid:chevron-left"})):(ia(),In(r,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:qe(()=>[...s[17]||(s[17]=[Ra("span",null,null,-1)])]),default:qe(()=>[Me(at,{name:"1"},{header:qe(()=>[Ra("div",z_,[Me(W(Y),{size:"21",class:"cursor-move mr-4"},{default:qe(()=>[Me(r,{icon:"fa-solid:grip-lines"})]),_:1}),Me(R,{vertical:"",class:Eo(W(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ra("div",A_,[Ra("span",P_,ea(W(o)(ve.name))+"Â ("+ea(ve.itemsCount)+"Â "+ea(W(S)("video_s"))+") ",1),Ra("small",L_,ea(ve.slug),1)])])]),default:qe(()=>[ve.description?(ia(),lo(So,{key:0},[Me(R,{class:Eo([W(l)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Ra("div",B_,ea(W(o)(ve.description)),1)],64)):Vo("",!0),ve.children?.length?(ia(),lo(So,{key:1},[Me(R,{class:Eo([W(l)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Me(G,{list:ve.children,onChange:Tt=>I(Tt,ve.children||[])},{default:qe(()=>[(ia(!0),lo(So,null,Vc(ve.children,Tt=>(ia(),In(L,{key:Tt.id,size:"small",class:"mb-1"},{header:qe(()=>[Ra("div",F_,[Me(W(Y),{size:"21",class:"cursor-move mr-4"},{default:qe(()=>[Me(r,{icon:"fa-solid:grip-lines"})]),_:1}),Me(R,{vertical:"",class:Eo(W(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ra("div",O_,[Ra("span",q_,ea(W(o)(Tt.name)),1),Ra("small",R_,ea(Tt.slug),1)])])]),"header-extra":qe(()=>[Me(J,{align:"center"},{default:qe(()=>[Me(W(Aa),{size:"small",bordered:!1,type:Tt.isActive?"success":"error"},{default:qe(()=>[on(ea(Tt.isActive?W(S)("visible"):W(S)("hidden")),1)]),_:2},1032,["type"]),Me(R,{vertical:"",class:Eo(["!mx-0",W(l)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Me(W(Ke),{size:"small",type:"primary",secondary:"",onClick:Ps(vl=>se(Tt,ve.id),["stop"])},{default:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Me(W(Ke),{size:"small",type:"error",secondary:"",onClick:Ps(vl=>$e(Tt),["stop"])},{default:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):Vo("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Me(xe,{page:W(Q),"onUpdate:page":s[3]||(s[3]=ve=>Tr(Q)?Q.value=ve:null),class:"mt-5 justify-end","show-size-picker":"","page-size":W($),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(W(K).length/W($)),"onUpdate:pageSize":m},{prefix:qe(()=>[on(ea(`${W(K).length} ${W(S)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(ia(),In(L,{key:1,size:"large",class:Eo(`mb-2 !border-dashed !border-2 ${W(l)("!border-zinc-300","!border-zinc-600")}`)},{default:qe(()=>[Me(bt,{description:W(S)("noCategoryAvailable")},{icon:qe(()=>[Me(W(Y),null,{default:qe(()=>[W(B)?(ia(),In(r,{key:0,icon:"carbon:search"})):(ia(),In(r,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:qe(()=>[W(B)?Vo("",!0):(ia(),lo("div",j_,[Me(W(Ke),{size:"small",secondary:"",onClick:s[4]||(s[4]=ve=>se(null))},{icon:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:add-alt"})]),_:1})]),default:qe(()=>[on(" "+ea(W(S)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),Me(q,{show:W(C),"onUpdate:show":s[5]||(s[5]=ve=>Tr(C)?C.value=ve:null),title:W(S)("selectImage"),"upload-config":{folder:Q_,limit:0,maxSize:0,baseUrl:W(te)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:Ee},null,8,["show","title","upload-config"]),Me(tt,{show:W(y),"onUpdate:show":s[14]||(s[14]=ve=>Tr(y)?y.value=ve:null),loading:W(X)||W(v)||W(k),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:W(E)?W(T)?W(S)("editSubCategory"):W(S)("editCategory"):W(T)?W(S)("addSubCategory"):W(S)("addCategory"),"positive-text":W(S)("validate"),"negative-text":W(S)("cancel"),onPositiveClick:le,onNegativeClick:s[15]||(s[15]=ve=>y.value=!1)},{default:qe(()=>[Me(re,{ref_key:"formRef",ref:M,class:"mt-5",model:W(b),rules:z,"show-require-mark":!1,size:"medium"},{default:qe(()=>[Me(w,{"show-label":!1,path:"name"},{default:qe(()=>[Me(V,{modelValue:W(b).name,"onUpdate:modelValue":s[6]||(s[6]=ve=>W(b).name=ve),placeholder:W(S)("name"),class:"w-full",sync:""},{label:qe(()=>[on(ea(W(S)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Me(w,{"show-label":!1,path:"description"},{default:qe(()=>[Me(V,{modelValue:W(b).description,"onUpdate:modelValue":s[7]||(s[7]=ve=>W(b).description=ve),placeholder:W(S)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:qe(()=>[on(ea(W(S)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Me(St,{"x-gap":"12",span:24},{default:qe(()=>[Me(Vt,{span:12,label:W(S)("position"),path:"position"},{default:qe(()=>[Me(ae,{value:W(b).position,"onUpdate:value":s[8]||(s[8]=ve=>W(b).position=ve),placeholder:W(S)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Me(Vt,{span:12,label:W(S)("color"),path:"color"},{default:qe(()=>[Ra("div",K_,[W(b).color?(ia(),lo(So,{key:0},[Me(W(Ke),{text:"",type:"error",style:{"font-size":"21px"},onClick:s[9]||(s[9]=ve=>W(b).color="")},{default:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Me(R,{vertical:""})],64)):Vo("",!0),Me(_e,{"pure-color":W(b).color,"onUpdate:pureColor":s[10]||(s[10]=ve=>W(b).color=ve),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:W(O)?"white":"black",lang:W(ce)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),Me(R,{dashed:"",class:"!my-2"}),Me(St,{"x-gap":"12",span:24},{default:qe(()=>[Me(Vt,{span:12,label:W(S)("preview"),path:"image"},{default:qe(()=>[Me(J,{align:"center",justify:"center",style:{height:"100%"}},{default:qe(()=>[Me(Ct,{class:"cursor-pointer","object-fit":"cover",style:N_("border: 1px dashed "+W(l)(W(p),"white")),size:150,src:W(a)(W(b).image||""),onClick:s[11]||(s[11]=ve=>C.value=!0)},{default:qe(()=>[W(b).image?Vo("",!0):(ia(),In(W(Y),{key:0,size:64},{default:qe(()=>[Me(r,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),W(b).image?(ia(),In(W(Ke),{key:0,quaternary:"",onClick:s[12]||(s[12]=ve=>D())},{icon:qe(()=>[Me(W(Y),null,{default:qe(()=>[Me(r,{icon:"carbon:trash-can"})]),_:1})]),default:qe(()=>[on(" "+ea(W(S)("clear")),1)]),_:1})):Vo("",!0)]),_:1})]),_:1},8,["label"]),Me(Vt,{span:12,label:W(S)("status"),path:"isActive"},{default:qe(()=>[Me(j,{value:W(b).isActive,"onUpdate:value":s[13]||(s[13]=ve=>W(b).isActive=ve),size:"small"},{checked:qe(()=>[on(ea(W(S)("visible")),1)]),unchecked:qe(()=>[on(ea(W(S)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),J_=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=Ze(),t=Qe();return Wa(async o=>{const a=await u({url:"/video-settings",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{t.success(e("success"))},onError:(o,a)=>{t.error(e("unableToUpdateSettings"))}})};class X_{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,n,t=Ha.SELF_HOSTED,o=po.HORIZONTAL,a,l,p,S,ce,oe,F,we,H,k,c,v){this.id=l,this.foreignId=oe,this.publisherId=ce,this.title=e,this.slug=S,this.description=F,this.thumbnail=we,this.thumbnailUrl=H,this.path=n,this.url=p,this.source=t,this.visible=a,this.displayType=o,this.publishedAt=k,this.createdAt=c,this.updatedAt=v}}const Z_=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=Ze(),t=Qe();return Wa(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:()=>t.success(e("success")),onError:()=>t.error(e("unableToUpdateChannelVideos")),retry:1})},ev=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Ze(),a=Qe();return ht({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:l=>"id"in l&&l.id?l.id:`temp-${crypto.randomUUID()}`,mutationFn:async l=>{o.start();try{const p=await n({method:"post",url:"/video-items",data:Zt(l,["id"])});if(!p.success)throw new Error(p.error||t("anErrorOccurred"));return p.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{a.success(t("success"))},onError:l=>{switch(l?.response?.data?.errorCode){case qt.FORM_INVALID_DATA:e(l?.response?.data?.data);break;case qt.REQUEST_PARAMS_MISSING:a.error(t("pleaseProvideApiKeyAndValidVideoUrl"));break;case qt.REQUEST_DATA_RETRIEVAL_FAILED:a.error(t("videoDataCantBeRetrieve"));break;case qt.REQUEST_DATA_ALREADY_EXISTS:a.error(t("videoAlreadyExists"));break;default:a.error(t("anErrorOccurred"))}},...u}})},tv=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{t.start();try{const l=await e({method:"put",url:`/video-items/${a.id}`,data:Zt(a,["id"])});if(!l.success)throw new Error(l.error||n("anErrorOccurred"));return l.result.data}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},lv=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{t.start();const l=await e({method:"delete",url:`/video-items/force/${a}`});if(t.finish(),!l.success)throw new Error(l.error);return l.result?.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},av=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof X_){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("VideoItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(l=>a[l])}),mutationFn:async a=>{t.start();const l=Object.keys(a).filter(p=>a[p]);try{for(const p of l)await e({method:"delete",url:`/video-items/force/${p}`});return l}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},{defineComponent:nv}=await me("vue"),{unref:Ul,resolveComponent:nk,createVNode:ul,withCtx:wl,toDisplayString:Uo,createTextVNode:Ec,createElementVNode:To,normalizeClass:ov,Fragment:Uc,openBlock:Tc,createElementBlock:Mc,createCommentVNode:sv}=await me("vue"),{ref:Dc,computed:Nc}=await me("vue"),rv=nv({__name:"Settings",setup(u){const{t:e,locale:n}=Ie(),t=Md({enabled:!1}),{mutate:o,isPending:a}=J_(),{mutate:l,isPending:p}=Z_(),S=Dc({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),ce=Dc(S.value),oe=Nc(()=>pe.isEqual(S.value,ce.value)),F=async()=>{o(S.value,{onSuccess:()=>we()})},we=async()=>{await t.refetch(),t.data.value?.forEach(c=>{S.value[c.key]!=null&&(S.value[c.key]=c.value)}),ce.value=pe.cloneDeep(S.value)};we();const H=()=>{l(void 0,{onSuccess:()=>we()})},k=Nc(()=>!!(a.value||p.value||t.isPending.value));return(c,v)=>{const fe=ge,X=Y,d=Ke,O=Qa,te=ll,B=Ml,A=Vl,Z=mn,K=Qi,$=Sa,Q=Ja;return Tc(),Mc(Uc,null,[ul(O,{to:"#save-settings-action"},{default:wl(()=>[ul(d,{loading:Ul(k),disabled:Ul(oe),type:"primary",secondary:"",onClick:F},{icon:wl(()=>[ul(X,null,{default:wl(()=>[ul(fe,{icon:"carbon:save"})]),_:1})]),default:wl(()=>[Ec(" "+Uo(Ul(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),ul(Q,{name:"slide-fade",appear:""},{default:wl(()=>[ul(A,{hoverable:"",embedded:""},{header:wl(()=>[Ec(Uo(Ul(e)("youtube")),1)]),default:wl(()=>[ul($,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:wl(()=>[ul(Z,null,{default:wl(()=>[ul(A,{class:"w-full h-full",size:"small"},{default:wl(()=>[ul(B,{align:"center",justify:"space-between"},{default:wl(()=>[To("span",null,Uo(Ul(e)("apiKey")),1),ul(te,{value:Ul(S).youtubeApiKey,"onUpdate:value":v[0]||(v[0]=m=>Ul(S).youtubeApiKey=m),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),ul(Z,null,{default:wl(()=>[ul(A,{class:"w-full h-full py-1.5",size:"small"},{default:wl(()=>[ul(B,{align:"center",justify:"space-between"},{default:wl(()=>[To("span",null,Uo(Ul(e)("autoUpdateChannelVideos")),1),ul(K,{value:Ul(S).youtubeChannelVideosAutoUpdate,"onUpdate:value":v[1]||(v[1]=m=>Ul(S).youtubeChannelVideosAutoUpdate=m),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:wl(()=>[...v[3]||(v[3]=[To("div",{class:"w-6"},null,-1)])]),unchecked:wl(()=>[...v[4]||(v[4]=[To("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),Ul(S).youtubeChannelVideosAutoUpdate=="1"?(Tc(),Mc(Uc,{key:0},[ul(Z,null,{default:wl(()=>[ul(A,{class:"w-full h-full",size:"small"},{default:wl(()=>[ul(B,{align:"center",justify:"space-between"},{default:wl(()=>[To("span",null,Uo(Ul(e)("channelId")),1),ul(te,{value:Ul(S).youtubeChannelId,"onUpdate:value":v[2]||(v[2]=m=>Ul(S).youtubeChannelId=m),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),ul(Z,null,{default:wl(()=>[ul(A,{class:"w-full h-full",size:"small"},{default:wl(()=>[ul(B,{align:"center",justify:"space-between"},{default:wl(()=>[To("span",null,Uo(Ul(e)("lastUpdate")),1),To("b",null,Uo(Ul(S).youtubeLastChannelVideosUpdate?Ul(pn)(Ul(S).youtubeLastChannelVideosUpdate,{locale:Ul(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):Ul(e)("never")),1),ul(d,{strong:"",circle:"",secondary:"",type:"primary",title:Ul(e)("refresh"),disabled:Ul(k),onClick:H},{icon:wl(()=>[ul(X,null,{default:wl(()=>[ul(fe,{icon:"carbon:restart",class:ov({"animate-spin":Ul(k)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):sv("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),iv=()=>{const{t:u}=Ie(),e=[{label:u("horizontal"),value:po.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:po.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(a=>a.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(a=>a.value===o)?.label,videoDisplayTypes:e}},{unref:cv}=await me("vue"),{defineComponent:dv}=await me("vue"),{unref:h,vShow:Ls,createElementVNode:$a,withDirectives:Bs,toDisplayString:Ll,createTextVNode:Gl,resolveComponent:ok,isRef:Yn,withCtx:Ne,createVNode:be,openBlock:Bl,createElementBlock:Ta,createCommentVNode:Mr,normalizeClass:uv,renderList:zc,Fragment:ls,withModifiers:pv,createBlock:as,normalizeStyle:Ac}=await me("vue"),mv={id:"save-settings-action"},fv={id:"add-category-action"},_v={class:"flex items-center gap-3"},vv={id:"search-category-action"},yv={key:0,class:"w-full flex items-center justify-between mt-2"},gv={class:"flex items-center gap-3"},hv={key:0,class:"mt-12"},bv={key:1,class:"mt-12"},kv={key:2},wv={key:0},xv=["onClick"],$v={class:"absolute top-0 left-0 w-full h-full bg-black opacity-35 flex items-center justify-center"},Cv={class:"absolute bottom-0 right-0 p-3 w-full"},Iv={class:"text-center text-dimgray text-sm"},Vv={key:1,class:"flex items-center justify-center"},Sv={class:"mt-5"},Ev={class:"w-full flex flex-gap-8 items-center justify-start"},Uv=["src"],Tv={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},Mv=["src"],{inject:Dv,ref:Fl,computed:Dr,watch:Nv,h:Pc}=await me("vue"),{defineStore:zv}=await me("pinia"),Av=dv({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,fileUrl:t,pickByTheme:o,getVideoThumbnail:a,appPrimaryColor:l}=ot(),{videoDisplayTypes:p}=iv(),{orderedCategories:S}=vu(),ce=Md(),{mutate:oe,isPending:F}=lv(),{mutate:we,isPending:H}=av(),{mutate:k,isPending:c}=ev(),{mutate:v,isPending:fe}=tv(),X=Qe(),d=oa(),O=Dv("appConfig"),te=Fl(""),B=Ou(te,500),A=Fl(null),Z=Fl([]),K=Fl([]),$=zv("videos-management-store",()=>({currentTab:Fl("all")}))(),Q=Fl(0),m=Fl(24),T=Fl(1),y=Dr(()=>({pageSize:m.value,query:B.value,source:$.currentTab,page:T.value})),E=w=>{T.value=w,z()},M=w=>{m.value=w,z()},{data:b,refetch:z,isPending:se}=yu(y);Nv(()=>b.value,w=>{Z.value=w?.videoItems||[],Q.value=w?.meta?.total||0,T.value=w?.meta?.currentPage||1},{deep:!0,immediate:!0});const $e=Fl(!1),le=Fl(null),I=Fl(null),C=Fl({title:"",description:"",visible:!0,source:Ha.SELF_HOSTED,displayType:po.HORIZONTAL,thumbnail:"",path:""}),Ee=Dr(()=>({title:[{required:C.value.source==Ha.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),D=w=>{le.value=pe.cloneDeep(w),w?(C.value=pe.cloneDeep(w),K.value=w.categories?.map(ae=>ae.id)??[]):(C.value={title:"",description:"",visible:!0,source:$.currentTab=="youtube"?Ha.YOUTUBE:Ha.SELF_HOSTED,displayType:po.HORIZONTAL,thumbnail:"",path:""},K.value=[]),$e.value=!0},P=async w=>{d.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{oe(w)}})},s=async()=>(I.value?.validate(async w=>{if(!w){const ae={title:C.value.title,description:C.value.description,visible:C.value.visible,source:C.value.source,displayType:C.value.displayType,thumbnail:C.value.thumbnail,path:C.value.path,categories:K.value};le.value?(ae.id=le.value.id,v(ae)):k(ae),$e.value=!1}}),!1),r=Fl(!1),x=Fl(!1),N=Fl(""),R=Fl(""),J=Fl("classic"),L=w=>{N.value=n(w.title)??e("video"),R.value=t(w.path),J.value=w.source==Ha.YOUTUBE?"youtube":"classic",x.value=!0},G=Fl(!1),at=Fl(!1),ct=Fl(Al()),xe=Fl({}),bt=Dr(()=>{let w=0;for(const ae in xe.value)xe.value[ae]&&w++;return w});function Ae(){xe.value={},z()}const dt=async()=>(bt.value?d.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[bt.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{we(xe.value,{onSuccess:()=>{xe.value={}}})}}):X.warning(e("noItemSelected")),!1),q=w=>[w.parentId?Pc(Y,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>Pc(ge,{icon:"mdi:arrow-right"})}):null,`${n(w.name)}`],V=Dr(()=>!!(c.value||fe.value||F.value||H.value||ce.isPending.value));return(w,ae)=>{const Vt=vo,_e=Ke,St=Qa,Ct=Wi,j=ll,re=cr,tt=Wr,ve=Fu,Tt=Aa,vl=Ml,Ge=dr,kt=Vl,Rt=Ja,ha=mn,ol=Sa,Pl=Ko,rt=_o,jt=Za,ne=Ea,U=Xn,We=en,De=Pa,wt=ps,al=Va,sa=Xl,Se=mo;return Bl(),Ta(ls,null,[be(St,{to:"#alt-action"},{default:Ne(()=>[Bs($a("div",mv,null,512),[[Ls,h($).currentTab=="settings"]]),Bs($a("div",fv,null,512),[[Ls,h($).currentTab=="categories"]]),Bs($a("div",_v,[be(Vt,{checked:h(at),"onUpdate:checked":[ae[0]||(ae[0]=Ue=>Yn(at)?at.value=Ue:null),ae[1]||(ae[1]=Ue=>{for(const ba of h(Z))ba.id&&(h(xe)[ba.id]=Ue);ct.value=("uuidv4"in w?w.uuidv4:cv(Al))()})]},{default:Ne(()=>[Gl(Ll(h(e)("selectAll")),1)]),_:1},8,["checked"]),be(_e,{type:"primary",secondary:"",loading:h(c),disabled:h(V),onClick:ae[2]||(ae[2]=Ue=>D(null))},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:video-add"})]),_:1})]),default:Ne(()=>[Gl(" "+Ll(h(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[Ls,["all","self-hosted","youtube"].includes(h($).currentTab)]])]),_:1}),$a("section",{class:uv(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${h(o)("bg-white","bg-zinc-800")}`)},[be(tt,{value:h($).currentTab,"onUpdate:value":[ae[6]||(ae[6]=Ue=>h($).currentTab=Ue),ae[7]||(ae[7]=()=>h(z)())],type:"card",size:"medium"},{suffix:Ne(()=>[Bs($a("div",null,[be(re,{class:"!w-[250px]"},{default:Ne(()=>[be(j,{ref_key:"searchInputRef",ref:A,value:h(te),"onUpdate:value":[ae[3]||(ae[3]=Ue=>Yn(te)?te.value=Ue:null),ae[4]||(ae[4]=Ue=>{Ue||h(z)()})],clearable:!0,placeholder:h(e)("searchVideo")},null,8,["value","placeholder"]),be(_e,{type:"primary",secondary:"",onClick:ae[5]||(ae[5]=Ue=>h(z)())},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[Ls,["all","self-hosted","youtube"].includes(h($).currentTab)]]),Bs($a("div",vv,null,512),[[Ls,h($).currentTab=="categories"]])]),default:Ne(()=>[be(Ct,{name:"all"},{default:Ne(()=>[be(h(Y),{size:"18",class:"mr-1"},{default:Ne(()=>[be(h(ge),{icon:"carbon:collapse-all"})]),_:1}),Gl(" "+Ll(h(e)("all_")),1)]),_:1}),be(Ct,{name:h(Ha).SELF_HOSTED},{default:Ne(()=>[be(h(Y),{size:"18",class:"mr-1"},{default:Ne(()=>[be(h(ge),{icon:"carbon:document-video"})]),_:1}),Gl(" "+Ll(h(e)("selfHosted")),1)]),_:1},8,["name"]),be(Ct,{name:h(Ha).YOUTUBE},{default:Ne(()=>[be(h(Y),{size:"18",class:"mr-1"},{default:Ne(()=>[be(h(ge),{icon:"carbon:logo-youtube"})]),_:1}),Gl(" "+Ll(h(e)("youtube")),1)]),_:1},8,["name"]),be(Ct,{name:"categories"},{default:Ne(()=>[be(h(Y),{size:"18",class:"mr-1"},{default:Ne(()=>[be(h(ge),{icon:"carbon:categories"})]),_:1}),Gl(" "+Ll(h(e)("categories")),1)]),_:1}),be(Ct,{name:"settings"},{default:Ne(()=>[be(h(Y),{size:"18",class:"mr-1"},{default:Ne(()=>[be(h(ge),{icon:"carbon:settings-adjust"})]),_:1}),Gl(" "+Ll(h(e)("settings")),1)]),_:1})]),_:1},8,["value"]),h(bt)>0?(Bl(),Ta("section",yv,[$a("span",null,Ll(h(e)("nbItemsSelected",[h(bt)])),1),$a("section",gv,[be(_e,{type:"error",size:"small",loading:h(H),secondary:"",onClick:dt},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:trash-can"})]),_:1})]),default:Ne(()=>[Gl(" "+Ll(h(e)("delete")),1)]),_:1},8,["loading"]),be(_e,{type:"warning",size:"small",secondary:"",onClick:Ae},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:close"})]),_:1})]),default:Ne(()=>[Gl(" "+Ll(h(e)("cancelSelection")),1)]),_:1})])])):Mr("",!0)],2),h($).currentTab=="settings"?(Bl(),Ta("section",hv,[be(rv)])):h($).currentTab=="categories"?(Bl(),Ta("section",bv,[be(W_)])):(Bl(),Ta("section",kv,[be(Rt,{name:"slide-fade",appear:""},{default:Ne(()=>[be(kt,{embedded:"",class:"py-10 mt-6"},{default:Ne(()=>[h(Z).length&&!h(ce).isPending.value?(Bl(),Ta("section",wv,[be(ol,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Ne(()=>[(Bl(!0),Ta(ls,null,zc(h(Z),(Ue,ba)=>(Bl(),as(ha,{key:ba},{default:Ne(()=>[be(Rt,{name:"slide-fade",appear:""},{default:Ne(()=>[be(kt,{bordered:"",hoverable:""},{cover:Ne(()=>[$a("div",{class:"flex items-center justify-center w-full h-full relative cursor-pointer",onClick:Rl=>L(Ue)},[be(ve,{load:()=>h(a)(Ue.path),fallback:Ue.thumbnailUrl??h(S_),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),$a("div",$v,[be(h(Y),{size:72},{default:Ne(()=>[be(h(ge),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),$a("div",Cv,[be(vl,null,{default:Ne(()=>[(Bl(!0),Ta(ls,null,zc(Ue.categories,Rl=>(Bl(),as(Tt,{size:"small",bordered:!1,key:Rl.id,onClick:pv(()=>{},["stop"])},{default:Ne(()=>[Gl(Ll(h(n)(Rl.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,xv)]),header:Ne(()=>[$a("div",Iv,[be(Ge,{"line-clamp":1,"expand-trigger":"click"},{default:Ne(()=>[Ue.id?(Bl(),as(Vt,{key:h(ct),checked:h(xe)[Ue.id],"onUpdate:checked":Rl=>h(xe)[Ue.id]=Rl,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Mr("",!0),Gl(" "+Ll(h(n)(Ue.title)),1)]),_:2},1024)])]),action:Ne(()=>[be(vl,{justify:"space-between",align:"center"},{default:Ne(()=>[be(vl,null,{default:Ne(()=>[be(Tt,{bordered:!1,type:Ue.visible?"success":"error"},{default:Ne(()=>[Gl(Ll(Ue.visible?h(e)("visible"):h(e)("hidden")),1)]),_:2},1032,["type"]),be(Tt,{bordered:!1,type:Ue.displayType==h(po).HORIZONTAL?"info":"warning"},{default:Ne(()=>[Gl(Ll(Ue.displayType==h(po).HORIZONTAL?h(e)("horizontal"):h(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),be(vl,null,{default:Ne(()=>[be(_e,{size:"small",type:"primary",secondary:"",title:h(e)("play"),onClick:Rl=>L(Ue)},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),Ue.source!=h(Ha).YOUTUBE?(Bl(),as(_e,{key:0,size:"small",type:"primary",secondary:"",title:h(e)("edit"),loading:h(fe),onClick:Rl=>D(Ue)},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","loading","onClick"])):Mr("",!0),be(_e,{size:"small",type:"error",secondary:"",title:h(e)("delete"),loading:h(F),onClick:Rl=>P(Ue)},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),be(Pl,{page:h(T),"onUpdate:page":[ae[8]||(ae[8]=Ue=>Yn(T)?T.value=Ue:null),E],class:"mt-10 justify-center","show-size-picker":"","page-size":h(m),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(h(Q)/h(m)),"onUpdate:pageSize":M},{prefix:Ne(()=>[Gl(Ll(`${h(Q)} ${h(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):h(ce).isPending.value?(Bl(),Ta("section",Vv,[be(rt,{size:"medium"})])):(Bl(),as(jt,{key:2,description:h(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),be(sa,{show:h($e),"onUpdate:show":ae[21]||(ae[21]=Ue=>Yn($e)?$e.value=Ue:null),loading:h(se),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:h(le)?h(e)("editVideo"):h(e)("addVideo"),"positive-text":h(e)("validate"),"negative-text":h(e)("cancel"),onPositiveClick:s,onNegativeClick:ae[22]||(ae[22]=Ue=>$e.value=!1)},{default:Ne(()=>[$a("div",Sv,[be(al,{ref_key:"formRef",ref:I,model:h(C),rules:h(Ee),"show-require-mark":!1,size:"medium"},{default:Ne(()=>[be(ne,{label:h(e)("source"),path:"source"},{default:Ne(()=>[be(Vt,{checked:h(C).source,"onUpdate:checked":ae[9]||(ae[9]=Ue=>h(C).source=Ue),"checked-value":h(Ha).YOUTUBE,"unchecked-value":h(Ha).SELF_HOSTED},{default:Ne(()=>[Gl(Ll(h(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),h(C).source==h(Ha).YOUTUBE?(Bl(),Ta(ls,{key:0},[be(ol,{"x-gap":"12",span:24},{default:Ne(()=>[be(U,{span:16,label:h(e)("videoShareLink"),path:"path"},{default:Ne(()=>[be(j,{value:h(C).path,"onUpdate:value":ae[10]||(ae[10]=Ue=>h(C).path=Ue),placeholder:h(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),be(U,{span:8,label:h(e)("displayType"),path:"displayType"},{default:Ne(()=>[be(We,{value:h(C).displayType,"onUpdate:value":ae[11]||(ae[11]=Ue=>h(C).displayType=Ue),placeholder:h(e)("displayType"),options:h(p),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),be(ne,{label:h(e)("categories"),path:"categories"},{default:Ne(()=>[be(We,{value:h(K),"onUpdate:value":ae[12]||(ae[12]=Ue=>Yn(K)?K.value=Ue:null),"render-label":q,placeholder:h(e)("categories"),options:h(S),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])],64)):(Bl(),Ta(ls,{key:1},[be(ne,{"show-label":!1,path:"title"},{default:Ne(()=>[be(De,{modelValue:h(C).title,"onUpdate:modelValue":ae[13]||(ae[13]=Ue=>h(C).title=Ue),placeholder:h(e)("title"),class:"w-full",sync:""},{label:Ne(()=>[Gl(Ll(h(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),be(ne,{"show-label":!1,path:"description"},{default:Ne(()=>[be(De,{modelValue:h(C).description,"onUpdate:modelValue":ae[14]||(ae[14]=Ue=>h(C).description=Ue),placeholder:h(e)("description"),class:"w-full",type:"textarea",sync:""},{label:Ne(()=>[Gl(Ll(h(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),be(ne,{label:h(e)("categories"),path:"categories"},{default:Ne(()=>[be(We,{value:h(K),"onUpdate:value":ae[15]||(ae[15]=Ue=>Yn(K)?K.value=Ue:null),"render-label":q,placeholder:h(e)("categories"),options:h(S),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),be(ol,{"x-gap":"12",span:24},{default:Ne(()=>[be(U,{span:16,label:h(e)("content"),path:"path"},{default:Ne(()=>[be(re,null,{default:Ne(()=>[be(_e,{type:"primary",secondary:"",onClick:ae[16]||(ae[16]=()=>{r.value=!0})},{default:Ne(()=>[Gl(Ll(h(e)("select")),1)]),_:1}),be(j,{value:h(C).path?h(ds)(h(C).path):"",placeholder:h(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),h(C).path?(Bl(),Ta(ls,{key:0},[be(_e,{type:"primary",ghost:"",onClick:ae[17]||(ae[17]=()=>{N.value=h(e)("video"),R.value=h(t)(h(C).path),J.value="classic",x.value=!0})},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:play"})]),_:1})]),default:Ne(()=>[Gl(" "+Ll(h(e)("play")),1)]),_:1}),be(_e,{type:"primary",ghost:"",onClick:ae[18]||(ae[18]=()=>{h(C).path=""})},{icon:Ne(()=>[be(h(Y),null,{default:Ne(()=>[be(h(ge),{icon:"carbon:trash-can"})]),_:1})]),default:Ne(()=>[Gl(" "+Ll(h(e)("clear")),1)]),_:1})],64)):Mr("",!0)]),_:1})]),_:1},8,["label"]),be(U,{span:8,label:h(e)("displayType"),path:"displayType"},{default:Ne(()=>[be(We,{value:h(C).displayType,"onUpdate:value":ae[19]||(ae[19]=Ue=>h(C).displayType=Ue),placeholder:h(e)("displayType"),options:h(p),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),be(ne,{label:h(e)("thumbnail"),path:"thumbnail"},{default:Ne(()=>[$a("div",Ev,[$a("div",{class:"cursor-pointer w-full h-[150px]",onClick:ae[20]||(ae[20]=()=>{G.value=!0})},[h(C).thumbnail?(Bl(),as(wt,{key:0,"object-fit":"cover","preview-disabled":"",class:"py-2 thumbnail-image",style:Ac("border: 1px dashed "+h(o)(h(l),"white")),src:h(t)(h(C).thumbnail||"")},null,8,["style","src"])):(Bl(),Ta("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Ac("border: 1px dashed "+h(o)(h(l),"white"))},[be(h(Y),{size:64},{default:Ne(()=>[be(h(ge),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),be(sa,{show:h(x),"onUpdate:show":ae[23]||(ae[23]=Ue=>Yn(x)?x.value=Ue:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:h(N)},{default:Ne(()=>[h(J)==="youtube"?(Bl(),Ta("iframe",{key:0,width:"100%",height:"380",src:h(R),frameborder:"0",allowfullscreen:""},null,8,Uv)):(Bl(),Ta("video",Tv,[$a("source",{src:h(R)},null,8,Mv)]))]),_:1},8,["show","title"]),be(Se,{show:h(r),"onUpdate:show":ae[24]||(ae[24]=Ue=>Yn(r)?r.value=Ue:null),title:h(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:h(O)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[25]||(ae[25]=Ue=>{h(C).path=Ue,r.value=!1})},null,8,["show","title","upload-config"]),be(Se,{show:h(G),"onUpdate:show":ae[26]||(ae[26]=Ue=>Yn(G)?G.value=Ue:null),title:h(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:h(O)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:ae[27]||(ae[27]=Ue=>{h(C).thumbnail=Ue,G.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Pv=Zn(Av,[["__scopeId","data-v-71bb1f08"]]),{t:et}=Hi.global,Lc=[{key:"maxlength",defaultValue:"",placeholder:et("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:et("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],Lv={text:Lc,textarea:Lc,number:[{key:"min",defaultValue:"",placeholder:et("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:et("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:et("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:et("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:et("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:et("maxTagCount")},{key:"max",defaultValue:"",placeholder:et("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"format",defaultValue:"",placeholder:et("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"format",defaultValue:"",placeholder:et("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"format",defaultValue:"",placeholder:et("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"format",defaultValue:"",placeholder:et("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:et("maxTagCount")},{key:"max",defaultValue:"",placeholder:et("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:et("maxTagCount")},{key:"max",defaultValue:"",placeholder:et("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:et("maxTagCount")},{key:"max",defaultValue:"",placeholder:et("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"library",defaultValue:"all",placeholder:et("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:et("maxTagCount")},{key:"max",defaultValue:"",placeholder:et("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:et("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:et("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:et("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:et("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:et("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:et("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:et("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:et("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:et("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:et("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:et("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:et("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:et("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:et("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:et("sliderStep"),isNumber:!0}]},{t:it}=Hi.global,$i=[{type:"group",label:it("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:it("text"),value:"text"},{label:it("i18nText"),value:"i18n-text"},{label:it("textarea"),value:"textarea"},{label:it("i18nTextarea"),value:"i18n-textarea"},{label:it("editor"),value:"editor"},{label:it("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:it("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:it("number"),value:"number"},{label:it("checkbox"),value:"checkbox"},{label:it("switch"),value:"switch"},{label:it("slider"),value:"slider"},{label:it("rangeSlider"),value:"range-slider"}]},{type:"group",label:it("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:it("singleSelect"),value:"single-select"},{label:it("multiSelect"),value:"multi-select"}]},{type:"group",label:it("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:it("date"),value:"date"},{label:it("daterange"),value:"daterange"},{label:it("datetime"),value:"datetime"},{label:it("datetimerange"),value:"datetimerange"},{label:it("year"),value:"year"},{label:it("yearrange"),value:"yearrange"},{label:it("month"),value:"month"},{label:it("monthrange"),value:"monthrange"},{label:it("quarter"),value:"quarter"},{label:it("quarterrange"),value:"quarterrange"},{label:it("week"),value:"week"}]},{type:"group",label:it("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:it("image"),value:"image"},{label:it("gallery"),value:"gallery"},{label:it("audio"),value:"audio"},{label:it("video"),value:"video"},{label:it("document"),value:"document"},{label:it("file"),value:"file"}]},{type:"group",label:it("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:it("newsArticle"),value:"news-article"},{label:it("newsArticles"),value:"news-articles"},{label:it("newsCategory"),value:"news-category"},{label:it("newsCategories"),value:"news-categories"},{label:it("newsTag"),value:"news-tag"},{label:it("newsTags"),value:"news-tags"}]},{type:"group",label:it("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:it("icon"),value:"icon"},{label:it("icons"),value:"icons"},{label:it("color"),value:"color"},{label:it("gradient"),value:"gradient"}]},{type:"group",label:it("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:it("contentItem"),value:"content-model-item"},{label:it("contentItems"),value:"content-model-items"},{label:it("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:it("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:it("list"),value:"list"},{label:it("i18nList"),value:"i18n-list"},{label:it("albums"),value:"albums"}]}],{useModel:Bv,mergeModels:Fv,defineComponent:Ov}=await me("vue"),{renderList:Fs,Fragment:Gn,openBlock:pl,createElementBlock:Fa,unref:Xe,createVNode:_t,withCtx:vt,resolveComponent:Bc,createElementVNode:_a,createBlock:dn,createCommentVNode:Ci,toDisplayString:va,createTextVNode:Mo,normalizeClass:qv,isRef:Fc}=await me("vue"),Rv={class:"flex items-center"},jv={class:"flex items-center justify-between w-full"},Kv={class:"flex items-center justify-between"},Yv={class:"text-base font-semibold ml-4"},Gv={class:"text-xs text-slate-400"},Hv={class:"text-xs text-slate-400"},Qv={class:"text-xs text-slate-400"},Wv={class:"text-xs text-slate-400"},Jv={key:0},Xv={class:"text-xs text-slate-400"},Zv={key:1},ey={class:"text-xs text-slate-400"},ty={key:2},ly={class:"text-xs text-slate-400"},ay={key:3},ny={class:"text-xs text-slate-400"},oy={key:0,class:"w-full flex items-center"},sy={class:"w-full flex items-center"},ry={class:"w-full"},iy={class:"text-sm"},{storeToRefs:cy}=await me("pinia"),{ref:ns,computed:Ii,h:Os,inject:qs}=await me("vue"),dy=Ov({__name:"Fields",props:Fv({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:n}=Ie(),{tr:t,formatKey:o,pickByTheme:a}=ot(),{isLightTheme:l}=cy(jo()),{data:p}=fo(),S=u,ce=Bv(u,"modelValue"),oe=Q=>{for(const m of $i){const T=m.children.find(y=>y.value===Q);if(T)return T.label}return null},F=ns(!1),we=ns(null),H=ns(null),k=ns(null),c=ns(),v=(Q,m)=>{H.value=k.value=Q,we.value=m;for(const T of $i)T.children.find(E=>E.value===Q)&&(c.value=T.key);F.value=!0},fe=Q=>{X(Q).value=!X(Q).value},X=Q=>Ii({get:()=>Q.value===H.value,set:m=>{m?H.value=Q.value:H.value=null}}),d=Ii(()=>!H.value||H.value===k.value),O=()=>{H.value&&we.value!==null&&(ce.value[we.value].type=H.value),F.value=!1},te=Q=>Os("div",{class:"flex items-center"},[Os(Y,{size:21,class:"text-gray-500"},{default:()=>Os(ge,{icon:Q.icon})}),Os("span",{class:"font-normal ml-2 "},{default:()=>Q.label}),Os("span",{class:"text-gray-500 ml-1"},{default:()=>`(${Q.children.length})`})]),B=qs("renderSelectLabel"),A=qs("removeCollectionField"),Z=qs("removeSingleton"),K=qs("onCreateItemOption"),$=qs("expandedNames",()=>Ii(()=>ns([]).value));return(Q,m)=>{const T=Ke,y=Aa,E=ll,M=mn,b=Pa,z=cr,se=Sa,$e=Xa,le=vo,I=en,C=Bc("color-picker"),Ee=Qr,D=Ja,P=Hr,s=_n,r=fn,x=Vl,N=Bc("Draggable"),R=Ml,J=Bd,L=Ld,G=Eu,at=Wr,ct=Xl;return pl(),Fa(Gn,null,[_t(N,{list:ce.value,class:"w-full"},{default:vt(()=>[(pl(!0),Fa(Gn,null,Fs(ce.value,(xe,bt)=>(pl(),dn(x,{key:`field-${bt}`,size:"small",class:"my-2",hoverable:""},{default:vt(()=>[_t(r,{"expanded-names":Xe($)(S.type=="collection"?`c-${S.parentItemIndex}-f-${bt}`:`s-${bt}`).value,"onUpdate:expandedNames":Ae=>Xe($)(S.type=="collection"?`c-${S.parentItemIndex}-f-${bt}`:`s-${bt}`).value=Ae,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":vt(({collapsed:Ae})=>[_a("div",Rv,[_t(T,{size:"small",type:"error",secondary:"",onClick:()=>{S.type==="collection"?Xe(A)&&Xe(A)(S.collectionKey,bt):Xe(Z)&&Xe(Z)(bt)},title:Xe(e)("delete")},{default:vt(()=>[_t(Xe(Y),null,{default:vt(()=>[_t(Xe(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),m[3]||(m[3]=_a("div",{class:"w-4"},null,-1)),_t(Xe(Y),null,{default:vt(()=>[Ae?(pl(),dn(Xe(ge),{key:0,icon:"fa-solid:chevron-left"})):(pl(),dn(Xe(ge),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:vt(()=>[...m[4]||(m[4]=[_a("span",null,null,-1)])]),default:vt(()=>[_t(s,{name:"1"},{header:vt(()=>[_a("div",jv,[_a("div",Kv,[_t(Xe(Y),{size:"18",class:"cursor-move mr-2"},{default:vt(()=>[_t(Xe(ge),{icon:"fa-solid:grip-lines"})]),_:1}),_t(y,{size:"small",type:"info"},{default:vt(()=>[Mo(va(bt+1),1)]),_:2},1024),_a("span",Yv,va(Xe(t)(xe.label)),1)])])]),default:vt(()=>[_t(se,{span:24,"x-gap":"6"},{default:vt(()=>[_t(M,{span:6},{default:vt(()=>[_a("span",Gv,va(Xe(e)("fieldKey")),1),_t(E,{value:xe.key,placeholder:Xe(e)("fieldKey"),class:"w-full","onUpdate:value":Ae=>xe.key=Xe(o)(Ae)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),_t(M,{span:10},{default:vt(()=>[_t(b,{modelValue:xe.label,"onUpdate:modelValue":Ae=>xe.label=Ae,placeholder:Xe(e)("title"),class:"w-full",sync:""},{label:vt(()=>[_a("span",Hv,va(Xe(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),_t(M,{span:8},{default:vt(()=>[_a("span",Qv,va(Xe(e)("type")),1),_t(z,null,{default:vt(()=>[_t(E,{value:oe(xe.type),placeholder:Xe(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ae=>v(xe.type,bt)},null,8,["value","placeholder","onClick"]),_t(T,{secondary:"",onClick:Ae=>v(xe.type,bt)},{icon:vt(()=>[_t(Xe(ge),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),_t($e,{class:"!mt-4 !mb-2"}),_t(se,{span:24,"x-gap":"6"},{default:vt(()=>[_t(M,{span:10,class:"flex items-center"},{default:vt(()=>[_t(le,{checked:xe.required,"onUpdate:checked":Ae=>xe.required=Ae,size:"medium"},{default:vt(()=>[Mo(va(Xe(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),_t(M,{span:14},{default:vt(()=>[["content-model-item","content-model-items"].includes(xe.type)?(pl(),Fa(Gn,{key:0},[_a("span",Wv,va(Xe(e)("contentModel")),1),_t(I,{value:xe.defaultValue,"onUpdate:value":Ae=>xe.defaultValue=Ae,options:Xe(p),placeholder:Xe(e)("contentModel"),"render-label":Xe(B),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(pl(),Fa(Gn,{key:1},[xe.type==="color"||xe.type==="gradient"?(pl(),Fa("div",Jv,[_a("span",Xv,va(Xe(e)("defaultValue")),1),_t(C,{"pure-color":xe.defaultValue,"onUpdate:pureColor":Ae=>xe.defaultValue=Ae,"default-pure-color":"#00000000","picker-type":"chrome","use-type":xe.type==="color"?"pure":"gradient",format:xe.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Xe(l)?"white":"black",lang:Xe(n)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):xe.type==="i18n-text"?(pl(),Fa("div",Zv,[_t(b,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ae=>xe.defaultValue=Ae,placeholder:Xe(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:vt(()=>[_a("span",ey,va(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-textarea"?(pl(),Fa("div",ty,[_t(b,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ae=>xe.defaultValue=Ae,placeholder:Xe(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:vt(()=>[_a("span",ly,va(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):xe.type==="i18n-editor"?(pl(),Fa("div",ay,[_t(b,{modelValue:xe.defaultValue,"onUpdate:modelValue":Ae=>xe.defaultValue=Ae,placeholder:Xe(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:vt(()=>[_a("span",ny,va(Xe(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(pl(),dn(E,{key:4,value:xe.defaultValue,"onUpdate:value":Ae=>xe.defaultValue=Ae,placeholder:Xe(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),xe.type==="multi-select"||xe.type==="single-select"?(pl(),dn($e,{key:0,"title-placement":"left",class:"!my-4"},{default:vt(()=>[Mo(va(Xe(e)("options")),1)]),_:1})):Ci("",!0),_t(D,{name:"slide-fade",appear:""},{default:vt(()=>[xe.type==="multi-select"||xe.type==="single-select"?(pl(),Fa("div",oy,[_t(Ee,{value:xe.options,"onUpdate:value":Ae=>xe.options=Ae,placeholder:Xe(e)("addOption"),"on-create":Ae=>Xe(K)?Xe(K)(Ae,bt):null,"show-sort-button":"",class:"w-full"},{"create-button-default":vt(()=>[Mo(va(Xe(e)("addOption")),1)]),default:vt(({value:Ae})=>[_a("div",sy,[_t(E,{value:Ae.value,placeholder:Xe(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":dt=>Ae.value=Xe(o)(dt)},null,8,["value","placeholder","onUpdate:value"]),_t(b,{modelValue:Ae.label,"onUpdate:modelValue":dt=>Ae.label=dt,placeholder:Xe(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):Ci("",!0)]),_:2},1024),(pl(!0),Fa(Gn,null,Fs(Xe(Lv),(Ae,dt,q)=>(pl(),Fa(Gn,{key:q},[xe.type===dt?(pl(),dn(r,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:vt(()=>[_t(Xe(Y),{size:"18"},{default:vt(()=>[_t(Xe(ge),{icon:"carbon:chevron-right"})]),_:1})]),default:vt(()=>[_t(s,{name:"1"},{header:vt(()=>[_t($e,{"title-placement":"left",class:"!my-4"},{default:vt(()=>[Mo(va(Xe(e)("settings")),1)]),_:1})]),default:vt(()=>[_t(D,{name:"slide-fade",appear:""},{default:vt(()=>[_a("div",ry,[(pl(!0),Fa(Gn,null,Fs(Ae,V=>(pl(),dn(se,{key:V.key,span:24,"x-gap":"12",class:"mb-2"},{default:vt(()=>[_t(M,{span:10},{default:vt(()=>[_t(E,{value:V.key,placeholder:Xe(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),_t(M,{span:14},{default:vt(()=>[V.isNumber?(pl(),dn(P,{key:0,value:xe.settings[V.key],"onUpdate:value":w=>xe.settings[V.key]=w,"default-value":V.defaultValue?parseInt(V.defaultValue):void 0,placeholder:V.placeholder||Xe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(pl(),dn(E,{key:1,value:xe.settings[V.key],"onUpdate:value":w=>xe.settings[V.key]=w,"default-value":V.defaultValue,placeholder:V.placeholder||Xe(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):Ci("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),_t(ct,{show:Xe(F),"onUpdate:show":m[2]||(m[2]=xe=>Fc(F)?F.value=xe:null),preset:"card",size:"medium",style:{width:"650px"},title:Xe(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":vt(()=>[_t(R,{align:"center"},{default:vt(()=>[_t(T,{secondary:"",size:"small",type:"success",disabled:Xe(d),onClick:O},{default:vt(()=>[_t(Xe(ge),{icon:"carbon:checkmark",class:"mr-1"}),Mo(" "+va(Xe(e)("select")),1)]),_:1},8,["disabled"]),_t(T,{secondary:"",size:"small",type:"error",onClick:m[0]||(m[0]=xe=>F.value=!1)},{default:vt(()=>[_t(Xe(ge),{icon:"carbon:close",class:"mr-1"}),Mo(" "+va(Xe(e)("close")),1)]),_:1})]),_:1})]),default:vt(()=>[_t(at,{animated:"",type:"line",size:"medium",placement:"left",value:Xe(c),"onUpdate:value":m[1]||(m[1]=xe=>Fc(c)?c.value=xe:null),style:{height:"100%"}},{default:vt(()=>[(pl(!0),Fa(Gn,null,Fs(Xe($i),(xe,bt)=>(pl(),dn(G,{name:xe.key,tab:te(xe),key:bt},{default:vt(()=>[_t(L,{hoverable:"",clickable:"",bordered:""},{default:vt(()=>[(pl(!0),Fa(Gn,null,Fs(xe.children,Ae=>(pl(),dn(J,{class:qv(X(Ae).value?`${Xe(a)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ae.value,onClick:dt=>fe(Ae)},{suffix:vt(()=>[_t(le,{checked:X(Ae).value,"onUpdate:checked":dt=>X(Ae).value=dt,size:"medium",onClick:dt=>fe(Ae)},null,8,["checked","onUpdate:checked","onClick"])]),default:vt(()=>[_a("span",iy,va(Ae.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Oc=Zn(dy,[["__scopeId","data-v-f2dba27a"]]),{useModel:uy,mergeModels:py,defineComponent:my}=await me("vue"),{unref:Re,toDisplayString:ca,openBlock:ml,createElementBlock:Rs,createCommentVNode:os,createTextVNode:un,resolveComponent:sk,withCtx:nt,createVNode:mt,createElementVNode:Sn,createBlock:Hl,normalizeStyle:Vi,isRef:fy,renderList:_y,Fragment:qc,normalizeClass:vy}=await me("vue"),yy={class:"text-base"},gy={key:0},hy={key:0},by={key:0},ky={class:"flex items-center"},wy={class:"flex items-center justify-between w-full"},xy={class:"text-base font-semibold"},$y={class:"text-xs text-slate-400"},Cy={class:"text-xs text-slate-400"},Iy={class:"text-xs text-slate-400"},{defineAsyncComponent:Vy,ref:En,computed:Nr,watch:zr,h:Sy,provide:ao}=await me("vue"),{storeToRefs:Ey}=await me("pinia"),Xd=my({__name:"index",props:py({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=Vy(()=>ms(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(s=>s.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:n}=Ie(),{tr:t,pickByTheme:o,formatKey:a}=ot(),{isLightTheme:l}=Ey(jo());fo();const p=u,S=uy(u,"show"),ce=Ze(),oe=Qe(),F=oa(),we=En(!1),H=En(null),k=En({}),c=En({}),v={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},fe=En(!1),X=En(!1),d=En(!1),O=En(!1),te=En({}),B=s=>Nr({get:()=>te.value[s]?["1"]:[],set:r=>{te.value[s]=r.length>0}}),A=Nr({get:()=>pe.omit(k.value,["index"]),set:s=>{k.value=k.value.index!==void 0?{index:k.value.index,...s}:{...s}}});zr(()=>O.value,s=>{Object.entries(k.value).forEach(([r,x],N)=>{r!=="index"&&(te.value[`c-${N}`]=s,x?.items?.forEach((R,J)=>{te.value[`c-${N}-f-${J}`]=s}))})}),zr(()=>d.value,s=>{Object.entries(k.value).forEach(([r,x],N)=>{r==="index"&&x?.forEach((R,J)=>{te.value[`s-${J}`]=s})})});const Z=Nr(()=>pe.isEqual(k.value,c.value)),K=()=>{k.value?k.value.index&&Array.isArray(k.value.index)?k.value.index.push(pe.cloneDeep(v)):k.value.index=[pe.cloneDeep(v)]:k.value={index:[pe.cloneDeep(v)]}},$=s=>{k.value&&Array.isArray(k.value.index)&&k.value.index.splice(s,1)},Q=()=>{const s=Al();k.value?k.value[s]={key:"",title:"",items:[]}:k.value={[s]:{key:"",title:"",items:[]}}},m=s=>{if(k.value){const{[s]:r,...x}=k.value;k.value=x}},T=s=>{k.value&&k.value[s].items.push(pe.cloneDeep(v))},y=(s,r)=>{if(k.value){const x=k.value[s];x&&Array.isArray(x.items)&&x.items.splice(r,1)}},E=s=>s.title&&s.key&&s.key!=="index",M=()=>k.value&&typeof k.value=="object"?Object.keys(k.value).filter(s=>s!=="index").length:0,b=Nr(()=>k.value?Object.keys(k.value).filter(s=>s!=="index"):[]),z=s=>b.value.indexOf(s),se=En(!1),$e=async()=>{const s=pe.cloneDeep(k.value),r=pe.cloneDeep(k.value);se.value=!1,we.value=!0,ce.start();const x=[];if(pe.forIn(s,(N,R)=>{R!=="index"&&x.push(N.key)}),pe.forIn(s,(N,R)=>{if(R!=="index"){const J=pe.keys(s).filter(L=>L!=="index").indexOf(R);if(N&&N.key){if(N.key==="index")return oe.error(n("keyIndexIsReservedInCollections")),se.value=!0,!1;if(x.filter(G=>G==N.key).length>1)return oe.error(n("collectionKeyIsNotUnique",[N.key])),se.value=!0,!1;if(Array.isArray(N.items))for(const[G,at]of N.items.entries())if(at.key){if(N.items.filter(xe=>xe.key===at.key).length>1)return oe.error(n("fieldKeyOfCollectionIsNotUnique",[at.key,N.key])),se.value=!0,!1}else return oe.error(n("fieldKeyOfCollectionIsRequired",[G+1,N.key])),se.value=!0,!1}else return oe.error(n("collectionKeyIsRequired",[J+1])),se.value=!0,!1}else if(Array.isArray(N))for(const[J,L]of N.entries())if(L.key){if(N.filter(at=>at.key===L.key).length>1)return oe.error(n("singletonKeyIsNotUnique",[L.key])),se.value=!0,!1}else return oe.error(n("singletonKeyIsRequired",[J+1])),se.value=!0,!1}),se.value){we.value=!1,ce.finish();return}pe.forIn(r,(N,R)=>{R!=="index"&&R!==N.key&&Dd(s,R,N.key)}),await p.updateDataStructure(s),we.value=!1,ce.finish()},le=()=>{pe.isEqual(k.value,c.value)?S.value=!1:F.warning({title:n("confirm"),content:n("confirmCloseDataStructure"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{S.value=!1}})};zr(()=>p.rawDataStructure,s=>{k.value=s?pe.cloneDeep(s):{},pe.forIn(s,(r,x)=>{x!=="index"?(k.value[x].key=x,r?.items?.forEach((N,R)=>{k.value[x].items[R].settings||(k.value[x].items[R].settings={})})):r?.forEach((N,R)=>{k.value[x][R].settings||(k.value[x][R].settings={})})}),c.value=pe.cloneDeep(k.value)},{immediate:!0,deep:!0});const I=s=>Sy("span",{},{default:()=>t(s.title)}),C=(s,r)=>({value:`option_${r+1}${s+1}`,label:""}),{copy:Ee,copied:D,isSupported:P}=Kd();return zr(()=>D.value,s=>{s&&oe.success(n("dataStructureCopied"))}),ao("removeCollectionField",y),ao("onCreateItemOption",C),ao("renderSelectLabel",I),ao("removeSingleton",$),ao("addSingleton",K),ao("expandCollections",O),ao("expandSingletons",d),ao("expandedNames",B),(s,r)=>{const x=Zi,N=ge,R=Y,J=Ke,L=Ml,G=Vl,at=zn,ct=mn,xe=Aa,bt=ll,Ae=Pa,dt=Sa,q=Xa,V=Ji,w=_n,ae=fn,Vt=Ki;return ml(),Hl(Vt,{modelValue:S.value,"onUpdate:modelValue":r[13]||(r[13]=_e=>S.value=_e),"close-on-esc":!1,closable:!1,onOnSizeChange:r[14]||(r[14]=_e=>{H.value=_e})},{header:nt(()=>[Sn("div",yy,[mt(x,{depth:"1"},{default:nt(()=>[un(ca(Re(n)("dataStructure"))+" ",1),u.title?(ml(),Rs("span",gy,"Â -Â "+ca(u.title),1)):os("",!0)]),_:1})])]),"header-extra":nt(()=>[mt(L,{align:"center"},{default:nt(()=>[mt(J,{secondary:"",title:Re(n)("save"),loading:Re(we),disabled:Re(Z),onClick:r[0]||(r[0]=_e=>$e())},{icon:nt(()=>[mt(R,null,{default:nt(()=>[mt(N,{icon:"carbon:save"})]),_:1})]),default:nt(()=>[un(" "+ca(Re(n)("save")),1)]),_:1},8,["title","loading","disabled"]),mt(J,{secondary:"",type:"error",title:Re(n)("close"),disabled:Re(we),onClick:r[1]||(r[1]=_e=>le())},{icon:nt(()=>[mt(R,null,{default:nt(()=>[mt(N,{icon:"carbon:close"})]),_:1})]),default:nt(()=>[un(" "+ca(Re(n)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:nt(()=>[Sn("section",{style:Vi(`min-height: ${Re(H)?.windowHeight-Re(H)?.headerHeight-5}px`),class:vy(`w-full h-full ${Re(o)("bg-slate-200","bg-zinc-800")}`)},[mt(dt,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:nt(()=>[mt(ct,{class:"mx-2 mt-2"},{default:nt(()=>[mt(G,{embedded:"",bordered:"",segmented:""},{header:nt(()=>[un(ca(Re(n)("singletons"))+"Â  ",1),Re(k).index?.length?(ml(),Rs("span",hy," ("+ca(Re(k).index?.length)+") ",1)):os("",!0)]),"header-extra":nt(()=>[mt(L,null,{default:nt(()=>[Re(P)&&Re(fe)?(ml(),Hl(J,{key:0,size:"small",type:"warning",secondary:"",title:Re(n)("copy"),onClick:r[2]||(r[2]=_e=>Re(Ee)(JSON.stringify(Re(k).index)))},{icon:nt(()=>[mt(R,null,{default:nt(()=>[mt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):os("",!0),mt(J,{size:"small",type:"warning",secondary:"",onClick:r[3]||(r[3]=()=>{fe.value=!Re(fe),Re(fe)&&(X.value=!1)})},{default:nt(()=>[mt(R,null,{default:nt(()=>[Re(fe)?(ml(),Hl(N,{key:0,icon:"carbon:code"})):(ml(),Hl(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),mt(J,{size:"small",type:"primary",secondary:"",onClick:r[4]||(r[4]=_e=>d.value=!Re(d))},{default:nt(()=>[mt(R,null,{default:nt(()=>[Re(d)?(ml(),Hl(N,{key:0,icon:"carbon:collapse-categories"})):(ml(),Hl(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),mt(J,{size:"small",type:"primary",secondary:"",onClick:r[5]||(r[5]=_e=>K())},{default:nt(()=>[mt(R,{class:"mr-1"},{default:nt(()=>[mt(N,{icon:"carbon:add-alt"})]),_:1}),un(" "+ca(Re(n)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Re(fe)?(ml(),Hl(Re(e),{key:0,height:Re(H)?.windowHeight-Re(H)?.headerHeight-100,"dark-theme":!Re(l),class:"creopse-json-editor",mode:"tree",json:Re(k).index,"onUpdate:json":r[6]||(r[6]=_e=>Re(k).index=_e)},null,8,["height","dark-theme","json"])):(ml(),Hl(at,{key:1,style:Vi(`max-height: ${Re(H)?.windowHeight-Re(H)?.headerHeight-100}px`)},{default:nt(()=>[mt(Oc,{modelValue:Re(k).index,"onUpdate:modelValue":r[7]||(r[7]=_e=>Re(k).index=_e),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),mt(ct,{class:"mx-2 mt-2"},{default:nt(()=>[mt(G,{embedded:"",bordered:"",segmented:""},{header:nt(()=>[un(ca(Re(n)("collections"))+"Â  ",1),M()>0?(ml(),Rs("span",by," ("+ca(M())+") ",1)):os("",!0)]),"header-extra":nt(()=>[mt(L,null,{default:nt(()=>[Re(P)&&Re(X)?(ml(),Hl(J,{key:0,size:"small",type:"warning",secondary:"",title:Re(n)("copy"),onClick:r[8]||(r[8]=_e=>Re(Ee)(JSON.stringify(Re(A))))},{icon:nt(()=>[mt(R,null,{default:nt(()=>[mt(N,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):os("",!0),mt(J,{size:"small",type:"warning",secondary:"",onClick:r[9]||(r[9]=()=>{X.value=!Re(X),Re(X)&&(fe.value=!1)})},{default:nt(()=>[mt(R,null,{default:nt(()=>[Re(X)?(ml(),Hl(N,{key:0,icon:"carbon:code"})):(ml(),Hl(N,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),mt(J,{size:"small",type:"primary",secondary:"",onClick:r[10]||(r[10]=_e=>O.value=!Re(O))},{default:nt(()=>[mt(R,null,{default:nt(()=>[Re(O)?(ml(),Hl(N,{key:0,icon:"carbon:collapse-categories"})):(ml(),Hl(N,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),mt(J,{size:"small",type:"primary",secondary:"",onClick:r[11]||(r[11]=_e=>Q())},{default:nt(()=>[mt(R,{class:"mr-1"},{default:nt(()=>[mt(N,{icon:"carbon:add-alt"})]),_:1}),un(" "+ca(Re(n)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Re(X)?(ml(),Hl(Re(e),{key:0,height:Re(H)?.windowHeight-Re(H)?.headerHeight-100,"dark-theme":!Re(l),class:"creopse-json-editor",mode:"tree",json:Re(A),"onUpdate:json":r[12]||(r[12]=_e=>fy(A)?A.value=_e:null)},null,8,["height","dark-theme","json"])):(ml(),Hl(at,{key:1,style:Vi(`max-height: ${Re(H)?.windowHeight-Re(H)?.headerHeight-100}px`)},{default:nt(()=>[(ml(!0),Rs(qc,null,_y(Re(k)||{},(_e,St,Ct)=>(ml(),Rs(qc,{key:Ct},[St!="index"?(ml(),Hl(G,{key:0,size:"small",class:"my-2",embedded:""},{default:nt(()=>[mt(ae,{"expanded-names":B(`c-${Ct}`).value,"onUpdate:expandedNames":j=>B(`c-${Ct}`).value=j,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":nt(({collapsed:j})=>[Sn("div",ky,[mt(J,{size:"small",type:"error",secondary:"",onClick:re=>m(St)},{default:nt(()=>[mt(R,{class:"mr-1"},{default:nt(()=>[mt(N,{icon:"carbon:trash-can"})]),_:1}),un(" "+ca(Re(n)("delete")),1)]),_:1},8,["onClick"]),r[15]||(r[15]=Sn("div",{class:"w-4"},null,-1)),mt(R,null,{default:nt(()=>[j?(ml(),Hl(N,{key:0,icon:"fa-solid:chevron-left"})):(ml(),Hl(N,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:nt(()=>[...r[16]||(r[16]=[Sn("span",null,null,-1)])]),default:nt(()=>[mt(w,{name:"1"},{header:nt(()=>[Sn("div",wy,[mt(L,null,{default:nt(()=>[mt(xe,{size:"small",type:"success"},{default:nt(()=>[un(ca(z(St)+1),1)]),_:2},1024),Sn("span",xy,ca(Re(t)(_e.title)),1)]),_:2},1024)])]),default:nt(()=>[mt(dt,{span:24,"x-gap":"6"},{default:nt(()=>[mt(ct,{span:6},{default:nt(()=>[Sn("span",$y,ca(Re(n)("fieldKey")),1),mt(bt,{value:_e.key,placeholder:Re(n)("collectionKey"),class:"w-full",size:"small","onUpdate:value":j=>_e.key=Re(a)(j)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),mt(ct,{span:11},{default:nt(()=>[mt(Ae,{modelValue:_e.title,"onUpdate:modelValue":j=>_e.title=j,placeholder:Re(n)("title"),class:"w-full",size:"small",sync:""},{label:nt(()=>[Sn("span",Cy,ca(Re(n)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),mt(ct,{span:7},{default:nt(()=>[Sn("span",Iy,ca(Re(n)("actions")),1),mt(J,{block:"",size:"small",type:"primary",disabled:!E(_e),secondary:"",class:"w-full",onClick:j=>T(St)},{default:nt(()=>[mt(R,{class:"mr-1"},{default:nt(()=>[mt(N,{icon:"carbon:add-alt"})]),_:1}),un(" "+ca(Re(n)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),mt(q,{class:"!my-4.75"}),E(_e)?(ml(),Hl(Oc,{key:0,modelValue:Re(k)[St].items,"onUpdate:modelValue":j=>Re(k)[St].items=j,"parent-item-index":Ct,"collection-key":St,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(ml(),Hl(V,{key:1,bordered:"",type:"info"},{default:nt(()=>[un(ca(Re(n)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):os("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:Ma}=Hi.global,Uy=[{label:Ma("text"),value:"text"},{label:Ma("textarea"),value:"textarea"},{label:Ma("number"),value:"number"},{label:Ma("switch"),value:"switch"},{label:Ma("singleSelect"),value:"single-select"},{label:Ma("multiSelect"),value:"multi-select"},{label:Ma("slider"),value:"slider"},{label:Ma("image"),value:"image"},{label:Ma("icon"),value:"icon"},{label:Ma("color"),value:"color"},{label:Ma("gradient"),value:"gradient"},{label:Ma("dimensions"),value:"dimensions"},{label:Ma("background"),value:"background"},{label:Ma("border"),value:"border"},{label:Ma("shadow"),value:"shadow"}],{useModel:Ty,mergeModels:My,defineComponent:Dy}=await me("vue"),{unref:Je,toDisplayString:xl,openBlock:$l,createElementBlock:ss,createCommentVNode:js,createTextVNode:ja,resolveComponent:Rc,withCtx:je,createVNode:He,createElementVNode:Ol,createBlock:da,isRef:Ny,renderList:jc,Fragment:Kc,normalizeStyle:Yc,normalizeClass:zy}=await me("vue"),Ay={class:"text-base"},Py={key:0},Ly={key:0},By={class:"flex items-center"},Fy={class:"flex items-center justify-between w-full"},Oy={class:"text-base font-semibold"},qy={class:"text-xs text-slate-400"},Ry={class:"text-xs text-slate-400"},jy={class:"text-xs text-slate-400"},Ky={class:"flex items-center"},Yy={class:"flex items-center justify-between w-full"},Gy={class:"flex items-center justify-between"},Hy={class:"text-base font-semibold ml-4"},Qy={class:"text-xs text-slate-400"},Wy={class:"text-xs text-slate-400"},Jy={class:"text-xs text-slate-400"},Xy={key:0},Zy={class:"text-xs text-slate-400"},eg={key:0,class:"w-full flex items-center"},tg={class:"w-full flex items-center"},{defineAsyncComponent:lg,ref:no,computed:Si,watch:Ei}=await me("vue"),{storeToRefs:ag}=await me("pinia"),ng=Dy({__name:"index",props:My({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=lg(()=>ms(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(I=>I.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),n=oa(),t=Qe(),o=Ze(),{t:a,locale:l}=Ie(),{pickByTheme:p,tr:S,formatKey:ce}=ot(),{isLightTheme:oe}=ag(jo()),F=u,we=Ty(u,"show"),H=no(null),k=no(!1),c=no({}),v=no({}),fe={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},X=no(!1),d=no(!1),O=no({}),te=I=>Si({get:()=>O.value[I]?["1"]:[],set:C=>{O.value[I]=C.length>0}});Ei(()=>F.settingsStructure,I=>{c.value=I?pe.cloneDeep(I):{},pe.forIn(I,(C,Ee)=>{c.value[Ee].key=Ee}),v.value=pe.cloneDeep(c.value)},{immediate:!0,deep:!0});const B=Si(()=>pe.isEqual(c.value,v.value)),A=no(!1),Z=async()=>{const I=pe.cloneDeep(c.value),C=pe.cloneDeep(c.value);A.value=!1,k.value=!0,o.start();const Ee=Object.values(I).map(D=>D.key);if(pe.forIn(I,(D,P)=>{const s=pe.keys(I).indexOf(P);if(D&&D.key){if(Ee.filter(x=>x==D.key).length>1)return t.error(a("groupKeyIsNotUnique",[D.key])),A.value=!0,!1;if(Array.isArray(D.items))for(const[x,N]of D.items.entries())if(N.key){if(D.items.filter(J=>J.key===N.key).length>1)return t.error(a("fieldKeyOfGroupIsNotUnique",[N.key,D.key])),A.value=!0,!1}else return t.error(a("fieldKeyOfGroupIsRequired",[x+1,D.key])),A.value=!0,!1}else return t.error(a("groupKeyIsRequired",[s+1])),A.value=!0,!1}),A.value){k.value=!1,o.finish();return}pe.forIn(C,(D,P)=>{P!==D.key&&Dd(I,P,D.key)}),await F.updateSettingsStructure(I),k.value=!1,o.finish()},K=()=>{pe.isEqual(c.value,v.value)?we.value=!1:n.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{we.value=!1}})},$=()=>c.value&&typeof c.value=="object"?Object.keys(c.value).length:0,Q=Si(()=>c.value?Object.keys(c.value):[]),m=I=>Q.value.indexOf(I),T=()=>{const I=Al();c.value?c.value[I]={key:"",title:"",items:[]}:c.value={[I]:{key:"",title:"",items:[]}}},y=I=>{if(c.value){const{[I]:C,...Ee}=c.value;c.value=Ee}},E=I=>{c.value&&c.value[I].items.push(pe.cloneDeep(fe))},M=(I,C)=>{if(c.value){const Ee=c.value[I];Ee&&Array.isArray(Ee.items)&&Ee.items.splice(C,1)}},b=I=>I.title&&I.key,z=(I,C)=>({value:`option_${C+1}${I+1}`,label:""});Ei(()=>d.value,I=>{Object.entries(c.value).forEach(([C,Ee],D)=>{O.value[`c-${D}`]=I,Ee?.items?.forEach((P,s)=>{O.value[`c-${D}-f-${s}`]=I})})});const{copy:se,copied:$e,isSupported:le}=Kd();return Ei(()=>$e.value,I=>{I&&t.success(a("settingsStructureCopied"))}),(I,C)=>{const Ee=Zi,D=ge,P=Y,s=Ke,r=Ml,x=mn,N=Vl,R=Aa,J=ll,L=Pa,G=Sa,at=Xa,ct=en,xe=vo,bt=Rc("color-picker"),Ae=Qr,dt=Ja,q=_n,V=fn,w=Rc("Draggable"),ae=Ji,Vt=zn,_e=Ki;return $l(),da(_e,{modelValue:we.value,"onUpdate:modelValue":C[7]||(C[7]=St=>we.value=St),"close-on-esc":!1,closable:!1,onOnSizeChange:C[8]||(C[8]=St=>{H.value=St})},{header:je(()=>[Ol("div",Ay,[He(Ee,{depth:"1"},{default:je(()=>[ja(xl(Je(a)("sectionSettings"))+" ",1),u.title?($l(),ss("span",Py,"Â -Â "+xl(u.title),1)):js("",!0)]),_:1})])]),"header-extra":je(()=>[He(r,{align:"center"},{default:je(()=>[He(s,{secondary:"",title:Je(a)("save"),loading:Je(k),disabled:Je(B),onClick:C[0]||(C[0]=St=>Z())},{icon:je(()=>[He(P,null,{default:je(()=>[He(D,{icon:"carbon:save"})]),_:1})]),default:je(()=>[ja(" "+xl(Je(a)("save")),1)]),_:1},8,["title","loading","disabled"]),He(s,{secondary:"",type:"error",title:Je(a)("close"),disabled:Je(k),onClick:C[1]||(C[1]=St=>K())},{icon:je(()=>[He(P,null,{default:je(()=>[He(D,{icon:"carbon:close"})]),_:1})]),default:je(()=>[ja(" "+xl(Je(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:je(()=>[Ol("section",{style:Yc(`min-height: ${Je(H)?.windowHeight-Je(H)?.headerHeight-5}px`),class:zy(`w-full h-full ${Je(p)("bg-slate-200","bg-zinc-800")}`)},[He(G,{cols:"4","item-responsive":"",responsive:"screen"},{default:je(()=>[He(x,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),He(x,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:je(()=>[He(N,{embedded:"",bordered:"",segmented:""},{header:je(()=>[ja(xl(Je(a)("groups"))+"Â  ",1),$()>0?($l(),ss("span",Ly," ("+xl($())+") ",1)):js("",!0)]),"header-extra":je(()=>[He(r,null,{default:je(()=>[Je(le)&&Je(X)?($l(),da(s,{key:0,size:"small",type:"warning",secondary:"",title:Je(a)("copy"),onClick:C[2]||(C[2]=St=>Je(se)(JSON.stringify(Je(c))))},{icon:je(()=>[He(P,null,{default:je(()=>[He(D,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):js("",!0),He(s,{size:"small",type:"warning",secondary:"",onClick:C[3]||(C[3]=()=>{X.value=!Je(X)})},{default:je(()=>[He(P,null,{default:je(()=>[Je(X)?($l(),da(D,{key:0,icon:"carbon:code"})):($l(),da(D,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),He(s,{size:"small",type:"primary",secondary:"",onClick:C[4]||(C[4]=St=>d.value=!Je(d))},{default:je(()=>[He(P,null,{default:je(()=>[Je(d)?($l(),da(D,{key:0,icon:"carbon:collapse-categories"})):($l(),da(D,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),He(s,{size:"small",type:"primary",secondary:"",onClick:C[5]||(C[5]=St=>T())},{default:je(()=>[He(P,{class:"mr-1"},{default:je(()=>[He(D,{icon:"carbon:add-alt"})]),_:1}),ja(" "+xl(Je(a)("addGroup")),1)]),_:1})]),_:1})]),_:1}),Je(X)?($l(),da(Je(e),{key:0,height:Je(H)?.windowHeight-Je(H)?.headerHeight-100,"dark-theme":!Je(oe),class:"creopse-json-editor",mode:"tree",json:Je(c),"onUpdate:json":C[6]||(C[6]=St=>Ny(c)?c.value=St:null)},null,8,["height","dark-theme","json"])):($l(),da(Vt,{key:1,style:Yc(`max-height: ${Je(H)?.windowHeight-Je(H)?.headerHeight-100}px`)},{default:je(()=>[($l(!0),ss(Kc,null,jc(Je(c)||{},(St,Ct,j)=>($l(),da(N,{key:j,size:"small",class:"my-2",embedded:""},{default:je(()=>[He(V,{"expanded-names":te(`c-${j}`).value,"onUpdate:expandedNames":re=>te(`c-${j}`).value=re,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":je(({collapsed:re})=>[Ol("div",By,[He(s,{size:"small",type:"error",secondary:"",onClick:tt=>y(Ct)},{default:je(()=>[He(P,{class:"mr-1"},{default:je(()=>[He(D,{icon:"carbon:trash-can"})]),_:1}),ja(" "+xl(Je(a)("delete")),1)]),_:1},8,["onClick"]),C[9]||(C[9]=Ol("div",{class:"w-4"},null,-1)),He(P,null,{default:je(()=>[re?($l(),da(D,{key:0,icon:"fa-solid:chevron-left"})):($l(),da(D,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:je(()=>[...C[10]||(C[10]=[Ol("span",null,null,-1)])]),default:je(()=>[He(q,{name:"1"},{header:je(()=>[Ol("div",Fy,[He(r,null,{default:je(()=>[He(R,{size:"small",type:"success"},{default:je(()=>[ja(xl(m(Ct)+1),1)]),_:2},1024),Ol("span",Oy,xl(Je(S)(St.title)),1)]),_:2},1024)])]),default:je(()=>[He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(x,{span:6},{default:je(()=>[Ol("span",qy,xl(Je(a)("fieldKey")),1),He(J,{value:St.key,placeholder:Je(a)("groupKey"),class:"w-full",size:"small","onUpdate:value":re=>St.key=Je(ce)(re)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),He(x,{span:11},{default:je(()=>[He(L,{modelValue:St.title,"onUpdate:modelValue":re=>St.title=re,placeholder:Je(a)("title"),class:"w-full",size:"small",sync:""},{label:je(()=>[Ol("span",Ry,xl(Je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),He(x,{span:7},{default:je(()=>[Ol("span",jy,xl(Je(a)("actions")),1),He(s,{block:"",size:"small",type:"primary",disabled:!b(St),secondary:"",class:"w-full",onClick:re=>E(Ct)},{default:je(()=>[He(P,{class:"mr-1"},{default:je(()=>[He(D,{icon:"carbon:add-alt"})]),_:1}),ja(" "+xl(Je(a)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),He(at,{class:"!my-4.75"}),b(St)?($l(),da(w,{key:0,list:Je(c)[Ct].items,class:"w-full"},{default:je(()=>[($l(!0),ss(Kc,null,jc(Je(c)[Ct].items,(re,tt)=>($l(),da(N,{key:`field-${tt}`,size:"small",class:"my-2",hoverable:""},{default:je(()=>[He(V,{"expanded-names":te(`c-${Ct}-f-${tt}`).value,"onUpdate:expandedNames":ve=>te(`c-${Ct}-f-${tt}`).value=ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":je(({collapsed:ve})=>[Ol("div",Ky,[He(s,{size:"small",type:"error",secondary:"",onClick:()=>{M(Ct,tt)},title:Je(a)("delete")},{default:je(()=>[He(P,null,{default:je(()=>[He(D,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),C[11]||(C[11]=Ol("div",{class:"w-4"},null,-1)),He(P,null,{default:je(()=>[ve?($l(),da(D,{key:0,icon:"fa-solid:chevron-left"})):($l(),da(D,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:je(()=>[...C[12]||(C[12]=[Ol("span",null,null,-1)])]),default:je(()=>[He(q,{name:"1"},{header:je(()=>[Ol("div",Yy,[Ol("div",Gy,[He(P,{size:"18",class:"cursor-move mr-2"},{default:je(()=>[He(D,{icon:"fa-solid:grip-lines"})]),_:1}),He(R,{size:"small",type:"info"},{default:je(()=>[ja(xl(tt+1),1)]),_:2},1024),Ol("span",Hy,xl(Je(S)(re.label)),1)])])]),default:je(()=>[He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(x,{span:6},{default:je(()=>[Ol("span",Qy,xl(Je(a)("fieldKey")),1),He(J,{value:re.key,placeholder:Je(a)("fieldKey"),class:"w-full","onUpdate:value":ve=>re.key=Je(ce)(ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),He(x,{span:10},{default:je(()=>[He(L,{modelValue:re.label,"onUpdate:modelValue":ve=>re.label=ve,placeholder:Je(a)("title"),class:"w-full",sync:""},{label:je(()=>[Ol("span",Wy,xl(Je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),He(x,{span:8},{default:je(()=>[Ol("span",Jy,xl(Je(a)("type")),1),He(ct,{value:re.type,"onUpdate:value":ve=>re.type=ve,options:Je(Uy),placeholder:Je(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),He(at,{class:"!mt-4 !mb-2"}),He(G,{span:24,"x-gap":"6"},{default:je(()=>[He(x,{span:10,class:"flex items-center"},{default:je(()=>[He(xe,{checked:re.required,"onUpdate:checked":ve=>re.required=ve,size:"medium"},{default:je(()=>[ja(xl(Je(a)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),He(x,{span:14},{default:je(()=>[re.type==="color"||re.type==="gradient"?($l(),ss("div",Xy,[Ol("span",Zy,xl(Je(a)("defaultValue")),1),He(bt,{"pure-color":re.defaultValue,"onUpdate:pureColor":ve=>re.defaultValue=ve,"default-pure-color":"#00000000","picker-type":"chrome","use-type":re.type==="color"?"pure":"gradient",format:re.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Je(oe)?"white":"black",lang:Je(l)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):($l(),da(J,{key:1,value:re.defaultValue,"onUpdate:value":ve=>re.defaultValue=ve,placeholder:Je(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),re.type==="multi-select"||re.type==="single-select"?($l(),da(at,{key:0,"title-placement":"left",class:"!my-4"},{default:je(()=>[ja(xl(Je(a)("options")),1)]),_:1})):js("",!0),He(dt,{name:"slide-fade",appear:""},{default:je(()=>[re.type==="multi-select"||re.type==="single-select"?($l(),ss("div",eg,[He(Ae,{value:re.options,"onUpdate:value":ve=>re.options=ve,placeholder:Je(a)("addOption"),"on-create":ve=>z?z(ve,tt):null,"show-sort-button":"",class:"w-full"},{"create-button-default":je(()=>[ja(xl(Je(a)("addOption")),1)]),default:je(({value:ve})=>[Ol("div",tg,[He(J,{value:ve.value,placeholder:Je(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Tt=>ve.value=Je(ce)(Tt)},null,8,["value","placeholder","onUpdate:value"]),He(L,{modelValue:ve.label,"onUpdate:modelValue":Tt=>ve.label=Tt,placeholder:Je(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):js("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):($l(),da(ae,{key:1,bordered:"",type:"info"},{default:je(()=>[ja(xl(Je(a)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),He(x,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),og=Zn(ng,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:sg}=await me("vue"),{unref:It,renderList:Gc,Fragment:Ks,openBlock:Un,createElementBlock:Ys,resolveComponent:rk,createBlock:Gs,createCommentVNode:Hc,withCtx:Tl,createVNode:Cl,createElementVNode:Hs,toDisplayString:Do,createTextVNode:Qs,withModifiers:Ui,normalizeClass:Qc,isRef:Ar}=await me("vue"),rg={class:"flex items-center"},ig={class:"text-base"},cg={class:"mt-2"},{ref:Tn}=await me("vue"),dg=sg({__name:"index",setup(u){const{t:e}=Ie(),{tr:n,pickByTheme:t,isInDevMode:o}=ot(),{data:a}=Yi(),{mutate:l,isPending:p}=Um(),{mutate:S,isPending:ce}=Jd(),oe=Tn(24),F=Tn(1),we=T=>{oe.value=T},H={name:"",title:"",content:"",slug:""},k=Tn(!1),c=Tn(null),v=Tn(H),fe={title:[{required:!0,message:e("fillRequired")}]},X=Tn(null),d=T=>{X.value=pe.cloneDeep(T),v.value=pe.cloneDeep(T||H),k.value=!0},O=async()=>(c.value?.validate(async T=>{if(!T){const y={title:v.value.title};X.value?S({slug:X.value.slug,...y},{onSuccess:()=>{}}):l({name:pe.startCase(pe.camelCase(n(v.value.title))).replace(/\s+/g,""),...y},{onSuccess:()=>{}}),k.value=!1}}),!1),te=Tn(null),B=Tn(!1),A=T=>{te.value=T,B.value=!0},Z=async T=>{S({slug:te.value?.slug,dataStructure:T},{onSuccess:y=>{A(y)}})},K=Tn(null),$=Tn(!1),Q=T=>{K.value=T,$.value=!0},m=async T=>{S({slug:K.value?.slug,settingsStructure:T},{onSuccess:y=>{Q(y)}})};return(T,y)=>{const E=ge,M=Y,b=Ke,z=Ml,se=Xa,$e=Aa,le=_n,I=fn,C=Vl,Ee=Ko,D=Za,P=Pa,s=Ea,r=Va,x=Xl;return Un(),Ys(Ks,null,[It(a)&&It(a).length?(Un(),Ys(Ks,{key:0},[(Un(!0),Ys(Ks,null,Gc(It(a).slice((It(F)-1)*It(oe),It(F)*It(oe)),N=>(Un(),Gs(C,{key:N.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:Tl(()=>[Cl(I,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Tl(({collapsed:R})=>[Cl(M,null,{default:Tl(()=>[R?(Un(),Gs(E,{key:0,icon:"fa-solid:chevron-left"})):(Un(),Gs(E,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Tl(()=>[...y[6]||(y[6]=[Hs("span",null,null,-1)])]),default:Tl(()=>[Cl(le,{name:"1"},{header:Tl(()=>[Hs("div",rg,[Cl(z,null,{default:Tl(()=>[It(o)?(Un(),Ys(Ks,{key:0},[Cl(b,{size:"small",type:"primary",secondary:"",onClick:Ui(R=>A(N),["stop"])},{default:Tl(()=>[Cl(M,{class:"mr-1"},{default:Tl(()=>[Cl(E,{icon:"carbon:data-1"})]),_:1}),Qs(" "+Do(It(e)("dataStructure")),1)]),_:1},8,["onClick"]),Cl(b,{size:"small",type:"info",secondary:"",title:It(e)("sectionSettings"),onClick:Ui(R=>Q(N),["stop"])},{default:Tl(()=>[Cl(M,{class:"mr-1"},{default:Tl(()=>[Cl(E,{icon:"carbon:settings-edit"})]),_:1}),Qs(" "+Do(It(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Hc("",!0),Cl(b,{size:"small",type:"primary",secondary:"",title:It(e)("edit"),onClick:Ui(R=>d(N),["stop"])},{default:Tl(()=>[Cl(M,null,{default:Tl(()=>[Cl(E,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),Cl(se,{vertical:"",class:Qc(It(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Hs("span",ig,Do(It(n)(N.title)),1)])]),default:Tl(()=>[Hs("div",null,Do(It(e)("sectionUsedXTimesOnPages",[N.pagesCount])),1),Hs("section",cg,[(Un(!0),Ys(Ks,null,Gc(It(gu)(N.pages||[],"id"),R=>(Un(),Gs($e,{key:R.id,size:"small",class:"mr-1",type:"success"},{default:Tl(()=>[Qs(Do(It(n)(R.title)),1)]),_:2},1024))),128))]),Hc("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Cl(Ee,{page:It(F),"onUpdate:page":y[0]||(y[0]=N=>Ar(F)?F.value=N:null),class:"mt-5 justify-end","show-size-picker":"","page-size":It(oe),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(It(a).length/It(oe)),"onUpdate:pageSize":we},{prefix:Tl(()=>[Qs(Do(`${It(a).length} ${It(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Un(),Gs(C,{key:1,size:"large",class:Qc(`mb-2 !border-dashed !border-2 ${It(t)("!border-zinc-300","!border-zinc-600")}`)},{default:Tl(()=>[Cl(D,{description:It(e)("noSectionAvailable")},{icon:Tl(()=>[Cl(M,null,{default:Tl(()=>[Cl(E,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),Cl(x,{show:It(k),"onUpdate:show":y[2]||(y[2]=N=>Ar(k)?k.value=N:null),loading:It(p)||It(ce),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:It(X)?It(e)("editSection"):It(e)("addSection"),"positive-text":It(e)("validate"),"negative-text":It(e)("cancel"),onPositiveClick:O,onNegativeClick:y[3]||(y[3]=N=>k.value=!1)},{default:Tl(()=>[Cl(r,{ref_key:"formRef",ref:c,model:It(v),rules:fe,"show-require-mark":!1,size:"medium"},{default:Tl(()=>[Cl(s,{"show-label":!1,path:"title",class:"mt-5"},{default:Tl(()=>[Cl(P,{modelValue:It(v).title,"onUpdate:modelValue":y[1]||(y[1]=N=>It(v).title=N),placeholder:It(e)("title"),class:"w-full",sync:""},{label:Tl(()=>[Qs(Do(It(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Cl(Xd,{show:It(B),"onUpdate:show":y[4]||(y[4]=N=>Ar(B)?B.value=N:null),title:It(n)(It(te)?.title),"raw-data-structure":It(te)?.dataStructure,"update-data-structure":Z},null,8,["show","title","raw-data-structure"]),Cl(og,{show:It($),"onUpdate:show":y[5]||(y[5]=N=>Ar($)?$.value=N:null),title:It(n)(It(K)?.title),"settings-structure":It(K)?.settingsStructure,"update-settings-structure":m},null,8,["show","title","settings-structure"])],64)}}}),Zd=(u,e)=>sr(["newsletter-emails"],async()=>{const{request:n}=Ye(),t=await n({url:"/newsletter/emails"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),eu=(u,e)=>sr(["newsletter-phones"],async()=>{const{request:n}=Ye(),t=await n({url:"/newsletter/phones"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u}),ug=(u,e)=>sr(["newsletter-campaigns"],async()=>{const{request:n}=Ye(),t=await n({url:"/newsletter/campaigns"});return t.success&&t.result.data?t.result.data:[]},{refetchOnWindowFocus:!1,...u});class pg{id;email;createdAt;updatedAt;constructor(e,n,t,o){this.email=e,this.id=n,this.createdAt=t,this.updatedAt=o}}const mg=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-emails"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/newsletter/emails",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},fg=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-emails"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/newsletter/emails/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},_g=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["newsletter-emails"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/emails/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},vg=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["newsletter-emails"],operation:"batch",getItemId:a=>{if(a instanceof pg){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterEmail ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{t.start();try{for(let l=0;l<a.length;l++)await e({url:`/newsletter/emails/${a[l]}`,method:"delete"});return a}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},yg=()=>{const{request:u}=Ye();return Wa(async e=>{const n=await u({method:"post",url:"/newsletter/emails",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:gg}=await me("vue"),{unref:gt,createVNode:Kt,withCtx:Yt,toDisplayString:oo,createTextVNode:No,resolveComponent:ik,createElementVNode:Wc,openBlock:Ti,createBlock:Jc,createCommentVNode:hg,isRef:Xc,Fragment:bg,createElementBlock:kg}=await me("vue"),wg={class:"flex items-center justify-center"},{ref:Mn,h:Da,computed:xg,onBeforeUnmount:$g}=await me("vue"),Cg=gg({__name:"Email",setup(u){const e=Ze(),n=Qe(),t=oa(),{data:o,refetch:a,isPending:l}=Zd(),{mutate:p,isPending:S}=vg(),{mutate:ce}=_g(),{mutate:oe,isPending:F}=mg(),{mutate:we,isPending:H}=fg(),{mutateAsync:k}=yg(),{t:c,locale:v}=Ie(),fe=Mn(""),X=Mn(),d={pageSize:12,prefix:({itemCount:s})=>Da("div",{class:"font-bold"},{default:()=>`${c("total")}: ${s}`})},O=[{type:"selection"},{title:c("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return Da("div",{},{default:()=>s.email})}},{title:c("updateAt"),key:"updatedAt",width:125,render(s){return Da("div",{},{default:()=>pn(s.updatedAt,{locale:v.value,outPattern:"DD MMMM YYYY"})})}},{title:c("createdAt"),key:"createdAt",width:125,render(s){return Da("div",{},{default:()=>pn(s.createdAt,{locale:v.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Da(ll,{ref:X,placeholder:c("search"),value:fe.value,onInput:s=>{fe.value=s}},{suffix:()=>Da(Y,{},{default:()=>Da(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return Da("div",{class:"flex justify-end items-center w-full"},[Da(Ke,{size:"small",type:"warning",secondary:!0,onClick:()=>{m(s)},renderIcon:()=>Da(Y,null,{default:()=>Da(ge,{icon:"carbon:edit"})})}),Da("div",{class:"w-2"}),Da(Ke,{size:"small",type:"error",secondary:!0,onClick:()=>{t.warning({title:c("confirm"),content:c("confirmDeleteEmailAddress"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{s.id&&ce({id:s.id})}})},renderIcon:()=>Da(Y,null,{default:()=>Da(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],te=xg(()=>{if(!fe.value)return o.value;const s=o.value?.filter(r=>r.email.toLowerCase().includes(fe.value.toLowerCase()));return X.value&&X.value.focus(),s}),B=Mn(!1),A=Mn(!1),Z=Mn(null),K=Mn(null),$=Mn({email:""}),Q={email:[{required:!0,message:c("fillRequired")},{trigger:["input"],validator(s,r){return r&&!us.isEmail(r)?new Error(c("invalidEmail")):!0}}]},m=s=>{Z.value=pe.cloneDeep(s),s?$.value=pe.cloneDeep(s):$.value={email:""},A.value=!0},T=async()=>(K.value?.validate(async s=>{if(!s){const r={email:$.value.email};Z.value?Z.value.email!==$.value.email&&(o.value||[]).findIndex(x=>x.email==$.value.email)>-1?n.error(c("sameEmailAddressMessage")):we({id:Z.value.id,...r}):(o.value||[]).findIndex(x=>x.email==$.value.email)>-1?n.error(c("sameEmailAddressMessage")):oe(r),A.value=!1}}),!1);let y=null;const E=()=>{y&&(y.destroy(),y=null)};$g(E);const M=(s,r)=>r.map(x=>s.map(N=>x[N])),b=()=>{y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ms(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var r=["no","email","createdAt","updatedAt"];const x=pe.sortBy(o.value?.map((R,J)=>({no:J+1,...R})),"email"),N=M(r,x);try{s.export_json_to_excel({header:r,data:N,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),n.error(c("anErrorOccurred"))}})},z=()=>{y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ms(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var r=["email"];const x=M(r,[{email:"adresse@email.com"}]);try{s.export_json_to_excel({header:r,data:x,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),n.error(c("anErrorOccurred"))}})},se=Mn(!1),$e=async({results:s})=>{B.value=!0,e.start(),y||(y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<s.length;r++)s[r].email&&o.value?.findIndex(x=>x.email==s[r].email)==-1&&(y&&(y.content=`${c("pleaseBePatient")}: ${r} ${c("task_s")} / ${s.length}`),await k({email:s[r].email}));await a(),E(),e.finish(),B.value=!1,se.value=!1},le=Mn(Al()),I=Mn([]),C=s=>s.id,Ee=s=>{I.value=s},D=()=>{I.value=[],le.value=Al()},P=async()=>(I.value.length?t.warning({title:c("confirm"),content:c("deleteSelectionWarningMessage",[I.value.length]),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:()=>{p(I.value,{onSuccess:()=>{D()}})}}):n.warning(c("noItemSelected")),!1);return(s,r)=>{const x=Fd,N=Ml,R=Qa,J=Vl,L=Ja,G=Gr,at=Yr,ct=Ea,xe=Va,bt=Xl,Ae=Yd;return Ti(),kg(bg,null,[Kt(R,{to:"#alt-action"},{default:Yt(()=>[Kt(N,null,{default:Yt(()=>[Kt(x,{onPositiveClick:r[0]||(r[0]=dt=>b())},{trigger:Yt(()=>[Kt(gt(Ke),{type:"success",secondary:""},{icon:Yt(()=>[Kt(gt(Y),{size:"18"},{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:upload"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("export")),1)]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("exportDataInExcelFile")),1)]),_:1}),Kt(gt(Ke),{type:"info",secondary:"",onClick:r[1]||(r[1]=dt=>se.value=!0)},{icon:Yt(()=>[Kt(gt(Y),{size:"18"},{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:download"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("import")),1)]),_:1}),Kt(gt(Ke),{type:"primary",secondary:"",onClick:r[2]||(r[2]=dt=>m(null))},{icon:Yt(()=>[Kt(gt(Y),{size:"18"},{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:add-alt"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),Kt(L,{name:"slide-fade",appear:""},{default:Yt(()=>[gt(I).length?(Ti(),Jc(J,{key:0,class:"my-2",size:"small",embedded:""},{default:Yt(()=>[Kt(N,{align:"center",justify:"space-between"},{default:Yt(()=>[Wc("span",null,oo(gt(c)("nbItemsSelected",[gt(I).length])),1),Kt(N,{align:"center",justify:"space-between"},{default:Yt(()=>[Kt(gt(Ke),{type:"error",size:"small",secondary:"",onClick:P},{icon:Yt(()=>[Kt(gt(Y),null,{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:trash-can"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("delete")),1)]),_:1}),Kt(gt(Ke),{type:"warning",size:"small",secondary:"",onClick:D},{icon:Yt(()=>[Kt(gt(Y),null,{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:close"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):hg("",!0)]),_:1}),Kt(at,null,{default:Yt(()=>[(Ti(),Jc(G,{key:gt(le),columns:O,data:gt(te),pagination:d,loading:gt(l)||gt(S),"single-line":!1,"scroll-x":800,"row-key":C,size:"small",striped:"","onUpdate:checkedRowKeys":Ee},null,8,["data","loading","row-key"]))]),_:1}),Kt(bt,{show:gt(A),"onUpdate:show":r[4]||(r[4]=dt=>Xc(A)?A.value=dt:null),loading:gt(F)||gt(H),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:gt(Z)?gt(c)("editEmailAddress"):gt(c)("addEmailAddress"),"positive-text":gt(c)("validate"),"negative-text":gt(c)("cancel"),onPositiveClick:T,onNegativeClick:r[5]||(r[5]=dt=>A.value=!1)},{default:Yt(()=>[Kt(xe,{ref_key:"formRef",ref:K,class:"mt-5",model:gt($),rules:Q,"show-require-mark":!1,size:"medium"},{default:Yt(()=>[Kt(ct,{label:gt(c)("emailAddress"),path:"email"},{default:Yt(()=>[Kt(gt(ll),{value:gt($).email,"onUpdate:value":r[3]||(r[3]=dt=>gt($).email=dt),placeholder:gt(c)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Kt(bt,{show:gt(se),"onUpdate:show":r[7]||(r[7]=dt=>Xc(se)?se.value=dt:null),loading:gt(B),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:gt(c)("import")},{default:Yt(()=>[Kt(Ae,{class:"my-5","on-success":$e}),Wc("div",wg,[Kt(gt(Ke),{type:"info",size:"small",secondary:"",onClick:r[6]||(r[6]=dt=>z())},{icon:Yt(()=>[Kt(gt(Y),null,{default:Yt(()=>[Kt(gt(ge),{icon:"carbon:download"})]),_:1})]),default:Yt(()=>[No(" "+oo(gt(c)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class Ig{id;phone;createdAt;updatedAt;constructor(e,n,t,o){this.phone=e,this.id=n,this.createdAt=t,this.updatedAt=o}}const Vg=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-phones"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/newsletter/phones",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Sg=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-phones"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/newsletter/phones/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},Eg=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["newsletter-phones"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/phones/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},Ug=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return ht({queryKey:["newsletter-phones"],operation:"batch",getItemId:a=>{if(a instanceof Ig){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterPhone ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{t.start();try{for(let l=0;l<a.length;l++)await e({url:`/newsletter/phones/${a[l]}`,method:"delete"});return a}finally{t.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Tg=()=>{const{request:u}=Ye();return Wa(async e=>{const n=await u({method:"post",url:"/newsletter/phones",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Mg}=await me("vue"),{unref:$t,createVNode:Gt,withCtx:Ht,toDisplayString:so,createTextVNode:zo,resolveComponent:ck,createElementVNode:Zc,openBlock:Mi,createBlock:ed,createCommentVNode:Dg,isRef:td,Fragment:Ng,createElementBlock:zg}=await me("vue"),Ag={class:"flex items-center justify-center"},{ref:Dn,h:Na,computed:Pg,onBeforeUnmount:Lg}=await me("vue"),Bg=Mg({__name:"Phone",setup(u){const e=Ze(),n=Qe(),t=oa(),{data:o,refetch:a,isPending:l}=eu(),{mutate:p,isPending:S}=Ug(),{mutate:ce}=Eg(),{mutate:oe,isPending:F}=Vg(),{mutate:we,isPending:H}=Sg(),{mutateAsync:k}=Tg(),{t:c,locale:v}=Ie(),fe=Dn(""),X=Dn(),d={pageSize:12,prefix:({itemCount:s})=>Na("div",{class:"font-bold"},{default:()=>`${c("total")}: ${s}`})},O=[{type:"selection"},{title:c("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(s){return Na("div",{},{default:()=>s.phone})}},{title:c("updateAt"),key:"updatedAt",width:125,render(s){return Na("div",{},{default:()=>pn(s.updatedAt,{locale:v.value,outPattern:"DD MMMM YYYY"})})}},{title:c("createdAt"),key:"createdAt",width:125,render(s){return Na("div",{},{default:()=>pn(s.createdAt,{locale:v.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>Na(ll,{ref:X,placeholder:c("search"),value:fe.value,onInput:s=>{fe.value=s}},{suffix:()=>Na(Y,{},{default:()=>Na(ge,{icon:"carbon:search"})})}),key:"actions",width:150,render(s){return Na("div",{class:"flex justify-end items-center w-full"},[Na(Ke,{size:"small",type:"warning",secondary:!0,onClick:()=>{m(s)},renderIcon:()=>Na(Y,null,{default:()=>Na(ge,{icon:"carbon:edit"})})}),Na("div",{class:"w-2"}),Na(Ke,{size:"small",type:"error",secondary:!0,onClick:()=>{t.warning({title:c("confirm"),content:c("confirmDeletePhoneNumber"),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:async()=>{s.id&&ce({id:s.id})}})},renderIcon:()=>Na(Y,null,{default:()=>Na(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],te=Pg(()=>{if(!fe.value)return o.value;const s=o.value?.filter(r=>r.phone.toLowerCase().includes(fe.value.toLowerCase()));return X.value&&X.value.focus(),s}),B=Dn(!1),A=Dn(!1),Z=Dn(null),K=Dn(null),$=Dn({phone:""}),Q={phone:[{required:!0,message:c("fillRequired")},{trigger:["input"],validator(s,r){return r&&!Ru(r)?new Error(c("invalidNumber")):!0}}]},m=s=>{Z.value=pe.cloneDeep(s),s?$.value=pe.cloneDeep(s):$.value={phone:""},A.value=!0},T=async()=>(K.value?.validate(async s=>{if(!s){const r={phone:$.value.phone.replace(/\s+/g,"")};Z.value?Z.value.phone!==$.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(x=>x.phone==$.value.phone.replace(/\s+/g,""))>-1?n.error(c("samePhoneNumberMessage")):we({id:Z.value.id,...r}):(o.value||[]).findIndex(x=>x.phone==$.value.phone.replace(/\s+/g,""))>-1?n.error(c("samePhoneNumberMessage")):oe(r),A.value=!1}}),!1);let y=null;const E=()=>{y&&(y.destroy(),y=null)};Lg(E);const M=(s,r)=>r.map(x=>s.map(N=>x[N])),b=()=>{y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ms(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var r=["no","phone","createdAt","updatedAt"];const x=pe.sortBy(o.value?.map((R,J)=>({no:J+1,...R})),"phone"),N=M(r,x);try{s.export_json_to_excel({header:r,data:N,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),n.error(c("anErrorOccurred"))}})},z=()=>{y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}),ms(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(s=>{var r=["phone"];const x=M(r,[{phone:"+XXX XXX XXXXX"}]);try{s.export_json_to_excel({header:r,data:x,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),E()}catch{E(),n.error(c("anErrorOccurred"))}})},se=Dn(!1),$e=async({results:s})=>{B.value=!0,e.start(),y||(y=n.info(c("pleaseBePatient"),{duration:0,type:"loading"}));for(let r=0;r<s.length;r++)s[r].phone&&o.value?.findIndex(x=>x.phone.replace(/\s+/g,"")==s[r].phone.replace(/\s+/g,""))==-1&&(y&&(y.content=`${c("pleaseBePatient")}: ${r} ${c("task_s")} / ${s.length}`),await k({phone:s[r].phone.replace(/\s+/g,"")}));await a(),E(),e.finish(),B.value=!1,se.value=!1},le=Dn(Al()),I=Dn([]),C=s=>s.id,Ee=s=>{I.value=s},D=()=>{I.value=[],le.value=Al()},P=async()=>(I.value.length?t.warning({title:c("confirm"),content:c("deleteSelectionWarningMessage",[I.value.length]),positiveText:c("yes"),negativeText:c("no"),onPositiveClick:()=>{p(I.value,{onSuccess:()=>{D()}})}}):n.warning(c("noItemSelected")),!1);return(s,r)=>{const x=Fd,N=Ml,R=Qa,J=Vl,L=Ja,G=Gr,at=Yr,ct=qu,xe=Ea,bt=Va,Ae=Xl,dt=Yd;return Mi(),zg(Ng,null,[Gt(R,{to:"#alt-action"},{default:Ht(()=>[Gt(N,null,{default:Ht(()=>[Gt(x,{onPositiveClick:r[0]||(r[0]=q=>b())},{trigger:Ht(()=>[Gt($t(Ke),{type:"success",secondary:""},{icon:Ht(()=>[Gt($t(Y),{size:"18"},{default:Ht(()=>[Gt($t(ge),{icon:"carbon:upload"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("export")),1)]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("exportDataInExcelFile")),1)]),_:1}),Gt($t(Ke),{type:"info",secondary:"",onClick:r[1]||(r[1]=q=>se.value=!0)},{icon:Ht(()=>[Gt($t(Y),{size:"18"},{default:Ht(()=>[Gt($t(ge),{icon:"carbon:download"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("import")),1)]),_:1}),Gt($t(Ke),{type:"primary",secondary:"",onClick:r[2]||(r[2]=q=>m(null))},{icon:Ht(()=>[Gt($t(Y),{size:"18"},{default:Ht(()=>[Gt($t(ge),{icon:"carbon:add-alt"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),Gt(L,{name:"slide-fade",appear:""},{default:Ht(()=>[$t(I).length?(Mi(),ed(J,{key:0,class:"my-2",size:"small",embedded:""},{default:Ht(()=>[Gt(N,{align:"center",justify:"space-between"},{default:Ht(()=>[Zc("span",null,so($t(c)("nbItemsSelected",[$t(I).length])),1),Gt(N,{align:"center",justify:"space-between"},{default:Ht(()=>[Gt($t(Ke),{type:"error",size:"small",secondary:"",onClick:P},{icon:Ht(()=>[Gt($t(Y),null,{default:Ht(()=>[Gt($t(ge),{icon:"carbon:trash-can"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("delete")),1)]),_:1}),Gt($t(Ke),{type:"warning",size:"small",secondary:"",onClick:D},{icon:Ht(()=>[Gt($t(Y),null,{default:Ht(()=>[Gt($t(ge),{icon:"carbon:close"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Dg("",!0)]),_:1}),Gt(at,null,{default:Ht(()=>[(Mi(),ed(G,{key:$t(le),columns:O,data:$t(te),pagination:d,loading:$t(l)||$t(S),"single-line":!1,"scroll-x":800,"row-key":C,size:"small",striped:"","onUpdate:checkedRowKeys":Ee},null,8,["data","loading","row-key"]))]),_:1}),Gt(Ae,{show:$t(A),"onUpdate:show":r[4]||(r[4]=q=>td(A)?A.value=q:null),loading:$t(F)||$t(H),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:$t(Z)?$t(c)("editPhoneNumber"):$t(c)("addPhoneNumber"),"positive-text":$t(c)("validate"),"negative-text":$t(c)("cancel"),onPositiveClick:T,onNegativeClick:r[5]||(r[5]=q=>A.value=!1)},{default:Ht(()=>[Gt(bt,{ref_key:"formRef",ref:K,class:"mt-5",model:$t($),rules:Q,"show-require-mark":!1,size:"medium"},{default:Ht(()=>[Gt(xe,{label:$t(c)("phone"),path:"phone"},{default:Ht(()=>[Gt(ct,{modelValue:$t($).phone,"onUpdate:modelValue":r[3]||(r[3]=q=>$t($).phone=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Gt(Ae,{show:$t(se),"onUpdate:show":r[7]||(r[7]=q=>td(se)?se.value=q:null),loading:$t(B),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:$t(c)("import")},{default:Ht(()=>[Gt(dt,{class:"my-5","on-success":$e}),Zc("div",Ag,[Gt($t(Ke),{type:"info",size:"small",secondary:"",onClick:r[6]||(r[6]=q=>z())},{icon:Ht(()=>[Gt($t(Y),null,{default:Ht(()=>[Gt($t(ge),{icon:"carbon:download"})]),_:1})]),default:Ht(()=>[zo(" "+so($t(c)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),Fg="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:ld,mergeModels:Og,defineComponent:qg}=await me("vue"),{unref:Ot,toDisplayString:Ao,openBlock:Ca,createElementBlock:ro,createCommentVNode:Ws,createTextVNode:Pr,resolveComponent:dk,withCtx:nl,createVNode:Ql,createElementVNode:Lr,Fragment:rs,renderList:Di,createBlock:io,normalizeStyle:Ni,normalizeClass:Rg}=await me("vue"),jg={class:"text-base"},Kg={key:0},Yg={key:1},Gg={class:"text-base font-bold"},{ref:Po,inject:Hg,computed:Qg,watch:Wg,reactive:Br}=await me("vue"),Jg=qg({__name:"DataForm",props:Og({submitData:{},contentModel:{},readonly:{type:Boolean,default:!1}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,n=ld(u,"show"),t=ld(u,"data"),o=Ze(),a=Qe(),{t:l}=Ie(),{tr:p,pickByTheme:S,editKeysToCamelCase:ce}=ot(),oe=Po(null),F=Po(!1),we=Hg("currentEditItem"),H=Qg(()=>pe.isEqual(t.value,we?.value)&&pe.isEqual(c.value,fe.value)),k=()=>{n.value=!1,F.value=!1},c=Po({}),v=Po(Al()),fe=Po({}),X=Po(),d=Po();Wg(()=>n.value,te=>{te&&(ji(t.value.contentModelData)?c.value=Br(t.value.contentModelData):c.value=Br({}),pe.forIn(ce(e.contentModel?.dataStructure??{}),(B,A)=>{(!c.value[A]||Array.isArray(c.value[A])&&c.value[A].length==0)&&(A==="index"?c.value[A]=Br({}):c.value[A]=Br([]))}),fe.value=pe.cloneDeep(c.value),v.value=Al())},{immediate:!0});const O=async()=>{F.value=!0,o.start();const te=X.value&&await X.value(),B=d.value&&await d.value();(!X.value||te)&&(!d.value||B)?await e.submitData(c.value):a.error(l("mandatoryFieldsNotFilledIn")),o.finish(),F.value=!1};return(te,B)=>{const A=Zi,Z=ir,K=rr,$=ge,Q=Y,m=Ke,T=Ml,y=Vl,E=zn,M=mn,b=Sa,z=Ki;return Ca(),io(z,{modelValue:n.value,"onUpdate:modelValue":B[3]||(B[3]=se=>n.value=se),"close-on-esc":!1,closable:!1,onOnSizeChange:B[4]||(B[4]=se=>{oe.value=se})},{header:nl(()=>[Lr("div",jg,[Ql(A,{depth:"1"},{default:nl(()=>[Pr(Ao(Ot(p)(e.contentModel?.title))+" ",1),e.readonly?(Ca(),ro("span",Kg," Â -Â "+Ao(Ot(l)("preview")),1)):(Ca(),ro("span",Yg," Â -Â "+Ao(Ot(we)?Ot(l)("editItem"):Ot(l)("addItem")),1))]),_:1})])]),"header-extra":nl(()=>[Ql(T,{align:"center"},{default:nl(()=>[e.readonly?Ws("",!0):(Ca(),ro(rs,{key:0},[Lr("span",Gg,Ao(Ot(l)("status"))+":",1),Ql(K,{value:t.value.isActive,"onUpdate:value":B[0]||(B[0]=se=>t.value.isActive=se),name:"isActive",class:"w-full"},{default:nl(()=>[Ql(Z,{value:!1,label:Ot(l)("unpublished")},null,8,["label"]),Ql(Z,{value:!0,label:Ot(l)("published")},null,8,["label"])]),_:1},8,["value"]),B[5]||(B[5]=Lr("div",{class:"w-4"},null,-1)),Ql(m,{secondary:"",type:"success",title:Ot(l)("save"),loading:Ot(F),disabled:Ot(H),onClick:B[1]||(B[1]=se=>O())},{icon:nl(()=>[Ql(Q,null,{default:nl(()=>[Ql($,{icon:"carbon:save"})]),_:1})]),default:nl(()=>[Pr(" "+Ao(Ot(l)("save")),1)]),_:1},8,["title","loading","disabled"])],64)),Ql(m,{secondary:"",type:"error",title:Ot(l)("close"),disabled:Ot(F),onClick:B[2]||(B[2]=se=>k())},{icon:nl(()=>[Ql(Q,null,{default:nl(()=>[Ql($,{icon:"carbon:close"})]),_:1})]),default:nl(()=>[Pr(" "+Ao(Ot(l)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:nl(()=>[Lr("section",{style:Ni(`min-height: ${Ot(oe)?.windowHeight-Ot(oe)?.headerHeight-5}px`),class:Rg(`w-full h-full ${Ot(S)("bg-slate-200","bg-zinc-800")}`)},[Ql(b,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:nl(()=>[Ql(M,{class:"ml-4 mt-2"},{default:nl(()=>[Ql(E,{style:Ni(`height: ${Ot(oe)?.windowHeight-Ot(oe)?.headerHeight-50}px`)},{default:nl(()=>[(Ca(!0),ro(rs,null,Di(Ot(ce)(u.contentModel?.dataStructure),(se,$e)=>(Ca(),ro(rs,{key:$e},[String($e)==="index"?(Ca(),io(y,{key:0,size:"small",class:"mb-2"},{default:nl(()=>[(Ca(),io(or,{key:`${Ot(v)}-${$e}-form-1`,modelValue:Ot(c)[$e],"onUpdate:modelValue":le=>Ot(c)[$e]=le,items:se,onUpdate:(le,I)=>{X.value=I}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):Ws("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),Ql(M,{class:"mr-4 mt-2"},{default:nl(()=>[Ql(E,{style:Ni(`height: ${Ot(oe)?.windowHeight-Ot(oe)?.headerHeight-50}px`)},{default:nl(()=>[(Ca(!0),ro(rs,null,Di(Ot(ce)(u.contentModel?.dataStructure),(se,$e)=>(Ca(),ro(rs,{key:$e},[String($e)!=="index"?(Ca(),io(y,{key:0,title:Ot(p)(se.title),size:"small",class:"mb-2"},{"header-extra":nl(()=>[e.readonly?Ws("",!0):(Ca(),io(m,{key:0,quaternary:"",size:"small",onClick:()=>Ot(c)[$e].push({})},{icon:nl(()=>[Ql(Q,null,{default:nl(()=>[Ql($,{icon:"carbon:add-alt"})]),_:1})]),default:nl(()=>[Pr(" "+Ao(Ot(l)("add")),1)]),_:1},8,["onClick"]))]),default:nl(()=>[(Ca(!0),ro(rs,null,Di(Ot(c)[$e],(le,I)=>(Ca(),io(y,{key:I,title:String(I+1),size:"small",class:"mb-2"},{"header-extra":nl(()=>[e.readonly?Ws("",!0):(Ca(),io(m,{key:0,secondary:"",type:"error",size:"small",onClick:()=>Ot(c)[$e].splice(I,1)},{icon:nl(()=>[Ql(Q,null,{default:nl(()=>[Ql($,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]),default:nl(()=>[(Ca(),io(or,{key:`${Ot(v)}-${$e}-${I}-form-2`,modelValue:Ot(c)[$e][I],"onUpdate:modelValue":C=>Ot(c)[$e][I]=C,items:se.items,onUpdate:(C,Ee)=>{d.value=Ee}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):Ws("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:Xg,mergeModels:Zg,defineComponent:e1}=await me("vue"),{unref:Qt,resolveComponent:uk,createVNode:Wl,toDisplayString:Fr,createTextVNode:ad,withCtx:ua,renderList:t1,Fragment:nd,openBlock:Js,createElementBlock:od,createElementVNode:Or,createBlock:zi,normalizeClass:l1,isRef:a1}=await me("vue"),{inject:n1,ref:Xs,h:sd,computed:rd}=await me("vue"),o1={class:"flex items-center justify-between"},s1={class:"flex flex-col"},r1={class:"text-sm font-bold"},i1={class:"text-xs font-normal"},c1=e1({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Zg(["update"],["update:show"]),setup(u,{emit:e}){const{t:n}=Ie(),{pickByTheme:t,tr:o,mergeArrays:a}=ot(),{extractItemTitle:l}=fs(),{data:p}=fo(),{mutate:S,isPending:ce}=Hd(),oe=oa(),F=e,we=Xg(u,"show"),H=n1("currentEditItem"),k=async T=>{oe.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{S({id:H?.value?.id,relatedItems:H?.value?.relatedItems?.filter(y=>y.id!==T.id)?.map(y=>y.id)},{onSuccess:()=>{F("update",H?.value?.id)}})}})},c=T=>p.value?.find(y=>y.id===T.contentModelId),v=Xs(!1),fe=Xs(null),X=Xs({contentModelId:null,itemId:null}),d={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},O=async()=>(fe.value?.validate(async T=>{if(!T){const y=H?.value?.relatedItems?.map(E=>E.id)||[];S({id:H?.value?.id,relatedItems:[...y,X.value.itemId]},{onSuccess:()=>{F("update",H?.value?.id),v.value=!1}})}}),!1),te=T=>sd("span",{},{default:()=>o(T.title)}),B=T=>rd(()=>sd("span",{},{default:()=>l(T,c(T))})),A=Xs([]),Z=Xs([]),{mutateAsync:K,isPending:$}=tc(),Q=async(T,y)=>{if(!T.length){Z.value=[];return}Z.value=await K({query:T,contentModelId:y})},m=rd(()=>a(A.value,Z.value,"id").filter(T=>T.id!==H?.value?.id));return(T,y)=>{const E=ge,M=Ke,b=Ml,z=Y,se=Vl,$e=zn,le=Za,I=_o,C=Xl,Ee=en,D=Ea,P=Va;return Js(),od(nd,null,[Wl(C,{show:we.value,"onUpdate:show":y[2]||(y[2]=s=>we.value=s),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Qt(n)("linkContentModelItems")},{"header-extra":ua(()=>[Wl(b,{align:"center"},{default:ua(()=>[Wl(M,{secondary:"",size:"small",type:"primary",disabled:Qt(ce),onClick:y[0]||(y[0]=s=>v.value=!0)},{default:ua(()=>[Wl(E,{icon:"carbon:add-alt",class:"mr-1"}),ad(" "+Fr(Qt(n)("add")),1)]),_:1},8,["disabled"]),Wl(M,{secondary:"",size:"small",type:"error",disabled:Qt(ce),onClick:y[1]||(y[1]=s=>we.value=!1)},{default:ua(()=>[Wl(E,{icon:"carbon:close",class:"mr-1"}),ad(" "+Fr(Qt(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:ua(()=>[Wl(I,{show:Qt(ce)},{default:ua(()=>[Qt(H)?.relatedItems?.length?(Js(),zi($e,{key:0,style:{"max-height":"400px"}},{default:ua(()=>[(Js(!0),od(nd,null,t1(Qt(H)?.relatedItems,s=>(Js(),zi(se,{key:s.id,embedded:"",size:"small",class:"mb-2"},{default:ua(()=>[Or("div",o1,[Or("div",s1,[Or("span",r1,Fr(Qt(l)(s,c(s))),1),Or("span",i1,Fr(Qt(o)(c(s)?.title)),1)]),Wl(b,null,{default:ua(()=>[Wl(M,{size:"small",type:"error",secondary:"",onClick:r=>k(s)},{default:ua(()=>[Wl(z,null,{default:ua(()=>[Wl(E,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Js(),zi(se,{key:1,size:"large",class:l1(`mb-2 !border-dashed !border-2 ${Qt(t)("!border-zinc-300","!border-zinc-600")}`)},{default:ua(()=>[Wl(le,{description:Qt(n)("noLinkAdded")},{icon:ua(()=>[Wl(z,null,{default:ua(()=>[Wl(E,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Wl(C,{show:Qt(v),"onUpdate:show":y[6]||(y[6]=s=>a1(v)?v.value=s:null),loading:Qt(ce),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Qt(n)("addLink"),"positive-text":Qt(n)("validate"),"negative-text":Qt(n)("cancel"),onPositiveClick:O,onNegativeClick:y[7]||(y[7]=s=>v.value=!1)},{default:ua(()=>[Wl(P,{ref_key:"formRef",ref:fe,model:Qt(X),rules:d,"show-require-mark":!1,size:"medium",class:"my-5"},{default:ua(()=>[Wl(D,{label:Qt(n)("contentModel"),path:"contentModelId"},{default:ua(()=>[Wl(Ee,{value:Qt(X).contentModelId,"onUpdate:value":y[3]||(y[3]=s=>Qt(X).contentModelId=s),options:Qt(p),placeholder:Qt(n)("contentModel"),"render-label":te,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Wl(D,{label:Qt(n)("itemToLink"),path:"itemId"},{default:ua(()=>[Wl(Ee,{value:Qt(X).itemId,"onUpdate:value":y[4]||(y[4]=s=>Qt(X).itemId=s),options:Qt(m)||[],placeholder:Qt(n)("itemToLink"),"render-label":s=>B(s).value,loading:Qt($),disabled:!Qt(X).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:y[5]||(y[5]=s=>Q(s,Qt(X).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:d1}=await me("vue"),{useModel:u1,defineComponent:p1}=await me("vue"),{unref:Te,toDisplayString:fl,createTextVNode:ta,resolveComponent:pk,isRef:is,withCtx:Le,createVNode:Pe,createElementVNode:la,openBlock:Nl,createElementBlock:sn,createCommentVNode:Lo,renderList:id,Fragment:Bo,createBlock:Nn,normalizeClass:cd,withModifiers:qr}=await me("vue"),m1={key:0,class:"w-full flex items-center justify-between gap-4"},f1={class:"flex items-center gap-3"},_1={key:0},v1={class:"flex items-center justify-center h-full"},y1=["src"],g1={class:"text-center text-dimgray text-sm"},h1={class:"flex items-center"},b1={class:"text-base"},k1={key:1,class:"flex items-center justify-center"},w1={key:0},x1={key:1},{ref:Oa,computed:dd,watch:$1,isReadonly:mk,provide:C1}=await me("vue"),{defineStore:I1}=await me("pinia"),V1=p1({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=Ie(),{extractItemTitle:n,getContentModelItemCreatorTypeLabel:t,getContentModelItemCreatorTypeTagType:o}=fs(),{tr:a,pickByTheme:l}=ot(),p=oa(),S=Qe(),ce=hu(),oe=u1(u,"modelValue"),F=Oa(!1),we=Oa(!1),H=Oa(!1),k=Oa(!1),c=Oa([]),{mutate:v}=Zp(),{mutate:fe}=Xp(),{mutate:X}=Hd(),{mutate:d}=em(),O=Oa(0),te=Oa(24),B=Oa(1),A=dd(()=>({contentModelId:oe.value?.id,pageSize:te.value,page:B.value})),Z=r=>{B.value=r,Q()},K=r=>{te.value=r,Q()},{data:$,refetch:Q,isPending:m}=bu(A);$1(()=>$.value,r=>{c.value=r?.items||[],O.value=r?.meta?.total||0,B.value=r?.meta?.currentPage||1},{deep:!0,immediate:!0});const T=Oa(null),y=Oa({title:"",contentModelData:"",isActive:!0}),E=(r,x=!1)=>{T.value=pe.cloneDeep(r),k.value=x,r?y.value=pe.cloneDeep(r):y.value={title:"",contentModelData:"",isActive:!0},F.value=!0},M=r=>{T.value=pe.cloneDeep(r),H.value=!0},b=r=>{T.value=pe.cloneDeep(r),we.value=!0},z=async r=>{await Q();const x=c.value.find(N=>N.id===r);x&&M(x)},se=async r=>{p.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{r.id&&v({id:r.id})}})},$e=async r=>{const x={title:y.value.title,contentModelData:r,isActive:y.value.isActive,contentModelId:oe.value?.id,createdByType:nr.ADMIN,createdBy:ce.userData?.id};T.value?X({id:T.value.id,...x}):fe(x),F.value=!1},le=Oa(!1),I=Oa(Al()),C=Oa({}),Ee=dd(()=>{let r=0;for(const x in C.value)C.value[x]&&r++;return r});function D(){C.value={},Q()}const P=async()=>(Ee.value?p.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[Ee.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{d(C.value,{onSuccess:()=>{C.value={}}})}}):S.warning(e("noItemSelected")),!1),s=I1("content-model-items-store",()=>({uiFormat:Oa("list")}))();return C1("currentEditItem",T),(r,x)=>{const N=vo,R=ge,J=Y,L=Ke,G=Ml,at=Qa,ct=ir,xe=rr,bt=Pd,Ae=dr,dt=Aa,q=Vl,V=Ja,w=mn,ae=Sa,Vt=Xa,_e=Tu,St=Uu,Ct=_n,j=fn,re=Ko,tt=_o,ve=Za,Tt=Mu,vl=Xl;return Nl(),sn(Bo,null,[Pe(at,{to:"#alt-action"},{default:Le(()=>[Pe(G,{align:"center"},{default:Le(()=>[Pe(N,{checked:Te(le),"onUpdate:checked":[x[0]||(x[0]=Ge=>is(le)?le.value=Ge:null),x[1]||(x[1]=Ge=>{for(const kt of Te(c))kt.id&&(Te(C)[kt.id]=Ge);I.value=("uuidv4"in r?r.uuidv4:d1(Al))()})],disabled:!Te(c).length},{default:Le(()=>[ta(fl(Te(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),Pe(L,{type:"primary",secondary:"",onClick:x[2]||(x[2]=Ge=>E(null))},{icon:Le(()=>[Pe(J,{size:"18"},{default:Le(()=>[Pe(R,{icon:"carbon:add-alt"})]),_:1})]),default:Le(()=>[ta(" "+fl(Te(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),Pe(bt,{class:"mt-2 mb-5",onBack:x[4]||(x[4]=Ge=>oe.value=null)},{title:Le(()=>[ta(fl(Te(a)(oe.value?.title)),1)]),back:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Le(()=>[Pe(G,null,{default:Le(()=>[Te(Ee)>0?(Nl(),sn("section",m1,[la("span",null,fl(Te(e)("nbItemsSelected",[Te(Ee)])),1),la("section",f1,[Pe(L,{type:"error",secondary:"",size:"small",onClick:P},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:trash-can"})]),_:1})]),default:Le(()=>[ta(" "+fl(Te(e)("delete")),1)]),_:1}),Pe(L,{type:"warning",secondary:"",size:"small",onClick:D},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:close-filled"})]),_:1})]),default:Le(()=>[ta(" "+fl(Te(e)("cancelSelection")),1)]),_:1})])])):Lo("",!0),Pe(xe,{value:Te(s).uiFormat,"onUpdate:value":x[3]||(x[3]=Ge=>Te(s).uiFormat=Ge),size:"small",class:"w-full"},{default:Le(()=>[Pe(ct,{value:"grid",class:"w-[50%]"},{default:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:grid"})]),_:1})]),_:1}),Pe(ct,{value:"list",class:"w-[50%]"},{default:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:list"})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),Te(c).length&&!Te(m)?(Nl(),sn("section",_1,[Te(s).uiFormat=="grid"?(Nl(),Nn(ae,{key:0,"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Le(()=>[(Nl(!0),sn(Bo,null,id(Te(c),(Ge,kt)=>(Nl(),Nn(w,{key:kt},{default:Le(()=>[Pe(V,{name:"slide-fade",appear:""},{default:Le(()=>[Pe(q,{size:"small",bordered:"",hoverable:""},{cover:Le(()=>[la("div",v1,[la("img",{src:oe.value?.imageUrl??Te(Fg),class:"w-full h-[200px] object-cover"},null,8,y1)])]),header:Le(()=>[la("div",g1,[Pe(Ae,{"line-clamp":1,"expand-trigger":"click"},{default:Le(()=>[Ge.id?(Nl(),Nn(N,{key:Te(I),checked:Te(C)[Ge.id],"onUpdate:checked":Rt=>Te(C)[Ge.id]=Rt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Lo("",!0),ta(" "+fl(Te(n)(Ge,oe.value)||`${Te(e)("unnamedItem")} (${kt+1})`),1)]),_:2},1024)])]),action:Le(()=>[Pe(G,{justify:"space-between",align:"center"},{default:Le(()=>[Pe(dt,{bordered:!1,type:Ge.isActive?"success":"error"},{default:Le(()=>[ta(fl(Ge.isActive?Te(e)("published"):Te(e)("unpublished")),1)]),_:2},1032,["type"]),Pe(G,null,{default:Le(()=>[Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("about"),onClick:Rt=>b(Ge)},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:information-filled"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("preview"),onClick:Rt=>E(Ge,!0)},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("edit"),onClick:Rt=>E(Ge)},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("links"),onClick:Rt=>M(Ge)},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"error",secondary:"",title:Te(e)("delete"),onClick:Rt=>se(Ge)},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(Nl(!0),sn(Bo,{key:1},id(Te(c),(Ge,kt)=>(Nl(),Nn(q,{key:kt,embedded:"",size:"small",class:"mb-2"},{default:Le(()=>[Pe(j,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Le(({collapsed:Rt})=>[Pe(G,{align:"center",justify:"space-between"},{default:Le(()=>[Pe(dt,{bordered:!1,type:Ge.isActive?"success":"error"},{default:Le(()=>[ta(fl(Ge.isActive?Te(e)("published"):Te(e)("unpublished")),1)]),_:2},1032,["type"]),Pe(J,null,{default:Le(()=>[Rt?(Nl(),Nn(R,{key:0,icon:"fa-solid:chevron-left"})):(Nl(),Nn(R,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Le(()=>[...x[10]||(x[10]=[la("span",null,null,-1)])]),default:Le(()=>[Pe(Ct,{name:"1"},{header:Le(()=>[la("div",h1,[Pe(G,null,{default:Le(()=>[Ge.id?(Nl(),Nn(N,{key:Te(I),checked:Te(C)[Ge.id],"onUpdate:checked":Rt=>Te(C)[Ge.id]=Rt,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Lo("",!0)]),_:2},1024),Pe(Vt,{vertical:"",class:cd(Te(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Pe(G,null,{default:Le(()=>[Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("preview"),onClick:qr(Rt=>E(Ge,!0),["stop"])},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:content-view"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("edit"),onClick:qr(Rt=>E(Ge),["stop"])},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"primary",secondary:"",title:Te(e)("links"),onClick:qr(Rt=>M(Ge),["stop"])},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),Pe(L,{size:"small",type:"error",secondary:"",title:Te(e)("delete"),onClick:qr(Rt=>se(Ge),["stop"])},{icon:Le(()=>[Pe(J,null,{default:Le(()=>[Pe(R,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),Pe(Vt,{vertical:"",class:cd(Te(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),la("span",b1,fl(Te(n)(Ge,oe.value)||`${Te(e)("unnamedItem")} (${kt+1})`),1)])]),default:Le(()=>[Pe(St,{"label-placement":"left",bordered:""},{default:Le(()=>[Ge?.createdByType?(Nl(),Nn(_e,{key:0},{label:Le(()=>[ta(fl(Te(e)("source")),1)]),default:Le(()=>[Pe(dt,{size:"small",type:Te(o)(Ge?.createdByType)},{default:Le(()=>[ta(fl(Te(t)(Ge?.createdByType)),1)]),_:2},1032,["type"])]),_:2},1024)):Lo("",!0),Pe(_e,null,{label:Le(()=>[ta(fl(Te(e)("addedBy")),1)]),default:Le(()=>[Ge?.createdByUser?(Nl(),sn(Bo,{key:0},[ta(fl(`${Ge?.createdByUser?.firstname} ${Ge?.createdByUser?.lastname}`),1)],64)):(Nl(),sn(Bo,{key:1},[ta(fl(Te(e)("undefined")),1)],64))]),_:2},1024),Ge?.createdByUser?.createdAt?(Nl(),Nn(_e,{key:1},{label:Le(()=>[ta(fl(Te(e)("date")),1)]),default:Le(()=>[ta(" "+fl(Te(pn)(Ge?.createdByUser?.createdAt)),1)]),_:2},1024)):Lo("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Pe(re,{page:Te(B),"onUpdate:page":[x[5]||(x[5]=Ge=>is(B)?B.value=Ge:null),Z],class:"mt-10 justify-center","show-size-picker":"","page-size":Te(te),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(Te(O)/Te(te)),"onUpdate:pageSize":K},{prefix:Le(()=>[ta(fl(`${Te(O)} ${Te(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):Te(m)?(Nl(),sn("section",k1,[Pe(tt,{size:"medium"})])):(Nl(),Nn(ve,{key:2,description:Te(e)("noItemAdded"),class:"my-16"},null,8,["description"])),Pe(Jg,{show:Te(F),"onUpdate:show":x[6]||(x[6]=Ge=>is(F)?F.value=Ge:null),data:Te(y),"onUpdate:data":x[7]||(x[7]=Ge=>is(y)?y.value=Ge:null),"content-model":oe.value,"submit-data":$e,readonly:Te(k)},null,8,["show","data","content-model","readonly"]),Pe(c1,{show:Te(H),"onUpdate:show":x[8]||(x[8]=Ge=>is(H)?H.value=Ge:null),onUpdate:z},null,8,["show"]),Pe(vl,{show:Te(we),"onUpdate:show":x[9]||(x[9]=Ge=>is(we)?we.value=Ge:null),preset:"card",style:{width:"450px"},bordered:!1,"show-icon":!1,title:Te(e)("about")},{default:Le(()=>[Pe(Tt,{striped:"","single-line":!1,size:"small"},{default:Le(()=>[la("tbody",null,[Te(T)?.createdByType?(Nl(),sn("tr",w1,[la("td",null,[la("b",null,fl(Te(e)("source")),1)]),la("td",null,[Pe(dt,{size:"small",type:Te(o)(Te(T)?.createdByType)},{default:Le(()=>[ta(fl(Te(t)(Te(T)?.createdByType)),1)]),_:1},8,["type"])])])):Lo("",!0),la("tr",null,[la("td",null,[la("b",null,fl(Te(e)("addedBy")),1)]),la("td",null,[Te(T)?.createdByUser?(Nl(),sn(Bo,{key:0},[ta(fl(`${Te(T)?.createdByUser?.firstname} ${Te(T)?.createdByUser?.lastname}`),1)],64)):(Nl(),sn(Bo,{key:1},[ta(fl(Te(e)("undefined")),1)],64))])]),Te(T)?.createdByUser?.createdAt?(Nl(),sn("tr",x1,[la("td",null,[la("b",null,fl(Te(e)("date")),1)]),la("td",null,fl(Te(pn)(Te(T)?.createdByUser?.createdAt)),1)])):Lo("",!0)])]),_:1})]),_:1},8,["show","title"])],64)}}}),S1=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["content-models"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/content-models",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},E1=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["content-models"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/content-models/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},U1=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["content-models"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/content-models/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},{defineComponent:T1}=await me("vue"),{unref:de,resolveComponent:fk,createVNode:Be,withCtx:Fe,toDisplayString:Ia,createTextVNode:za,openBlock:pa,createBlock:Ka,createCommentVNode:Fo,isRef:Zs,renderList:M1,Fragment:ud,createElementBlock:er,withModifiers:Rr,createElementVNode:jr,normalizeClass:pd,normalizeStyle:D1}=await me("vue"),N1={key:2},z1={key:0},A1={class:"flex items-center"},P1={class:"text-base"},L1={key:0,class:"mt-4"},{inject:B1,ref:Ya,computed:md,watch:F1}=await me("vue"),{defineStore:fd}=await me("pinia"),O1="previews",q1=T1({__name:"index",setup(u){const{t:e}=Ie(),{contentModelIntents:n,contentModelAccessScopes:t,getContentModelIntentLabel:o,getContentModelIntentTagType:a,getContentModelAccessScopeLabel:l,getContentModelAccessScopeTagType:p}=fs(),{tr:S,pickByTheme:ce,fileUrl:oe,isInDevMode:F,formatKey:we,appPrimaryColor:H}=ot(),{data:k}=fo(),{mutate:c,isPending:v}=U1(),{mutate:fe,isPending:X}=S1(),{mutate:d,isPending:O}=E1(),te=oa(),B=B1("appConfig"),A=fd("content-models-store",()=>({currentTab:Ya("all")}))(),Z=md(()=>A.currentTab=="all"?k.value:k.value?.filter(J=>J.intent==A.currentTab)),K=Ya(""),$=Ya(),Q=md(()=>{if(!K.value)return Z.value||[];const J=(Z.value||[]).filter(L=>L.title.toLowerCase().includes(K.value.toLowerCase())||L.description?.toLowerCase().includes(K.value.toLowerCase()));return $.value&&$.value.focus(),J}),m=Ya(24),T=Ya(1),y=J=>{m.value=J},E={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",intent:uo.EDITORIAL_CONTENT,accessScope:Kr.INTERNAL,hasPermalink:!1},M=Ya(!1),b=Ya(null),z=Ya(E),se={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}],intent:[{required:!0,message:e("fillRequired")}],accessScope:[{required:!0,message:e("fillRequired")}]},$e=Ya(null),le=J=>{$e.value=pe.cloneDeep(J),z.value=pe.cloneDeep(J||E),M.value=!0},I=async()=>(b.value?.validate(async J=>{if(!J){const L={id:$e.value?.id||0,name:z.value.name,title:z.value.title,image:z.value.image,description:z.value.description,titleFieldName:z.value.titleFieldName,intent:z.value.intent,accessScope:z.value.accessScope,hasPermalink:z.value.hasPermalink};$e.value?d(L,{onSuccess:()=>{}}):fe(L,{onSuccess:()=>{}}),M.value=!1}}),!1),C=async J=>{te.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{c({id:J.id||0})}})},Ee=Ya(null),D=Ya(!1),P=J=>{Ee.value=J,D.value=!0},s=async J=>{d({id:Ee.value?.id||0,hasPermalink:Ee.value?.hasPermalink,dataStructure:J},{onSuccess:L=>{P(L)}})},r=Ya(!1),x=async J=>{z.value.image=J,r.value=!1},N=()=>{z.value.image=""},R=fd("content-models-management",()=>({itemsContentModel:Ya(null)}))();return F1(()=>z.value.title,J=>{$e.value||z.value.name.length<=21&&(z.value.name=jd(S(J),{trim:!0,lower:!0,strict:!0}))}),(J,L)=>{const G=ge,at=Y,ct=Ke,xe=Qa,bt=Wi,Ae=ll,dt=Wr,q=Ml,V=Xa,w=Aa,ae=_n,Vt=fn,_e=Vl,St=Ko,Ct=Za,j=Ja,re=Pa,tt=Ea,ve=en,Tt=mn,vl=Sa,Ge=Xi,kt=Xn,Rt=vo,ha=Va,ol=Xl,Pl=mo;return pa(),er(ud,null,[de(R).itemsContentModel?Fo("",!0):(pa(),Ka(xe,{key:0,to:"#alt-action"},{default:Fe(()=>[de(k)&&de(k).length?(pa(),Ka(ct,{key:0,type:"primary",secondary:"",onClick:L[0]||(L[0]=rt=>le(null))},{icon:Fe(()=>[Be(at,{size:"18"},{default:Fe(()=>[Be(G,{icon:"carbon:add-alt"})]),_:1})]),default:Fe(()=>[za(" "+Ia(de(e)("addContentModel")),1)]),_:1})):Fo("",!0)]),_:1})),de(R).itemsContentModel?(pa(),Ka(V1,{key:1,modelValue:de(R).itemsContentModel,"onUpdate:modelValue":L[1]||(L[1]=rt=>de(R).itemsContentModel=rt)},null,8,["modelValue"])):(pa(),er("section",N1,[Be(j,{appear:"",name:"slide-fade"},{default:Fe(()=>[jr("section",null,[Be(dt,{value:de(A).currentTab,"onUpdate:value":L[3]||(L[3]=rt=>de(A).currentTab=rt),type:"card",size:"medium",class:"mb-2"},{suffix:Fe(()=>[Be(Ae,{ref_key:"searchInputRef",ref:$,value:de(K),"onUpdate:value":L[2]||(L[2]=rt=>Zs(K)?K.value=rt:null),clearable:!0,placeholder:de(e)("search"),class:"!w-[250px]"},{suffix:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),default:Fe(()=>[Be(bt,{name:"all"},{default:Fe(()=>[Be(at,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(G,{icon:"carbon:table-of-contents"})]),_:1}),za(" "+Ia(de(e)("all")),1)]),_:1}),Be(bt,{name:de(uo).EDITORIAL_CONTENT},{default:Fe(()=>[Be(at,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(G,{icon:"carbon:blog"})]),_:1}),za(" "+Ia(de(e)("editorialContent")),1)]),_:1},8,["name"]),Be(bt,{name:de(uo).USER_DATA},{default:Fe(()=>[Be(at,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(G,{icon:"carbon:group-presentation"})]),_:1}),za(" "+Ia(de(e)("userEntries")),1)]),_:1},8,["name"]),Be(bt,{name:de(uo).SYSTEM_DATA},{default:Fe(()=>[Be(at,{size:"18",class:"mr-1"},{default:Fe(()=>[Be(G,{icon:"carbon:terminal"})]),_:1}),za(" "+Ia(de(e)("systemData")),1)]),_:1},8,["name"])]),_:1},8,["value"]),de(Q)&&de(Q).length?(pa(),er("section",z1,[(pa(!0),er(ud,null,M1(de(Q).slice((de(T)-1)*de(m),de(T)*de(m)),rt=>(pa(),Ka(_e,{key:rt.id,embedded:"",size:"small",class:"mb-2"},{default:Fe(()=>[Be(Vt,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Fe(({collapsed:jt})=>[Be(q,{align:"center",justify:"space-between"},{default:Fe(()=>[Be(ct,{size:"small",type:"primary",secondary:"",onClick:Rr(ne=>de(R).itemsContentModel=rt,["stop"])},{icon:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:arrow-right"})]),_:1})]),default:Fe(()=>[za(" "+Ia(de(e)("open")),1)]),_:1},8,["onClick"]),Be(at,null,{default:Fe(()=>[jt?(pa(),Ka(G,{key:0,icon:"fa-solid:chevron-left"})):(pa(),Ka(G,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Fe(()=>[...L[19]||(L[19]=[jr("span",null,null,-1)])]),default:Fe(()=>[Be(ae,{name:"1"},{header:Fe(()=>[jr("div",A1,[de(F)?(pa(),Ka(q,{key:0},{default:Fe(()=>[Be(ct,{size:"small",type:"primary",secondary:"",onClick:Rr(jt=>P(rt),["stop"])},{default:Fe(()=>[Be(at,{class:"mr-1"},{default:Fe(()=>[Be(G,{icon:"carbon:data-1"})]),_:1}),za(" "+Ia(de(e)("dataStructure")),1)]),_:1},8,["onClick"]),Be(ct,{size:"small",type:"primary",secondary:"",onClick:Rr(jt=>le(rt),["stop"])},{default:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Be(ct,{size:"small",type:"error",secondary:"",onClick:Rr(jt=>C(rt),["stop"])},{default:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):Fo("",!0),de(F)?(pa(),Ka(V,{key:1,vertical:"",class:pd(de(ce)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):Fo("",!0),jr("span",P1,Ia(de(S)(rt.title)),1)])]),default:Fe(()=>[Be(q,null,{default:Fe(()=>[Be(w,{size:"small",type:de(a)(rt.intent)},{default:Fe(()=>[za(Ia(de(o)(rt.intent)),1)]),_:2},1032,["type"]),Be(w,{size:"small",type:de(p)(rt.accessScope)},{default:Fe(()=>[za(Ia(de(l)(rt.accessScope)),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Be(St,{page:de(T),"onUpdate:page":L[4]||(L[4]=rt=>Zs(T)?T.value=rt:null),class:"mt-5 justify-end","show-size-picker":"","page-size":de(m),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(de(Q).length/de(m)),"onUpdate:pageSize":y},{prefix:Fe(()=>[za(Ia(`${de(Q).length} ${de(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):(pa(),Ka(_e,{key:1,size:"large",class:pd(`mb-2 !border-dashed !border-2 ${de(ce)("!border-zinc-300","!border-zinc-600")}`)},{default:Fe(()=>[Be(Ct,{description:de(e)("noContentModelAvailable")},{icon:Fe(()=>[Be(at,null,{default:Fe(()=>[de(K)?(pa(),Ka(G,{key:0,icon:"carbon:search"})):(pa(),Ka(G,{key:1,icon:"carbon:model-alt"}))]),_:1})]),extra:Fe(()=>[de(K)?Fo("",!0):(pa(),er("div",L1,[Be(ct,{size:"small",secondary:"",onClick:L[5]||(L[5]=rt=>le(null))},{icon:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:add-alt"})]),_:1})]),default:Fe(()=>[za(" "+Ia(de(e)("addContentModel")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Be(ol,{show:de(M),"onUpdate:show":L[15]||(L[15]=rt=>Zs(M)?M.value=rt:null),loading:de(X)||de(O)||de(v),preset:"dialog",style:{width:"540px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:de($e)?de(e)("editContentModel"):de(e)("addContentModel"),"positive-text":de(e)("validate"),"negative-text":de(e)("cancel"),onPositiveClick:I,onNegativeClick:L[16]||(L[16]=rt=>M.value=!1)},{default:Fe(()=>[Be(ha,{ref_key:"formRef",ref:b,model:de(z),rules:se,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Fe(()=>[Be(tt,{"show-label":!1,path:"title"},{default:Fe(()=>[Be(re,{modelValue:de(z).title,"onUpdate:modelValue":L[6]||(L[6]=rt=>de(z).title=rt),placeholder:de(e)("title"),class:"w-full",sync:""},{label:Fe(()=>[za(Ia(de(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Be(tt,{"show-label":!1,path:"description"},{default:Fe(()=>[Be(re,{modelValue:de(z).description,"onUpdate:modelValue":L[7]||(L[7]=rt=>de(z).description=rt),placeholder:de(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:Fe(()=>[za(Ia(de(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Be(vl,{"x-gap":"12",span:24},{default:Fe(()=>[Be(Tt,{span:12},{default:Fe(()=>[Be(tt,{path:"intent",label:de(e)("finality")},{default:Fe(()=>[Be(ve,{value:de(z).intent,"onUpdate:value":L[8]||(L[8]=rt=>de(z).intent=rt),options:de(n)||[],placeholder:de(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),Be(Tt,{span:12},{default:Fe(()=>[Be(tt,{path:"accessScope",label:de(e)("accessScope")},{default:Fe(()=>[Be(ve,{value:de(z).accessScope,"onUpdate:value":L[9]||(L[9]=rt=>de(z).accessScope=rt),options:de(t)||[],placeholder:de(e)("select"),filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),Be(vl,{"x-gap":"12",span:24},{default:Fe(()=>[Be(Tt,{span:14},{default:Fe(()=>[Be(tt,{label:de(e)("contentModelKey"),path:"name"},{default:Fe(()=>[Be(Ae,{value:de(z).name,placeholder:de(e)("contentModelKey"),class:"w-full","onUpdate:value":L[10]||(L[10]=rt=>de(z).name=de(we)(rt))},null,8,["value","placeholder"])]),_:1},8,["label"]),Be(tt,{label:de(e)("titleSingletonKey"),path:"titleFieldName"},{default:Fe(()=>[Be(Ae,{value:de(z).titleFieldName,placeholder:de(e)("titleSingletonKey"),class:"w-full","onUpdate:value":L[11]||(L[11]=rt=>de(z).titleFieldName=de(we)(rt))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Be(kt,{span:10,label:de(e)("itemsPreview"),path:"image"},{default:Fe(()=>[Be(q,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:Fe(()=>[Be(Ge,{class:"cursor-pointer","object-fit":"cover",style:D1("border: 1px dashed "+de(ce)(de(H),"white")),size:150,src:de(oe)(de(z).image||""),onClick:L[12]||(L[12]=rt=>r.value=!0)},{default:Fe(()=>[de(z).image?Fo("",!0):(pa(),Ka(at,{key:0,size:64},{default:Fe(()=>[Be(G,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),de(z).image?(pa(),Ka(ct,{key:0,quaternary:"",onClick:L[13]||(L[13]=rt=>N())},{icon:Fe(()=>[Be(at,null,{default:Fe(()=>[Be(G,{icon:"carbon:trash-can"})]),_:1})]),default:Fe(()=>[za(" "+Ia(de(e)("clear")),1)]),_:1})):Fo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),Be(tt,{"show-label":!1,path:"hasPermalink"},{default:Fe(()=>[Be(Rt,{checked:de(z).hasPermalink,"onUpdate:checked":L[14]||(L[14]=rt=>de(z).hasPermalink=rt)},{default:Fe(()=>[za(Ia(de(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Be(Pl,{show:de(r),"onUpdate:show":L[17]||(L[17]=rt=>Zs(r)?r.value=rt:null),title:de(e)("selectImage"),"upload-config":{folder:O1,limit:0,maxSize:0,baseUrl:de(B)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:x},null,8,["show","title","upload-config"]),Be(Xd,{show:de(D),"onUpdate:show":L[18]||(L[18]=rt=>Zs(D)?D.value=rt:null),title:de(S)(de(Ee)?.title),"raw-data-structure":de(Ee)?.dataStructure,"update-data-structure":s},null,8,["show","title","raw-data-structure"])]))],64)}}});var Wn=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Wn||{});const R1=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["permalinks"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:"/permalinks",data:l});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},{defineComponent:j1}=await me("vue"),{unref:st,resolveComponent:_k,createVNode:Ut,withCtx:Dt,toDisplayString:aa,createTextVNode:K1,openBlock:co,createBlock:cs,createCommentVNode:Y1,createElementVNode:Jl,renderList:G1,Fragment:_d,createElementBlock:vd}=await me("vue"),H1={class:"text-base font-bold"},Q1={class:"text-sm"},W1={class:"text-xs text-slate-400"},J1={class:"text-xs text-slate-400"},X1={class:"text-xs text-slate-400"},Z1={class:"text-sm"},eh={class:"text-xs text-slate-400"},th={class:"text-xs text-slate-400"},lh={class:"text-xs text-slate-400"},ah={class:"text-sm"},nh={class:"text-xs text-slate-400"},oh={class:"text-xs text-slate-400"},sh={class:"text-xs text-slate-400"},rh={class:"text-base font-bold"},ih={class:"text-sm"},ch={class:"text-xs text-slate-400"},dh={class:"text-xs text-slate-400"},uh={class:"text-xs text-slate-400"},{ref:yd,computed:gd,h:ph}=await me("vue"),mh=j1({__name:"index",setup(u){const{t:e}=Ie(),{tr:n}=ot(),{data:t}=Gi(),{data:o,refetch:a}=fo({enabled:!1}),{data:l,refetch:p}=ku({enabled:!1}),{mutate:S,isPending:ce}=R1(),oe=[{pathPrefix:"/news/article",contentType:Wn.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Wn.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Wn.NEWS_TAG,contentParam:"slug",pageId:null}],F=yd(oe),we=yd(),H=gd(()=>o.value?.filter(d=>d.hasPermalink)),k=async(d=!1)=>{d&&await a(),await p(),F.value=pe.cloneDeep(oe);for(let O=0;O<(H.value?.length||0);O++)F.value.push({pathPrefix:`/${H.value?.[O].slug}`,contentType:Wn.CONTENT_MODEL,contentParam:"id",contentId:H.value?.[O].id,pageId:null});for(let O=0;O<F.value.length;O++)switch(F.value[O].contentType){case Wn.NEWS_ARTICLE:case Wn.NEWS_CATEGORY:case Wn.NEWS_TAG:{const te=l.value?.find(B=>B.contentType===F.value[O].contentType);te&&(F.value[O].pathPrefix=te.pathPrefix,F.value[O].contentParam=te.contentParam,F.value[O].pageId=te.pageId,F.value[O].permalinkId=te.id)}break;case Wn.CONTENT_MODEL:{const te=l.value?.find(B=>B.contentType===F.value[O].contentType&&B.contentId===F.value[O].contentId);te&&(F.value[O].pathPrefix=te.pathPrefix,F.value[O].contentParam=te.contentParam,F.value[O].pageId=te.pageId,F.value[O].permalinkId=te.id)}break}we.value=pe.cloneDeep(F.value)};k(!0);const c=async()=>{S(F.value,{onSuccess:()=>{k()}})},v=gd(()=>pe.isEqual(F.value,we.value)),fe=d=>ph("span",{},{default:()=>n(d.title)}),X=d=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(d);return(d,O)=>{const te=ge,B=Y,A=Ke,Z=Qa,K=ll,$=mn,Q=en,m=Sa,T=Vl,y=_n,E=fn,M=Xa;return co(),vd(_d,null,[Ut(Z,{to:"#alt-action"},{default:Dt(()=>[Ut(A,{secondary:"",type:"primary",loading:st(ce),disabled:st(v),onClick:O[0]||(O[0]=b=>c())},{icon:Dt(()=>[Ut(B,null,{default:Dt(()=>[Ut(te,{icon:"carbon:save"})]),_:1})]),default:Dt(()=>[K1(" "+aa(st(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),Ut(T,{embedded:"",size:"small"},{default:Dt(()=>[Ut(E,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Dt(({collapsed:b})=>[Ut(B,null,{default:Dt(()=>[b?(co(),cs(te,{key:0,icon:"fa-solid:chevron-left"})):(co(),cs(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Dt(()=>[...O[10]||(O[10]=[Jl("span",null,null,-1)])]),default:Dt(()=>[Ut(y,{name:"1"},{header:Dt(()=>[Jl("span",H1,aa(st(e)("news")),1)]),default:Dt(()=>[Ut(T,{size:"small"},{header:Dt(()=>[Jl("span",Q1,aa(st(e)("articles")),1)]),default:Dt(()=>[Ut(m,{cols:"24","x-gap":"12"},{default:Dt(()=>[Ut($,{span:"10"},{default:Dt(()=>[Jl("span",W1,aa(st(e)("pathPrefix")),1),Ut(K,{value:st(F)[0].pathPrefix,"onUpdate:value":O[1]||(O[1]=b=>st(F)[0].pathPrefix=b),"allow-input":X,size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",J1,aa(st(e)("contentParam")),1),Ut(K,{value:st(F)[0].contentParam,"onUpdate:value":O[2]||(O[2]=b=>st(F)[0].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",X1,aa(st(e)("contentPage")),1),Ut(Q,{value:st(F)[0].pageId,"onUpdate:value":O[3]||(O[3]=b=>st(F)[0].pageId=b),options:st(t)||[],placeholder:st(e)("selectPage"),"render-label":fe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Ut(T,{size:"small"},{header:Dt(()=>[Jl("span",Z1,aa(st(e)("categories")),1)]),default:Dt(()=>[Ut(m,{cols:"24","x-gap":"12"},{default:Dt(()=>[Ut($,{span:"10"},{default:Dt(()=>[Jl("span",eh,aa(st(e)("pathPrefix")),1),Ut(K,{value:st(F)[1].pathPrefix,"onUpdate:value":O[4]||(O[4]=b=>st(F)[1].pathPrefix=b),"allow-input":X,size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",th,aa(st(e)("contentParam")),1),Ut(K,{value:st(F)[1].contentParam,"onUpdate:value":O[5]||(O[5]=b=>st(F)[1].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",lh,aa(st(e)("contentPage")),1),Ut(Q,{value:st(F)[1].pageId,"onUpdate:value":O[6]||(O[6]=b=>st(F)[1].pageId=b),options:st(t)||[],placeholder:st(e)("selectPage"),"render-label":fe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),Ut(T,{size:"small"},{header:Dt(()=>[Jl("span",ah,aa(st(e)("tags")),1)]),default:Dt(()=>[Ut(m,{cols:"24","x-gap":"12"},{default:Dt(()=>[Ut($,{span:"10"},{default:Dt(()=>[Jl("span",nh,aa(st(e)("pathPrefix")),1),Ut(K,{value:st(F)[2].pathPrefix,"onUpdate:value":O[7]||(O[7]=b=>st(F)[2].pathPrefix=b),"allow-input":X,size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",oh,aa(st(e)("contentParam")),1),Ut(K,{value:st(F)[2].contentParam,"onUpdate:value":O[8]||(O[8]=b=>st(F)[2].contentParam=b),readonly:"",size:"small"},null,8,["value"])]),_:1}),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",sh,aa(st(e)("contentPage")),1),Ut(Q,{value:st(F)[2].pageId,"onUpdate:value":O[9]||(O[9]=b=>st(F)[2].pageId=b),options:st(t)||[],placeholder:st(e)("selectPage"),"render-label":fe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Ut(M,{class:"!my-2"}),st(H)?.length&&st(F).length>3?(co(),cs(T,{key:0,embedded:"",size:"small"},{default:Dt(()=>[Ut(E,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":Dt(({collapsed:b})=>[Ut(B,null,{default:Dt(()=>[b?(co(),cs(te,{key:0,icon:"fa-solid:chevron-left"})):(co(),cs(te,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Dt(()=>[...O[11]||(O[11]=[Jl("span",null,null,-1)])]),default:Dt(()=>[Ut(y,{name:"1"},{header:Dt(()=>[Jl("span",rh,aa(st(e)("contentModels")),1)]),default:Dt(()=>[(co(!0),vd(_d,null,G1(st(H),(b,z)=>(co(),cs(T,{key:b.id,size:"small"},{header:Dt(()=>[Jl("span",ih,aa(st(n)(b.title)),1)]),default:Dt(()=>[Ut(m,{cols:"24","x-gap":"12"},{default:Dt(()=>[Ut($,{span:"10"},{default:Dt(()=>[Jl("span",ch,aa(st(e)("pathPrefix")),1),Ut(K,{value:st(F)[z+3].pathPrefix,"onUpdate:value":se=>st(F)[z+3].pathPrefix=se,"allow-input":X,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",dh,aa(st(e)("contentParam")),1),Ut(K,{value:st(F)[z+3].contentParam,"onUpdate:value":se=>st(F)[z+3].contentParam=se,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),Ut($,{span:"7"},{default:Dt(()=>[Jl("span",uh,aa(st(e)("contentPage")),1),Ut(Q,{value:st(F)[z+3].pageId,"onUpdate:value":se=>st(F)[z+3].pageId=se,options:st(t)||[],placeholder:st(e)("selectPage"),"render-label":fe,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):Y1("",!0)],64)}}}),fh=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"post",url:"/newsletter/campaigns",data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},_h=u=>{const{displayFormErrors:e}=ot(),{request:n}=Ye(),{t}=Ie(),o=Qe(),a=Ze();return ht({queryKey:["newsletter-campaigns"],operation:"update",getItemId:l=>l.id??`temp-${crypto.randomUUID()}`,mutationFn:async l=>{a.start();const p=await n({method:"put",url:`/newsletter/campaigns/${l.id}`,data:Zt(l,["id"])});if(a.finish(),p.failure&&p.error)throw new Error(p.error);return p.result.data},mutationOptions:{onSuccess:()=>{o.success(t("success"))},onError:l=>{l?.response?.data?.errorCode===qt.FORM_INVALID_DATA?e(l?.response?.data?.data):o.error(t("anErrorOccurred"))},...u}})},vh=u=>{const{request:e}=Ye(),{t:n}=Ie(),t=Qe(),o=Ze();return ht({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const l=await e({method:"delete",url:`/newsletter/campaigns/${a}`});if(o.finish(),!l.success)throw new Error(l.error);return l.result.data},mutationOptions:{onSuccess:()=>{t.success(n("success"))},onError:a=>{t.error(n("anErrorOccurred"))},...u}})},yh=()=>{const{displayFormErrors:u}=ot(),{request:e}=Ye(),{t:n}=Ie(),t=Ze(),o=Qe();return Wa(async a=>{const l=await e({url:"/sms",method:"post",data:a.data});if(l.failure&&l.error)throw new Error(l.error);return l.result},{onMutate:()=>t.start(),onSettled:()=>t.finish(),onSuccess:(a,l)=>{l.onSuccess?l.onSuccess(a):o.success(n("success"))},onError:(a,l)=>{if(l.onError)l.onError(a);else switch(a?.response?.data?.errorCode){case qt.FORM_INVALID_DATA:u(a?.response?.data?.data);break;default:o.error(n("sendingFailed"))}},retry:2})},{unref:hd}=await me("vue"),{defineComponent:gh}=await me("vue"),{unref:Oe,createVNode:Il,withCtx:ql,toDisplayString:tr,createTextVNode:lr,resolveComponent:vk,createElementVNode:Ai,isRef:bd,renderList:hh,Fragment:kd,openBlock:ar,createElementBlock:wd,createBlock:Pi}=await me("vue"),bh={class:"w-full"},{ref:Oo,h:_l,computed:xd}=await me("vue"),kh=gh({__name:"Campaign",setup(u){const e=Qe(),n=oa(),{getSettingValue:t}=wu(),{ckEditorToolbarItems:o}=ot(),{t:a,locale:l}=Ie(),{data:p}=Zd(),{data:S}=eu(),{data:ce,isPending:oe}=ug(),{mutate:F,isPending:we}=fh(),{mutate:H}=vh(),{mutate:k,isPending:c}=_h(),{mutate:v}=ju(),{mutate:fe}=yh(),X=Oo(""),d=Oo(),O={pageSize:12,prefix:({itemCount:b})=>_l("div",{class:"font-bold"},{default:()=>`${a("total")}: ${b}`})},te=[{title:a("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(b){return _l("div",{},{default:()=>b.title})}},{title:a("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(b){return _l("small",{},{default:()=>b.subject})}},{title:a("numberOfRecipients"),key:"recipients",width:200,render(b){return _l("div",{},{default:()=>b.recipients.length})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:150,render(b){return _l("div",{},{default:()=>pn(b.updatedAt,{locale:l.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:150,render(b){return _l("div",{},{default:()=>pn(b.createdAt,{locale:l.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>_l(ll,{ref:d,placeholder:a("search"),value:X.value,onInput:b=>{X.value=b}},{suffix:()=>_l(Y,{},{default:()=>_l(ge,{icon:"carbon:search"})})}),key:"actions",width:175,render(b){return _l("div",{class:"flex justify-end items-center w-full"},[_l(Ke,{size:"small",type:"primary",secondary:!0,title:a("history"),onClick:()=>{$.value=b,K.value=!0},renderIcon:()=>_l(Y,null,{default:()=>_l(ge,{icon:"mdi:history"})})}),_l("div",{class:"w-2"}),_l(Ke,{size:"small",type:"info",secondary:!0,title:a("launchCampaign"),onClick:()=>{const z=n.info({title:a("launchCampaign"),content:a("confirmLaunchCampaign",[b.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:a("yes"),negativeText:a("cancel"),onPositiveClick:async()=>{z.loading=!0,v({data:{title:b.title,subject:b.subject,content:b.content,recipients:b.recipients.filter(se=>us.isEmail(se)),tags:[]},onSuccess:se=>{const $e=t("phone","string")?.split(",")[0];fe({data:{from:$e.replace(/\s+/g,""),content:b.rawContent,recipients:b.recipients.filter(le=>!us.isEmail(le))},onSuccess:le=>{const I=b.history||[];I.push({id:Al(),date:xu(new Date,{locale:l.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+se.message+" Phone: "+le.message}),k({id:b.id,history:I}),z.loading=!1},onError:()=>{z.loading=!1}})},onError:()=>{z.loading=!1}})}})},renderIcon:()=>_l(Y,null,{default:()=>_l(ge,{icon:"mdi:send"})})}),_l("div",{class:"w-2"}),_l(Ke,{size:"small",type:"warning",secondary:!0,title:a("edit"),onClick:()=>{y(b)},renderIcon:()=>_l(Y,null,{default:()=>_l(ge,{icon:"carbon:edit"})})}),_l("div",{class:"w-2"}),_l(Ke,{size:"small",type:"error",secondary:!0,title:a("delete"),onClick:()=>{n.warning({title:a("confirm"),content:a("confirmDeleteCampaign"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{b.id&&H({id:b.id})}})},renderIcon:()=>_l(Y,null,{default:()=>_l(ge,{icon:"carbon:trash-can"})})})])},fixed:"right"}],B=xd(()=>{if(!X.value)return ce.value;const b=ce.value?.filter(z=>z.title.toLowerCase().includes(X.value.toLowerCase())||z.subject.toLowerCase().includes(X.value.toLowerCase()));return d.value&&d.value.focus(),b}),A=xd(()=>[...(p.value||[]).map(b=>({recipient:b.email,type:"email"})),...(S.value||[]).map(b=>({recipient:b.phone,type:"phone"}))]),Z=Oo(!1),K=Oo(!1),$=Oo(null),Q=Oo(null),m=Oo({title:"",subject:"",content:"",rawContent:"",recipients:[]}),T={title:[{required:!0,message:a("fillRequired")}],subject:[{required:!0,message:a("fillRequired")}],content:[{required:!0,message:a("fillRequired")}],rawContent:[{required:!0,message:a("fillRequired")}],recipients:[{required:!0,message:a("fillRequired")}]},y=b=>{$.value=pe.cloneDeep(b),b?m.value=pe.cloneDeep(b):m.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},Z.value=!0},E=async()=>(Q.value?.validate(async b=>{if(!b){const z={title:m.value.title,subject:m.value.subject,content:m.value.content,rawContent:m.value.rawContent,recipients:m.value.recipients};$.value?$.value.title!==m.value.title&&(ce.value||[]).findIndex(se=>se.title==m.value.title)>-1?e.error(a("sameCampaignTitleMessage")):k({id:$.value.id,...z}):(ce.value||[]).findIndex(se=>se.title==m.value.title)>-1?e.error(a("sameCampaignTitleMessage")):F(z),Z.value=!1}}),!1),M=(b,z)=>pe.isEqual(b.slice().sort(),z.slice().sort());return(b,z)=>{const se=Qa,$e=Gr,le=Yr,I=Ea,C=Od,Ee=vo,D=en,P=Va,s=Xl,r=Du,x=Bd,N=Ld,R=zn,J=Za;return ar(),wd(kd,null,[Il(se,{to:"#alt-action"},{default:ql(()=>[Il(Oe(Ke),{type:"primary",secondary:"",onClick:z[0]||(z[0]=L=>y(null))},{icon:ql(()=>[Il(Oe(Y),{size:"18"},{default:ql(()=>[Il(Oe(ge),{icon:"carbon:add-alt"})]),_:1})]),default:ql(()=>[lr(" "+tr(Oe(a)("addCampaign")),1)]),_:1})]),_:1}),Il(le,null,{default:ql(()=>[Il($e,{columns:te,data:Oe(B),pagination:O,loading:Oe(oe),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),Il(s,{show:Oe(Z),"onUpdate:show":z[9]||(z[9]=L=>bd(Z)?Z.value=L:null),loading:Oe(we)||Oe(c),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Oe($)?Oe(a)("editCampaign"):Oe(a)("addCampaign"),"positive-text":Oe(a)("validate"),"negative-text":Oe(a)("cancel"),onPositiveClick:E,onNegativeClick:z[10]||(z[10]=L=>Z.value=!1)},{default:ql(()=>[Il(P,{ref_key:"formRef",ref:Q,class:"mt-5",model:Oe(m),rules:T,"show-require-mark":!1,size:"medium"},{default:ql(()=>[Il(I,{label:Oe(a)("title"),path:"title"},{default:ql(()=>[Il(Oe(ll),{value:Oe(m).title,"onUpdate:value":z[1]||(z[1]=L=>Oe(m).title=L),placeholder:Oe(a)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),Il(I,{label:Oe(a)("subject"),path:"subject"},{default:ql(()=>[Il(Oe(ll),{value:Oe(m).subject,"onUpdate:value":z[2]||(z[2]=L=>Oe(m).subject=L),placeholder:Oe(a)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),Il(I,{label:Oe(a)("content"),path:"content"},{default:ql(()=>[Ai("div",bh,[Il(C,{modelValue:Oe(m).content,"onUpdate:modelValue":z[3]||(z[3]=L=>Oe(m).content=L),"toolbar-items":Oe(o),placeholder:Oe(a)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),Il(I,{label:Oe(a)("rawContent"),path:"rawContent"},{default:ql(()=>[Il(Oe(ll),{value:Oe(m).rawContent,"onUpdate:value":z[4]||(z[4]=L=>Oe(m).rawContent=L),placeholder:Oe(a)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),Il(I,{label:Oe(a)("recipients"),path:"recipients"},{default:ql(()=>[Il(D,{value:Oe(m).recipients,"onUpdate:value":z[8]||(z[8]=L=>Oe(m).recipients=L),options:Oe(A),placeholder:Oe(a)("recipients"),loading:Oe(oe),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:ql(()=>[Il(Ee,{size:"large",class:"w-full","default-checked":Oe(A).length&&M(Oe(m).recipients,Oe(A).filter(L=>L.type=="email").map(L=>L.recipient)),"onUpdate:checked":z[5]||(z[5]=L=>{L?Oe(m).recipients=Oe(A).filter(G=>G.type=="email").map(G=>G.recipient):Oe(m).recipients=Oe(m).recipients.filter(G=>!("_v"in b?b._v:hd(us)).isEmail(G))})},{default:ql(()=>[lr(tr(Oe(a)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),z[12]||(z[12]=Ai("div",{class:"h-2"},null,-1)),Il(Ee,{size:"large",class:"w-full","default-checked":Oe(A).length&&M(Oe(m).recipients,Oe(A).filter(L=>L.type=="phone").map(L=>L.recipient)),"onUpdate:checked":z[6]||(z[6]=L=>{L?Oe(m).recipients=Oe(A).filter(G=>G.type=="phone").map(G=>G.recipient):Oe(m).recipients=Oe(m).recipients.filter(G=>("_v"in b?b._v:hd(us)).isEmail(G))})},{default:ql(()=>[lr(tr(Oe(a)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),z[13]||(z[13]=Ai("div",{class:"h-2"},null,-1)),Il(Ee,{size:"large",class:"w-full","default-checked":Oe(A).length&&Oe(m).recipients.length===Oe(A).length,"onUpdate:checked":z[7]||(z[7]=L=>{L?Oe(m).recipients=Oe(A).filter(G=>G.recipient).map(G=>G.recipient):Oe(m).recipients=[]})},{default:ql(()=>[lr(tr(Oe(a)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Il(s,{show:Oe(K),"onUpdate:show":z[11]||(z[11]=L=>bd(K)?K.value=L:null),loading:Oe(c),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Oe(a)("history")},{default:ql(()=>[Oe($)?.history?.length?(ar(),Pi(R,{key:0,style:{"max-height":"400px"}},{default:ql(()=>[Il(N,{hoverable:""},{default:ql(()=>[(ar(!0),wd(kd,null,hh(Oe($)?.history.slice().reverse(),L=>(ar(),Pi(x,{key:L.id},{default:ql(()=>[Il(r,{title:L.date,"content-style":"margin-top: 10px;"},{default:ql(()=>[lr(tr(L.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(ar(),Pi(J,{key:1,description:Oe(a)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),wh=()=>{const{request:u}=Ye(),{t:e}=Ie(),n=Ze(),t=Qe();return Wa(async o=>{const a=await u({url:"/app-information",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{t.success(e("success"))},onError:(o,a)=>{t.error(e("unableToUpdateAppInformation"))}})},{defineComponent:xh}=await me("vue"),{unref:_,createVNode:ee,withCtx:ye,toDisplayString:tl,createTextVNode:qo,resolveComponent:$h,openBlock:Wt,createBlock:Hn,createCommentVNode:ya,createElementBlock:zl,createElementVNode:Pt,isRef:Li,vShow:Bi,withDirectives:Fi,normalizeStyle:Qn,Fragment:Ro,renderList:$d,TransitionGroup:Ch,withKeys:Ih}=await me("vue"),Vh={id:"header-btn"},Sh={key:1,id:"alt-action"},Eh={key:"basic-info"},Uh={class:"text-xs"},Th={class:"text-xs"},Mh={class:"text-xs"},Dh={class:"text-xs"},Nh={class:"text-xs"},zh={class:"text-xs"},Ah={class:"text-xs"},Ph={class:"flex items-center gap-2 w-full"},Lh={key:"branding"},Bh={class:"text-sm"},Fh={class:"text-sm"},Oh={class:"flex flex-col items-center justify-center text-gray-400"},qh={class:"text-sm"},Rh={class:"flex flex-col items-center justify-center text-gray-400"},jh={class:"text-sm"},Kh={class:"flex flex-col items-center justify-center text-gray-400"},Yh={class:"text-sm"},Gh={class:"flex flex-col items-center justify-center text-gray-400"},Hh={class:"text-sm"},Qh={class:"flex items-center justify-between"},Wh={class:"font-bold"},Jh={class:"flex items-center"},Xh={class:"flex items-center justify-between"},Zh={class:"font-bold"},eb={class:"flex items-center"},tb={class:"flex items-center justify-between"},lb={class:"font-bold"},ab={class:"flex items-center"},nb={key:"social-networks"},ob={class:"text-xs"},sb={key:"newsletter-email"},rb={key:"newsletter-phone"},ib={key:"newsletter-campaign"},cb={key:"ads"},db={key:"videos"},ub={key:"content-models"},pb={key:"menus"},mb={key:"content-permalinks"},fb={key:"page-sections"},{defineComponent:_b,inject:vb,ref:Ga,h:Oi,computed:qi,watch:Ri,onMounted:Cd}=await me("vue"),{storeToRefs:yb,defineStore:gb}=await me("pinia"),hb=_b({name:Ed.CONTENT_MANAGEMENT.NAME}),bb=xh({...hb,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=V=>e.includes(V),{t,locale:o}=Ie(),a=Yu(),l=oa(),{appPrimaryColor:p,pickByTheme:S,fileUrl:ce,isLgScreen:oe,isMdScreen:F,isSmScreen:we,isXlScreen:H,is2XlScreen:k,tr:c}=ot(),v=$u({enabled:!1}),{isLightTheme:fe,contentLayoutSize:X}=yb(jo());Yi();const{data:d,refetch:O}=Gi(),{mutate:te,isPending:B}=wh(),{mutate:A,isPending:Z}=Wd(),{mutate:K,isPending:$}=Sm(),Q=vb("appConfig"),m=Ga({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),T=Ga(m.value),y=gb("content-management",()=>({currentMenuItemKey:Ga("basic-info")}))(),E=(V,w)=>()=>Oi(Y,{},{default:()=>Oi(ge,{icon:V})}),M=(V,w,ae=!1)=>()=>Oi("span",{id:w,class:{"page-menu-item":ae}},{default:()=>V}),b=qi(()=>{const V=[{label:M(t("basicInfo"),"basic-info"),key:"basic-info",icon:E("carbon:identification")},{label:M(t("branding"),"branding"),key:"branding",icon:E("carbon:color-palette")},{label:M(t("socialNetworks"),"social-networks"),key:"social-networks",icon:E("carbon:share")},{key:"divider",type:"divider"},{label:M(t("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:E("carbon:at")},{label:M(t("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:E("carbon:phone")},{label:M(t("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:E("carbon:bullhorn")},{key:"divider",type:"divider"},{label:M(t("ads"),"ads"),key:"ads",icon:E("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:M(t("videos"),"videos"),key:"videos",icon:E("carbon:video-player")},{key:"divider",type:"divider"},{label:M(t("menusManagement"),"menus"),key:"menus",icon:E("carbon:menu")},{label:M(t("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:E("carbon:link")},{key:"divider",type:"divider"},{label:M(t("contentModels"),"content-models"),key:"content-models",icon:E("carbon:model-alt")},{label:M(t("pageSections"),"page-sections"),key:"page-sections",icon:E("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const w of d.value||[])V.push({label:M(c(w.title).startsWith(t("page"))?c(w.title):`${t("page")} ${c(w.title)}`,`${w.slug}-page`,!0),key:`${w.slug}-page`,icon:E("carbon:document",`${w.slug}-page`)});return d.value&&d.value.length>0&&V.push({key:"divider",type:"divider"}),V.push({label:M(t("addPage"),"add-new-page"),key:"add-new-page",icon:E("carbon:add-alt")}),V}),z=qi(()=>pe.isEqual(m.value,T.value)),se=qi(()=>X.value.height-165),$e=Ga(null),le={email:[{required:!1,message:t("fillRequired")},{trigger:["input"],validator(V,w){return w&&!us.isEmail(w)?new Error(t("invalidEmail")):!0}}]},I=Ga();Ri(()=>I.value,V=>{m.value.additionalInfo=JSON.stringify(V||"[]")},{deep:!0});const C=Ga(null),Ee={},D=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],P=Ga("logos"),s=Ga(!1),r=async V=>{switch(P.value){case"logos":m.value.logo=V;break;case"icons":m.value.icon=V;break;case"monochrome-logos":m.value.oneColorLogo=V;break;case"monochrome-icons":m.value.oneColorIcon=V;break}s.value=!1},x={name:"",title:"",content:"",slug:""},N=Ga(!1),R=Ga(null),J=Ga(x),L={title:[{required:!0,message:t("fillRequired")}]},G=Ga(null),at=V=>{G.value=pe.cloneDeep(V),J.value=pe.cloneDeep(V||x),N.value=!0},ct=async()=>(R.value?.validate(async V=>{if(!V){const w={title:J.value.title};G.value?A({slug:G.value.slug,...w},{onSuccess:ae=>{y.currentMenuItemKey=`${ae?.slug}-page`,N.value=!1}}):K({name:pe.startCase(pe.camelCase(c(J.value.title))).replace(/\s+/g,""),...w},{onSuccess:ae=>{y.currentMenuItemKey=`${ae?.slug}-page`,N.value=!1}})}}),!1),xe=async()=>{await v.refetch(),v.data.value?.forEach(V=>{m.value[V.key]!=null&&(m.value[V.key]=V.value)}),T.value=pe.cloneDeep(m.value);try{I.value=JSON.parse(m.value.additionalInfo||"[]")}catch{I.value=[]}};xe(),Cd(()=>{setTimeout(()=>{a.params.key&&n(a.params.key)&&(y.currentMenuItemKey=a.params.key)},500)});const bt=()=>{te(m.value,{onSuccess:()=>xe()})},Ae=["basic-info","branding","social-networks"];Ri(()=>y.currentMenuItemKey,(V,w)=>{V==="add-new-page"?(y.currentMenuItemKey=w,at(null)):Ae.includes(w)&&!Ae.includes(V)&&(z.value||l.warning({title:t("confirm"),content:t("marketInfoDiscardChangesConfirm"),positiveText:t("yes"),negativeText:t("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{y.currentMenuItemKey=w}}))});const dt=Ga();Ri(()=>[F.value,we.value,oe.value,H.value],([V,w,ae,Vt])=>{dt.value=V||w||ae||Vt,setTimeout(()=>{dt.value=void 0},500)},{immediate:!0});const q=Ku({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:t("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return Cd(()=>{setTimeout(()=>{const V=document.getElementById("sidebar");q.addStep({attachTo:{element:V,on:"left"},title:t("contentManagementGuideTitle1"),text:t("contentManagementGuideText1"),buttons:[{text:t("pass"),label:t("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.cancel()}},{text:t("next"),label:t("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]});const w=document.getElementsByClassName("page-menu-item");if(w&&w.length>0){const Vt=[];for(let _e=0;_e<w.length;_e++)Vt.push(w[_e]?.parentNode?.parentNode?.parentNode);q.addStep({attachTo:{element:Vt[0],on:"left"},title:t("contentManagementGuideTitle2"),text:t("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:t("previous"),label:t("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.back()}},{text:t("next"),label:t("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]})}const ae=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;q.addStep({attachTo:{element:ae,on:"left"},title:t("contentManagementGuideTitle3"),text:t("contentManagementGuideText3"),buttons:[{text:t("previous"),label:t("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.back()}},{text:t("ok"),label:t("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){q.next()}}]})},1e3)}),(V,w)=>{const ae=Ke,Vt=Ml,_e=Au,St=zu,Ct=ll,j=Ea,re=Xn,tt=Sa,ve=Pa,Tt=Qr,vl=Va,Ge=Vl,kt=Xi,Rt=mn,ha=Xa,ol=$h("color-picker"),Pl=Nu,rt=nu,jt=mo,ne=Xl;return Wt(),zl(Ro,null,[ee(rt,null,{"header-extra":ye(()=>[ee(Vt,null,{default:ye(()=>[Pt("div",Vh,[Ae.includes(_(y).currentMenuItemKey)?(Wt(),Hn(ae,{key:0,loading:_(B)||_(v).isPending.value,disabled:_(z),type:"primary",secondary:"",onClick:bt},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:save"})]),_:1})]),default:ye(()=>[qo(" "+tl(_(t)("save")),1)]),_:1},8,["loading","disabled"])):(Wt(),zl("div",Sh))]),ee(ae,{dashed:"",type:"primary",title:_(t)("help"),onClick:w[0]||(w[0]=U=>_(q).start())},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:ye(()=>[ee(Pl,{style:Qn(`height: ${_(se)}px`)},{default:ye(()=>[ee(Pl,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:ye(()=>[ee(St,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:_(dt),"default-collapsed":!_(k),"collapsed-width":64,"native-scrollbar":!1,width:_(k)?300:275},{default:ye(()=>[ee(_e,{value:_(y).currentMenuItemKey,"onUpdate:value":w[1]||(w[1]=U=>_(y).currentMenuItemKey=U),"collapsed-width":64,"collapsed-icon-size":22,options:_(b)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),ee(Pl,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:ye(()=>[ee(Ch,{name:"slide-fade"},{default:ye(()=>[Fi(Pt("section",Eh,[ee(Ge,{hoverable:""},{default:ye(()=>[ee(vl,{ref_key:"basicInfoFormRef",ref:$e,model:_(m),rules:le,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:ye(()=>[ee(j,{path:"name"},{label:ye(()=>[Pt("b",Uh,tl(_(t)("websiteName")),1)]),default:ye(()=>[ee(Ct,{value:_(m).name,"onUpdate:value":w[2]||(w[2]=U=>_(m).name=U),placeholder:_(t)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),ee(tt,{"x-gap":"12",span:24},{default:ye(()=>[ee(re,{span:12,path:"email"},{label:ye(()=>[Pt("b",Th,tl(_(t)("email")),1)]),default:ye(()=>[ee(Ct,{value:_(m).email,"onUpdate:value":w[3]||(w[3]=U=>_(m).email=U),placeholder:_(t)("email"),class:"w-full"},{prefix:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),ee(re,{span:12,path:"phone"},{label:ye(()=>[Pt("b",Mh,tl(_(t)("phone")),1)]),default:ye(()=>[ee(Ct,{value:_(m).phone,"onUpdate:value":w[4]||(w[4]=U=>_(m).phone=U),placeholder:_(t)("phone"),class:"w-full"},{prefix:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),ee(j,{path:"address"},{label:ye(()=>[Pt("span",Dh,[Pt("b",null,tl(_(t)("address")),1)])]),default:ye(()=>[ee(Ct,{value:_(m).address,"onUpdate:value":w[5]||(w[5]=U=>_(m).address=U),placeholder:_(t)("address"),class:"w-full"},{prefix:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),ee(tt,{"x-gap":"12",span:24},{default:ye(()=>[ee(re,{span:12,path:"postalCode"},{label:ye(()=>[Pt("b",Nh,tl(_(t)("postalCode")),1)]),default:ye(()=>[ee(Ct,{value:_(m).postalCode,"onUpdate:value":w[6]||(w[6]=U=>_(m).postalCode=U),placeholder:_(t)("postalCode"),class:"w-full"},{prefix:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),ee(j,{"show-label":!1,path:"description"},{default:ye(()=>[ee(ve,{modelValue:_(m).description,"onUpdate:modelValue":w[7]||(w[7]=U=>_(m).description=U),placeholder:_(t)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:ye(()=>[Pt("b",zh,tl(_(t)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ee(j,{path:"additionalInfo"},{label:ye(()=>[Pt("b",Ah,tl(_(t)("additionalInfo")),1)]),default:ye(()=>[ee(Tt,{value:_(I),"onUpdate:value":w[8]||(w[8]=U=>Li(I)?I.value=U:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":ye(()=>[qo(tl(_(t)("add")),1)]),default:ye(({value:U})=>[Pt("div",Ph,[ee(Ct,{value:U.name,"onUpdate:value":We=>U.name=We,placeholder:_(t)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),ee(Ct,{value:U.content,"onUpdate:value":We=>U.content=We,placeholder:_(t)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Bi,_(y).currentMenuItemKey==="basic-info"]]),Fi(Pt("section",Lh,[ee(Ge,{segmented:"",size:"small"},{header:ye(()=>[Pt("span",Bh,tl(_(t)("graphicElements")),1)]),default:ye(()=>[ee(tt,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:ye(()=>[ee(Rt,null,{default:ye(()=>[ee(Ge,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ye(()=>[Pt("span",Fh,tl(_(t)("logo")),1)]),default:ye(()=>[ee(Vt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ye(()=>[_(m).logo?(Wt(),Hn(kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:Qn("border: 1px dashed "+_(S)(_(p),"white")),size:125,src:_(ce)(_(m).logo),onClick:w[9]||(w[9]=()=>{P.value="logos",s.value=!0})},null,8,["style","src"])):(Wt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Qn(`border: 1px dashed ${_(S)(_(p),"white")}; width: 125px; height: 125px`),onClick:w[10]||(w[10]=()=>{P.value="logos",s.value=!0})},[Pt("div",Oh,[ee(_(Y),{size:"50"},{default:ye(()=>[ee(_(ge),{icon:"carbon:image"})]),_:1}),Pt("span",null,tl(_(t)("import")),1)])],4)),_(m).logo?(Wt(),Hn(ae,{key:2,quaternary:"",onClick:w[11]||(w[11]=()=>_(m).logo="")},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),default:ye(()=>[qo(" "+tl(_(t)("clear")),1)]),_:1})):ya("",!0)]),_:1})]),_:1})]),_:1}),ee(Rt,null,{default:ye(()=>[ee(Ge,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ye(()=>[Pt("span",qh,tl(_(t)("icon")),1)]),default:ye(()=>[ee(Vt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ye(()=>[_(m).icon?(Wt(),Hn(kt,{key:0,class:"cursor-pointer","object-fit":"contain",style:Qn("border: 1px dashed "+_(S)(_(p),"white")),size:125,src:_(ce)(_(m).icon),onClick:w[12]||(w[12]=()=>{P.value="icons",s.value=!0})},null,8,["style","src"])):(Wt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:Qn(`border: 1px dashed ${_(S)(_(p),"white")}; width: 125px; height: 125px`),onClick:w[13]||(w[13]=()=>{P.value="icons",s.value=!0})},[Pt("div",Rh,[ee(_(Y),{size:"50"},{default:ye(()=>[ee(_(ge),{icon:"carbon:image"})]),_:1}),Pt("span",null,tl(_(t)("import")),1)])],4)),_(m).icon?(Wt(),Hn(ae,{key:2,quaternary:"",onClick:w[14]||(w[14]=()=>_(m).icon="")},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),default:ye(()=>[qo(" "+tl(_(t)("clear")),1)]),_:1})):ya("",!0)]),_:1})]),_:1})]),_:1}),ee(Rt,null,{default:ye(()=>[ee(Ge,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ye(()=>[Pt("span",jh,tl(_(t)("logoMonochrome")),1)]),default:ye(()=>[ee(Vt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ye(()=>[_(m).oneColorLogo?(Wt(),Hn(kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Qn("border: 1px dashed "+_(S)(_(p),"white")),size:125,src:_(ce)(_(m).oneColorLogo),onClick:w[15]||(w[15]=()=>{P.value="monochrome-logos",s.value=!0})},null,8,["style","src"])):(Wt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Qn(`border: 1px dashed ${_(S)(_(p),"white")}; width: 125px; height: 125px`),onClick:w[16]||(w[16]=()=>{P.value="monochrome-logos",s.value=!0})},[Pt("div",Kh,[ee(_(Y),{size:"50"},{default:ye(()=>[ee(_(ge),{icon:"carbon:image"})]),_:1}),Pt("span",null,tl(_(t)("import")),1)])],4)),_(m).oneColorLogo?(Wt(),Hn(ae,{key:2,quaternary:"",onClick:w[17]||(w[17]=()=>_(m).oneColorLogo="")},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),default:ye(()=>[qo(" "+tl(_(t)("clear")),1)]),_:1})):ya("",!0)]),_:1})]),_:1})]),_:1}),ee(Rt,null,{default:ye(()=>[ee(Ge,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:ye(()=>[Pt("span",Yh,tl(_(t)("iconMonochrome")),1)]),default:ye(()=>[ee(Vt,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:ye(()=>[_(m).oneColorIcon?(Wt(),Hn(kt,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:Qn("border: 1px dashed "+_(S)(_(p),"white")),size:125,src:_(ce)(_(m).oneColorIcon),onClick:w[18]||(w[18]=()=>{P.value="monochrome-icons",s.value=!0})},null,8,["style","src"])):(Wt(),zl("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:Qn(`border: 1px dashed ${_(S)(_(p),"white")}; width: 125px; height: 125px`),onClick:w[19]||(w[19]=()=>{P.value="monochrome-icons",s.value=!0})},[Pt("div",Gh,[ee(_(Y),{size:"50"},{default:ye(()=>[ee(_(ge),{icon:"carbon:image"})]),_:1}),Pt("span",null,tl(_(t)("import")),1)])],4)),_(m).oneColorIcon?(Wt(),Hn(ae,{key:2,quaternary:"",onClick:w[20]||(w[20]=()=>_(m).oneColorIcon="")},{icon:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),default:ye(()=>[qo(" "+tl(_(t)("clear")),1)]),_:1})):ya("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),w[31]||(w[31]=Pt("br",null,null,-1)),ee(Ge,{hoverable:"",segmented:"",size:"small"},{header:ye(()=>[Pt("span",Hh,tl(_(t)("websiteColors")),1)]),default:ye(()=>[ee(tt,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:ye(()=>[ee(Rt,null,{default:ye(()=>[Pt("div",Qh,[Pt("span",Wh,tl(_(t)("baseColor")),1),Pt("div",Jh,[_(m).primaryColor?(Wt(),zl(Ro,{key:0},[ee(ae,{text:"",type:"error",style:{"font-size":"21px"},onClick:w[21]||(w[21]=U=>_(m).primaryColor="")},{default:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),ee(ha,{vertical:""})],64)):ya("",!0),ee(ol,{"pure-color":_(m).primaryColor,"onUpdate:pureColor":w[22]||(w[22]=U=>_(m).primaryColor=U),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:_(fe)?"white":"black",lang:_(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),ee(Rt,null,{default:ye(()=>[Pt("div",Xh,[Pt("span",Zh,tl(_(t)("secondaryColor")),1),Pt("div",eb,[_(m).secondaryColor?(Wt(),zl(Ro,{key:0},[ee(ae,{text:"",type:"error",style:{"font-size":"21px"},onClick:w[23]||(w[23]=U=>_(m).secondaryColor="")},{default:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),ee(ha,{vertical:""})],64)):ya("",!0),ee(ol,{"pure-color":_(m).secondaryColor,"onUpdate:pureColor":w[24]||(w[24]=U=>_(m).secondaryColor=U),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:_(fe)?"white":"black",lang:_(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),ee(Rt,null,{default:ye(()=>[Pt("div",tb,[Pt("span",lb,tl(_(t)("tertiaryColor")),1),Pt("div",ab,[_(m).accentColor?(Wt(),zl(Ro,{key:0},[ee(ae,{text:"",type:"error",style:{"font-size":"21px"},onClick:w[25]||(w[25]=U=>_(m).accentColor="")},{default:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:"carbon:trash-can"})]),_:1})]),_:1}),ee(ha,{vertical:""})],64)):ya("",!0),ee(ol,{"pure-color":_(m).accentColor,"onUpdate:pureColor":w[26]||(w[26]=U=>_(m).accentColor=U),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:_(fe)?"white":"black",lang:_(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Bi,_(y).currentMenuItemKey==="branding"]]),Fi(Pt("section",nb,[ee(Ge,{hoverable:""},{default:ye(()=>[ee(vl,{ref_key:"socialNetworksFormRef",ref:C,model:_(m),rules:Ee,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:ye(()=>[ee(tt,{"x-gap":"12",span:24},{default:ye(()=>[(Wt(),zl(Ro,null,$d(D,U=>ee(re,{key:U.name,span:12,path:U.name},{label:ye(()=>[Pt("b",ob,tl(_(t)(U.name)),1)]),default:ye(()=>[ee(Ct,{value:_(m)[U.name],"onUpdate:value":We=>_(m)[U.name]=We,placeholder:_(t)(U.name),class:"w-full"},{prefix:ye(()=>[ee(_(Y),null,{default:ye(()=>[ee(_(ge),{icon:U.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Bi,_(y).currentMenuItemKey==="social-networks"]]),_(y).currentMenuItemKey==="newsletter-email"?(Wt(),zl("section",sb,[ee(Cg)])):ya("",!0),_(y).currentMenuItemKey==="newsletter-phone"?(Wt(),zl("section",rb,[ee(Bg)])):ya("",!0),_(y).currentMenuItemKey==="newsletter-campaign"?(Wt(),zl("section",ib,[ee(kh)])):ya("",!0),_(y).currentMenuItemKey==="ads"?(Wt(),zl("section",cb,[ee(gp)])):ya("",!0),_(y).currentMenuItemKey==="videos"?(Wt(),zl("section",db,[ee(Pv)])):ya("",!0),_(y).currentMenuItemKey==="content-models"?(Wt(),zl("section",ub,[ee(q1)])):ya("",!0),_(y).currentMenuItemKey==="menus"?(Wt(),zl("section",pb,[ee(V_)])):ya("",!0),_(y).currentMenuItemKey==="content-permalinks"?(Wt(),zl("section",mb,[ee(mh)])):ya("",!0),_(y).currentMenuItemKey==="page-sections"?(Wt(),zl("section",fb,[ee(dg)])):ya("",!0),(Wt(!0),zl(Ro,null,$d(_(d),(U,We)=>(Wt(),zl(Ro,{key:`${U.slug}-page`},[_(y).currentMenuItemKey===`${U.slug}-page`?(Wt(),zl("section",{key:`${U.slug}-page`},[ee(sf,{slug:U.slug,"open-form-modal":at,onDelete:()=>{_(y).currentMenuItemKey=(_(d)?.length||0)>1?`${_(d)?.[We-1].slug}-page`:e[0],_(O)()}},null,8,["slug","onDelete"])])):ya("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),ee(jt,{show:_(s),"onUpdate:show":w[27]||(w[27]=U=>Li(s)?s.value=U:null),title:_(t)("selectImage"),"upload-config":{folder:_(P),limit:0,maxSize:0,baseUrl:_(Q)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:r},null,8,["show","title","upload-config"]),ee(ne,{show:_(N),"onUpdate:show":w[29]||(w[29]=U=>Li(N)?N.value=U:null),loading:_($)||_(Z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:_(G)?_(t)("editPage"):_(t)("addPage"),"positive-text":_(t)("validate"),"negative-text":_(t)("cancel"),onPositiveClick:ct,onNegativeClick:w[30]||(w[30]=U=>N.value=!1)},{default:ye(()=>[ee(vl,{ref_key:"addPageFormRef",ref:R,model:_(J),rules:L,"show-require-mark":!1,size:"medium"},{default:ye(()=>[ee(j,{"show-label":!1,path:"title",class:"mt-5"},{default:ye(()=>[ee(ve,{modelValue:_(J).title,"onUpdate:modelValue":w[28]||(w[28]=U=>_(J).title=U),placeholder:_(t)("title"),class:"w-full",sync:"",onKeydown:Ih(ct,["enter"])},{label:ye(()=>[qo(tl(_(t)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),yk=Zn(bb,[["__scopeId","data-v-eb0e0d24"]]);export{yk as default};
