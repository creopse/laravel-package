import{I as R}from"./iconify_vue-46af0b81.js";import{g as A,d as z,v as H,c as S}from"./vue-advanced-cropper-45f4d00f.js";import{_ as $}from"./fawmi_vue-google-maps-439c501d.js";import{u as T}from"./vue-i18n-0da1582b.js";import{r as b,u as i}from"./vue_reactivity-852d8377.js";import{p as B,o as g,c as w,a as r,Y as n,aO as v,l as y,P as U,Q as V,d as x,aH as P,r as L}from"./vue_runtime-core-273b5003.js";import{a as M,t as O,n as W}from"./vue_shared-7dcc3b7f.js";import{N as q,J as F,_ as G}from"./naive-ui-ab0dda7d.js";var _=(e=>(e[e.DOCUMENT=1]="DOCUMENT",e[e.IMAGE=2]="IMAGE",e[e.VIDEO=3]="VIDEO",e[e.AUDIO=4]="AUDIO",e[e.OTHER=5]="OTHER",e))(_||{});const Z={class:"picker-container"},j={class:"picker-content"},J={key:0},Q={class:"cropper-container"},Y={class:"vertical-buttons"},K={class:"preview-container"},X={key:1,class:"text-center"},ee={class:"picker-action"},te={class:"dialog-footer"},oe={name:"ImageEditor",inheritAttrs:!1},ae=Object.assign(oe,{props:{cropperAutoZoom:{type:Boolean,default:!0},cropperScalable:{type:Boolean,default:!1},cropperMovable:{type:Boolean,default:!1},cropperRatio:{type:Number,default:null},roundPreview:{type:Boolean,default:!1},previewWidth:{type:Number,default:null},previewHeight:{type:Number,default:120},src:{type:String,default:null}},emits:["croppedFileChange","save","cancel"],setup(e,{emit:a}){const{t:c}=T(),p=a,o=e,s=b(null),l=b({coordinates:null,image:null}),f=B(()=>o.previewWidth?o.previewWidth:l.value&&l.value.coordinates?l.value.coordinates.width/l.value.coordinates.height*o.previewHeight:o.previewHeight),k=({coordinates:u,image:t})=>{l.value={coordinates:u,image:t};const{canvas:d}=s.value.getResult();p("croppedFileChange",l.value,d.toDataURL())},C=(u,t)=>{s.value.customImageTransforms.rotate%180!==0?s.value.flip(!u,!t):s.value.flip(u,t)},I=u=>{s.value.rotate(u)},D=()=>{const{canvas:u}=s.value.getResult();p("save",l.value,u.toDataURL())};return(u,t)=>{const d=R,h=q,N=F,E=G;return g(),w("div",Z,[r("div",j,[o.src?(g(),w("div",J,[r("div",Q,[n(i(H),{ref_key:"cropper",ref:s,class:"cropper",src:o.src,"auto-zoom":o.cropperAutoZoom,"stencil-props":{movable:o.cropperMovable,scalable:o.cropperScalable,aspectRatio:o.cropperRatio,previewClass:o.roundPreview?"circle-stencil-preview":""},"image-restriction":"stencil","background-class":"cropper-background","stencil-component":o.roundPreview?i(A):i(z),onChange:k},null,8,["src","auto-zoom","stencil-props","stencil-component"]),r("div",Y,[r("div",{class:"square-button",title:"Flip Horizontal",onClick:t[0]||(t[0]=m=>C(!0,!1))},[n(h,{color:"white",size:20},{default:v(()=>[n(d,{icon:"fa-solid:arrows-alt-h"})]),_:1})]),r("div",{class:"square-button",title:"Flip Vertical",onClick:t[1]||(t[1]=m=>C(!1,!0))},[n(h,{color:"white",size:20},{default:v(()=>[n(d,{icon:"fa-solid:arrows-alt-v"})]),_:1})]),r("div",{class:"square-button",title:"Rotate Clockwise",onClick:t[2]||(t[2]=m=>I(90))},[n(h,{color:"white",size:20},{default:v(()=>[n(d,{icon:"fa-solid:redo-alt"})]),_:1})]),r("div",{class:"square-button",title:"Rotate Counter-Clockwise",onClick:t[3]||(t[3]=m=>I(-90))},[n(h,{color:"white",size:20},{default:v(()=>[n(d,{icon:"fa-solid:undo-alt"})]),_:1})])])]),t[6]||(t[6]=r("br",null,null,-1)),r("div",K,[n(i(S),{ref:"preview",class:M(["preview",{round:o.roundPreview}]),image:i(l).image,width:i(f),height:o.previewHeight,coordinates:i(l).coordinates},null,8,["image","width","height","class","coordinates"])])])):(g(),w("div",X,[n(N,{title:i(c)("noSrcFileWarning"),type:"warning","show-icon":""},null,8,["title"])])),r("div",ee,[r("span",te,[n(E,{onClick:t[4]||(t[4]=m=>p("cancel"))},{default:v(()=>[y(O(i(c)("close")),1)]),_:1}),t[7]||(t[7]=y("    ")),o.src?(g(),U(E,{key:0,type:"primary",onClick:t[5]||(t[5]=m=>D())},{default:v(()=>[y(O(i(c)("save")),1)]),_:1})):V("",!0)])])])])}}}),ve=$(ae,[["__scopeId","data-v-edf91585"]]),se=["src","alt","title","width","height","loading"],_e=x({__name:"AsyncImg",props:{load:{type:Function},alt:{},width:{},height:{},title:{},loading:{},style:{},fallback:{}},setup(e){const a=e,c=b(""),p=b(!1);(async()=>{c.value=await a.load(),c.value||(a.fallback&&(c.value=a.fallback),p.value=!0)})();const s=P(),l=f=>!!s[f];return(f,k)=>i(p)&&l("fallback")?L(f.$slots,"fallback",{key:0}):(g(),w("img",{key:1,src:i(c),alt:a.alt,title:a.title,style:W(a.style),width:a.width,height:a.height,loading:a.loading},null,12,se))}}),fe=()=>{const{t:e}=T(),a=[{label:e("image"),value:_.IMAGE,tagType:"default"},{label:e("video"),value:_.VIDEO,tagType:"info"},{label:e("audio"),value:_.AUDIO,tagType:"success"},{label:e("document"),value:_.DOCUMENT,tagType:"warning"},{label:e("other"),value:_.OTHER,tagType:"error"}];return{getMediaFileTypeTagType:o=>{var s;return((s=a.find(l=>l.value===o))==null?void 0:s.tagType)||"default"},getMediaFileTypeLabel:o=>{var s;return(s=a.find(l=>l.value===o))==null?void 0:s.label},mediaFileTypes:a}};export{_ as M,_e as _,ve as a,fe as u};
