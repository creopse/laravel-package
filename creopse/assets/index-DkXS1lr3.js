const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue3-ts-jsoneditor-gy4gX5pG.js","assets/jsoneditor-BJ7iDtct.js","assets/process-C_hjxN6x.js","assets/ckeditor5-CeWYpOQ8.js","assets/ckeditor_ckeditor5-utils-Bp8opE8z.js","assets/es-toolkit-RjqxEpf9.js","assets/ckeditor_ckeditor5-engine-CS7i4Bo_.js","assets/ckeditor_ckeditor5-widget-l7jZmFCq.js","assets/ckeditor_ckeditor5-core-Cqajz_gD.js","assets/ckeditor_ckeditor5-watchdog-t246ZXop.js","assets/ckeditor_ckeditor5-typing-DcL_fNuA.js","assets/ckeditor_ckeditor5-icons-BkOmZeoU.js","assets/ckeditor_ckeditor5-ui-wSLROq0V.js","assets/color-parse-BGABsNex.js","assets/color-name-gyPnsvCn.js","assets/color-convert-BAHQI5dc.js","assets/vanilla-colorful-PEGE98j7.js","assets/ckeditor_ckeditor5-enter-B0CSFwo1.js","assets/ckeditor_ckeditor5-list-C9bdqqJO.js","assets/ckeditor_ckeditor5-font-BvBYz8K6.js","assets/ckeditor_ckeditor5-clipboard-3CV4NNCs.js","assets/ckeditor_ckeditor5-mention-Dy-RTP7E.js","assets/ckeditor5-D9dekCkJ.css","assets/ckeditor_ckeditor5-vue-CmLqe3wy.js","assets/originjs_vite-plugin-federation-DDIHa9Ih.js","assets/ckeditor_ckeditor5-integrations-common-ZttWYWgN.js","assets/lodash-es-DCTpQg3n.js","assets/export2excel-BFwIBCeN.js","assets/xlsx-Be0yiQ5A.js","assets/crypto-js-DbOZfsGU.js","assets/file-saver-BKz4gunK.js"])))=>i.map(i=>d[i]);
import{i as se}from"./ckeditor_ckeditor5-vue-CmLqe3wy.js";import{_ as Da,a as to,b as zi}from"./index.vue_vue_type_script_setup_true_lang-DAqFLjEd.js";import{_ as qd}from"./PageLayout.vue_vue_type_script_setup_true_lang-PsJoV7kg.js";import{_ as xa}from"./I18nInput-Ct_MpNyD.js";import{Q as Hs,e as Fe,t as ft,u as Ze,f as Lt,w as Ht,y as Bn,S as Jo,T as Yi,v as Na,U as lo,p as To,V as md,x as Rd,J as jd,W as fd,X as Kd,Y as Ni,_ as za,Z as Ai,$ as Yd,d as Gd,a0 as Hd,a1 as Qd,R as _d,a2 as Wd,a3 as vd,A as Gi,a4 as Pi,a5 as yd,a6 as Xd,a7 as Jd,a8 as gd,a9 as Zd,aa as eu,ab as Li,ac as hd,ad as tu,ae as lu,af as au,q as nu,I as ou,ag as su}from"./main-BFQh8EtE.js";import{I as re}from"./iconify_vue-DXPEksg3.js";import{_ as Ur}from"./NaiveMobileTableAdapter.vue_vue_type_script_setup_true_lang-DUl1S8lD.js";import{u as ke}from"./vue-i18n-B92nPylK.js";import{u as qe,F as Wl,p as Ge,K as Xl,l as ao,a0 as Ra,_ as vl,q as wl,H as Ia,C as ja,B as Be,h as R,J as Aa,a as va,d as ya,e as Fn,c as Zt,Q as Mr,R as Tr,b as ga,a1 as ru,X as es,P as Dr,o as en,S as bd,r as Ka,O as Qs,W as kd,L as Nr,k as no,s as Bi,a2 as iu,a3 as zr,a4 as Fi,a5 as wd,f as Oi,a6 as cu,a7 as du,a8 as xd,D as oo,E as so,w as Ar,t as $d,I as Do,y as qi,a9 as uu,aa as Cd,ab as Id,m as Ri,ac as Vd,ad as pu,T as mu,U as fu,V as _u}from"./naive-ui-BrWbllCz.js";import{_ as le}from"./lodash-C_MgVQnG.js";import{_ as On}from"./fawmi_vue-google-maps-yyESU4s0.js";import{C as an,S as Hi,p as kn,d as vu,v as wn,V as Xs,w as xn,G as Br}from"./ngneat_falso-BQ8TvUKs.js";import{h as yu}from"./moment-Djc71hkG.js";import{_ as Sd}from"./index.vue_vue_type_style_index_0_lang-C8PQMVey.js";import{u as Ed,a as Ud}from"./article-BG_hK2SH.js";import{v as Ql}from"./uuid-8I8R7izr.js";import{c as ji,u as gu}from"./tanstack_vue-query-C9nQ2kf3.js";import{s as Md}from"./slugify-BFyLO-pG.js";import{_ as hu}from"./media-file-CyAQ76A9.js";import{r as bu}from"./vueuse_shared-CcT-C3Xm.js";import{_ as ts}from"./jsoneditor-BJ7iDtct.js";import{u as Td}from"./vueuse_core-DLnQCT4A.js";import{_ as Dd}from"./UploadExcel-BWnBHVSg.js";import{_ as Zo}from"./validator-DC79P2ge.js";import{_ as ku}from"./VueTelInputWrapper-BuuPGoHl.js";import{i as wu}from"./libphonenumber-js-fynGZfgH.js";import"./browser-image-compression-BvBgsnu7.js";import{u as xu}from"./email-CgDdQgxY.js";import{u as $u}from"./vue-shepherd-CZJ8KBfd.js";import{a as Cu}from"./vue-router-DjpI5axN.js";var Ln=(u=>(u.IMAGE="image",u.VIDEO="video",u))(Ln||{});const Nd=(u,e)=>Hs(["ad-identifiers"],async()=>{const{request:n}=Fe(),l=await n({url:"/ad-identifiers"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Iu=(u,e)=>Hs(["ads"],async()=>{const{request:n}=Fe(),l=await n({url:"/ads"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Vu=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe();return ft({queryKey:["ad-identifiers"],operation:"insert",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"post",url:"/ad-identifiers",data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Su=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe();return ft({queryKey:["ad-identifiers"],operation:"update",getItemId:a=>a.id,mutationFn:async a=>{const t=await n({method:"put",url:`/ad-identifiers/${a.id}`,data:a});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:a=>{a?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(a?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Eu=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe();return ft({queryKey:["ad-identifiers"],operation:"remove",getItemId:o=>o.id,mutationFn:async({id:o})=>{const a=await e({method:"delete",url:`/ad-identifiers/${o}`});if(!a.success)throw new Error(a.error);return a.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:o=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Uu,defineComponent:Mu}=await se("vue"),{unref:pt,resolveComponent:wb,createVNode:Dt,toDisplayString:No,createTextVNode:Fr,withCtx:Qt,renderList:Tu,Fragment:Qi,openBlock:zo,createElementBlock:Or,createElementVNode:ls,createCommentVNode:Du,normalizeClass:Wi,createBlock:qr,isRef:Nu}=await se("vue"),zu={class:"flex items-center justify-between"},Au={class:"flex flex-col"},Pu={class:"text-sm font-bold"},Lu={class:"text-xs font-normal"},Bu={key:0,class:"text-xs font-bold"},{ref:as}=await se("vue"),Fu=Mu({__name:"Identifiers",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,formatKey:l}=Ze(),o=Uu(u,"show"),{data:a,isPending:t}=Nd(),{mutate:s}=Eu(),{mutate:K}=Vu(),{mutate:Z}=Su(),ce=Wl(),q=Ge(),ye=as(!1),O=as(!1),V=as(null),d=as(null),E=as({id:"",reusable:!1,contentType:Ln.IMAGE,contentSize:"",params:[]}),ae={id:[{required:!0,message:e("fillRequired")}]},i=W=>{V.value=le.cloneDeep(W),E.value=le.cloneDeep(W||{id:"",reusable:!1,contentType:Ln.IMAGE,contentSize:"",params:[]}),O.value=!0},me=async()=>(d.value?.validate(async W=>{if(!W){q.start(),ye.value=!0;const M={id:E.value.id,reusable:E.value.reusable,contentType:E.value.contentType,contentSize:E.value.contentSize,params:E.value.params};V.value?Z(M,{onSuccess:()=>{O.value=!1}}):K(M,{onSuccess:()=>{O.value=!1}}),ye.value=!1,q.finish()}}),!1),z=async W=>{ce.warning({title:e("confirm"),content:e("confirmDeleteAdIdentifier"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{s({id:W.id})}})};return(W,M)=>{const S=re,I=Be,L=wl,A=Ia,j=ja,v=R,B=vl,C=Ra,w=Aa,N=ao,U=Xl,Q=Zt,J=Fn,F=ya,h=Tr,f=Mr,D=ru,xe=ga,$=va;return zo(),Or(Qi,null,[Dt(U,{show:o.value,"onUpdate:show":M[2]||(M[2]=m=>o.value=m),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:pt(e)("adIdentifiers")},{"header-extra":Qt(()=>[Dt(L,{align:"center"},{default:Qt(()=>[Dt(I,{secondary:"",size:"small",type:"primary",disabled:pt(t),onClick:M[0]||(M[0]=m=>i(null))},{default:Qt(()=>[Dt(S,{icon:"carbon:add-alt",class:"mr-1"}),Fr(" "+No(pt(e)("add")),1)]),_:1},8,["disabled"]),Dt(I,{secondary:"",size:"small",type:"error",disabled:pt(t),onClick:M[1]||(M[1]=m=>o.value=!1)},{default:Qt(()=>[Dt(S,{icon:"carbon:close",class:"mr-1"}),Fr(" "+No(pt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:Qt(()=>[Dt(N,{show:pt(t)},{default:Qt(()=>[pt(a)?.length?(zo(),qr(C,{key:0,style:{"max-height":"400px"}},{default:Qt(()=>[(zo(!0),Or(Qi,null,Tu(pt(a),m=>(zo(),qr(B,{key:m.id,embedded:"",size:"small",class:"mb-2"},{default:Qt(()=>[ls("div",zu,[ls("div",Au,[ls("span",Pu,No(m.id),1),ls("div",null,[ls("span",Lu,No(m.contentType===pt(Ln).IMAGE?pt(e)("image"):pt(e)("video")),1),m.contentSize?(zo(),Or("span",Bu," Â ("+No(m.contentSize)+") ",1)):Du("",!0)])]),Dt(L,null,{default:Qt(()=>[Dt(A,{size:"medium",bordered:!1,type:m.reusable?"info":"warning"},{default:Qt(()=>[Fr(No(m.reusable?pt(e)("reusable"):pt(e)("notReusable")),1)]),_:2},1032,["type"]),Dt(j,{vertical:"",class:Wi(["!mx-0",pt(n)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Dt(I,{size:"small",type:"warning",secondary:"",onClick:r=>i(m)},{default:Qt(()=>[Dt(v,null,{default:Qt(()=>[Dt(S,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Dt(I,{size:"small",type:"error",secondary:"",onClick:r=>z(m)},{default:Qt(()=>[Dt(v,null,{default:Qt(()=>[Dt(S,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(zo(),qr(B,{key:1,size:"large",class:Wi(`mb-2 !border-dashed !border-2 ${pt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:Qt(()=>[Dt(w,{description:pt(e)("noIdentifierAdded")},{icon:Qt(()=>[Dt(v,{size:"60"},{default:Qt(()=>[Dt(S,{icon:"mdi:identifier"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Dt(U,{show:pt(O),"onUpdate:show":M[8]||(M[8]=m=>Nu(O)?O.value=m:null),loading:pt(ye),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:pt(V)?pt(e)("editAdIdentifier"):pt(e)("addAdIdentifier"),"positive-text":pt(e)("validate"),"negative-text":pt(e)("cancel"),onPositiveClick:me,onNegativeClick:M[9]||(M[9]=m=>O.value=!1)},{default:Qt(()=>[Dt($,{ref_key:"formRef",ref:d,model:pt(E),rules:ae,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Qt(()=>[Dt(F,{span:24,"x-gap":"12"},{default:Qt(()=>[Dt(J,{span:16,label:pt(e)("identifier"),path:"id"},{default:Qt(()=>[Dt(Q,{value:pt(E).id,placeholder:pt(e)("identifier"),disabled:pt(V)!=null,class:"w-full","onUpdate:value":M[3]||(M[3]=m=>pt(E).id=pt(l)(m))},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),Dt(J,{span:8,label:pt(e)("contentSize"),path:"contentSize"},{default:Qt(()=>[Dt(Q,{value:pt(E).contentSize,"onUpdate:value":M[4]||(M[4]=m=>pt(E).contentSize=m),placeholder:pt(e)("contentSize"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),Dt(F,{span:24,"x-gap":"12"},{default:Qt(()=>[Dt(J,{span:12,label:pt(e)("status"),path:"reusable"},{default:Qt(()=>[Dt(f,{value:pt(E).reusable,"onUpdate:value":M[5]||(M[5]=m=>pt(E).reusable=m),name:"reusable",class:"w-full"},{default:Qt(()=>[Dt(h,{value:!1,label:pt(e)("notReusable"),class:"w-[50%]"},null,8,["label"]),Dt(h,{value:!0,label:pt(e)("reusable"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),Dt(J,{span:12,label:pt(e)("contentType"),path:"contentType"},{default:Qt(()=>[Dt(f,{value:pt(E).contentType,"onUpdate:value":M[6]||(M[6]=m=>pt(E).contentType=m),name:"contentType",class:"w-full"},{default:Qt(()=>[Dt(h,{value:pt(Ln).IMAGE,label:pt(e)("image"),class:"w-[50%]"},null,8,["value","label"]),Dt(h,{value:pt(Ln).VIDEO,label:pt(e)("video"),class:"w-[50%]"},null,8,["value","label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),Dt(xe,{label:pt(e)("settings"),path:"params"},{default:Qt(()=>[Dt(D,{value:pt(E).params,"onUpdate:value":M[7]||(M[7]=m=>pt(E).params=m),type:"primary"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ou=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["ads"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/ads",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},qu=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["ads"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/ads/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ru=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["ads"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/ads/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:ju}=await se("vue"),{unref:_e,createVNode:_t,withCtx:Nt,toDisplayString:io,createTextVNode:co,openBlock:nn,createBlock:Js,createCommentVNode:Rr,resolveComponent:xb,isRef:Ao,Fragment:Zs,createElementBlock:Po,normalizeStyle:Xi,createElementVNode:jr,renderList:Ku}=await se("vue"),Yu={key:1,class:"w-full flex flex-gap-8 items-center justify-start"},Gu={id:"video",autoplay:"",controls:"",style:{width:"100%"}},Hu=["src"],{inject:Qu,ref:$a,h:gl,computed:Ji}=await se("vue"),Wu=ju({__name:"index",setup(u){const e=qe(),n=Wl(),l=Qu("appConfig"),{data:o}=Nd(),{data:a,isPending:t}=Iu(),{mutate:s,isPending:K}=Ru(),{mutate:Z,isPending:ce}=Ou(),{mutate:q,isPending:ye}=qu(),{tr:O,fileUrl:V,pickByTheme:d,appSecondaryColor:E,isInDevMode:ae}=Ze(),{t:i,locale:me}=ke(),z=$a(""),W=$a(),M={pageSize:12,prefix:({itemCount:m})=>gl("div",{class:"font-bold"},{default:()=>`${i("total")}: ${m}`})},S=[{title:i("preview"),key:"image",width:200,fixed:"left",render(m){return m.adIdentifier?.contentType==Ln.IMAGE?gl(es,{src:m.contentUrl??"",objectFit:"cover",width:200,height:100}):gl("div",{style:{width:"200px",height:"100px"},class:"flex items-center justify-center border border-solid border-gray-300"},[gl(R,{size:50,color:E.value},{default:()=>gl(re,{icon:"carbon:document-video"})})])}},{title:i("identifier"),key:"pid",width:150,fixed:"left",render(m){return gl("small",{},{default:()=>m.pid})}},{title:i("title"),key:"title",width:150,ellipsis:{tooltip:!0},resizable:!0,sortOrder:!1,sorter:"default",render(m){return gl("div",{},{default:()=>O(m.title)})}},{title:i("description"),key:"description",resizable:!0,width:200,ellipsis:{tooltip:!0},render(m){return gl("small",{},{default:()=>O(m.description)})}},{title:i("status"),key:"isActive",width:100,render(m){return gl(Ia,{type:m.display?"success":"warning",bordered:!1},{default:()=>m.display?i("visible"):i("hidden")})},sortOrder:!1,sorter:"default"},{title:i("updateAt"),key:"updatedAt",width:125,render(m){return gl("div",{},{default:()=>Bn(m.updatedAt,{locale:me.value,outPattern:"DD MMMM YYYY"})})}},{title:i("createdAt"),key:"createdAt",width:125,render(m){return gl("div",{},{default:()=>Bn(m.createdAt,{locale:me.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>gl(Zt,{ref:W,placeholder:i("search"),value:z.value,onInput:m=>{z.value=m}},{suffix:()=>gl(R,{},{default:()=>gl(re,{icon:"carbon:search"})})}),key:"actions",width:150,render(m){return gl("div",{class:"flex justify-end items-center w-full"},[gl(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{Q(m)},renderIcon:()=>gl(R,null,{default:()=>gl(re,{icon:"carbon:edit"})})}),gl("div",{class:"w-2"}),gl(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{n.warning({title:i("confirm"),content:i("confirmDeleteAd"),positiveText:i("yes"),negativeText:i("no"),onPositiveClick:async()=>{m.id&&s({id:m.id})}})},renderIcon:()=>gl(R,null,{default:()=>gl(re,{icon:"carbon:trash-can"})})})])},fixed:"right"}],I=Ji(()=>{if(!z.value)return a.value;const m=a.value?.filter(r=>r.pid.toLowerCase().includes(z.value.toLowerCase())||r.title.toLowerCase().includes(z.value.toLowerCase())||r.description?.toLowerCase().includes(z.value.toLowerCase()));return W.value&&W.value.focus(),m}),L=$a(!1),A=$a(!1),j=$a(Ln.IMAGE),v=$a(),B=$a(null),C=$a(null),w=$a({pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null}),N={pid:[{required:!0,message:i("fillRequired")}],title:[{required:!0,message:i("fillRequired")}],content:[{required:!0,message:i("fillRequired")}]},U=Ji({get:()=>!w.value.broadcastStart||!w.value.broadcastEnd?null:[w.value.broadcastStart||"",w.value.broadcastEnd||""],set:m=>{m?(w.value.broadcastStart=m[0],w.value.broadcastEnd=m[1]):(w.value.broadcastStart=null,w.value.broadcastEnd=null)}}),Q=m=>{B.value=le.cloneDeep(m),m?(w.value=le.cloneDeep(m),m.data||(w.value.data={})):w.value={pid:"",title:"",description:"",content:"",display:!0,data:{},broadcastStart:null,broadcastEnd:null},v.value=o.value?.find(r=>r.id==w.value.pid)?.params,L.value=!0},J=m=>gl("span",{},{default:()=>m.id+(m.contentSize?` (${m.contentSize})`:"")}),F=async()=>(C.value?.validate(async m=>{if(!m){const r={pid:w.value.pid,title:w.value.title,display:w.value.display,content:w.value.content,description:w.value.description,data:w.value.data,broadcastStart:w.value.broadcastStart,broadcastEnd:w.value.broadcastEnd};B.value?B.value.title!==w.value.title&&(a.value||[]).findIndex(x=>x.title==w.value.title)>-1?e.error(i("sameAdTitleMessage")):q({id:B.value.id,...r},{onSuccess:()=>{}}):(a.value||[]).findIndex(x=>x.title==w.value.title)>-1?e.error(i("sameAdTitleMessage")):Z(r,{onSuccess:()=>{}}),L.value=!1}}),!1),h=$a(!1),f=$a(!1),D=$a(!1),xe=$a(""),$=$a("");return(m,r)=>{const x=wl,ie=Da,P=Dr,ge=Ur,De=xa,ne=ga,ue=bd,xt=Ka,Vt=Fn,$e=Tr,Ye=Mr,Ve=ya,et=en,H=Qs,b=va,p=Xl,rt=to;return nn(),Po(Zs,null,[_t(ie,{to:"#alt-action"},{default:Nt(()=>[_t(x,null,{default:Nt(()=>[_e(ae)?(nn(),Js(_e(Be),{key:0,secondary:"",type:"warning",onClick:r[0]||(r[0]=Ce=>A.value=!0)},{default:Nt(()=>[_t(_e(R),{size:"26"},{default:Nt(()=>[_t(_e(re),{icon:"carbon:id"})]),_:1}),co(" "+io(_e(i)("identifiers")),1)]),_:1})):Rr("",!0),_t(_e(Be),{type:"primary",secondary:"",onClick:r[1]||(r[1]=Ce=>Q(null))},{icon:Nt(()=>[_t(_e(R),{size:"18"},{default:Nt(()=>[_t(_e(re),{icon:"carbon:add-alt"})]),_:1})]),default:Nt(()=>[co(" "+io(_e(i)("addAd")),1)]),_:1})]),_:1})]),_:1}),_t(ge,null,{default:Nt(()=>[_t(P,{columns:S,data:_e(I),pagination:M,loading:_e(t),"single-line":!1,"scroll-x":1500,size:"small",striped:""},null,8,["data","loading"])]),_:1}),_t(p,{show:_e(L),"onUpdate:show":r[12]||(r[12]=Ce=>Ao(L)?L.value=Ce:null),loading:_e(ce)||_e(ye)||_e(K),preset:"dialog",style:{width:"1200px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:_e(B)?_e(i)("editAd"):_e(i)("addAd"),"positive-text":_e(i)("validate"),"negative-text":_e(i)("cancel"),onPositiveClick:F,onNegativeClick:r[13]||(r[13]=Ce=>L.value=!1)},{default:Nt(()=>[_t(b,{ref_key:"formRef",ref:C,class:"mt-5",model:_e(w),rules:N,"show-require-mark":!1,size:"medium"},{default:Nt(()=>[_t(Ve,{cols:"24","x-gap":12},{default:Nt(()=>[_t(et,{span:"12"},{default:Nt(()=>[_t(ne,{"show-label":!1,path:"title"},{default:Nt(()=>[_t(De,{modelValue:_e(w).title,"onUpdate:modelValue":r[2]||(r[2]=Ce=>_e(w).title=Ce),placeholder:_e(i)("title"),class:"w-full",sync:""},{label:Nt(()=>[co(io(_e(i)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),_t(ne,{"show-label":!1,path:"description"},{default:Nt(()=>[_t(De,{modelValue:_e(w).description,"onUpdate:modelValue":r[3]||(r[3]=Ce=>_e(w).description=Ce),placeholder:_e(i)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Nt(()=>[co(io(_e(i)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),_t(ne,{label:_e(i)("broadcastPeriod"),path:"broadcastPeriod"},{default:Nt(()=>[_t(ue,{"formatted-value":_e(U),"onUpdate:formattedValue":r[4]||(r[4]=Ce=>Ao(U)?U.value=Ce:null),"value-format":"yyyy-MM-dd HH:mm:ss",format:"dd MMMM yyyy",type:"daterange",class:"w-full"},null,8,["formatted-value"])]),_:1},8,["label"]),_t(Ve,{"x-gap":"12",span:24},{default:Nt(()=>[_t(Vt,{span:12,label:_e(i)("identifier"),path:"pid"},{default:Nt(()=>[_t(xt,{value:_e(w).pid,"onUpdate:value":[r[5]||(r[5]=Ce=>_e(w).pid=Ce),r[6]||(r[6]=()=>{v.value=_e(o)?.find(Ce=>Ce.id==_e(w).pid)?.params})],"render-label":J,options:_e(o)?.map(Ce=>({...Ce,disabled:!Ce.reusable&&(Ce.adsCount||0)>0})),placeholder:_e(i)("identifier"),placement:"bottom","label-field":"id","value-field":"id",class:"w-full",filterable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"]),_t(Vt,{span:12,label:_e(i)("status"),path:"display"},{default:Nt(()=>[_t(Ye,{value:_e(w).display,"onUpdate:value":r[7]||(r[7]=Ce=>_e(w).display=Ce),name:"display",class:"w-full"},{default:Nt(()=>[_t($e,{value:!1,label:_e(i)("hidden"),class:"w-[50%]"},null,8,["label"]),_t($e,{value:!0,label:_e(i)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),_t(et,{span:"12"},{default:Nt(()=>[_t(ne,{label:_e(i)("content"),path:"content"},{default:Nt(()=>[_e(j)==_e(Ln).VIDEO?(nn(),Js(H,{key:0},{default:Nt(()=>[_t(_e(Be),{secondary:"",type:"primary",onClick:r[8]||(r[8]=()=>{f.value=!0})},{default:Nt(()=>[co(io(_e(i)("select")),1)]),_:1}),_t(_e(Zt),{value:_e(w).content?_e(Jo)(_e(w).content):"",placeholder:_e(i)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),_e(w).content?(nn(),Po(Zs,{key:0},[_t(_e(Be),{type:"primary",ghost:"",onClick:r[9]||(r[9]=()=>{xe.value=_e(i)("video"),$.value=_e(V)(_e(w).content),D.value=!0})},{icon:Nt(()=>[_t(_e(R),null,{default:Nt(()=>[_t(_e(re),{icon:"carbon:play-filled"})]),_:1})]),default:Nt(()=>[co(" "+io(_e(i)("play")),1)]),_:1}),_t(_e(Be),{type:"primary",ghost:"",onClick:r[10]||(r[10]=()=>{_e(w).content=""})},{icon:Nt(()=>[_t(_e(R),null,{default:Nt(()=>[_t(_e(re),{icon:"carbon:trash-can"})]),_:1})]),default:Nt(()=>[co(" "+io(_e(i)("clear")),1)]),_:1})],64)):Rr("",!0)]),_:1})):(nn(),Po("div",Yu,[jr("div",{class:"cursor-pointer w-full h-[150px]",onClick:r[11]||(r[11]=()=>{h.value=!0})},[_e(w).content?(nn(),Js(_e(es),{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 content-image",style:Xi("border: 1px dashed "+_e(d)("green","white")),src:_e(V)(_e(w).content||"")},null,8,["style","src"])):(nn(),Po("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Xi("border: 1px dashed "+_e(d)("green","white"))},[_t(_e(R),{size:64},{default:Nt(()=>[_t(_e(re),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])]))]),_:1},8,["label"]),_e(v)&&Array.isArray(_e(v))?(nn(),Js(ne,{key:0,label:_e(i)("data"),path:"data"},{default:Nt(()=>[_t(Ve,{"x-gap":"12","y-gap":"12",span:24,class:"w-full"},{default:Nt(()=>[(nn(!0),Po(Zs,null,Ku(_e(v),(Ce,nt)=>(nn(),Po(Zs,{key:nt},[_t(et,{span:10},{default:Nt(()=>[_t(_e(Zt),{value:Ce,placeholder:Ce,class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),_t(et,{span:14},{default:Nt(()=>[_t(_e(Zt),{value:_e(w).data[Ce],"onUpdate:value":dt=>_e(w).data[Ce]=dt,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})]),_:1},8,["label"])):Rr("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),_t(p,{show:_e(D),"onUpdate:show":r[14]||(r[14]=Ce=>Ao(D)?D.value=Ce:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:_e(xe)},{default:Nt(()=>[jr("video",Gu,[jr("source",{src:_e($)},null,8,Hu)])]),_:1},8,["show","title"]),_t(rt,{show:_e(h),"onUpdate:show":r[15]||(r[15]=Ce=>Ao(h)?h.value=Ce:null),title:_e(i)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:_e(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:r[16]||(r[16]=Ce=>{_e(w).content=Ce,h.value=!1})},null,8,["show","title","upload-config"]),_t(rt,{show:_e(f),"onUpdate:show":r[17]||(r[17]=Ce=>Ao(f)?f.value=Ce:null),title:_e(i)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:_e(l)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:r[18]||(r[18]=Ce=>{_e(w).content=Ce,f.value=!1})},null,8,["show","title","upload-config"]),_t(Fu,{show:_e(A),"onUpdate:show":r[19]||(r[19]=Ce=>Ao(A)?A.value=Ce:null)},null,8,["show"])],64)}}}),Xu=On(Wu,[["__scopeId","data-v-d7bbc8c8"]]),Zi=u=>{const e=yu();switch(u){case"text":return Br({min:40,max:80});case"i18n-text":return`{ "fr": "${Br({min:40,max:80})}", "en": "${Br({min:40,max:80})}" }`;case"textarea":return xn();case"i18n-textarea":return`{ "fr": "${xn()}", "en": "${xn()}" }`;case"number":return an({min:10,max:1e4});case"checkbox":return Hi();case"single-select":return kn();case"multi-select":return[kn(),kn(),kn()];case"date":return e.format("YYYY-MM-DD");case"daterange":return[e.format("YYYY-MM-DD"),e.add(5,"years").format("YYYY-MM-DD")];case"datetime":return e.format("YYYY-MM-DD HH:mm:ss");case"datetimerange":return[e.format("YYYY-MM-DD HH:mm:ss"),e.clone().add(5,"years").format("YYYY-MM-DD HH:mm:ss")];case"year":return e.format("YYYY");case"yearrange":return[e.format("YYYY"),e.clone().add(5,"years").format("YYYY")];case"month":return e.format("YYYY-MM");case"monthrange":return[e.format("YYYY-MM"),e.clone().add(5,"years").format("YYYY-MM")];case"quarter":return`${e.format("YYYY")}-Q${e.quarter()}`;case"quarterrange":const n=e.clone().add(5,"years");return[`${e.format("YYYY")}-Q${e.quarter()}`,`${n.format("YYYY")}-Q${n.quarter()}`];case"week":return`${e.format("YYYY")}-${e.week()}`;case"editor":return`<p>${xn()}</p><p>${xn()}</p>`;case"i18n-editor":return`{ "fr": "<p>${xn()}</p><p>${xn()}</p>", "en": "<p>${xn()}</p><p>${xn()}</p>" }`;case"image":return wn({width:1200,height:800});case"gallery":return[wn({width:1200,height:800}),wn({width:1200,height:800}),wn({width:1200,height:800}),wn({width:1200,height:800})];case"news-article":return an({min:0,max:10});case"news-articles":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"news-category":return an({min:0,max:10});case"news-categories":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"news-tag":return an({min:0,max:10});case"news-tags":{let o=an({min:0,max:5});return[o,o+1,o+2]}case"icon":return Xs();case"icons":return[Xs(),Xs(),Xs()];case"albums":return[{name:"album",medias:[wn(),wn(),wn(),wn()]}];case"audio":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/mp3/mp31mb.mp3";case"video":return"https://testfilehub.github.io/files/MP4/1mb.MP4";case"document":return"https://raw.githubusercontent.com/TestFileHub/FileHub/main/pdf/pdf1mb.pdf";case"file":return"https://testfilehub.github.io/files/TXT/1mb.TXT";case"color":return vu();case"content-model-item":return;case"content-model-items":return[];case"menu-item-link":return 0;case"list":return[{value:kn()},{value:kn()},{value:kn()}];case"i18n-list":return[{value:`{ "fr": "${kn()}", en: "${kn()}" }`}];case"switch":return Hi();case"slider":return an({min:0,max:100});case"range-slider":return[an({min:0,max:100}),an({min:0,max:100})];case"gradient":return"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)";default:return u}},{useModel:Ju,mergeModels:Zu,defineComponent:ep}=await se("vue"),{toDisplayString:er,createElementVNode:Kr,resolveComponent:tp,createVNode:ua,withCtx:El,unref:oa,createTextVNode:Yr,openBlock:Ga,createBlock:ns,createCommentVNode:tr,renderList:ec,Fragment:tc,createElementBlock:Lo,createSlots:lp,isRef:lc}=await se("vue"),{defineComponent:ap,ref:lr,inject:np}=await se("vue"),op={class:"w-full"},sp={class:"mb-2"},rp={class:"text-base text-left"},ip=["src","onClick"],cp=["src"],dp=ap({name:"AlbumsPicker"}),up=ep({...dp,props:Zu({uploadFolder:{default:"albums"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=Ju(u,"modelValue"),n=u,{t:l}=ke(),{fileUrl:o}=Ze(),a=lr(!1),t=lr(!1),s=lr(0),K=lr(""),Z=np("appConfig"),ce=()=>{e.value&&Array.isArray(e.value)?e.value.push({name:"",medias:[]}):e.value=[{name:"",medias:[]}]},q=V=>{e.value&&Array.isArray(e.value)?e.value.splice(V,1):e.value=[]},ye=(V,d)=>{e.value&&Array.isArray(e.value[d].medias)?e.value[d].medias.splice(V,1):e.value&&(e.value[d].medias=[])},O=V=>{const d=V.split(".")?.pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","bmp","svg"].includes(d)?"image":["mp4","avi","mov","mkv","wmv","flv"].includes(d)?"video":"unknown"};return(V,d)=>{const E=re,ae=R,i=Be,me=xa,z=es,W=tp("Draggable"),M=kd,S=Ra,I=vl,L=to,A=Xl;return Ga(),Lo("section",op,[Kr("section",sp,[ua(I,{size:"small",segmented:e.value&&e.value.length>0},{header:El(()=>[Kr("div",rp,er(n.title),1)]),"header-extra":El(()=>[n.readonly?tr("",!0):(Ga(),ns(i,{key:0,quaternary:"",onClick:ce},{icon:El(()=>[ua(ae,{size:"18"},{default:El(()=>[ua(E,{icon:"carbon:folder-add"})]),_:1})]),default:El(()=>[Yr(" "+er(oa(l)("addAlbum")),1)]),_:1}))]),default:El(()=>[(Ga(!0),Lo(tc,null,ec(e.value,(j,v)=>(Ga(),ns(I,{key:v,size:"small",embedded:"",hoverable:"",segmented:j.medias&&j.medias.length>0,class:"mb-4"},lp({header:El(()=>[ua(me,{modelValue:j.name,"onUpdate:modelValue":B=>j.name=B,placeholder:oa(l)("albumName"),disabled:n.readonly,class:"!max-w-[350px]",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),default:El(()=>[ua(S,{style:{"max-height":"100%"}},{default:El(()=>[j.medias&&j.medias.length>0?(Ga(),ns(M,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:El(()=>[ua(W,{list:j.medias,class:"w-full grid grid-cols-3 gap-4"},{default:El(()=>[(Ga(!0),Lo(tc,null,ec(j.medias,(B,C)=>(Ga(),Lo("div",{key:"img-"+C,class:"relative border-dotted border border-green-500 h-[120px] w-full picked-item"},[O(B)==="image"?(Ga(),ns(z,{key:0,"object-fit":"cover",src:oa(o)(B)},null,8,["src"])):(Ga(),Lo("video",{key:1,muted:"",src:oa(o)(B),class:"w-full h-[120px] object-cover cursor-pointer",onClick:()=>{K.value=oa(o)(B),t.value=!0}},null,8,ip)),n.readonly?tr("",!0):(Ga(),ns(i,{key:2,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:w=>ye(C,v)},{icon:El(()=>[ua(ae,null,{default:El(()=>[ua(E,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:2},1032,["list"])]),_:2},1024)):tr("",!0)]),_:2},1024)]),_:2},[n.readonly?void 0:{name:"header-extra",fn:El(()=>[ua(i,{quaternary:"",class:"mr-2",onClick:()=>{s.value=v,a.value=!0}},{icon:El(()=>[ua(ae,null,{default:El(()=>[ua(E,{icon:"carbon:add-alt"})]),_:1})]),default:El(()=>[Yr(" "+er(oa(l)("add")),1)]),_:1},8,["onClick"]),d[3]||(d[3]=Kr("div",{class:"w-2"},null,-1)),ua(i,{quaternary:"",type:"error",onClick:B=>q(v)},{icon:El(()=>[ua(ae,null,{default:El(()=>[ua(E,{icon:"carbon:trash-can"})]),_:1})]),default:El(()=>[Yr(" "+er(oa(l)("delete")),1)]),_:1},8,["onClick"])]),key:"0"}]),1032,["segmented"]))),128))]),_:1},8,["segmented"])]),ua(L,{show:oa(a),"onUpdate:show":d[0]||(d[0]=j=>lc(a)?a.value=j:null),title:oa(l)("select"),"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"albums",limit:0,maxSize:0,baseUrl:oa(Z)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:d[1]||(d[1]=j=>{e.value&&Array.isArray(e.value[oa(s)].medias)?e.value[oa(s)].medias.push(j):e.value&&(e.value[oa(s)].medias=[j]),a.value=!1})},null,8,["show","title","upload-config"]),ua(A,{show:oa(t),"onUpdate:show":d[2]||(d[2]=j=>lc(t)?t.value=j:null),preset:"card",style:{width:"500px"},title:oa(l)("video"),bordered:!1,"mask-closable":!1,"close-on-esc":""},{default:El(()=>[oa(K)?(Ga(),Lo("video",{key:0,controls:"",autoplay:"",class:"w-full",src:oa(K)},null,8,cp)):tr("",!0)]),_:1},8,["show","title"])])}}}),pp=On(up,[["__scopeId","data-v-d07ac32a"]]),{useModel:mp,mergeModels:fp,defineComponent:_p}=await se("vue"),{toDisplayString:ac,createElementVNode:nc,resolveComponent:vp,createVNode:$n,withCtx:Ha,unref:os,createTextVNode:yp,openBlock:Bo,createBlock:Gr,createCommentVNode:Hr,renderList:gp,Fragment:hp,createElementBlock:Qr,isRef:bp}=await se("vue"),{defineComponent:kp,inject:wp,ref:xp}=await se("vue"),$p={class:"w-full"},Cp={class:"mb-2"},Ip={class:"text-base text-left"},Vp=kp({name:"GridImagesPicker"}),Sp=_p({...Vp,props:fp({uploadFolder:{default:"images"},readonly:{type:Boolean,default:!1},title:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const e=mp(u,"modelValue"),n=wp("appConfig"),l=u,{t:o}=ke(),{fileUrl:a}=Ze(),t=xp(!1),s=Z=>{Array.isArray(e.value)?e.value.splice(Z,1):e.value=[]},K=async Z=>{Array.isArray(e.value)?e.value.push(...Z):e.value=[...Z],t.value=!1};return(Z,ce)=>{const q=re,ye=R,O=Be,V=es,d=vp("Draggable"),E=kd,ae=Ra,i=vl,me=to;return Bo(),Qr("section",$p,[nc("section",Cp,[$n(i,{size:"small",embedded:"",hoverable:"",segmented:e.value&&e.value.length>0},{header:Ha(()=>[nc("div",Ip,ac(l.title),1)]),"header-extra":Ha(()=>[l.readonly?Hr("",!0):(Bo(),Gr(O,{key:0,quaternary:"",onClick:ce[0]||(ce[0]=z=>t.value=!0)},{icon:Ha(()=>[$n(ye,{size:"18"},{default:Ha(()=>[$n(q,{icon:"carbon:add-alt"})]),_:1})]),default:Ha(()=>[yp(" "+ac(os(o)("add")),1)]),_:1}))]),default:Ha(()=>[$n(ae,{style:{"max-height":"100%"}},{default:Ha(()=>[e.value&&e.value.length?(Bo(),Gr(E,{key:0,"show-toolbar":"","show-toolbar-tooltip":""},{default:Ha(()=>[$n(d,{list:e.value,class:"w-full grid grid-cols-3 gap-4"},{default:Ha(()=>[(Bo(!0),Qr(hp,null,gp(e.value,(z,W)=>(Bo(),Qr("div",{key:"img-"+W,class:"relative border-dotted border border-green-500 h-[120px] picked-item"},[$n(V,{width:"100","object-fit":"cover",src:os(a)(z)},null,8,["src"]),l.readonly?Hr("",!0):(Bo(),Gr(O,{key:0,strong:"",circle:"",color:"black",style:{position:"absolute",top:"4px",right:"4px"},onClick:M=>s(W)},{icon:Ha(()=>[$n(ye,null,{default:Ha(()=>[$n(q,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]))]))),128))]),_:1},8,["list"])]),_:1})):Hr("",!0)]),_:1})]),_:1},8,["segmented"])]),$n(me,{show:os(t),"onUpdate:show":ce[1]||(ce[1]=z=>bp(t)?t.value=z:null),title:os(o)("selectImage"),"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:os(n)?.apiUrl+"/media-files/upload",excludedExtensions:[]},"selection-multiple":"",onSubmit:K},null,8,["show","title","upload-config"])])}}}),Ep=On(Sp,[["__scopeId","data-v-721b1ffd"]]);var ca=(u=>(u.EXTERNAL_LINK="external-link",u.PAGE_LINK="page-link",u.CONTENT_LINK="content-link",u))(ca||{}),Hl=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Hl||{});const Ws=()=>{const{t:u}=ke(),{tr:e}=Ze(),n=(t,s)=>{if(s&&s.titleFieldName)return Yi(t.contentModelData.index[s.titleFieldName])?e(t.contentModelData.index[s.titleFieldName]):t.contentModelData.index[s.titleFieldName];if(t.contentModelData&&t.contentModelData.index){const K=["title","titre","name","nom","label","text","texte","slug","subject","sujet","summary","description","content","body"];for(const Z of K)if(t.contentModelData.index[Z])return Yi(t.contentModelData.index[Z])?e(t.contentModelData.index[Z]):t.contentModelData.index[Z]}return e(t.title)},l=[{label:u("contentModel"),value:Hl.CONTENT_MODEL,tagType:"warning"},{label:u("newsArticle"),value:Hl.NEWS_ARTICLE,tagType:"info"},{label:u("newsCategory"),value:Hl.NEWS_CATEGORY,tagType:"success"},{label:u("newsTag"),value:Hl.NEWS_TAG,tagType:"error"}];return{contentTypes:l,getContentTypeLabel:t=>l.find(s=>s.value===t)?.label,getContentTypeTagType:t=>l.find(s=>s.value===t)?.tagType||"default",extractItemTitle:n}};class Up{id;contentModelId;title;contentModelData;data;isActive;createdAt;updatedAt;contentModel;relatedItems;relatedTo;constructor(e,n,l,o,a,t,s,K){this.id=t,this.contentModelId=a,this.title=e,this.data=o,this.contentModelData=n,this.isActive=l,this.createdAt=s,this.updatedAt=K}}const Mp=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["content-model","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/content-model/items",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},zd=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["content-model","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/content-model/items/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Tp=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["content-model","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-model/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Dp=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["content-model","items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof Up){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("ContentModelItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(s=>a[s]);try{for(const s of t)await e({method:"delete",url:`/content-model/items/${s}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Ki=()=>{const{request:u}=Fe();return Na(async({query:e,contentModelId:n})=>{const l=await u({url:`/content-model-items/search/${e}/${n}`});return l.failure&&l.error?[]:l.result.data})},Ad=()=>{const{request:u}=Fe();return Na(async e=>{const n=await u({url:"/content-model-items/list",method:"post",data:e});return n.failure&&n.error?[]:n.result.data})},{defineComponent:Np}=await se("vue"),{unref:_,renderList:zp,Fragment:ss,openBlock:ot,createElementBlock:on,resolveComponent:oc,createBlock:$t,createCommentVNode:Fo,createVNode:ht,withCtx:St,normalizeStyle:Wr,createElementVNode:rs,toDisplayString:Pa,createTextVNode:La,isRef:uo}=await se("vue"),Ap={key:4,class:"w-full"},Pp={key:5,class:"w-full"},Lp={key:23,class:"w-full flex flex-gap-8 items-center justify-start"},Bp=["onClick"],Fp={key:0,class:"w-full"},Op={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},qp=["src"],Rp={id:"video",autoplay:"",controls:"",style:{width:"100%"}},jp=["src"],{defineComponent:Kp,inject:Yp,ref:zl,h:Cn,watch:sc,computed:is,onMounted:Gp}=await se("vue"),{storeToRefs:Hp}=await se("pinia"),Qp=Kp({name:"FormGenerator"}),Wp=Np({...Qp,props:{modelValue:{},useJson:{type:Boolean,default:!1},items:{},formStyle:{default:void 0},labelStyle:{default:void 0}},emits:["update:modelValue","update"],setup(u,{emit:e}){const n=u,l=e,{t:o,locale:a}=ke(),{tr:t,pickByTheme:s,fileUrl:K,mergeArrays:Z}=Ze(),{extractItemTitle:ce}=Ws(),{data:q}=lo(),ye=Yp("appConfig");let O=[];if(typeof n.items=="string")try{O=JSON.parse(n.items)}catch{O=[]}else O=le.cloneDeep(n.items);let V={};if(n.useJson)try{V=JSON.parse(n.modelValue)}catch{V={}}const d=zl(""),E=zl(Ql()),ae=zl(null),i=zl(n.useJson?V:n.modelValue),me={};O.forEach(Y=>{Y.key in i.value||(Y.defaultValue?["gallery","news-articles","news-categories","icons","albums","checkbox","switch","range-slider"].includes(Y.type)?i.value[Y.key]=JSON.parse(Y.defaultValue):Y.type=="number"||Y.type=="slider"?i.value[Y.key]=parseFloat(Y.defaultValue):Y.type=="content-model-item"?i.value[Y.key]=void 0:Y.type=="content-model-items"?i.value[Y.key]=[]:Y.type=="list"?i.value[Y.key]=Y.defaultValue.split(",").map(he=>({value:he})):Y.type=="i18n-list"?i.value[Y.key]=Y.defaultValue.split(",").map(he=>({value:`{ "fr": "${he}", "en": "${he}" }`})):i.value[Y.key]=Y.defaultValue:["text","textarea","editor","i18n-text","i18n-textarea","i18n-editor","image","icon","audio","video","color","gradient"].includes(Y.type)?i.value[Y.key]="":["number","slider"].includes(Y.type)?i.value[Y.key]=0:["checkbox","switch"].includes(Y.type)?i.value[Y.key]=!1:["gallery","news-articles","news-categories","content-model-items","icons","albums","list","i18n-list"].includes(Y.type)?i.value[Y.key]=[]:["range-slider"].includes(Y.type)?i.value[Y.key]=[0,100]:i.value[Y.key]=void 0),Y.required&&(me[Y.key]=[{required:!0,message:o("fillRequired")}]),E.value=Ql()});const z=["fullscreen","|","heading","|","addCreopseMedia","|","uploadImage","|","bold","italic","underline","strikethrough","code","subscript","superscript","selectAll","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","horizontalLine","blockQuote","bulletedList","numberedList","alignment","|","outdent","indent","|","link","insertTable","mediaEmbed","|","undo","redo"],W=Y=>Cn("span",{},{default:()=>t(Y.label)});sc(()=>i.value,Y=>{const he=n.useJson?JSON.stringify(Y):Y,ve=async()=>{if(O.length==0)return!0;let Ee=!1;try{await ae.value?.validate(at=>{Ee=!at})}catch{Ee=!1}return Ee};l("update:modelValue",he),l("update",he,ve)},{immediate:!0,deep:!0});const{isLightTheme:M}=Hp(To()),S=zl(!1),I=zl(!1),L=zl(!1),A=zl(""),j=zl(""),v=zl(!1),B=zl(!1),C=zl(""),w=zl(""),N=zl(!1),U=Y=>{window.open(Y,"_blank")},Q=zl(!1),J=zl([]),{data:F,isPending:h}=md();sc(()=>F.value,Y=>{const he=le.cloneDeep(Y);if(he){J.value=[];for(let ve=0;ve<he?.length;ve++)switch(he[ve].targetType){case ca.EXTERNAL_LINK:J.value.findIndex(Ee=>Ee.url===he[ve].url)===-1&&J.value.push(he[ve]);break;case ca.PAGE_LINK:J.value.findIndex(Ee=>Ee.path===he[ve].path)===-1&&J.value.push(he[ve]);break}}},{immediate:!0,deep:!0});const f=zl([]),D=zl([]),{mutateAsync:xe,isPending:$}=Ki(),{mutateAsync:m,isPending:r}=Ad(),x=is(()=>$.value||r.value),ie=async(Y,he)=>{if(!Y.length){D.value=[];return}D.value=await xe({query:Y,contentModelId:he})},P=is(()=>Z(f.value,D.value,"id")),ge=zl([]),De=zl([]),{mutateAsync:ne,isPending:ue}=Ed(),{mutateAsync:xt,isPending:Vt}=Ud(),$e=is(()=>Vt.value||ue.value),Ye=async Y=>{if(!Y.length){De.value=[];return}De.value=await xt(Y)},Ve=is(()=>Z(ge.value,De.value,"id")),et=Rd({enabled:!1}),H=jd({enabled:!1});Gp(async()=>{O.find(Y=>Y.type==="news-categories"||Y.type==="news-category")&&(et.refetch(),H.refetch());for(let Y=0;Y<O.length;Y++)if(O[Y].type==="news-articles"||O[Y].type==="news-article"){const he=i.value[O[Y].key],ve=await ne({ids:O[Y].type==="news-articles"?he:[he]});ve&&(ge.value=Z(ge.value,ve,"id"))}else if(O[Y].type==="content-model-items"||O[Y].type==="content-model-item"){const he=i.value[O[Y].key],ve=await m({ids:O[Y].type==="content-model-items"?he:[he]});ve&&(f.value=Z(f.value,ve,"id"))}});const b=Y=>Cn("span",{},{default:()=>`${t(Y.name)}`}),p=Y=>Cn("span",{},{default:()=>`${t(Y.title)}`}),rt=Y=>Cn("span",{},{default:()=>`${t(Y.name)}`}),Ce=Y=>is(()=>Cn("span",{},{default:()=>ce(Y,q.value?.find(he=>he.id===Y.contentModelId))})),nt=({option:Y})=>Cn("div",{style:{display:"flex",alignItems:"center"}},[`${t(Y.title)}`]),dt=Y=>Cn("div",{style:{marginLeft:"12px",padding:"4px 0"}},[Cn("div",{},{default:()=>`${t(Y.title)}`}),Cn("small",{},{default:()=>`${Y.targetType==ca.EXTERNAL_LINK?Y.url:Y.path}`})]);return(Y,he)=>{const ve=Zt,Ee=xa,at=Sd,Vl=Nr,Ya=no,Ol=Bi,da=wl,fe=iu,de=bd,He=Ka,Ie=es,Xe=re,gt=R,Ut=Be,Re=Ep,Sl=oc("IconPicker"),tn=pp,aa=Qs,na=oc("color-picker"),hn=zr,T=ga,yl=va,ql=Xl,ro=to;return ot(),on(ss,null,[(ot(),$t(yl,{ref_key:"formRef",ref:ae,key:_(E),model:_(i),rules:me,"show-label":!0,"require-mark-placement":"right-hanging","label-placement":"left","label-align":"left","label-width":"auto",size:"medium",style:Wr(n.formStyle)},{default:St(()=>[(ot(!0),on(ss,null,zp(_(O),(c,Pr)=>(ot(),$t(T,{key:Pr,label:_(t)(c.label),path:c.key,"label-style":n.labelStyle,"show-require-mark":c.required,class:"w-full"},{default:St(()=>[c.type=="text"?(ot(),$t(ve,{key:0,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),maxlength:c.settings?.maxLength||void 0,minlength:c.settings?.minLength||void 0,clearable:c.settings?.clearable||!1,type:"text",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):c.type=="i18n-text"?(ot(),$t(Ee,{key:1,modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):c.type=="textarea"?(ot(),$t(ve,{key:2,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),maxlength:c.settings?.maxLength||void 0,minlength:c.settings?.minLength||void 0,clearable:c.settings?.clearable||!1,type:"textarea",class:"w-full"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength","clearable"])):c.type=="i18n-textarea"?(ot(),$t(Ee,{key:3,modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),type:"textarea",class:"w-full",rows:3,sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):c.type=="editor"?(ot(),on("div",Ap,[ht(at,{modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),"toolbar-items":z,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):c.type=="i18n-editor"?(ot(),on("div",Pp,[ht(Ee,{modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),type:"editor",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):c.type=="number"?(ot(),$t(Vl,{key:6,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,max:c.settings?.max||void 0,min:c.settings?.min||void 0,step:c.settings?.step||1,clearable:c.settings?.clearable||!1,placeholder:_(t)(c.label),class:"w-full"},null,8,["value","onUpdate:value","max","min","step","clearable","placeholder"])):c.type=="checkbox"?(ot(),$t(Ya,{key:7,checked:_(i)[c.key],"onUpdate:checked":te=>_(i)[c.key]=te,"checked-value":c.settings?.["checked-value"]||!0,"unchecked-value":c.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["checked","onUpdate:checked","checked-value","unchecked-value"])):c.type=="switch"?(ot(),$t(da,{key:8},{default:St(()=>[ht(Ol,{value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,"checked-value":c.settings?.["checked-value"]||!0,"unchecked-value":c.settings?.["unchecked-value"]||!1,class:"w-full"},null,8,["value","onUpdate:value","checked-value","unchecked-value"])]),_:2},1024)):c.type=="slider"?(ot(),$t(fe,{key:9,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,min:c.settings?.min||0,max:c.settings?.max||100,step:c.settings?.step||1,class:"w-full"},null,8,["value","onUpdate:value","min","max","step"])):c.type=="range-slider"?(ot(),$t(fe,{key:10,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,min:c.settings?.min||0,max:c.settings?.max||100,step:c.settings?.step||1,class:"w-full",range:""},null,8,["value","onUpdate:value","min","max","step"])):c.type=="date"?(ot(),$t(de,{key:11,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM-dd",format:c.settings?.format||"dd MMMM yyyy",type:"date",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="daterange"?(ot(),$t(de,{key:12,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM-dd",format:c.settings?.format||"dd MMMM yyyy",type:"daterange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="datetime"?(ot(),$t(de,{key:13,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM-dd HH:mm:ss",format:c.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetime",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="datetimerange"?(ot(),$t(de,{key:14,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM-dd HH:mm:ss",format:c.settings?.format||"dd MMMM yyyy HH:mm:ss",type:"datetimerange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","format","clearable"])):c.type=="year"?(ot(),$t(de,{key:15,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy",type:"year",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="yearrange"?(ot(),$t(de,{key:16,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy",type:"yearrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="month"?(ot(),$t(de,{key:17,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM",type:"month",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="monthrange"?(ot(),$t(de,{key:18,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-MM",type:"monthrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="quarter"?(ot(),$t(de,{key:19,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-Q",type:"quarter",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="quarterrange"?(ot(),$t(de,{key:20,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,"value-format":"yyyy-Q",type:"quarterrange",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable"])):c.type=="week"?(ot(),$t(de,{key:21,"formatted-value":_(i)[c.key],"onUpdate:formattedValue":te=>_(i)[c.key]=te,type:"week",clearable:c.settings?.clearable||!0,placeholder:_(o)("selectWeek"),class:"w-full"},null,8,["formatted-value","onUpdate:formattedValue","clearable","placeholder"])):c.type=="single-select"||c.type=="multi-select"?(ot(),$t(He,{key:22,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:(c.options||[])?.map(te=>{if(c.type=="multi-select"&&c.settings&&_(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:_(i)[c.key].length>=Jl&&!_(i)[c.key].includes(te.value)}}return te}),multiple:c.type=="multi-select",placeholder:_(t)(c.label),"render-label":W,"label-field":"label","value-field":"value",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="image"?(ot(),on("div",Lp,[rs("div",{class:"cursor-pointer w-[25%] h-[100px]",onClick:()=>{d.value=c.key,S.value=!0}},[_(i)[c.key]?(ot(),$t(Ie,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1",style:Wr("border: 1px dashed "+_(s)("green","white")),src:_(K)(_(i)[c.key]||"")},null,8,["style","src"])):(ot(),on("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Wr("border: 1px dashed "+_(s)("green","white"))},[ht(gt,{size:64},{default:St(()=>[ht(Xe,{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))],8,Bp),_(i)[c.key]?(ot(),$t(Ut,{key:0,quaternary:"",onClick:()=>{d.value=c.key,_(i)[_(d)]=""}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("clear")),1)]),_:1},8,["onClick"])):Fo("",!0)])):c.type=="gallery"?(ot(),$t(Re,{key:24,modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,"upload-folder":"images",title:_(t)(c.label)},null,8,["modelValue","onUpdate:modelValue","title"])):c.type=="news-category"||c.type=="news-categories"?(ot(),$t(He,{key:25,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:(_(et).data.value||[])?.map(te=>{if(c.type=="news-categories"&&c.settings&&_(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:_(i)[c.key].length>=Jl&&!_(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-categories",placeholder:_(t)(c.label),"render-label":b,"label-field":"name","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="news-tag"||c.type=="news-tags"?(ot(),$t(He,{key:26,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:(_(H).data.value||[])?.map(te=>{if(c.type=="news-tags"&&c.settings&&_(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:_(i)[c.key].length>=Jl&&!_(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-tags",placeholder:_(t)(c.label),"render-label":rt,"label-field":"name","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,class:"w-full"},null,8,["value","onUpdate:value","options","multiple","placeholder","clearable","max-tag-count"])):c.type=="news-article"||c.type=="news-articles"?(ot(),$t(He,{key:27,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:(_(Ve)||[])?.map(te=>{if(c.type=="news-articles"&&c.settings&&_(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:_(i)[c.key].length>=Jl&&!_(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="news-articles",placeholder:_(t)(c.label),"render-label":p,loading:_($e),"value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:Ye},null,8,["value","onUpdate:value","options","multiple","placeholder","loading","clearable","max-tag-count"])):c.type=="icon"||c.type=="icons"?(ot(),$t(Sl,{key:28,modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),multiple:c.type=="icons","icons-list-placeholder":_(o)("enterIconNameInSearchBar"),"search-placeholder":_(o)("search"),"empty-text":_(o)("noIconsFound"),"icon-library":c.settings?.library||"all",clearable:c.settings?.clearable||!0},null,8,["modelValue","onUpdate:modelValue","placeholder","multiple","icons-list-placeholder","search-placeholder","empty-text","icon-library","clearable"])):c.type=="albums"?(ot(),$t(tn,{key:29,modelValue:_(i)[c.key],"onUpdate:modelValue":te=>_(i)[c.key]=te,"upload-folder":"albums",title:""},null,8,["modelValue","onUpdate:modelValue"])):c.type=="audio"?(ot(),$t(aa,{key:30},{default:St(()=>[ht(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,v.value=!0}},{default:St(()=>[La(Pa(_(o)("select")),1)]),_:1},8,["onClick"]),ht(ve,{value:_(i)[c.key]?_(Jo)(_(i)[c.key]):"",placeholder:_(o)("audioname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),_(i)[c.key]?(ot(),on(ss,{key:0},[ht(Ut,{type:"primary",ghost:"",onClick:()=>{C.value=_(t)(c.label),w.value=_(K)(_(i)[c.key]),B.value=!0}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:play"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("play")),1)]),_:1},8,["onClick"]),ht(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,_(i)[_(d)]=""}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="video"?(ot(),$t(aa,{key:31},{default:St(()=>[ht(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,I.value=!0}},{default:St(()=>[La(Pa(_(o)("select")),1)]),_:1},8,["onClick"]),ht(ve,{value:_(i)[c.key]?_(Jo)(_(i)[c.key]):"",placeholder:_(o)("videoname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),_(i)[c.key]?(ot(),on(ss,{key:0},[ht(Ut,{type:"primary",ghost:"",onClick:()=>{A.value=_(t)(c.label),j.value=_(K)(_(i)[c.key]),L.value=!0}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:play"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("play")),1)]),_:1},8,["onClick"]),ht(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,_(i)[_(d)]=""}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="document"?(ot(),$t(aa,{key:32},{default:St(()=>[ht(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,N.value=!0}},{default:St(()=>[La(Pa(_(o)("select")),1)]),_:1},8,["onClick"]),ht(ve,{value:_(i)[c.key]?_(Jo)(_(i)[c.key]):"",placeholder:_(o)("docname"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),_(i)[c.key]?(ot(),on(ss,{key:0},[ht(Ut,{type:"primary",ghost:"",onClick:te=>U(_(K)(_(i)[c.key]))},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"mdi:open-in-new"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("open")),1)]),_:1},8,["onClick"]),ht(Ut,{type:"primary",ghost:"",onClick:()=>{d.value=c.key,_(i)[_(d)]=""}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("clear")),1)]),_:1},8,["onClick"])],64)):Fo("",!0)]),_:2},1024)):c.type=="file"?(ot(),$t(aa,{key:33},{default:St(()=>[ht(Ut,{type:"primary",secondary:"",onClick:()=>{d.value=c.key,Q.value=!0}},{default:St(()=>[La(Pa(_(o)("select")),1)]),_:1},8,["onClick"]),ht(ve,{value:_(i)[c.key]?_(Jo)(_(i)[c.key]):"",placeholder:_(o)("filename"),style:{width:"50%"},readonly:""},null,8,["value","placeholder"]),_(i)[c.key]?(ot(),$t(Ut,{key:0,type:"primary",ghost:"",onClick:()=>{d.value=c.key,_(i)[_(d)]=""}},{icon:St(()=>[ht(gt,null,{default:St(()=>[ht(Xe,{icon:"carbon:trash-can"})]),_:1})]),default:St(()=>[La(" "+Pa(_(o)("clear")),1)]),_:1},8,["onClick"])):Fo("",!0)]),_:2},1024)):c.type=="color"||c.type=="gradient"?(ot(),$t(na,{key:34,"pure-color":_(i)[c.key],"onUpdate:pureColor":te=>_(i)[c.key]=te,"default-pure-color":"#00000000","picker-type":"chrome","use-type":c.type=="color"?"pure":"gradient",format:c.type=="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:_(M)?"white":"black",lang:_(a)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])):c.type=="content-model-item"||c.type=="content-model-items"?(ot(),$t(He,{key:35,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:(_(P)||[])?.map(te=>{if(c.type=="content-model-items"&&c.settings&&_(i)[c.key]){const Jl=c.settings?.max||1/0;return{...te,disabled:_(i)[c.key].length>=Jl&&!_(i)[c.key].includes(te.id)}}return te}),multiple:c.type=="content-model-items",placeholder:_(t)(c.label),"render-label":te=>Ce(te).value,loading:_(x),"value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,"max-tag-count":c.settings?.["max-tag-count"]||void 0,remote:"",class:"w-full",onSearch:te=>ie(te,c.defaultValue)},null,8,["value","onUpdate:value","options","multiple","placeholder","render-label","loading","clearable","max-tag-count","onSearch"])):c.type=="menu-item-link"?(ot(),$t(He,{key:36,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,options:_(J)||[],placeholder:_(t)(c.label),"render-label":dt,"render-tag":nt,loading:_(h),"label-field":"title","value-field":"id",filterable:"",clearable:c.settings?.clearable||!0,class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","loading","clearable"])):c.type=="list"?(ot(),$t(hn,{key:37,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),max:c.settings?.max||void 0,min:c.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:St(({value:te})=>[c.settings?.type=="editor"?(ot(),on("div",Fp,[ht(at,{modelValue:te.value,"onUpdate:modelValue":Jl=>te.value=Jl,"toolbar-items":z,"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","onUpdate:modelValue"])])):(ot(),$t(ve,{key:1,value:te.value,"onUpdate:value":Jl=>te.value=Jl,type:c.settings?.type||"text",class:"w-full"},null,8,["value","onUpdate:value","type"]))]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):c.type=="i18n-list"?(ot(),$t(hn,{key:38,value:_(i)[c.key],"onUpdate:value":te=>_(i)[c.key]=te,placeholder:_(t)(c.label),max:c.settings?.max||void 0,min:c.settings?.min||void 0,"on-create":()=>({value:""}),"show-sort-button":""},{default:St(({value:te})=>[ht(Ee,{modelValue:te.value,"onUpdate:modelValue":Jl=>te.value=Jl,type:c.settings?.type||"text",class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["value","onUpdate:value","placeholder","max","min"])):Fo("",!0)]),_:2},1032,["label","path","label-style","show-require-mark"]))),128))]),_:1},8,["model","style"])),ht(ql,{show:_(B),"onUpdate:show":he[0]||(he[0]=c=>uo(B)?B.value=c:null),preset:"card",style:{width:"500px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:_(C)},{default:St(()=>[rs("audio",Op,[rs("source",{src:_(w)},null,8,qp)])]),_:1},8,["show","title"]),ht(ql,{show:_(L),"onUpdate:show":he[1]||(he[1]=c=>uo(L)?L.value=c:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:_(A)},{default:St(()=>[rs("video",Rp,[rs("source",{src:_(j)},null,8,jp)])]),_:1},8,["show","title"]),ht(ro,{show:_(S),"onUpdate:show":he[2]||(he[2]=c=>uo(S)?S.value=c:null),title:_(o)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:_(ye)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[3]||(he[3]=c=>{_(i)[_(d)]=c,S.value=!1})},null,8,["show","title","upload-config"]),ht(ro,{show:_(I),"onUpdate:show":he[4]||(he[4]=c=>uo(I)?I.value=c:null),title:_(o)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:_(ye)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[5]||(he[5]=c=>{_(i)[_(d)]=c,I.value=!1})},null,8,["show","title","upload-config"]),ht(ro,{show:_(v),"onUpdate:show":he[6]||(he[6]=c=>uo(v)?v.value=c:null),title:_(o)("selectAudio"),"display-images":!1,"display-videos":!1,"display-audios":!0,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"audios",limit:0,maxSize:0,baseUrl:_(ye)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[7]||(he[7]=c=>{_(i)[_(d)]=c,v.value=!1})},null,8,["show","title","upload-config"]),ht(ro,{show:_(N),"onUpdate:show":he[8]||(he[8]=c=>uo(N)?N.value=c:null),title:_(o)("selectDocument"),"display-images":!1,"display-videos":!1,"display-audios":!1,"display-documents":!0,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:_(ye)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[9]||(he[9]=c=>{_(i)[_(d)]=c,N.value=!1})},null,8,["show","title","upload-config"]),ht(ro,{show:_(Q),"onUpdate:show":he[10]||(he[10]=c=>uo(Q)?Q.value=c:null),title:_(o)("selectFile"),"upload-config":{folder:"files",limit:0,maxSize:0,baseUrl:_(ye)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:he[11]||(he[11]=c=>{_(i)[_(d)]=c,Q.value=!1})},null,8,["show","title","upload-config"])],64)}}}),Gs=On(Wp,[["__scopeId","data-v-3ffecd12"]]),{defineComponent:Xp}=await se("vue"),{unref:Ct,resolveComponent:$b,createVNode:Rl,withCtx:Wt,openBlock:jl,createBlock:Ba,createCommentVNode:Xr,toDisplayString:qn,createTextVNode:po,renderList:ar,Fragment:mo,createElementBlock:fo,isRef:Jp,createSlots:Zp,createElementVNode:Jr,vShow:Zr,withDirectives:ei,Transition:ti}=await se("vue"),em={class:"absolute top-14 left-0 right-0 z-10 px-7 pt-2 pb-1 w-full bg-white dark:bg-black"},{storeToRefs:tm}=await se("pinia"),{ref:li,inject:Rn,watch:ai,reactive:In,computed:rc}=await se("vue"),lm=Xp({__name:"SectionDetails",props:{slug:{},linkId:{},pageId:{}},setup(u){const e=u,n=Wl(),{sectionsDataBackup:l,sectionsSettingsBackup:o}=tm(fd()),{t:a}=ke(),{tr:t,editKeysToCamelCase:s}=Ze(),K=li("index"),Z=li(!1),ce=Rn("formValueValidate1"),q=Rn("formValueValidate2"),ye=Rn("formValueValidate3"),O=Rn("initialSettings"),V=Rn("initialData"),d=Rn("settings"),E=Rn("data"),ae=Rn("refreshKey"),{data:i,isPending:me}=Kd({slug:e.slug,linkId:e.linkId,pageId:e.pageId});ai(()=>i?.value,S=>{const I=le.cloneDeep(S),L=I?.pages?.length?I?.pages[0].pivot:null;if(I&&E&&L&&(le.isObject(L?.data)&&Ni(L?.data)?E.value=In(L?.data):E.value=In({}),le.forIn(s(I.dataStructure),(A,j)=>{(!E.value[j]||Array.isArray(E.value[j])&&E.value[j].length==0)&&(j==="index"?E.value[j]=In({}):E.value[j]=In([]))})),V&&E&&setTimeout(()=>{V.value=le.cloneDeep(E.value)},500),I&&d&&(le.isObject(L?.settings)&&Ni(L?.settings)?d.value=In(L?.settings):d.value=In({}),le.forIn(s(I.settingsStructure),(A,j)=>{d.value[j]||(d.value[j]=In({}))})),O&&d&&setTimeout(()=>{O.value=le.cloneDeep(d.value)},500),I)if(s(I.dataStructure)){const A=Object.keys(s(I.dataStructure));A.includes("index")?K.value="index":K.value=A.length>0?A[0]:"_settings"}else K.value="_settings";if(ae&&(ae.value=Ql()),!Z.value&&(l.value[`${e.slug}__${e.linkId}`]||o.value[`${e.slug}__${e.linkId}`])){Z.value=!0;const A=()=>{l.value[`${e.slug}__${e.linkId}`]=null,o.value[`${e.slug}__${e.linkId}`]=null,ae&&(ae.value=Ql())};n.warning({title:a("backup"),content:a("sectionDataOrSettingsAvailable"),positiveText:a("restore"),negativeText:a("drop"),onPositiveClick:async()=>{E?.value&&l.value[`${e.slug}__${e.linkId}`]&&(E.value=In(le.cloneDeep(l.value[`${e.slug}__${e.linkId}`]))),d?.value&&o.value[`${e.slug}__${e.linkId}`]&&(d.value=In(le.cloneDeep(o.value[`${e.slug}__${e.linkId}`]))),A()},onNegativeClick:async()=>{A()}})}},{immediate:!0,deep:!0});const z=li(!1);setTimeout(()=>{z.value=!0},500);const W=rc(()=>!le.isEqual(E?.value,V?.value)),M=rc(()=>!le.isEqual(d?.value,O?.value));return ai(()=>E?.value,S=>{W.value&&z.value&&(l.value={...l.value??{},[`${e.slug}__${e.linkId}`]:le.cloneDeep(S)})},{deep:!0}),ai(()=>d?.value,S=>{M.value&&z.value&&(o.value={...o.value??{},[`${e.slug}__${e.linkId}`]:le.cloneDeep(S)})},{deep:!0}),(S,I)=>{const L=ao,A=wl,j=re,v=R,B=wd,C=Be,w=Fi,N=Oi,U=vl,Q=Ia,J=za;return Ct(me)?(jl(),Ba(A,{key:0,align:"center",justify:"center",class:"min-h-[50vh]"},{default:Wt(()=>[Rl(L)]),_:1})):(jl(),fo(mo,{key:1},[Jr("div",em,[Rl(w,{value:Ct(K),"onUpdate:value":I[1]||(I[1]=F=>Jp(K)?K.value=F:null),type:"card",size:"small"},Zp({default:Wt(()=>[Ct(s)(Ct(i)?.dataStructure)?(jl(),fo(mo,{key:0},[Ct(s)(Ct(i)?.dataStructure).index?(jl(),Ba(B,{key:0,name:"index"},{default:Wt(()=>[Rl(v,{class:"mr-1"},{default:Wt(()=>[Rl(j,{icon:"carbon:types"})]),_:1}),po(" "+qn(Ct(a)("general")),1)]),_:1})):Xr("",!0),(jl(!0),fo(mo,null,ar(Ct(Ht)(Ct(s)(Ct(i)?.dataStructure),["index"]),(F,h)=>(jl(),Ba(B,{key:h,name:String(h)},{default:Wt(()=>[po(qn(Ct(t)(F.title)),1)]),_:2},1032,["name"]))),128))],64)):Xr("",!0),Rl(B,{name:"_settings"},{default:Wt(()=>[Rl(v,{class:"mr-1"},{default:Wt(()=>[Rl(j,{icon:"carbon:settings"})]),_:1}),po(" "+qn(Ct(a)("settings")),1)]),_:1})]),_:2},[Ct(K)!=="index"&&Ct(K)!=="_settings"?{name:"suffix",fn:Wt(()=>[Rl(C,{quaternary:"",size:"small",onClick:I[0]||(I[0]=()=>Ct(E)[Ct(K)].push({}))},{icon:Wt(()=>[Rl(v,null,{default:Wt(()=>[Rl(j,{icon:"carbon:add-alt"})]),_:1})]),default:Wt(()=>[po(" "+qn(Ct(a)("add")),1)]),_:1})]),key:"0"}:void 0]),1032,["value"])]),Rl(J,{appear:"",name:"slide-fade"},{default:Wt(()=>[Jr("section",null,[(jl(!0),fo(mo,null,ar(Ct(s)(Ct(i)?.dataStructure)||{},(F,h)=>(jl(),fo(mo,{key:h},[String(h)==="index"?(jl(),Ba(ti,{key:0,name:"slide-fade",mode:"out-in"},{default:Wt(()=>[ei(Rl(U,{size:"small",class:"mb-2",embedded:""},{default:Wt(()=>[Ct(s)(Ct(i)?.dataStructure).index?(jl(),Ba(Gs,{key:`${Ct(ae)}-${h}-form-1`,modelValue:Ct(E)[h],"onUpdate:modelValue":f=>Ct(E)[h]=f,items:F,onUpdate:(f,D)=>{ce.value=D}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):(jl(),Ba(N,{key:1,type:"warning","show-icon":""},{default:Wt(()=>[po(qn(Ct(a)("noFieldDefinedHere")),1)]),_:1}))]),_:2},1536),[[Zr,Ct(K)==="index"]])]),_:2},1024)):(jl(),Ba(ti,{key:1,name:"slide-fade",mode:"out-in"},{default:Wt(()=>[ei(Rl(U,{size:"small",class:"mb-2",embedded:""},{default:Wt(()=>[(jl(!0),fo(mo,null,ar(Ct(E)[h],(f,D)=>(jl(),Ba(U,{key:D,size:"small",class:"mb-2"},{header:Wt(()=>[Rl(Q,{size:"medium",type:"info"},{default:Wt(()=>[po(qn(String(D+1)),1)]),_:2},1024)]),"header-extra":Wt(()=>[Rl(C,{secondary:"",type:"error",size:"small",onClick:()=>Ct(E)[h].splice(D,1)},{icon:Wt(()=>[Rl(v,null,{default:Wt(()=>[Rl(j,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),default:Wt(()=>[(jl(),Ba(Gs,{key:`${Ct(ae)}-${h}-${D}-form-2`,modelValue:Ct(E)[h][D],"onUpdate:modelValue":xe=>Ct(E)[h][D]=xe,items:F.items,onUpdate:(xe,$)=>{q.value=$}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024))),128))]),_:2},1536),[[Zr,Ct(K)===String(h)]])]),_:2},1024))],64))),128)),Rl(ti,{name:"slide-fade",mode:"out-in"},{default:Wt(()=>[ei(Rl(U,{size:"small",class:"mb-2",embedded:""},{default:Wt(()=>[Ct(i)?.settingsStructure?(jl(!0),fo(mo,{key:0},ar(Ct(s)(Ct(i)?.settingsStructure),(F,h)=>(jl(),Ba(U,{key:h,size:"small",class:"mb-2"},{header:Wt(()=>[Jr("span",null,qn(Ct(t)(F.title)),1)]),default:Wt(()=>[Ct(d)[h]?(jl(),Ba(Gs,{key:`${Ct(ae)}-${h}-form-3`,modelValue:Ct(d)[h],"onUpdate:modelValue":f=>Ct(d)[h]=f,items:F.items,onUpdate:(f,D)=>{ye.value=D}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"])):Xr("",!0)]),_:2},1024))),128)):(jl(),Ba(N,{key:1,type:"warning","show-icon":""},{default:Wt(()=>[po(qn(Ct(a)("noSettingsDefinedForThisSection")),1)]),_:1}))]),_:1},512),[[Zr,Ct(K)==="_settings"]])]),_:1})])]),_:1})],64))}}}),am=On(lm,[["__scopeId","data-v-0a5a701b"]]),nm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["pages"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/pages",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Pd=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["pages"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/pages/${t.slug}`,data:Ht(t,["id","slug","hideSuccessMessage"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:(t,s)=>{s.hideSuccessMessage||o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},om=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["pages"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({slug:a})=>{o.start();const t=await e({method:"delete",url:`/pages/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},sm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["sections"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/sections",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ld=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["sections"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/sections/${t.slug}`,data:Ht(t,["id","slug"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},rm=()=>{const{request:u}=Fe(),{t:e}=ke(),n=ji(),l=Ge(),o=qe();return Na(async a=>{const t=await u({url:`/sections/${a.slug}/data-source-page`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},im=()=>{const{request:u}=Fe(),{t:e}=ke(),n=ji(),l=Ge(),o=qe();return Na(async a=>{const t=await u({url:`/sections/${a.slug}/duplicate`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},cm=()=>{const{request:u}=Fe(),{t:e}=ke(),n=ji(),l=Ge(),o=qe();return Na(async a=>{const t=await u({url:`/sections/${a.slug}/copy-data`,method:"put",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result.data},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{n.invalidateQueries({queryKey:["pages"]}),n.invalidateQueries({queryKey:["sections"]}),o.success(e("success"))},onError:(a,t)=>{o.error(e("unableToUpdateSettings"))}})},{defineComponent:dm}=await se("vue"),{unref:we,resolveComponent:um,createVNode:Se,withCtx:Ne,toDisplayString:xl,createTextVNode:pa,normalizeClass:_o,openBlock:rl,createBlock:Fa,createCommentVNode:nr,vShow:pm,withDirectives:mm,createElementVNode:Al,normalizeStyle:fm,renderList:or,Fragment:cs,createElementBlock:Oa,withModifiers:ic,isRef:sr}=await se("vue"),_m={class:"flex items-center justify-between ml-1 mr-2.5"},vm={key:0},ym={key:1},gm={key:0},hm={class:"flex items-center"},bm={class:"text-base"},km={class:"absolute top-[-10px] right-[-10px] z-[10]"},wm={class:"flex items-center justify-center cursor-pointer gap-2"},xm={key:1},$m={class:"mt-4"},Cm={key:2,class:"mt-2 text-xs"},Im={class:"my-8"},Vm={class:"flex items-center justify-between"},Sm={class:"text-base"},Em={class:"my-8"},Um={class:"flex items-center justify-between"},Mm={class:"text-base"},Tm={class:"my-8"},{ref:$l,watch:Dm,computed:ds,onMounted:Nm,provide:jn}=await se("vue"),{storeToRefs:zm}=await se("pinia"),Am=dm({__name:"index",props:{slug:{},openFormModal:{type:Function}},emits:["delete"],setup(u,{emit:e}){const n=Wl(),{t:l}=ke(),o=u,a=e,t=$l(Ql()),s=$l({}),K=$l({}),Z=$l({}),ce=$l({}),q=$l(),ye=$l(),O=$l(),V=$l([]),d=$l([]),E=$l({}),ae=$l({}),{tr:i,pickByTheme:me,editKeysToCamelCase:z}=Ze(),{sectionsDataBackup:W,sectionsSettingsBackup:M}=zm(fd()),{data:S}=Ai(),{data:I,isPending:L}=Yd(o.slug),{mutate:A,isPending:j}=Pd(),{mutate:v,isPending:B}=om(),{mutate:C,isPending:w}=rm(),{mutate:N,isPending:U}=Ld(),{mutate:Q,isPending:J}=im(),{mutate:F,isPending:h}=cm();Dm(()=>I.value,fe=>{const de=le.cloneDeep(fe);if(de&&Array.isArray(de?.sections)){const He=de.sections;if(Array.isArray(de?.sectionsOrder)){V.value=[];for(const Ie of de.sectionsOrder)if(Ie){const Xe=He.find(gt=>`${gt.slug}__${gt.pivot?.linkId}`===Ie);Xe&&V.value.push(Xe)}for(const Ie of He)V.value.map(Xe=>`${Xe.slug}__${Xe.pivot?.linkId}`).includes(`${Ie.slug}__${Ie.pivot?.linkId}`)||V.value.push(Ie)}else V.value=le.cloneDeep(He);if(Array.isArray(de.sectionsDisabled))for(const Ie of de.sections)Ie&&(E.value[`${Ie.slug}__${Ie.pivot?.linkId}`]=!de.sectionsDisabled.includes(`${Ie.slug}__${Ie.pivot?.linkId}`));else for(const Ie of de.sections)Ie&&(E.value[`${Ie.slug}__${Ie.pivot?.linkId}`]=!0)}ae.value=le.cloneDeep(E.value),d.value=le.cloneDeep(V.value),t.value=Ql()},{immediate:!0,deep:!0});const f=ds(()=>le.isEqual(s.value,Z.value)&&le.isEqual(K.value,ce.value)&&le.isEqual(V.value,d.value)&&le.isEqual(E.value,ae.value)),D=async()=>{const fe=q.value&&await q.value(),de=ye.value&&await ye.value(),He=O.value&&await O.value(),Ie=async()=>{ve.value&&(N({slug:ve.value.slug,dataSourceLinkId:ve.value.pivot?.dataSourceLinkId,dataSourcePageId:ve.value.pivot?.dataSourcePageId,settings:K.value,data:s.value}),W.value[`${ve.value.slug}__${ve.value.pivot?.dataSourceLinkId}`]=null,M.value[`${ve.value.slug}__${ve.value.pivot?.dataSourceLinkId}`]=null),A({slug:o.slug,sectionsOrder:V.value.map(Xe=>`${Xe.slug}__${Xe.pivot?.linkId}`),sectionsDisabled:Object.keys(E.value).filter(Xe=>!E.value[Xe]),hideSuccessMessage:!!ve.value})};!ve.value||(!q.value||fe)&&(!ye.value||de)&&(!O.value||He)?await Ie():n.warning({title:l("confirm"),content:l("mandatoryFieldsNotFilledInConfirmation"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{await Ie()}})},xe=fe=>{const Ie=V.value.filter(Xe=>Xe.id===fe.id).map(Xe=>Xe.pivot?.createdAt||Xe.pivot?.updatedAt||"").sort((Xe,gt)=>new Date(Xe).getTime()-new Date(gt).getTime()).indexOf(fe.pivot?.createdAt||fe.pivot?.updatedAt||"");return fe.pivot?.linkId=="default"?i(fe.title):i(fe.title)+" ("+(Ie+1)+")"},$=async fe=>{n.warning({title:l("confirm"),content:l("confirmDeletePage"),positiveText:l("yes"),negativeText:l("no"),onPositiveClick:async()=>{fe.id&&v({id:fe.id,slug:fe.slug},{onSuccess:()=>{a("delete",I.value)}})}})},m=$l([]),r=$l(!1),x=()=>{m.value=[],V.value.forEach(fe=>{fe.id&&m.value.push(fe.id)}),r.value=!0},ie=fe=>{fe.id&&(m.value.includes(fe.id)?m.value=m.value.filter(de=>de!==fe.id):m.value.push(fe.id))},P=fe=>ds({get:()=>fe.id?m.value.includes(fe.id):!1,set:de=>{fe.id&&(de?m.value=m.value.filter(He=>He!==fe.id):m.value.includes(fe.id)||m.value.push(fe.id))}}),ge=async()=>{A({slug:o.slug,sectionsIds:m.value})},De=$l(0),ne=$l([]),ue=$l(!1),xt=fe=>{De.value=fe,ne.value=[],ue.value=!0},Vt=fe=>{fe.id&&(ne.value.includes(fe.id)?ne.value=ne.value.filter(de=>de!==fe.id):ne.value.push(fe.id))},$e=fe=>ds({get:()=>fe.id?ne.value.includes(fe.id):!1,set:de=>{fe.id&&(de?ne.value=ne.value.filter(He=>He!==fe.id):ne.value.includes(fe.id)||ne.value.push(fe.id))}}),Ye=async()=>{if(!ne.value.length)return!1;const fe=V.value.map(Ie=>`${Ie.slug}__${Ie.pivot?.linkId}`),de=ne.value.map(Ie=>`${S.value?.find(gt=>gt.id===Ie)?.slug}__default`),He=[...fe.slice(0,De.value),...de,...fe.slice(De.value)];A({slug:o.slug,sectionsIds:[...V.value.map(Ie=>Ie.id),...ne.value],sectionsOrder:He})},Ve=ds(()=>(S.value||[]).filter(fe=>!V.value.find(de=>de.id===fe.id))),et=(fe,de,He=!1)=>fe.map(Ie=>{const gt=fe.filter(aa=>aa.id===Ie.id).map(aa=>aa.pivot?.createdAt||aa.pivot?.updatedAt||"").sort((aa,na)=>new Date(aa).getTime()-new Date(na).getTime()),Ut=gt.indexOf(Ie.pivot?.createdAt||Ie.pivot?.updatedAt||""),Re=I.value?.id==Ie.id?l("currentPage"):i(Ie.title),Sl=gt.length>1?" - "+i(de?.title):"",tn=Ie.pivot?.linkId!="default"?" ("+(Ut+1)+")":"";return{label:Re+Sl+tn,value:Ie.id+"__"+Ie.pivot?.linkId,disabled:He?I.value?.id==Ie.id&&de?.id==Ie.pivot?.sectionId&&de?.pivot?.dataSourceLinkId==Ie.pivot?.linkId:!1}}),H=async(fe,de)=>{const He=de?.split("__")||[],Ie=He.length?He[0]:null,Xe=He.length>1?He[1]:null;f.value?C({slug:fe.slug,data:{pageId:I.value?.id,linkId:fe.pivot?.linkId,sourcePageId:Ie,sourceLinkId:Xe}}):n.warning({title:l("confirm"),content:l("confirmUpdateDataSourcePage"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:()=>C({slug:fe.slug,data:{pageId:I.value?.id,linkId:fe.pivot?.linkId,sourcePageId:Ie,sourceLinkId:Xe}})})},b=fe=>{n.warning({title:l("confirm"),content:l("confirmRemoveSection"),positiveText:l("remove"),negativeText:l("cancel"),onPositiveClick:()=>A({slug:o.slug,removedSectionsIds:[{id:fe.id,linkId:fe.pivot?.linkId}]})})},p=fe=>{n.warning({title:l("confirm"),content:l("confirmDuplicateSection"),positiveText:l("duplicate"),negativeText:l("cancel"),onPositiveClick:()=>Q({slug:fe.slug,data:{pageId:I.value?.id,linkId:fe.pivot?.linkId}})})},rt=fe=>{n.warning({title:l("confirm"),content:l("confirmFillInFakeData"),positiveText:l("generate"),negativeText:l("cancel"),onPositiveClick:()=>{const de={};le.forIn(z(fe?.dataStructure),(He,Ie)=>{if(Ie==="index"){de[Ie]={};for(const Xe of He)de.index[Xe.key]=Zi(Xe.type)}else{de[Ie]=[];for(let Xe=0;Xe<3;Xe++){const gt={};for(const Ut of He.items)gt[Ut.key]=Zi(Ut.type);de[Ie].push(gt)}}}),N({slug:fe.slug,dataSourceLinkId:fe.pivot?.dataSourceLinkId,dataSourcePageId:fe.pivot?.dataSourcePageId,data:de})}})},Ce=$l(!1),nt=$l(null),dt=$l(null),Y=fe=>{nt.value=fe,dt.value=null,Ce.value=!0},he=async()=>{if(!dt.value)return!1;const fe=dt.value.split("__")||[],de=fe.length?fe[0]:null,He=fe.length>1?fe[1]:null;F({slug:nt.value?.slug,data:{fromPageId:de,fromLinkId:He,toPageId:I.value?.id,toLinkId:nt.value?.pivot?.linkId}})},ve=$l(null),Ee=fe=>{ve.value=fe},at=()=>{ve.value&&(ve.value=null)},{getSettingValue:Vl}=Gd(),Ya=()=>{const fe=`${Hd(Qd())}/${(Vl("basePath")||"creopse")+_d.VISUAL_EDITOR.PATH}?page=${I.value?.slug}`;Wd(fe,[],{target:"_blank",method:"GET"})},Ol=ds(()=>j.value||B.value||U.value||w.value||J.value),da=$l(!1);return Nm(()=>{setTimeout(()=>{da.value=!0},300)}),jn("refreshKey",t),jn("formValueValidate1",q),jn("formValueValidate2",ye),jn("formValueValidate3",O),jn("initialSettings",ce),jn("initialData",Z),jn("settings",K),jn("data",s),(fe,de)=>{const He=re,Ie=R,Xe=Be,gt=ja,Ut=wl,Re=Da,Sl=du,tn=za,aa=cu,na=vl,hn=xd,T=no,yl=Ia,ql=Ka,ro=so,c=oo,Pr=um("Draggable"),te=Aa,Jl=Ra,Lr=Xl;return rl(),Oa(cs,null,[Se(Re,{to:"#alt-action"},{default:Ne(()=>[Se(Ut,{align:"center"},{default:Ne(()=>[Se(Xe,{secondary:"",type:"error",disabled:we(Ol),onClick:de[0]||(de[0]=ut=>we(I)?$(we(I)):null)},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:trash-can"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("delete")),1)]),_:1},8,["disabled"]),Se(Xe,{secondary:"",type:"info",disabled:we(Ol),onClick:de[1]||(de[1]=ut=>we(I)?u.openFormModal(we(I)):null)},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:edit"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("editPage")),1)]),_:1},8,["disabled"]),Se(gt,{vertical:"",class:_o(we(me)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Se(Xe,{secondary:"",type:"primary",loading:we(Ol),disabled:we(f),onClick:de[2]||(de[2]=ut=>D())},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:save"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),Al("section",{class:_o(["absolute top-0 left-0 z-100 w-full transition-opacity duration-300",we(da)?"opacity-100":"opacity-0"]),style:fm({visibility:we(da)?"visible":"hidden"})},[Se(na,{size:"small",bordered:!1,embedded:"",class:"!rounded-none"},{default:Ne(()=>[Al("div",_m,[Se(aa,null,{default:Ne(()=>[Se(Sl,{onClick:de[3]||(de[3]=ut=>at())},{default:Ne(()=>[Se(Ie,{class:"mr-1"},{default:Ne(()=>[Se(He,{icon:"carbon:document"})]),_:1}),pa(" "+xl(we(i)(we(I)?.title)),1)]),_:1}),Se(tn,{appear:"",name:"slide-fade"},{default:Ne(()=>[we(ve)?(rl(),Fa(Sl,{key:0},{default:Ne(()=>[pa(xl(xe(we(ve))),1)]),_:1})):nr("",!0)]),_:1})]),_:1}),Se(Ut,null,{default:Ne(()=>[mm(Se(Xe,{onClick:de[4]||(de[4]=ut=>Ya()),size:"small",secondary:"",type:"success"},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:view"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("openVisualEditor")),1)]),_:1},512),[[pm,!1]]),we(ve)?(rl(),Fa(Xe,{key:0,onClick:de[5]||(de[5]=ut=>at()),size:"small",secondary:"",type:"warning",title:we(l)("exit")},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:exit"})]),_:1})]),_:1},8,["title"])):nr("",!0)]),_:1})])]),_:1})],6),Al("div",{class:_o(`${we(ve)?"h-[90px]":"h-[50px]"}`)},null,2),we(ve)?(rl(),Fa(am,{key:0,"page-id":we(I)?.id,slug:we(ve)?.slug,"link-id":we(ve)?.pivot?.dataSourceLinkId},null,8,["page-id","slug","link-id"])):(rl(),Fa(tn,{key:1,appear:"",name:"slide-fade"},{default:Ne(()=>[Al("section",null,[we(L)?(rl(),Oa("section",vm,[(rl(),Oa(cs,null,or(7,ut=>Se(hn,{key:ut,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(rl(),Oa("section",ym,[we(I)&&Array.isArray(we(I).sections)&&we(I).sections.length?(rl(),Oa("section",gm,[Se(Pr,{list:we(V)},{default:Ne(()=>[(rl(!0),Oa(cs,null,or(we(V),(ut,bn)=>(rl(),Oa("section",{key:ut.id},[Se(na,{hoverable:"",embedded:"",size:"small",class:"my-1"},{default:Ne(()=>[Se(c,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":Ne(({collapsed:ln})=>[Se(Ut,{align:"center",justify:"space-between"},{default:Ne(()=>[Se(Xe,{secondary:"",type:"primary",size:"small",onClick:ic(Kh=>Ee(ut),["stop"])},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:archive"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("dataAndSettings")),1)]),_:1},8,["onClick"]),Se(Ie,null,{default:Ne(()=>[ln?(rl(),Fa(He,{key:0,icon:"fa-solid:chevron-left"})):(rl(),Fa(He,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),_:2},1024)]),arrow:Ne(()=>[...de[16]||(de[16]=[Al("span",null,null,-1)])]),default:Ne(()=>[Se(ro,{name:"1"},{header:Ne(()=>[Al("div",hm,[Se(Ie,{size:"21",class:"cursor-move mr-4"},{default:Ne(()=>[Se(He,{icon:"fa-solid:grip-lines"})]),_:1}),Se(T,{checked:we(E)[`${ut.slug}__${ut.pivot?.linkId}`],"onUpdate:checked":ln=>we(E)[`${ut.slug}__${ut.pivot?.linkId}`]=ln,size:"small",class:"mr-4",onClick:de[6]||(de[6]=ic(()=>{},["stop"]))},{default:Ne(()=>[pa(xl(we(l)("display")),1)]),_:1},8,["checked","onUpdate:checked"]),Se(yl,{size:"small",type:"info"},{default:Ne(()=>[pa(xl(bn+1),1)]),_:2},1024),Se(gt,{vertical:"",class:_o(we(me)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Al("span",bm,xl(xe(ut)),1)])]),default:Ne(()=>[Se(Ut,null,{default:Ne(()=>[Se(Xe,{size:"small",type:"error",secondary:"",onClick:ln=>b(ut)},{default:Ne(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:Ne(()=>[Se(He,{icon:"carbon:close"})]),_:1}),pa(" "+xl(we(l)("removeSection")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"warning",secondary:"",onClick:ln=>p(ut)},{default:Ne(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:Ne(()=>[Se(He,{icon:"carbon:partition-same"})]),_:1}),pa(" "+xl(we(l)("duplicateSection")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"info",secondary:"",onClick:ln=>rt(ut)},{default:Ne(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:Ne(()=>[Se(He,{icon:"carbon:magic-wand"})]),_:1}),pa(" "+xl(we(l)("fillInFakeData")),1)]),_:1},8,["onClick"]),Se(Xe,{size:"small",type:"info",secondary:"",onClick:ln=>Y(ut)},{default:Ne(()=>[Se(Ie,{size:"18",class:"mr-1"},{default:Ne(()=>[Se(He,{icon:"carbon:copy"})]),_:1}),pa(" "+xl(we(l)("copyData")),1)]),_:1},8,["onClick"]),Se(gt,{vertical:"",class:_o(we(me)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Se(Ut,{align:"center"},{default:Ne(()=>[Al("span",null,xl(we(l)("dataSource")),1),Se(ql,{value:`${ut.pivot?.dataSourcePageId}__${ut.pivot?.dataSourceLinkId}`,options:et(ut.pages||[],ut),placeholder:we(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[225px]","onUpdate:value":ln=>H(ut,ln)},null,8,["value","options","placeholder","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),bn<we(V).length-1?(rl(),Oa("div",{key:0,class:_o(`relative border-dashed border-y-2 h-1.5  ${we(me)("!border-zinc-300","!border-zinc-600")}`)},[Al("div",km,[Se(Xe,{size:"tiny",type:"info",title:we(l)("insertSections"),onClick:ln=>xt(bn+1)},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:insert-page"})]),_:1})]),_:1},8,["title","onClick"])])],2)):nr("",!0)]))),128))]),_:1},8,["list"]),Se(na,{size:"small",class:"mb-2 !border-dashed !border-2",onClick:de[7]||(de[7]=ut=>x())},{default:Ne(()=>[Al("div",wm,[Se(Ie,{size:"20"},{default:Ne(()=>[Se(He,{icon:"carbon:row"})]),_:1}),pa(" "+xl(we(l)("insertOrRemoveSections")),1)])]),_:1})])):(rl(),Oa("section",xm,[Se(na,{size:"large",class:_o(`mb-2 !border-dashed !border-2 ${we(me)("!border-zinc-300","!border-zinc-600")}`)},{default:Ne(()=>[Se(te,{description:we(l)("noSectionOnThisPage")},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:page-break"})]),_:1})]),extra:Ne(()=>[Al("div",$m,[Se(Xe,{size:"small",secondary:"",onClick:de[8]||(de[8]=ut=>x())},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:row"})]),_:1})]),default:Ne(()=>[pa(" "+xl(we(l)("insertSections")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"])])),we(I)?(rl(),Oa("div",Cm,[pa(xl(we(l)("dataRetrievalSlug"))+": ",1),Al("b",null,xl(we(I).slug),1)])):nr("",!0)]))])]),_:1})),Se(Lr,{show:we(r),"onUpdate:show":de[9]||(de[9]=ut=>sr(r)?r.value=ut:null),loading:we(j)||we(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("insertOrRemoveSections"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:ge,onNegativeClick:de[10]||(de[10]=ut=>r.value=!1)},{default:Ne(()=>[Al("section",Im,[we(S)?.length?(rl(),Fa(Jl,{key:0,style:{"max-height":"400px"}},{default:Ne(()=>[(rl(!0),Oa(cs,null,or(we(S),ut=>(rl(),Fa(na,{key:ut.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:bn=>ie(ut)},{default:Ne(()=>[Al("div",Vm,[Al("span",Sm,xl(we(i)(ut.title)),1),Se(T,{checked:P(ut).value,"onUpdate:checked":bn=>P(ut).value=bn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(rl(),Fa(te,{key:1,description:we(l)("noAvailableSection")},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Se(Lr,{show:we(ue),"onUpdate:show":de[11]||(de[11]=ut=>sr(ue)?ue.value=ut:null),loading:we(j)||we(w),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("insertSections"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:Ye,onNegativeClick:de[12]||(de[12]=ut=>ue.value=!1)},{default:Ne(()=>[Al("section",Em,[we(Ve)?.length?(rl(),Fa(Jl,{key:0,style:{"max-height":"400px"}},{default:Ne(()=>[(rl(!0),Oa(cs,null,or(we(Ve),ut=>(rl(),Fa(na,{key:ut.id,hoverable:"",embedded:"",size:"small",class:"mb-2 cursor-pointer",onClick:bn=>Vt(ut)},{default:Ne(()=>[Al("div",Um,[Al("span",Mm,xl(we(i)(ut.title)),1),Se(T,{checked:$e(ut).value,"onUpdate:checked":bn=>$e(ut).value=bn,size:"medium"},null,8,["checked","onUpdate:checked"])])]),_:2},1032,["onClick"]))),128))]),_:1})):(rl(),Fa(te,{key:1,description:we(l)("noAvailableSection")},{icon:Ne(()=>[Se(Ie,null,{default:Ne(()=>[Se(He,{icon:"carbon:list-boxes"})]),_:1})]),_:1},8,["description"]))])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Se(Lr,{show:we(Ce),"onUpdate:show":de[14]||(de[14]=ut=>sr(Ce)?Ce.value=ut:null),loading:we(j)||we(h),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:we(l)("copyData"),"positive-text":we(l)("validate"),"negative-text":we(l)("cancel"),onPositiveClick:he,onNegativeClick:de[15]||(de[15]=ut=>Ce.value=!1)},{default:Ne(()=>[Al("section",Tm,[Se(Ut,{align:"start",vertical:""},{default:Ne(()=>[Al("span",null,xl(we(l)("dataWillBeCopiedFrom"))+":",1),Se(ql,{value:we(dt),"onUpdate:value":de[13]||(de[13]=ut=>sr(dt)?dt.value=ut:null),options:et(we(nt)?.pages||[],we(nt),!0),placeholder:we(l)("select"),"label-field":"label","value-field":"value",filterable:"",size:"small",class:"!w-[300px]"},null,8,["value","options","placeholder"])]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Pm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu-item-groups"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/menu-item-groups",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Lm=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu-item-groups"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/menu-item-groups/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Bm=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["menu-item-groups"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-item-groups/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Fm,defineComponent:Om}=await se("vue"),{unref:Yt,resolveComponent:Cb,createVNode:il,toDisplayString:Oo,createTextVNode:us,withCtx:hl,renderList:qm,Fragment:cc,openBlock:ps,createElementBlock:dc,createElementVNode:ni,createBlock:oi,normalizeClass:Rm,isRef:jm}=await se("vue"),{ref:rr}=await se("vue"),Km={class:"flex items-center justify-between"},Ym={class:"flex flex-col"},Gm={class:"text-sm font-bold"},Hm=Om({__name:"ItemGroups",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,tr:l}=Ze(),o=Fm(u,"show"),{data:a,isPending:t}=vd(),{mutate:s,isPending:K}=Pm(),{mutate:Z,isPending:ce}=Lm(),{mutate:q,isPending:ye}=Bm(),O=Wl(),V=rr(!1),d=rr(null),E=rr(null),ae=rr({name:"",description:""}),i={name:[{required:!0,message:e("fillRequired")}]},me=M=>{d.value=le.cloneDeep(M),ae.value=le.cloneDeep(M||{name:"",description:""}),V.value=!0},z=async()=>(E.value?.validate(async M=>{if(!M){const S={name:ae.value.name,description:ae.value.description};d.value?Z({id:d.value.id,...S},{onSuccess:()=>{V.value=!1}}):s(S,{onSuccess:()=>{V.value=!1}})}}),!1),W=async M=>{O.warning({title:e("confirm"),content:e("confirmDeleteMenuItemGroup"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{M.id&&q({id:M.id})}})};return(M,S)=>{const I=re,L=Be,A=wl,j=Ar,v=R,B=vl,C=Ra,w=Aa,N=ao,U=Xl,Q=xa,J=ga,F=va;return ps(),dc(cc,null,[il(U,{show:o.value,"onUpdate:show":S[2]||(S[2]=h=>o.value=h),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Yt(e)("menuItemGroups")},{"header-extra":hl(()=>[il(A,{align:"center"},{default:hl(()=>[il(L,{secondary:"",size:"small",type:"primary",disabled:Yt(t),onClick:S[0]||(S[0]=h=>me(null))},{default:hl(()=>[il(I,{icon:"carbon:add-alt",class:"mr-1"}),us(" "+Oo(Yt(e)("add")),1)]),_:1},8,["disabled"]),il(L,{secondary:"",size:"small",type:"error",disabled:Yt(t),onClick:S[1]||(S[1]=h=>o.value=!1)},{default:hl(()=>[il(I,{icon:"carbon:close",class:"mr-1"}),us(" "+Oo(Yt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:hl(()=>[il(N,{show:Yt(t)},{default:hl(()=>[Yt(a)?.length?(ps(),oi(C,{key:0,style:{"max-height":"400px"}},{default:hl(()=>[(ps(!0),dc(cc,null,qm(Yt(a),h=>(ps(),oi(B,{key:h.id,embedded:"",size:"small",class:"mb-2"},{default:hl(()=>[ni("div",Km,[ni("div",Ym,[ni("span",Gm,Oo(Yt(l)(h.name)),1),il(j,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:hl(()=>[us(Oo(Yt(l)(h.description)),1)]),_:2},1024)]),il(A,null,{default:hl(()=>[il(L,{size:"small",type:"warning",secondary:"",onClick:f=>me(h)},{default:hl(()=>[il(v,null,{default:hl(()=>[il(I,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),il(L,{size:"small",type:"error",secondary:"",onClick:f=>W(h)},{default:hl(()=>[il(v,null,{default:hl(()=>[il(I,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(ps(),oi(B,{key:1,size:"large",class:Rm(`mb-2 !border-dashed !border-2 ${Yt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:hl(()=>[il(w,{description:Yt(e)("noMenuItemGroupAdded")},{icon:hl(()=>[il(v,null,{default:hl(()=>[il(I,{icon:"carbon:tag-group"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),il(U,{show:Yt(V),"onUpdate:show":S[5]||(S[5]=h=>jm(V)?V.value=h:null),loading:Yt(K)||Yt(ce)||Yt(ye),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Yt(d)?Yt(e)("editMenuItemGroup"):Yt(e)("addMenuItemGroup"),"positive-text":Yt(e)("validate"),"negative-text":Yt(e)("cancel"),onPositiveClick:z,onNegativeClick:S[6]||(S[6]=h=>V.value=!1)},{default:hl(()=>[il(F,{ref_key:"formRef",ref:E,model:Yt(ae),rules:i,"show-require-mark":!1,size:"medium",class:"my-5"},{default:hl(()=>[il(J,{"show-label":!1,path:"name"},{default:hl(()=>[il(Q,{modelValue:Yt(ae).name,"onUpdate:modelValue":S[3]||(S[3]=h=>Yt(ae).name=h),placeholder:Yt(e)("name"),class:"w-full",sync:""},{label:hl(()=>[us(Oo(Yt(e)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),il(J,{"show-label":!1,path:"description"},{default:hl(()=>[il(Q,{modelValue:Yt(ae).description,"onUpdate:modelValue":S[4]||(S[4]=h=>Yt(ae).description=h),placeholder:Yt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:hl(()=>[us(Oo(Yt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{useModel:uc,mergeModels:Qm,defineComponent:Wm}=await se("vue"),{unref:el,resolveComponent:Ib,createVNode:Vn,withCtx:vo,isRef:Xm,Fragment:Jm,openBlock:ms,createElementBlock:Zm,createCommentVNode:ir,createBlock:cr}=await se("vue"),{ref:fs,computed:_s,onMounted:ef,h:vs}=await se("vue"),tf=Wm({__name:"ContentFormItems",props:{"content-type":{default:Hl.CONTENT_MODEL},"content-typeModifiers":{},"content-id":{default:void 0},"content-idModifiers":{}},emits:Qm(["update"],["update:content-type","update:content-id"]),setup(u,{emit:e}){const{t:n}=ke(),{tr:l,mergeArrays:o}=Ze(),{contentTypes:a,extractItemTitle:t}=Ws(),{data:s}=lo(),K=e,Z=uc(u,"content-type"),ce=uc(u,"content-id"),q=fs(),ye=fs([]),O=fs([]),{mutateAsync:V,isPending:d}=Ki(),{mutateAsync:E,isPending:ae}=Ad(),i=_s(()=>d.value||ae.value),me=async(h,f)=>{if(!h.length){O.value=[];return}O.value=await V({query:h,contentModelId:f})},z=_s(()=>o(ye.value,O.value,"id")),W=fs([]),M=fs([]),{mutateAsync:S,isPending:I}=Ed(),{mutateAsync:L,isPending:A}=Ud(),j=_s(()=>A.value||I.value),v=async h=>{if(!h.length){M.value=[];return}M.value=await L(h)},B=_s(()=>o(W.value,M.value,"id")),{categories:C}=Gi(),{tags:w}=Gi();ef(async()=>{const h=await S({ids:ce.value?[ce.value]:[]});h&&(W.value=o(W.value,h,"id"));const f=await E({ids:ce.value?[ce.value]:[]});f&&(ye.value=o(ye.value,f,"id"),q.value=ye.value.find(D=>D.id===ce.value)?.contentModelId)});const N=h=>vs("span",{},{default:()=>`${l(h.name)}`}),U=h=>vs("span",{},{default:()=>`${l(h.title)}`}),Q=h=>vs("span",{},{default:()=>`${l(h.name)}`}),J=h=>vs("span",{},{default:()=>l(h.title)}),F=h=>_s(()=>vs("span",{},{default:()=>t(h,s.value?.find(f=>f.id===h.contentModelId))}));return(h,f)=>{const D=Ka,xe=Fn,$=ya;return ms(),cr($,{"x-gap":"12",span:24},{default:vo(()=>[Vn(xe,{span:8,label:el(n)("contentType"),path:"contentType"},{default:vo(()=>[Vn(D,{value:Z.value,"onUpdate:value":[f[0]||(f[0]=m=>Z.value=m),f[1]||(f[1]=()=>ce.value=void 0)],options:el(a)||[],placeholder:el(n)("select"),"label-field":"label","value-field":"value",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Z.value===el(Hl).CONTENT_MODEL?(ms(),Zm(Jm,{key:0},[Vn(xe,{span:8,label:el(n)("contentModel")},{default:vo(()=>[Vn(D,{value:el(q),"onUpdate:value":f[2]||(f[2]=m=>Xm(q)?q.value=m:null),options:el(s),placeholder:el(n)("search"),"render-label":J,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Vn(xe,{span:8,label:el(n)("item"),path:"contentId"},{default:vo(()=>[Vn(D,{value:ce.value,"onUpdate:value":[f[3]||(f[3]=m=>ce.value=m),f[5]||(f[5]=(m,r)=>K("update",m,r,Z.value))],options:el(z)||[],placeholder:el(n)("search"),"render-label":m=>F(m).value,loading:el(i),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:f[4]||(f[4]=m=>me(m,el(q)))},null,8,["value","options","placeholder","render-label","loading"])]),_:1},8,["label"])],64)):ir("",!0),Z.value===el(Hl).NEWS_ARTICLE?(ms(),cr(xe,{key:1,span:16,label:el(n)("newsArticle"),path:"contentId"},{default:vo(()=>[Vn(D,{value:ce.value,"onUpdate:value":[f[6]||(f[6]=m=>ce.value=m),f[7]||(f[7]=(m,r)=>K("update",m,r,Z.value))],options:el(B)||[],placeholder:el(n)("search"),"render-label":U,loading:el(j),"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:v},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"])):ir("",!0),Z.value===el(Hl).NEWS_CATEGORY?(ms(),cr(xe,{key:2,span:16,label:el(n)("newsCategory"),path:"contentId"},{default:vo(()=>[Vn(D,{value:ce.value,"onUpdate:value":[f[8]||(f[8]=m=>ce.value=m),f[9]||(f[9]=(m,r)=>K("update",m,r,Z.value))],options:el(C)||[],placeholder:el(n)("select"),"render-label":N,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):ir("",!0),Z.value===el(Hl).NEWS_TAG?(ms(),cr(xe,{key:3,span:16,label:el(n)("newsTag"),path:"contentId"},{default:vo(()=>[Vn(D,{value:ce.value,"onUpdate:value":[f[10]||(f[10]=m=>ce.value=m),f[11]||(f[11]=(m,r)=>K("update",m,r,Z.value))],options:el(w)||[],placeholder:el(n)("select"),"render-label":Q,"label-field":"name","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])):ir("",!0)]),_:1})}}}),lf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu","items"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/menu/items",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},af=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu","items"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/menu/items/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},nf=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["menu","items"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu/items/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},of=()=>{const{request:u}=Fe(),e=Ge();return Na(async n=>{const l=await u({method:"put",url:"/menu/items/position",data:n});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{useModel:sf,defineComponent:rf}=await se("vue"),{unref:g,resolveComponent:si,createVNode:ee,withCtx:be,toDisplayString:cl,createTextVNode:ma,openBlock:ll,createBlock:Sn,createCommentVNode:yo,isRef:dr,renderList:ur,Fragment:sn,createElementBlock:fa,normalizeClass:go,withModifiers:ys,createElementVNode:Kl}=await se("vue"),cf={key:0},df={class:"flex items-center"},uf={class:"flex flex-col"},pf={class:"text-sm font-bold"},mf={key:0,class:"text-sm"},ff={class:"text-xs font-normal"},_f={class:"text-xs my-1"},vf={class:"flex items-center"},yf={class:"flex flex-col"},gf={class:"text-sm font-bold"},hf={class:"text-xs font-normal"},bf={key:0,class:"mt-4"},kf={class:"my-8"},wf={class:"flex items-center justify-between"},xf={class:"flex flex-col"},$f={class:"text-sm font-bold"},Cf={class:"text-xs font-normal"},If={class:"flex items-center"},Vf={key:0},Sf={key:1},Ef={key:2},{storeToRefs:Uf}=await se("pinia"),{ref:Va,watch:Mf,computed:gs,h:pc}=await se("vue"),Tf=rf({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e,locale:n}=ke(),{extractItemTitle:l}=Ws(),{tr:o,pickByTheme:a}=Ze(),{isLightTheme:t}=Uf(To()),{data:s,isPending:K}=Pi(),{data:Z}=lo(),{data:ce,isPending:q}=vd(),{data:ye,isFetching:O,refetch:V}=md({enabled:!1}),{mutate:d,isPending:E}=lf(),{mutate:ae,isPending:i}=af(),{mutate:me,isPending:z}=nf(),{mutate:W}=of(),M=qe(),S=Wl(),I=sf(u,"modelValue"),L=Va([]),A=Va([]),j=Va(""),v=Va();let B=Va(!0);Mf(()=>O.value,H=>{H||(B.value=!1)});const C=gs(()=>{if(!j.value)return L.value;const H=L.value.filter(b=>b.title.toLowerCase().includes(j.value.toLowerCase())||b.description?.toLowerCase().includes(j.value.toLowerCase())||b.children.some(p=>p.title.toLowerCase().includes(j.value.toLowerCase())||p.description?.toLowerCase().includes(j.value.toLowerCase())));return v.value&&v.value.focus(),H}),w=async()=>{await V(),L.value=ye.value?.filter(H=>!H.parentId&&H.menuId===I.value?.id)||[];for(let H=0;H<L.value.length;H++)L.value[H].children=ye.value?.filter(b=>b.parentId===L.value[H].id&&b.menuId===I.value?.id)||[];A.value=ye.value?.filter(H=>H.menuId!==I.value?.id)||[]};w();const N=Va(24),U=Va(1),Q=H=>{N.value=H},J={title:"",path:"/",url:"https://",description:"",isActive:!0,isVisible:!0,color:"",icon:"",position:0,targetType:ca.PAGE_LINK,menuItemGroupId:void 0,sectionKey:void 0,pageId:void 0,contentType:Hl.CONTENT_MODEL,contentId:void 0},F=Va(null),h=Va(!1),f=Va(!1),D=Va(null),xe=Va(null),$=Va(J),m=gs(()=>{const H={title:[{required:!0,message:e("fillRequired")}]};return $.value.targetType===ca.PAGE_LINK?(H.pageId=[{required:!0,message:e("fillRequired")}],H.path=[{required:!0,message:e("fillRequired")}]):$.value.targetType===ca.EXTERNAL_LINK?H.url=[{required:!0,message:e("fillRequired")}]:$.value.targetType===ca.CONTENT_LINK&&(H.contentId=[{required:!0,message:e("fillRequired")}],H.contentType=[{required:!0,message:e("fillRequired")}]),H}),r=gs(()=>s.value?.find(H=>H.id==$.value.pageId)?.slug||""),{data:x,isPending:ie}=gu({queryKey:["pages",r],queryFn:async()=>{const{request:H}=Fe(),b=await H({url:`/pages/${r.value}`});return b.success&&b.result.data?b.result.data:null},enabled:gs(()=>!!r.value)}),P=gs(()=>x.value?.sections?.map(H=>{const rt=(x.value?.sections?.filter(Ce=>Ce.id===H.id)?.map(Ce=>Ce.pivot?.createdAt||Ce.pivot?.updatedAt||"")?.sort((Ce,nt)=>new Date(Ce).getTime()-new Date(nt).getTime())||[]).indexOf(H.pivot?.createdAt||H.pivot?.updatedAt||"");return{label:H.pivot?.linkId=="default"?o(H.title):o(H.title)+" ("+(rt+1)+")",value:H.slug+"__"+H.pivot?.linkId}})||[]),ge=(H,b=null)=>{D.value=le.cloneDeep(H),F.value=b,H?($.value=le.cloneDeep(H),h.value=!0):($.value=le.cloneDeep(J),A.value.length>0?f.value=!0:h.value=!0)},De=async H=>{S.warning({title:e("confirm"),content:H.parentId?e("confirmDeleteMenuSubItem"):e("confirmDeleteMenuItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{H.id&&me({id:H.id})}})},ne=async H=>{d({title:H.title,path:H.path,url:H.url,description:H.description,isActive:!0,isVisible:!0,color:H.color,icon:H.icon,position:H.position,targetType:H.targetType,parentId:F.value,menuId:I.value?.id,sectionKey:H.sectionKey,menuItemGroupId:H.menuItemGroupId,pageId:H.pageId},{onSuccess(){w(),f.value=!1}})},ue=async()=>(xe.value?.validate(async H=>{if(!H){const b={title:$.value.title,path:$.value.path,url:$.value.url,description:$.value.description,isActive:$.value.isActive,isVisible:$.value.isVisible,color:$.value.color,icon:$.value.icon,position:$.value.position,targetType:$.value.targetType,parentId:F.value,menuId:I.value?.id,sectionKey:$.value.sectionKey,menuItemGroupId:$.value.menuItemGroupId,pageId:$.value.pageId,contentId:$.value.contentId,contentType:$.value.contentType};D.value?D.value.title!==$.value.title&&L.value.findIndex(p=>p.title==$.value.title)>-1?M.error(e("sameMenuItemTitleMessage")):ae({id:D.value.id,...b},{onSuccess(){w()}}):L.value.findIndex(p=>p.title==$.value.title)>-1?M.error(e("sameMenuItemTitleMessage")):d(b,{onSuccess(){w()}}),h.value=!1}}),!1),xt=async(H,b)=>{W({items:b},{onSuccess(){w()}})},Vt=H=>pc("span",{},{default:()=>o(H.title)}),$e=H=>pc("span",{},{default:()=>o(H.name)}),Ye=H=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(H),Ve=H=>{if(H.targetType==ca.EXTERNAL_LINK)return H.url;if(H.targetType==ca.PAGE_LINK)return H.path;if(H.targetType==ca.CONTENT_LINK)switch(H.contentType){case Hl.CONTENT_MODEL:return e("contentModel");case Hl.NEWS_CATEGORY:return e("newsCategory");case Hl.NEWS_ARTICLE:return e("newsArticle");case Hl.NEWS_TAG:return e("newsTag")}return""},et=async(H,b,p)=>{if(!o($.value.title))switch(p){case Hl.CONTENT_MODEL:$.value.title=l(b,Z.value?.find(rt=>rt.id===b.contentModelId));break;case Hl.NEWS_ARTICLE:$.value.title=b.title;break;case Hl.NEWS_CATEGORY:case Hl.NEWS_TAG:$.value.title=b.name;break}};return(H,b)=>{const p=re,rt=wl,Ce=Da,nt=$d,dt=xd,Y=Ia,he=ja,ve=vl,Ee=si("Draggable"),at=so,Vl=oo,Ya=Do,Ol=Aa,da=za,fe=Ra,de=Xl,He=xa,Ie=ga,Xe=Nr,gt=Fn,Ut=Tr,Re=Mr,Sl=ya,tn=si("IconPicker"),aa=si("color-picker"),na=Ka,hn=va;return ll(),fa(sn,null,[ee(Ce,{to:"#alt-action"},{default:be(()=>[ee(rt,{align:"center"},{default:be(()=>[g(C).length?(ll(),Sn(g(Be),{key:0,secondary:"",type:"primary",onClick:b[0]||(b[0]=T=>ge(null))},{icon:be(()=>[ee(g(R),{size:"18"},{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[ma(" "+cl(g(e)("addMenuItem")),1)]),_:1})):yo("",!0)]),_:1})]),_:1}),ee(nt,{class:"mt-2 mb-5",onBack:b[2]||(b[2]=T=>I.value=null)},{title:be(()=>[ma(cl(g(o)(I.value?.title)),1)]),back:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:be(()=>[ee(g(Zt),{ref_key:"searchInputRef",ref:v,value:g(j),"onUpdate:value":b[1]||(b[1]=T=>dr(j)?j.value=T:null),clearable:!0,placeholder:g(e)("search")},{suffix:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:search"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),ee(da,{appear:"",name:"slide-fade"},{default:be(()=>[Kl("section",null,[g(B)?(ll(),fa("section",cf,[(ll(),fa(sn,null,ur(7,T=>ee(dt,{key:T,height:"50px",width:"100%",sharp:!1,class:"mb-2"})),64))])):(ll(),fa(sn,{key:1},[g(C)&&g(C).length?(ll(),fa(sn,{key:0},[ee(Ee,{list:g(L),onChange:b[3]||(b[3]=T=>xt(T,g(L)))},{default:be(()=>[(ll(!0),fa(sn,null,ur(g(C).slice((g(U)-1)*g(N),g(U)*g(N)),T=>(ll(),Sn(ve,{key:T.id,embedded:"",size:"small",class:"mb-1"},{default:be(()=>[ee(Vl,{"default-expanded-names":T.children.length>0?["1"]:[],"display-directive":"show"},{"header-extra":be(({collapsed:yl})=>[ee(rt,{align:"center"},{default:be(()=>[ee(Y,{size:"small",bordered:!1,type:T.isActive?"success":"error"},{default:be(()=>[ma(cl(T.isActive?g(e)("published"):g(e)("unpublished")),1)]),_:2},1032,["type"]),ee(Y,{size:"small",bordered:!1,type:T.isVisible?"info":"warning"},{default:be(()=>[ma(cl(T.isVisible?g(e)("visible"):g(e)("hidden")),1)]),_:2},1032,["type"]),ee(he,{vertical:"",class:go(["!mx-0",g(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ee(g(Be),{size:"small",type:"primary",secondary:"",onClick:ys(ql=>ge(T),["stop"])},{default:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ee(g(Be),{size:"small",type:"error",secondary:"",onClick:ys(ql=>De(T),["stop"])},{default:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),ee(g(Be),{size:"small",type:"info",secondary:"",onClick:ys(ql=>ge(null,T.id),["stop"])},{icon:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:category"})]),_:1})]),default:be(()=>[ma(" "+cl(g(e)("subMenuItem"))+" ",1),ee(Y,{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:be(()=>[ma(cl(T.children.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),b[27]||(b[27]=Kl("div",{class:"w-6"},null,-1)),ee(g(R),null,{default:be(()=>[yl?(ll(),Sn(p,{key:0,icon:"fa-solid:chevron-left"})):(ll(),Sn(p,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:be(()=>[...b[28]||(b[28]=[Kl("span",null,null,-1)])]),default:be(()=>[ee(at,{name:"1"},{header:be(()=>[Kl("div",df,[ee(g(R),{size:"21",class:"cursor-move mr-4"},{default:be(()=>[ee(p,{icon:"fa-solid:grip-lines"})]),_:1}),ee(he,{vertical:"",class:go(g(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Kl("div",uf,[Kl("div",null,[Kl("span",pf,cl(g(o)(T.title)),1),T.group?(ll(),fa("span",mf," Â ("+cl(g(o)(T.group?.name))+") ",1)):yo("",!0)]),Kl("small",ff,cl(Ve(T)),1)])])]),default:be(()=>[T.description?(ll(),fa(sn,{key:0},[ee(he,{class:go([g(a)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Kl("div",_f,cl(g(o)(T.description)),1)],64)):yo("",!0),T.children.length?(ll(),fa(sn,{key:1},[ee(he,{class:go([g(a)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),ee(Ee,{list:T.children,onChange:yl=>xt(yl,T.children)},{default:be(()=>[(ll(!0),fa(sn,null,ur(T.children,yl=>(ll(),Sn(ve,{key:yl.id,size:"small",class:"mb-1"},{header:be(()=>[Kl("div",vf,[ee(g(R),{size:"21",class:"cursor-move mr-4"},{default:be(()=>[ee(p,{icon:"fa-solid:grip-lines"})]),_:1}),ee(he,{vertical:"",class:go(g(a)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Kl("div",yf,[Kl("span",gf,cl(g(o)(yl.title)),1),Kl("small",hf,cl(Ve(yl)),1)])])]),"header-extra":be(()=>[ee(rt,{align:"center"},{default:be(()=>[ee(Y,{size:"small",bordered:!1,type:yl.isActive?"success":"error"},{default:be(()=>[ma(cl(yl.isActive?g(e)("published"):g(e)("unpublished")),1)]),_:2},1032,["type"]),ee(Y,{size:"small",bordered:!1,type:yl.isVisible?"info":"warning"},{default:be(()=>[ma(cl(yl.isVisible?g(e)("visible"):g(e)("hidden")),1)]),_:2},1032,["type"]),ee(he,{vertical:"",class:go(["!mx-0",g(a)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),ee(g(Be),{size:"small",type:"primary",secondary:"",onClick:ys(ql=>ge(yl,T.id),["stop"])},{default:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),ee(g(Be),{size:"small",type:"error",secondary:"",onClick:ys(ql=>De(yl),["stop"])},{default:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):yo("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),ee(Ya,{page:g(U),"onUpdate:page":b[4]||(b[4]=T=>dr(U)?U.value=T:null),class:"mt-5 justify-end","show-size-picker":"","page-size":g(N),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(g(L).length/g(N)),"onUpdate:pageSize":Q},{prefix:be(()=>[ma(cl(`${g(L).length} ${g(e)("menuItem_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(ll(),Sn(ve,{key:1,size:"large",class:go(`mb-2 !border-dashed !border-2 ${g(a)("!border-zinc-300","!border-zinc-600")}`)},{default:be(()=>[ee(Ol,{description:g(e)("noMenuItemAvailable")},{icon:be(()=>[ee(g(R),null,{default:be(()=>[g(j)?(ll(),Sn(p,{key:0,icon:"carbon:search"})):(ll(),Sn(p,{key:1,icon:"carbon:menu"}))]),_:1})]),extra:be(()=>[g(j)?yo("",!0):(ll(),fa("div",bf,[ee(g(Be),{size:"small",secondary:"",onClick:b[5]||(b[5]=T=>ge(null))},{icon:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[ma(" "+cl(g(e)("addMenuItem")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))],64))])]),_:1}),ee(de,{show:g(f),"onUpdate:show":b[6]||(b[6]=T=>dr(f)?f.value=T:null),loading:g(E)||g(i)||g(z),preset:"dialog",style:{width:"600px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:g(e)("menuItems"),"positive-text":g(F)?g(e)("createSubMenuItem"):g(e)("createMenuItem"),"negative-text":g(e)("cancel"),onPositiveClick:b[7]||(b[7]=()=>{f.value=!1,h.value=!0}),onNegativeClick:b[8]||(b[8]=T=>f.value=!1)},{default:be(()=>[Kl("section",kf,[ee(fe,{style:{"max-height":"400px"}},{default:be(()=>[(ll(!0),fa(sn,null,ur(g(A),T=>(ll(),Sn(ve,{key:T.id,embedded:"",size:"small",class:"mb-2"},{default:be(()=>[Kl("div",wf,[Kl("div",xf,[Kl("span",$f,cl(g(o)(T.title)),1),Kl("small",Cf,cl(Ve(T)),1)]),ee(g(Be),{size:"small",type:"primary",secondary:"",onClick:yl=>ne(T)},{icon:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:add-alt"})]),_:1})]),default:be(()=>[ma(" "+cl(g(e)("add")),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show","loading","title","positive-text","negative-text"]),ee(de,{show:g(h),"onUpdate:show":b[25]||(b[25]=T=>dr(h)?h.value=T:null),loading:g(E)||g(i)||g(z),preset:"dialog",style:{width:"650px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:g(D)?g(F)?g(e)("editSubMenuItem"):g(e)("editMenuItem"):g(F)?g(A).length?g(e)("createSubMenuItem"):g(e)("addSubMenuItem"):g(A).length?g(e)("createMenuItem"):g(e)("addMenuItem"),"positive-text":g(e)("validate"),"negative-text":g(e)("cancel"),onPositiveClick:ue,onNegativeClick:b[26]||(b[26]=T=>h.value=!1)},{default:be(()=>[ee(hn,{ref_key:"formRef",ref:xe,class:"mt-5",model:g($),rules:g(m),"show-require-mark":!1,size:"medium"},{default:be(()=>[ee(Ie,{"show-label":!1,path:"title"},{default:be(()=>[ee(He,{modelValue:g($).title,"onUpdate:modelValue":b[9]||(b[9]=T=>g($).title=T),placeholder:g(e)("title"),class:"w-full",sync:""},{label:be(()=>[ma(cl(g(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ee(Ie,{"show-label":!1,path:"description"},{default:be(()=>[ee(He,{modelValue:g($).description,"onUpdate:modelValue":b[10]||(b[10]=T=>g($).description=T),placeholder:g(e)("description"),type:"textarea",class:"w-full",rows:2,sync:""},{label:be(()=>[ma(cl(g(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),ee(Sl,{"x-gap":"12",span:24},{default:be(()=>[ee(gt,{span:5,label:g(e)("position"),path:"position"},{default:be(()=>[ee(Xe,{value:g($).position,"onUpdate:value":b[11]||(b[11]=T=>g($).position=T),placeholder:g(e)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),ee(gt,{span:10,label:g(e)("publication"),path:"isActive"},{default:be(()=>[ee(Re,{value:g($).isActive,"onUpdate:value":b[12]||(b[12]=T=>g($).isActive=T),name:"isActive",class:"w-full"},{default:be(()=>[ee(Ut,{value:!1,label:g(e)("unpublished"),class:"w-[50%]"},null,8,["label"]),ee(Ut,{value:!0,label:g(e)("published"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),ee(gt,{span:9,label:g(e)("visibility"),path:"isVisible"},{default:be(()=>[ee(Re,{value:g($).isVisible,"onUpdate:value":b[13]||(b[13]=T=>g($).isVisible=T),name:"isVisible",class:"w-full"},{default:be(()=>[ee(Ut,{value:!1,label:g(e)("hidden"),class:"w-[50%]"},null,8,["label"]),ee(Ut,{value:!0,label:g(e)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ee(he,{class:"!my-2"}),ee(Sl,{"x-gap":"12",span:24},{default:be(()=>[ee(gt,{span:10,label:g(e)("icon"),path:"icon"},{default:be(()=>[ee(tn,{modelValue:g($).icon,"onUpdate:modelValue":b[14]||(b[14]=T=>g($).icon=T),placeholder:g(e)("icon"),"icons-list-placeholder":g(e)("enterIconNameInSearchBar"),"search-placeholder":g(e)("search"),"empty-text":g(e)("noIconsFound"),"selector-height":32,"icon-library":"all",clearable:""},null,8,["modelValue","placeholder","icons-list-placeholder","search-placeholder","empty-text"])]),_:1},8,["label"]),ee(gt,{span:4,label:g(e)("color"),path:"color"},{default:be(()=>[Kl("div",If,[g($).color?(ll(),fa(sn,{key:0},[ee(g(Be),{text:"",type:"error",style:{"font-size":"21px"},onClick:b[15]||(b[15]=T=>g($).color="")},{default:be(()=>[ee(g(R),null,{default:be(()=>[ee(p,{icon:"carbon:trash-can"})]),_:1})]),_:1}),ee(he,{vertical:""})],64)):yo("",!0),ee(aa,{"pure-color":g($).color,"onUpdate:pureColor":b[16]||(b[16]=T=>g($).color=T),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:g(t)?"white":"black",lang:g(n)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"]),ee(gt,{span:10,label:g(e)("group"),path:"menuItemGroupId"},{default:be(()=>[ee(na,{value:g($).menuItemGroupId,"onUpdate:value":b[17]||(b[17]=T=>g($).menuItemGroupId=T),options:g(ce),placeholder:g(e)("group"),"render-label":$e,loading:g(q),"label-field":"name","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ee(gt,{span:24,label:g(e)("targetType"),path:"targetType"},{default:be(()=>[ee(Re,{value:g($).targetType,"onUpdate:value":b[18]||(b[18]=T=>g($).targetType=T),class:"w-full",size:"small"},{default:be(()=>[ee(Ut,{value:g(ca).PAGE_LINK,class:"w-[33.33%]"},{default:be(()=>[ma(cl(g(e)("pageLink")),1)]),_:1},8,["value"]),ee(Ut,{value:g(ca).CONTENT_LINK,class:"w-[33.33%]"},{default:be(()=>[ma(cl(g(e)("contentLink")),1)]),_:1},8,["value"]),ee(Ut,{value:g(ca).EXTERNAL_LINK,class:"w-[33.33%]"},{default:be(()=>[ma(cl(g(e)("externalLink")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),ee(da,{appear:"",name:"slide-fade"},{default:be(()=>[g($).targetType===g(ca).PAGE_LINK?(ll(),fa("section",Vf,[ee(Sl,{"x-gap":"12",span:24},{default:be(()=>[ee(gt,{span:12,label:g(e)("page"),path:"pageId"},{default:be(()=>[ee(na,{value:g($).pageId,"onUpdate:value":b[19]||(b[19]=T=>g($).pageId=T),options:g(s)||[],placeholder:g(e)("selectPage"),"render-label":Vt,loading:g(K),"label-field":"title","value-field":"id",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","loading"])]),_:1},8,["label"]),ee(gt,{span:12,label:g(e)("section"),path:"sectionKey"},{default:be(()=>[ee(na,{value:g($).sectionKey,"onUpdate:value":b[20]||(b[20]=T=>g($).sectionKey=T),options:g(P),placeholder:g(e)("selectSection"),disabled:!g($).pageId,loading:g(ie),"label-field":"label","value-field":"value",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1}),ee(Ie,{label:g(e)("path"),path:"path"},{default:be(()=>[ee(g(Zt),{value:g($).path,"onUpdate:value":b[21]||(b[21]=T=>g($).path=T),placeholder:g(e)("path"),"allow-input":Ye,class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):g($).targetType===g(ca).CONTENT_LINK?(ll(),fa("section",Sf,[ee(tf,{"content-type":g($).contentType,"onUpdate:contentType":b[22]||(b[22]=T=>g($).contentType=T),"content-id":g($).contentId,"onUpdate:contentId":b[23]||(b[23]=T=>g($).contentId=T),onUpdate:et},null,8,["content-type","content-id"])])):g($).targetType===g(ca).EXTERNAL_LINK?(ll(),fa("section",Ef,[ee(Ie,{label:g(e)("url"),path:"url"},{default:be(()=>[ee(g(Zt),{value:g($).url,"onUpdate:value":b[24]||(b[24]=T=>g($).url=T),placeholder:g(e)("url"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])])):yo("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Df=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu-locations"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/menu-locations",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Nf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menu-locations"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/menu-locations/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},zf=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["menu-locations"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menu-locations/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{useModel:Af,defineComponent:Pf}=await se("vue"),{unref:Gt,resolveComponent:Vb,createVNode:tl,withCtx:dl,toDisplayString:hs,createTextVNode:pr,renderList:Lf,Fragment:mc,openBlock:bs,createElementBlock:fc,createElementVNode:ri,createBlock:ii,normalizeClass:Bf,isRef:Ff}=await se("vue"),{ref:mr}=await se("vue"),Of={class:"flex items-center justify-between"},qf={class:"flex flex-col"},Rf={class:"text-sm font-bold"},jf=Pf({__name:"Locations",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:["update:show"],setup(u){const{t:e}=ke(),{pickByTheme:n,tr:l,formatKey:o}=Ze(),a=Af(u,"show"),{data:t,isPending:s}=yd(),{mutate:K,isPending:Z}=Df(),{mutate:ce,isPending:q}=Nf(),{mutate:ye,isPending:O}=zf(),V=Wl(),d=mr(!1),E=mr(null),ae=mr(null),i=mr({name:"",description:""}),me={name:[{required:!0,message:e("fillRequired")}]},z=S=>{E.value=le.cloneDeep(S),i.value=le.cloneDeep(S||{name:"",description:""}),d.value=!0},W=async()=>(ae.value?.validate(async S=>{if(!S){const I={name:i.value.name,description:i.value.description};E.value?ce({id:E.value.id,data:I},{onSuccess:()=>{d.value=!1}}):K(I,{onSuccess:()=>{d.value=!1}})}}),!1),M=async S=>{V.warning({title:e("confirm"),content:e("confirmDeleteMenuLocation"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{S.id&&ye({id:S.id})}})};return(S,I)=>{const L=re,A=R,j=Be,v=wl,B=Ar,C=vl,w=Ra,N=Aa,U=ao,Q=Xl,J=Zt,F=ga,h=xa,f=va;return bs(),fc(mc,null,[tl(Q,{show:a.value,"onUpdate:show":I[2]||(I[2]=D=>a.value=D),preset:"card",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:Gt(e)("menuLocations")},{"header-extra":dl(()=>[tl(v,{align:"center"},{default:dl(()=>[tl(j,{secondary:"",size:"small",type:"primary",disabled:Gt(s),onClick:I[0]||(I[0]=D=>z(null))},{default:dl(()=>[tl(A,{class:"mr-1"},{default:dl(()=>[tl(L,{icon:"carbon:add-alt"})]),_:1}),pr(" "+hs(Gt(e)("add")),1)]),_:1},8,["disabled"]),tl(j,{secondary:"",size:"small",type:"error",disabled:Gt(s),onClick:I[1]||(I[1]=D=>a.value=!1)},{default:dl(()=>[tl(A,{class:"mr-1"},{default:dl(()=>[tl(L,{icon:"carbon:close"})]),_:1}),pr(" "+hs(Gt(e)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:dl(()=>[tl(U,{show:Gt(s)},{default:dl(()=>[Gt(t)?.length?(bs(),ii(w,{key:0,style:{"max-height":"400px"}},{default:dl(()=>[(bs(!0),fc(mc,null,Lf(Gt(t),D=>(bs(),ii(C,{key:D.id,embedded:"",size:"small",class:"mb-2"},{default:dl(()=>[ri("div",Of,[ri("div",qf,[ri("span",Rf,hs(D.name),1),tl(B,{"line-clamp":"1",style:{"max-width":"240px"},class:"text-xs font-normal"},{default:dl(()=>[pr(hs(Gt(l)(D.description)),1)]),_:2},1024)]),tl(v,null,{default:dl(()=>[tl(j,{size:"small",type:"warning",secondary:"",onClick:xe=>z(D)},{default:dl(()=>[tl(A,null,{default:dl(()=>[tl(L,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),tl(j,{size:"small",type:"error",secondary:"",onClick:xe=>M(D)},{default:dl(()=>[tl(A,null,{default:dl(()=>[tl(L,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(bs(),ii(C,{key:1,size:"large",class:Bf(`mb-2 !border-dashed !border-2 ${Gt(n)("!border-zinc-300","!border-zinc-600")}`)},{default:dl(()=>[tl(N,{description:Gt(e)("noMenuLocationAdded")},{icon:dl(()=>[tl(A,null,{default:dl(()=>[tl(L,{icon:"carbon:template"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),tl(Q,{show:Gt(d),"onUpdate:show":I[5]||(I[5]=D=>Ff(d)?d.value=D:null),loading:Gt(Z)||Gt(q)||Gt(O),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Gt(E)?Gt(e)("editMenuLocation"):Gt(e)("addMenuLocation"),"positive-text":Gt(e)("validate"),"negative-text":Gt(e)("cancel"),onPositiveClick:W,onNegativeClick:I[6]||(I[6]=D=>d.value=!1)},{default:dl(()=>[tl(f,{ref_key:"formRef",ref:ae,model:Gt(i),rules:me,"show-require-mark":!1,size:"medium",class:"my-5"},{default:dl(()=>[tl(F,{label:Gt(e)("key"),path:"name"},{default:dl(()=>[tl(J,{value:Gt(i).name,placeholder:Gt(e)("key"),class:"w-full","onUpdate:value":I[3]||(I[3]=D=>Gt(i).name=Gt(o)(D))},null,8,["value","placeholder"])]),_:1},8,["label"]),tl(F,{"show-label":!1,path:"description"},{default:dl(()=>[tl(h,{modelValue:Gt(i).description,"onUpdate:modelValue":I[4]||(I[4]=D=>Gt(i).description=D),placeholder:Gt(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:dl(()=>[pr(hs(Gt(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Kf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menus"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/menus",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Yf=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["menus"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/menus/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Gf=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["menus"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/menus/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:Hf}=await se("vue"),{unref:We,resolveComponent:Sb,createVNode:Et,withCtx:Mt,toDisplayString:rn,createTextVNode:Kn,openBlock:Qa,createBlock:qo,createCommentVNode:fr,renderList:Qf,Fragment:ci,createElementBlock:ks,withModifiers:di,normalizeClass:ui,createElementVNode:ws,isRef:_r}=await se("vue"),Wf={key:2},Xf={class:"flex items-center"},Jf={class:"flex flex-col"},Zf={key:0,class:"text-xs font-normal"},e_={class:"mt-4"},{ref:En,watch:t_}=await se("vue"),{defineStore:l_}=await se("pinia"),a_=Hf({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,isInDevMode:o,formatKey:a}=Ze(),{data:t}=yd(),{data:s}=Xd(),{mutate:K,isPending:Z}=Gf(),{mutate:ce,isPending:q}=Kf(),{mutate:ye,isPending:O}=Yf(),V=Wl(),d=En(24),E=En(1),ae=C=>{d.value=C},i={name:"",title:"",description:"",menuLocationId:void 0},me=En(!1),z=En(!1),W=En(!1),M=En(null),S=En(i),I={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},L=En(null),A=C=>{L.value=le.cloneDeep(C),S.value=le.cloneDeep(C||i),me.value=!0},j=async()=>(M.value?.validate(async C=>{if(!C){const w={name:S.value.name,title:S.value.title,description:S.value.description,menuLocationId:S.value.menuLocationId};L.value?ye({id:L.value.id,...w},{onSuccess:()=>{}}):ce(w,{onSuccess:()=>{}}),me.value=!1}}),!1),v=async C=>{V.warning({title:e("confirm"),content:e("confirmDeleteMenu"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{C.id&&K({id:C.id})}})},B=l_("menus-management",()=>({itemsMenu:En(null)}))();return t_(()=>S.value.title,C=>{L.value||S.value.name.length<=21&&(S.value.name=Md(n(C),{trim:!0,lower:!0,strict:!0}))}),(C,w)=>{const N=re,U=R,Q=Be,J=wl,F=Da,h=ja,f=vl,D=Do,xe=Aa,$=za,m=xa,r=ga,x=Zt,ie=Fn,P=Ka,ge=ya,De=va,ne=Xl;return Qa(),ks(ci,null,[We(B).itemsMenu?fr("",!0):(Qa(),qo(F,{key:0,to:"#alt-action"},{default:Mt(()=>[Et(J,{align:"center"},{default:Mt(()=>[We(o)?(Qa(),qo(Q,{key:0,type:"success",secondary:"",onClick:w[0]||(w[0]=ue=>z.value=!0)},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(N,{icon:"carbon:template"})]),_:1})]),default:Mt(()=>[Kn(" "+rn(We(e)("locations")),1)]),_:1})):fr("",!0),Et(Q,{type:"warning",secondary:"",onClick:w[1]||(w[1]=ue=>W.value=!0)},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(N,{icon:"carbon:tag-group"})]),_:1})]),default:Mt(()=>[Kn(" "+rn(We(e)("groups")),1)]),_:1}),We(s)&&We(s).length?(Qa(),qo(Q,{key:1,type:"primary",secondary:"",onClick:w[2]||(w[2]=ue=>A(null))},{icon:Mt(()=>[Et(U,{size:"18"},{default:Mt(()=>[Et(N,{icon:"carbon:add-alt"})]),_:1})]),default:Mt(()=>[Kn(" "+rn(We(e)("addMenu")),1)]),_:1})):fr("",!0)]),_:1})]),_:1})),We(B).itemsMenu?(Qa(),qo(Tf,{key:1,modelValue:We(B).itemsMenu,"onUpdate:modelValue":w[3]||(w[3]=ue=>We(B).itemsMenu=ue)},null,8,["modelValue"])):(Qa(),ks("section",Wf,[Et($,{appear:"",name:"slide-fade"},{default:Mt(()=>[ws("section",null,[We(s)&&We(s).length?(Qa(),ks(ci,{key:0},[(Qa(!0),ks(ci,null,Qf(We(s).slice((We(E)-1)*We(d),We(E)*We(d)),ue=>(Qa(),qo(f,{key:ue.id,embedded:"",size:"small",class:"mb-2"},{header:Mt(()=>[ws("div",Xf,[Et(J,null,{default:Mt(()=>[Et(Q,{size:"small",type:"primary",secondary:"",onClick:di(xt=>A(ue),["stop"])},{default:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(N,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Et(Q,{size:"small",type:"error",secondary:"",onClick:di(xt=>v(ue),["stop"])},{default:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(N,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024),Et(h,{vertical:"",class:ui(We(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),ws("div",Jf,[ws("span",{class:ui(`${ue.location?"text-sm":"text-base"} font-bold`)},rn(We(n)(ue.title)),3),ue.location?(Qa(),ks("small",Zf,rn(ue.location?.name),1)):fr("",!0)])])]),"header-extra":Mt(()=>[Et(Q,{size:"small",type:"primary",secondary:"",onClick:di(xt=>We(B).itemsMenu=ue,["stop"])},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(N,{icon:"carbon:arrow-right"})]),_:1})]),default:Mt(()=>[Kn(" "+rn(We(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),Et(D,{page:We(E),"onUpdate:page":w[4]||(w[4]=ue=>_r(E)?E.value=ue:null),class:"mt-5 justify-end","show-size-picker":"","page-size":We(d),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(We(s).length/We(d)),"onUpdate:pageSize":ae},{prefix:Mt(()=>[Kn(rn(`${We(s).length} ${We(e)("menu_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Qa(),qo(f,{key:1,size:"large",class:ui(`mb-2 !border-dashed !border-2 ${We(l)("!border-zinc-300","!border-zinc-600")}`)},{default:Mt(()=>[Et(xe,{description:We(e)("noMenuAvailable")},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(N,{icon:"carbon:model-alt"})]),_:1})]),extra:Mt(()=>[ws("div",e_,[Et(Q,{size:"small",onClick:w[5]||(w[5]=ue=>A(null))},{icon:Mt(()=>[Et(U,null,{default:Mt(()=>[Et(N,{icon:"carbon:add-alt"})]),_:1})]),default:Mt(()=>[Kn(" "+rn(We(e)("addMenu")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),Et(ne,{show:We(me),"onUpdate:show":w[10]||(w[10]=ue=>_r(me)?me.value=ue:null),loading:We(q)||We(O)||We(Z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:We(L)?We(e)("editMenu"):We(e)("addMenu"),"positive-text":We(e)("validate"),"negative-text":We(e)("cancel"),onPositiveClick:j,onNegativeClick:w[11]||(w[11]=ue=>me.value=!1)},{default:Mt(()=>[Et(De,{ref_key:"formRef",ref:M,model:We(S),rules:I,"show-require-mark":!1,size:"medium",class:"my-5"},{default:Mt(()=>[Et(r,{"show-label":!1,path:"title"},{default:Mt(()=>[Et(m,{modelValue:We(S).title,"onUpdate:modelValue":w[6]||(w[6]=ue=>We(S).title=ue),placeholder:We(e)("title"),class:"w-full",sync:""},{label:Mt(()=>[Kn(rn(We(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Et(r,{"show-label":!1,path:"description"},{default:Mt(()=>[Et(m,{modelValue:We(S).description,"onUpdate:modelValue":w[7]||(w[7]=ue=>We(S).description=ue),placeholder:We(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Mt(()=>[Kn(rn(We(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Et(ge,{"x-gap":"12",span:24},{default:Mt(()=>[Et(ie,{span:12,label:We(e)("key"),path:"name"},{default:Mt(()=>[Et(x,{value:We(S).name,placeholder:We(e)("key"),class:"w-full","onUpdate:value":w[8]||(w[8]=ue=>We(S).name=We(a)(ue))},null,8,["value","placeholder"])]),_:1},8,["label"]),Et(ie,{span:12,label:We(e)("location"),path:"menuLocationId"},{default:Mt(()=>[Et(P,{value:We(S).menuLocationId,"onUpdate:value":w[9]||(w[9]=ue=>We(S).menuLocationId=ue),options:We(t),placeholder:We(e)("location"),"value-field":"id","label-field":"name",filterable:"",clearable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Et(jf,{show:We(z),"onUpdate:show":w[12]||(w[12]=ue=>_r(z)?z.value=ue:null)},null,8,["show"]),Et(Hm,{show:We(W),"onUpdate:show":w[13]||(w[13]=ue=>_r(W)?W.value=ue:null)},null,8,["show"])]))],64)}}}),n_="/creopse/assets/video-thumbnail-Bl6wKKLs.svg";var eo=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(eo||{}),Ta=(u=>(u.SELF_HOSTED="self-hosted",u.YOUTUBE="youtube",u))(Ta||{});const o_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["video-categories"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/video-categories",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},s_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["video-categories"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/video-categories/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},r_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["video-categories"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/video-categories/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},i_=()=>{const{request:u}=Fe(),e=Ge();return Na(async n=>{const l=await u({method:"put",url:"/video-categories/position",data:n});if(l.failure&&l.error)throw new Error(l.error);return l.result.data},{onMutate:()=>e.start(),onSettled:()=>e.finish()})},{defineComponent:c_}=await se("vue"),{unref:G,isRef:vr,createVNode:Ue,resolveComponent:_c,withCtx:Ae,toDisplayString:Yl,createTextVNode:qa,openBlock:Zl,createBlock:cn,createCommentVNode:ho,renderList:vc,Fragment:bo,createElementBlock:Yn,normalizeClass:ko,withModifiers:xs,createElementVNode:Sa,normalizeStyle:d_}=await se("vue"),u_={class:"flex items-center"},p_={class:"flex flex-col"},m_={class:"text-sm font-bold"},f_={class:"text-xs font-normal"},__={class:"text-xs my-1"},v_={class:"flex items-center"},y_={class:"flex flex-col"},g_={class:"text-sm font-bold"},h_={class:"text-xs font-normal"},b_={key:0,class:"mt-4"},k_={class:"flex items-center"},{storeToRefs:w_}=await se("pinia"),{inject:x_,ref:dn,computed:yc,watch:$_}=await se("vue"),C_="categories",I_=c_({__name:"Categories",setup(u){const e=Ge(),n=qe(),l=Wl(),{tr:o,fileUrl:a,pickByTheme:t}=Ze(),{t:s,locale:K}=ke(),{data:Z,isPending:ce,refetch:q}=Jd(),{mutate:ye,isPending:O}=r_(),{mutate:V,isPending:d}=s_(),{mutate:E,isPending:ae}=o_(),{mutate:i}=i_(),{isLightTheme:me}=w_(To()),z=x_("appConfig"),W=dn(""),M=dn(),S=yc(()=>{if(!W.value)return I.value;const $=I.value.filter(m=>m.name.toLowerCase().includes(W.value.toLowerCase())||m.description?.toLowerCase().includes(W.value.toLowerCase())||m.children?.some(r=>r.name.toLowerCase().includes(W.value.toLowerCase())||r.description?.toLowerCase().includes(W.value.toLowerCase())));return M.value&&M.value.focus(),$}),I=yc(()=>{const $=Z.value?.filter(m=>!m.parentId)||[];for(let m=0;m<$.length;m++)$[m].children=Z.value?.filter(r=>r.parentId===$[m].id);return $});$_(()=>ce.value||ae.value||d.value||O.value,$=>{$?e.start():e.finish()});const L=dn(24),A=dn(1),j=$=>{L.value=$},v=dn(null),B=dn(!1),C=dn(null),w=dn(null),N=dn({name:"",description:"",isActive:!0,position:0,image:"",color:""}),U={name:[{required:!0,message:s("fillRequired")}]},Q=($,m=null)=>{C.value=le.cloneDeep($),$?N.value=le.cloneDeep($):N.value={name:"",description:"",isActive:!0,position:0,image:"",color:""},v.value=m,B.value=!0},J=async $=>{l.warning({title:s("confirm"),content:$.parentId?s("confirmDeleteSubCategory"):s("confirmDeleteCategory"),positiveText:s("yes"),negativeText:s("no"),onPositiveClick:async()=>{$.id&&ye({id:$.id})}})},F=async()=>(w.value?.validate(async $=>{if(!$){const m={name:N.value.name,description:N.value.description,isActive:N.value.isActive,position:N.value.position,image:N.value.image,color:N.value.color,parentId:v.value};C.value?C.value.name!==N.value.name&&(Z.value||[]).findIndex(r=>r.name==N.value.name)>-1?n.error(s("sameCategoryNameMessage")):V({id:C.value.id,...m}):(Z.value||[]).findIndex(r=>r.name==N.value.name)>-1?n.error(s("sameCategoryNameMessage")):E(m),B.value=!1}}),!1),h=async($,m)=>{i({items:m},{onSuccess(){q()}})},f=dn(!1),D=async $=>{N.value.image=$,f.value=!1},xe=()=>{N.value.image=""};return($,m)=>{const r=re,x=Qs,ie=Da,P=ja,ge=wl,De=vl,ne=_c("Draggable"),ue=so,xt=oo,Vt=Do,$e=Aa,Ye=ao,Ve=za,et=to,H=xa,b=ga,p=Nr,rt=Fn,Ce=_c("color-picker"),nt=ya,dt=qi,Y=Bi,he=va,ve=Xl;return Zl(),Yn(bo,null,[Ue(ie,{to:"#search-category-action"},{default:Ae(()=>[Ue(x,{class:"!w-[250px]"},{default:Ae(()=>[Ue(G(Zt),{ref_key:"searchInputRef",ref:M,value:G(W),"onUpdate:value":m[0]||(m[0]=Ee=>vr(W)?W.value=Ee:null),clearable:!0,placeholder:G(s)("searchCategory")},null,8,["value","placeholder"]),Ue(G(Be),{type:"primary",secondary:""},{icon:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})]),_:1}),Ue(ie,{to:"#add-category-action"},{default:Ae(()=>[G(S).length?(Zl(),cn(G(Be),{key:0,type:"primary",secondary:"",onClick:m[1]||(m[1]=Ee=>Q(null))},{icon:Ae(()=>[Ue(G(R),{size:"18"},{default:Ae(()=>[Ue(r,{icon:"carbon:add-alt"})]),_:1})]),default:Ae(()=>[qa(" "+Yl(G(s)("addCategory")),1)]),_:1})):ho("",!0)]),_:1}),Ue(Ve,{name:"slide-fade",appear:""},{default:Ae(()=>[Sa("section",null,[Ue(Ye,{show:G(ce)},{default:Ae(()=>[G(S)&&G(S).length?(Zl(),Yn(bo,{key:0},[Ue(ne,{list:G(I),onChange:m[2]||(m[2]=Ee=>h(Ee,G(I)))},{default:Ae(()=>[(Zl(!0),Yn(bo,null,vc(G(S).slice((G(A)-1)*G(L),G(A)*G(L)),Ee=>(Zl(),cn(De,{key:Ee.id,embedded:"",size:"small",class:"mb-1"},{default:Ae(()=>[Ue(xt,{"default-expanded-names":Ee.children?.length?["1"]:[],"display-directive":"show"},{"header-extra":Ae(({collapsed:at})=>[Ue(ge,{align:"center"},{default:Ae(()=>[Ue(G(Ia),{size:"small",bordered:!1,type:Ee.isActive?"success":"error"},{default:Ae(()=>[qa(Yl(Ee.isActive?G(s)("visible"):G(s)("hidden")),1)]),_:2},1032,["type"]),Ue(P,{vertical:"",class:ko(["!mx-0",G(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(G(Be),{size:"small",type:"primary",secondary:"",onClick:xs(Vl=>Q(Ee),["stop"])},{default:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"error",secondary:"",onClick:xs(Vl=>J(Ee),["stop"])},{default:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"info",secondary:"",onClick:xs(Vl=>Q(null,Ee.id),["stop"])},{icon:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:category"})]),_:1})]),default:Ae(()=>[qa(" "+Yl(G(s)("subCategory"))+" ",1),Ue(G(Ia),{size:"small",bordered:!1,type:"primary",class:"ml-1"},{default:Ae(()=>[qa(Yl(Ee.children?.length),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024),m[16]||(m[16]=Sa("div",{class:"w-6"},null,-1)),Ue(G(R),null,{default:Ae(()=>[at?(Zl(),cn(r,{key:0,icon:"fa-solid:chevron-left"})):(Zl(),cn(r,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:Ae(()=>[...m[17]||(m[17]=[Sa("span",null,null,-1)])]),default:Ae(()=>[Ue(ue,{name:"1"},{header:Ae(()=>[Sa("div",u_,[Ue(G(R),{size:"21",class:"cursor-move mr-4"},{default:Ae(()=>[Ue(r,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(P,{vertical:"",class:ko(G(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Sa("div",p_,[Sa("span",m_,Yl(G(o)(Ee.name))+"Â ("+Yl(Ee.itemsCount)+"Â "+Yl(G(s)("video_s"))+") ",1),Sa("small",f_,Yl(Ee.slug),1)])])]),default:Ae(()=>[Ee.description?(Zl(),Yn(bo,{key:0},[Ue(P,{class:ko([G(t)("!bg-zinc-300","!bg-slate-500"),"!my-0 !h-0.5"])},null,8,["class"]),Sa("div",__,Yl(G(o)(Ee.description)),1)],64)):ho("",!0),Ee.children?.length?(Zl(),Yn(bo,{key:1},[Ue(P,{class:ko([G(t)("!bg-zinc-300","!bg-slate-500"),"!mt-0 !mb-2 !h-0.5"])},null,8,["class"]),Ue(ne,{list:Ee.children,onChange:at=>h(at,Ee.children||[])},{default:Ae(()=>[(Zl(!0),Yn(bo,null,vc(Ee.children,at=>(Zl(),cn(De,{key:at.id,size:"small",class:"mb-1"},{header:Ae(()=>[Sa("div",v_,[Ue(G(R),{size:"21",class:"cursor-move mr-4"},{default:Ae(()=>[Ue(r,{icon:"fa-solid:grip-lines"})]),_:1}),Ue(P,{vertical:"",class:ko(G(t)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Sa("div",y_,[Sa("span",g_,Yl(G(o)(at.name)),1),Sa("small",h_,Yl(at.slug),1)])])]),"header-extra":Ae(()=>[Ue(ge,{align:"center"},{default:Ae(()=>[Ue(G(Ia),{size:"small",bordered:!1,type:at.isActive?"success":"error"},{default:Ae(()=>[qa(Yl(at.isActive?G(s)("visible"):G(s)("hidden")),1)]),_:2},1032,["type"]),Ue(P,{vertical:"",class:ko(["!mx-0",G(t)("!bg-zinc-400","!bg-slate-500")])},null,8,["class"]),Ue(G(Be),{size:"small",type:"primary",secondary:"",onClick:xs(Vl=>Q(at,Ee.id),["stop"])},{default:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),Ue(G(Be),{size:"small",type:"error",secondary:"",onClick:xs(Vl=>J(at),["stop"])},{default:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["list","onChange"])],64)):ho("",!0)]),_:2},1024)]),_:2},1032,["default-expanded-names"])]),_:2},1024))),128))]),_:1},8,["list"]),Ue(Vt,{page:G(A),"onUpdate:page":m[3]||(m[3]=Ee=>vr(A)?A.value=Ee:null),class:"mt-5 justify-end","show-size-picker":"","page-size":G(L),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(G(I).length/G(L)),"onUpdate:pageSize":j},{prefix:Ae(()=>[qa(Yl(`${G(I).length} ${G(s)("categorie_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Zl(),cn(De,{key:1,size:"large",class:ko(`mb-2 !border-dashed !border-2 ${G(t)("!border-zinc-300","!border-zinc-600")}`)},{default:Ae(()=>[Ue($e,{description:G(s)("noCategoryAvailable")},{icon:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[G(W)?(Zl(),cn(r,{key:0,icon:"carbon:search"})):(Zl(),cn(r,{key:1,icon:"carbon:categories"}))]),_:1})]),extra:Ae(()=>[G(W)?ho("",!0):(Zl(),Yn("div",b_,[Ue(G(Be),{size:"small",secondary:"",onClick:m[4]||(m[4]=Ee=>Q(null))},{icon:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:add-alt"})]),_:1})]),default:Ae(()=>[qa(" "+Yl(G(s)("addCategory")),1)]),_:1})]))]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])])]),_:1}),Ue(et,{show:G(f),"onUpdate:show":m[5]||(m[5]=Ee=>vr(f)?f.value=Ee:null),title:G(s)("selectImage"),"upload-config":{folder:C_,limit:0,maxSize:0,baseUrl:G(z)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:D},null,8,["show","title","upload-config"]),Ue(ve,{show:G(B),"onUpdate:show":m[14]||(m[14]=Ee=>vr(B)?B.value=Ee:null),loading:G(ae)||G(d)||G(O),preset:"dialog",style:{width:"500px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:G(C)?G(v)?G(s)("editSubCategory"):G(s)("editCategory"):G(v)?G(s)("addSubCategory"):G(s)("addCategory"),"positive-text":G(s)("validate"),"negative-text":G(s)("cancel"),onPositiveClick:F,onNegativeClick:m[15]||(m[15]=Ee=>B.value=!1)},{default:Ae(()=>[Ue(he,{ref_key:"formRef",ref:w,class:"mt-5",model:G(N),rules:U,"show-require-mark":!1,size:"medium"},{default:Ae(()=>[Ue(b,{"show-label":!1,path:"name"},{default:Ae(()=>[Ue(H,{modelValue:G(N).name,"onUpdate:modelValue":m[6]||(m[6]=Ee=>G(N).name=Ee),placeholder:G(s)("name"),class:"w-full",sync:""},{label:Ae(()=>[qa(Yl(G(s)("name")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(b,{"show-label":!1,path:"description"},{default:Ae(()=>[Ue(H,{modelValue:G(N).description,"onUpdate:modelValue":m[7]||(m[7]=Ee=>G(N).description=Ee),placeholder:G(s)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:Ae(()=>[qa(Yl(G(s)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),Ue(nt,{"x-gap":"12",span:24},{default:Ae(()=>[Ue(rt,{span:12,label:G(s)("position"),path:"position"},{default:Ae(()=>[Ue(p,{value:G(N).position,"onUpdate:value":m[8]||(m[8]=Ee=>G(N).position=Ee),placeholder:G(s)("position"),class:"w-full",min:0},null,8,["value","placeholder"])]),_:1},8,["label"]),Ue(rt,{span:12,label:G(s)("color"),path:"color"},{default:Ae(()=>[Sa("div",k_,[G(N).color?(Zl(),Yn(bo,{key:0},[Ue(G(Be),{text:"",type:"error",style:{"font-size":"21px"},onClick:m[9]||(m[9]=Ee=>G(N).color="")},{default:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:trash-can"})]),_:1})]),_:1}),Ue(P,{vertical:""})],64)):ho("",!0),Ue(Ce,{"pure-color":G(N).color,"onUpdate:pureColor":m[10]||(m[10]=Ee=>G(N).color=Ee),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:G(me)?"white":"black",lang:G(K)},null,8,["pure-color","theme","lang"])])]),_:1},8,["label"])]),_:1}),Ue(P,{dashed:"",class:"!my-2"}),Ue(nt,{"x-gap":"12",span:24},{default:Ae(()=>[Ue(rt,{span:12,label:G(s)("preview"),path:"image"},{default:Ae(()=>[Ue(ge,{align:"center",justify:"center",style:{height:"100%"}},{default:Ae(()=>[Ue(dt,{class:"cursor-pointer","object-fit":"cover",style:d_("border: 1px dashed "+G(t)("green","white")),size:150,src:G(a)(G(N).image||""),onClick:m[11]||(m[11]=Ee=>f.value=!0)},{default:Ae(()=>[G(N).image?ho("",!0):(Zl(),cn(G(R),{key:0,size:64},{default:Ae(()=>[Ue(r,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),G(N).image?(Zl(),cn(G(Be),{key:0,quaternary:"",onClick:m[12]||(m[12]=Ee=>xe())},{icon:Ae(()=>[Ue(G(R),null,{default:Ae(()=>[Ue(r,{icon:"carbon:trash-can"})]),_:1})]),default:Ae(()=>[qa(" "+Yl(G(s)("clear")),1)]),_:1})):ho("",!0)]),_:1})]),_:1},8,["label"]),Ue(rt,{span:12,label:G(s)("status"),path:"isActive"},{default:Ae(()=>[Ue(Y,{value:G(N).isActive,"onUpdate:value":m[13]||(m[13]=Ee=>G(N).isActive=Ee),size:"small"},{checked:Ae(()=>[qa(Yl(G(s)("visible")),1)]),unchecked:Ae(()=>[qa(Yl(G(s)("hidden")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),V_=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return Na(async o=>{const a=await u({url:"/video-settings",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateSettings"))}})};class S_{id;foreignId;publisherId;title;slug;description;thumbnail;thumbnailUrl;path;url;displayType;source;visible;publishedAt;createdAt;updatedAt;publisher;categories;categoriesCount;constructor(e,n,l=Ta.SELF_HOSTED,o=eo.HORIZONTAL,a,t,s,K,Z,ce,q,ye,O,V,d,E){this.id=t,this.foreignId=ce,this.publisherId=Z,this.title=e,this.slug=K,this.description=q,this.thumbnail=ye,this.thumbnailUrl=O,this.path=n,this.url=s,this.source=l,this.visible=a,this.displayType=o,this.publishedAt=V,this.createdAt=d,this.updatedAt=E}}const E_=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return Na(async()=>{const o=await u({url:"/video-items/youtube/channel-videos",method:"put"});if(o.failure&&o.error)throw new Error(o.error);return o.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:()=>l.success(e("success")),onError:()=>l.error(e("unableToUpdateChannelVideos")),retry:1})},U_=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=Ge(),a=qe();return ft({queryKey:["video-items"],operation:"insert",isPaginated:!0,insertToPage:"first",getItemId:t=>"id"in t&&t.id?t.id:`temp-${crypto.randomUUID()}`,mutationFn:async t=>{o.start();try{const s=await n({method:"post",url:"/video-items",data:Ht(t,["id"])});if(!s.success)throw new Error(s.error||l("anErrorOccurred"));return s.result.data}finally{o.finish()}},mutationOptions:{onSuccess:()=>{a.success(l("success"))},onError:t=>{switch(t?.response?.data?.errorCode){case Lt.FORM_INVALID_DATA:e(t?.response?.data?.data);break;case Lt.REQUEST_PARAMS_MISSING:a.error(l("pleaseProvideApiKeyAndValidVideoUrl"));break;case Lt.REQUEST_DATA_RETRIEVAL_FAILED:a.error(l("videoDataCantBeRetrieve"));break;case Lt.REQUEST_DATA_ALREADY_EXISTS:a.error(l("videoAlreadyExists"));break;default:a.error(l("anErrorOccurred"))}},...u}})},M_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["video-items"],operation:"update",isPaginated:!0,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async a=>{l.start();try{const t=await e({method:"put",url:`/video-items/${a.id}`,data:Ht(a,["id"])});if(!t.success)throw new Error(t.error||n("anErrorOccurred"));return t.result.data}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},T_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["video-items"],operation:"remove",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{l.start();const t=await e({method:"delete",url:`/video-items/force/${a}`});if(l.finish(),!t.success)throw new Error(t.error);return t.result?.data},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},D_=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["video-items"],operation:"batch",isPaginated:!0,allowEmptyPages:!1,getItemId:a=>{if(a instanceof S_){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("VideoItem ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:Object.keys(a).filter(t=>a[t])}),mutationFn:async a=>{l.start();const t=Object.keys(a).filter(s=>a[s]);try{for(const s of t)await e({method:"delete",url:`/video-items/force/${s}`});return t}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},{defineComponent:N_}=await se("vue"),{unref:bl,resolveComponent:Eb,createVNode:al,withCtx:ul,toDisplayString:wo,createTextVNode:gc,createElementVNode:xo,normalizeClass:z_,Fragment:hc,openBlock:bc,createElementBlock:kc,createCommentVNode:A_}=await se("vue"),{ref:wc,computed:xc}=await se("vue"),P_=N_({__name:"Settings",setup(u){const{t:e,locale:n}=ke(),l=gd({enabled:!1}),{mutate:o,isPending:a}=V_(),{mutate:t,isPending:s}=E_(),K=wc({youtubeChannelId:"",youtubeApiKey:"",youtubeChannelVideosAutoUpdate:"",youtubeLastChannelVideosUpdate:""}),Z=wc(K.value),ce=xc(()=>le.isEqual(K.value,Z.value)),q=async()=>{o(K.value,{onSuccess:()=>ye()})},ye=async()=>{await l.refetch(),l.data.value?.forEach(d=>{K.value[d.key]!=null&&(K.value[d.key]=d.value)}),Z.value=le.cloneDeep(K.value)};ye();const O=()=>{t(void 0,{onSuccess:()=>ye()})},V=xc(()=>!!(a.value||s.value||l.isPending.value));return(d,E)=>{const ae=re,i=R,me=Be,z=Da,W=Zt,M=wl,S=vl,I=en,L=Bi,A=ya,j=za;return bc(),kc(hc,null,[al(z,{to:"#save-settings-action"},{default:ul(()=>[al(me,{loading:bl(V),disabled:bl(ce),type:"primary",secondary:"",onClick:q},{icon:ul(()=>[al(i,null,{default:ul(()=>[al(ae,{icon:"carbon:save"})]),_:1})]),default:ul(()=>[gc(" "+wo(bl(e)("saveSettings")),1)]),_:1},8,["loading","disabled"])]),_:1}),al(j,{name:"slide-fade",appear:""},{default:ul(()=>[al(S,{hoverable:"",embedded:""},{header:ul(()=>[gc(wo(bl(e)("youtube")),1)]),default:ul(()=>[al(A,{cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen","x-gap":12,"y-gap":12},{default:ul(()=>[al(I,null,{default:ul(()=>[al(S,{class:"w-full h-full",size:"small"},{default:ul(()=>[al(M,{align:"center",justify:"space-between"},{default:ul(()=>[xo("span",null,wo(bl(e)("apiKey")),1),al(W,{value:bl(K).youtubeApiKey,"onUpdate:value":E[0]||(E[0]=v=>bl(K).youtubeApiKey=v),type:"password",class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),al(I,null,{default:ul(()=>[al(S,{class:"w-full h-full py-1.5",size:"small"},{default:ul(()=>[al(M,{align:"center",justify:"space-between"},{default:ul(()=>[xo("span",null,wo(bl(e)("autoUpdateChannelVideos")),1),al(L,{value:bl(K).youtubeChannelVideosAutoUpdate,"onUpdate:value":E[1]||(E[1]=v=>bl(K).youtubeChannelVideosAutoUpdate=v),"checked-value":"1","unchecked-value":"0",size:"small"},{checked:ul(()=>[...E[3]||(E[3]=[xo("div",{class:"w-6"},null,-1)])]),unchecked:ul(()=>[...E[4]||(E[4]=[xo("div",{class:"w-6"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),bl(K).youtubeChannelVideosAutoUpdate=="1"?(bc(),kc(hc,{key:0},[al(I,null,{default:ul(()=>[al(S,{class:"w-full h-full",size:"small"},{default:ul(()=>[al(M,{align:"center",justify:"space-between"},{default:ul(()=>[xo("span",null,wo(bl(e)("channelId")),1),al(W,{value:bl(K).youtubeChannelId,"onUpdate:value":E[2]||(E[2]=v=>bl(K).youtubeChannelId=v),class:"w-full"},null,8,["value"])]),_:1})]),_:1})]),_:1}),al(I,null,{default:ul(()=>[al(S,{class:"w-full h-full",size:"small"},{default:ul(()=>[al(M,{align:"center",justify:"space-between"},{default:ul(()=>[xo("span",null,wo(bl(e)("lastUpdate")),1),xo("b",null,wo(bl(K).youtubeLastChannelVideosUpdate?bl(Bn)(bl(K).youtubeLastChannelVideosUpdate,{locale:bl(n),inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:"DD MMMM YYYY HH:mm"}):bl(e)("never")),1),al(me,{strong:"",circle:"",secondary:"",type:"primary",title:bl(e)("refresh"),disabled:bl(V),onClick:O},{icon:ul(()=>[al(i,null,{default:ul(()=>[al(ae,{icon:"carbon:restart",class:z_({"animate-spin":bl(V)})},null,8,["class"])]),_:1})]),_:1},8,["title","disabled"])]),_:1})]),_:1})]),_:1})],64)):A_("",!0)]),_:1})]),_:1})]),_:1})],64)}}}),L_=()=>{const{t:u}=ke(),e=[{label:u("horizontal"),value:eo.HORIZONTAL,tagType:"info"},{label:u("vertical"),value:eo.VERTICAL,tagType:"warning"}];return{getVideoDisplayTypeTagType:o=>e.find(a=>a.value===o)?.tagType||"default",getVideoDisplayTypeLabel:o=>e.find(a=>a.value===o)?.label,videoDisplayTypes:e}},{unref:B_}=await se("vue"),{defineComponent:F_}=await se("vue"),{unref:k,vShow:$s,createElementVNode:_a,withDirectives:Cs,toDisplayString:Ul,createTextVNode:Pl,resolveComponent:Ub,isRef:Un,withCtx:Me,createVNode:pe,openBlock:Ml,createElementBlock:ha,createCommentVNode:yr,normalizeClass:O_,renderList:$c,Fragment:Ro,withModifiers:q_,createBlock:jo,normalizeStyle:Cc}=await se("vue"),R_={id:"save-settings-action"},j_={id:"add-category-action"},K_={class:"flex items-center gap-3"},Y_={id:"search-category-action"},G_={key:0,class:"w-full flex items-center justify-between mt-2"},H_={class:"flex items-center gap-3"},Q_={key:0,class:"mt-12"},W_={key:1,class:"mt-12"},X_={key:2},J_={key:0},Z_=["onClick"],ev={class:"absolute top-0 left-0 w-full h-full bg-black opacity-30 flex items-center justify-center"},tv={class:"absolute bottom-0 right-0 p-3 w-full"},lv={class:"text-center text-dimgray text-sm"},av={key:1,class:"flex items-center justify-center"},nv={class:"mt-5"},ov={class:"w-full flex flex-gap-8 items-center justify-start"},sv=["src"],rv={key:1,id:"video",autoplay:"",controls:"",style:{width:"100%"}},iv=["src"],{inject:cv,ref:Tl,computed:gr,watch:dv,h:Ic}=await se("vue"),{defineStore:uv}=await se("pinia"),pv=F_({__name:"index",setup(u){const{t:e}=ke(),{tr:n,fileUrl:l,pickByTheme:o,getVideoThumbnail:a}=Ze(),{videoDisplayTypes:t}=L_(),{orderedCategories:s}=Zd(),K=gd(),{mutate:Z,isPending:ce}=T_(),{mutate:q,isPending:ye}=D_(),{mutate:O,isPending:V}=U_(),{mutate:d,isPending:E}=M_(),ae=qe(),i=Wl(),me=cv("appConfig"),z=Tl(""),W=bu(z,500),M=Tl(null),S=Tl([]),I=Tl([]),L=uv("videos-management-store",()=>({currentTab:Tl("all")}))(),A=Tl(0),j=Tl(24),v=Tl(1),B=gr(()=>({pageSize:j.value,query:W.value,source:L.currentTab,page:v.value})),C=b=>{v.value=b,U()},w=b=>{j.value=b,U()},{data:N,refetch:U,isPending:Q}=eu(B);dv(()=>N.value,b=>{S.value=b?.videoItems||[],A.value=b?.meta?.total||0,v.value=b?.meta?.currentPage||1},{deep:!0,immediate:!0});const J=Tl(!1),F=Tl(null),h=Tl(null),f=Tl({title:"",description:"",visible:!0,source:Ta.SELF_HOSTED,displayType:eo.HORIZONTAL,thumbnail:"",path:""}),D=gr(()=>({title:[{required:f.value.source==Ta.SELF_HOSTED,message:e("fillRequired")}],path:[{required:!0,message:e("fillRequired")}]})),xe=b=>{F.value=le.cloneDeep(b),b?(f.value=le.cloneDeep(b),I.value=b.categories?.map(p=>p.id)??[]):(f.value={title:"",description:"",visible:!0,source:L.currentTab=="youtube"?Ta.YOUTUBE:Ta.SELF_HOSTED,displayType:eo.HORIZONTAL,thumbnail:"",path:""},I.value=[]),J.value=!0},$=async b=>{i.warning({title:e("confirm"),content:e("confirmDeleteVideo"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{Z(b)}})},m=async()=>(h.value?.validate(async b=>{if(!b){const p={title:f.value.title,description:f.value.description,visible:f.value.visible,source:f.value.source,displayType:f.value.displayType,thumbnail:f.value.thumbnail,path:f.value.path,categories:I.value};F.value?(p.id=F.value.id,d(p)):O(p),J.value=!1}}),!1),r=Tl(!1),x=Tl(!1),ie=Tl(""),P=Tl(""),ge=Tl("classic"),De=b=>{ie.value=n(b.title)??e("video"),P.value=l(b.path),ge.value=b.source==Ta.YOUTUBE?"youtube":"classic",x.value=!0},ne=Tl(!1),ue=Tl(!1),xt=Tl(Ql()),Vt=Tl({}),$e=gr(()=>{let b=0;for(const p in Vt.value)Vt.value[p]&&b++;return b});function Ye(){Vt.value={},U()}const Ve=async()=>($e.value?i.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[$e.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:()=>{q(Vt.value,{onSuccess:()=>{Vt.value={}}})}}):ae.warning(e("noItemSelected")),!1),et=b=>[b.parentId?Ic(R,{style:{verticalAlign:"-0.15em",marginRight:"4px"}},{default:()=>Ic(re,{icon:"mdi:arrow-right"})}):null,`${n(b.name)}`],H=gr(()=>!!(V.value||E.value||ce.value||ye.value||K.isPending.value));return(b,p)=>{const rt=no,Ce=Be,nt=Da,dt=wd,Y=Zt,he=Qs,ve=Fi,Ee=hu,at=Ia,Vl=wl,Ya=Ar,Ol=vl,da=za,fe=en,de=ya,He=Do,Ie=ao,Xe=Aa,gt=ga,Ut=Fn,Re=Ka,Sl=xa,tn=es,aa=va,na=Xl,hn=to;return Ml(),ha(Ro,null,[pe(nt,{to:"#alt-action"},{default:Me(()=>[Cs(_a("div",R_,null,512),[[$s,k(L).currentTab=="settings"]]),Cs(_a("div",j_,null,512),[[$s,k(L).currentTab=="categories"]]),Cs(_a("div",K_,[pe(rt,{checked:k(ue),"onUpdate:checked":[p[0]||(p[0]=T=>Un(ue)?ue.value=T:null),p[1]||(p[1]=T=>{for(const yl of k(S))yl.id&&(k(Vt)[yl.id]=T);xt.value=("uuidv4"in b?b.uuidv4:B_(Ql))()})]},{default:Me(()=>[Pl(Ul(k(e)("selectAll")),1)]),_:1},8,["checked"]),pe(Ce,{type:"primary",secondary:"",loading:k(V),disabled:k(H),onClick:p[2]||(p[2]=T=>xe(null))},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:video-add"})]),_:1})]),default:Me(()=>[Pl(" "+Ul(k(e)("addVideo")),1)]),_:1},8,["loading","disabled"])],512),[[$s,["all","self-hosted","youtube"].includes(k(L).currentTab)]])]),_:1}),_a("section",{class:O_(`absolute top-0 left-0 z-100 px-6.5 py-1 w-full transition-opacity duration-300 ${k(o)("bg-white","bg-zinc-800")}`)},[pe(ve,{value:k(L).currentTab,"onUpdate:value":[p[6]||(p[6]=T=>k(L).currentTab=T),p[7]||(p[7]=()=>k(U)())],type:"card",size:"medium"},{suffix:Me(()=>[Cs(_a("div",null,[pe(he,{class:"!w-[250px]"},{default:Me(()=>[pe(Y,{ref_key:"searchInputRef",ref:M,value:k(z),"onUpdate:value":[p[3]||(p[3]=T=>Un(z)?z.value=T:null),p[4]||(p[4]=T=>{T||k(U)()})],clearable:!0,placeholder:k(e)("searchVideo")},null,8,["value","placeholder"]),pe(Ce,{type:"primary",secondary:"",onClick:p[5]||(p[5]=T=>k(U)())},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:search"})]),_:1})]),_:1})]),_:1})],512),[[$s,["all","self-hosted","youtube"].includes(k(L).currentTab)]]),Cs(_a("div",Y_,null,512),[[$s,k(L).currentTab=="categories"]])]),default:Me(()=>[pe(dt,{name:"all"},{default:Me(()=>[pe(k(R),{size:"18",class:"mr-1"},{default:Me(()=>[pe(k(re),{icon:"carbon:collapse-all"})]),_:1}),Pl(" "+Ul(k(e)("all_")),1)]),_:1}),pe(dt,{name:k(Ta).SELF_HOSTED},{default:Me(()=>[pe(k(R),{size:"18",class:"mr-1"},{default:Me(()=>[pe(k(re),{icon:"carbon:document-video"})]),_:1}),Pl(" "+Ul(k(e)("selfHosted")),1)]),_:1},8,["name"]),pe(dt,{name:k(Ta).YOUTUBE},{default:Me(()=>[pe(k(R),{size:"18",class:"mr-1"},{default:Me(()=>[pe(k(re),{icon:"carbon:logo-youtube"})]),_:1}),Pl(" "+Ul(k(e)("youtube")),1)]),_:1},8,["name"]),pe(dt,{name:"categories"},{default:Me(()=>[pe(k(R),{size:"18",class:"mr-1"},{default:Me(()=>[pe(k(re),{icon:"carbon:categories"})]),_:1}),Pl(" "+Ul(k(e)("categories")),1)]),_:1}),pe(dt,{name:"settings"},{default:Me(()=>[pe(k(R),{size:"18",class:"mr-1"},{default:Me(()=>[pe(k(re),{icon:"carbon:settings-adjust"})]),_:1}),Pl(" "+Ul(k(e)("settings")),1)]),_:1})]),_:1},8,["value"]),k($e)>0?(Ml(),ha("section",G_,[_a("span",null,Ul(k(e)("nbItemsSelected",[k($e)])),1),_a("section",H_,[pe(Ce,{type:"error",size:"small",loading:k(ye),secondary:"",onClick:Ve},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Pl(" "+Ul(k(e)("delete")),1)]),_:1},8,["loading"]),pe(Ce,{type:"warning",size:"small",secondary:"",onClick:Ye},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:close"})]),_:1})]),default:Me(()=>[Pl(" "+Ul(k(e)("cancelSelection")),1)]),_:1})])])):yr("",!0)],2),k(L).currentTab=="settings"?(Ml(),ha("section",Q_,[pe(P_)])):k(L).currentTab=="categories"?(Ml(),ha("section",W_,[pe(I_)])):(Ml(),ha("section",X_,[pe(da,{name:"slide-fade",appear:""},{default:Me(()=>[pe(Ol,{embedded:"",class:"py-10 mt-6"},{default:Me(()=>[k(S).length&&!k(K).isPending.value?(Ml(),ha("section",J_,[pe(de,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Me(()=>[(Ml(!0),ha(Ro,null,$c(k(S),(T,yl)=>(Ml(),jo(fe,{key:yl},{default:Me(()=>[pe(da,{name:"slide-fade",appear:""},{default:Me(()=>[pe(Ol,{bordered:"",hoverable:""},{cover:Me(()=>[_a("div",{class:"flex items-center justify-center h-full relative cursor-pointer",onClick:ql=>De(T)},[pe(Ee,{load:()=>k(a)(T.path),fallback:T.thumbnailUrl??k(n_),class:"w-full h-[200px] object-cover"},null,8,["load","fallback"]),_a("div",ev,[pe(k(R),{size:72},{default:Me(()=>[pe(k(re),{icon:"carbon:play-outline-filled",class:"text-white"})]),_:1})]),_a("div",tv,[pe(Vl,null,{default:Me(()=>[(Ml(!0),ha(Ro,null,$c(T.categories,ql=>(Ml(),jo(at,{size:"small",bordered:!1,key:ql.id,onClick:q_(()=>{},["stop"])},{default:Me(()=>[Pl(Ul(k(n)(ql.name)),1)]),_:2},1024))),128))]),_:2},1024)])],8,Z_)]),header:Me(()=>[_a("div",lv,[pe(Ya,{"line-clamp":1,"expand-trigger":"click"},{default:Me(()=>[T.id?(Ml(),jo(rt,{key:k(xt),checked:k(Vt)[T.id],"onUpdate:checked":ql=>k(Vt)[T.id]=ql,class:"mr-1"},null,8,["checked","onUpdate:checked"])):yr("",!0),Pl(" "+Ul(k(n)(T.title)),1)]),_:2},1024)])]),action:Me(()=>[pe(Vl,{justify:"space-between",align:"center"},{default:Me(()=>[pe(Vl,null,{default:Me(()=>[pe(at,{bordered:!1,type:T.visible?"success":"error"},{default:Me(()=>[Pl(Ul(T.visible?k(e)("visible"):k(e)("hidden")),1)]),_:2},1032,["type"]),pe(at,{bordered:!1,type:T.displayType==k(eo).HORIZONTAL?"info":"warning"},{default:Me(()=>[Pl(Ul(T.displayType==k(eo).HORIZONTAL?k(e)("horizontal"):k(e)("vertical")),1)]),_:2},1032,["type"])]),_:2},1024),pe(Vl,null,{default:Me(()=>[pe(Ce,{ternary:"",circle:"",title:k(e)("play"),onClick:ql=>De(T)},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:play"})]),_:1})]),_:1},8,["title","onClick"]),T.source!=k(Ta).YOUTUBE?(Ml(),jo(Ce,{key:0,ternary:"",circle:"",title:k(e)("edit"),loading:k(E),onClick:ql=>xe(T)},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","loading","onClick"])):yr("",!0),pe(Ce,{ternary:"",circle:"",title:k(e)("delete"),loading:k(ce),onClick:ql=>$(T)},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),pe(He,{page:k(v),"onUpdate:page":[p[8]||(p[8]=T=>Un(v)?v.value=T:null),C],class:"mt-10 justify-center","show-size-picker":"","page-size":k(j),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(k(A)/k(j)),"onUpdate:pageSize":w},{prefix:Me(()=>[Pl(Ul(`${k(A)} ${k(e)("video_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):k(K).isPending.value?(Ml(),ha("section",av,[pe(Ie,{size:"medium"})])):(Ml(),jo(Xe,{key:2,description:k(e)("noVideo"),class:"my-10"},null,8,["description"]))]),_:1})]),_:1})])),pe(na,{show:k(J),"onUpdate:show":p[21]||(p[21]=T=>Un(J)?J.value=T:null),loading:k(Q),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:k(F)?k(e)("editVideo"):k(e)("addVideo"),"positive-text":k(e)("validate"),"negative-text":k(e)("cancel"),onPositiveClick:m,onNegativeClick:p[22]||(p[22]=T=>J.value=!1)},{default:Me(()=>[_a("div",nv,[pe(aa,{ref_key:"formRef",ref:h,model:k(f),rules:k(D),"show-require-mark":!1,size:"medium"},{default:Me(()=>[pe(gt,{label:k(e)("source"),path:"source"},{default:Me(()=>[pe(rt,{checked:k(f).source,"onUpdate:checked":p[9]||(p[9]=T=>k(f).source=T),"checked-value":k(Ta).YOUTUBE,"unchecked-value":k(Ta).SELF_HOSTED},{default:Me(()=>[Pl(Ul(k(e)("importVideoFromYoutube")),1)]),_:1},8,["checked","checked-value","unchecked-value"])]),_:1},8,["label"]),k(f).source==k(Ta).YOUTUBE?(Ml(),ha(Ro,{key:0},[pe(de,{"x-gap":"12",span:24},{default:Me(()=>[pe(Ut,{span:16,label:k(e)("videoShareLink"),path:"path"},{default:Me(()=>[pe(Y,{value:k(f).path,"onUpdate:value":p[10]||(p[10]=T=>k(f).path=T),placeholder:k(e)("videoShareLink"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),pe(Ut,{span:8,label:k(e)("displayType"),path:"displayType"},{default:Me(()=>[pe(Re,{value:k(f).displayType,"onUpdate:value":p[11]||(p[11]=T=>k(f).displayType=T),placeholder:k(e)("displayType"),options:k(t),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),pe(gt,{label:k(e)("categories"),path:"categories"},{default:Me(()=>[pe(Re,{value:k(I),"onUpdate:value":p[12]||(p[12]=T=>Un(I)?I.value=T:null),"render-label":et,placeholder:k(e)("categories"),options:k(s),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])],64)):(Ml(),ha(Ro,{key:1},[pe(gt,{"show-label":!1,path:"title"},{default:Me(()=>[pe(Sl,{modelValue:k(f).title,"onUpdate:modelValue":p[13]||(p[13]=T=>k(f).title=T),placeholder:k(e)("title"),class:"w-full",sync:""},{label:Me(()=>[Pl(Ul(k(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),pe(gt,{"show-label":!1,path:"description"},{default:Me(()=>[pe(Sl,{modelValue:k(f).description,"onUpdate:modelValue":p[14]||(p[14]=T=>k(f).description=T),placeholder:k(e)("description"),class:"w-full",type:"textarea",sync:""},{label:Me(()=>[Pl(Ul(k(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),pe(gt,{label:k(e)("categories"),path:"categories"},{default:Me(()=>[pe(Re,{value:k(I),"onUpdate:value":p[15]||(p[15]=T=>Un(I)?I.value=T:null),"render-label":et,placeholder:k(e)("categories"),options:k(s),"max-tag-count":"responsive",filterable:"",multiple:"","label-field":"name","value-field":"id",class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"]),pe(de,{"x-gap":"12",span:24},{default:Me(()=>[pe(Ut,{span:16,label:k(e)("content"),path:"path"},{default:Me(()=>[pe(he,null,{default:Me(()=>[pe(Ce,{type:"primary",secondary:"",onClick:p[16]||(p[16]=()=>{r.value=!0})},{default:Me(()=>[Pl(Ul(k(e)("select")),1)]),_:1}),pe(Y,{value:k(f).path?k(Jo)(k(f).path):"",placeholder:k(e)("videoname"),style:{width:"100%"},readonly:""},null,8,["value","placeholder"]),k(f).path?(Ml(),ha(Ro,{key:0},[pe(Ce,{type:"primary",ghost:"",onClick:p[17]||(p[17]=()=>{ie.value=k(e)("video"),P.value=k(l)(k(f).path),ge.value="classic",x.value=!0})},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:play"})]),_:1})]),default:Me(()=>[Pl(" "+Ul(k(e)("play")),1)]),_:1}),pe(Ce,{type:"primary",ghost:"",onClick:p[18]||(p[18]=()=>{k(f).path=""})},{icon:Me(()=>[pe(k(R),null,{default:Me(()=>[pe(k(re),{icon:"carbon:trash-can"})]),_:1})]),default:Me(()=>[Pl(" "+Ul(k(e)("clear")),1)]),_:1})],64)):yr("",!0)]),_:1})]),_:1},8,["label"]),pe(Ut,{span:8,label:k(e)("displayType"),path:"displayType"},{default:Me(()=>[pe(Re,{value:k(f).displayType,"onUpdate:value":p[19]||(p[19]=T=>k(f).displayType=T),placeholder:k(e)("displayType"),options:k(t),class:"w-full"},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1}),pe(gt,{label:k(e)("thumbnail"),path:"thumbnail"},{default:Me(()=>[_a("div",ov,[_a("div",{class:"cursor-pointer w-full h-[150px]",onClick:p[20]||(p[20]=()=>{ne.value=!0})},[k(f).thumbnail?(Ml(),jo(tn,{key:0,"object-fit":"cover","preview-disabled":"",class:"p-1 thumbnail-image",style:Cc("border: 1px dashed "+k(o)("green","white")),src:k(l)(k(f).thumbnail||"")},null,8,["style","src"])):(Ml(),ha("div",{key:1,class:"w-full h-full flex items-center justify-center",style:Cc("border: 1px dashed "+k(o)("green","white"))},[pe(k(R),{size:64},{default:Me(()=>[pe(k(re),{icon:"carbon:image",class:"text-gray-400"})]),_:1})],4))])])]),_:1},8,["label"])],64))]),_:1},8,["model","rules"])])]),_:1},8,["show","loading","title","positive-text","negative-text"]),pe(na,{show:k(x),"onUpdate:show":p[23]||(p[23]=T=>Un(x)?x.value=T:null),preset:"card",style:{width:"600px"},bordered:!1,"mask-closable":!1,"close-on-esc":!1,title:k(ie)},{default:Me(()=>[k(ge)==="youtube"?(Ml(),ha("iframe",{key:0,width:"100%",height:"380",src:k(P),frameborder:"0",allowfullscreen:""},null,8,sv)):(Ml(),ha("video",rv,[_a("source",{src:k(P)},null,8,iv)]))]),_:1},8,["show","title"]),pe(hn,{show:k(r),"onUpdate:show":p[24]||(p[24]=T=>Un(r)?r.value=T:null),title:k(e)("selectVideo"),"display-images":!1,"display-videos":!0,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"videos",limit:0,maxSize:0,baseUrl:k(me)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:p[25]||(p[25]=T=>{k(f).path=T,r.value=!1})},null,8,["show","title","upload-config"]),pe(hn,{show:k(ne),"onUpdate:show":p[26]||(p[26]=T=>Un(ne)?ne.value=T:null),title:k(e)("selectImage"),"display-images":!0,"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"upload-config":{folder:"images",limit:0,maxSize:0,baseUrl:k(me)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:p[27]||(p[27]=T=>{k(f).thumbnail=T,ne.value=!1})},null,8,["show","title","upload-config"])],64)}}}),mv=On(pv,[["__scopeId","data-v-a6ddb663"]]),{t:Qe}=Li.global,Vc=[{key:"maxlength",defaultValue:"",placeholder:Qe("maxInputLength"),isNumber:!0},{key:"minlength",defaultValue:"",placeholder:Qe("minInputLength"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],fv={text:Vc,textarea:Vc,number:[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"1",placeholder:Qe("stepPlaceholder"),isNumber:!0},{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],checkbox:[{key:"checked-value",defaultValue:"",placeholder:Qe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Qe("uncheckedValue")}],"single-select":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"multi-select":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],date:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("dateFormat")}],daterange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("dateFormat")}],datetime:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("datetimeFormat")}],datetimerange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"format",defaultValue:"",placeholder:Qe("datetimeFormat")}],year:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],yearrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],month:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],monthrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],quarter:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],quarterrange:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],week:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-article":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-articles":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"news-category":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-categories":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"news-tag":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"news-tags":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],icon:[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"library",defaultValue:"all",placeholder:Qe("iconLibrary")}],"content-model-item":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],"content-model-items":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")},{key:"max-tag-count",defaultValue:"",placeholder:Qe("maxTagCount")},{key:"max",defaultValue:"",placeholder:Qe("maxSelectCount"),isNumber:!0}],"menu-item-link":[{key:"clearable",defaultValue:"",placeholder:Qe("inputClearable")}],list:[{key:"min",defaultValue:"",placeholder:Qe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Qe("inputType")}],"i18n-list":[{key:"min",defaultValue:"",placeholder:Qe("minItemCount"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxItemCount"),isNumber:!0},{key:"type",defaultValue:"text",placeholder:Qe("inputType")}],switch:[{key:"checked-value",defaultValue:"",placeholder:Qe("checkedValue")},{key:"unchecked-value",defaultValue:"",placeholder:Qe("uncheckedValue")}],slider:[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Qe("sliderStep"),isNumber:!0}],"range-slider":[{key:"min",defaultValue:"",placeholder:Qe("minValue"),isNumber:!0},{key:"max",defaultValue:"",placeholder:Qe("maxValue"),isNumber:!0},{key:"step",defaultValue:"",placeholder:Qe("sliderStep"),isNumber:!0}]},{t:lt}=Li.global,pi=[{type:"group",label:lt("textFields"),key:"text-fields",icon:"carbon:text-font",children:[{label:lt("text"),value:"text"},{label:lt("i18nText"),value:"i18n-text"},{label:lt("textarea"),value:"textarea"},{label:lt("i18nTextarea"),value:"i18n-textarea"},{label:lt("editor"),value:"editor"},{label:lt("i18nEditor"),value:"i18n-editor"}]},{type:"group",label:lt("numericBooleanFields"),key:"numeric-boolean-fields",icon:"carbon:number-0",children:[{label:lt("number"),value:"number"},{label:lt("checkbox"),value:"checkbox"},{label:lt("switch"),value:"switch"},{label:lt("slider"),value:"slider"},{label:lt("rangeSlider"),value:"range-slider"}]},{type:"group",label:lt("selectionFields"),key:"selection-fields",icon:"carbon:checkbox-checked",children:[{label:lt("singleSelect"),value:"single-select"},{label:lt("multiSelect"),value:"multi-select"}]},{type:"group",label:lt("dateFields"),key:"date-fields",icon:"carbon:calendar",children:[{label:lt("date"),value:"date"},{label:lt("daterange"),value:"daterange"},{label:lt("datetime"),value:"datetime"},{label:lt("datetimerange"),value:"datetimerange"},{label:lt("year"),value:"year"},{label:lt("yearrange"),value:"yearrange"},{label:lt("month"),value:"month"},{label:lt("monthrange"),value:"monthrange"},{label:lt("quarter"),value:"quarter"},{label:lt("quarterrange"),value:"quarterrange"},{label:lt("week"),value:"week"}]},{type:"group",label:lt("mediaFields"),key:"media-fields",icon:"carbon:image",children:[{label:lt("image"),value:"image"},{label:lt("gallery"),value:"gallery"},{label:lt("audio"),value:"audio"},{label:lt("video"),value:"video"},{label:lt("document"),value:"document"},{label:lt("file"),value:"file"}]},{type:"group",label:lt("newsContent"),key:"news-content",icon:"carbon:document",children:[{label:lt("newsArticle"),value:"news-article"},{label:lt("newsArticles"),value:"news-articles"},{label:lt("newsCategory"),value:"news-category"},{label:lt("newsCategories"),value:"news-categories"},{label:lt("newsTag"),value:"news-tag"},{label:lt("newsTags"),value:"news-tags"}]},{type:"group",label:lt("iconFields"),key:"icon-fields",icon:"carbon:color-palette",children:[{label:lt("icon"),value:"icon"},{label:lt("icons"),value:"icons"},{label:lt("color"),value:"color"},{label:lt("gradient"),value:"gradient"}]},{type:"group",label:lt("specialContent"),key:"special-content",icon:"carbon:content-view",children:[{label:lt("contentItem"),value:"content-model-item"},{label:lt("contentItems"),value:"content-model-items"},{label:lt("menuItemLink"),value:"menu-item-link"}]},{type:"group",label:lt("listFields"),key:"list-fields",icon:"carbon:list",children:[{label:lt("list"),value:"list"},{label:lt("i18nList"),value:"i18n-list"},{label:lt("albums"),value:"albums"}]}],{useModel:_v,mergeModels:vv,defineComponent:yv}=await se("vue"),{renderList:Is,Fragment:Mn,openBlock:nl,createElementBlock:Ca,unref:Ke,createVNode:it,withCtx:ct,resolveComponent:Sc,createElementVNode:sa,createBlock:Wa,createCommentVNode:mi,toDisplayString:ra,createTextVNode:$o,normalizeClass:gv,isRef:Ec}=await se("vue"),hv={class:"flex items-center"},bv={class:"flex items-center justify-between w-full"},kv={class:"flex items-center justify-between"},wv={class:"text-base font-semibold ml-4"},xv={class:"text-xs text-slate-400"},$v={class:"text-xs text-slate-400"},Cv={class:"text-xs text-slate-400"},Iv={class:"text-xs text-slate-400"},Vv={key:0},Sv={class:"text-xs text-slate-400"},Ev={key:1},Uv={class:"text-xs text-slate-400"},Mv={key:2},Tv={class:"text-xs text-slate-400"},Dv={key:3},Nv={class:"text-xs text-slate-400"},zv={key:0,class:"w-full flex items-center"},Av={class:"w-full flex items-center"},Pv={class:"w-full"},Lv={class:"text-sm"},{storeToRefs:Bv}=await se("pinia"),{ref:Ko,computed:fi,h:Vs,inject:Ss}=await se("vue"),Fv=yv({__name:"Fields",props:vv({type:{},collectionKey:{default:void 0},parentItemIndex:{default:void 0}},{modelValue:{default:[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:e,locale:n}=ke(),{tr:l,formatKey:o,pickByTheme:a}=Ze(),{isLightTheme:t}=Bv(To()),{data:s}=lo(),K=u,Z=_v(u,"modelValue"),ce=j=>{for(const v of pi){const B=v.children.find(C=>C.value===j);if(B)return B.label}return null},q=Ko(!1),ye=Ko(null),O=Ko(null),V=Ko(null),d=Ko(),E=(j,v)=>{O.value=V.value=j,ye.value=v;for(const B of pi)B.children.find(w=>w.value===j)&&(d.value=B.key);q.value=!0},ae=j=>{i(j).value=!i(j).value},i=j=>fi({get:()=>j.value===O.value,set:v=>{v?O.value=j.value:O.value=null}}),me=fi(()=>!O.value||O.value===V.value),z=()=>{O.value&&ye.value!==null&&(Z.value[ye.value].type=O.value),q.value=!1},W=j=>Vs("div",{class:"flex items-center"},[Vs(R,{size:21,class:"text-gray-500"},{default:()=>Vs(re,{icon:j.icon})}),Vs("span",{class:"font-normal ml-2 "},{default:()=>j.label}),Vs("span",{class:"text-gray-500 ml-1"},{default:()=>`(${j.children.length})`})]),M=Ss("renderSelectLabel"),S=Ss("removeCollectionField"),I=Ss("removeSingleton"),L=Ss("onCreateItemOption"),A=Ss("expandedNames",()=>fi(()=>Ko([]).value));return(j,v)=>{const B=Be,C=Ia,w=Zt,N=en,U=xa,Q=Qs,J=ya,F=ja,h=no,f=Ka,D=Sc("color-picker"),xe=zr,$=za,m=Nr,r=so,x=oo,ie=vl,P=Sc("Draggable"),ge=wl,De=Id,ne=Cd,ue=uu,xt=Fi,Vt=Xl;return nl(),Ca(Mn,null,[it(P,{list:Z.value,class:"w-full"},{default:ct(()=>[(nl(!0),Ca(Mn,null,Is(Z.value,($e,Ye)=>(nl(),Wa(ie,{key:`field-${Ye}`,size:"small",class:"my-2",hoverable:""},{default:ct(()=>[it(x,{"expanded-names":Ke(A)(K.type=="collection"?`c-${K.parentItemIndex}-f-${Ye}`:`s-${Ye}`).value,"onUpdate:expandedNames":Ve=>Ke(A)(K.type=="collection"?`c-${K.parentItemIndex}-f-${Ye}`:`s-${Ye}`).value=Ve,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":ct(({collapsed:Ve})=>[sa("div",hv,[it(B,{size:"small",type:"error",secondary:"",onClick:()=>{K.type==="collection"?Ke(S)&&Ke(S)(K.collectionKey,Ye):Ke(I)&&Ke(I)(Ye)},title:Ke(e)("delete")},{default:ct(()=>[it(Ke(R),null,{default:ct(()=>[it(Ke(re),{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),v[3]||(v[3]=sa("div",{class:"w-4"},null,-1)),it(Ke(R),null,{default:ct(()=>[Ve?(nl(),Wa(Ke(re),{key:0,icon:"fa-solid:chevron-left"})):(nl(),Wa(Ke(re),{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:ct(()=>[...v[4]||(v[4]=[sa("span",null,null,-1)])]),default:ct(()=>[it(r,{name:"1"},{header:ct(()=>[sa("div",bv,[sa("div",kv,[it(Ke(R),{size:"18",class:"cursor-move mr-2"},{default:ct(()=>[it(Ke(re),{icon:"fa-solid:grip-lines"})]),_:1}),it(C,{size:"small",type:"info"},{default:ct(()=>[$o(ra(Ye+1),1)]),_:2},1024),sa("span",wv,ra(Ke(l)($e.label)),1)])])]),default:ct(()=>[it(J,{span:24,"x-gap":"6"},{default:ct(()=>[it(N,{span:6},{default:ct(()=>[sa("span",xv,ra(Ke(e)("fieldKey")),1),it(w,{value:$e.key,placeholder:Ke(e)("fieldKey"),class:"w-full","onUpdate:value":Ve=>$e.key=Ke(o)(Ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),it(N,{span:10},{default:ct(()=>[it(U,{modelValue:$e.label,"onUpdate:modelValue":Ve=>$e.label=Ve,placeholder:Ke(e)("title"),class:"w-full",sync:""},{label:ct(()=>[sa("span",$v,ra(Ke(e)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),it(N,{span:8},{default:ct(()=>[sa("span",Cv,ra(Ke(e)("type")),1),it(Q,null,{default:ct(()=>[it(w,{value:ce($e.type),placeholder:Ke(e)("type"),class:"w-full field-type-input",readonly:"",onClick:Ve=>E($e.type,Ye)},null,8,["value","placeholder","onClick"]),it(B,{secondary:"",onClick:Ve=>E($e.type,Ye)},{icon:ct(()=>[it(Ke(re),{icon:"carbon:chevron-down"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),it(F,{class:"!mt-4 !mb-2"}),it(J,{span:24,"x-gap":"6"},{default:ct(()=>[it(N,{span:10,class:"flex items-center"},{default:ct(()=>[it(h,{checked:$e.required,"onUpdate:checked":Ve=>$e.required=Ve,size:"medium"},{default:ct(()=>[$o(ra(Ke(e)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),it(N,{span:14},{default:ct(()=>[["content-model-item","content-model-items"].includes($e.type)?(nl(),Ca(Mn,{key:0},[sa("span",Iv,ra(Ke(e)("contentModel")),1),it(f,{value:$e.defaultValue,"onUpdate:value":Ve=>$e.defaultValue=Ve,options:Ke(s),placeholder:Ke(e)("contentModel"),"render-label":Ke(M),"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder","render-label"])],64)):(nl(),Ca(Mn,{key:1},[$e.type==="color"||$e.type==="gradient"?(nl(),Ca("div",Vv,[sa("span",Sv,ra(Ke(e)("defaultValue")),1),it(D,{"pure-color":$e.defaultValue,"onUpdate:pureColor":Ve=>$e.defaultValue=Ve,"default-pure-color":"#00000000","picker-type":"chrome","use-type":$e.type==="color"?"pure":"gradient",format:$e.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:Ke(t)?"white":"black",lang:Ke(n)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):$e.type==="i18n-text"?(nl(),Ca("div",Ev,[it(U,{modelValue:$e.defaultValue,"onUpdate:modelValue":Ve=>$e.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"text",class:"w-full",sync:""},{label:ct(()=>[sa("span",Uv,ra(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):$e.type==="i18n-textarea"?(nl(),Ca("div",Mv,[it(U,{modelValue:$e.defaultValue,"onUpdate:modelValue":Ve=>$e.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"textarea",class:"w-full",rows:2,sync:""},{label:ct(()=>[sa("span",Tv,ra(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):$e.type==="i18n-editor"?(nl(),Ca("div",Dv,[it(U,{modelValue:$e.defaultValue,"onUpdate:modelValue":Ve=>$e.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),type:"editor",class:"w-full",sync:""},{label:ct(()=>[sa("span",Nv,ra(Ke(e)("defaultValue")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])])):(nl(),Wa(w,{key:4,value:$e.defaultValue,"onUpdate:value":Ve=>$e.defaultValue=Ve,placeholder:Ke(e)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))],64))]),_:2},1024)]),_:2},1024),$e.type==="multi-select"||$e.type==="single-select"?(nl(),Wa(F,{key:0,"title-placement":"left",class:"!my-4"},{default:ct(()=>[$o(ra(Ke(e)("options")),1)]),_:1})):mi("",!0),it($,{name:"slide-fade",appear:""},{default:ct(()=>[$e.type==="multi-select"||$e.type==="single-select"?(nl(),Ca("div",zv,[it(xe,{value:$e.options,"onUpdate:value":Ve=>$e.options=Ve,placeholder:Ke(e)("addOption"),"on-create":Ve=>Ke(L)?Ke(L)(Ve,Ye):null,"show-sort-button":"",class:"w-full"},{"create-button-default":ct(()=>[$o(ra(Ke(e)("addOption")),1)]),default:ct(({value:Ve})=>[sa("div",Av,[it(w,{value:Ve.value,placeholder:Ke(e)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":et=>Ve.value=Ke(o)(et)},null,8,["value","placeholder","onUpdate:value"]),it(U,{modelValue:Ve.label,"onUpdate:modelValue":et=>Ve.label=et,placeholder:Ke(e)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):mi("",!0)]),_:2},1024),(nl(!0),Ca(Mn,null,Is(Ke(fv),(Ve,et,H)=>(nl(),Ca(Mn,{key:H},[$e.type===et?(nl(),Wa(x,{key:0,"arrow-placement":"right","display-directive":"show","default-expanded-names":[],class:"settings-collapse"},{arrow:ct(()=>[it(Ke(R),{size:"18"},{default:ct(()=>[it(Ke(re),{icon:"carbon:chevron-right"})]),_:1})]),default:ct(()=>[it(r,{name:"1"},{header:ct(()=>[it(F,{"title-placement":"left",class:"!my-4"},{default:ct(()=>[$o(ra(Ke(e)("settings")),1)]),_:1})]),default:ct(()=>[it($,{name:"slide-fade",appear:""},{default:ct(()=>[sa("div",Pv,[(nl(!0),Ca(Mn,null,Is(Ve,b=>(nl(),Wa(J,{key:b.key,span:24,"x-gap":"12",class:"mb-2"},{default:ct(()=>[it(N,{span:10},{default:ct(()=>[it(w,{value:b.key,placeholder:Ke(e)("settingKey"),class:"w-full",readonly:""},null,8,["value","placeholder"])]),_:2},1024),it(N,{span:14},{default:ct(()=>[b.isNumber?(nl(),Wa(m,{key:0,value:$e.settings[b.key],"onUpdate:value":p=>$e.settings[b.key]=p,"default-value":b.defaultValue?parseInt(b.defaultValue):void 0,placeholder:b.placeholder||Ke(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"])):(nl(),Wa(w,{key:1,value:$e.settings[b.key],"onUpdate:value":p=>$e.settings[b.key]=p,"default-value":b.defaultValue,placeholder:b.placeholder||Ke(e)("settingValue"),class:"w-full"},null,8,["value","onUpdate:value","default-value","placeholder"]))]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)):mi("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["list"]),it(Vt,{show:Ke(q),"onUpdate:show":v[2]||(v[2]=$e=>Ec(q)?q.value=$e:null),preset:"card",size:"medium",style:{width:"650px"},title:Ke(e)("fieldType"),bordered:!1,"mask-closable":!1,closable:!1,"close-on-esc":!1},{"header-extra":ct(()=>[it(ge,{align:"center"},{default:ct(()=>[it(B,{secondary:"",size:"small",type:"success",disabled:Ke(me),onClick:z},{default:ct(()=>[it(Ke(re),{icon:"carbon:checkmark",class:"mr-1"}),$o(" "+ra(Ke(e)("select")),1)]),_:1},8,["disabled"]),it(B,{secondary:"",size:"small",type:"error",onClick:v[0]||(v[0]=$e=>q.value=!1)},{default:ct(()=>[it(Ke(re),{icon:"carbon:close",class:"mr-1"}),$o(" "+ra(Ke(e)("close")),1)]),_:1})]),_:1})]),default:ct(()=>[it(xt,{animated:"",type:"line",size:"medium",placement:"left",value:Ke(d),"onUpdate:value":v[1]||(v[1]=$e=>Ec(d)?d.value=$e:null),style:{height:"100%"}},{default:ct(()=>[(nl(!0),Ca(Mn,null,Is(Ke(pi),($e,Ye)=>(nl(),Wa(ue,{name:$e.key,tab:W($e),key:Ye},{default:ct(()=>[it(ne,{hoverable:"",clickable:"",bordered:""},{default:ct(()=>[(nl(!0),Ca(Mn,null,Is($e.children,Ve=>(nl(),Wa(De,{class:gv(i(Ve).value?`${Ke(a)("bg-zinc-300 text-black","bg-zinc-600 text-white")} `:""),key:Ve.value,onClick:et=>ae(Ve)},{suffix:ct(()=>[it(h,{checked:i(Ve).value,"onUpdate:checked":et=>i(Ve).value=et,size:"medium",onClick:et=>ae(Ve)},null,8,["checked","onUpdate:checked","onClick"])]),default:ct(()=>[sa("span",Lv,ra(Ve.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])]),_:1},8,["show","title"])],64)}}}),Uc=On(Fv,[["__scopeId","data-v-f2dba27a"]]),{useModel:Ov,mergeModels:qv,defineComponent:Rv}=await se("vue"),{unref:Pe,toDisplayString:ea,openBlock:ol,createElementBlock:Es,createCommentVNode:Yo,createTextVNode:Xa,resolveComponent:Mb,withCtx:Je,createVNode:st,createElementVNode:un,createBlock:Ll,normalizeStyle:_i,isRef:jv,renderList:Kv,Fragment:Mc,normalizeClass:Yv}=await se("vue"),Gv={class:"text-base"},Hv={key:0},Qv={key:0},Wv={key:0},Xv={class:"flex items-center"},Jv={class:"flex items-center justify-between w-full"},Zv={class:"text-base font-semibold"},ey={class:"text-xs text-slate-400"},ty={class:"text-xs text-slate-400"},ly={class:"text-xs text-slate-400"},{defineAsyncComponent:ay,ref:pn,computed:hr,watch:br,h:ny,provide:Gn}=await se("vue"),{storeToRefs:oy}=await se("pinia"),Bd=Rv({__name:"index",props:qv({title:{default:""},rawDataStructure:{default:()=>({})},updateDataStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=ay(()=>ts(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(r=>r.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),{t:n}=ke(),{tr:l,pickByTheme:o,formatKey:a}=Ze(),{isLightTheme:t}=oy(To());lo();const s=u,K=Ov(u,"show"),Z=Ge(),ce=qe(),q=Wl(),ye=pn(!1),O=pn(null),V=pn({}),d=pn({}),E={key:"",label:"",type:"text",required:!1,options:[],settings:{},defaultValue:""},ae=pn(!1),i=pn(!1),me=pn(!1),z=pn(!1),W=pn({}),M=r=>hr({get:()=>W.value[r]?["1"]:[],set:x=>{W.value[r]=x.length>0}}),S=hr({get:()=>le.omit(V.value,["index"]),set:r=>{V.value=V.value.index!==void 0?{index:V.value.index,...r}:{...r}}});br(()=>z.value,r=>{Object.entries(V.value).forEach(([x,ie],P)=>{x!=="index"&&(W.value[`c-${P}`]=r,ie?.items?.forEach((ge,De)=>{W.value[`c-${P}-f-${De}`]=r}))})}),br(()=>me.value,r=>{Object.entries(V.value).forEach(([x,ie],P)=>{x==="index"&&ie?.forEach((ge,De)=>{W.value[`s-${De}`]=r})})});const I=hr(()=>le.isEqual(V.value,d.value)),L=()=>{V.value?V.value.index&&Array.isArray(V.value.index)?V.value.index.push(le.cloneDeep(E)):V.value.index=[le.cloneDeep(E)]:V.value={index:[le.cloneDeep(E)]}},A=r=>{V.value&&Array.isArray(V.value.index)&&V.value.index.splice(r,1)},j=()=>{const r=Ql();V.value?V.value[r]={key:"",title:"",items:[]}:V.value={[r]:{key:"",title:"",items:[]}}},v=r=>{if(V.value){const{[r]:x,...ie}=V.value;V.value=ie}},B=r=>{V.value&&V.value[r].items.push(le.cloneDeep(E))},C=(r,x)=>{if(V.value){const ie=V.value[r];ie&&Array.isArray(ie.items)&&ie.items.splice(x,1)}},w=r=>r.title&&r.key&&r.key!=="index",N=()=>V.value&&typeof V.value=="object"?Object.keys(V.value).filter(r=>r!=="index").length:0,U=hr(()=>V.value?Object.keys(V.value).filter(r=>r!=="index"):[]),Q=r=>U.value.indexOf(r),J=pn(!1),F=async()=>{const r=le.cloneDeep(V.value),x=le.cloneDeep(V.value);J.value=!1,ye.value=!0,Z.start();const ie=[];if(le.forIn(r,(P,ge)=>{ge!=="index"&&ie.push(P.key)}),le.forIn(r,(P,ge)=>{if(ge!=="index"){const De=le.keys(r).filter(ne=>ne!=="index").indexOf(ge);if(P&&P.key){if(P.key==="index")return ce.error(n("keyIndexIsReservedInCollections")),J.value=!0,!1;if(ie.filter(ue=>ue==P.key).length>1)return ce.error(n("collectionKeyIsNotUnique",[P.key])),J.value=!0,!1;if(Array.isArray(P.items))for(const[ue,xt]of P.items.entries())if(xt.key){if(P.items.filter($e=>$e.key===xt.key).length>1)return ce.error(n("fieldKeyOfCollectionIsNotUnique",[xt.key,P.key])),J.value=!0,!1}else return ce.error(n("fieldKeyOfCollectionIsRequired",[ue+1,P.key])),J.value=!0,!1}else return ce.error(n("collectionKeyIsRequired",[De+1])),J.value=!0,!1}else if(Array.isArray(P))for(const[De,ne]of P.entries())if(ne.key){if(P.filter(xt=>xt.key===ne.key).length>1)return ce.error(n("singletonKeyIsNotUnique",[ne.key])),J.value=!0,!1}else return ce.error(n("singletonKeyIsRequired",[De+1])),J.value=!0,!1}),J.value){ye.value=!1,Z.finish();return}le.forIn(x,(P,ge)=>{ge!=="index"&&ge!==P.key&&hd(r,ge,P.key)}),await s.updateDataStructure(r),ye.value=!1,Z.finish()},h=()=>{le.isEqual(V.value,d.value)?K.value=!1:q.warning({title:n("confirm"),content:n("confirmCloseDataStructure"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{K.value=!1}})};br(()=>s.rawDataStructure,r=>{V.value=r?le.cloneDeep(r):{},le.forIn(r,(x,ie)=>{ie!=="index"?(V.value[ie].key=ie,x?.items?.forEach((P,ge)=>{V.value[ie].items[ge].settings||(V.value[ie].items[ge].settings={})})):x?.forEach((P,ge)=>{V.value[ie][ge].settings||(V.value[ie][ge].settings={})})}),d.value=le.cloneDeep(V.value)},{immediate:!0,deep:!0});const f=r=>ny("span",{},{default:()=>l(r.title)}),D=(r,x)=>({value:`option_${x+1}${r+1}`,label:""}),{copy:xe,copied:$,isSupported:m}=Td();return br(()=>$.value,r=>{r&&ce.success(n("dataStructureCopied"))}),Gn("removeCollectionField",C),Gn("onCreateItemOption",D),Gn("renderSelectLabel",f),Gn("removeSingleton",A),Gn("addSingleton",L),Gn("expandCollections",z),Gn("expandSingletons",me),Gn("expandedNames",M),(r,x)=>{const ie=Ri,P=re,ge=R,De=Be,ne=wl,ue=vl,xt=Ra,Vt=en,$e=Ia,Ye=Zt,Ve=xa,et=ya,H=ja,b=Oi,p=so,rt=oo,Ce=zi;return ol(),Ll(Ce,{modelValue:K.value,"onUpdate:modelValue":x[13]||(x[13]=nt=>K.value=nt),"close-on-esc":!1,closable:!1,onOnSizeChange:x[14]||(x[14]=nt=>{O.value=nt})},{header:Je(()=>[un("div",Gv,[st(ie,{depth:"1"},{default:Je(()=>[Xa(ea(Pe(n)("dataStructure"))+" ",1),u.title?(ol(),Es("span",Hv,"Â -Â "+ea(u.title),1)):Yo("",!0)]),_:1})])]),"header-extra":Je(()=>[st(ne,{align:"center"},{default:Je(()=>[st(De,{secondary:"",title:Pe(n)("save"),loading:Pe(ye),disabled:Pe(I),onClick:x[0]||(x[0]=nt=>F())},{icon:Je(()=>[st(ge,null,{default:Je(()=>[st(P,{icon:"carbon:save"})]),_:1})]),default:Je(()=>[Xa(" "+ea(Pe(n)("save")),1)]),_:1},8,["title","loading","disabled"]),st(De,{secondary:"",type:"error",title:Pe(n)("close"),disabled:Pe(ye),onClick:x[1]||(x[1]=nt=>h())},{icon:Je(()=>[st(ge,null,{default:Je(()=>[st(P,{icon:"carbon:close"})]),_:1})]),default:Je(()=>[Xa(" "+ea(Pe(n)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Je(()=>[un("section",{style:_i(`min-height: ${Pe(O)?.windowHeight-Pe(O)?.headerHeight-5}px`),class:Yv(`w-full h-full ${Pe(o)("bg-slate-200","bg-zinc-800")}`)},[st(et,{cols:"1 s:1 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Je(()=>[st(Vt,{class:"mx-2 mt-2"},{default:Je(()=>[st(ue,{embedded:"",bordered:"",segmented:""},{header:Je(()=>[Xa(ea(Pe(n)("singletons"))+"Â  ",1),Pe(V).index?.length?(ol(),Es("span",Qv," ("+ea(Pe(V).index?.length)+") ",1)):Yo("",!0)]),"header-extra":Je(()=>[st(ne,null,{default:Je(()=>[Pe(m)&&Pe(ae)?(ol(),Ll(De,{key:0,size:"small",type:"warning",secondary:"",title:Pe(n)("copy"),onClick:x[2]||(x[2]=nt=>Pe(xe)(JSON.stringify(Pe(V).index)))},{icon:Je(()=>[st(ge,null,{default:Je(()=>[st(P,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Yo("",!0),st(De,{size:"small",type:"warning",secondary:"",onClick:x[3]||(x[3]=()=>{ae.value=!Pe(ae),Pe(ae)&&(i.value=!1)})},{default:Je(()=>[st(ge,null,{default:Je(()=>[Pe(ae)?(ol(),Ll(P,{key:0,icon:"carbon:code"})):(ol(),Ll(P,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),st(De,{size:"small",type:"primary",secondary:"",onClick:x[4]||(x[4]=nt=>me.value=!Pe(me))},{default:Je(()=>[st(ge,null,{default:Je(()=>[Pe(me)?(ol(),Ll(P,{key:0,icon:"carbon:collapse-categories"})):(ol(),Ll(P,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),st(De,{size:"small",type:"primary",secondary:"",onClick:x[5]||(x[5]=nt=>L())},{default:Je(()=>[st(ge,{class:"mr-1"},{default:Je(()=>[st(P,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addSingleton")),1)]),_:1})]),_:1})]),_:1}),Pe(ae)?(ol(),Ll(Pe(e),{key:0,height:Pe(O)?.windowHeight-Pe(O)?.headerHeight-100,"dark-theme":!Pe(t),class:"creopse-json-editor",mode:"tree",json:Pe(V).index,"onUpdate:json":x[6]||(x[6]=nt=>Pe(V).index=nt)},null,8,["height","dark-theme","json"])):(ol(),Ll(xt,{key:1,style:_i(`max-height: ${Pe(O)?.windowHeight-Pe(O)?.headerHeight-100}px`)},{default:Je(()=>[st(Uc,{modelValue:Pe(V).index,"onUpdate:modelValue":x[7]||(x[7]=nt=>Pe(V).index=nt),type:"singleton"},null,8,["modelValue"])]),_:1},8,["style"]))]),_:1}),st(Vt,{class:"mx-2 mt-2"},{default:Je(()=>[st(ue,{embedded:"",bordered:"",segmented:""},{header:Je(()=>[Xa(ea(Pe(n)("collections"))+"Â  ",1),N()>0?(ol(),Es("span",Wv," ("+ea(N())+") ",1)):Yo("",!0)]),"header-extra":Je(()=>[st(ne,null,{default:Je(()=>[Pe(m)&&Pe(i)?(ol(),Ll(De,{key:0,size:"small",type:"warning",secondary:"",title:Pe(n)("copy"),onClick:x[8]||(x[8]=nt=>Pe(xe)(JSON.stringify(Pe(S))))},{icon:Je(()=>[st(ge,null,{default:Je(()=>[st(P,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Yo("",!0),st(De,{size:"small",type:"warning",secondary:"",onClick:x[9]||(x[9]=()=>{i.value=!Pe(i),Pe(i)&&(ae.value=!1)})},{default:Je(()=>[st(ge,null,{default:Je(()=>[Pe(i)?(ol(),Ll(P,{key:0,icon:"carbon:code"})):(ol(),Ll(P,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),st(De,{size:"small",type:"primary",secondary:"",onClick:x[10]||(x[10]=nt=>z.value=!Pe(z))},{default:Je(()=>[st(ge,null,{default:Je(()=>[Pe(z)?(ol(),Ll(P,{key:0,icon:"carbon:collapse-categories"})):(ol(),Ll(P,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),st(De,{size:"small",type:"primary",secondary:"",onClick:x[11]||(x[11]=nt=>j())},{default:Je(()=>[st(ge,{class:"mr-1"},{default:Je(()=>[st(P,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addCollection")),1)]),_:1})]),_:1})]),_:1}),Pe(i)?(ol(),Ll(Pe(e),{key:0,height:Pe(O)?.windowHeight-Pe(O)?.headerHeight-100,"dark-theme":!Pe(t),class:"creopse-json-editor",mode:"tree",json:Pe(S),"onUpdate:json":x[12]||(x[12]=nt=>jv(S)?S.value=nt:null)},null,8,["height","dark-theme","json"])):(ol(),Ll(xt,{key:1,style:_i(`max-height: ${Pe(O)?.windowHeight-Pe(O)?.headerHeight-100}px`)},{default:Je(()=>[(ol(!0),Es(Mc,null,Kv(Pe(V)||{},(nt,dt,Y)=>(ol(),Es(Mc,{key:Y},[dt!="index"?(ol(),Ll(ue,{key:0,size:"small",class:"my-2",embedded:""},{default:Je(()=>[st(rt,{"expanded-names":M(`c-${Y}`).value,"onUpdate:expandedNames":he=>M(`c-${Y}`).value=he,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Je(({collapsed:he})=>[un("div",Xv,[st(De,{size:"small",type:"error",secondary:"",onClick:ve=>v(dt)},{default:Je(()=>[st(ge,{class:"mr-1"},{default:Je(()=>[st(P,{icon:"carbon:trash-can"})]),_:1}),Xa(" "+ea(Pe(n)("delete")),1)]),_:1},8,["onClick"]),x[15]||(x[15]=un("div",{class:"w-4"},null,-1)),st(ge,null,{default:Je(()=>[he?(ol(),Ll(P,{key:0,icon:"fa-solid:chevron-left"})):(ol(),Ll(P,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Je(()=>[...x[16]||(x[16]=[un("span",null,null,-1)])]),default:Je(()=>[st(p,{name:"1"},{header:Je(()=>[un("div",Jv,[st(ne,null,{default:Je(()=>[st($e,{size:"small",type:"success"},{default:Je(()=>[Xa(ea(Q(dt)+1),1)]),_:2},1024),un("span",Zv,ea(Pe(l)(nt.title)),1)]),_:2},1024)])]),default:Je(()=>[st(et,{span:24,"x-gap":"6"},{default:Je(()=>[st(Vt,{span:6},{default:Je(()=>[un("span",ey,ea(Pe(n)("fieldKey")),1),st(Ye,{value:nt.key,placeholder:Pe(n)("collectionKey"),class:"w-full",size:"small","onUpdate:value":he=>nt.key=Pe(a)(he)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),st(Vt,{span:11},{default:Je(()=>[st(Ve,{modelValue:nt.title,"onUpdate:modelValue":he=>nt.title=he,placeholder:Pe(n)("title"),class:"w-full",size:"small",sync:""},{label:Je(()=>[un("span",ty,ea(Pe(n)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),st(Vt,{span:7},{default:Je(()=>[un("span",ly,ea(Pe(n)("actions")),1),st(De,{block:"",size:"small",type:"primary",disabled:!w(nt),secondary:"",class:"w-full",onClick:he=>B(dt)},{default:Je(()=>[st(ge,{class:"mr-1"},{default:Je(()=>[st(P,{icon:"carbon:add-alt"})]),_:1}),Xa(" "+ea(Pe(n)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),st(H,{class:"!my-4.75"}),w(nt)?(ol(),Ll(Uc,{key:0,modelValue:Pe(V)[dt].items,"onUpdate:modelValue":he=>Pe(V)[dt].items=he,"parent-item-index":Y,"collection-key":dt,type:"collection"},null,8,["modelValue","onUpdate:modelValue","parent-item-index","collection-key"])):(ol(),Ll(b,{key:1,bordered:"",type:"info"},{default:Je(()=>[Xa(ea(Pe(n)("cannotAddCollectionField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024)):Yo("",!0)],64))),128))]),_:1},8,["style"]))]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{t:ba}=Li.global,sy=[{label:ba("text"),value:"text"},{label:ba("textarea"),value:"textarea"},{label:ba("number"),value:"number"},{label:ba("switch"),value:"switch"},{label:ba("singleSelect"),value:"single-select"},{label:ba("multiSelect"),value:"multi-select"},{label:ba("slider"),value:"slider"},{label:ba("image"),value:"image"},{label:ba("icon"),value:"icon"},{label:ba("color"),value:"color"},{label:ba("gradient"),value:"gradient"},{label:ba("dimensions"),value:"dimensions"},{label:ba("background"),value:"background"},{label:ba("border"),value:"border"},{label:ba("shadow"),value:"shadow"}],{useModel:ry,mergeModels:iy,defineComponent:cy}=await se("vue"),{unref:je,toDisplayString:pl,openBlock:ml,createElementBlock:Go,createCommentVNode:Us,createTextVNode:Ea,resolveComponent:Tc,withCtx:Le,createVNode:Oe,createElementVNode:Dl,createBlock:ta,isRef:dy,renderList:Dc,Fragment:Nc,normalizeStyle:zc,normalizeClass:uy}=await se("vue"),py={class:"text-base"},my={key:0},fy={key:0},_y={class:"flex items-center"},vy={class:"flex items-center justify-between w-full"},yy={class:"text-base font-semibold"},gy={class:"text-xs text-slate-400"},hy={class:"text-xs text-slate-400"},by={class:"text-xs text-slate-400"},ky={class:"flex items-center"},wy={class:"flex items-center justify-between w-full"},xy={class:"flex items-center justify-between"},$y={class:"text-base font-semibold ml-4"},Cy={class:"text-xs text-slate-400"},Iy={class:"text-xs text-slate-400"},Vy={class:"text-xs text-slate-400"},Sy={key:0},Ey={class:"text-xs text-slate-400"},Uy={key:0,class:"w-full flex items-center"},My={class:"w-full flex items-center"},{defineAsyncComponent:Ty,ref:Hn,computed:vi,watch:yi}=await se("vue"),{storeToRefs:Dy}=await se("pinia"),Ny=cy({__name:"index",props:iy({title:{default:""},settingsStructure:{default:()=>({})},updateSettingsStructure:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{}}),emits:["update:show"],setup(u){const e=Ty(()=>ts(()=>import("./vue3-ts-jsoneditor-gy4gX5pG.js").then(f=>f.bI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),n=Wl(),l=qe(),o=Ge(),{t:a,locale:t}=ke(),{pickByTheme:s,tr:K,formatKey:Z}=Ze(),{isLightTheme:ce}=Dy(To()),q=u,ye=ry(u,"show"),O=Hn(null),V=Hn(!1),d=Hn({}),E=Hn({}),ae={key:"",label:"",type:"text",required:!1,options:[],defaultValue:""},i=Hn(!1),me=Hn(!1),z=Hn({}),W=f=>vi({get:()=>z.value[f]?["1"]:[],set:D=>{z.value[f]=D.length>0}});yi(()=>q.settingsStructure,f=>{d.value=f?le.cloneDeep(f):{},le.forIn(f,(D,xe)=>{d.value[xe].key=xe}),E.value=le.cloneDeep(d.value)},{immediate:!0,deep:!0});const M=vi(()=>le.isEqual(d.value,E.value)),S=Hn(!1),I=async()=>{const f=le.cloneDeep(d.value),D=le.cloneDeep(d.value);S.value=!1,V.value=!0,o.start();const xe=Object.values(f).map($=>$.key);if(le.forIn(f,($,m)=>{const r=le.keys(f).indexOf(m);if($&&$.key){if(xe.filter(ie=>ie==$.key).length>1)return l.error(a("groupKeyIsNotUnique",[$.key])),S.value=!0,!1;if(Array.isArray($.items))for(const[ie,P]of $.items.entries())if(P.key){if($.items.filter(De=>De.key===P.key).length>1)return l.error(a("fieldKeyOfGroupIsNotUnique",[P.key,$.key])),S.value=!0,!1}else return l.error(a("fieldKeyOfGroupIsRequired",[ie+1,$.key])),S.value=!0,!1}else return l.error(a("groupKeyIsRequired",[r+1])),S.value=!0,!1}),S.value){V.value=!1,o.finish();return}le.forIn(D,($,m)=>{m!==$.key&&hd(f,m,$.key)}),await q.updateSettingsStructure(f),V.value=!1,o.finish()},L=()=>{le.isEqual(d.value,E.value)?ye.value=!1:n.warning({title:a("confirm"),content:a("confirmCloseDataStructure"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{ye.value=!1}})},A=()=>d.value&&typeof d.value=="object"?Object.keys(d.value).length:0,j=vi(()=>d.value?Object.keys(d.value):[]),v=f=>j.value.indexOf(f),B=()=>{const f=Ql();d.value?d.value[f]={key:"",title:"",items:[]}:d.value={[f]:{key:"",title:"",items:[]}}},C=f=>{if(d.value){const{[f]:D,...xe}=d.value;d.value=xe}},w=f=>{d.value&&d.value[f].items.push(le.cloneDeep(ae))},N=(f,D)=>{if(d.value){const xe=d.value[f];xe&&Array.isArray(xe.items)&&xe.items.splice(D,1)}},U=f=>f.title&&f.key,Q=(f,D)=>({value:`option_${D+1}${f+1}`,label:""});yi(()=>me.value,f=>{Object.entries(d.value).forEach(([D,xe],$)=>{z.value[`c-${$}`]=f,xe?.items?.forEach((m,r)=>{z.value[`c-${$}-f-${r}`]=f})})});const{copy:J,copied:F,isSupported:h}=Td();return yi(()=>F.value,f=>{f&&l.success(a("settingsStructureCopied"))}),(f,D)=>{const xe=Ri,$=re,m=R,r=Be,x=wl,ie=en,P=vl,ge=Ia,De=Zt,ne=xa,ue=ya,xt=ja,Vt=Ka,$e=no,Ye=Tc("color-picker"),Ve=zr,et=za,H=so,b=oo,p=Tc("Draggable"),rt=Oi,Ce=Ra,nt=zi;return ml(),ta(nt,{modelValue:ye.value,"onUpdate:modelValue":D[7]||(D[7]=dt=>ye.value=dt),"close-on-esc":!1,closable:!1,onOnSizeChange:D[8]||(D[8]=dt=>{O.value=dt})},{header:Le(()=>[Dl("div",py,[Oe(xe,{depth:"1"},{default:Le(()=>[Ea(pl(je(a)("sectionSettings"))+" ",1),u.title?(ml(),Go("span",my,"Â -Â "+pl(u.title),1)):Us("",!0)]),_:1})])]),"header-extra":Le(()=>[Oe(x,{align:"center"},{default:Le(()=>[Oe(r,{secondary:"",title:je(a)("save"),loading:je(V),disabled:je(M),onClick:D[0]||(D[0]=dt=>I())},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:save"})]),_:1})]),default:Le(()=>[Ea(" "+pl(je(a)("save")),1)]),_:1},8,["title","loading","disabled"]),Oe(r,{secondary:"",type:"error",title:je(a)("close"),disabled:je(V),onClick:D[1]||(D[1]=dt=>L())},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:close"})]),_:1})]),default:Le(()=>[Ea(" "+pl(je(a)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Le(()=>[Dl("section",{style:zc(`min-height: ${je(O)?.windowHeight-je(O)?.headerHeight-5}px`),class:uy(`w-full h-full ${je(s)("bg-slate-200","bg-zinc-800")}`)},[Oe(ue,{cols:"4","item-responsive":"",responsive:"screen"},{default:Le(()=>[Oe(ie,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"}),Oe(ie,{span:"4 s:4 m:4 l:2 xl:2 2xl:2",class:"mt-2"},{default:Le(()=>[Oe(P,{embedded:"",bordered:"",segmented:""},{header:Le(()=>[Ea(pl(je(a)("groups"))+"Â  ",1),A()>0?(ml(),Go("span",fy," ("+pl(A())+") ",1)):Us("",!0)]),"header-extra":Le(()=>[Oe(x,null,{default:Le(()=>[je(h)&&je(i)?(ml(),ta(r,{key:0,size:"small",type:"warning",secondary:"",title:je(a)("copy"),onClick:D[2]||(D[2]=dt=>je(J)(JSON.stringify(je(d))))},{icon:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:copy"})]),_:1})]),_:1},8,["title"])):Us("",!0),Oe(r,{size:"small",type:"warning",secondary:"",onClick:D[3]||(D[3]=()=>{i.value=!je(i)})},{default:Le(()=>[Oe(m,null,{default:Le(()=>[je(i)?(ml(),ta($,{key:0,icon:"carbon:code"})):(ml(),ta($,{key:1,icon:"carbon:code-hide"}))]),_:1})]),_:1}),Oe(r,{size:"small",type:"primary",secondary:"",onClick:D[4]||(D[4]=dt=>me.value=!je(me))},{default:Le(()=>[Oe(m,null,{default:Le(()=>[je(me)?(ml(),ta($,{key:0,icon:"carbon:collapse-categories"})):(ml(),ta($,{key:1,icon:"carbon:expand-categories"}))]),_:1})]),_:1}),Oe(r,{size:"small",type:"primary",secondary:"",onClick:D[5]||(D[5]=dt=>B())},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:add-alt"})]),_:1}),Ea(" "+pl(je(a)("addGroup")),1)]),_:1})]),_:1})]),_:1}),je(i)?(ml(),ta(je(e),{key:0,height:je(O)?.windowHeight-je(O)?.headerHeight-100,"dark-theme":!je(ce),class:"creopse-json-editor",mode:"tree",json:je(d),"onUpdate:json":D[6]||(D[6]=dt=>dy(d)?d.value=dt:null)},null,8,["height","dark-theme","json"])):(ml(),ta(Ce,{key:1,style:zc(`max-height: ${je(O)?.windowHeight-je(O)?.headerHeight-100}px`)},{default:Le(()=>[(ml(!0),Go(Nc,null,Dc(je(d)||{},(dt,Y,he)=>(ml(),ta(P,{key:he,size:"small",class:"my-2",embedded:""},{default:Le(()=>[Oe(b,{"expanded-names":W(`c-${he}`).value,"onUpdate:expandedNames":ve=>W(`c-${he}`).value=ve,"display-directive":"show","default-expanded-names":["1"]},{"header-extra":Le(({collapsed:ve})=>[Dl("div",_y,[Oe(r,{size:"small",type:"error",secondary:"",onClick:Ee=>C(Y)},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:trash-can"})]),_:1}),Ea(" "+pl(je(a)("delete")),1)]),_:1},8,["onClick"]),D[9]||(D[9]=Dl("div",{class:"w-4"},null,-1)),Oe(m,null,{default:Le(()=>[ve?(ml(),ta($,{key:0,icon:"fa-solid:chevron-left"})):(ml(),ta($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Le(()=>[...D[10]||(D[10]=[Dl("span",null,null,-1)])]),default:Le(()=>[Oe(H,{name:"1"},{header:Le(()=>[Dl("div",vy,[Oe(x,null,{default:Le(()=>[Oe(ge,{size:"small",type:"success"},{default:Le(()=>[Ea(pl(v(Y)+1),1)]),_:2},1024),Dl("span",yy,pl(je(K)(dt.title)),1)]),_:2},1024)])]),default:Le(()=>[Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(ie,{span:6},{default:Le(()=>[Dl("span",gy,pl(je(a)("fieldKey")),1),Oe(De,{value:dt.key,placeholder:je(a)("groupKey"),class:"w-full",size:"small","onUpdate:value":ve=>dt.key=je(Z)(ve)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Oe(ie,{span:11},{default:Le(()=>[Oe(ne,{modelValue:dt.title,"onUpdate:modelValue":ve=>dt.title=ve,placeholder:je(a)("title"),class:"w-full",size:"small",sync:""},{label:Le(()=>[Dl("span",hy,pl(je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Oe(ie,{span:7},{default:Le(()=>[Dl("span",by,pl(je(a)("actions")),1),Oe(r,{block:"",size:"small",type:"primary",disabled:!U(dt),secondary:"",class:"w-full",onClick:ve=>w(Y)},{default:Le(()=>[Oe(m,{class:"mr-1"},{default:Le(()=>[Oe($,{icon:"carbon:add-alt"})]),_:1}),Ea(" "+pl(je(a)("addField")),1)]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024),Oe(xt,{class:"!my-4.75"}),U(dt)?(ml(),ta(p,{key:0,list:je(d)[Y].items,class:"w-full"},{default:Le(()=>[(ml(!0),Go(Nc,null,Dc(je(d)[Y].items,(ve,Ee)=>(ml(),ta(P,{key:`field-${Ee}`,size:"small",class:"my-2",hoverable:""},{default:Le(()=>[Oe(b,{"expanded-names":W(`c-${Y}-f-${Ee}`).value,"onUpdate:expandedNames":at=>W(`c-${Y}-f-${Ee}`).value=at,"display-directive":"show","default-expanded-names":["1"],class:"field-collapse"},{"header-extra":Le(({collapsed:at})=>[Dl("div",ky,[Oe(r,{size:"small",type:"error",secondary:"",onClick:()=>{N(Y,Ee)},title:je(a)("delete")},{default:Le(()=>[Oe(m,null,{default:Le(()=>[Oe($,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick","title"]),D[11]||(D[11]=Dl("div",{class:"w-4"},null,-1)),Oe(m,null,{default:Le(()=>[at?(ml(),ta($,{key:0,icon:"fa-solid:chevron-left"})):(ml(),ta($,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)])]),arrow:Le(()=>[...D[12]||(D[12]=[Dl("span",null,null,-1)])]),default:Le(()=>[Oe(H,{name:"1"},{header:Le(()=>[Dl("div",wy,[Dl("div",xy,[Oe(m,{size:"18",class:"cursor-move mr-2"},{default:Le(()=>[Oe($,{icon:"fa-solid:grip-lines"})]),_:1}),Oe(ge,{size:"small",type:"info"},{default:Le(()=>[Ea(pl(Ee+1),1)]),_:2},1024),Dl("span",$y,pl(je(K)(ve.label)),1)])])]),default:Le(()=>[Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(ie,{span:6},{default:Le(()=>[Dl("span",Cy,pl(je(a)("fieldKey")),1),Oe(De,{value:ve.key,placeholder:je(a)("fieldKey"),class:"w-full","onUpdate:value":at=>ve.key=je(Z)(at)},null,8,["value","placeholder","onUpdate:value"])]),_:2},1024),Oe(ie,{span:10},{default:Le(()=>[Oe(ne,{modelValue:ve.label,"onUpdate:modelValue":at=>ve.label=at,placeholder:je(a)("title"),class:"w-full",sync:""},{label:Le(()=>[Dl("span",Iy,pl(je(a)("title")),1)]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),Oe(ie,{span:8},{default:Le(()=>[Dl("span",Vy,pl(je(a)("type")),1),Oe(Vt,{value:ve.type,"onUpdate:value":at=>ve.type=at,options:je(sy),placeholder:je(a)("type"),"value-field":"value","label-field":"label",filterable:"",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024),Oe(xt,{class:"!mt-4 !mb-2"}),Oe(ue,{span:24,"x-gap":"6"},{default:Le(()=>[Oe(ie,{span:10,class:"flex items-center"},{default:Le(()=>[Oe($e,{checked:ve.required,"onUpdate:checked":at=>ve.required=at,size:"medium"},{default:Le(()=>[Ea(pl(je(a)("requiredField")),1)]),_:1},8,["checked","onUpdate:checked"])]),_:2},1024),Oe(ie,{span:14},{default:Le(()=>[ve.type==="color"||ve.type==="gradient"?(ml(),Go("div",Sy,[Dl("span",Ey,pl(je(a)("defaultValue")),1),Oe(Ye,{"pure-color":ve.defaultValue,"onUpdate:pureColor":at=>ve.defaultValue=at,"default-pure-color":"#00000000","picker-type":"chrome","use-type":ve.type==="color"?"pure":"gradient",format:ve.type==="color"?"hex":"rgb",shape:"circle","z-index":5e3,theme:je(ce)?"white":"black",lang:je(t)},null,8,["pure-color","onUpdate:pureColor","use-type","format","theme","lang"])])):(ml(),ta(De,{key:1,value:ve.defaultValue,"onUpdate:value":at=>ve.defaultValue=at,placeholder:je(a)("defaultValue"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024),ve.type==="multi-select"||ve.type==="single-select"?(ml(),ta(xt,{key:0,"title-placement":"left",class:"!my-4"},{default:Le(()=>[Ea(pl(je(a)("options")),1)]),_:1})):Us("",!0),Oe(et,{name:"slide-fade",appear:""},{default:Le(()=>[ve.type==="multi-select"||ve.type==="single-select"?(ml(),Go("div",Uy,[Oe(Ve,{value:ve.options,"onUpdate:value":at=>ve.options=at,placeholder:je(a)("addOption"),"on-create":at=>Q?Q(at,Ee):null,"show-sort-button":"",class:"w-full"},{"create-button-default":Le(()=>[Ea(pl(je(a)("addOption")),1)]),default:Le(({value:at})=>[Dl("div",My,[Oe(De,{value:at.value,placeholder:je(a)("optionValue"),style:{"margin-right":"1%",width:"30%"},type:"text","onUpdate:value":Vl=>at.value=je(Z)(Vl)},null,8,["value","placeholder","onUpdate:value"]),Oe(ne,{modelValue:at.label,"onUpdate:modelValue":Vl=>at.label=Vl,placeholder:je(a)("optionText"),class:"w-full",sync:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),_:1},8,["value","onUpdate:value","placeholder","on-create"])])):Us("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:2},1032,["list"])):(ml(),ta(rt,{key:1,bordered:"",type:"info"},{default:Le(()=>[Ea(pl(je(a)("cannotAddGroupField")),1)]),_:1}))]),_:2},1024)]),_:2},1032,["expanded-names","onUpdate:expandedNames"])]),_:2},1024))),128))]),_:1},8,["style"]))]),_:1}),Oe(ie,{span:"0 s:0 m:0 l:1 xl:1 2xl:1"})]),_:1})],6)]),_:1},8,["modelValue"])}}}),zy=On(Ny,[["__scopeId","data-v-854dbd9b"]]),{defineComponent:Ay}=await se("vue"),{unref:yt,renderList:Ac,Fragment:Ms,openBlock:mn,createElementBlock:Ts,resolveComponent:Tb,createBlock:Ds,createCommentVNode:Pc,withCtx:kl,createVNode:fl,createElementVNode:Ns,toDisplayString:Co,createTextVNode:zs,withModifiers:gi,normalizeClass:Lc,isRef:kr}=await se("vue"),Py={class:"flex items-center"},Ly={class:"text-base"},By={class:"mt-2"},{ref:fn}=await se("vue"),Fy=Ay({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,isInDevMode:o}=Ze(),{data:a}=Ai(),{mutate:t,isPending:s}=sm(),{mutate:K,isPending:Z}=Ld(),ce=fn(24),q=fn(1),ye=B=>{ce.value=B},O={name:"",title:"",content:"",slug:""},V=fn(!1),d=fn(null),E=fn(O),ae={title:[{required:!0,message:e("fillRequired")}]},i=fn(null),me=B=>{i.value=le.cloneDeep(B),E.value=le.cloneDeep(B||O),V.value=!0},z=async()=>(d.value?.validate(async B=>{if(!B){const C={title:E.value.title};i.value?K({slug:i.value.slug,...C},{onSuccess:()=>{}}):t({name:le.startCase(le.camelCase(n(E.value.title))).replace(/\s+/g,""),...C},{onSuccess:()=>{}}),V.value=!1}}),!1),W=fn(null),M=fn(!1),S=B=>{W.value=B,M.value=!0},I=async B=>{K({slug:W.value?.slug,dataStructure:B},{onSuccess:C=>{S(C)}})},L=fn(null),A=fn(!1),j=B=>{L.value=B,A.value=!0},v=async B=>{K({slug:L.value?.slug,settingsStructure:B},{onSuccess:C=>{j(C)}})};return(B,C)=>{const w=re,N=R,U=Be,Q=wl,J=ja,F=Ia,h=so,f=oo,D=vl,xe=Do,$=Aa,m=xa,r=ga,x=va,ie=Xl;return mn(),Ts(Ms,null,[yt(a)&&yt(a).length?(mn(),Ts(Ms,{key:0},[(mn(!0),Ts(Ms,null,Ac(yt(a).slice((yt(q)-1)*yt(ce),yt(q)*yt(ce)),P=>(mn(),Ds(D,{key:P.id,hoverable:"",embedded:"",size:"small",class:"mb-2"},{default:kl(()=>[fl(f,{"default-expanded-names":[],"display-directive":"show"},{"header-extra":kl(({collapsed:ge})=>[fl(N,null,{default:kl(()=>[ge?(mn(),Ds(w,{key:0,icon:"fa-solid:chevron-left"})):(mn(),Ds(w,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:kl(()=>[...C[6]||(C[6]=[Ns("span",null,null,-1)])]),default:kl(()=>[fl(h,{name:"1"},{header:kl(()=>[Ns("div",Py,[fl(Q,null,{default:kl(()=>[yt(o)?(mn(),Ts(Ms,{key:0},[fl(U,{size:"small",type:"primary",secondary:"",onClick:gi(ge=>S(P),["stop"])},{default:kl(()=>[fl(N,{class:"mr-1"},{default:kl(()=>[fl(w,{icon:"carbon:data-1"})]),_:1}),zs(" "+Co(yt(e)("dataStructure")),1)]),_:1},8,["onClick"]),fl(U,{size:"small",type:"info",secondary:"",title:yt(e)("sectionSettings"),onClick:gi(ge=>j(P),["stop"])},{default:kl(()=>[fl(N,{class:"mr-1"},{default:kl(()=>[fl(w,{icon:"carbon:settings-edit"})]),_:1}),zs(" "+Co(yt(e)("settings")),1)]),_:1},8,["title","onClick"])],64)):Pc("",!0),fl(U,{size:"small",type:"primary",secondary:"",title:yt(e)("edit"),onClick:gi(ge=>me(P),["stop"])},{default:kl(()=>[fl(N,null,{default:kl(()=>[fl(w,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024),fl(J,{vertical:"",class:Lc(yt(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"]),Ns("span",Ly,Co(yt(n)(P.title)),1)])]),default:kl(()=>[Ns("div",null,Co(yt(e)("sectionUsedXTimesOnPages",[P.pagesCount])),1),Ns("section",By,[(mn(!0),Ts(Ms,null,Ac(yt(tu)(P.pages||[],"id"),ge=>(mn(),Ds(F,{key:ge.id,size:"small",class:"mr-1",type:"success"},{default:kl(()=>[zs(Co(yt(n)(ge.title)),1)]),_:2},1024))),128))]),Pc("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),fl(xe,{page:yt(q),"onUpdate:page":C[0]||(C[0]=P=>kr(q)?q.value=P:null),class:"mt-5 justify-end","show-size-picker":"","page-size":yt(ce),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(yt(a).length/yt(ce)),"onUpdate:pageSize":ye},{prefix:kl(()=>[zs(Co(`${yt(a).length} ${yt(e)("section_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(mn(),Ds(D,{key:1,size:"large",class:Lc(`mb-2 !border-dashed !border-2 ${yt(l)("!border-zinc-300","!border-zinc-600")}`)},{default:kl(()=>[fl($,{description:yt(e)("noSectionAvailable")},{icon:kl(()=>[fl(N,null,{default:kl(()=>[fl(w,{icon:"carbon:page-break"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"])),fl(ie,{show:yt(V),"onUpdate:show":C[2]||(C[2]=P=>kr(V)?V.value=P:null),loading:yt(s)||yt(Z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:yt(i)?yt(e)("editSection"):yt(e)("addSection"),"positive-text":yt(e)("validate"),"negative-text":yt(e)("cancel"),onPositiveClick:z,onNegativeClick:C[3]||(C[3]=P=>V.value=!1)},{default:kl(()=>[fl(x,{ref_key:"formRef",ref:d,model:yt(E),rules:ae,"show-require-mark":!1,size:"medium"},{default:kl(()=>[fl(r,{"show-label":!1,path:"title",class:"mt-5"},{default:kl(()=>[fl(m,{modelValue:yt(E).title,"onUpdate:modelValue":C[1]||(C[1]=P=>yt(E).title=P),placeholder:yt(e)("title"),class:"w-full",sync:""},{label:kl(()=>[zs(Co(yt(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),fl(Bd,{show:yt(M),"onUpdate:show":C[4]||(C[4]=P=>kr(M)?M.value=P:null),title:yt(n)(yt(W)?.title),"raw-data-structure":yt(W)?.dataStructure,"update-data-structure":I},null,8,["show","title","raw-data-structure"]),fl(zy,{show:yt(A),"onUpdate:show":C[5]||(C[5]=P=>kr(A)?A.value=P:null),title:yt(n)(yt(L)?.title),"settings-structure":yt(L)?.settingsStructure,"update-settings-structure":v},null,8,["show","title","settings-structure"])],64)}}}),Fd=(u,e)=>Hs(["newsletter-emails"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/emails"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Od=(u,e)=>Hs(["newsletter-phones"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/phones"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u}),Oy=(u,e)=>Hs(["newsletter-campaigns"],async()=>{const{request:n}=Fe(),l=await n({url:"/newsletter/campaigns"});return l.success&&l.result.data?l.result.data:[]},{refetchOnWindowFocus:!1,...u});class qy{id;email;createdAt;updatedAt;constructor(e,n,l,o){this.email=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const Ry=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-emails"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/newsletter/emails",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},jy=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-emails"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/newsletter/emails/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Ky=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["newsletter-emails"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/emails/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},Yy=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["newsletter-emails"],operation:"batch",getItemId:a=>{if(a instanceof qy){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterEmail ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/emails/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},Gy=()=>{const{request:u}=Fe();return Na(async e=>{const n=await u({method:"post",url:"/newsletter/emails",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:Hy}=await se("vue"),{unref:mt,createVNode:Ft,withCtx:Ot,toDisplayString:Qn,createTextVNode:Io,resolveComponent:Db,createElementVNode:Bc,openBlock:hi,createBlock:Fc,createCommentVNode:Qy,isRef:Oc,Fragment:Wy,createElementBlock:Xy}=await se("vue"),Jy={class:"flex items-center justify-center"},{ref:_n,h:ka,computed:Zy,onBeforeUnmount:eg}=await se("vue"),tg=Hy({__name:"Email",setup(u){const e=Ge(),n=qe(),l=Wl(),{data:o,refetch:a,isPending:t}=Fd(),{mutate:s,isPending:K}=Yy(),{mutate:Z}=Ky(),{mutate:ce,isPending:q}=Ry(),{mutate:ye,isPending:O}=jy(),{mutateAsync:V}=Gy(),{t:d,locale:E}=ke(),ae=_n(""),i=_n(),me={pageSize:12,prefix:({itemCount:r})=>ka("div",{class:"font-bold"},{default:()=>`${d("total")}: ${r}`})},z=[{type:"selection"},{title:d("email"),key:"email",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return ka("div",{},{default:()=>r.email})}},{title:d("updateAt"),key:"updatedAt",width:125,render(r){return ka("div",{},{default:()=>Bn(r.updatedAt,{locale:E.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(r){return ka("div",{},{default:()=>Bn(r.createdAt,{locale:E.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>ka(Zt,{ref:i,placeholder:d("search"),value:ae.value,onInput:r=>{ae.value=r}},{suffix:()=>ka(R,{},{default:()=>ka(re,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return ka("div",{class:"flex justify-end items-center w-full"},[ka(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{v(r)},renderIcon:()=>ka(R,null,{default:()=>ka(re,{icon:"carbon:edit"})})}),ka("div",{class:"w-2"}),ka(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeleteEmailAddress"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{r.id&&Z({id:r.id})}})},renderIcon:()=>ka(R,null,{default:()=>ka(re,{icon:"carbon:trash-can"})})})])},fixed:"right"}],W=Zy(()=>{if(!ae.value)return o.value;const r=o.value?.filter(x=>x.email.toLowerCase().includes(ae.value.toLowerCase()));return i.value&&i.value.focus(),r}),M=_n(!1),S=_n(!1),I=_n(null),L=_n(null),A=_n({email:""}),j={email:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(r,x){return x&&!Zo.isEmail(x)?new Error(d("invalidEmail")):!0}}]},v=r=>{I.value=le.cloneDeep(r),r?A.value=le.cloneDeep(r):A.value={email:""},S.value=!0},B=async()=>(L.value?.validate(async r=>{if(!r){const x={email:A.value.email};I.value?I.value.email!==A.value.email&&(o.value||[]).findIndex(ie=>ie.email==A.value.email)>-1?n.error(d("sameEmailAddressMessage")):ye({id:I.value.id,...x}):(o.value||[]).findIndex(ie=>ie.email==A.value.email)>-1?n.error(d("sameEmailAddressMessage")):ce(x),S.value=!1}}),!1);let C=null;const w=()=>{C&&(C.destroy(),C=null)};eg(w);const N=(r,x)=>x.map(ie=>r.map(P=>ie[P])),U=()=>{C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(r=>{var x=["no","email","createdAt","updatedAt"];const ie=le.sortBy(o.value?.map((ge,De)=>({no:De+1,...ge})),"email"),P=N(x,ie);try{r.export_json_to_excel({header:x,data:P,filename:`newsletter_emails_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),w()}catch{w(),n.error(d("anErrorOccurred"))}})},Q=()=>{C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(r=>{var x=["email"];const ie=N(x,[{email:"adresse@email.com"}]);try{r.export_json_to_excel({header:x,data:ie,filename:"newsletter_emails_template",autoWidth:!0,bookType:"xlsx"}),w()}catch{w(),n.error(d("anErrorOccurred"))}})},J=_n(!1),F=async({results:r})=>{M.value=!0,e.start(),C||(C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let x=0;x<r.length;x++)r[x].email&&o.value?.findIndex(ie=>ie.email==r[x].email)==-1&&(C&&(C.content=`${d("pleaseBePatient")}: ${x} ${d("task_s")} / ${r.length}`),await V({email:r[x].email}));await a(),w(),e.finish(),M.value=!1,J.value=!1},h=_n(Ql()),f=_n([]),D=r=>r.id,xe=r=>{f.value=r},$=()=>{f.value=[],h.value=Ql()},m=async()=>(f.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[f.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{s(f.value,{onSuccess:()=>{$()}})}}):n.warning(d("noItemSelected")),!1);return(r,x)=>{const ie=Vd,P=wl,ge=Da,De=vl,ne=za,ue=Dr,xt=Ur,Vt=ga,$e=va,Ye=Xl,Ve=Dd;return hi(),Xy(Wy,null,[Ft(ge,{to:"#alt-action"},{default:Ot(()=>[Ft(P,null,{default:Ot(()=>[Ft(ie,{onPositiveClick:x[0]||(x[0]=et=>U())},{trigger:Ot(()=>[Ft(mt(Be),{type:"success",secondary:""},{icon:Ot(()=>[Ft(mt(R),{size:"18"},{default:Ot(()=>[Ft(mt(re),{icon:"carbon:upload"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("export")),1)]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("exportDataInExcelFile")),1)]),_:1}),Ft(mt(Be),{type:"info",secondary:"",onClick:x[1]||(x[1]=et=>J.value=!0)},{icon:Ot(()=>[Ft(mt(R),{size:"18"},{default:Ot(()=>[Ft(mt(re),{icon:"carbon:download"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("import")),1)]),_:1}),Ft(mt(Be),{type:"primary",secondary:"",onClick:x[2]||(x[2]=et=>v(null))},{icon:Ot(()=>[Ft(mt(R),{size:"18"},{default:Ot(()=>[Ft(mt(re),{icon:"carbon:add-alt"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("addEmailAddress")),1)]),_:1})]),_:1})]),_:1}),Ft(ne,{name:"slide-fade",appear:""},{default:Ot(()=>[mt(f).length?(hi(),Fc(De,{key:0,class:"my-2",size:"small",embedded:""},{default:Ot(()=>[Ft(P,{align:"center",justify:"space-between"},{default:Ot(()=>[Bc("span",null,Qn(mt(d)("nbItemsSelected",[mt(f).length])),1),Ft(P,{align:"center",justify:"space-between"},{default:Ot(()=>[Ft(mt(Be),{type:"error",size:"small",secondary:"",onClick:m},{icon:Ot(()=>[Ft(mt(R),null,{default:Ot(()=>[Ft(mt(re),{icon:"carbon:trash-can"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("delete")),1)]),_:1}),Ft(mt(Be),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Ot(()=>[Ft(mt(R),null,{default:Ot(()=>[Ft(mt(re),{icon:"carbon:close"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Qy("",!0)]),_:1}),Ft(xt,null,{default:Ot(()=>[(hi(),Fc(ue,{key:mt(h),columns:z,data:mt(W),pagination:me,loading:mt(t)||mt(K),"single-line":!1,"scroll-x":800,"row-key":D,size:"small",striped:"","onUpdate:checkedRowKeys":xe},null,8,["data","loading","row-key"]))]),_:1}),Ft(Ye,{show:mt(S),"onUpdate:show":x[4]||(x[4]=et=>Oc(S)?S.value=et:null),loading:mt(q)||mt(O),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:mt(I)?mt(d)("editEmailAddress"):mt(d)("addEmailAddress"),"positive-text":mt(d)("validate"),"negative-text":mt(d)("cancel"),onPositiveClick:B,onNegativeClick:x[5]||(x[5]=et=>S.value=!1)},{default:Ot(()=>[Ft($e,{ref_key:"formRef",ref:L,class:"mt-5",model:mt(A),rules:j,"show-require-mark":!1,size:"medium"},{default:Ot(()=>[Ft(Vt,{label:mt(d)("emailAddress"),path:"email"},{default:Ot(()=>[Ft(mt(Zt),{value:mt(A).email,"onUpdate:value":x[3]||(x[3]=et=>mt(A).email=et),placeholder:mt(d)("emailAddress"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),Ft(Ye,{show:mt(J),"onUpdate:show":x[7]||(x[7]=et=>Oc(J)?J.value=et:null),loading:mt(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:mt(d)("import")},{default:Ot(()=>[Ft(Ve,{class:"my-5","on-success":F}),Bc("div",Jy,[Ft(mt(Be),{type:"info",size:"small",secondary:"",onClick:x[6]||(x[6]=et=>Q())},{icon:Ot(()=>[Ft(mt(R),null,{default:Ot(()=>[Ft(mt(re),{icon:"carbon:download"})]),_:1})]),default:Ot(()=>[Io(" "+Qn(mt(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}});class lg{id;phone;createdAt;updatedAt;constructor(e,n,l,o){this.phone=e,this.id=n,this.createdAt=l,this.updatedAt=o}}const ag=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-phones"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/newsletter/phones",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},ng=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-phones"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/newsletter/phones/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},og=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["newsletter-phones"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/phones/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},sg=u=>{const{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return ft({queryKey:["newsletter-phones"],operation:"batch",getItemId:a=>{if(a instanceof lg){if(typeof a.id!="string"&&typeof a.id!="number")throw new Error("NewsletterPhone ID must be string or number");return a.id}return`temp-${crypto.randomUUID()}`},getBatchData:a=>({type:"remove",ids:a}),mutationFn:async a=>{l.start();try{for(let t=0;t<a.length;t++)await e({url:`/newsletter/phones/${a[t]}`,method:"delete"});return a}finally{l.finish()}},mutationOptions:{onSuccess:()=>{o.success(n("success"))},onError:a=>{o.error(n("anErrorOccurred"))},...u}})},rg=()=>{const{request:u}=Fe();return Na(async e=>{const n=await u({method:"post",url:"/newsletter/phones",data:e});if(n.failure&&n.error)throw new Error(n.error);return n.result.data},{})},{defineComponent:ig}=await se("vue"),{unref:vt,createVNode:qt,withCtx:Rt,toDisplayString:Wn,createTextVNode:Vo,resolveComponent:Nb,createElementVNode:qc,openBlock:bi,createBlock:Rc,createCommentVNode:cg,isRef:jc,Fragment:dg,createElementBlock:ug}=await se("vue"),pg={class:"flex items-center justify-center"},{ref:vn,h:wa,computed:mg,onBeforeUnmount:fg}=await se("vue"),_g=ig({__name:"Phone",setup(u){const e=Ge(),n=qe(),l=Wl(),{data:o,refetch:a,isPending:t}=Od(),{mutate:s,isPending:K}=sg(),{mutate:Z}=og(),{mutate:ce,isPending:q}=ag(),{mutate:ye,isPending:O}=ng(),{mutateAsync:V}=rg(),{t:d,locale:E}=ke(),ae=vn(""),i=vn(),me={pageSize:12,prefix:({itemCount:r})=>wa("div",{class:"font-bold"},{default:()=>`${d("total")}: ${r}`})},z=[{type:"selection"},{title:d("phone"),key:"phone",resizable:!0,width:200,ellipsis:{tooltip:!0},render(r){return wa("div",{},{default:()=>r.phone})}},{title:d("updateAt"),key:"updatedAt",width:125,render(r){return wa("div",{},{default:()=>Bn(r.updatedAt,{locale:E.value,outPattern:"DD MMMM YYYY"})})}},{title:d("createdAt"),key:"createdAt",width:125,render(r){return wa("div",{},{default:()=>Bn(r.createdAt,{locale:E.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>wa(Zt,{ref:i,placeholder:d("search"),value:ae.value,onInput:r=>{ae.value=r}},{suffix:()=>wa(R,{},{default:()=>wa(re,{icon:"carbon:search"})})}),key:"actions",width:150,render(r){return wa("div",{class:"flex justify-end items-center w-full"},[wa(Be,{size:"small",type:"warning",secondary:!0,onClick:()=>{v(r)},renderIcon:()=>wa(R,null,{default:()=>wa(re,{icon:"carbon:edit"})})}),wa("div",{class:"w-2"}),wa(Be,{size:"small",type:"error",secondary:!0,onClick:()=>{l.warning({title:d("confirm"),content:d("confirmDeletePhoneNumber"),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:async()=>{r.id&&Z({id:r.id})}})},renderIcon:()=>wa(R,null,{default:()=>wa(re,{icon:"carbon:trash-can"})})})])},fixed:"right"}],W=mg(()=>{if(!ae.value)return o.value;const r=o.value?.filter(x=>x.phone.toLowerCase().includes(ae.value.toLowerCase()));return i.value&&i.value.focus(),r}),M=vn(!1),S=vn(!1),I=vn(null),L=vn(null),A=vn({phone:""}),j={phone:[{required:!0,message:d("fillRequired")},{trigger:["input"],validator(r,x){return x&&!wu(x)?new Error(d("invalidNumber")):!0}}]},v=r=>{I.value=le.cloneDeep(r),r?A.value=le.cloneDeep(r):A.value={phone:""},S.value=!0},B=async()=>(L.value?.validate(async r=>{if(!r){const x={phone:A.value.phone.replace(/\s+/g,"")};I.value?I.value.phone!==A.value.phone.replace(/\s+/g,"")&&(o.value||[]).findIndex(ie=>ie.phone==A.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):ye({id:I.value.id,...x}):(o.value||[]).findIndex(ie=>ie.phone==A.value.phone.replace(/\s+/g,""))>-1?n.error(d("samePhoneNumberMessage")):ce(x),S.value=!1}}),!1);let C=null;const w=()=>{C&&(C.destroy(),C=null)};fg(w);const N=(r,x)=>x.map(ie=>r.map(P=>ie[P])),U=()=>{C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(r=>{var x=["no","phone","createdAt","updatedAt"];const ie=le.sortBy(o.value?.map((ge,De)=>({no:De+1,...ge})),"phone"),P=N(x,ie);try{r.export_json_to_excel({header:x,data:P,filename:`newsletter_phones_${Date.now().toString()}`,autoWidth:!0,bookType:"xlsx"}),w()}catch{w(),n.error(d("anErrorOccurred"))}})},Q=()=>{C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}),ts(()=>import("./export2excel-BFwIBCeN.js"),__vite__mapDeps([27,28,29,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30])).then(r=>{var x=["phone"];const ie=N(x,[{phone:"+XXX XXX XXXXX"}]);try{r.export_json_to_excel({header:x,data:ie,filename:"newsletter_phones_template",autoWidth:!0,bookType:"xlsx"}),w()}catch{w(),n.error(d("anErrorOccurred"))}})},J=vn(!1),F=async({results:r})=>{M.value=!0,e.start(),C||(C=n.info(d("pleaseBePatient"),{duration:0,type:"loading"}));for(let x=0;x<r.length;x++)r[x].phone&&o.value?.findIndex(ie=>ie.phone.replace(/\s+/g,"")==r[x].phone.replace(/\s+/g,""))==-1&&(C&&(C.content=`${d("pleaseBePatient")}: ${x} ${d("task_s")} / ${r.length}`),await V({phone:r[x].phone.replace(/\s+/g,"")}));await a(),w(),e.finish(),M.value=!1,J.value=!1},h=vn(Ql()),f=vn([]),D=r=>r.id,xe=r=>{f.value=r},$=()=>{f.value=[],h.value=Ql()},m=async()=>(f.value.length?l.warning({title:d("confirm"),content:d("deleteSelectionWarningMessage",[f.value.length]),positiveText:d("yes"),negativeText:d("no"),onPositiveClick:()=>{s(f.value,{onSuccess:()=>{$()}})}}):n.warning(d("noItemSelected")),!1);return(r,x)=>{const ie=Vd,P=wl,ge=Da,De=vl,ne=za,ue=Dr,xt=Ur,Vt=ku,$e=ga,Ye=va,Ve=Xl,et=Dd;return bi(),ug(dg,null,[qt(ge,{to:"#alt-action"},{default:Rt(()=>[qt(P,null,{default:Rt(()=>[qt(ie,{onPositiveClick:x[0]||(x[0]=H=>U())},{trigger:Rt(()=>[qt(vt(Be),{type:"success",secondary:""},{icon:Rt(()=>[qt(vt(R),{size:"18"},{default:Rt(()=>[qt(vt(re),{icon:"carbon:upload"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("export")),1)]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("exportDataInExcelFile")),1)]),_:1}),qt(vt(Be),{type:"info",secondary:"",onClick:x[1]||(x[1]=H=>J.value=!0)},{icon:Rt(()=>[qt(vt(R),{size:"18"},{default:Rt(()=>[qt(vt(re),{icon:"carbon:download"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("import")),1)]),_:1}),qt(vt(Be),{type:"primary",secondary:"",onClick:x[2]||(x[2]=H=>v(null))},{icon:Rt(()=>[qt(vt(R),{size:"18"},{default:Rt(()=>[qt(vt(re),{icon:"carbon:add-alt"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("addPhoneNumber")),1)]),_:1})]),_:1})]),_:1}),qt(ne,{name:"slide-fade",appear:""},{default:Rt(()=>[vt(f).length?(bi(),Rc(De,{key:0,class:"my-2",size:"small",embedded:""},{default:Rt(()=>[qt(P,{align:"center",justify:"space-between"},{default:Rt(()=>[qc("span",null,Wn(vt(d)("nbItemsSelected",[vt(f).length])),1),qt(P,{align:"center",justify:"space-between"},{default:Rt(()=>[qt(vt(Be),{type:"error",size:"small",secondary:"",onClick:m},{icon:Rt(()=>[qt(vt(R),null,{default:Rt(()=>[qt(vt(re),{icon:"carbon:trash-can"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("delete")),1)]),_:1}),qt(vt(Be),{type:"warning",size:"small",secondary:"",onClick:$},{icon:Rt(()=>[qt(vt(R),null,{default:Rt(()=>[qt(vt(re),{icon:"carbon:close"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("cancelSelection")),1)]),_:1})]),_:1})]),_:1})]),_:1})):cg("",!0)]),_:1}),qt(xt,null,{default:Rt(()=>[(bi(),Rc(ue,{key:vt(h),columns:z,data:vt(W),pagination:me,loading:vt(t)||vt(K),"single-line":!1,"scroll-x":800,"row-key":D,size:"small",striped:"","onUpdate:checkedRowKeys":xe},null,8,["data","loading","row-key"]))]),_:1}),qt(Ve,{show:vt(S),"onUpdate:show":x[4]||(x[4]=H=>jc(S)?S.value=H:null),loading:vt(q)||vt(O),preset:"dialog",style:{width:"400px"},"show-icon":!1,bordered:!1,"mask-closable":!1,title:vt(I)?vt(d)("editPhoneNumber"):vt(d)("addPhoneNumber"),"positive-text":vt(d)("validate"),"negative-text":vt(d)("cancel"),onPositiveClick:B,onNegativeClick:x[5]||(x[5]=H=>S.value=!1)},{default:Rt(()=>[qt(Ye,{ref_key:"formRef",ref:L,class:"mt-5",model:vt(A),rules:j,"show-require-mark":!1,size:"medium"},{default:Rt(()=>[qt($e,{label:vt(d)("phone"),path:"phone"},{default:Rt(()=>[qt(Vt,{modelValue:vt(A).phone,"onUpdate:modelValue":x[3]||(x[3]=H=>vt(A).phone=H)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),qt(Ve,{show:vt(J),"onUpdate:show":x[7]||(x[7]=H=>jc(J)?J.value=H:null),loading:vt(M),preset:"dialog",style:{width:"600px"},bordered:!1,"mask-closable":!1,title:vt(d)("import")},{default:Rt(()=>[qt(et,{class:"my-5","on-success":F}),qc("div",pg,[qt(vt(Be),{type:"info",size:"small",secondary:"",onClick:x[6]||(x[6]=H=>Q())},{icon:Rt(()=>[qt(vt(R),null,{default:Rt(()=>[qt(vt(re),{icon:"carbon:download"})]),_:1})]),default:Rt(()=>[Vo(" "+Wn(vt(d)("downloadDataTemplate")),1)]),_:1})])]),_:1},8,["show","loading","title"])],64)}}}),vg="/creopse/assets/content-model-thumbnail-BbXSrXk4.svg",{useModel:Kc,mergeModels:yg,defineComponent:gg}=await se("vue"),{unref:Pt,toDisplayString:Ho,createElementVNode:As,createTextVNode:wr,resolveComponent:zb,withCtx:Jt,createVNode:Cl,renderList:ki,Fragment:Ps,openBlock:Ja,createElementBlock:Ls,createBlock:Qo,createCommentVNode:Yc,normalizeStyle:wi,normalizeClass:hg}=await se("vue"),bg={class:"text-base"},kg={class:"text-base"},{ref:So,inject:wg,computed:xg,watch:$g,reactive:xr}=await se("vue"),Cg=gg({__name:"DataForm",props:yg({submitData:{},contentModel:{}},{show:{type:Boolean,default:!1,required:!0},showModifiers:{},data:{default:{},required:!0},dataModifiers:{}}),emits:["update:show","update:data"],setup(u){const e=u,n=Kc(u,"show"),l=Kc(u,"data"),o=Ge(),a=qe(),{t}=ke(),{tr:s,pickByTheme:K,editKeysToCamelCase:Z}=Ze(),ce=So(null),q=So(!1),ye=wg("currentEditItem"),O=xg(()=>le.isEqual(l.value,ye?.value)&&le.isEqual(d.value,ae.value)),V=()=>{n.value=!1,q.value=!1},d=So({}),E=So(Ql()),ae=So({}),i=So(),me=So();$g(()=>n.value,W=>{W&&(Ni(l.value.contentModelData)?d.value=xr(l.value.contentModelData):d.value=xr({}),le.forIn(Z(e.contentModel?.dataStructure??{}),(M,S)=>{(!d.value[S]||Array.isArray(d.value[S])&&d.value[S].length==0)&&(S==="index"?d.value[S]=xr({}):d.value[S]=xr([]))}),ae.value=le.cloneDeep(d.value),E.value=Ql())},{immediate:!0});const z=async()=>{q.value=!0,o.start();const W=i.value&&await i.value(),M=me.value&&await me.value();(!i.value||W)&&(!me.value||M)?await e.submitData(d.value):a.error(t("mandatoryFieldsNotFilledIn")),o.finish(),q.value=!1};return(W,M)=>{const S=Ri,I=Tr,L=Mr,A=re,j=R,v=Be,B=wl,C=vl,w=Ra,N=en,U=ya,Q=zi;return Ja(),Qo(Q,{modelValue:n.value,"onUpdate:modelValue":M[3]||(M[3]=J=>n.value=J),"close-on-esc":!1,closable:!1,onOnSizeChange:M[4]||(M[4]=J=>{ce.value=J})},{header:Jt(()=>[As("div",bg,[Cl(S,{depth:"1"},{default:Jt(()=>[wr(Ho(Pt(s)(e.contentModel?.title))+" ",1),As("span",null," Â -Â "+Ho(Pt(ye)?Pt(t)("editItem"):Pt(t)("addItem")),1)]),_:1})])]),"header-extra":Jt(()=>[Cl(B,{align:"center"},{default:Jt(()=>[As("span",kg,Ho(Pt(t)("status"))+":",1),Cl(L,{value:l.value.isActive,"onUpdate:value":M[0]||(M[0]=J=>l.value.isActive=J),name:"isActive",class:"w-full"},{default:Jt(()=>[Cl(I,{value:!1,label:Pt(t)("hidden"),class:"w-[50%]"},null,8,["label"]),Cl(I,{value:!0,label:Pt(t)("visible"),class:"w-[50%]"},null,8,["label"])]),_:1},8,["value"]),M[5]||(M[5]=As("div",{class:"w-4"},null,-1)),Cl(v,{secondary:"",type:"success",title:Pt(t)("save"),loading:Pt(q),disabled:Pt(O),onClick:M[1]||(M[1]=J=>z())},{icon:Jt(()=>[Cl(j,null,{default:Jt(()=>[Cl(A,{icon:"carbon:save"})]),_:1})]),default:Jt(()=>[wr(" "+Ho(Pt(t)("save")),1)]),_:1},8,["title","loading","disabled"]),Cl(v,{secondary:"",type:"error",title:Pt(t)("close"),disabled:Pt(q),onClick:M[2]||(M[2]=J=>V())},{icon:Jt(()=>[Cl(j,null,{default:Jt(()=>[Cl(A,{icon:"carbon:close"})]),_:1})]),default:Jt(()=>[wr(" "+Ho(Pt(t)("close")),1)]),_:1},8,["title","disabled"])]),_:1})]),default:Jt(()=>[As("section",{style:wi(`min-height: ${Pt(ce)?.windowHeight-Pt(ce)?.headerHeight-5}px`),class:hg(`w-full h-full ${Pt(K)("bg-slate-200","bg-zinc-800")}`)},[Cl(U,{"x-gap":"12",cols:"1 s:2 m:2 l:2 xl:2 2xl:2",responsive:"screen"},{default:Jt(()=>[Cl(N,{class:"ml-4 mt-2"},{default:Jt(()=>[Cl(w,{style:wi(`height: ${Pt(ce)?.windowHeight-Pt(ce)?.headerHeight-50}px`)},{default:Jt(()=>[(Ja(!0),Ls(Ps,null,ki(Pt(Z)(u.contentModel?.dataStructure),(J,F)=>(Ja(),Ls(Ps,{key:F},[String(F)==="index"?(Ja(),Qo(C,{key:0,size:"small",class:"mb-2"},{default:Jt(()=>[(Ja(),Qo(Gs,{key:`${Pt(E)}-${F}-form-1`,modelValue:Pt(d)[F],"onUpdate:modelValue":h=>Pt(d)[F]=h,items:J,onUpdate:(h,f)=>{i.value=f}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1024)):Yc("",!0)],64))),128))]),_:1},8,["style"])]),_:1}),Cl(N,{class:"mr-4 mt-2"},{default:Jt(()=>[Cl(w,{style:wi(`height: ${Pt(ce)?.windowHeight-Pt(ce)?.headerHeight-50}px`)},{default:Jt(()=>[(Ja(!0),Ls(Ps,null,ki(Pt(Z)(u.contentModel?.dataStructure),(J,F)=>(Ja(),Ls(Ps,{key:F},[String(F)!=="index"?(Ja(),Qo(C,{key:0,title:Pt(s)(J.title),size:"small",class:"mb-2"},{"header-extra":Jt(()=>[Cl(v,{quaternary:"",size:"small",onClick:()=>Pt(d)[F].push({})},{icon:Jt(()=>[Cl(j,null,{default:Jt(()=>[Cl(A,{icon:"carbon:add-alt"})]),_:1})]),default:Jt(()=>[wr(" "+Ho(Pt(t)("add")),1)]),_:1},8,["onClick"])]),default:Jt(()=>[(Ja(!0),Ls(Ps,null,ki(Pt(d)[F],(h,f)=>(Ja(),Qo(C,{key:f,title:String(f+1),size:"small",class:"mb-2"},{"header-extra":Jt(()=>[Cl(v,{secondary:"",type:"error",size:"small",onClick:()=>Pt(d)[F].splice(f,1)},{icon:Jt(()=>[Cl(j,null,{default:Jt(()=>[Cl(A,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),default:Jt(()=>[(Ja(),Qo(Gs,{key:`${Pt(E)}-${F}-${f}-form-2`,modelValue:Pt(d)[F][f],"onUpdate:modelValue":D=>Pt(d)[F][f]=D,items:J.items,onUpdate:(D,xe)=>{me.value=xe}},null,8,["modelValue","onUpdate:modelValue","items","onUpdate"]))]),_:2},1032,["title"]))),128))]),_:2},1032,["title"])):Yc("",!0)],64))),128))]),_:1},8,["style"])]),_:1})]),_:1})],6)]),_:1},8,["modelValue"])}}}),{useModel:Ig,mergeModels:Vg,defineComponent:Sg}=await se("vue"),{unref:jt,resolveComponent:Ab,createVNode:Bl,toDisplayString:$r,createTextVNode:Gc,withCtx:la,renderList:Eg,Fragment:Hc,openBlock:Bs,createElementBlock:Qc,createElementVNode:Cr,createBlock:xi,normalizeClass:Ug,isRef:Mg}=await se("vue"),{inject:Tg,ref:Fs,h:Wc,computed:Xc}=await se("vue"),Dg={class:"flex items-center justify-between"},Ng={class:"flex flex-col"},zg={class:"text-sm font-bold"},Ag={class:"text-xs font-normal"},Pg=Sg({__name:"Links",props:{show:{type:Boolean,default:!1,required:!0},showModifiers:{}},emits:Vg(["update"],["update:show"]),setup(u,{emit:e}){const{t:n}=ke(),{pickByTheme:l,tr:o,mergeArrays:a}=Ze(),{extractItemTitle:t}=Ws(),{data:s}=lo(),{mutate:K,isPending:Z}=zd(),ce=Wl(),q=e,ye=Ig(u,"show"),O=Tg("currentEditItem"),V=async B=>{ce.warning({title:n("confirm"),content:n("confirmDeleteLink"),positiveText:n("yes"),negativeText:n("no"),onPositiveClick:async()=>{K({id:O?.value?.id,relatedItems:O?.value?.relatedItems?.filter(C=>C.id!==B.id)?.map(C=>C.id)},{onSuccess:()=>{q("update",O?.value?.id)}})}})},d=B=>s.value?.find(C=>C.id===B.contentModelId),E=Fs(!1),ae=Fs(null),i=Fs({contentModelId:null,itemId:null}),me={contentModelId:[{required:!0,message:n("fillRequired")}],itemId:[{required:!0,message:n("fillRequired")}]},z=async()=>(ae.value?.validate(async B=>{if(!B){const C=O?.value?.relatedItems?.map(w=>w.id)||[];K({id:O?.value?.id,relatedItems:[...C,i.value.itemId]},{onSuccess:()=>{q("update",O?.value?.id),E.value=!1}})}}),!1),W=B=>Wc("span",{},{default:()=>o(B.title)}),M=B=>Xc(()=>Wc("span",{},{default:()=>t(B,d(B))})),S=Fs([]),I=Fs([]),{mutateAsync:L,isPending:A}=Ki(),j=async(B,C)=>{if(!B.length){I.value=[];return}I.value=await L({query:B,contentModelId:C})},v=Xc(()=>a(S.value,I.value,"id").filter(B=>B.id!==O?.value?.id));return(B,C)=>{const w=re,N=Be,U=wl,Q=R,J=vl,F=Ra,h=Aa,f=ao,D=Xl,xe=Ka,$=ga,m=va;return Bs(),Qc(Hc,null,[Bl(D,{show:ye.value,"onUpdate:show":C[2]||(C[2]=r=>ye.value=r),preset:"card",style:{width:"650px"},bordered:!1,"show-icon":!1,"mask-closable":!1,closable:!1,title:jt(n)("linkContentModelItems")},{"header-extra":la(()=>[Bl(U,{align:"center"},{default:la(()=>[Bl(N,{secondary:"",size:"small",type:"primary",disabled:jt(Z),onClick:C[0]||(C[0]=r=>E.value=!0)},{default:la(()=>[Bl(w,{icon:"carbon:add-alt",class:"mr-1"}),Gc(" "+$r(jt(n)("add")),1)]),_:1},8,["disabled"]),Bl(N,{secondary:"",size:"small",type:"error",disabled:jt(Z),onClick:C[1]||(C[1]=r=>ye.value=!1)},{default:la(()=>[Bl(w,{icon:"carbon:close",class:"mr-1"}),Gc(" "+$r(jt(n)("close")),1)]),_:1},8,["disabled"])]),_:1})]),default:la(()=>[Bl(f,{show:jt(Z)},{default:la(()=>[jt(O)?.relatedItems?.length?(Bs(),xi(F,{key:0,style:{"max-height":"400px"}},{default:la(()=>[(Bs(!0),Qc(Hc,null,Eg(jt(O)?.relatedItems,r=>(Bs(),xi(J,{key:r.id,embedded:"",size:"small",class:"mb-2"},{default:la(()=>[Cr("div",Dg,[Cr("div",Ng,[Cr("span",zg,$r(jt(t)(r,d(r))),1),Cr("span",Ag,$r(jt(o)(d(r)?.title)),1)]),Bl(U,null,{default:la(()=>[Bl(N,{size:"small",type:"error",secondary:"",onClick:x=>V(r)},{default:la(()=>[Bl(Q,null,{default:la(()=>[Bl(w,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(Bs(),xi(J,{key:1,size:"large",class:Ug(`mb-2 !border-dashed !border-2 ${jt(l)("!border-zinc-300","!border-zinc-600")}`)},{default:la(()=>[Bl(h,{description:jt(n)("noLinkAdded")},{icon:la(()=>[Bl(Q,null,{default:la(()=>[Bl(w,{icon:"carbon:text-link"})]),_:1})]),_:1},8,["description"])]),_:1},8,["class"]))]),_:1},8,["show"])]),_:1},8,["show","title"]),Bl(D,{show:jt(E),"onUpdate:show":C[6]||(C[6]=r=>Mg(E)?E.value=r:null),loading:jt(Z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:jt(n)("addLink"),"positive-text":jt(n)("validate"),"negative-text":jt(n)("cancel"),onPositiveClick:z,onNegativeClick:C[7]||(C[7]=r=>E.value=!1)},{default:la(()=>[Bl(m,{ref_key:"formRef",ref:ae,model:jt(i),rules:me,"show-require-mark":!1,size:"medium",class:"my-5"},{default:la(()=>[Bl($,{label:jt(n)("contentModel"),path:"contentModelId"},{default:la(()=>[Bl(xe,{value:jt(i).contentModelId,"onUpdate:value":C[3]||(C[3]=r=>jt(i).contentModelId=r),options:jt(s),placeholder:jt(n)("contentModel"),"render-label":W,"label-field":"title","value-field":"id",filterable:"",class:"w-full"},null,8,["value","options","placeholder"])]),_:1},8,["label"]),Bl($,{label:jt(n)("itemToLink"),path:"itemId"},{default:la(()=>[Bl(xe,{value:jt(i).itemId,"onUpdate:value":C[4]||(C[4]=r=>jt(i).itemId=r),options:jt(v)||[],placeholder:jt(n)("itemToLink"),"render-label":r=>M(r).value,loading:jt(A),disabled:!jt(i).contentModelId,"value-field":"id",filterable:"",remote:"",class:"w-full",onSearch:C[5]||(C[5]=r=>j(r,jt(i).contentModelId))},null,8,["value","options","placeholder","render-label","loading","disabled"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),{unref:Lg}=await se("vue"),{useModel:Bg,defineComponent:Fg}=await se("vue"),{unref:zt,toDisplayString:Tn,createTextVNode:Xn,resolveComponent:Pb,isRef:Os,withCtx:Bt,createVNode:At,createElementVNode:qs,openBlock:Jn,createElementBlock:Rs,createCommentVNode:Jc,renderList:Og,Fragment:Zc,createBlock:$i}=await se("vue"),qg={key:0,class:"w-full flex items-center justify-between gap-4"},Rg={class:"flex items-center gap-3"},jg={key:0},Kg={class:"flex items-center justify-center h-full"},Yg=["src"],Gg={class:"text-center text-dimgray text-sm"},Hg={key:1,class:"flex items-center justify-center"},{ref:Za,computed:ed,watch:Qg,provide:Wg}=await se("vue"),Xg=Fg({__name:"Items",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const{t:e}=ke(),{extractItemTitle:n}=Ws(),{tr:l}=Ze(),o=Wl(),a=qe(),t=Bg(u,"modelValue"),s=Za(!1),K=Za(!1),Z=Za([]),{mutate:ce}=Tp(),{mutate:q}=Mp(),{mutate:ye}=zd(),{mutate:O}=Dp(),V=Za(0),d=Za(24),E=Za(1),ae=ed(()=>({contentModelId:t.value?.id,pageSize:d.value,page:E.value})),i=F=>{E.value=F,W()},me=F=>{d.value=F,W()},{data:z,refetch:W,isPending:M}=lu(ae);Qg(()=>z.value,F=>{Z.value=F?.items||[],V.value=F?.meta?.total||0,E.value=F?.meta?.currentPage||1},{deep:!0,immediate:!0});const S=Za(null),I=Za({title:"",contentModelData:"",isActive:!0}),L=F=>{S.value=le.cloneDeep(F),F?I.value=le.cloneDeep(F):I.value={title:"",contentModelData:"",isActive:!0},s.value=!0},A=F=>{S.value=le.cloneDeep(F),K.value=!0},j=async F=>{await W();const h=Z.value.find(f=>f.id===F);h&&A(h)},v=async F=>{o.warning({title:e("confirm"),content:e("confirmDeleteItem"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{F.id&&ce({id:F.id})}})},B=async F=>{const h={title:I.value.title,contentModelData:F,isActive:I.value.isActive,contentModelId:t.value?.id};S.value?ye({id:S.value.id,...h}):q(h),s.value=!1},C=Za(!1),w=Za(Ql()),N=Za({}),U=ed(()=>{let F=0;for(const h in N.value)N.value[h]&&F++;return F});function Q(){N.value={},W()}const J=async()=>(U.value?o.warning({title:e("confirm"),content:e("deleteSelectionWarningMessage",[U.value]),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{O(N.value,{onSuccess:()=>{N.value={}}})}}):a.warning(e("noItemSelected")),!1);return Wg("currentEditItem",S),(F,h)=>{const f=no,D=re,xe=R,$=Be,m=wl,r=Da,x=$d,ie=Ar,P=Ia,ge=vl,De=za,ne=en,ue=ya,xt=Do,Vt=ao,$e=Aa;return Jn(),Rs(Zc,null,[At(r,{to:"#alt-action"},{default:Bt(()=>[At(m,{align:"center"},{default:Bt(()=>[At(f,{checked:zt(C),"onUpdate:checked":[h[0]||(h[0]=Ye=>Os(C)?C.value=Ye:null),h[1]||(h[1]=Ye=>{for(const Ve of zt(Z))Ve.id&&(zt(N)[Ve.id]=Ye);w.value=("uuidv4"in F?F.uuidv4:Lg(Ql))()})],disabled:!zt(Z).length},{default:Bt(()=>[Xn(Tn(zt(e)("selectAll")),1)]),_:1},8,["checked","disabled"]),At($,{type:"primary",secondary:"",onClick:h[2]||(h[2]=Ye=>L(null))},{icon:Bt(()=>[At(xe,{size:"18"},{default:Bt(()=>[At(D,{icon:"carbon:add-alt"})]),_:1})]),default:Bt(()=>[Xn(" "+Tn(zt(e)("addItem")),1)]),_:1})]),_:1})]),_:1}),At(x,{class:"mt-2 mb-5",onBack:h[3]||(h[3]=Ye=>t.value=null)},{title:Bt(()=>[Xn(Tn(zt(l)(t.value?.title)),1)]),back:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"ic:baseline-arrow-back-ios"})]),_:1})]),extra:Bt(()=>[zt(U)>0?(Jn(),Rs("section",qg,[qs("span",null,Tn(zt(e)("nbItemsSelected",[zt(U)])),1),qs("section",Rg,[At($,{type:"error",secondary:"",size:"small",onClick:J},{icon:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"carbon:trash-can"})]),_:1})]),default:Bt(()=>[Xn(" "+Tn(zt(e)("delete")),1)]),_:1}),At($,{type:"warning",secondary:"",size:"small",onClick:Q},{icon:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"carbon:close-filled"})]),_:1})]),default:Bt(()=>[Xn(" "+Tn(zt(e)("cancelSelection")),1)]),_:1})])])):Jc("",!0)]),_:1}),zt(Z).length&&!zt(M)?(Jn(),Rs("section",jg,[At(ue,{"x-gap":"12","y-gap":"12",cols:"1 400:2 600:3 900:3 1400:4 1800:5"},{default:Bt(()=>[(Jn(!0),Rs(Zc,null,Og(zt(Z),(Ye,Ve)=>(Jn(),$i(ne,{key:Ve},{default:Bt(()=>[At(De,{name:"slide-fade",appear:""},{default:Bt(()=>[At(ge,{size:"small",bordered:"",hoverable:""},{cover:Bt(()=>[qs("div",Kg,[qs("img",{src:t.value?.imageUrl??zt(vg),class:"w-full h-[200px] object-cover"},null,8,Yg)])]),header:Bt(()=>[qs("div",Gg,[At(ie,{"line-clamp":1,"expand-trigger":"click"},{default:Bt(()=>[Ye.id?(Jn(),$i(f,{key:zt(w),checked:zt(N)[Ye.id],"onUpdate:checked":et=>zt(N)[Ye.id]=et,class:"mr-1"},null,8,["checked","onUpdate:checked"])):Jc("",!0),Xn(" "+Tn(zt(n)(Ye,t.value)),1)]),_:2},1024)])]),action:Bt(()=>[At(m,{justify:"space-between",align:"center"},{default:Bt(()=>[At(P,{bordered:!1,type:Ye.isActive?"success":"error"},{default:Bt(()=>[Xn(Tn(Ye.isActive?zt(e)("visible"):zt(e)("hidden")),1)]),_:2},1032,["type"]),At(m,null,{default:Bt(()=>[At($,{ternary:"",circle:"",title:zt(e)("edit"),onClick:et=>L(Ye)},{icon:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"carbon:edit"})]),_:1})]),_:1},8,["title","onClick"]),At($,{ternary:"",circle:"",title:zt(e)("links"),onClick:et=>A(Ye)},{icon:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"carbon:link"})]),_:1})]),_:1},8,["title","onClick"]),At($,{ternary:"",circle:"",title:zt(e)("delete"),onClick:et=>v(Ye)},{icon:Bt(()=>[At(xe,null,{default:Bt(()=>[At(D,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),At(xt,{page:zt(E),"onUpdate:page":[h[4]||(h[4]=Ye=>Os(E)?E.value=Ye:null),i],class:"mt-10 justify-center","show-size-picker":"","page-size":zt(d),"page-sizes":[12,24,36,48,60],"page-count":Math.ceil(zt(V)/zt(d)),"onUpdate:pageSize":me},{prefix:Bt(()=>[Xn(Tn(`${zt(V)} ${zt(e)("item_s")}`),1)]),_:1},8,["page","page-size","page-count"])])):zt(M)?(Jn(),Rs("section",Hg,[At(Vt,{size:"medium"})])):(Jn(),$i($e,{key:2,description:zt(e)("noItemAdded"),class:"my-16"},null,8,["description"])),At(Cg,{show:zt(s),"onUpdate:show":h[5]||(h[5]=Ye=>Os(s)?s.value=Ye:null),data:zt(I),"onUpdate:data":h[6]||(h[6]=Ye=>Os(I)?I.value=Ye:null),"content-model":t.value,"submit-data":B},null,8,["show","data","content-model"]),At(Pg,{show:zt(K),"onUpdate:show":h[7]||(h[7]=Ye=>Os(K)?K.value=Ye:null),onUpdate:j},null,8,["show"])],64)}}}),Jg=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["content-models"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/content-models",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},Zg=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["content-models"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/content-models/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},e1=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["content-models"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/content-models/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},{defineComponent:t1}=await se("vue"),{unref:Te,resolveComponent:Lb,createVNode:bt,withCtx:kt,toDisplayString:yn,createTextVNode:Dn,openBlock:Ua,createBlock:Nn,createCommentVNode:Wo,renderList:l1,Fragment:Ci,createElementBlock:Ir,withModifiers:Vr,normalizeClass:td,createElementVNode:Sr,isRef:Er,normalizeStyle:a1}=await se("vue"),n1={key:2},o1={class:"flex items-center"},s1={class:"text-base"},r1={class:"mt-4"},{inject:i1,ref:gn,watch:c1}=await se("vue"),{defineStore:d1}=await se("pinia"),u1="previews",p1=t1({__name:"index",setup(u){const{t:e}=ke(),{tr:n,pickByTheme:l,fileUrl:o,isInDevMode:a,formatKey:t}=Ze(),{data:s}=lo(),{mutate:K,isPending:Z}=e1(),{mutate:ce,isPending:q}=Jg(),{mutate:ye,isPending:O}=Zg(),V=Wl(),d=i1("appConfig"),E=gn(24),ae=gn(1),i=F=>{E.value=F},me={name:"",title:"",image:"",description:"",slug:"",titleFieldName:"",hasPermalink:!1},z=gn(!1),W=gn(null),M=gn(me),S={name:[{required:!0,message:e("fillRequired")}],title:[{required:!0,message:e("fillRequired")}]},I=gn(null),L=F=>{I.value=le.cloneDeep(F),M.value=le.cloneDeep(F||me),z.value=!0},A=async()=>(W.value?.validate(async F=>{if(!F){const h={id:I.value?.id||0,name:M.value.name,title:M.value.title,image:M.value.image,description:M.value.description,titleFieldName:M.value.titleFieldName,hasPermalink:M.value.hasPermalink};I.value?ye(h,{onSuccess:()=>{}}):ce(h,{onSuccess:()=>{}}),z.value=!1}}),!1),j=async F=>{V.warning({title:e("confirm"),content:e("confirmDeleteContentModel"),positiveText:e("yes"),negativeText:e("no"),onPositiveClick:async()=>{K({id:F.id||0})}})},v=gn(null),B=gn(!1),C=F=>{v.value=F,B.value=!0},w=async F=>{ye({id:v.value?.id||0,hasPermalink:v.value?.hasPermalink,dataStructure:F},{onSuccess:h=>{C(h)}})},N=gn(!1),U=async F=>{M.value.image=F,N.value=!1},Q=()=>{M.value.image=""},J=d1("content-models-management",()=>({itemsContentModel:gn(null)}))();return c1(()=>M.value.title,F=>{I.value||M.value.name.length<=21&&(M.value.name=Md(n(F),{trim:!0,lower:!0,strict:!0}))}),(F,h)=>{const f=re,D=R,xe=Be,$=Da,m=wl,r=ja,x=vl,ie=Do,P=Aa,ge=za,De=xa,ne=ga,ue=Zt,xt=en,Vt=qi,$e=Fn,Ye=ya,Ve=no,et=va,H=Xl,b=to;return Ua(),Ir(Ci,null,[Te(J).itemsContentModel?Wo("",!0):(Ua(),Nn($,{key:0,to:"#alt-action"},{default:kt(()=>[Te(s)&&Te(s).length?(Ua(),Nn(xe,{key:0,type:"primary",secondary:"",onClick:h[0]||(h[0]=p=>L(null))},{icon:kt(()=>[bt(D,{size:"18"},{default:kt(()=>[bt(f,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[Dn(" "+yn(Te(e)("addContentModel")),1)]),_:1})):Wo("",!0)]),_:1})),Te(J).itemsContentModel?(Ua(),Nn(Xg,{key:1,modelValue:Te(J).itemsContentModel,"onUpdate:modelValue":h[1]||(h[1]=p=>Te(J).itemsContentModel=p)},null,8,["modelValue"])):(Ua(),Ir("section",n1,[bt(ge,{appear:"",name:"slide-fade"},{default:kt(()=>[Sr("section",null,[Te(s)&&Te(s).length?(Ua(),Ir(Ci,{key:0},[(Ua(!0),Ir(Ci,null,l1(Te(s).slice((Te(ae)-1)*Te(E),Te(ae)*Te(E)),p=>(Ua(),Nn(x,{key:p.id,embedded:"",size:"small",class:"mb-2"},{header:kt(()=>[Sr("div",o1,[Te(a)?(Ua(),Nn(m,{key:0},{default:kt(()=>[bt(xe,{size:"small",type:"primary",secondary:"",onClick:Vr(rt=>C(p),["stop"])},{default:kt(()=>[bt(D,{class:"mr-1"},{default:kt(()=>[bt(f,{icon:"carbon:data-1"})]),_:1}),Dn(" "+yn(Te(e)("dataStructure")),1)]),_:1},8,["onClick"]),bt(xe,{size:"small",type:"primary",secondary:"",onClick:Vr(rt=>L(p),["stop"])},{default:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:edit"})]),_:1})]),_:1},8,["onClick"]),bt(xe,{size:"small",type:"error",secondary:"",onClick:Vr(rt=>j(p),["stop"])},{default:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:trash-can"})]),_:1})]),_:1},8,["onClick"])]),_:2},1024)):Wo("",!0),Te(a)?(Ua(),Nn(r,{key:1,vertical:"",class:td(Te(l)("!bg-zinc-400","!bg-slate-500"))},null,8,["class"])):Wo("",!0),Sr("span",s1,yn(Te(n)(p.title)),1)])]),"header-extra":kt(()=>[bt(xe,{size:"small",type:"primary",secondary:"",onClick:Vr(rt=>Te(J).itemsContentModel=p,["stop"])},{icon:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:arrow-right"})]),_:1})]),default:kt(()=>[Dn(" "+yn(Te(e)("open")),1)]),_:1},8,["onClick"])]),_:2},1024))),128)),bt(ie,{page:Te(ae),"onUpdate:page":h[2]||(h[2]=p=>Er(ae)?ae.value=p:null),class:"mt-5 justify-end","show-size-picker":"","page-size":Te(E),"page-sizes":[6,12,24,36,48,60],"page-count":Math.ceil(Te(s).length/Te(E)),"onUpdate:pageSize":i},{prefix:kt(()=>[Dn(yn(`${Te(s).length} ${Te(e)("contentModel_s")}`),1)]),_:1},8,["page","page-size","page-count"])],64)):(Ua(),Nn(x,{key:1,size:"large",class:td(`mb-2 !border-dashed !border-2 ${Te(l)("!border-zinc-300","!border-zinc-600")}`)},{default:kt(()=>[bt(P,{description:Te(e)("noContentModelAvailable")},{icon:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:model-alt"})]),_:1})]),extra:kt(()=>[Sr("div",r1,[bt(xe,{size:"small",secondary:"",onClick:h[3]||(h[3]=p=>L(null))},{icon:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:add-alt"})]),_:1})]),default:kt(()=>[Dn(" "+yn(Te(e)("addContentModel")),1)]),_:1})])]),_:1},8,["description"])]),_:1},8,["class"]))])]),_:1}),bt(H,{show:Te(z),"onUpdate:show":h[11]||(h[11]=p=>Er(z)?z.value=p:null),loading:Te(q)||Te(O)||Te(Z),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:Te(I)?Te(e)("editContentModel"):Te(e)("addContentModel"),"positive-text":Te(e)("validate"),"negative-text":Te(e)("cancel"),onPositiveClick:A,onNegativeClick:h[12]||(h[12]=p=>z.value=!1)},{default:kt(()=>[bt(et,{ref_key:"formRef",ref:W,model:Te(M),rules:S,"show-require-mark":!1,size:"medium",class:"my-5"},{default:kt(()=>[bt(ne,{"show-label":!1,path:"title"},{default:kt(()=>[bt(De,{modelValue:Te(M).title,"onUpdate:modelValue":h[4]||(h[4]=p=>Te(M).title=p),placeholder:Te(e)("title"),class:"w-full",sync:""},{label:kt(()=>[Dn(yn(Te(e)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),bt(ne,{"show-label":!1,path:"description"},{default:kt(()=>[bt(De,{modelValue:Te(M).description,"onUpdate:modelValue":h[5]||(h[5]=p=>Te(M).description=p),placeholder:Te(e)("description"),type:"textarea",class:"w-full",rows:3,sync:""},{label:kt(()=>[Dn(yn(Te(e)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),bt(Ye,{"x-gap":"12",span:24},{default:kt(()=>[bt(xt,{span:14},{default:kt(()=>[bt(ne,{label:Te(e)("contentModelKey"),path:"name"},{default:kt(()=>[bt(ue,{value:Te(M).name,placeholder:Te(e)("contentModelKey"),class:"w-full","onUpdate:value":h[6]||(h[6]=p=>Te(M).name=Te(t)(p))},null,8,["value","placeholder"])]),_:1},8,["label"]),bt(ne,{label:Te(e)("titleSingletonKey"),path:"titleFieldName"},{default:kt(()=>[bt(ue,{value:Te(M).titleFieldName,placeholder:Te(e)("titleSingletonKey"),class:"w-full","onUpdate:value":h[7]||(h[7]=p=>Te(M).titleFieldName=Te(t)(p))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),bt($e,{span:10,label:Te(e)("itemsPreview"),path:"image"},{default:kt(()=>[bt(m,{align:"center",justify:"start",style:{height:"100%",width:"100%"}},{default:kt(()=>[bt(Vt,{class:"cursor-pointer","object-fit":"cover",style:a1("border: 1px dashed "+Te(l)("green","white")),size:150,src:Te(o)(Te(M).image||""),onClick:h[8]||(h[8]=p=>N.value=!0)},{default:kt(()=>[Te(M).image?Wo("",!0):(Ua(),Nn(D,{key:0,size:64},{default:kt(()=>[bt(f,{icon:"carbon:image",class:"text-gray-400"})]),_:1}))]),_:1},8,["style","src"]),Te(M).image?(Ua(),Nn(xe,{key:0,quaternary:"",onClick:h[9]||(h[9]=p=>Q())},{icon:kt(()=>[bt(D,null,{default:kt(()=>[bt(f,{icon:"carbon:trash-can"})]),_:1})]),default:kt(()=>[Dn(" "+yn(Te(e)("clear")),1)]),_:1})):Wo("",!0)]),_:1})]),_:1},8,["label"])]),_:1}),bt(ne,{"show-label":!1,path:"hasPermalink"},{default:kt(()=>[bt(Ve,{checked:Te(M).hasPermalink,"onUpdate:checked":h[10]||(h[10]=p=>Te(M).hasPermalink=p)},{default:kt(()=>[Dn(yn(Te(e)("associatePermalinkToContentModel")),1)]),_:1},8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),bt(b,{show:Te(N),"onUpdate:show":h[13]||(h[13]=p=>Er(N)?N.value=p:null),title:Te(e)("selectImage"),"upload-config":{folder:u1,limit:0,maxSize:0,baseUrl:Te(d)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:U},null,8,["show","title","upload-config"]),bt(Bd,{show:Te(B),"onUpdate:show":h[14]||(h[14]=p=>Er(B)?B.value=p:null),title:Te(n)(Te(v)?.title),"raw-data-structure":Te(v)?.dataStructure,"update-data-structure":w},null,8,["show","title","raw-data-structure"])]))],64)}}});var Pn=(u=>(u.NEWS_TAG="news-tag",u.NEWS_CATEGORY="news-category",u.NEWS_ARTICLE="news-article",u.CONTENT_MODEL="content-model",u))(Pn||{});const m1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["permalinks"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:"/permalinks",data:t});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},{defineComponent:f1}=await se("vue"),{unref:tt,resolveComponent:Bb,createVNode:wt,withCtx:It,toDisplayString:Gl,createTextVNode:_1,openBlock:Zn,createBlock:Xo,createCommentVNode:v1,createElementVNode:Fl,renderList:y1,Fragment:ld,createElementBlock:ad}=await se("vue"),g1={class:"text-base font-bold"},h1={class:"text-sm"},b1={class:"text-xs text-slate-400"},k1={class:"text-xs text-slate-400"},w1={class:"text-xs text-slate-400"},x1={class:"text-sm"},$1={class:"text-xs text-slate-400"},C1={class:"text-xs text-slate-400"},I1={class:"text-xs text-slate-400"},V1={class:"text-sm"},S1={class:"text-xs text-slate-400"},E1={class:"text-xs text-slate-400"},U1={class:"text-xs text-slate-400"},M1={class:"text-base font-bold"},T1={class:"text-sm"},D1={class:"text-xs text-slate-400"},N1={class:"text-xs text-slate-400"},z1={class:"text-xs text-slate-400"},{ref:nd,computed:od,h:A1}=await se("vue"),P1=f1({__name:"index",setup(u){const{t:e}=ke(),{tr:n}=Ze(),{data:l}=Pi(),{data:o,refetch:a}=lo({enabled:!1}),{data:t,refetch:s}=au({enabled:!1}),{mutate:K,isPending:Z}=m1(),ce=[{pathPrefix:"/news/article",contentType:Pn.NEWS_ARTICLE,contentParam:"slug",pageId:null},{pathPrefix:"/news/category",contentType:Pn.NEWS_CATEGORY,contentParam:"slug",pageId:null},{pathPrefix:"/news/tag",contentType:Pn.NEWS_TAG,contentParam:"slug",pageId:null}],q=nd(ce),ye=nd(),O=od(()=>o.value?.filter(me=>me.hasPermalink)),V=async(me=!1)=>{me&&await a(),await s(),q.value=le.cloneDeep(ce);for(let z=0;z<(O.value?.length||0);z++)q.value.push({pathPrefix:`/${O.value?.[z].slug}`,contentType:Pn.CONTENT_MODEL,contentParam:"id",contentId:O.value?.[z].id,pageId:null});for(let z=0;z<q.value.length;z++)switch(q.value[z].contentType){case Pn.NEWS_ARTICLE:case Pn.NEWS_CATEGORY:case Pn.NEWS_TAG:{const W=t.value?.find(M=>M.contentType===q.value[z].contentType);W&&(q.value[z].pathPrefix=W.pathPrefix,q.value[z].contentParam=W.contentParam,q.value[z].pageId=W.pageId,q.value[z].permalinkId=W.id)}break;case Pn.CONTENT_MODEL:{const W=t.value?.find(M=>M.contentType===q.value[z].contentType&&M.contentId===q.value[z].contentId);W&&(q.value[z].pathPrefix=W.pathPrefix,q.value[z].contentParam=W.contentParam,q.value[z].pageId=W.pageId,q.value[z].permalinkId=W.id)}break}ye.value=le.cloneDeep(q.value)};V(!0);const d=async()=>{K(q.value,{onSuccess:()=>{V()}})},E=od(()=>le.isEqual(q.value,ye.value)),ae=me=>A1("span",{},{default:()=>n(me.title)}),i=me=>/^\/[a-zA-Z0-9/\-_{}?]*$/.test(me);return(me,z)=>{const W=re,M=R,S=Be,I=Da,L=Zt,A=en,j=Ka,v=ya,B=vl,C=so,w=oo,N=ja;return Zn(),ad(ld,null,[wt(I,{to:"#alt-action"},{default:It(()=>[wt(S,{secondary:"",type:"primary",loading:tt(Z),disabled:tt(E),onClick:z[0]||(z[0]=U=>d())},{icon:It(()=>[wt(M,null,{default:It(()=>[wt(W,{icon:"carbon:save"})]),_:1})]),default:It(()=>[_1(" "+Gl(tt(e)("save")),1)]),_:1},8,["loading","disabled"])]),_:1}),wt(B,{embedded:"",size:"small"},{default:It(()=>[wt(w,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:U})=>[wt(M,null,{default:It(()=>[U?(Zn(),Xo(W,{key:0,icon:"fa-solid:chevron-left"})):(Zn(),Xo(W,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:It(()=>[...z[10]||(z[10]=[Fl("span",null,null,-1)])]),default:It(()=>[wt(C,{name:"1"},{header:It(()=>[Fl("span",g1,Gl(tt(e)("news")),1)]),default:It(()=>[wt(B,{size:"small"},{header:It(()=>[Fl("span",h1,Gl(tt(e)("articles")),1)]),default:It(()=>[wt(v,{cols:"24","x-gap":"12"},{default:It(()=>[wt(A,{span:"10"},{default:It(()=>[Fl("span",b1,Gl(tt(e)("pathPrefix")),1),wt(L,{value:tt(q)[0].pathPrefix,"onUpdate:value":z[1]||(z[1]=U=>tt(q)[0].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",k1,Gl(tt(e)("contentParam")),1),wt(L,{value:tt(q)[0].contentParam,"onUpdate:value":z[2]||(z[2]=U=>tt(q)[0].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",w1,Gl(tt(e)("contentPage")),1),wt(j,{value:tt(q)[0].pageId,"onUpdate:value":z[3]||(z[3]=U=>tt(q)[0].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":ae,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),wt(B,{size:"small"},{header:It(()=>[Fl("span",x1,Gl(tt(e)("categories")),1)]),default:It(()=>[wt(v,{cols:"24","x-gap":"12"},{default:It(()=>[wt(A,{span:"10"},{default:It(()=>[Fl("span",$1,Gl(tt(e)("pathPrefix")),1),wt(L,{value:tt(q)[1].pathPrefix,"onUpdate:value":z[4]||(z[4]=U=>tt(q)[1].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",C1,Gl(tt(e)("contentParam")),1),wt(L,{value:tt(q)[1].contentParam,"onUpdate:value":z[5]||(z[5]=U=>tt(q)[1].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",I1,Gl(tt(e)("contentPage")),1),wt(j,{value:tt(q)[1].pageId,"onUpdate:value":z[6]||(z[6]=U=>tt(q)[1].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":ae,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1}),wt(B,{size:"small"},{header:It(()=>[Fl("span",V1,Gl(tt(e)("tags")),1)]),default:It(()=>[wt(v,{cols:"24","x-gap":"12"},{default:It(()=>[wt(A,{span:"10"},{default:It(()=>[Fl("span",S1,Gl(tt(e)("pathPrefix")),1),wt(L,{value:tt(q)[2].pathPrefix,"onUpdate:value":z[7]||(z[7]=U=>tt(q)[2].pathPrefix=U),"allow-input":i,size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",E1,Gl(tt(e)("contentParam")),1),wt(L,{value:tt(q)[2].contentParam,"onUpdate:value":z[8]||(z[8]=U=>tt(q)[2].contentParam=U),readonly:"",size:"small"},null,8,["value"])]),_:1}),wt(A,{span:"7"},{default:It(()=>[Fl("span",U1,Gl(tt(e)("contentPage")),1),wt(j,{value:tt(q)[2].pageId,"onUpdate:value":z[9]||(z[9]=U=>tt(q)[2].pageId=U),options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":ae,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","options","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),wt(N,{class:"!my-2"}),tt(O)?.length&&tt(q).length>3?(Zn(),Xo(B,{key:0,embedded:"",size:"small"},{default:It(()=>[wt(w,{"default-expanded-names":["1"],"display-directive":"show"},{"header-extra":It(({collapsed:U})=>[wt(M,null,{default:It(()=>[U?(Zn(),Xo(W,{key:0,icon:"fa-solid:chevron-left"})):(Zn(),Xo(W,{key:1,icon:"fa-solid:chevron-down"}))]),_:2},1024)]),arrow:It(()=>[...z[11]||(z[11]=[Fl("span",null,null,-1)])]),default:It(()=>[wt(C,{name:"1"},{header:It(()=>[Fl("span",M1,Gl(tt(e)("contentModels")),1)]),default:It(()=>[(Zn(!0),ad(ld,null,y1(tt(O),(U,Q)=>(Zn(),Xo(B,{key:U.id,size:"small"},{header:It(()=>[Fl("span",T1,Gl(tt(n)(U.title)),1)]),default:It(()=>[wt(v,{cols:"24","x-gap":"12"},{default:It(()=>[wt(A,{span:"10"},{default:It(()=>[Fl("span",D1,Gl(tt(e)("pathPrefix")),1),wt(L,{value:tt(q)[Q+3].pathPrefix,"onUpdate:value":J=>tt(q)[Q+3].pathPrefix=J,"allow-input":i,size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),wt(A,{span:"7"},{default:It(()=>[Fl("span",N1,Gl(tt(e)("contentParam")),1),wt(L,{value:tt(q)[Q+3].contentParam,"onUpdate:value":J=>tt(q)[Q+3].contentParam=J,readonly:"",size:"small"},null,8,["value","onUpdate:value"])]),_:2},1024),wt(A,{span:"7"},{default:It(()=>[Fl("span",z1,Gl(tt(e)("contentPage")),1),wt(j,{value:tt(q)[Q+3].pageId,"onUpdate:value":J=>tt(q)[Q+3].pageId=J,options:tt(l)||[],placeholder:tt(e)("selectPage"),"render-label":ae,"label-field":"title","value-field":"id",filterable:"",clearable:"",size:"small",class:"w-full"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):v1("",!0)],64)}}}),L1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-campaigns"],operation:"insert",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"post",url:"/newsletter/campaigns",data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},B1=u=>{const{displayFormErrors:e}=Ze(),{request:n}=Fe(),{t:l}=ke(),o=qe(),a=Ge();return ft({queryKey:["newsletter-campaigns"],operation:"update",getItemId:t=>t.id??`temp-${crypto.randomUUID()}`,mutationFn:async t=>{a.start();const s=await n({method:"put",url:`/newsletter/campaigns/${t.id}`,data:Ht(t,["id"])});if(a.finish(),s.failure&&s.error)throw new Error(s.error);return s.result.data},mutationOptions:{onSuccess:()=>{o.success(l("success"))},onError:t=>{t?.response?.data?.errorCode===Lt.FORM_INVALID_DATA?e(t?.response?.data?.data):o.error(l("anErrorOccurred"))},...u}})},F1=u=>{const{request:e}=Fe(),{t:n}=ke(),l=qe(),o=Ge();return ft({queryKey:["newsletter-campaigns"],operation:"remove",getItemId:a=>a.id??`temp-${crypto.randomUUID()}`,mutationFn:async({id:a})=>{o.start();const t=await e({method:"delete",url:`/newsletter/campaigns/${a}`});if(o.finish(),!t.success)throw new Error(t.error);return t.result.data},mutationOptions:{onSuccess:()=>{l.success(n("success"))},onError:a=>{l.error(n("anErrorOccurred"))},...u}})},O1=()=>{const{displayFormErrors:u}=Ze(),{request:e}=Fe(),{t:n}=ke(),l=Ge(),o=qe();return Na(async a=>{const t=await e({url:"/sms",method:"post",data:a.data});if(t.failure&&t.error)throw new Error(t.error);return t.result},{onMutate:()=>l.start(),onSettled:()=>l.finish(),onSuccess:(a,t)=>{t.onSuccess?t.onSuccess(a):o.success(n("success"))},onError:(a,t)=>{if(t.onError)t.onError(a);else switch(a?.response?.data?.errorCode){case Lt.FORM_INVALID_DATA:u(a?.response?.data?.data);break;default:o.error(n("sendingFailed"))}},retry:2})},{unref:sd}=await se("vue"),{defineComponent:q1}=await se("vue"),{unref:ze,createVNode:_l,withCtx:Nl,toDisplayString:js,createTextVNode:Ks,resolveComponent:Fb,createElementVNode:Ii,isRef:rd,renderList:R1,Fragment:id,openBlock:Ys,createElementBlock:cd,createBlock:Vi}=await se("vue"),j1={class:"w-full"},{ref:Eo,h:sl,computed:dd}=await se("vue"),K1=q1({__name:"Campaign",setup(u){const e=qe(),n=Wl(),{getSettingValue:l}=nu(),{ckEditorToolbarItems:o}=Ze(),{t:a,locale:t}=ke(),{data:s}=Fd(),{data:K}=Od(),{data:Z,isPending:ce}=Oy(),{mutate:q,isPending:ye}=L1(),{mutate:O}=F1(),{mutate:V,isPending:d}=B1(),{mutate:E}=xu(),{mutate:ae}=O1(),i=Eo(""),me=Eo(),z={pageSize:12,prefix:({itemCount:U})=>sl("div",{class:"font-bold"},{default:()=>`${a("total")}: ${U}`})},W=[{title:a("title"),key:"title",resizable:!0,width:200,ellipsis:{tooltip:!0},fixed:"left",sortOrder:!1,sorter:"default",render(U){return sl("div",{},{default:()=>U.title})}},{title:a("subject"),key:"subject",resizable:!0,width:250,ellipsis:{tooltip:!0},render(U){return sl("small",{},{default:()=>U.subject})}},{title:a("numberOfRecipients"),key:"recipients",width:200,render(U){return sl("div",{},{default:()=>U.recipients.length})},sortOrder:!1,sorter:"default"},{title:a("updateAt"),key:"updatedAt",width:150,render(U){return sl("div",{},{default:()=>Bn(U.updatedAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:a("createdAt"),key:"createdAt",width:150,render(U){return sl("div",{},{default:()=>Bn(U.createdAt,{locale:t.value,outPattern:"DD MMMM YYYY"})})}},{title:()=>sl(Zt,{ref:me,placeholder:a("search"),value:i.value,onInput:U=>{i.value=U}},{suffix:()=>sl(R,{},{default:()=>sl(re,{icon:"carbon:search"})})}),key:"actions",width:175,render(U){return sl("div",{class:"flex justify-end items-center w-full"},[sl(Be,{size:"small",type:"primary",secondary:!0,title:a("history"),onClick:()=>{A.value=U,L.value=!0},renderIcon:()=>sl(R,null,{default:()=>sl(re,{icon:"mdi:history"})})}),sl("div",{class:"w-2"}),sl(Be,{size:"small",type:"info",secondary:!0,title:a("launchCampaign"),onClick:()=>{const Q=n.info({title:a("launchCampaign"),content:a("confirmLaunchCampaign",[U.recipients.length]),closeOnEsc:!1,maskClosable:!1,positiveText:a("yes"),negativeText:a("cancel"),onPositiveClick:async()=>{Q.loading=!0,E({data:{title:U.title,subject:U.subject,content:U.content,recipients:U.recipients.filter(J=>Zo.isEmail(J)),tags:[]},onSuccess:J=>{const F=l("phone","string")?.split(",")[0];ae({data:{from:F.replace(/\s+/g,""),content:U.rawContent,recipients:U.recipients.filter(h=>!Zo.isEmail(h))},onSuccess:h=>{const f=U.history||[];f.push({id:Ql(),date:ou(new Date,{locale:t.value,outPattern:"DD MMMM YYYY - HH:mm"}),report:"Email: "+J.message+" Phone: "+h.message}),V({id:U.id,history:f}),Q.loading=!1},onError:()=>{Q.loading=!1}})},onError:()=>{Q.loading=!1}})}})},renderIcon:()=>sl(R,null,{default:()=>sl(re,{icon:"mdi:send"})})}),sl("div",{class:"w-2"}),sl(Be,{size:"small",type:"warning",secondary:!0,title:a("edit"),onClick:()=>{C(U)},renderIcon:()=>sl(R,null,{default:()=>sl(re,{icon:"carbon:edit"})})}),sl("div",{class:"w-2"}),sl(Be,{size:"small",type:"error",secondary:!0,title:a("delete"),onClick:()=>{n.warning({title:a("confirm"),content:a("confirmDeleteCampaign"),positiveText:a("yes"),negativeText:a("no"),onPositiveClick:async()=>{U.id&&O({id:U.id})}})},renderIcon:()=>sl(R,null,{default:()=>sl(re,{icon:"carbon:trash-can"})})})])},fixed:"right"}],M=dd(()=>{if(!i.value)return Z.value;const U=Z.value?.filter(Q=>Q.title.toLowerCase().includes(i.value.toLowerCase())||Q.subject.toLowerCase().includes(i.value.toLowerCase()));return me.value&&me.value.focus(),U}),S=dd(()=>[...(s.value||[]).map(U=>({recipient:U.email,type:"email"})),...(K.value||[]).map(U=>({recipient:U.phone,type:"phone"}))]),I=Eo(!1),L=Eo(!1),A=Eo(null),j=Eo(null),v=Eo({title:"",subject:"",content:"",rawContent:"",recipients:[]}),B={title:[{required:!0,message:a("fillRequired")}],subject:[{required:!0,message:a("fillRequired")}],content:[{required:!0,message:a("fillRequired")}],rawContent:[{required:!0,message:a("fillRequired")}],recipients:[{required:!0,message:a("fillRequired")}]},C=U=>{A.value=le.cloneDeep(U),U?v.value=le.cloneDeep(U):v.value={title:"",subject:"",content:"",rawContent:"",recipients:[]},I.value=!0},w=async()=>(j.value?.validate(async U=>{if(!U){const Q={title:v.value.title,subject:v.value.subject,content:v.value.content,rawContent:v.value.rawContent,recipients:v.value.recipients};A.value?A.value.title!==v.value.title&&(Z.value||[]).findIndex(J=>J.title==v.value.title)>-1?e.error(a("sameCampaignTitleMessage")):V({id:A.value.id,...Q}):(Z.value||[]).findIndex(J=>J.title==v.value.title)>-1?e.error(a("sameCampaignTitleMessage")):q(Q),I.value=!1}}),!1),N=(U,Q)=>le.isEqual(U.slice().sort(),Q.slice().sort());return(U,Q)=>{const J=Da,F=Dr,h=Ur,f=ga,D=Sd,xe=no,$=Ka,m=va,r=Xl,x=pu,ie=Id,P=Cd,ge=Ra,De=Aa;return Ys(),cd(id,null,[_l(J,{to:"#alt-action"},{default:Nl(()=>[_l(ze(Be),{type:"primary",secondary:"",onClick:Q[0]||(Q[0]=ne=>C(null))},{icon:Nl(()=>[_l(ze(R),{size:"18"},{default:Nl(()=>[_l(ze(re),{icon:"carbon:add-alt"})]),_:1})]),default:Nl(()=>[Ks(" "+js(ze(a)("addCampaign")),1)]),_:1})]),_:1}),_l(h,null,{default:Nl(()=>[_l(F,{columns:W,data:ze(M),pagination:z,loading:ze(ce),"single-line":!1,"scroll-x":1300,size:"small",striped:""},null,8,["data","loading"])]),_:1}),_l(r,{show:ze(I),"onUpdate:show":Q[9]||(Q[9]=ne=>rd(I)?I.value=ne:null),loading:ze(ye)||ze(d),preset:"dialog",style:{width:"600px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ze(A)?ze(a)("editCampaign"):ze(a)("addCampaign"),"positive-text":ze(a)("validate"),"negative-text":ze(a)("cancel"),onPositiveClick:w,onNegativeClick:Q[10]||(Q[10]=ne=>I.value=!1)},{default:Nl(()=>[_l(m,{ref_key:"formRef",ref:j,class:"mt-5",model:ze(v),rules:B,"show-require-mark":!1,size:"medium"},{default:Nl(()=>[_l(f,{label:ze(a)("title"),path:"title"},{default:Nl(()=>[_l(ze(Zt),{value:ze(v).title,"onUpdate:value":Q[1]||(Q[1]=ne=>ze(v).title=ne),placeholder:ze(a)("title"),class:"w-full"},null,8,["value","placeholder"])]),_:1},8,["label"]),_l(f,{label:ze(a)("subject"),path:"subject"},{default:Nl(()=>[_l(ze(Zt),{value:ze(v).subject,"onUpdate:value":Q[2]||(Q[2]=ne=>ze(v).subject=ne),placeholder:ze(a)("subject"),type:"textarea",class:"w-full",rows:2},null,8,["value","placeholder"])]),_:1},8,["label"]),_l(f,{label:ze(a)("content"),path:"content"},{default:Nl(()=>[Ii("div",j1,[_l(D,{modelValue:ze(v).content,"onUpdate:modelValue":Q[3]||(Q[3]=ne=>ze(v).content=ne),"toolbar-items":ze(o),placeholder:ze(a)("content"),"should-not-group-when-full":!1,"enable-upload":""},null,8,["modelValue","toolbar-items","placeholder"])])]),_:1},8,["label"]),_l(f,{label:ze(a)("rawContent"),path:"rawContent"},{default:Nl(()=>[_l(ze(Zt),{value:ze(v).rawContent,"onUpdate:value":Q[4]||(Q[4]=ne=>ze(v).rawContent=ne),placeholder:ze(a)("rawContentPlaceholder"),type:"textarea",class:"w-full",rows:5},null,8,["value","placeholder"])]),_:1},8,["label"]),_l(f,{label:ze(a)("recipients"),path:"recipients"},{default:Nl(()=>[_l($,{value:ze(v).recipients,"onUpdate:value":Q[8]||(Q[8]=ne=>ze(v).recipients=ne),options:ze(S),placeholder:ze(a)("recipients"),loading:ze(ce),"max-tag-count":"responsive",filterable:"",multiple:"","value-field":"recipient","label-field":"recipient",class:"w-full"},{action:Nl(()=>[_l(xe,{size:"large",class:"w-full","default-checked":ze(S).length&&N(ze(v).recipients,ze(S).filter(ne=>ne.type=="email").map(ne=>ne.recipient)),"onUpdate:checked":Q[5]||(Q[5]=ne=>{ne?ze(v).recipients=ze(S).filter(ue=>ue.type=="email").map(ue=>ue.recipient):ze(v).recipients=ze(v).recipients.filter(ue=>!("_v"in U?U._v:sd(Zo)).isEmail(ue))})},{default:Nl(()=>[Ks(js(ze(a)("selectOnlyEmails")),1)]),_:1},8,["default-checked"]),Q[12]||(Q[12]=Ii("div",{class:"h-2"},null,-1)),_l(xe,{size:"large",class:"w-full","default-checked":ze(S).length&&N(ze(v).recipients,ze(S).filter(ne=>ne.type=="phone").map(ne=>ne.recipient)),"onUpdate:checked":Q[6]||(Q[6]=ne=>{ne?ze(v).recipients=ze(S).filter(ue=>ue.type=="phone").map(ue=>ue.recipient):ze(v).recipients=ze(v).recipients.filter(ue=>("_v"in U?U._v:sd(Zo)).isEmail(ue))})},{default:Nl(()=>[Ks(js(ze(a)("selectOnlyPhoneNumbers")),1)]),_:1},8,["default-checked"]),Q[13]||(Q[13]=Ii("div",{class:"h-2"},null,-1)),_l(xe,{size:"large",class:"w-full","default-checked":ze(S).length&&ze(v).recipients.length===ze(S).length,"onUpdate:checked":Q[7]||(Q[7]=ne=>{ne?ze(v).recipients=ze(S).filter(ue=>ue.recipient).map(ue=>ue.recipient):ze(v).recipients=[]})},{default:Nl(()=>[Ks(js(ze(a)("selectAll")),1)]),_:1},8,["default-checked"])]),_:1},8,["value","options","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"]),_l(r,{show:ze(L),"onUpdate:show":Q[11]||(Q[11]=ne=>rd(L)?L.value=ne:null),loading:ze(d),preset:"card",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:ze(a)("history")},{default:Nl(()=>[ze(A)?.history?.length?(Ys(),Vi(ge,{key:0,style:{"max-height":"400px"}},{default:Nl(()=>[_l(P,{hoverable:""},{default:Nl(()=>[(Ys(!0),cd(id,null,R1(ze(A)?.history.slice().reverse(),ne=>(Ys(),Vi(ie,{key:ne.id},{default:Nl(()=>[_l(x,{title:ne.date,"content-style":"margin-top: 10px;"},{default:Nl(()=>[Ks(js(ne.report),1)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})):(Ys(),Vi(De,{key:1,description:ze(a)("noCampaignHistory"),class:"mb-10 mt-5"},null,8,["description"]))]),_:1},8,["show","loading","title"])],64)}}}),Y1=()=>{const{request:u}=Fe(),{t:e}=ke(),n=Ge(),l=qe();return Na(async o=>{const a=await u({url:"/app-information",method:"put",data:o});if(a.failure&&a.error)throw new Error(a.error);return a.result.data},{onMutate:()=>n.start(),onSettled:()=>n.finish(),onSuccess:(o,a)=>{l.success(e("success"))},onError:(o,a)=>{l.error(e("unableToUpdateAppInformation"))}})},{defineComponent:G1}=await se("vue"),{unref:y,createVNode:X,withCtx:oe,toDisplayString:Xt,createTextVNode:Uo,resolveComponent:H1,openBlock:Kt,createBlock:zn,createCommentVNode:ia,createElementBlock:Il,createElementVNode:Tt,isRef:Si,vShow:Ei,withDirectives:Ui,normalizeStyle:An,Fragment:Mo,renderList:ud,TransitionGroup:Q1,withKeys:W1}=await se("vue"),X1={id:"header-btn"},J1={key:1,id:"alt-action"},Z1={key:"basic-info"},eh={class:"text-xs"},th={class:"text-xs"},lh={class:"text-xs"},ah={class:"text-xs"},nh={class:"text-xs"},oh={class:"text-xs"},sh={class:"text-xs"},rh={class:"flex items-center gap-2 w-full"},ih={key:"branding"},ch={class:"text-sm"},dh={class:"text-sm"},uh={class:"flex flex-col items-center justify-center text-gray-400"},ph={class:"text-sm"},mh={class:"flex flex-col items-center justify-center text-gray-400"},fh={class:"text-sm"},_h={class:"flex flex-col items-center justify-center text-gray-400"},vh={class:"text-sm"},yh={class:"flex flex-col items-center justify-center text-gray-400"},gh={class:"text-sm"},hh={class:"flex items-center justify-between"},bh={class:"font-bold"},kh={class:"flex items-center"},wh={class:"flex items-center justify-between"},xh={class:"font-bold"},$h={class:"flex items-center"},Ch={class:"flex items-center justify-between"},Ih={class:"font-bold"},Vh={class:"flex items-center"},Sh={key:"social-networks"},Eh={class:"text-xs"},Uh={key:"newsletter-email"},Mh={key:"newsletter-phone"},Th={key:"newsletter-campaign"},Dh={key:"ads"},Nh={key:"videos"},zh={key:"content-models"},Ah={key:"menus"},Ph={key:"content-permalinks"},Lh={key:"page-sections"},{defineComponent:Bh,inject:Fh,ref:Ma,h:Mi,computed:Ti,watch:Di,onMounted:pd}=await se("vue"),{storeToRefs:Oh,defineStore:qh}=await se("pinia"),Rh=Bh({name:_d.CONTENT_MANAGEMENT.NAME}),jh=G1({...Rh,setup(u){const e=["basic-info","branding","social-networks","newsletter-email","newsletter-phone","newsletter-campaign","ads","videos","menus","content-permalinks","content-models","page-sections","add-new-page"],n=b=>e.includes(b),{t:l,locale:o}=ke(),a=Cu(),t=Wl(),{appPrimaryColor:s,pickByTheme:K,fileUrl:Z,isLgScreen:ce,isMdScreen:q,isSmScreen:ye,isXlScreen:O,is2XlScreen:V,tr:d}=Ze(),E=su({enabled:!1}),{isLightTheme:ae,contentLayoutSize:i}=Oh(To());Ai();const{data:me,refetch:z}=Pi(),{mutate:W,isPending:M}=Y1(),{mutate:S,isPending:I}=Pd(),{mutate:L,isPending:A}=nm(),j=Fh("appConfig"),v=Ma({name:"",icon:"",oneColorIcon:"",logo:"",oneColorLogo:"",phone:"",email:"",address:"",postalCode:"",description:"",primaryColor:"",secondaryColor:"",accentColor:"",facebook:"",twitter:"",instagram:"",whatsapp:"",linkedin:"",youtube:"",pinterest:"",snapchat:"",tiktok:"",telegram:"",discord:"",reddit:"",tumblr:"",vimeo:"",messenger:"",twitch:"",github:"",dribbble:"",behance:"",medium:"",stackOverflow:"",playstore:"",appstore:"",threads:"",additionalInfo:""}),B=Ma(v.value),C=qh("content-management",()=>({currentMenuItemKey:Ma("basic-info")}))(),w=(b,p)=>()=>Mi(R,{},{default:()=>Mi(re,{icon:b})}),N=(b,p,rt=!1)=>()=>Mi("span",{id:p,class:{"page-menu-item":rt}},{default:()=>b}),U=Ti(()=>{const b=[{label:N(l("basicInfo"),"basic-info"),key:"basic-info",icon:w("carbon:identification")},{label:N(l("branding"),"branding"),key:"branding",icon:w("carbon:color-palette")},{label:N(l("socialNetworks"),"social-networks"),key:"social-networks",icon:w("carbon:share")},{key:"divider",type:"divider"},{label:N(l("newsletterEmails"),"newsletter-email"),key:"newsletter-email",icon:w("carbon:at")},{label:N(l("newsletterNumbers"),"newsletter-phone"),key:"newsletter-phone",icon:w("carbon:phone")},{label:N(l("newsletterCampaigns"),"newsletter-campaign"),key:"newsletter-campaign",icon:w("carbon:bullhorn")},{key:"divider",type:"divider"},{label:N(l("ads"),"ads"),key:"ads",icon:w("ic:baseline-ads-click")},{key:"divider",type:"divider"},{label:N(l("videos"),"videos"),key:"videos",icon:w("carbon:video-player")},{key:"divider",type:"divider"},{label:N(l("menusManagement"),"menus"),key:"menus",icon:w("carbon:menu")},{label:N(l("contentPermalinks"),"content-permalinks"),key:"content-permalinks",icon:w("carbon:link")},{key:"divider",type:"divider"},{label:N(l("contentModels"),"content-models"),key:"content-models",icon:w("carbon:model-alt")},{label:N(l("pageSections"),"page-sections"),key:"page-sections",icon:w("carbon:list-boxes")},{key:"divider",type:"divider"}];for(const p of me.value||[])b.push({label:N(d(p.title).startsWith(l("page"))?d(p.title):`${l("page")} ${d(p.title)}`,`${p.slug}-page`,!0),key:`${p.slug}-page`,icon:w("carbon:document",`${p.slug}-page`)});return me.value&&me.value.length>0&&b.push({key:"divider",type:"divider"}),b.push({label:N(l("addPage"),"add-new-page"),key:"add-new-page",icon:w("carbon:add-alt")}),b}),Q=Ti(()=>le.isEqual(v.value,B.value)),J=Ti(()=>i.value.height-165),F=Ma(null),h={email:[{required:!1,message:l("fillRequired")},{trigger:["input"],validator(b,p){return p&&!Zo.isEmail(p)?new Error(l("invalidEmail")):!0}}]},f=Ma();Di(()=>f.value,b=>{v.value.additionalInfo=JSON.stringify(b||"[]")},{deep:!0});const D=Ma(null),xe={},$=[{name:"facebook",icon:"fa-brands:facebook"},{name:"twitter",icon:"fa6-brands:x-twitter"},{name:"instagram",icon:"fa-brands:instagram"},{name:"whatsapp",icon:"fa-brands:whatsapp"},{name:"linkedin",icon:"fa-brands:linkedin"},{name:"youtube",icon:"fa-brands:youtube"},{name:"pinterest",icon:"fa-brands:pinterest"},{name:"snapchat",icon:"fa-brands:snapchat"},{name:"tiktok",icon:"fa-brands:tiktok"},{name:"threads",icon:"fa6-brands:threads"},{name:"telegram",icon:"fa-brands:telegram"},{name:"discord",icon:"fa-brands:discord"},{name:"reddit",icon:"fa-brands:reddit"},{name:"tumblr",icon:"fa-brands:tumblr"},{name:"vimeo",icon:"fa-brands:vimeo"},{name:"messenger",icon:"fa6-brands:facebook-messenger"},{name:"twitch",icon:"fa-brands:twitch"},{name:"github",icon:"fa-brands:github"},{name:"dribbble",icon:"fa-brands:dribbble"},{name:"behance",icon:"fa-brands:behance"},{name:"medium",icon:"fa-brands:medium"},{name:"stackOverflow",icon:"fa-brands:stack-overflow"},{name:"playstore",icon:"fa-brands:google-play"},{name:"appstore",icon:"fa-brands:app-store"}],m=Ma("logos"),r=Ma(!1),x=async b=>{switch(m.value){case"logos":v.value.logo=b;break;case"icons":v.value.icon=b;break;case"monochrome-logos":v.value.oneColorLogo=b;break;case"monochrome-icons":v.value.oneColorIcon=b;break}r.value=!1},ie={name:"",title:"",content:"",slug:""},P=Ma(!1),ge=Ma(null),De=Ma(ie),ne={title:[{required:!0,message:l("fillRequired")}]},ue=Ma(null),xt=b=>{ue.value=le.cloneDeep(b),De.value=le.cloneDeep(b||ie),P.value=!0},Vt=async()=>(ge.value?.validate(async b=>{if(!b){const p={title:De.value.title};ue.value?S({slug:ue.value.slug,...p},{onSuccess:rt=>{C.currentMenuItemKey=`${rt?.slug}-page`,P.value=!1}}):L({name:le.startCase(le.camelCase(d(De.value.title))).replace(/\s+/g,""),...p},{onSuccess:rt=>{C.currentMenuItemKey=`${rt?.slug}-page`,P.value=!1}})}}),!1),$e=async()=>{await E.refetch(),E.data.value?.forEach(b=>{v.value[b.key]!=null&&(v.value[b.key]=b.value)}),B.value=le.cloneDeep(v.value);try{f.value=JSON.parse(v.value.additionalInfo||"[]")}catch{f.value=[]}};$e(),pd(()=>{setTimeout(()=>{a.params.key&&n(a.params.key)&&(C.currentMenuItemKey=a.params.key)},500)});const Ye=()=>{W(v.value,{onSuccess:()=>$e()})},Ve=["basic-info","branding","social-networks"];Di(()=>C.currentMenuItemKey,(b,p)=>{b==="add-new-page"?(C.currentMenuItemKey=p,xt(null)):Ve.includes(p)&&!Ve.includes(b)&&(Q.value||t.warning({title:l("confirm"),content:l("marketInfoDiscardChangesConfirm"),positiveText:l("yes"),negativeText:l("cancel"),onPositiveClick:async()=>{},onNegativeClick:async()=>{C.currentMenuItemKey=p}}))});const et=Ma();Di(()=>[q.value,ye.value,ce.value,O.value],([b,p,rt,Ce])=>{et.value=b||p||rt||Ce,setTimeout(()=>{et.value=void 0},500)},{immediate:!0});const H=$u({tourName:"content-management",exitOnEsc:!0,useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0,label:l("cancel")},scrollTo:{behavior:"smooth",block:"center"}}});return pd(()=>{setTimeout(()=>{const b=document.getElementById("sidebar");H.addStep({attachTo:{element:b,on:"left"},title:l("contentManagementGuideTitle1"),text:l("contentManagementGuideText1"),buttons:[{text:l("pass"),label:l("pass"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.cancel()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.next()}}]});const p=document.getElementsByClassName("page-menu-item");if(p&&p.length>0){const Ce=[];for(let nt=0;nt<p.length;nt++)Ce.push(p[nt]?.parentNode?.parentNode?.parentNode);H.addStep({attachTo:{element:Ce[0],on:"left"},title:l("contentManagementGuideTitle2"),text:l("contentManagementGuideText2"),extraHighlights:["div:has(.page-menu-item)"],buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.back()}},{text:l("next"),label:l("next"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.next()}}]})}const rt=document.getElementById("add-new-page")?.parentNode?.parentNode?.parentNode;H.addStep({attachTo:{element:rt,on:"left"},title:l("contentManagementGuideTitle3"),text:l("contentManagementGuideText3"),buttons:[{text:l("previous"),label:l("previous"),secondary:!0,classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.back()}},{text:l("ok"),label:l("ok"),classes:"p-1 text-xs font-medium text-center text-white rounded-sm focus:ring-4 focus:outline-none",action(){H.next()}}]})},1e3)}),(b,p)=>{const rt=Be,Ce=wl,nt=_u,dt=fu,Y=Zt,he=ga,ve=Fn,Ee=ya,at=xa,Vl=zr,Ya=va,Ol=vl,da=qi,fe=en,de=ja,He=H1("color-picker"),Ie=mu,Xe=qd,gt=to,Ut=Xl;return Kt(),Il(Mo,null,[X(Xe,null,{"header-extra":oe(()=>[X(Ce,null,{default:oe(()=>[Tt("div",X1,[Ve.includes(y(C).currentMenuItemKey)?(Kt(),zn(rt,{key:0,loading:y(M)||y(E).isPending.value,disabled:y(Q),type:"primary",secondary:"",onClick:Ye},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:save"})]),_:1})]),default:oe(()=>[Uo(" "+Xt(y(l)("save")),1)]),_:1},8,["loading","disabled"])):(Kt(),Il("div",J1))]),X(rt,{dashed:"",type:"primary",title:y(l)("help"),onClick:p[0]||(p[0]=Re=>y(H).start())},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:help"})]),_:1})]),_:1},8,["title"])]),_:1})]),default:oe(()=>[X(Ie,{style:An(`height: ${y(J)}px`)},{default:oe(()=>[X(Ie,{position:"absolute",style:{top:"0",bottom:"0"},"has-sider":""},{default:oe(()=>[X(dt,{id:"sidebar",bordered:"","show-trigger":"","collapse-mode":"width","content-style":"padding: 4px",collapsed:y(et),"default-collapsed":!y(V),"collapsed-width":64,"native-scrollbar":!1,width:y(V)?300:275},{default:oe(()=>[X(nt,{value:y(C).currentMenuItemKey,"onUpdate:value":p[1]||(p[1]=Re=>y(C).currentMenuItemKey=Re),"collapsed-width":64,"collapsed-icon-size":22,options:y(U)},null,8,["value","options"])]),_:1},8,["collapsed","default-collapsed","width"]),X(Ie,{"content-style":"padding: 10px 24px","native-scrollbar":!1},{default:oe(()=>[X(Q1,{name:"slide-fade"},{default:oe(()=>[Ui(Tt("section",Z1,[X(Ol,{hoverable:""},{default:oe(()=>[X(Ya,{ref_key:"basicInfoFormRef",ref:F,model:y(v),rules:h,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:oe(()=>[X(he,{path:"name"},{label:oe(()=>[Tt("b",eh,Xt(y(l)("websiteName")),1)]),default:oe(()=>[X(Y,{value:y(v).name,"onUpdate:value":p[2]||(p[2]=Re=>y(v).name=Re),placeholder:y(l)("websiteName"),class:"w-full"},null,8,["value","placeholder"])]),_:1}),X(Ee,{"x-gap":"12",span:24},{default:oe(()=>[X(ve,{span:12,path:"email"},{label:oe(()=>[Tt("b",th,Xt(y(l)("email")),1)]),default:oe(()=>[X(Y,{value:y(v).email,"onUpdate:value":p[3]||(p[3]=Re=>y(v).email=Re),placeholder:y(l)("email"),class:"w-full"},{prefix:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:email"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),X(ve,{span:12,path:"phone"},{label:oe(()=>[Tt("b",lh,Xt(y(l)("phone")),1)]),default:oe(()=>[X(Y,{value:y(v).phone,"onUpdate:value":p[4]||(p[4]=Re=>y(v).phone=Re),placeholder:y(l)("phone"),class:"w-full"},{prefix:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:phone"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),X(he,{path:"address"},{label:oe(()=>[Tt("span",ah,[Tt("b",null,Xt(y(l)("address")),1)])]),default:oe(()=>[X(Y,{value:y(v).address,"onUpdate:value":p[5]||(p[5]=Re=>y(v).address=Re),placeholder:y(l)("address"),class:"w-full"},{prefix:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:location"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),X(Ee,{"x-gap":"12",span:24},{default:oe(()=>[X(ve,{span:12,path:"postalCode"},{label:oe(()=>[Tt("b",nh,Xt(y(l)("postalCode")),1)]),default:oe(()=>[X(Y,{value:y(v).postalCode,"onUpdate:value":p[6]||(p[6]=Re=>y(v).postalCode=Re),placeholder:y(l)("postalCode"),class:"w-full"},{prefix:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:text-short-paragraph"})]),_:1})]),_:1},8,["value","placeholder"])]),_:1})]),_:1}),X(he,{"show-label":!1,path:"description"},{default:oe(()=>[X(at,{modelValue:y(v).description,"onUpdate:modelValue":p[7]||(p[7]=Re=>y(v).description=Re),placeholder:y(l)("description"),type:"textarea",class:"w-full",rows:6,sync:""},{label:oe(()=>[Tt("b",oh,Xt(y(l)("description")),1)]),_:1},8,["modelValue","placeholder"])]),_:1}),X(he,{path:"additionalInfo"},{label:oe(()=>[Tt("b",sh,Xt(y(l)("additionalInfo")),1)]),default:oe(()=>[X(Vl,{value:y(f),"onUpdate:value":p[8]||(p[8]=Re=>Si(f)?f.value=Re:null),"show-sort-button":!1,"on-create":()=>({name:"",content:""})},{"create-button-default":oe(()=>[Uo(Xt(y(l)("add")),1)]),default:oe(({value:Re})=>[Tt("div",rh,[X(Y,{value:Re.name,"onUpdate:value":Sl=>Re.name=Sl,placeholder:y(l)("name"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"]),X(Y,{value:Re.content,"onUpdate:value":Sl=>Re.content=Sl,placeholder:y(l)("content"),class:"w-full"},null,8,["value","onUpdate:value","placeholder"])])]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ei,y(C).currentMenuItemKey==="basic-info"]]),Ui(Tt("section",ih,[X(Ol,{segmented:"",size:"small"},{header:oe(()=>[Tt("span",ch,Xt(y(l)("graphicElements")),1)]),default:oe(()=>[X(Ee,{cols:"1 s:1 m:2 l:4 xl:4 2xl:4",responsive:"screen","x-gap":"8","y-gap":"8"},{default:oe(()=>[X(fe,null,{default:oe(()=>[X(Ol,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[Tt("span",dh,Xt(y(l)("logo")),1)]),default:oe(()=>[X(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[y(v).logo?(Kt(),zn(da,{key:0,class:"cursor-pointer","object-fit":"contain",style:An("border: 1px dashed "+y(K)(y(s),"white")),size:125,src:y(Z)(y(v).logo),onClick:p[9]||(p[9]=()=>{m.value="logos",r.value=!0})},null,8,["style","src"])):(Kt(),Il("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:An(`border: 1px dashed ${y(K)(y(s),"white")}; width: 125px; height: 125px`),onClick:p[10]||(p[10]=()=>{m.value="logos",r.value=!0})},[Tt("div",uh,[X(y(R),{size:"50"},{default:oe(()=>[X(y(re),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(y(l)("import")),1)])],4)),y(v).logo?(Kt(),zn(rt,{key:2,quaternary:"",onClick:p[11]||(p[11]=()=>y(v).logo="")},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[Uo(" "+Xt(y(l)("clear")),1)]),_:1})):ia("",!0)]),_:1})]),_:1})]),_:1}),X(fe,null,{default:oe(()=>[X(Ol,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[Tt("span",ph,Xt(y(l)("icon")),1)]),default:oe(()=>[X(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[y(v).icon?(Kt(),zn(da,{key:0,class:"cursor-pointer","object-fit":"contain",style:An("border: 1px dashed "+y(K)(y(s),"white")),size:125,src:y(Z)(y(v).icon),onClick:p[12]||(p[12]=()=>{m.value="icons",r.value=!0})},null,8,["style","src"])):(Kt(),Il("section",{key:1,class:"cursor-pointer flex items-center justify-center",style:An(`border: 1px dashed ${y(K)(y(s),"white")}; width: 125px; height: 125px`),onClick:p[13]||(p[13]=()=>{m.value="icons",r.value=!0})},[Tt("div",mh,[X(y(R),{size:"50"},{default:oe(()=>[X(y(re),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(y(l)("import")),1)])],4)),y(v).icon?(Kt(),zn(rt,{key:2,quaternary:"",onClick:p[14]||(p[14]=()=>y(v).icon="")},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[Uo(" "+Xt(y(l)("clear")),1)]),_:1})):ia("",!0)]),_:1})]),_:1})]),_:1}),X(fe,null,{default:oe(()=>[X(Ol,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[Tt("span",fh,Xt(y(l)("logoMonochrome")),1)]),default:oe(()=>[X(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[y(v).oneColorLogo?(Kt(),zn(da,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:An("border: 1px dashed "+y(K)(y(s),"white")),size:125,src:y(Z)(y(v).oneColorLogo),onClick:p[15]||(p[15]=()=>{m.value="monochrome-logos",r.value=!0})},null,8,["style","src"])):(Kt(),Il("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:An(`border: 1px dashed ${y(K)(y(s),"white")}; width: 125px; height: 125px`),onClick:p[16]||(p[16]=()=>{m.value="monochrome-logos",r.value=!0})},[Tt("div",_h,[X(y(R),{size:"50"},{default:oe(()=>[X(y(re),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(y(l)("import")),1)])],4)),y(v).oneColorLogo?(Kt(),zn(rt,{key:2,quaternary:"",onClick:p[17]||(p[17]=()=>y(v).oneColorLogo="")},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[Uo(" "+Xt(y(l)("clear")),1)]),_:1})):ia("",!0)]),_:1})]),_:1})]),_:1}),X(fe,null,{default:oe(()=>[X(Ol,{hoverable:"",segmented:"",size:"small",class:"h-full"},{header:oe(()=>[Tt("span",vh,Xt(y(l)("iconMonochrome")),1)]),default:oe(()=>[X(Ce,{align:"center",justify:"center",style:{height:"100%"},vertical:""},{default:oe(()=>[y(v).oneColorIcon?(Kt(),zn(da,{key:0,class:"cursor-pointer !bg-black !text-white","object-fit":"contain",style:An("border: 1px dashed "+y(K)(y(s),"white")),size:125,src:y(Z)(y(v).oneColorIcon),onClick:p[18]||(p[18]=()=>{m.value="monochrome-icons",r.value=!0})},null,8,["style","src"])):(Kt(),Il("section",{key:1,class:"cursor-pointer flex items-center justify-center bg-black text-white",style:An(`border: 1px dashed ${y(K)(y(s),"white")}; width: 125px; height: 125px`),onClick:p[19]||(p[19]=()=>{m.value="monochrome-icons",r.value=!0})},[Tt("div",yh,[X(y(R),{size:"50"},{default:oe(()=>[X(y(re),{icon:"carbon:image"})]),_:1}),Tt("span",null,Xt(y(l)("import")),1)])],4)),y(v).oneColorIcon?(Kt(),zn(rt,{key:2,quaternary:"",onClick:p[20]||(p[20]=()=>y(v).oneColorIcon="")},{icon:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),default:oe(()=>[Uo(" "+Xt(y(l)("clear")),1)]),_:1})):ia("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p[31]||(p[31]=Tt("br",null,null,-1)),X(Ol,{hoverable:"",segmented:"",size:"small"},{header:oe(()=>[Tt("span",gh,Xt(y(l)("websiteColors")),1)]),default:oe(()=>[X(Ee,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":"42"},{default:oe(()=>[X(fe,null,{default:oe(()=>[Tt("div",hh,[Tt("span",bh,Xt(y(l)("baseColor")),1),Tt("div",kh,[y(v).primaryColor?(Kt(),Il(Mo,{key:0},[X(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[21]||(p[21]=Re=>y(v).primaryColor="")},{default:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),_:1}),X(de,{vertical:""})],64)):ia("",!0),X(He,{"pure-color":y(v).primaryColor,"onUpdate:pureColor":p[22]||(p[22]=Re=>y(v).primaryColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:y(ae)?"white":"black",lang:y(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),X(fe,null,{default:oe(()=>[Tt("div",wh,[Tt("span",xh,Xt(y(l)("secondaryColor")),1),Tt("div",$h,[y(v).secondaryColor?(Kt(),Il(Mo,{key:0},[X(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[23]||(p[23]=Re=>y(v).secondaryColor="")},{default:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),_:1}),X(de,{vertical:""})],64)):ia("",!0),X(He,{"pure-color":y(v).secondaryColor,"onUpdate:pureColor":p[24]||(p[24]=Re=>y(v).secondaryColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:y(ae)?"white":"black",lang:y(o)},null,8,["pure-color","theme","lang"])])])]),_:1}),X(fe,null,{default:oe(()=>[Tt("div",Ch,[Tt("span",Ih,Xt(y(l)("tertiaryColor")),1),Tt("div",Vh,[y(v).accentColor?(Kt(),Il(Mo,{key:0},[X(rt,{text:"",type:"error",style:{"font-size":"21px"},onClick:p[25]||(p[25]=Re=>y(v).accentColor="")},{default:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:"carbon:trash-can"})]),_:1})]),_:1}),X(de,{vertical:""})],64)):ia("",!0),X(He,{"pure-color":y(v).accentColor,"onUpdate:pureColor":p[26]||(p[26]=Re=>y(v).accentColor=Re),"default-pure-color":"#00000000","picker-type":"chrome","use-type":"pure",format:"hex",shape:"circle","z-index":5e3,theme:y(ae)?"white":"black",lang:y(o)},null,8,["pure-color","theme","lang"])])])]),_:1})]),_:1})]),_:1})],512),[[Ei,y(C).currentMenuItemKey==="branding"]]),Ui(Tt("section",Sh,[X(Ol,{hoverable:""},{default:oe(()=>[X(Ya,{ref_key:"socialNetworksFormRef",ref:D,model:y(v),rules:xe,"show-label":!0,"show-require-mark":!1,size:"medium"},{default:oe(()=>[X(Ee,{"x-gap":"12",span:24},{default:oe(()=>[(Kt(),Il(Mo,null,ud($,Re=>X(ve,{key:Re.name,span:12,path:Re.name},{label:oe(()=>[Tt("b",Eh,Xt(y(l)(Re.name)),1)]),default:oe(()=>[X(Y,{value:y(v)[Re.name],"onUpdate:value":Sl=>y(v)[Re.name]=Sl,placeholder:y(l)(Re.name),class:"w-full"},{prefix:oe(()=>[X(y(R),null,{default:oe(()=>[X(y(re),{icon:Re.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["path"])),64))]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Ei,y(C).currentMenuItemKey==="social-networks"]]),y(C).currentMenuItemKey==="newsletter-email"?(Kt(),Il("section",Uh,[X(tg)])):ia("",!0),y(C).currentMenuItemKey==="newsletter-phone"?(Kt(),Il("section",Mh,[X(_g)])):ia("",!0),y(C).currentMenuItemKey==="newsletter-campaign"?(Kt(),Il("section",Th,[X(K1)])):ia("",!0),y(C).currentMenuItemKey==="ads"?(Kt(),Il("section",Dh,[X(Xu)])):ia("",!0),y(C).currentMenuItemKey==="videos"?(Kt(),Il("section",Nh,[X(mv)])):ia("",!0),y(C).currentMenuItemKey==="content-models"?(Kt(),Il("section",zh,[X(p1)])):ia("",!0),y(C).currentMenuItemKey==="menus"?(Kt(),Il("section",Ah,[X(a_)])):ia("",!0),y(C).currentMenuItemKey==="content-permalinks"?(Kt(),Il("section",Ph,[X(P1)])):ia("",!0),y(C).currentMenuItemKey==="page-sections"?(Kt(),Il("section",Lh,[X(Fy)])):ia("",!0),(Kt(!0),Il(Mo,null,ud(y(me),(Re,Sl)=>(Kt(),Il(Mo,{key:`${Re.slug}-page`},[y(C).currentMenuItemKey===`${Re.slug}-page`?(Kt(),Il("section",{key:`${Re.slug}-page`},[X(Am,{slug:Re.slug,"open-form-modal":xt,onDelete:()=>{y(C).currentMenuItemKey=(y(me)?.length||0)>1?`${y(me)?.[Sl-1].slug}-page`:e[0],y(z)()}},null,8,["slug","onDelete"])])):ia("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),X(gt,{show:y(r),"onUpdate:show":p[27]||(p[27]=Re=>Si(r)?r.value=Re:null),title:y(l)("selectImage"),"upload-config":{folder:y(m),limit:0,maxSize:0,baseUrl:y(j)?.apiUrl+"/media-files/upload",excludedExtensions:[]},onSubmit:x},null,8,["show","title","upload-config"]),X(Ut,{show:y(P),"onUpdate:show":p[29]||(p[29]=Re=>Si(P)?P.value=Re:null),loading:y(A)||y(I),preset:"dialog",style:{width:"500px"},bordered:!1,"show-icon":!1,"mask-closable":!1,title:y(ue)?y(l)("editPage"):y(l)("addPage"),"positive-text":y(l)("validate"),"negative-text":y(l)("cancel"),onPositiveClick:Vt,onNegativeClick:p[30]||(p[30]=Re=>P.value=!1)},{default:oe(()=>[X(Ya,{ref_key:"addPageFormRef",ref:ge,model:y(De),rules:ne,"show-require-mark":!1,size:"medium"},{default:oe(()=>[X(he,{"show-label":!1,path:"title",class:"mt-5"},{default:oe(()=>[X(at,{modelValue:y(De).title,"onUpdate:modelValue":p[28]||(p[28]=Re=>y(De).title=Re),placeholder:y(l)("title"),class:"w-full",sync:"",onKeydown:W1(Vt,["enter"])},{label:oe(()=>[Uo(Xt(y(l)("title")),1)]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading","title","positive-text","negative-text"])],64)}}}),Ob=On(jh,[["__scopeId","data-v-eb0e0d24"]]);export{Ob as default};
